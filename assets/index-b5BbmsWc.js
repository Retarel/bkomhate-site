var W9=Object.defineProperty;var Y9=(t,e,n)=>e in t?W9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var bw=(t,e,n)=>Y9(t,typeof e!="symbol"?e+"":e,n);function J9(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function fs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Sw={exports:{}},Zh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EM;function Q9(){if(EM)return Zh;EM=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,o){var s=null;if(o!==void 0&&(s=""+o),i.key!==void 0&&(s=""+i.key),"key"in i){o={};for(var l in i)l!=="key"&&(o[l]=i[l])}else o=i;return i=o.ref,{$$typeof:t,type:r,key:s,ref:i!==void 0?i:null,props:o}}return Zh.Fragment=e,Zh.jsx=n,Zh.jsxs=n,Zh}var wM;function X9(){return wM||(wM=1,Sw.exports=Q9()),Sw.exports}var I=X9(),Aw={exports:{}},Qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bM;function Z9(){if(bM)return Qe;bM=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),s=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),g=Symbol.iterator;function v(K){return K===null||typeof K!="object"?null:(K=g&&K[g]||K["@@iterator"],typeof K=="function"?K:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,S={};function A(K,le,ae){this.props=K,this.context=le,this.refs=S,this.updater=ae||E}A.prototype.isReactComponent={},A.prototype.setState=function(K,le){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,le,"setState")},A.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function C(){}C.prototype=A.prototype;function D(K,le,ae){this.props=K,this.context=le,this.refs=S,this.updater=ae||E}var k=D.prototype=new C;k.constructor=D,b(k,A.prototype),k.isPureReactComponent=!0;var q=Array.isArray,$={H:null,A:null,T:null,S:null,V:null},H=Object.prototype.hasOwnProperty;function M(K,le,ae,de,Le,Be){return ae=Be.ref,{$$typeof:t,type:K,key:le,ref:ae!==void 0?ae:null,props:Be}}function O(K,le){return M(K.type,le,void 0,void 0,void 0,K.props)}function L(K){return typeof K=="object"&&K!==null&&K.$$typeof===t}function F(K){var le={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(ae){return le[ae]})}var V=/\/+/g;function G(K,le){return typeof K=="object"&&K!==null&&K.key!=null?F(""+K.key):le.toString(36)}function z(){}function Se(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(z,z):(K.status="pending",K.then(function(le){K.status==="pending"&&(K.status="fulfilled",K.value=le)},function(le){K.status==="pending"&&(K.status="rejected",K.reason=le)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function Re(K,le,ae,de,Le){var Be=typeof K;(Be==="undefined"||Be==="boolean")&&(K=null);var qe=!1;if(K===null)qe=!0;else switch(Be){case"bigint":case"string":case"number":qe=!0;break;case"object":switch(K.$$typeof){case t:case e:qe=!0;break;case h:return qe=K._init,Re(qe(K._payload),le,ae,de,Le)}}if(qe)return Le=Le(K),qe=de===""?"."+G(K,0):de,q(Le)?(ae="",qe!=null&&(ae=qe.replace(V,"$&/")+"/"),Re(Le,le,ae,"",function(xe){return xe})):Le!=null&&(L(Le)&&(Le=O(Le,ae+(Le.key==null||K&&K.key===Le.key?"":(""+Le.key).replace(V,"$&/")+"/")+qe)),le.push(Le)),1;qe=0;var hn=de===""?".":de+":";if(q(K))for(var wt=0;wt<K.length;wt++)de=K[wt],Be=hn+G(de,wt),qe+=Re(de,le,ae,Be,Le);else if(wt=v(K),typeof wt=="function")for(K=wt.call(K),wt=0;!(de=K.next()).done;)de=de.value,Be=hn+G(de,wt++),qe+=Re(de,le,ae,Be,Le);else if(Be==="object"){if(typeof K.then=="function")return Re(Se(K),le,ae,de,Le);throw le=String(K),Error("Objects are not valid as a React child (found: "+(le==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":le)+"). If you meant to render a collection of children, use an array instead.")}return qe}function te(K,le,ae){if(K==null)return K;var de=[],Le=0;return Re(K,de,"","",function(Be){return le.call(ae,Be,Le++)}),de}function me(K){if(K._status===-1){var le=K._result;le=le(),le.then(function(ae){(K._status===0||K._status===-1)&&(K._status=1,K._result=ae)},function(ae){(K._status===0||K._status===-1)&&(K._status=2,K._result=ae)}),K._status===-1&&(K._status=0,K._result=le)}if(K._status===1)return K._result.default;throw K._result}var be=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var le=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(le))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)};function Oe(){}return Qe.Children={map:te,forEach:function(K,le,ae){te(K,function(){le.apply(this,arguments)},ae)},count:function(K){var le=0;return te(K,function(){le++}),le},toArray:function(K){return te(K,function(le){return le})||[]},only:function(K){if(!L(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},Qe.Component=A,Qe.Fragment=n,Qe.Profiler=i,Qe.PureComponent=D,Qe.StrictMode=r,Qe.Suspense=c,Qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,Qe.__COMPILER_RUNTIME={__proto__:null,c:function(K){return $.H.useMemoCache(K)}},Qe.cache=function(K){return function(){return K.apply(null,arguments)}},Qe.cloneElement=function(K,le,ae){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var de=b({},K.props),Le=K.key,Be=void 0;if(le!=null)for(qe in le.ref!==void 0&&(Be=void 0),le.key!==void 0&&(Le=""+le.key),le)!H.call(le,qe)||qe==="key"||qe==="__self"||qe==="__source"||qe==="ref"&&le.ref===void 0||(de[qe]=le[qe]);var qe=arguments.length-2;if(qe===1)de.children=ae;else if(1<qe){for(var hn=Array(qe),wt=0;wt<qe;wt++)hn[wt]=arguments[wt+2];de.children=hn}return M(K.type,Le,void 0,void 0,Be,de)},Qe.createContext=function(K){return K={$$typeof:s,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:o,_context:K},K},Qe.createElement=function(K,le,ae){var de,Le={},Be=null;if(le!=null)for(de in le.key!==void 0&&(Be=""+le.key),le)H.call(le,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(Le[de]=le[de]);var qe=arguments.length-2;if(qe===1)Le.children=ae;else if(1<qe){for(var hn=Array(qe),wt=0;wt<qe;wt++)hn[wt]=arguments[wt+2];Le.children=hn}if(K&&K.defaultProps)for(de in qe=K.defaultProps,qe)Le[de]===void 0&&(Le[de]=qe[de]);return M(K,Be,void 0,void 0,null,Le)},Qe.createRef=function(){return{current:null}},Qe.forwardRef=function(K){return{$$typeof:l,render:K}},Qe.isValidElement=L,Qe.lazy=function(K){return{$$typeof:h,_payload:{_status:-1,_result:K},_init:me}},Qe.memo=function(K,le){return{$$typeof:f,type:K,compare:le===void 0?null:le}},Qe.startTransition=function(K){var le=$.T,ae={};$.T=ae;try{var de=K(),Le=$.S;Le!==null&&Le(ae,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(Oe,be)}catch(Be){be(Be)}finally{$.T=le}},Qe.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},Qe.use=function(K){return $.H.use(K)},Qe.useActionState=function(K,le,ae){return $.H.useActionState(K,le,ae)},Qe.useCallback=function(K,le){return $.H.useCallback(K,le)},Qe.useContext=function(K){return $.H.useContext(K)},Qe.useDebugValue=function(){},Qe.useDeferredValue=function(K,le){return $.H.useDeferredValue(K,le)},Qe.useEffect=function(K,le,ae){var de=$.H;if(typeof ae=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return de.useEffect(K,le)},Qe.useId=function(){return $.H.useId()},Qe.useImperativeHandle=function(K,le,ae){return $.H.useImperativeHandle(K,le,ae)},Qe.useInsertionEffect=function(K,le){return $.H.useInsertionEffect(K,le)},Qe.useLayoutEffect=function(K,le){return $.H.useLayoutEffect(K,le)},Qe.useMemo=function(K,le){return $.H.useMemo(K,le)},Qe.useOptimistic=function(K,le){return $.H.useOptimistic(K,le)},Qe.useReducer=function(K,le,ae){return $.H.useReducer(K,le,ae)},Qe.useRef=function(K){return $.H.useRef(K)},Qe.useState=function(K){return $.H.useState(K)},Qe.useSyncExternalStore=function(K,le,ae){return $.H.useSyncExternalStore(K,le,ae)},Qe.useTransition=function(){return $.H.useTransition()},Qe.version="19.1.1",Qe}var SM;function Ed(){return SM||(SM=1,Aw.exports=Z9()),Aw.exports}var P=Ed();const g4=fs(P),e8=J9({__proto__:null,default:g4},[P]);var xw={exports:{}},ep={},Cw={exports:{}},Iw={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AM;function t8(){return AM||(AM=1,(function(t){function e(te,me){var be=te.length;te.push(me);e:for(;0<be;){var Oe=be-1>>>1,K=te[Oe];if(0<i(K,me))te[Oe]=me,te[be]=K,be=Oe;else break e}}function n(te){return te.length===0?null:te[0]}function r(te){if(te.length===0)return null;var me=te[0],be=te.pop();if(be!==me){te[0]=be;e:for(var Oe=0,K=te.length,le=K>>>1;Oe<le;){var ae=2*(Oe+1)-1,de=te[ae],Le=ae+1,Be=te[Le];if(0>i(de,be))Le<K&&0>i(Be,de)?(te[Oe]=Be,te[Le]=be,Oe=Le):(te[Oe]=de,te[ae]=be,Oe=ae);else if(Le<K&&0>i(Be,be))te[Oe]=Be,te[Le]=be,Oe=Le;else break e}}return me}function i(te,me){var be=te.sortIndex-me.sortIndex;return be!==0?be:te.id-me.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],f=[],h=1,g=null,v=3,E=!1,b=!1,S=!1,A=!1,C=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function q(te){for(var me=n(f);me!==null;){if(me.callback===null)r(f);else if(me.startTime<=te)r(f),me.sortIndex=me.expirationTime,e(c,me);else break;me=n(f)}}function $(te){if(S=!1,q(te),!b)if(n(c)!==null)b=!0,H||(H=!0,G());else{var me=n(f);me!==null&&Re($,me.startTime-te)}}var H=!1,M=-1,O=5,L=-1;function F(){return A?!0:!(t.unstable_now()-L<O)}function V(){if(A=!1,H){var te=t.unstable_now();L=te;var me=!0;try{e:{b=!1,S&&(S=!1,D(M),M=-1),E=!0;var be=v;try{t:{for(q(te),g=n(c);g!==null&&!(g.expirationTime>te&&F());){var Oe=g.callback;if(typeof Oe=="function"){g.callback=null,v=g.priorityLevel;var K=Oe(g.expirationTime<=te);if(te=t.unstable_now(),typeof K=="function"){g.callback=K,q(te),me=!0;break t}g===n(c)&&r(c),q(te)}else r(c);g=n(c)}if(g!==null)me=!0;else{var le=n(f);le!==null&&Re($,le.startTime-te),me=!1}}break e}finally{g=null,v=be,E=!1}me=void 0}}finally{me?G():H=!1}}}var G;if(typeof k=="function")G=function(){k(V)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,Se=z.port2;z.port1.onmessage=V,G=function(){Se.postMessage(null)}}else G=function(){C(V,0)};function Re(te,me){M=C(function(){te(t.unstable_now())},me)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(te){te.callback=null},t.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<te?Math.floor(1e3/te):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(te){switch(v){case 1:case 2:case 3:var me=3;break;default:me=v}var be=v;v=me;try{return te()}finally{v=be}},t.unstable_requestPaint=function(){A=!0},t.unstable_runWithPriority=function(te,me){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var be=v;v=te;try{return me()}finally{v=be}},t.unstable_scheduleCallback=function(te,me,be){var Oe=t.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?Oe+be:Oe):be=Oe,te){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=be+K,te={id:h++,callback:me,priorityLevel:te,startTime:be,expirationTime:K,sortIndex:-1},be>Oe?(te.sortIndex=be,e(f,te),n(c)===null&&te===n(f)&&(S?(D(M),M=-1):S=!0,Re($,be-Oe))):(te.sortIndex=K,e(c,te),b||E||(b=!0,H||(H=!0,G()))),te},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(te){var me=v;return function(){var be=v;v=me;try{return te.apply(this,arguments)}finally{v=be}}}})(Iw)),Iw}var xM;function n8(){return xM||(xM=1,Cw.exports=t8()),Cw.exports}var Rw={exports:{}},Er={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CM;function r8(){if(CM)return Er;CM=1;var t=Ed();function e(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)f+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(c,f,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:c,containerInfo:f,implementation:h}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,f){if(c==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Er.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Er.createPortal=function(c,f){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(c,f,null,h)},Er.flushSync=function(c){var f=s.T,h=r.p;try{if(s.T=null,r.p=2,c)return c()}finally{s.T=f,r.p=h,r.d.f()}},Er.preconnect=function(c,f){typeof c=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(c,f))},Er.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},Er.preinit=function(c,f){if(typeof c=="string"&&f&&typeof f.as=="string"){var h=f.as,g=l(h,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,E=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;h==="style"?r.d.S(c,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:v,fetchPriority:E}):h==="script"&&r.d.X(c,{crossOrigin:g,integrity:v,fetchPriority:E,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Er.preinitModule=function(c,f){if(typeof c=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var h=l(f.as,f.crossOrigin);r.d.M(c,{crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(c)},Er.preload=function(c,f){if(typeof c=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var h=f.as,g=l(h,f.crossOrigin);r.d.L(c,h,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Er.preloadModule=function(c,f){if(typeof c=="string")if(f){var h=l(f.as,f.crossOrigin);r.d.m(c,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(c)},Er.requestFormReset=function(c){r.d.r(c)},Er.unstable_batchedUpdates=function(c,f){return c(f)},Er.useFormState=function(c,f,h){return s.H.useFormState(c,f,h)},Er.useFormStatus=function(){return s.H.useHostTransitionStatus()},Er.version="19.1.1",Er}var IM;function y4(){if(IM)return Rw.exports;IM=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Rw.exports=r8(),Rw.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RM;function i8(){if(RM)return ep;RM=1;var t=n8(),e=Ed(),n=y4();function r(a){var u="https://react.dev/errors/"+a;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+a+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function o(a){var u=a,d=a;if(a.alternate)for(;u.return;)u=u.return;else{a=u;do u=a,(u.flags&4098)!==0&&(d=u.return),a=u.return;while(a)}return u.tag===3?d:null}function s(a){if(a.tag===13){var u=a.memoizedState;if(u===null&&(a=a.alternate,a!==null&&(u=a.memoizedState)),u!==null)return u.dehydrated}return null}function l(a){if(o(a)!==a)throw Error(r(188))}function c(a){var u=a.alternate;if(!u){if(u=o(a),u===null)throw Error(r(188));return u!==a?null:a}for(var d=a,y=u;;){var T=d.return;if(T===null)break;var w=T.alternate;if(w===null){if(y=T.return,y!==null){d=y;continue}break}if(T.child===w.child){for(w=T.child;w;){if(w===d)return l(T),a;if(w===y)return l(T),u;w=w.sibling}throw Error(r(188))}if(d.return!==y.return)d=T,y=w;else{for(var N=!1,U=T.child;U;){if(U===d){N=!0,d=T,y=w;break}if(U===y){N=!0,y=T,d=w;break}U=U.sibling}if(!N){for(U=w.child;U;){if(U===d){N=!0,d=w,y=T;break}if(U===y){N=!0,y=w,d=T;break}U=U.sibling}if(!N)throw Error(r(189))}}if(d.alternate!==y)throw Error(r(190))}if(d.tag!==3)throw Error(r(188));return d.stateNode.current===d?a:u}function f(a){var u=a.tag;if(u===5||u===26||u===27||u===6)return a;for(a=a.child;a!==null;){if(u=f(a),u!==null)return u;a=a.sibling}return null}var h=Object.assign,g=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),D=Symbol.for("react.consumer"),k=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function G(a){return a===null||typeof a!="object"?null:(a=V&&a[V]||a["@@iterator"],typeof a=="function"?a:null)}var z=Symbol.for("react.client.reference");function Se(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===z?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case b:return"Fragment";case A:return"Profiler";case S:return"StrictMode";case $:return"Suspense";case H:return"SuspenseList";case L:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case E:return"Portal";case k:return(a.displayName||"Context")+".Provider";case D:return(a._context.displayName||"Context")+".Consumer";case q:var u=a.render;return a=a.displayName,a||(a=u.displayName||u.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case M:return u=a.displayName||null,u!==null?u:Se(a.type)||"Memo";case O:u=a._payload,a=a._init;try{return Se(a(u))}catch{}}return null}var Re=Array.isArray,te=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be={pending:!1,data:null,method:null,action:null},Oe=[],K=-1;function le(a){return{current:a}}function ae(a){0>K||(a.current=Oe[K],Oe[K]=null,K--)}function de(a,u){K++,Oe[K]=a.current,a.current=u}var Le=le(null),Be=le(null),qe=le(null),hn=le(null);function wt(a,u){switch(de(qe,u),de(Be,a),de(Le,null),u.nodeType){case 9:case 11:a=(a=u.documentElement)&&(a=a.namespaceURI)?YN(a):0;break;default:if(a=u.tagName,u=u.namespaceURI)u=YN(u),a=JN(u,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}ae(Le),de(Le,a)}function xe(){ae(Le),ae(Be),ae(qe)}function je(a){a.memoizedState!==null&&de(hn,a);var u=Le.current,d=JN(u,a.type);u!==d&&(de(Be,a),de(Le,d))}function Ye(a){Be.current===a&&(ae(Le),ae(Be)),hn.current===a&&(ae(hn),Wh._currentValue=be)}var ye=Object.prototype.hasOwnProperty,jt=t.unstable_scheduleCallback,tt=t.unstable_cancelCallback,Tn=t.unstable_shouldYield,Cn=t.unstable_requestPaint,ln=t.unstable_now,_a=t.unstable_getCurrentPriorityLevel,Ta=t.unstable_ImmediatePriority,bo=t.unstable_UserBlockingPriority,So=t.unstable_NormalPriority,Xd=t.unstable_LowPriority,Ea=t.unstable_IdlePriority,$l=t.log,Ec=t.unstable_setDisableYieldValue,en=null,_t=null;function Pr(a){if(typeof $l=="function"&&Ec(a),_t&&typeof _t.setStrictMode=="function")try{_t.setStrictMode(en,a)}catch{}}var bt=Math.clz32?Math.clz32:to,wa=Math.log,ba=Math.LN2;function to(a){return a>>>=0,a===0?32:31-(wa(a)/ba|0)|0}var Ao=256,xo=4194304;function jr(a){var u=a&42;if(u!==0)return u;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function ps(a,u,d){var y=a.pendingLanes;if(y===0)return 0;var T=0,w=a.suspendedLanes,N=a.pingedLanes;a=a.warmLanes;var U=y&134217727;return U!==0?(y=U&~w,y!==0?T=jr(y):(N&=U,N!==0?T=jr(N):d||(d=U&~a,d!==0&&(T=jr(d))))):(U=y&~w,U!==0?T=jr(U):N!==0?T=jr(N):d||(d=y&~a,d!==0&&(T=jr(d)))),T===0?0:u!==0&&u!==T&&(u&w)===0&&(w=T&-T,d=u&-u,w>=d||w===32&&(d&4194048)!==0)?u:T}function Co(a,u){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&u)===0}function Z(a,u){switch(a){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ce(){var a=Ao;return Ao<<=1,(Ao&4194048)===0&&(Ao=256),a}function Ie(){var a=xo;return xo<<=1,(xo&62914560)===0&&(xo=4194304),a}function _e(a){for(var u=[],d=0;31>d;d++)u.push(a);return u}function Ee(a,u){a.pendingLanes|=u,u!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function St(a,u,d,y,T,w){var N=a.pendingLanes;a.pendingLanes=d,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=d,a.entangledLanes&=d,a.errorRecoveryDisabledLanes&=d,a.shellSuspendCounter=0;var U=a.entanglements,j=a.expirationTimes,ee=a.hiddenUpdates;for(d=N&~d;0<d;){var ue=31-bt(d),he=1<<ue;U[ue]=0,j[ue]=-1;var ne=ee[ue];if(ne!==null)for(ee[ue]=null,ue=0;ue<ne.length;ue++){var re=ne[ue];re!==null&&(re.lane&=-536870913)}d&=~he}y!==0&&ut(a,y,0),w!==0&&T===0&&a.tag!==0&&(a.suspendedLanes|=w&~(N&~u))}function ut(a,u,d){a.pendingLanes|=u,a.suspendedLanes&=~u;var y=31-bt(u);a.entangledLanes|=u,a.entanglements[y]=a.entanglements[y]|1073741824|d&4194090}function Ct(a,u){var d=a.entangledLanes|=u;for(a=a.entanglements;d;){var y=31-bt(d),T=1<<y;T&u|a[y]&u&&(a[y]|=u),d&=~T}}function Kt(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function nt(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function pt(){var a=me.p;return a!==0?a:(a=window.event,a===void 0?32:mM(a.type))}function gt(a,u){var d=me.p;try{return me.p=a,u()}finally{me.p=d}}var Ze=Math.random().toString(36).slice(2),at="__reactFiber$"+Ze,kt="__reactProps$"+Ze,In="__reactContainer$"+Ze,no="__reactEvents$"+Ze,Zd="__reactListeners$"+Ze,Sa="__reactHandles$"+Ze,Eg="__reactResources$"+Ze,zl="__reactMarker$"+Ze;function Aa(a){delete a[at],delete a[kt],delete a[no],delete a[Zd],delete a[Sa]}function ms(a){var u=a[at];if(u)return u;for(var d=a.parentNode;d;){if(u=d[In]||d[at]){if(d=u.alternate,u.child!==null||d!==null&&d.child!==null)for(a=eM(a);a!==null;){if(d=a[at])return d;a=eM(a)}return u}a=d,d=a.parentNode}return null}function Io(a){if(a=a[at]||a[In]){var u=a.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return a}return null}function Ro(a){var u=a.tag;if(u===5||u===26||u===27||u===6)return a.stateNode;throw Error(r(33))}function Nr(a){var u=a[Eg];return u||(u=a[Eg]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function En(a){a[zl]=!0}var eh=new Set,wc={};function ro(a,u){gs(a,u),gs(a+"Capture",u)}function gs(a,u){for(wc[a]=u,a=0;a<u.length;a++)eh.add(u[a])}var wg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),bg={},Hl={};function Sg(a){return ye.call(Hl,a)?!0:ye.call(bg,a)?!1:wg.test(a)?Hl[a]=!0:(bg[a]=!0,!1)}function xa(a,u,d){if(Sg(u))if(d===null)a.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":a.removeAttribute(u);return;case"boolean":var y=u.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){a.removeAttribute(u);return}}a.setAttribute(u,""+d)}}function Po(a,u,d){if(d===null)a.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(u);return}a.setAttribute(u,""+d)}}function lr(a,u,d,y){if(y===null)a.removeAttribute(d);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(d);return}a.setAttributeNS(u,d,""+y)}}var Gl,Ag;function ys(a){if(Gl===void 0)try{throw Error()}catch(d){var u=d.stack.trim().match(/\n( *(at )?)/);Gl=u&&u[1]||"",Ag=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Gl+a+Ag}var bc=!1;function Sc(a,u){if(!a||bc)return"";bc=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(u){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(re){var ne=re}Reflect.construct(a,[],he)}else{try{he.call()}catch(re){ne=re}a.call(he.prototype)}}else{try{throw Error()}catch(re){ne=re}(he=a())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(re){if(re&&ne&&typeof re.stack=="string")return[re.stack,ne.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var T=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");T&&T.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=y.DetermineComponentFrameRoot(),N=w[0],U=w[1];if(N&&U){var j=N.split(`
`),ee=U.split(`
`);for(T=y=0;y<j.length&&!j[y].includes("DetermineComponentFrameRoot");)y++;for(;T<ee.length&&!ee[T].includes("DetermineComponentFrameRoot");)T++;if(y===j.length||T===ee.length)for(y=j.length-1,T=ee.length-1;1<=y&&0<=T&&j[y]!==ee[T];)T--;for(;1<=y&&0<=T;y--,T--)if(j[y]!==ee[T]){if(y!==1||T!==1)do if(y--,T--,0>T||j[y]!==ee[T]){var ue=`
`+j[y].replace(" at new "," at ");return a.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",a.displayName)),ue}while(1<=y&&0<=T);break}}}finally{bc=!1,Error.prepareStackTrace=d}return(d=a?a.displayName||a.name:"")?ys(d):""}function th(a){switch(a.tag){case 26:case 27:case 5:return ys(a.type);case 16:return ys("Lazy");case 13:return ys("Suspense");case 19:return ys("SuspenseList");case 0:case 15:return Sc(a.type,!1);case 11:return Sc(a.type.render,!1);case 1:return Sc(a.type,!0);case 31:return ys("Activity");default:return""}}function Ac(a){try{var u="";do u+=th(a),a=a.return;while(a);return u}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function Mr(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function nh(a){var u=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function CT(a){var u=nh(a)?"checked":"value",d=Object.getOwnPropertyDescriptor(a.constructor.prototype,u),y=""+a[u];if(!a.hasOwnProperty(u)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var T=d.get,w=d.set;return Object.defineProperty(a,u,{configurable:!0,get:function(){return T.call(this)},set:function(N){y=""+N,w.call(this,N)}}),Object.defineProperty(a,u,{enumerable:d.enumerable}),{getValue:function(){return y},setValue:function(N){y=""+N},stopTracking:function(){a._valueTracker=null,delete a[u]}}}}function xc(a){a._valueTracker||(a._valueTracker=CT(a))}function rh(a){if(!a)return!1;var u=a._valueTracker;if(!u)return!0;var d=u.getValue(),y="";return a&&(y=nh(a)?a.checked?"true":"false":a.value),a=y,a!==d?(u.setValue(a),!0):!1}function jl(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var IT=/[\n"\\]/g;function Rn(a){return a.replace(IT,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function ii(a,u,d,y,T,w,N,U){a.name="",N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?a.type=N:a.removeAttribute("type"),u!=null?N==="number"?(u===0&&a.value===""||a.value!=u)&&(a.value=""+Mr(u)):a.value!==""+Mr(u)&&(a.value=""+Mr(u)):N!=="submit"&&N!=="reset"||a.removeAttribute("value"),u!=null?Ca(a,N,Mr(u)):d!=null?Ca(a,N,Mr(d)):y!=null&&a.removeAttribute("value"),T==null&&w!=null&&(a.defaultChecked=!!w),T!=null&&(a.checked=T&&typeof T!="function"&&typeof T!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?a.name=""+Mr(U):a.removeAttribute("name")}function Kl(a,u,d,y,T,w,N,U){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(a.type=w),u!=null||d!=null){if(!(w!=="submit"&&w!=="reset"||u!=null))return;d=d!=null?""+Mr(d):"",u=u!=null?""+Mr(u):d,U||u===a.value||(a.value=u),a.defaultValue=u}y=y??T,y=typeof y!="function"&&typeof y!="symbol"&&!!y,a.checked=U?a.checked:!!y,a.defaultChecked=!!y,N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(a.name=N)}function Ca(a,u,d){u==="number"&&jl(a.ownerDocument)===a||a.defaultValue===""+d||(a.defaultValue=""+d)}function vs(a,u,d,y){if(a=a.options,u){u={};for(var T=0;T<d.length;T++)u["$"+d[T]]=!0;for(d=0;d<a.length;d++)T=u.hasOwnProperty("$"+a[d].value),a[d].selected!==T&&(a[d].selected=T),T&&y&&(a[d].defaultSelected=!0)}else{for(d=""+Mr(d),u=null,T=0;T<a.length;T++){if(a[T].value===d){a[T].selected=!0,y&&(a[T].defaultSelected=!0);return}u!==null||a[T].disabled||(u=a[T])}u!==null&&(u.selected=!0)}}function Ot(a,u,d){if(u!=null&&(u=""+Mr(u),u!==a.value&&(a.value=u),d==null)){a.defaultValue!==u&&(a.defaultValue=u);return}a.defaultValue=d!=null?""+Mr(d):""}function Wl(a,u,d,y){if(u==null){if(y!=null){if(d!=null)throw Error(r(92));if(Re(y)){if(1<y.length)throw Error(r(93));y=y[0]}d=y}d==null&&(d=""),u=d}d=Mr(u),a.defaultValue=d,y=a.textContent,y===d&&y!==""&&y!==null&&(a.value=y)}function Ii(a,u){if(u){var d=a.firstChild;if(d&&d===a.lastChild&&d.nodeType===3){d.nodeValue=u;return}}a.textContent=u}var Yl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xg(a,u,d){var y=u.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?y?a.setProperty(u,""):u==="float"?a.cssFloat="":a[u]="":y?a.setProperty(u,d):typeof d!="number"||d===0||Yl.has(u)?u==="float"?a.cssFloat=d:a[u]=(""+d).trim():a[u]=d+"px"}function ih(a,u,d){if(u!=null&&typeof u!="object")throw Error(r(62));if(a=a.style,d!=null){for(var y in d)!d.hasOwnProperty(y)||u!=null&&u.hasOwnProperty(y)||(y.indexOf("--")===0?a.setProperty(y,""):y==="float"?a.cssFloat="":a[y]="");for(var T in u)y=u[T],u.hasOwnProperty(T)&&d[T]!==y&&xg(a,T,y)}else for(var w in u)u.hasOwnProperty(w)&&xg(a,w,u[w])}function oh(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var RT=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),PT=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Cc(a){return PT.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var _s=null;function Ri(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Ts=null,Es=null;function sh(a){var u=Io(a);if(u&&(a=u.stateNode)){var d=a[kt]||null;e:switch(a=u.stateNode,u.type){case"input":if(ii(a,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),u=d.name,d.type==="radio"&&u!=null){for(d=a;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+Rn(""+u)+'"][type="radio"]'),u=0;u<d.length;u++){var y=d[u];if(y!==a&&y.form===a.form){var T=y[kt]||null;if(!T)throw Error(r(90));ii(y,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name)}}for(u=0;u<d.length;u++)y=d[u],y.form===a.form&&rh(y)}break e;case"textarea":Ot(a,d.value,d.defaultValue);break e;case"select":u=d.value,u!=null&&vs(a,!!d.multiple,u,!1)}}}var No=!1;function Cg(a,u,d){if(No)return a(u,d);No=!0;try{var y=a(u);return y}finally{if(No=!1,(Ts!==null||Es!==null)&&(Ty(),Ts&&(u=Ts,a=Es,Es=Ts=null,sh(u),a)))for(u=0;u<a.length;u++)sh(a[u])}}function Jl(a,u){var d=a.stateNode;if(d===null)return null;var y=d[kt]||null;if(y===null)return null;d=y[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(a=a.type,y=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!y;break e;default:a=!1}if(a)return null;if(d&&typeof d!="function")throw Error(r(231,u,typeof d));return d}var io=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pi=!1;if(io)try{var Ql={};Object.defineProperty(Ql,"passive",{get:function(){Pi=!0}}),window.addEventListener("test",Ql,Ql),window.removeEventListener("test",Ql,Ql)}catch{Pi=!1}var Mo=null,Ia=null,ws=null;function ah(){if(ws)return ws;var a,u=Ia,d=u.length,y,T="value"in Mo?Mo.value:Mo.textContent,w=T.length;for(a=0;a<d&&u[a]===T[a];a++);var N=d-a;for(y=1;y<=N&&u[d-y]===T[w-y];y++);return ws=T.slice(a,1<y?1-y:void 0)}function Do(a){var u=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&u===13&&(a=13)):a=u,a===10&&(a=13),32<=a||a===13?a:0}function ko(){return!0}function lh(){return!1}function jn(a){function u(d,y,T,w,N){this._reactName=d,this._targetInst=T,this.type=y,this.nativeEvent=w,this.target=N,this.currentTarget=null;for(var U in a)a.hasOwnProperty(U)&&(d=a[U],this[U]=d?d(w):w[U]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?ko:lh,this.isPropagationStopped=lh,this}return h(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=ko)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=ko)},persist:function(){},isPersistent:ko}),u}var At={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ic=jn(At),Xl=h({},At,{view:0,detail:0}),Ig=jn(Xl),Rc,Pc,Oo,Zl=h({},Xl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nu,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Oo&&(Oo&&a.type==="mousemove"?(Rc=a.screenX-Oo.screenX,Pc=a.screenY-Oo.screenY):Pc=Rc=0,Oo=a),Rc)},movementY:function(a){return"movementY"in a?a.movementY:Pc}}),Ni=jn(Zl),Rg=h({},Zl,{dataTransfer:0}),NT=jn(Rg),eu=h({},Xl,{relatedTarget:0}),Nc=jn(eu),uh=h({},At,{animationName:0,elapsedTime:0,pseudoElement:0}),Mc=jn(uh),Pg=h({},At,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Dc=jn(Pg),MT=h({},At,{data:0}),ch=jn(MT),tu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ng={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fh(a){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(a):(a=Mg[a])?!!u[a]:!1}function nu(){return fh}var Dg=h({},Xl,{key:function(a){if(a.key){var u=tu[a.key]||a.key;if(u!=="Unidentified")return u}return a.type==="keypress"?(a=Do(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Ng[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nu,charCode:function(a){return a.type==="keypress"?Do(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Do(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),kc=jn(Dg),kg=h({},Zl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dh=jn(kg),bs=h({},Xl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nu}),Og=jn(bs),Lg=h({},At,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vg=jn(Lg),Ug=h({},Zl,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Oc=jn(Ug),Dr=h({},At,{newState:0,oldState:0}),Fg=jn(Dr),Bg=[9,13,27,32],Lo=io&&"CompositionEvent"in window,_=null;io&&"documentMode"in document&&(_=document.documentMode);var x=io&&"TextEvent"in window&&!_,R=io&&(!Lo||_&&8<_&&11>=_),B=" ",J=!1;function oe(a,u){switch(a){case"keyup":return Bg.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Te(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ct=!1;function Vn(a,u){switch(a){case"compositionend":return Te(u);case"keypress":return u.which!==32?null:(J=!0,B);case"textInput":return a=u.data,a===B&&J?null:a;default:return null}}function ft(a,u){if(ct)return a==="compositionend"||!Lo&&oe(a,u)?(a=ah(),ws=Ia=Mo=null,ct=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return R&&u.locale!=="ko"?null:u.data;default:return null}}var Kn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Un(a){var u=a&&a.nodeName&&a.nodeName.toLowerCase();return u==="input"?!!Kn[a.type]:u==="textarea"}function Ss(a,u,d,y){Ts?Es?Es.push(y):Es=[y]:Ts=y,u=xy(u,"onChange"),0<u.length&&(d=new Ic("onChange","change",null,d,y),a.push({event:d,listeners:u}))}var ur=null,Vo=null;function hh(a){HN(a,0)}function qg(a){var u=Ro(a);if(rh(u))return a}function f1(a,u){if(a==="change")return u}var d1=!1;if(io){var DT;if(io){var kT="oninput"in document;if(!kT){var h1=document.createElement("div");h1.setAttribute("oninput","return;"),kT=typeof h1.oninput=="function"}DT=kT}else DT=!1;d1=DT&&(!document.documentMode||9<document.documentMode)}function p1(){ur&&(ur.detachEvent("onpropertychange",m1),Vo=ur=null)}function m1(a){if(a.propertyName==="value"&&qg(Vo)){var u=[];Ss(u,Vo,a,Ri(a)),Cg(hh,u)}}function SG(a,u,d){a==="focusin"?(p1(),ur=u,Vo=d,ur.attachEvent("onpropertychange",m1)):a==="focusout"&&p1()}function AG(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return qg(Vo)}function xG(a,u){if(a==="click")return qg(u)}function CG(a,u){if(a==="input"||a==="change")return qg(u)}function IG(a,u){return a===u&&(a!==0||1/a===1/u)||a!==a&&u!==u}var oi=typeof Object.is=="function"?Object.is:IG;function ph(a,u){if(oi(a,u))return!0;if(typeof a!="object"||a===null||typeof u!="object"||u===null)return!1;var d=Object.keys(a),y=Object.keys(u);if(d.length!==y.length)return!1;for(y=0;y<d.length;y++){var T=d[y];if(!ye.call(u,T)||!oi(a[T],u[T]))return!1}return!0}function g1(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function y1(a,u){var d=g1(a);a=0;for(var y;d;){if(d.nodeType===3){if(y=a+d.textContent.length,a<=u&&y>=u)return{node:d,offset:u-a};a=y}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=g1(d)}}function v1(a,u){return a&&u?a===u?!0:a&&a.nodeType===3?!1:u&&u.nodeType===3?v1(a,u.parentNode):"contains"in a?a.contains(u):a.compareDocumentPosition?!!(a.compareDocumentPosition(u)&16):!1:!1}function _1(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var u=jl(a.document);u instanceof a.HTMLIFrameElement;){try{var d=typeof u.contentWindow.location.href=="string"}catch{d=!1}if(d)a=u.contentWindow;else break;u=jl(a.document)}return u}function OT(a){var u=a&&a.nodeName&&a.nodeName.toLowerCase();return u&&(u==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||u==="textarea"||a.contentEditable==="true")}var RG=io&&"documentMode"in document&&11>=document.documentMode,Lc=null,LT=null,mh=null,VT=!1;function T1(a,u,d){var y=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;VT||Lc==null||Lc!==jl(y)||(y=Lc,"selectionStart"in y&&OT(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),mh&&ph(mh,y)||(mh=y,y=xy(LT,"onSelect"),0<y.length&&(u=new Ic("onSelect","select",null,u,d),a.push({event:u,listeners:y}),u.target=Lc)))}function ru(a,u){var d={};return d[a.toLowerCase()]=u.toLowerCase(),d["Webkit"+a]="webkit"+u,d["Moz"+a]="moz"+u,d}var Vc={animationend:ru("Animation","AnimationEnd"),animationiteration:ru("Animation","AnimationIteration"),animationstart:ru("Animation","AnimationStart"),transitionrun:ru("Transition","TransitionRun"),transitionstart:ru("Transition","TransitionStart"),transitioncancel:ru("Transition","TransitionCancel"),transitionend:ru("Transition","TransitionEnd")},UT={},E1={};io&&(E1=document.createElement("div").style,"AnimationEvent"in window||(delete Vc.animationend.animation,delete Vc.animationiteration.animation,delete Vc.animationstart.animation),"TransitionEvent"in window||delete Vc.transitionend.transition);function iu(a){if(UT[a])return UT[a];if(!Vc[a])return a;var u=Vc[a],d;for(d in u)if(u.hasOwnProperty(d)&&d in E1)return UT[a]=u[d];return a}var w1=iu("animationend"),b1=iu("animationiteration"),S1=iu("animationstart"),PG=iu("transitionrun"),NG=iu("transitionstart"),MG=iu("transitioncancel"),A1=iu("transitionend"),x1=new Map,FT="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");FT.push("scrollEnd");function oo(a,u){x1.set(a,u),ro(u,[a])}var C1=new WeakMap;function Mi(a,u){if(typeof a=="object"&&a!==null){var d=C1.get(a);return d!==void 0?d:(u={value:a,source:u,stack:Ac(u)},C1.set(a,u),u)}return{value:a,source:u,stack:Ac(u)}}var Di=[],Uc=0,BT=0;function $g(){for(var a=Uc,u=BT=Uc=0;u<a;){var d=Di[u];Di[u++]=null;var y=Di[u];Di[u++]=null;var T=Di[u];Di[u++]=null;var w=Di[u];if(Di[u++]=null,y!==null&&T!==null){var N=y.pending;N===null?T.next=T:(T.next=N.next,N.next=T),y.pending=T}w!==0&&I1(d,T,w)}}function zg(a,u,d,y){Di[Uc++]=a,Di[Uc++]=u,Di[Uc++]=d,Di[Uc++]=y,BT|=y,a.lanes|=y,a=a.alternate,a!==null&&(a.lanes|=y)}function qT(a,u,d,y){return zg(a,u,d,y),Hg(a)}function Fc(a,u){return zg(a,null,null,u),Hg(a)}function I1(a,u,d){a.lanes|=d;var y=a.alternate;y!==null&&(y.lanes|=d);for(var T=!1,w=a.return;w!==null;)w.childLanes|=d,y=w.alternate,y!==null&&(y.childLanes|=d),w.tag===22&&(a=w.stateNode,a===null||a._visibility&1||(T=!0)),a=w,w=w.return;return a.tag===3?(w=a.stateNode,T&&u!==null&&(T=31-bt(d),a=w.hiddenUpdates,y=a[T],y===null?a[T]=[u]:y.push(u),u.lane=d|536870912),w):null}function Hg(a){if(50<Bh)throw Bh=0,KE=null,Error(r(185));for(var u=a.return;u!==null;)a=u,u=a.return;return a.tag===3?a.stateNode:null}var Bc={};function DG(a,u,d,y){this.tag=a,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function si(a,u,d,y){return new DG(a,u,d,y)}function $T(a){return a=a.prototype,!(!a||!a.isReactComponent)}function As(a,u){var d=a.alternate;return d===null?(d=si(a.tag,u,a.key,a.mode),d.elementType=a.elementType,d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=u,d.type=a.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=a.flags&65011712,d.childLanes=a.childLanes,d.lanes=a.lanes,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,u=a.dependencies,d.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d.refCleanup=a.refCleanup,d}function R1(a,u){a.flags&=65011714;var d=a.alternate;return d===null?(a.childLanes=0,a.lanes=u,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=d.childLanes,a.lanes=d.lanes,a.child=d.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=d.memoizedProps,a.memoizedState=d.memoizedState,a.updateQueue=d.updateQueue,a.type=d.type,u=d.dependencies,a.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),a}function Gg(a,u,d,y,T,w){var N=0;if(y=a,typeof a=="function")$T(a)&&(N=1);else if(typeof a=="string")N=O9(a,d,Le.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case L:return a=si(31,d,u,T),a.elementType=L,a.lanes=w,a;case b:return ou(d.children,T,w,u);case S:N=8,T|=24;break;case A:return a=si(12,d,u,T|2),a.elementType=A,a.lanes=w,a;case $:return a=si(13,d,u,T),a.elementType=$,a.lanes=w,a;case H:return a=si(19,d,u,T),a.elementType=H,a.lanes=w,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case C:case k:N=10;break e;case D:N=9;break e;case q:N=11;break e;case M:N=14;break e;case O:N=16,y=null;break e}N=29,d=Error(r(130,a===null?"null":typeof a,"")),y=null}return u=si(N,d,u,T),u.elementType=a,u.type=y,u.lanes=w,u}function ou(a,u,d,y){return a=si(7,a,y,u),a.lanes=d,a}function zT(a,u,d){return a=si(6,a,null,u),a.lanes=d,a}function HT(a,u,d){return u=si(4,a.children!==null?a.children:[],a.key,u),u.lanes=d,u.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},u}var qc=[],$c=0,jg=null,Kg=0,ki=[],Oi=0,su=null,xs=1,Cs="";function au(a,u){qc[$c++]=Kg,qc[$c++]=jg,jg=a,Kg=u}function P1(a,u,d){ki[Oi++]=xs,ki[Oi++]=Cs,ki[Oi++]=su,su=a;var y=xs;a=Cs;var T=32-bt(y)-1;y&=~(1<<T),d+=1;var w=32-bt(u)+T;if(30<w){var N=T-T%5;w=(y&(1<<N)-1).toString(32),y>>=N,T-=N,xs=1<<32-bt(u)+T|d<<T|y,Cs=w+a}else xs=1<<w|d<<T|y,Cs=a}function GT(a){a.return!==null&&(au(a,1),P1(a,1,0))}function jT(a){for(;a===jg;)jg=qc[--$c],qc[$c]=null,Kg=qc[--$c],qc[$c]=null;for(;a===su;)su=ki[--Oi],ki[Oi]=null,Cs=ki[--Oi],ki[Oi]=null,xs=ki[--Oi],ki[Oi]=null}var kr=null,pn=null,Tt=!1,lu=null,Uo=!1,KT=Error(r(519));function uu(a){var u=Error(r(418,""));throw vh(Mi(u,a)),KT}function N1(a){var u=a.stateNode,d=a.type,y=a.memoizedProps;switch(u[at]=a,u[kt]=y,d){case"dialog":it("cancel",u),it("close",u);break;case"iframe":case"object":case"embed":it("load",u);break;case"video":case"audio":for(d=0;d<$h.length;d++)it($h[d],u);break;case"source":it("error",u);break;case"img":case"image":case"link":it("error",u),it("load",u);break;case"details":it("toggle",u);break;case"input":it("invalid",u),Kl(u,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),xc(u);break;case"select":it("invalid",u);break;case"textarea":it("invalid",u),Wl(u,y.value,y.defaultValue,y.children),xc(u)}d=y.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||u.textContent===""+d||y.suppressHydrationWarning===!0||WN(u.textContent,d)?(y.popover!=null&&(it("beforetoggle",u),it("toggle",u)),y.onScroll!=null&&it("scroll",u),y.onScrollEnd!=null&&it("scrollend",u),y.onClick!=null&&(u.onclick=Cy),u=!0):u=!1,u||uu(a)}function M1(a){for(kr=a.return;kr;)switch(kr.tag){case 5:case 13:Uo=!1;return;case 27:case 3:Uo=!0;return;default:kr=kr.return}}function gh(a){if(a!==kr)return!1;if(!Tt)return M1(a),Tt=!0,!1;var u=a.tag,d;if((d=u!==3&&u!==27)&&((d=u===5)&&(d=a.type,d=!(d!=="form"&&d!=="button")||uw(a.type,a.memoizedProps)),d=!d),d&&pn&&uu(a),M1(a),u===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,u=0;a;){if(a.nodeType===8)if(d=a.data,d==="/$"){if(u===0){pn=ao(a.nextSibling);break e}u--}else d!=="$"&&d!=="$!"&&d!=="$?"||u++;a=a.nextSibling}pn=null}}else u===27?(u=pn,Ha(a.type)?(a=hw,hw=null,pn=a):pn=u):pn=kr?ao(a.stateNode.nextSibling):null;return!0}function yh(){pn=kr=null,Tt=!1}function D1(){var a=lu;return a!==null&&(Yr===null?Yr=a:Yr.push.apply(Yr,a),lu=null),a}function vh(a){lu===null?lu=[a]:lu.push(a)}var WT=le(null),cu=null,Is=null;function Ra(a,u,d){de(WT,u._currentValue),u._currentValue=d}function Rs(a){a._currentValue=WT.current,ae(WT)}function YT(a,u,d){for(;a!==null;){var y=a.alternate;if((a.childLanes&u)!==u?(a.childLanes|=u,y!==null&&(y.childLanes|=u)):y!==null&&(y.childLanes&u)!==u&&(y.childLanes|=u),a===d)break;a=a.return}}function JT(a,u,d,y){var T=a.child;for(T!==null&&(T.return=a);T!==null;){var w=T.dependencies;if(w!==null){var N=T.child;w=w.firstContext;e:for(;w!==null;){var U=w;w=T;for(var j=0;j<u.length;j++)if(U.context===u[j]){w.lanes|=d,U=w.alternate,U!==null&&(U.lanes|=d),YT(w.return,d,a),y||(N=null);break e}w=U.next}}else if(T.tag===18){if(N=T.return,N===null)throw Error(r(341));N.lanes|=d,w=N.alternate,w!==null&&(w.lanes|=d),YT(N,d,a),N=null}else N=T.child;if(N!==null)N.return=T;else for(N=T;N!==null;){if(N===a){N=null;break}if(T=N.sibling,T!==null){T.return=N.return,N=T;break}N=N.return}T=N}}function _h(a,u,d,y){a=null;for(var T=u,w=!1;T!==null;){if(!w){if((T.flags&524288)!==0)w=!0;else if((T.flags&262144)!==0)break}if(T.tag===10){var N=T.alternate;if(N===null)throw Error(r(387));if(N=N.memoizedProps,N!==null){var U=T.type;oi(T.pendingProps.value,N.value)||(a!==null?a.push(U):a=[U])}}else if(T===hn.current){if(N=T.alternate,N===null)throw Error(r(387));N.memoizedState.memoizedState!==T.memoizedState.memoizedState&&(a!==null?a.push(Wh):a=[Wh])}T=T.return}a!==null&&JT(u,a,d,y),u.flags|=262144}function Wg(a){for(a=a.firstContext;a!==null;){if(!oi(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function fu(a){cu=a,Is=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Tr(a){return k1(cu,a)}function Yg(a,u){return cu===null&&fu(a),k1(a,u)}function k1(a,u){var d=u._currentValue;if(u={context:u,memoizedValue:d,next:null},Is===null){if(a===null)throw Error(r(308));Is=u,a.dependencies={lanes:0,firstContext:u},a.flags|=524288}else Is=Is.next=u;return d}var kG=typeof AbortController<"u"?AbortController:function(){var a=[],u=this.signal={aborted:!1,addEventListener:function(d,y){a.push(y)}};this.abort=function(){u.aborted=!0,a.forEach(function(d){return d()})}},OG=t.unstable_scheduleCallback,LG=t.unstable_NormalPriority,Fn={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function QT(){return{controller:new kG,data:new Map,refCount:0}}function Th(a){a.refCount--,a.refCount===0&&OG(LG,function(){a.controller.abort()})}var Eh=null,XT=0,zc=0,Hc=null;function VG(a,u){if(Eh===null){var d=Eh=[];XT=0,zc=ew(),Hc={status:"pending",value:void 0,then:function(y){d.push(y)}}}return XT++,u.then(O1,O1),u}function O1(){if(--XT===0&&Eh!==null){Hc!==null&&(Hc.status="fulfilled");var a=Eh;Eh=null,zc=0,Hc=null;for(var u=0;u<a.length;u++)(0,a[u])()}}function UG(a,u){var d=[],y={status:"pending",value:null,reason:null,then:function(T){d.push(T)}};return a.then(function(){y.status="fulfilled",y.value=u;for(var T=0;T<d.length;T++)(0,d[T])(u)},function(T){for(y.status="rejected",y.reason=T,T=0;T<d.length;T++)(0,d[T])(void 0)}),y}var L1=te.S;te.S=function(a,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&VG(a,u),L1!==null&&L1(a,u)};var du=le(null);function ZT(){var a=du.current;return a!==null?a:$t.pooledCache}function Jg(a,u){u===null?de(du,du.current):de(du,u.pool)}function V1(){var a=ZT();return a===null?null:{parent:Fn._currentValue,pool:a}}var wh=Error(r(460)),U1=Error(r(474)),Qg=Error(r(542)),eE={then:function(){}};function F1(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Xg(){}function B1(a,u,d){switch(d=a[d],d===void 0?a.push(u):d!==u&&(u.then(Xg,Xg),u=d),u.status){case"fulfilled":return u.value;case"rejected":throw a=u.reason,$1(a),a;default:if(typeof u.status=="string")u.then(Xg,Xg);else{if(a=$t,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=u,a.status="pending",a.then(function(y){if(u.status==="pending"){var T=u;T.status="fulfilled",T.value=y}},function(y){if(u.status==="pending"){var T=u;T.status="rejected",T.reason=y}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw a=u.reason,$1(a),a}throw bh=u,wh}}var bh=null;function q1(){if(bh===null)throw Error(r(459));var a=bh;return bh=null,a}function $1(a){if(a===wh||a===Qg)throw Error(r(483))}var Pa=!1;function tE(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nE(a,u){a=a.updateQueue,u.updateQueue===a&&(u.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Na(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Ma(a,u,d){var y=a.updateQueue;if(y===null)return null;if(y=y.shared,(It&2)!==0){var T=y.pending;return T===null?u.next=u:(u.next=T.next,T.next=u),y.pending=u,u=Hg(a),I1(a,null,d),u}return zg(a,y,u,d),Hg(a)}function Sh(a,u,d){if(u=u.updateQueue,u!==null&&(u=u.shared,(d&4194048)!==0)){var y=u.lanes;y&=a.pendingLanes,d|=y,u.lanes=d,Ct(a,d)}}function rE(a,u){var d=a.updateQueue,y=a.alternate;if(y!==null&&(y=y.updateQueue,d===y)){var T=null,w=null;if(d=d.firstBaseUpdate,d!==null){do{var N={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};w===null?T=w=N:w=w.next=N,d=d.next}while(d!==null);w===null?T=w=u:w=w.next=u}else T=w=u;d={baseState:y.baseState,firstBaseUpdate:T,lastBaseUpdate:w,shared:y.shared,callbacks:y.callbacks},a.updateQueue=d;return}a=d.lastBaseUpdate,a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=u}var iE=!1;function Ah(){if(iE){var a=Hc;if(a!==null)throw a}}function xh(a,u,d,y){iE=!1;var T=a.updateQueue;Pa=!1;var w=T.firstBaseUpdate,N=T.lastBaseUpdate,U=T.shared.pending;if(U!==null){T.shared.pending=null;var j=U,ee=j.next;j.next=null,N===null?w=ee:N.next=ee,N=j;var ue=a.alternate;ue!==null&&(ue=ue.updateQueue,U=ue.lastBaseUpdate,U!==N&&(U===null?ue.firstBaseUpdate=ee:U.next=ee,ue.lastBaseUpdate=j))}if(w!==null){var he=T.baseState;N=0,ue=ee=j=null,U=w;do{var ne=U.lane&-536870913,re=ne!==U.lane;if(re?(dt&ne)===ne:(y&ne)===ne){ne!==0&&ne===zc&&(iE=!0),ue!==null&&(ue=ue.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var Ge=a,$e=U;ne=u;var Ut=d;switch($e.tag){case 1:if(Ge=$e.payload,typeof Ge=="function"){he=Ge.call(Ut,he,ne);break e}he=Ge;break e;case 3:Ge.flags=Ge.flags&-65537|128;case 0:if(Ge=$e.payload,ne=typeof Ge=="function"?Ge.call(Ut,he,ne):Ge,ne==null)break e;he=h({},he,ne);break e;case 2:Pa=!0}}ne=U.callback,ne!==null&&(a.flags|=64,re&&(a.flags|=8192),re=T.callbacks,re===null?T.callbacks=[ne]:re.push(ne))}else re={lane:ne,tag:U.tag,payload:U.payload,callback:U.callback,next:null},ue===null?(ee=ue=re,j=he):ue=ue.next=re,N|=ne;if(U=U.next,U===null){if(U=T.shared.pending,U===null)break;re=U,U=re.next,re.next=null,T.lastBaseUpdate=re,T.shared.pending=null}}while(!0);ue===null&&(j=he),T.baseState=j,T.firstBaseUpdate=ee,T.lastBaseUpdate=ue,w===null&&(T.shared.lanes=0),Ba|=N,a.lanes=N,a.memoizedState=he}}function z1(a,u){if(typeof a!="function")throw Error(r(191,a));a.call(u)}function H1(a,u){var d=a.callbacks;if(d!==null)for(a.callbacks=null,a=0;a<d.length;a++)z1(d[a],u)}var Gc=le(null),Zg=le(0);function G1(a,u){a=Ls,de(Zg,a),de(Gc,u),Ls=a|u.baseLanes}function oE(){de(Zg,Ls),de(Gc,Gc.current)}function sE(){Ls=Zg.current,ae(Gc),ae(Zg)}var Da=0,Xe=null,Lt=null,Pn=null,ey=!1,jc=!1,hu=!1,ty=0,Ch=0,Kc=null,FG=0;function wn(){throw Error(r(321))}function aE(a,u){if(u===null)return!1;for(var d=0;d<u.length&&d<a.length;d++)if(!oi(a[d],u[d]))return!1;return!0}function lE(a,u,d,y,T,w){return Da=w,Xe=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,te.H=a===null||a.memoizedState===null?IP:RP,hu=!1,w=d(y,T),hu=!1,jc&&(w=K1(u,d,y,T)),j1(a),w}function j1(a){te.H=ay;var u=Lt!==null&&Lt.next!==null;if(Da=0,Pn=Lt=Xe=null,ey=!1,Ch=0,Kc=null,u)throw Error(r(300));a===null||Wn||(a=a.dependencies,a!==null&&Wg(a)&&(Wn=!0))}function K1(a,u,d,y){Xe=a;var T=0;do{if(jc&&(Kc=null),Ch=0,jc=!1,25<=T)throw Error(r(301));if(T+=1,Pn=Lt=null,a.updateQueue!=null){var w=a.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}te.H=jG,w=u(d,y)}while(jc);return w}function BG(){var a=te.H,u=a.useState()[0];return u=typeof u.then=="function"?Ih(u):u,a=a.useState()[0],(Lt!==null?Lt.memoizedState:null)!==a&&(Xe.flags|=1024),u}function uE(){var a=ty!==0;return ty=0,a}function cE(a,u,d){u.updateQueue=a.updateQueue,u.flags&=-2053,a.lanes&=~d}function fE(a){if(ey){for(a=a.memoizedState;a!==null;){var u=a.queue;u!==null&&(u.pending=null),a=a.next}ey=!1}Da=0,Pn=Lt=Xe=null,jc=!1,Ch=ty=0,Kc=null}function Kr(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pn===null?Xe.memoizedState=Pn=a:Pn=Pn.next=a,Pn}function Nn(){if(Lt===null){var a=Xe.alternate;a=a!==null?a.memoizedState:null}else a=Lt.next;var u=Pn===null?Xe.memoizedState:Pn.next;if(u!==null)Pn=u,Lt=a;else{if(a===null)throw Xe.alternate===null?Error(r(467)):Error(r(310));Lt=a,a={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},Pn===null?Xe.memoizedState=Pn=a:Pn=Pn.next=a}return Pn}function dE(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ih(a){var u=Ch;return Ch+=1,Kc===null&&(Kc=[]),a=B1(Kc,a,u),u=Xe,(Pn===null?u.memoizedState:Pn.next)===null&&(u=u.alternate,te.H=u===null||u.memoizedState===null?IP:RP),a}function ny(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Ih(a);if(a.$$typeof===k)return Tr(a)}throw Error(r(438,String(a)))}function hE(a){var u=null,d=Xe.updateQueue;if(d!==null&&(u=d.memoCache),u==null){var y=Xe.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(u={data:y.data.map(function(T){return T.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),d===null&&(d=dE(),Xe.updateQueue=d),d.memoCache=u,d=u.data[u.index],d===void 0)for(d=u.data[u.index]=Array(a),y=0;y<a;y++)d[y]=F;return u.index++,d}function Ps(a,u){return typeof u=="function"?u(a):u}function ry(a){var u=Nn();return pE(u,Lt,a)}function pE(a,u,d){var y=a.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=d;var T=a.baseQueue,w=y.pending;if(w!==null){if(T!==null){var N=T.next;T.next=w.next,w.next=N}u.baseQueue=T=w,y.pending=null}if(w=a.baseState,T===null)a.memoizedState=w;else{u=T.next;var U=N=null,j=null,ee=u,ue=!1;do{var he=ee.lane&-536870913;if(he!==ee.lane?(dt&he)===he:(Da&he)===he){var ne=ee.revertLane;if(ne===0)j!==null&&(j=j.next={lane:0,revertLane:0,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),he===zc&&(ue=!0);else if((Da&ne)===ne){ee=ee.next,ne===zc&&(ue=!0);continue}else he={lane:0,revertLane:ee.revertLane,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},j===null?(U=j=he,N=w):j=j.next=he,Xe.lanes|=ne,Ba|=ne;he=ee.action,hu&&d(w,he),w=ee.hasEagerState?ee.eagerState:d(w,he)}else ne={lane:he,revertLane:ee.revertLane,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},j===null?(U=j=ne,N=w):j=j.next=ne,Xe.lanes|=he,Ba|=he;ee=ee.next}while(ee!==null&&ee!==u);if(j===null?N=w:j.next=U,!oi(w,a.memoizedState)&&(Wn=!0,ue&&(d=Hc,d!==null)))throw d;a.memoizedState=w,a.baseState=N,a.baseQueue=j,y.lastRenderedState=w}return T===null&&(y.lanes=0),[a.memoizedState,y.dispatch]}function mE(a){var u=Nn(),d=u.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=a;var y=d.dispatch,T=d.pending,w=u.memoizedState;if(T!==null){d.pending=null;var N=T=T.next;do w=a(w,N.action),N=N.next;while(N!==T);oi(w,u.memoizedState)||(Wn=!0),u.memoizedState=w,u.baseQueue===null&&(u.baseState=w),d.lastRenderedState=w}return[w,y]}function W1(a,u,d){var y=Xe,T=Nn(),w=Tt;if(w){if(d===void 0)throw Error(r(407));d=d()}else d=u();var N=!oi((Lt||T).memoizedState,d);N&&(T.memoizedState=d,Wn=!0),T=T.queue;var U=Q1.bind(null,y,T,a);if(Rh(2048,8,U,[a]),T.getSnapshot!==u||N||Pn!==null&&Pn.memoizedState.tag&1){if(y.flags|=2048,Wc(9,iy(),J1.bind(null,y,T,d,u),null),$t===null)throw Error(r(349));w||(Da&124)!==0||Y1(y,u,d)}return d}function Y1(a,u,d){a.flags|=16384,a={getSnapshot:u,value:d},u=Xe.updateQueue,u===null?(u=dE(),Xe.updateQueue=u,u.stores=[a]):(d=u.stores,d===null?u.stores=[a]:d.push(a))}function J1(a,u,d,y){u.value=d,u.getSnapshot=y,X1(u)&&Z1(a)}function Q1(a,u,d){return d(function(){X1(u)&&Z1(a)})}function X1(a){var u=a.getSnapshot;a=a.value;try{var d=u();return!oi(a,d)}catch{return!0}}function Z1(a){var u=Fc(a,2);u!==null&&fi(u,a,2)}function gE(a){var u=Kr();if(typeof a=="function"){var d=a;if(a=d(),hu){Pr(!0);try{d()}finally{Pr(!1)}}}return u.memoizedState=u.baseState=a,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:a},u}function eP(a,u,d,y){return a.baseState=d,pE(a,Lt,typeof y=="function"?y:Ps)}function qG(a,u,d,y,T){if(sy(a))throw Error(r(485));if(a=u.action,a!==null){var w={payload:T,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(N){w.listeners.push(N)}};te.T!==null?d(!0):w.isTransition=!1,y(w),d=u.pending,d===null?(w.next=u.pending=w,tP(u,w)):(w.next=d.next,u.pending=d.next=w)}}function tP(a,u){var d=u.action,y=u.payload,T=a.state;if(u.isTransition){var w=te.T,N={};te.T=N;try{var U=d(T,y),j=te.S;j!==null&&j(N,U),nP(a,u,U)}catch(ee){yE(a,u,ee)}finally{te.T=w}}else try{w=d(T,y),nP(a,u,w)}catch(ee){yE(a,u,ee)}}function nP(a,u,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(y){rP(a,u,y)},function(y){return yE(a,u,y)}):rP(a,u,d)}function rP(a,u,d){u.status="fulfilled",u.value=d,iP(u),a.state=d,u=a.pending,u!==null&&(d=u.next,d===u?a.pending=null:(d=d.next,u.next=d,tP(a,d)))}function yE(a,u,d){var y=a.pending;if(a.pending=null,y!==null){y=y.next;do u.status="rejected",u.reason=d,iP(u),u=u.next;while(u!==y)}a.action=null}function iP(a){a=a.listeners;for(var u=0;u<a.length;u++)(0,a[u])()}function oP(a,u){return u}function sP(a,u){if(Tt){var d=$t.formState;if(d!==null){e:{var y=Xe;if(Tt){if(pn){t:{for(var T=pn,w=Uo;T.nodeType!==8;){if(!w){T=null;break t}if(T=ao(T.nextSibling),T===null){T=null;break t}}w=T.data,T=w==="F!"||w==="F"?T:null}if(T){pn=ao(T.nextSibling),y=T.data==="F!";break e}}uu(y)}y=!1}y&&(u=d[0])}}return d=Kr(),d.memoizedState=d.baseState=u,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oP,lastRenderedState:u},d.queue=y,d=AP.bind(null,Xe,y),y.dispatch=d,y=gE(!1),w=wE.bind(null,Xe,!1,y.queue),y=Kr(),T={state:u,dispatch:null,action:a,pending:null},y.queue=T,d=qG.bind(null,Xe,T,w,d),T.dispatch=d,y.memoizedState=a,[u,d,!1]}function aP(a){var u=Nn();return lP(u,Lt,a)}function lP(a,u,d){if(u=pE(a,u,oP)[0],a=ry(Ps)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var y=Ih(u)}catch(N){throw N===wh?Qg:N}else y=u;u=Nn();var T=u.queue,w=T.dispatch;return d!==u.memoizedState&&(Xe.flags|=2048,Wc(9,iy(),$G.bind(null,T,d),null)),[y,w,a]}function $G(a,u){a.action=u}function uP(a){var u=Nn(),d=Lt;if(d!==null)return lP(u,d,a);Nn(),u=u.memoizedState,d=Nn();var y=d.queue.dispatch;return d.memoizedState=a,[u,y,!1]}function Wc(a,u,d,y){return a={tag:a,create:d,deps:y,inst:u,next:null},u=Xe.updateQueue,u===null&&(u=dE(),Xe.updateQueue=u),d=u.lastEffect,d===null?u.lastEffect=a.next=a:(y=d.next,d.next=a,a.next=y,u.lastEffect=a),a}function iy(){return{destroy:void 0,resource:void 0}}function cP(){return Nn().memoizedState}function oy(a,u,d,y){var T=Kr();y=y===void 0?null:y,Xe.flags|=a,T.memoizedState=Wc(1|u,iy(),d,y)}function Rh(a,u,d,y){var T=Nn();y=y===void 0?null:y;var w=T.memoizedState.inst;Lt!==null&&y!==null&&aE(y,Lt.memoizedState.deps)?T.memoizedState=Wc(u,w,d,y):(Xe.flags|=a,T.memoizedState=Wc(1|u,w,d,y))}function fP(a,u){oy(8390656,8,a,u)}function dP(a,u){Rh(2048,8,a,u)}function hP(a,u){return Rh(4,2,a,u)}function pP(a,u){return Rh(4,4,a,u)}function mP(a,u){if(typeof u=="function"){a=a();var d=u(a);return function(){typeof d=="function"?d():u(null)}}if(u!=null)return a=a(),u.current=a,function(){u.current=null}}function gP(a,u,d){d=d!=null?d.concat([a]):null,Rh(4,4,mP.bind(null,u,a),d)}function vE(){}function yP(a,u){var d=Nn();u=u===void 0?null:u;var y=d.memoizedState;return u!==null&&aE(u,y[1])?y[0]:(d.memoizedState=[a,u],a)}function vP(a,u){var d=Nn();u=u===void 0?null:u;var y=d.memoizedState;if(u!==null&&aE(u,y[1]))return y[0];if(y=a(),hu){Pr(!0);try{a()}finally{Pr(!1)}}return d.memoizedState=[y,u],y}function _E(a,u,d){return d===void 0||(Da&1073741824)!==0?a.memoizedState=u:(a.memoizedState=d,a=EN(),Xe.lanes|=a,Ba|=a,d)}function _P(a,u,d,y){return oi(d,u)?d:Gc.current!==null?(a=_E(a,d,y),oi(a,u)||(Wn=!0),a):(Da&42)===0?(Wn=!0,a.memoizedState=d):(a=EN(),Xe.lanes|=a,Ba|=a,u)}function TP(a,u,d,y,T){var w=me.p;me.p=w!==0&&8>w?w:8;var N=te.T,U={};te.T=U,wE(a,!1,u,d);try{var j=T(),ee=te.S;if(ee!==null&&ee(U,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var ue=UG(j,y);Ph(a,u,ue,ci(a))}else Ph(a,u,y,ci(a))}catch(he){Ph(a,u,{then:function(){},status:"rejected",reason:he},ci())}finally{me.p=w,te.T=N}}function zG(){}function TE(a,u,d,y){if(a.tag!==5)throw Error(r(476));var T=EP(a).queue;TP(a,T,u,be,d===null?zG:function(){return wP(a),d(y)})}function EP(a){var u=a.memoizedState;if(u!==null)return u;u={memoizedState:be,baseState:be,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:be},next:null};var d={};return u.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:d},next:null},a.memoizedState=u,a=a.alternate,a!==null&&(a.memoizedState=u),u}function wP(a){var u=EP(a).next.queue;Ph(a,u,{},ci())}function EE(){return Tr(Wh)}function bP(){return Nn().memoizedState}function SP(){return Nn().memoizedState}function HG(a){for(var u=a.return;u!==null;){switch(u.tag){case 24:case 3:var d=ci();a=Na(d);var y=Ma(u,a,d);y!==null&&(fi(y,u,d),Sh(y,u,d)),u={cache:QT()},a.payload=u;return}u=u.return}}function GG(a,u,d){var y=ci();d={lane:y,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},sy(a)?xP(u,d):(d=qT(a,u,d,y),d!==null&&(fi(d,a,y),CP(d,u,y)))}function AP(a,u,d){var y=ci();Ph(a,u,d,y)}function Ph(a,u,d,y){var T={lane:y,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(sy(a))xP(u,T);else{var w=a.alternate;if(a.lanes===0&&(w===null||w.lanes===0)&&(w=u.lastRenderedReducer,w!==null))try{var N=u.lastRenderedState,U=w(N,d);if(T.hasEagerState=!0,T.eagerState=U,oi(U,N))return zg(a,u,T,0),$t===null&&$g(),!1}catch{}finally{}if(d=qT(a,u,T,y),d!==null)return fi(d,a,y),CP(d,u,y),!0}return!1}function wE(a,u,d,y){if(y={lane:2,revertLane:ew(),action:y,hasEagerState:!1,eagerState:null,next:null},sy(a)){if(u)throw Error(r(479))}else u=qT(a,d,y,2),u!==null&&fi(u,a,2)}function sy(a){var u=a.alternate;return a===Xe||u!==null&&u===Xe}function xP(a,u){jc=ey=!0;var d=a.pending;d===null?u.next=u:(u.next=d.next,d.next=u),a.pending=u}function CP(a,u,d){if((d&4194048)!==0){var y=u.lanes;y&=a.pendingLanes,d|=y,u.lanes=d,Ct(a,d)}}var ay={readContext:Tr,use:ny,useCallback:wn,useContext:wn,useEffect:wn,useImperativeHandle:wn,useLayoutEffect:wn,useInsertionEffect:wn,useMemo:wn,useReducer:wn,useRef:wn,useState:wn,useDebugValue:wn,useDeferredValue:wn,useTransition:wn,useSyncExternalStore:wn,useId:wn,useHostTransitionStatus:wn,useFormState:wn,useActionState:wn,useOptimistic:wn,useMemoCache:wn,useCacheRefresh:wn},IP={readContext:Tr,use:ny,useCallback:function(a,u){return Kr().memoizedState=[a,u===void 0?null:u],a},useContext:Tr,useEffect:fP,useImperativeHandle:function(a,u,d){d=d!=null?d.concat([a]):null,oy(4194308,4,mP.bind(null,u,a),d)},useLayoutEffect:function(a,u){return oy(4194308,4,a,u)},useInsertionEffect:function(a,u){oy(4,2,a,u)},useMemo:function(a,u){var d=Kr();u=u===void 0?null:u;var y=a();if(hu){Pr(!0);try{a()}finally{Pr(!1)}}return d.memoizedState=[y,u],y},useReducer:function(a,u,d){var y=Kr();if(d!==void 0){var T=d(u);if(hu){Pr(!0);try{d(u)}finally{Pr(!1)}}}else T=u;return y.memoizedState=y.baseState=T,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:T},y.queue=a,a=a.dispatch=GG.bind(null,Xe,a),[y.memoizedState,a]},useRef:function(a){var u=Kr();return a={current:a},u.memoizedState=a},useState:function(a){a=gE(a);var u=a.queue,d=AP.bind(null,Xe,u);return u.dispatch=d,[a.memoizedState,d]},useDebugValue:vE,useDeferredValue:function(a,u){var d=Kr();return _E(d,a,u)},useTransition:function(){var a=gE(!1);return a=TP.bind(null,Xe,a.queue,!0,!1),Kr().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,u,d){var y=Xe,T=Kr();if(Tt){if(d===void 0)throw Error(r(407));d=d()}else{if(d=u(),$t===null)throw Error(r(349));(dt&124)!==0||Y1(y,u,d)}T.memoizedState=d;var w={value:d,getSnapshot:u};return T.queue=w,fP(Q1.bind(null,y,w,a),[a]),y.flags|=2048,Wc(9,iy(),J1.bind(null,y,w,d,u),null),d},useId:function(){var a=Kr(),u=$t.identifierPrefix;if(Tt){var d=Cs,y=xs;d=(y&~(1<<32-bt(y)-1)).toString(32)+d,u="«"+u+"R"+d,d=ty++,0<d&&(u+="H"+d.toString(32)),u+="»"}else d=FG++,u="«"+u+"r"+d.toString(32)+"»";return a.memoizedState=u},useHostTransitionStatus:EE,useFormState:sP,useActionState:sP,useOptimistic:function(a){var u=Kr();u.memoizedState=u.baseState=a;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=d,u=wE.bind(null,Xe,!0,d),d.dispatch=u,[a,u]},useMemoCache:hE,useCacheRefresh:function(){return Kr().memoizedState=HG.bind(null,Xe)}},RP={readContext:Tr,use:ny,useCallback:yP,useContext:Tr,useEffect:dP,useImperativeHandle:gP,useInsertionEffect:hP,useLayoutEffect:pP,useMemo:vP,useReducer:ry,useRef:cP,useState:function(){return ry(Ps)},useDebugValue:vE,useDeferredValue:function(a,u){var d=Nn();return _P(d,Lt.memoizedState,a,u)},useTransition:function(){var a=ry(Ps)[0],u=Nn().memoizedState;return[typeof a=="boolean"?a:Ih(a),u]},useSyncExternalStore:W1,useId:bP,useHostTransitionStatus:EE,useFormState:aP,useActionState:aP,useOptimistic:function(a,u){var d=Nn();return eP(d,Lt,a,u)},useMemoCache:hE,useCacheRefresh:SP},jG={readContext:Tr,use:ny,useCallback:yP,useContext:Tr,useEffect:dP,useImperativeHandle:gP,useInsertionEffect:hP,useLayoutEffect:pP,useMemo:vP,useReducer:mE,useRef:cP,useState:function(){return mE(Ps)},useDebugValue:vE,useDeferredValue:function(a,u){var d=Nn();return Lt===null?_E(d,a,u):_P(d,Lt.memoizedState,a,u)},useTransition:function(){var a=mE(Ps)[0],u=Nn().memoizedState;return[typeof a=="boolean"?a:Ih(a),u]},useSyncExternalStore:W1,useId:bP,useHostTransitionStatus:EE,useFormState:uP,useActionState:uP,useOptimistic:function(a,u){var d=Nn();return Lt!==null?eP(d,Lt,a,u):(d.baseState=a,[a,d.queue.dispatch])},useMemoCache:hE,useCacheRefresh:SP},Yc=null,Nh=0;function ly(a){var u=Nh;return Nh+=1,Yc===null&&(Yc=[]),B1(Yc,a,u)}function Mh(a,u){u=u.props.ref,a.ref=u!==void 0?u:null}function uy(a,u){throw u.$$typeof===g?Error(r(525)):(a=Object.prototype.toString.call(u),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":a)))}function PP(a){var u=a._init;return u(a._payload)}function NP(a){function u(Y,W){if(a){var X=Y.deletions;X===null?(Y.deletions=[W],Y.flags|=16):X.push(W)}}function d(Y,W){if(!a)return null;for(;W!==null;)u(Y,W),W=W.sibling;return null}function y(Y){for(var W=new Map;Y!==null;)Y.key!==null?W.set(Y.key,Y):W.set(Y.index,Y),Y=Y.sibling;return W}function T(Y,W){return Y=As(Y,W),Y.index=0,Y.sibling=null,Y}function w(Y,W,X){return Y.index=X,a?(X=Y.alternate,X!==null?(X=X.index,X<W?(Y.flags|=67108866,W):X):(Y.flags|=67108866,W)):(Y.flags|=1048576,W)}function N(Y){return a&&Y.alternate===null&&(Y.flags|=67108866),Y}function U(Y,W,X,fe){return W===null||W.tag!==6?(W=zT(X,Y.mode,fe),W.return=Y,W):(W=T(W,X),W.return=Y,W)}function j(Y,W,X,fe){var Me=X.type;return Me===b?ue(Y,W,X.props.children,fe,X.key):W!==null&&(W.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===O&&PP(Me)===W.type)?(W=T(W,X.props),Mh(W,X),W.return=Y,W):(W=Gg(X.type,X.key,X.props,null,Y.mode,fe),Mh(W,X),W.return=Y,W)}function ee(Y,W,X,fe){return W===null||W.tag!==4||W.stateNode.containerInfo!==X.containerInfo||W.stateNode.implementation!==X.implementation?(W=HT(X,Y.mode,fe),W.return=Y,W):(W=T(W,X.children||[]),W.return=Y,W)}function ue(Y,W,X,fe,Me){return W===null||W.tag!==7?(W=ou(X,Y.mode,fe,Me),W.return=Y,W):(W=T(W,X),W.return=Y,W)}function he(Y,W,X){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=zT(""+W,Y.mode,X),W.return=Y,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case v:return X=Gg(W.type,W.key,W.props,null,Y.mode,X),Mh(X,W),X.return=Y,X;case E:return W=HT(W,Y.mode,X),W.return=Y,W;case O:var fe=W._init;return W=fe(W._payload),he(Y,W,X)}if(Re(W)||G(W))return W=ou(W,Y.mode,X,null),W.return=Y,W;if(typeof W.then=="function")return he(Y,ly(W),X);if(W.$$typeof===k)return he(Y,Yg(Y,W),X);uy(Y,W)}return null}function ne(Y,W,X,fe){var Me=W!==null?W.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return Me!==null?null:U(Y,W,""+X,fe);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case v:return X.key===Me?j(Y,W,X,fe):null;case E:return X.key===Me?ee(Y,W,X,fe):null;case O:return Me=X._init,X=Me(X._payload),ne(Y,W,X,fe)}if(Re(X)||G(X))return Me!==null?null:ue(Y,W,X,fe,null);if(typeof X.then=="function")return ne(Y,W,ly(X),fe);if(X.$$typeof===k)return ne(Y,W,Yg(Y,X),fe);uy(Y,X)}return null}function re(Y,W,X,fe,Me){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return Y=Y.get(X)||null,U(W,Y,""+fe,Me);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case v:return Y=Y.get(fe.key===null?X:fe.key)||null,j(W,Y,fe,Me);case E:return Y=Y.get(fe.key===null?X:fe.key)||null,ee(W,Y,fe,Me);case O:var et=fe._init;return fe=et(fe._payload),re(Y,W,X,fe,Me)}if(Re(fe)||G(fe))return Y=Y.get(X)||null,ue(W,Y,fe,Me,null);if(typeof fe.then=="function")return re(Y,W,X,ly(fe),Me);if(fe.$$typeof===k)return re(Y,W,X,Yg(W,fe),Me);uy(W,fe)}return null}function Ge(Y,W,X,fe){for(var Me=null,et=null,Ue=W,He=W=0,Jn=null;Ue!==null&&He<X.length;He++){Ue.index>He?(Jn=Ue,Ue=null):Jn=Ue.sibling;var yt=ne(Y,Ue,X[He],fe);if(yt===null){Ue===null&&(Ue=Jn);break}a&&Ue&&yt.alternate===null&&u(Y,Ue),W=w(yt,W,He),et===null?Me=yt:et.sibling=yt,et=yt,Ue=Jn}if(He===X.length)return d(Y,Ue),Tt&&au(Y,He),Me;if(Ue===null){for(;He<X.length;He++)Ue=he(Y,X[He],fe),Ue!==null&&(W=w(Ue,W,He),et===null?Me=Ue:et.sibling=Ue,et=Ue);return Tt&&au(Y,He),Me}for(Ue=y(Ue);He<X.length;He++)Jn=re(Ue,Y,He,X[He],fe),Jn!==null&&(a&&Jn.alternate!==null&&Ue.delete(Jn.key===null?He:Jn.key),W=w(Jn,W,He),et===null?Me=Jn:et.sibling=Jn,et=Jn);return a&&Ue.forEach(function(Ya){return u(Y,Ya)}),Tt&&au(Y,He),Me}function $e(Y,W,X,fe){if(X==null)throw Error(r(151));for(var Me=null,et=null,Ue=W,He=W=0,Jn=null,yt=X.next();Ue!==null&&!yt.done;He++,yt=X.next()){Ue.index>He?(Jn=Ue,Ue=null):Jn=Ue.sibling;var Ya=ne(Y,Ue,yt.value,fe);if(Ya===null){Ue===null&&(Ue=Jn);break}a&&Ue&&Ya.alternate===null&&u(Y,Ue),W=w(Ya,W,He),et===null?Me=Ya:et.sibling=Ya,et=Ya,Ue=Jn}if(yt.done)return d(Y,Ue),Tt&&au(Y,He),Me;if(Ue===null){for(;!yt.done;He++,yt=X.next())yt=he(Y,yt.value,fe),yt!==null&&(W=w(yt,W,He),et===null?Me=yt:et.sibling=yt,et=yt);return Tt&&au(Y,He),Me}for(Ue=y(Ue);!yt.done;He++,yt=X.next())yt=re(Ue,Y,He,yt.value,fe),yt!==null&&(a&&yt.alternate!==null&&Ue.delete(yt.key===null?He:yt.key),W=w(yt,W,He),et===null?Me=yt:et.sibling=yt,et=yt);return a&&Ue.forEach(function(K9){return u(Y,K9)}),Tt&&au(Y,He),Me}function Ut(Y,W,X,fe){if(typeof X=="object"&&X!==null&&X.type===b&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case v:e:{for(var Me=X.key;W!==null;){if(W.key===Me){if(Me=X.type,Me===b){if(W.tag===7){d(Y,W.sibling),fe=T(W,X.props.children),fe.return=Y,Y=fe;break e}}else if(W.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===O&&PP(Me)===W.type){d(Y,W.sibling),fe=T(W,X.props),Mh(fe,X),fe.return=Y,Y=fe;break e}d(Y,W);break}else u(Y,W);W=W.sibling}X.type===b?(fe=ou(X.props.children,Y.mode,fe,X.key),fe.return=Y,Y=fe):(fe=Gg(X.type,X.key,X.props,null,Y.mode,fe),Mh(fe,X),fe.return=Y,Y=fe)}return N(Y);case E:e:{for(Me=X.key;W!==null;){if(W.key===Me)if(W.tag===4&&W.stateNode.containerInfo===X.containerInfo&&W.stateNode.implementation===X.implementation){d(Y,W.sibling),fe=T(W,X.children||[]),fe.return=Y,Y=fe;break e}else{d(Y,W);break}else u(Y,W);W=W.sibling}fe=HT(X,Y.mode,fe),fe.return=Y,Y=fe}return N(Y);case O:return Me=X._init,X=Me(X._payload),Ut(Y,W,X,fe)}if(Re(X))return Ge(Y,W,X,fe);if(G(X)){if(Me=G(X),typeof Me!="function")throw Error(r(150));return X=Me.call(X),$e(Y,W,X,fe)}if(typeof X.then=="function")return Ut(Y,W,ly(X),fe);if(X.$$typeof===k)return Ut(Y,W,Yg(Y,X),fe);uy(Y,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,W!==null&&W.tag===6?(d(Y,W.sibling),fe=T(W,X),fe.return=Y,Y=fe):(d(Y,W),fe=zT(X,Y.mode,fe),fe.return=Y,Y=fe),N(Y)):d(Y,W)}return function(Y,W,X,fe){try{Nh=0;var Me=Ut(Y,W,X,fe);return Yc=null,Me}catch(Ue){if(Ue===wh||Ue===Qg)throw Ue;var et=si(29,Ue,null,Y.mode);return et.lanes=fe,et.return=Y,et}finally{}}}var Jc=NP(!0),MP=NP(!1),Li=le(null),Fo=null;function ka(a){var u=a.alternate;de(Bn,Bn.current&1),de(Li,a),Fo===null&&(u===null||Gc.current!==null||u.memoizedState!==null)&&(Fo=a)}function DP(a){if(a.tag===22){if(de(Bn,Bn.current),de(Li,a),Fo===null){var u=a.alternate;u!==null&&u.memoizedState!==null&&(Fo=a)}}else Oa()}function Oa(){de(Bn,Bn.current),de(Li,Li.current)}function Ns(a){ae(Li),Fo===a&&(Fo=null),ae(Bn)}var Bn=le(0);function cy(a){for(var u=a;u!==null;){if(u.tag===13){var d=u.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||dw(d)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function bE(a,u,d,y){u=a.memoizedState,d=d(y,u),d=d==null?u:h({},u,d),a.memoizedState=d,a.lanes===0&&(a.updateQueue.baseState=d)}var SE={enqueueSetState:function(a,u,d){a=a._reactInternals;var y=ci(),T=Na(y);T.payload=u,d!=null&&(T.callback=d),u=Ma(a,T,y),u!==null&&(fi(u,a,y),Sh(u,a,y))},enqueueReplaceState:function(a,u,d){a=a._reactInternals;var y=ci(),T=Na(y);T.tag=1,T.payload=u,d!=null&&(T.callback=d),u=Ma(a,T,y),u!==null&&(fi(u,a,y),Sh(u,a,y))},enqueueForceUpdate:function(a,u){a=a._reactInternals;var d=ci(),y=Na(d);y.tag=2,u!=null&&(y.callback=u),u=Ma(a,y,d),u!==null&&(fi(u,a,d),Sh(u,a,d))}};function kP(a,u,d,y,T,w,N){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(y,w,N):u.prototype&&u.prototype.isPureReactComponent?!ph(d,y)||!ph(T,w):!0}function OP(a,u,d,y){a=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(d,y),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(d,y),u.state!==a&&SE.enqueueReplaceState(u,u.state,null)}function pu(a,u){var d=u;if("ref"in u){d={};for(var y in u)y!=="ref"&&(d[y]=u[y])}if(a=a.defaultProps){d===u&&(d=h({},d));for(var T in a)d[T]===void 0&&(d[T]=a[T])}return d}var fy=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function LP(a){fy(a)}function VP(a){console.error(a)}function UP(a){fy(a)}function dy(a,u){try{var d=a.onUncaughtError;d(u.value,{componentStack:u.stack})}catch(y){setTimeout(function(){throw y})}}function FP(a,u,d){try{var y=a.onCaughtError;y(d.value,{componentStack:d.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(T){setTimeout(function(){throw T})}}function AE(a,u,d){return d=Na(d),d.tag=3,d.payload={element:null},d.callback=function(){dy(a,u)},d}function BP(a){return a=Na(a),a.tag=3,a}function qP(a,u,d,y){var T=d.type.getDerivedStateFromError;if(typeof T=="function"){var w=y.value;a.payload=function(){return T(w)},a.callback=function(){FP(u,d,y)}}var N=d.stateNode;N!==null&&typeof N.componentDidCatch=="function"&&(a.callback=function(){FP(u,d,y),typeof T!="function"&&(qa===null?qa=new Set([this]):qa.add(this));var U=y.stack;this.componentDidCatch(y.value,{componentStack:U!==null?U:""})})}function KG(a,u,d,y,T){if(d.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(u=d.alternate,u!==null&&_h(u,d,T,!0),d=Li.current,d!==null){switch(d.tag){case 13:return Fo===null?YE():d.alternate===null&&mn===0&&(mn=3),d.flags&=-257,d.flags|=65536,d.lanes=T,y===eE?d.flags|=16384:(u=d.updateQueue,u===null?d.updateQueue=new Set([y]):u.add(y),QE(a,y,T)),!1;case 22:return d.flags|=65536,y===eE?d.flags|=16384:(u=d.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([y])},d.updateQueue=u):(d=u.retryQueue,d===null?u.retryQueue=new Set([y]):d.add(y)),QE(a,y,T)),!1}throw Error(r(435,d.tag))}return QE(a,y,T),YE(),!1}if(Tt)return u=Li.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=T,y!==KT&&(a=Error(r(422),{cause:y}),vh(Mi(a,d)))):(y!==KT&&(u=Error(r(423),{cause:y}),vh(Mi(u,d))),a=a.current.alternate,a.flags|=65536,T&=-T,a.lanes|=T,y=Mi(y,d),T=AE(a.stateNode,y,T),rE(a,T),mn!==4&&(mn=2)),!1;var w=Error(r(520),{cause:y});if(w=Mi(w,d),Fh===null?Fh=[w]:Fh.push(w),mn!==4&&(mn=2),u===null)return!0;y=Mi(y,d),d=u;do{switch(d.tag){case 3:return d.flags|=65536,a=T&-T,d.lanes|=a,a=AE(d.stateNode,y,a),rE(d,a),!1;case 1:if(u=d.type,w=d.stateNode,(d.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(qa===null||!qa.has(w))))return d.flags|=65536,T&=-T,d.lanes|=T,T=BP(T),qP(T,a,d,y),rE(d,T),!1}d=d.return}while(d!==null);return!1}var $P=Error(r(461)),Wn=!1;function cr(a,u,d,y){u.child=a===null?MP(u,null,d,y):Jc(u,a.child,d,y)}function zP(a,u,d,y,T){d=d.render;var w=u.ref;if("ref"in y){var N={};for(var U in y)U!=="ref"&&(N[U]=y[U])}else N=y;return fu(u),y=lE(a,u,d,N,w,T),U=uE(),a!==null&&!Wn?(cE(a,u,T),Ms(a,u,T)):(Tt&&U&&GT(u),u.flags|=1,cr(a,u,y,T),u.child)}function HP(a,u,d,y,T){if(a===null){var w=d.type;return typeof w=="function"&&!$T(w)&&w.defaultProps===void 0&&d.compare===null?(u.tag=15,u.type=w,GP(a,u,w,y,T)):(a=Gg(d.type,null,y,u,u.mode,T),a.ref=u.ref,a.return=u,u.child=a)}if(w=a.child,!DE(a,T)){var N=w.memoizedProps;if(d=d.compare,d=d!==null?d:ph,d(N,y)&&a.ref===u.ref)return Ms(a,u,T)}return u.flags|=1,a=As(w,y),a.ref=u.ref,a.return=u,u.child=a}function GP(a,u,d,y,T){if(a!==null){var w=a.memoizedProps;if(ph(w,y)&&a.ref===u.ref)if(Wn=!1,u.pendingProps=y=w,DE(a,T))(a.flags&131072)!==0&&(Wn=!0);else return u.lanes=a.lanes,Ms(a,u,T)}return xE(a,u,d,y,T)}function jP(a,u,d){var y=u.pendingProps,T=y.children,w=a!==null?a.memoizedState:null;if(y.mode==="hidden"){if((u.flags&128)!==0){if(y=w!==null?w.baseLanes|d:d,a!==null){for(T=u.child=a.child,w=0;T!==null;)w=w|T.lanes|T.childLanes,T=T.sibling;u.childLanes=w&~y}else u.childLanes=0,u.child=null;return KP(a,u,y,d)}if((d&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},a!==null&&Jg(u,w!==null?w.cachePool:null),w!==null?G1(u,w):oE(),DP(u);else return u.lanes=u.childLanes=536870912,KP(a,u,w!==null?w.baseLanes|d:d,d)}else w!==null?(Jg(u,w.cachePool),G1(u,w),Oa(),u.memoizedState=null):(a!==null&&Jg(u,null),oE(),Oa());return cr(a,u,T,d),u.child}function KP(a,u,d,y){var T=ZT();return T=T===null?null:{parent:Fn._currentValue,pool:T},u.memoizedState={baseLanes:d,cachePool:T},a!==null&&Jg(u,null),oE(),DP(u),a!==null&&_h(a,u,y,!0),null}function hy(a,u){var d=u.ref;if(d===null)a!==null&&a.ref!==null&&(u.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(r(284));(a===null||a.ref!==d)&&(u.flags|=4194816)}}function xE(a,u,d,y,T){return fu(u),d=lE(a,u,d,y,void 0,T),y=uE(),a!==null&&!Wn?(cE(a,u,T),Ms(a,u,T)):(Tt&&y&&GT(u),u.flags|=1,cr(a,u,d,T),u.child)}function WP(a,u,d,y,T,w){return fu(u),u.updateQueue=null,d=K1(u,y,d,T),j1(a),y=uE(),a!==null&&!Wn?(cE(a,u,w),Ms(a,u,w)):(Tt&&y&&GT(u),u.flags|=1,cr(a,u,d,w),u.child)}function YP(a,u,d,y,T){if(fu(u),u.stateNode===null){var w=Bc,N=d.contextType;typeof N=="object"&&N!==null&&(w=Tr(N)),w=new d(y,w),u.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=SE,u.stateNode=w,w._reactInternals=u,w=u.stateNode,w.props=y,w.state=u.memoizedState,w.refs={},tE(u),N=d.contextType,w.context=typeof N=="object"&&N!==null?Tr(N):Bc,w.state=u.memoizedState,N=d.getDerivedStateFromProps,typeof N=="function"&&(bE(u,d,N,y),w.state=u.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(N=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),N!==w.state&&SE.enqueueReplaceState(w,w.state,null),xh(u,y,w,T),Ah(),w.state=u.memoizedState),typeof w.componentDidMount=="function"&&(u.flags|=4194308),y=!0}else if(a===null){w=u.stateNode;var U=u.memoizedProps,j=pu(d,U);w.props=j;var ee=w.context,ue=d.contextType;N=Bc,typeof ue=="object"&&ue!==null&&(N=Tr(ue));var he=d.getDerivedStateFromProps;ue=typeof he=="function"||typeof w.getSnapshotBeforeUpdate=="function",U=u.pendingProps!==U,ue||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(U||ee!==N)&&OP(u,w,y,N),Pa=!1;var ne=u.memoizedState;w.state=ne,xh(u,y,w,T),Ah(),ee=u.memoizedState,U||ne!==ee||Pa?(typeof he=="function"&&(bE(u,d,he,y),ee=u.memoizedState),(j=Pa||kP(u,d,j,y,ne,ee,N))?(ue||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(u.flags|=4194308)):(typeof w.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=y,u.memoizedState=ee),w.props=y,w.state=ee,w.context=N,y=j):(typeof w.componentDidMount=="function"&&(u.flags|=4194308),y=!1)}else{w=u.stateNode,nE(a,u),N=u.memoizedProps,ue=pu(d,N),w.props=ue,he=u.pendingProps,ne=w.context,ee=d.contextType,j=Bc,typeof ee=="object"&&ee!==null&&(j=Tr(ee)),U=d.getDerivedStateFromProps,(ee=typeof U=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(N!==he||ne!==j)&&OP(u,w,y,j),Pa=!1,ne=u.memoizedState,w.state=ne,xh(u,y,w,T),Ah();var re=u.memoizedState;N!==he||ne!==re||Pa||a!==null&&a.dependencies!==null&&Wg(a.dependencies)?(typeof U=="function"&&(bE(u,d,U,y),re=u.memoizedState),(ue=Pa||kP(u,d,ue,y,ne,re,j)||a!==null&&a.dependencies!==null&&Wg(a.dependencies))?(ee||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(y,re,j),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(y,re,j)),typeof w.componentDidUpdate=="function"&&(u.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof w.componentDidUpdate!="function"||N===a.memoizedProps&&ne===a.memoizedState||(u.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||N===a.memoizedProps&&ne===a.memoizedState||(u.flags|=1024),u.memoizedProps=y,u.memoizedState=re),w.props=y,w.state=re,w.context=j,y=ue):(typeof w.componentDidUpdate!="function"||N===a.memoizedProps&&ne===a.memoizedState||(u.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||N===a.memoizedProps&&ne===a.memoizedState||(u.flags|=1024),y=!1)}return w=y,hy(a,u),y=(u.flags&128)!==0,w||y?(w=u.stateNode,d=y&&typeof d.getDerivedStateFromError!="function"?null:w.render(),u.flags|=1,a!==null&&y?(u.child=Jc(u,a.child,null,T),u.child=Jc(u,null,d,T)):cr(a,u,d,T),u.memoizedState=w.state,a=u.child):a=Ms(a,u,T),a}function JP(a,u,d,y){return yh(),u.flags|=256,cr(a,u,d,y),u.child}var CE={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function IE(a){return{baseLanes:a,cachePool:V1()}}function RE(a,u,d){return a=a!==null?a.childLanes&~d:0,u&&(a|=Vi),a}function QP(a,u,d){var y=u.pendingProps,T=!1,w=(u.flags&128)!==0,N;if((N=w)||(N=a!==null&&a.memoizedState===null?!1:(Bn.current&2)!==0),N&&(T=!0,u.flags&=-129),N=(u.flags&32)!==0,u.flags&=-33,a===null){if(Tt){if(T?ka(u):Oa(),Tt){var U=pn,j;if(j=U){e:{for(j=U,U=Uo;j.nodeType!==8;){if(!U){U=null;break e}if(j=ao(j.nextSibling),j===null){U=null;break e}}U=j}U!==null?(u.memoizedState={dehydrated:U,treeContext:su!==null?{id:xs,overflow:Cs}:null,retryLane:536870912,hydrationErrors:null},j=si(18,null,null,0),j.stateNode=U,j.return=u,u.child=j,kr=u,pn=null,j=!0):j=!1}j||uu(u)}if(U=u.memoizedState,U!==null&&(U=U.dehydrated,U!==null))return dw(U)?u.lanes=32:u.lanes=536870912,null;Ns(u)}return U=y.children,y=y.fallback,T?(Oa(),T=u.mode,U=py({mode:"hidden",children:U},T),y=ou(y,T,d,null),U.return=u,y.return=u,U.sibling=y,u.child=U,T=u.child,T.memoizedState=IE(d),T.childLanes=RE(a,N,d),u.memoizedState=CE,y):(ka(u),PE(u,U))}if(j=a.memoizedState,j!==null&&(U=j.dehydrated,U!==null)){if(w)u.flags&256?(ka(u),u.flags&=-257,u=NE(a,u,d)):u.memoizedState!==null?(Oa(),u.child=a.child,u.flags|=128,u=null):(Oa(),T=y.fallback,U=u.mode,y=py({mode:"visible",children:y.children},U),T=ou(T,U,d,null),T.flags|=2,y.return=u,T.return=u,y.sibling=T,u.child=y,Jc(u,a.child,null,d),y=u.child,y.memoizedState=IE(d),y.childLanes=RE(a,N,d),u.memoizedState=CE,u=T);else if(ka(u),dw(U)){if(N=U.nextSibling&&U.nextSibling.dataset,N)var ee=N.dgst;N=ee,y=Error(r(419)),y.stack="",y.digest=N,vh({value:y,source:null,stack:null}),u=NE(a,u,d)}else if(Wn||_h(a,u,d,!1),N=(d&a.childLanes)!==0,Wn||N){if(N=$t,N!==null&&(y=d&-d,y=(y&42)!==0?1:Kt(y),y=(y&(N.suspendedLanes|d))!==0?0:y,y!==0&&y!==j.retryLane))throw j.retryLane=y,Fc(a,y),fi(N,a,y),$P;U.data==="$?"||YE(),u=NE(a,u,d)}else U.data==="$?"?(u.flags|=192,u.child=a.child,u=null):(a=j.treeContext,pn=ao(U.nextSibling),kr=u,Tt=!0,lu=null,Uo=!1,a!==null&&(ki[Oi++]=xs,ki[Oi++]=Cs,ki[Oi++]=su,xs=a.id,Cs=a.overflow,su=u),u=PE(u,y.children),u.flags|=4096);return u}return T?(Oa(),T=y.fallback,U=u.mode,j=a.child,ee=j.sibling,y=As(j,{mode:"hidden",children:y.children}),y.subtreeFlags=j.subtreeFlags&65011712,ee!==null?T=As(ee,T):(T=ou(T,U,d,null),T.flags|=2),T.return=u,y.return=u,y.sibling=T,u.child=y,y=T,T=u.child,U=a.child.memoizedState,U===null?U=IE(d):(j=U.cachePool,j!==null?(ee=Fn._currentValue,j=j.parent!==ee?{parent:ee,pool:ee}:j):j=V1(),U={baseLanes:U.baseLanes|d,cachePool:j}),T.memoizedState=U,T.childLanes=RE(a,N,d),u.memoizedState=CE,y):(ka(u),d=a.child,a=d.sibling,d=As(d,{mode:"visible",children:y.children}),d.return=u,d.sibling=null,a!==null&&(N=u.deletions,N===null?(u.deletions=[a],u.flags|=16):N.push(a)),u.child=d,u.memoizedState=null,d)}function PE(a,u){return u=py({mode:"visible",children:u},a.mode),u.return=a,a.child=u}function py(a,u){return a=si(22,a,null,u),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function NE(a,u,d){return Jc(u,a.child,null,d),a=PE(u,u.pendingProps.children),a.flags|=2,u.memoizedState=null,a}function XP(a,u,d){a.lanes|=u;var y=a.alternate;y!==null&&(y.lanes|=u),YT(a.return,u,d)}function ME(a,u,d,y,T){var w=a.memoizedState;w===null?a.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:y,tail:d,tailMode:T}:(w.isBackwards=u,w.rendering=null,w.renderingStartTime=0,w.last=y,w.tail=d,w.tailMode=T)}function ZP(a,u,d){var y=u.pendingProps,T=y.revealOrder,w=y.tail;if(cr(a,u,y.children,d),y=Bn.current,(y&2)!==0)y=y&1|2,u.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=u.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&XP(a,d,u);else if(a.tag===19)XP(a,d,u);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===u)break e;for(;a.sibling===null;){if(a.return===null||a.return===u)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}y&=1}switch(de(Bn,y),T){case"forwards":for(d=u.child,T=null;d!==null;)a=d.alternate,a!==null&&cy(a)===null&&(T=d),d=d.sibling;d=T,d===null?(T=u.child,u.child=null):(T=d.sibling,d.sibling=null),ME(u,!1,T,d,w);break;case"backwards":for(d=null,T=u.child,u.child=null;T!==null;){if(a=T.alternate,a!==null&&cy(a)===null){u.child=T;break}a=T.sibling,T.sibling=d,d=T,T=a}ME(u,!0,d,null,w);break;case"together":ME(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Ms(a,u,d){if(a!==null&&(u.dependencies=a.dependencies),Ba|=u.lanes,(d&u.childLanes)===0)if(a!==null){if(_h(a,u,d,!1),(d&u.childLanes)===0)return null}else return null;if(a!==null&&u.child!==a.child)throw Error(r(153));if(u.child!==null){for(a=u.child,d=As(a,a.pendingProps),u.child=d,d.return=u;a.sibling!==null;)a=a.sibling,d=d.sibling=As(a,a.pendingProps),d.return=u;d.sibling=null}return u.child}function DE(a,u){return(a.lanes&u)!==0?!0:(a=a.dependencies,!!(a!==null&&Wg(a)))}function WG(a,u,d){switch(u.tag){case 3:wt(u,u.stateNode.containerInfo),Ra(u,Fn,a.memoizedState.cache),yh();break;case 27:case 5:je(u);break;case 4:wt(u,u.stateNode.containerInfo);break;case 10:Ra(u,u.type,u.memoizedProps.value);break;case 13:var y=u.memoizedState;if(y!==null)return y.dehydrated!==null?(ka(u),u.flags|=128,null):(d&u.child.childLanes)!==0?QP(a,u,d):(ka(u),a=Ms(a,u,d),a!==null?a.sibling:null);ka(u);break;case 19:var T=(a.flags&128)!==0;if(y=(d&u.childLanes)!==0,y||(_h(a,u,d,!1),y=(d&u.childLanes)!==0),T){if(y)return ZP(a,u,d);u.flags|=128}if(T=u.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),de(Bn,Bn.current),y)break;return null;case 22:case 23:return u.lanes=0,jP(a,u,d);case 24:Ra(u,Fn,a.memoizedState.cache)}return Ms(a,u,d)}function eN(a,u,d){if(a!==null)if(a.memoizedProps!==u.pendingProps)Wn=!0;else{if(!DE(a,d)&&(u.flags&128)===0)return Wn=!1,WG(a,u,d);Wn=(a.flags&131072)!==0}else Wn=!1,Tt&&(u.flags&1048576)!==0&&P1(u,Kg,u.index);switch(u.lanes=0,u.tag){case 16:e:{a=u.pendingProps;var y=u.elementType,T=y._init;if(y=T(y._payload),u.type=y,typeof y=="function")$T(y)?(a=pu(y,a),u.tag=1,u=YP(null,u,y,a,d)):(u.tag=0,u=xE(null,u,y,a,d));else{if(y!=null){if(T=y.$$typeof,T===q){u.tag=11,u=zP(null,u,y,a,d);break e}else if(T===M){u.tag=14,u=HP(null,u,y,a,d);break e}}throw u=Se(y)||y,Error(r(306,u,""))}}return u;case 0:return xE(a,u,u.type,u.pendingProps,d);case 1:return y=u.type,T=pu(y,u.pendingProps),YP(a,u,y,T,d);case 3:e:{if(wt(u,u.stateNode.containerInfo),a===null)throw Error(r(387));y=u.pendingProps;var w=u.memoizedState;T=w.element,nE(a,u),xh(u,y,null,d);var N=u.memoizedState;if(y=N.cache,Ra(u,Fn,y),y!==w.cache&&JT(u,[Fn],d,!0),Ah(),y=N.element,w.isDehydrated)if(w={element:y,isDehydrated:!1,cache:N.cache},u.updateQueue.baseState=w,u.memoizedState=w,u.flags&256){u=JP(a,u,y,d);break e}else if(y!==T){T=Mi(Error(r(424)),u),vh(T),u=JP(a,u,y,d);break e}else{switch(a=u.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(pn=ao(a.firstChild),kr=u,Tt=!0,lu=null,Uo=!0,d=MP(u,null,y,d),u.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(yh(),y===T){u=Ms(a,u,d);break e}cr(a,u,y,d)}u=u.child}return u;case 26:return hy(a,u),a===null?(d=iM(u.type,null,u.pendingProps,null))?u.memoizedState=d:Tt||(d=u.type,a=u.pendingProps,y=Iy(qe.current).createElement(d),y[at]=u,y[kt]=a,dr(y,d,a),En(y),u.stateNode=y):u.memoizedState=iM(u.type,a.memoizedProps,u.pendingProps,a.memoizedState),null;case 27:return je(u),a===null&&Tt&&(y=u.stateNode=tM(u.type,u.pendingProps,qe.current),kr=u,Uo=!0,T=pn,Ha(u.type)?(hw=T,pn=ao(y.firstChild)):pn=T),cr(a,u,u.pendingProps.children,d),hy(a,u),a===null&&(u.flags|=4194304),u.child;case 5:return a===null&&Tt&&((T=y=pn)&&(y=w9(y,u.type,u.pendingProps,Uo),y!==null?(u.stateNode=y,kr=u,pn=ao(y.firstChild),Uo=!1,T=!0):T=!1),T||uu(u)),je(u),T=u.type,w=u.pendingProps,N=a!==null?a.memoizedProps:null,y=w.children,uw(T,w)?y=null:N!==null&&uw(T,N)&&(u.flags|=32),u.memoizedState!==null&&(T=lE(a,u,BG,null,null,d),Wh._currentValue=T),hy(a,u),cr(a,u,y,d),u.child;case 6:return a===null&&Tt&&((a=d=pn)&&(d=b9(d,u.pendingProps,Uo),d!==null?(u.stateNode=d,kr=u,pn=null,a=!0):a=!1),a||uu(u)),null;case 13:return QP(a,u,d);case 4:return wt(u,u.stateNode.containerInfo),y=u.pendingProps,a===null?u.child=Jc(u,null,y,d):cr(a,u,y,d),u.child;case 11:return zP(a,u,u.type,u.pendingProps,d);case 7:return cr(a,u,u.pendingProps,d),u.child;case 8:return cr(a,u,u.pendingProps.children,d),u.child;case 12:return cr(a,u,u.pendingProps.children,d),u.child;case 10:return y=u.pendingProps,Ra(u,u.type,y.value),cr(a,u,y.children,d),u.child;case 9:return T=u.type._context,y=u.pendingProps.children,fu(u),T=Tr(T),y=y(T),u.flags|=1,cr(a,u,y,d),u.child;case 14:return HP(a,u,u.type,u.pendingProps,d);case 15:return GP(a,u,u.type,u.pendingProps,d);case 19:return ZP(a,u,d);case 31:return y=u.pendingProps,d=u.mode,y={mode:y.mode,children:y.children},a===null?(d=py(y,d),d.ref=u.ref,u.child=d,d.return=u,u=d):(d=As(a.child,y),d.ref=u.ref,u.child=d,d.return=u,u=d),u;case 22:return jP(a,u,d);case 24:return fu(u),y=Tr(Fn),a===null?(T=ZT(),T===null&&(T=$t,w=QT(),T.pooledCache=w,w.refCount++,w!==null&&(T.pooledCacheLanes|=d),T=w),u.memoizedState={parent:y,cache:T},tE(u),Ra(u,Fn,T)):((a.lanes&d)!==0&&(nE(a,u),xh(u,null,null,d),Ah()),T=a.memoizedState,w=u.memoizedState,T.parent!==y?(T={parent:y,cache:y},u.memoizedState=T,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=T),Ra(u,Fn,y)):(y=w.cache,Ra(u,Fn,y),y!==T.cache&&JT(u,[Fn],d,!0))),cr(a,u,u.pendingProps.children,d),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function Ds(a){a.flags|=4}function tN(a,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!uM(u)){if(u=Li.current,u!==null&&((dt&4194048)===dt?Fo!==null:(dt&62914560)!==dt&&(dt&536870912)===0||u!==Fo))throw bh=eE,U1;a.flags|=8192}}function my(a,u){u!==null&&(a.flags|=4),a.flags&16384&&(u=a.tag!==22?Ie():536870912,a.lanes|=u,ef|=u)}function Dh(a,u){if(!Tt)switch(a.tailMode){case"hidden":u=a.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?a.tail=null:d.sibling=null;break;case"collapsed":d=a.tail;for(var y=null;d!==null;)d.alternate!==null&&(y=d),d=d.sibling;y===null?u||a.tail===null?a.tail=null:a.tail.sibling=null:y.sibling=null}}function un(a){var u=a.alternate!==null&&a.alternate.child===a.child,d=0,y=0;if(u)for(var T=a.child;T!==null;)d|=T.lanes|T.childLanes,y|=T.subtreeFlags&65011712,y|=T.flags&65011712,T.return=a,T=T.sibling;else for(T=a.child;T!==null;)d|=T.lanes|T.childLanes,y|=T.subtreeFlags,y|=T.flags,T.return=a,T=T.sibling;return a.subtreeFlags|=y,a.childLanes=d,u}function YG(a,u,d){var y=u.pendingProps;switch(jT(u),u.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(u),null;case 1:return un(u),null;case 3:return d=u.stateNode,y=null,a!==null&&(y=a.memoizedState.cache),u.memoizedState.cache!==y&&(u.flags|=2048),Rs(Fn),xe(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(a===null||a.child===null)&&(gh(u)?Ds(u):a===null||a.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,D1())),un(u),null;case 26:return d=u.memoizedState,a===null?(Ds(u),d!==null?(un(u),tN(u,d)):(un(u),u.flags&=-16777217)):d?d!==a.memoizedState?(Ds(u),un(u),tN(u,d)):(un(u),u.flags&=-16777217):(a.memoizedProps!==y&&Ds(u),un(u),u.flags&=-16777217),null;case 27:Ye(u),d=qe.current;var T=u.type;if(a!==null&&u.stateNode!=null)a.memoizedProps!==y&&Ds(u);else{if(!y){if(u.stateNode===null)throw Error(r(166));return un(u),null}a=Le.current,gh(u)?N1(u):(a=tM(T,y,d),u.stateNode=a,Ds(u))}return un(u),null;case 5:if(Ye(u),d=u.type,a!==null&&u.stateNode!=null)a.memoizedProps!==y&&Ds(u);else{if(!y){if(u.stateNode===null)throw Error(r(166));return un(u),null}if(a=Le.current,gh(u))N1(u);else{switch(T=Iy(qe.current),a){case 1:a=T.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:a=T.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":a=T.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":a=T.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":a=T.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof y.is=="string"?T.createElement("select",{is:y.is}):T.createElement("select"),y.multiple?a.multiple=!0:y.size&&(a.size=y.size);break;default:a=typeof y.is=="string"?T.createElement(d,{is:y.is}):T.createElement(d)}}a[at]=u,a[kt]=y;e:for(T=u.child;T!==null;){if(T.tag===5||T.tag===6)a.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===u)break e;for(;T.sibling===null;){if(T.return===null||T.return===u)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}u.stateNode=a;e:switch(dr(a,d,y),d){case"button":case"input":case"select":case"textarea":a=!!y.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&Ds(u)}}return un(u),u.flags&=-16777217,null;case 6:if(a&&u.stateNode!=null)a.memoizedProps!==y&&Ds(u);else{if(typeof y!="string"&&u.stateNode===null)throw Error(r(166));if(a=qe.current,gh(u)){if(a=u.stateNode,d=u.memoizedProps,y=null,T=kr,T!==null)switch(T.tag){case 27:case 5:y=T.memoizedProps}a[at]=u,a=!!(a.nodeValue===d||y!==null&&y.suppressHydrationWarning===!0||WN(a.nodeValue,d)),a||uu(u)}else a=Iy(a).createTextNode(y),a[at]=u,u.stateNode=a}return un(u),null;case 13:if(y=u.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(T=gh(u),y!==null&&y.dehydrated!==null){if(a===null){if(!T)throw Error(r(318));if(T=u.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(r(317));T[at]=u}else yh(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;un(u),T=!1}else T=D1(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=T),T=!0;if(!T)return u.flags&256?(Ns(u),u):(Ns(u),null)}if(Ns(u),(u.flags&128)!==0)return u.lanes=d,u;if(d=y!==null,a=a!==null&&a.memoizedState!==null,d){y=u.child,T=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(T=y.alternate.memoizedState.cachePool.pool);var w=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(w=y.memoizedState.cachePool.pool),w!==T&&(y.flags|=2048)}return d!==a&&d&&(u.child.flags|=8192),my(u,u.updateQueue),un(u),null;case 4:return xe(),a===null&&iw(u.stateNode.containerInfo),un(u),null;case 10:return Rs(u.type),un(u),null;case 19:if(ae(Bn),T=u.memoizedState,T===null)return un(u),null;if(y=(u.flags&128)!==0,w=T.rendering,w===null)if(y)Dh(T,!1);else{if(mn!==0||a!==null&&(a.flags&128)!==0)for(a=u.child;a!==null;){if(w=cy(a),w!==null){for(u.flags|=128,Dh(T,!1),a=w.updateQueue,u.updateQueue=a,my(u,a),u.subtreeFlags=0,a=d,d=u.child;d!==null;)R1(d,a),d=d.sibling;return de(Bn,Bn.current&1|2),u.child}a=a.sibling}T.tail!==null&&ln()>vy&&(u.flags|=128,y=!0,Dh(T,!1),u.lanes=4194304)}else{if(!y)if(a=cy(w),a!==null){if(u.flags|=128,y=!0,a=a.updateQueue,u.updateQueue=a,my(u,a),Dh(T,!0),T.tail===null&&T.tailMode==="hidden"&&!w.alternate&&!Tt)return un(u),null}else 2*ln()-T.renderingStartTime>vy&&d!==536870912&&(u.flags|=128,y=!0,Dh(T,!1),u.lanes=4194304);T.isBackwards?(w.sibling=u.child,u.child=w):(a=T.last,a!==null?a.sibling=w:u.child=w,T.last=w)}return T.tail!==null?(u=T.tail,T.rendering=u,T.tail=u.sibling,T.renderingStartTime=ln(),u.sibling=null,a=Bn.current,de(Bn,y?a&1|2:a&1),u):(un(u),null);case 22:case 23:return Ns(u),sE(),y=u.memoizedState!==null,a!==null?a.memoizedState!==null!==y&&(u.flags|=8192):y&&(u.flags|=8192),y?(d&536870912)!==0&&(u.flags&128)===0&&(un(u),u.subtreeFlags&6&&(u.flags|=8192)):un(u),d=u.updateQueue,d!==null&&my(u,d.retryQueue),d=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==d&&(u.flags|=2048),a!==null&&ae(du),null;case 24:return d=null,a!==null&&(d=a.memoizedState.cache),u.memoizedState.cache!==d&&(u.flags|=2048),Rs(Fn),un(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function JG(a,u){switch(jT(u),u.tag){case 1:return a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 3:return Rs(Fn),xe(),a=u.flags,(a&65536)!==0&&(a&128)===0?(u.flags=a&-65537|128,u):null;case 26:case 27:case 5:return Ye(u),null;case 13:if(Ns(u),a=u.memoizedState,a!==null&&a.dehydrated!==null){if(u.alternate===null)throw Error(r(340));yh()}return a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 19:return ae(Bn),null;case 4:return xe(),null;case 10:return Rs(u.type),null;case 22:case 23:return Ns(u),sE(),a!==null&&ae(du),a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 24:return Rs(Fn),null;case 25:return null;default:return null}}function nN(a,u){switch(jT(u),u.tag){case 3:Rs(Fn),xe();break;case 26:case 27:case 5:Ye(u);break;case 4:xe();break;case 13:Ns(u);break;case 19:ae(Bn);break;case 10:Rs(u.type);break;case 22:case 23:Ns(u),sE(),a!==null&&ae(du);break;case 24:Rs(Fn)}}function kh(a,u){try{var d=u.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var T=y.next;d=T;do{if((d.tag&a)===a){y=void 0;var w=d.create,N=d.inst;y=w(),N.destroy=y}d=d.next}while(d!==T)}}catch(U){Bt(u,u.return,U)}}function La(a,u,d){try{var y=u.updateQueue,T=y!==null?y.lastEffect:null;if(T!==null){var w=T.next;y=w;do{if((y.tag&a)===a){var N=y.inst,U=N.destroy;if(U!==void 0){N.destroy=void 0,T=u;var j=d,ee=U;try{ee()}catch(ue){Bt(T,j,ue)}}}y=y.next}while(y!==w)}}catch(ue){Bt(u,u.return,ue)}}function rN(a){var u=a.updateQueue;if(u!==null){var d=a.stateNode;try{H1(u,d)}catch(y){Bt(a,a.return,y)}}}function iN(a,u,d){d.props=pu(a.type,a.memoizedProps),d.state=a.memoizedState;try{d.componentWillUnmount()}catch(y){Bt(a,u,y)}}function Oh(a,u){try{var d=a.ref;if(d!==null){switch(a.tag){case 26:case 27:case 5:var y=a.stateNode;break;case 30:y=a.stateNode;break;default:y=a.stateNode}typeof d=="function"?a.refCleanup=d(y):d.current=y}}catch(T){Bt(a,u,T)}}function Bo(a,u){var d=a.ref,y=a.refCleanup;if(d!==null)if(typeof y=="function")try{y()}catch(T){Bt(a,u,T)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(T){Bt(a,u,T)}else d.current=null}function oN(a){var u=a.type,d=a.memoizedProps,y=a.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":d.autoFocus&&y.focus();break e;case"img":d.src?y.src=d.src:d.srcSet&&(y.srcset=d.srcSet)}}catch(T){Bt(a,a.return,T)}}function kE(a,u,d){try{var y=a.stateNode;y9(y,a.type,d,u),y[kt]=u}catch(T){Bt(a,a.return,T)}}function sN(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Ha(a.type)||a.tag===4}function OE(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||sN(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Ha(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function LE(a,u,d){var y=a.tag;if(y===5||y===6)a=a.stateNode,u?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(a,u):(u=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,u.appendChild(a),d=d._reactRootContainer,d!=null||u.onclick!==null||(u.onclick=Cy));else if(y!==4&&(y===27&&Ha(a.type)&&(d=a.stateNode,u=null),a=a.child,a!==null))for(LE(a,u,d),a=a.sibling;a!==null;)LE(a,u,d),a=a.sibling}function gy(a,u,d){var y=a.tag;if(y===5||y===6)a=a.stateNode,u?d.insertBefore(a,u):d.appendChild(a);else if(y!==4&&(y===27&&Ha(a.type)&&(d=a.stateNode),a=a.child,a!==null))for(gy(a,u,d),a=a.sibling;a!==null;)gy(a,u,d),a=a.sibling}function aN(a){var u=a.stateNode,d=a.memoizedProps;try{for(var y=a.type,T=u.attributes;T.length;)u.removeAttributeNode(T[0]);dr(u,y,d),u[at]=a,u[kt]=d}catch(w){Bt(a,a.return,w)}}var ks=!1,bn=!1,VE=!1,lN=typeof WeakSet=="function"?WeakSet:Set,Yn=null;function QG(a,u){if(a=a.containerInfo,aw=ky,a=_1(a),OT(a)){if("selectionStart"in a)var d={start:a.selectionStart,end:a.selectionEnd};else e:{d=(d=a.ownerDocument)&&d.defaultView||window;var y=d.getSelection&&d.getSelection();if(y&&y.rangeCount!==0){d=y.anchorNode;var T=y.anchorOffset,w=y.focusNode;y=y.focusOffset;try{d.nodeType,w.nodeType}catch{d=null;break e}var N=0,U=-1,j=-1,ee=0,ue=0,he=a,ne=null;t:for(;;){for(var re;he!==d||T!==0&&he.nodeType!==3||(U=N+T),he!==w||y!==0&&he.nodeType!==3||(j=N+y),he.nodeType===3&&(N+=he.nodeValue.length),(re=he.firstChild)!==null;)ne=he,he=re;for(;;){if(he===a)break t;if(ne===d&&++ee===T&&(U=N),ne===w&&++ue===y&&(j=N),(re=he.nextSibling)!==null)break;he=ne,ne=he.parentNode}he=re}d=U===-1||j===-1?null:{start:U,end:j}}else d=null}d=d||{start:0,end:0}}else d=null;for(lw={focusedElem:a,selectionRange:d},ky=!1,Yn=u;Yn!==null;)if(u=Yn,a=u.child,(u.subtreeFlags&1024)!==0&&a!==null)a.return=u,Yn=a;else for(;Yn!==null;){switch(u=Yn,w=u.alternate,a=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&w!==null){a=void 0,d=u,T=w.memoizedProps,w=w.memoizedState,y=d.stateNode;try{var Ge=pu(d.type,T,d.elementType===d.type);a=y.getSnapshotBeforeUpdate(Ge,w),y.__reactInternalSnapshotBeforeUpdate=a}catch($e){Bt(d,d.return,$e)}}break;case 3:if((a&1024)!==0){if(a=u.stateNode.containerInfo,d=a.nodeType,d===9)fw(a);else if(d===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":fw(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=u.sibling,a!==null){a.return=u.return,Yn=a;break}Yn=u.return}}function uN(a,u,d){var y=d.flags;switch(d.tag){case 0:case 11:case 15:Va(a,d),y&4&&kh(5,d);break;case 1:if(Va(a,d),y&4)if(a=d.stateNode,u===null)try{a.componentDidMount()}catch(N){Bt(d,d.return,N)}else{var T=pu(d.type,u.memoizedProps);u=u.memoizedState;try{a.componentDidUpdate(T,u,a.__reactInternalSnapshotBeforeUpdate)}catch(N){Bt(d,d.return,N)}}y&64&&rN(d),y&512&&Oh(d,d.return);break;case 3:if(Va(a,d),y&64&&(a=d.updateQueue,a!==null)){if(u=null,d.child!==null)switch(d.child.tag){case 27:case 5:u=d.child.stateNode;break;case 1:u=d.child.stateNode}try{H1(a,u)}catch(N){Bt(d,d.return,N)}}break;case 27:u===null&&y&4&&aN(d);case 26:case 5:Va(a,d),u===null&&y&4&&oN(d),y&512&&Oh(d,d.return);break;case 12:Va(a,d);break;case 13:Va(a,d),y&4&&dN(a,d),y&64&&(a=d.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(d=s9.bind(null,d),S9(a,d))));break;case 22:if(y=d.memoizedState!==null||ks,!y){u=u!==null&&u.memoizedState!==null||bn,T=ks;var w=bn;ks=y,(bn=u)&&!w?Ua(a,d,(d.subtreeFlags&8772)!==0):Va(a,d),ks=T,bn=w}break;case 30:break;default:Va(a,d)}}function cN(a){var u=a.alternate;u!==null&&(a.alternate=null,cN(u)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(u=a.stateNode,u!==null&&Aa(u)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var tn=null,Wr=!1;function Os(a,u,d){for(d=d.child;d!==null;)fN(a,u,d),d=d.sibling}function fN(a,u,d){if(_t&&typeof _t.onCommitFiberUnmount=="function")try{_t.onCommitFiberUnmount(en,d)}catch{}switch(d.tag){case 26:bn||Bo(d,u),Os(a,u,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:bn||Bo(d,u);var y=tn,T=Wr;Ha(d.type)&&(tn=d.stateNode,Wr=!1),Os(a,u,d),Hh(d.stateNode),tn=y,Wr=T;break;case 5:bn||Bo(d,u);case 6:if(y=tn,T=Wr,tn=null,Os(a,u,d),tn=y,Wr=T,tn!==null)if(Wr)try{(tn.nodeType===9?tn.body:tn.nodeName==="HTML"?tn.ownerDocument.body:tn).removeChild(d.stateNode)}catch(w){Bt(d,u,w)}else try{tn.removeChild(d.stateNode)}catch(w){Bt(d,u,w)}break;case 18:tn!==null&&(Wr?(a=tn,ZN(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,d.stateNode),Xh(a)):ZN(tn,d.stateNode));break;case 4:y=tn,T=Wr,tn=d.stateNode.containerInfo,Wr=!0,Os(a,u,d),tn=y,Wr=T;break;case 0:case 11:case 14:case 15:bn||La(2,d,u),bn||La(4,d,u),Os(a,u,d);break;case 1:bn||(Bo(d,u),y=d.stateNode,typeof y.componentWillUnmount=="function"&&iN(d,u,y)),Os(a,u,d);break;case 21:Os(a,u,d);break;case 22:bn=(y=bn)||d.memoizedState!==null,Os(a,u,d),bn=y;break;default:Os(a,u,d)}}function dN(a,u){if(u.memoizedState===null&&(a=u.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Xh(a)}catch(d){Bt(u,u.return,d)}}function XG(a){switch(a.tag){case 13:case 19:var u=a.stateNode;return u===null&&(u=a.stateNode=new lN),u;case 22:return a=a.stateNode,u=a._retryCache,u===null&&(u=a._retryCache=new lN),u;default:throw Error(r(435,a.tag))}}function UE(a,u){var d=XG(a);u.forEach(function(y){var T=a9.bind(null,a,y);d.has(y)||(d.add(y),y.then(T,T))})}function ai(a,u){var d=u.deletions;if(d!==null)for(var y=0;y<d.length;y++){var T=d[y],w=a,N=u,U=N;e:for(;U!==null;){switch(U.tag){case 27:if(Ha(U.type)){tn=U.stateNode,Wr=!1;break e}break;case 5:tn=U.stateNode,Wr=!1;break e;case 3:case 4:tn=U.stateNode.containerInfo,Wr=!0;break e}U=U.return}if(tn===null)throw Error(r(160));fN(w,N,T),tn=null,Wr=!1,w=T.alternate,w!==null&&(w.return=null),T.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)hN(u,a),u=u.sibling}var so=null;function hN(a,u){var d=a.alternate,y=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:ai(u,a),li(a),y&4&&(La(3,a,a.return),kh(3,a),La(5,a,a.return));break;case 1:ai(u,a),li(a),y&512&&(bn||d===null||Bo(d,d.return)),y&64&&ks&&(a=a.updateQueue,a!==null&&(y=a.callbacks,y!==null&&(d=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=d===null?y:d.concat(y))));break;case 26:var T=so;if(ai(u,a),li(a),y&512&&(bn||d===null||Bo(d,d.return)),y&4){var w=d!==null?d.memoizedState:null;if(y=a.memoizedState,d===null)if(y===null)if(a.stateNode===null){e:{y=a.type,d=a.memoizedProps,T=T.ownerDocument||T;t:switch(y){case"title":w=T.getElementsByTagName("title")[0],(!w||w[zl]||w[at]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=T.createElement(y),T.head.insertBefore(w,T.querySelector("head > title"))),dr(w,y,d),w[at]=a,En(w),y=w;break e;case"link":var N=aM("link","href",T).get(y+(d.href||""));if(N){for(var U=0;U<N.length;U++)if(w=N[U],w.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&w.getAttribute("rel")===(d.rel==null?null:d.rel)&&w.getAttribute("title")===(d.title==null?null:d.title)&&w.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){N.splice(U,1);break t}}w=T.createElement(y),dr(w,y,d),T.head.appendChild(w);break;case"meta":if(N=aM("meta","content",T).get(y+(d.content||""))){for(U=0;U<N.length;U++)if(w=N[U],w.getAttribute("content")===(d.content==null?null:""+d.content)&&w.getAttribute("name")===(d.name==null?null:d.name)&&w.getAttribute("property")===(d.property==null?null:d.property)&&w.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&w.getAttribute("charset")===(d.charSet==null?null:d.charSet)){N.splice(U,1);break t}}w=T.createElement(y),dr(w,y,d),T.head.appendChild(w);break;default:throw Error(r(468,y))}w[at]=a,En(w),y=w}a.stateNode=y}else lM(T,a.type,a.stateNode);else a.stateNode=sM(T,y,a.memoizedProps);else w!==y?(w===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):w.count--,y===null?lM(T,a.type,a.stateNode):sM(T,y,a.memoizedProps)):y===null&&a.stateNode!==null&&kE(a,a.memoizedProps,d.memoizedProps)}break;case 27:ai(u,a),li(a),y&512&&(bn||d===null||Bo(d,d.return)),d!==null&&y&4&&kE(a,a.memoizedProps,d.memoizedProps);break;case 5:if(ai(u,a),li(a),y&512&&(bn||d===null||Bo(d,d.return)),a.flags&32){T=a.stateNode;try{Ii(T,"")}catch(re){Bt(a,a.return,re)}}y&4&&a.stateNode!=null&&(T=a.memoizedProps,kE(a,T,d!==null?d.memoizedProps:T)),y&1024&&(VE=!0);break;case 6:if(ai(u,a),li(a),y&4){if(a.stateNode===null)throw Error(r(162));y=a.memoizedProps,d=a.stateNode;try{d.nodeValue=y}catch(re){Bt(a,a.return,re)}}break;case 3:if(Ny=null,T=so,so=Ry(u.containerInfo),ai(u,a),so=T,li(a),y&4&&d!==null&&d.memoizedState.isDehydrated)try{Xh(u.containerInfo)}catch(re){Bt(a,a.return,re)}VE&&(VE=!1,pN(a));break;case 4:y=so,so=Ry(a.stateNode.containerInfo),ai(u,a),li(a),so=y;break;case 12:ai(u,a),li(a);break;case 13:ai(u,a),li(a),a.child.flags&8192&&a.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(HE=ln()),y&4&&(y=a.updateQueue,y!==null&&(a.updateQueue=null,UE(a,y)));break;case 22:T=a.memoizedState!==null;var j=d!==null&&d.memoizedState!==null,ee=ks,ue=bn;if(ks=ee||T,bn=ue||j,ai(u,a),bn=ue,ks=ee,li(a),y&8192)e:for(u=a.stateNode,u._visibility=T?u._visibility&-2:u._visibility|1,T&&(d===null||j||ks||bn||mu(a)),d=null,u=a;;){if(u.tag===5||u.tag===26){if(d===null){j=d=u;try{if(w=j.stateNode,T)N=w.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none";else{U=j.stateNode;var he=j.memoizedProps.style,ne=he!=null&&he.hasOwnProperty("display")?he.display:null;U.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(re){Bt(j,j.return,re)}}}else if(u.tag===6){if(d===null){j=u;try{j.stateNode.nodeValue=T?"":j.memoizedProps}catch(re){Bt(j,j.return,re)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===a)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break e;for(;u.sibling===null;){if(u.return===null||u.return===a)break e;d===u&&(d=null),u=u.return}d===u&&(d=null),u.sibling.return=u.return,u=u.sibling}y&4&&(y=a.updateQueue,y!==null&&(d=y.retryQueue,d!==null&&(y.retryQueue=null,UE(a,d))));break;case 19:ai(u,a),li(a),y&4&&(y=a.updateQueue,y!==null&&(a.updateQueue=null,UE(a,y)));break;case 30:break;case 21:break;default:ai(u,a),li(a)}}function li(a){var u=a.flags;if(u&2){try{for(var d,y=a.return;y!==null;){if(sN(y)){d=y;break}y=y.return}if(d==null)throw Error(r(160));switch(d.tag){case 27:var T=d.stateNode,w=OE(a);gy(a,w,T);break;case 5:var N=d.stateNode;d.flags&32&&(Ii(N,""),d.flags&=-33);var U=OE(a);gy(a,U,N);break;case 3:case 4:var j=d.stateNode.containerInfo,ee=OE(a);LE(a,ee,j);break;default:throw Error(r(161))}}catch(ue){Bt(a,a.return,ue)}a.flags&=-3}u&4096&&(a.flags&=-4097)}function pN(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var u=a;pN(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),a=a.sibling}}function Va(a,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)uN(a,u.alternate,u),u=u.sibling}function mu(a){for(a=a.child;a!==null;){var u=a;switch(u.tag){case 0:case 11:case 14:case 15:La(4,u,u.return),mu(u);break;case 1:Bo(u,u.return);var d=u.stateNode;typeof d.componentWillUnmount=="function"&&iN(u,u.return,d),mu(u);break;case 27:Hh(u.stateNode);case 26:case 5:Bo(u,u.return),mu(u);break;case 22:u.memoizedState===null&&mu(u);break;case 30:mu(u);break;default:mu(u)}a=a.sibling}}function Ua(a,u,d){for(d=d&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var y=u.alternate,T=a,w=u,N=w.flags;switch(w.tag){case 0:case 11:case 15:Ua(T,w,d),kh(4,w);break;case 1:if(Ua(T,w,d),y=w,T=y.stateNode,typeof T.componentDidMount=="function")try{T.componentDidMount()}catch(ee){Bt(y,y.return,ee)}if(y=w,T=y.updateQueue,T!==null){var U=y.stateNode;try{var j=T.shared.hiddenCallbacks;if(j!==null)for(T.shared.hiddenCallbacks=null,T=0;T<j.length;T++)z1(j[T],U)}catch(ee){Bt(y,y.return,ee)}}d&&N&64&&rN(w),Oh(w,w.return);break;case 27:aN(w);case 26:case 5:Ua(T,w,d),d&&y===null&&N&4&&oN(w),Oh(w,w.return);break;case 12:Ua(T,w,d);break;case 13:Ua(T,w,d),d&&N&4&&dN(T,w);break;case 22:w.memoizedState===null&&Ua(T,w,d),Oh(w,w.return);break;case 30:break;default:Ua(T,w,d)}u=u.sibling}}function FE(a,u){var d=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),a=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(a=u.memoizedState.cachePool.pool),a!==d&&(a!=null&&a.refCount++,d!=null&&Th(d))}function BE(a,u){a=null,u.alternate!==null&&(a=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==a&&(u.refCount++,a!=null&&Th(a))}function qo(a,u,d,y){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)mN(a,u,d,y),u=u.sibling}function mN(a,u,d,y){var T=u.flags;switch(u.tag){case 0:case 11:case 15:qo(a,u,d,y),T&2048&&kh(9,u);break;case 1:qo(a,u,d,y);break;case 3:qo(a,u,d,y),T&2048&&(a=null,u.alternate!==null&&(a=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==a&&(u.refCount++,a!=null&&Th(a)));break;case 12:if(T&2048){qo(a,u,d,y),a=u.stateNode;try{var w=u.memoizedProps,N=w.id,U=w.onPostCommit;typeof U=="function"&&U(N,u.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(j){Bt(u,u.return,j)}}else qo(a,u,d,y);break;case 13:qo(a,u,d,y);break;case 23:break;case 22:w=u.stateNode,N=u.alternate,u.memoizedState!==null?w._visibility&2?qo(a,u,d,y):Lh(a,u):w._visibility&2?qo(a,u,d,y):(w._visibility|=2,Qc(a,u,d,y,(u.subtreeFlags&10256)!==0)),T&2048&&FE(N,u);break;case 24:qo(a,u,d,y),T&2048&&BE(u.alternate,u);break;default:qo(a,u,d,y)}}function Qc(a,u,d,y,T){for(T=T&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var w=a,N=u,U=d,j=y,ee=N.flags;switch(N.tag){case 0:case 11:case 15:Qc(w,N,U,j,T),kh(8,N);break;case 23:break;case 22:var ue=N.stateNode;N.memoizedState!==null?ue._visibility&2?Qc(w,N,U,j,T):Lh(w,N):(ue._visibility|=2,Qc(w,N,U,j,T)),T&&ee&2048&&FE(N.alternate,N);break;case 24:Qc(w,N,U,j,T),T&&ee&2048&&BE(N.alternate,N);break;default:Qc(w,N,U,j,T)}u=u.sibling}}function Lh(a,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var d=a,y=u,T=y.flags;switch(y.tag){case 22:Lh(d,y),T&2048&&FE(y.alternate,y);break;case 24:Lh(d,y),T&2048&&BE(y.alternate,y);break;default:Lh(d,y)}u=u.sibling}}var Vh=8192;function Xc(a){if(a.subtreeFlags&Vh)for(a=a.child;a!==null;)gN(a),a=a.sibling}function gN(a){switch(a.tag){case 26:Xc(a),a.flags&Vh&&a.memoizedState!==null&&V9(so,a.memoizedState,a.memoizedProps);break;case 5:Xc(a);break;case 3:case 4:var u=so;so=Ry(a.stateNode.containerInfo),Xc(a),so=u;break;case 22:a.memoizedState===null&&(u=a.alternate,u!==null&&u.memoizedState!==null?(u=Vh,Vh=16777216,Xc(a),Vh=u):Xc(a));break;default:Xc(a)}}function yN(a){var u=a.alternate;if(u!==null&&(a=u.child,a!==null)){u.child=null;do u=a.sibling,a.sibling=null,a=u;while(a!==null)}}function Uh(a){var u=a.deletions;if((a.flags&16)!==0){if(u!==null)for(var d=0;d<u.length;d++){var y=u[d];Yn=y,_N(y,a)}yN(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)vN(a),a=a.sibling}function vN(a){switch(a.tag){case 0:case 11:case 15:Uh(a),a.flags&2048&&La(9,a,a.return);break;case 3:Uh(a);break;case 12:Uh(a);break;case 22:var u=a.stateNode;a.memoizedState!==null&&u._visibility&2&&(a.return===null||a.return.tag!==13)?(u._visibility&=-3,yy(a)):Uh(a);break;default:Uh(a)}}function yy(a){var u=a.deletions;if((a.flags&16)!==0){if(u!==null)for(var d=0;d<u.length;d++){var y=u[d];Yn=y,_N(y,a)}yN(a)}for(a=a.child;a!==null;){switch(u=a,u.tag){case 0:case 11:case 15:La(8,u,u.return),yy(u);break;case 22:d=u.stateNode,d._visibility&2&&(d._visibility&=-3,yy(u));break;default:yy(u)}a=a.sibling}}function _N(a,u){for(;Yn!==null;){var d=Yn;switch(d.tag){case 0:case 11:case 15:La(8,d,u);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var y=d.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:Th(d.memoizedState.cache)}if(y=d.child,y!==null)y.return=d,Yn=y;else e:for(d=a;Yn!==null;){y=Yn;var T=y.sibling,w=y.return;if(cN(y),y===d){Yn=null;break e}if(T!==null){T.return=w,Yn=T;break e}Yn=w}}}var ZG={getCacheForType:function(a){var u=Tr(Fn),d=u.data.get(a);return d===void 0&&(d=a(),u.data.set(a,d)),d}},e9=typeof WeakMap=="function"?WeakMap:Map,It=0,$t=null,rt=null,dt=0,Rt=0,ui=null,Fa=!1,Zc=!1,qE=!1,Ls=0,mn=0,Ba=0,gu=0,$E=0,Vi=0,ef=0,Fh=null,Yr=null,zE=!1,HE=0,vy=1/0,_y=null,qa=null,fr=0,$a=null,tf=null,nf=0,GE=0,jE=null,TN=null,Bh=0,KE=null;function ci(){if((It&2)!==0&&dt!==0)return dt&-dt;if(te.T!==null){var a=zc;return a!==0?a:ew()}return pt()}function EN(){Vi===0&&(Vi=(dt&536870912)===0||Tt?ce():536870912);var a=Li.current;return a!==null&&(a.flags|=32),Vi}function fi(a,u,d){(a===$t&&(Rt===2||Rt===9)||a.cancelPendingCommit!==null)&&(rf(a,0),za(a,dt,Vi,!1)),Ee(a,d),((It&2)===0||a!==$t)&&(a===$t&&((It&2)===0&&(gu|=d),mn===4&&za(a,dt,Vi,!1)),$o(a))}function wN(a,u,d){if((It&6)!==0)throw Error(r(327));var y=!d&&(u&124)===0&&(u&a.expiredLanes)===0||Co(a,u),T=y?r9(a,u):JE(a,u,!0),w=y;do{if(T===0){Zc&&!y&&za(a,u,0,!1);break}else{if(d=a.current.alternate,w&&!t9(d)){T=JE(a,u,!1),w=!1;continue}if(T===2){if(w=u,a.errorRecoveryDisabledLanes&w)var N=0;else N=a.pendingLanes&-536870913,N=N!==0?N:N&536870912?536870912:0;if(N!==0){u=N;e:{var U=a;T=Fh;var j=U.current.memoizedState.isDehydrated;if(j&&(rf(U,N).flags|=256),N=JE(U,N,!1),N!==2){if(qE&&!j){U.errorRecoveryDisabledLanes|=w,gu|=w,T=4;break e}w=Yr,Yr=T,w!==null&&(Yr===null?Yr=w:Yr.push.apply(Yr,w))}T=N}if(w=!1,T!==2)continue}}if(T===1){rf(a,0),za(a,u,0,!0);break}e:{switch(y=a,w=T,w){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:za(y,u,Vi,!Fa);break e;case 2:Yr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(T=HE+300-ln(),10<T)){if(za(y,u,Vi,!Fa),ps(y,0,!0)!==0)break e;y.timeoutHandle=QN(bN.bind(null,y,d,Yr,_y,zE,u,Vi,gu,ef,Fa,w,2,-0,0),T);break e}bN(y,d,Yr,_y,zE,u,Vi,gu,ef,Fa,w,0,-0,0)}}break}while(!0);$o(a)}function bN(a,u,d,y,T,w,N,U,j,ee,ue,he,ne,re){if(a.timeoutHandle=-1,he=u.subtreeFlags,(he&8192||(he&16785408)===16785408)&&(Kh={stylesheets:null,count:0,unsuspend:L9},gN(u),he=U9(),he!==null)){a.cancelPendingCommit=he(PN.bind(null,a,u,w,d,y,T,N,U,j,ue,1,ne,re)),za(a,w,N,!ee);return}PN(a,u,w,d,y,T,N,U,j)}function t9(a){for(var u=a;;){var d=u.tag;if((d===0||d===11||d===15)&&u.flags&16384&&(d=u.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var y=0;y<d.length;y++){var T=d[y],w=T.getSnapshot;T=T.value;try{if(!oi(w(),T))return!1}catch{return!1}}if(d=u.child,u.subtreeFlags&16384&&d!==null)d.return=u,u=d;else{if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function za(a,u,d,y){u&=~$E,u&=~gu,a.suspendedLanes|=u,a.pingedLanes&=~u,y&&(a.warmLanes|=u),y=a.expirationTimes;for(var T=u;0<T;){var w=31-bt(T),N=1<<w;y[w]=-1,T&=~N}d!==0&&ut(a,d,u)}function Ty(){return(It&6)===0?(qh(0),!1):!0}function WE(){if(rt!==null){if(Rt===0)var a=rt.return;else a=rt,Is=cu=null,fE(a),Yc=null,Nh=0,a=rt;for(;a!==null;)nN(a.alternate,a),a=a.return;rt=null}}function rf(a,u){var d=a.timeoutHandle;d!==-1&&(a.timeoutHandle=-1,_9(d)),d=a.cancelPendingCommit,d!==null&&(a.cancelPendingCommit=null,d()),WE(),$t=a,rt=d=As(a.current,null),dt=u,Rt=0,ui=null,Fa=!1,Zc=Co(a,u),qE=!1,ef=Vi=$E=gu=Ba=mn=0,Yr=Fh=null,zE=!1,(u&8)!==0&&(u|=u&32);var y=a.entangledLanes;if(y!==0)for(a=a.entanglements,y&=u;0<y;){var T=31-bt(y),w=1<<T;u|=a[T],y&=~w}return Ls=u,$g(),d}function SN(a,u){Xe=null,te.H=ay,u===wh||u===Qg?(u=q1(),Rt=3):u===U1?(u=q1(),Rt=4):Rt=u===$P?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,ui=u,rt===null&&(mn=1,dy(a,Mi(u,a.current)))}function AN(){var a=te.H;return te.H=ay,a===null?ay:a}function xN(){var a=te.A;return te.A=ZG,a}function YE(){mn=4,Fa||(dt&4194048)!==dt&&Li.current!==null||(Zc=!0),(Ba&134217727)===0&&(gu&134217727)===0||$t===null||za($t,dt,Vi,!1)}function JE(a,u,d){var y=It;It|=2;var T=AN(),w=xN();($t!==a||dt!==u)&&(_y=null,rf(a,u)),u=!1;var N=mn;e:do try{if(Rt!==0&&rt!==null){var U=rt,j=ui;switch(Rt){case 8:WE(),N=6;break e;case 3:case 2:case 9:case 6:Li.current===null&&(u=!0);var ee=Rt;if(Rt=0,ui=null,of(a,U,j,ee),d&&Zc){N=0;break e}break;default:ee=Rt,Rt=0,ui=null,of(a,U,j,ee)}}n9(),N=mn;break}catch(ue){SN(a,ue)}while(!0);return u&&a.shellSuspendCounter++,Is=cu=null,It=y,te.H=T,te.A=w,rt===null&&($t=null,dt=0,$g()),N}function n9(){for(;rt!==null;)CN(rt)}function r9(a,u){var d=It;It|=2;var y=AN(),T=xN();$t!==a||dt!==u?(_y=null,vy=ln()+500,rf(a,u)):Zc=Co(a,u);e:do try{if(Rt!==0&&rt!==null){u=rt;var w=ui;t:switch(Rt){case 1:Rt=0,ui=null,of(a,u,w,1);break;case 2:case 9:if(F1(w)){Rt=0,ui=null,IN(u);break}u=function(){Rt!==2&&Rt!==9||$t!==a||(Rt=7),$o(a)},w.then(u,u);break e;case 3:Rt=7;break e;case 4:Rt=5;break e;case 7:F1(w)?(Rt=0,ui=null,IN(u)):(Rt=0,ui=null,of(a,u,w,7));break;case 5:var N=null;switch(rt.tag){case 26:N=rt.memoizedState;case 5:case 27:var U=rt;if(!N||uM(N)){Rt=0,ui=null;var j=U.sibling;if(j!==null)rt=j;else{var ee=U.return;ee!==null?(rt=ee,Ey(ee)):rt=null}break t}}Rt=0,ui=null,of(a,u,w,5);break;case 6:Rt=0,ui=null,of(a,u,w,6);break;case 8:WE(),mn=6;break e;default:throw Error(r(462))}}i9();break}catch(ue){SN(a,ue)}while(!0);return Is=cu=null,te.H=y,te.A=T,It=d,rt!==null?0:($t=null,dt=0,$g(),mn)}function i9(){for(;rt!==null&&!Tn();)CN(rt)}function CN(a){var u=eN(a.alternate,a,Ls);a.memoizedProps=a.pendingProps,u===null?Ey(a):rt=u}function IN(a){var u=a,d=u.alternate;switch(u.tag){case 15:case 0:u=WP(d,u,u.pendingProps,u.type,void 0,dt);break;case 11:u=WP(d,u,u.pendingProps,u.type.render,u.ref,dt);break;case 5:fE(u);default:nN(d,u),u=rt=R1(u,Ls),u=eN(d,u,Ls)}a.memoizedProps=a.pendingProps,u===null?Ey(a):rt=u}function of(a,u,d,y){Is=cu=null,fE(u),Yc=null,Nh=0;var T=u.return;try{if(KG(a,T,u,d,dt)){mn=1,dy(a,Mi(d,a.current)),rt=null;return}}catch(w){if(T!==null)throw rt=T,w;mn=1,dy(a,Mi(d,a.current)),rt=null;return}u.flags&32768?(Tt||y===1?a=!0:Zc||(dt&536870912)!==0?a=!1:(Fa=a=!0,(y===2||y===9||y===3||y===6)&&(y=Li.current,y!==null&&y.tag===13&&(y.flags|=16384))),RN(u,a)):Ey(u)}function Ey(a){var u=a;do{if((u.flags&32768)!==0){RN(u,Fa);return}a=u.return;var d=YG(u.alternate,u,Ls);if(d!==null){rt=d;return}if(u=u.sibling,u!==null){rt=u;return}rt=u=a}while(u!==null);mn===0&&(mn=5)}function RN(a,u){do{var d=JG(a.alternate,a);if(d!==null){d.flags&=32767,rt=d;return}if(d=a.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!u&&(a=a.sibling,a!==null)){rt=a;return}rt=a=d}while(a!==null);mn=6,rt=null}function PN(a,u,d,y,T,w,N,U,j){a.cancelPendingCommit=null;do wy();while(fr!==0);if((It&6)!==0)throw Error(r(327));if(u!==null){if(u===a.current)throw Error(r(177));if(w=u.lanes|u.childLanes,w|=BT,St(a,d,w,N,U,j),a===$t&&(rt=$t=null,dt=0),tf=u,$a=a,nf=d,GE=w,jE=T,TN=y,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,l9(So,function(){return ON(),null})):(a.callbackNode=null,a.callbackPriority=0),y=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||y){y=te.T,te.T=null,T=me.p,me.p=2,N=It,It|=4;try{QG(a,u,d)}finally{It=N,me.p=T,te.T=y}}fr=1,NN(),MN(),DN()}}function NN(){if(fr===1){fr=0;var a=$a,u=tf,d=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||d){d=te.T,te.T=null;var y=me.p;me.p=2;var T=It;It|=4;try{hN(u,a);var w=lw,N=_1(a.containerInfo),U=w.focusedElem,j=w.selectionRange;if(N!==U&&U&&U.ownerDocument&&v1(U.ownerDocument.documentElement,U)){if(j!==null&&OT(U)){var ee=j.start,ue=j.end;if(ue===void 0&&(ue=ee),"selectionStart"in U)U.selectionStart=ee,U.selectionEnd=Math.min(ue,U.value.length);else{var he=U.ownerDocument||document,ne=he&&he.defaultView||window;if(ne.getSelection){var re=ne.getSelection(),Ge=U.textContent.length,$e=Math.min(j.start,Ge),Ut=j.end===void 0?$e:Math.min(j.end,Ge);!re.extend&&$e>Ut&&(N=Ut,Ut=$e,$e=N);var Y=y1(U,$e),W=y1(U,Ut);if(Y&&W&&(re.rangeCount!==1||re.anchorNode!==Y.node||re.anchorOffset!==Y.offset||re.focusNode!==W.node||re.focusOffset!==W.offset)){var X=he.createRange();X.setStart(Y.node,Y.offset),re.removeAllRanges(),$e>Ut?(re.addRange(X),re.extend(W.node,W.offset)):(X.setEnd(W.node,W.offset),re.addRange(X))}}}}for(he=[],re=U;re=re.parentNode;)re.nodeType===1&&he.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<he.length;U++){var fe=he[U];fe.element.scrollLeft=fe.left,fe.element.scrollTop=fe.top}}ky=!!aw,lw=aw=null}finally{It=T,me.p=y,te.T=d}}a.current=u,fr=2}}function MN(){if(fr===2){fr=0;var a=$a,u=tf,d=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||d){d=te.T,te.T=null;var y=me.p;me.p=2;var T=It;It|=4;try{uN(a,u.alternate,u)}finally{It=T,me.p=y,te.T=d}}fr=3}}function DN(){if(fr===4||fr===3){fr=0,Cn();var a=$a,u=tf,d=nf,y=TN;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?fr=5:(fr=0,tf=$a=null,kN(a,a.pendingLanes));var T=a.pendingLanes;if(T===0&&(qa=null),nt(d),u=u.stateNode,_t&&typeof _t.onCommitFiberRoot=="function")try{_t.onCommitFiberRoot(en,u,void 0,(u.current.flags&128)===128)}catch{}if(y!==null){u=te.T,T=me.p,me.p=2,te.T=null;try{for(var w=a.onRecoverableError,N=0;N<y.length;N++){var U=y[N];w(U.value,{componentStack:U.stack})}}finally{te.T=u,me.p=T}}(nf&3)!==0&&wy(),$o(a),T=a.pendingLanes,(d&4194090)!==0&&(T&42)!==0?a===KE?Bh++:(Bh=0,KE=a):Bh=0,qh(0)}}function kN(a,u){(a.pooledCacheLanes&=u)===0&&(u=a.pooledCache,u!=null&&(a.pooledCache=null,Th(u)))}function wy(a){return NN(),MN(),DN(),ON()}function ON(){if(fr!==5)return!1;var a=$a,u=GE;GE=0;var d=nt(nf),y=te.T,T=me.p;try{me.p=32>d?32:d,te.T=null,d=jE,jE=null;var w=$a,N=nf;if(fr=0,tf=$a=null,nf=0,(It&6)!==0)throw Error(r(331));var U=It;if(It|=4,vN(w.current),mN(w,w.current,N,d),It=U,qh(0,!1),_t&&typeof _t.onPostCommitFiberRoot=="function")try{_t.onPostCommitFiberRoot(en,w)}catch{}return!0}finally{me.p=T,te.T=y,kN(a,u)}}function LN(a,u,d){u=Mi(d,u),u=AE(a.stateNode,u,2),a=Ma(a,u,2),a!==null&&(Ee(a,2),$o(a))}function Bt(a,u,d){if(a.tag===3)LN(a,a,d);else for(;u!==null;){if(u.tag===3){LN(u,a,d);break}else if(u.tag===1){var y=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(qa===null||!qa.has(y))){a=Mi(d,a),d=BP(2),y=Ma(u,d,2),y!==null&&(qP(d,y,u,a),Ee(y,2),$o(y));break}}u=u.return}}function QE(a,u,d){var y=a.pingCache;if(y===null){y=a.pingCache=new e9;var T=new Set;y.set(u,T)}else T=y.get(u),T===void 0&&(T=new Set,y.set(u,T));T.has(d)||(qE=!0,T.add(d),a=o9.bind(null,a,u,d),u.then(a,a))}function o9(a,u,d){var y=a.pingCache;y!==null&&y.delete(u),a.pingedLanes|=a.suspendedLanes&d,a.warmLanes&=~d,$t===a&&(dt&d)===d&&(mn===4||mn===3&&(dt&62914560)===dt&&300>ln()-HE?(It&2)===0&&rf(a,0):$E|=d,ef===dt&&(ef=0)),$o(a)}function VN(a,u){u===0&&(u=Ie()),a=Fc(a,u),a!==null&&(Ee(a,u),$o(a))}function s9(a){var u=a.memoizedState,d=0;u!==null&&(d=u.retryLane),VN(a,d)}function a9(a,u){var d=0;switch(a.tag){case 13:var y=a.stateNode,T=a.memoizedState;T!==null&&(d=T.retryLane);break;case 19:y=a.stateNode;break;case 22:y=a.stateNode._retryCache;break;default:throw Error(r(314))}y!==null&&y.delete(u),VN(a,d)}function l9(a,u){return jt(a,u)}var by=null,sf=null,XE=!1,Sy=!1,ZE=!1,yu=0;function $o(a){a!==sf&&a.next===null&&(sf===null?by=sf=a:sf=sf.next=a),Sy=!0,XE||(XE=!0,c9())}function qh(a,u){if(!ZE&&Sy){ZE=!0;do for(var d=!1,y=by;y!==null;){if(a!==0){var T=y.pendingLanes;if(T===0)var w=0;else{var N=y.suspendedLanes,U=y.pingedLanes;w=(1<<31-bt(42|a)+1)-1,w&=T&~(N&~U),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(d=!0,qN(y,w))}else w=dt,w=ps(y,y===$t?w:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(w&3)===0||Co(y,w)||(d=!0,qN(y,w));y=y.next}while(d);ZE=!1}}function u9(){UN()}function UN(){Sy=XE=!1;var a=0;yu!==0&&(v9()&&(a=yu),yu=0);for(var u=ln(),d=null,y=by;y!==null;){var T=y.next,w=FN(y,u);w===0?(y.next=null,d===null?by=T:d.next=T,T===null&&(sf=d)):(d=y,(a!==0||(w&3)!==0)&&(Sy=!0)),y=T}qh(a)}function FN(a,u){for(var d=a.suspendedLanes,y=a.pingedLanes,T=a.expirationTimes,w=a.pendingLanes&-62914561;0<w;){var N=31-bt(w),U=1<<N,j=T[N];j===-1?((U&d)===0||(U&y)!==0)&&(T[N]=Z(U,u)):j<=u&&(a.expiredLanes|=U),w&=~U}if(u=$t,d=dt,d=ps(a,a===u?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),y=a.callbackNode,d===0||a===u&&(Rt===2||Rt===9)||a.cancelPendingCommit!==null)return y!==null&&y!==null&&tt(y),a.callbackNode=null,a.callbackPriority=0;if((d&3)===0||Co(a,d)){if(u=d&-d,u===a.callbackPriority)return u;switch(y!==null&&tt(y),nt(d)){case 2:case 8:d=bo;break;case 32:d=So;break;case 268435456:d=Ea;break;default:d=So}return y=BN.bind(null,a),d=jt(d,y),a.callbackPriority=u,a.callbackNode=d,u}return y!==null&&y!==null&&tt(y),a.callbackPriority=2,a.callbackNode=null,2}function BN(a,u){if(fr!==0&&fr!==5)return a.callbackNode=null,a.callbackPriority=0,null;var d=a.callbackNode;if(wy()&&a.callbackNode!==d)return null;var y=dt;return y=ps(a,a===$t?y:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),y===0?null:(wN(a,y,u),FN(a,ln()),a.callbackNode!=null&&a.callbackNode===d?BN.bind(null,a):null)}function qN(a,u){if(wy())return null;wN(a,u,!0)}function c9(){T9(function(){(It&6)!==0?jt(Ta,u9):UN()})}function ew(){return yu===0&&(yu=ce()),yu}function $N(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Cc(""+a)}function zN(a,u){var d=u.ownerDocument.createElement("input");return d.name=u.name,d.value=u.value,a.id&&d.setAttribute("form",a.id),u.parentNode.insertBefore(d,u),a=new FormData(a),d.parentNode.removeChild(d),a}function f9(a,u,d,y,T){if(u==="submit"&&d&&d.stateNode===T){var w=$N((T[kt]||null).action),N=y.submitter;N&&(u=(u=N[kt]||null)?$N(u.formAction):N.getAttribute("formAction"),u!==null&&(w=u,N=null));var U=new Ic("action","action",null,y,T);a.push({event:U,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(yu!==0){var j=N?zN(T,N):new FormData(T);TE(d,{pending:!0,data:j,method:T.method,action:w},null,j)}}else typeof w=="function"&&(U.preventDefault(),j=N?zN(T,N):new FormData(T),TE(d,{pending:!0,data:j,method:T.method,action:w},w,j))},currentTarget:T}]})}}for(var tw=0;tw<FT.length;tw++){var nw=FT[tw],d9=nw.toLowerCase(),h9=nw[0].toUpperCase()+nw.slice(1);oo(d9,"on"+h9)}oo(w1,"onAnimationEnd"),oo(b1,"onAnimationIteration"),oo(S1,"onAnimationStart"),oo("dblclick","onDoubleClick"),oo("focusin","onFocus"),oo("focusout","onBlur"),oo(PG,"onTransitionRun"),oo(NG,"onTransitionStart"),oo(MG,"onTransitionCancel"),oo(A1,"onTransitionEnd"),gs("onMouseEnter",["mouseout","mouseover"]),gs("onMouseLeave",["mouseout","mouseover"]),gs("onPointerEnter",["pointerout","pointerover"]),gs("onPointerLeave",["pointerout","pointerover"]),ro("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ro("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ro("onBeforeInput",["compositionend","keypress","textInput","paste"]),ro("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ro("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ro("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $h="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),p9=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($h));function HN(a,u){u=(u&4)!==0;for(var d=0;d<a.length;d++){var y=a[d],T=y.event;y=y.listeners;e:{var w=void 0;if(u)for(var N=y.length-1;0<=N;N--){var U=y[N],j=U.instance,ee=U.currentTarget;if(U=U.listener,j!==w&&T.isPropagationStopped())break e;w=U,T.currentTarget=ee;try{w(T)}catch(ue){fy(ue)}T.currentTarget=null,w=j}else for(N=0;N<y.length;N++){if(U=y[N],j=U.instance,ee=U.currentTarget,U=U.listener,j!==w&&T.isPropagationStopped())break e;w=U,T.currentTarget=ee;try{w(T)}catch(ue){fy(ue)}T.currentTarget=null,w=j}}}}function it(a,u){var d=u[no];d===void 0&&(d=u[no]=new Set);var y=a+"__bubble";d.has(y)||(GN(u,a,2,!1),d.add(y))}function rw(a,u,d){var y=0;u&&(y|=4),GN(d,a,y,u)}var Ay="_reactListening"+Math.random().toString(36).slice(2);function iw(a){if(!a[Ay]){a[Ay]=!0,eh.forEach(function(d){d!=="selectionchange"&&(p9.has(d)||rw(d,!1,a),rw(d,!0,a))});var u=a.nodeType===9?a:a.ownerDocument;u===null||u[Ay]||(u[Ay]=!0,rw("selectionchange",!1,u))}}function GN(a,u,d,y){switch(mM(u)){case 2:var T=q9;break;case 8:T=$9;break;default:T=vw}d=T.bind(null,u,d,a),T=void 0,!Pi||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(T=!0),y?T!==void 0?a.addEventListener(u,d,{capture:!0,passive:T}):a.addEventListener(u,d,!0):T!==void 0?a.addEventListener(u,d,{passive:T}):a.addEventListener(u,d,!1)}function ow(a,u,d,y,T){var w=y;if((u&1)===0&&(u&2)===0&&y!==null)e:for(;;){if(y===null)return;var N=y.tag;if(N===3||N===4){var U=y.stateNode.containerInfo;if(U===T)break;if(N===4)for(N=y.return;N!==null;){var j=N.tag;if((j===3||j===4)&&N.stateNode.containerInfo===T)return;N=N.return}for(;U!==null;){if(N=ms(U),N===null)return;if(j=N.tag,j===5||j===6||j===26||j===27){y=w=N;continue e}U=U.parentNode}}y=y.return}Cg(function(){var ee=w,ue=Ri(d),he=[];e:{var ne=x1.get(a);if(ne!==void 0){var re=Ic,Ge=a;switch(a){case"keypress":if(Do(d)===0)break e;case"keydown":case"keyup":re=kc;break;case"focusin":Ge="focus",re=Nc;break;case"focusout":Ge="blur",re=Nc;break;case"beforeblur":case"afterblur":re=Nc;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=Ni;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=NT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=Og;break;case w1:case b1:case S1:re=Mc;break;case A1:re=Vg;break;case"scroll":case"scrollend":re=Ig;break;case"wheel":re=Oc;break;case"copy":case"cut":case"paste":re=Dc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=dh;break;case"toggle":case"beforetoggle":re=Fg}var $e=(u&4)!==0,Ut=!$e&&(a==="scroll"||a==="scrollend"),Y=$e?ne!==null?ne+"Capture":null:ne;$e=[];for(var W=ee,X;W!==null;){var fe=W;if(X=fe.stateNode,fe=fe.tag,fe!==5&&fe!==26&&fe!==27||X===null||Y===null||(fe=Jl(W,Y),fe!=null&&$e.push(zh(W,fe,X))),Ut)break;W=W.return}0<$e.length&&(ne=new re(ne,Ge,null,d,ue),he.push({event:ne,listeners:$e}))}}if((u&7)===0){e:{if(ne=a==="mouseover"||a==="pointerover",re=a==="mouseout"||a==="pointerout",ne&&d!==_s&&(Ge=d.relatedTarget||d.fromElement)&&(ms(Ge)||Ge[In]))break e;if((re||ne)&&(ne=ue.window===ue?ue:(ne=ue.ownerDocument)?ne.defaultView||ne.parentWindow:window,re?(Ge=d.relatedTarget||d.toElement,re=ee,Ge=Ge?ms(Ge):null,Ge!==null&&(Ut=o(Ge),$e=Ge.tag,Ge!==Ut||$e!==5&&$e!==27&&$e!==6)&&(Ge=null)):(re=null,Ge=ee),re!==Ge)){if($e=Ni,fe="onMouseLeave",Y="onMouseEnter",W="mouse",(a==="pointerout"||a==="pointerover")&&($e=dh,fe="onPointerLeave",Y="onPointerEnter",W="pointer"),Ut=re==null?ne:Ro(re),X=Ge==null?ne:Ro(Ge),ne=new $e(fe,W+"leave",re,d,ue),ne.target=Ut,ne.relatedTarget=X,fe=null,ms(ue)===ee&&($e=new $e(Y,W+"enter",Ge,d,ue),$e.target=X,$e.relatedTarget=Ut,fe=$e),Ut=fe,re&&Ge)t:{for($e=re,Y=Ge,W=0,X=$e;X;X=af(X))W++;for(X=0,fe=Y;fe;fe=af(fe))X++;for(;0<W-X;)$e=af($e),W--;for(;0<X-W;)Y=af(Y),X--;for(;W--;){if($e===Y||Y!==null&&$e===Y.alternate)break t;$e=af($e),Y=af(Y)}$e=null}else $e=null;re!==null&&jN(he,ne,re,$e,!1),Ge!==null&&Ut!==null&&jN(he,Ut,Ge,$e,!0)}}e:{if(ne=ee?Ro(ee):window,re=ne.nodeName&&ne.nodeName.toLowerCase(),re==="select"||re==="input"&&ne.type==="file")var Me=f1;else if(Un(ne))if(d1)Me=CG;else{Me=AG;var et=SG}else re=ne.nodeName,!re||re.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?ee&&oh(ee.elementType)&&(Me=f1):Me=xG;if(Me&&(Me=Me(a,ee))){Ss(he,Me,d,ue);break e}et&&et(a,ne,ee),a==="focusout"&&ee&&ne.type==="number"&&ee.memoizedProps.value!=null&&Ca(ne,"number",ne.value)}switch(et=ee?Ro(ee):window,a){case"focusin":(Un(et)||et.contentEditable==="true")&&(Lc=et,LT=ee,mh=null);break;case"focusout":mh=LT=Lc=null;break;case"mousedown":VT=!0;break;case"contextmenu":case"mouseup":case"dragend":VT=!1,T1(he,d,ue);break;case"selectionchange":if(RG)break;case"keydown":case"keyup":T1(he,d,ue)}var Ue;if(Lo)e:{switch(a){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else ct?oe(a,d)&&(He="onCompositionEnd"):a==="keydown"&&d.keyCode===229&&(He="onCompositionStart");He&&(R&&d.locale!=="ko"&&(ct||He!=="onCompositionStart"?He==="onCompositionEnd"&&ct&&(Ue=ah()):(Mo=ue,Ia="value"in Mo?Mo.value:Mo.textContent,ct=!0)),et=xy(ee,He),0<et.length&&(He=new ch(He,a,null,d,ue),he.push({event:He,listeners:et}),Ue?He.data=Ue:(Ue=Te(d),Ue!==null&&(He.data=Ue)))),(Ue=x?Vn(a,d):ft(a,d))&&(He=xy(ee,"onBeforeInput"),0<He.length&&(et=new ch("onBeforeInput","beforeinput",null,d,ue),he.push({event:et,listeners:He}),et.data=Ue)),f9(he,a,ee,d,ue)}HN(he,u)})}function zh(a,u,d){return{instance:a,listener:u,currentTarget:d}}function xy(a,u){for(var d=u+"Capture",y=[];a!==null;){var T=a,w=T.stateNode;if(T=T.tag,T!==5&&T!==26&&T!==27||w===null||(T=Jl(a,d),T!=null&&y.unshift(zh(a,T,w)),T=Jl(a,u),T!=null&&y.push(zh(a,T,w))),a.tag===3)return y;a=a.return}return[]}function af(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function jN(a,u,d,y,T){for(var w=u._reactName,N=[];d!==null&&d!==y;){var U=d,j=U.alternate,ee=U.stateNode;if(U=U.tag,j!==null&&j===y)break;U!==5&&U!==26&&U!==27||ee===null||(j=ee,T?(ee=Jl(d,w),ee!=null&&N.unshift(zh(d,ee,j))):T||(ee=Jl(d,w),ee!=null&&N.push(zh(d,ee,j)))),d=d.return}N.length!==0&&a.push({event:u,listeners:N})}var m9=/\r\n?/g,g9=/\u0000|\uFFFD/g;function KN(a){return(typeof a=="string"?a:""+a).replace(m9,`
`).replace(g9,"")}function WN(a,u){return u=KN(u),KN(a)===u}function Cy(){}function Vt(a,u,d,y,T,w){switch(d){case"children":typeof y=="string"?u==="body"||u==="textarea"&&y===""||Ii(a,y):(typeof y=="number"||typeof y=="bigint")&&u!=="body"&&Ii(a,""+y);break;case"className":Po(a,"class",y);break;case"tabIndex":Po(a,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":Po(a,d,y);break;case"style":ih(a,y,w);break;case"data":if(u!=="object"){Po(a,"data",y);break}case"src":case"href":if(y===""&&(u!=="a"||d!=="href")){a.removeAttribute(d);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){a.removeAttribute(d);break}y=Cc(""+y),a.setAttribute(d,y);break;case"action":case"formAction":if(typeof y=="function"){a.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(d==="formAction"?(u!=="input"&&Vt(a,u,"name",T.name,T,null),Vt(a,u,"formEncType",T.formEncType,T,null),Vt(a,u,"formMethod",T.formMethod,T,null),Vt(a,u,"formTarget",T.formTarget,T,null)):(Vt(a,u,"encType",T.encType,T,null),Vt(a,u,"method",T.method,T,null),Vt(a,u,"target",T.target,T,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){a.removeAttribute(d);break}y=Cc(""+y),a.setAttribute(d,y);break;case"onClick":y!=null&&(a.onclick=Cy);break;case"onScroll":y!=null&&it("scroll",a);break;case"onScrollEnd":y!=null&&it("scrollend",a);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(d=y.__html,d!=null){if(T.children!=null)throw Error(r(60));a.innerHTML=d}}break;case"multiple":a.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":a.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){a.removeAttribute("xlink:href");break}d=Cc(""+y),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?a.setAttribute(d,""+y):a.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?a.setAttribute(d,""):a.removeAttribute(d);break;case"capture":case"download":y===!0?a.setAttribute(d,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?a.setAttribute(d,y):a.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?a.setAttribute(d,y):a.removeAttribute(d);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?a.removeAttribute(d):a.setAttribute(d,y);break;case"popover":it("beforetoggle",a),it("toggle",a),xa(a,"popover",y);break;case"xlinkActuate":lr(a,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":lr(a,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":lr(a,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":lr(a,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":lr(a,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":lr(a,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":lr(a,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":lr(a,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":lr(a,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":xa(a,"is",y);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=RT.get(d)||d,xa(a,d,y))}}function sw(a,u,d,y,T,w){switch(d){case"style":ih(a,y,w);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(d=y.__html,d!=null){if(T.children!=null)throw Error(r(60));a.innerHTML=d}}break;case"children":typeof y=="string"?Ii(a,y):(typeof y=="number"||typeof y=="bigint")&&Ii(a,""+y);break;case"onScroll":y!=null&&it("scroll",a);break;case"onScrollEnd":y!=null&&it("scrollend",a);break;case"onClick":y!=null&&(a.onclick=Cy);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!wc.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(T=d.endsWith("Capture"),u=d.slice(2,T?d.length-7:void 0),w=a[kt]||null,w=w!=null?w[d]:null,typeof w=="function"&&a.removeEventListener(u,w,T),typeof y=="function")){typeof w!="function"&&w!==null&&(d in a?a[d]=null:a.hasAttribute(d)&&a.removeAttribute(d)),a.addEventListener(u,y,T);break e}d in a?a[d]=y:y===!0?a.setAttribute(d,""):xa(a,d,y)}}}function dr(a,u,d){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":it("error",a),it("load",a);var y=!1,T=!1,w;for(w in d)if(d.hasOwnProperty(w)){var N=d[w];if(N!=null)switch(w){case"src":y=!0;break;case"srcSet":T=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:Vt(a,u,w,N,d,null)}}T&&Vt(a,u,"srcSet",d.srcSet,d,null),y&&Vt(a,u,"src",d.src,d,null);return;case"input":it("invalid",a);var U=w=N=T=null,j=null,ee=null;for(y in d)if(d.hasOwnProperty(y)){var ue=d[y];if(ue!=null)switch(y){case"name":T=ue;break;case"type":N=ue;break;case"checked":j=ue;break;case"defaultChecked":ee=ue;break;case"value":w=ue;break;case"defaultValue":U=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,u));break;default:Vt(a,u,y,ue,d,null)}}Kl(a,w,U,j,ee,N,T,!1),xc(a);return;case"select":it("invalid",a),y=N=w=null;for(T in d)if(d.hasOwnProperty(T)&&(U=d[T],U!=null))switch(T){case"value":w=U;break;case"defaultValue":N=U;break;case"multiple":y=U;default:Vt(a,u,T,U,d,null)}u=w,d=N,a.multiple=!!y,u!=null?vs(a,!!y,u,!1):d!=null&&vs(a,!!y,d,!0);return;case"textarea":it("invalid",a),w=T=y=null;for(N in d)if(d.hasOwnProperty(N)&&(U=d[N],U!=null))switch(N){case"value":y=U;break;case"defaultValue":T=U;break;case"children":w=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(r(91));break;default:Vt(a,u,N,U,d,null)}Wl(a,y,T,w),xc(a);return;case"option":for(j in d)if(d.hasOwnProperty(j)&&(y=d[j],y!=null))switch(j){case"selected":a.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:Vt(a,u,j,y,d,null)}return;case"dialog":it("beforetoggle",a),it("toggle",a),it("cancel",a),it("close",a);break;case"iframe":case"object":it("load",a);break;case"video":case"audio":for(y=0;y<$h.length;y++)it($h[y],a);break;case"image":it("error",a),it("load",a);break;case"details":it("toggle",a);break;case"embed":case"source":case"link":it("error",a),it("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in d)if(d.hasOwnProperty(ee)&&(y=d[ee],y!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:Vt(a,u,ee,y,d,null)}return;default:if(oh(u)){for(ue in d)d.hasOwnProperty(ue)&&(y=d[ue],y!==void 0&&sw(a,u,ue,y,d,void 0));return}}for(U in d)d.hasOwnProperty(U)&&(y=d[U],y!=null&&Vt(a,u,U,y,d,null))}function y9(a,u,d,y){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var T=null,w=null,N=null,U=null,j=null,ee=null,ue=null;for(re in d){var he=d[re];if(d.hasOwnProperty(re)&&he!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":j=he;default:y.hasOwnProperty(re)||Vt(a,u,re,null,y,he)}}for(var ne in y){var re=y[ne];if(he=d[ne],y.hasOwnProperty(ne)&&(re!=null||he!=null))switch(ne){case"type":w=re;break;case"name":T=re;break;case"checked":ee=re;break;case"defaultChecked":ue=re;break;case"value":N=re;break;case"defaultValue":U=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,u));break;default:re!==he&&Vt(a,u,ne,re,y,he)}}ii(a,N,U,j,ee,ue,w,T);return;case"select":re=N=U=ne=null;for(w in d)if(j=d[w],d.hasOwnProperty(w)&&j!=null)switch(w){case"value":break;case"multiple":re=j;default:y.hasOwnProperty(w)||Vt(a,u,w,null,y,j)}for(T in y)if(w=y[T],j=d[T],y.hasOwnProperty(T)&&(w!=null||j!=null))switch(T){case"value":ne=w;break;case"defaultValue":U=w;break;case"multiple":N=w;default:w!==j&&Vt(a,u,T,w,y,j)}u=U,d=N,y=re,ne!=null?vs(a,!!d,ne,!1):!!y!=!!d&&(u!=null?vs(a,!!d,u,!0):vs(a,!!d,d?[]:"",!1));return;case"textarea":re=ne=null;for(U in d)if(T=d[U],d.hasOwnProperty(U)&&T!=null&&!y.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:Vt(a,u,U,null,y,T)}for(N in y)if(T=y[N],w=d[N],y.hasOwnProperty(N)&&(T!=null||w!=null))switch(N){case"value":ne=T;break;case"defaultValue":re=T;break;case"children":break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:T!==w&&Vt(a,u,N,T,y,w)}Ot(a,ne,re);return;case"option":for(var Ge in d)if(ne=d[Ge],d.hasOwnProperty(Ge)&&ne!=null&&!y.hasOwnProperty(Ge))switch(Ge){case"selected":a.selected=!1;break;default:Vt(a,u,Ge,null,y,ne)}for(j in y)if(ne=y[j],re=d[j],y.hasOwnProperty(j)&&ne!==re&&(ne!=null||re!=null))switch(j){case"selected":a.selected=ne&&typeof ne!="function"&&typeof ne!="symbol";break;default:Vt(a,u,j,ne,y,re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $e in d)ne=d[$e],d.hasOwnProperty($e)&&ne!=null&&!y.hasOwnProperty($e)&&Vt(a,u,$e,null,y,ne);for(ee in y)if(ne=y[ee],re=d[ee],y.hasOwnProperty(ee)&&ne!==re&&(ne!=null||re!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,u));break;default:Vt(a,u,ee,ne,y,re)}return;default:if(oh(u)){for(var Ut in d)ne=d[Ut],d.hasOwnProperty(Ut)&&ne!==void 0&&!y.hasOwnProperty(Ut)&&sw(a,u,Ut,void 0,y,ne);for(ue in y)ne=y[ue],re=d[ue],!y.hasOwnProperty(ue)||ne===re||ne===void 0&&re===void 0||sw(a,u,ue,ne,y,re);return}}for(var Y in d)ne=d[Y],d.hasOwnProperty(Y)&&ne!=null&&!y.hasOwnProperty(Y)&&Vt(a,u,Y,null,y,ne);for(he in y)ne=y[he],re=d[he],!y.hasOwnProperty(he)||ne===re||ne==null&&re==null||Vt(a,u,he,ne,y,re)}var aw=null,lw=null;function Iy(a){return a.nodeType===9?a:a.ownerDocument}function YN(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function JN(a,u){if(a===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&u==="foreignObject"?0:a}function uw(a,u){return a==="textarea"||a==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var cw=null;function v9(){var a=window.event;return a&&a.type==="popstate"?a===cw?!1:(cw=a,!0):(cw=null,!1)}var QN=typeof setTimeout=="function"?setTimeout:void 0,_9=typeof clearTimeout=="function"?clearTimeout:void 0,XN=typeof Promise=="function"?Promise:void 0,T9=typeof queueMicrotask=="function"?queueMicrotask:typeof XN<"u"?function(a){return XN.resolve(null).then(a).catch(E9)}:QN;function E9(a){setTimeout(function(){throw a})}function Ha(a){return a==="head"}function ZN(a,u){var d=u,y=0,T=0;do{var w=d.nextSibling;if(a.removeChild(d),w&&w.nodeType===8)if(d=w.data,d==="/$"){if(0<y&&8>y){d=y;var N=a.ownerDocument;if(d&1&&Hh(N.documentElement),d&2&&Hh(N.body),d&4)for(d=N.head,Hh(d),N=d.firstChild;N;){var U=N.nextSibling,j=N.nodeName;N[zl]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&N.rel.toLowerCase()==="stylesheet"||d.removeChild(N),N=U}}if(T===0){a.removeChild(w),Xh(u);return}T--}else d==="$"||d==="$?"||d==="$!"?T++:y=d.charCodeAt(0)-48;else y=0;d=w}while(d);Xh(u)}function fw(a){var u=a.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var d=u;switch(u=u.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":fw(d),Aa(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}a.removeChild(d)}}function w9(a,u,d,y){for(;a.nodeType===1;){var T=d;if(a.nodeName.toLowerCase()!==u.toLowerCase()){if(!y&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(y){if(!a[zl])switch(u){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(w=a.getAttribute("rel"),w==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(w!==T.rel||a.getAttribute("href")!==(T.href==null||T.href===""?null:T.href)||a.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin)||a.getAttribute("title")!==(T.title==null?null:T.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(w=a.getAttribute("src"),(w!==(T.src==null?null:T.src)||a.getAttribute("type")!==(T.type==null?null:T.type)||a.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin))&&w&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(u==="input"&&a.type==="hidden"){var w=T.name==null?null:""+T.name;if(T.type==="hidden"&&a.getAttribute("name")===w)return a}else return a;if(a=ao(a.nextSibling),a===null)break}return null}function b9(a,u,d){if(u==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!d||(a=ao(a.nextSibling),a===null))return null;return a}function dw(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function S9(a,u){var d=a.ownerDocument;if(a.data!=="$?"||d.readyState==="complete")u();else{var y=function(){u(),d.removeEventListener("DOMContentLoaded",y)};d.addEventListener("DOMContentLoaded",y),a._reactRetry=y}}function ao(a){for(;a!=null;a=a.nextSibling){var u=a.nodeType;if(u===1||u===3)break;if(u===8){if(u=a.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return a}var hw=null;function eM(a){a=a.previousSibling;for(var u=0;a;){if(a.nodeType===8){var d=a.data;if(d==="$"||d==="$!"||d==="$?"){if(u===0)return a;u--}else d==="/$"&&u++}a=a.previousSibling}return null}function tM(a,u,d){switch(u=Iy(d),a){case"html":if(a=u.documentElement,!a)throw Error(r(452));return a;case"head":if(a=u.head,!a)throw Error(r(453));return a;case"body":if(a=u.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function Hh(a){for(var u=a.attributes;u.length;)a.removeAttributeNode(u[0]);Aa(a)}var Ui=new Map,nM=new Set;function Ry(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Vs=me.d;me.d={f:A9,r:x9,D:C9,C:I9,L:R9,m:P9,X:M9,S:N9,M:D9};function A9(){var a=Vs.f(),u=Ty();return a||u}function x9(a){var u=Io(a);u!==null&&u.tag===5&&u.type==="form"?wP(u):Vs.r(a)}var lf=typeof document>"u"?null:document;function rM(a,u,d){var y=lf;if(y&&typeof u=="string"&&u){var T=Rn(u);T='link[rel="'+a+'"][href="'+T+'"]',typeof d=="string"&&(T+='[crossorigin="'+d+'"]'),nM.has(T)||(nM.add(T),a={rel:a,crossOrigin:d,href:u},y.querySelector(T)===null&&(u=y.createElement("link"),dr(u,"link",a),En(u),y.head.appendChild(u)))}}function C9(a){Vs.D(a),rM("dns-prefetch",a,null)}function I9(a,u){Vs.C(a,u),rM("preconnect",a,u)}function R9(a,u,d){Vs.L(a,u,d);var y=lf;if(y&&a&&u){var T='link[rel="preload"][as="'+Rn(u)+'"]';u==="image"&&d&&d.imageSrcSet?(T+='[imagesrcset="'+Rn(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(T+='[imagesizes="'+Rn(d.imageSizes)+'"]')):T+='[href="'+Rn(a)+'"]';var w=T;switch(u){case"style":w=uf(a);break;case"script":w=cf(a)}Ui.has(w)||(a=h({rel:"preload",href:u==="image"&&d&&d.imageSrcSet?void 0:a,as:u},d),Ui.set(w,a),y.querySelector(T)!==null||u==="style"&&y.querySelector(Gh(w))||u==="script"&&y.querySelector(jh(w))||(u=y.createElement("link"),dr(u,"link",a),En(u),y.head.appendChild(u)))}}function P9(a,u){Vs.m(a,u);var d=lf;if(d&&a){var y=u&&typeof u.as=="string"?u.as:"script",T='link[rel="modulepreload"][as="'+Rn(y)+'"][href="'+Rn(a)+'"]',w=T;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=cf(a)}if(!Ui.has(w)&&(a=h({rel:"modulepreload",href:a},u),Ui.set(w,a),d.querySelector(T)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(jh(w)))return}y=d.createElement("link"),dr(y,"link",a),En(y),d.head.appendChild(y)}}}function N9(a,u,d){Vs.S(a,u,d);var y=lf;if(y&&a){var T=Nr(y).hoistableStyles,w=uf(a);u=u||"default";var N=T.get(w);if(!N){var U={loading:0,preload:null};if(N=y.querySelector(Gh(w)))U.loading=5;else{a=h({rel:"stylesheet",href:a,"data-precedence":u},d),(d=Ui.get(w))&&pw(a,d);var j=N=y.createElement("link");En(j),dr(j,"link",a),j._p=new Promise(function(ee,ue){j.onload=ee,j.onerror=ue}),j.addEventListener("load",function(){U.loading|=1}),j.addEventListener("error",function(){U.loading|=2}),U.loading|=4,Py(N,u,y)}N={type:"stylesheet",instance:N,count:1,state:U},T.set(w,N)}}}function M9(a,u){Vs.X(a,u);var d=lf;if(d&&a){var y=Nr(d).hoistableScripts,T=cf(a),w=y.get(T);w||(w=d.querySelector(jh(T)),w||(a=h({src:a,async:!0},u),(u=Ui.get(T))&&mw(a,u),w=d.createElement("script"),En(w),dr(w,"link",a),d.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},y.set(T,w))}}function D9(a,u){Vs.M(a,u);var d=lf;if(d&&a){var y=Nr(d).hoistableScripts,T=cf(a),w=y.get(T);w||(w=d.querySelector(jh(T)),w||(a=h({src:a,async:!0,type:"module"},u),(u=Ui.get(T))&&mw(a,u),w=d.createElement("script"),En(w),dr(w,"link",a),d.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},y.set(T,w))}}function iM(a,u,d,y){var T=(T=qe.current)?Ry(T):null;if(!T)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(u=uf(d.href),d=Nr(T).hoistableStyles,y=d.get(u),y||(y={type:"style",instance:null,count:0,state:null},d.set(u,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){a=uf(d.href);var w=Nr(T).hoistableStyles,N=w.get(a);if(N||(T=T.ownerDocument||T,N={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(a,N),(w=T.querySelector(Gh(a)))&&!w._p&&(N.instance=w,N.state.loading=5),Ui.has(a)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},Ui.set(a,d),w||k9(T,a,d,N.state))),u&&y===null)throw Error(r(528,""));return N}if(u&&y!==null)throw Error(r(529,""));return null;case"script":return u=d.async,d=d.src,typeof d=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=cf(d),d=Nr(T).hoistableScripts,y=d.get(u),y||(y={type:"script",instance:null,count:0,state:null},d.set(u,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function uf(a){return'href="'+Rn(a)+'"'}function Gh(a){return'link[rel="stylesheet"]['+a+"]"}function oM(a){return h({},a,{"data-precedence":a.precedence,precedence:null})}function k9(a,u,d,y){a.querySelector('link[rel="preload"][as="style"]['+u+"]")?y.loading=1:(u=a.createElement("link"),y.preload=u,u.addEventListener("load",function(){return y.loading|=1}),u.addEventListener("error",function(){return y.loading|=2}),dr(u,"link",d),En(u),a.head.appendChild(u))}function cf(a){return'[src="'+Rn(a)+'"]'}function jh(a){return"script[async]"+a}function sM(a,u,d){if(u.count++,u.instance===null)switch(u.type){case"style":var y=a.querySelector('style[data-href~="'+Rn(d.href)+'"]');if(y)return u.instance=y,En(y),y;var T=h({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return y=(a.ownerDocument||a).createElement("style"),En(y),dr(y,"style",T),Py(y,d.precedence,a),u.instance=y;case"stylesheet":T=uf(d.href);var w=a.querySelector(Gh(T));if(w)return u.state.loading|=4,u.instance=w,En(w),w;y=oM(d),(T=Ui.get(T))&&pw(y,T),w=(a.ownerDocument||a).createElement("link"),En(w);var N=w;return N._p=new Promise(function(U,j){N.onload=U,N.onerror=j}),dr(w,"link",y),u.state.loading|=4,Py(w,d.precedence,a),u.instance=w;case"script":return w=cf(d.src),(T=a.querySelector(jh(w)))?(u.instance=T,En(T),T):(y=d,(T=Ui.get(w))&&(y=h({},d),mw(y,T)),a=a.ownerDocument||a,T=a.createElement("script"),En(T),dr(T,"link",y),a.head.appendChild(T),u.instance=T);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(y=u.instance,u.state.loading|=4,Py(y,d.precedence,a));return u.instance}function Py(a,u,d){for(var y=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),T=y.length?y[y.length-1]:null,w=T,N=0;N<y.length;N++){var U=y[N];if(U.dataset.precedence===u)w=U;else if(w!==T)break}w?w.parentNode.insertBefore(a,w.nextSibling):(u=d.nodeType===9?d.head:d,u.insertBefore(a,u.firstChild))}function pw(a,u){a.crossOrigin==null&&(a.crossOrigin=u.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=u.referrerPolicy),a.title==null&&(a.title=u.title)}function mw(a,u){a.crossOrigin==null&&(a.crossOrigin=u.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=u.referrerPolicy),a.integrity==null&&(a.integrity=u.integrity)}var Ny=null;function aM(a,u,d){if(Ny===null){var y=new Map,T=Ny=new Map;T.set(d,y)}else T=Ny,y=T.get(d),y||(y=new Map,T.set(d,y));if(y.has(a))return y;for(y.set(a,null),d=d.getElementsByTagName(a),T=0;T<d.length;T++){var w=d[T];if(!(w[zl]||w[at]||a==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var N=w.getAttribute(u)||"";N=a+N;var U=y.get(N);U?U.push(w):y.set(N,[w])}}return y}function lM(a,u,d){a=a.ownerDocument||a,a.head.insertBefore(d,u==="title"?a.querySelector("head > title"):null)}function O9(a,u,d){if(d===1||u.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return a=u.disabled,typeof u.precedence=="string"&&a==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function uM(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var Kh=null;function L9(){}function V9(a,u,d){if(Kh===null)throw Error(r(475));var y=Kh;if(u.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var T=uf(d.href),w=a.querySelector(Gh(T));if(w){a=w._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(y.count++,y=My.bind(y),a.then(y,y)),u.state.loading|=4,u.instance=w,En(w);return}w=a.ownerDocument||a,d=oM(d),(T=Ui.get(T))&&pw(d,T),w=w.createElement("link"),En(w);var N=w;N._p=new Promise(function(U,j){N.onload=U,N.onerror=j}),dr(w,"link",d),u.instance=w}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(u,a),(a=u.state.preload)&&(u.state.loading&3)===0&&(y.count++,u=My.bind(y),a.addEventListener("load",u),a.addEventListener("error",u))}}function U9(){if(Kh===null)throw Error(r(475));var a=Kh;return a.stylesheets&&a.count===0&&gw(a,a.stylesheets),0<a.count?function(u){var d=setTimeout(function(){if(a.stylesheets&&gw(a,a.stylesheets),a.unsuspend){var y=a.unsuspend;a.unsuspend=null,y()}},6e4);return a.unsuspend=u,function(){a.unsuspend=null,clearTimeout(d)}}:null}function My(){if(this.count--,this.count===0){if(this.stylesheets)gw(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Dy=null;function gw(a,u){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Dy=new Map,u.forEach(F9,a),Dy=null,My.call(a))}function F9(a,u){if(!(u.state.loading&4)){var d=Dy.get(a);if(d)var y=d.get(null);else{d=new Map,Dy.set(a,d);for(var T=a.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<T.length;w++){var N=T[w];(N.nodeName==="LINK"||N.getAttribute("media")!=="not all")&&(d.set(N.dataset.precedence,N),y=N)}y&&d.set(null,y)}T=u.instance,N=T.getAttribute("data-precedence"),w=d.get(N)||y,w===y&&d.set(null,T),d.set(N,T),this.count++,y=My.bind(this),T.addEventListener("load",y),T.addEventListener("error",y),w?w.parentNode.insertBefore(T,w.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(T,a.firstChild)),u.state.loading|=4}}var Wh={$$typeof:k,Provider:null,Consumer:null,_currentValue:be,_currentValue2:be,_threadCount:0};function B9(a,u,d,y,T,w,N,U){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_e(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_e(0),this.hiddenUpdates=_e(null),this.identifierPrefix=y,this.onUncaughtError=T,this.onCaughtError=w,this.onRecoverableError=N,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function cM(a,u,d,y,T,w,N,U,j,ee,ue,he){return a=new B9(a,u,d,N,U,j,ee,he),u=1,w===!0&&(u|=24),w=si(3,null,null,u),a.current=w,w.stateNode=a,u=QT(),u.refCount++,a.pooledCache=u,u.refCount++,w.memoizedState={element:y,isDehydrated:d,cache:u},tE(w),a}function fM(a){return a?(a=Bc,a):Bc}function dM(a,u,d,y,T,w){T=fM(T),y.context===null?y.context=T:y.pendingContext=T,y=Na(u),y.payload={element:d},w=w===void 0?null:w,w!==null&&(y.callback=w),d=Ma(a,y,u),d!==null&&(fi(d,a,u),Sh(d,a,u))}function hM(a,u){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var d=a.retryLane;a.retryLane=d!==0&&d<u?d:u}}function yw(a,u){hM(a,u),(a=a.alternate)&&hM(a,u)}function pM(a){if(a.tag===13){var u=Fc(a,67108864);u!==null&&fi(u,a,67108864),yw(a,67108864)}}var ky=!0;function q9(a,u,d,y){var T=te.T;te.T=null;var w=me.p;try{me.p=2,vw(a,u,d,y)}finally{me.p=w,te.T=T}}function $9(a,u,d,y){var T=te.T;te.T=null;var w=me.p;try{me.p=8,vw(a,u,d,y)}finally{me.p=w,te.T=T}}function vw(a,u,d,y){if(ky){var T=_w(y);if(T===null)ow(a,u,y,Oy,d),gM(a,y);else if(H9(T,a,u,d,y))y.stopPropagation();else if(gM(a,y),u&4&&-1<z9.indexOf(a)){for(;T!==null;){var w=Io(T);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var N=jr(w.pendingLanes);if(N!==0){var U=w;for(U.pendingLanes|=2,U.entangledLanes|=2;N;){var j=1<<31-bt(N);U.entanglements[1]|=j,N&=~j}$o(w),(It&6)===0&&(vy=ln()+500,qh(0))}}break;case 13:U=Fc(w,2),U!==null&&fi(U,w,2),Ty(),yw(w,2)}if(w=_w(y),w===null&&ow(a,u,y,Oy,d),w===T)break;T=w}T!==null&&y.stopPropagation()}else ow(a,u,y,null,d)}}function _w(a){return a=Ri(a),Tw(a)}var Oy=null;function Tw(a){if(Oy=null,a=ms(a),a!==null){var u=o(a);if(u===null)a=null;else{var d=u.tag;if(d===13){if(a=s(u),a!==null)return a;a=null}else if(d===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;a=null}else u!==a&&(a=null)}}return Oy=a,null}function mM(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_a()){case Ta:return 2;case bo:return 8;case So:case Xd:return 32;case Ea:return 268435456;default:return 32}default:return 32}}var Ew=!1,Ga=null,ja=null,Ka=null,Yh=new Map,Jh=new Map,Wa=[],z9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function gM(a,u){switch(a){case"focusin":case"focusout":Ga=null;break;case"dragenter":case"dragleave":ja=null;break;case"mouseover":case"mouseout":Ka=null;break;case"pointerover":case"pointerout":Yh.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jh.delete(u.pointerId)}}function Qh(a,u,d,y,T,w){return a===null||a.nativeEvent!==w?(a={blockedOn:u,domEventName:d,eventSystemFlags:y,nativeEvent:w,targetContainers:[T]},u!==null&&(u=Io(u),u!==null&&pM(u)),a):(a.eventSystemFlags|=y,u=a.targetContainers,T!==null&&u.indexOf(T)===-1&&u.push(T),a)}function H9(a,u,d,y,T){switch(u){case"focusin":return Ga=Qh(Ga,a,u,d,y,T),!0;case"dragenter":return ja=Qh(ja,a,u,d,y,T),!0;case"mouseover":return Ka=Qh(Ka,a,u,d,y,T),!0;case"pointerover":var w=T.pointerId;return Yh.set(w,Qh(Yh.get(w)||null,a,u,d,y,T)),!0;case"gotpointercapture":return w=T.pointerId,Jh.set(w,Qh(Jh.get(w)||null,a,u,d,y,T)),!0}return!1}function yM(a){var u=ms(a.target);if(u!==null){var d=o(u);if(d!==null){if(u=d.tag,u===13){if(u=s(d),u!==null){a.blockedOn=u,gt(a.priority,function(){if(d.tag===13){var y=ci();y=Kt(y);var T=Fc(d,y);T!==null&&fi(T,d,y),yw(d,y)}});return}}else if(u===3&&d.stateNode.current.memoizedState.isDehydrated){a.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Ly(a){if(a.blockedOn!==null)return!1;for(var u=a.targetContainers;0<u.length;){var d=_w(a.nativeEvent);if(d===null){d=a.nativeEvent;var y=new d.constructor(d.type,d);_s=y,d.target.dispatchEvent(y),_s=null}else return u=Io(d),u!==null&&pM(u),a.blockedOn=d,!1;u.shift()}return!0}function vM(a,u,d){Ly(a)&&d.delete(u)}function G9(){Ew=!1,Ga!==null&&Ly(Ga)&&(Ga=null),ja!==null&&Ly(ja)&&(ja=null),Ka!==null&&Ly(Ka)&&(Ka=null),Yh.forEach(vM),Jh.forEach(vM)}function Vy(a,u){a.blockedOn===u&&(a.blockedOn=null,Ew||(Ew=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,G9)))}var Uy=null;function _M(a){Uy!==a&&(Uy=a,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Uy===a&&(Uy=null);for(var u=0;u<a.length;u+=3){var d=a[u],y=a[u+1],T=a[u+2];if(typeof y!="function"){if(Tw(y||d)===null)continue;break}var w=Io(d);w!==null&&(a.splice(u,3),u-=3,TE(w,{pending:!0,data:T,method:d.method,action:y},y,T))}}))}function Xh(a){function u(j){return Vy(j,a)}Ga!==null&&Vy(Ga,a),ja!==null&&Vy(ja,a),Ka!==null&&Vy(Ka,a),Yh.forEach(u),Jh.forEach(u);for(var d=0;d<Wa.length;d++){var y=Wa[d];y.blockedOn===a&&(y.blockedOn=null)}for(;0<Wa.length&&(d=Wa[0],d.blockedOn===null);)yM(d),d.blockedOn===null&&Wa.shift();if(d=(a.ownerDocument||a).$$reactFormReplay,d!=null)for(y=0;y<d.length;y+=3){var T=d[y],w=d[y+1],N=T[kt]||null;if(typeof w=="function")N||_M(d);else if(N){var U=null;if(w&&w.hasAttribute("formAction")){if(T=w,N=w[kt]||null)U=N.formAction;else if(Tw(T)!==null)continue}else U=N.action;typeof U=="function"?d[y+1]=U:(d.splice(y,3),y-=3),_M(d)}}}function ww(a){this._internalRoot=a}Fy.prototype.render=ww.prototype.render=function(a){var u=this._internalRoot;if(u===null)throw Error(r(409));var d=u.current,y=ci();dM(d,y,a,u,null,null)},Fy.prototype.unmount=ww.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var u=a.containerInfo;dM(a.current,2,null,a,null,null),Ty(),u[In]=null}};function Fy(a){this._internalRoot=a}Fy.prototype.unstable_scheduleHydration=function(a){if(a){var u=pt();a={blockedOn:null,target:a,priority:u};for(var d=0;d<Wa.length&&u!==0&&u<Wa[d].priority;d++);Wa.splice(d,0,a),d===0&&yM(a)}};var TM=e.version;if(TM!=="19.1.1")throw Error(r(527,TM,"19.1.1"));me.findDOMNode=function(a){var u=a._reactInternals;if(u===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=c(u),a=a!==null?f(a):null,a=a===null?null:a.stateNode,a};var j9={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:te,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var By=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!By.isDisabled&&By.supportsFiber)try{en=By.inject(j9),_t=By}catch{}}return ep.createRoot=function(a,u){if(!i(a))throw Error(r(299));var d=!1,y="",T=LP,w=VP,N=UP,U=null;return u!=null&&(u.unstable_strictMode===!0&&(d=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onUncaughtError!==void 0&&(T=u.onUncaughtError),u.onCaughtError!==void 0&&(w=u.onCaughtError),u.onRecoverableError!==void 0&&(N=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(U=u.unstable_transitionCallbacks)),u=cM(a,1,!1,null,null,d,y,T,w,N,U,null),a[In]=u.current,iw(a),new ww(u)},ep.hydrateRoot=function(a,u,d){if(!i(a))throw Error(r(299));var y=!1,T="",w=LP,N=VP,U=UP,j=null,ee=null;return d!=null&&(d.unstable_strictMode===!0&&(y=!0),d.identifierPrefix!==void 0&&(T=d.identifierPrefix),d.onUncaughtError!==void 0&&(w=d.onUncaughtError),d.onCaughtError!==void 0&&(N=d.onCaughtError),d.onRecoverableError!==void 0&&(U=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(j=d.unstable_transitionCallbacks),d.formState!==void 0&&(ee=d.formState)),u=cM(a,1,!0,u,d??null,y,T,w,N,U,j,ee),u.context=fM(null),d=u.current,y=ci(),y=Kt(y),T=Na(y),T.callback=null,Ma(d,T,y),d=y,u.current.lanes=d,Ee(u,d),$o(u),a[In]=u.current,iw(a),new Fy(u)},ep.version="19.1.1",ep}var PM;function o8(){if(PM)return xw.exports;PM=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),xw.exports=i8(),xw.exports}var s8=o8();const a8=fs(s8);/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var NM="popstate";function l8(t={}){function e(i,o){let{pathname:s="/",search:l="",hash:c=""}=lc(i.location.hash.substring(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),VS("",{pathname:s,search:l,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){let s=i.document.querySelector("base"),l="";if(s&&s.getAttribute("href")){let c=i.location.href,f=c.indexOf("#");l=f===-1?c:c.slice(0,f)}return l+"#"+(typeof o=="string"?o:Qp(o))}function r(i,o){Wi(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return c8(e,n,r,t)}function an(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Wi(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function u8(){return Math.random().toString(36).substring(2,10)}function MM(t,e){return{usr:t.state,key:t.key,idx:e}}function VS(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?lc(e):e,state:n,key:e&&e.key||r||u8()}}function Qp({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function lc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function c8(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,l="POP",c=null,f=h();f==null&&(f=0,s.replaceState({...s.state,idx:f},""));function h(){return(s.state||{idx:null}).idx}function g(){l="POP";let A=h(),C=A==null?null:A-f;f=A,c&&c({action:l,location:S.location,delta:C})}function v(A,C){l="PUSH";let D=VS(S.location,A,C);n&&n(D,A),f=h()+1;let k=MM(D,f),q=S.createHref(D);try{s.pushState(k,"",q)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;i.location.assign(q)}o&&c&&c({action:l,location:S.location,delta:1})}function E(A,C){l="REPLACE";let D=VS(S.location,A,C);n&&n(D,A),f=h();let k=MM(D,f),q=S.createHref(D);s.replaceState(k,"",q),o&&c&&c({action:l,location:S.location,delta:0})}function b(A){return f8(A)}let S={get action(){return l},get location(){return t(i,s)},listen(A){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(NM,g),c=A,()=>{i.removeEventListener(NM,g),c=null}},createHref(A){return e(i,A)},createURL:b,encodeLocation(A){let C=b(A);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:v,replace:E,go(A){return s.go(A)}};return S}function f8(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),an(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Qp(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function v4(t,e,n="/"){return d8(t,e,n,!1)}function d8(t,e,n,r){let i=typeof e=="string"?lc(e):e,o=Ys(i.pathname||"/",n);if(o==null)return null;let s=_4(t);h8(s);let l=null;for(let c=0;l==null&&c<s.length;++c){let f=S8(o);l=w8(s[c],f,r)}return l}function _4(t,e=[],n=[],r="",i=!1){let o=(s,l,c=i,f)=>{let h={relativePath:f===void 0?s.path||"":f,caseSensitive:s.caseSensitive===!0,childrenIndex:l,route:s};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&c)return;an(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let g=Hs([r,h.relativePath]),v=n.concat(h);s.children&&s.children.length>0&&(an(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),_4(s.children,e,v,g,c)),!(s.path==null&&!s.index)&&e.push({path:g,score:T8(g,s.index),routesMeta:v})};return t.forEach((s,l)=>{var c;if(s.path===""||!((c=s.path)!=null&&c.includes("?")))o(s,l);else for(let f of T4(s.path))o(s,l,!0,f)}),e}function T4(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=T4(r.join("/")),l=[];return l.push(...s.map(c=>c===""?o:[o,c].join("/"))),i&&l.push(...s),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function h8(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:E8(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var p8=/^:[\w-]+$/,m8=3,g8=2,y8=1,v8=10,_8=-2,DM=t=>t==="*";function T8(t,e){let n=t.split("/"),r=n.length;return n.some(DM)&&(r+=_8),e&&(r+=g8),n.filter(i=>!DM(i)).reduce((i,o)=>i+(p8.test(o)?m8:o===""?y8:v8),r)}function E8(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function w8(t,e,n=!1){let{routesMeta:r}=t,i={},o="/",s=[];for(let l=0;l<r.length;++l){let c=r[l],f=l===r.length-1,h=o==="/"?e:e.slice(o.length)||"/",g=Fv({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},h),v=c.route;if(!g&&f&&n&&!r[r.length-1].route.index&&(g=Fv({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!g)return null;Object.assign(i,g.params),s.push({params:i,pathname:Hs([o,g.pathname]),pathnameBase:I8(Hs([o,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(o=Hs([o,g.pathnameBase]))}return s}function Fv(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=b8(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((f,{paramName:h,isOptional:g},v)=>{if(h==="*"){let b=l[v]||"";s=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const E=l[v];return g&&!E?f[h]=void 0:f[h]=(E||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:s,pattern:t}}function b8(t,e=!1,n=!0){Wi(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function S8(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Wi(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ys(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function A8(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?lc(t):t;return{pathname:n?n.startsWith("/")?n:x8(n,e):e,search:R8(r),hash:P8(i)}}function x8(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Pw(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function C8(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Nx(t){let e=C8(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Mx(t,e,n,r=!1){let i;typeof t=="string"?i=lc(t):(i={...t},an(!i.pathname||!i.pathname.includes("?"),Pw("?","pathname","search",i)),an(!i.pathname||!i.pathname.includes("#"),Pw("#","pathname","hash",i)),an(!i.search||!i.search.includes("#"),Pw("#","search","hash",i)));let o=t===""||i.pathname==="",s=o?"/":i.pathname,l;if(s==null)l=n;else{let g=e.length-1;if(!r&&s.startsWith("..")){let v=s.split("/");for(;v[0]==="..";)v.shift(),g-=1;i.pathname=v.join("/")}l=g>=0?e[g]:"/"}let c=A8(i,l),f=s&&s!=="/"&&s.endsWith("/"),h=(o||s===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(f||h)&&(c.pathname+="/"),c}var Hs=t=>t.join("/").replace(/\/\/+/g,"/"),I8=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),R8=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,P8=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function N8(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var E4=["POST","PUT","PATCH","DELETE"];new Set(E4);var M8=["GET",...E4];new Set(M8);var wd=P.createContext(null);wd.displayName="DataRouter";var Z_=P.createContext(null);Z_.displayName="DataRouterState";P.createContext(!1);var w4=P.createContext({isTransitioning:!1});w4.displayName="ViewTransition";var D8=P.createContext(new Map);D8.displayName="Fetchers";var k8=P.createContext(null);k8.displayName="Await";var _o=P.createContext(null);_o.displayName="Navigation";var Dm=P.createContext(null);Dm.displayName="Location";var To=P.createContext({outlet:null,matches:[],isDataRoute:!1});To.displayName="Route";var Dx=P.createContext(null);Dx.displayName="RouteError";function O8(t,{relative:e}={}){an(bd(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=P.useContext(_o),{hash:i,pathname:o,search:s}=km(t,{relative:e}),l=o;return n!=="/"&&(l=o==="/"?n:Hs([n,o])),r.createHref({pathname:l,search:s,hash:i})}function bd(){return P.useContext(Dm)!=null}function ds(){return an(bd(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(Dm).location}var b4="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function S4(t){P.useContext(_o).static||P.useLayoutEffect(t)}function e0(){let{isDataRoute:t}=P.useContext(To);return t?W8():L8()}function L8(){an(bd(),"useNavigate() may be used only in the context of a <Router> component.");let t=P.useContext(wd),{basename:e,navigator:n}=P.useContext(_o),{matches:r}=P.useContext(To),{pathname:i}=ds(),o=JSON.stringify(Nx(r)),s=P.useRef(!1);return S4(()=>{s.current=!0}),P.useCallback((c,f={})=>{if(Wi(s.current,b4),!s.current)return;if(typeof c=="number"){n.go(c);return}let h=Mx(c,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Hs([e,h.pathname])),(f.replace?n.replace:n.push)(h,f.state,f)},[e,n,o,i,t])}P.createContext(null);function A4(){let{matches:t}=P.useContext(To),e=t[t.length-1];return e?e.params:{}}function km(t,{relative:e}={}){let{matches:n}=P.useContext(To),{pathname:r}=ds(),i=JSON.stringify(Nx(n));return P.useMemo(()=>Mx(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function V8(t,e){return x4(t,e)}function x4(t,e,n,r,i){var D;an(bd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=P.useContext(_o),{matches:s}=P.useContext(To),l=s[s.length-1],c=l?l.params:{},f=l?l.pathname:"/",h=l?l.pathnameBase:"/",g=l&&l.route;{let k=g&&g.path||"";C4(f,!g||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let v=ds(),E;if(e){let k=typeof e=="string"?lc(e):e;an(h==="/"||((D=k.pathname)==null?void 0:D.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${k.pathname}" was given in the \`location\` prop.`),E=k}else E=v;let b=E.pathname||"/",S=b;if(h!=="/"){let k=h.replace(/^\//,"").split("/");S="/"+b.replace(/^\//,"").split("/").slice(k.length).join("/")}let A=v4(t,{pathname:S});Wi(g||A!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),Wi(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=$8(A&&A.map(k=>Object.assign({},k,{params:Object.assign({},c,k.params),pathname:Hs([h,o.encodeLocation?o.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?h:Hs([h,o.encodeLocation?o.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),s,n,r,i);return e&&C?P.createElement(Dm.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},C):C}function U8(){let t=K8(),e=N8(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=P.createElement(P.Fragment,null,P.createElement("p",null,"💿 Hey developer 👋"),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:o},"ErrorBoundary")," or"," ",P.createElement("code",{style:o},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),n?P.createElement("pre",{style:i},n):null,s)}var F8=P.createElement(U8,null),B8=class extends P.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?P.createElement(To.Provider,{value:this.props.routeContext},P.createElement(Dx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function q8({routeContext:t,match:e,children:n}){let r=P.useContext(wd);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(To.Provider,{value:t},n)}function $8(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,s=n==null?void 0:n.errors;if(s!=null){let f=o.findIndex(h=>h.route.id&&(s==null?void 0:s[h.route.id])!==void 0);an(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),o=o.slice(0,Math.min(o.length,f+1))}let l=!1,c=-1;if(n)for(let f=0;f<o.length;f++){let h=o[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=f),h.route.id){let{loaderData:g,errors:v}=n,E=h.route.loader&&!g.hasOwnProperty(h.route.id)&&(!v||v[h.route.id]===void 0);if(h.route.lazy||E){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((f,h,g)=>{let v,E=!1,b=null,S=null;n&&(v=s&&h.route.id?s[h.route.id]:void 0,b=h.route.errorElement||F8,l&&(c<0&&g===0?(C4("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,S=null):c===g&&(E=!0,S=h.route.hydrateFallbackElement||null)));let A=e.concat(o.slice(0,g+1)),C=()=>{let D;return v?D=b:E?D=S:h.route.Component?D=P.createElement(h.route.Component,null):h.route.element?D=h.route.element:D=f,P.createElement(q8,{match:h,routeContext:{outlet:f,matches:A,isDataRoute:n!=null},children:D})};return n&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?P.createElement(B8,{location:n.location,revalidation:n.revalidation,component:b,error:v,children:C(),routeContext:{outlet:null,matches:A,isDataRoute:!0},unstable_onError:r}):C()},null)}function kx(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function z8(t){let e=P.useContext(wd);return an(e,kx(t)),e}function H8(t){let e=P.useContext(Z_);return an(e,kx(t)),e}function G8(t){let e=P.useContext(To);return an(e,kx(t)),e}function Ox(t){let e=G8(t),n=e.matches[e.matches.length-1];return an(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function j8(){return Ox("useRouteId")}function K8(){var r;let t=P.useContext(Dx),e=H8("useRouteError"),n=Ox("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function W8(){let{router:t}=z8("useNavigate"),e=Ox("useNavigate"),n=P.useRef(!1);return S4(()=>{n.current=!0}),P.useCallback(async(i,o={})=>{Wi(n.current,b4),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...o}))},[t,e])}var kM={};function C4(t,e,n){!e&&!kM[t]&&(kM[t]=!0,Wi(!1,n))}P.memo(Y8);function Y8({routes:t,future:e,state:n,unstable_onError:r}){return x4(t,void 0,n,r,e)}function OM({to:t,replace:e,state:n,relative:r}){an(bd(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=P.useContext(_o);Wi(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=P.useContext(To),{pathname:s}=ds(),l=e0(),c=Mx(t,Nx(o),s,r==="path"),f=JSON.stringify(c);return P.useEffect(()=>{l(JSON.parse(f),{replace:e,state:n,relative:r})},[l,f,r,e,n]),null}function Jr(t){an(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function J8({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:o=!1}){an(!bd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=t.replace(/^\/*/,"/"),l=P.useMemo(()=>({basename:s,navigator:i,static:o,future:{}}),[s,i,o]);typeof n=="string"&&(n=lc(n));let{pathname:c="/",search:f="",hash:h="",state:g=null,key:v="default"}=n,E=P.useMemo(()=>{let b=Ys(c,s);return b==null?null:{location:{pathname:b,search:f,hash:h,state:g,key:v},navigationType:r}},[s,c,f,h,g,v,r]);return Wi(E!=null,`<Router basename="${s}"> is not able to match the URL "${c}${f}${h}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:P.createElement(_o.Provider,{value:l},P.createElement(Dm.Provider,{children:e,value:E}))}function LM({children:t,location:e}){return V8(US(t),e)}function US(t,e=[]){let n=[];return P.Children.forEach(t,(r,i)=>{if(!P.isValidElement(r))return;let o=[...e,i];if(r.type===P.Fragment){n.push.apply(n,US(r.props.children,o));return}an(r.type===Jr,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),an(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=US(r.props.children,o)),n.push(s)}),n}var yv="get",vv="application/x-www-form-urlencoded";function t0(t){return t!=null&&typeof t.tagName=="string"}function Q8(t){return t0(t)&&t.tagName.toLowerCase()==="button"}function X8(t){return t0(t)&&t.tagName.toLowerCase()==="form"}function Z8(t){return t0(t)&&t.tagName.toLowerCase()==="input"}function e7(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function t7(t,e){return t.button===0&&(!e||e==="_self")&&!e7(t)}var qy=null;function n7(){if(qy===null)try{new FormData(document.createElement("form"),0),qy=!1}catch{qy=!0}return qy}var r7=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Nw(t){return t!=null&&!r7.has(t)?(Wi(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${vv}"`),null):t}function i7(t,e){let n,r,i,o,s;if(X8(t)){let l=t.getAttribute("action");r=l?Ys(l,e):null,n=t.getAttribute("method")||yv,i=Nw(t.getAttribute("enctype"))||vv,o=new FormData(t)}else if(Q8(t)||Z8(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(r=c?Ys(c,e):null,n=t.getAttribute("formmethod")||l.getAttribute("method")||yv,i=Nw(t.getAttribute("formenctype"))||Nw(l.getAttribute("enctype"))||vv,o=new FormData(l,t),!n7()){let{name:f,type:h,value:g}=t;if(h==="image"){let v=f?`${f}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else f&&o.append(f,g)}}else{if(t0(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=yv,r=null,i=vv,s=t}return o&&i==="text/plain"&&(s=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Lx(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function o7(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Ys(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function s7(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function a7(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function l7(t,e,n){let r=await Promise.all(t.map(async i=>{let o=e.routes[i.route.id];if(o){let s=await s7(o,n);return s.links?s.links():[]}return[]}));return d7(r.flat(1).filter(a7).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function VM(t,e,n,r,i,o){let s=(c,f)=>n[f]?c.route.id!==n[f].route.id:!0,l=(c,f)=>{var h;return n[f].pathname!==c.pathname||((h=n[f].route.path)==null?void 0:h.endsWith("*"))&&n[f].params["*"]!==c.params["*"]};return o==="assets"?e.filter((c,f)=>s(c,f)||l(c,f)):o==="data"?e.filter((c,f)=>{var g;let h=r.routes[c.route.id];if(!h||!h.hasLoader)return!1;if(s(c,f)||l(c,f))return!0;if(c.route.shouldRevalidate){let v=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((g=n[0])==null?void 0:g.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function u7(t,e,{includeHydrateFallback:n}={}){return c7(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function c7(t){return[...new Set(t)]}function f7(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function d7(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let o=JSON.stringify(f7(i));return n.has(o)||(n.add(o),r.push({key:o,link:i})),r},[])}function I4(){let t=P.useContext(wd);return Lx(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function h7(){let t=P.useContext(Z_);return Lx(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Vx=P.createContext(void 0);Vx.displayName="FrameworkContext";function R4(){let t=P.useContext(Vx);return Lx(t,"You must render this element inside a <HydratedRouter> element"),t}function p7(t,e){let n=P.useContext(Vx),[r,i]=P.useState(!1),[o,s]=P.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:f,onMouseLeave:h,onTouchStart:g}=e,v=P.useRef(null);P.useEffect(()=>{if(t==="render"&&s(!0),t==="viewport"){let S=C=>{C.forEach(D=>{s(D.isIntersecting)})},A=new IntersectionObserver(S,{threshold:.5});return v.current&&A.observe(v.current),()=>{A.disconnect()}}},[t]),P.useEffect(()=>{if(r){let S=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(S)}}},[r]);let E=()=>{i(!0)},b=()=>{i(!1),s(!1)};return n?t!=="intent"?[o,v,{}]:[o,v,{onFocus:tp(l,E),onBlur:tp(c,b),onMouseEnter:tp(f,E),onMouseLeave:tp(h,b),onTouchStart:tp(g,E)}]:[!1,v,{}]}function tp(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function m7({page:t,...e}){let{router:n}=I4(),r=P.useMemo(()=>v4(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?P.createElement(y7,{page:t,matches:r,...e}):null}function g7(t){let{manifest:e,routeModules:n}=R4(),[r,i]=P.useState([]);return P.useEffect(()=>{let o=!1;return l7(t,e,n).then(s=>{o||i(s)}),()=>{o=!0}},[t,e,n]),r}function y7({page:t,matches:e,...n}){let r=ds(),{manifest:i,routeModules:o}=R4(),{basename:s}=I4(),{loaderData:l,matches:c}=h7(),f=P.useMemo(()=>VM(t,e,c,i,r,"data"),[t,e,c,i,r]),h=P.useMemo(()=>VM(t,e,c,i,r,"assets"),[t,e,c,i,r]),g=P.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let b=new Set,S=!1;if(e.forEach(C=>{var k;let D=i.routes[C.route.id];!D||!D.hasLoader||(!f.some(q=>q.route.id===C.route.id)&&C.route.id in l&&((k=o[C.route.id])!=null&&k.shouldRevalidate)||D.hasClientLoader?S=!0:b.add(C.route.id))}),b.size===0)return[];let A=o7(t,s,"data");return S&&b.size>0&&A.searchParams.set("_routes",e.filter(C=>b.has(C.route.id)).map(C=>C.route.id).join(",")),[A.pathname+A.search]},[s,l,r,i,f,e,t,o]),v=P.useMemo(()=>u7(h,i),[h,i]),E=g7(h);return P.createElement(P.Fragment,null,g.map(b=>P.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...n})),v.map(b=>P.createElement("link",{key:b,rel:"modulepreload",href:b,...n})),E.map(({key:b,link:S})=>P.createElement("link",{key:b,nonce:n.nonce,...S})))}function v7(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var P4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{P4&&(window.__reactRouterVersion="7.8.2")}catch{}function _7({basename:t,children:e,window:n}){let r=P.useRef();r.current==null&&(r.current=l8({window:n,v5Compat:!0}));let i=r.current,[o,s]=P.useState({action:i.action,location:i.location}),l=P.useCallback(c=>{P.startTransition(()=>s(c))},[s]);return P.useLayoutEffect(()=>i.listen(l),[i,l]),P.createElement(J8,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:i})}var N4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,M4=P.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:s,state:l,target:c,to:f,preventScrollReset:h,viewTransition:g,...v},E){let{basename:b}=P.useContext(_o),S=typeof f=="string"&&N4.test(f),A,C=!1;if(typeof f=="string"&&S&&(A=f,P4))try{let L=new URL(window.location.href),F=f.startsWith("//")?new URL(L.protocol+f):new URL(f),V=Ys(F.pathname,b);F.origin===L.origin&&V!=null?f=V+F.search+F.hash:C=!0}catch{Wi(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let D=O8(f,{relative:i}),[k,q,$]=p7(r,v),H=b7(f,{replace:s,state:l,target:c,preventScrollReset:h,relative:i,viewTransition:g});function M(L){e&&e(L),L.defaultPrevented||H(L)}let O=P.createElement("a",{...v,...$,href:A||D,onClick:C||o?e:M,ref:v7(E,q),target:c,"data-discover":!S&&n==="render"?"true":void 0});return k&&!S?P.createElement(P.Fragment,null,O,P.createElement(m7,{page:D})):O});M4.displayName="Link";var T7=P.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:s,viewTransition:l,children:c,...f},h){let g=km(s,{relative:f.relative}),v=ds(),E=P.useContext(Z_),{navigator:b,basename:S}=P.useContext(_o),A=E!=null&&I7(g)&&l===!0,C=b.encodeLocation?b.encodeLocation(g).pathname:g.pathname,D=v.pathname,k=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;n||(D=D.toLowerCase(),k=k?k.toLowerCase():null,C=C.toLowerCase()),k&&S&&(k=Ys(k,S)||k);const q=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let $=D===C||!i&&D.startsWith(C)&&D.charAt(q)==="/",H=k!=null&&(k===C||!i&&k.startsWith(C)&&k.charAt(C.length)==="/"),M={isActive:$,isPending:H,isTransitioning:A},O=$?e:void 0,L;typeof r=="function"?L=r(M):L=[r,$?"active":null,H?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let F=typeof o=="function"?o(M):o;return P.createElement(M4,{...f,"aria-current":O,className:L,ref:h,style:F,to:s,viewTransition:l},typeof c=="function"?c(M):c)});T7.displayName="NavLink";var E7=P.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:o,method:s=yv,action:l,onSubmit:c,relative:f,preventScrollReset:h,viewTransition:g,...v},E)=>{let b=x7(),S=C7(l,{relative:f}),A=s.toLowerCase()==="get"?"get":"post",C=typeof l=="string"&&N4.test(l),D=k=>{if(c&&c(k),k.defaultPrevented)return;k.preventDefault();let q=k.nativeEvent.submitter,$=(q==null?void 0:q.getAttribute("formmethod"))||s;b(q||k.currentTarget,{fetcherKey:e,method:$,navigate:n,replace:i,state:o,relative:f,preventScrollReset:h,viewTransition:g})};return P.createElement("form",{ref:E,method:A,action:S,onSubmit:r?c:D,...v,"data-discover":!C&&t==="render"?"true":void 0})});E7.displayName="Form";function w7(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function D4(t){let e=P.useContext(wd);return an(e,w7(t)),e}function b7(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:s}={}){let l=e0(),c=ds(),f=km(t,{relative:o});return P.useCallback(h=>{if(t7(h,e)){h.preventDefault();let g=n!==void 0?n:Qp(c)===Qp(f);l(t,{replace:g,state:r,preventScrollReset:i,relative:o,viewTransition:s})}},[c,l,f,n,r,e,t,i,o,s])}var S7=0,A7=()=>`__${String(++S7)}__`;function x7(){let{router:t}=D4("useSubmit"),{basename:e}=P.useContext(_o),n=j8();return P.useCallback(async(r,i={})=>{let{action:o,method:s,encType:l,formData:c,body:f}=i7(r,e);if(i.navigate===!1){let h=i.fetcherKey||A7();await t.fetch(h,n,i.action||o,{preventScrollReset:i.preventScrollReset,formData:c,body:f,formMethod:i.method||s,formEncType:i.encType||l,flushSync:i.flushSync})}else await t.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:c,body:f,formMethod:i.method||s,formEncType:i.encType||l,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function C7(t,{relative:e}={}){let{basename:n}=P.useContext(_o),r=P.useContext(To);an(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...km(t||".",{relative:e})},s=ds();if(t==null){o.search=s.search;let l=new URLSearchParams(o.search),c=l.getAll("index");if(c.some(h=>h==="")){l.delete("index"),c.filter(g=>g).forEach(g=>l.append("index",g));let h=l.toString();o.search=h?`?${h}`:""}}return(!t||t===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Hs([n,o.pathname])),Qp(o)}function I7(t,{relative:e}={}){let n=P.useContext(w4);an(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=D4("useViewTransitionState"),i=km(t,{relative:e});if(!n.isTransitioning)return!1;let o=Ys(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=Ys(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Fv(i.pathname,s)!=null||Fv(i.pathname,o)!=null}var R7=y4();const P7=()=>{};var UM={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k4=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},N7=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],s=t[n++],l=t[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},O4={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,l=s?t[i+1]:0,c=i+2<t.length,f=c?t[i+2]:0,h=o>>2,g=(o&3)<<4|l>>4;let v=(l&15)<<2|f>>6,E=f&63;c||(E=64,s||(v=64)),r.push(n[h],n[g],n[v],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(k4(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):N7(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const f=i<t.length?n[t.charAt(i)]:64;++i;const g=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||l==null||f==null||g==null)throw new M7;const v=o<<2|l>>4;if(r.push(v),f!==64){const E=l<<4&240|f>>2;if(r.push(E),g!==64){const b=f<<6&192|g;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class M7 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const D7=function(t){const e=k4(t);return O4.encodeByteArray(e,!0)},Bv=function(t){return D7(t).replace(/\./g,"")},Ux=function(t){try{return O4.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function qv(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!k7(n)||(t[n]=qv(t[n],e[n]));return t}function k7(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O7=()=>Fx().__FIREBASE_DEFAULTS__,L7=()=>{if(typeof process>"u"||typeof UM>"u")return;const t=UM.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},V7=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ux(t[1]);return e&&JSON.parse(e)},n0=()=>{try{return P7()||O7()||L7()||V7()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},L4=t=>{var e,n;return(n=(e=n0())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},V4=t=>{const e=L4(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Bx=()=>{var t;return(t=n0())==null?void 0:t.config},U4=t=>{var e;return(e=n0())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U7{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function qx(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F4(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Bv(JSON.stringify(n)),Bv(JSON.stringify(s)),""].join(".")}const Mp={};function F7(){const t={prod:[],emulator:[]};for(const e of Object.keys(Mp))Mp[e]?t.emulator.push(e):t.prod.push(e);return t}function B7(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let FM=!1;function $x(t,e){if(typeof window>"u"||typeof document>"u"||!Cl(window.location.host)||Mp[t]===e||Mp[t]||FM)return;Mp[t]=e;function n(v){return`__firebase__banner__${v}`}const r="__firebase__banner",o=F7().prod.length>0;function s(){const v=document.getElementById(r);v&&v.remove()}function l(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function c(v,E){v.setAttribute("width","24"),v.setAttribute("id",E),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{FM=!0,s()},v}function h(v,E){v.setAttribute("id",E),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function g(){const v=B7(r),E=n("text"),b=document.getElementById(E)||document.createElement("span"),S=n("learnmore"),A=document.getElementById(S)||document.createElement("a"),C=n("preprendIcon"),D=document.getElementById(C)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const k=v.element;l(k),h(A,S);const q=f();c(D,C),k.append(D,b,A,q),document.body.appendChild(k)}o?(b.innerText="Preview backend disconnected.",D.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(D.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function q7(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cn())}function r0(){var e;const t=(e=n0())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $7(){return typeof window<"u"||B4()}function B4(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function z7(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function q4(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function zx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $4(){const t=cn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function z4(){return!r0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function H4(){return!r0()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Xp(){try{return typeof indexedDB=="object"}catch{return!1}}function H7(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G7="FirebaseError";class Ir extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=G7,Object.setPrototypeOf(this,Ir.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,uc.prototype.create)}}class uc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?j7(o,r):"Error",l=`${this.serviceName}: ${s} (${i}).`;return new Ir(i,l,r)}}function j7(t,e){return t.replace(K7,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const K7=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BM(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function W7(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Js(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(qM(o)&&qM(s)){if(!Js(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function qM(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Af(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function wp(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function G4(t,e){const n=new Y7(t,e);return n.subscribe.bind(n)}class Y7{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");J7(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Mw),i.error===void 0&&(i.error=Mw),i.complete===void 0&&(i.complete=Mw);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function J7(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Mw(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(t){return t&&t._delegate?t._delegate:t}class Yi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Q7=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new U7;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Z7(e))try{this.getOrInitializeService({instanceIdentifier:Tu})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Tu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Tu){return this.instances.has(e)}getOptions(e=Tu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);r===l&&s.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:X7(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Tu){return this.component?this.component.multipleInstances?e:Tu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function X7(t){return t===Tu?void 0:t}function Z7(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Q7(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx=[];var ot;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ot||(ot={}));const K4={debug:ot.DEBUG,verbose:ot.VERBOSE,info:ot.INFO,warn:ot.WARN,error:ot.ERROR,silent:ot.SILENT},ej=ot.INFO,tj={[ot.DEBUG]:"log",[ot.VERBOSE]:"log",[ot.INFO]:"info",[ot.WARN]:"warn",[ot.ERROR]:"error"},nj=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=tj[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class i0{constructor(e){this.name=e,this._logLevel=ej,this._logHandler=nj,this._userLogHandler=null,Hx.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ot))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?K4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ot.DEBUG,...e),this._logHandler(this,ot.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ot.VERBOSE,...e),this._logHandler(this,ot.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ot.INFO,...e),this._logHandler(this,ot.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ot.WARN,...e),this._logHandler(this,ot.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ot.ERROR,...e),this._logHandler(this,ot.ERROR,...e)}}function rj(t){Hx.forEach(e=>{e.setLogLevel(t)})}function ij(t,e){for(const n of Hx){let r=null;e&&e.level&&(r=K4[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,o,...s)=>{const l=s.map(c=>{if(c==null)return null;if(typeof c=="string")return c;if(typeof c=="number"||typeof c=="boolean")return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch{return null}}).filter(c=>c).join(" ");o>=(r??i.logLevel)&&t({level:ot[o].toLowerCase(),message:l,args:s,type:i.name})}}}const oj=(t,e)=>e.some(n=>t instanceof n);let $M,zM;function sj(){return $M||($M=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aj(){return zM||(zM=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const W4=new WeakMap,FS=new WeakMap,Y4=new WeakMap,Dw=new WeakMap,Gx=new WeakMap;function lj(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(al(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&W4.set(n,t)}).catch(()=>{}),Gx.set(e,t),e}function uj(t){if(FS.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});FS.set(t,e)}let BS={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return FS.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Y4.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return al(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function cj(t){BS=t(BS)}function fj(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(kw(this),e,...n);return Y4.set(r,e.sort?e.sort():[e]),al(r)}:aj().includes(t)?function(...e){return t.apply(kw(this),e),al(W4.get(this))}:function(...e){return al(t.apply(kw(this),e))}}function dj(t){return typeof t=="function"?fj(t):(t instanceof IDBTransaction&&uj(t),oj(t,sj())?new Proxy(t,BS):t)}function al(t){if(t instanceof IDBRequest)return lj(t);if(Dw.has(t))return Dw.get(t);const e=dj(t);return e!==t&&(Dw.set(t,e),Gx.set(e,t)),e}const kw=t=>Gx.get(t);function hj(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),l=al(s);return r&&s.addEventListener("upgradeneeded",c=>{r(al(s.result),c.oldVersion,c.newVersion,al(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const pj=["get","getKey","getAll","getAllKeys","count"],mj=["put","add","delete","clear"],Ow=new Map;function HM(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ow.get(e))return Ow.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=mj.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||pj.includes(n)))return;const o=async function(s,...l){const c=this.transaction(s,i?"readwrite":"readonly");let f=c.store;return r&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),i&&c.done]))[0]};return Ow.set(e,o),o}cj(t=>({...t,get:(e,n,r)=>HM(e,n)||t.get(e,n,r),has:(e,n)=>!!HM(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(yj(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function yj(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const $v="@firebase/app",qS="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs=new i0("@firebase/app"),vj="@firebase/app-compat",_j="@firebase/analytics-compat",Tj="@firebase/analytics",Ej="@firebase/app-check-compat",wj="@firebase/app-check",bj="@firebase/auth",Sj="@firebase/auth-compat",Aj="@firebase/database",xj="@firebase/data-connect",Cj="@firebase/database-compat",Ij="@firebase/functions",Rj="@firebase/functions-compat",Pj="@firebase/installations",Nj="@firebase/installations-compat",Mj="@firebase/messaging",Dj="@firebase/messaging-compat",kj="@firebase/performance",Oj="@firebase/performance-compat",Lj="@firebase/remote-config",Vj="@firebase/remote-config-compat",Uj="@firebase/storage",Fj="@firebase/storage-compat",Bj="@firebase/firestore",qj="@firebase/ai",$j="@firebase/firestore-compat",zj="firebase",Hj="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl="[DEFAULT]",Gj={[$v]:"fire-core",[vj]:"fire-core-compat",[Tj]:"fire-analytics",[_j]:"fire-analytics-compat",[wj]:"fire-app-check",[Ej]:"fire-app-check-compat",[bj]:"fire-auth",[Sj]:"fire-auth-compat",[Aj]:"fire-rtdb",[xj]:"fire-data-connect",[Cj]:"fire-rtdb-compat",[Ij]:"fire-fn",[Rj]:"fire-fn-compat",[Pj]:"fire-iid",[Nj]:"fire-iid-compat",[Mj]:"fire-fcm",[Dj]:"fire-fcm-compat",[kj]:"fire-perf",[Oj]:"fire-perf-compat",[Lj]:"fire-rc",[Vj]:"fire-rc-compat",[Uj]:"fire-gcs",[Fj]:"fire-gcs-compat",[Bj]:"fire-fst",[$j]:"fire-fst-compat",[qj]:"fire-vertex","fire-js":"fire-js",[zj]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ml=new Map,qf=new Map,$f=new Map;function Zp(t,e){try{t.container.addComponent(e)}catch(n){Qs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function J4(t,e){t.container.addOrOverwriteComponent(e)}function Xs(t){const e=t.name;if($f.has(e))return Qs.debug(`There were multiple attempts to register component ${e}.`),!1;$f.set(e,t);for(const n of ml.values())Zp(n,t);for(const n of qf.values())Zp(n,t);return!0}function Ad(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function jj(t,e,n=pl){Ad(t,e).clearInstance(n)}function jx(t){return t.options!==void 0}function Q4(t){return jx(t)?!1:"authIdToken"in t||"appCheckToken"in t||"releaseOnDeref"in t||"automaticDataCollectionEnabled"in t}function Qt(t){return t==null?!1:t.settings!==void 0}function Kj(){$f.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ei=new uc("app","Firebase",Wj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let X4=class{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Yi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ei.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GM(t,e){const n=Ux(t.split(".")[1]);if(n===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(n).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const i=JSON.parse(n).exp*1e3,o=new Date().getTime();i-o<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class Yj extends X4{constructor(e,n,r,i){const o=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!0,s={name:r,automaticDataCollectionEnabled:o};if(e.apiKey!==void 0)super(e,s,i);else{const l=e;super(l.options,s,i)}this._serverConfig={automaticDataCollectionEnabled:o,...n},this._serverConfig.authIdToken&&GM(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&GM(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,wi($v,qS,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Wx(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Ei.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa=Hj;function Kx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:pl,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Ei.create("bad-app-name",{appName:String(i)});if(n||(n=Bx()),!n)throw Ei.create("no-options");const o=ml.get(i);if(o){if(Js(n,o.options)&&Js(r,o.config))return o;throw Ei.create("duplicate-app",{appName:i})}const s=new j4(i);for(const c of $f.values())s.addComponent(c);const l=new X4(n,r,s);return ml.set(i,l),l}function Jj(t,e={}){if($7()&&!B4())throw Ei.create("invalid-server-app-environment");let n,r=e||{};if(t&&(jx(t)?n=t.options:Q4(t)?r=t:n=t),r.automaticDataCollectionEnabled===void 0&&(r.automaticDataCollectionEnabled=!0),n||(n=Bx()),!n)throw Ei.create("no-options");const i={...r,...n};i.releaseOnDeref!==void 0&&delete i.releaseOnDeref;const o=h=>[...h].reduce((g,v)=>Math.imul(31,g)+v.charCodeAt(0)|0,0);if(r.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Ei.create("finalization-registry-not-supported",{});const s=""+o(JSON.stringify(i)),l=qf.get(s);if(l)return l.incRefCount(r.releaseOnDeref),l;const c=new j4(s);for(const h of $f.values())c.addComponent(h);const f=new Yj(n,r,s,c);return qf.set(s,f),f}function o0(t=pl){const e=ml.get(t);if(!e&&t===pl&&Bx())return Kx();if(!e)throw Ei.create("no-app",{appName:t});return e}function Qj(){return Array.from(ml.values())}async function Wx(t){let e=!1;const n=t.name;ml.has(n)?(e=!0,ml.delete(n)):qf.has(n)&&t.decRefCount()<=0&&(qf.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function wi(t,e,n){let r=Gj[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qs.warn(s.join(" "));return}Xs(new Yi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function Z4(t,e){if(t!==null&&typeof t!="function")throw Ei.create("invalid-log-argument");ij(t,e)}function eF(t){rj(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xj="firebase-heartbeat-database",Zj=1,em="firebase-heartbeat-store";let Lw=null;function tF(){return Lw||(Lw=hj(Xj,Zj,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(em)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ei.create("idb-open",{originalErrorMessage:t.message})})),Lw}async function eK(t){try{const n=(await tF()).transaction(em),r=await n.objectStore(em).get(nF(t));return await n.done,r}catch(e){if(e instanceof Ir)Qs.warn(e.message);else{const n=Ei.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Qs.warn(n.message)}}}async function jM(t,e){try{const r=(await tF()).transaction(em,"readwrite");await r.objectStore(em).put(e,nF(t)),await r.done}catch(n){if(n instanceof Ir)Qs.warn(n.message);else{const r=Ei.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Qs.warn(r.message)}}}function nF(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tK=1024,nK=30;class rK{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new oK(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=KM();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>nK){const s=sK(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Qs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=KM(),{heartbeatsToSend:r,unsentEntries:i}=iK(this._heartbeatsCache.heartbeats),o=Bv(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Qs.warn(n),""}}}function KM(){return new Date().toISOString().substring(0,10)}function iK(t,e=tK){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),WM(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),WM(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class oK{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Xp()?H7().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await eK(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return jM(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return jM(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function WM(t){return Bv(JSON.stringify({version:2,heartbeats:t})).length}function sK(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aK(t){Xs(new Yi("platform-logger",e=>new gj(e),"PRIVATE")),Xs(new Yi("heartbeat",e=>new rK(e),"PRIVATE")),wi($v,qS,t),wi($v,qS,"esm2020"),wi("fire-js","")}aK("");const lK=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Ir,SDK_VERSION:sa,_DEFAULT_ENTRY_NAME:pl,_addComponent:Zp,_addOrOverwriteComponent:J4,_apps:ml,_clearComponents:Kj,_components:$f,_getProvider:Ad,_isFirebaseApp:jx,_isFirebaseServerApp:Qt,_isFirebaseServerAppSettings:Q4,_registerComponent:Xs,_removeServiceInstance:jj,_serverApps:qf,deleteApp:Wx,getApp:o0,getApps:Qj,initializeApp:Kx,initializeServerApp:Jj,onLog:Z4,registerVersion:wi,setLogLevel:eF},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uK{constructor(e,n){this._delegate=e,this.firebase=n,Zp(e,new Yi("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Wx(this._delegate)))}_getService(e,n=pl){var i;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&((i=r.getComponent())==null?void 0:i.instantiationMode)==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:n})}_removeServiceInstance(e,n=pl){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Zp(this._delegate,e)}_addOrOverwriteComponent(e){J4(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cK={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},YM=new uc("app-compat","Firebase",cK);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fK(t){const e={},n={__esModule:!0,initializeApp:o,app:i,registerVersion:wi,setLogLevel:eF,onLog:Z4,apps:null,SDK_VERSION:sa,INTERNAL:{registerComponent:l,removeApp:r,useAsService:c,modularAPIs:lK}};n.default=n,Object.defineProperty(n,"apps",{get:s});function r(f){delete e[f]}function i(f){if(f=f||pl,!BM(e,f))throw YM.create("no-app",{appName:f});return e[f]}i.App=t;function o(f,h={}){const g=Kx(f,h);if(BM(e,g.name))return e[g.name];const v=new t(g,n);return e[g.name]=v,v}function s(){return Object.keys(e).map(f=>e[f])}function l(f){const h=f.name,g=h.replace("-compat","");if(Xs(f)&&f.type==="PUBLIC"){const v=(E=i())=>{if(typeof E[g]!="function")throw YM.create("invalid-app-argument",{appName:h});return E[g]()};f.serviceProps!==void 0&&qv(v,f.serviceProps),n[g]=v,t.prototype[g]=function(...E){return this._getService.bind(this,h).apply(this,f.multipleInstances?E:[])}}return f.type==="PUBLIC"?n[g]:null}function c(f,h){return h==="serverAuth"?null:h}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rF(){const t=fK(uK);t.INTERNAL={...t.INTERNAL,createFirebaseNamespace:rF,extendNamespace:e,createSubscribe:G4,ErrorFactory:uc,deepExtend:qv};function e(n){qv(t,n)}return t}const dK=rF();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM=new i0("@firebase/app-compat"),hK="@firebase/app-compat",pK="0.5.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mK(t){wi(hK,pK,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=Fx();if(t.firebase!==void 0){JM.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&JM.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Il=dK;mK();var gK="firebase",yK="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Il.registerVersion(gK,yK,"app-compat");const np={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},ff={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vK(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function iF(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _K=vK,TK=iF,oF=new uc("auth","Firebase",iF());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv=new i0("@firebase/auth");function EK(t,...e){zv.logLevel<=ot.WARN&&zv.warn(`Auth (${sa}): ${t}`,...e)}function _v(t,...e){zv.logLevel<=ot.ERROR&&zv.error(`Auth (${sa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nr(t,...e){throw Jx(t,...e)}function $n(t,...e){return Jx(t,...e)}function Yx(t,e,n){const r={...TK(),[e]:n};return new uc("auth","Firebase",r).create(e,{appName:t.name})}function tr(t){return Yx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xd(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&nr(t,"argument-error"),Yx(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Jx(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return oF.create(t,...e)}function ve(t,e,...n){if(!t)throw Jx(e,...n)}function Qo(t){const e="INTERNAL ASSERTION FAILED: "+t;throw _v(e),new Error(e)}function yo(t,e){t||Qo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tm(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function Qx(){return QM()==="http:"||QM()==="https:"}function QM(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wK(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Qx()||q4()||"connection"in navigator)?navigator.onLine:!0}function bK(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,n){this.shortDelay=e,this.longDelay=n,yo(n>e,"Short delay should be less than long delay!"),this.isMobile=q7()||zx()}get(){return wK()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(t,e){yo(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sF{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SK={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AK=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],xK=new Om(3e4,6e4);function vn(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function _n(t,e,n,r,i={}){return aF(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});const l=Sd({key:t.config.apiKey,...s}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:c,...o};return z7()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&Cl(t.emulatorConfig.host)&&(f.credentials="include"),sF.fetch()(await lF(t,t.config.apiHost,n,l),f)})}async function aF(t,e,n){t._canInitEmulator=!1;const r={...SK,...e};try{const i=new IK(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw bp(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const l=o.ok?s.errorMessage:s.error.message,[c,f]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw bp(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw bp(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw bp(t,"user-disabled",s);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw Yx(t,h,f);nr(t,h)}}catch(i){if(i instanceof Ir)throw i;nr(t,"network-request-failed",{message:String(i)})}}async function aa(t,e,n,r,i={}){const o=await _n(t,e,n,r,i);return"mfaPendingCredential"in o&&nr(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function lF(t,e,n,r){const i=`${e}${n}?${r}`,o=t,s=o.config.emulator?Xx(t.config,i):`${t.config.apiScheme}://${i}`;return AK.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}function CK(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class IK{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r($n(this.auth,"network-request-failed")),xK.get())})}}function bp(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=$n(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XM(t){return t!==void 0&&t.getResponse!==void 0}function ZM(t){return t!==void 0&&t.enterprise!==void 0}class uF{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return CK(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RK(t){return(await _n(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function cF(t,e){return _n(t,"GET","/v2/recaptchaConfig",vn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PK(t,e){return _n(t,"POST","/v1/accounts:delete",e)}async function NK(t,e){return _n(t,"POST","/v1/accounts:update",e)}async function Hv(t,e){return _n(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function MK(t,e=!1){const n=Ne(t),r=await n.getIdToken(e),i=s0(r);ve(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Dp(Vw(i.auth_time)),issuedAtTime:Dp(Vw(i.iat)),expirationTime:Dp(Vw(i.exp)),signInProvider:s||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Vw(t){return Number(t)*1e3}function s0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return _v("JWT malformed, contained fewer than 3 sections"),null;try{const i=Ux(n);return i?JSON.parse(i):(_v("Failed to decode base64 JWT payload"),null)}catch(i){return _v("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function eD(t){const e=s0(t);return ve(e,"internal-error"),ve(typeof e.exp<"u","internal-error"),ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zs(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ir&&DK(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function DK({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kK{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dp(this.lastLoginAt),this.creationTime=Dp(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nm(t){var g;const e=t.auth,n=await t.getIdToken(),r=await Zs(t,Hv(e,{idToken:n}));ve(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const o=(g=i.providerUserInfo)!=null&&g.length?fF(i.providerUserInfo):[],s=LK(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(s!=null&&s.length),f=l?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new $S(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,h)}async function OK(t){const e=Ne(t);await nm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function LK(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function fF(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VK(t,e){const n=await aF(t,{},async()=>{const r=Sd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=await lF(t,i,"/v1/token",`key=${o}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&Cl(t.emulatorConfig.host)&&(c.credentials="include"),sF.fetch()(s,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function UK(t,e){return _n(t,"POST","/v2/accounts:revokeToken",vn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ve(e.idToken,"internal-error"),ve(typeof e.idToken<"u","internal-error"),ve(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):eD(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ve(e.length!==0,"internal-error");const n=eD(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await VK(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new Rf;return r&&(ve(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ve(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(ve(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Rf,this.toJSON())}_performRefresh(){return Qo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ja(t,e){ve(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ho{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new kK(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new $S(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Zs(this,this.stsTokenManager.getToken(this.auth,e));return ve(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return MK(this,e)}reload(){return OK(this)}_assign(e){this!==e&&(ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ho({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await nm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qt(this.auth.app))return Promise.reject(tr(this.auth));const e=await this.getIdToken();return await Zs(this,PK(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,o=n.phoneNumber??void 0,s=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,f=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:g,emailVerified:v,isAnonymous:E,providerData:b,stsTokenManager:S}=n;ve(g&&S,e,"internal-error");const A=Rf.fromJSON(this.name,S);ve(typeof g=="string",e,"internal-error"),Ja(r,e.name),Ja(i,e.name),ve(typeof v=="boolean",e,"internal-error"),ve(typeof E=="boolean",e,"internal-error"),Ja(o,e.name),Ja(s,e.name),Ja(l,e.name),Ja(c,e.name),Ja(f,e.name),Ja(h,e.name);const C=new ho({uid:g,auth:e,email:i,emailVerified:v,displayName:r,isAnonymous:E,photoURL:s,phoneNumber:o,tenantId:l,stsTokenManager:A,createdAt:f,lastLoginAt:h});return b&&Array.isArray(b)&&(C.providerData=b.map(D=>({...D}))),c&&(C._redirectEventId=c),C}static async _fromIdTokenResponse(e,n,r=!1){const i=new Rf;i.updateFromServerResponse(n);const o=new ho({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await nm(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ve(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?fF(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),l=new Rf;l.updateFromIdToken(r);const c=new ho({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:s}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new $S(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(c,f),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=new Map;function vi(t){yo(t instanceof Function,"Expected a class definition");let e=tD.get(t);return e?(yo(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,tD.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dF{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}dF.type="NONE";const zf=dF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uu(t,e,n){return`firebase:${t}:${e}:${n}`}class Pf{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Uu(this.userKey,i.apiKey,o),this.fullPersistenceKey=Uu("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Hv(this.auth,{idToken:e}).catch(()=>{});return n?ho._fromGetAccountInfoResponse(this.auth,n,e):null}return ho._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Pf(vi(zf),e,r);const i=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=i[0]||vi(zf);const s=Uu(r,e.config.apiKey,e.name);let l=null;for(const f of n)try{const h=await f._get(s);if(h){let g;if(typeof h=="string"){const v=await Hv(e,{idToken:h}).catch(()=>{});if(!v)break;g=await ho._fromGetAccountInfoResponse(e,v,h)}else g=ho._fromJSON(e,h);f!==o&&(l=g),o=f;break}}catch{}const c=i.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new Pf(o,e,r):(o=c[0],l&&await o._set(s,l.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(s)}catch{}})),new Pf(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(gF(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hF(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(yF(e))return"Blackberry";if(vF(e))return"Webos";if(pF(e))return"Safari";if((e.includes("chrome/")||mF(e))&&!e.includes("edge/"))return"Chrome";if(Lm(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function hF(t=cn()){return/firefox\//i.test(t)}function pF(t=cn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function mF(t=cn()){return/crios\//i.test(t)}function gF(t=cn()){return/iemobile/i.test(t)}function Lm(t=cn()){return/android/i.test(t)}function yF(t=cn()){return/blackberry/i.test(t)}function vF(t=cn()){return/webos/i.test(t)}function Vm(t=cn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function FK(t=cn()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function BK(t=cn()){var e;return Vm(t)&&!!((e=window.navigator)!=null&&e.standalone)}function qK(){return $4()&&document.documentMode===10}function _F(t=cn()){return Vm(t)||Lm(t)||vF(t)||yF(t)||/windows phone/i.test(t)||gF(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TF(t,e=[]){let n;switch(t){case"Browser":n=nD(cn());break;case"Worker":n=`${nD(cn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${sa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $K{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,l)=>{try{const c=e(o);s(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zK(t,e={}){return _n(t,"GET","/v2/passwordPolicy",vn(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HK=6;class GK{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??HK,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jK{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rD(this),this.idTokenSubscription=new rD(this),this.beforeStateQueue=new $K(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oF,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=vi(n)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await Pf.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Hv(this,{idToken:e}),r=await ho._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(Qt(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(o=this.redirectUser)==null?void 0:o._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!s||s===l)&&(c!=null&&c.user)&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await nm(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=bK()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qt(this.app))return Promise.reject(tr(this));const n=e?Ne(e):null;return n&&ve(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qt(this.app)?Promise.reject(tr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qt(this.app)?Promise.reject(tr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await zK(this),n=new GK(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new uc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await UK(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&vi(e)||this._popupRedirectResolver;ve(n,this,"argument-error"),this.redirectPersistenceManager=await Pf.create(this,[vi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let s=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(l,this,"internal-error"),l.then(()=>{s||o(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{const c=e.addObserver(n);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=TF(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Qt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&EK(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function fn(t){return Ne(t)}class rD{constructor(e){this.auth=e,this.observer=null,this.addObserver=G4(n=>this.observer=n)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Um={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function KK(t){Um=t}function Zx(t){return Um.loadJS(t)}function WK(){return Um.recaptchaV2Script}function YK(){return Um.recaptchaEnterpriseScript}function JK(){return Um.gapiScript}function EF(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QK=500,XK=6e4,$y=1e12;class ZK{constructor(e){this.auth=e,this.counter=$y,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new nW(e,this.auth.name,n||{})),this.counter++,r}reset(e){var r;const n=e||$y;(r=this._widgets.get(n))==null||r.delete(),this._widgets.delete(n)}getResponse(e){var r;const n=e||$y;return((r=this._widgets.get(n))==null?void 0:r.getResponse())||""}async execute(e){var r;const n=e||$y;return(r=this._widgets.get(n))==null||r.execute(),""}}class eW{constructor(){this.enterprise=new tW}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class tW{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class nW{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;ve(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=rW(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},XK)},QK))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function rW(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const iW="recaptcha-enterprise",kp="NO_RECAPTCHA";class wF{constructor(e){this.type=iW,this.auth=fn(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(s,l)=>{cF(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const f=new uF(c);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,s(f.siteKey)}}).catch(c=>{l(c)})})}function i(o,s,l){const c=window.grecaptcha;ZM(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(f=>{s(f)}).catch(()=>{s(kp)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new eW().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(l=>{if(!n&&ZM(window.grecaptcha))i(l,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=YK();c.length!==0&&(c+=l),Zx(c).then(()=>{i(l,o,s)}).catch(f=>{s(f)})}}).catch(l=>{s(l)})})}}async function rp(t,e,n,r=!1,i=!1){const o=new wF(t);let s;if(i)s=kp;else try{s=await o.verify(n)}catch{s=await o.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,f=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:f,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:s}):Object.assign(l,{captchaResponse:s}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function ll(t,e,n,r,i){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await rp(t,e,n,n==="getOobCode");return r(t,l)}else return r(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await rp(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(l)});else if(i==="PHONE_PROVIDER")if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("PHONE_PROVIDER")){const l=await rp(t,e,n);return r(t,l).catch(async c=>{var f;if(((f=t._getRecaptchaConfig())==null?void 0:f.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const h=await rp(t,e,n,!1,!0);return r(t,h)}return Promise.reject(c)})}else{const l=await rp(t,e,n,!1,!0);return r(t,l)}else return Promise.reject(i+" provider is not supported.")}async function oW(t){const e=fn(t),n=await cF(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new uF(n);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new wF(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sW(t,e){const n=Ad(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(Js(o,e??{}))return i;nr(i,"already-initialized")}return n.initialize({options:e})}function aW(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(vi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function bF(t,e,n){const r=fn(t);ve(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),o=SF(e),{host:s,port:l}=lW(e),c=l===null?"":`:${l}`,f={url:`${o}//${s}${c}/`},h=Object.freeze({host:s,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ve(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ve(Js(f,r.config.emulator)&&Js(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Cl(s)?(qx(`${o}//${s}${c}`),$x("Auth",!0)):i||uW()}function SF(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function lW(t){const e=SF(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:iD(r.substr(o.length+1))}}else{const[o,s]=r.split(":");return{host:o,port:iD(s)}}}function iD(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function uW(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Qo("not implemented")}_getIdTokenResponse(e){return Qo("not implemented")}_linkToIdToken(e,n){return Qo("not implemented")}_getReauthenticationResolver(e){return Qo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AF(t,e){return _n(t,"POST","/v1/accounts:resetPassword",vn(t,e))}async function cW(t,e){return _n(t,"POST","/v1/accounts:update",e)}async function fW(t,e){return _n(t,"POST","/v1/accounts:signUp",e)}async function dW(t,e){return _n(t,"POST","/v1/accounts:update",vn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hW(t,e){return aa(t,"POST","/v1/accounts:signInWithPassword",vn(t,e))}async function a0(t,e){return _n(t,"POST","/v1/accounts:sendOobCode",vn(t,e))}async function pW(t,e){return a0(t,e)}async function mW(t,e){return a0(t,e)}async function gW(t,e){return a0(t,e)}async function yW(t,e){return a0(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vW(t,e){return aa(t,"POST","/v1/accounts:signInWithEmailLink",vn(t,e))}async function _W(t,e){return aa(t,"POST","/v1/accounts:signInWithEmailLink",vn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm extends Cd{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new rm(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new rm(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ll(e,n,"signInWithPassword",hW,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return vW(e,{email:this._email,oobCode:this._password});default:nr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ll(e,r,"signUpPassword",fW,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return _W(e,{idToken:n,email:this._email,oobCode:this._password});default:nr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gs(t,e){return aa(t,"POST","/v1/accounts:signInWithIdp",vn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TW="http://localhost";class ss extends Cd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ss(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):nr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=n;if(!r||!i)return null;const s=new ss(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return Gs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Gs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Gs(e,n)}buildRequest(){const e={requestUri:TW,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Sd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oD(t,e){return _n(t,"POST","/v1/accounts:sendVerificationCode",vn(t,e))}async function EW(t,e){return aa(t,"POST","/v1/accounts:signInWithPhoneNumber",vn(t,e))}async function wW(t,e){const n=await aa(t,"POST","/v1/accounts:signInWithPhoneNumber",vn(t,e));if(n.temporaryProof)throw bp(t,"account-exists-with-different-credential",n);return n}const bW={USER_NOT_FOUND:"user-not-found"};async function SW(t,e){const n={...e,operation:"REAUTH"};return aa(t,"POST","/v1/accounts:signInWithPhoneNumber",vn(t,n),bW)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu extends Cd{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Fu({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Fu({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return EW(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return wW(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return SW(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:o}=e;return!r&&!n&&!i&&!o?null:new Fu({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AW(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function xW(t){const e=Af(wp(t)).link,n=e?Af(wp(e)).deep_link_id:null,r=Af(wp(t)).deep_link_id;return(r?Af(wp(r)).link:null)||r||n||e||t}class l0{constructor(e){const n=Af(wp(e)),r=n.apiKey??null,i=n.oobCode??null,o=AW(n.mode??null);ve(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=xW(e);try{return new l0(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(){this.providerId=Rl.PROVIDER_ID}static credential(e,n){return rm._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=l0.parseLink(n);return ve(r,"argument-error"),rm._fromEmailAndCode(e,r.code,r.tenantId)}}Rl.PROVIDER_ID="password";Rl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Rl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id extends la{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Nf extends Id{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return ve("providerId"in n&&"signInMethod"in n,"argument-error"),ss._fromParams(n)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return ve(e.idToken||e.accessToken,"argument-error"),ss._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return Nf.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Nf.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:o,nonce:s,providerId:l}=e;if(!r&&!i&&!n&&!o||!l)return null;try{return new Nf(l)._credential({idToken:n,accessToken:r,nonce:s,pendingToken:o})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go extends Id{constructor(){super("facebook.com")}static credential(e){return ss._fromParams({providerId:Go.PROVIDER_ID,signInMethod:Go.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Go.credentialFromTaggedObject(e)}static credentialFromError(e){return Go.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Go.credential(e.oauthAccessToken)}catch{return null}}}Go.FACEBOOK_SIGN_IN_METHOD="facebook.com";Go.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo extends Id{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ss._fromParams({providerId:jo.PROVIDER_ID,signInMethod:jo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return jo.credentialFromTaggedObject(e)}static credentialFromError(e){return jo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return jo.credential(n,r)}catch{return null}}}jo.GOOGLE_SIGN_IN_METHOD="google.com";jo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko extends Id{constructor(){super("github.com")}static credential(e){return ss._fromParams({providerId:Ko.PROVIDER_ID,signInMethod:Ko.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ko.credentialFromTaggedObject(e)}static credentialFromError(e){return Ko.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ko.credential(e.oauthAccessToken)}catch{return null}}}Ko.GITHUB_SIGN_IN_METHOD="github.com";Ko.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CW="http://localhost";class Hf extends Cd{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Gs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Gs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Gs(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:o}=n;return!r||!i||!o||r!==i?null:new Hf(r,o)}static _create(e,n){return new Hf(e,n)}buildRequest(){return{requestUri:CW,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IW="saml.";class Gv extends la{constructor(e){ve(e.startsWith(IW),"argument-error"),super(e)}static credentialFromResult(e){return Gv.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Gv.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Hf.fromJSON(e);return ve(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Hf._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo extends Id{constructor(){super("twitter.com")}static credential(e,n){return ss._fromParams({providerId:Wo.PROVIDER_ID,signInMethod:Wo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Wo.credentialFromTaggedObject(e)}static credentialFromError(e){return Wo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Wo.credential(n,r)}catch{return null}}}Wo.TWITTER_SIGN_IN_METHOD="twitter.com";Wo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xF(t,e){return aa(t,"POST","/v1/accounts:signUp",vn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await ho._fromIdTokenResponse(e,r,i),s=sD(r);return new Ji({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=sD(r);return new Ji({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function sD(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RW(t){var i;if(Qt(t.app))return Promise.reject(tr(t));const e=fn(t);if(await e._initializationPromise,(i=e.currentUser)!=null&&i.isAnonymous)return new Ji({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await xF(e,{returnSecureToken:!0}),r=await Ji._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv extends Ir{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,jv.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new jv(e,n,r,i)}}function CF(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?jv._fromErrorAndOperation(t,o,e,r):o})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IF(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PW(t,e){const n=Ne(t);await u0(!0,n,e);const{providerUserInfo:r}=await NK(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=IF(r||[]);return n.providerData=n.providerData.filter(o=>i.has(o.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function eC(t,e,n=!1){const r=await Zs(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ji._forOperation(t,"link",r)}async function u0(t,e,n){await nm(e);const r=IF(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";ve(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RF(t,e,n=!1){const{auth:r}=t;if(Qt(r.app))return Promise.reject(tr(r));const i="reauthenticate";try{const o=await Zs(t,CF(r,i,e,t),n);ve(o.idToken,r,"internal-error");const s=s0(o.idToken);ve(s,r,"internal-error");const{sub:l}=s;return ve(t.uid===l,r,"user-mismatch"),Ji._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&nr(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PF(t,e,n=!1){if(Qt(t.app))return Promise.reject(tr(t));const r="signIn",i=await CF(t,r,e),o=await Ji._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function c0(t,e){return PF(fn(t),e)}async function NF(t,e){const n=Ne(t);return await u0(!1,n,e.providerId),eC(n,e)}async function MF(t,e){return RF(Ne(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NW(t,e){return aa(t,"POST","/v1/accounts:signInWithCustomToken",vn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MW(t,e){if(Qt(t.app))return Promise.reject(tr(t));const n=fn(t),r=await NW(n,{token:e,returnSecureToken:!0}),i=await Ji._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?tC._fromServerResponse(e,n):"totpInfo"in n?nC._fromServerResponse(e,n):nr(e,"internal-error")}}class tC extends Fm{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new tC(n)}}class nC extends Fm{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new nC(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f0(t,e,n){var r;ve(((r=n.url)==null?void 0:r.length)>0,t,"invalid-continue-uri"),ve(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),ve(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ve(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(ve(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rC(t){const e=fn(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function DW(t,e,n){const r=fn(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&f0(r,i,n),await ll(r,i,"getOobCode",mW,"EMAIL_PASSWORD_PROVIDER")}async function kW(t,e,n){await AF(Ne(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&rC(t),r})}async function OW(t,e){await dW(Ne(t),{oobCode:e})}async function DF(t,e){const n=Ne(t),r=await AF(n,{oobCode:e}),i=r.requestType;switch(ve(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ve(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ve(r.mfaInfo,n,"internal-error");default:ve(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=Fm._fromServerResponse(fn(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:o},operation:i}}async function LW(t,e){const{data:n}=await DF(Ne(t),e);return n.email}async function VW(t,e,n){if(Qt(t.app))return Promise.reject(tr(t));const r=fn(t),s=await ll(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",xF,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&rC(t),c}),l=await Ji._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(l.user),l}function kF(t,e,n){return Qt(t.app)?Promise.reject(tr(t)):c0(Ne(t),Rl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&rC(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UW(t,e,n){const r=fn(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function o(s,l){ve(l.handleCodeInApp,r,"argument-error"),l&&f0(r,s,l)}o(i,n),await ll(r,i,"getOobCode",gW,"EMAIL_PASSWORD_PROVIDER")}function FW(t,e){const n=l0.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function BW(t,e,n){if(Qt(t.app))return Promise.reject(tr(t));const r=Ne(t),i=Rl.credentialWithLink(e,n||tm());return ve(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),c0(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qW(t,e){return _n(t,"POST","/v1/accounts:createAuthUri",vn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $W(t,e){const n=Qx()?tm():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await qW(Ne(t),r);return i||[]}async function zW(t,e){const n=Ne(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&f0(n.auth,i,e);const{email:o}=await pW(n.auth,i);o!==t.email&&await t.reload()}async function HW(t,e,n){const r=Ne(t),o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&f0(r.auth,o,n);const{email:s}=await yW(r.auth,o);s!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GW(t,e){return _n(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jW(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ne(t),o={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},s=await Zs(r,GW(r.auth,o));r.displayName=s.displayName||null,r.photoURL=s.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(s)}function KW(t,e){const n=Ne(t);return Qt(n.auth.app)?Promise.reject(tr(n.auth)):LF(n,e,null)}function OF(t,e){return LF(Ne(t),null,e)}async function LF(t,e,n){const{auth:r}=t,o={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(o.email=e),n&&(o.password=n);const s=await Zs(t,cW(r,o));await t._updateTokensIfNecessary(s,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WW(t){var i,o;if(!t)return null;const{providerId:e}=t,n=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},r=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(t!=null&&t.idToken)){const s=(o=(i=s0(t.idToken))==null?void 0:i.firebase)==null?void 0:o.sign_in_provider;if(s){const l=s!=="anonymous"&&s!=="custom"?s:null;return new Mf(r,l)}}if(!e)return null;switch(e){case"facebook.com":return new YW(r,n);case"github.com":return new JW(r,n);case"google.com":return new QW(r,n);case"twitter.com":return new XW(r,n,t.screenName||null);case"custom":case"anonymous":return new Mf(r,null);default:return new Mf(r,e,n)}}class Mf{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class VF extends Mf{constructor(e,n,r,i){super(e,n,r),this.username=i}}class YW extends Mf{constructor(e,n){super(e,"facebook.com",n)}}class JW extends VF{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class QW extends Mf{constructor(e,n){super(e,"google.com",n)}}class XW extends VF{constructor(e,n,r){super(e,"twitter.com",n,r)}}function ZW(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:WW(n)}function eY(t,e,n,r){return Ne(t).onIdTokenChanged(e,n,r)}function tY(t,e,n){return Ne(t).beforeAuthStateChanged(e,n)}function nY(t,e,n,r){return Ne(t).onAuthStateChanged(e,n,r)}function rY(t){return Ne(t).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new Nu("enroll",e,n)}static _fromMfaPendingCredential(e){return new Nu("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if((n=e.multiFactorSession)!=null&&n.pendingCredential)return Nu._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if((r=e.multiFactorSession)!=null&&r.idToken)return Nu._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=fn(e),i=n.customData._serverResponse,o=(i.mfaInfo||[]).map(l=>Fm._fromServerResponse(r,l));ve(i.mfaPendingCredential,r,"internal-error");const s=Nu._fromMfaPendingCredential(i.mfaPendingCredential);return new iC(s,o,async l=>{const c=await l._process(r,s);delete i.mfaInfo,delete i.mfaPendingCredential;const f={...i,idToken:c.idToken,refreshToken:c.refreshToken};switch(n.operationType){case"signIn":const h=await Ji._fromIdTokenResponse(r,n.operationType,f);return await r._updateCurrentUser(h.user),h;case"reauthenticate":return ve(n.user,r,"internal-error"),Ji._forOperation(n.user,n.operationType,f);default:nr(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function iY(t,e){var i;const n=Ne(t),r=e;return ve(e.customData.operationType,n,"argument-error"),ve((i=r.customData._serverResponse)==null?void 0:i.mfaPendingCredential,n,"argument-error"),iC._fromError(n,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(t,e){return _n(t,"POST","/v2/accounts/mfaEnrollment:start",vn(t,e))}function oY(t,e){return _n(t,"POST","/v2/accounts/mfaEnrollment:finalize",vn(t,e))}function sY(t,e){return _n(t,"POST","/v2/accounts/mfaEnrollment:withdraw",vn(t,e))}class oC{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>Fm._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new oC(e)}async getSession(){return Nu._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,i=await this.getSession(),o=await Zs(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(o),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await Zs(this.user,sY(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:o})=>o!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const Uw=new WeakMap;function aY(t){const e=Ne(t);return Uw.has(e)||Uw.set(e,oC._fromUser(e)),Uw.get(e)}const Kv="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Kv,"1"),this.storage.removeItem(Kv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lY=1e3,uY=10;class FF extends UF{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_F(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,l,c)=>{this.notifyListeners(s,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},o=this.storage.getItem(r);qK()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,uY):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},lY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}FF.type="LOCAL";const d0=FF;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF extends UF{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}BF.type="SESSION";const gl=BF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cY(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new h0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(s).map(async f=>f(n.origin,o)),c=await cY(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}h0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fY{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((l,c)=>{const f=Bm("",20);i.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(g){const v=g;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(v.data.response);break;default:clearTimeout(h),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(){return window}function dY(t){Dn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(){return typeof Dn().WorkerGlobalScope<"u"&&typeof Dn().importScripts=="function"}async function hY(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function pY(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function mY(){return sC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qF="firebaseLocalStorageDb",gY=1,Wv="firebaseLocalStorage",$F="fbase_key";class qm{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function p0(t,e){return t.transaction([Wv],e?"readwrite":"readonly").objectStore(Wv)}function yY(){const t=indexedDB.deleteDatabase(qF);return new qm(t).toPromise()}function zS(){const t=indexedDB.open(qF,gY);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Wv,{keyPath:$F})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Wv)?e(r):(r.close(),await yY(),e(await zS()))})})}async function lD(t,e,n){const r=p0(t,!0).put({[$F]:e,value:n});return new qm(r).toPromise()}async function vY(t,e){const n=p0(t,!1).get(e),r=await new qm(n).toPromise();return r===void 0?null:r.value}function uD(t,e){const n=p0(t,!0).delete(e);return new qm(n).toPromise()}const _Y=800,TY=3;class zF{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zS(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>TY)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=h0._getInstance(mY()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await hY(),!this.activeServiceWorker)return;this.sender=new fY(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||pY()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zS();return await lD(e,Kv,"1"),await uD(e,Kv),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>lD(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>vY(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>uD(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=p0(i,!1).getAll();return new qm(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_Y)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zF.type="LOCAL";const Gf=zF;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(t,e){return _n(t,"POST","/v2/accounts/mfaSignIn:start",vn(t,e))}function EY(t,e){return _n(t,"POST","/v2/accounts/mfaSignIn:finalize",vn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw=EF("rcb"),wY=new Om(3e4,6e4);class bY{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=Dn().grecaptcha)!=null&&e.render)}load(e,n=""){return ve(SY(n),e,"argument-error"),this.shouldResolveImmediately(n)&&XM(Dn().grecaptcha)?Promise.resolve(Dn().grecaptcha):new Promise((r,i)=>{const o=Dn().setTimeout(()=>{i($n(e,"network-request-failed"))},wY.get());Dn()[Fw]=()=>{Dn().clearTimeout(o),delete Dn()[Fw];const l=Dn().grecaptcha;if(!l||!XM(l)){i($n(e,"internal-error"));return}const c=l.render;l.render=(f,h)=>{const g=c(f,h);return this.counter++,g},this.hostLanguage=n,r(l)};const s=`${WK()}?${Sd({onload:Fw,render:"explicit",hl:n})}`;Zx(s).catch(()=>{clearTimeout(o),i($n(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!((n=Dn().grecaptcha)!=null&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function SY(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class AY{async load(e){return new ZK(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op="recaptcha",xY={theme:"light",type:"image"};let CY=class{constructor(e,n,r={...xY}){this.parameters=r,this.type=Op,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=fn(e),this.isInvisible=this.parameters.size==="invisible",ve(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;ve(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new AY:new bY,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const o=s=>{s&&(this.tokenChangeListeners.delete(o),i(s))};this.tokenChangeListeners.add(o),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){ve(!this.parameters.sitekey,this.auth,"argument-error"),ve(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ve(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=Dn()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){ve(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ve(Qx()&&!sC(),this.auth,"internal-error"),await IY(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await RK(this.auth);ve(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ve(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function IY(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Fu._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function RY(t,e,n){if(Qt(t.app))return Promise.reject(tr(t));const r=fn(t),i=await m0(r,e,Ne(n));return new aC(i,o=>c0(r,o))}async function PY(t,e,n){const r=Ne(t);await u0(!1,r,"phone");const i=await m0(r.auth,e,Ne(n));return new aC(i,o=>NF(r,o))}async function NY(t,e,n){const r=Ne(t);if(Qt(r.auth.app))return Promise.reject(tr(r.auth));const i=await m0(r.auth,e,Ne(n));return new aC(i,o=>MF(r,o))}async function m0(t,e,n){var r;if(!t._getRecaptchaConfig())try{await oW(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const o=i.session;if("phoneNumber"in i){ve(o.type==="enroll",t,"internal-error");const s={idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await ll(t,s,"mfaSmsEnrollment",async(h,g)=>{if(g.phoneEnrollmentInfo.captchaResponse===kp){ve((n==null?void 0:n.type)===Op,h,"argument-error");const v=await Bw(h,g,n);return aD(h,v)}return aD(h,g)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneSessionInfo.sessionInfo}else{ve(o.type==="signin",t,"internal-error");const s=((r=i.multiFactorHint)==null?void 0:r.uid)||i.multiFactorUid;ve(s,t,"missing-multi-factor-info");const l={mfaPendingCredential:o.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await ll(t,l,"mfaSmsSignIn",async(g,v)=>{if(v.phoneSignInInfo.captchaResponse===kp){ve((n==null?void 0:n.type)===Op,g,"argument-error");const E=await Bw(g,v,n);return cD(g,E)}return cD(g,v)},"PHONE_PROVIDER").catch(g=>Promise.reject(g))).phoneResponseInfo.sessionInfo}}else{const o={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await ll(t,o,"sendVerificationCode",async(f,h)=>{if(h.captchaResponse===kp){ve((n==null?void 0:n.type)===Op,f,"argument-error");const g=await Bw(f,h,n);return oD(f,g)}return oD(f,h)},"PHONE_PROVIDER").catch(f=>Promise.reject(f))).sessionInfo}}finally{n==null||n._reset()}}async function MY(t,e){const n=Ne(t);if(Qt(n.auth.app))return Promise.reject(tr(n.auth));await eC(n,e)}async function Bw(t,e,n){ve(n.type===Op,t,"argument-error");const r=await n.verify();ve(typeof r=="string",t,"argument-error");const i={...e};if("phoneEnrollmentInfo"in i){const o=i.phoneEnrollmentInfo.phoneNumber,s=i.phoneEnrollmentInfo.captchaResponse,l=i.phoneEnrollmentInfo.clientType,c=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r,captchaResponse:s,clientType:l,recaptchaVersion:c}}),i}else if("phoneSignInInfo"in i){const o=i.phoneSignInInfo.captchaResponse,s=i.phoneSignInInfo.clientType,l=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:o,clientType:s,recaptchaVersion:l}}),i}else return Object.assign(i,{recaptchaToken:r}),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ju=class Tv{constructor(e){this.providerId=Tv.PROVIDER_ID,this.auth=fn(e)}verifyPhoneNumber(e,n){return m0(this.auth,e,Ne(n))}static credential(e,n){return Fu._fromVerification(e,n)}static credentialFromResult(e){const n=e;return Tv.credentialFromTaggedObject(n)}static credentialFromError(e){return Tv.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Fu._fromTokenResponse(n,r):null}};ju.PROVIDER_ID="phone";ju.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(t,e){return e?vi(e):(ve(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC extends Cd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Gs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Gs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Gs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function DY(t){return PF(t.auth,new lC(t),t.bypassAuthState)}function kY(t){const{auth:e,user:n}=t;return ve(n,e,"internal-error"),RF(n,new lC(t),t.bypassAuthState)}async function OY(t){const{auth:e,user:n}=t;return ve(n,e,"internal-error"),eC(n,new lC(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HF{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:l}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return DY;case"linkViaPopup":case"linkViaRedirect":return OY;case"reauthViaPopup":case"reauthViaRedirect":return kY;default:nr(this.auth,"internal-error")}}resolve(e){yo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){yo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LY=new Om(2e3,1e4);async function VY(t,e,n){if(Qt(t.app))return Promise.reject($n(t,"operation-not-supported-in-this-environment"));const r=fn(t);xd(t,e,la);const i=cc(r,n);return new Bs(r,"signInViaPopup",e,i).executeNotNull()}async function UY(t,e,n){const r=Ne(t);if(Qt(r.auth.app))return Promise.reject($n(r.auth,"operation-not-supported-in-this-environment"));xd(r.auth,e,la);const i=cc(r.auth,n);return new Bs(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function FY(t,e,n){const r=Ne(t);xd(r.auth,e,la);const i=cc(r.auth,n);return new Bs(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Bs extends HF{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Bs.currentPopupAction&&Bs.currentPopupAction.cancel(),Bs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ve(e,this.auth,"internal-error"),e}async onExecution(){yo(this.filter.length===1,"Popup operations only handle one event");const e=Bm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject($n(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject($n(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($n(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,LY.get())};e()}}Bs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BY="pendingRedirect",Lp=new Map;class qY extends HF{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Lp.get(this.auth._key());if(!e){try{const r=await $Y(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Lp.set(this.auth._key(),e)}return this.bypassAuthState||Lp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $Y(t,e){const n=jF(e),r=GF(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function uC(t,e){return GF(t)._set(jF(e),"true")}function zY(){Lp.clear()}function cC(t,e){Lp.set(t._key(),e)}function GF(t){return vi(t._redirectPersistence)}function jF(t){return Uu(BY,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HY(t,e,n){return GY(t,e,n)}async function GY(t,e,n){if(Qt(t.app))return Promise.reject(tr(t));const r=fn(t);xd(t,e,la),await r._initializationPromise;const i=cc(r,n);return await uC(i,r),i._openRedirect(r,e,"signInViaRedirect")}function jY(t,e,n){return KY(t,e,n)}async function KY(t,e,n){const r=Ne(t);if(xd(r.auth,e,la),Qt(r.auth.app))return Promise.reject(tr(r.auth));await r.auth._initializationPromise;const i=cc(r.auth,n);await uC(i,r.auth);const o=await KF(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",o)}function WY(t,e,n){return YY(t,e,n)}async function YY(t,e,n){const r=Ne(t);xd(r.auth,e,la),await r.auth._initializationPromise;const i=cc(r.auth,n);await u0(!1,r,e.providerId),await uC(i,r.auth);const o=await KF(r);return i._openRedirect(r.auth,e,"linkViaRedirect",o)}async function JY(t,e){return await fn(t)._initializationPromise,g0(t,e,!1)}async function g0(t,e,n=!1){if(Qt(t.app))return Promise.reject(tr(t));const r=fn(t),i=cc(r,e),s=await new qY(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}async function KF(t){const e=Bm(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QY=600*1e3;class WF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!XY(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!YF(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError($n(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=QY&&this.cachedEventUids.clear(),this.cachedEventUids.has(fD(e))}saveEventToCache(e){this.cachedEventUids.add(fD(e)),this.lastProcessedEventTime=Date.now()}}function fD(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function YF({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function XY(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return YF(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JF(t,e={}){return _n(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZY=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,eJ=/^https?/;async function tJ(t){if(t.config.emulator)return;const{authorizedDomains:e}=await JF(t);for(const n of e)try{if(nJ(n))return}catch{}nr(t,"unauthorized-domain")}function nJ(t){const e=tm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!eJ.test(n))return!1;if(ZY.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rJ=new Om(3e4,6e4);function dD(){const t=Dn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function iJ(t){return new Promise((e,n)=>{var i,o,s;function r(){dD(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{dD(),n($n(t,"network-request-failed"))},timeout:rJ.get()})}if((o=(i=Dn().gapi)==null?void 0:i.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((s=Dn().gapi)!=null&&s.load)r();else{const l=EF("iframefcb");return Dn()[l]=()=>{gapi.load?r():n($n(t,"network-request-failed"))},Zx(`${JK()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Ev=null,e})}let Ev=null;function oJ(t){return Ev=Ev||iJ(t),Ev}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sJ=new Om(5e3,15e3),aJ="__/auth/iframe",lJ="emulator/auth/iframe",uJ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cJ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fJ(t){const e=t.config;ve(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Xx(e,lJ):`https://${t.config.authDomain}/${aJ}`,r={apiKey:e.apiKey,appName:t.name,v:sa},i=cJ.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Sd(r).slice(1)}`}async function dJ(t){const e=await oJ(t),n=Dn().gapi;return ve(n,t,"internal-error"),e.open({where:document.body,url:fJ(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uJ,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const s=$n(t,"network-request-failed"),l=Dn().setTimeout(()=>{o(s)},sJ.get());function c(){Dn().clearTimeout(l),i(r)}r.ping(c).then(c,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hJ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},pJ=500,mJ=600,gJ="_blank",yJ="http://localhost";class hD{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function vJ(t,e,n,r=pJ,i=mJ){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...hJ,width:r.toString(),height:i.toString(),top:o,left:s},f=cn().toLowerCase();n&&(l=mF(f)?gJ:n),hF(f)&&(e=e||yJ,c.scrollbars="yes");const h=Object.entries(c).reduce((v,[E,b])=>`${v}${E}=${b},`,"");if(BK(f)&&l!=="_self")return _J(e||"",l),new hD(null);const g=window.open(e||"",l,h);ve(g,t,"popup-blocked");try{g.focus()}catch{}return new hD(g)}function _J(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TJ="__/auth/handler",EJ="emulator/auth/handler",wJ=encodeURIComponent("fac");async function HS(t,e,n,r,i,o){ve(t.config.authDomain,t,"auth-domain-config-required"),ve(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:sa,eventId:i};if(e instanceof la){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",W7(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,g]of Object.entries(o||{}))s[h]=g}if(e instanceof Id){const h=e.getScopes().filter(g=>g!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);const l=s;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),f=c?`#${wJ}=${encodeURIComponent(c)}`:"";return`${bJ(t)}?${Sd(l).slice(1)}${f}`}function bJ({config:t}){return t.emulator?Xx(t,EJ):`https://${t.authDomain}/${TJ}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw="webStorageSupport";class SJ{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gl,this._completeRedirectFn=g0,this._overrideRedirectResult=cC}async _openPopup(e,n,r,i){var s;yo((s=this.eventManagers[e._key()])==null?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await HS(e,n,r,tm(),i);return vJ(e,o,Bm())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await HS(e,n,r,tm(),i);return dY(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(yo(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await dJ(e),r=new WF(e);return n.register("authEvent",i=>(ve(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(qw,{type:qw},i=>{var s;const o=(s=i==null?void 0:i[0])==null?void 0:s[qw];o!==void 0&&n(!!o),nr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=tJ(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return _F()||pF()||Vm()}}const QF=SJ;class AJ{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return Qo("unexpected MultiFactorSessionType")}}}class fC extends AJ{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new fC(e)}_finalizeEnroll(e,n,r){return oY(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return EY(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class XF{constructor(){}static assertion(e){return fC._fromCredential(e)}}XF.FACTOR_ID="phone";var pD="@firebase/auth",mD="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xJ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CJ(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function IJ(t){Xs(new Yi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:l}=r.options;ve(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:TF(t)},f=new jK(r,i,o,c);return aW(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Xs(new Yi("auth-internal",e=>{const n=fn(e.getProvider("auth").getImmediate());return(r=>new xJ(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),wi(pD,mD,CJ(t)),wi(pD,mD,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RJ=300,PJ=U4("authIdTokenMaxAge")||RJ;let gD=null;const NJ=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>PJ)return;const i=n==null?void 0:n.token;gD!==i&&(gD=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function MJ(t=o0()){const e=Ad(t,"auth");if(e.isInitialized())return e.getImmediate();const n=sW(t,{popupRedirectResolver:QF,persistence:[Gf,d0,gl]}),r=U4("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=NJ(o.toString());tY(n,s,()=>s(n.currentUser)),eY(n,l=>s(l))}}const i=L4("auth");return i&&bF(n,`http://${i}`),n}function DJ(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}KK({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=$n("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",DJ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});IJ("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ku(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kJ=2e3;async function OJ(t,e,n){const{BuildInfo:r}=Ku();yo(e.sessionId,"AuthEvent did not contain a session ID");const i=await BJ(e.sessionId),o={};return Vm()?o.ibi=r.packageName:Lm()?o.apn=r.packageName:nr(t,"operation-not-supported-in-this-environment"),r.displayName&&(o.appDisplayName=r.displayName),o.sessionId=i,HS(t,n,e.type,void 0,e.eventId??void 0,o)}async function LJ(t){const{BuildInfo:e}=Ku(),n={};Vm()?n.iosBundleId=e.packageName:Lm()?n.androidPackageName=e.packageName:nr(t,"operation-not-supported-in-this-environment"),await JF(t,n)}function VJ(t){const{cordova:e}=Ku();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,FK()?"_blank":"_system","location=yes"),n(i)})})}async function UJ(t,e,n){const{cordova:r}=Ku();let i=()=>{};try{await new Promise((o,s)=>{let l=null;function c(){var v;o();const g=(v=r.plugins.browsertab)==null?void 0:v.close;typeof g=="function"&&g(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function f(){l||(l=window.setTimeout(()=>{s($n(t,"redirect-cancelled-by-user"))},kJ))}function h(){(document==null?void 0:document.visibilityState)==="visible"&&f()}e.addPassiveListener(c),document.addEventListener("resume",f,!1),Lm()&&document.addEventListener("visibilitychange",h,!1),i=()=>{e.removePassiveListener(c),document.removeEventListener("resume",f,!1),document.removeEventListener("visibilitychange",h,!1),l&&window.clearTimeout(l)}})}finally{i()}}function FJ(t){var n,r,i,o,s,l,c,f,h,g;const e=Ku();ve(typeof((n=e==null?void 0:e.universalLinks)==null?void 0:n.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ve(typeof((r=e==null?void 0:e.BuildInfo)==null?void 0:r.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ve(typeof((s=(o=(i=e==null?void 0:e.cordova)==null?void 0:i.plugins)==null?void 0:o.browsertab)==null?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ve(typeof((f=(c=(l=e==null?void 0:e.cordova)==null?void 0:l.plugins)==null?void 0:c.browsertab)==null?void 0:f.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ve(typeof((g=(h=e==null?void 0:e.cordova)==null?void 0:h.InAppBrowser)==null?void 0:g.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function BJ(t){const e=qJ(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function qJ(t){if(yo(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $J=20;class zJ extends WF{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function HJ(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:KJ(),postBody:null,tenantId:t.tenantId,error:$n(t,"no-auth-event")}}function GJ(t,e){return GS()._set(jS(t),e)}async function yD(t){const e=await GS()._get(jS(t));return e&&await GS()._remove(jS(t)),e}function jJ(t,e){var r,i;const n=YJ(e);if(n.includes("/__/auth/callback")){const o=wv(n),s=o.firebaseError?WJ(decodeURIComponent(o.firebaseError)):null,l=(i=(r=s==null?void 0:s.code)==null?void 0:r.split("auth/"))==null?void 0:i[1],c=l?$n(l):null;return c?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:c,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:n,postBody:null}}return null}function KJ(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<$J;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function GS(){return vi(d0)}function jS(t){return Uu("authEvent",t.config.apiKey,t.name)}function WJ(t){try{return JSON.parse(t)}catch{return null}}function YJ(t){const e=wv(t),n=e.link?decodeURIComponent(e.link):void 0,r=wv(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return wv(i).link||i||r||n||t}function wv(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return Af(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JJ=500;class QJ{constructor(){this._redirectPersistence=gl,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=g0,this._overrideRedirectResult=cC}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new zJ(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){nr(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){FJ(e);const o=await this._initialize(e);await o.initialized(),o.resetRedirect(),zY(),await this._originValidation(e);const s=HJ(e,r,i);await GJ(e,s);const l=await OJ(e,s,n),c=await VJ(l);return UJ(e,o,c)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=LJ(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:o}=Ku(),s=setTimeout(async()=>{await yD(e),n.onEvent(vD())},JJ),l=async h=>{clearTimeout(s);const g=await yD(e);let v=null;g&&(h!=null&&h.url)&&(v=jJ(g,h.url)),n.onEvent(v||vD())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,l);const c=i,f=`${o.packageName.toLowerCase()}://`;Ku().handleOpenURL=async h=>{if(h.toLowerCase().startsWith(f)&&l({url:h}),typeof c=="function")try{c(h)}catch(g){console.error(g)}}}}const XJ=QJ;function vD(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:$n("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZJ(t,e){fn(t)._logFramework(e)}var eQ="@firebase/auth-compat",tQ="0.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nQ=1e3;function Vp(){var t;return((t=self==null?void 0:self.location)==null?void 0:t.protocol)||null}function rQ(){return Vp()==="http:"||Vp()==="https:"}function ZF(t=cn()){return!!((Vp()==="file:"||Vp()==="ionic:"||Vp()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function iQ(){return zx()||r0()}function oQ(){return $4()&&(document==null?void 0:document.documentMode)===11}function sQ(t=cn()){return/Edge\/\d+/.test(t)}function aQ(t=cn()){return oQ()||sQ(t)}function eB(){try{const t=self.localStorage,e=Bm();if(t)return t.setItem(e,"1"),t.removeItem(e),aQ()?Xp():!0}catch{return dC()&&Xp()}return!1}function dC(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function $w(){return(rQ()||q4()||ZF())&&!iQ()&&eB()&&!dC()}function tB(){return ZF()&&typeof document<"u"}async function lQ(){return tB()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},nQ);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function uQ(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi={LOCAL:"local",NONE:"none",SESSION:"session"},ip=ve,nB="persistence";function cQ(t,e){if(ip(Object.values(gi).includes(e),t,"invalid-persistence-type"),zx()){ip(e!==gi.SESSION,t,"unsupported-persistence-type");return}if(r0()){ip(e===gi.NONE,t,"unsupported-persistence-type");return}if(dC()){ip(e===gi.NONE||e===gi.LOCAL&&Xp(),t,"unsupported-persistence-type");return}ip(e===gi.NONE||eB(),t,"unsupported-persistence-type")}async function KS(t){await t._initializationPromise;const e=rB(),n=Uu(nB,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistenceType())}function fQ(t,e){const n=rB();if(!n)return[];const r=Uu(nB,t,e);switch(n.getItem(r)){case gi.NONE:return[zf];case gi.LOCAL:return[Gf,gl];case gi.SESSION:return[gl];default:return[]}}function rB(){var t;try{return((t=uQ())==null?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dQ=ve;class il{constructor(){this.browserResolver=vi(QF),this.cordovaResolver=vi(XJ),this.underlyingResolver=null,this._redirectPersistence=gl,this._completeRedirectFn=g0,this._overrideRedirectResult=cC}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return tB()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return dQ(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await lQ();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iB(t){return t.unwrap()}function hQ(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pQ(t){return oB(t)}function mQ(t,e){var r;const n=(r=e.customData)==null?void 0:r._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new gQ(t,iY(t,e))}else if(n){const i=oB(e),o=e;i&&(o.credential=i,o.tenantId=n.tenantId||void 0,o.email=n.email||void 0,o.phoneNumber=n.phoneNumber||void 0)}}function oB(t){const{_tokenResponse:e}=t instanceof Ir?t.customData:t;if(!e)return null;if(!(t instanceof Ir)&&"temporaryProof"in e&&"phoneNumber"in e)return ju.credentialFromResult(t);const n=e.providerId;if(!n||n===np.PASSWORD)return null;let r;switch(n){case np.GOOGLE:r=jo;break;case np.FACEBOOK:r=Go;break;case np.GITHUB:r=Ko;break;case np.TWITTER:r=Wo;break;default:const{oauthIdToken:i,oauthAccessToken:o,oauthTokenSecret:s,pendingToken:l,nonce:c}=e;return!o&&!s&&!i&&!l?null:l?n.startsWith("saml.")?Hf._create(n,l):ss._fromParams({providerId:n,signInMethod:n,pendingToken:l,idToken:i,accessToken:o}):new Nf(n).credential({idToken:i,accessToken:o,rawNonce:c})}return t instanceof Ir?r.credentialFromError(t):r.credentialFromResult(t)}function Xr(t,e){return e.catch(n=>{throw n instanceof Ir&&mQ(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:pQ(n),additionalUserInfo:ZW(n),user:y0.getOrCreate(i)}})}async function WS(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>Xr(t,n.confirm(r))}}class gQ{constructor(e,n){this.resolver=n,this.auth=hQ(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Xr(iB(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let y0=class Sp{constructor(e){this._delegate=e,this.multiFactor=aY(e)}static getOrCreate(e){return Sp.USER_MAP.has(e)||Sp.USER_MAP.set(e,new Sp(e)),Sp.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Xr(this.auth,NF(this._delegate,e))}async linkWithPhoneNumber(e,n){return WS(this.auth,PY(this._delegate,e,n))}async linkWithPopup(e){return Xr(this.auth,FY(this._delegate,e,il))}async linkWithRedirect(e){return await KS(fn(this.auth)),WY(this._delegate,e,il)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Xr(this.auth,MF(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return WS(this.auth,NY(this._delegate,e,n))}reauthenticateWithPopup(e){return Xr(this.auth,UY(this._delegate,e,il))}async reauthenticateWithRedirect(e){return await KS(fn(this.auth)),jY(this._delegate,e,il)}sendEmailVerification(e){return zW(this._delegate,e)}async unlink(e){return await PW(this._delegate,e),this}updateEmail(e){return KW(this._delegate,e)}updatePassword(e){return OF(this._delegate,e)}updatePhoneNumber(e){return MY(this._delegate,e)}updateProfile(e){return jW(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return HW(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};y0.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op=ve;class YS{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;op(r,"invalid-api-key",{appName:e.name}),op(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?il:void 0;this._delegate=n.initialize({options:{persistence:yQ(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(_K),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?y0.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){bF(this._delegate,e,n)}applyActionCode(e){return OW(this._delegate,e)}checkActionCode(e){return DF(this._delegate,e)}confirmPasswordReset(e,n){return kW(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return Xr(this._delegate,VW(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return $W(this._delegate,e)}isSignInWithEmailLink(e){return FW(this._delegate,e)}async getRedirectResult(){op($w(),this._delegate,"operation-not-supported-in-this-environment");const e=await JY(this._delegate,il);return e?Xr(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){ZJ(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:o,complete:s}=_D(e,n,r);return this._delegate.onAuthStateChanged(i,o,s)}onIdTokenChanged(e,n,r){const{next:i,error:o,complete:s}=_D(e,n,r);return this._delegate.onIdTokenChanged(i,o,s)}sendSignInLinkToEmail(e,n){return UW(this._delegate,e,n)}sendPasswordResetEmail(e,n){return DW(this._delegate,e,n||void 0)}async setPersistence(e){cQ(this._delegate,e);let n;switch(e){case gi.SESSION:n=gl;break;case gi.LOCAL:n=await vi(Gf)._isAvailable()?Gf:d0;break;case gi.NONE:n=zf;break;default:return nr("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Xr(this._delegate,RW(this._delegate))}signInWithCredential(e){return Xr(this._delegate,c0(this._delegate,e))}signInWithCustomToken(e){return Xr(this._delegate,MW(this._delegate,e))}signInWithEmailAndPassword(e,n){return Xr(this._delegate,kF(this._delegate,e,n))}signInWithEmailLink(e,n){return Xr(this._delegate,BW(this._delegate,e,n))}signInWithPhoneNumber(e,n){return WS(this._delegate,RY(this._delegate,e,n))}async signInWithPopup(e){return op($w(),this._delegate,"operation-not-supported-in-this-environment"),Xr(this._delegate,VY(this._delegate,e,il))}async signInWithRedirect(e){return op($w(),this._delegate,"operation-not-supported-in-this-environment"),await KS(this._delegate),HY(this._delegate,e,il)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return LW(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}YS.Persistence=gi;function _D(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:s=>i(s&&y0.getOrCreate(s)),error:e,complete:n}}function yQ(t,e){const n=fQ(t,e);if(typeof self<"u"&&!n.includes(Gf)&&n.push(Gf),typeof window<"u")for(const r of[d0,gl])n.includes(r)||n.push(r);return n.includes(zf)||n.push(zf),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{static credential(e,n){return ju.credential(e,n)}constructor(){this.providerId="phone",this._delegate=new ju(iB(Il.auth()))}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}hC.PHONE_SIGN_IN_METHOD=ju.PHONE_SIGN_IN_METHOD;hC.PROVIDER_ID=ju.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vQ=ve;class _Q{constructor(e,n,r=Il.app()){var i;vQ((i=r.options)==null?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new CY(r.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TQ="auth-compat";function EQ(t){t.INTERNAL.registerComponent(new Yi(TQ,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new YS(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ff.EMAIL_SIGNIN,PASSWORD_RESET:ff.PASSWORD_RESET,RECOVER_EMAIL:ff.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:ff.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:ff.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:ff.VERIFY_EMAIL}},EmailAuthProvider:Rl,FacebookAuthProvider:Go,GithubAuthProvider:Ko,GoogleAuthProvider:jo,OAuthProvider:Nf,SAMLAuthProvider:Gv,PhoneAuthProvider:hC,PhoneMultiFactorGenerator:XF,RecaptchaVerifier:_Q,TwitterAuthProvider:Wo,Auth:YS,AuthCredential:Cd,Error:Ir}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(eQ,tQ)}EQ(Il);var TD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ul,sB;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,O){function L(){}L.prototype=O.prototype,M.D=O.prototype,M.prototype=new L,M.prototype.constructor=M,M.C=function(F,V,G){for(var z=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)z[Se-2]=arguments[Se];return O.prototype[V].apply(F,z)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(M,O,L){L||(L=0);var F=Array(16);if(typeof O=="string")for(var V=0;16>V;++V)F[V]=O.charCodeAt(L++)|O.charCodeAt(L++)<<8|O.charCodeAt(L++)<<16|O.charCodeAt(L++)<<24;else for(V=0;16>V;++V)F[V]=O[L++]|O[L++]<<8|O[L++]<<16|O[L++]<<24;O=M.g[0],L=M.g[1],V=M.g[2];var G=M.g[3],z=O+(G^L&(V^G))+F[0]+3614090360&4294967295;O=L+(z<<7&4294967295|z>>>25),z=G+(V^O&(L^V))+F[1]+3905402710&4294967295,G=O+(z<<12&4294967295|z>>>20),z=V+(L^G&(O^L))+F[2]+606105819&4294967295,V=G+(z<<17&4294967295|z>>>15),z=L+(O^V&(G^O))+F[3]+3250441966&4294967295,L=V+(z<<22&4294967295|z>>>10),z=O+(G^L&(V^G))+F[4]+4118548399&4294967295,O=L+(z<<7&4294967295|z>>>25),z=G+(V^O&(L^V))+F[5]+1200080426&4294967295,G=O+(z<<12&4294967295|z>>>20),z=V+(L^G&(O^L))+F[6]+2821735955&4294967295,V=G+(z<<17&4294967295|z>>>15),z=L+(O^V&(G^O))+F[7]+4249261313&4294967295,L=V+(z<<22&4294967295|z>>>10),z=O+(G^L&(V^G))+F[8]+1770035416&4294967295,O=L+(z<<7&4294967295|z>>>25),z=G+(V^O&(L^V))+F[9]+2336552879&4294967295,G=O+(z<<12&4294967295|z>>>20),z=V+(L^G&(O^L))+F[10]+4294925233&4294967295,V=G+(z<<17&4294967295|z>>>15),z=L+(O^V&(G^O))+F[11]+2304563134&4294967295,L=V+(z<<22&4294967295|z>>>10),z=O+(G^L&(V^G))+F[12]+1804603682&4294967295,O=L+(z<<7&4294967295|z>>>25),z=G+(V^O&(L^V))+F[13]+4254626195&4294967295,G=O+(z<<12&4294967295|z>>>20),z=V+(L^G&(O^L))+F[14]+2792965006&4294967295,V=G+(z<<17&4294967295|z>>>15),z=L+(O^V&(G^O))+F[15]+1236535329&4294967295,L=V+(z<<22&4294967295|z>>>10),z=O+(V^G&(L^V))+F[1]+4129170786&4294967295,O=L+(z<<5&4294967295|z>>>27),z=G+(L^V&(O^L))+F[6]+3225465664&4294967295,G=O+(z<<9&4294967295|z>>>23),z=V+(O^L&(G^O))+F[11]+643717713&4294967295,V=G+(z<<14&4294967295|z>>>18),z=L+(G^O&(V^G))+F[0]+3921069994&4294967295,L=V+(z<<20&4294967295|z>>>12),z=O+(V^G&(L^V))+F[5]+3593408605&4294967295,O=L+(z<<5&4294967295|z>>>27),z=G+(L^V&(O^L))+F[10]+38016083&4294967295,G=O+(z<<9&4294967295|z>>>23),z=V+(O^L&(G^O))+F[15]+3634488961&4294967295,V=G+(z<<14&4294967295|z>>>18),z=L+(G^O&(V^G))+F[4]+3889429448&4294967295,L=V+(z<<20&4294967295|z>>>12),z=O+(V^G&(L^V))+F[9]+568446438&4294967295,O=L+(z<<5&4294967295|z>>>27),z=G+(L^V&(O^L))+F[14]+3275163606&4294967295,G=O+(z<<9&4294967295|z>>>23),z=V+(O^L&(G^O))+F[3]+4107603335&4294967295,V=G+(z<<14&4294967295|z>>>18),z=L+(G^O&(V^G))+F[8]+1163531501&4294967295,L=V+(z<<20&4294967295|z>>>12),z=O+(V^G&(L^V))+F[13]+2850285829&4294967295,O=L+(z<<5&4294967295|z>>>27),z=G+(L^V&(O^L))+F[2]+4243563512&4294967295,G=O+(z<<9&4294967295|z>>>23),z=V+(O^L&(G^O))+F[7]+1735328473&4294967295,V=G+(z<<14&4294967295|z>>>18),z=L+(G^O&(V^G))+F[12]+2368359562&4294967295,L=V+(z<<20&4294967295|z>>>12),z=O+(L^V^G)+F[5]+4294588738&4294967295,O=L+(z<<4&4294967295|z>>>28),z=G+(O^L^V)+F[8]+2272392833&4294967295,G=O+(z<<11&4294967295|z>>>21),z=V+(G^O^L)+F[11]+1839030562&4294967295,V=G+(z<<16&4294967295|z>>>16),z=L+(V^G^O)+F[14]+4259657740&4294967295,L=V+(z<<23&4294967295|z>>>9),z=O+(L^V^G)+F[1]+2763975236&4294967295,O=L+(z<<4&4294967295|z>>>28),z=G+(O^L^V)+F[4]+1272893353&4294967295,G=O+(z<<11&4294967295|z>>>21),z=V+(G^O^L)+F[7]+4139469664&4294967295,V=G+(z<<16&4294967295|z>>>16),z=L+(V^G^O)+F[10]+3200236656&4294967295,L=V+(z<<23&4294967295|z>>>9),z=O+(L^V^G)+F[13]+681279174&4294967295,O=L+(z<<4&4294967295|z>>>28),z=G+(O^L^V)+F[0]+3936430074&4294967295,G=O+(z<<11&4294967295|z>>>21),z=V+(G^O^L)+F[3]+3572445317&4294967295,V=G+(z<<16&4294967295|z>>>16),z=L+(V^G^O)+F[6]+76029189&4294967295,L=V+(z<<23&4294967295|z>>>9),z=O+(L^V^G)+F[9]+3654602809&4294967295,O=L+(z<<4&4294967295|z>>>28),z=G+(O^L^V)+F[12]+3873151461&4294967295,G=O+(z<<11&4294967295|z>>>21),z=V+(G^O^L)+F[15]+530742520&4294967295,V=G+(z<<16&4294967295|z>>>16),z=L+(V^G^O)+F[2]+3299628645&4294967295,L=V+(z<<23&4294967295|z>>>9),z=O+(V^(L|~G))+F[0]+4096336452&4294967295,O=L+(z<<6&4294967295|z>>>26),z=G+(L^(O|~V))+F[7]+1126891415&4294967295,G=O+(z<<10&4294967295|z>>>22),z=V+(O^(G|~L))+F[14]+2878612391&4294967295,V=G+(z<<15&4294967295|z>>>17),z=L+(G^(V|~O))+F[5]+4237533241&4294967295,L=V+(z<<21&4294967295|z>>>11),z=O+(V^(L|~G))+F[12]+1700485571&4294967295,O=L+(z<<6&4294967295|z>>>26),z=G+(L^(O|~V))+F[3]+2399980690&4294967295,G=O+(z<<10&4294967295|z>>>22),z=V+(O^(G|~L))+F[10]+4293915773&4294967295,V=G+(z<<15&4294967295|z>>>17),z=L+(G^(V|~O))+F[1]+2240044497&4294967295,L=V+(z<<21&4294967295|z>>>11),z=O+(V^(L|~G))+F[8]+1873313359&4294967295,O=L+(z<<6&4294967295|z>>>26),z=G+(L^(O|~V))+F[15]+4264355552&4294967295,G=O+(z<<10&4294967295|z>>>22),z=V+(O^(G|~L))+F[6]+2734768916&4294967295,V=G+(z<<15&4294967295|z>>>17),z=L+(G^(V|~O))+F[13]+1309151649&4294967295,L=V+(z<<21&4294967295|z>>>11),z=O+(V^(L|~G))+F[4]+4149444226&4294967295,O=L+(z<<6&4294967295|z>>>26),z=G+(L^(O|~V))+F[11]+3174756917&4294967295,G=O+(z<<10&4294967295|z>>>22),z=V+(O^(G|~L))+F[2]+718787259&4294967295,V=G+(z<<15&4294967295|z>>>17),z=L+(G^(V|~O))+F[9]+3951481745&4294967295,M.g[0]=M.g[0]+O&4294967295,M.g[1]=M.g[1]+(V+(z<<21&4294967295|z>>>11))&4294967295,M.g[2]=M.g[2]+V&4294967295,M.g[3]=M.g[3]+G&4294967295}r.prototype.u=function(M,O){O===void 0&&(O=M.length);for(var L=O-this.blockSize,F=this.B,V=this.h,G=0;G<O;){if(V==0)for(;G<=L;)i(this,M,G),G+=this.blockSize;if(typeof M=="string"){for(;G<O;)if(F[V++]=M.charCodeAt(G++),V==this.blockSize){i(this,F),V=0;break}}else for(;G<O;)if(F[V++]=M[G++],V==this.blockSize){i(this,F),V=0;break}}this.h=V,this.o+=O},r.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var O=1;O<M.length-8;++O)M[O]=0;var L=8*this.o;for(O=M.length-8;O<M.length;++O)M[O]=L&255,L/=256;for(this.u(M),M=Array(16),O=L=0;4>O;++O)for(var F=0;32>F;F+=8)M[L++]=this.g[O]>>>F&255;return M};function o(M,O){var L=l;return Object.prototype.hasOwnProperty.call(L,M)?L[M]:L[M]=O(M)}function s(M,O){this.h=O;for(var L=[],F=!0,V=M.length-1;0<=V;V--){var G=M[V]|0;F&&G==O||(L[V]=G,F=!1)}this.g=L}var l={};function c(M){return-128<=M&&128>M?o(M,function(O){return new s([O|0],0>O?-1:0)}):new s([M|0],0>M?-1:0)}function f(M){if(isNaN(M)||!isFinite(M))return g;if(0>M)return A(f(-M));for(var O=[],L=1,F=0;M>=L;F++)O[F]=M/L|0,L*=4294967296;return new s(O,0)}function h(M,O){if(M.length==0)throw Error("number format error: empty string");if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(M.charAt(0)=="-")return A(h(M.substring(1),O));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var L=f(Math.pow(O,8)),F=g,V=0;V<M.length;V+=8){var G=Math.min(8,M.length-V),z=parseInt(M.substring(V,V+G),O);8>G?(G=f(Math.pow(O,G)),F=F.j(G).add(f(z))):(F=F.j(L),F=F.add(f(z)))}return F}var g=c(0),v=c(1),E=c(16777216);t=s.prototype,t.m=function(){if(S(this))return-A(this).m();for(var M=0,O=1,L=0;L<this.g.length;L++){var F=this.i(L);M+=(0<=F?F:4294967296+F)*O,O*=4294967296}return M},t.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(b(this))return"0";if(S(this))return"-"+A(this).toString(M);for(var O=f(Math.pow(M,6)),L=this,F="";;){var V=q(L,O).g;L=C(L,V.j(O));var G=((0<L.g.length?L.g[0]:L.h)>>>0).toString(M);if(L=V,b(L))return G+F;for(;6>G.length;)G="0"+G;F=G+F}},t.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function b(M){if(M.h!=0)return!1;for(var O=0;O<M.g.length;O++)if(M.g[O]!=0)return!1;return!0}function S(M){return M.h==-1}t.l=function(M){return M=C(this,M),S(M)?-1:b(M)?0:1};function A(M){for(var O=M.g.length,L=[],F=0;F<O;F++)L[F]=~M.g[F];return new s(L,~M.h).add(v)}t.abs=function(){return S(this)?A(this):this},t.add=function(M){for(var O=Math.max(this.g.length,M.g.length),L=[],F=0,V=0;V<=O;V++){var G=F+(this.i(V)&65535)+(M.i(V)&65535),z=(G>>>16)+(this.i(V)>>>16)+(M.i(V)>>>16);F=z>>>16,G&=65535,z&=65535,L[V]=z<<16|G}return new s(L,L[L.length-1]&-2147483648?-1:0)};function C(M,O){return M.add(A(O))}t.j=function(M){if(b(this)||b(M))return g;if(S(this))return S(M)?A(this).j(A(M)):A(A(this).j(M));if(S(M))return A(this.j(A(M)));if(0>this.l(E)&&0>M.l(E))return f(this.m()*M.m());for(var O=this.g.length+M.g.length,L=[],F=0;F<2*O;F++)L[F]=0;for(F=0;F<this.g.length;F++)for(var V=0;V<M.g.length;V++){var G=this.i(F)>>>16,z=this.i(F)&65535,Se=M.i(V)>>>16,Re=M.i(V)&65535;L[2*F+2*V]+=z*Re,D(L,2*F+2*V),L[2*F+2*V+1]+=G*Re,D(L,2*F+2*V+1),L[2*F+2*V+1]+=z*Se,D(L,2*F+2*V+1),L[2*F+2*V+2]+=G*Se,D(L,2*F+2*V+2)}for(F=0;F<O;F++)L[F]=L[2*F+1]<<16|L[2*F];for(F=O;F<2*O;F++)L[F]=0;return new s(L,0)};function D(M,O){for(;(M[O]&65535)!=M[O];)M[O+1]+=M[O]>>>16,M[O]&=65535,O++}function k(M,O){this.g=M,this.h=O}function q(M,O){if(b(O))throw Error("division by zero");if(b(M))return new k(g,g);if(S(M))return O=q(A(M),O),new k(A(O.g),A(O.h));if(S(O))return O=q(M,A(O)),new k(A(O.g),O.h);if(30<M.g.length){if(S(M)||S(O))throw Error("slowDivide_ only works with positive integers.");for(var L=v,F=O;0>=F.l(M);)L=$(L),F=$(F);var V=H(L,1),G=H(F,1);for(F=H(F,2),L=H(L,2);!b(F);){var z=G.add(F);0>=z.l(M)&&(V=V.add(L),G=z),F=H(F,1),L=H(L,1)}return O=C(M,V.j(O)),new k(V,O)}for(V=g;0<=M.l(O);){for(L=Math.max(1,Math.floor(M.m()/O.m())),F=Math.ceil(Math.log(L)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),G=f(L),z=G.j(O);S(z)||0<z.l(M);)L-=F,G=f(L),z=G.j(O);b(G)&&(G=v),V=V.add(G),M=C(M,z)}return new k(V,M)}t.A=function(M){return q(this,M).h},t.and=function(M){for(var O=Math.max(this.g.length,M.g.length),L=[],F=0;F<O;F++)L[F]=this.i(F)&M.i(F);return new s(L,this.h&M.h)},t.or=function(M){for(var O=Math.max(this.g.length,M.g.length),L=[],F=0;F<O;F++)L[F]=this.i(F)|M.i(F);return new s(L,this.h|M.h)},t.xor=function(M){for(var O=Math.max(this.g.length,M.g.length),L=[],F=0;F<O;F++)L[F]=this.i(F)^M.i(F);return new s(L,this.h^M.h)};function $(M){for(var O=M.g.length+1,L=[],F=0;F<O;F++)L[F]=M.i(F)<<1|M.i(F-1)>>>31;return new s(L,M.h)}function H(M,O){var L=O>>5;O%=32;for(var F=M.g.length-L,V=[],G=0;G<F;G++)V[G]=0<O?M.i(G+L)>>>O|M.i(G+L+1)<<32-O:M.i(G+L);return new s(V,M.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,sB=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=f,s.fromString=h,ul=s}).apply(typeof TD<"u"?TD:typeof self<"u"?self:typeof window<"u"?window:{});var zy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var aB,Ap,lB,bv,JS,uB,cB,fB;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(_,x,R){return _==Array.prototype||_==Object.prototype||(_[x]=R.value),_};function n(_){_=[typeof globalThis=="object"&&globalThis,_,typeof window=="object"&&window,typeof self=="object"&&self,typeof zy=="object"&&zy];for(var x=0;x<_.length;++x){var R=_[x];if(R&&R.Math==Math)return R}throw Error("Cannot find global object")}var r=n(this);function i(_,x){if(x)e:{var R=r;_=_.split(".");for(var B=0;B<_.length-1;B++){var J=_[B];if(!(J in R))break e;R=R[J]}_=_[_.length-1],B=R[_],x=x(B),x!=B&&x!=null&&e(R,_,{configurable:!0,writable:!0,value:x})}}function o(_,x){_ instanceof String&&(_+="");var R=0,B=!1,J={next:function(){if(!B&&R<_.length){var oe=R++;return{value:x(oe,_[oe]),done:!1}}return B=!0,{done:!0,value:void 0}}};return J[Symbol.iterator]=function(){return J},J}i("Array.prototype.values",function(_){return _||function(){return o(this,function(x,R){return R})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},l=this||self;function c(_){var x=typeof _;return x=x!="object"?x:_?Array.isArray(_)?"array":x:"null",x=="array"||x=="object"&&typeof _.length=="number"}function f(_){var x=typeof _;return x=="object"&&_!=null||x=="function"}function h(_,x,R){return _.call.apply(_.bind,arguments)}function g(_,x,R){if(!_)throw Error();if(2<arguments.length){var B=Array.prototype.slice.call(arguments,2);return function(){var J=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(J,B),_.apply(x,J)}}return function(){return _.apply(x,arguments)}}function v(_,x,R){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:g,v.apply(null,arguments)}function E(_,x){var R=Array.prototype.slice.call(arguments,1);return function(){var B=R.slice();return B.push.apply(B,arguments),_.apply(this,B)}}function b(_,x){function R(){}R.prototype=x.prototype,_.aa=x.prototype,_.prototype=new R,_.prototype.constructor=_,_.Qb=function(B,J,oe){for(var Te=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)Te[ct-2]=arguments[ct];return x.prototype[J].apply(B,Te)}}function S(_){const x=_.length;if(0<x){const R=Array(x);for(let B=0;B<x;B++)R[B]=_[B];return R}return[]}function A(_,x){for(let R=1;R<arguments.length;R++){const B=arguments[R];if(c(B)){const J=_.length||0,oe=B.length||0;_.length=J+oe;for(let Te=0;Te<oe;Te++)_[J+Te]=B[Te]}else _.push(B)}}class C{constructor(x,R){this.i=x,this.j=R,this.h=0,this.g=null}get(){let x;return 0<this.h?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function D(_){return/^[\s\xa0]*$/.test(_)}function k(){var _=l.navigator;return _&&(_=_.userAgent)?_:""}function q(_){return q[" "](_),_}q[" "]=function(){};var $=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function H(_,x,R){for(const B in _)x.call(R,_[B],B,_)}function M(_,x){for(const R in _)x.call(void 0,_[R],R,_)}function O(_){const x={};for(const R in _)x[R]=_[R];return x}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(_,x){let R,B;for(let J=1;J<arguments.length;J++){B=arguments[J];for(R in B)_[R]=B[R];for(let oe=0;oe<L.length;oe++)R=L[oe],Object.prototype.hasOwnProperty.call(B,R)&&(_[R]=B[R])}}function V(_){var x=1;_=_.split(":");const R=[];for(;0<x&&_.length;)R.push(_.shift()),x--;return _.length&&R.push(_.join(":")),R}function G(_){l.setTimeout(()=>{throw _},0)}function z(){var _=Oe;let x=null;return _.g&&(x=_.g,_.g=_.g.next,_.g||(_.h=null),x.next=null),x}class Se{constructor(){this.h=this.g=null}add(x,R){const B=Re.get();B.set(x,R),this.h?this.h.next=B:this.g=B,this.h=B}}var Re=new C(()=>new te,_=>_.reset());class te{constructor(){this.next=this.g=this.h=null}set(x,R){this.h=x,this.g=R,this.next=null}reset(){this.next=this.g=this.h=null}}let me,be=!1,Oe=new Se,K=()=>{const _=l.Promise.resolve(void 0);me=()=>{_.then(le)}};var le=()=>{for(var _;_=z();){try{_.h.call(_.g)}catch(R){G(R)}var x=Re;x.j(_),100>x.h&&(x.h++,_.next=x.g,x.g=_)}be=!1};function ae(){this.s=this.s,this.C=this.C}ae.prototype.s=!1,ae.prototype.ma=function(){this.s||(this.s=!0,this.N())},ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function de(_,x){this.type=_,this.g=this.target=x,this.defaultPrevented=!1}de.prototype.h=function(){this.defaultPrevented=!0};var Le=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var _=!1,x=Object.defineProperty({},"passive",{get:function(){_=!0}});try{const R=()=>{};l.addEventListener("test",R,x),l.removeEventListener("test",R,x)}catch{}return _})();function Be(_,x){if(de.call(this,_?_.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_){var R=this.type=_.type,B=_.changedTouches&&_.changedTouches.length?_.changedTouches[0]:null;if(this.target=_.target||_.srcElement,this.g=x,x=_.relatedTarget){if($){e:{try{q(x.nodeName);var J=!0;break e}catch{}J=!1}J||(x=null)}}else R=="mouseover"?x=_.fromElement:R=="mouseout"&&(x=_.toElement);this.relatedTarget=x,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0),this.button=_.button,this.key=_.key||"",this.ctrlKey=_.ctrlKey,this.altKey=_.altKey,this.shiftKey=_.shiftKey,this.metaKey=_.metaKey,this.pointerId=_.pointerId||0,this.pointerType=typeof _.pointerType=="string"?_.pointerType:qe[_.pointerType]||"",this.state=_.state,this.i=_,_.defaultPrevented&&Be.aa.h.call(this)}}b(Be,de);var qe={2:"touch",3:"pen",4:"mouse"};Be.prototype.h=function(){Be.aa.h.call(this);var _=this.i;_.preventDefault?_.preventDefault():_.returnValue=!1};var hn="closure_listenable_"+(1e6*Math.random()|0),wt=0;function xe(_,x,R,B,J){this.listener=_,this.proxy=null,this.src=x,this.type=R,this.capture=!!B,this.ha=J,this.key=++wt,this.da=this.fa=!1}function je(_){_.da=!0,_.listener=null,_.proxy=null,_.src=null,_.ha=null}function Ye(_){this.src=_,this.g={},this.h=0}Ye.prototype.add=function(_,x,R,B,J){var oe=_.toString();_=this.g[oe],_||(_=this.g[oe]=[],this.h++);var Te=jt(_,x,B,J);return-1<Te?(x=_[Te],R||(x.fa=!1)):(x=new xe(x,this.src,oe,!!B,J),x.fa=R,_.push(x)),x};function ye(_,x){var R=x.type;if(R in _.g){var B=_.g[R],J=Array.prototype.indexOf.call(B,x,void 0),oe;(oe=0<=J)&&Array.prototype.splice.call(B,J,1),oe&&(je(x),_.g[R].length==0&&(delete _.g[R],_.h--))}}function jt(_,x,R,B){for(var J=0;J<_.length;++J){var oe=_[J];if(!oe.da&&oe.listener==x&&oe.capture==!!R&&oe.ha==B)return J}return-1}var tt="closure_lm_"+(1e6*Math.random()|0),Tn={};function Cn(_,x,R,B,J){if(Array.isArray(x)){for(var oe=0;oe<x.length;oe++)Cn(_,x[oe],R,B,J);return null}return R=Ec(R),_&&_[hn]?_.K(x,R,f(B)?!!B.capture:!1,J):ln(_,x,R,!1,B,J)}function ln(_,x,R,B,J,oe){if(!x)throw Error("Invalid event type");var Te=f(J)?!!J.capture:!!J,ct=Ea(_);if(ct||(_[tt]=ct=new Ye(_)),R=ct.add(x,R,B,Te,oe),R.proxy)return R;if(B=_a(),R.proxy=B,B.src=_,B.listener=R,_.addEventListener)Le||(J=Te),J===void 0&&(J=!1),_.addEventListener(x.toString(),B,J);else if(_.attachEvent)_.attachEvent(So(x.toString()),B);else if(_.addListener&&_.removeListener)_.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return R}function _a(){function _(R){return x.call(_.src,_.listener,R)}const x=Xd;return _}function Ta(_,x,R,B,J){if(Array.isArray(x))for(var oe=0;oe<x.length;oe++)Ta(_,x[oe],R,B,J);else B=f(B)?!!B.capture:!!B,R=Ec(R),_&&_[hn]?(_=_.i,x=String(x).toString(),x in _.g&&(oe=_.g[x],R=jt(oe,R,B,J),-1<R&&(je(oe[R]),Array.prototype.splice.call(oe,R,1),oe.length==0&&(delete _.g[x],_.h--)))):_&&(_=Ea(_))&&(x=_.g[x.toString()],_=-1,x&&(_=jt(x,R,B,J)),(R=-1<_?x[_]:null)&&bo(R))}function bo(_){if(typeof _!="number"&&_&&!_.da){var x=_.src;if(x&&x[hn])ye(x.i,_);else{var R=_.type,B=_.proxy;x.removeEventListener?x.removeEventListener(R,B,_.capture):x.detachEvent?x.detachEvent(So(R),B):x.addListener&&x.removeListener&&x.removeListener(B),(R=Ea(x))?(ye(R,_),R.h==0&&(R.src=null,x[tt]=null)):je(_)}}}function So(_){return _ in Tn?Tn[_]:Tn[_]="on"+_}function Xd(_,x){if(_.da)_=!0;else{x=new Be(x,this);var R=_.listener,B=_.ha||_.src;_.fa&&bo(_),_=R.call(B,x)}return _}function Ea(_){return _=_[tt],_ instanceof Ye?_:null}var $l="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ec(_){return typeof _=="function"?_:(_[$l]||(_[$l]=function(x){return _.handleEvent(x)}),_[$l])}function en(){ae.call(this),this.i=new Ye(this),this.M=this,this.F=null}b(en,ae),en.prototype[hn]=!0,en.prototype.removeEventListener=function(_,x,R,B){Ta(this,_,x,R,B)};function _t(_,x){var R,B=_.F;if(B)for(R=[];B;B=B.F)R.push(B);if(_=_.M,B=x.type||x,typeof x=="string")x=new de(x,_);else if(x instanceof de)x.target=x.target||_;else{var J=x;x=new de(B,_),F(x,J)}if(J=!0,R)for(var oe=R.length-1;0<=oe;oe--){var Te=x.g=R[oe];J=Pr(Te,B,!0,x)&&J}if(Te=x.g=_,J=Pr(Te,B,!0,x)&&J,J=Pr(Te,B,!1,x)&&J,R)for(oe=0;oe<R.length;oe++)Te=x.g=R[oe],J=Pr(Te,B,!1,x)&&J}en.prototype.N=function(){if(en.aa.N.call(this),this.i){var _=this.i,x;for(x in _.g){for(var R=_.g[x],B=0;B<R.length;B++)je(R[B]);delete _.g[x],_.h--}}this.F=null},en.prototype.K=function(_,x,R,B){return this.i.add(String(_),x,!1,R,B)},en.prototype.L=function(_,x,R,B){return this.i.add(String(_),x,!0,R,B)};function Pr(_,x,R,B){if(x=_.i.g[String(x)],!x)return!0;x=x.concat();for(var J=!0,oe=0;oe<x.length;++oe){var Te=x[oe];if(Te&&!Te.da&&Te.capture==R){var ct=Te.listener,Vn=Te.ha||Te.src;Te.fa&&ye(_.i,Te),J=ct.call(Vn,B)!==!1&&J}}return J&&!B.defaultPrevented}function bt(_,x,R){if(typeof _=="function")R&&(_=v(_,R));else if(_&&typeof _.handleEvent=="function")_=v(_.handleEvent,_);else throw Error("Invalid listener argument");return 2147483647<Number(x)?-1:l.setTimeout(_,x||0)}function wa(_){_.g=bt(()=>{_.g=null,_.i&&(_.i=!1,wa(_))},_.l);const x=_.h;_.h=null,_.m.apply(null,x)}class ba extends ae{constructor(x,R){super(),this.m=x,this.l=R,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:wa(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function to(_){ae.call(this),this.h=_,this.g={}}b(to,ae);var Ao=[];function xo(_){H(_.g,function(x,R){this.g.hasOwnProperty(R)&&bo(x)},_),_.g={}}to.prototype.N=function(){to.aa.N.call(this),xo(this)},to.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jr=l.JSON.stringify,ps=l.JSON.parse,Co=class{stringify(_){return l.JSON.stringify(_,void 0)}parse(_){return l.JSON.parse(_,void 0)}};function Z(){}Z.prototype.h=null;function ce(_){return _.h||(_.h=_.i())}function Ie(){}var _e={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ee(){de.call(this,"d")}b(Ee,de);function St(){de.call(this,"c")}b(St,de);var ut={},Ct=null;function Kt(){return Ct=Ct||new en}ut.La="serverreachability";function nt(_){de.call(this,ut.La,_)}b(nt,de);function pt(_){const x=Kt();_t(x,new nt(x))}ut.STAT_EVENT="statevent";function gt(_,x){de.call(this,ut.STAT_EVENT,_),this.stat=x}b(gt,de);function Ze(_){const x=Kt();_t(x,new gt(x,_))}ut.Ma="timingevent";function at(_,x){de.call(this,ut.Ma,_),this.size=x}b(at,de);function kt(_,x){if(typeof _!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){_()},x)}function In(){this.g=!0}In.prototype.xa=function(){this.g=!1};function no(_,x,R,B,J,oe){_.info(function(){if(_.g)if(oe)for(var Te="",ct=oe.split("&"),Vn=0;Vn<ct.length;Vn++){var ft=ct[Vn].split("=");if(1<ft.length){var Kn=ft[0];ft=ft[1];var Un=Kn.split("_");Te=2<=Un.length&&Un[1]=="type"?Te+(Kn+"="+ft+"&"):Te+(Kn+"=redacted&")}}else Te=null;else Te=oe;return"XMLHTTP REQ ("+B+") [attempt "+J+"]: "+x+`
`+R+`
`+Te})}function Zd(_,x,R,B,J,oe,Te){_.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+J+"]: "+x+`
`+R+`
`+oe+" "+Te})}function Sa(_,x,R,B){_.info(function(){return"XMLHTTP TEXT ("+x+"): "+zl(_,R)+(B?" "+B:"")})}function Eg(_,x){_.info(function(){return"TIMEOUT: "+x})}In.prototype.info=function(){};function zl(_,x){if(!_.g)return x;if(!x)return null;try{var R=JSON.parse(x);if(R){for(_=0;_<R.length;_++)if(Array.isArray(R[_])){var B=R[_];if(!(2>B.length)){var J=B[1];if(Array.isArray(J)&&!(1>J.length)){var oe=J[0];if(oe!="noop"&&oe!="stop"&&oe!="close")for(var Te=1;Te<J.length;Te++)J[Te]=""}}}}return jr(R)}catch{return x}}var Aa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ms={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Io;function Ro(){}b(Ro,Z),Ro.prototype.g=function(){return new XMLHttpRequest},Ro.prototype.i=function(){return{}},Io=new Ro;function Nr(_,x,R,B){this.j=_,this.i=x,this.l=R,this.R=B||1,this.U=new to(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new En}function En(){this.i=null,this.g="",this.h=!1}var eh={},wc={};function ro(_,x,R){_.L=1,_.v=Wl(ii(x)),_.m=R,_.P=!0,gs(_,null)}function gs(_,x){_.F=Date.now(),Hl(_),_.A=ii(_.v);var R=_.A,B=_.R;Array.isArray(B)||(B=[String(B)]),sh(R.i,"t",B),_.C=0,R=_.j.J,_.h=new En,_.g=Vg(_.j,R?x:null,!_.m),0<_.O&&(_.M=new ba(v(_.Y,_,_.g),_.O)),x=_.U,R=_.g,B=_.ca;var J="readystatechange";Array.isArray(J)||(J&&(Ao[0]=J.toString()),J=Ao);for(var oe=0;oe<J.length;oe++){var Te=Cn(R,J[oe],B||x.handleEvent,!1,x.h||x);if(!Te)break;x.g[Te.key]=Te}x=_.H?O(_.H):{},_.m?(_.u||(_.u="POST"),x["Content-Type"]="application/x-www-form-urlencoded",_.g.ea(_.A,_.u,_.m,x)):(_.u="GET",_.g.ea(_.A,_.u,null,x)),pt(),no(_.i,_.u,_.A,_.l,_.R,_.m)}Nr.prototype.ca=function(_){_=_.target;const x=this.M;x&&Ni(_)==3?x.j():this.Y(_)},Nr.prototype.Y=function(_){try{if(_==this.g)e:{const Un=Ni(this.g);var x=this.g.Ba();const Ss=this.g.Z();if(!(3>Un)&&(Un!=3||this.g&&(this.h.h||this.g.oa()||Rg(this.g)))){this.J||Un!=4||x==7||(x==8||0>=Ss?pt(3):pt(2)),xa(this);var R=this.g.Z();this.X=R;t:if(wg(this)){var B=Rg(this.g);_="";var J=B.length,oe=Ni(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){lr(this),Po(this);var Te="";break t}this.h.i=new l.TextDecoder}for(x=0;x<J;x++)this.h.h=!0,_+=this.h.i.decode(B[x],{stream:!(oe&&x==J-1)});B.length=0,this.h.g+=_,this.C=0,Te=this.h.g}else Te=this.g.oa();if(this.o=R==200,Zd(this.i,this.u,this.A,this.l,this.R,Un,R),this.o){if(this.T&&!this.K){t:{if(this.g){var ct,Vn=this.g;if((ct=Vn.g?Vn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(ct)){var ft=ct;break t}}ft=null}if(R=ft)Sa(this.i,this.l,R,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Gl(this,R);else{this.o=!1,this.s=3,Ze(12),lr(this),Po(this);break e}}if(this.P){R=!0;let ur;for(;!this.J&&this.C<Te.length;)if(ur=bg(this,Te),ur==wc){Un==4&&(this.s=4,Ze(14),R=!1),Sa(this.i,this.l,null,"[Incomplete Response]");break}else if(ur==eh){this.s=4,Ze(15),Sa(this.i,this.l,Te,"[Invalid Chunk]"),R=!1;break}else Sa(this.i,this.l,ur,null),Gl(this,ur);if(wg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Un!=4||Te.length!=0||this.h.h||(this.s=1,Ze(16),R=!1),this.o=this.o&&R,!R)Sa(this.i,this.l,Te,"[Invalid Chunked Response]"),lr(this),Po(this);else if(0<Te.length&&!this.W){this.W=!0;var Kn=this.j;Kn.g==this&&Kn.ba&&!Kn.M&&(Kn.j.info("Great, no buffering proxy detected. Bytes received: "+Te.length),nu(Kn),Kn.M=!0,Ze(11))}}else Sa(this.i,this.l,Te,null),Gl(this,Te);Un==4&&lr(this),this.o&&!this.J&&(Un==4?kg(this.j,this):(this.o=!1,Hl(this)))}else NT(this.g),R==400&&0<Te.indexOf("Unknown SID")?(this.s=3,Ze(12)):(this.s=0,Ze(13)),lr(this),Po(this)}}}catch{}finally{}};function wg(_){return _.g?_.u=="GET"&&_.L!=2&&_.j.Ca:!1}function bg(_,x){var R=_.C,B=x.indexOf(`
`,R);return B==-1?wc:(R=Number(x.substring(R,B)),isNaN(R)?eh:(B+=1,B+R>x.length?wc:(x=x.slice(B,B+R),_.C=B+R,x)))}Nr.prototype.cancel=function(){this.J=!0,lr(this)};function Hl(_){_.S=Date.now()+_.I,Sg(_,_.I)}function Sg(_,x){if(_.B!=null)throw Error("WatchDog timer not null");_.B=kt(v(_.ba,_),x)}function xa(_){_.B&&(l.clearTimeout(_.B),_.B=null)}Nr.prototype.ba=function(){this.B=null;const _=Date.now();0<=_-this.S?(Eg(this.i,this.A),this.L!=2&&(pt(),Ze(17)),lr(this),this.s=2,Po(this)):Sg(this,this.S-_)};function Po(_){_.j.G==0||_.J||kg(_.j,_)}function lr(_){xa(_);var x=_.M;x&&typeof x.ma=="function"&&x.ma(),_.M=null,xo(_.U),_.g&&(x=_.g,_.g=null,x.abort(),x.ma())}function Gl(_,x){try{var R=_.j;if(R.G!=0&&(R.g==_||th(R.h,_))){if(!_.K&&th(R.h,_)&&R.G==3){try{var B=R.Da.g.parse(x)}catch{B=null}if(Array.isArray(B)&&B.length==3){var J=B;if(J[0]==0){e:if(!R.u){if(R.g)if(R.g.F+3e3<_.F)kc(R),Mc(R);else break e;fh(R),Ze(18)}}else R.za=J[1],0<R.za-R.T&&37500>J[2]&&R.F&&R.v==0&&!R.C&&(R.C=kt(v(R.Za,R),6e3));if(1>=Sc(R.h)&&R.ca){try{R.ca()}catch{}R.ca=void 0}}else bs(R,11)}else if((_.K||R.g==_)&&kc(R),!D(x))for(J=R.Da.g.parse(x),x=0;x<J.length;x++){let ft=J[x];if(R.T=ft[0],ft=ft[1],R.G==2)if(ft[0]=="c"){R.K=ft[1],R.ia=ft[2];const Kn=ft[3];Kn!=null&&(R.la=Kn,R.j.info("VER="+R.la));const Un=ft[4];Un!=null&&(R.Aa=Un,R.j.info("SVER="+R.Aa));const Ss=ft[5];Ss!=null&&typeof Ss=="number"&&0<Ss&&(B=1.5*Ss,R.L=B,R.j.info("backChannelRequestTimeoutMs_="+B)),B=R;const ur=_.g;if(ur){const Vo=ur.g?ur.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vo){var oe=B.h;oe.g||Vo.indexOf("spdy")==-1&&Vo.indexOf("quic")==-1&&Vo.indexOf("h2")==-1||(oe.j=oe.l,oe.g=new Set,oe.h&&(Ac(oe,oe.h),oe.h=null))}if(B.D){const hh=ur.g?ur.g.getResponseHeader("X-HTTP-Session-Id"):null;hh&&(B.ya=hh,Ot(B.I,B.D,hh))}}R.G=3,R.l&&R.l.ua(),R.ba&&(R.R=Date.now()-_.F,R.j.info("Handshake RTT: "+R.R+"ms")),B=R;var Te=_;if(B.qa=Lg(B,B.J?B.ia:null,B.W),Te.K){Mr(B.h,Te);var ct=Te,Vn=B.L;Vn&&(ct.I=Vn),ct.B&&(xa(ct),Hl(ct)),B.g=Te}else Mg(B);0<R.i.length&&Dc(R)}else ft[0]!="stop"&&ft[0]!="close"||bs(R,7);else R.G==3&&(ft[0]=="stop"||ft[0]=="close"?ft[0]=="stop"?bs(R,7):uh(R):ft[0]!="noop"&&R.l&&R.l.ta(ft),R.v=0)}}pt(4)}catch{}}var Ag=class{constructor(_,x){this.g=_,this.map=x}};function ys(_){this.l=_||10,l.PerformanceNavigationTiming?(_=l.performance.getEntriesByType("navigation"),_=0<_.length&&(_[0].nextHopProtocol=="hq"||_[0].nextHopProtocol=="h2")):_=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=_?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function bc(_){return _.h?!0:_.g?_.g.size>=_.j:!1}function Sc(_){return _.h?1:_.g?_.g.size:0}function th(_,x){return _.h?_.h==x:_.g?_.g.has(x):!1}function Ac(_,x){_.g?_.g.add(x):_.h=x}function Mr(_,x){_.h&&_.h==x?_.h=null:_.g&&_.g.has(x)&&_.g.delete(x)}ys.prototype.cancel=function(){if(this.i=nh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const _ of this.g.values())_.cancel();this.g.clear()}};function nh(_){if(_.h!=null)return _.i.concat(_.h.D);if(_.g!=null&&_.g.size!==0){let x=_.i;for(const R of _.g.values())x=x.concat(R.D);return x}return S(_.i)}function CT(_){if(_.V&&typeof _.V=="function")return _.V();if(typeof Map<"u"&&_ instanceof Map||typeof Set<"u"&&_ instanceof Set)return Array.from(_.values());if(typeof _=="string")return _.split("");if(c(_)){for(var x=[],R=_.length,B=0;B<R;B++)x.push(_[B]);return x}x=[],R=0;for(B in _)x[R++]=_[B];return x}function xc(_){if(_.na&&typeof _.na=="function")return _.na();if(!_.V||typeof _.V!="function"){if(typeof Map<"u"&&_ instanceof Map)return Array.from(_.keys());if(!(typeof Set<"u"&&_ instanceof Set)){if(c(_)||typeof _=="string"){var x=[];_=_.length;for(var R=0;R<_;R++)x.push(R);return x}x=[],R=0;for(const B in _)x[R++]=B;return x}}}function rh(_,x){if(_.forEach&&typeof _.forEach=="function")_.forEach(x,void 0);else if(c(_)||typeof _=="string")Array.prototype.forEach.call(_,x,void 0);else for(var R=xc(_),B=CT(_),J=B.length,oe=0;oe<J;oe++)x.call(void 0,B[oe],R&&R[oe],_)}var jl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function IT(_,x){if(_){_=_.split("&");for(var R=0;R<_.length;R++){var B=_[R].indexOf("="),J=null;if(0<=B){var oe=_[R].substring(0,B);J=_[R].substring(B+1)}else oe=_[R];x(oe,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function Rn(_){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,_ instanceof Rn){this.h=_.h,Kl(this,_.j),this.o=_.o,this.g=_.g,Ca(this,_.s),this.l=_.l;var x=_.i,R=new _s;R.i=x.i,x.g&&(R.g=new Map(x.g),R.h=x.h),vs(this,R),this.m=_.m}else _&&(x=String(_).match(jl))?(this.h=!1,Kl(this,x[1]||"",!0),this.o=Ii(x[2]||""),this.g=Ii(x[3]||"",!0),Ca(this,x[4]),this.l=Ii(x[5]||"",!0),vs(this,x[6]||"",!0),this.m=Ii(x[7]||"")):(this.h=!1,this.i=new _s(null,this.h))}Rn.prototype.toString=function(){var _=[],x=this.j;x&&_.push(Yl(x,ih,!0),":");var R=this.g;return(R||x=="file")&&(_.push("//"),(x=this.o)&&_.push(Yl(x,ih,!0),"@"),_.push(encodeURIComponent(String(R)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R=this.s,R!=null&&_.push(":",String(R))),(R=this.l)&&(this.g&&R.charAt(0)!="/"&&_.push("/"),_.push(Yl(R,R.charAt(0)=="/"?RT:oh,!0))),(R=this.i.toString())&&_.push("?",R),(R=this.m)&&_.push("#",Yl(R,Cc)),_.join("")};function ii(_){return new Rn(_)}function Kl(_,x,R){_.j=R?Ii(x,!0):x,_.j&&(_.j=_.j.replace(/:$/,""))}function Ca(_,x){if(x){if(x=Number(x),isNaN(x)||0>x)throw Error("Bad port number "+x);_.s=x}else _.s=null}function vs(_,x,R){x instanceof _s?(_.i=x,Cg(_.i,_.h)):(R||(x=Yl(x,PT)),_.i=new _s(x,_.h))}function Ot(_,x,R){_.i.set(x,R)}function Wl(_){return Ot(_,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),_}function Ii(_,x){return _?x?decodeURI(_.replace(/%25/g,"%2525")):decodeURIComponent(_):""}function Yl(_,x,R){return typeof _=="string"?(_=encodeURI(_).replace(x,xg),R&&(_=_.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_):null}function xg(_){return _=_.charCodeAt(0),"%"+(_>>4&15).toString(16)+(_&15).toString(16)}var ih=/[#\/\?@]/g,oh=/[#\?:]/g,RT=/[#\?]/g,PT=/[#\?@]/g,Cc=/#/g;function _s(_,x){this.h=this.g=null,this.i=_||null,this.j=!!x}function Ri(_){_.g||(_.g=new Map,_.h=0,_.i&&IT(_.i,function(x,R){_.add(decodeURIComponent(x.replace(/\+/g," ")),R)}))}t=_s.prototype,t.add=function(_,x){Ri(this),this.i=null,_=No(this,_);var R=this.g.get(_);return R||this.g.set(_,R=[]),R.push(x),this.h+=1,this};function Ts(_,x){Ri(_),x=No(_,x),_.g.has(x)&&(_.i=null,_.h-=_.g.get(x).length,_.g.delete(x))}function Es(_,x){return Ri(_),x=No(_,x),_.g.has(x)}t.forEach=function(_,x){Ri(this),this.g.forEach(function(R,B){R.forEach(function(J){_.call(x,J,B,this)},this)},this)},t.na=function(){Ri(this);const _=Array.from(this.g.values()),x=Array.from(this.g.keys()),R=[];for(let B=0;B<x.length;B++){const J=_[B];for(let oe=0;oe<J.length;oe++)R.push(x[B])}return R},t.V=function(_){Ri(this);let x=[];if(typeof _=="string")Es(this,_)&&(x=x.concat(this.g.get(No(this,_))));else{_=Array.from(this.g.values());for(let R=0;R<_.length;R++)x=x.concat(_[R])}return x},t.set=function(_,x){return Ri(this),this.i=null,_=No(this,_),Es(this,_)&&(this.h-=this.g.get(_).length),this.g.set(_,[x]),this.h+=1,this},t.get=function(_,x){return _?(_=this.V(_),0<_.length?String(_[0]):x):x};function sh(_,x,R){Ts(_,x),0<R.length&&(_.i=null,_.g.set(No(_,x),S(R)),_.h+=R.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _=[],x=Array.from(this.g.keys());for(var R=0;R<x.length;R++){var B=x[R];const oe=encodeURIComponent(String(B)),Te=this.V(B);for(B=0;B<Te.length;B++){var J=oe;Te[B]!==""&&(J+="="+encodeURIComponent(String(Te[B]))),_.push(J)}}return this.i=_.join("&")};function No(_,x){return x=String(x),_.j&&(x=x.toLowerCase()),x}function Cg(_,x){x&&!_.j&&(Ri(_),_.i=null,_.g.forEach(function(R,B){var J=B.toLowerCase();B!=J&&(Ts(this,B),sh(this,J,R))},_)),_.j=x}function Jl(_,x){const R=new In;if(l.Image){const B=new Image;B.onload=E(Pi,R,"TestLoadImage: loaded",!0,x,B),B.onerror=E(Pi,R,"TestLoadImage: error",!1,x,B),B.onabort=E(Pi,R,"TestLoadImage: abort",!1,x,B),B.ontimeout=E(Pi,R,"TestLoadImage: timeout",!1,x,B),l.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=_}else x(!1)}function io(_,x){const R=new In,B=new AbortController,J=setTimeout(()=>{B.abort(),Pi(R,"TestPingServer: timeout",!1,x)},1e4);fetch(_,{signal:B.signal}).then(oe=>{clearTimeout(J),oe.ok?Pi(R,"TestPingServer: ok",!0,x):Pi(R,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(J),Pi(R,"TestPingServer: error",!1,x)})}function Pi(_,x,R,B,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),B(R)}catch{}}function Ql(){this.g=new Co}function Mo(_,x,R){const B=R||"";try{rh(_,function(J,oe){let Te=J;f(J)&&(Te=jr(J)),x.push(B+oe+"="+encodeURIComponent(Te))})}catch(J){throw x.push(B+"type="+encodeURIComponent("_badmap")),J}}function Ia(_){this.l=_.Ub||null,this.j=_.eb||!1}b(Ia,Z),Ia.prototype.g=function(){return new ws(this.l,this.j)},Ia.prototype.i=(function(_){return function(){return _}})({});function ws(_,x){en.call(this),this.D=_,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(ws,en),t=ws.prototype,t.open=function(_,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=_,this.A=x,this.readyState=1,ko(this)},t.send=function(_){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const x={headers:this.u,method:this.B,credentials:this.m,cache:void 0};_&&(x.body=_),(this.D||l).fetch(new Request(this.A,x)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Do(this)),this.readyState=0},t.Sa=function(_){if(this.g&&(this.l=_,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_.headers,this.readyState=2,ko(this)),this.g&&(this.readyState=3,ko(this),this.g)))if(this.responseType==="arraybuffer")_.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in _){if(this.j=_.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ah(this)}else _.text().then(this.Ra.bind(this),this.ga.bind(this))};function ah(_){_.j.read().then(_.Pa.bind(_)).catch(_.ga.bind(_))}t.Pa=function(_){if(this.g){if(this.o&&_.value)this.response.push(_.value);else if(!this.o){var x=_.value?_.value:new Uint8Array(0);(x=this.v.decode(x,{stream:!_.done}))&&(this.response=this.responseText+=x)}_.done?Do(this):ko(this),this.readyState==3&&ah(this)}},t.Ra=function(_){this.g&&(this.response=this.responseText=_,Do(this))},t.Qa=function(_){this.g&&(this.response=_,Do(this))},t.ga=function(){this.g&&Do(this)};function Do(_){_.readyState=4,_.l=null,_.j=null,_.v=null,ko(_)}t.setRequestHeader=function(_,x){this.u.append(_,x)},t.getResponseHeader=function(_){return this.h&&this.h.get(_.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const _=[],x=this.h.entries();for(var R=x.next();!R.done;)R=R.value,_.push(R[0]+": "+R[1]),R=x.next();return _.join(`\r
`)};function ko(_){_.onreadystatechange&&_.onreadystatechange.call(_)}Object.defineProperty(ws.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(_){this.m=_?"include":"same-origin"}});function lh(_){let x="";return H(_,function(R,B){x+=B,x+=":",x+=R,x+=`\r
`}),x}function jn(_,x,R){e:{for(B in R){var B=!1;break e}B=!0}B||(R=lh(R),typeof _=="string"?R!=null&&encodeURIComponent(String(R)):Ot(_,x,R))}function At(_){en.call(this),this.headers=new Map,this.o=_||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(At,en);var Ic=/^https?$/i,Xl=["POST","PUT"];t=At.prototype,t.Ha=function(_){this.J=_},t.ea=function(_,x,R,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+_);x=x?x.toUpperCase():"GET",this.D=_,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Io.g(),this.v=this.o?ce(this.o):ce(Io),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(x,String(_),!0),this.B=!1}catch(oe){Ig(this,oe);return}if(_=R||"",R=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var J in B)R.set(J,B[J]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(const oe of B.keys())R.set(oe,B.get(oe));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from(R.keys()).find(oe=>oe.toLowerCase()=="content-type"),J=l.FormData&&_ instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Xl,x,void 0))||B||J||R.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[oe,Te]of R)this.g.setRequestHeader(oe,Te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Zl(this),this.u=!0,this.g.send(_),this.u=!1}catch(oe){Ig(this,oe)}};function Ig(_,x){_.h=!1,_.g&&(_.j=!0,_.g.abort(),_.j=!1),_.l=x,_.m=5,Rc(_),Oo(_)}function Rc(_){_.A||(_.A=!0,_t(_,"complete"),_t(_,"error"))}t.abort=function(_){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=_||7,_t(this,"complete"),_t(this,"abort"),Oo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oo(this,!0)),At.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Pc(this):this.bb())},t.bb=function(){Pc(this)};function Pc(_){if(_.h&&typeof s<"u"&&(!_.v[1]||Ni(_)!=4||_.Z()!=2)){if(_.u&&Ni(_)==4)bt(_.Ea,0,_);else if(_t(_,"readystatechange"),Ni(_)==4){_.h=!1;try{const Te=_.Z();e:switch(Te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var R;if(!(R=x)){var B;if(B=Te===0){var J=String(_.D).match(jl)[1]||null;!J&&l.self&&l.self.location&&(J=l.self.location.protocol.slice(0,-1)),B=!Ic.test(J?J.toLowerCase():"")}R=B}if(R)_t(_,"complete"),_t(_,"success");else{_.m=6;try{var oe=2<Ni(_)?_.g.statusText:""}catch{oe=""}_.l=oe+" ["+_.Z()+"]",Rc(_)}}finally{Oo(_)}}}}function Oo(_,x){if(_.g){Zl(_);const R=_.g,B=_.v[0]?()=>{}:null;_.g=null,_.v=null,x||_t(_,"ready");try{R.onreadystatechange=B}catch{}}}function Zl(_){_.I&&(l.clearTimeout(_.I),_.I=null)}t.isActive=function(){return!!this.g};function Ni(_){return _.g?_.g.readyState:0}t.Z=function(){try{return 2<Ni(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(_){if(this.g){var x=this.g.responseText;return _&&x.indexOf(_)==0&&(x=x.substring(_.length)),ps(x)}};function Rg(_){try{if(!_.g)return null;if("response"in _.g)return _.g.response;switch(_.H){case"":case"text":return _.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _.g)return _.g.mozResponseArrayBuffer}return null}catch{return null}}function NT(_){const x={};_=(_.g&&2<=Ni(_)&&_.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<_.length;B++){if(D(_[B]))continue;var R=V(_[B]);const J=R[0];if(R=R[1],typeof R!="string")continue;R=R.trim();const oe=x[J]||[];x[J]=oe,oe.push(R)}M(x,function(B){return B.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function eu(_,x,R){return R&&R.internalChannelParams&&R.internalChannelParams[_]||x}function Nc(_){this.Aa=0,this.i=[],this.j=new In,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=eu("failFast",!1,_),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=eu("baseRetryDelayMs",5e3,_),this.cb=eu("retryDelaySeedMs",1e4,_),this.Wa=eu("forwardChannelMaxRetries",2,_),this.wa=eu("forwardChannelRequestTimeoutMs",2e4,_),this.pa=_&&_.xmlHttpFactory||void 0,this.Xa=_&&_.Tb||void 0,this.Ca=_&&_.useFetchStreams||!1,this.L=void 0,this.J=_&&_.supportsCrossDomainXhr||!1,this.K="",this.h=new ys(_&&_.concurrentRequestLimit),this.Da=new Ql,this.P=_&&_.fastHandshake||!1,this.O=_&&_.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=_&&_.Rb||!1,_&&_.xa&&this.j.xa(),_&&_.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&_&&_.detectBufferingProxy||!1,this.ja=void 0,_&&_.longPollingTimeout&&0<_.longPollingTimeout&&(this.ja=_.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Nc.prototype,t.la=8,t.G=1,t.connect=function(_,x,R,B){Ze(0),this.W=_,this.H=x||{},R&&B!==void 0&&(this.H.OSID=R,this.H.OAID=B),this.F=this.X,this.I=Lg(this,null,this.W),Dc(this)};function uh(_){if(Pg(_),_.G==3){var x=_.U++,R=ii(_.I);if(Ot(R,"SID",_.K),Ot(R,"RID",x),Ot(R,"TYPE","terminate"),tu(_,R),x=new Nr(_,_.j,x),x.L=2,x.v=Wl(ii(R)),R=!1,l.navigator&&l.navigator.sendBeacon)try{R=l.navigator.sendBeacon(x.v.toString(),"")}catch{}!R&&l.Image&&(new Image().src=x.v,R=!0),R||(x.g=Vg(x.j,null),x.g.ea(x.v)),x.F=Date.now(),Hl(x)}Og(_)}function Mc(_){_.g&&(nu(_),_.g.cancel(),_.g=null)}function Pg(_){Mc(_),_.u&&(l.clearTimeout(_.u),_.u=null),kc(_),_.h.cancel(),_.s&&(typeof _.s=="number"&&l.clearTimeout(_.s),_.s=null)}function Dc(_){if(!bc(_.h)&&!_.s){_.s=!0;var x=_.Ga;me||K(),be||(me(),be=!0),Oe.add(x,_),_.B=0}}function MT(_,x){return Sc(_.h)>=_.h.j-(_.s?1:0)?!1:_.s?(_.i=x.D.concat(_.i),!0):_.G==1||_.G==2||_.B>=(_.Va?0:_.Wa)?!1:(_.s=kt(v(_.Ga,_,x),dh(_,_.B)),_.B++,!0)}t.Ga=function(_){if(this.s)if(this.s=null,this.G==1){if(!_){this.U=Math.floor(1e5*Math.random()),_=this.U++;const J=new Nr(this,this.j,_);let oe=this.o;if(this.S&&(oe?(oe=O(oe),F(oe,this.S)):oe=this.S),this.m!==null||this.O||(J.H=oe,oe=null),this.P)e:{for(var x=0,R=0;R<this.i.length;R++){t:{var B=this.i[R];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break t}B=void 0}if(B===void 0)break;if(x+=B,4096<x){x=R;break e}if(x===4096||R===this.i.length-1){x=R+1;break e}}x=1e3}else x=1e3;x=Ng(this,J,x),R=ii(this.I),Ot(R,"RID",_),Ot(R,"CVER",22),this.D&&Ot(R,"X-HTTP-Session-Id",this.D),tu(this,R),oe&&(this.O?x="headers="+encodeURIComponent(String(lh(oe)))+"&"+x:this.m&&jn(R,this.m,oe)),Ac(this.h,J),this.Ua&&Ot(R,"TYPE","init"),this.P?(Ot(R,"$req",x),Ot(R,"SID","null"),J.T=!0,ro(J,R,null)):ro(J,R,x),this.G=2}}else this.G==3&&(_?ch(this,_):this.i.length==0||bc(this.h)||ch(this))};function ch(_,x){var R;x?R=x.l:R=_.U++;const B=ii(_.I);Ot(B,"SID",_.K),Ot(B,"RID",R),Ot(B,"AID",_.T),tu(_,B),_.m&&_.o&&jn(B,_.m,_.o),R=new Nr(_,_.j,R,_.B+1),_.m===null&&(R.H=_.o),x&&(_.i=x.D.concat(_.i)),x=Ng(_,R,1e3),R.I=Math.round(.5*_.wa)+Math.round(.5*_.wa*Math.random()),Ac(_.h,R),ro(R,B,x)}function tu(_,x){_.H&&H(_.H,function(R,B){Ot(x,B,R)}),_.l&&rh({},function(R,B){Ot(x,B,R)})}function Ng(_,x,R){R=Math.min(_.i.length,R);var B=_.l?v(_.l.Na,_.l,_):null;e:{var J=_.i;let oe=-1;for(;;){const Te=["count="+R];oe==-1?0<R?(oe=J[0].g,Te.push("ofs="+oe)):oe=0:Te.push("ofs="+oe);let ct=!0;for(let Vn=0;Vn<R;Vn++){let ft=J[Vn].g;const Kn=J[Vn].map;if(ft-=oe,0>ft)oe=Math.max(0,J[Vn].g-100),ct=!1;else try{Mo(Kn,Te,"req"+ft+"_")}catch{B&&B(Kn)}}if(ct){B=Te.join("&");break e}}}return _=_.i.splice(0,R),x.D=_,B}function Mg(_){if(!_.g&&!_.u){_.Y=1;var x=_.Fa;me||K(),be||(me(),be=!0),Oe.add(x,_),_.v=0}}function fh(_){return _.g||_.u||3<=_.v?!1:(_.Y++,_.u=kt(v(_.Fa,_),dh(_,_.v)),_.v++,!0)}t.Fa=function(){if(this.u=null,Dg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var _=2*this.R;this.j.info("BP detection timer enabled: "+_),this.A=kt(v(this.ab,this),_)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ze(10),Mc(this),Dg(this))};function nu(_){_.A!=null&&(l.clearTimeout(_.A),_.A=null)}function Dg(_){_.g=new Nr(_,_.j,"rpc",_.Y),_.m===null&&(_.g.H=_.o),_.g.O=0;var x=ii(_.qa);Ot(x,"RID","rpc"),Ot(x,"SID",_.K),Ot(x,"AID",_.T),Ot(x,"CI",_.F?"0":"1"),!_.F&&_.ja&&Ot(x,"TO",_.ja),Ot(x,"TYPE","xmlhttp"),tu(_,x),_.m&&_.o&&jn(x,_.m,_.o),_.L&&(_.g.I=_.L);var R=_.g;_=_.ia,R.L=1,R.v=Wl(ii(x)),R.m=null,R.P=!0,gs(R,_)}t.Za=function(){this.C!=null&&(this.C=null,Mc(this),fh(this),Ze(19))};function kc(_){_.C!=null&&(l.clearTimeout(_.C),_.C=null)}function kg(_,x){var R=null;if(_.g==x){kc(_),nu(_),_.g=null;var B=2}else if(th(_.h,x))R=x.D,Mr(_.h,x),B=1;else return;if(_.G!=0){if(x.o)if(B==1){R=x.m?x.m.length:0,x=Date.now()-x.F;var J=_.B;B=Kt(),_t(B,new at(B,R)),Dc(_)}else Mg(_);else if(J=x.s,J==3||J==0&&0<x.X||!(B==1&&MT(_,x)||B==2&&fh(_)))switch(R&&0<R.length&&(x=_.h,x.i=x.i.concat(R)),J){case 1:bs(_,5);break;case 4:bs(_,10);break;case 3:bs(_,6);break;default:bs(_,2)}}}function dh(_,x){let R=_.Ta+Math.floor(Math.random()*_.cb);return _.isActive()||(R*=2),R*x}function bs(_,x){if(_.j.info("Error code "+x),x==2){var R=v(_.fb,_),B=_.Xa;const J=!B;B=new Rn(B||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Kl(B,"https"),Wl(B),J?Jl(B.toString(),R):io(B.toString(),R)}else Ze(2);_.G=0,_.l&&_.l.sa(x),Og(_),Pg(_)}t.fb=function(_){_?(this.j.info("Successfully pinged google.com"),Ze(2)):(this.j.info("Failed to ping google.com"),Ze(1))};function Og(_){if(_.G=0,_.ka=[],_.l){const x=nh(_.h);(x.length!=0||_.i.length!=0)&&(A(_.ka,x),A(_.ka,_.i),_.h.i.length=0,S(_.i),_.i.length=0),_.l.ra()}}function Lg(_,x,R){var B=R instanceof Rn?ii(R):new Rn(R);if(B.g!="")x&&(B.g=x+"."+B.g),Ca(B,B.s);else{var J=l.location;B=J.protocol,x=x?x+"."+J.hostname:J.hostname,J=+J.port;var oe=new Rn(null);B&&Kl(oe,B),x&&(oe.g=x),J&&Ca(oe,J),R&&(oe.l=R),B=oe}return R=_.D,x=_.ya,R&&x&&Ot(B,R,x),Ot(B,"VER",_.la),tu(_,B),B}function Vg(_,x,R){if(x&&!_.J)throw Error("Can't create secondary domain capable XhrIo object.");return x=_.Ca&&!_.pa?new At(new Ia({eb:R})):new At(_.pa),x.Ha(_.J),x}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ug(){}t=Ug.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Oc(){}Oc.prototype.g=function(_,x){return new Dr(_,x)};function Dr(_,x){en.call(this),this.g=new Nc(x),this.l=_,this.h=x&&x.messageUrlParams||null,_=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(_?_["X-Client-Protocol"]="webchannel":_={"X-Client-Protocol":"webchannel"}),this.g.o=_,_=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(_?_["X-WebChannel-Content-Type"]=x.messageContentType:_={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.va&&(_?_["X-WebChannel-Client-Profile"]=x.va:_={"X-WebChannel-Client-Profile":x.va}),this.g.S=_,(_=x&&x.Sb)&&!D(_)&&(this.g.m=_),this.v=x&&x.supportsCrossDomainXhr||!1,this.u=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!D(x)&&(this.g.D=x,_=this.h,_!==null&&x in _&&(_=this.h,x in _&&delete _[x])),this.j=new Lo(this)}b(Dr,en),Dr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Dr.prototype.close=function(){uh(this.g)},Dr.prototype.o=function(_){var x=this.g;if(typeof _=="string"){var R={};R.__data__=_,_=R}else this.u&&(R={},R.__data__=jr(_),_=R);x.i.push(new Ag(x.Ya++,_)),x.G==3&&Dc(x)},Dr.prototype.N=function(){this.g.l=null,delete this.j,uh(this.g),delete this.g,Dr.aa.N.call(this)};function Fg(_){Ee.call(this),_.__headers__&&(this.headers=_.__headers__,this.statusCode=_.__status__,delete _.__headers__,delete _.__status__);var x=_.__sm__;if(x){e:{for(const R in x){_=R;break e}_=void 0}(this.i=_)&&(_=this.i,x=x!==null&&_ in x?x[_]:void 0),this.data=x}else this.data=_}b(Fg,Ee);function Bg(){St.call(this),this.status=1}b(Bg,St);function Lo(_){this.g=_}b(Lo,Ug),Lo.prototype.ua=function(){_t(this.g,"a")},Lo.prototype.ta=function(_){_t(this.g,new Fg(_))},Lo.prototype.sa=function(_){_t(this.g,new Bg)},Lo.prototype.ra=function(){_t(this.g,"b")},Oc.prototype.createWebChannel=Oc.prototype.g,Dr.prototype.send=Dr.prototype.o,Dr.prototype.open=Dr.prototype.m,Dr.prototype.close=Dr.prototype.close,fB=function(){return new Oc},cB=function(){return Kt()},uB=ut,JS={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Aa.NO_ERROR=0,Aa.TIMEOUT=8,Aa.HTTP_ERROR=6,bv=Aa,ms.COMPLETE="complete",lB=ms,Ie.EventType=_e,_e.OPEN="a",_e.CLOSE="b",_e.ERROR="c",_e.MESSAGE="d",en.prototype.listen=en.prototype.K,Ap=Ie,At.prototype.listenOnce=At.prototype.L,At.prototype.getLastError=At.prototype.Ka,At.prototype.getLastErrorCode=At.prototype.Ba,At.prototype.getStatus=At.prototype.Z,At.prototype.getResponseJson=At.prototype.Oa,At.prototype.getResponseText=At.prototype.oa,At.prototype.send=At.prototype.ea,At.prototype.setWithCredentials=At.prototype.Ha,aB=At}).apply(typeof zy<"u"?zy:typeof self<"u"?self:typeof window<"u"?window:{});const ED="@firebase/firestore",wD="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zn.UNAUTHENTICATED=new Zn(null),Zn.GOOGLE_CREDENTIALS=new Zn("google-credentials-uid"),Zn.FIRST_PARTY=new Zn("first-party-uid"),Zn.MOCK_USER=new Zn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rd="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yl=new i0("@firebase/firestore");function Tf(){return yl.logLevel}function wQ(t){yl.setLogLevel(t)}function ge(t,...e){if(yl.logLevel<=ot.DEBUG){const n=e.map(pC);yl.debug(`Firestore (${Rd}): ${t}`,...n)}}function An(t,...e){if(yl.logLevel<=ot.ERROR){const n=e.map(pC);yl.error(`Firestore (${Rd}): ${t}`,...n)}}function as(t,...e){if(yl.logLevel<=ot.WARN){const n=e.map(pC);yl.warn(`Firestore (${Rd}): ${t}`,...n)}}function pC(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,dB(t,r,n)}function dB(t,e,n){let r=`FIRESTORE (${Rd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw An(r),new Error(r)}function ke(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||dB(e,i,r)}function bQ(t,e){t||Ce(57014,e)}function Ae(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends Ir{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class SQ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Zn.UNAUTHENTICATED)))}shutdown(){}}class AQ{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class xQ{constructor(e){this.t=e,this.currentUser=Zn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ke(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let o=new vr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new vr,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const c=o;e.enqueueRetryable((async()=>{await c.promise,await i(this.currentUser)}))},l=c=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((c=>l(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new vr)}}),0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ke(typeof r.accessToken=="string",31837,{l:r}),new hB(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ke(e===null||typeof e=="string",2055,{h:e}),new Zn(e)}}class CQ{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Zn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class IQ{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new CQ(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Zn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class bD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class RQ{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Qt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ke(this.o===void 0,3512);const r=o=>{o.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.m;return this.m=o.token,ge("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const i=o=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>i(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new bD(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(ke(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new bD(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PQ(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=PQ(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}}function Ke(t,e){return t<e?-1:t>e?1:0}function QS(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),o=e.charAt(r);if(i!==o)return zw(i)===zw(o)?Ke(i,o):zw(i)?1:-1}return Ke(t.length,e.length)}const NQ=55296,MQ=57343;function zw(t){const e=t.charCodeAt(0);return e>=NQ&&e<=MQ}function jf(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}function pB(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SD="__name__";class zo{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ce(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ce(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return zo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof zo?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=zo.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return Ke(e.length,n.length)}static compareSegments(e,n){const r=zo.isNumericId(e),i=zo.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?zo.extractNumericId(e).compare(zo.extractNumericId(n)):QS(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ul.fromString(e.substring(4,e.length-2))}}class st extends zo{construct(e,n,r){return new st(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new pe(ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new st(n)}static emptyPath(){return new st([])}}const DQ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rn extends zo{construct(e,n,r){return new rn(e,n,r)}static isValidIdentifier(e){return DQ.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===SD}static keyField(){return new rn([SD])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new pe(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new pe(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new pe(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else l==="`"?(s=!s,i++):l!=="."||s?(r+=l,i++):(o(),i++)}if(o(),s)throw new pe(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rn(n)}static emptyPath(){return new rn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.path=e}static fromPath(e){return new we(st.fromString(e))}static fromName(e){return new we(st.fromString(e).popFirst(5))}static empty(){return new we(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return st.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new st(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(t,e,n){if(!n)throw new pe(ie.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function mB(t,e,n,r){if(e===!0&&r===!0)throw new pe(ie.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function AD(t){if(!we.isDocumentKey(t))throw new pe(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function xD(t){if(we.isDocumentKey(t))throw new pe(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function gB(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function v0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ce(12329,{type:typeof t})}function mt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new pe(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=v0(t);throw new pe(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function yB(t,e){if(e<=0)throw new pe(ie.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(t,e){const n={typeString:t};return e&&(n.value=e),n}function $m(t,e){if(!gB(t))throw new pe(ie.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new pe(ie.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD=-62135596800,ID=1e6;class xt{static now(){return xt.fromMillis(Date.now())}static fromDate(e){return xt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*ID);return new xt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new pe(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new pe(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<CD)throw new pe(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ID}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:xt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if($m(e,xt._jsonSchema))return new xt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-CD;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}xt._jsonSchemaVersion="firestore/timestamp/1.0",xt._jsonSchema={type:kn("string",xt._jsonSchemaVersion),seconds:kn("number"),nanoseconds:kn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new xt(0,0))}static max(){return new Ve(new xt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kf=-1;class Yv{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function XS(t){return t.fields.find((e=>e.kind===2))}function Eu(t){return t.fields.filter((e=>e.kind!==2))}Yv.UNKNOWN_ID=-1;class Sv{constructor(e,n){this.fieldPath=e,this.kind=n}}class im{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new im(0,Si.min())}}function vB(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ve.fromTimestamp(r===1e9?new xt(n+1,0):new xt(n,r));return new Si(i,we.empty(),e)}function _B(t){return new Si(t.readTime,t.key,Kf)}class Si{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Si(Ve.min(),we.empty(),Kf)}static max(){return new Si(Ve.max(),we.empty(),Kf)}}function yC(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=we.comparator(t.documentKey,e.documentKey),n!==0?n:Ke(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class EB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pl(t){if(t.code!==ie.FAILED_PRECONDITION||t.message!==TB)throw t;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Q(((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Q?n:Q.resolve(n)}catch(n){return Q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Q.reject(n)}static resolve(e){return new Q(((n,r)=>{n(e)}))}static reject(e){return new Q(((n,r)=>{r(e)}))}static waitFor(e){return new Q(((n,r)=>{let i=0,o=0,s=!1;e.forEach((l=>{++i,l.next((()=>{++o,s&&o===i&&n()}),(c=>r(c)))})),s=!0,o===i&&n()}))}static or(e){let n=Q.resolve(!1);for(const r of e)n=n.next((i=>i?Q.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,o)=>{r.push(n.call(this,i,o))})),this.waitFor(r)}static mapArray(e,n){return new Q(((r,i)=>{const o=e.length,s=new Array(o);let l=0;for(let c=0;c<o;c++){const f=c;n(e[f]).next((h=>{s[f]=h,++l,l===o&&r(s)}),(h=>i(h)))}}))}static doWhile(e,n){return new Q(((r,i)=>{const o=()=>{e()===!0?n().next((()=>{o()}),i):r()};o()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi="SimpleDb";class _0{static open(e,n,r,i){try{return new _0(n,e.transaction(i,r))}catch(o){throw new Up(n,o)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new vr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Up(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=vC(r.target.error);this.S.reject(new Up(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ge(pi,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new OQ(n)}}class ts{static delete(e){return ge(pi,"Removing database:",e),xu(Fx().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Xp())return!1;if(ts.F())return!0;const e=cn(),n=ts.M(e),r=0<n&&n<10,i=wB(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,ts.M(cn())===12.2&&An("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ge(pi,"Opening database:",this.name),this.db=await new Promise(((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{const s=o.target.result;n(s)},i.onblocked=()=>{r(new Up(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{const s=o.target.error;s.name==="VersionError"?r(new pe(ie.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new pe(ie.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Up(e,s))},i.onupgradeneeded=o=>{ge(pi,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const s=o.target.result;this.N.k(s,i.transaction,o.oldVersion,this.version).next((()=>{ge(pi,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const o=n==="readonly";let s=0;for(;;){++s;try{this.db=await this.L(e);const l=_0.open(this.db,e,o?"readonly":"readwrite",r),c=i(l).next((f=>(l.C(),f))).catch((f=>(l.abort(f),Q.reject(f)))).toPromise();return c.catch((()=>{})),await l.D,c}catch(l){const c=l,f=c.name!=="FirebaseError"&&s<3;if(ge(pi,"Transaction failed with error:",c.message,"Retrying:",f),this.close(),!f)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function wB(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class kQ{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return xu(this.U.delete())}}class Up extends pe{constructor(e,n){super(ie.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Nl(t){return t.name==="IndexedDbTransactionError"}class OQ{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(ge(pi,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(ge(pi,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),xu(r)}add(e){return ge(pi,"ADD",this.store.name,e,e),xu(this.store.add(e))}get(e){return xu(this.store.get(e)).next((n=>(n===void 0&&(n=null),ge(pi,"GET",this.store.name,e,n),n)))}delete(e){return ge(pi,"DELETE",this.store.name,e),xu(this.store.delete(e))}count(){return ge(pi,"COUNT",this.store.name),xu(this.store.count())}J(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const o=i.getAll(r.range);return new Q(((s,l)=>{o.onerror=c=>{l(c.target.error)},o.onsuccess=c=>{s(c.target.result)}}))}{const o=this.cursor(r),s=[];return this.H(o,((l,c)=>{s.push(c)})).next((()=>s))}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new Q(((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}}))}Z(e,n){ge(pi,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const i=this.cursor(r);return this.H(i,((o,s,l)=>l.delete()))}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}te(e){const n=this.cursor({});return new Q(((r,i)=>{n.onerror=o=>{const s=vC(o.target.error);i(s)},n.onsuccess=o=>{const s=o.target.result;s?e(s.primaryKey,s.value).next((l=>{l?s.continue():r()})):r()}}))}H(e,n){const r=[];return new Q(((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{const l=s.target.result;if(!l)return void i();const c=new kQ(l),f=n(l.primaryKey,l.value,c);if(f instanceof Q){const h=f.catch((g=>(c.done(),Q.reject(g))));r.push(h)}c.isDone?i():c.G===null?l.continue():l.continue(c.G)}})).next((()=>Q.waitFor(r)))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function xu(t){return new Q(((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=vC(r.target.error);n(i)}}))}let RD=!1;function vC(t){const e=ts.M(cn());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return RD||(RD=!0,setTimeout((()=>{throw r}),0)),r}}return t}const Fp="IndexBackfiller";class LQ{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ge(Fp,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const n=await this.ne.ie();ge(Fp,`Documents written: ${n}`)}catch(n){Nl(n)?ge(Fp,"Ignoring IndexedDB error during index backfill: ",n):await Pl(n)}await this.re(6e4)}))}}class VQ{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.se(n,e)))}se(e,n){const r=new Set;let i=n,o=!0;return Q.doWhile((()=>o===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((s=>{if(s!==null&&!r.has(s))return ge(Fp,`Processing collection: ${s}`),this.oe(e,s,i).next((l=>{i-=l,r.add(s)}));o=!1})))).next((()=>n-i))}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next((i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next((o=>{const s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next((()=>this._e(i,o))).next((l=>(ge(Fp,`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,n,l)))).next((()=>s.size))}))))}_e(e,n){let r=e;return n.changes.forEach(((i,o)=>{const s=_B(o);yC(s,r)>0&&(r=s)})),new Si(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Zr.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cl=-1;function zm(t){return t==null}function om(t){return t===0&&1/t==-1/0}function bB(t){return typeof t=="number"&&Number.isInteger(t)&&!om(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv="";function Rr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=PD(e)),e=UQ(t.get(n),e);return PD(e)}function UQ(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case Jv:n+="";break;default:n+=o}}return n}function PD(t){return t+Jv+""}function Xo(t){const e=t.length;if(ke(e>=2,64408,{path:t}),e===2)return ke(t.charAt(0)===Jv&&t.charAt(1)==="",56145,{path:t}),st.emptyPath();const n=e-2,r=[];let i="";for(let o=0;o<e;){const s=t.indexOf(Jv,o);switch((s<0||s>n)&&Ce(50515,{path:t}),t.charAt(s+1)){case"":const l=t.substring(o,s);let c;i.length===0?c=l:(i+=l,c=i,i=""),r.push(c);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:Ce(61167,{path:t})}o=s+2}return new st(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wu="remoteDocuments",Hm="owner",df="owner",sm="mutationQueues",FQ="userId",lo="mutations",ND="batchId",Mu="userMutationsIndex",MD=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(t,e){return[t,Rr(e)]}function SB(t,e,n){return[t,Rr(e),n]}const BQ={},Wf="documentMutations",Qv="remoteDocumentsV14",qQ=["prefixPath","collectionGroup","readTime","documentId"],xv="documentKeyIndex",$Q=["prefixPath","collectionGroup","documentId"],AB="collectionGroupIndex",zQ=["collectionGroup","readTime","prefixPath","documentId"],am="remoteDocumentGlobal",ZS="remoteDocumentGlobalKey",Yf="targets",xB="queryTargetsIndex",HQ=["canonicalId","targetId"],Jf="targetDocuments",GQ=["targetId","path"],_C="documentTargetsIndex",jQ=["path","targetId"],Xv="targetGlobalKey",Bu="targetGlobal",lm="collectionParents",KQ=["collectionId","parent"],Qf="clientMetadata",WQ="clientId",T0="bundles",YQ="bundleId",E0="namedQueries",JQ="name",TC="indexConfiguration",QQ="indexId",eA="collectionGroupIndex",XQ="collectionGroup",Bp="indexState",ZQ=["indexId","uid"],CB="sequenceNumberIndex",eX=["uid","sequenceNumber"],qp="indexEntries",tX=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],IB="documentKeyIndex",nX=["indexId","uid","orderedDocumentKey"],w0="documentOverlays",rX=["userId","collectionPath","documentId"],tA="collectionPathOverlayIndex",iX=["userId","collectionPath","largestBatchId"],RB="collectionGroupOverlayIndex",oX=["userId","collectionGroup","largestBatchId"],EC="globals",sX="name",PB=[sm,lo,Wf,wu,Yf,Hm,Bu,Jf,Qf,am,lm,T0,E0],aX=[...PB,w0],NB=[sm,lo,Wf,Qv,Yf,Hm,Bu,Jf,Qf,am,lm,T0,E0,w0],MB=NB,wC=[...MB,TC,Bp,qp],lX=wC,DB=[...wC,EC],uX=DB;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA extends EB{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function zn(t,e){const n=Ae(t);return ts.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DD(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ml(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function kB(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e,n){this.comparator=e,this.root=n||pr.EMPTY}insert(e,n){return new Gt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pr.BLACK,null,null))}remove(e){return new Gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hy(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hy(this.root,e,this.comparator,!0)}}class Hy{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pr{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??pr.RED,this.left=i??pr.EMPTY,this.right=o??pr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new pr(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return pr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return pr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}pr.EMPTY=null,pr.RED=!0,pr.BLACK=!1;pr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new pr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.comparator=e,this.data=new Gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new kD(this.data.getIterator())}getIteratorFrom(e){return new kD(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Mt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Mt(this.comparator);return n.data=e,n}}class kD{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function hf(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e){this.fields=e,e.sort(rn.comparator)}static empty(){return new ei([])}unionWith(e){let n=new Mt(rn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ei(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return jf(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OB extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cX(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new OB("Invalid base64 string: "+o):o}})(e);return new gn(n)}static fromUint8Array(e){const n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new gn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gn.EMPTY_BYTE_STRING=new gn("");const fX=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ea(t){if(ke(!!t,39018),typeof t=="string"){let e=0;const n=fX.exec(t);if(ke(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nn(t.seconds),nanos:nn(t.nanos)}}function nn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ta(t){return typeof t=="string"?gn.fromBase64String(t):gn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LB="server_timestamp",VB="__type__",UB="__previous_value__",FB="__local_write_time__";function b0(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[VB])==null?void 0:r.stringValue)===LB}function S0(t){const e=t.mapValue.fields[UB];return b0(e)?S0(e):e}function um(t){const e=ea(t.mapValue.fields[FB].timestampValue);return new xt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dX{constructor(e,n,r,i,o,s,l,c,f,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=f,this.isUsingEmulator=h}}const Zv="(default)";class vl{constructor(e,n){this.projectId=e,this.database=n||Zv}static empty(){return new vl("","")}get isDefaultDatabase(){return this.database===Zv}isEqual(e){return e instanceof vl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC="__type__",BB="__max__",ol={mapValue:{fields:{__type__:{stringValue:BB}}}},SC="__vector__",Xf="value",Cv={nullValue:"NULL_VALUE"};function _l(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?b0(t)?4:qB(t)?9007199254740991:A0(t)?10:11:Ce(28295,{value:t})}function ls(t,e){if(t===e)return!0;const n=_l(t);if(n!==_l(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return um(t).isEqual(um(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=ea(i.timestampValue),l=ea(o.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return ta(i.bytesValue).isEqual(ta(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return nn(i.geoPointValue.latitude)===nn(o.geoPointValue.latitude)&&nn(i.geoPointValue.longitude)===nn(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return nn(i.integerValue)===nn(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=nn(i.doubleValue),l=nn(o.doubleValue);return s===l?om(s)===om(l):isNaN(s)&&isNaN(l)}return!1})(t,e);case 9:return jf(t.arrayValue.values||[],e.arrayValue.values||[],ls);case 10:case 11:return(function(i,o){const s=i.mapValue.fields||{},l=o.mapValue.fields||{};if(DD(s)!==DD(l))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(l[c]===void 0||!ls(s[c],l[c])))return!1;return!0})(t,e);default:return Ce(52216,{left:t})}}function cm(t,e){return(t.values||[]).find((n=>ls(n,e)))!==void 0}function Tl(t,e){if(t===e)return 0;const n=_l(t),r=_l(e);if(n!==r)return Ke(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ke(t.booleanValue,e.booleanValue);case 2:return(function(o,s){const l=nn(o.integerValue||o.doubleValue),c=nn(s.integerValue||s.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1})(t,e);case 3:return OD(t.timestampValue,e.timestampValue);case 4:return OD(um(t),um(e));case 5:return QS(t.stringValue,e.stringValue);case 6:return(function(o,s){const l=ta(o),c=ta(s);return l.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){const l=o.split("/"),c=s.split("/");for(let f=0;f<l.length&&f<c.length;f++){const h=Ke(l[f],c[f]);if(h!==0)return h}return Ke(l.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){const l=Ke(nn(o.latitude),nn(s.latitude));return l!==0?l:Ke(nn(o.longitude),nn(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return LD(t.arrayValue,e.arrayValue);case 10:return(function(o,s){var v,E,b,S;const l=o.fields||{},c=s.fields||{},f=(v=l[Xf])==null?void 0:v.arrayValue,h=(E=c[Xf])==null?void 0:E.arrayValue,g=Ke(((b=f==null?void 0:f.values)==null?void 0:b.length)||0,((S=h==null?void 0:h.values)==null?void 0:S.length)||0);return g!==0?g:LD(f,h)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===ol.mapValue&&s===ol.mapValue)return 0;if(o===ol.mapValue)return 1;if(s===ol.mapValue)return-1;const l=o.fields||{},c=Object.keys(l),f=s.fields||{},h=Object.keys(f);c.sort(),h.sort();for(let g=0;g<c.length&&g<h.length;++g){const v=QS(c[g],h[g]);if(v!==0)return v;const E=Tl(l[c[g]],f[h[g]]);if(E!==0)return E}return Ke(c.length,h.length)})(t.mapValue,e.mapValue);default:throw Ce(23264,{he:n})}}function OD(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ke(t,e);const n=ea(t),r=ea(e),i=Ke(n.seconds,r.seconds);return i!==0?i:Ke(n.nanos,r.nanos)}function LD(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=Tl(n[i],r[i]);if(o)return o}return Ke(n.length,r.length)}function Zf(t){return rA(t)}function rA(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=ea(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return ta(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return we.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=rA(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${rA(n.fields[s])}`;return i+"}"})(t.mapValue):Ce(61005,{value:t})}function Iv(t){switch(_l(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=S0(t);return e?16+Iv(e):16;case 5:return 2*t.stringValue.length;case 6:return ta(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,o)=>i+Iv(o)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return Ml(r.fields,((o,s)=>{i+=o.length+Iv(s)})),i})(t.mapValue);default:throw Ce(13486,{value:t})}}function Wu(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function iA(t){return!!t&&"integerValue"in t}function fm(t){return!!t&&"arrayValue"in t}function VD(t){return!!t&&"nullValue"in t}function UD(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Rv(t){return!!t&&"mapValue"in t}function A0(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[bC])==null?void 0:r.stringValue)===SC}function $p(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ml(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=$p(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$p(t.arrayValue.values[n]);return e}return{...t}}function qB(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===BB}const $B={mapValue:{fields:{[bC]:{stringValue:SC},[Xf]:{arrayValue:{}}}}};function hX(t){return"nullValue"in t?Cv:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Wu(vl.empty(),we.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?A0(t)?$B:{mapValue:{}}:Ce(35942,{value:t})}function pX(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Wu(vl.empty(),we.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?$B:"mapValue"in t?A0(t)?{mapValue:{}}:ol:Ce(61959,{value:t})}function FD(t,e){const n=Tl(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function BD(t,e){const n=Tl(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e){this.value=e}static empty(){return new gr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Rv(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$p(n)}setAll(e){let n=rn.emptyPath(),r={},i=[];e.forEach(((s,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=l.popLast()}s?r[l.lastSegment()]=$p(s):i.push(l.lastSegment())}));const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());Rv(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ls(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Rv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ml(n,((i,o)=>e[i]=o));for(const i of r)delete e[i]}clone(){return new gr($p(this.value))}}function zB(t){const e=[];return Ml(t.fields,((n,r)=>{const i=new rn([n]);if(Rv(r)){const o=zB(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)})),new ei(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,n,r,i,o,s,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=l}static newInvalidDocument(e){return new Jt(e,0,Ve.min(),Ve.min(),Ve.min(),gr.empty(),0)}static newFoundDocument(e,n,r,i){return new Jt(e,1,n,Ve.min(),r,i,0)}static newNoDocument(e,n){return new Jt(e,2,n,Ve.min(),Ve.min(),gr.empty(),0)}static newUnknownDocument(e,n){return new Jt(e,3,n,Ve.min(),Ve.min(),gr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,n){this.position=e,this.inclusive=n}}function qD(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?r=we.comparator(we.fromName(s.referenceValue),n.key):r=Tl(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function $D(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ls(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,n="asc"){this.field=e,this.dir=n}}function mX(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HB{}class lt extends HB{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new gX(e,n,r):n==="array-contains"?new _X(e,r):n==="in"?new JB(e,r):n==="not-in"?new TX(e,r):n==="array-contains-any"?new EX(e,r):new lt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new yX(e,r):new vX(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Tl(n,this.value)):n!==null&&_l(this.value)===_l(n)&&this.matchesComparison(Tl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Nt extends HB{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Nt(e,n)}matches(e){return ed(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ed(t){return t.op==="and"}function oA(t){return t.op==="or"}function AC(t){return GB(t)&&ed(t)}function GB(t){for(const e of t.filters)if(e instanceof Nt)return!1;return!0}function sA(t){if(t instanceof lt)return t.field.canonicalString()+t.op.toString()+Zf(t.value);if(AC(t))return t.filters.map((e=>sA(e))).join(",");{const e=t.filters.map((n=>sA(n))).join(",");return`${t.op}(${e})`}}function jB(t,e){return t instanceof lt?(function(r,i){return i instanceof lt&&r.op===i.op&&r.field.isEqual(i.field)&&ls(r.value,i.value)})(t,e):t instanceof Nt?(function(r,i){return i instanceof Nt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((o,s,l)=>o&&jB(s,i.filters[l])),!0):!1})(t,e):void Ce(19439)}function KB(t,e){const n=t.filters.concat(e);return Nt.create(n,t.op)}function WB(t){return t instanceof lt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Zf(n.value)}`})(t):t instanceof Nt?(function(n){return n.op.toString()+" {"+n.getFilters().map(WB).join(" ,")+"}"})(t):"Filter"}class gX extends lt{constructor(e,n,r){super(e,n,r),this.key=we.fromName(r.referenceValue)}matches(e){const n=we.comparator(e.key,this.key);return this.matchesComparison(n)}}class yX extends lt{constructor(e,n){super(e,"in",n),this.keys=YB("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class vX extends lt{constructor(e,n){super(e,"not-in",n),this.keys=YB("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function YB(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((r=>we.fromName(r.referenceValue)))}class _X extends lt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return fm(n)&&cm(n.arrayValue,this.value)}}class JB extends lt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&cm(this.value.arrayValue,n)}}class TX extends lt{constructor(e,n){super(e,"not-in",n)}matches(e){if(cm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!cm(this.value.arrayValue,n)}}class EX extends lt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!fm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>cm(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wX{constructor(e,n=null,r=[],i=[],o=null,s=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=l,this.Te=null}}function aA(t,e=null,n=[],r=[],i=null,o=null,s=null){return new wX(t,e,n,r,i,o,s)}function Yu(t){const e=Ae(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>sA(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),zm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Zf(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Zf(r))).join(",")),e.Te=n}return e.Te}function Gm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!mX(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!jB(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!$D(t.startAt,e.startAt)&&$D(t.endAt,e.endAt)}function e_(t){return we.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function t_(t,e){return t.filters.filter((n=>n instanceof lt&&n.field.isEqual(e)))}function zD(t,e,n){let r=Cv,i=!0;for(const o of t_(t,e)){let s=Cv,l=!0;switch(o.op){case"<":case"<=":s=hX(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,l=!1;break;case"!=":case"not-in":s=Cv}FD({value:r,inclusive:i},{value:s,inclusive:l})<0&&(r=s,i=l)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const s=n.position[o];FD({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function HD(t,e,n){let r=ol,i=!0;for(const o of t_(t,e)){let s=ol,l=!0;switch(o.op){case">=":case">":s=pX(o.value),l=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,l=!1;break;case"!=":case"not-in":s=ol}BD({value:r,inclusive:i},{value:s,inclusive:l})>0&&(r=s,i=l)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const s=n.position[o];BD({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,n=null,r=[],i=[],o=null,s="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function QB(t,e,n,r,i,o,s,l){return new ua(t,e,n,r,i,o,s,l)}function Pd(t){return new ua(t)}function GD(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function xC(t){return t.collectionGroup!==null}function Df(t){const e=Ae(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let l=new Mt(rn.comparator);return s.filters.forEach((c=>{c.getFlattenedFilters().forEach((f=>{f.isInequality()&&(l=l.add(f.field))}))})),l})(e).forEach((o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new dm(o,r))})),n.has(rn.keyField().canonicalString())||e.Ie.push(new dm(rn.keyField(),r))}return e.Ie}function zr(t){const e=Ae(t);return e.Ee||(e.Ee=bX(e,Df(t))),e.Ee}function bX(t,e){if(t.limitType==="F")return aA(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const o=i.dir==="desc"?"asc":"desc";return new dm(i.field,o)}));const n=t.endAt?new El(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new El(t.startAt.position,t.startAt.inclusive):null;return aA(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function lA(t,e){const n=t.filters.concat([e]);return new ua(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function n_(t,e,n){return new ua(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function jm(t,e){return Gm(zr(t),zr(e))&&t.limitType===e.limitType}function XB(t){return`${Yu(zr(t))}|lt:${t.limitType}`}function Ef(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>WB(i))).join(", ")}]`),zm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>Zf(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>Zf(i))).join(",")),`Target(${r})`})(zr(t))}; limitType=${t.limitType})`}function Km(t,e){return e.isFoundDocument()&&(function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):we.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(const o of Df(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,l,c){const f=qD(s,l,c);return s.inclusive?f<=0:f<0})(r.startAt,Df(r),i)||r.endAt&&!(function(s,l,c){const f=qD(s,l,c);return s.inclusive?f>=0:f>0})(r.endAt,Df(r),i))})(t,e)}function ZB(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function eq(t){return(e,n)=>{let r=!1;for(const i of Df(t)){const o=SX(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function SX(t,e,n){const r=t.field.isKeyField()?we.comparator(e.key,n.key):(function(o,s,l){const c=s.data.field(o),f=l.data.field(o);return c!==null&&f!==null?Tl(c,f):Ce(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ce(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ml(this.inner,((n,r)=>{for(const[i,o]of r)e(i,o)}))}isEmpty(){return kB(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AX=new Gt(we.comparator);function ti(){return AX}const tq=new Gt(we.comparator);function xp(...t){let e=tq;for(const n of t)e=e.insert(n.key,n);return e}function nq(t){let e=tq;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Zo(){return zp()}function rq(){return zp()}function zp(){return new ca((t=>t.toString()),((t,e)=>t.isEqual(e)))}const xX=new Gt(we.comparator),CX=new Mt(we.comparator);function Je(...t){let e=CX;for(const n of t)e=e.add(n);return e}const IX=new Mt(Ke);function CC(){return IX}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IC(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:om(e)?"-0":e}}function iq(t){return{integerValue:""+t}}function oq(t,e){return bB(e)?iq(e):IC(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(){this._=void 0}}function RX(t,e,n){return t instanceof td?(function(i,o){const s={fields:{[VB]:{stringValue:LB},[FB]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&b0(o)&&(o=S0(o)),o&&(s.fields[UB]=o),{mapValue:s}})(n,e):t instanceof Ju?aq(t,e):t instanceof Qu?lq(t,e):(function(i,o){const s=sq(i,o),l=jD(s)+jD(i.Ae);return iA(s)&&iA(i.Ae)?iq(l):IC(i.serializer,l)})(t,e)}function PX(t,e,n){return t instanceof Ju?aq(t,e):t instanceof Qu?lq(t,e):n}function sq(t,e){return t instanceof nd?(function(r){return iA(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class td extends x0{}class Ju extends x0{constructor(e){super(),this.elements=e}}function aq(t,e){const n=uq(e);for(const r of t.elements)n.some((i=>ls(i,r)))||n.push(r);return{arrayValue:{values:n}}}class Qu extends x0{constructor(e){super(),this.elements=e}}function lq(t,e){let n=uq(e);for(const r of t.elements)n=n.filter((i=>!ls(i,r)));return{arrayValue:{values:n}}}class nd extends x0{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function jD(t){return nn(t.integerValue||t.doubleValue)}function uq(t){return fm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,n){this.field=e,this.transform=n}}function NX(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Ju&&i instanceof Ju||r instanceof Qu&&i instanceof Qu?jf(r.elements,i.elements,ls):r instanceof nd&&i instanceof nd?ls(r.Ae,i.Ae):r instanceof td&&i instanceof td})(t.transform,e.transform)}class MX{constructor(e,n){this.version=e,this.transformResults=n}}class on{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new on}static exists(e){return new on(void 0,e)}static updateTime(e){return new on(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pv(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class C0{}function cq(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Md(t.key,on.none()):new Nd(t.key,t.data,on.none());{const n=t.data,r=gr.empty();let i=new Mt(rn.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new fa(t.key,r,new ei(i.toArray()),on.none())}}function DX(t,e,n){t instanceof Nd?(function(i,o,s){const l=i.value.clone(),c=WD(i.fieldTransforms,o,s.transformResults);l.setAll(c),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()})(t,e,n):t instanceof fa?(function(i,o,s){if(!Pv(i.precondition,o))return void o.convertToUnknownDocument(s.version);const l=WD(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(fq(i)),c.setAll(l),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function Hp(t,e,n,r){return t instanceof Nd?(function(o,s,l,c){if(!Pv(o.precondition,s))return l;const f=o.value.clone(),h=YD(o.fieldTransforms,c,s);return f.setAll(h),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null})(t,e,n,r):t instanceof fa?(function(o,s,l,c){if(!Pv(o.precondition,s))return l;const f=YD(o.fieldTransforms,c,s),h=s.data;return h.setAll(fq(o)),h.setAll(f),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((g=>g.field)))})(t,e,n,r):(function(o,s,l){return Pv(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l})(t,e,n)}function kX(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=sq(r.transform,i||null);o!=null&&(n===null&&(n=gr.empty()),n.set(r.field,o))}return n||null}function KD(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&jf(r,i,((o,s)=>NX(o,s)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Nd extends C0{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class fa extends C0{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function fq(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function WD(t,e,n){const r=new Map;ke(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,l=e.data.field(o.field);r.set(o.field,PX(s,l,n[i]))}return r}function YD(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,RX(o,s,e))}return r}class Md extends C0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RC extends C0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&DX(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Hp(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Hp(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=rq();return this.mutations.forEach((i=>{const o=e.get(i.key),s=o.overlayedDocument;let l=this.applyToLocalView(s,o.mutatedFields);l=n.has(i.key)?null:l;const c=cq(s,l);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Ve.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Je())}isEqual(e){return this.batchId===e.batchId&&jf(this.mutations,e.mutations,((n,r)=>KD(n,r)))&&jf(this.baseMutations,e.baseMutations,((n,r)=>KD(n,r)))}}class NC{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ke(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return xX})();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new NC(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OX{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mn,ht;function dq(t){switch(t){case ie.OK:return Ce(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return Ce(15467,{code:t})}}function hq(t){if(t===void 0)return An("GRPC error has no .code"),ie.UNKNOWN;switch(t){case Mn.OK:return ie.OK;case Mn.CANCELLED:return ie.CANCELLED;case Mn.UNKNOWN:return ie.UNKNOWN;case Mn.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case Mn.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case Mn.INTERNAL:return ie.INTERNAL;case Mn.UNAVAILABLE:return ie.UNAVAILABLE;case Mn.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case Mn.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case Mn.NOT_FOUND:return ie.NOT_FOUND;case Mn.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case Mn.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case Mn.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case Mn.ABORTED:return ie.ABORTED;case Mn.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case Mn.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case Mn.DATA_LOSS:return ie.DATA_LOSS;default:return Ce(39323,{code:t})}}(ht=Mn||(Mn={}))[ht.OK=0]="OK",ht[ht.CANCELLED=1]="CANCELLED",ht[ht.UNKNOWN=2]="UNKNOWN",ht[ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ht[ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ht[ht.NOT_FOUND=5]="NOT_FOUND",ht[ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",ht[ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",ht[ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",ht[ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ht[ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ht[ht.ABORTED=10]="ABORTED",ht[ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",ht[ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",ht[ht.INTERNAL=13]="INTERNAL",ht[ht.UNAVAILABLE=14]="UNAVAILABLE",ht[ht.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pq(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LX=new ul([4294967295,4294967295],0);function JD(t){const e=pq().encode(t),n=new sB;return n.update(e),new Uint8Array(n.digest())}function QD(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ul([n,r],0),new ul([i,o],0)]}class DC{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Cp(`Invalid padding: ${n}`);if(r<0)throw new Cp(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Cp(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Cp(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ul.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(ul.fromNumber(r)));return i.compare(LX)===1&&(i=new ul([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=JD(e),[r,i]=QD(n);for(let o=0;o<this.hashCount;o++){const s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new DC(o,i,n);return r.forEach((l=>s.insert(l))),s}insert(e){if(this.ge===0)return;const n=JD(e),[r,i]=QD(n);for(let o=0;o<this.hashCount;o++){const s=this.ye(r,i,o);this.Se(s)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Cp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Jm.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ym(Ve.min(),i,new Gt(Ke),ti(),Je())}}class Jm{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Jm(r,n,Je(),Je(),Je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class mq{constructor(e,n){this.targetId=e,this.Ce=n}}class gq{constructor(e,n,r=gn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class XD{constructor(){this.ve=0,this.Fe=ZD(),this.Me=gn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Je(),n=Je(),r=Je();return this.Fe.forEach(((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ce(38017,{changeType:o})}})),new Jm(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=ZD()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ke(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class VX{constructor(e){this.Ge=e,this.ze=new Map,this.je=ti(),this.Je=Gy(),this.He=Gy(),this.Ye=new Gt(Ke)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Ce(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const o=i.target;if(e_(o))if(r===0){const s=new we(o.path);this.et(n,s,Jt.newNoDocument(s,Ve.min()))}else ke(r===1,20013,{expectedCount:r});else{const s=this._t(n);if(s!==r){const l=this.ut(e),c=l?this.ct(l,e,s):1;if(c!==0){this.it(n);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,l;try{s=ta(r).toUint8Array()}catch(c){if(c instanceof OB)return as("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new DC(s,i,o)}catch(c){return as(c instanceof Cp?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((o=>{const s=this.Ge.ht(),l=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(l)||(this.et(n,o,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((o,s)=>{const l=this.ot(s);if(l){if(o.current&&e_(l.target)){const c=new we(l.target.path);this.It(c).has(s)||this.Et(s,c)||this.et(s,c,Jt.newNoDocument(c,e))}o.Be&&(n.set(s,o.ke()),o.qe())}}));let r=Je();this.He.forEach(((o,s)=>{let l=!0;s.forEachWhile((c=>{const f=this.ot(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(r=r.add(o))})),this.je.forEach(((o,s)=>s.setReadTime(e)));const i=new Ym(e,n,this.Ye,this.je,r);return this.je=ti(),this.Je=Gy(),this.He=Gy(),this.Ye=new Gt(Ke),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new XD,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Mt(Ke),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Mt(Ke),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ge("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new XD),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Gy(){return new Gt(we.comparator)}function ZD(){return new Gt(we.comparator)}const UX={asc:"ASCENDING",desc:"DESCENDING"},FX={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BX={and:"AND",or:"OR"};class qX{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function uA(t,e){return t.useProto3Json||zm(e)?e:{value:e}}function rd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yq(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function $X(t,e){return rd(t,e.toTimestamp())}function xn(t){return ke(!!t,49232),Ve.fromTimestamp((function(n){const r=ea(n);return new xt(r.seconds,r.nanos)})(t))}function kC(t,e){return cA(t,e).canonicalString()}function cA(t,e){const n=(function(i){return new st(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function vq(t){const e=st.fromString(t);return ke(Iq(e),10190,{key:e.toString()}),e}function hm(t,e){return kC(t.databaseId,e.path)}function ns(t,e){const n=vq(e);if(n.get(1)!==t.databaseId.projectId)throw new pe(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new pe(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new we(Eq(n))}function _q(t,e){return kC(t.databaseId,e)}function Tq(t){const e=vq(t);return e.length===4?st.emptyPath():Eq(e)}function fA(t){return new st(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Eq(t){return ke(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function ek(t,e,n){return{name:hm(t,e),fields:n.value.mapValue.fields}}function wq(t,e,n){const r=ns(t,e.name),i=xn(e.updateTime),o=e.createTime?xn(e.createTime):Ve.min(),s=new gr({mapValue:{fields:e.fields}}),l=Jt.newFoundDocument(r,i,o,s);return n&&l.setHasCommittedMutations(),n?l.setHasCommittedMutations():l}function zX(t,e){return"found"in e?(function(r,i){ke(!!i.found,43571),i.found.name,i.found.updateTime;const o=ns(r,i.found.name),s=xn(i.found.updateTime),l=i.found.createTime?xn(i.found.createTime):Ve.min(),c=new gr({mapValue:{fields:i.found.fields}});return Jt.newFoundDocument(o,s,l,c)})(t,e):"missing"in e?(function(r,i){ke(!!i.missing,3894),ke(!!i.readTime,22933);const o=ns(r,i.missing),s=xn(i.readTime);return Jt.newNoDocument(o,s)})(t,e):Ce(7234,{result:e})}function HX(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Ce(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(f,h){return f.useProto3Json?(ke(h===void 0||typeof h=="string",58123),gn.fromBase64String(h||"")):(ke(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),gn.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,l=s&&(function(f){const h=f.code===void 0?ie.UNKNOWN:hq(f.code);return new pe(h,f.message||"")})(s);n=new gq(r,i,o,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ns(t,r.document.name),o=xn(r.document.updateTime),s=r.document.createTime?xn(r.document.createTime):Ve.min(),l=new gr({mapValue:{fields:r.document.fields}}),c=Jt.newFoundDocument(i,o,s,l),f=r.targetIds||[],h=r.removedTargetIds||[];n=new Nv(f,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ns(t,r.document),o=r.readTime?xn(r.readTime):Ve.min(),s=Jt.newNoDocument(i,o),l=r.removedTargetIds||[];n=new Nv([],l,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ns(t,r.document),o=r.removedTargetIds||[];n=new Nv([],o,i,null)}else{if(!("filter"in e))return Ce(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new OX(i,o),l=r.targetId;n=new mq(l,s)}}return n}function pm(t,e){let n;if(e instanceof Nd)n={update:ek(t,e.key,e.value)};else if(e instanceof Md)n={delete:hm(t,e.key)};else if(e instanceof fa)n={update:ek(t,e.key,e.data),updateMask:JX(e.fieldMask)};else{if(!(e instanceof RC))return Ce(16599,{Vt:e.type});n={verify:hm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(o,s){const l=s.transform;if(l instanceof td)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ju)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Qu)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof nd)return{fieldPath:s.field.canonicalString(),increment:l.Ae};throw Ce(20930,{transform:s.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:$X(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ce(27497)})(t,e.precondition)),n}function dA(t,e){const n=e.currentDocument?(function(o){return o.updateTime!==void 0?on.updateTime(xn(o.updateTime)):o.exists!==void 0?on.exists(o.exists):on.none()})(e.currentDocument):on.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(s,l){let c=null;if("setToServerValue"in l)ke(l.setToServerValue==="REQUEST_TIME",16630,{proto:l}),c=new td;else if("appendMissingElements"in l){const h=l.appendMissingElements.values||[];c=new Ju(h)}else if("removeAllFromArray"in l){const h=l.removeAllFromArray.values||[];c=new Qu(h)}else"increment"in l?c=new nd(s,l.increment):Ce(16584,{proto:l});const f=rn.fromServerFormat(l.fieldPath);return new Wm(f,c)})(t,i))):[];if(e.update){e.update.name;const i=ns(t,e.update.name),o=new gr({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=(function(c){const f=c.fieldPaths||[];return new ei(f.map((h=>rn.fromServerFormat(h))))})(e.updateMask);return new fa(i,o,s,n,r)}return new Nd(i,o,n,r)}if(e.delete){const i=ns(t,e.delete);return new Md(i,n)}if(e.verify){const i=ns(t,e.verify);return new RC(i,n)}return Ce(1463,{proto:e})}function GX(t,e){return t&&t.length>0?(ke(e!==void 0,14353),t.map((n=>(function(i,o){let s=i.updateTime?xn(i.updateTime):xn(o);return s.isEqual(Ve.min())&&(s=xn(o)),new MX(s,i.transformResults||[])})(n,e)))):[]}function bq(t,e){return{documents:[_q(t,e.path)]}}function Sq(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=_q(t,i);const o=(function(f){if(f.length!==0)return Cq(Nt.create(f,"and"))})(e.filters);o&&(n.structuredQuery.where=o);const s=(function(f){if(f.length!==0)return f.map((h=>(function(v){return{field:wf(v.field),direction:KX(v.dir)}})(h)))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);const l=uA(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:n,parent:i}}function Aq(t){let e=Tq(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ke(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=(function(g){const v=xq(g);return v instanceof Nt&&AC(v)?v.getFilters():[v]})(n.where));let s=[];n.orderBy&&(s=(function(g){return g.map((v=>(function(b){return new dm(bf(b.field),(function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(v)))})(n.orderBy));let l=null;n.limit&&(l=(function(g){let v;return v=typeof g=="object"?g.value:g,zm(v)?null:v})(n.limit));let c=null;n.startAt&&(c=(function(g){const v=!!g.before,E=g.values||[];return new El(E,v)})(n.startAt));let f=null;return n.endAt&&(f=(function(g){const v=!g.before,E=g.values||[];return new El(E,v)})(n.endAt)),QB(e,i,s,o,l,"F",c,f)}function jX(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function xq(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=bf(n.unaryFilter.field);return lt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=bf(n.unaryFilter.field);return lt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=bf(n.unaryFilter.field);return lt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=bf(n.unaryFilter.field);return lt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}})(t):t.fieldFilter!==void 0?(function(n){return lt.create(bf(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Nt.create(n.compositeFilter.filters.map((r=>xq(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}})(n.compositeFilter.op))})(t):Ce(30097,{filter:t})}function KX(t){return UX[t]}function WX(t){return FX[t]}function YX(t){return BX[t]}function wf(t){return{fieldPath:t.canonicalString()}}function bf(t){return rn.fromServerFormat(t.fieldPath)}function Cq(t){return t instanceof lt?(function(n){if(n.op==="=="){if(UD(n.value))return{unaryFilter:{field:wf(n.field),op:"IS_NAN"}};if(VD(n.value))return{unaryFilter:{field:wf(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(UD(n.value))return{unaryFilter:{field:wf(n.field),op:"IS_NOT_NAN"}};if(VD(n.value))return{unaryFilter:{field:wf(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wf(n.field),op:WX(n.op),value:n.value}}})(t):t instanceof Nt?(function(n){const r=n.getFilters().map((i=>Cq(i)));return r.length===1?r[0]:{compositeFilter:{op:YX(n.op),filters:r}}})(t):Ce(54877,{filter:t})}function JX(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Iq(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,n,r,i,o=Ve.min(),s=Ve.min(),l=gn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new qs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rq{constructor(e){this.yt=e}}function QX(t,e){let n;if(e.document)n=wq(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=we.fromSegments(e.noDocument.path),i=Zu(e.noDocument.readTime);n=Jt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ce(56709);{const r=we.fromSegments(e.unknownDocument.path),i=Zu(e.unknownDocument.version);n=Jt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime((function(i){const o=new xt(i[0],i[1]);return Ve.fromTimestamp(o)})(e.readTime)),n}function tk(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:r_(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(o,s){return{name:hm(o,s.key),fields:s.data.value.mapValue.fields,updateTime:rd(o,s.version.toTimestamp()),createTime:rd(o,s.createTime.toTimestamp())}})(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Xu(e.version)};else{if(!e.isUnknownDocument())return Ce(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Xu(e.version)}}return r}function r_(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Xu(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Zu(t){const e=new xt(t.seconds,t.nanoseconds);return Ve.fromTimestamp(e)}function Cu(t,e){const n=(e.baseMutations||[]).map((o=>dA(t.yt,o)));for(let o=0;o<e.mutations.length-1;++o){const s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const l=e.mutations[o+1];s.updateTransforms=l.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const r=e.mutations.map((o=>dA(t.yt,o))),i=xt.fromMillis(e.localWriteTimeMs);return new PC(e.batchId,i,n,r)}function Ip(t){const e=Zu(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Zu(t.lastLimboFreeSnapshotVersion):Ve.min();let r;return r=(function(o){return o.documents!==void 0})(t.query)?(function(o){const s=o.documents.length;return ke(s===1,1966,{count:s}),zr(Pd(Tq(o.documents[0])))})(t.query):(function(o){return zr(Aq(o))})(t.query),new qs(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,gn.fromBase64String(t.resumeToken))}function Pq(t,e){const n=Xu(e.snapshotVersion),r=Xu(e.lastLimboFreeSnapshotVersion);let i;i=e_(e.target)?bq(t.yt,e.target):Sq(t.yt,e.target).ft;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Yu(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function OC(t){const e=Aq({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?n_(e,e.limit,"L"):e}function Hw(t,e){return new MC(e.largestBatchId,dA(t.yt,e.overlayMutation))}function nk(t,e){const n=e.path.lastSegment();return[t,Rr(e.path.popLast()),n]}function rk(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Xu(r.readTime),documentKey:Rr(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XX{getBundleMetadata(e,n){return ik(e).get(n).next((r=>{if(r)return(function(o){return{id:o.bundleId,createTime:Zu(o.createTime),version:o.version}})(r)}))}saveBundleMetadata(e,n){return ik(e).put((function(i){return{bundleId:i.id,createTime:Xu(xn(i.createTime)),version:i.version}})(n))}getNamedQuery(e,n){return ok(e).get(n).next((r=>{if(r)return(function(o){return{name:o.name,query:OC(o.bundledQuery),readTime:Zu(o.readTime)}})(r)}))}saveNamedQuery(e,n){return ok(e).put((function(i){return{name:i.name,readTime:Xu(xn(i.readTime)),bundledQuery:i.bundledQuery}})(n))}}function ik(t){return zn(t,T0)}function ok(t){return zn(t,E0)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new I0(e,r)}getOverlay(e,n){return sp(e).get(nk(this.userId,n)).next((r=>r?Hw(this.serializer,r):null))}getOverlays(e,n){const r=Zo();return Q.forEach(n,(i=>this.getOverlay(e,i).next((o=>{o!==null&&r.set(i,o)})))).next((()=>r))}saveOverlays(e,n,r){const i=[];return r.forEach(((o,s)=>{const l=new MC(n,s);i.push(this.St(e,l))})),Q.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach((s=>i.add(Rr(s.getCollectionPath()))));const o=[];return i.forEach((s=>{const l=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(sp(e).Z(tA,l))})),Q.waitFor(o)}getOverlaysForCollection(e,n,r){const i=Zo(),o=Rr(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return sp(e).J(tA,s).next((l=>{for(const c of l){const f=Hw(this.serializer,c);i.set(f.getKey(),f)}return i}))}getOverlaysForCollectionGroup(e,n,r,i){const o=Zo();let s;const l=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return sp(e).ee({index:RB,range:l},((c,f,h)=>{const g=Hw(this.serializer,f);o.size()<i||g.largestBatchId===s?(o.set(g.getKey(),g),s=g.largestBatchId):h.done()})).next((()=>o))}St(e,n){return sp(e).put((function(i,o,s){const[l,c,f]=nk(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:f,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:pm(i.yt,s.mutation)}})(this.serializer,this.userId,n))}}function sp(t){return zn(t,w0)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZX{bt(e){return zn(e,EC)}getSessionToken(e){return this.bt(e).get("sessionToken").next((n=>{const r=n==null?void 0:n.value;return r?gn.fromUint8Array(r):gn.EMPTY_BYTE_STRING}))}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(nn(e.integerValue));else if("doubleValue"in e){const r=nn(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),om(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=ea(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(ta(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?qB(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):A0(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):Ce(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){var s,l;const r=e.fields||{};this.Ft(n,53);const i=Xf,o=((l=(s=r[i].arrayValue)==null?void 0:s.values)==null?void 0:l.length)||0;this.Ft(n,15),n.Mt(nn(o)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),we.fromName(e).path.forEach((r=>{this.Ft(n,60),this.Ut(r,n)}))}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}Iu.Kt=new Iu;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pf=255;function eZ(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function sk(t){const e=64-(function(r){let i=0;for(let o=0;o<8;++o){const s=eZ(255&r[o]);if(i+=s,s!==8)break}return i})(t);return Math.ceil(e/8)}class tZ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=n.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const n=this.en(e),r=sk(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=sk(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(pf),this.sn(255)}_n(){this.an(pf),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=(function(o){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)})(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===pf?(this.sn(pf),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===pf?(this.an(pf),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class nZ{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class rZ{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class ap{constructor(){this.cn=new tZ,this.ln=new nZ(this.cn),this.hn=new rZ(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e,n,r,i){this.Tn=e,this.In=n,this.En=r,this.dn=i}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new Ru(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:Mv(this.En),directionalValue:Mv(this.dn),orderedDocumentKey:Mv(n),documentKey:r.path.toArray()}}Vn(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function Qa(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=ak(t.En,e.En),n!==0?n:(n=ak(t.dn,e.dn),n!==0?n:we.comparator(t.In,e.In)))}function ak(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function Mv(t){return H4()?(function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r})(t):t}function lk(t){return typeof t!="string"?t:(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(t)}class uk{constructor(e){this.mn=new Mt(((n,r)=>rn.comparator(n.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(ke(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=XS(e);if(n!==void 0&&!this.wn(n))return!1;const r=Eu(e);let i=new Set,o=0,s=0;for(;o<r.length&&this.wn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.mn.size>0){const l=this.mn.getIterator().getNext();if(!i.has(l.field.canonicalString())){const c=r[o];if(!this.Sn(l,c)||!this.bn(this.fn[s++],c))return!1}++o}for(;o<r.length;++o){const l=r[o];if(s>=this.fn.length||!this.bn(this.fn[s++],l))return!1}return!0}Dn(){if(this.pn)return null;let e=new Mt(rn.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Sv(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Sv(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Sv(r.field,r.dir==="asc"?0:1)));return new Yv(Yv.UNKNOWN_ID,this.collectionId,n,im.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nq(t){var n,r;if(ke(t instanceof lt||t instanceof Nt,20012),t instanceof lt){if(t instanceof JB){const i=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map((o=>lt.create(t.field,"==",o))))||[];return Nt.create(i,"or")}return t}const e=t.filters.map((i=>Nq(i)));return Nt.create(e,t.op)}function iZ(t){if(t.getFilters().length===0)return[];const e=mA(Nq(t));return ke(Mq(e),7391),hA(e)||pA(e)?[e]:e.getFilters()}function hA(t){return t instanceof lt}function pA(t){return t instanceof Nt&&AC(t)}function Mq(t){return hA(t)||pA(t)||(function(n){if(n instanceof Nt&&oA(n)){for(const r of n.getFilters())if(!hA(r)&&!pA(r))return!1;return!0}return!1})(t)}function mA(t){if(ke(t instanceof lt||t instanceof Nt,34018),t instanceof lt)return t;if(t.filters.length===1)return mA(t.filters[0]);const e=t.filters.map((r=>mA(r)));let n=Nt.create(e,t.op);return n=i_(n),Mq(n)?n:(ke(n instanceof Nt,64498),ke(ed(n),40251),ke(n.filters.length>1,57927),n.filters.reduce(((r,i)=>LC(r,i))))}function LC(t,e){let n;return ke(t instanceof lt||t instanceof Nt,38388),ke(e instanceof lt||e instanceof Nt,25473),n=t instanceof lt?e instanceof lt?(function(i,o){return Nt.create([i,o],"and")})(t,e):ck(t,e):e instanceof lt?ck(e,t):(function(i,o){if(ke(i.filters.length>0&&o.filters.length>0,48005),ed(i)&&ed(o))return KB(i,o.getFilters());const s=oA(i)?i:o,l=oA(i)?o:i,c=s.filters.map((f=>LC(f,l)));return Nt.create(c,"or")})(t,e),i_(n)}function ck(t,e){if(ed(e))return KB(e,t.getFilters());{const n=e.filters.map((r=>LC(t,r)));return Nt.create(n,"or")}}function i_(t){if(ke(t instanceof lt||t instanceof Nt,11850),t instanceof lt)return t;const e=t.getFilters();if(e.length===1)return i_(e[0]);if(GB(t))return t;const n=e.map((i=>i_(i))),r=[];return n.forEach((i=>{i instanceof lt?r.push(i):i instanceof Nt&&(i.op===t.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:Nt.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oZ{constructor(){this.Cn=new VC}addToCollectionParentIndex(e,n){return this.Cn.add(n),Q.resolve()}getCollectionParents(e,n){return Q.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Q.resolve()}deleteFieldIndex(e,n){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,n){return Q.resolve()}getDocumentsMatchingTarget(e,n){return Q.resolve(null)}getIndexType(e,n){return Q.resolve(0)}getFieldIndexes(e,n){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,n){return Q.resolve(Si.min())}getMinOffsetFromCollectionGroup(e,n){return Q.resolve(Si.min())}updateCollectionGroup(e,n,r){return Q.resolve()}updateIndexEntries(e,n){return Q.resolve()}}class VC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Mt(st.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Mt(st.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk="IndexedDbIndexManager",jy=new Uint8Array(0);class sZ{constructor(e,n){this.databaseId=n,this.vn=new VC,this.Fn=new ca((r=>Yu(r)),((r,i)=>Gm(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener((()=>{this.vn.add(n)}));const o={collectionId:r,parent:Rr(i)};return dk(e).put(o)}return Q.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[pB(n),""],!1,!0);return dk(e).J(i).next((o=>{for(const s of o){if(s.collectionId!==n)break;r.push(Xo(s.parent))}return r}))}addFieldIndex(e,n){const r=lp(e),i=(function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map((c=>[c.fieldPath.canonicalString(),c.kind]))}})(n);delete i.indexId;const o=r.add(i);if(n.indexState){const s=gf(e);return o.next((l=>{s.put(rk(l,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return o.next()}deleteFieldIndex(e,n){const r=lp(e),i=gf(e),o=mf(e);return r.delete(n.indexId).next((()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const n=lp(e),r=mf(e),i=gf(e);return n.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,n){return Q.forEach(this.Mn(n),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const o=new uk(r).Dn();if(o!=null)return this.addFieldIndex(e,o)}}))))}getDocumentsMatchingTarget(e,n){const r=mf(e);let i=!0;const o=new Map;return Q.forEach(this.Mn(n),(s=>this.xn(e,s).next((l=>{i&&(i=!!l),o.set(s,l)})))).next((()=>{if(i){let s=Je();const l=[];return Q.forEach(o,((c,f)=>{ge(fk,`Using index ${(function(k){return`id=${k.indexId}|cg=${k.collectionGroup}|f=${k.fields.map((q=>`${q.fieldPath}:${q.kind}`)).join(",")}`})(c)} to execute ${Yu(n)}`);const h=(function(k,q){const $=XS(q);if($===void 0)return null;for(const H of t_(k,$.fieldPath))switch(H.op){case"array-contains-any":return H.value.arrayValue.values||[];case"array-contains":return[H.value]}return null})(f,c),g=(function(k,q){const $=new Map;for(const H of Eu(q))for(const M of t_(k,H.fieldPath))switch(M.op){case"==":case"in":$.set(H.fieldPath.canonicalString(),M.value);break;case"not-in":case"!=":return $.set(H.fieldPath.canonicalString(),M.value),Array.from($.values())}return null})(f,c),v=(function(k,q){const $=[];let H=!0;for(const M of Eu(q)){const O=M.kind===0?zD(k,M.fieldPath,k.startAt):HD(k,M.fieldPath,k.startAt);$.push(O.value),H&&(H=O.inclusive)}return new El($,H)})(f,c),E=(function(k,q){const $=[];let H=!0;for(const M of Eu(q)){const O=M.kind===0?HD(k,M.fieldPath,k.endAt):zD(k,M.fieldPath,k.endAt);$.push(O.value),H&&(H=O.inclusive)}return new El($,H)})(f,c),b=this.On(c,f,v),S=this.On(c,f,E),A=this.Nn(c,f,g),C=this.Bn(c.indexId,h,b,v.inclusive,S,E.inclusive,A);return Q.forEach(C,(D=>r.Y(D,n.limit).next((k=>{k.forEach((q=>{const $=we.fromSegments(q.documentKey);s.has($)||(s=s.add($),l.push($))}))}))))})).next((()=>l))}return Q.resolve(null)}))}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=iZ(Nt.create(e.filters,"and")).map((r=>aA(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,n),n)}Bn(e,n,r,i,o,s,l){const c=(n!=null?n.length:1)*Math.max(r.length,o.length),f=c/(n!=null?n.length:1),h=[];for(let g=0;g<c;++g){const v=n?this.Ln(n[g/f]):jy,E=this.kn(e,v,r[g%f],i),b=this.qn(e,v,o[g%f],s),S=l.map((A=>this.kn(e,v,A,!0)));h.push(...this.createRange(E,b,S))}return h}kn(e,n,r,i){const o=new Ru(e,we.empty(),n,r);return i?o:o.An()}qn(e,n,r,i){const o=new Ru(e,we.empty(),n,r);return i?o.An():o}xn(e,n){const r=new uk(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next((o=>{let s=null;for(const l of o)r.yn(l)&&(!s||l.fields.length>s.fields.length)&&(s=l);return s}))}getIndexType(e,n){let r=2;const i=this.Mn(n);return Q.forEach(i,(o=>this.xn(e,o).next((s=>{s?r!==0&&s.fields.length<(function(c){let f=new Mt(rn.comparator),h=!1;for(const g of c.filters)for(const v of g.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?h=!0:f=f.add(v.field));for(const g of c.orderBy)g.field.isKeyField()||(f=f.add(g.field));return f.size+(h?1:0)})(o)&&(r=1):r=0})))).next((()=>(function(s){return s.limit!==null})(n)&&i.length>1&&r===2?1:r))}Qn(e,n){const r=new ap;for(const i of Eu(e)){const o=n.data.field(i.fieldPath);if(o==null)return null;const s=r.Pn(i.kind);Iu.Kt.Dt(o,s)}return r.un()}Ln(e){const n=new ap;return Iu.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new ap;return Iu.Kt.Dt(Wu(this.databaseId,n),r.Pn((function(o){const s=Eu(o);return s.length===0?0:s[s.length-1].kind})(e))),r.un()}Nn(e,n,r){if(r===null)return[];let i=[];i.push(new ap);let o=0;for(const s of Eu(e)){const l=r[o++];for(const c of i)if(this.Un(n,s.fieldPath)&&fm(l))i=this.Kn(i,s,l);else{const f=c.Pn(s.kind);Iu.Kt.Dt(l,f)}}return this.Wn(i)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const i=[...e],o=[];for(const s of r.arrayValue.values||[])for(const l of i){const c=new ap;c.seed(l.un()),Iu.Kt.Dt(s,c.Pn(n.kind)),o.push(c)}return o}Un(e,n){return!!e.filters.find((r=>r instanceof lt&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,n){const r=lp(e),i=gf(e);return(n?r.J(eA,IDBKeyRange.bound(n,n)):r.J()).next((o=>{const s=[];return Q.forEach(o,(l=>i.get([l.indexId,this.uid]).next((c=>{s.push((function(h,g){const v=g?new im(g.sequenceNumber,new Si(Zu(g.readTime),new we(Xo(g.documentKey)),g.largestBatchId)):im.empty(),E=h.fields.map((([b,S])=>new Sv(rn.fromServerFormat(b),S)));return new Yv(h.indexId,h.collectionGroup,E,v)})(l,c))})))).next((()=>s))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((n=>n.length===0?null:(n.sort(((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:Ke(r.collectionGroup,i.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(e,n,r){const i=lp(e),o=gf(e);return this.Gn(e).next((s=>i.J(eA,IDBKeyRange.bound(n,n)).next((l=>Q.forEach(l,(c=>o.put(rk(c.indexId,this.uid,s,r))))))))}updateIndexEntries(e,n){const r=new Map;return Q.forEach(n,((i,o)=>{const s=r.get(i.collectionGroup);return(s?Q.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next((l=>(r.set(i.collectionGroup,l),Q.forEach(l,(c=>this.zn(e,i,c).next((f=>{const h=this.jn(o,c);return f.isEqual(h)?Q.resolve():this.Jn(e,o,c,f,h)})))))))}))}Hn(e,n,r,i){return mf(e).put(i.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,i){return mf(e).delete(i.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const i=mf(e);let o=new Mt(Qa);return i.ee({index:IB,range:IDBKeyRange.only([r.indexId,this.uid,Mv(this.$n(r,n))])},((s,l)=>{o=o.add(new Ru(r.indexId,n,lk(l.arrayValue),lk(l.directionalValue)))})).next((()=>o))}jn(e,n){let r=new Mt(Qa);const i=this.Qn(n,e);if(i==null)return r;const o=XS(n);if(o!=null){const s=e.data.field(o.fieldPath);if(fm(s))for(const l of s.arrayValue.values||[])r=r.add(new Ru(n.indexId,e.key,this.Ln(l),i))}else r=r.add(new Ru(n.indexId,e.key,jy,i));return r}Jn(e,n,r,i,o){ge(fk,"Updating index entries for document '%s'",n.key);const s=[];return(function(c,f,h,g,v){const E=c.getIterator(),b=f.getIterator();let S=hf(E),A=hf(b);for(;S||A;){let C=!1,D=!1;if(S&&A){const k=h(S,A);k<0?D=!0:k>0&&(C=!0)}else S!=null?D=!0:C=!0;C?(g(A),A=hf(b)):D?(v(S),S=hf(E)):(S=hf(E),A=hf(b))}})(i,o,Qa,(l=>{s.push(this.Hn(e,n,r,l))}),(l=>{s.push(this.Yn(e,n,r,l))})),Q.waitFor(s)}Gn(e){let n=1;return gf(e).ee({index:CB,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,o)=>{o.done(),n=i.sequenceNumber+1})).next((()=>n))}createRange(e,n,r){r=r.sort(((s,l)=>Qa(s,l))).filter(((s,l,c)=>!l||Qa(s,c[l-1])!==0));const i=[];i.push(e);for(const s of r){const l=Qa(s,e),c=Qa(s,n);if(l===0)i[0]=e.An();else if(l>0&&c<0)i.push(s),i.push(s.An());else if(c>0)break}i.push(n);const o=[];for(let s=0;s<i.length;s+=2){if(this.Zn(i[s],i[s+1]))return[];const l=i[s].Vn(this.uid,jy,we.empty()),c=i[s+1].Vn(this.uid,jy,we.empty());o.push(IDBKeyRange.bound(l,c))}return o}Zn(e,n){return Qa(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(hk)}getMinOffset(e,n){return Q.mapArray(this.Mn(n),(r=>this.xn(e,r).next((i=>i||Ce(44426))))).next(hk)}}function dk(t){return zn(t,lm)}function mf(t){return zn(t,qp)}function lp(t){return zn(t,TC)}function gf(t){return zn(t,Bp)}function hk(t){ke(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;yC(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Si(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Dq=41943040;class Sr{static withCacheSize(e){return new Sr(e,Sr.DEFAULT_COLLECTION_PERCENTILE,Sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kq(t,e,n){const r=t.store(lo),i=t.store(Wf),o=[],s=IDBKeyRange.only(n.batchId);let l=0;const c=r.ee({range:s},((h,g,v)=>(l++,v.delete())));o.push(c.next((()=>{ke(l===1,47070,{batchId:n.batchId})})));const f=[];for(const h of n.mutations){const g=SB(e,h.key.path,n.batchId);o.push(i.delete(g)),f.push(h.key)}return Q.waitFor(o).next((()=>f))}function o_(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ce(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sr.DEFAULT_COLLECTION_PERCENTILE=10,Sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sr.DEFAULT=new Sr(Dq,Sr.DEFAULT_COLLECTION_PERCENTILE,Sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sr.DISABLED=new Sr(-1,0,0);class R0{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,n,r,i){ke(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new R0(o,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Xa(e).ee({index:Mu,range:r},((i,o,s)=>{n=!1,s.done()})).next((()=>n))}addMutationBatch(e,n,r,i){const o=Sf(e),s=Xa(e);return s.add({}).next((l=>{ke(typeof l=="number",49019);const c=new PC(l,n,r,i),f=(function(E,b,S){const A=S.baseMutations.map((D=>pm(E.yt,D))),C=S.mutations.map((D=>pm(E.yt,D)));return{userId:b,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:A,mutations:C}})(this.serializer,this.userId,c),h=[];let g=new Mt(((v,E)=>Ke(v.canonicalString(),E.canonicalString())));for(const v of i){const E=SB(this.userId,v.key.path,l);g=g.add(v.key.path.popLast()),h.push(s.put(f)),h.push(o.put(E,BQ))}return g.forEach((v=>{h.push(this.indexManager.addToCollectionParentIndex(e,v))})),e.addOnCommittedListener((()=>{this.Xn[l]=c.keys()})),Q.waitFor(h).next((()=>c))}))}lookupMutationBatch(e,n){return Xa(e).get(n).next((r=>r?(ke(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),Cu(this.serializer,r)):null))}er(e,n){return this.Xn[n]?Q.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next((r=>{if(r){const i=r.keys();return this.Xn[n]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return Xa(e).ee({index:Mu,range:i},((s,l,c)=>{l.userId===this.userId&&(ke(l.batchId>=r,47524,{tr:r}),o=Cu(this.serializer,l)),c.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=cl;return Xa(e).ee({index:Mu,range:n,reverse:!0},((i,o,s)=>{r=o.batchId,s.done()})).next((()=>r))}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,cl],[this.userId,Number.POSITIVE_INFINITY]);return Xa(e).J(Mu,n).next((r=>r.map((i=>Cu(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Av(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return Sf(e).ee({range:i},((s,l,c)=>{const[f,h,g]=s,v=Xo(h);if(f===this.userId&&n.path.isEqual(v))return Xa(e).get(g).next((E=>{if(!E)throw Ce(61480,{nr:s,batchId:g});ke(E.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:E.userId,batchId:g}),o.push(Cu(this.serializer,E))}));c.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Mt(Ke);const i=[];return n.forEach((o=>{const s=Av(this.userId,o.path),l=IDBKeyRange.lowerBound(s),c=Sf(e).ee({range:l},((f,h,g)=>{const[v,E,b]=f,S=Xo(E);v===this.userId&&o.path.isEqual(S)?r=r.add(b):g.done()}));i.push(c)})),Q.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,o=Av(this.userId,r),s=IDBKeyRange.lowerBound(o);let l=new Mt(Ke);return Sf(e).ee({range:s},((c,f,h)=>{const[g,v,E]=c,b=Xo(v);g===this.userId&&r.isPrefixOf(b)?b.length===i&&(l=l.add(E)):h.done()})).next((()=>this.rr(e,l)))}rr(e,n){const r=[],i=[];return n.forEach((o=>{i.push(Xa(e).get(o).next((s=>{if(s===null)throw Ce(35274,{batchId:o});ke(s.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:s.userId,batchId:o}),r.push(Cu(this.serializer,s))})))})),Q.waitFor(i).next((()=>r))}removeMutationBatch(e,n){return kq(e.le,this.userId,n).next((r=>(e.addOnCommittedListener((()=>{this.ir(n.batchId)})),Q.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((n=>{if(!n)return Q.resolve();const r=IDBKeyRange.lowerBound((function(s){return[s]})(this.userId)),i=[];return Sf(e).ee({range:r},((o,s,l)=>{if(o[0]===this.userId){const c=Xo(o[1]);i.push(c)}else l.done()})).next((()=>{ke(i.length===0,56720,{sr:i.map((o=>o.canonicalString()))})}))}))}containsKey(e,n){return Oq(e,this.userId,n)}_r(e){return Lq(e).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:cl,lastStreamToken:""}))}}function Oq(t,e,n){const r=Av(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return Sf(t).ee({range:o,X:!0},((l,c,f)=>{const[h,g,v]=l;h===e&&g===i&&(s=!0),f.done()})).next((()=>s))}function Xa(t){return zn(t,lo)}function Sf(t){return zn(t,Wf)}function Lq(t){return zn(t,sm)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ec(0)}static cr(){return new ec(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aZ{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next((n=>{const r=new ec(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((n=>Ve.fromTimestamp(new xt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(e,n,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.hr(e,i))))}addTargetData(e,n){return this.Pr(e,n).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next((()=>yf(e).delete(n.targetId))).next((()=>this.lr(e))).next((r=>(ke(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,n,r){let i=0;const o=[];return yf(e).ee(((s,l)=>{const c=Ip(l);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))})).next((()=>Q.waitFor(o))).next((()=>i))}forEachTarget(e,n){return yf(e).ee(((r,i)=>{const o=Ip(i);n(o)}))}lr(e){return mk(e).get(Xv).next((n=>(ke(n!==null,2888),n)))}hr(e,n){return mk(e).put(Xv,n)}Pr(e,n){return yf(e).put(Pq(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((n=>n.targetCount))}getTargetData(e,n){const r=Yu(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return yf(e).ee({range:i,index:xB},((s,l,c)=>{const f=Ip(l);Gm(n,f.target)&&(o=f,c.done())})).next((()=>o))}addMatchingKeys(e,n,r){const i=[],o=nl(e);return n.forEach((s=>{const l=Rr(s.path);i.push(o.put({targetId:r,path:l})),i.push(this.referenceDelegate.addReference(e,r,s))})),Q.waitFor(i)}removeMatchingKeys(e,n,r){const i=nl(e);return Q.forEach(n,(o=>{const s=Rr(o.path);return Q.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])}))}removeMatchingKeysForTargetId(e,n){const r=nl(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=nl(e);let o=Je();return i.ee({range:r,X:!0},((s,l,c)=>{const f=Xo(s[1]),h=new we(f);o=o.add(h)})).next((()=>o))}containsKey(e,n){const r=Rr(n.path),i=IDBKeyRange.bound([r],[pB(r)],!1,!0);let o=0;return nl(e).ee({index:_C,X:!0,range:i},(([s,l],c,f)=>{s!==0&&(o++,f.done())})).next((()=>o>0))}At(e,n){return yf(e).get(n).next((r=>r?Ip(r):null))}}function yf(t){return zn(t,Yf)}function mk(t){return zn(t,Bu)}function nl(t){return zn(t,Jf)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk="LruGarbageCollector",lZ=1048576;function yk([t,e],[n,r]){const i=Ke(t,n);return i===0?Ke(e,r):i}class uZ{constructor(e){this.Ir=e,this.buffer=new Mt(yk),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();yk(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Vq{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ge(gk,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Nl(n)?ge(gk,"Ignoring IndexedDB error during garbage collection: ",n):await Pl(n)}await this.Vr(3e5)}))}}class cZ{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return Q.resolve(Zr.ce);const r=new uZ(n);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(pk)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pk):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,o,s,l,c,f;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,s=Date.now(),this.nthSequenceNumber(e,i)))).next((g=>(r=g,l=Date.now(),this.removeTargets(e,r,n)))).next((g=>(o=g,c=Date.now(),this.removeOrphanedDocuments(e,r)))).next((g=>(f=Date.now(),Tf()<=ot.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(l-s)+`ms
	Removed ${o} targets in `+(c-l)+`ms
	Removed ${g} documents in `+(f-c)+`ms
Total Duration: ${f-h}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:g}))))}}function Uq(t,e){return new cZ(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fZ{constructor(e,n){this.db=e,this.garbageCollector=Uq(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,((r,i)=>n(i)))}addReference(e,n,r){return Ky(e,r)}removeReference(e,n,r){return Ky(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Ky(e,n)}br(e,n){return(function(i,o){let s=!1;return Lq(i).te((l=>Oq(i,l,o).next((c=>(c&&(s=!0),Q.resolve(!c)))))).next((()=>s))})(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Sr(e,((s,l)=>{if(l<=n){const c=this.br(e,s).next((f=>{if(!f)return o++,r.getEntry(e,s).next((()=>(r.removeEntry(s,Ve.min()),nl(e).delete((function(g){return[0,Rr(g.path)]})(s)))))}));i.push(c)}})).next((()=>Q.waitFor(i))).next((()=>r.apply(e))).next((()=>o))}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Ky(e,n)}Sr(e,n){const r=nl(e);let i,o=Zr.ce;return r.ee({index:_C},(([s,l],{path:c,sequenceNumber:f})=>{s===0?(o!==Zr.ce&&n(new we(Xo(i)),o),o=f,i=c):o=Zr.ce})).next((()=>{o!==Zr.ce&&n(new we(Xo(i)),o)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ky(t,e){return nl(t).put((function(r,i){return{targetId:0,path:Rr(r.path),sequenceNumber:i}})(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fq{constructor(){this.changes=new ca((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Jt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dZ{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return vu(e).put(r)}removeEntry(e,n,r){return vu(e).delete((function(o,s){const l=o.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],r_(s),l[l.length-1]]})(n,r))}updateMetadata(e,n){return this.getMetadata(e).next((r=>(r.byteSize+=n,this.Dr(e,r))))}getEntry(e,n){let r=Jt.newInvalidDocument(n);return vu(e).ee({index:xv,range:IDBKeyRange.only(up(n))},((i,o)=>{r=this.Cr(n,o)})).next((()=>r))}vr(e,n){let r={size:0,document:Jt.newInvalidDocument(n)};return vu(e).ee({index:xv,range:IDBKeyRange.only(up(n))},((i,o)=>{r={document:this.Cr(n,o),size:o_(o)}})).next((()=>r))}getEntries(e,n){let r=ti();return this.Fr(e,n,((i,o)=>{const s=this.Cr(i,o);r=r.insert(i,s)})).next((()=>r))}Mr(e,n){let r=ti(),i=new Gt(we.comparator);return this.Fr(e,n,((o,s)=>{const l=this.Cr(o,s);r=r.insert(o,l),i=i.insert(o,o_(s))})).next((()=>({documents:r,Or:i})))}Fr(e,n,r){if(n.isEmpty())return Q.resolve();let i=new Mt(Tk);n.forEach((c=>i=i.add(c)));const o=IDBKeyRange.bound(up(i.first()),up(i.last())),s=i.getIterator();let l=s.getNext();return vu(e).ee({index:xv,range:o},((c,f,h)=>{const g=we.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;l&&Tk(l,g)<0;)r(l,null),l=s.getNext();l&&l.isEqual(g)&&(r(l,f),l=s.hasNext()?s.getNext():null),l?h.j(up(l)):h.done()})).next((()=>{for(;l;)r(l,null),l=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,n,r,i,o){const s=n.path,l=[s.popLast().toArray(),s.lastSegment(),r_(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return vu(e).J(IDBKeyRange.bound(l,c,!0)).next((f=>{o==null||o.incrementDocumentReadCount(f.length);let h=ti();for(const g of f){const v=this.Cr(we.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);v.isFoundDocument()&&(Km(n,v)||i.has(v.key))&&(h=h.insert(v.key,v))}return h}))}getAllFromCollectionGroup(e,n,r,i){let o=ti();const s=_k(n,r),l=_k(n,Si.max());return vu(e).ee({index:AB,range:IDBKeyRange.bound(s,l,!0)},((c,f,h)=>{const g=this.Cr(we.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);o=o.insert(g.key,g),o.size===i&&h.done()})).next((()=>o))}newChangeBuffer(e){return new hZ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((n=>n.byteSize))}getMetadata(e){return vk(e).get(ZS).next((n=>(ke(!!n,20021),n)))}Dr(e,n){return vk(e).put(ZS,n)}Cr(e,n){if(n){const r=QX(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Ve.min())))return r}return Jt.newInvalidDocument(e)}}function Bq(t){return new dZ(t)}class hZ extends Fq{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new ca((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const n=[];let r=0,i=new Mt(((o,s)=>Ke(o.canonicalString(),s.canonicalString())));return this.changes.forEach(((o,s)=>{const l=this.Br.get(o);if(n.push(this.Nr.removeEntry(e,o,l.readTime)),s.isValidDocument()){const c=tk(this.Nr.serializer,s);i=i.add(o.path.popLast());const f=o_(c);r+=f-l.size,n.push(this.Nr.addEntry(e,o,c))}else if(r-=l.size,this.trackRemovals){const c=tk(this.Nr.serializer,s.convertToNoDocument(Ve.min()));n.push(this.Nr.addEntry(e,o,c))}})),i.forEach((o=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,o))})),n.push(this.Nr.updateMetadata(e,r)),Q.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next((r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next((({documents:r,Or:i})=>(i.forEach(((o,s)=>{this.Br.set(o,{size:s,readTime:r.get(o).readTime})})),r)))}}function vk(t){return zn(t,am)}function vu(t){return zn(t,Qv)}function up(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function _k(t,e){const n=e.documentKey.path.toArray();return[t,r_(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Tk(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=Ke(n[o],r[o]),i)return i;return i=Ke(n.length,r.length),i||(i=Ke(n[n.length-2],r[r.length-2]),i||Ke(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pZ{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qq{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&Hp(r.mutation,i,ei.empty(),xt.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Je()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Je()){const i=Zo();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((o=>{let s=xp();return o.forEach(((l,c)=>{s=s.insert(l,c.overlayedDocument)})),s}))))}getOverlayedDocuments(e,n){const r=Zo();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Je())))}populateOverlays(e,n,r){const i=[];return r.forEach((o=>{n.has(o)||i.push(o)})),this.documentOverlayCache.getOverlays(e,i).next((o=>{o.forEach(((s,l)=>{n.set(s,l)}))}))}computeViews(e,n,r,i){let o=ti();const s=zp(),l=(function(){return zp()})();return n.forEach(((c,f)=>{const h=r.get(f.key);i.has(f.key)&&(h===void 0||h.mutation instanceof fa)?o=o.insert(f.key,f):h!==void 0?(s.set(f.key,h.mutation.getFieldMask()),Hp(h.mutation,f,h.mutation.getFieldMask(),xt.now())):s.set(f.key,ei.empty())})),this.recalculateAndSaveOverlays(e,o).next((c=>(c.forEach(((f,h)=>s.set(f,h))),n.forEach(((f,h)=>l.set(f,new pZ(h,s.get(f)??null)))),l)))}recalculateAndSaveOverlays(e,n){const r=zp();let i=new Gt(((s,l)=>s-l)),o=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((s=>{for(const l of s)l.keys().forEach((c=>{const f=n.get(c);if(f===null)return;let h=r.get(c)||ei.empty();h=l.applyToLocalView(f,h),r.set(c,h);const g=(i.get(l.batchId)||Je()).add(c);i=i.insert(l.batchId,g)}))})).next((()=>{const s=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),f=c.key,h=c.value,g=rq();h.forEach((v=>{if(!o.has(v)){const E=cq(n.get(v),r.get(v));E!==null&&g.set(v,E),o=o.add(v)}})),s.push(this.documentOverlayCache.saveOverlays(e,f,g))}return Q.waitFor(s)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return we.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):xC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):Q.resolve(Zo());let l=Kf,c=o;return s.next((f=>Q.forEach(f,((h,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),o.get(h)?Q.resolve():this.remoteDocumentCache.getEntry(e,h).next((v=>{c=c.insert(h,v)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,c,f,Je()))).next((h=>({batchId:l,changes:nq(h)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new we(n)).next((r=>{let i=xp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=xp();return this.indexManager.getCollectionParents(e,o).next((l=>Q.forEach(l,(c=>{const f=(function(g,v){return new ua(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next((h=>{h.forEach(((g,v)=>{s=s.insert(g,v)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i)))).next((s=>{o.forEach(((c,f)=>{const h=f.getKey();s.get(h)===null&&(s=s.insert(h,Jt.newInvalidDocument(h)))}));let l=xp();return s.forEach(((c,f)=>{const h=o.get(c);h!==void 0&&Hp(h.mutation,f,ei.empty(),xt.now()),Km(n,f)&&(l=l.insert(c,f))})),l}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mZ{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Q.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:xn(i.createTime)}})(n)),Q.resolve()}getNamedQuery(e,n){return Q.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:OC(i.bundledQuery),readTime:xn(i.readTime)}})(n)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gZ{constructor(){this.overlays=new Gt(we.comparator),this.qr=new Map}getOverlay(e,n){return Q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Zo();return Q.forEach(n,(i=>this.getOverlay(e,i).next((o=>{o!==null&&r.set(i,o)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,o)=>{this.St(e,n,o)})),Q.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(r)),Q.resolve()}getOverlaysForCollection(e,n,r){const i=Zo(),o=n.length+1,s=new we(n.child("")),l=this.overlays.getIteratorFrom(s);for(;l.hasNext();){const c=l.getNext().value,f=c.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return Q.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Gt(((f,h)=>f-h));const s=this.overlays.getIterator();for(;s.hasNext();){const f=s.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let h=o.get(f.largestBatchId);h===null&&(h=Zo(),o=o.insert(f.largestBatchId,h)),h.set(f.getKey(),f)}}const l=Zo(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((f,h)=>l.set(f,h))),!(l.size()>=i)););return Q.resolve(l)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new MC(n,r));let o=this.qr.get(n);o===void 0&&(o=Je(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yZ{constructor(){this.sessionToken=gn.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(){this.Qr=new Mt(Qn.$r),this.Ur=new Mt(Qn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Qn(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Qn(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new we(new st([])),r=new Qn(n,e),i=new Qn(n,e+1),o=[];return this.Ur.forEachInRange([r,i],(s=>{this.Gr(s),o.push(s.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new we(new st([])),r=new Qn(n,e),i=new Qn(n,e+1);let o=Je();return this.Ur.forEachInRange([r,i],(s=>{o=o.add(s.key)})),o}containsKey(e){const n=new Qn(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Qn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return we.comparator(e.key,n.key)||Ke(e.Yr,n.Yr)}static Kr(e,n){return Ke(e.Yr,n.Yr)||we.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vZ{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Mt(Qn.$r)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new PC(o,n,r,i);this.mutationQueue.push(s);for(const l of i)this.Zr=this.Zr.add(new Qn(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return Q.resolve(s)}lookupMutationBatch(e,n){return Q.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),o=i<0?0:i;return Q.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?cl:this.tr-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Qn(n,0),i=new Qn(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],(s=>{const l=this.Xr(s.Yr);o.push(l)})),Q.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Mt(Ke);return n.forEach((i=>{const o=new Qn(i,0),s=new Qn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],(l=>{r=r.add(l.Yr)}))})),Q.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;we.isDocumentKey(o)||(o=o.child(""));const s=new Qn(new we(o),0);let l=new Mt(Ke);return this.Zr.forEachWhile((c=>{const f=c.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(l=l.add(c.Yr)),!0)}),s),Q.resolve(this.ti(l))}ti(e){const n=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){ke(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Q.forEach(n.mutations,(i=>{const o=new Qn(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Qn(n,0),i=this.Zr.firstAfterOrEqual(r);return Q.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Z{constructor(e){this.ri=e,this.docs=(function(){return new Gt(we.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Q.resolve(r?r.document.mutableCopy():Jt.newInvalidDocument(n))}getEntries(e,n){let r=ti();return n.forEach((i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Jt.newInvalidDocument(i))})),Q.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=ti();const s=n.path,l=new we(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:f,value:{document:h}}=c.getNext();if(!s.isPrefixOf(f.path))break;f.path.length>s.length+1||yC(_B(h),r)<=0||(i.has(h.key)||Km(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return Q.resolve(o)}getAllFromCollectionGroup(e,n,r,i){Ce(9500)}ii(e,n){return Q.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new TZ(this)}getSize(e){return Q.resolve(this.size)}}class TZ extends Fq{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),Q.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EZ{constructor(e){this.persistence=e,this.si=new ca((n=>Yu(n)),Gm),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this.oi=0,this._i=new UC,this.targetCount=0,this.ai=ec.ur()}forEachTarget(e,n){return this.si.forEach(((r,i)=>n(i))),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),Q.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ec(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Q.resolve()}updateTargetData(e,n){return this.Pr(n),Q.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.si.forEach(((s,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)})),Q.waitFor(o).next((()=>i))}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return Q.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),Q.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach((s=>{o.push(i.markPotentiallyOrphaned(e,s))})),Q.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Q.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return Q.resolve(r)}containsKey(e,n){return Q.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e,n){this.ui={},this.overlays={},this.ci=new Zr(0),this.li=!1,this.li=!0,this.hi=new yZ,this.referenceDelegate=e(this),this.Pi=new EZ(this),this.indexManager=new oZ,this.remoteDocumentCache=(function(i){return new _Z(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new Rq(n),this.Ii=new mZ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new gZ,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new vZ(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ge("MemoryPersistence","Starting transaction:",e);const i=new wZ(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((o=>this.referenceDelegate.di(i).next((()=>o)))).toPromise().then((o=>(i.raiseOnCommittedEvent(),o)))}Ai(e,n){return Q.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class wZ extends EB{constructor(e){super(),this.currentSequenceNumber=e}}class P0{constructor(e){this.persistence=e,this.Ri=new UC,this.Vi=null}static mi(e){return new P0(e)}get fi(){if(this.Vi)return this.Vi;throw Ce(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),Q.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),Q.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Q.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((o=>this.fi.add(o.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.fi,(r=>{const i=we.fromPath(r);return this.gi(e,i).next((o=>{o||n.removeEntry(i,Ve.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return Q.or([()=>Q.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class s_{constructor(e,n){this.persistence=e,this.pi=new ca((r=>Rr(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=Uq(this,n)}static mi(e,n){return new s_(e,n)}Ei(){}di(e){return Q.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return Q.forEach(this.pi,((r,i)=>this.br(e,r,i).next((o=>o?Q.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,(s=>this.br(e,s,n).next((l=>{l||(r++,o.removeEntry(s,Ve.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Q.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Q.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Q.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Q.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Iv(e.data.value)),n}br(e,n,r){return Q.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return Q.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bZ{constructor(e){this.serializer=e}k(e,n,r,i){const o=new _0("createOrUpgrade",n);r<1&&i>=1&&((function(c){c.createObjectStore(Hm)})(e),(function(c){c.createObjectStore(sm,{keyPath:FQ}),c.createObjectStore(lo,{keyPath:ND,autoIncrement:!0}).createIndex(Mu,MD,{unique:!0}),c.createObjectStore(Wf)})(e),Ek(e),(function(c){c.createObjectStore(wu)})(e));let s=Q.resolve();return r<3&&i>=3&&(r!==0&&((function(c){c.deleteObjectStore(Jf),c.deleteObjectStore(Yf),c.deleteObjectStore(Bu)})(e),Ek(e)),s=s.next((()=>(function(c){const f=c.store(Bu),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ve.min().toTimestamp(),targetCount:0};return f.put(Xv,h)})(o)))),r<4&&i>=4&&(r!==0&&(s=s.next((()=>(function(c,f){return f.store(lo).J().next((g=>{c.deleteObjectStore(lo),c.createObjectStore(lo,{keyPath:ND,autoIncrement:!0}).createIndex(Mu,MD,{unique:!0});const v=f.store(lo),E=g.map((b=>v.put(b)));return Q.waitFor(E)}))})(e,o)))),s=s.next((()=>{(function(c){c.createObjectStore(Qf,{keyPath:WQ})})(e)}))),r<5&&i>=5&&(s=s.next((()=>this.yi(o)))),r<6&&i>=6&&(s=s.next((()=>((function(c){c.createObjectStore(am)})(e),this.wi(o))))),r<7&&i>=7&&(s=s.next((()=>this.Si(o)))),r<8&&i>=8&&(s=s.next((()=>this.bi(e,o)))),r<9&&i>=9&&(s=s.next((()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(s=s.next((()=>this.Di(o)))),r<11&&i>=11&&(s=s.next((()=>{(function(c){c.createObjectStore(T0,{keyPath:YQ})})(e),(function(c){c.createObjectStore(E0,{keyPath:JQ})})(e)}))),r<12&&i>=12&&(s=s.next((()=>{(function(c){const f=c.createObjectStore(w0,{keyPath:rX});f.createIndex(tA,iX,{unique:!1}),f.createIndex(RB,oX,{unique:!1})})(e)}))),r<13&&i>=13&&(s=s.next((()=>(function(c){const f=c.createObjectStore(Qv,{keyPath:qQ});f.createIndex(xv,$Q),f.createIndex(AB,zQ)})(e))).next((()=>this.Ci(e,o))).next((()=>e.deleteObjectStore(wu)))),r<14&&i>=14&&(s=s.next((()=>this.Fi(e,o)))),r<15&&i>=15&&(s=s.next((()=>(function(c){c.createObjectStore(TC,{keyPath:QQ,autoIncrement:!0}).createIndex(eA,XQ,{unique:!1}),c.createObjectStore(Bp,{keyPath:ZQ}).createIndex(CB,eX,{unique:!1}),c.createObjectStore(qp,{keyPath:tX}).createIndex(IB,nX,{unique:!1})})(e)))),r<16&&i>=16&&(s=s.next((()=>{n.objectStore(Bp).clear()})).next((()=>{n.objectStore(qp).clear()}))),r<17&&i>=17&&(s=s.next((()=>{(function(c){c.createObjectStore(EC,{keyPath:sX})})(e)}))),r<18&&i>=18&&H4()&&(s=s.next((()=>{n.objectStore(Bp).clear()})).next((()=>{n.objectStore(qp).clear()}))),s}wi(e){let n=0;return e.store(wu).ee(((r,i)=>{n+=o_(i)})).next((()=>{const r={byteSize:n};return e.store(am).put(ZS,r)}))}yi(e){const n=e.store(sm),r=e.store(lo);return n.J().next((i=>Q.forEach(i,(o=>{const s=IDBKeyRange.bound([o.userId,cl],[o.userId,o.lastAcknowledgedBatchId]);return r.J(Mu,s).next((l=>Q.forEach(l,(c=>{ke(c.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const f=Cu(this.serializer,c);return kq(e,o.userId,f).next((()=>{}))}))))}))))}Si(e){const n=e.store(Jf),r=e.store(wu);return e.store(Bu).get(Xv).next((i=>{const o=[];return r.ee(((s,l)=>{const c=new st(s),f=(function(g){return[0,Rr(g)]})(c);o.push(n.get(f).next((h=>h?Q.resolve():(g=>n.put({targetId:0,path:Rr(g),sequenceNumber:i.highestListenSequenceNumber}))(c))))})).next((()=>Q.waitFor(o)))}))}bi(e,n){e.createObjectStore(lm,{keyPath:KQ});const r=n.store(lm),i=new VC,o=s=>{if(i.add(s)){const l=s.lastSegment(),c=s.popLast();return r.put({collectionId:l,parent:Rr(c)})}};return n.store(wu).ee({X:!0},((s,l)=>{const c=new st(s);return o(c.popLast())})).next((()=>n.store(Wf).ee({X:!0},(([s,l,c],f)=>{const h=Xo(l);return o(h.popLast())}))))}Di(e){const n=e.store(Yf);return n.ee(((r,i)=>{const o=Ip(i),s=Pq(this.serializer,o);return n.put(s)}))}Ci(e,n){const r=n.store(wu),i=[];return r.ee(((o,s)=>{const l=n.store(Qv),c=(function(g){return g.document?new we(st.fromString(g.document.name).popFirst(5)):g.noDocument?we.fromSegments(g.noDocument.path):g.unknownDocument?we.fromSegments(g.unknownDocument.path):Ce(36783)})(s).path.toArray(),f={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(l.put(f))})).next((()=>Q.waitFor(i)))}Fi(e,n){const r=n.store(lo),i=Bq(this.serializer),o=new FC(P0.mi,this.serializer.yt);return r.J().next((s=>{const l=new Map;return s.forEach((c=>{let f=l.get(c.userId)??Je();Cu(this.serializer,c).keys().forEach((h=>f=f.add(h))),l.set(c.userId,f)})),Q.forEach(l,((c,f)=>{const h=new Zn(f),g=I0.wt(this.serializer,h),v=o.getIndexManager(h),E=R0.wt(h,this.serializer,v,o.referenceDelegate);return new qq(i,E,g,v).recalculateAndSaveOverlaysForDocumentKeys(new nA(n,Zr.ce),c).next()}))}))}}function Ek(t){t.createObjectStore(Jf,{keyPath:GQ}).createIndex(_C,jQ,{unique:!0}),t.createObjectStore(Yf,{keyPath:"targetId"}).createIndex(xB,HQ,{unique:!0}),t.createObjectStore(Bu)}const Za="IndexedDbPersistence",Gw=18e5,jw=5e3,Kw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",$q="main";class BC{constructor(e,n,r,i,o,s,l,c,f,h,g=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=o,this.window=s,this.document=l,this.xi=f,this.Oi=h,this.Ni=g,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=v=>Promise.resolve(),!BC.v())throw new pe(ie.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new fZ(this,i),this.$i=n+$q,this.serializer=new Rq(c),this.Ui=new ts(this.$i,this.Ni,new bZ(this.serializer)),this.hi=new ZX,this.Pi=new aZ(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Bq(this.serializer),this.Ii=new XX,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,h===!1&&An(Za,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new pe(ie.FAILED_PRECONDITION,Kw);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Zr(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async n=>{n.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Wy(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((n=>this.isPrimary&&!n?this.Zi(e).next((()=>!1)):!!n&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Nl(e))return ge(Za,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ge(Za,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return cp(e).get(df).next((n=>Q.resolve(this.es(n))))}ts(e){return Wy(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Gw)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const r=zn(n,Qf);return r.J().next((i=>{const o=this.ss(i,Gw),s=i.filter((l=>o.indexOf(l)===-1));return Q.forEach(s,(l=>r.delete(l.clientId))).next((()=>s))}))})).catch((()=>[]));if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?Q.resolve(!0):cp(e).get(df).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,jw)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new pe(ie.FAILED_PRECONDITION,Kw);return!1}}return!(!this.networkEnabled||!this.inForeground)||Wy(e).J().next((r=>this.ss(r,jw).find((i=>{if(this.clientId!==i.clientId){const o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,l=this.networkEnabled===i.networkEnabled;if(o||s&&l)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&ge(Za,`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Hm,Qf],(e=>{const n=new nA(e,Zr.ce);return this.Zi(n).next((()=>this.ts(n)))})),this.Ui.close(),this.Ps()}ss(e,n){return e.filter((r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Wy(e).J().next((n=>this.ss(n,Gw).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return R0.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new sZ(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return I0.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){ge(Za,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",o=(function(c){return c===18?uX:c===17?DB:c===16?lX:c===15?wC:c===14?MB:c===13?NB:c===12?aX:c===11?PB:void Ce(60245)})(this.Ni);let s;return this.Ui.runTransaction(e,i,o,(l=>(s=new nA(l,this.ci?this.ci.next():Zr.ce),n==="readwrite-primary"?this.Hi(s).next((c=>!!c||this.Yi(s))).next((c=>{if(!c)throw An(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new pe(ie.FAILED_PRECONDITION,TB);return r(s)})).next((c=>this.Xi(s).next((()=>c)))):this.Is(s).next((()=>r(s)))))).then((l=>(s.raiseOnCommittedEvent(),l)))}Is(e){return cp(e).get(df).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,jw)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new pe(ie.FAILED_PRECONDITION,Kw)}))}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return cp(e).put(df,n)}static v(){return ts.v()}Zi(e){const n=cp(e);return n.get(df).next((r=>this.es(r)?(ge(Za,"Releasing primary lease."),n.delete(df)):Q.resolve()))}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(An(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;z4()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return ge(Za,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return An(Za,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){An("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function cp(t){return zn(t,Hm)}function Wy(t){return zn(t,Qf)}function qC(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=Je(),i=Je();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new $C(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SZ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zq{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return z4()?8:wB(cn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.ys(e,n).next((s=>{o.result=s})).next((()=>{if(!o.result)return this.ws(e,n,i,r).next((s=>{o.result=s}))})).next((()=>{if(o.result)return;const s=new SZ;return this.Ss(e,n,s).next((l=>{if(o.result=l,this.Vs)return this.bs(e,n,s,l.size)}))})).next((()=>o.result))}bs(e,n,r,i){return r.documentReadCount<this.fs?(Tf()<=ot.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",Ef(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Q.resolve()):(Tf()<=ot.DEBUG&&ge("QueryEngine","Query:",Ef(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Tf()<=ot.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",Ef(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zr(n))):Q.resolve())}ys(e,n){if(GD(n))return Q.resolve(null);let r=zr(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=n_(n,null,"F"),r=zr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const s=Je(...o);return this.ps.getDocuments(e,s).next((l=>this.indexManager.getMinOffset(e,r).next((c=>{const f=this.Ds(n,l);return this.Cs(n,f,s,c.readTime)?this.ys(e,n_(n,null,"F")):this.vs(e,f,n,c)}))))})))))}ws(e,n,r,i){return GD(n)||i.isEqual(Ve.min())?Q.resolve(null):this.ps.getDocuments(e,r).next((o=>{const s=this.Ds(n,o);return this.Cs(n,s,r,i)?Q.resolve(null):(Tf()<=ot.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ef(n)),this.vs(e,s,n,vB(i,Kf)).next((l=>l)))}))}Ds(e,n){let r=new Mt(eq(e));return n.forEach(((i,o)=>{Km(e,o)&&(r=r.add(o))})),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,r){return Tf()<=ot.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",Ef(n)),this.ps.getDocumentsMatchingQuery(e,n,Si.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((o=>(n.forEach((s=>{o=o.insert(s.key,s)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC="LocalStore",AZ=3e8;class xZ{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Gt(Ke),this.xs=new ca((o=>Yu(o)),Gm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qq(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function Hq(t,e,n,r){return new xZ(t,e,n,r)}async function Gq(t,e){const n=Ae(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((o=>(i=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((o=>{const s=[],l=[];let c=Je();for(const f of i){s.push(f.batchId);for(const h of f.mutations)c=c.add(h.key)}for(const f of o){l.push(f.batchId);for(const h of f.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next((f=>({Ls:f,removedBatchIds:s,addedBatchIds:l})))}))}))}function CZ(t,e){const n=Ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(l,c,f,h){const g=f.batch,v=g.keys();let E=Q.resolve();return v.forEach((b=>{E=E.next((()=>h.getEntry(c,b))).next((S=>{const A=f.docVersions.get(b);ke(A!==null,48541),S.version.compareTo(A)<0&&(g.applyToRemoteDocument(S,f),S.isValidDocument()&&(S.setReadTime(f.commitVersion),h.addEntry(S)))}))})),E.next((()=>l.mutationQueue.removeMutationBatch(c,g)))})(n,r,e,o).next((()=>o.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(l){let c=Je();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(c=c.add(l.batch.mutations[f].key));return c})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function jq(t){const e=Ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function IZ(t,e){const n=Ae(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const l=[];e.targetChanges.forEach(((h,g)=>{const v=i.get(g);if(!v)return;l.push(n.Pi.removeMatchingKeys(o,h.removedDocuments,g).next((()=>n.Pi.addMatchingKeys(o,h.addedDocuments,g))));let E=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?E=E.withResumeToken(gn.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):h.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(h.resumeToken,r)),i=i.insert(g,E),(function(S,A,C){return S.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=AZ?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0})(v,E,h)&&l.push(n.Pi.updateTargetData(o,E))}));let c=ti(),f=Je();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))})),l.push(Kq(o,s,e.documentUpdates).next((h=>{c=h.ks,f=h.qs}))),!r.isEqual(Ve.min())){const h=n.Pi.getLastRemoteSnapshotVersion(o).next((g=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r)));l.push(h)}return Q.waitFor(l).next((()=>s.apply(o))).next((()=>n.localDocuments.getLocalViewOfDocuments(o,c,f))).next((()=>c))})).then((o=>(n.Ms=i,o)))}function Kq(t,e,n){let r=Je(),i=Je();return n.forEach((o=>r=r.add(o))),e.getEntries(t,r).next((o=>{let s=ti();return n.forEach(((l,c)=>{const f=o.get(l);c.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(Ve.min())?(e.removeEntry(l,c.readTime),s=s.insert(l,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(c),s=s.insert(l,c)):ge(zC,"Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",c.version)})),{ks:s,qs:i}}))}function RZ(t,e){const n=Ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=cl),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function id(t,e){const n=Ae(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Pi.getTargetData(r,e).next((o=>o?(i=o,Q.resolve(i)):n.Pi.allocateTargetId(r).next((s=>(i=new qs(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function od(t,e,n){const r=Ae(t),i=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Nl(s))throw s;ge(zC,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function a_(t,e,n){const r=Ae(t);let i=Ve.min(),o=Je();return r.persistence.runTransaction("Execute query","readwrite",(s=>(function(c,f,h){const g=Ae(c),v=g.xs.get(h);return v!==void 0?Q.resolve(g.Ms.get(v)):g.Pi.getTargetData(f,h)})(r,s,zr(e)).next((l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,l.targetId).next((c=>{o=c}))})).next((()=>r.Fs.getDocumentsMatchingQuery(s,e,n?i:Ve.min(),n?o:Je()))).next((l=>(Jq(r,ZB(e),l),{documents:l,Qs:o})))))}function Wq(t,e){const n=Ae(t),r=Ae(n.Pi),i=n.Ms.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(o=>r.At(o,e).next((s=>s?s.target:null))))}function Yq(t,e){const n=Ae(t),r=n.Os.get(e)||Ve.min();return n.persistence.runTransaction("Get new document changes","readonly",(i=>n.Ns.getAllFromCollectionGroup(i,e,vB(r,Kf),Number.MAX_SAFE_INTEGER))).then((i=>(Jq(n,e,i),i)))}function Jq(t,e,n){let r=t.Os.get(e)||Ve.min();n.forEach(((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),t.Os.set(e,r)}async function PZ(t,e,n,r){const i=Ae(t);let o=Je(),s=ti();for(const f of n){const h=e.$s(f.metadata.name);f.document&&(o=o.add(h));const g=e.Us(f);g.setReadTime(e.Ks(f.metadata.readTime)),s=s.insert(h,g)}const l=i.Ns.newChangeBuffer({trackRemovals:!0}),c=await id(i,(function(h){return zr(Pd(st.fromString(`__bundle__/docs/${h}`)))})(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(f=>Kq(f,l,s).next((h=>(l.apply(f),h))).next((h=>i.Pi.removeMatchingKeysForTargetId(f,c.targetId).next((()=>i.Pi.addMatchingKeys(f,o,c.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(f,h.ks,h.qs))).next((()=>h.ks))))))}async function NZ(t,e,n=Je()){const r=await id(t,zr(OC(e.bundledQuery))),i=Ae(t);return i.persistence.runTransaction("Save named query","readwrite",(o=>{const s=xn(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Ii.saveNamedQuery(o,e);const l=r.withResumeToken(gn.EMPTY_BYTE_STRING,s);return i.Ms=i.Ms.insert(l.targetId,l),i.Pi.updateTargetData(o,l).next((()=>i.Pi.removeMatchingKeysForTargetId(o,r.targetId))).next((()=>i.Pi.addMatchingKeys(o,n,r.targetId))).next((()=>i.Ii.saveNamedQuery(o,e)))}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qq="firestore_clients";function wk(t,e){return`${Qq}_${t}_${e}`}const Xq="firestore_mutations";function bk(t,e,n){let r=`${Xq}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const Zq="firestore_targets";function Ww(t,e){return`${Zq}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho="SharedClientState";class l_{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ws(e,n,r){const i=JSON.parse(r);let o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new pe(i.error.code,i.error.message))),s?new l_(e,n,i.state,o):(An(Ho,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gp{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new pe(r.error.code,r.error.message))),o?new Gp(e,r.state,i):(An(Ho,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class u_{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=CC();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=bB(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new u_(e,o):(An(Ho,`Failed to parse client data for instance '${e}': ${n}`),null)}}class HC{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new HC(n.clientId,n.onlineState):(An(Ho,`Failed to parse online state: ${e}`),null)}}class gA{constructor(){this.activeTargetIds=CC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Yw{constructor(e,n,r,i,o){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Gt(Ke),this.started=!1,this.Xs=[];const s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.eo=wk(this.persistenceKey,this.Js),this.no=(function(c){return`firestore_sequence_number_${c}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new gA),this.ro=new RegExp(`^${Qq}_${s}_([^_]*)$`),this.io=new RegExp(`^${Xq}_${s}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${Zq}_${s}_(\\d+)$`),this.oo=(function(c){return`firestore_online_state_${c}`})(this.persistenceKey),this._o=(function(c){return`firestore_bundle_loaded_v2_${c}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(wk(this.persistenceKey,r));if(i){const o=u_.Ws(r,i);o&&(this.Zs=this.Zs.insert(o.clientId,o))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach(((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)})),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Ww(this.persistenceKey,e));if(i){const o=Gp.Ws(e,i);o&&(r=o.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ww(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach((i=>{this.Po(i)})),this.currentUser=e,r.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return ge(Ho,"READ",e,n),n}setItem(e,n){ge(Ho,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){ge(Ho,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(ge(Ho,"EVENT",n.key,n.newValue),n.key===this.eo)return void An("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=(function(o){let s=Zr.ce;if(o!=null)try{const l=JSON.parse(o);ke(typeof l=="number",30636,{So:o}),s=l}catch(l){An(Ho,"Failed to read sequence number from WebStorage",l)}return s})(n.newValue);r!==Zr.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map((i=>this.syncEngine.Do(i))))}}}else this.Xs.push(n)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const i=new l_(this.currentUser,e,n,r),o=bk(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Gs())}Po(e){const n=bk(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const i=Ww(this.persistenceKey,e),o=new Gp(e,n,r);this.setItem(i,o.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return u_.Ws(r,n)}fo(e,n){const r=this.io.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return l_.Ws(new Zn(o),i,n)}yo(e,n){const r=this.so.exec(e),i=Number(r[1]);return Gp.Ws(i,n)}uo(e){return HC.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);ge(Ho,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),i=this.lo(this.Zs),o=this.lo(r),s=[],l=[];return o.forEach((c=>{i.has(c)||s.push(c)})),i.forEach((c=>{o.has(c)||l.push(c)})),this.syncEngine.Fo(s,l).then((()=>{this.Zs=r}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=CC();return e.forEach(((r,i)=>{n=n.unionWith(i.activeTargetIds)})),n}}class e3{constructor(){this.Mo=new gA,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new gA,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MZ{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk="ConnectivityMonitor";class Ak{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ge(Sk,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ge(Sk,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yy=null;function yA(){return Yy===null?Yy=(function(){return 268435456+Math.round(2147483648*Math.random())})():Yy++,"0x"+Yy.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw="RestConnection",DZ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class kZ{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Zv?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,o){const s=yA(),l=this.zo(e,n.toUriEncodedString());ge(Jw,`Sending RPC '${e}' ${s}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,o);const{host:f}=new URL(l),h=Cl(f);return this.Jo(e,l,c,r,h).then((g=>(ge(Jw,`Received RPC '${e}' ${s}: `,g),g)),(g=>{throw as(Jw,`RPC '${e}' ${s} failed with error: `,g,"url: ",l,"request:",r),g}))}Ho(e,n,r,i,o,s){return this.Go(e,n,r,i,o)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Rd})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,o)=>e[o]=i)),r&&r.headers.forEach(((i,o)=>e[o]=i))}zo(e,n){const r=DZ[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OZ{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr="WebChannelConnection";class LZ extends kZ{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,o){const s=yA();return new Promise(((l,c)=>{const f=new aB;f.setWithCredentials(!0),f.listenOnce(lB.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case bv.NO_ERROR:const g=f.getResponseJson();ge(wr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(g)),l(g);break;case bv.TIMEOUT:ge(wr,`RPC '${e}' ${s} timed out`),c(new pe(ie.DEADLINE_EXCEEDED,"Request time out"));break;case bv.HTTP_ERROR:const v=f.getStatus();if(ge(wr,`RPC '${e}' ${s} failed with status:`,v,"response text:",f.getResponseText()),v>0){let E=f.getResponseJson();Array.isArray(E)&&(E=E[0]);const b=E==null?void 0:E.error;if(b&&b.status&&b.message){const S=(function(C){const D=C.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(D)>=0?D:ie.UNKNOWN})(b.status);c(new pe(S,b.message))}else c(new pe(ie.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new pe(ie.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{l_:e,streamId:s,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{ge(wr,`RPC '${e}' ${s} completed.`)}}));const h=JSON.stringify(i);ge(wr,`RPC '${e}' ${s} sending request:`,i),f.send(n,"POST",h,r,15)}))}T_(e,n,r){const i=yA(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=fB(),l=cB(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=o.join("");ge(wr,`Creating RPC '${e}' stream ${i}: ${h}`,c);const g=s.createWebChannel(h,c);this.I_(g);let v=!1,E=!1;const b=new OZ({Yo:A=>{E?ge(wr,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(v||(ge(wr,`Opening RPC '${e}' stream ${i} transport.`),g.open(),v=!0),ge(wr,`RPC '${e}' stream ${i} sending:`,A),g.send(A))},Zo:()=>g.close()}),S=(A,C,D)=>{A.listen(C,(k=>{try{D(k)}catch(q){setTimeout((()=>{throw q}),0)}}))};return S(g,Ap.EventType.OPEN,(()=>{E||(ge(wr,`RPC '${e}' stream ${i} transport opened.`),b.o_())})),S(g,Ap.EventType.CLOSE,(()=>{E||(E=!0,ge(wr,`RPC '${e}' stream ${i} transport closed`),b.a_(),this.E_(g))})),S(g,Ap.EventType.ERROR,(A=>{E||(E=!0,as(wr,`RPC '${e}' stream ${i} transport errored. Name:`,A.name,"Message:",A.message),b.a_(new pe(ie.UNAVAILABLE,"The operation could not be completed")))})),S(g,Ap.EventType.MESSAGE,(A=>{var C;if(!E){const D=A.data[0];ke(!!D,16349);const k=D,q=(k==null?void 0:k.error)||((C=k[0])==null?void 0:C.error);if(q){ge(wr,`RPC '${e}' stream ${i} received error:`,q);const $=q.status;let H=(function(L){const F=Mn[L];if(F!==void 0)return hq(F)})($),M=q.message;H===void 0&&(H=ie.INTERNAL,M="Unknown error status: "+$+" with message "+q.message),E=!0,b.a_(new pe(H,M)),g.close()}else ge(wr,`RPC '${e}' stream ${i} received:`,D),b.u_(D)}})),S(l,uB.STAT_EVENT,(A=>{A.stat===JS.PROXY?ge(wr,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===JS.NOPROXY&&ge(wr,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{b.__()}),0),b}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t3(){return typeof window<"u"?window:null}function Dv(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(t){return new qX(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&ge("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk="PersistentStream";class n3{constructor(e,n,r,i,o,s,l,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new GC(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ie.RESOURCE_EXHAUSTED?(An(n.toString()),An("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new pe(ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ge(xk,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ge(xk,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class VZ extends n3{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=HX(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Ve.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?Ve.min():s.readTime?xn(s.readTime):Ve.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=fA(this.serializer),n.addTarget=(function(o,s){let l;const c=s.target;if(l=e_(c)?{documents:bq(o,c)}:{query:Sq(o,c).ft},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){l.resumeToken=yq(o,s.resumeToken);const f=uA(o,s.expectedCount);f!==null&&(l.expectedCount=f)}else if(s.snapshotVersion.compareTo(Ve.min())>0){l.readTime=rd(o,s.snapshotVersion.toTimestamp());const f=uA(o,s.expectedCount);f!==null&&(l.expectedCount=f)}return l})(this.serializer,e);const r=jX(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=fA(this.serializer),n.removeTarget=e,this.q_(n)}}class UZ extends n3{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=GX(e.writeResults,e.commitTime),r=xn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=fA(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>pm(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FZ{}class BZ extends FZ{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new pe(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,s])=>this.connection.Go(e,cA(n,r),i,o,s))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new pe(ie.UNKNOWN,o.toString())}))}Ho(e,n,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,l])=>this.connection.Ho(e,cA(n,r),i,s,l,o))).catch((s=>{throw s.name==="FirebaseError"?(s.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new pe(ie.UNKNOWN,s.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class qZ{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(An(n),this.aa=!1):ge("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc="RemoteStore";class $Z{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((s=>{r.enqueueAndForget((async()=>{Dl(this)&&(ge(tc,"Restarting streams for network reachability change."),await(async function(c){const f=Ae(c);f.Ea.add(4),await Dd(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Xm(f)})(this))}))})),this.Ra=new qZ(r,i)}}async function Xm(t){if(Dl(t))for(const e of t.da)await e(!0)}async function Dd(t){for(const e of t.da)await e(!1)}function N0(t,e){const n=Ae(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),WC(n)?KC(n):Od(n).O_()&&jC(n,e))}function sd(t,e){const n=Ae(t),r=Od(n);n.Ia.delete(e),r.O_()&&r3(n,e),n.Ia.size===0&&(r.O_()?r.L_():Dl(n)&&n.Ra.set("Unknown"))}function jC(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Od(t).Y_(e)}function r3(t,e){t.Va.Ue(e),Od(t).Z_(e)}function KC(t){t.Va=new VX({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Od(t).start(),t.Ra.ua()}function WC(t){return Dl(t)&&!Od(t).x_()&&t.Ia.size>0}function Dl(t){return Ae(t).Ea.size===0}function i3(t){t.Va=void 0}async function zZ(t){t.Ra.set("Online")}async function HZ(t){t.Ia.forEach(((e,n)=>{jC(t,e)}))}async function GZ(t,e){i3(t),WC(t)?(t.Ra.ha(e),KC(t)):t.Ra.set("Unknown")}async function jZ(t,e,n){if(t.Ra.set("Online"),e instanceof gq&&e.state===2&&e.cause)try{await(async function(i,o){const s=o.cause;for(const l of o.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,s),i.Ia.delete(l),i.Va.removeTarget(l))})(t,e)}catch(r){ge(tc,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await c_(t,r)}else if(e instanceof Nv?t.Va.Ze(e):e instanceof mq?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ve.min()))try{const r=await jq(t.localStore);n.compareTo(r)>=0&&await(function(o,s){const l=o.Va.Tt(s);return l.targetChanges.forEach(((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const h=o.Ia.get(f);h&&o.Ia.set(f,h.withResumeToken(c.resumeToken,s))}})),l.targetMismatches.forEach(((c,f)=>{const h=o.Ia.get(c);if(!h)return;o.Ia.set(c,h.withResumeToken(gn.EMPTY_BYTE_STRING,h.snapshotVersion)),r3(o,c);const g=new qs(h.target,c,f,h.sequenceNumber);jC(o,g)})),o.remoteSyncer.applyRemoteEvent(l)})(t,n)}catch(r){ge(tc,"Failed to raise snapshot:",r),await c_(t,r)}}async function c_(t,e,n){if(!Nl(e))throw e;t.Ea.add(1),await Dd(t),t.Ra.set("Offline"),n||(n=()=>jq(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ge(tc,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Xm(t)}))}function o3(t,e){return e().catch((n=>c_(t,n,e)))}async function kd(t){const e=Ae(t),n=wl(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:cl;for(;KZ(e);)try{const i=await RZ(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,WZ(e,i)}catch(i){await c_(e,i)}s3(e)&&a3(e)}function KZ(t){return Dl(t)&&t.Ta.length<10}function WZ(t,e){t.Ta.push(e);const n=wl(t);n.O_()&&n.X_&&n.ea(e.mutations)}function s3(t){return Dl(t)&&!wl(t).x_()&&t.Ta.length>0}function a3(t){wl(t).start()}async function YZ(t){wl(t).ra()}async function JZ(t){const e=wl(t);for(const n of t.Ta)e.ea(n.mutations)}async function QZ(t,e,n){const r=t.Ta.shift(),i=NC.from(r,e,n);await o3(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await kd(t)}async function XZ(t,e){e&&wl(t).X_&&await(async function(r,i){if((function(s){return dq(s)&&s!==ie.ABORTED})(i.code)){const o=r.Ta.shift();wl(r).B_(),await o3(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i))),await kd(r)}})(t,e),s3(t)&&a3(t)}async function Ck(t,e){const n=Ae(t);n.asyncQueue.verifyOperationInProgress(),ge(tc,"RemoteStore received new credentials");const r=Dl(n);n.Ea.add(3),await Dd(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Xm(n)}async function vA(t,e){const n=Ae(t);e?(n.Ea.delete(2),await Xm(n)):e||(n.Ea.add(2),await Dd(n),n.Ra.set("Unknown"))}function Od(t){return t.ma||(t.ma=(function(n,r,i){const o=Ae(n);return o.sa(),new VZ(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:zZ.bind(null,t),t_:HZ.bind(null,t),r_:GZ.bind(null,t),H_:jZ.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),WC(t)?KC(t):t.Ra.set("Unknown")):(await t.ma.stop(),i3(t))}))),t.ma}function wl(t){return t.fa||(t.fa=(function(n,r,i){const o=Ae(n);return o.sa(),new UZ(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:YZ.bind(null,t),r_:XZ.bind(null,t),ta:JZ.bind(null,t),na:QZ.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await kd(t)):(await t.fa.stop(),t.Ta.length>0&&(ge(tc,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((s=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,l=new YC(e,n,s,i,o);return l.start(r),l}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ld(t,e){if(An("AsyncQueue",`${e}: ${t}`),Nl(t))return new pe(ie.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{static emptySet(e){return new kf(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||we.comparator(n.key,r.key):(n,r)=>we.comparator(n.key,r.key),this.keyedMap=xp(),this.sortedSet=new Gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof kf)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new kf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(){this.ga=new Gt(we.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ce(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class ad{constructor(e,n,r,i,o,s,l,c,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach((l=>{s.push({type:0,doc:l})})),new ad(e,n,kf.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZZ{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class eee{constructor(){this.queries=Rk(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=Ae(n),o=i.queries;i.queries=Rk(),o.forEach(((s,l)=>{for(const c of l.Sa)c.onError(r)}))})(this,new pe(ie.ABORTED,"Firestore shutting down"))}}function Rk(){return new ca((t=>XB(t)),jm)}async function JC(t,e){const n=Ae(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new ZZ,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const l=Ld(s,`Initialization of query '${Ef(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&XC(n)}async function QC(t,e){const n=Ae(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function tee(t,e){const n=Ae(t);let r=!1;for(const i of e){const o=i.query,s=n.queries.get(o);if(s){for(const l of s.Sa)l.Fa(i)&&(r=!0);s.wa=i}}r&&XC(n)}function nee(t,e,n){const r=Ae(t),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(n);r.queries.delete(e)}function XC(t){t.Ca.forEach((e=>{e.next()}))}var _A,Pk;(Pk=_A||(_A={})).Ma="default",Pk.Cache="cache";class ZC{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ad(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ad.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==_A.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ree{constructor(e,n){this.Qa=e,this.byteLength=n}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e){this.serializer=e}$s(e){return ns(this.serializer,e)}Us(e){return e.metadata.exists?wq(this.serializer,e.document,!1):Jt.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return xn(e)}}class iee{constructor(e,n){this.Ua=e,this.serializer=n,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=l3(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++n;const r=st.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,{...this.progress}):null}za(e){const n=new Map,r=new Nk(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.$s(i.metadata.name);for(const s of i.metadata.queries){const l=(n.get(s)||Je()).add(o);n.set(s,l)}}return n}async ja(e){const n=await PZ(e,new Nk(this.serializer),this.Wa,this.Ua.id),r=this.za(this.documents);for(const i of this.Ka)await NZ(e,i,r.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:n}}}function l3(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(e){this.key=e}}class c3{constructor(e){this.key=e}}class f3{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Je(),this.mutatedKeys=Je(),this.eu=eq(e),this.tu=new kf(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Ik,i=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((h,g)=>{const v=i.get(h),E=Km(this.query,g)?g:null,b=!!v&&this.mutatedKeys.has(v.key),S=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let A=!1;v&&E?v.data.isEqual(E.data)?b!==S&&(r.track({type:3,doc:E}),A=!0):this.su(v,E)||(r.track({type:2,doc:E}),A=!0,(c&&this.eu(E,c)>0||f&&this.eu(E,f)<0)&&(l=!0)):!v&&E?(r.track({type:0,doc:E}),A=!0):v&&!E&&(r.track({type:1,doc:v}),A=!0,(c||f)&&(l=!0)),A&&(E?(s=s.add(E),o=S?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))})),this.query.limit!==null)for(;s.size>this.query.limit;){const h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{tu:s,iu:r,Cs:l,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort(((h,g)=>(function(E,b){const S=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Rt:A})}};return S(E)-S(b)})(h.type,g.type)||this.eu(h.doc,g.doc))),this.ou(r),i=i??!1;const l=n&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,f=c!==this.Za;return this.Za=c,s.length!==0||f?{snapshot:new ad(this.query,e.tu,o,s,e.mutatedKeys,c===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ik,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Je(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new c3(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new u3(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Je();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ad.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const kl="SyncEngine";class oee{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class see{constructor(e){this.key=e,this.hu=!1}}class aee{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new ca((l=>XB(l)),jm),this.Iu=new Map,this.Eu=new Set,this.du=new Gt(we.comparator),this.Au=new Map,this.Ru=new UC,this.Vu={},this.mu=new Map,this.fu=ec.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function lee(t,e,n=!0){const r=M0(t);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await d3(r,e,n,!0),i}async function uee(t,e){const n=M0(t);await d3(n,e,!0,!1)}async function d3(t,e,n,r){const i=await id(t.localStore,zr(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let l;return r&&(l=await eI(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&N0(t.remoteStore,i),l}async function eI(t,e,n,r,i){t.pu=(g,v,E)=>(async function(S,A,C,D){let k=A.view.ru(C);k.Cs&&(k=await a_(S.localStore,A.query,!1).then((({documents:M})=>A.view.ru(M,k))));const q=D&&D.targetChanges.get(A.targetId),$=D&&D.targetMismatches.get(A.targetId)!=null,H=A.view.applyChanges(k,S.isPrimaryClient,q,$);return TA(S,A.targetId,H.au),H.snapshot})(t,g,v,E);const o=await a_(t.localStore,e,!0),s=new f3(e,o.Qs),l=s.ru(o.documents),c=Jm.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),f=s.applyChanges(l,t.isPrimaryClient,c);TA(t,n,f.au);const h=new oee(e,n,s);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function cee(t,e,n){const r=Ae(t),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter((s=>!jm(s,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await od(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&sd(r.remoteStore,i.targetId),ld(r,i.targetId)})).catch(Pl)):(ld(r,i.targetId),await od(r.localStore,i.targetId,!0))}async function fee(t,e){const n=Ae(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),sd(n.remoteStore,r.targetId))}async function dee(t,e,n){const r=iI(t);try{const i=await(function(s,l){const c=Ae(s),f=xt.now(),h=l.reduce(((E,b)=>E.add(b.key)),Je());let g,v;return c.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let b=ti(),S=Je();return c.Ns.getEntries(E,h).next((A=>{b=A,b.forEach(((C,D)=>{D.isValidDocument()||(S=S.add(C))}))})).next((()=>c.localDocuments.getOverlayedDocuments(E,b))).next((A=>{g=A;const C=[];for(const D of l){const k=kX(D,g.get(D.key).overlayedDocument);k!=null&&C.push(new fa(D.key,k,zB(k.value.mapValue),on.exists(!0)))}return c.mutationQueue.addMutationBatch(E,f,C,l)})).next((A=>{v=A;const C=A.applyToLocalDocumentSet(g,S);return c.documentOverlayCache.saveOverlays(E,A.batchId,C)}))})).then((()=>({batchId:v.batchId,changes:nq(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,l,c){let f=s.Vu[s.currentUser.toKey()];f||(f=new Gt(Ke)),f=f.insert(l,c),s.Vu[s.currentUser.toKey()]=f})(r,i.batchId,n),await da(r,i.changes),await kd(r.remoteStore)}catch(i){const o=Ld(i,"Failed to persist write");n.reject(o)}}async function h3(t,e){const n=Ae(t);try{const r=await IZ(n.localStore,e);e.targetChanges.forEach(((i,o)=>{const s=n.Au.get(o);s&&(ke(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?ke(s.hu,14607):i.removedDocuments.size>0&&(ke(s.hu,42227),s.hu=!1))})),await da(n,r,e)}catch(r){await Pl(r)}}function Mk(t,e,n){const r=Ae(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((o,s)=>{const l=s.view.va(e);l.snapshot&&i.push(l.snapshot)})),(function(s,l){const c=Ae(s);c.onlineState=l;let f=!1;c.queries.forEach(((h,g)=>{for(const v of g.Sa)v.va(l)&&(f=!0)})),f&&XC(c)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function hee(t,e,n){const r=Ae(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),o=i&&i.key;if(o){let s=new Gt(we.comparator);s=s.insert(o,Jt.newNoDocument(o,Ve.min()));const l=Je().add(o),c=new Ym(Ve.min(),new Map,new Gt(Ke),s,l);await h3(r,c),r.du=r.du.remove(o),r.Au.delete(e),rI(r)}else await od(r.localStore,e,!1).then((()=>ld(r,e,n))).catch(Pl)}async function pee(t,e){const n=Ae(t),r=e.batch.batchId;try{const i=await CZ(n.localStore,e);nI(n,r,null),tI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await da(n,i)}catch(i){await Pl(i)}}async function mee(t,e,n){const r=Ae(t);try{const i=await(function(s,l){const c=Ae(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let h;return c.mutationQueue.lookupMutationBatch(f,l).next((g=>(ke(g!==null,37113),h=g.keys(),c.mutationQueue.removeMutationBatch(f,g)))).next((()=>c.mutationQueue.performConsistencyCheck(f))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(f,h,l))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,h))).next((()=>c.localDocuments.getDocuments(f,h)))}))})(r.localStore,e);nI(r,e,n),tI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await da(r,i)}catch(i){await Pl(i)}}async function gee(t,e){const n=Ae(t);Dl(n.remoteStore)||ge(kl,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await(function(s){const l=Ae(s);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(c=>l.mutationQueue.getHighestUnacknowledgedBatchId(c)))})(n.localStore);if(r===cl)return void e.resolve();const i=n.mu.get(r)||[];i.push(e),n.mu.set(r,i)}catch(r){const i=Ld(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function tI(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function nI(t,e,n){const r=Ae(t);let i=r.Vu[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function ld(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||p3(t,r)}))}function p3(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(sd(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),rI(t))}function TA(t,e,n){for(const r of n)r instanceof u3?(t.Ru.addReference(r.key,e),yee(t,r)):r instanceof c3?(ge(kl,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||p3(t,r.key)):Ce(19791,{wu:r})}function yee(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(ge(kl,"New document in limbo: "+n),t.Eu.add(r),rI(t))}function rI(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new we(st.fromString(e)),r=t.fu.next();t.Au.set(r,new see(n)),t.du=t.du.insert(n,r),N0(t.remoteStore,new qs(zr(Pd(n.path)),r,"TargetPurposeLimboResolution",Zr.ce))}}async function da(t,e,n){const r=Ae(t),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach(((l,c)=>{s.push(r.pu(c,e,n).then((f=>{var h;if((f||n)&&r.isPrimaryClient){const g=f?!f.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(f){i.push(f);const g=$C.As(c.targetId,f);o.push(g)}})))})),await Promise.all(s),r.Pu.H_(i),await(async function(c,f){const h=Ae(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>Q.forEach(f,(v=>Q.forEach(v.Es,(E=>h.persistence.referenceDelegate.addReference(g,v.targetId,E))).next((()=>Q.forEach(v.ds,(E=>h.persistence.referenceDelegate.removeReference(g,v.targetId,E)))))))))}catch(g){if(!Nl(g))throw g;ge(zC,"Failed to update sequence numbers: "+g)}for(const g of f){const v=g.targetId;if(!g.fromCache){const E=h.Ms.get(v),b=E.snapshotVersion,S=E.withLastLimboFreeSnapshotVersion(b);h.Ms=h.Ms.insert(v,S)}}})(r.localStore,o))}async function vee(t,e){const n=Ae(t);if(!n.currentUser.isEqual(e)){ge(kl,"User change. New user:",e.toKey());const r=await Gq(n.localStore,e);n.currentUser=e,(function(o,s){o.mu.forEach((l=>{l.forEach((c=>{c.reject(new pe(ie.CANCELLED,s))}))})),o.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await da(n,r.Ls)}}function _ee(t,e){const n=Ae(t),r=n.Au.get(e);if(r&&r.hu)return Je().add(r.key);{let i=Je();const o=n.Iu.get(e);if(!o)return i;for(const s of o){const l=n.Tu.get(s);i=i.unionWith(l.view.nu)}return i}}async function Tee(t,e){const n=Ae(t),r=await a_(n.localStore,e.query,!0),i=e.view.cu(r);return n.isPrimaryClient&&TA(n,e.targetId,i.au),i}async function Eee(t,e){const n=Ae(t);return Yq(n.localStore,e).then((r=>da(n,r)))}async function wee(t,e,n,r){const i=Ae(t),o=await(function(l,c){const f=Ae(l),h=Ae(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",(g=>h.er(g,c).next((v=>v?f.localDocuments.getDocuments(g,v):Q.resolve(null)))))})(i.localStore,e);o!==null?(n==="pending"?await kd(i.remoteStore):n==="acknowledged"||n==="rejected"?(nI(i,e,r||null),tI(i,e),(function(l,c){Ae(Ae(l).mutationQueue).ir(c)})(i.localStore,e)):Ce(6720,"Unknown batchState",{Su:n}),await da(i,o)):ge(kl,"Cannot apply mutation batch with id: "+e)}async function bee(t,e){const n=Ae(t);if(M0(n),iI(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await Dk(n,r.toArray());n.gu=!0,await vA(n.remoteStore,!0);for(const o of i)N0(n.remoteStore,o)}else if(e===!1&&n.gu!==!1){const r=[];let i=Promise.resolve();n.Iu.forEach(((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then((()=>(ld(n,s),od(n.localStore,s,!0)))),sd(n.remoteStore,s)})),await i,await Dk(n,r),(function(s){const l=Ae(s);l.Au.forEach(((c,f)=>{sd(l.remoteStore,f)})),l.Ru.Jr(),l.Au=new Map,l.du=new Gt(we.comparator)})(n),n.gu=!1,await vA(n.remoteStore,!1)}}async function Dk(t,e,n){const r=Ae(t),i=[],o=[];for(const s of e){let l;const c=r.Iu.get(s);if(c&&c.length!==0){l=await id(r.localStore,zr(c[0]));for(const f of c){const h=r.Tu.get(f),g=await Tee(r,h);g.snapshot&&o.push(g.snapshot)}}else{const f=await Wq(r.localStore,s);l=await id(r.localStore,f),await eI(r,m3(f),s,!1,l.resumeToken)}i.push(l)}return r.Pu.H_(o),i}function m3(t){return QB(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function See(t){return(function(n){return Ae(Ae(n).persistence).Ts()})(Ae(t).localStore)}async function Aee(t,e,n,r){const i=Ae(t);if(i.gu)return void ge(kl,"Ignoring unexpected query state notification.");const o=i.Iu.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{const s=await Yq(i.localStore,ZB(o[0])),l=Ym.createSynthesizedRemoteEventForCurrentChange(e,n==="current",gn.EMPTY_BYTE_STRING);await da(i,s,l);break}case"rejected":await od(i.localStore,e,!0),ld(i,e,r);break;default:Ce(64155,n)}}async function xee(t,e,n){const r=M0(t);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){ge(kl,"Adding an already active target "+i);continue}const o=await Wq(r.localStore,i),s=await id(r.localStore,o);await eI(r,m3(o),s.targetId,!1,s.resumeToken),N0(r.remoteStore,s)}for(const i of n)r.Iu.has(i)&&await od(r.localStore,i,!1).then((()=>{sd(r.remoteStore,i),ld(r,i)})).catch(Pl)}}function M0(t){const e=Ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=h3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_ee.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hee.bind(null,e),e.Pu.H_=tee.bind(null,e.eventManager),e.Pu.yu=nee.bind(null,e.eventManager),e}function iI(t){const e=Ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pee.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mee.bind(null,e),e}function Cee(t,e,n){const r=Ae(t);(async function(o,s,l){try{const c=await s.getMetadata();if(await(function(E,b){const S=Ae(E),A=xn(b.createTime);return S.persistence.runTransaction("hasNewerBundle","readonly",(C=>S.Ii.getBundleMetadata(C,b.id))).then((C=>!!C&&C.createTime.compareTo(A)>=0))})(o.localStore,c))return await s.close(),l._completeWith((function(E){return{taskState:"Success",documentsLoaded:E.totalDocuments,bytesLoaded:E.totalBytes,totalDocuments:E.totalDocuments,totalBytes:E.totalBytes}})(c)),Promise.resolve(new Set);l._updateProgress(l3(c));const f=new iee(c,s.serializer);let h=await s.bu();for(;h;){const v=await f.Ga(h);v&&l._updateProgress(v),h=await s.bu()}const g=await f.ja(o.localStore);return await da(o,g.Ha,void 0),await(function(E,b){const S=Ae(E);return S.persistence.runTransaction("Save bundle","readwrite",(A=>S.Ii.saveBundleMetadata(A,b)))})(o.localStore,c),l._completeWith(g.progress),Promise.resolve(g.Ja)}catch(c){return as(kl,`Loading bundle failed with ${c}`),l._failWith(c),Promise.resolve(new Set)}})(r,e,n).then((i=>{r.sharedClientState.notifyBundleLoaded(i)}))}class mm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Hq(this.persistence,new zq,e.initialUser,this.serializer)}Cu(e){return new FC(P0.mi,this.serializer)}Du(e){return new e3}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}mm.provider={build:()=>new mm};class Iee extends mm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ke(this.persistence.referenceDelegate instanceof s_,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Vq(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Sr.withCacheSize(this.cacheSizeBytes):Sr.DEFAULT;return new FC((r=>s_.mi(r,n)),this.serializer)}}class g3 extends mm{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await iI(this.xu.syncEngine),await kd(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return Hq(this.persistence,new zq,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new Vq(r,e.asyncQueue,n)}Mu(e,n){const r=new VQ(n,this.persistence);return new LQ(e.asyncQueue,r)}Cu(e){const n=qC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Sr.withCacheSize(this.cacheSizeBytes):Sr.DEFAULT;return new BC(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,t3(),Dv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new e3}}class Ree extends g3{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof Yw&&(this.sharedClientState.syncEngine={Co:wee.bind(null,n),vo:Aee.bind(null,n),Fo:xee.bind(null,n),Ts:See.bind(null,n),Do:Eee.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await bee(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const n=t3();if(!Yw.v(n))throw new pe(ie.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=qC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Yw(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class gm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Mk(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=vee.bind(null,this.syncEngine),await vA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new eee})()}createDatastore(e){const n=Qm(e.databaseInfo.databaseId),r=(function(o){return new LZ(o)})(e.databaseInfo);return(function(o,s,l,c){return new BZ(o,s,l,c)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,o,s,l){return new $Z(r,i,o,s,l)})(this.localStore,this.datastore,e.asyncQueue,(n=>Mk(this.syncEngine,n,0)),(function(){return Ak.v()?new Ak:new MZ})())}createSyncEngine(e,n){return(function(i,o,s,l,c,f,h){const g=new aee(i,o,s,l,c,f);return h&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(i){const o=Ae(i);ge(tc,"RemoteStore shutting down."),o.Ea.add(5),await Dd(o),o.Aa.shutdown(),o.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}gm.provider={build:()=>new gm};function kk(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):An("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pee{constructor(e,n){this.Bu=e,this.serializer=n,this.metadata=new vr,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((r=>{r&&r.$a()?this.metadata.resolve(r.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Qa)}`))}),(r=>this.metadata.reject(r)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const n=this.Lu.decode(e),r=Number(n);isNaN(r)&&this.Qu(`length string (${n}) is not valid number`);const i=await this.$u(r);return new ree(JSON.parse(i),e.length+r)}Uu(){return this.buffer.findIndex((e=>e===123))}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const n=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nee{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new pe(ie.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(i,o){const s=Ae(i),l={documents:o.map((g=>hm(s.serializer,g)))},c=await s.Ho("BatchGetDocuments",s.serializer.databaseId,st.emptyPath(),l,o.length),f=new Map;c.forEach((g=>{const v=zX(s.serializer,g);f.set(v.key.toString(),v)}));const h=[];return o.forEach((g=>{const v=f.get(g.toString());ke(!!v,55234,{key:g}),h.push(v)})),h})(this.datastore,e);return n.forEach((r=>this.recordVersion(r))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Md(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,r)=>{const i=we.fromPath(r);this.mutations.push(new RC(i,this.precondition(i)))})),await(async function(r,i){const o=Ae(r),s={writes:i.map((l=>pm(o.serializer,l)))};await o.Go("Commit",o.serializer.databaseId,st.emptyPath(),s)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Ce(50498,{Gu:e.constructor.name});n=Ve.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new pe(ie.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Ve.min())?on.exists(!1):on.updateTime(n):on.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Ve.min()))throw new pe(ie.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return on.updateTime(n)}return on.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mee{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.zu=r.maxAttempts,this.M_=new GC(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new Nee(this.datastore),n=this.Hu(e);n&&n.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((i=>{this.Yu(i)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const n=this.updateFunction(e);return!zm(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!dq(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bl="FirestoreClient";class Dee{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Zn.UNAUTHENTICATED,this.clientId=mC.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async s=>{ge(bl,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,(s=>(ge(bl,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ld(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Qw(t,e){t.asyncQueue.verifyOperationInProgress(),ge(bl,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await Gq(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Ok(t,e){t.asyncQueue.verifyOperationInProgress();const n=await oI(t);ge(bl,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>Ck(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>Ck(e.remoteStore,i))),t._onlineComponents=e}async function oI(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ge(bl,"Using user provided OfflineComponentProvider");try{await Qw(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ie.FAILED_PRECONDITION||i.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;as("Error using user provided cache. Falling back to memory cache: "+n),await Qw(t,new mm)}}else ge(bl,"Using default OfflineComponentProvider"),await Qw(t,new Iee(void 0));return t._offlineComponents}async function k0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ge(bl,"Using user provided OnlineComponentProvider"),await Ok(t,t._uninitializedComponentsProvider._online)):(ge(bl,"Using default OnlineComponentProvider"),await Ok(t,new gm))),t._onlineComponents}function y3(t){return oI(t).then((e=>e.persistence))}function sI(t){return oI(t).then((e=>e.localStore))}function v3(t){return k0(t).then((e=>e.remoteStore))}function aI(t){return k0(t).then((e=>e.syncEngine))}function kee(t){return k0(t).then((e=>e.datastore))}async function ud(t){const e=await k0(t),n=e.eventManager;return n.onListen=lee.bind(null,e.syncEngine),n.onUnlisten=cee.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=uee.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=fee.bind(null,e.syncEngine),n}function Oee(t){return t.asyncQueue.enqueue((async()=>{const e=await y3(t),n=await v3(t);return e.setNetworkEnabled(!0),(function(i){const o=Ae(i);return o.Ea.delete(0),Xm(o)})(n)}))}function Lee(t){return t.asyncQueue.enqueue((async()=>{const e=await y3(t),n=await v3(t);return e.setNetworkEnabled(!1),(async function(i){const o=Ae(i);o.Ea.add(0),await Dd(o),o.Ra.set("Offline")})(n)}))}function Vee(t,e){const n=new vr;return t.asyncQueue.enqueueAndForget((async()=>(async function(i,o,s){try{const l=await(function(f,h){const g=Ae(f);return g.persistence.runTransaction("read document","readonly",(v=>g.localDocuments.getDocument(v,h)))})(i,o);l.isFoundDocument()?s.resolve(l):l.isNoDocument()?s.resolve(null):s.reject(new pe(ie.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const c=Ld(l,`Failed to get document '${o} from cache`);s.reject(c)}})(await sI(t),e,n))),n.promise}function _3(t,e,n={}){const r=new vr;return t.asyncQueue.enqueueAndForget((async()=>(function(o,s,l,c,f){const h=new D0({next:v=>{h.Nu(),s.enqueueAndForget((()=>QC(o,g)));const E=v.docs.has(l);!E&&v.fromCache?f.reject(new pe(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&v.fromCache&&c&&c.source==="server"?f.reject(new pe(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),g=new ZC(Pd(l.path),h,{includeMetadataChanges:!0,qa:!0});return JC(o,g)})(await ud(t),t.asyncQueue,e,n,r))),r.promise}function Uee(t,e){const n=new vr;return t.asyncQueue.enqueueAndForget((async()=>(async function(i,o,s){try{const l=await a_(i,o,!0),c=new f3(o,l.Qs),f=c.ru(l.documents),h=c.applyChanges(f,!1);s.resolve(h.snapshot)}catch(l){const c=Ld(l,`Failed to execute query '${o} against cache`);s.reject(c)}})(await sI(t),e,n))),n.promise}function T3(t,e,n={}){const r=new vr;return t.asyncQueue.enqueueAndForget((async()=>(function(o,s,l,c,f){const h=new D0({next:v=>{h.Nu(),s.enqueueAndForget((()=>QC(o,g))),v.fromCache&&c.source==="server"?f.reject(new pe(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(v)},error:v=>f.reject(v)}),g=new ZC(l,h,{includeMetadataChanges:!0,qa:!0});return JC(o,g)})(await ud(t),t.asyncQueue,e,n,r))),r.promise}function Fee(t,e){const n=new D0(e);return t.asyncQueue.enqueueAndForget((async()=>(function(i,o){Ae(i).Ca.add(o),o.next()})(await ud(t),n))),()=>{n.Nu(),t.asyncQueue.enqueueAndForget((async()=>(function(i,o){Ae(i).Ca.delete(o)})(await ud(t),n)))}}function Bee(t,e,n,r){const i=(function(s,l){let c;return c=typeof s=="string"?pq().encode(s):s,(function(h,g){return new Pee(h,g)})((function(h,g){if(h instanceof Uint8Array)return kk(h,g);if(h instanceof ArrayBuffer)return kk(new Uint8Array(h),g);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(c),l)})(n,Qm(e));t.asyncQueue.enqueueAndForget((async()=>{Cee(await aI(t),i,r)}))}function qee(t,e){return t.asyncQueue.enqueue((async()=>(function(r,i){const o=Ae(r);return o.persistence.runTransaction("Get named query","readonly",(s=>o.Ii.getNamedQuery(s,i)))})(await sI(t),e)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E3(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w3="firestore.googleapis.com",Vk=!0;class Uk{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pe(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=w3,this.ssl=Vk}else this.host=e.host,this.ssl=e.ssl??Vk;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Dq;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<lZ)throw new pe(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=E3(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new pe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new pe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new pe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zm{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Uk({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Uk(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new SQ;switch(r.type){case"firstParty":return new IQ(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new pe(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=Lk.get(n);r&&(ge("ComponentProvider","Removing Datastore"),Lk.delete(n),r.terminate())})(this),Promise.resolve()}}function b3(t,e,n,r={}){var f;t=mt(t,Zm);const i=Cl(e),o=t._getSettings(),s={...o,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;i&&(qx(`https://${l}`),$x("Firestore",!0)),o.host!==w3&&o.host!==l&&as("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...o,host:l,ssl:i,emulatorOptions:r};if(!Js(c,s)&&(t._setSettings(c),r.mockUserToken)){let h,g;if(typeof r.mockUserToken=="string")h=r.mockUserToken,g=Zn.MOCK_USER;else{h=F4(r.mockUserToken,(f=t._app)==null?void 0:f.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new pe(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Zn(v)}t._authCredentials=new AQ(new hB(h,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gr=class S3{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new S3(this.firestore,e,this._query)}},Ht=class Rp{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rp(this.firestore,e,this._key)}toJSON(){return{type:Rp._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if($m(n,Rp._jsonSchema))return new Rp(e,r||null,new we(st.fromString(n.referencePath)))}};Ht._jsonSchemaVersion="firestore/documentReference/1.0",Ht._jsonSchema={type:kn("string",Ht._jsonSchemaVersion),referencePath:kn("string")};let fl=class A3 extends Gr{constructor(e,n,r){super(e,n,Pd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ht(this.firestore,null,new we(e))}withConverter(e){return new A3(this.firestore,e,this._path)}};function Yo(t,e,...n){if(t=Ne(t),gC("collection","path",e),t instanceof Zm){const r=st.fromString(e,...n);return xD(r),new fl(t,null,r)}{if(!(t instanceof Ht||t instanceof fl))throw new pe(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(st.fromString(e,...n));return xD(r),new fl(t.firestore,null,r)}}function $ee(t,e){if(t=mt(t,Zm),gC("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new pe(ie.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Gr(t,null,(function(r){return new ua(st.emptyPath(),r)})(e))}function po(t,e,...n){if(t=Ne(t),arguments.length===1&&(e=mC.newId()),gC("doc","path",e),t instanceof Zm){const r=st.fromString(e,...n);return AD(r),new Ht(t,null,new we(r))}{if(!(t instanceof Ht||t instanceof fl))throw new pe(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(st.fromString(e,...n));return AD(r),new Ht(t.firestore,t instanceof fl?t.converter:null,new we(r))}}function x3(t,e){return t=Ne(t),e=Ne(e),(t instanceof Ht||t instanceof fl)&&(e instanceof Ht||e instanceof fl)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function C3(t,e){return t=Ne(t),e=Ne(e),t instanceof Gr&&e instanceof Gr&&t.firestore===e.firestore&&jm(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk="AsyncQueue";class Bk{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new GC(this,"async_queue_retry"),this._c=()=>{const r=Dv();r&&ge(Fk,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Dv();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Dv();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new vr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Nl(e))throw e;ge(Fk,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,An("INTERNAL UNHANDLED ERROR: ",qk(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=YC.createAndSchedule(this,e,n,r,(o=>this.hc(o)));return this.tc.push(i),i}uc(){this.nc&&Ce(47125,{Pc:qk(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function qk(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(t,["next","error","complete"])}class zee{constructor(){this._progressObserver={},this._taskCompletionResolver=new vr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hee=-1;let yn=class extends Zm{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Bk,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Bk(e),this._firestoreClient=void 0,await e}}};function Gee(t,e){const n=typeof t=="object"?t:o0(),r=typeof t=="string"?t:Zv,i=Ad(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=V4("firestore");o&&b3(i,...o)}return i}function _r(t){if(t._terminated)throw new pe(ie.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||I3(t),t._firestoreClient}function I3(t){var r,i,o;const e=t._freezeSettings(),n=(function(l,c,f,h){return new dX(l,c,f,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,E3(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Dee(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}})(t._componentsProvider))}function jee(t,e){as("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return R3(t,gm.provider,{build:r=>new g3(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function Kee(t){as("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();R3(t,gm.provider,{build:n=>new Ree(n,e.cacheSizeBytes)})}function R3(t,e,n){if((t=mt(t,yn))._firestoreClient||t._terminated)throw new pe(ie.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new pe(ie.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},I3(t)}function Wee(t){if(t._initialized&&!t._terminated)throw new pe(ie.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new vr;return t._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(r){if(!ts.v())return Promise.resolve();const i=r+$q;await ts.delete(i)})(qC(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function Yee(t){return(function(n){const r=new vr;return n.asyncQueue.enqueueAndForget((async()=>gee(await aI(n),r))),r.promise})(_r(t=mt(t,yn)))}function Jee(t){return Oee(_r(t=mt(t,yn)))}function Qee(t){return Lee(_r(t=mt(t,yn)))}function Xee(t,e){const n=_r(t=mt(t,yn)),r=new zee;return Bee(n,t._databaseId,e,r),r}function Zee(t,e){return qee(_r(t=mt(t,yn)),e).then((n=>n?new Gr(t,null,n.query):null))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ar(gn.fromBase64String(e))}catch(n){throw new pe(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ar(gn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ar._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if($m(e,Ar._jsonSchema))return Ar.fromBase64String(e.bytes)}}Ar._jsonSchemaVersion="firestore/bytes/1.0",Ar._jsonSchema={type:kn("string",Ar._jsonSchemaVersion),bytes:kn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sl=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new pe(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fc=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new pe(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new pe(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:mo._jsonSchemaVersion}}static fromJSON(e){if($m(e,mo._jsonSchema))return new mo(e.latitude,e.longitude)}}mo._jsonSchemaVersion="firestore/geoPoint/1.0",mo._jsonSchema={type:kn("string",mo._jsonSchemaVersion),latitude:kn("number"),longitude:kn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:rs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if($m(e,rs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new rs(e.vectorValues);throw new pe(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}rs._jsonSchemaVersion="firestore/vectorValue/1.0",rs._jsonSchema={type:kn("string",rs._jsonSchemaVersion),vectorValues:kn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ete=/^__.*__$/;class tte{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new fa(e,this.data,this.fieldMask,n,this.fieldTransforms):new Nd(e,this.data,n,this.fieldTransforms)}}class P3{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new fa(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function N3(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{Ac:t})}}class O0{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new O0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return f_(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(N3(this.Ac)&&ete.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class nte{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Qm(e)}Cc(e,n,r,i=!1){return new O0({Ac:e,methodName:n,Dc:r,path:rn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function dc(t){const e=t._freezeSettings(),n=Qm(t._databaseId);return new nte(t._databaseId,!!e.ignoreUndefinedProperties,n)}function L0(t,e,n,r,i,o={}){const s=t.Cc(o.merge||o.mergeFields?2:0,e,n,i);pI("Data must be an object, but it was:",s,r);const l=k3(r,s);let c,f;if(o.merge)c=new ei(s.fieldMask),f=s.fieldTransforms;else if(o.mergeFields){const h=[];for(const g of o.mergeFields){const v=wA(e,g,n);if(!s.contains(v))throw new pe(ie.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);L3(h,v)||h.push(v)}c=new ei(h),f=s.fieldTransforms.filter((g=>c.covers(g.field)))}else c=null,f=s.fieldTransforms;return new tte(new gr(l),c,f)}class eg extends fc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof eg}}function M3(t,e,n){return new O0({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class lI extends fc{_toFieldTransform(e){return new Wm(e.path,new td)}isEqual(e){return e instanceof lI}}class uI extends fc{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=M3(this,e,!0),r=this.vc.map((o=>hc(o,n))),i=new Ju(r);return new Wm(e.path,i)}isEqual(e){return e instanceof uI&&Js(this.vc,e.vc)}}class cI extends fc{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=M3(this,e,!0),r=this.vc.map((o=>hc(o,n))),i=new Qu(r);return new Wm(e.path,i)}isEqual(e){return e instanceof cI&&Js(this.vc,e.vc)}}class fI extends fc{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new nd(e.serializer,oq(e.serializer,this.Fc));return new Wm(e.path,n)}isEqual(e){return e instanceof fI&&this.Fc===e.Fc}}function dI(t,e,n,r){const i=t.Cc(1,e,n);pI("Data must be an object, but it was:",i,r);const o=[],s=gr.empty();Ml(r,((c,f)=>{const h=mI(e,c,n);f=Ne(f);const g=i.yc(h);if(f instanceof eg)o.push(h);else{const v=hc(f,g);v!=null&&(o.push(h),s.set(h,v))}}));const l=new ei(o);return new P3(s,l,i.fieldTransforms)}function hI(t,e,n,r,i,o){const s=t.Cc(1,e,n),l=[wA(e,r,n)],c=[i];if(o.length%2!=0)throw new pe(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)l.push(wA(e,o[v])),c.push(o[v+1]);const f=[],h=gr.empty();for(let v=l.length-1;v>=0;--v)if(!L3(f,l[v])){const E=l[v];let b=c[v];b=Ne(b);const S=s.yc(E);if(b instanceof eg)f.push(E);else{const A=hc(b,S);A!=null&&(f.push(E),h.set(E,A))}}const g=new ei(f);return new P3(h,g,s.fieldTransforms)}function D3(t,e,n,r=!1){return hc(n,t.Cc(r?4:3,e))}function hc(t,e){if(O3(t=Ne(t)))return pI("Unsupported field value:",e,t),k3(t,e);if(t instanceof fc)return(function(r,i){if(!N3(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const o=[];let s=0;for(const l of r){let c=hc(l,i.wc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=Ne(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return oq(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=xt.fromDate(r);return{timestampValue:rd(i.serializer,o)}}if(r instanceof xt){const o=new xt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:rd(i.serializer,o)}}if(r instanceof mo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ar)return{bytesValue:yq(i.serializer,r._byteString)};if(r instanceof Ht){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:kC(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof rs)return(function(s,l){return{mapValue:{fields:{[bC]:{stringValue:SC},[Xf]:{arrayValue:{values:s.toArray().map((f=>{if(typeof f!="number")throw l.Sc("VectorValues must only contain numeric values.");return IC(l.serializer,f)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${v0(r)}`)})(t,e)}function k3(t,e){const n={};return kB(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ml(t,((r,i)=>{const o=hc(i,e.mc(r));o!=null&&(n[r]=o)})),{mapValue:{fields:n}}}function O3(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof xt||t instanceof mo||t instanceof Ar||t instanceof Ht||t instanceof fc||t instanceof rs)}function pI(t,e,n){if(!O3(n)||!gB(n)){const r=v0(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function wA(t,e,n){if((e=Ne(e))instanceof Sl)return e._internalPath;if(typeof e=="string")return mI(t,e);throw f_("Field path arguments must be of type string or ",t,!1,void 0,n)}const rte=new RegExp("[~\\*/\\[\\]]");function mI(t,e,n){if(e.search(rte)>=0)throw f_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Sl(...e.split("."))._internalPath}catch{throw f_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function f_(t,e,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new pe(ie.INVALID_ARGUMENT,l+t+c)}function L3(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ite(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(V0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ite extends ym{data(){return super.data()}}function V0(t,e){return typeof e=="string"?mI(t,e):e instanceof Sl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V3(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new pe(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gI{}class tg extends gI{}function $i(t,e,...n){let r=[];e instanceof gI&&r.push(e),r=r.concat(n),(function(o){const s=o.filter((c=>c instanceof yI)).length,l=o.filter((c=>c instanceof U0)).length;if(s>1||s>0&&l>0)throw new pe(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class U0 extends tg{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new U0(e,n,r)}_apply(e){const n=this._parse(e);return F3(e._query,n),new Gr(e.firestore,e.converter,lA(e._query,n))}_parse(e){const n=dc(e.firestore);return(function(o,s,l,c,f,h,g){let v;if(f.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new pe(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){zk(g,h);const b=[];for(const S of g)b.push($k(c,o,S));v={arrayValue:{values:b}}}else v=$k(c,o,g)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||zk(g,h),v=D3(l,s,g,h==="in"||h==="not-in");return lt.create(f,h,v)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ote(t,e,n){const r=e,i=V0("where",t);return U0._create(i,r,n)}class yI extends gI{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new yI(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Nt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,o){let s=i;const l=o.getFlattenedFilters();for(const c of l)F3(s,c),s=lA(s,c)})(e._query,n),new Gr(e.firestore,e.converter,lA(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class vI extends tg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new vI(e,n)}_apply(e){const n=(function(i,o,s){if(i.startAt!==null)throw new pe(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new pe(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new dm(o,s)})(e._query,this._field,this._direction);return new Gr(e.firestore,e.converter,(function(i,o){const s=i.explicitOrderBy.concat([o]);return new ua(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}}function d_(t,e="asc"){const n=e,r=V0("orderBy",t);return vI._create(r,n)}class F0 extends tg{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new F0(e,n,r)}_apply(e){return new Gr(e.firestore,e.converter,n_(e._query,this._limit,this._limitType))}}function ste(t){return yB("limit",t),F0._create("limit",t,"F")}function ate(t){return yB("limitToLast",t),F0._create("limitToLast",t,"L")}class B0 extends tg{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new B0(e,n,r)}_apply(e){const n=U3(e,this.type,this._docOrFields,this._inclusive);return new Gr(e.firestore,e.converter,(function(i,o){return new ua(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)})(e._query,n))}}function lte(...t){return B0._create("startAt",t,!0)}function ute(...t){return B0._create("startAfter",t,!1)}class q0 extends tg{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new q0(e,n,r)}_apply(e){const n=U3(e,this.type,this._docOrFields,this._inclusive);return new Gr(e.firestore,e.converter,(function(i,o){return new ua(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)})(e._query,n))}}function cte(...t){return q0._create("endBefore",t,!1)}function fte(...t){return q0._create("endAt",t,!0)}function U3(t,e,n,r){if(n[0]=Ne(n[0]),n[0]instanceof ym)return(function(o,s,l,c,f){if(!c)throw new pe(ie.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const h=[];for(const g of Df(o))if(g.field.isKeyField())h.push(Wu(s,c.key));else{const v=c.data.field(g.field);if(b0(v))throw new pe(ie.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(v===null){const E=g.field.canonicalString();throw new pe(ie.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${E}' (used as the orderBy) does not exist.`)}h.push(v)}return new El(h,f)})(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=dc(t.firestore);return(function(s,l,c,f,h,g){const v=s.explicitOrderBy;if(h.length>v.length)throw new pe(ie.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const E=[];for(let b=0;b<h.length;b++){const S=h[b];if(v[b].field.isKeyField()){if(typeof S!="string")throw new pe(ie.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof S}`);if(!xC(s)&&S.indexOf("/")!==-1)throw new pe(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${S}' contains a slash.`);const A=s.path.child(st.fromString(S));if(!we.isDocumentKey(A))throw new pe(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${A}' is not because it contains an odd number of segments.`);const C=new we(A);E.push(Wu(l,C))}else{const A=D3(c,f,S);E.push(A)}}return new El(E,g)})(t._query,t.firestore._databaseId,i,e,n,r)}}function $k(t,e,n){if(typeof(n=Ne(n))=="string"){if(n==="")throw new pe(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xC(e)&&n.indexOf("/")!==-1)throw new pe(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(st.fromString(n));if(!we.isDocumentKey(r))throw new pe(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wu(t,new we(r))}if(n instanceof Ht)return Wu(t,n._key);throw new pe(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${v0(n)}.`)}function zk(t,e){if(!Array.isArray(t)||t.length===0)throw new pe(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function F3(t,e){const n=(function(i,o){for(const s of i)for(const l of s.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new pe(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class _I{convertValue(e,n="none"){switch(_l(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ta(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ml(e,((i,o)=>{r[i]=this.convertValue(o,n)})),r}convertVectorValue(e){var r,i,o;const n=(o=(i=(r=e.fields)==null?void 0:r[Xf].arrayValue)==null?void 0:i.values)==null?void 0:o.map((s=>nn(s.doubleValue)));return new rs(n)}convertGeoPoint(e){return new mo(nn(e.latitude),nn(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=S0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(um(e));default:return null}}convertTimestamp(e){const n=ea(e);return new xt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=st.fromString(e);ke(Iq(r),9688,{name:e});const i=new vl(r.get(1),r.get(3)),o=new we(r.popFirst(5));return i.isEqual(n)||An(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class dte extends _I{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ar(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ht(this.firestore,null,n)}}class Du{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let ji=class B3 extends ym{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new jp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(V0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=B3._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};ji._jsonSchemaVersion="firestore/documentSnapshot/1.0",ji._jsonSchema={type:kn("string",ji._jsonSchemaVersion),bundleSource:kn("string","DocumentSnapshot"),bundleName:kn("string"),bundle:kn("string")};let jp=class extends ji{data(e={}){return super.data(e)}},go=class q3{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Du(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new jp(this._firestore,this._userDataWriter,r.key,r,new Du(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new pe(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map((l=>{const c=new jp(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Du(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((l=>o||l.type!==3)).map((l=>{const c=new jp(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Du(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,h=-1;return l.type!==0&&(f=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),l.type!==1&&(s=s.add(l.doc),h=s.indexOf(l.doc.key)),{type:hte(l.type),doc:c,oldIndex:f,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=q3._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=mC.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function hte(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:t})}}function $3(t,e){return t instanceof ji&&e instanceof ji?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof go&&e instanceof go&&t._firestore===e._firestore&&C3(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(t){t=mt(t,Ht);const e=mt(t.firestore,yn);return _3(_r(e),t._key).then((n=>wI(e,t,n)))}go._jsonSchemaVersion="firestore/querySnapshot/1.0",go._jsonSchema={type:kn("string",go._jsonSchemaVersion),bundleSource:kn("string","QuerySnapshot"),bundleName:kn("string"),bundle:kn("string")};class pc extends _I{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ar(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ht(this.firestore,null,n)}}function pte(t){t=mt(t,Ht);const e=mt(t.firestore,yn),n=_r(e),r=new pc(e);return Vee(n,t._key).then((i=>new ji(e,r,t._key,i,new Du(i!==null&&i.hasLocalMutations,!0),t.converter)))}function mte(t){t=mt(t,Ht);const e=mt(t.firestore,yn);return _3(_r(e),t._key,{source:"server"}).then((n=>wI(e,t,n)))}function EI(t){t=mt(t,Gr);const e=mt(t.firestore,yn),n=_r(e),r=new pc(e);return V3(t._query),T3(n,t._query).then((i=>new go(e,r,t,i)))}function gte(t){t=mt(t,Gr);const e=mt(t.firestore,yn),n=_r(e),r=new pc(e);return Uee(n,t._query).then((i=>new go(e,r,t,i)))}function yte(t){t=mt(t,Gr);const e=mt(t.firestore,yn),n=_r(e),r=new pc(e);return T3(n,t._query,{source:"server"}).then((i=>new go(e,r,t,i)))}function Hk(t,e,n){t=mt(t,Ht);const r=mt(t.firestore,yn),i=$0(t.converter,e,n);return Vd(r,[L0(dc(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,on.none())])}function vm(t,e,n,...r){t=mt(t,Ht);const i=mt(t.firestore,yn),o=dc(i);let s;return s=typeof(e=Ne(e))=="string"||e instanceof Sl?hI(o,"updateDoc",t._key,e,n,r):dI(o,"updateDoc",t._key,e),Vd(i,[s.toMutation(t._key,on.exists(!0))])}function bA(t){return Vd(mt(t.firestore,yn),[new Md(t._key,on.none())])}function _m(t,e){const n=mt(t.firestore,yn),r=po(t),i=$0(t.converter,e);return Vd(n,[L0(dc(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,on.exists(!1))]).then((()=>r))}function Tm(t,...e){var c,f,h;t=Ne(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||EA(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(EA(e[r])){const g=e[r];e[r]=(c=g.next)==null?void 0:c.bind(g),e[r+1]=(f=g.error)==null?void 0:f.bind(g),e[r+2]=(h=g.complete)==null?void 0:h.bind(g)}let o,s,l;if(t instanceof Ht)s=mt(t.firestore,yn),l=Pd(t._key.path),o={next:g=>{e[r]&&e[r](wI(s,t,g))},error:e[r+1],complete:e[r+2]};else{const g=mt(t,Gr);s=mt(g.firestore,yn),l=g._query;const v=new pc(s);o={next:E=>{e[r]&&e[r](new go(s,v,g,E))},error:e[r+1],complete:e[r+2]},V3(t._query)}return(function(v,E,b,S){const A=new D0(S),C=new ZC(E,A,b);return v.asyncQueue.enqueueAndForget((async()=>JC(await ud(v),C))),()=>{A.Nu(),v.asyncQueue.enqueueAndForget((async()=>QC(await ud(v),C)))}})(_r(s),l,i,o)}function vte(t,e){return Fee(_r(t=mt(t,yn)),EA(e)?e:{next:e})}function Vd(t,e){return(function(r,i){const o=new vr;return r.asyncQueue.enqueueAndForget((async()=>dee(await aI(r),i,o))),o.promise})(_r(t),e)}function wI(t,e,n){const r=n.docs.get(e._key),i=new pc(t);return new ji(t,i,e._key,r,new Du(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _te={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let z3=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=dc(e)}set(e,n,r){this._verifyNotCommitted();const i=sl(e,this._firestore),o=$0(i.converter,n,r),s=L0(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,on.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const o=sl(e,this._firestore);let s;return s=typeof(n=Ne(n))=="string"||n instanceof Sl?hI(this._dataReader,"WriteBatch.update",o._key,n,r,i):dI(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,on.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=sl(e,this._firestore);return this._mutations=this._mutations.concat(new Md(n._key,on.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new pe(ie.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function sl(t,e){if((t=Ne(t)).firestore!==e)throw new pe(ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tte{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=dc(e)}get(e){const n=sl(e,this._firestore),r=new dte(this._firestore);return this._transaction.lookup([n._key]).then((i=>{if(!i||i.length!==1)return Ce(24041);const o=i[0];if(o.isFoundDocument())return new ym(this._firestore,r,o.key,o,n.converter);if(o.isNoDocument())return new ym(this._firestore,r,n._key,null,n.converter);throw Ce(18433,{doc:o})}))}set(e,n,r){const i=sl(e,this._firestore),o=$0(i.converter,n,r),s=L0(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this}update(e,n,r,...i){const o=sl(e,this._firestore);let s;return s=typeof(n=Ne(n))=="string"||n instanceof Sl?hI(this._dataReader,"Transaction.update",o._key,n,r,i):dI(this._dataReader,"Transaction.update",o._key,n),this._transaction.update(o._key,s),this}delete(e){const n=sl(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ete=class extends Tte{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=sl(e,this._firestore),r=new pc(this._firestore);return super.get(e).then((i=>new ji(this._firestore,r,n._key,i._document,new Du(!1,!1),n.converter)))}};function wte(t,e,n){t=mt(t,yn);const r={..._te,...n};return(function(o){if(o.maxAttempts<1)throw new pe(ie.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(o,s,l){const c=new vr;return o.asyncQueue.enqueueAndForget((async()=>{const f=await kee(o);new Mee(o.asyncQueue,f,l,s,c).ju()})),c.promise})(_r(t),(i=>e(new Ete(t,i))),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bte(){return new eg("deleteField")}function dl(){return new lI("serverTimestamp")}function Ste(...t){return new uI("arrayUnion",t)}function Ate(...t){return new cI("arrayRemove",t)}function H3(t){return new fI("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xte(t){return _r(t=mt(t,yn)),new z3(t,(e=>Vd(t,e)))}(function(e,n=!0){(function(i){Rd=i})(sa),Xs(new Yi("firestore",((r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),l=new yn(new xQ(r.getProvider("auth-internal")),new RQ(s,r.getProvider("app-check-internal")),(function(f,h){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new pe(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vl(f.options.projectId,h)})(s,i),s);return o={useFetchStreams:n,...o},l._setSettings(o),l}),"PUBLIC").setMultipleInstances(!0)),wi(ED,wD,e),wi(ED,wD,"esm2020")})();const Cte="@firebase/firestore-compat",Ite="0.4.1";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new pe("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gk(){if(typeof Uint8Array>"u")throw new pe("unimplemented","Uint8Arrays are not available in this environment.")}function jk(){if(!cX())throw new pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}let G3=class SA{constructor(e){this._delegate=e}static fromBase64String(e){return jk(),new SA(Ar.fromBase64String(e))}static fromUint8Array(e){return Gk(),new SA(Ar.fromUint8Array(e))}toBase64(){return jk(),this._delegate.toBase64()}toUint8Array(){return Gk(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(t){return Rte(t,["next","error","complete"])}function Rte(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pte{enableIndexedDbPersistence(e,n){return jee(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return Kee(e._delegate)}clearIndexedDbPersistence(e){return Wee(e._delegate)}}class j3{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof vl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&as("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...n,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){b3(this._delegate,e,n,r)}enableNetwork(){return Jee(this._delegate)}disableNetwork(){return Qee(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,mB("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Yee(this._delegate)}onSnapshotsInSync(e){return vte(this._delegate,e)}get app(){if(!this._appCompat)throw new pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new cd(this,Yo(this._delegate,e))}catch(n){throw Ur(n,"collection()","Firestore.collection()")}}doc(e){try{return new Hi(this,po(this._delegate,e))}catch(n){throw Ur(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Lr(this,$ee(this._delegate,e))}catch(n){throw Ur(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return wte(this._delegate,n=>e(new K3(this,n)))}batch(){return _r(this._delegate),new W3(new z3(this._delegate,e=>Vd(this._delegate,e)))}loadBundle(e){return Xee(this._delegate,e)}namedQuery(e){return Zee(this._delegate,e).then(n=>n?new Lr(this,n):null)}}class z0 extends _I{constructor(e){super(),this.firestore=e}convertBytes(e){return new G3(new Ar(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Hi.forKey(n,this.firestore,null)}}function Nte(t){wQ(t)}class K3{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new z0(e)}get(e){const n=ku(e);return this._delegate.get(n).then(r=>new Em(this._firestore,new ji(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=ku(e);return r?(bI("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=ku(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=ku(e);return this._delegate.delete(n),this}}class W3{constructor(e){this._delegate=e}set(e,n,r){const i=ku(e);return r?(bI("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=ku(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=ku(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class nc{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new jp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new wm(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=nc.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new nc(e,new z0(e),n),i.set(n,o)),o}}nc.INSTANCES=new WeakMap;class Hi{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new z0(e)}static forPath(e,n,r){if(e.length%2!==0)throw new pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Hi(n,new Ht(n._delegate,r,new we(e)))}static forKey(e,n,r){return new Hi(n,new Ht(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new cd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new cd(this.firestore,Yo(this._delegate,e))}catch(n){throw Ur(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ne(e),e instanceof Ht?x3(this._delegate,e):!1}set(e,n){n=bI("DocumentReference.set",n);try{return n?Hk(this._delegate,e,n):Hk(this._delegate,e)}catch(r){throw Ur(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?vm(this._delegate,e):vm(this._delegate,e,n,...r)}catch(i){throw Ur(i,"updateDoc()","DocumentReference.update()")}}delete(){return bA(this._delegate)}onSnapshot(...e){const n=Y3(e),r=J3(e,i=>new Em(this.firestore,new ji(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Tm(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=pte(this._delegate):(e==null?void 0:e.source)==="server"?n=mte(this._delegate):n=TI(this._delegate),n.then(r=>new Em(this.firestore,new ji(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Hi(this.firestore,e?this._delegate.withConverter(nc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Ur(t,e,n){return t.message=t.message.replace(e,n),t}function Y3(t){for(const e of t)if(typeof e=="object"&&!AA(e))return e;return{}}function J3(t,e){var r,i;let n;return AA(t[0])?n=t[0]:AA(t[1])?n=t[1]:typeof t[0]=="function"?n={next:t[0],error:t[1],complete:t[2]}:n={next:t[1],error:t[2],complete:t[3]},{next:o=>{n.next&&n.next(e(o))},error:(r=n.error)==null?void 0:r.bind(n),complete:(i=n.complete)==null?void 0:i.bind(n)}}class Em{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Hi(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return $3(this._delegate,e._delegate)}}class wm extends Em{data(e){const n=this._delegate.data(e);return this._delegate._converter||bQ(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}}class Lr{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new z0(e)}where(e,n,r){try{return new Lr(this.firestore,$i(this._delegate,ote(e,n,r)))}catch(i){throw Ur(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Lr(this.firestore,$i(this._delegate,d_(e,n)))}catch(r){throw Ur(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Lr(this.firestore,$i(this._delegate,ste(e)))}catch(n){throw Ur(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Lr(this.firestore,$i(this._delegate,ate(e)))}catch(n){throw Ur(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Lr(this.firestore,$i(this._delegate,lte(...e)))}catch(n){throw Ur(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Lr(this.firestore,$i(this._delegate,ute(...e)))}catch(n){throw Ur(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Lr(this.firestore,$i(this._delegate,cte(...e)))}catch(n){throw Ur(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Lr(this.firestore,$i(this._delegate,fte(...e)))}catch(n){throw Ur(n,"endAt()","Query.endAt()")}}isEqual(e){return C3(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=gte(this._delegate):(e==null?void 0:e.source)==="server"?n=yte(this._delegate):n=EI(this._delegate),n.then(r=>new xA(this.firestore,new go(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=Y3(e),r=J3(e,i=>new xA(this.firestore,new go(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Tm(this._delegate,n,r)}withConverter(e){return new Lr(this.firestore,e?this._delegate.withConverter(nc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class Mte{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new wm(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class xA{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Lr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new wm(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new Mte(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new wm(this._firestore,r))})}isEqual(e){return $3(this._delegate,e._delegate)}}class cd extends Lr{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Hi(this.firestore,e):null}doc(e){try{return e===void 0?new Hi(this.firestore,po(this._delegate)):new Hi(this.firestore,po(this._delegate,e))}catch(n){throw Ur(n,"doc()","CollectionReference.doc()")}}add(e){return _m(this._delegate,e).then(n=>new Hi(this.firestore,n))}isEqual(e){return x3(this._delegate,e._delegate)}withConverter(e){return new cd(this.firestore,e?this._delegate.withConverter(nc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function ku(t){return mt(t,Ht)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(...e){this._delegate=new Sl(...e)}static documentId(){return new SI(rn.keyField().canonicalString())}isEqual(e){return e=Ne(e),e instanceof Sl?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{static serverTimestamp(){const e=dl();return e._methodName="FieldValue.serverTimestamp",new Pu(e)}static delete(){const e=bte();return e._methodName="FieldValue.delete",new Pu(e)}static arrayUnion(...e){const n=Ste(...e);return n._methodName="FieldValue.arrayUnion",new Pu(n)}static arrayRemove(...e){const n=Ate(...e);return n._methodName="FieldValue.arrayRemove",new Pu(n)}static increment(e){const n=H3(e);return n._methodName="FieldValue.increment",new Pu(n)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dte={Firestore:j3,GeoPoint:mo,Timestamp:xt,Blob:G3,Transaction:K3,WriteBatch:W3,DocumentReference:Hi,DocumentSnapshot:Em,Query:Lr,QueryDocumentSnapshot:wm,QuerySnapshot:xA,CollectionReference:cd,FieldPath:SI,FieldValue:Pu,setLogLevel:Nte,CACHE_SIZE_UNLIMITED:Hee};function kte(t,e){t.INTERNAL.registerComponent(new Yi("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps({...Dte}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ote(t){kte(t,(e,n)=>new j3(e,n,new Pte)),t.registerVersion(Cte,Ite)}Ote(Il);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q3="firebasestorage.googleapis.com",X3="storageBucket",Lte=120*1e3,Vte=600*1e3,Ute=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn extends Ir{constructor(e,n,r=0){super(Xw(e),`Firebase Storage: ${n} (${Xw(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,dn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Xw(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Zt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Zt||(Zt={}));function Xw(t){return"storage/"+t}function AI(){const t="An unknown error occurred, please check the error payload for server response.";return new dn(Zt.UNKNOWN,t)}function Fte(t){return new dn(Zt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Bte(t){return new dn(Zt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function qte(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new dn(Zt.UNAUTHENTICATED,t)}function $te(){return new dn(Zt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function zte(t){return new dn(Zt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Z3(){return new dn(Zt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function e6(){return new dn(Zt.CANCELED,"User canceled the upload/download.")}function Hte(t){return new dn(Zt.INVALID_URL,"Invalid URL '"+t+"'.")}function Gte(t){return new dn(Zt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function jte(){return new dn(Zt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+X3+"' property when initializing the app?")}function t6(){return new dn(Zt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Kte(){return new dn(Zt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function Wte(){return new dn(Zt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Yte(t){return new dn(Zt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Of(t){return new dn(Zt.INVALID_ARGUMENT,t)}function n6(){return new dn(Zt.APP_DELETED,"The Firebase app was deleted.")}function r6(t){return new dn(Zt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Kp(t,e){return new dn(Zt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function fp(t){throw new dn(Zt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=xr.makeFromUrl(e,n)}catch{return new xr(e,"")}if(r.path==="")return r;throw Gte(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(q){q.path.charAt(q.path.length-1)==="/"&&(q.path_=q.path_.slice(0,-1))}const s="(/(.*))?$",l=new RegExp("^gs://"+i+s,"i"),c={bucket:1,path:3};function f(q){q.path_=decodeURIComponent(q.path)}const h="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",E=new RegExp(`^https?://${g}/${h}/b/${i}/o${v}`,"i"),b={bucket:1,path:3},S=n===Q3?"(?:storage.googleapis.com|storage.cloud.google.com)":n,A="([^?#]*)",C=new RegExp(`^https?://${S}/${i}/${A}`,"i"),k=[{regex:l,indices:c,postModify:o},{regex:E,indices:b,postModify:f},{regex:C,indices:{bucket:1,path:2},postModify:f}];for(let q=0;q<k.length;q++){const $=k[q],H=$.regex.exec(e);if(H){const M=H[$.indices.bucket];let O=H[$.indices.path];O||(O=""),r=new xr(M,O),$.postModify(r);break}}if(r==null)throw Hte(e);return r}}class Jte{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qte(t,e,n){let r=1,i=null,o=null,s=!1,l=0;function c(){return l===2}let f=!1;function h(...A){f||(f=!0,e.apply(null,A))}function g(A){i=setTimeout(()=>{i=null,t(E,c())},A)}function v(){o&&clearTimeout(o)}function E(A,...C){if(f){v();return}if(A){v(),h.call(null,A,...C);return}if(c()||s){v(),h.call(null,A,...C);return}r<64&&(r*=2);let k;l===1?(l=2,k=0):k=(r+Math.random())*1e3,g(k)}let b=!1;function S(A){b||(b=!0,v(),!f&&(i!==null?(A||(l=2),clearTimeout(i),g(0)):A||(l=1)))}return g(0),o=setTimeout(()=>{s=!0,S(!0)},n),S}function Xte(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zte(t){return t!==void 0}function ene(t){return typeof t=="function"}function tne(t){return typeof t=="object"&&!Array.isArray(t)}function H0(t){return typeof t=="string"||t instanceof String}function Kk(t){return xI()&&t instanceof Blob}function xI(){return typeof Blob<"u"}function CA(t,e,n,r){if(r<e)throw Of(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Of(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ol(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function i6(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var qu;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(qu||(qu={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o6(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nne{constructor(e,n,r,i,o,s,l,c,f,h,g,v=!0,E=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=l,this.errorCallback_=c,this.timeout_=f,this.progressCallback_=h,this.connectionFactory_=g,this.retry=v,this.isUsingEmulator=E,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,S)=>{this.resolve_=b,this.reject_=S,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Jy(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const s=l=>{const c=l.loaded,f=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,f)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const l=o.getErrorCode()===qu.NO_ERROR,c=o.getStatus();if(!l||o6(c,this.additionalRetryCodes_)&&this.retry){const h=o.getErrorCode()===qu.ABORT;r(!1,new Jy(!1,null,h));return}const f=this.successCodes_.indexOf(c)!==-1;r(!0,new Jy(f,o))})},n=(r,i)=>{const o=this.resolve_,s=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());Zte(c)?o(c):o()}catch(c){s(c)}else if(l!==null){const c=AI();c.serverResponse=l.getErrorText(),this.errorCallback_?s(this.errorCallback_(l,c)):s(c)}else if(i.canceled){const c=this.appDelete_?n6():e6();s(c)}else{const c=Z3();s(c)}};this.canceled_?n(!1,new Jy(!1,null,!0)):this.backoffId_=Qte(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Xte(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Jy{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function rne(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function ine(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function one(t,e){e&&(t["X-Firebase-GMPID"]=e)}function sne(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function ane(t,e,n,r,i,o,s=!0,l=!1){const c=i6(t.urlParams),f=t.url+c,h=Object.assign({},t.headers);return one(h,e),rne(h,n),ine(h,o),sne(h,r),new nne(f,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lne(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function une(...t){const e=lne();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(xI())return new Blob(t);throw new dn(Zt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function cne(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fne(t){if(typeof atob>"u")throw Yte("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Zw{constructor(e,n){this.data=e,this.contentType=n||null}}function CI(t,e){switch(t){case _i.RAW:return new Zw(s6(e));case _i.BASE64:case _i.BASE64URL:return new Zw(a6(t,e));case _i.DATA_URL:return new Zw(hne(e),pne(e))}throw AI()}function s6(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=r,s=t.charCodeAt(++n);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function dne(t){let e;try{e=decodeURIComponent(t)}catch{throw Kp(_i.DATA_URL,"Malformed data URL.")}return s6(e)}function a6(t,e){switch(t){case _i.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw Kp(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case _i.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw Kp(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=fne(e)}catch(i){throw i.message.includes("polyfill")?i:Kp(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class l6{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Kp(_i.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=mne(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function hne(t){const e=new l6(t);return e.base64?a6(_i.BASE64,e.rest):dne(e.rest)}function pne(t){return new l6(t).contentType}function mne(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,n){let r=0,i="";Kk(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(Kk(this.data_)){const r=this.data_,i=cne(r,e,n);return i===null?null:new Jo(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Jo(r,!0)}}static getBlob(...e){if(xI()){const n=e.map(r=>r instanceof Jo?r.data_:r);return new Jo(une.apply(null,n))}else{const n=e.map(s=>H0(s)?CI(_i.RAW,s).data:s.data_);let r=0;n.forEach(s=>{r+=s.byteLength});const i=new Uint8Array(r);let o=0;return n.forEach(s=>{for(let l=0;l<s.length;l++)i[o++]=s[l]}),new Jo(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(t){let e;try{e=JSON.parse(t)}catch{return null}return tne(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gne(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function yne(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function u6(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vne(t,e){return e}class Or{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||vne}}let Qy=null;function _ne(t){return!H0(t)||t.length<2?t:u6(t)}function ng(){if(Qy)return Qy;const t=[];t.push(new Or("bucket")),t.push(new Or("generation")),t.push(new Or("metageneration")),t.push(new Or("name","fullPath",!0));function e(o,s){return _ne(s)}const n=new Or("name");n.xform=e,t.push(n);function r(o,s){return s!==void 0?Number(s):s}const i=new Or("size");return i.xform=r,t.push(i),t.push(new Or("timeCreated")),t.push(new Or("updated")),t.push(new Or("md5Hash",null,!0)),t.push(new Or("cacheControl",null,!0)),t.push(new Or("contentDisposition",null,!0)),t.push(new Or("contentEncoding",null,!0)),t.push(new Or("contentLanguage",null,!0)),t.push(new Or("contentType",null,!0)),t.push(new Or("metadata","customMetadata",!0)),Qy=t,Qy}function Tne(t,e){function n(){const r=t.bucket,i=t.fullPath,o=new xr(r,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function Ene(t,e,n){const r={};r.type="file";const i=n.length;for(let o=0;o<i;o++){const s=n[o];r[s.local]=s.xform(r,e[s.server])}return Tne(r,t),r}function c6(t,e,n){const r=II(e);return r===null?null:Ene(t,r,n)}function wne(t,e,n,r){const i=II(e);if(i===null||!H0(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const s=encodeURIComponent;return o.split(",").map(f=>{const h=t.bucket,g=t.fullPath,v="/b/"+s(h)+"/o/"+s(g),E=Ol(v,n,r),b=i6({alt:"media",token:f});return E+b})[0]}function RI(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk="prefixes",Yk="items";function bne(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Wk])for(const i of n[Wk]){const o=i.replace(/\/$/,""),s=t._makeStorageReference(new xr(e,o));r.prefixes.push(s)}if(n[Yk])for(const i of n[Yk]){const o=t._makeStorageReference(new xr(e,i.name));r.items.push(o)}return r}function Sne(t,e,n){const r=II(n);return r===null?null:bne(t,e,r)}class ha{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function is(t){if(!t)throw AI()}function G0(t,e){function n(r,i){const o=c6(t,i,e);return is(o!==null),o}return n}function Ane(t,e){function n(r,i){const o=Sne(t,e,i);return is(o!==null),o}return n}function xne(t,e){function n(r,i){const o=c6(t,i,e);return is(o!==null),wne(o,i,t.host,t._protocol)}return n}function Ud(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=$te():i=qte():n.getStatus()===402?i=Bte(t.bucket):n.getStatus()===403?i=zte(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function j0(t){const e=Ud(t);function n(r,i){let o=e(r,i);return r.getStatus()===404&&(o=Fte(t.path)),o.serverResponse=i.serverResponse,o}return n}function f6(t,e,n){const r=e.fullServerUrl(),i=Ol(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,l=new ha(i,o,G0(t,n),s);return l.errorHandler=j0(e),l}function Cne(t,e,n,r,i){const o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);const s=e.bucketOnlyServerUrl(),l=Ol(s,t.host,t._protocol),c="GET",f=t.maxOperationRetryTime,h=new ha(l,c,Ane(t,e.bucket),f);return h.urlParams=o,h.errorHandler=Ud(e),h}function Ine(t,e,n){const r=e.fullServerUrl(),i=Ol(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,l=new ha(i,o,xne(t,n),s);return l.errorHandler=j0(e),l}function Rne(t,e,n,r){const i=e.fullServerUrl(),o=Ol(i,t.host,t._protocol),s="PATCH",l=RI(n,r),c={"Content-Type":"application/json; charset=utf-8"},f=t.maxOperationRetryTime,h=new ha(o,s,G0(t,r),f);return h.headers=c,h.body=l,h.errorHandler=j0(e),h}function Pne(t,e){const n=e.fullServerUrl(),r=Ol(n,t.host,t._protocol),i="DELETE",o=t.maxOperationRetryTime;function s(c,f){}const l=new ha(r,i,s,o);return l.successCodes=[200,204],l.errorHandler=j0(e),l}function Nne(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function d6(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=Nne(null,e)),r}function h6(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function l(){let k="";for(let q=0;q<2;q++)k=k+Math.random().toString().slice(2);return k}const c=l();s["Content-Type"]="multipart/related; boundary="+c;const f=d6(e,r,i),h=RI(f,n),g="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+f.contentType+`\r
\r
`,v=`\r
--`+c+"--",E=Jo.getBlob(g,r,v);if(E===null)throw t6();const b={name:f.fullPath},S=Ol(o,t.host,t._protocol),A="POST",C=t.maxUploadRetryTime,D=new ha(S,A,G0(t,n),C);return D.urlParams=b,D.headers=s,D.body=E.uploadData(),D.errorHandler=Ud(e),D}class h_{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function PI(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{is(!1)}return is(!!n&&(e||["active"]).indexOf(n)!==-1),n}function Mne(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),s=d6(e,r,i),l={name:s.fullPath},c=Ol(o,t.host,t._protocol),f="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},g=RI(s,n),v=t.maxUploadRetryTime;function E(S){PI(S);let A;try{A=S.getResponseHeader("X-Goog-Upload-URL")}catch{is(!1)}return is(H0(A)),A}const b=new ha(c,f,E,v);return b.urlParams=l,b.headers=h,b.body=g,b.errorHandler=Ud(e),b}function Dne(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function o(f){const h=PI(f,["active","final"]);let g=null;try{g=f.getResponseHeader("X-Goog-Upload-Size-Received")}catch{is(!1)}g||is(!1);const v=Number(g);return is(!isNaN(v)),new h_(v,r.size(),h==="final")}const s="POST",l=t.maxUploadRetryTime,c=new ha(n,s,o,l);return c.headers=i,c.errorHandler=Ud(e),c}const Jk=256*1024;function kne(t,e,n,r,i,o,s,l){const c=new h_(0,0);if(s?(c.current=s.current,c.total=s.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw Kte();const f=c.total-c.current;let h=f;i>0&&(h=Math.min(h,i));const g=c.current,v=g+h;let E="";h===0?E="finalize":f===h?E="upload, finalize":E="upload";const b={"X-Goog-Upload-Command":E,"X-Goog-Upload-Offset":`${c.current}`},S=r.slice(g,v);if(S===null)throw t6();function A(q,$){const H=PI(q,["active","final"]),M=c.current+h,O=r.size();let L;return H==="final"?L=G0(e,o)(q,$):L=null,new h_(M,O,H==="final",L)}const C="POST",D=e.maxUploadRetryTime,k=new ha(n,C,A,D);return k.headers=b,k.body=S.uploadData(),k.progressCallback=l||null,k.errorHandler=Ud(t),k}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const One={STATE_CHANGED:"state_changed"},Fr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function eb(t){switch(t){case"running":case"pausing":case"canceling":return Fr.RUNNING;case"paused":return Fr.PAUSED;case"success":return Fr.SUCCESS;case"canceled":return Fr.CANCELED;case"error":return Fr.ERROR;default:return Fr.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lne{constructor(e,n,r){if(ene(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vf(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class Vne{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=qu.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=qu.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=qu.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,o){if(this.sent_)throw fp("cannot .send() more than once");if(Cl(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const s in o)o.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,o[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw fp("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw fp("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw fp("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw fp("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Une extends Vne{initXhr(){this.xhr_.responseType="text"}}function uo(){return new Une}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=ng(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Zt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(o6(i.status,[]))if(o)i=Z3();else{this.sleepTime=Math.max(this.sleepTime*2,Ute),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Zt.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=Mne(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,uo,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=Dne(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,uo,n,r);this._request=o,o.getPromise().then(s=>{s=s,this._request=void 0,this._updateProgress(s.current),this._needToFetchStatus=!1,s.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=Jk*this._chunkMultiplier,n=new h_(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let s;try{s=kne(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}const l=this._ref.storage._makeRequest(s,uo,i,o,!1);this._request=l,l.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){Jk*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=f6(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,uo,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=h6(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,uo,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=e6(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=eb(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const o=new Lne(n||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(eb(this._state)){case Fr.SUCCESS:vf(this._resolve.bind(null,this.snapshot))();break;case Fr.CANCELED:case Fr.ERROR:const n=this._reject;vf(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(eb(this._state)){case Fr.RUNNING:case Fr.PAUSED:e.next&&vf(e.next.bind(e,this.snapshot))();break;case Fr.SUCCESS:e.complete&&vf(e.complete.bind(e))();break;case Fr.CANCELED:case Fr.ERROR:e.error&&vf(e.error.bind(e,this._error))();break;default:e.error&&vf(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,n){this._service=e,n instanceof xr?this._location=n:this._location=xr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new rc(e,n)}get root(){const e=new xr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return u6(this._location.path)}get storage(){return this._service}get parent(){const e=gne(this._location.path);if(e===null)return null;const n=new xr(this._location.bucket,e);return new rc(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw r6(e)}}function Fne(t,e,n){t._throwIfRoot("uploadBytes");const r=h6(t.storage,t._location,ng(),new Jo(e,!0),n);return t.storage.makeRequestWithTokens(r,uo).then(i=>({metadata:i,ref:t}))}function Bne(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new p6(t,new Jo(e),n)}function qne(t,e,n=_i.RAW,r){t._throwIfRoot("uploadString");const i=CI(n,e),o={...r};return o.contentType==null&&i.contentType!=null&&(o.contentType=i.contentType),Fne(t,i.data,o)}function $ne(t){const e={prefixes:[],items:[]};return m6(t,e).then(()=>e)}async function m6(t,e,n){const i=await g6(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&await m6(t,e,i.nextPageToken)}function g6(t,e){e!=null&&typeof e.maxResults=="number"&&CA("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=Cne(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,uo)}function zne(t){t._throwIfRoot("getMetadata");const e=f6(t.storage,t._location,ng());return t.storage.makeRequestWithTokens(e,uo)}function Hne(t,e){t._throwIfRoot("updateMetadata");const n=Rne(t.storage,t._location,e,ng());return t.storage.makeRequestWithTokens(n,uo)}function Gne(t){t._throwIfRoot("getDownloadURL");const e=Ine(t.storage,t._location,ng());return t.storage.makeRequestWithTokens(e,uo).then(n=>{if(n===null)throw Wte();return n})}function jne(t){t._throwIfRoot("deleteObject");const e=Pne(t.storage,t._location);return t.storage.makeRequestWithTokens(e,uo)}function y6(t,e){const n=yne(t._location.path,e),r=new xr(t._location.bucket,n);return new rc(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kne(t){return/^[A-Za-z]+:\/\//.test(t)}function Wne(t,e){return new rc(t,e)}function v6(t,e){if(t instanceof NI){const n=t;if(n._bucket==null)throw jte();const r=new rc(n,n._bucket);return e!=null?v6(r,e):r}else return e!==void 0?y6(t,e):t}function Yne(t,e){if(e&&Kne(e)){if(t instanceof NI)return Wne(t,e);throw Of("To use ref(service, url), the first argument must be a Storage instance.")}else return v6(t,e)}function Qk(t,e){const n=e==null?void 0:e[X3];return n==null?null:xr.makeFromBucketSpec(n,t)}function Jne(t,e,n,r={}){t.host=`${e}:${n}`;const i=Cl(e);i&&(qx(`https://${t.host}/b`),$x("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:o}=r;o&&(t._overrideAuthToken=typeof o=="string"?o:F4(o,t.app.options.projectId))}class NI{constructor(e,n,r,i,o,s=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=s,this._bucket=null,this._host=Q3,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Lte,this._maxUploadRetryTime=Vte,this._requests=new Set,i!=null?this._bucket=xr.makeFromBucketSpec(i,this._host):this._bucket=Qk(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=xr.makeFromBucketSpec(this._url,e):this._bucket=Qk(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){CA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){CA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Qt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new rc(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new Jte(n6());{const s=ane(e,this._appId,r,i,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const Xk="@firebase/storage",Zk="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _6="storage";function Qne(t,e,n,r){return t=Ne(t),qne(t,e,n,r)}function Xne(t,e,n){return t=Ne(t),Bne(t,e,n)}function Zne(t){return t=Ne(t),zne(t)}function ere(t,e){return t=Ne(t),Hne(t,e)}function tre(t,e){return t=Ne(t),g6(t,e)}function nre(t){return t=Ne(t),$ne(t)}function T6(t){return t=Ne(t),Gne(t)}function rre(t){return t=Ne(t),jne(t)}function IA(t,e){return t=Ne(t),Yne(t,e)}function ire(t,e){return y6(t,e)}function ore(t=o0(),e){t=Ne(t);const r=Ad(t,_6).getImmediate({identifier:e}),i=V4("storage");return i&&E6(r,...i),r}function E6(t,e,n,r={}){Jne(t,e,n,r)}function sre(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new NI(n,r,i,e,sa)}function are(){Xs(new Yi(_6,sre,"PUBLIC").setMultipleInstances(!0)),wi(Xk,Zk,""),wi(Xk,Zk,"esm2020")}are();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Xy(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new Xy(r,this,this._ref))},n)}on(e,n,r,i){let o;return n&&(typeof n=="function"?o=s=>n(new Xy(s,this,this._ref)):o={next:n.next?s=>n.next(new Xy(s,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,o,r||void 0,i||void 0)}}class tO{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new js(e,this._service))}get items(){return this._delegate.items.map(e=>new js(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=ire(this._delegate,e);return new js(n,this.storage)}get root(){return new js(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new js(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new eO(Xne(this._delegate,e,n),this)}putString(e,n=_i.RAW,r){this._throwIfRoot("putString");const i=CI(n,e),o={...r};return o.contentType==null&&i.contentType!=null&&(o.contentType=i.contentType),new eO(new p6(this._delegate,new Jo(i.data,!0),o),this)}listAll(){return nre(this._delegate).then(e=>new tO(e,this.storage))}list(e){return tre(this._delegate,e||void 0).then(n=>new tO(n,this.storage))}getMetadata(){return Zne(this._delegate)}updateMetadata(e){return ere(this._delegate,e)}getDownloadURL(){return T6(this._delegate)}delete(){return this._throwIfRoot("delete"),rre(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw r6(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(nO(e))throw Of("ref() expected a child path but got a URL, use refFromURL instead.");return new js(IA(this._delegate,e),this)}refFromURL(e){if(!nO(e))throw Of("refFromURL() expected a full URL but got a child path, use ref() instead.");try{xr.makeFromUrl(e,this._delegate.host)}catch{throw Of("refFromUrl() expected a valid full URL but got an invalid one.")}return new js(IA(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){E6(this._delegate,e,n,r)}}function nO(t){return/^[A-Za-z]+:\/\//.test(t)}const lre="@firebase/storage-compat",ure="0.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cre="storage-compat";function fre(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new w6(n,r)}function dre(t){const e={TaskState:Fr,TaskEvent:One,StringFormat:_i,Storage:w6,Reference:js};t.INTERNAL.registerComponent(new Yi(cre,fre,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(lre,ure)}dre(Il);const hre={apiKey:"AIzaSyCZh_PwX7LZfXujZiHGH9T-8uA17hNQGBY",authDomain:"bkomhate-site.firebaseapp.com",projectId:"bkomhate-site",storageBucket:"bkomhate-site.firebasestorage.app",messagingSenderId:"37549082348",appId:"1:37549082348:web:cf0c6c4f504b40192887c9"},MI=Il.initializeApp(hre),Wp=MJ(MI),Vr=Gee(MI),pre=ore(MI),b6=P.createContext({currentUser:null,loading:!0}),mre=()=>P.useContext(b6),gre=({children:t})=>{const[e,n]=P.useState(null),[r,i]=P.useState(!0);P.useEffect(()=>nY(Wp,l=>{n(l),i(!1)}),[]);const o={currentUser:e,loading:r};return I.jsx(b6.Provider,{value:o,children:t})};function S6(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=S6(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Xt(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=S6(t))&&(r&&(r+=" "),r+=e);return r}var tb={},nb={},rO;function yre(){return rO||(rO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(nb)),nb}var rb={},iO;function A6(){return iO||(iO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(rb)),rb}var ib={},oO;function x6(){return oO||(oO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}t.toKey=e})(ib)),ib}var ob={},sO;function DI(){return sO||(sO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){const r=[],i=n.length;if(i===0)return r;let o=0,s="",l="",c=!1;for(n.charCodeAt(0)===46&&(r.push(""),o++);o<i;){const f=n[o];l?f==="\\"&&o+1<i?(o++,s+=n[o]):f===l?l="":s+=f:c?f==='"'||f==="'"?l=f:f==="]"?(c=!1,r.push(s),s=""):s+=f:f==="["?(c=!0,s&&(r.push(s),s="")):f==="."?s&&(r.push(s),s=""):s+=f,o++}return s&&r.push(s),r}t.toPath=e})(ob)),ob}var aO;function kI(){return aO||(aO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yre(),n=A6(),r=x6(),i=DI();function o(l,c,f){if(l==null)return f;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return f;const h=l[c];return h===void 0?n.isDeepKey(c)?o(l,i.toPath(c),f):f:h}case"number":case"symbol":{typeof c=="number"&&(c=r.toKey(c));const h=l[c];return h===void 0?f:h}default:{if(Array.isArray(c))return s(l,c,f);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return f;const h=l[c];return h===void 0?f:h}}}function s(l,c,f){if(c.length===0)return f;let h=l;for(let g=0;g<c.length;g++){if(h==null||e.isUnsafeProperty(c[g]))return f;h=h[c[g]]}return h===void 0?f:h}t.get=o})(tb)),tb}var sb,lO;function vre(){return lO||(lO=1,sb=kI().get),sb}var _re=vre();const fd=fs(_re);var ab={exports:{}},Ft={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uO;function Tre(){if(uO)return Ft;uO=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),s=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.for("react.view_transition"),E=Symbol.for("react.client.reference");function b(S){if(typeof S=="object"&&S!==null){var A=S.$$typeof;switch(A){case t:switch(S=S.type,S){case n:case i:case r:case c:case f:case v:return S;default:switch(S=S&&S.$$typeof,S){case s:case l:case g:case h:return S;case o:return S;default:return A}}case e:return A}}}return Ft.ContextConsumer=o,Ft.ContextProvider=s,Ft.Element=t,Ft.ForwardRef=l,Ft.Fragment=n,Ft.Lazy=g,Ft.Memo=h,Ft.Portal=e,Ft.Profiler=i,Ft.StrictMode=r,Ft.Suspense=c,Ft.SuspenseList=f,Ft.isContextConsumer=function(S){return b(S)===o},Ft.isContextProvider=function(S){return b(S)===s},Ft.isElement=function(S){return typeof S=="object"&&S!==null&&S.$$typeof===t},Ft.isForwardRef=function(S){return b(S)===l},Ft.isFragment=function(S){return b(S)===n},Ft.isLazy=function(S){return b(S)===g},Ft.isMemo=function(S){return b(S)===h},Ft.isPortal=function(S){return b(S)===e},Ft.isProfiler=function(S){return b(S)===i},Ft.isStrictMode=function(S){return b(S)===r},Ft.isSuspense=function(S){return b(S)===c},Ft.isSuspenseList=function(S){return b(S)===f},Ft.isValidElementType=function(S){return typeof S=="string"||typeof S=="function"||S===n||S===i||S===r||S===c||S===f||typeof S=="object"&&S!==null&&(S.$$typeof===g||S.$$typeof===h||S.$$typeof===s||S.$$typeof===o||S.$$typeof===l||S.$$typeof===E||S.getModuleId!==void 0)},Ft.typeOf=b,Ft}var cO;function Ere(){return cO||(cO=1,ab.exports=Tre()),ab.exports}var wre=Ere(),Ti=t=>t===0?0:t>0?1:-1,Qi=t=>typeof t=="number"&&t!=+t,Ou=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,We=t=>(typeof t=="number"||t instanceof Number)&&!Qi(t),us=t=>We(t)||typeof t=="string",bre=0,bm=t=>{var e=++bre;return"".concat(t||"").concat(e)},vo=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!We(e)&&typeof e!="string")return r;var o;if(Ou(e)){if(n==null)return r;var s=e.indexOf("%");o=n*parseFloat(e.slice(0,s))/100}else o=+e;return Qi(o)&&(o=r),i&&n!=null&&o>n&&(o=n),o},C6=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[t[r]])n[t[r]]=!0;else return!0;return!1};function Br(t,e,n){return We(t)&&We(e)?t+n*(e-t):e}function Sre(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):fd(r,e))===n)}var rr=t=>t===null||typeof t>"u",rg=t=>rr(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1)),Are=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function OI(t){if(typeof t!="string")return!1;var e=Are;return e.includes(t)}var xre=["viewBox","children"],fO=["points","pathLength"],lb={svg:xre,polygon:fO,polyline:fO},Cre=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(P.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{OI(i)&&(r[i]=(o=>n[i](n,o)))}),r},Ire=(t,e,n)=>r=>(t(e,n,r),null),LI=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var o=t[i];OI(i)&&typeof o=="function"&&(r||(r={}),r[i]=Ire(o,e,n))}),r},Rre=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function I6(t){if(typeof t!="string")return!1;var e=Rre;return e.includes(t)}function K0(t){var e=Object.entries(t).filter(n=>{var[r]=n;return I6(r)});return Object.fromEntries(e)}var dO=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",hO=null,ub=null,R6=t=>{if(t===hO&&Array.isArray(ub))return ub;var e=[];return P.Children.forEach(t,n=>{rr(n)||(wre.isFragment(n)?e=e.concat(R6(n.props.children)):e.push(n))}),ub=e,hO=t,e};function Pre(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>dO(i)):r=[dO(e)],R6(t).forEach(i=>{var o=fd(i,"type.displayName")||fd(i,"type.name");r.indexOf(o)!==-1&&n.push(i)}),n}var Nre=(t,e,n,r)=>{var i;if(typeof e=="symbol"||typeof e=="number")return!0;var o=(i=r&&(lb==null?void 0:lb[r]))!==null&&i!==void 0?i:[],s=e.startsWith("data-"),l=typeof t!="function"&&(!!r&&o.includes(e)||I6(e)),c=!!n&&OI(e);return s||l||c},er=(t,e,n)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(P.isValidElement(t)&&(r=t.props),typeof r!="object"&&typeof r!="function")return null;var i={};return Object.keys(r).forEach(o=>{var s;Nre((s=r)===null||s===void 0?void 0:s[o],o,e,n)&&(i[o]=r[o])}),i},Mre=["children","width","height","viewBox","className","style","title","desc"];function RA(){return RA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},RA.apply(null,arguments)}function Dre(t,e){if(t==null)return{};var n,r,i=kre(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function kre(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var P6=P.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:o,className:s,style:l,title:c,desc:f}=t,h=Dre(t,Mre),g=o||{width:r,height:i,x:0,y:0},v=Xt("recharts-surface",s);return P.createElement("svg",RA({},er(h,!0,"svg"),{className:v,width:r,height:i,style:l,viewBox:"".concat(g.x," ").concat(g.y," ").concat(g.width," ").concat(g.height),ref:e}),P.createElement("title",null,c),P.createElement("desc",null,f),n)}),Ore=["children","className"];function PA(){return PA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},PA.apply(null,arguments)}function Lre(t,e){if(t==null)return{};var n,r,i=Vre(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Vre(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Al=P.forwardRef((t,e)=>{var{children:n,className:r}=t,i=Lre(t,Ore),o=Xt("recharts-layer",r);return P.createElement("g",PA({className:o},er(i,!0),{ref:e}),n)}),Ure=P.createContext(null);function zt(t){return function(){return t}}const N6=Math.cos,p_=Math.sin,Eo=Math.sqrt,m_=Math.PI,W0=2*m_,NA=Math.PI,MA=2*NA,bu=1e-6,Fre=MA-bu;function M6(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Bre(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return M6;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class qre{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?M6:Bre(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,l=this._y1,c=r-e,f=i-n,h=s-e,g=l-n,v=h*h+g*g;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(v>bu)if(!(Math.abs(g*c-f*h)>bu)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let E=r-s,b=i-l,S=c*c+f*f,A=E*E+b*b,C=Math.sqrt(S),D=Math.sqrt(v),k=o*Math.tan((NA-Math.acos((S+v-A)/(2*C*D)))/2),q=k/D,$=k/C;Math.abs(q-1)>bu&&this._append`L${e+q*h},${n+q*g}`,this._append`A${o},${o},0,0,${+(g*E>h*b)},${this._x1=e+$*c},${this._y1=n+$*f}`}}arc(e,n,r,i,o,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),c=r*Math.sin(i),f=e+l,h=n+c,g=1^s,v=s?i-o:o-i;this._x1===null?this._append`M${f},${h}`:(Math.abs(this._x1-f)>bu||Math.abs(this._y1-h)>bu)&&this._append`L${f},${h}`,r&&(v<0&&(v=v%MA+MA),v>Fre?this._append`A${r},${r},0,1,${g},${e-l},${n-c}A${r},${r},0,1,${g},${this._x1=f},${this._y1=h}`:v>bu&&this._append`A${r},${r},0,${+(v>=NA)},${g},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function VI(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new qre(e)}function UI(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function D6(t){this._context=t}D6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Y0(t){return new D6(t)}function k6(t){return t[0]}function O6(t){return t[1]}function L6(t,e){var n=zt(!0),r=null,i=Y0,o=null,s=VI(l);t=typeof t=="function"?t:t===void 0?k6:zt(t),e=typeof e=="function"?e:e===void 0?O6:zt(e);function l(c){var f,h=(c=UI(c)).length,g,v=!1,E;for(r==null&&(o=i(E=s())),f=0;f<=h;++f)!(f<h&&n(g=c[f],f,c))===v&&((v=!v)?o.lineStart():o.lineEnd()),v&&o.point(+t(g,f,c),+e(g,f,c));if(E)return o=null,E+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:zt(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:zt(+c),l):e},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:zt(!!c),l):n},l.curve=function(c){return arguments.length?(i=c,r!=null&&(o=i(r)),l):i},l.context=function(c){return arguments.length?(c==null?r=o=null:o=i(r=c),l):r},l}function Zy(t,e,n){var r=null,i=zt(!0),o=null,s=Y0,l=null,c=VI(f);t=typeof t=="function"?t:t===void 0?k6:zt(+t),e=typeof e=="function"?e:zt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?O6:zt(+n);function f(g){var v,E,b,S=(g=UI(g)).length,A,C=!1,D,k=new Array(S),q=new Array(S);for(o==null&&(l=s(D=c())),v=0;v<=S;++v){if(!(v<S&&i(A=g[v],v,g))===C)if(C=!C)E=v,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),b=v-1;b>=E;--b)l.point(k[b],q[b]);l.lineEnd(),l.areaEnd()}C&&(k[v]=+t(A,v,g),q[v]=+e(A,v,g),l.point(r?+r(A,v,g):k[v],n?+n(A,v,g):q[v]))}if(D)return l=null,D+""||null}function h(){return L6().defined(i).curve(s).context(o)}return f.x=function(g){return arguments.length?(t=typeof g=="function"?g:zt(+g),r=null,f):t},f.x0=function(g){return arguments.length?(t=typeof g=="function"?g:zt(+g),f):t},f.x1=function(g){return arguments.length?(r=g==null?null:typeof g=="function"?g:zt(+g),f):r},f.y=function(g){return arguments.length?(e=typeof g=="function"?g:zt(+g),n=null,f):e},f.y0=function(g){return arguments.length?(e=typeof g=="function"?g:zt(+g),f):e},f.y1=function(g){return arguments.length?(n=g==null?null:typeof g=="function"?g:zt(+g),f):n},f.lineX0=f.lineY0=function(){return h().x(t).y(e)},f.lineY1=function(){return h().x(t).y(n)},f.lineX1=function(){return h().x(r).y(e)},f.defined=function(g){return arguments.length?(i=typeof g=="function"?g:zt(!!g),f):i},f.curve=function(g){return arguments.length?(s=g,o!=null&&(l=s(o)),f):s},f.context=function(g){return arguments.length?(g==null?o=l=null:l=s(o=g),f):o},f}class V6{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function $re(t){return new V6(t,!0)}function zre(t){return new V6(t,!1)}const FI={draw(t,e){const n=Eo(e/m_);t.moveTo(n,0),t.arc(0,0,n,0,W0)}},Hre={draw(t,e){const n=Eo(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},U6=Eo(1/3),Gre=U6*2,jre={draw(t,e){const n=Eo(e/Gre),r=n*U6;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},Kre={draw(t,e){const n=Eo(e),r=-n/2;t.rect(r,r,n,n)}},Wre=.8908130915292852,F6=p_(m_/10)/p_(7*m_/10),Yre=p_(W0/10)*F6,Jre=-N6(W0/10)*F6,Qre={draw(t,e){const n=Eo(e*Wre),r=Yre*n,i=Jre*n;t.moveTo(0,-n),t.lineTo(r,i);for(let o=1;o<5;++o){const s=W0*o/5,l=N6(s),c=p_(s);t.lineTo(c*n,-l*n),t.lineTo(l*r-c*i,c*r+l*i)}t.closePath()}},cb=Eo(3),Xre={draw(t,e){const n=-Eo(e/(cb*3));t.moveTo(0,n*2),t.lineTo(-cb*n,-n),t.lineTo(cb*n,-n),t.closePath()}},Fi=-.5,Bi=Eo(3)/2,DA=1/Eo(12),Zre=(DA/2+1)*3,eie={draw(t,e){const n=Eo(e/Zre),r=n/2,i=n*DA,o=r,s=n*DA+n,l=-o,c=s;t.moveTo(r,i),t.lineTo(o,s),t.lineTo(l,c),t.lineTo(Fi*r-Bi*i,Bi*r+Fi*i),t.lineTo(Fi*o-Bi*s,Bi*o+Fi*s),t.lineTo(Fi*l-Bi*c,Bi*l+Fi*c),t.lineTo(Fi*r+Bi*i,Fi*i-Bi*r),t.lineTo(Fi*o+Bi*s,Fi*s-Bi*o),t.lineTo(Fi*l+Bi*c,Fi*c-Bi*l),t.closePath()}};function tie(t,e){let n=null,r=VI(i);t=typeof t=="function"?t:zt(t||FI),e=typeof e=="function"?e:zt(e===void 0?64:+e);function i(){let o;if(n||(n=o=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(t=typeof o=="function"?o:zt(o),i):t},i.size=function(o){return arguments.length?(e=typeof o=="function"?o:zt(+o),i):e},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function g_(){}function y_(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function B6(t){this._context=t}B6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:y_(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:y_(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function nie(t){return new B6(t)}function q6(t){this._context=t}q6.prototype={areaStart:g_,areaEnd:g_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:y_(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function rie(t){return new q6(t)}function $6(t){this._context=t}$6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:y_(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function iie(t){return new $6(t)}function z6(t){this._context=t}z6.prototype={areaStart:g_,areaEnd:g_,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function oie(t){return new z6(t)}function pO(t){return t<0?-1:1}function mO(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),l=(o*i+s*r)/(r+i);return(pO(o)+pO(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(l))||0}function gO(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function fb(t,e,n){var r=t._x0,i=t._y0,o=t._x1,s=t._y1,l=(o-r)/3;t._context.bezierCurveTo(r+l,i+l*e,o-l,s-l*n,o,s)}function v_(t){this._context=t}v_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:fb(this,this._t0,gO(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,fb(this,gO(this,n=mO(this,t,e)),n);break;default:fb(this,this._t0,n=mO(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function H6(t){this._context=new G6(t)}(H6.prototype=Object.create(v_.prototype)).point=function(t,e){v_.prototype.point.call(this,e,t)};function G6(t){this._context=t}G6.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}};function sie(t){return new v_(t)}function aie(t){return new H6(t)}function j6(t){this._context=t}j6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=yO(t),i=yO(e),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function yO(t){var e,n=t.length-1,r,i=new Array(n),o=new Array(n),s=new Array(n);for(i[0]=0,o[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,o[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,o[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/o[e-1],o[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/o[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/o[e];for(o[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function lie(t){return new j6(t)}function J0(t,e){this._context=t,this._t=e}J0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function uie(t){return new J0(t,.5)}function cie(t){return new J0(t,0)}function fie(t){return new J0(t,1)}function dd(t,e){if((s=t.length)>1)for(var n=1,r,i,o=t[e[0]],s,l=o.length;n<s;++n)for(i=o,o=t[e[n]],r=0;r<l;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function kA(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function die(t,e){return t[e]}function hie(t){const e=[];return e.key=t,e}function pie(){var t=zt([]),e=kA,n=dd,r=die;function i(o){var s=Array.from(t.apply(this,arguments),hie),l,c=s.length,f=-1,h;for(const g of o)for(l=0,++f;l<c;++l)(s[l][f]=[0,+r(g,s[l].key,f,o)]).data=g;for(l=0,h=UI(e(s));l<c;++l)s[h[l]].index=l;return n(s,h),s}return i.keys=function(o){return arguments.length?(t=typeof o=="function"?o:zt(Array.from(o)),i):t},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:zt(+o),i):r},i.order=function(o){return arguments.length?(e=o==null?kA:typeof o=="function"?o:zt(Array.from(o)),i):e},i.offset=function(o){return arguments.length?(n=o??dd,i):n},i}function mie(t,e){if((r=t.length)>0){for(var n,r,i=0,o=t[0].length,s;i<o;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}dd(t,e)}}function gie(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,o=r.length;n<o;++n){for(var s=0,l=0;s<i;++s)l+=t[s][n][1]||0;r[n][1]+=r[n][0]=-l/2}dd(t,e)}}function yie(t,e){if(!(!((s=t.length)>0)||!((o=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,o,s;r<o;++r){for(var l=0,c=0,f=0;l<s;++l){for(var h=t[e[l]],g=h[r][1]||0,v=h[r-1][1]||0,E=(g-v)/2,b=0;b<l;++b){var S=t[e[b]],A=S[r][1]||0,C=S[r-1][1]||0;E+=A-C}c+=g,f+=E*g}i[r-1][1]+=i[r-1][0]=n,c&&(n-=f/c)}i[r-1][1]+=i[r-1][0]=n,dd(t,e)}}var vie=["type","size","sizeType"];function OA(){return OA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},OA.apply(null,arguments)}function vO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _O(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vO(Object(n),!0).forEach(function(r){_ie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _ie(t,e,n){return(e=Tie(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tie(t){var e=Eie(t,"string");return typeof e=="symbol"?e:e+""}function Eie(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wie(t,e){if(t==null)return{};var n,r,i=bie(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function bie(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var K6={symbolCircle:FI,symbolCross:Hre,symbolDiamond:jre,symbolSquare:Kre,symbolStar:Qre,symbolTriangle:Xre,symbolWye:eie},Sie=Math.PI/180,Aie=t=>{var e="symbol".concat(rg(t));return K6[e]||FI},xie=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*Sie;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Cie=(t,e)=>{K6["symbol".concat(rg(t))]=e},W6=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=wie(t,vie),o=_O(_O({},i),{},{type:e,size:n,sizeType:r}),s="circle";typeof e=="string"&&(s=e);var l=()=>{var v=Aie(s),E=tie().type(v).size(xie(n,r,s));return E()},{className:c,cx:f,cy:h}=o,g=er(o,!0);return f===+f&&h===+h&&n===+n?P.createElement("path",OA({},g,{className:Xt("recharts-symbols",c),transform:"translate(".concat(f,", ").concat(h,")"),d:l()})):null};W6.registerSymbol=Cie;var db={},hb={},TO;function Iie(){return TO||(TO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let o=0;o<n.length;o++){const s=n[o],l=r(s);i.has(l)||i.set(l,s)}return Array.from(i.values())}t.uniqBy=e})(hb)),hb}var pb={},EO;function Y6(){return EO||(EO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(pb)),pb}var mb={},gb={},yb={},wO;function Rie(){return wO||(wO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(yb)),yb}var bO;function BI(){return bO||(bO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Rie();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(gb)),gb}var vb={},SO;function Pie(){return SO||(SO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(vb)),vb}var AO;function Nie(){return AO||(AO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=BI(),n=Pie();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(mb)),mb}var _b={},Tb={},xO;function Mie(){return xO||(xO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kI();function n(r){return function(i){return e.get(i,r)}}t.property=n})(Tb)),Tb}var Eb={},wb={},bb={},Sb={},CO;function J6(){return CO||(CO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(Sb)),Sb}var Ab={},IO;function Q6(){return IO||(IO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(Ab)),Ab}var xb={},RO;function X6(){return RO||(RO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.eq=e})(xb)),xb}var PO;function Die(){return PO||(PO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qI(),n=J6(),r=Q6(),i=X6();function o(g,v,E){return typeof E!="function"?e.isMatch(g,v):s(g,v,function b(S,A,C,D,k,q){const $=E(S,A,C,D,k,q);return $!==void 0?!!$:s(S,A,b,q)},new Map)}function s(g,v,E,b){if(v===g)return!0;switch(typeof v){case"object":return l(g,v,E,b);case"function":return Object.keys(v).length>0?s(g,{...v},E,b):i.eq(g,v);default:return n.isObject(g)?typeof v=="string"?v==="":!0:i.eq(g,v)}}function l(g,v,E,b){if(v==null)return!0;if(Array.isArray(v))return f(g,v,E,b);if(v instanceof Map)return c(g,v,E,b);if(v instanceof Set)return h(g,v,E,b);const S=Object.keys(v);if(g==null)return S.length===0;if(S.length===0)return!0;if(b&&b.has(v))return b.get(v)===g;b&&b.set(v,g);try{for(let A=0;A<S.length;A++){const C=S[A];if(!r.isPrimitive(g)&&!(C in g)||v[C]===void 0&&g[C]!==void 0||v[C]===null&&g[C]!==null||!E(g[C],v[C],C,g,v,b))return!1}return!0}finally{b&&b.delete(v)}}function c(g,v,E,b){if(v.size===0)return!0;if(!(g instanceof Map))return!1;for(const[S,A]of v.entries()){const C=g.get(S);if(E(C,A,S,g,v,b)===!1)return!1}return!0}function f(g,v,E,b){if(v.length===0)return!0;if(!Array.isArray(g))return!1;const S=new Set;for(let A=0;A<v.length;A++){const C=v[A];let D=!1;for(let k=0;k<g.length;k++){if(S.has(k))continue;const q=g[k];let $=!1;if(E(q,C,A,g,v,b)&&($=!0),$){S.add(k),D=!0;break}}if(!D)return!1}return!0}function h(g,v,E,b){return v.size===0?!0:g instanceof Set?f([...g],[...v],E,b):!1}t.isMatchWith=o,t.isSetMatch=h})(bb)),bb}var NO;function qI(){return NO||(NO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Die();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(wb)),wb}var Cb={},Ib={},Rb={},MO;function kie(){return MO||(MO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(Rb)),Rb}var Pb={},DO;function Z6(){return DO||(DO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(Pb)),Pb}var Nb={},kO;function e5(){return kO||(kO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",o="[object Arguments]",s="[object Symbol]",l="[object Date]",c="[object Map]",f="[object Set]",h="[object Array]",g="[object Function]",v="[object ArrayBuffer]",E="[object Object]",b="[object Error]",S="[object DataView]",A="[object Uint8Array]",C="[object Uint8ClampedArray]",D="[object Uint16Array]",k="[object Uint32Array]",q="[object BigUint64Array]",$="[object Int8Array]",H="[object Int16Array]",M="[object Int32Array]",O="[object BigInt64Array]",L="[object Float32Array]",F="[object Float64Array]";t.argumentsTag=o,t.arrayBufferTag=v,t.arrayTag=h,t.bigInt64ArrayTag=O,t.bigUint64ArrayTag=q,t.booleanTag=i,t.dataViewTag=S,t.dateTag=l,t.errorTag=b,t.float32ArrayTag=L,t.float64ArrayTag=F,t.functionTag=g,t.int16ArrayTag=H,t.int32ArrayTag=M,t.int8ArrayTag=$,t.mapTag=c,t.numberTag=r,t.objectTag=E,t.regexpTag=e,t.setTag=f,t.stringTag=n,t.symbolTag=s,t.uint16ArrayTag=D,t.uint32ArrayTag=k,t.uint8ArrayTag=A,t.uint8ClampedArrayTag=C})(Nb)),Nb}var Mb={},OO;function Oie(){return OO||(OO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(Mb)),Mb}var LO;function t5(){return LO||(LO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kie(),n=Z6(),r=e5(),i=Q6(),o=Oie();function s(h,g){return l(h,void 0,h,new Map,g)}function l(h,g,v,E=new Map,b=void 0){const S=b==null?void 0:b(h,g,v,E);if(S!==void 0)return S;if(i.isPrimitive(h))return h;if(E.has(h))return E.get(h);if(Array.isArray(h)){const A=new Array(h.length);E.set(h,A);for(let C=0;C<h.length;C++)A[C]=l(h[C],C,v,E,b);return Object.hasOwn(h,"index")&&(A.index=h.index),Object.hasOwn(h,"input")&&(A.input=h.input),A}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const A=new RegExp(h.source,h.flags);return A.lastIndex=h.lastIndex,A}if(h instanceof Map){const A=new Map;E.set(h,A);for(const[C,D]of h)A.set(C,l(D,C,v,E,b));return A}if(h instanceof Set){const A=new Set;E.set(h,A);for(const C of h)A.add(l(C,void 0,v,E,b));return A}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(o.isTypedArray(h)){const A=new(Object.getPrototypeOf(h)).constructor(h.length);E.set(h,A);for(let C=0;C<h.length;C++)A[C]=l(h[C],C,v,E,b);return A}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const A=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return E.set(h,A),c(A,h,v,E,b),A}if(typeof File<"u"&&h instanceof File){const A=new File([h],h.name,{type:h.type});return E.set(h,A),c(A,h,v,E,b),A}if(h instanceof Blob){const A=new Blob([h],{type:h.type});return E.set(h,A),c(A,h,v,E,b),A}if(h instanceof Error){const A=new h.constructor;return E.set(h,A),A.message=h.message,A.name=h.name,A.stack=h.stack,A.cause=h.cause,c(A,h,v,E,b),A}if(typeof h=="object"&&f(h)){const A=Object.create(Object.getPrototypeOf(h));return E.set(h,A),c(A,h,v,E,b),A}return h}function c(h,g,v=h,E,b){const S=[...Object.keys(g),...e.getSymbols(g)];for(let A=0;A<S.length;A++){const C=S[A],D=Object.getOwnPropertyDescriptor(h,C);(D==null||D.writable)&&(h[C]=l(g[C],C,v,E,b))}}function f(h){switch(n.getTag(h)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=s,t.cloneDeepWithImpl=l,t.copyProperties=c})(Ib)),Ib}var VO;function Lie(){return VO||(VO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=t5();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(Cb)),Cb}var UO;function Vie(){return UO||(UO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qI(),n=Lie();function r(i){return i=n.cloneDeep(i),o=>e.isMatch(o,i)}t.matches=r})(Eb)),Eb}var Db={},kb={},Ob={},FO;function Uie(){return FO||(FO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=t5(),n=e5();function r(i,o){return e.cloneDeepWith(i,(s,l,c,f)=>{const h=o==null?void 0:o(s,l,c,f);if(h!==void 0)return h;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const g=new i.constructor(i==null?void 0:i.valueOf());return e.copyProperties(g,i),g}case n.argumentsTag:{const g={};return e.copyProperties(g,i),g.length=i.length,g[Symbol.iterator]=i[Symbol.iterator],g}default:return}})}t.cloneDeepWith=r})(Ob)),Ob}var BO;function Fie(){return BO||(BO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Uie();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(kb)),kb}var Lb={},Vb={},qO;function n5(){return qO||(qO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(Vb)),Vb}var Ub={},$O;function Bie(){return $O||($O=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Z6();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(Ub)),Ub}var zO;function qie(){return zO||(zO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=A6(),n=n5(),r=Bie(),i=DI();function o(s,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&e.isDeepKey(l)&&(s==null?void 0:s[l])==null?c=i.toPath(l):c=[l],c.length===0)return!1;let f=s;for(let h=0;h<c.length;h++){const g=c[h];if((f==null||!Object.hasOwn(f,g))&&!((Array.isArray(f)||r.isArguments(f))&&n.isIndex(g)&&g<f.length))return!1;f=f[g]}return!0}t.has=o})(Lb)),Lb}var HO;function $ie(){return HO||(HO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qI(),n=x6(),r=Fie(),i=kI(),o=qie();function s(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=n.toKey(l);break}}return c=r.cloneDeep(c),function(f){const h=i.get(f,l);return h===void 0?o.has(f,l):c===void 0?h===void 0:e.isMatch(h,c)}}t.matchesProperty=s})(Db)),Db}var GO;function zie(){return GO||(GO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Y6(),n=Mie(),r=Vie(),i=$ie();function o(s){if(s==null)return e.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?i.matchesProperty(s[0],s[1]):r.matches(s);case"string":case"symbol":case"number":return n.property(s)}}t.iteratee=o})(_b)),_b}var jO;function Hie(){return jO||(jO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Iie(),n=Y6(),r=Nie(),i=zie();function o(s,l=n.identity){return r.isArrayLikeObject(s)?e.uniqBy(Array.from(s),i.iteratee(l)):[]}t.uniqBy=o})(db)),db}var Fb,KO;function Gie(){return KO||(KO=1,Fb=Hie().uniqBy),Fb}var jie=Gie();const WO=fs(jie);function Kie(t,e,n){return e===!0?WO(t,n):typeof e=="function"?WO(t,e):t}var Bb={exports:{}},qb={},$b={exports:{}},zb={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YO;function Wie(){if(YO)return zb;YO=1;var t=Ed();function e(g,v){return g===v&&(g!==0||1/g===1/v)||g!==g&&v!==v}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,o=t.useLayoutEffect,s=t.useDebugValue;function l(g,v){var E=v(),b=r({inst:{value:E,getSnapshot:v}}),S=b[0].inst,A=b[1];return o(function(){S.value=E,S.getSnapshot=v,c(S)&&A({inst:S})},[g,E,v]),i(function(){return c(S)&&A({inst:S}),g(function(){c(S)&&A({inst:S})})},[g]),s(E),E}function c(g){var v=g.getSnapshot;g=g.value;try{var E=v();return!n(g,E)}catch{return!0}}function f(g,v){return v()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:l;return zb.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:h,zb}var JO;function Yie(){return JO||(JO=1,$b.exports=Wie()),$b.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QO;function Jie(){if(QO)return qb;QO=1;var t=Ed(),e=Yie();function n(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,o=t.useRef,s=t.useEffect,l=t.useMemo,c=t.useDebugValue;return qb.useSyncExternalStoreWithSelector=function(f,h,g,v,E){var b=o(null);if(b.current===null){var S={hasValue:!1,value:null};b.current=S}else S=b.current;b=l(function(){function C(H){if(!D){if(D=!0,k=H,H=v(H),E!==void 0&&S.hasValue){var M=S.value;if(E(M,H))return q=M}return q=H}if(M=q,r(k,H))return M;var O=v(H);return E!==void 0&&E(M,O)?(k=H,M):(k=H,q=O)}var D=!1,k,q,$=g===void 0?null:g;return[function(){return C(h())},$===null?void 0:function(){return C($())}]},[h,g,v,E]);var A=i(f,b[0],b[1]);return s(function(){S.hasValue=!0,S.value=A},[A]),c(A),A},qb}var XO;function Qie(){return XO||(XO=1,Bb.exports=Jie()),Bb.exports}var Xie=Qie(),$I=P.createContext(null),Zie=t=>t,ir=()=>{var t=P.useContext($I);return t?t.store.dispatch:Zie},kv=()=>{},eoe=()=>kv,toe=(t,e)=>t===e;function ze(t){var e=P.useContext($I);return Xie.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:eoe,e?e.store.getState:kv,e?e.store.getState:kv,e?t:kv,toe)}function noe(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function roe(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function ioe(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var ZO=t=>Array.isArray(t)?t:[t];function ooe(t){const e=Array.isArray(t[0])?t[0]:t;return ioe(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function soe(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var aoe=class{constructor(t){this.value=t}deref(){return this.value}},loe=typeof WeakRef<"u"?WeakRef:aoe,uoe=0,e2=1;function ev(){return{s:uoe,v:void 0,o:null,p:null}}function r5(t,e={}){let n=ev();const{resultEqualityCheck:r}=e;let i,o=0;function s(){var g;let l=n;const{length:c}=arguments;for(let v=0,E=c;v<E;v++){const b=arguments[v];if(typeof b=="function"||typeof b=="object"&&b!==null){let S=l.o;S===null&&(l.o=S=new WeakMap);const A=S.get(b);A===void 0?(l=ev(),S.set(b,l)):l=A}else{let S=l.p;S===null&&(l.p=S=new Map);const A=S.get(b);A===void 0?(l=ev(),S.set(b,l)):l=A}}const f=l;let h;if(l.s===e2)h=l.v;else if(h=t.apply(null,arguments),o++,r){const v=((g=i==null?void 0:i.deref)==null?void 0:g.call(i))??i;v!=null&&r(v,h)&&(h=v,o!==0&&o--),i=typeof h=="object"&&h!==null||typeof h=="function"?new loe(h):h}return f.s=e2,f.v=h,h}return s.clearCache=()=>{n=ev(),s.resetResultsCount()},s.resultsCount=()=>o,s.resetResultsCount=()=>{o=0},s}function coe(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let o=0,s=0,l,c={},f=i.pop();typeof f=="object"&&(c=f,f=i.pop()),noe(f,`createSelector expects an output function after the inputs, but received: [${typeof f}]`);const h={...n,...c},{memoize:g,memoizeOptions:v=[],argsMemoize:E=r5,argsMemoizeOptions:b=[]}=h,S=ZO(v),A=ZO(b),C=ooe(i),D=g(function(){return o++,f.apply(null,arguments)},...S),k=E(function(){s++;const $=soe(C,arguments);return l=D.apply(null,$),l},...A);return Object.assign(k,{resultFunc:f,memoizedResultFunc:D,dependencies:C,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>l,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:g,argsMemoize:E})};return Object.assign(r,{withTypes:()=>r}),r}var se=coe(r5),foe=Object.assign((t,e=se)=>{roe(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(o=>t[o]);return e(r,(...o)=>o.reduce((s,l,c)=>(s[n[c]]=l,s),{}))},{withTypes:()=>foe}),Hb={},Gb={},jb={},t2;function doe(){return t2||(t2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,o)=>{if(r!==i){const s=e(r),l=e(i);if(s===l&&s===0){if(r<i)return o==="desc"?1:-1;if(r>i)return o==="desc"?-1:1}return o==="desc"?l-s:s-l}return 0};t.compareValues=n})(jb)),jb}var Kb={},Wb={},n2;function i5(){return n2||(n2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(Wb)),Wb}var r2;function hoe(){return r2||(r2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=i5(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(o,s){return Array.isArray(o)?!1:typeof o=="number"||typeof o=="boolean"||o==null||e.isSymbol(o)?!0:typeof o=="string"&&(r.test(o)||!n.test(o))||s!=null&&Object.hasOwn(s,o)}t.isKey=i})(Kb)),Kb}var i2;function poe(){return i2||(i2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=doe(),n=hoe(),r=DI();function i(o,s,l,c){if(o==null)return[];l=c?void 0:l,Array.isArray(o)||(o=Object.values(o)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(E=>String(E));const f=(E,b)=>{let S=E;for(let A=0;A<b.length&&S!=null;++A)S=S[b[A]];return S},h=(E,b)=>b==null||E==null?b:typeof E=="object"&&"key"in E?Object.hasOwn(b,E.key)?b[E.key]:f(b,E.path):typeof E=="function"?E(b):Array.isArray(E)?f(b,E):typeof b=="object"?b[E]:b,g=s.map(E=>(Array.isArray(E)&&E.length===1&&(E=E[0]),E==null||typeof E=="function"||Array.isArray(E)||n.isKey(E)?E:{key:E,path:r.toPath(E)}));return o.map(E=>({original:E,criteria:g.map(b=>h(b,E))})).slice().sort((E,b)=>{for(let S=0;S<g.length;S++){const A=e.compareValues(E.criteria[S],b.criteria[S],l[S]);if(A!==0)return A}return 0}).map(E=>E.original)}t.orderBy=i})(Gb)),Gb}var Yb={},o2;function moe(){return o2||(o2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],o=Math.floor(r),s=(l,c)=>{for(let f=0;f<l.length;f++){const h=l[f];Array.isArray(h)&&c<o?s(h,c+1):i.push(h)}};return s(n,0),i}t.flatten=e})(Yb)),Yb}var Jb={},s2;function o5(){return s2||(s2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=n5(),n=BI(),r=J6(),i=X6();function o(s,l,c){return r.isObject(c)&&(typeof l=="number"&&n.isArrayLike(c)&&e.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?i.eq(c[l],s):!1}t.isIterateeCall=o})(Jb)),Jb}var a2;function goe(){return a2||(a2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=poe(),n=moe(),r=o5();function i(o,...s){const l=s.length;return l>1&&r.isIterateeCall(o,s[0],s[1])?s=[]:l>2&&r.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),e.orderBy(o,n.flatten(s),["asc"])}t.sortBy=i})(Hb)),Hb}var Qb,l2;function yoe(){return l2||(l2=1,Qb=goe().sortBy),Qb}var voe=yoe();const Q0=fs(voe);var s5=t=>t.legend.settings,_oe=t=>t.legend.size,Toe=t=>t.legend.payload;se([Toe,s5],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?Q0(r,n):r});var tv=1;function Eoe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=P.useState({height:0,left:0,top:0,width:0}),r=P.useCallback(i=>{if(i!=null){var o=i.getBoundingClientRect(),s={height:o.height,left:o.left,top:o.top,width:o.width};(Math.abs(s.height-e.height)>tv||Math.abs(s.left-e.left)>tv||Math.abs(s.top-e.top)>tv||Math.abs(s.width-e.width)>tv)&&n({height:s.height,left:s.left,top:s.top,width:s.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function hr(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var woe=typeof Symbol=="function"&&Symbol.observable||"@@observable",u2=woe,Xb=()=>Math.random().toString(36).substring(7).split("").join("."),boe={INIT:`@@redux/INIT${Xb()}`,REPLACE:`@@redux/REPLACE${Xb()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Xb()}`},__=boe;function zI(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function a5(t,e,n){if(typeof t!="function")throw new Error(hr(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(hr(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(hr(1));return n(a5)(t,e)}let r=t,i=e,o=new Map,s=o,l=0,c=!1;function f(){s===o&&(s=new Map,o.forEach((A,C)=>{s.set(C,A)}))}function h(){if(c)throw new Error(hr(3));return i}function g(A){if(typeof A!="function")throw new Error(hr(4));if(c)throw new Error(hr(5));let C=!0;f();const D=l++;return s.set(D,A),function(){if(C){if(c)throw new Error(hr(6));C=!1,f(),s.delete(D),o=null}}}function v(A){if(!zI(A))throw new Error(hr(7));if(typeof A.type>"u")throw new Error(hr(8));if(typeof A.type!="string")throw new Error(hr(17));if(c)throw new Error(hr(9));try{c=!0,i=r(i,A)}finally{c=!1}return(o=s).forEach(D=>{D()}),A}function E(A){if(typeof A!="function")throw new Error(hr(10));r=A,v({type:__.REPLACE})}function b(){const A=g;return{subscribe(C){if(typeof C!="object"||C===null)throw new Error(hr(11));function D(){const q=C;q.next&&q.next(h())}return D(),{unsubscribe:A(D)}},[u2](){return this}}}return v({type:__.INIT}),{dispatch:v,subscribe:g,getState:h,replaceReducer:E,[u2]:b}}function Soe(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:__.INIT})>"u")throw new Error(hr(12));if(typeof n(void 0,{type:__.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(hr(13))})}function l5(t){const e=Object.keys(t),n={};for(let o=0;o<e.length;o++){const s=e[o];typeof t[s]=="function"&&(n[s]=t[s])}const r=Object.keys(n);let i;try{Soe(n)}catch(o){i=o}return function(s={},l){if(i)throw i;let c=!1;const f={};for(let h=0;h<r.length;h++){const g=r[h],v=n[g],E=s[g],b=v(E,l);if(typeof b>"u")throw l&&l.type,new Error(hr(14));f[g]=b,c=c||b!==E}return c=c||r.length!==Object.keys(s).length,c?f:s}}function T_(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function Aoe(...t){return e=>(n,r)=>{const i=e(n,r);let o=()=>{throw new Error(hr(15))};const s={getState:i.getState,dispatch:(c,...f)=>o(c,...f)},l=t.map(c=>c(s));return o=T_(...l)(i.dispatch),{...i,dispatch:o}}}function u5(t){return zI(t)&&"type"in t&&typeof t.type=="string"}var c5=Symbol.for("immer-nothing"),c2=Symbol.for("immer-draftable"),Ai=Symbol.for("immer-state");function co(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var hd=Object.getPrototypeOf;function ic(t){return!!t&&!!t[Ai]}function na(t){var e;return t?f5(t)||Array.isArray(t)||!!t[c2]||!!((e=t.constructor)!=null&&e[c2])||ig(t)||Z0(t):!1}var xoe=Object.prototype.constructor.toString();function f5(t){if(!t||typeof t!="object")return!1;const e=hd(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===xoe}function E_(t,e){X0(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function X0(t){const e=t[Ai];return e?e.type_:Array.isArray(t)?1:ig(t)?2:Z0(t)?3:0}function LA(t,e){return X0(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function d5(t,e,n){const r=X0(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function Coe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function ig(t){return t instanceof Map}function Z0(t){return t instanceof Set}function Su(t){return t.copy_||t.base_}function VA(t,e){if(ig(t))return new Map(t);if(Z0(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=f5(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[Ai];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const s=i[o],l=r[s];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(r[s]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[s]})}return Object.create(hd(t),r)}else{const r=hd(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function HI(t,e=!1){return eT(t)||ic(t)||!na(t)||(X0(t)>1&&Object.defineProperties(t,{set:{value:nv},add:{value:nv},clear:{value:nv},delete:{value:nv}}),Object.freeze(t),e&&Object.values(t).forEach(n=>HI(n,!0))),t}function nv(){co(2)}function eT(t){return Object.isFrozen(t)}var Ioe={};function oc(t){const e=Ioe[t];return e||co(0,t),e}var Sm;function h5(){return Sm}function Roe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function f2(t,e){e&&(oc("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function UA(t){FA(t),t.drafts_.forEach(Poe),t.drafts_=null}function FA(t){t===Sm&&(Sm=t.parent_)}function d2(t){return Sm=Roe(Sm,t)}function Poe(t){const e=t[Ai];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function h2(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Ai].modified_&&(UA(e),co(4)),na(t)&&(t=w_(e,t),e.parent_||b_(e,t)),e.patches_&&oc("Patches").generateReplacementPatches_(n[Ai].base_,t,e.patches_,e.inversePatches_)):t=w_(e,n,[]),UA(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==c5?t:void 0}function w_(t,e,n){if(eT(e))return e;const r=e[Ai];if(!r)return E_(e,(i,o)=>p2(t,r,e,i,o,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return b_(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,s=!1;r.type_===3&&(o=new Set(i),i.clear(),s=!0),E_(o,(l,c)=>p2(t,r,i,l,c,n,s)),b_(t,i,!1),n&&t.patches_&&oc("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function p2(t,e,n,r,i,o,s){if(ic(i)){const l=o&&e&&e.type_!==3&&!LA(e.assigned_,r)?o.concat(r):void 0,c=w_(t,i,l);if(d5(n,r,c),ic(c))t.canAutoFreeze_=!1;else return}else s&&n.add(i);if(na(i)&&!eT(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;w_(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(ig(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&b_(t,i)}}function b_(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&HI(e,n)}function Noe(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:h5(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=GI;n&&(i=[r],o=Am);const{revoke:s,proxy:l}=Proxy.revocable(i,o);return r.draft_=l,r.revoke_=s,l}var GI={get(t,e){if(e===Ai)return t;const n=Su(t);if(!LA(n,e))return Moe(t,n,e);const r=n[e];return t.finalized_||!na(r)?r:r===Zb(t.base_,e)?(eS(t),t.copy_[e]=qA(r,t)):r},has(t,e){return e in Su(t)},ownKeys(t){return Reflect.ownKeys(Su(t))},set(t,e,n){const r=p5(Su(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=Zb(Su(t),e),o=i==null?void 0:i[Ai];if(o&&o.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(Coe(n,i)&&(n!==void 0||LA(t.base_,e)))return!0;eS(t),BA(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return Zb(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,eS(t),BA(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Su(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){co(11)},getPrototypeOf(t){return hd(t.base_)},setPrototypeOf(){co(12)}},Am={};E_(GI,(t,e)=>{Am[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Am.deleteProperty=function(t,e){return Am.set.call(this,t,e,void 0)};Am.set=function(t,e,n){return GI.set.call(this,t[0],e,n,t[0])};function Zb(t,e){const n=t[Ai];return(n?Su(n):t)[e]}function Moe(t,e,n){var i;const r=p5(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function p5(t,e){if(!(e in t))return;let n=hd(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=hd(n)}}function BA(t){t.modified_||(t.modified_=!0,t.parent_&&BA(t.parent_))}function eS(t){t.copy_||(t.copy_=VA(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Doe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const o=n;n=e;const s=this;return function(c=o,...f){return s.produce(c,h=>n.call(this,h,...f))}}typeof n!="function"&&co(6),r!==void 0&&typeof r!="function"&&co(7);let i;if(na(e)){const o=d2(this),s=qA(e,void 0);let l=!0;try{i=n(s),l=!1}finally{l?UA(o):FA(o)}return f2(o,r),h2(i,o)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===c5&&(i=void 0),this.autoFreeze_&&HI(i,!0),r){const o=[],s=[];oc("Patches").generateReplacementPatches_(e,i,o,s),r(o,s)}return i}else co(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(s,...l)=>this.produceWithPatches(s,c=>e(c,...l));let r,i;return[this.produce(e,n,(s,l)=>{r=s,i=l}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){na(t)||co(8),ic(t)&&(t=Ks(t));const e=d2(this),n=qA(t,void 0);return n[Ai].isManual_=!0,FA(e),n}finishDraft(t,e){const n=t&&t[Ai];(!n||!n.isManual_)&&co(9);const{scope_:r}=n;return f2(r,e),h2(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=oc("Patches").applyPatches_;return ic(t)?r(t,e):this.produce(t,i=>r(i,e))}};function qA(t,e){const n=ig(t)?oc("MapSet").proxyMap_(t,e):Z0(t)?oc("MapSet").proxySet_(t,e):Noe(t,e);return(e?e.scope_:h5()).drafts_.push(n),n}function Ks(t){return ic(t)||co(10,t),m5(t)}function m5(t){if(!na(t)||eT(t))return t;const e=t[Ai];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=VA(t,e.scope_.immer_.useStrictShallowCopy_)}else n=VA(t,!0);return E_(n,(r,i)=>{d5(n,r,m5(i))}),e&&(e.finalized_=!1),n}var koe=new Doe,g5=koe.produce;function y5(t){return({dispatch:n,getState:r})=>i=>o=>typeof o=="function"?o(n,r,t):i(o)}var Ooe=y5(),Loe=y5,Voe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?T_:T_.apply(null,arguments)};function Xi(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(bi(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>u5(r)&&r.type===t,n}var v5=class Pp extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Pp.prototype)}static get[Symbol.species](){return Pp}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Pp(...e[0].concat(this)):new Pp(...e.concat(this))}};function m2(t){return na(t)?g5(t,()=>{}):t}function rv(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function Uoe(t){return typeof t=="boolean"}var Foe=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=e??{};let s=new v5;return n&&(Uoe(n)?s.push(Ooe):s.push(Loe(n.extraArgument))),s},Boe="RTK_autoBatch",g2=t=>e=>{setTimeout(e,t)},qoe=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,o=!1,s=!1;const l=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:g2(10):t.type==="callback"?t.queueNotification:g2(t.timeout),f=()=>{s=!1,o&&(o=!1,l.forEach(h=>h()))};return Object.assign({},r,{subscribe(h){const g=()=>i&&h(),v=r.subscribe(g);return l.add(h),()=>{v(),l.delete(h)}},dispatch(h){var g;try{return i=!((g=h==null?void 0:h.meta)!=null&&g[Boe]),o=!i,o&&(s||(s=!0,c(f))),r.dispatch(h)}finally{i=!0}}})},$oe=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new v5(t);return r&&i.push(qoe(typeof r=="object"?r:void 0)),i};function zoe(t){const e=Foe(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:o=void 0,enhancers:s=void 0}=t||{};let l;if(typeof n=="function")l=n;else if(zI(n))l=l5(n);else throw new Error(bi(1));let c;typeof r=="function"?c=r(e):c=e();let f=T_;i&&(f=Voe({trace:!1,...typeof i=="object"&&i}));const h=Aoe(...c),g=$oe(h);let v=typeof s=="function"?s(g):g();const E=f(...v);return a5(l,o,E)}function _5(t){const e={},n=[];let r;const i={addCase(o,s){const l=typeof o=="string"?o:o.type;if(!l)throw new Error(bi(28));if(l in e)throw new Error(bi(29));return e[l]=s,i},addAsyncThunk(o,s){return s.pending&&(e[o.pending.type]=s.pending),s.rejected&&(e[o.rejected.type]=s.rejected),s.fulfilled&&(e[o.fulfilled.type]=s.fulfilled),s.settled&&n.push({matcher:o.settled,reducer:s.settled}),i},addMatcher(o,s){return n.push({matcher:o,reducer:s}),i},addDefaultCase(o){return r=o,i}};return t(i),[e,n,r]}function Hoe(t){return typeof t=="function"}function Goe(t,e){let[n,r,i]=_5(e),o;if(Hoe(t))o=()=>m2(t());else{const l=m2(t);o=()=>l}function s(l=o(),c){let f=[n[c.type],...r.filter(({matcher:h})=>h(c)).map(({reducer:h})=>h)];return f.filter(h=>!!h).length===0&&(f=[i]),f.reduce((h,g)=>{if(g)if(ic(h)){const E=g(h,c);return E===void 0?h:E}else{if(na(h))return g5(h,v=>g(v,c));{const v=g(h,c);if(v===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return h},l)}return s.getInitialState=o,s}var joe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Koe=(t=21)=>{let e="",n=t;for(;n--;)e+=joe[Math.random()*64|0];return e},Woe=Symbol.for("rtk-slice-createasyncthunk");function Yoe(t,e){return`${t}/${e}`}function Joe({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[Woe];return function(i){const{name:o,reducerPath:s=o}=i;if(!o)throw new Error(bi(11));const l=(typeof i.reducers=="function"?i.reducers(Xoe()):i.reducers)||{},c=Object.keys(l),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(q,$){const H=typeof q=="string"?q:q.type;if(!H)throw new Error(bi(12));if(H in f.sliceCaseReducersByType)throw new Error(bi(13));return f.sliceCaseReducersByType[H]=$,h},addMatcher(q,$){return f.sliceMatchers.push({matcher:q,reducer:$}),h},exposeAction(q,$){return f.actionCreators[q]=$,h},exposeCaseReducer(q,$){return f.sliceCaseReducersByName[q]=$,h}};c.forEach(q=>{const $=l[q],H={reducerName:q,type:Yoe(o,q),createNotation:typeof i.reducers=="function"};ese($)?nse(H,$,h,e):Zoe(H,$,h)});function g(){const[q={},$=[],H=void 0]=typeof i.extraReducers=="function"?_5(i.extraReducers):[i.extraReducers],M={...q,...f.sliceCaseReducersByType};return Goe(i.initialState,O=>{for(let L in M)O.addCase(L,M[L]);for(let L of f.sliceMatchers)O.addMatcher(L.matcher,L.reducer);for(let L of $)O.addMatcher(L.matcher,L.reducer);H&&O.addDefaultCase(H)})}const v=q=>q,E=new Map,b=new WeakMap;let S;function A(q,$){return S||(S=g()),S(q,$)}function C(){return S||(S=g()),S.getInitialState()}function D(q,$=!1){function H(O){let L=O[q];return typeof L>"u"&&$&&(L=rv(b,H,C)),L}function M(O=v){const L=rv(E,$,()=>new WeakMap);return rv(L,O,()=>{const F={};for(const[V,G]of Object.entries(i.selectors??{}))F[V]=Qoe(G,O,()=>rv(b,O,C),$);return F})}return{reducerPath:q,getSelectors:M,get selectors(){return M(H)},selectSlice:H}}const k={name:o,reducer:A,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:C,...D(s),injectInto(q,{reducerPath:$,...H}={}){const M=$??s;return q.inject({reducerPath:M,reducer:A},H),{...k,...D(M,!0)}}};return k}}function Qoe(t,e,n,r){function i(o,...s){let l=e(o);return typeof l>"u"&&r&&(l=n()),t(l,...s)}return i.unwrapped=t,i}var Ci=Joe();function Xoe(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function Zoe({type:t,reducerName:e,createNotation:n},r,i){let o,s;if("reducer"in r){if(n&&!tse(r))throw new Error(bi(17));o=r.reducer,s=r.prepare}else o=r;i.addCase(t,o).exposeCaseReducer(e,o).exposeAction(e,s?Xi(t,s):Xi(t))}function ese(t){return t._reducerDefinitionType==="asyncThunk"}function tse(t){return t._reducerDefinitionType==="reducerWithPrepare"}function nse({type:t,reducerName:e},n,r,i){if(!i)throw new Error(bi(18));const{payloadCreator:o,fulfilled:s,pending:l,rejected:c,settled:f,options:h}=n,g=i(t,o,h);r.exposeAction(e,g),s&&r.addCase(g.fulfilled,s),l&&r.addCase(g.pending,l),c&&r.addCase(g.rejected,c),f&&r.addMatcher(g.settled,f),r.exposeCaseReducer(e,{fulfilled:s||iv,pending:l||iv,rejected:c||iv,settled:f||iv})}function iv(){}var rse="task",T5="listener",E5="completed",jI="cancelled",ise=`task-${jI}`,ose=`task-${E5}`,$A=`${T5}-${jI}`,sse=`${T5}-${E5}`,tT=class{constructor(t){bw(this,"name","TaskAbortError");bw(this,"message");this.code=t,this.message=`${rse} ${jI} (reason: ${t})`}},KI=(t,e)=>{if(typeof t!="function")throw new TypeError(bi(32))},S_=()=>{},w5=(t,e=S_)=>(t.catch(e),t),b5=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),$u=(t,e)=>{const n=t.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},zu=t=>{if(t.aborted){const{reason:e}=t;throw new tT(e)}};function S5(t,e){let n=S_;return new Promise((r,i)=>{const o=()=>i(new tT(t.reason));if(t.aborted){o();return}n=b5(t,o),e.finally(()=>n()).then(r,i)}).finally(()=>{n=S_})}var ase=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof tT?"cancelled":"rejected",error:n}}finally{e==null||e()}},A_=t=>e=>w5(S5(t,e).then(n=>(zu(t),n))),A5=t=>{const e=A_(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:Lf}=Object,y2={},nT="listenerMiddleware",lse=(t,e)=>{const n=r=>b5(t,()=>$u(r,t.reason));return(r,i)=>{KI(r);const o=new AbortController;n(o);const s=ase(async()=>{zu(t),zu(o.signal);const l=await r({pause:A_(o.signal),delay:A5(o.signal),signal:o.signal});return zu(o.signal),l},()=>$u(o,ose));return i!=null&&i.autoJoin&&e.push(s.catch(S_)),{result:A_(t)(s),cancel(){$u(o,ise)}}}},use=(t,e)=>{const n=async(r,i)=>{zu(e);let o=()=>{};const l=[new Promise((c,f)=>{let h=t({predicate:r,effect:(g,v)=>{v.unsubscribe(),c([g,v.getState(),v.getOriginalState()])}});o=()=>{h(),f()}})];i!=null&&l.push(new Promise(c=>setTimeout(c,i,null)));try{const c=await S5(e,Promise.race(l));return zu(e),c}finally{o()}};return(r,i)=>w5(n(r,i))},x5=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:o}=t;if(e)i=Xi(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(bi(21));return KI(o),{predicate:i,type:e,effect:o}},C5=Lf(t=>{const{type:e,predicate:n,effect:r}=x5(t);return{id:Koe(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(bi(22))}}},{withTypes:()=>C5}),v2=(t,e)=>{const{type:n,effect:r,predicate:i}=x5(e);return Array.from(t.values()).find(o=>(typeof n=="string"?o.type===n:o.predicate===i)&&o.effect===r)},zA=t=>{t.pending.forEach(e=>{$u(e,$A)})},cse=t=>()=>{t.forEach(zA),t.clear()},_2=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},I5=Lf(Xi(`${nT}/add`),{withTypes:()=>I5}),fse=Xi(`${nT}/removeAll`),R5=Lf(Xi(`${nT}/remove`),{withTypes:()=>R5}),dse=(...t)=>{console.error(`${nT}/error`,...t)},og=(t={})=>{const e=new Map,{extra:n,onError:r=dse}=t;KI(r);const i=h=>(h.unsubscribe=()=>e.delete(h.id),e.set(h.id,h),g=>{h.unsubscribe(),g!=null&&g.cancelActive&&zA(h)}),o=h=>{const g=v2(e,h)??C5(h);return i(g)};Lf(o,{withTypes:()=>o});const s=h=>{const g=v2(e,h);return g&&(g.unsubscribe(),h.cancelActive&&zA(g)),!!g};Lf(s,{withTypes:()=>s});const l=async(h,g,v,E)=>{const b=new AbortController,S=use(o,b.signal),A=[];try{h.pending.add(b),await Promise.resolve(h.effect(g,Lf({},v,{getOriginalState:E,condition:(C,D)=>S(C,D).then(Boolean),take:S,delay:A5(b.signal),pause:A_(b.signal),extra:n,signal:b.signal,fork:lse(b.signal,A),unsubscribe:h.unsubscribe,subscribe:()=>{e.set(h.id,h)},cancelActiveListeners:()=>{h.pending.forEach((C,D,k)=>{C!==b&&($u(C,$A),k.delete(C))})},cancel:()=>{$u(b,$A),h.pending.delete(b)},throwIfCancelled:()=>{zu(b.signal)}})))}catch(C){C instanceof tT||_2(r,C,{raisedBy:"effect"})}finally{await Promise.all(A),$u(b,sse),h.pending.delete(b)}},c=cse(e);return{middleware:h=>g=>v=>{if(!u5(v))return g(v);if(I5.match(v))return o(v.payload);if(fse.match(v)){c();return}if(R5.match(v))return s(v.payload);let E=h.getState();const b=()=>{if(E===y2)throw new Error(bi(23));return E};let S;try{if(S=g(v),e.size>0){const A=h.getState(),C=Array.from(e.values());for(const D of C){let k=!1;try{k=D.predicate(v,A,E)}catch(q){k=!1,_2(r,q,{raisedBy:"predicate"})}k&&l(D,v,h,b)}}}finally{E=y2}return S},startListening:o,stopListening:s,clearListeners:c}};function bi(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var hse={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},P5=Ci({name:"chartLayout",initialState:hse,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,o;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(o=e.payload.left)!==null&&o!==void 0?o:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:pse,setLayout:mse,setChartSize:gse,setScale:yse}=P5.actions,vse=P5.reducer;function T2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function E2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?T2(Object(n),!0).forEach(function(r){_se(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _se(t,e,n){return(e=Tse(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tse(t){var e=Ese(t,"string");return typeof e=="symbol"?e:e+""}function Ese(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var x_=Math.PI/180,wse=t=>t*180/Math.PI,yr=(t,e,n,r)=>({x:t+Math.cos(-x_*r)*n,y:e+Math.sin(-x_*r)*n}),bse=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},Sse=(t,e)=>{var{x:n,y:r}=t,{x:i,y:o}=e;return Math.sqrt((n-i)**2+(r-o)**2)},Ase=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:o}=e,s=Sse({x:n,y:r},{x:i,y:o});if(s<=0)return{radius:s,angle:0};var l=(n-i)/s,c=Math.acos(l);return r>o&&(c=2*Math.PI-c),{radius:s,angle:wse(c),angleInRadian:c}},xse=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),o=Math.min(r,i);return{startAngle:e-o*360,endAngle:n-o*360}},Cse=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),o=Math.floor(r/360),s=Math.min(i,o);return t+s*360},Ise=(t,e)=>{var{x:n,y:r}=t,{radius:i,angle:o}=Ase({x:n,y:r},e),{innerRadius:s,outerRadius:l}=e;if(i<s||i>l||i===0)return null;var{startAngle:c,endAngle:f}=xse(e),h=o,g;if(c<=f){for(;h>f;)h-=360;for(;h<c;)h+=360;g=h>=c&&h<=f}else{for(;h>c;)h-=360;for(;h<f;)h+=360;g=h>=f&&h<=c}return g?E2(E2({},e),{},{radius:i,angle:Cse(h,e)}):null};function N5(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function w2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w2(Object(n),!0).forEach(function(r){Rse(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rse(t,e,n){return(e=Pse(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pse(t){var e=Nse(t,"string");return typeof e=="symbol"?e:e+""}function Nse(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hr(t,e,n){return rr(t)||rr(e)?n:us(e)?fd(t,e,n):typeof e=="function"?e(t):n}var Mse=(t,e,n,r,i)=>{var o,s=-1,l=(o=e==null?void 0:e.length)!==null&&o!==void 0?o:0;if(l<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var c=0;c<l;c++){var f=c>0?n[c-1].coordinate:n[l-1].coordinate,h=n[c].coordinate,g=c>=l-1?n[0].coordinate:n[c+1].coordinate,v=void 0;if(Ti(h-f)!==Ti(g-h)){var E=[];if(Ti(g-h)===Ti(i[1]-i[0])){v=g;var b=h+i[1]-i[0];E[0]=Math.min(b,(b+f)/2),E[1]=Math.max(b,(b+f)/2)}else{v=f;var S=g+i[1]-i[0];E[0]=Math.min(h,(S+h)/2),E[1]=Math.max(h,(S+h)/2)}var A=[Math.min(h,(v+h)/2),Math.max(h,(v+h)/2)];if(t>A[0]&&t<=A[1]||t>=E[0]&&t<=E[1]){({index:s}=n[c]);break}}else{var C=Math.min(f,g),D=Math.max(f,g);if(t>(C+h)/2&&t<=(D+h)/2){({index:s}=n[c]);break}}}else if(e){for(var k=0;k<l;k++)if(k===0&&t<=(e[k].coordinate+e[k+1].coordinate)/2||k>0&&k<l-1&&t>(e[k].coordinate+e[k-1].coordinate)/2&&t<=(e[k].coordinate+e[k+1].coordinate)/2||k===l-1&&t>(e[k].coordinate+e[k-1].coordinate)/2){({index:s}=e[k]);break}}return s},Dse=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:o,verticalAlign:s,layout:l}=e;if((l==="vertical"||l==="horizontal"&&s==="middle")&&o!=="center"&&We(t[o]))return zi(zi({},t),{},{[o]:t[o]+(r||0)});if((l==="horizontal"||l==="vertical"&&o==="center")&&s!=="middle"&&We(t[s]))return zi(zi({},t),{},{[s]:t[s]+(i||0)})}return t},mc=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",b2=1e-4,kse=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),i=Math.min(r[0],r[1])-b2,o=Math.max(r[0],r[1])+b2,s=t(e[0]),l=t(e[n-1]);(s<i||s>o||l<i||l>o)&&t.domain([e[0],e[n-1]])}},Ose=(t,e)=>{if(!e||e.length!==2||!We(e[0])||!We(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!We(t[0])||t[0]<n)&&(i[0]=n),(!We(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},Lse=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,o=0,s=0;s<e;++s){var l=Qi(t[s][n][1])?t[s][n][0]:t[s][n][1];l>=0?(t[s][n][0]=i,t[s][n][1]=i+l,i=t[s][n][1]):(t[s][n][0]=o,t[s][n][1]=o+l,o=t[s][n][1])}},Vse=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,o=0;o<e;++o){var s=Qi(t[o][n][1])?t[o][n][0]:t[o][n][1];s>=0?(t[o][n][0]=i,t[o][n][1]=i+s,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},Use={sign:Lse,expand:mie,none:dd,silhouette:gie,wiggle:yie,positive:Vse},Fse=(t,e,n)=>{var r=Use[n],i=pie().keys(e).value((o,s)=>+Hr(o,s,0)).order(kA).offset(r);return i(t)};function Bse(t){return t==null?void 0:String(t)}var S2=t=>{var{axis:e,ticks:n,offset:r,bandSize:i,entry:o,index:s}=t;if(e.type==="category")return n[s]?n[s].coordinate+r:null;var l=Hr(o,e.dataKey,e.scale.domain()[s]);return rr(l)?null:e.scale(l)-i/2+r},qse=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},$se=t=>{var e=t.flat(2).filter(We);return[Math.min(...e),Math.max(...e)]},zse=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],Hse=(t,e,n)=>{if(t!=null)return zse(Object.keys(t).reduce((r,i)=>{var o=t[i],{stackedData:s}=o,l=s.reduce((c,f)=>{var h=N5(f,e,n),g=$se(h);return[Math.min(c[0],g[0]),Math.max(c[1],g[1])]},[1/0,-1/0]);return[Math.min(l[0],r[0]),Math.max(l[1],r[1])]},[1/0,-1/0]))},A2=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,x2=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,WI=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=Q0(e,h=>h.coordinate),o=1/0,s=1,l=i.length;s<l;s++){var c=i[s],f=i[s-1];o=Math.min((c.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0};function C2(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:o}=t;return zi(zi({},e),{},{dataKey:n,payload:r,value:i,name:o})}function M5(t,e){if(t)return String(t);if(typeof e=="string")return e}function Gse(t,e,n,r,i){if(n==="horizontal"||n==="vertical"){var o=t>=i.left&&t<=i.left+i.width&&e>=i.top&&e<=i.top+i.height;return o?{x:t,y:e}:null}return r?Ise({x:t,y:e},r):null}var jse=(t,e,n,r)=>{var i=e.find(f=>f&&f.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.y};if(t==="vertical")return{x:r.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,{radius:s}=r;return zi(zi(zi({},r),yr(r.cx,r.cy,s,o)),{},{angle:o,radius:s})}var l=i.coordinate,{angle:c}=r;return zi(zi(zi({},r),yr(r.cx,r.cy,l,c)),{},{angle:c,radius:l})}return{x:0,y:0}},Kse=(t,e)=>e==="horizontal"?t.x:e==="vertical"?t.y:e==="centric"?t.angle:t.radius,pa=t=>t.layout.width,ma=t=>t.layout.height,Wse=t=>t.layout.scale,D5=t=>t.layout.margin,rT=se(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),iT=se(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),Yse="data-recharts-item-index",Jse="data-recharts-item-data-key",sg=60;function I2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ov(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I2(Object(n),!0).forEach(function(r){Qse(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qse(t,e,n){return(e=Xse(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xse(t){var e=Zse(t,"string");return typeof e=="symbol"?e:e+""}function Zse(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var eae=t=>t.brush.height;function tae(t){var e=iT(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:sg;return n+i}return n},0)}function nae(t){var e=iT(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:sg;return n+i}return n},0)}function rae(t){var e=rT(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function iae(t){var e=rT(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var or=se([pa,ma,D5,eae,tae,nae,rae,iae,s5,_oe],(t,e,n,r,i,o,s,l,c,f)=>{var h={left:(n.left||0)+i,right:(n.right||0)+o},g={top:(n.top||0)+s,bottom:(n.bottom||0)+l},v=ov(ov({},g),h),E=v.bottom;v.bottom+=r,v=Dse(v,c,f);var b=t-v.left-v.right,S=e-v.top-v.bottom;return ov(ov({brushBottom:E},v),{},{width:Math.max(b,0),height:Math.max(S,0)})}),oae=se(or,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),YI=se(pa,ma,(t,e)=>({x:0,y:0,width:t,height:e})),sae=P.createContext(null),wo=()=>P.useContext(sae)!=null,oT=t=>t.brush,sT=se([oT,or,D5],(t,e,n)=>({height:t.height,x:We(t.x)?t.x:e.left,y:We(t.y)?t.y:e.top+e.height+e.brushBottom-((n==null?void 0:n.bottom)||0),width:We(t.width)?t.width:e.width})),JI=()=>{var t,e=wo(),n=ze(oae),r=ze(sT),i=(t=ze(oT))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},aae={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},lae=()=>{var t;return(t=ze(or))!==null&&t!==void 0?t:aae},uae=()=>ze(pa),cae=()=>ze(ma),Dt=t=>t.layout.layoutType,QI=()=>ze(Dt),fae={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},k5=Ci({name:"legend",initialState:fae,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload(t,e){t.payload.push(e.payload)},removeLegendPayload(t,e){var n=Ks(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)}}}),{setLegendSize:EIe,setLegendSettings:wIe,addLegendPayload:dae,removeLegendPayload:hae}=k5.actions,pae=k5.reducer;function HA(){return HA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},HA.apply(null,arguments)}function R2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R2(Object(n),!0).forEach(function(r){mae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mae(t,e,n){return(e=gae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gae(t){var e=yae(t,"string");return typeof e=="symbol"?e:e+""}function yae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vae(t){return Array.isArray(t)&&us(t[0])&&us(t[1])?t.join(" ~ "):t}var _ae=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:o,formatter:s,itemSorter:l,wrapperClassName:c,labelClassName:f,label:h,labelFormatter:g,accessibilityLayer:v=!1}=t,E=()=>{if(o&&o.length){var $={padding:0,margin:0},H=(l?Q0(o,l):o).map((M,O)=>{if(M.type==="none")return null;var L=M.formatter||s||vae,{value:F,name:V}=M,G=F,z=V;if(L){var Se=L(F,V,M,O,o);if(Array.isArray(Se))[G,z]=Se;else if(Se!=null)G=Se;else return null}var Re=tS({display:"block",paddingTop:4,paddingBottom:4,color:M.color||"#000"},r);return P.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(O),style:Re},us(z)?P.createElement("span",{className:"recharts-tooltip-item-name"},z):null,us(z)?P.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,P.createElement("span",{className:"recharts-tooltip-item-value"},G),P.createElement("span",{className:"recharts-tooltip-item-unit"},M.unit||""))});return P.createElement("ul",{className:"recharts-tooltip-item-list",style:$},H)}return null},b=tS({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),S=tS({margin:0},i),A=!rr(h),C=A?h:"",D=Xt("recharts-default-tooltip",c),k=Xt("recharts-tooltip-label",f);A&&g&&o!==void 0&&o!==null&&(C=g(h,o));var q=v?{role:"status","aria-live":"assertive"}:{};return P.createElement("div",HA({className:D,style:b},q),P.createElement("p",{className:k,style:S},P.isValidElement(C)?C:"".concat(C)),E())},dp="recharts-tooltip-wrapper",Tae={visibility:"hidden"};function Eae(t){var{coordinate:e,translateX:n,translateY:r}=t;return Xt(dp,{["".concat(dp,"-right")]:We(n)&&e&&We(e.x)&&n>=e.x,["".concat(dp,"-left")]:We(n)&&e&&We(e.x)&&n<e.x,["".concat(dp,"-bottom")]:We(r)&&e&&We(e.y)&&r>=e.y,["".concat(dp,"-top")]:We(r)&&e&&We(e.y)&&r<e.y})}function P2(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:i,position:o,reverseDirection:s,tooltipDimension:l,viewBox:c,viewBoxDimension:f}=t;if(o&&We(o[r]))return o[r];var h=n[r]-l-(i>0?i:0),g=n[r]+i;if(e[r])return s[r]?h:g;var v=c[r];if(v==null)return 0;if(s[r]){var E=h,b=v;return E<b?Math.max(g,v):Math.max(h,v)}if(f==null)return 0;var S=g+l,A=v+f;return S>A?Math.max(h,v):Math.max(g,v)}function wae(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function bae(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:o,tooltipBox:s,useTranslate3d:l,viewBox:c}=t,f,h,g;return s.height>0&&s.width>0&&n?(h=P2({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:s.width,viewBox:c,viewBoxDimension:c.width}),g=P2({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:s.height,viewBox:c,viewBoxDimension:c.height}),f=wae({translateX:h,translateY:g,useTranslate3d:l})):f=Tae,{cssProperties:f,cssClasses:Eae({translateX:h,translateY:g,coordinate:n})}}function N2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?N2(Object(n),!0).forEach(function(r){GA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function GA(t,e,n){return(e=Sae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sae(t){var e=Aae(t,"string");return typeof e=="symbol"?e:e+""}function Aae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class xae extends P.PureComponent{constructor(){super(...arguments),GA(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),GA(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,o;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:o,coordinate:s,hasPayload:l,isAnimationActive:c,offset:f,position:h,reverseDirection:g,useTranslate3d:v,viewBox:E,wrapperStyle:b,lastBoundingBox:S,innerRef:A,hasPortalFromProps:C}=this.props,{cssClasses:D,cssProperties:k}=bae({allowEscapeViewBox:n,coordinate:s,offsetTopLeft:f,position:h,reverseDirection:g,tooltipBox:{height:S.height,width:S.width},useTranslate3d:v,viewBox:E}),q=C?{}:sv(sv({transition:c&&e?"transform ".concat(r,"ms ").concat(i):void 0},k),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&l?"visible":"hidden",position:"absolute",top:0,left:0}),$=sv(sv({},q),{},{visibility:!this.state.dismissed&&e&&l?"visible":"hidden"},b);return P.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:D,style:$,ref:A},o)}}var Cae=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),ag={isSsr:Cae()},O5=()=>ze(t=>t.rootProps.accessibilityLayer);function xi(t){return Number.isFinite(t)}function C_(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function jA(){return jA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jA.apply(null,arguments)}function M2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function D2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M2(Object(n),!0).forEach(function(r){Iae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Iae(t,e,n){return(e=Rae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rae(t){var e=Pae(t,"string");return typeof e=="symbol"?e:e+""}function Pae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var k2={curveBasisClosed:rie,curveBasisOpen:iie,curveBasis:nie,curveBumpX:$re,curveBumpY:zre,curveLinearClosed:oie,curveLinear:Y0,curveMonotoneX:sie,curveMonotoneY:aie,curveNatural:lie,curveStep:uie,curveStepAfter:fie,curveStepBefore:cie},av=t=>xi(t.x)&&xi(t.y),hp=t=>t.x,pp=t=>t.y,Nae=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(rg(t));return(n==="curveMonotone"||n==="curveBump")&&e?k2["".concat(n).concat(e==="vertical"?"Y":"X")]:k2[n]||Y0},Mae=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:i,connectNulls:o=!1}=t,s=Nae(e,i),l=o?n.filter(av):n,c;if(Array.isArray(r)){var f=o?r.filter(g=>av(g)):r,h=l.map((g,v)=>D2(D2({},g),{},{base:f[v]}));return i==="vertical"?c=Zy().y(pp).x1(hp).x0(g=>g.base.x):c=Zy().x(hp).y1(pp).y0(g=>g.base.y),c.defined(av).curve(s),c(h)}return i==="vertical"&&We(r)?c=Zy().y(pp).x1(hp).x0(r):We(r)?c=Zy().x(hp).y1(pp).y0(r):c=L6().x(hp).y(pp),c.defined(av).curve(s),c(l)},Dae=t=>{var{className:e,points:n,path:r,pathRef:i}=t;if((!n||!n.length)&&!r)return null;var o=n&&n.length?Mae(t):r;return P.createElement("path",jA({},K0(t),Cre(t),{className:Xt("recharts-curve",e),d:o===null?void 0:o,ref:i}))},kae=["x","y","top","left","width","height","className"];function KA(){return KA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},KA.apply(null,arguments)}function O2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Oae(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?O2(Object(n),!0).forEach(function(r){Lae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lae(t,e,n){return(e=Vae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vae(t){var e=Uae(t,"string");return typeof e=="symbol"?e:e+""}function Uae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Fae(t,e){if(t==null)return{};var n,r,i=Bae(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Bae(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var qae=(t,e,n,r,i,o)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(o,",").concat(e,"h").concat(n),$ae=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:o=0,height:s=0,className:l}=t,c=Fae(t,kae),f=Oae({x:e,y:n,top:r,left:i,width:o,height:s},c);return!We(e)||!We(n)||!We(o)||!We(s)||!We(r)||!We(i)?null:P.createElement("path",KA({},er(f,!0),{className:Xt("recharts-cross",l),d:qae(e,n,o,s,r,i)}))};function zae(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function L2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Hae(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L2(Object(n),!0).forEach(function(r){Gae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gae(t,e,n){return(e=jae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jae(t){var e=Kae(t,"string");return typeof e=="symbol"?e:e+""}function Kae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ll(t,e){var n=Hae({},t),r=e,i=Object.keys(e),o=i.reduce((s,l)=>(s[l]===void 0&&r[l]!==void 0&&(s[l]=r[l]),s),n);return o}function Wae(){}function V2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function U2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V2(Object(n),!0).forEach(function(r){Yae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Yae(t,e,n){return(e=Jae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jae(t){var e=Qae(t,"string");return typeof e=="symbol"?e:e+""}function Qae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Xae=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),L5=(t,e,n)=>t.map(r=>"".concat(Xae(r)," ").concat(e,"ms ").concat(n)).join(","),Zae=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),xm=(t,e)=>Object.keys(e).reduce((n,r)=>U2(U2({},n),{},{[r]:t(r,e[r])}),{});function F2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F2(Object(n),!0).forEach(function(r){ele(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ele(t,e,n){return(e=tle(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tle(t){var e=nle(t,"string");return typeof e=="symbol"?e:e+""}function nle(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var I_=(t,e,n)=>t+(e-t)*n,WA=t=>{var{from:e,to:n}=t;return e!==n},V5=(t,e,n)=>{var r=xm((i,o)=>{if(WA(o)){var[s,l]=t(o.from,o.to,o.velocity);return mr(mr({},o),{},{from:s,velocity:l})}return o},e);return n<1?xm((i,o)=>WA(o)?mr(mr({},o),{},{velocity:I_(o.velocity,r[i].velocity,n),from:I_(o.from,r[i].from,n)}):o,e):V5(t,r,n-1)};function rle(t,e,n,r,i,o){var s,l=r.reduce((v,E)=>mr(mr({},v),{},{[E]:{from:t[E],velocity:0,to:e[E]}}),{}),c=()=>xm((v,E)=>E.from,l),f=()=>!Object.values(l).filter(WA).length,h=null,g=v=>{s||(s=v);var E=v-s,b=E/n.dt;l=V5(n,l,b),i(mr(mr(mr({},t),e),c())),s=v,f()||(h=o.setTimeout(g))};return()=>(h=o.setTimeout(g),()=>{h()})}function ile(t,e,n,r,i,o,s){var l=null,c=i.reduce((g,v)=>mr(mr({},g),{},{[v]:[t[v],e[v]]}),{}),f,h=g=>{f||(f=g);var v=(g-f)/r,E=xm((S,A)=>I_(...A,n(v)),c);if(o(mr(mr(mr({},t),e),E)),v<1)l=s.setTimeout(h);else{var b=xm((S,A)=>I_(...A,n(1)),c);o(mr(mr(mr({},t),e),b))}};return()=>(l=s.setTimeout(h),()=>{l()})}const ole=(t,e,n,r,i,o)=>{var s=Zae(t,e);return n.isStepper===!0?rle(t,e,n,s,i,o):ile(t,e,n,r,s,i,o)};var R_=1e-4,U5=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],F5=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),B2=(t,e)=>n=>{var r=U5(t,e);return F5(r,n)},sle=(t,e)=>n=>{var r=U5(t,e),i=[...r.map((o,s)=>o*s).slice(1),0];return F5(i,n)},q2=function(){for(var e,n,r,i,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];if(s.length===1)switch(s[0]){case"linear":[e,r,n,i]=[0,0,1,1];break;case"ease":[e,r,n,i]=[.25,.1,.25,1];break;case"ease-in":[e,r,n,i]=[.42,0,1,1];break;case"ease-out":[e,r,n,i]=[.42,0,.58,1];break;case"ease-in-out":[e,r,n,i]=[0,0,.58,1];break;default:{var c=s[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([e,r,n,i]=c[1].split(")")[0].split(",").map(b=>parseFloat(b)))}}else s.length===4&&([e,r,n,i]=s);var f=B2(e,n),h=B2(r,i),g=sle(e,n),v=b=>b>1?1:b<0?0:b,E=b=>{for(var S=b>1?1:b,A=S,C=0;C<8;++C){var D=f(A)-S,k=g(A);if(Math.abs(D-S)<R_||k<R_)return h(A);A=v(A-D/k)}return h(A)};return E.isStepper=!1,E},ale=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,o=(s,l,c)=>{var f=-(s-l)*n,h=c*r,g=c+(f-h)*i/1e3,v=c*i/1e3+s;return Math.abs(v-l)<R_&&Math.abs(g)<R_?[l,0]:[v,g]};return o.isStepper=!0,o.dt=i,o},lle=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return q2(t);case"spring":return ale();default:if(t.split("(")[0]==="cubic-bezier")return q2(t)}return typeof t=="function"?t:null};function ule(t){var e,n=()=>null,r=!1,i=null,o=s=>{if(!r){if(Array.isArray(s)){if(!s.length)return;var l=s,[c,...f]=l;if(typeof c=="number"){i=t.setTimeout(o.bind(null,f),c);return}o(c),i=t.setTimeout(o.bind(null,f));return}typeof s=="string"&&(e=s,n(e)),typeof s=="object"&&(e=s,n(e)),typeof s=="function"&&s()}};return{stop:()=>{r=!0},start:s=>{r=!1,i&&(i(),i=null),o(s)},subscribe:s=>(n=s,()=>{n=()=>null}),getTimeoutController:()=>t}}class cle{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,o=s=>{s-r>=n?e(s):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(o))};return i=requestAnimationFrame(o),()=>{cancelAnimationFrame(i)}}}function fle(){return ule(new cle)}var dle=P.createContext(fle);function hle(t,e){var n=P.useContext(dle);return P.useMemo(()=>e??n(t),[t,e,n])}var ple={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},$2={t:0},nS={t:1};function XI(t){var e=Ll(t,ple),{isActive:n,canBegin:r,duration:i,easing:o,begin:s,onAnimationEnd:l,onAnimationStart:c,children:f}=e,h=hle(e.animationId,e.animationManager),[g,v]=P.useState(n?$2:nS),E=P.useRef(null);return P.useEffect(()=>{n||v(nS)},[n]),P.useEffect(()=>{if(!n||!r)return Wae;var b=ole($2,nS,lle(o),i,v,h.getTimeoutController()),S=()=>{E.current=b()};return h.start([c,s,S,i,l]),()=>{h.stop(),E.current&&E.current(),l()}},[n,r,i,o,s,c,l,h]),f(g.t)}function ZI(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=P.useRef(bm(e)),r=P.useRef(t);return r.current!==t&&(n.current=bm(e),r.current=t),n.current}function z2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function H2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?z2(Object(n),!0).forEach(function(r){mle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mle(t,e,n){return(e=gle(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gle(t){var e=yle(t,"string");return typeof e=="symbol"?e:e+""}function yle(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function P_(){return P_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},P_.apply(null,arguments)}var G2=(t,e,n,r,i)=>{var o=Math.min(Math.abs(n)/2,Math.abs(r)/2),s=r>=0?1:-1,l=n>=0?1:-1,c=r>=0&&n>=0||r<0&&n<0?1:0,f;if(o>0&&i instanceof Array){for(var h=[0,0,0,0],g=0,v=4;g<v;g++)h[g]=i[g]>o?o:i[g];f="M".concat(t,",").concat(e+s*h[0]),h[0]>0&&(f+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(c,",").concat(t+l*h[0],",").concat(e)),f+="L ".concat(t+n-l*h[1],",").concat(e),h[1]>0&&(f+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(c,`,
        `).concat(t+n,",").concat(e+s*h[1])),f+="L ".concat(t+n,",").concat(e+r-s*h[2]),h[2]>0&&(f+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(c,`,
        `).concat(t+n-l*h[2],",").concat(e+r)),f+="L ".concat(t+l*h[3],",").concat(e+r),h[3]>0&&(f+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(c,`,
        `).concat(t,",").concat(e+r-s*h[3])),f+="Z"}else if(o>0&&i===+i&&i>0){var E=Math.min(o,i);f="M ".concat(t,",").concat(e+s*E,`
            A `).concat(E,",").concat(E,",0,0,").concat(c,",").concat(t+l*E,",").concat(e,`
            L `).concat(t+n-l*E,",").concat(e,`
            A `).concat(E,",").concat(E,",0,0,").concat(c,",").concat(t+n,",").concat(e+s*E,`
            L `).concat(t+n,",").concat(e+r-s*E,`
            A `).concat(E,",").concat(E,",0,0,").concat(c,",").concat(t+n-l*E,",").concat(e+r,`
            L `).concat(t+l*E,",").concat(e+r,`
            A `).concat(E,",").concat(E,",0,0,").concat(c,",").concat(t,",").concat(e+r-s*E," Z")}else f="M ".concat(t,",").concat(e," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return f},vle={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},B5=t=>{var e=Ll(t,vle),n=P.useRef(null),[r,i]=P.useState(-1);P.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var Se=n.current.getTotalLength();Se&&i(Se)}catch{}},[]);var{x:o,y:s,width:l,height:c,radius:f,className:h}=e,{animationEasing:g,animationDuration:v,animationBegin:E,isAnimationActive:b,isUpdateAnimationActive:S}=e,A=P.useRef(l),C=P.useRef(c),D=P.useRef(o),k=P.useRef(s),q=P.useMemo(()=>({x:o,y:s,width:l,height:c,radius:f}),[o,s,l,c,f]),$=ZI(q,"rectangle-");if(o!==+o||s!==+s||l!==+l||c!==+c||l===0||c===0)return null;var H=Xt("recharts-rectangle",h);if(!S)return P.createElement("path",P_({},er(e,!0),{className:H,d:G2(o,s,l,c,f)}));var M=A.current,O=C.current,L=D.current,F=k.current,V="0px ".concat(r===-1?1:r,"px"),G="".concat(r,"px 0px"),z=L5(["strokeDasharray"],v,typeof g=="string"?g:void 0);return P.createElement(XI,{animationId:$,key:$,canBegin:r>0,duration:v,easing:g,isActive:S,begin:E},Se=>{var Re=Br(M,l,Se),te=Br(O,c,Se),me=Br(L,o,Se),be=Br(F,s,Se);n.current&&(A.current=Re,C.current=te,D.current=me,k.current=be);var Oe;return b?Se>0?Oe={transition:z,strokeDasharray:G}:Oe={strokeDasharray:V}:Oe={strokeDasharray:G},P.createElement("path",P_({},er(e,!0),{className:H,d:G2(me,be,Re,te,f),ref:n,style:H2(H2({},Oe),e.style)}))})};function q5(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:o}=t,s=yr(e,n,r,i),l=yr(e,n,r,o);return{points:[s,l],cx:e,cy:n,radius:r,startAngle:i,endAngle:o}}function YA(){return YA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},YA.apply(null,arguments)}var _le=(t,e)=>{var n=Ti(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},lv=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:o,isExternal:s,cornerRadius:l,cornerIsExternal:c}=t,f=l*(s?1:-1)+r,h=Math.asin(l/f)/x_,g=c?i:i+o*h,v=yr(e,n,f,g),E=yr(e,n,r,g),b=c?i-o*h:i,S=yr(e,n,f*Math.cos(h*x_),b);return{center:v,circleTangency:E,lineTangency:S,theta:h}},$5=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:o,endAngle:s}=t,l=_le(o,s),c=o+l,f=yr(e,n,i,o),h=yr(e,n,i,c),g="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(o>c),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(r>0){var v=yr(e,n,r,o),E=yr(e,n,r,c);g+="L ".concat(E.x,",").concat(E.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(o<=c),`,
            `).concat(v.x,",").concat(v.y," Z")}else g+="L ".concat(e,",").concat(n," Z");return g},Tle=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:o,forceCornerRadius:s,cornerIsExternal:l,startAngle:c,endAngle:f}=t,h=Ti(f-c),{circleTangency:g,lineTangency:v,theta:E}=lv({cx:e,cy:n,radius:i,angle:c,sign:h,cornerRadius:o,cornerIsExternal:l}),{circleTangency:b,lineTangency:S,theta:A}=lv({cx:e,cy:n,radius:i,angle:f,sign:-h,cornerRadius:o,cornerIsExternal:l}),C=l?Math.abs(c-f):Math.abs(c-f)-E-A;if(C<0)return s?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):$5({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:c,endAngle:f});var D="M ".concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(C>180),",").concat(+(h<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(S.x,",").concat(S.y,`
  `);if(r>0){var{circleTangency:k,lineTangency:q,theta:$}=lv({cx:e,cy:n,radius:r,angle:c,sign:h,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),{circleTangency:H,lineTangency:M,theta:O}=lv({cx:e,cy:n,radius:r,angle:f,sign:-h,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),L=l?Math.abs(c-f):Math.abs(c-f)-$-O;if(L<0&&o===0)return"".concat(D,"L").concat(e,",").concat(n,"Z");D+="L".concat(M.x,",").concat(M.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(H.x,",").concat(H.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(L>180),",").concat(+(h>0),",").concat(k.x,",").concat(k.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(q.x,",").concat(q.y,"Z")}else D+="L".concat(e,",").concat(n,"Z");return D},Ele={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},z5=t=>{var e=Ll(t,Ele),{cx:n,cy:r,innerRadius:i,outerRadius:o,cornerRadius:s,forceCornerRadius:l,cornerIsExternal:c,startAngle:f,endAngle:h,className:g}=e;if(o<i||f===h)return null;var v=Xt("recharts-sector",g),E=o-i,b=vo(s,E,0,!0),S;return b>0&&Math.abs(f-h)<360?S=Tle({cx:n,cy:r,innerRadius:i,outerRadius:o,cornerRadius:Math.min(b,E/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:f,endAngle:h}):S=$5({cx:n,cy:r,innerRadius:i,outerRadius:o,startAngle:f,endAngle:h}),P.createElement("path",YA({},er(e,!0),{className:v,d:S}))};function wle(t,e,n){var r,i,o,s;if(t==="horizontal")r=e.x,o=r,i=n.top,s=n.top+n.height;else if(t==="vertical")i=e.y,s=i,r=n.left,o=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var{cx:l,cy:c,innerRadius:f,outerRadius:h,angle:g}=e,v=yr(l,c,f,g),E=yr(l,c,h,g);r=v.x,i=v.y,o=E.x,s=E.y}else return q5(e);return[{x:r,y:i},{x:o,y:s}]}var rS={},iS={},oS={},j2;function ble(){return j2||(j2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=i5();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(oS)),oS}var K2;function Sle(){return K2||(K2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ble();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(iS)),iS}var W2;function Ale(){return W2||(W2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=o5(),n=Sle();function r(i,o,s){s&&typeof s!="number"&&e.isIterateeCall(i,o,s)&&(o=s=void 0),i=n.toFinite(i),o===void 0?(o=i,i=0):o=n.toFinite(o),s=s===void 0?i<o?1:-1:n.toFinite(s);const l=Math.max(Math.ceil((o-i)/(s||1)),0),c=new Array(l);for(let f=0;f<l;f++)c[f]=i,i+=s;return c}t.range=r})(rS)),rS}var sS,Y2;function xle(){return Y2||(Y2=1,sS=Ale().range),sS}var Cle=xle();const H5=fs(Cle);function hl(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ile(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function eR(t){let e,n,r;t.length!==2?(e=hl,n=(l,c)=>hl(t(l),c),r=(l,c)=>t(l)-c):(e=t===hl||t===Ile?t:Rle,n=t,r=t);function i(l,c,f=0,h=l.length){if(f<h){if(e(c,c)!==0)return h;do{const g=f+h>>>1;n(l[g],c)<0?f=g+1:h=g}while(f<h)}return f}function o(l,c,f=0,h=l.length){if(f<h){if(e(c,c)!==0)return h;do{const g=f+h>>>1;n(l[g],c)<=0?f=g+1:h=g}while(f<h)}return f}function s(l,c,f=0,h=l.length){const g=i(l,c,f,h-1);return g>f&&r(l[g-1],c)>-r(l[g],c)?g-1:g}return{left:i,center:s,right:o}}function Rle(){return 0}function G5(t){return t===null?NaN:+t}function*Ple(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const Nle=eR(hl),lg=Nle.right;eR(G5).center;class J2 extends Map{constructor(e,n=kle){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Q2(this,e))}has(e){return super.has(Q2(this,e))}set(e,n){return super.set(Mle(this,e),n)}delete(e){return super.delete(Dle(this,e))}}function Q2({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Mle({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Dle({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function kle(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Ole(t=hl){if(t===hl)return j5;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function j5(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Lle=Math.sqrt(50),Vle=Math.sqrt(10),Ule=Math.sqrt(2);function N_(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=Lle?10:o>=Vle?5:o>=Ule?2:1;let l,c,f;return i<0?(f=Math.pow(10,-i)/s,l=Math.round(t*f),c=Math.round(e*f),l/f<t&&++l,c/f>e&&--c,f=-f):(f=Math.pow(10,i)*s,l=Math.round(t/f),c=Math.round(e/f),l*f<t&&++l,c*f>e&&--c),c<l&&.5<=n&&n<2?N_(t,e,n*2):[l,c,f]}function JA(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,s]=r?N_(e,t,n):N_(t,e,n);if(!(o>=i))return[];const l=o-i+1,c=new Array(l);if(r)if(s<0)for(let f=0;f<l;++f)c[f]=(o-f)/-s;else for(let f=0;f<l;++f)c[f]=(o-f)*s;else if(s<0)for(let f=0;f<l;++f)c[f]=(i+f)/-s;else for(let f=0;f<l;++f)c[f]=(i+f)*s;return c}function QA(t,e,n){return e=+e,t=+t,n=+n,N_(t,e,n)[2]}function XA(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?QA(e,t,n):QA(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function X2(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function Z2(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function K5(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?j5:Ole(i);r>n;){if(r-n>600){const c=r-n+1,f=e-n+1,h=Math.log(c),g=.5*Math.exp(2*h/3),v=.5*Math.sqrt(h*g*(c-g)/c)*(f-c/2<0?-1:1),E=Math.max(n,Math.floor(e-f*g/c+v)),b=Math.min(r,Math.floor(e+(c-f)*g/c+v));K5(t,e,E,b,i)}const o=t[e];let s=n,l=r;for(mp(t,n,e),i(t[r],o)>0&&mp(t,n,r);s<l;){for(mp(t,s,l),++s,--l;i(t[s],o)<0;)++s;for(;i(t[l],o)>0;)--l}i(t[n],o)===0?mp(t,n,l):(++l,mp(t,l,r)),l<=e&&(n=l+1),e<=l&&(r=l-1)}return t}function mp(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Fle(t,e,n){if(t=Float64Array.from(Ple(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return Z2(t);if(e>=1)return X2(t);var r,i=(r-1)*e,o=Math.floor(i),s=X2(K5(t,o).subarray(0,o+1)),l=Z2(t.subarray(o+1));return s+(l-s)*(i-o)}}function Ble(t,e,n=G5){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),s=+n(t[o],o,t),l=+n(t[o+1],o+1,t);return s+(l-s)*(i-o)}}function qle(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function eo(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function ga(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const ZA=Symbol("implicit");function tR(){var t=new J2,e=[],n=[],r=ZA;function i(o){let s=t.get(o);if(s===void 0){if(r!==ZA)return r;t.set(o,s=e.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new J2;for(const s of o)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return tR(e,n).unknown(r)},eo.apply(i,arguments),i}function nR(){var t=tR().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,o,s,l=!1,c=0,f=0,h=.5;delete t.unknown;function g(){var v=e().length,E=i<r,b=E?i:r,S=E?r:i;o=(S-b)/Math.max(1,v-c+f*2),l&&(o=Math.floor(o)),b+=(S-b-o*(v-c))*h,s=o*(1-c),l&&(b=Math.round(b),s=Math.round(s));var A=qle(v).map(function(C){return b+o*C});return n(E?A.reverse():A)}return t.domain=function(v){return arguments.length?(e(v),g()):e()},t.range=function(v){return arguments.length?([r,i]=v,r=+r,i=+i,g()):[r,i]},t.rangeRound=function(v){return[r,i]=v,r=+r,i=+i,l=!0,g()},t.bandwidth=function(){return s},t.step=function(){return o},t.round=function(v){return arguments.length?(l=!!v,g()):l},t.padding=function(v){return arguments.length?(c=Math.min(1,f=+v),g()):c},t.paddingInner=function(v){return arguments.length?(c=Math.min(1,v),g()):c},t.paddingOuter=function(v){return arguments.length?(f=+v,g()):f},t.align=function(v){return arguments.length?(h=Math.max(0,Math.min(1,v)),g()):h},t.copy=function(){return nR(e(),[r,i]).round(l).paddingInner(c).paddingOuter(f).align(h)},eo.apply(g(),arguments)}function W5(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return W5(e())},t}function $le(){return W5(nR.apply(null,arguments).paddingInner(1))}function rR(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Y5(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ug(){}var Cm=.7,M_=1/Cm,Vf="\\s*([+-]?\\d+)\\s*",Im="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",os="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",zle=/^#([0-9a-f]{3,8})$/,Hle=new RegExp(`^rgb\\(${Vf},${Vf},${Vf}\\)$`),Gle=new RegExp(`^rgb\\(${os},${os},${os}\\)$`),jle=new RegExp(`^rgba\\(${Vf},${Vf},${Vf},${Im}\\)$`),Kle=new RegExp(`^rgba\\(${os},${os},${os},${Im}\\)$`),Wle=new RegExp(`^hsl\\(${Im},${os},${os}\\)$`),Yle=new RegExp(`^hsla\\(${Im},${os},${os},${Im}\\)$`),eL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};rR(ug,Rm,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:tL,formatHex:tL,formatHex8:Jle,formatHsl:Qle,formatRgb:nL,toString:nL});function tL(){return this.rgb().formatHex()}function Jle(){return this.rgb().formatHex8()}function Qle(){return J5(this).formatHsl()}function nL(){return this.rgb().formatRgb()}function Rm(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=zle.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?rL(e):n===3?new ni(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?uv(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?uv(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Hle.exec(t))?new ni(e[1],e[2],e[3],1):(e=Gle.exec(t))?new ni(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=jle.exec(t))?uv(e[1],e[2],e[3],e[4]):(e=Kle.exec(t))?uv(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Wle.exec(t))?sL(e[1],e[2]/100,e[3]/100,1):(e=Yle.exec(t))?sL(e[1],e[2]/100,e[3]/100,e[4]):eL.hasOwnProperty(t)?rL(eL[t]):t==="transparent"?new ni(NaN,NaN,NaN,0):null}function rL(t){return new ni(t>>16&255,t>>8&255,t&255,1)}function uv(t,e,n,r){return r<=0&&(t=e=n=NaN),new ni(t,e,n,r)}function Xle(t){return t instanceof ug||(t=Rm(t)),t?(t=t.rgb(),new ni(t.r,t.g,t.b,t.opacity)):new ni}function ex(t,e,n,r){return arguments.length===1?Xle(t):new ni(t,e,n,r??1)}function ni(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}rR(ni,ex,Y5(ug,{brighter(t){return t=t==null?M_:Math.pow(M_,t),new ni(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Cm:Math.pow(Cm,t),new ni(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ni(Hu(this.r),Hu(this.g),Hu(this.b),D_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:iL,formatHex:iL,formatHex8:Zle,formatRgb:oL,toString:oL}));function iL(){return`#${Lu(this.r)}${Lu(this.g)}${Lu(this.b)}`}function Zle(){return`#${Lu(this.r)}${Lu(this.g)}${Lu(this.b)}${Lu((isNaN(this.opacity)?1:this.opacity)*255)}`}function oL(){const t=D_(this.opacity);return`${t===1?"rgb(":"rgba("}${Hu(this.r)}, ${Hu(this.g)}, ${Hu(this.b)}${t===1?")":`, ${t})`}`}function D_(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Hu(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Lu(t){return t=Hu(t),(t<16?"0":"")+t.toString(16)}function sL(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new fo(t,e,n,r)}function J5(t){if(t instanceof fo)return new fo(t.h,t.s,t.l,t.opacity);if(t instanceof ug||(t=Rm(t)),!t)return new fo;if(t instanceof fo)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,l=o-i,c=(o+i)/2;return l?(e===o?s=(n-r)/l+(n<r)*6:n===o?s=(r-e)/l+2:s=(e-n)/l+4,l/=c<.5?o+i:2-o-i,s*=60):l=c>0&&c<1?0:s,new fo(s,l,c,t.opacity)}function eue(t,e,n,r){return arguments.length===1?J5(t):new fo(t,e,n,r??1)}function fo(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}rR(fo,eue,Y5(ug,{brighter(t){return t=t==null?M_:Math.pow(M_,t),new fo(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Cm:Math.pow(Cm,t),new fo(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ni(aS(t>=240?t-240:t+120,i,r),aS(t,i,r),aS(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new fo(aL(this.h),cv(this.s),cv(this.l),D_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=D_(this.opacity);return`${t===1?"hsl(":"hsla("}${aL(this.h)}, ${cv(this.s)*100}%, ${cv(this.l)*100}%${t===1?")":`, ${t})`}`}}));function aL(t){return t=(t||0)%360,t<0?t+360:t}function cv(t){return Math.max(0,Math.min(1,t||0))}function aS(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const iR=t=>()=>t;function tue(t,e){return function(n){return t+n*e}}function nue(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function rue(t){return(t=+t)==1?Q5:function(e,n){return n-e?nue(e,n,t):iR(isNaN(e)?n:e)}}function Q5(t,e){var n=e-t;return n?tue(t,n):iR(isNaN(t)?e:t)}const lL=(function t(e){var n=rue(e);function r(i,o){var s=n((i=ex(i)).r,(o=ex(o)).r),l=n(i.g,o.g),c=n(i.b,o.b),f=Q5(i.opacity,o.opacity);return function(h){return i.r=s(h),i.g=l(h),i.b=c(h),i.opacity=f(h),i+""}}return r.gamma=t,r})(1);function iue(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function oue(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function sue(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=Fd(t[s],e[s]);for(;s<n;++s)o[s]=e[s];return function(l){for(s=0;s<r;++s)o[s]=i[s](l);return o}}function aue(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function k_(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function lue(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Fd(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var tx=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,lS=new RegExp(tx.source,"g");function uue(t){return function(){return t}}function cue(t){return function(e){return t(e)+""}}function fue(t,e){var n=tx.lastIndex=lS.lastIndex=0,r,i,o,s=-1,l=[],c=[];for(t=t+"",e=e+"";(r=tx.exec(t))&&(i=lS.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),l[s]?l[s]+=o:l[++s]=o),(r=r[0])===(i=i[0])?l[s]?l[s]+=i:l[++s]=i:(l[++s]=null,c.push({i:s,x:k_(r,i)})),n=lS.lastIndex;return n<e.length&&(o=e.slice(n),l[s]?l[s]+=o:l[++s]=o),l.length<2?c[0]?cue(c[0].x):uue(e):(e=c.length,function(f){for(var h=0,g;h<e;++h)l[(g=c[h]).i]=g.x(f);return l.join("")})}function Fd(t,e){var n=typeof e,r;return e==null||n==="boolean"?iR(e):(n==="number"?k_:n==="string"?(r=Rm(e))?(e=r,lL):fue:e instanceof Rm?lL:e instanceof Date?aue:oue(e)?iue:Array.isArray(e)?sue:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?lue:k_)(t,e)}function oR(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function due(t,e){e===void 0&&(e=t,t=Fd);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(s){var l=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return o[l](s-l)}}function hue(t){return function(){return t}}function O_(t){return+t}var uL=[0,1];function $r(t){return t}function nx(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:hue(isNaN(e)?NaN:.5)}function pue(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function mue(t,e,n){var r=t[0],i=t[1],o=e[0],s=e[1];return i<r?(r=nx(i,r),o=n(s,o)):(r=nx(r,i),o=n(o,s)),function(l){return o(r(l))}}function gue(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=nx(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(l){var c=lg(t,l,1,r)-1;return o[c](i[c](l))}}function cg(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function aT(){var t=uL,e=uL,n=Fd,r,i,o,s=$r,l,c,f;function h(){var v=Math.min(t.length,e.length);return s!==$r&&(s=pue(t[0],t[v-1])),l=v>2?gue:mue,c=f=null,g}function g(v){return v==null||isNaN(v=+v)?o:(c||(c=l(t.map(r),e,n)))(r(s(v)))}return g.invert=function(v){return s(i((f||(f=l(e,t.map(r),k_)))(v)))},g.domain=function(v){return arguments.length?(t=Array.from(v,O_),h()):t.slice()},g.range=function(v){return arguments.length?(e=Array.from(v),h()):e.slice()},g.rangeRound=function(v){return e=Array.from(v),n=oR,h()},g.clamp=function(v){return arguments.length?(s=v?!0:$r,h()):s!==$r},g.interpolate=function(v){return arguments.length?(n=v,h()):n},g.unknown=function(v){return arguments.length?(o=v,g):o},function(v,E){return r=v,i=E,h()}}function sR(){return aT()($r,$r)}function yue(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function L_(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function pd(t){return t=L_(Math.abs(t)),t?t[1]:NaN}function vue(t,e){return function(n,r){for(var i=n.length,o=[],s=0,l=t[0],c=0;i>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),o.push(n.substring(i-=l,i+l)),!((c+=l+1)>r));)l=t[s=(s+1)%t.length];return o.reverse().join(e)}}function _ue(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Tue=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Pm(t){if(!(e=Tue.exec(t)))throw new Error("invalid format: "+t);var e;return new aR({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Pm.prototype=aR.prototype;function aR(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}aR.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Eue(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var X5;function wue(t,e){var n=L_(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(X5=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+L_(t,Math.max(0,e+o-1))[0]}function cL(t,e){var n=L_(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const fL={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:yue,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>cL(t*100,e),r:cL,s:wue,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function dL(t){return t}var hL=Array.prototype.map,pL=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function bue(t){var e=t.grouping===void 0||t.thousands===void 0?dL:vue(hL.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?dL:_ue(hL.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function f(g){g=Pm(g);var v=g.fill,E=g.align,b=g.sign,S=g.symbol,A=g.zero,C=g.width,D=g.comma,k=g.precision,q=g.trim,$=g.type;$==="n"?(D=!0,$="g"):fL[$]||(k===void 0&&(k=12),q=!0,$="g"),(A||v==="0"&&E==="=")&&(A=!0,v="0",E="=");var H=S==="$"?n:S==="#"&&/[boxX]/.test($)?"0"+$.toLowerCase():"",M=S==="$"?r:/[%p]/.test($)?s:"",O=fL[$],L=/[defgprs%]/.test($);k=k===void 0?6:/[gprs]/.test($)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function F(V){var G=H,z=M,Se,Re,te;if($==="c")z=O(V)+z,V="";else{V=+V;var me=V<0||1/V<0;if(V=isNaN(V)?c:O(Math.abs(V),k),q&&(V=Eue(V)),me&&+V==0&&b!=="+"&&(me=!1),G=(me?b==="("?b:l:b==="-"||b==="("?"":b)+G,z=($==="s"?pL[8+X5/3]:"")+z+(me&&b==="("?")":""),L){for(Se=-1,Re=V.length;++Se<Re;)if(te=V.charCodeAt(Se),48>te||te>57){z=(te===46?i+V.slice(Se+1):V.slice(Se))+z,V=V.slice(0,Se);break}}}D&&!A&&(V=e(V,1/0));var be=G.length+V.length+z.length,Oe=be<C?new Array(C-be+1).join(v):"";switch(D&&A&&(V=e(Oe+V,Oe.length?C-z.length:1/0),Oe=""),E){case"<":V=G+V+z+Oe;break;case"=":V=G+Oe+V+z;break;case"^":V=Oe.slice(0,be=Oe.length>>1)+G+V+z+Oe.slice(be);break;default:V=Oe+G+V+z;break}return o(V)}return F.toString=function(){return g+""},F}function h(g,v){var E=f((g=Pm(g),g.type="f",g)),b=Math.max(-8,Math.min(8,Math.floor(pd(v)/3)))*3,S=Math.pow(10,-b),A=pL[8+b/3];return function(C){return E(S*C)+A}}return{format:f,formatPrefix:h}}var fv,lR,Z5;Sue({thousands:",",grouping:[3],currency:["$",""]});function Sue(t){return fv=bue(t),lR=fv.format,Z5=fv.formatPrefix,fv}function Aue(t){return Math.max(0,-pd(Math.abs(t)))}function xue(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(pd(e)/3)))*3-pd(Math.abs(t)))}function Cue(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,pd(e)-pd(t))+1}function e$(t,e,n,r){var i=XA(t,e,n),o;switch(r=Pm(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=xue(i,s))&&(r.precision=o),Z5(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=Cue(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=Aue(i))&&(r.precision=o-(r.type==="%")*2);break}}return lR(r)}function Vl(t){var e=t.domain;return t.ticks=function(n){var r=e();return JA(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return e$(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,s=r[i],l=r[o],c,f,h=10;for(l<s&&(f=s,s=l,l=f,f=i,i=o,o=f);h-- >0;){if(f=QA(s,l,n),f===c)return r[i]=s,r[o]=l,e(r);if(f>0)s=Math.floor(s/f)*f,l=Math.ceil(l/f)*f;else if(f<0)s=Math.ceil(s*f)/f,l=Math.floor(l*f)/f;else break;c=f}return t},t}function t$(){var t=sR();return t.copy=function(){return cg(t,t$())},eo.apply(t,arguments),Vl(t)}function n$(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,O_),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return n$(t).unknown(e)},t=arguments.length?Array.from(t,O_):[0,1],Vl(n)}function r$(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],o=t[r],s;return o<i&&(s=n,n=r,r=s,s=i,i=o,o=s),t[n]=e.floor(i),t[r]=e.ceil(o),t}function mL(t){return Math.log(t)}function gL(t){return Math.exp(t)}function Iue(t){return-Math.log(-t)}function Rue(t){return-Math.exp(-t)}function Pue(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Nue(t){return t===10?Pue:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Mue(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function yL(t){return(e,n)=>-t(-e,n)}function uR(t){const e=t(mL,gL),n=e.domain;let r=10,i,o;function s(){return i=Mue(r),o=Nue(r),n()[0]<0?(i=yL(i),o=yL(o),t(Iue,Rue)):t(mL,gL),e}return e.base=function(l){return arguments.length?(r=+l,s()):r},e.domain=function(l){return arguments.length?(n(l),s()):n()},e.ticks=l=>{const c=n();let f=c[0],h=c[c.length-1];const g=h<f;g&&([f,h]=[h,f]);let v=i(f),E=i(h),b,S;const A=l==null?10:+l;let C=[];if(!(r%1)&&E-v<A){if(v=Math.floor(v),E=Math.ceil(E),f>0){for(;v<=E;++v)for(b=1;b<r;++b)if(S=v<0?b/o(-v):b*o(v),!(S<f)){if(S>h)break;C.push(S)}}else for(;v<=E;++v)for(b=r-1;b>=1;--b)if(S=v>0?b/o(-v):b*o(v),!(S<f)){if(S>h)break;C.push(S)}C.length*2<A&&(C=JA(f,h,A))}else C=JA(v,E,Math.min(E-v,A)).map(o);return g?C.reverse():C},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=Pm(c)).precision==null&&(c.trim=!0),c=lR(c)),l===1/0)return c;const f=Math.max(1,r*l/e.ticks().length);return h=>{let g=h/o(Math.round(i(h)));return g*r<r-.5&&(g*=r),g<=f?c(h):""}},e.nice=()=>n(r$(n(),{floor:l=>o(Math.floor(i(l))),ceil:l=>o(Math.ceil(i(l)))})),e}function i$(){const t=uR(aT()).domain([1,10]);return t.copy=()=>cg(t,i$()).base(t.base()),eo.apply(t,arguments),t}function vL(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function _L(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function cR(t){var e=1,n=t(vL(e),_L(e));return n.constant=function(r){return arguments.length?t(vL(e=+r),_L(e)):e},Vl(n)}function o$(){var t=cR(aT());return t.copy=function(){return cg(t,o$()).constant(t.constant())},eo.apply(t,arguments)}function TL(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Due(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function kue(t){return t<0?-t*t:t*t}function fR(t){var e=t($r,$r),n=1;function r(){return n===1?t($r,$r):n===.5?t(Due,kue):t(TL(n),TL(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Vl(e)}function dR(){var t=fR(aT());return t.copy=function(){return cg(t,dR()).exponent(t.exponent())},eo.apply(t,arguments),t}function Oue(){return dR.apply(null,arguments).exponent(.5)}function EL(t){return Math.sign(t)*t*t}function Lue(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function s$(){var t=sR(),e=[0,1],n=!1,r;function i(o){var s=Lue(t(o));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(o){return t.invert(EL(o))},i.domain=function(o){return arguments.length?(t.domain(o),i):t.domain()},i.range=function(o){return arguments.length?(t.range((e=Array.from(o,O_)).map(EL)),i):e.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(n=!!o,i):n},i.clamp=function(o){return arguments.length?(t.clamp(o),i):t.clamp()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return s$(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},eo.apply(i,arguments),Vl(i)}function a$(){var t=[],e=[],n=[],r;function i(){var s=0,l=Math.max(1,e.length);for(n=new Array(l-1);++s<l;)n[s-1]=Ble(t,s/l);return o}function o(s){return s==null||isNaN(s=+s)?r:e[lg(n,s)]}return o.invertExtent=function(s){var l=e.indexOf(s);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},o.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let l of s)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(hl),i()},o.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return a$().domain(t).range(e).unknown(r)},eo.apply(o,arguments)}function l$(){var t=0,e=1,n=1,r=[.5],i=[0,1],o;function s(c){return c!=null&&c<=c?i[lg(r,c,0,n)]:o}function l(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return s}return s.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},s.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,l()):i.slice()},s.invertExtent=function(c){var f=i.indexOf(c);return f<0?[NaN,NaN]:f<1?[t,r[0]]:f>=n?[r[n-1],e]:[r[f-1],r[f]]},s.unknown=function(c){return arguments.length&&(o=c),s},s.thresholds=function(){return r.slice()},s.copy=function(){return l$().domain([t,e]).range(i).unknown(o)},eo.apply(Vl(s),arguments)}function u$(){var t=[.5],e=[0,1],n,r=1;function i(o){return o!=null&&o<=o?e[lg(t,o,0,r)]:n}return i.domain=function(o){return arguments.length?(t=Array.from(o),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(o){return arguments.length?(e=Array.from(o),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(o){var s=e.indexOf(o);return[t[s-1],t[s]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return u$().domain(t).range(e).unknown(n)},eo.apply(i,arguments)}const uS=new Date,cS=new Date;function Hn(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const s=i(o),l=i.ceil(o);return o-s<l-o?s:l},i.offset=(o,s)=>(e(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,l)=>{const c=[];if(o=i.ceil(o),l=l==null?1:Math.floor(l),!(o<s)||!(l>0))return c;let f;do c.push(f=new Date(+o)),e(o,l),t(o);while(f<o&&o<s);return c},i.filter=o=>Hn(s=>{if(s>=s)for(;t(s),!o(s);)s.setTime(s-1)},(s,l)=>{if(s>=s)if(l<0)for(;++l<=0;)for(;e(s,-1),!o(s););else for(;--l>=0;)for(;e(s,1),!o(s););}),n&&(i.count=(o,s)=>(uS.setTime(+o),cS.setTime(+s),t(uS),t(cS),Math.floor(n(uS,cS))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?s=>r(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const V_=Hn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);V_.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Hn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):V_);V_.range;const $s=1e3,Gi=$s*60,zs=Gi*60,ra=zs*24,hR=ra*7,wL=ra*30,fS=ra*365,Vu=Hn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*$s)},(t,e)=>(e-t)/$s,t=>t.getUTCSeconds());Vu.range;const pR=Hn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*$s)},(t,e)=>{t.setTime(+t+e*Gi)},(t,e)=>(e-t)/Gi,t=>t.getMinutes());pR.range;const mR=Hn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Gi)},(t,e)=>(e-t)/Gi,t=>t.getUTCMinutes());mR.range;const gR=Hn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*$s-t.getMinutes()*Gi)},(t,e)=>{t.setTime(+t+e*zs)},(t,e)=>(e-t)/zs,t=>t.getHours());gR.range;const yR=Hn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*zs)},(t,e)=>(e-t)/zs,t=>t.getUTCHours());yR.range;const fg=Hn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Gi)/ra,t=>t.getDate()-1);fg.range;const lT=Hn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ra,t=>t.getUTCDate()-1);lT.range;const c$=Hn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ra,t=>Math.floor(t/ra));c$.range;function gc(t){return Hn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Gi)/hR)}const uT=gc(0),U_=gc(1),Vue=gc(2),Uue=gc(3),md=gc(4),Fue=gc(5),Bue=gc(6);uT.range;U_.range;Vue.range;Uue.range;md.range;Fue.range;Bue.range;function yc(t){return Hn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/hR)}const cT=yc(0),F_=yc(1),que=yc(2),$ue=yc(3),gd=yc(4),zue=yc(5),Hue=yc(6);cT.range;F_.range;que.range;$ue.range;gd.range;zue.range;Hue.range;const vR=Hn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());vR.range;const _R=Hn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());_R.range;const ia=Hn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());ia.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Hn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});ia.range;const oa=Hn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());oa.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Hn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});oa.range;function f$(t,e,n,r,i,o){const s=[[Vu,1,$s],[Vu,5,5*$s],[Vu,15,15*$s],[Vu,30,30*$s],[o,1,Gi],[o,5,5*Gi],[o,15,15*Gi],[o,30,30*Gi],[i,1,zs],[i,3,3*zs],[i,6,6*zs],[i,12,12*zs],[r,1,ra],[r,2,2*ra],[n,1,hR],[e,1,wL],[e,3,3*wL],[t,1,fS]];function l(f,h,g){const v=h<f;v&&([f,h]=[h,f]);const E=g&&typeof g.range=="function"?g:c(f,h,g),b=E?E.range(f,+h+1):[];return v?b.reverse():b}function c(f,h,g){const v=Math.abs(h-f)/g,E=eR(([,,A])=>A).right(s,v);if(E===s.length)return t.every(XA(f/fS,h/fS,g));if(E===0)return V_.every(Math.max(XA(f,h,g),1));const[b,S]=s[v/s[E-1][2]<s[E][2]/v?E-1:E];return b.every(S)}return[l,c]}const[Gue,jue]=f$(oa,_R,cT,c$,yR,mR),[Kue,Wue]=f$(ia,vR,uT,fg,gR,pR);function dS(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function hS(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function gp(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Yue(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,s=t.shortDays,l=t.months,c=t.shortMonths,f=yp(i),h=vp(i),g=yp(o),v=vp(o),E=yp(s),b=vp(s),S=yp(l),A=vp(l),C=yp(c),D=vp(c),k={a:me,A:be,b:Oe,B:K,c:null,d:IL,e:IL,f:vce,g:Ice,G:Pce,H:mce,I:gce,j:yce,L:d$,m:_ce,M:Tce,p:le,q:ae,Q:NL,s:ML,S:Ece,u:wce,U:bce,V:Sce,w:Ace,W:xce,x:null,X:null,y:Cce,Y:Rce,Z:Nce,"%":PL},q={a:de,A:Le,b:Be,B:qe,c:null,d:RL,e:RL,f:Oce,g:Gce,G:Kce,H:Mce,I:Dce,j:kce,L:p$,m:Lce,M:Vce,p:hn,q:wt,Q:NL,s:ML,S:Uce,u:Fce,U:Bce,V:qce,w:$ce,W:zce,x:null,X:null,y:Hce,Y:jce,Z:Wce,"%":PL},$={a:F,A:V,b:G,B:z,c:Se,d:xL,e:xL,f:fce,g:AL,G:SL,H:CL,I:CL,j:ace,L:cce,m:sce,M:lce,p:L,q:oce,Q:hce,s:pce,S:uce,u:ece,U:tce,V:nce,w:Zue,W:rce,x:Re,X:te,y:AL,Y:SL,Z:ice,"%":dce};k.x=H(n,k),k.X=H(r,k),k.c=H(e,k),q.x=H(n,q),q.X=H(r,q),q.c=H(e,q);function H(xe,je){return function(Ye){var ye=[],jt=-1,tt=0,Tn=xe.length,Cn,ln,_a;for(Ye instanceof Date||(Ye=new Date(+Ye));++jt<Tn;)xe.charCodeAt(jt)===37&&(ye.push(xe.slice(tt,jt)),(ln=bL[Cn=xe.charAt(++jt)])!=null?Cn=xe.charAt(++jt):ln=Cn==="e"?" ":"0",(_a=je[Cn])&&(Cn=_a(Ye,ln)),ye.push(Cn),tt=jt+1);return ye.push(xe.slice(tt,jt)),ye.join("")}}function M(xe,je){return function(Ye){var ye=gp(1900,void 0,1),jt=O(ye,xe,Ye+="",0),tt,Tn;if(jt!=Ye.length)return null;if("Q"in ye)return new Date(ye.Q);if("s"in ye)return new Date(ye.s*1e3+("L"in ye?ye.L:0));if(je&&!("Z"in ye)&&(ye.Z=0),"p"in ye&&(ye.H=ye.H%12+ye.p*12),ye.m===void 0&&(ye.m="q"in ye?ye.q:0),"V"in ye){if(ye.V<1||ye.V>53)return null;"w"in ye||(ye.w=1),"Z"in ye?(tt=hS(gp(ye.y,0,1)),Tn=tt.getUTCDay(),tt=Tn>4||Tn===0?F_.ceil(tt):F_(tt),tt=lT.offset(tt,(ye.V-1)*7),ye.y=tt.getUTCFullYear(),ye.m=tt.getUTCMonth(),ye.d=tt.getUTCDate()+(ye.w+6)%7):(tt=dS(gp(ye.y,0,1)),Tn=tt.getDay(),tt=Tn>4||Tn===0?U_.ceil(tt):U_(tt),tt=fg.offset(tt,(ye.V-1)*7),ye.y=tt.getFullYear(),ye.m=tt.getMonth(),ye.d=tt.getDate()+(ye.w+6)%7)}else("W"in ye||"U"in ye)&&("w"in ye||(ye.w="u"in ye?ye.u%7:"W"in ye?1:0),Tn="Z"in ye?hS(gp(ye.y,0,1)).getUTCDay():dS(gp(ye.y,0,1)).getDay(),ye.m=0,ye.d="W"in ye?(ye.w+6)%7+ye.W*7-(Tn+5)%7:ye.w+ye.U*7-(Tn+6)%7);return"Z"in ye?(ye.H+=ye.Z/100|0,ye.M+=ye.Z%100,hS(ye)):dS(ye)}}function O(xe,je,Ye,ye){for(var jt=0,tt=je.length,Tn=Ye.length,Cn,ln;jt<tt;){if(ye>=Tn)return-1;if(Cn=je.charCodeAt(jt++),Cn===37){if(Cn=je.charAt(jt++),ln=$[Cn in bL?je.charAt(jt++):Cn],!ln||(ye=ln(xe,Ye,ye))<0)return-1}else if(Cn!=Ye.charCodeAt(ye++))return-1}return ye}function L(xe,je,Ye){var ye=f.exec(je.slice(Ye));return ye?(xe.p=h.get(ye[0].toLowerCase()),Ye+ye[0].length):-1}function F(xe,je,Ye){var ye=E.exec(je.slice(Ye));return ye?(xe.w=b.get(ye[0].toLowerCase()),Ye+ye[0].length):-1}function V(xe,je,Ye){var ye=g.exec(je.slice(Ye));return ye?(xe.w=v.get(ye[0].toLowerCase()),Ye+ye[0].length):-1}function G(xe,je,Ye){var ye=C.exec(je.slice(Ye));return ye?(xe.m=D.get(ye[0].toLowerCase()),Ye+ye[0].length):-1}function z(xe,je,Ye){var ye=S.exec(je.slice(Ye));return ye?(xe.m=A.get(ye[0].toLowerCase()),Ye+ye[0].length):-1}function Se(xe,je,Ye){return O(xe,e,je,Ye)}function Re(xe,je,Ye){return O(xe,n,je,Ye)}function te(xe,je,Ye){return O(xe,r,je,Ye)}function me(xe){return s[xe.getDay()]}function be(xe){return o[xe.getDay()]}function Oe(xe){return c[xe.getMonth()]}function K(xe){return l[xe.getMonth()]}function le(xe){return i[+(xe.getHours()>=12)]}function ae(xe){return 1+~~(xe.getMonth()/3)}function de(xe){return s[xe.getUTCDay()]}function Le(xe){return o[xe.getUTCDay()]}function Be(xe){return c[xe.getUTCMonth()]}function qe(xe){return l[xe.getUTCMonth()]}function hn(xe){return i[+(xe.getUTCHours()>=12)]}function wt(xe){return 1+~~(xe.getUTCMonth()/3)}return{format:function(xe){var je=H(xe+="",k);return je.toString=function(){return xe},je},parse:function(xe){var je=M(xe+="",!1);return je.toString=function(){return xe},je},utcFormat:function(xe){var je=H(xe+="",q);return je.toString=function(){return xe},je},utcParse:function(xe){var je=M(xe+="",!0);return je.toString=function(){return xe},je}}}var bL={"-":"",_:" ",0:"0"},sr=/^\s*\d+/,Jue=/^%/,Que=/[\\^$*+?|[\]().{}]/g;function vt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Xue(t){return t.replace(Que,"\\$&")}function yp(t){return new RegExp("^(?:"+t.map(Xue).join("|")+")","i")}function vp(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Zue(t,e,n){var r=sr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function ece(t,e,n){var r=sr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function tce(t,e,n){var r=sr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function nce(t,e,n){var r=sr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function rce(t,e,n){var r=sr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function SL(t,e,n){var r=sr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function AL(t,e,n){var r=sr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function ice(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function oce(t,e,n){var r=sr.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function sce(t,e,n){var r=sr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function xL(t,e,n){var r=sr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function ace(t,e,n){var r=sr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function CL(t,e,n){var r=sr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function lce(t,e,n){var r=sr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function uce(t,e,n){var r=sr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function cce(t,e,n){var r=sr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function fce(t,e,n){var r=sr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function dce(t,e,n){var r=Jue.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function hce(t,e,n){var r=sr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function pce(t,e,n){var r=sr.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function IL(t,e){return vt(t.getDate(),e,2)}function mce(t,e){return vt(t.getHours(),e,2)}function gce(t,e){return vt(t.getHours()%12||12,e,2)}function yce(t,e){return vt(1+fg.count(ia(t),t),e,3)}function d$(t,e){return vt(t.getMilliseconds(),e,3)}function vce(t,e){return d$(t,e)+"000"}function _ce(t,e){return vt(t.getMonth()+1,e,2)}function Tce(t,e){return vt(t.getMinutes(),e,2)}function Ece(t,e){return vt(t.getSeconds(),e,2)}function wce(t){var e=t.getDay();return e===0?7:e}function bce(t,e){return vt(uT.count(ia(t)-1,t),e,2)}function h$(t){var e=t.getDay();return e>=4||e===0?md(t):md.ceil(t)}function Sce(t,e){return t=h$(t),vt(md.count(ia(t),t)+(ia(t).getDay()===4),e,2)}function Ace(t){return t.getDay()}function xce(t,e){return vt(U_.count(ia(t)-1,t),e,2)}function Cce(t,e){return vt(t.getFullYear()%100,e,2)}function Ice(t,e){return t=h$(t),vt(t.getFullYear()%100,e,2)}function Rce(t,e){return vt(t.getFullYear()%1e4,e,4)}function Pce(t,e){var n=t.getDay();return t=n>=4||n===0?md(t):md.ceil(t),vt(t.getFullYear()%1e4,e,4)}function Nce(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+vt(e/60|0,"0",2)+vt(e%60,"0",2)}function RL(t,e){return vt(t.getUTCDate(),e,2)}function Mce(t,e){return vt(t.getUTCHours(),e,2)}function Dce(t,e){return vt(t.getUTCHours()%12||12,e,2)}function kce(t,e){return vt(1+lT.count(oa(t),t),e,3)}function p$(t,e){return vt(t.getUTCMilliseconds(),e,3)}function Oce(t,e){return p$(t,e)+"000"}function Lce(t,e){return vt(t.getUTCMonth()+1,e,2)}function Vce(t,e){return vt(t.getUTCMinutes(),e,2)}function Uce(t,e){return vt(t.getUTCSeconds(),e,2)}function Fce(t){var e=t.getUTCDay();return e===0?7:e}function Bce(t,e){return vt(cT.count(oa(t)-1,t),e,2)}function m$(t){var e=t.getUTCDay();return e>=4||e===0?gd(t):gd.ceil(t)}function qce(t,e){return t=m$(t),vt(gd.count(oa(t),t)+(oa(t).getUTCDay()===4),e,2)}function $ce(t){return t.getUTCDay()}function zce(t,e){return vt(F_.count(oa(t)-1,t),e,2)}function Hce(t,e){return vt(t.getUTCFullYear()%100,e,2)}function Gce(t,e){return t=m$(t),vt(t.getUTCFullYear()%100,e,2)}function jce(t,e){return vt(t.getUTCFullYear()%1e4,e,4)}function Kce(t,e){var n=t.getUTCDay();return t=n>=4||n===0?gd(t):gd.ceil(t),vt(t.getUTCFullYear()%1e4,e,4)}function Wce(){return"+0000"}function PL(){return"%"}function NL(t){return+t}function ML(t){return Math.floor(+t/1e3)}var _f,g$,y$;Yce({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Yce(t){return _f=Yue(t),g$=_f.format,_f.parse,y$=_f.utcFormat,_f.utcParse,_f}function Jce(t){return new Date(t)}function Qce(t){return t instanceof Date?+t:+new Date(+t)}function TR(t,e,n,r,i,o,s,l,c,f){var h=sR(),g=h.invert,v=h.domain,E=f(".%L"),b=f(":%S"),S=f("%I:%M"),A=f("%I %p"),C=f("%a %d"),D=f("%b %d"),k=f("%B"),q=f("%Y");function $(H){return(c(H)<H?E:l(H)<H?b:s(H)<H?S:o(H)<H?A:r(H)<H?i(H)<H?C:D:n(H)<H?k:q)(H)}return h.invert=function(H){return new Date(g(H))},h.domain=function(H){return arguments.length?v(Array.from(H,Qce)):v().map(Jce)},h.ticks=function(H){var M=v();return t(M[0],M[M.length-1],H??10)},h.tickFormat=function(H,M){return M==null?$:f(M)},h.nice=function(H){var M=v();return(!H||typeof H.range!="function")&&(H=e(M[0],M[M.length-1],H??10)),H?v(r$(M,H)):h},h.copy=function(){return cg(h,TR(t,e,n,r,i,o,s,l,c,f))},h}function Xce(){return eo.apply(TR(Kue,Wue,ia,vR,uT,fg,gR,pR,Vu,g$).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Zce(){return eo.apply(TR(Gue,jue,oa,_R,cT,lT,yR,mR,Vu,y$).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function fT(){var t=0,e=1,n,r,i,o,s=$r,l=!1,c;function f(g){return g==null||isNaN(g=+g)?c:s(i===0?.5:(g=(o(g)-n)*i,l?Math.max(0,Math.min(1,g)):g))}f.domain=function(g){return arguments.length?([t,e]=g,n=o(t=+t),r=o(e=+e),i=n===r?0:1/(r-n),f):[t,e]},f.clamp=function(g){return arguments.length?(l=!!g,f):l},f.interpolator=function(g){return arguments.length?(s=g,f):s};function h(g){return function(v){var E,b;return arguments.length?([E,b]=v,s=g(E,b),f):[s(0),s(1)]}}return f.range=h(Fd),f.rangeRound=h(oR),f.unknown=function(g){return arguments.length?(c=g,f):c},function(g){return o=g,n=g(t),r=g(e),i=n===r?0:1/(r-n),f}}function Ul(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function v$(){var t=Vl(fT()($r));return t.copy=function(){return Ul(t,v$())},ga.apply(t,arguments)}function _$(){var t=uR(fT()).domain([1,10]);return t.copy=function(){return Ul(t,_$()).base(t.base())},ga.apply(t,arguments)}function T$(){var t=cR(fT());return t.copy=function(){return Ul(t,T$()).constant(t.constant())},ga.apply(t,arguments)}function ER(){var t=fR(fT());return t.copy=function(){return Ul(t,ER()).exponent(t.exponent())},ga.apply(t,arguments)}function efe(){return ER.apply(null,arguments).exponent(.5)}function E$(){var t=[],e=$r;function n(r){if(r!=null&&!isNaN(r=+r))return e((lg(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(hl),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,o)=>Fle(t,o/r))},n.copy=function(){return E$(e).domain(t)},ga.apply(n,arguments)}function dT(){var t=0,e=.5,n=1,r=1,i,o,s,l,c,f=$r,h,g=!1,v;function E(S){return isNaN(S=+S)?v:(S=.5+((S=+h(S))-o)*(r*S<r*o?l:c),f(g?Math.max(0,Math.min(1,S)):S))}E.domain=function(S){return arguments.length?([t,e,n]=S,i=h(t=+t),o=h(e=+e),s=h(n=+n),l=i===o?0:.5/(o-i),c=o===s?0:.5/(s-o),r=o<i?-1:1,E):[t,e,n]},E.clamp=function(S){return arguments.length?(g=!!S,E):g},E.interpolator=function(S){return arguments.length?(f=S,E):f};function b(S){return function(A){var C,D,k;return arguments.length?([C,D,k]=A,f=due(S,[C,D,k]),E):[f(0),f(.5),f(1)]}}return E.range=b(Fd),E.rangeRound=b(oR),E.unknown=function(S){return arguments.length?(v=S,E):v},function(S){return h=S,i=S(t),o=S(e),s=S(n),l=i===o?0:.5/(o-i),c=o===s?0:.5/(s-o),r=o<i?-1:1,E}}function w$(){var t=Vl(dT()($r));return t.copy=function(){return Ul(t,w$())},ga.apply(t,arguments)}function b$(){var t=uR(dT()).domain([.1,1,10]);return t.copy=function(){return Ul(t,b$()).base(t.base())},ga.apply(t,arguments)}function S$(){var t=cR(dT());return t.copy=function(){return Ul(t,S$()).constant(t.constant())},ga.apply(t,arguments)}function wR(){var t=fR(dT());return t.copy=function(){return Ul(t,wR()).exponent(t.exponent())},ga.apply(t,arguments)}function tfe(){return wR.apply(null,arguments).exponent(.5)}const Np=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:nR,scaleDiverging:w$,scaleDivergingLog:b$,scaleDivergingPow:wR,scaleDivergingSqrt:tfe,scaleDivergingSymlog:S$,scaleIdentity:n$,scaleImplicit:ZA,scaleLinear:t$,scaleLog:i$,scaleOrdinal:tR,scalePoint:$le,scalePow:dR,scaleQuantile:a$,scaleQuantize:l$,scaleRadial:s$,scaleSequential:v$,scaleSequentialLog:_$,scaleSequentialPow:ER,scaleSequentialQuantile:E$,scaleSequentialSqrt:efe,scaleSequentialSymlog:T$,scaleSqrt:Oue,scaleSymlog:o$,scaleThreshold:u$,scaleTime:Xce,scaleUtc:Zce,tickFormat:e$},Symbol.toStringTag,{value:"Module"}));var Fl=t=>t.chartData,nfe=se([Fl],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),bR=(t,e,n,r)=>r?nfe(t):Fl(t);function yd(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(xi(e)&&xi(n))return!0}return!1}function DL(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function rfe(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,o;if(xi(n))i=n;else if(typeof n=="function")return;if(xi(r))o=r;else if(typeof r=="function")return;var s=[i,o];if(yd(s))return s}}function ife(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(yd(r))return DL(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,o]=t,s,l;if(i==="auto")e!=null&&(s=Math.min(...e));else if(We(i))s=i;else if(typeof i=="function")try{e!=null&&(s=i(e==null?void 0:e[0]))}catch{}else if(typeof i=="string"&&A2.test(i)){var c=A2.exec(i);if(c==null||e==null)s=void 0;else{var f=+c[1];s=e[0]-f}}else s=e==null?void 0:e[0];if(o==="auto")e!=null&&(l=Math.max(...e));else if(We(o))l=o;else if(typeof o=="function")try{e!=null&&(l=o(e==null?void 0:e[1]))}catch{}else if(typeof o=="string"&&x2.test(o)){var h=x2.exec(o);if(h==null||e==null)l=void 0;else{var g=+h[1];l=e[1]+g}}else l=e==null?void 0:e[1];var v=[s,l];if(yd(v))return e==null?v:DL(v,e,n)}}}var Bd=1e9,ofe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},AR,sn=!0,Zi="[DecimalError] ",Gu=Zi+"Invalid argument: ",SR=Zi+"Exponent out of range: ",qd=Math.floor,Au=Math.pow,sfe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,yi,Xn=1e7,Yt=7,A$=9007199254740991,B_=qd(A$/Yt),Pe={};Pe.absoluteValue=Pe.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Pe.comparedTo=Pe.cmp=function(t){var e,n,r,i,o=this;if(t=new o.constructor(t),o.s!==t.s)return o.s||-t.s;if(o.e!==t.e)return o.e>t.e^o.s<0?1:-1;for(r=o.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(o.d[e]!==t.d[e])return o.d[e]>t.d[e]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1};Pe.decimalPlaces=Pe.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Yt;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Pe.dividedBy=Pe.div=function(t){return Ws(this,new this.constructor(t))};Pe.dividedToIntegerBy=Pe.idiv=function(t){var e=this,n=e.constructor;return qt(Ws(e,new n(t),0,1),n.precision)};Pe.equals=Pe.eq=function(t){return!this.cmp(t)};Pe.exponent=function(){return On(this)};Pe.greaterThan=Pe.gt=function(t){return this.cmp(t)>0};Pe.greaterThanOrEqualTo=Pe.gte=function(t){return this.cmp(t)>=0};Pe.isInteger=Pe.isint=function(){return this.e>this.d.length-2};Pe.isNegative=Pe.isneg=function(){return this.s<0};Pe.isPositive=Pe.ispos=function(){return this.s>0};Pe.isZero=function(){return this.s===0};Pe.lessThan=Pe.lt=function(t){return this.cmp(t)<0};Pe.lessThanOrEqualTo=Pe.lte=function(t){return this.cmp(t)<1};Pe.logarithm=Pe.log=function(t){var e,n=this,r=n.constructor,i=r.precision,o=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(yi))throw Error(Zi+"NaN");if(n.s<1)throw Error(Zi+(n.s?"NaN":"-Infinity"));return n.eq(yi)?new r(0):(sn=!1,e=Ws(Nm(n,o),Nm(t,o),o),sn=!0,qt(e,i))};Pe.minus=Pe.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?I$(e,t):x$(e,(t.s=-t.s,t))};Pe.modulo=Pe.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Zi+"NaN");return n.s?(sn=!1,e=Ws(n,t,0,1).times(t),sn=!0,n.minus(e)):qt(new r(n),i)};Pe.naturalExponential=Pe.exp=function(){return C$(this)};Pe.naturalLogarithm=Pe.ln=function(){return Nm(this)};Pe.negated=Pe.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Pe.plus=Pe.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?x$(e,t):I$(e,(t.s=-t.s,t))};Pe.precision=Pe.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Gu+t);if(e=On(i)+1,r=i.d.length-1,n=r*Yt+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Pe.squareRoot=Pe.sqrt=function(){var t,e,n,r,i,o,s,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Zi+"NaN")}for(t=On(l),sn=!1,i=Math.sqrt(+l),i==0||i==1/0?(e=es(l.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=qd((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new c(e)):r=new c(i.toString()),n=c.precision,i=s=n+3;;)if(o=r,r=o.plus(Ws(l,o,s+2)).times(.5),es(o.d).slice(0,s)===(e=es(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(qt(o,n+1,0),o.times(o).eq(l)){r=o;break}}else if(e!="9999")break;s+=4}return sn=!0,qt(r,n)};Pe.times=Pe.mul=function(t){var e,n,r,i,o,s,l,c,f,h=this,g=h.constructor,v=h.d,E=(t=new g(t)).d;if(!h.s||!t.s)return new g(0);for(t.s*=h.s,n=h.e+t.e,c=v.length,f=E.length,c<f&&(o=v,v=E,E=o,s=c,c=f,f=s),o=[],s=c+f,r=s;r--;)o.push(0);for(r=f;--r>=0;){for(e=0,i=c+r;i>r;)l=o[i]+E[r]*v[i-r-1]+e,o[i--]=l%Xn|0,e=l/Xn|0;o[i]=(o[i]+e)%Xn|0}for(;!o[--s];)o.pop();return e?++n:o.shift(),t.d=o,t.e=n,sn?qt(t,g.precision):t};Pe.toDecimalPlaces=Pe.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(cs(t,0,Bd),e===void 0?e=r.rounding:cs(e,0,8),qt(n,t+On(n)+1,e))};Pe.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=sc(r,!0):(cs(t,0,Bd),e===void 0?e=i.rounding:cs(e,0,8),r=qt(new i(r),t+1,e),n=sc(r,!0,t+1)),n};Pe.toFixed=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?sc(i):(cs(t,0,Bd),e===void 0?e=o.rounding:cs(e,0,8),r=qt(new o(i),t+On(i)+1,e),n=sc(r.abs(),!1,t+On(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Pe.toInteger=Pe.toint=function(){var t=this,e=t.constructor;return qt(new e(t),On(t)+1,e.rounding)};Pe.toNumber=function(){return+this};Pe.toPower=Pe.pow=function(t){var e,n,r,i,o,s,l=this,c=l.constructor,f=12,h=+(t=new c(t));if(!t.s)return new c(yi);if(l=new c(l),!l.s){if(t.s<1)throw Error(Zi+"Infinity");return l}if(l.eq(yi))return l;if(r=c.precision,t.eq(yi))return qt(l,r);if(e=t.e,n=t.d.length-1,s=e>=n,o=l.s,s){if((n=h<0?-h:h)<=A$){for(i=new c(yi),e=Math.ceil(r/Yt+4),sn=!1;n%2&&(i=i.times(l),OL(i.d,e)),n=qd(n/2),n!==0;)l=l.times(l),OL(l.d,e);return sn=!0,t.s<0?new c(yi).div(i):qt(i,r)}}else if(o<0)throw Error(Zi+"NaN");return o=o<0&&t.d[Math.max(e,n)]&1?-1:1,l.s=1,sn=!1,i=t.times(Nm(l,r+f)),sn=!0,i=C$(i),i.s=o,i};Pe.toPrecision=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?(n=On(i),r=sc(i,n<=o.toExpNeg||n>=o.toExpPos)):(cs(t,1,Bd),e===void 0?e=o.rounding:cs(e,0,8),i=qt(new o(i),t,e),n=On(i),r=sc(i,t<=n||n<=o.toExpNeg,t)),r};Pe.toSignificantDigits=Pe.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(cs(t,1,Bd),e===void 0?e=r.rounding:cs(e,0,8)),qt(new r(n),t,e)};Pe.toString=Pe.valueOf=Pe.val=Pe.toJSON=Pe[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=On(t),n=t.constructor;return sc(t,e<=n.toExpNeg||e>=n.toExpPos)};function x$(t,e){var n,r,i,o,s,l,c,f,h=t.constructor,g=h.precision;if(!t.s||!e.s)return e.s||(e=new h(t)),sn?qt(e,g):e;if(c=t.d,f=e.d,s=t.e,i=e.e,c=c.slice(),o=s-i,o){for(o<0?(r=c,o=-o,l=f.length):(r=f,i=s,l=c.length),s=Math.ceil(g/Yt),l=s>l?s+1:l+1,o>l&&(o=l,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for(l=c.length,o=f.length,l-o<0&&(o=l,r=f,f=c,c=r),n=0;o;)n=(c[--o]=c[o]+f[o]+n)/Xn|0,c[o]%=Xn;for(n&&(c.unshift(n),++i),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=i,sn?qt(e,g):e}function cs(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Gu+t)}function es(t){var e,n,r,i=t.length-1,o="",s=t[0];if(i>0){for(o+=s,e=1;e<i;e++)r=t[e]+"",n=Yt-r.length,n&&(o+=el(n)),o+=r;s=t[e],r=s+"",n=Yt-r.length,n&&(o+=el(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return o+s}var Ws=(function(){function t(r,i){var o,s=0,l=r.length;for(r=r.slice();l--;)o=r[l]*i+s,r[l]=o%Xn|0,s=o/Xn|0;return s&&r.unshift(s),r}function e(r,i,o,s){var l,c;if(o!=s)c=o>s?1:-1;else for(l=c=0;l<o;l++)if(r[l]!=i[l]){c=r[l]>i[l]?1:-1;break}return c}function n(r,i,o){for(var s=0;o--;)r[o]-=s,s=r[o]<i[o]?1:0,r[o]=s*Xn+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,s){var l,c,f,h,g,v,E,b,S,A,C,D,k,q,$,H,M,O,L=r.constructor,F=r.s==i.s?1:-1,V=r.d,G=i.d;if(!r.s)return new L(r);if(!i.s)throw Error(Zi+"Division by zero");for(c=r.e-i.e,M=G.length,$=V.length,E=new L(F),b=E.d=[],f=0;G[f]==(V[f]||0);)++f;if(G[f]>(V[f]||0)&&--c,o==null?D=o=L.precision:s?D=o+(On(r)-On(i))+1:D=o,D<0)return new L(0);if(D=D/Yt+2|0,f=0,M==1)for(h=0,G=G[0],D++;(f<$||h)&&D--;f++)k=h*Xn+(V[f]||0),b[f]=k/G|0,h=k%G|0;else{for(h=Xn/(G[0]+1)|0,h>1&&(G=t(G,h),V=t(V,h),M=G.length,$=V.length),q=M,S=V.slice(0,M),A=S.length;A<M;)S[A++]=0;O=G.slice(),O.unshift(0),H=G[0],G[1]>=Xn/2&&++H;do h=0,l=e(G,S,M,A),l<0?(C=S[0],M!=A&&(C=C*Xn+(S[1]||0)),h=C/H|0,h>1?(h>=Xn&&(h=Xn-1),g=t(G,h),v=g.length,A=S.length,l=e(g,S,v,A),l==1&&(h--,n(g,M<v?O:G,v))):(h==0&&(l=h=1),g=G.slice()),v=g.length,v<A&&g.unshift(0),n(S,g,A),l==-1&&(A=S.length,l=e(G,S,M,A),l<1&&(h++,n(S,M<A?O:G,A))),A=S.length):l===0&&(h++,S=[0]),b[f++]=h,l&&S[0]?S[A++]=V[q]||0:(S=[V[q]],A=1);while((q++<$||S[0]!==void 0)&&D--)}return b[0]||b.shift(),E.e=c,qt(E,s?o+On(E)+1:o)}})();function C$(t,e){var n,r,i,o,s,l,c=0,f=0,h=t.constructor,g=h.precision;if(On(t)>16)throw Error(SR+On(t));if(!t.s)return new h(yi);for(sn=!1,l=g,s=new h(.03125);t.abs().gte(.1);)t=t.times(s),f+=5;for(r=Math.log(Au(2,f))/Math.LN10*2+5|0,l+=r,n=i=o=new h(yi),h.precision=l;;){if(i=qt(i.times(t),l),n=n.times(++c),s=o.plus(Ws(i,n,l)),es(s.d).slice(0,l)===es(o.d).slice(0,l)){for(;f--;)o=qt(o.times(o),l);return h.precision=g,e==null?(sn=!0,qt(o,g)):o}o=s}}function On(t){for(var e=t.e*Yt,n=t.d[0];n>=10;n/=10)e++;return e}function pS(t,e,n){if(e>t.LN10.sd())throw sn=!0,n&&(t.precision=n),Error(Zi+"LN10 precision limit exceeded");return qt(new t(t.LN10),e)}function el(t){for(var e="";t--;)e+="0";return e}function Nm(t,e){var n,r,i,o,s,l,c,f,h,g=1,v=10,E=t,b=E.d,S=E.constructor,A=S.precision;if(E.s<1)throw Error(Zi+(E.s?"NaN":"-Infinity"));if(E.eq(yi))return new S(0);if(e==null?(sn=!1,f=A):f=e,E.eq(10))return e==null&&(sn=!0),pS(S,f);if(f+=v,S.precision=f,n=es(b),r=n.charAt(0),o=On(E),Math.abs(o)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)E=E.times(t),n=es(E.d),r=n.charAt(0),g++;o=On(E),r>1?(E=new S("0."+n),o++):E=new S(r+"."+n.slice(1))}else return c=pS(S,f+2,A).times(o+""),E=Nm(new S(r+"."+n.slice(1)),f-v).plus(c),S.precision=A,e==null?(sn=!0,qt(E,A)):E;for(l=s=E=Ws(E.minus(yi),E.plus(yi),f),h=qt(E.times(E),f),i=3;;){if(s=qt(s.times(h),f),c=l.plus(Ws(s,new S(i),f)),es(c.d).slice(0,f)===es(l.d).slice(0,f))return l=l.times(2),o!==0&&(l=l.plus(pS(S,f+2,A).times(o+""))),l=Ws(l,new S(g),f),S.precision=A,e==null?(sn=!0,qt(l,A)):l;l=c,i+=2}}function kL(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=qd(n/Yt),t.d=[],r=(n+1)%Yt,n<0&&(r+=Yt),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Yt;r<i;)t.d.push(+e.slice(r,r+=Yt));e=e.slice(r),r=Yt-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),sn&&(t.e>B_||t.e<-B_))throw Error(SR+n)}else t.s=0,t.e=0,t.d=[0];return t}function qt(t,e,n){var r,i,o,s,l,c,f,h,g=t.d;for(s=1,o=g[0];o>=10;o/=10)s++;if(r=e-s,r<0)r+=Yt,i=e,f=g[h=0];else{if(h=Math.ceil((r+1)/Yt),o=g.length,h>=o)return t;for(f=o=g[h],s=1;o>=10;o/=10)s++;r%=Yt,i=r-Yt+s}if(n!==void 0&&(o=Au(10,s-i-1),l=f/o%10|0,c=e<0||g[h+1]!==void 0||f%o,c=n<4?(l||c)&&(n==0||n==(t.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(r>0?i>0?f/Au(10,s-i):0:g[h-1])%10&1||n==(t.s<0?8:7))),e<1||!g[0])return c?(o=On(t),g.length=1,e=e-o-1,g[0]=Au(10,(Yt-e%Yt)%Yt),t.e=qd(-e/Yt)||0):(g.length=1,g[0]=t.e=t.s=0),t;if(r==0?(g.length=h,o=1,h--):(g.length=h+1,o=Au(10,Yt-r),g[h]=i>0?(f/Au(10,s-i)%Au(10,i)|0)*o:0),c)for(;;)if(h==0){(g[0]+=o)==Xn&&(g[0]=1,++t.e);break}else{if(g[h]+=o,g[h]!=Xn)break;g[h--]=0,o=1}for(r=g.length;g[--r]===0;)g.pop();if(sn&&(t.e>B_||t.e<-B_))throw Error(SR+On(t));return t}function I$(t,e){var n,r,i,o,s,l,c,f,h,g,v=t.constructor,E=v.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new v(t),sn?qt(e,E):e;if(c=t.d,g=e.d,r=e.e,f=t.e,c=c.slice(),s=f-r,s){for(h=s<0,h?(n=c,s=-s,l=g.length):(n=g,r=f,l=c.length),i=Math.max(Math.ceil(E/Yt),l)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=c.length,l=g.length,h=i<l,h&&(l=i),i=0;i<l;i++)if(c[i]!=g[i]){h=c[i]<g[i];break}s=0}for(h&&(n=c,c=g,g=n,e.s=-e.s),l=c.length,i=g.length-l;i>0;--i)c[l++]=0;for(i=g.length;i>s;){if(c[--i]<g[i]){for(o=i;o&&c[--o]===0;)c[o]=Xn-1;--c[o],c[i]+=Xn}c[i]-=g[i]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,sn?qt(e,E):e):new v(0)}function sc(t,e,n){var r,i=On(t),o=es(t.d),s=o.length;return e?(n&&(r=n-s)>0?o=o.charAt(0)+"."+o.slice(1)+el(r):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+el(-i-1)+o,n&&(r=n-s)>0&&(o+=el(r))):i>=s?(o+=el(i+1-s),n&&(r=n-i-1)>0&&(o=o+"."+el(r))):((r=i+1)<s&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(o+="."),o+=el(r))),t.s<0?"-"+o:o}function OL(t,e){if(t.length>e)return t.length=e,!0}function R$(t){var e,n,r;function i(o){var s=this;if(!(s instanceof i))return new i(o);if(s.constructor=i,o instanceof i){s.s=o.s,s.e=o.e,s.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(Gu+o);if(o>0)s.s=1;else if(o<0)o=-o,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(o===~~o&&o<1e7){s.e=0,s.d=[o];return}return kL(s,o.toString())}else if(typeof o!="string")throw Error(Gu+o);if(o.charCodeAt(0)===45?(o=o.slice(1),s.s=-1):s.s=1,sfe.test(o))kL(s,o);else throw Error(Gu+o)}if(i.prototype=Pe,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=R$,i.config=i.set=afe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function afe(t){if(!t||typeof t!="object")throw Error(Zi+"Object expected");var e,n,r,i=["precision",1,Bd,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(qd(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Gu+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Gu+n+": "+r);return this}var AR=R$(ofe);yi=new AR(1);const Pt=AR;var lfe=t=>t,P$={},N$=t=>t===P$,LL=t=>function e(){return arguments.length===0||arguments.length===1&&N$(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},M$=(t,e)=>t===1?e:LL(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=r.filter(s=>s!==P$).length;return o>=t?e(...r):M$(t-o,LL(function(){for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];var f=r.map(h=>N$(h)?l.shift():h);return e(...f,...l)}))}),hT=t=>M$(t.length,t),rx=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},ufe=hT((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),cfe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return lfe;var i=n.reverse(),o=i[0],s=i.slice(1);return function(){return s.reduce((l,c)=>c(l),o(...arguments))}},ix=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join(""),D$=t=>{var e=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e&&i.every((s,l)=>{var c;return s===((c=e)===null||c===void 0?void 0:c[l])})||(e=i,n=t(...i)),n}};function k$(t){var e;return t===0?e=1:e=Math.floor(new Pt(t).abs().log(10).toNumber())+1,e}function O$(t,e,n){for(var r=new Pt(t),i=0,o=[];r.lt(e)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o}hT((t,e,n)=>{var r=+t,i=+e;return r+n*(i-r)});hT((t,e,n)=>{var r=e-+t;return r=r||1/0,(n-t)/r});hT((t,e,n)=>{var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});var L$=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},V$=(t,e,n)=>{if(t.lte(0))return new Pt(0);var r=k$(t.toNumber()),i=new Pt(10).pow(r),o=t.div(i),s=r!==1?.05:.1,l=new Pt(Math.ceil(o.div(s).toNumber())).add(n).mul(s),c=l.mul(i);return e?new Pt(c.toNumber()):new Pt(Math.ceil(c.toNumber()))},ffe=(t,e,n)=>{var r=new Pt(1),i=new Pt(t);if(!i.isint()&&n){var o=Math.abs(t);o<1?(r=new Pt(10).pow(k$(t)-1),i=new Pt(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new Pt(Math.floor(t)))}else t===0?i=new Pt(Math.floor((e-1)/2)):n||(i=new Pt(Math.floor(t)));var s=Math.floor((e-1)/2),l=cfe(ufe(c=>i.add(new Pt(c-s).mul(r)).toNumber()),rx);return l(0,e)},U$=function(e,n,r,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new Pt(0),tickMin:new Pt(0),tickMax:new Pt(0)};var s=V$(new Pt(n).sub(e).div(r-1),i,o),l;e<=0&&n>=0?l=new Pt(0):(l=new Pt(e).add(n).div(2),l=l.sub(new Pt(l).mod(s)));var c=Math.ceil(l.sub(e).div(s).toNumber()),f=Math.ceil(new Pt(n).sub(l).div(s).toNumber()),h=c+f+1;return h>r?U$(e,n,r,i,o+1):(h<r&&(f=n>0?f+(r-h):f,c=n>0?c:c+(r-h)),{step:s,tickMin:l.sub(new Pt(c).mul(s)),tickMax:l.add(new Pt(f).mul(s))})};function dfe(t){var[e,n]=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(r,2),[s,l]=L$([e,n]);if(s===-1/0||l===1/0){var c=l===1/0?[s,...rx(0,r-1).map(()=>1/0)]:[...rx(0,r-1).map(()=>-1/0),l];return e>n?ix(c):c}if(s===l)return ffe(s,r,i);var{step:f,tickMin:h,tickMax:g}=U$(s,l,o,i,0),v=O$(h,g.add(new Pt(.1).mul(f)),f);return e>n?ix(v):v}function hfe(t,e){var[n,r]=t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,s]=L$([n,r]);if(o===-1/0||s===1/0)return[n,r];if(o===s)return[o];var l=Math.max(e,2),c=V$(new Pt(s).sub(o).div(l-1),i,0),f=[...O$(new Pt(o),new Pt(s),c),s];return i===!1&&(f=f.map(h=>Math.round(h))),n>r?ix(f):f}var pfe=D$(dfe),mfe=D$(hfe),F$=t=>t.rootProps.maxBarSize,gfe=t=>t.rootProps.barGap,B$=t=>t.rootProps.barCategoryGap,yfe=t=>t.rootProps.barSize,pT=t=>t.rootProps.stackOffset,xR=t=>t.options.chartName,CR=t=>t.rootProps.syncId,q$=t=>t.rootProps.syncMethod,IR=t=>t.options.eventEmitter,Us={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},mi={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},mT=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},vfe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Us.angleAxisId,includeHidden:!1,name:void 0,reversed:Us.reversed,scale:Us.scale,tick:Us.tick,tickCount:void 0,ticks:void 0,type:Us.type,unit:void 0},_fe={allowDataOverflow:mi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:mi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:mi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:mi.scale,tick:mi.tick,tickCount:mi.tickCount,ticks:void 0,type:mi.type,unit:void 0},Tfe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Us.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Us.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Us.scale,tick:Us.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},Efe={allowDataOverflow:mi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:mi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:mi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:mi.scale,tick:mi.tick,tickCount:mi.tickCount,ticks:void 0,type:"category",unit:void 0},RR=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?Tfe:vfe,PR=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?Efe:_fe,gT=t=>t.polarOptions,NR=se([pa,ma,or],bse),$$=se([gT,NR],(t,e)=>{if(t!=null)return vo(t.innerRadius,e,0)}),z$=se([gT,NR],(t,e)=>{if(t!=null)return vo(t.outerRadius,e,e*.8)}),wfe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},H$=se([gT],wfe);se([RR,H$],mT);var G$=se([NR,$$,z$],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});se([PR,G$],mT);var j$=se([Dt,gT,$$,z$,pa,ma],(t,e,n,r,i,o)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:s,cy:l,startAngle:c,endAngle:f}=e;return{cx:vo(s,i,i/2),cy:vo(l,o,o/2),innerRadius:n,outerRadius:r,startAngle:c,endAngle:f,clockWise:!1}}}),Ln=(t,e)=>e,yT=(t,e,n)=>n;function MR(t){return t==null?void 0:t.id}var Gn=t=>{var e=Dt(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},$d=t=>t.tooltip.settings.axisId,ar=t=>{var e=Gn(t),n=$d(t);return dg(t,e,n)},K$=se([ar],t=>t==null?void 0:t.dataKey);function W$(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:o}=n,s=new Map;return t.forEach(l=>{var c,f=(c=l.data)!==null&&c!==void 0?c:r;if(!(f==null||f.length===0)){var h=MR(l);f.forEach((g,v)=>{var E=o==null||i?v:String(Hr(g,o,null)),b=Hr(g,l.dataKey,0),S;s.has(E)?S=s.get(E):S={},Object.assign(S,{[h]:b}),s.set(E,S)})}}),Array.from(s.values())}function vT(t){return t.stackId!=null&&t.dataKey!=null}function VL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function q_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VL(Object(n),!0).forEach(function(r){bfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bfe(t,e,n){return(e=Sfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sfe(t){var e=Afe(t,"string");return typeof e=="symbol"?e:e+""}function Afe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ox=[0,"auto"],di={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Y$=(t,e)=>t.cartesianAxis.xAxis[e],Bl=(t,e)=>{var n=Y$(t,e);return n??di},hi={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:ox,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:sg},J$=(t,e)=>t.cartesianAxis.yAxis[e],ql=(t,e)=>{var n=J$(t,e);return n??hi},xfe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},DR=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??xfe},ri=(t,e,n)=>{switch(e){case"xAxis":return Bl(t,n);case"yAxis":return ql(t,n);case"zAxis":return DR(t,n);case"angleAxis":return RR(t,n);case"radiusAxis":return PR(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Cfe=(t,e,n)=>{switch(e){case"xAxis":return Bl(t,n);case"yAxis":return ql(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},dg=(t,e,n)=>{switch(e){case"xAxis":return Bl(t,n);case"yAxis":return ql(t,n);case"angleAxis":return RR(t,n);case"radiusAxis":return PR(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Q$=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function X$(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var kR=t=>t.graphicalItems.cartesianItems,Ife=se([Ln,yT],X$),Z$=(t,e,n)=>t.filter(n).filter(r=>(e==null?void 0:e.includeHidden)===!0?!0:!r.hide),hg=se([kR,ri,Ife],Z$),ez=se([hg],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(vT)),tz=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),nz=se([hg],tz),rz=t=>t.map(e=>e.data).filter(Boolean).flat(1),Rfe=se([hg],rz),iz=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},OR=se([Rfe,bR],iz),oz=(t,e,n)=>(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:Hr(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:Hr(i,r)}))):t.map(r=>({value:r})),_T=se([OR,ri,hg],oz);function sz(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function vc(t){return t.filter(e=>us(e)||e instanceof Date).map(Number).filter(e=>Qi(e)===!1)}function Pfe(t,e,n){return!n||typeof e!="number"||Qi(e)?[]:n.length?vc(n.flatMap(r=>{var i=Hr(t,r.dataKey),o,s;if(Array.isArray(i)?[o,s]=i:o=s=i,!(!xi(o)||!xi(s)))return[e-o,e+s]})):[]}var Nfe=se([ez,bR,ar],W$),az=(t,e,n)=>{var r={},i=e.reduce((o,s)=>(s.stackId==null||(o[s.stackId]==null&&(o[s.stackId]=[]),o[s.stackId].push(s)),o),r);return Object.fromEntries(Object.entries(i).map(o=>{var[s,l]=o,c=l.map(MR);return[s,{stackedData:Fse(t,c,n),graphicalItems:l}]}))},sx=se([Nfe,ez,pT],az),lz=(t,e,n)=>{var{dataStartIndex:r,dataEndIndex:i}=e;if(n!=="zAxis"){var o=Hse(t,r,i);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},Mfe=se([sx,Fl,Ln],lz),uz=(t,e,n,r,i)=>n.length>0?t.flatMap(o=>n.flatMap(s=>{var l,c,f=(l=r[s.id])===null||l===void 0?void 0:l.filter(g=>sz(i,g)),h=Hr(o,(c=e.dataKey)!==null&&c!==void 0?c:s.dataKey);return{value:h,errorDomain:Pfe(o,h,f)}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(o=>({value:Hr(o,e.dataKey),errorDomain:[]})):t.map(o=>({value:o,errorDomain:[]})),TT=t=>t.errorBars,cz=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>sz(n,r));se([nz,TT,Ln],cz);var Dfe=se([OR,ri,nz,TT,Ln],uz);function kfe(t){var{value:e}=t;if(us(e)||e instanceof Date)return e}var UL=t=>{var e=t.flatMap(r=>[r.value,r.errorDomain]).flat(1),n=vc(e);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Ofe=(t,e,n)=>{var r=t.map(kfe).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&C6(r))?H5(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},LR=t=>{var e;if(t==null||!("domain"in t))return ox;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var n=vc(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:ox},$_=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var o=i.flat(),s=Math.min(...o),l=Math.max(...o);return[s,l]}},fz=t=>t.referenceElements.dots,zd=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),Lfe=se([fz,Ln,yT],zd),dz=t=>t.referenceElements.areas,Vfe=se([dz,Ln,yT],zd),hz=t=>t.referenceElements.lines,Ufe=se([hz,Ln,yT],zd),pz=(t,e)=>{var n=vc(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Ffe=se(Lfe,Ln,pz),mz=(t,e)=>{var n=vc(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Bfe=se([Vfe,Ln],mz),gz=(t,e)=>{var n=vc(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},qfe=se(Ufe,Ln,gz),$fe=se(Ffe,qfe,Bfe,(t,e,n)=>$_(t,n,e)),zfe=se([ri],LR),yz=(t,e,n,r,i,o,s)=>{var l=rfe(e,t.allowDataOverflow);if(l!=null)return l;var c=o==="vertical"&&s==="xAxis"||o==="horizontal"&&s==="yAxis",f=c?$_(n,i,UL(r)):$_(i,UL(r));return ife(e,f,t.allowDataOverflow)},Hfe=se([ri,zfe,Mfe,Dfe,$fe,Dt,Ln],yz),Gfe=[0,1],vz=(t,e,n,r,i,o,s)=>{if(!((t==null||n==null||n.length===0)&&s===void 0)){var{dataKey:l,type:c}=t,f=mc(e,o);return f&&l==null?H5(0,n.length):c==="category"?Ofe(r,t,f):i==="expand"?Gfe:s}},VR=se([ri,Dt,OR,_T,pT,Ln,Hfe],vz),_z=(t,e,n,r,i)=>{if(t!=null){var{scale:o,type:s}=t;if(o==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":s==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":s==="category"?"band":"linear";if(typeof o=="string"){var l="scale".concat(rg(o));return l in Np?l:"point"}}},pg=se([ri,Dt,Q$,xR,Ln],_z);function jfe(t){if(t!=null){if(t in Np)return Np[t]();var e="scale".concat(rg(t));if(e in Np)return Np[e]()}}function UR(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var i=jfe(e);if(i!=null){var o=i.domain(n).range(r);return kse(o),o}}}var Tz=(t,e,n)=>{var r=LR(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&yd(t))return pfe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&yd(t))return mfe(t,e.tickCount,e.allowDecimals)}},FR=se([VR,dg,pg],Tz),Ez=(t,e,n,r)=>{if(r!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&yd(e)&&Array.isArray(n)&&n.length>0){var i=e[0],o=n[0],s=e[1],l=n[n.length-1];return[Math.min(i,o),Math.max(s,l)]}return e},Kfe=se([ri,VR,FR,Ln],Ez),Wfe=se(_T,ri,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(vc(t.map(l=>l.value))).sort((l,c)=>l-c);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var o=0;o<r.length-1;o++){var s=r[o+1]-r[o];n=Math.min(n,s)}return n/i}}),wz=se(Wfe,Dt,B$,or,(t,e,n,r)=>r,(t,e,n,r,i)=>{if(!xi(t))return 0;var o=e==="vertical"?r.height:r.width;if(i==="gap")return t*o/2;if(i==="no-gap"){var s=vo(n,t*o),l=t*o/2;return l-s-(l-s)/o*s}return 0}),Yfe=(t,e)=>{var n=Bl(t,e);return n==null||typeof n.padding!="string"?0:wz(t,"xAxis",e,n.padding)},Jfe=(t,e)=>{var n=ql(t,e);return n==null||typeof n.padding!="string"?0:wz(t,"yAxis",e,n.padding)},Qfe=se(Bl,Yfe,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),Xfe=se(ql,Jfe,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),Zfe=se([or,Qfe,sT,oT,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:o}=r;return i?[o.left,n.width-o.right]:[t.left+e.left,t.left+t.width-e.right]}),ede=se([or,Dt,Xfe,sT,oT,(t,e,n)=>n],(t,e,n,r,i,o)=>{var{padding:s}=i;return o?[r.height-s.bottom,s.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),mg=(t,e,n,r)=>{var i;switch(e){case"xAxis":return Zfe(t,n,r);case"yAxis":return ede(t,n,r);case"zAxis":return(i=DR(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return H$(t);case"radiusAxis":return G$(t,n);default:return}},bz=se([ri,mg],mT),Hd=se([ri,pg,Kfe,bz],UR);se([hg,TT,Ln],cz);function Sz(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var ET=(t,e)=>e,wT=(t,e,n)=>n,tde=se(rT,ET,wT,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(Sz)),nde=se(iT,ET,wT,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(Sz)),Az=(t,e)=>({width:t.width,height:e.height}),rde=(t,e)=>{var n=typeof e.width=="number"?e.width:sg;return{width:n,height:t.height}},xz=se(or,Bl,Az),ide=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},ode=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},sde=se(ma,or,tde,ET,wT,(t,e,n,r,i)=>{var o={},s;return n.forEach(l=>{var c=Az(e,l);s==null&&(s=ide(e,r,t));var f=r==="top"&&!i||r==="bottom"&&i;o[l.id]=s-Number(f)*c.height,s+=(f?-1:1)*c.height}),o}),ade=se(pa,or,nde,ET,wT,(t,e,n,r,i)=>{var o={},s;return n.forEach(l=>{var c=rde(e,l);s==null&&(s=ode(e,r,t));var f=r==="left"&&!i||r==="right"&&i;o[l.id]=s-Number(f)*c.width,s+=(f?-1:1)*c.width}),o}),lde=(t,e)=>{var n=or(t),r=Bl(t,e);if(r!=null){var i=sde(t,r.orientation,r.mirror),o=i[e];return o==null?{x:n.left,y:0}:{x:n.left,y:o}}},ude=(t,e)=>{var n=or(t),r=ql(t,e);if(r!=null){var i=ade(t,r.orientation,r.mirror),o=i[e];return o==null?{x:0,y:n.top}:{x:o,y:n.top}}},Cz=se(or,ql,(t,e)=>{var n=typeof e.width=="number"?e.width:sg;return{width:n,height:t.height}}),FL=(t,e,n)=>{switch(e){case"xAxis":return xz(t,n).width;case"yAxis":return Cz(t,n).height;default:return}},Iz=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:o,dataKey:s}=n,l=mc(t,r),c=e.map(f=>f.value);if(s&&l&&o==="category"&&i&&C6(c))return c}},BR=se([Dt,_T,ri,Ln],Iz),Rz=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:o}=n,s=mc(t,r);if(s&&(i==="number"||o!=="auto"))return e.map(l=>l.value)}},qR=se([Dt,_T,dg,Ln],Rz);se([Dt,Cfe,pg,Hd,BR,qR,mg,FR,Ln],(t,e,n,r,i,o,s,l,c)=>{if(e==null)return null;var f=mc(t,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:o,duplicateDomain:i,isCategorical:f,niceTicks:l,range:s,realScaleType:n,scale:r}});var cde=(t,e,n,r,i,o,s,l,c)=>{if(!(e==null||r==null)){var f=mc(t,c),{type:h,ticks:g,tickCount:v}=e,E=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,b=h==="category"&&r.bandwidth?r.bandwidth()/E:0;b=c==="angleAxis"&&o!=null&&o.length>=2?Ti(o[0]-o[1])*2*b:b;var S=g||i;if(S){var A=S.map((C,D)=>{var k=s?s.indexOf(C):C;return{index:D,coordinate:r(k)+b,value:C,offset:b}});return A.filter(C=>!Qi(C.coordinate))}return f&&l?l.map((C,D)=>({coordinate:r(C)+b,value:C,index:D,offset:b})):r.ticks?r.ticks(v).map(C=>({coordinate:r(C)+b,value:C,offset:b})):r.domain().map((C,D)=>({coordinate:r(C)+b,value:s?s[C]:C,index:D,offset:b}))}},Pz=se([Dt,dg,pg,Hd,FR,mg,BR,qR,Ln],cde),fde=(t,e,n,r,i,o,s)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var l=mc(t,s),{tickCount:c}=e,f=0;return f=s==="angleAxis"&&(r==null?void 0:r.length)>=2?Ti(r[0]-r[1])*2*f:f,l&&o?o.map((h,g)=>({coordinate:n(h)+f,value:h,index:g,offset:f})):n.ticks?n.ticks(c).map(h=>({coordinate:n(h)+f,value:h,offset:f})):n.domain().map((h,g)=>({coordinate:n(h)+f,value:i?i[h]:h,index:g,offset:f}))}},vd=se([Dt,dg,Hd,mg,BR,qR,Ln],fde),_d=se(ri,Hd,(t,e)=>{if(!(t==null||e==null))return q_(q_({},t),{},{scale:e})}),dde=se([ri,pg,VR,bz],UR);se((t,e,n)=>DR(t,n),dde,(t,e)=>{if(!(t==null||e==null))return q_(q_({},t),{},{scale:e})});var hde=se([Dt,rT,iT],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Nz=t=>t.options.defaultTooltipEventType,Mz=t=>t.options.validateTooltipEventTypes;function Dz(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function $R(t,e){var n=Nz(t),r=Mz(t);return Dz(e,n,r)}function pde(t){return ze(e=>$R(e,t))}var kz=(t,e)=>{var n,r=Number(e);if(!(Qi(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},mde=t=>t.tooltip.settings,rl={active:!1,index:null,dataKey:void 0,coordinate:void 0},gde={itemInteraction:{click:rl,hover:rl},axisInteraction:{click:rl,hover:rl},keyboardInteraction:rl,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Oz=Ci({name:"tooltip",initialState:gde,reducers:{addTooltipEntrySettings(t,e){t.tooltipItemPayloads.push(e.payload)},removeTooltipEntrySettings(t,e){var n=Ks(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:yde,removeTooltipEntrySettings:vde,setTooltipSettingsState:_de,setActiveMouseOverItemIndex:Lz,mouseLeaveItem:Tde,mouseLeaveChart:Vz,setActiveClickItemIndex:Ede,setMouseOverAxisIndex:Uz,setMouseClickAxisIndex:wde,setSyncInteraction:ax,setKeyboardInteraction:lx}=Oz.actions,bde=Oz.reducer;function BL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BL(Object(n),!0).forEach(function(r){Sde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Sde(t,e,n){return(e=Ade(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ade(t){var e=xde(t,"string");return typeof e=="symbol"?e:e+""}function xde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Cde(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function Ide(t){return t.index!=null}var Fz=(t,e,n,r)=>{if(e==null)return rl;var i=Cde(t,e,n);if(i==null)return rl;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var o=t.settings.active===!0;if(Ide(i)){if(o)return dv(dv({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return dv(dv({},rl),{},{coordinate:i.coordinate})},zR=(t,e)=>{var n=t==null?void 0:t.index;if(n==null)return null;var r=Number(n);if(!xi(r))return n;var i=0,o=1/0;return e.length>0&&(o=e.length-1),String(Math.max(i,Math.min(r,o)))},Bz=(t,e,n,r,i,o,s,l)=>{if(!(o==null||l==null)){var c=s[0],f=c==null?void 0:l(c.positions,o);if(f!=null)return f;var h=i==null?void 0:i[Number(o)];if(h)switch(n){case"horizontal":return{x:h.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:h.coordinate}}}},qz=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=t.itemInteraction.hover.dataKey:i=t.itemInteraction.click.dataKey,i==null&&r!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(o=>{var s;return((s=o.settings)===null||s===void 0?void 0:s.dataKey)===i})},gg=t=>t.options.tooltipPayloadSearcher,Gd=t=>t.tooltip;function qL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $L(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qL(Object(n),!0).forEach(function(r){Rde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rde(t,e,n){return(e=Pde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pde(t){var e=Nde(t,"string");return typeof e=="symbol"?e:e+""}function Nde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mde(t,e){return t??e}var $z=(t,e,n,r,i,o,s)=>{if(!(e==null||o==null)){var{chartData:l,computedData:c,dataStartIndex:f,dataEndIndex:h}=n,g=[];return t.reduce((v,E)=>{var b,{dataDefinedOnItem:S,settings:A}=E,C=Mde(S,l),D=Array.isArray(C)?N5(C,f,h):C,k=(b=A==null?void 0:A.dataKey)!==null&&b!==void 0?b:r,q=A==null?void 0:A.nameKey,$;if(r&&Array.isArray(D)&&!Array.isArray(D[0])&&s==="axis"?$=Sre(D,r,i):$=o(D,e,c,q),Array.isArray($))$.forEach(M=>{var O=$L($L({},A),{},{name:M.name,unit:M.unit,color:void 0,fill:void 0});v.push(C2({tooltipEntrySettings:O,dataKey:M.dataKey,payload:M.payload,value:Hr(M.payload,M.dataKey),name:M.name}))});else{var H;v.push(C2({tooltipEntrySettings:A,dataKey:k,payload:$,value:Hr($,k),name:(H=Hr($,q))!==null&&H!==void 0?H:A==null?void 0:A.name}))}return v},g)}},HR=se([ar,Dt,Q$,xR,Gn],_z),Dde=se([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),kde=se([Gn,$d],X$),yg=se([Dde,ar,kde],Z$),Ode=se([yg],t=>t.filter(vT)),Lde=se([yg],rz),jd=se([Lde,Fl],iz),Vde=se([Ode,Fl,ar],W$),GR=se([jd,ar,yg],oz),Ude=se([ar],LR),Fde=se([yg],t=>t.filter(vT)),Bde=se([Vde,Fde,pT],az),qde=se([Bde,Fl,Gn],lz),$de=se([yg],tz),zde=se([jd,ar,$de,TT,Gn],uz),Hde=se([fz,Gn,$d],zd),Gde=se([Hde,Gn],pz),jde=se([dz,Gn,$d],zd),Kde=se([jde,Gn],mz),Wde=se([hz,Gn,$d],zd),Yde=se([Wde,Gn],gz),Jde=se([Gde,Yde,Kde],$_),Qde=se([ar,Ude,qde,zde,Jde,Dt,Gn],yz),zz=se([ar,Dt,jd,GR,pT,Gn,Qde],vz),Xde=se([zz,ar,HR],Tz),Zde=se([ar,zz,Xde,Gn],Ez),Hz=t=>{var e=Gn(t),n=$d(t),r=!1;return mg(t,e,n,r)},Gz=se([ar,Hz],mT),jz=se([ar,HR,Zde,Gz],UR),ehe=se([Dt,GR,ar,Gn],Iz),the=se([Dt,GR,ar,Gn],Rz),nhe=(t,e,n,r,i,o,s,l)=>{if(e){var{type:c}=e,f=mc(t,l);if(r){var h=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,g=c==="category"&&r.bandwidth?r.bandwidth()/h:0;return g=l==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?Ti(i[0]-i[1])*2*g:g,f&&s?s.map((v,E)=>({coordinate:r(v)+g,value:v,index:E,offset:g})):r.domain().map((v,E)=>({coordinate:r(v)+g,value:o?o[v]:v,index:E,offset:g}))}}},ya=se([Dt,ar,HR,jz,Hz,ehe,the,Gn],nhe),jR=se([Nz,Mz,mde],(t,e,n)=>Dz(n.shared,t,e)),Kz=t=>t.tooltip.settings.trigger,KR=t=>t.tooltip.settings.defaultIndex,bT=se([Gd,jR,Kz,KR],Fz),Td=se([bT,jd],zR),Wz=se([ya,Td],kz),Yz=se([bT],t=>{if(t)return t.dataKey}),Jz=se([Gd,jR,Kz,KR],qz),rhe=se([pa,ma,Dt,or,ya,KR,Jz,gg],Bz),ihe=se([bT,rhe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),ohe=se([bT],t=>t.active),she=se([Jz,Td,Fl,K$,Wz,gg,jR],$z);se([she],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function zL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function HL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zL(Object(n),!0).forEach(function(r){ahe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ahe(t,e,n){return(e=lhe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lhe(t){var e=uhe(t,"string");return typeof e=="symbol"?e:e+""}function uhe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var che=()=>ze(ar),fhe=()=>{var t=che(),e=ze(ya),n=ze(jz);return WI(HL(HL({},t),{},{scale:n}),e)},dhe=()=>ze(xR),WR=(t,e)=>e,Qz=(t,e,n)=>n,YR=(t,e,n,r)=>r,hhe=se(ya,t=>Q0(t,e=>e.coordinate)),JR=se([Gd,WR,Qz,YR],Fz),Xz=se([JR,jd],zR),phe=(t,e,n)=>{if(e!=null){var r=Gd(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},Zz=se([Gd,WR,Qz,YR],qz),z_=se([pa,ma,Dt,or,ya,YR,Zz,gg],Bz),mhe=se([JR,z_],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),eH=se(ya,Xz,kz),ghe=se([Zz,Xz,Fl,K$,eH,gg,WR],$z),yhe=se([JR],t=>({isActive:t.active,activeIndex:t.index})),vhe=(t,e,n,r,i,o,s,l)=>{if(!(!t||!e||!r||!i||!o)){var c=Gse(t.chartX,t.chartY,e,n,l);if(c){var f=Kse(c,e),h=Mse(f,s,o,r,i),g=jse(e,o,h,c);return{activeIndex:String(h),activeCoordinate:g}}}};function ux(){return ux=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ux.apply(null,arguments)}function GL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GL(Object(n),!0).forEach(function(r){_he(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _he(t,e,n){return(e=The(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function The(t){var e=Ehe(t,"string");return typeof e=="symbol"?e:e+""}function Ehe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function whe(t){var{coordinate:e,payload:n,index:r,offset:i,tooltipAxisBandSize:o,layout:s,cursor:l,tooltipEventType:c,chartName:f}=t,h=e,g=n,v=r;if(!l||!h||f!=="ScatterChart"&&c!=="axis")return null;var E,b;if(f==="ScatterChart")E=h,b=$ae;else if(f==="BarChart")E=zae(s,h,i,o),b=B5;else if(s==="radial"){var{cx:S,cy:A,radius:C,startAngle:D,endAngle:k}=q5(h);E={cx:S,cy:A,startAngle:D,endAngle:k,innerRadius:C,outerRadius:C},b=z5}else E={points:wle(s,h,i)},b=Dae;var q=typeof l=="object"&&"className"in l?l.className:void 0,$=hv(hv(hv(hv({stroke:"#ccc",pointerEvents:"none"},i),E),er(l,!1)),{},{payload:g,payloadIndex:v,className:Xt("recharts-tooltip-cursor",q)});return P.isValidElement(l)?P.cloneElement(l,$):P.createElement(b,$)}function bhe(t){var e=fhe(),n=lae(),r=QI(),i=dhe();return P.createElement(whe,ux({},t,{coordinate:t.coordinate,index:t.index,payload:t.payload,offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var tH=P.createContext(null),She=()=>P.useContext(tH),mS={exports:{}},jL;function Ahe(){return jL||(jL=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,f,h){this.fn=c,this.context=f,this.once=h||!1}function o(c,f,h,g,v){if(typeof h!="function")throw new TypeError("The listener must be a function");var E=new i(h,g||c,v),b=n?n+f:f;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],E]:c._events[b].push(E):(c._events[b]=E,c._eventsCount++),c}function s(c,f){--c._eventsCount===0?c._events=new r:delete c._events[f]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var f=[],h,g;if(this._eventsCount===0)return f;for(g in h=this._events)e.call(h,g)&&f.push(n?g.slice(1):g);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(h)):f},l.prototype.listeners=function(f){var h=n?n+f:f,g=this._events[h];if(!g)return[];if(g.fn)return[g.fn];for(var v=0,E=g.length,b=new Array(E);v<E;v++)b[v]=g[v].fn;return b},l.prototype.listenerCount=function(f){var h=n?n+f:f,g=this._events[h];return g?g.fn?1:g.length:0},l.prototype.emit=function(f,h,g,v,E,b){var S=n?n+f:f;if(!this._events[S])return!1;var A=this._events[S],C=arguments.length,D,k;if(A.fn){switch(A.once&&this.removeListener(f,A.fn,void 0,!0),C){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,h),!0;case 3:return A.fn.call(A.context,h,g),!0;case 4:return A.fn.call(A.context,h,g,v),!0;case 5:return A.fn.call(A.context,h,g,v,E),!0;case 6:return A.fn.call(A.context,h,g,v,E,b),!0}for(k=1,D=new Array(C-1);k<C;k++)D[k-1]=arguments[k];A.fn.apply(A.context,D)}else{var q=A.length,$;for(k=0;k<q;k++)switch(A[k].once&&this.removeListener(f,A[k].fn,void 0,!0),C){case 1:A[k].fn.call(A[k].context);break;case 2:A[k].fn.call(A[k].context,h);break;case 3:A[k].fn.call(A[k].context,h,g);break;case 4:A[k].fn.call(A[k].context,h,g,v);break;default:if(!D)for($=1,D=new Array(C-1);$<C;$++)D[$-1]=arguments[$];A[k].fn.apply(A[k].context,D)}}return!0},l.prototype.on=function(f,h,g){return o(this,f,h,g,!1)},l.prototype.once=function(f,h,g){return o(this,f,h,g,!0)},l.prototype.removeListener=function(f,h,g,v){var E=n?n+f:f;if(!this._events[E])return this;if(!h)return s(this,E),this;var b=this._events[E];if(b.fn)b.fn===h&&(!v||b.once)&&(!g||b.context===g)&&s(this,E);else{for(var S=0,A=[],C=b.length;S<C;S++)(b[S].fn!==h||v&&!b[S].once||g&&b[S].context!==g)&&A.push(b[S]);A.length?this._events[E]=A.length===1?A[0]:A:s(this,E)}return this},l.prototype.removeAllListeners=function(f){var h;return f?(h=n?n+f:f,this._events[h]&&s(this,h)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l})(mS)),mS.exports}var xhe=Ahe();const Che=fs(xhe);var Mm=new Che,cx="recharts.syncEvent.tooltip",KL="recharts.syncEvent.brush";function Ihe(t,e){if(e){var n=Number.parseInt(e,10);if(!Qi(n))return t==null?void 0:t[n]}}var Rhe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},nH=Ci({name:"options",initialState:Rhe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Phe=nH.reducer,{createEventEmitter:Nhe}=nH.actions;function Mhe(t){return t.tooltip.syncInteraction}var Dhe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},rH=Ci({name:"chartData",initialState:Dhe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:WL,setDataStartEndIndexes:khe,setComputedData:bIe}=rH.actions,Ohe=rH.reducer,Lhe=["x","y"];function YL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _u(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YL(Object(n),!0).forEach(function(r){Vhe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vhe(t,e,n){return(e=Uhe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uhe(t){var e=Fhe(t,"string");return typeof e=="symbol"?e:e+""}function Fhe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Bhe(t,e){if(t==null)return{};var n,r,i=qhe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function qhe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var iH=()=>{};function $he(){var t=ze(CR),e=ze(IR),n=ir(),r=ze(q$),i=ze(ya),o=QI(),s=JI(),l=ze(c=>c.rootProps.className);P.useEffect(()=>{if(t==null)return iH;var c=(f,h,g)=>{if(e!==g&&t===f){if(r==="index"){var v;if(s&&h!==null&&h!==void 0&&(v=h.payload)!==null&&v!==void 0&&v.coordinate){var E=h.payload.coordinate,{x:b,y:S}=E,A=Bhe(E,Lhe),C=_u(_u(_u({},A),typeof b=="number"&&{x:Math.max(s.x,Math.min(b,s.x+s.width))}),typeof S=="number"&&{y:Math.max(s.y,Math.min(S,s.y+s.height))}),D=_u(_u({},h),{},{payload:_u(_u({},h.payload),{},{coordinate:C})});n(D)}else n(h);return}if(i!=null){var k;if(typeof r=="function"){var q={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},$=r(i,q);k=i[$]}else r==="value"&&(k=i.find(z=>String(z.value)===h.payload.label));var{coordinate:H}=h.payload;if(k==null||h.payload.active===!1||H==null||s==null){n(ax({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:M,y:O}=H,L=Math.min(M,s.x+s.width),F=Math.min(O,s.y+s.height),V={x:o==="horizontal"?k.coordinate:L,y:o==="horizontal"?F:k.coordinate},G=ax({active:h.payload.active,coordinate:V,dataKey:h.payload.dataKey,index:String(k.index),label:h.payload.label});n(G)}}};return Mm.on(cx,c),()=>{Mm.off(cx,c)}},[l,n,e,t,r,i,o,s])}function zhe(){var t=ze(CR),e=ze(IR),n=ir();P.useEffect(()=>{if(t==null)return iH;var r=(i,o,s)=>{e!==s&&t===i&&n(khe(o))};return Mm.on(KL,r),()=>{Mm.off(KL,r)}},[n,e,t])}function Hhe(){var t=ir();P.useEffect(()=>{t(Nhe())},[t]),$he(),zhe()}function Ghe(t,e,n,r,i,o){var s=ze(v=>phe(v,t,e)),l=ze(IR),c=ze(CR),f=ze(q$),h=ze(Mhe),g=h==null?void 0:h.active;P.useEffect(()=>{if(!g&&c!=null&&l!=null){var v=ax({active:o,coordinate:n,dataKey:s,index:i,label:typeof r=="number"?String(r):r});Mm.emit(cx,c,v,l)}},[g,n,s,i,r,l,c,f,o])}function JL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function QL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JL(Object(n),!0).forEach(function(r){jhe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jhe(t,e,n){return(e=Khe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Khe(t){var e=Whe(t,"string");return typeof e=="symbol"?e:e+""}function Whe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yhe(t){return t.dataKey}function Jhe(t,e){return P.isValidElement(t)?P.cloneElement(t,e):typeof t=="function"?P.createElement(t,e):P.createElement(_ae,e)}var XL=[],Qhe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!ag.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Xhe(t){var e=Ll(t,Qhe),{active:n,allowEscapeViewBox:r,animationDuration:i,animationEasing:o,content:s,filterNull:l,isAnimationActive:c,offset:f,payloadUniqBy:h,position:g,reverseDirection:v,useTranslate3d:E,wrapperStyle:b,cursor:S,shared:A,trigger:C,defaultIndex:D,portal:k,axisId:q}=e,$=ir(),H=typeof D=="number"?String(D):D;P.useEffect(()=>{$(_de({shared:A,trigger:C,axisId:q,active:n,defaultIndex:H}))},[$,A,C,q,n,H]);var M=JI(),O=O5(),L=pde(A),{activeIndex:F,isActive:V}=ze(Be=>yhe(Be,L,C,H)),G=ze(Be=>ghe(Be,L,C,H)),z=ze(Be=>eH(Be,L,C,H)),Se=ze(Be=>mhe(Be,L,C,H)),Re=G,te=She(),me=n??V,[be,Oe]=Eoe([Re,me]),K=L==="axis"?z:void 0;Ghe(L,C,Se,K,F,me);var le=k??te;if(le==null)return null;var ae=Re??XL;me||(ae=XL),l&&ae.length&&(ae=Kie(Re.filter(Be=>Be.value!=null&&(Be.hide!==!0||e.includeHidden)),h,Yhe));var de=ae.length>0,Le=P.createElement(xae,{allowEscapeViewBox:r,animationDuration:i,animationEasing:o,isAnimationActive:c,active:me,coordinate:Se,hasPayload:de,offset:f,position:g,reverseDirection:v,useTranslate3d:E,viewBox:M,wrapperStyle:b,lastBoundingBox:be,innerRef:Oe,hasPortalFromProps:!!k},Jhe(s,QL(QL({},e),{},{payload:ae,label:K,active:me,coordinate:Se,accessibilityLayer:O})));return P.createElement(P.Fragment,null,R7.createPortal(Le,le),me&&P.createElement(bhe,{cursor:S,tooltipEventType:L,coordinate:Se,payload:Re,index:F}))}var gS={},yS={},vS={},ZL;function Zhe(){return ZL||(ZL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:o}={}){let s,l=null;const c=o!=null&&o.includes("leading"),f=o==null||o.includes("trailing"),h=()=>{l!==null&&(n.apply(s,l),s=void 0,l=null)},g=()=>{f&&h(),S()};let v=null;const E=()=>{v!=null&&clearTimeout(v),v=setTimeout(()=>{v=null,g()},r)},b=()=>{v!==null&&(clearTimeout(v),v=null)},S=()=>{b(),s=void 0,l=null},A=()=>{h()},C=function(...D){if(i!=null&&i.aborted)return;s=this,l=D;const k=v==null;E(),c&&k&&h()};return C.schedule=E,C.cancel=S,C.flush=A,i==null||i.addEventListener("abort",S,{once:!0}),C}t.debounce=e})(vS)),vS}var eV;function epe(){return eV||(eV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Zhe();function n(r,i=0,o={}){typeof o!="object"&&(o={});const{leading:s=!1,trailing:l=!0,maxWait:c}=o,f=Array(2);s&&(f[0]="leading"),l&&(f[1]="trailing");let h,g=null;const v=e.debounce(function(...S){h=r.apply(this,S),g=null},i,{edges:f}),E=function(...S){return c!=null&&(g===null&&(g=Date.now()),Date.now()-g>=c)?(h=r.apply(this,S),g=Date.now(),v.cancel(),v.schedule(),h):(v.apply(this,S),h)},b=()=>(v.flush(),h);return E.cancel=v.cancel,E.flush=b,E}t.debounce=n})(yS)),yS}var tV;function tpe(){return tV||(tV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=epe();function n(r,i=0,o={}){const{leading:s=!0,trailing:l=!0}=o;return e.debounce(r,i,{leading:s,maxWait:i,trailing:l})}t.throttle=n})(gS)),gS}var _S,nV;function npe(){return nV||(nV=1,_S=tpe().throttle),_S}var rpe=npe();const ipe=fs(rpe);var TS=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o]};function rV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ES(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rV(Object(n),!0).forEach(function(r){ope(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ope(t,e,n){return(e=spe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function spe(t){var e=ape(t,"string");return typeof e=="symbol"?e:e+""}function ape(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lpe=P.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i="100%",height:o="100%",minWidth:s=0,minHeight:l,maxHeight:c,children:f,debounce:h=0,id:g,className:v,onResize:E,style:b={}}=t,S=P.useRef(null),A=P.useRef();A.current=E,P.useImperativeHandle(e,()=>S.current);var[C,D]=P.useState({containerWidth:r.width,containerHeight:r.height}),k=P.useCallback(($,H)=>{D(M=>{var O=Math.round($),L=Math.round(H);return M.containerWidth===O&&M.containerHeight===L?M:{containerWidth:O,containerHeight:L}})},[]);P.useEffect(()=>{var $=L=>{var F,{width:V,height:G}=L[0].contentRect;k(V,G),(F=A.current)===null||F===void 0||F.call(A,V,G)};h>0&&($=ipe($,h,{trailing:!0,leading:!1}));var H=new ResizeObserver($),{width:M,height:O}=S.current.getBoundingClientRect();return k(M,O),H.observe(S.current),()=>{H.disconnect()}},[k,h]);var q=P.useMemo(()=>{var{containerWidth:$,containerHeight:H}=C;if($<0||H<0)return null;TS(Ou(i)||Ou(o),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,o),TS(!n||n>0,"The aspect(%s) must be greater than zero.",n);var M=Ou(i)?$:i,O=Ou(o)?H:o;return n&&n>0&&(M?O=M/n:O&&(M=O*n),c&&O>c&&(O=c)),TS(M>0||O>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,M,O,i,o,s,l,n),P.Children.map(f,L=>P.cloneElement(L,{width:M,height:O,style:ES({width:M,height:O},L.props.style)}))},[n,f,o,c,l,s,C,i]);return P.createElement("div",{id:g?"".concat(g):void 0,className:Xt("recharts-responsive-container",v),style:ES(ES({},b),{},{width:i,height:o,minWidth:s,minHeight:l,maxHeight:c}),ref:S},P.createElement("div",{style:{width:0,height:0,overflow:"visible"}},q))}),oH=t=>null;oH.displayName="Cell";function upe(t,e,n){return(e=cpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cpe(t){var e=fpe(t,"string");return typeof e=="symbol"?e:e+""}function fpe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class dpe{constructor(e){upe(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function iV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hpe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iV(Object(n),!0).forEach(function(r){ppe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ppe(t,e,n){return(e=mpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mpe(t){var e=gpe(t,"string");return typeof e=="symbol"?e:e+""}function gpe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ype={cacheSize:2e3,enableCache:!0},sH=hpe({},ype),oV=new dpe(sH.cacheSize),vpe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},sV="recharts_measurement_span";function _pe(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",o=e.fontStyle||"",s=e.letterSpacing||"",l=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(o,"|").concat(s,"|").concat(l)}var aV=(t,e)=>{try{var n=document.getElementById(sV);n||(n=document.createElement("span"),n.setAttribute("id",sV),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,vpe,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},Yp=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||ag.isSsr)return{width:0,height:0};if(!sH.enableCache)return aV(e,n);var r=_pe(e,n),i=oV.get(r);if(i)return i;var o=aV(e,n);return oV.set(r,o),o},lV=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,uV=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Tpe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Epe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,aH={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},wpe=Object.keys(aH),xf="NaN";function bpe(t,e){return t*aH[e]}class Qr{static parse(e){var n,[,r,i]=(n=Epe.exec(e))!==null&&n!==void 0?n:[];return new Qr(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,Qi(e)&&(this.unit=""),n!==""&&!Tpe.test(n)&&(this.num=NaN,this.unit=""),wpe.includes(n)&&(this.num=bpe(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new Qr(NaN,""):new Qr(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Qr(NaN,""):new Qr(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Qr(NaN,""):new Qr(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Qr(NaN,""):new Qr(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Qi(this.num)}}function lH(t){if(t.includes(xf))return xf;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,o]=(n=lV.exec(e))!==null&&n!==void 0?n:[],s=Qr.parse(r??""),l=Qr.parse(o??""),c=i==="*"?s.multiply(l):s.divide(l);if(c.isNaN())return xf;e=e.replace(lV,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,[,h,g,v]=(f=uV.exec(e))!==null&&f!==void 0?f:[],E=Qr.parse(h??""),b=Qr.parse(v??""),S=g==="+"?E.add(b):E.subtract(b);if(S.isNaN())return xf;e=e.replace(uV,S.toString())}return e}var cV=/\(([^()]*)\)/;function Spe(t){for(var e=t,n;(n=cV.exec(e))!=null;){var[,r]=n;e=e.replace(cV,lH(r))}return e}function Ape(t){var e=t.replace(/\s+/g,"");return e=Spe(e),e=lH(e),e}function xpe(t){try{return Ape(t)}catch{return xf}}function wS(t){var e=xpe(t.slice(5,-1));return e===xf?"":e}var Cpe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Ipe=["dx","dy","angle","className","breakAll"];function fx(){return fx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fx.apply(null,arguments)}function fV(t,e){if(t==null)return{};var n,r,i=Rpe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Rpe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var uH=/[ \f\n\r\t\v\u2028\u2029]+/,cH=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];rr(e)||(n?i=e.toString().split(""):i=e.toString().split(uH));var o=i.map(l=>({word:l,width:Yp(l,r).width})),s=n?0:Yp(" ",r).width;return{wordsWithComputedWidth:o,spaceWidth:s}}catch{return null}},Ppe=(t,e,n,r,i)=>{var{maxLines:o,children:s,style:l,breakAll:c}=t,f=We(o),h=s,g=function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return V.reduce((G,z)=>{var{word:Se,width:Re}=z,te=G[G.length-1];if(te&&(r==null||i||te.width+Re+n<Number(r)))te.words.push(Se),te.width+=Re+n;else{var me={words:[Se],width:Re};G.push(me)}return G},[])},v=g(e),E=F=>F.reduce((V,G)=>V.width>G.width?V:G);if(!f||i)return v;var b=v.length>o||E(v).width>Number(r);if(!b)return v;for(var S="…",A=F=>{var V=h.slice(0,F),G=cH({breakAll:c,style:l,children:V+S}).wordsWithComputedWidth,z=g(G),Se=z.length>o||E(z).width>Number(r);return[Se,z]},C=0,D=h.length-1,k=0,q;C<=D&&k<=h.length-1;){var $=Math.floor((C+D)/2),H=$-1,[M,O]=A(H),[L]=A($);if(!M&&!L&&(C=$+1),M&&L&&(D=$-1),!M&&L){q=O;break}k++}return q||v},dV=t=>{var e=rr(t)?[]:t.toString().split(uH);return[{words:e}]},Npe=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:o,maxLines:s}=t;if((e||n)&&!ag.isSsr){var l,c,f=cH({breakAll:o,children:r,style:i});if(f){var{wordsWithComputedWidth:h,spaceWidth:g}=f;l=h,c=g}else return dV(r);return Ppe({breakAll:o,children:r,maxLines:s,style:i},l,c,e,n)}return dV(r)},hV="#808080",QR=P.forwardRef((t,e)=>{var{x:n=0,y:r=0,lineHeight:i="1em",capHeight:o="0.71em",scaleToFit:s=!1,textAnchor:l="start",verticalAnchor:c="end",fill:f=hV}=t,h=fV(t,Cpe),g=P.useMemo(()=>Npe({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:s,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,s,h.style,h.width]),{dx:v,dy:E,angle:b,className:S,breakAll:A}=h,C=fV(h,Ipe);if(!us(n)||!us(r)||g.length===0)return null;var D=n+(We(v)?v:0),k=r+(We(E)?E:0),q;switch(c){case"start":q=wS("calc(".concat(o,")"));break;case"middle":q=wS("calc(".concat((g.length-1)/2," * -").concat(i," + (").concat(o," / 2))"));break;default:q=wS("calc(".concat(g.length-1," * -").concat(i,")"));break}var $=[];if(s){var H=g[0].width,{width:M}=h;$.push("scale(".concat(We(M)?M/H:1,")"))}return b&&$.push("rotate(".concat(b,", ").concat(D,", ").concat(k,")")),$.length&&(C.transform=$.join(" ")),P.createElement("text",fx({},er(C,!0),{ref:e,x:D,y:k,className:Xt("recharts-text",S),textAnchor:l,fill:f.includes("url")?hV:f}),g.map((O,L)=>{var F=O.words.join(A?"":" ");return P.createElement("tspan",{x:D,dy:L===0?q:i,key:"".concat(F,"-").concat(L)},F)}))});QR.displayName="Text";var Mpe=["labelRef"];function Dpe(t,e){if(t==null)return{};var n,r,i=kpe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function kpe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function pV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Sn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pV(Object(n),!0).forEach(function(r){Ope(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ope(t,e,n){return(e=Lpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lpe(t){var e=Vpe(t,"string");return typeof e=="symbol"?e:e+""}function Vpe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Fs(){return Fs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fs.apply(null,arguments)}var fH=P.createContext(null),Upe=t=>{var{x:e,y:n,width:r,height:i,children:o}=t,s=P.useMemo(()=>({x:e,y:n,width:r,height:i}),[e,n,r,i]);return P.createElement(fH.Provider,{value:s},o)},dH=()=>{var t=P.useContext(fH),e=JI();return t||e},Fpe=P.createContext(null),Bpe=()=>{var t=P.useContext(Fpe),e=ze(j$);return t||e},qpe=t=>{var{value:e,formatter:n}=t,r=rr(t.children)?e:t.children;return typeof n=="function"?n(r):r},XR=t=>t!=null&&typeof t=="function",$pe=(t,e)=>{var n=Ti(e-t),r=Math.min(Math.abs(e-t),360);return n*r},zpe=(t,e,n,r,i)=>{var{offset:o,className:s}=t,{cx:l,cy:c,innerRadius:f,outerRadius:h,startAngle:g,endAngle:v,clockWise:E}=i,b=(f+h)/2,S=$pe(g,v),A=S>=0?1:-1,C,D;switch(e){case"insideStart":C=g+A*o,D=E;break;case"insideEnd":C=v-A*o,D=!E;break;case"end":C=v+A*o,D=E;break;default:throw new Error("Unsupported position ".concat(e))}D=S<=0?D:!D;var k=yr(l,c,b,C),q=yr(l,c,b,C+(D?1:-1)*359),$="M".concat(k.x,",").concat(k.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(D?0:1,`,
    `).concat(q.x,",").concat(q.y),H=rr(t.id)?bm("recharts-radial-line-"):t.id;return P.createElement("text",Fs({},r,{dominantBaseline:"central",className:Xt("recharts-radial-bar-label",s)}),P.createElement("defs",null,P.createElement("path",{id:H,d:$})),P.createElement("textPath",{xlinkHref:"#".concat(H)},n))},Hpe=(t,e,n)=>{var{cx:r,cy:i,innerRadius:o,outerRadius:s,startAngle:l,endAngle:c}=t,f=(l+c)/2;if(n==="outside"){var{x:h,y:g}=yr(r,i,s+e,f);return{x:h,y:g,textAnchor:h>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var v=(o+s)/2,{x:E,y:b}=yr(r,i,v,f);return{x:E,y:b,textAnchor:"middle",verticalAnchor:"middle"}},hH=t=>"cx"in t&&We(t.cx),Gpe=(t,e)=>{var{parentViewBox:n,offset:r,position:i}=t,o;n!=null&&!hH(n)&&(o=n);var{x:s,y:l,width:c,height:f}=e,h=f>=0?1:-1,g=h*r,v=h>0?"end":"start",E=h>0?"start":"end",b=c>=0?1:-1,S=b*r,A=b>0?"end":"start",C=b>0?"start":"end";if(i==="top"){var D={x:s+c/2,y:l-h*r,textAnchor:"middle",verticalAnchor:v};return Sn(Sn({},D),o?{height:Math.max(l-o.y,0),width:c}:{})}if(i==="bottom"){var k={x:s+c/2,y:l+f+g,textAnchor:"middle",verticalAnchor:E};return Sn(Sn({},k),o?{height:Math.max(o.y+o.height-(l+f),0),width:c}:{})}if(i==="left"){var q={x:s-S,y:l+f/2,textAnchor:A,verticalAnchor:"middle"};return Sn(Sn({},q),o?{width:Math.max(q.x-o.x,0),height:f}:{})}if(i==="right"){var $={x:s+c+S,y:l+f/2,textAnchor:C,verticalAnchor:"middle"};return Sn(Sn({},$),o?{width:Math.max(o.x+o.width-$.x,0),height:f}:{})}var H=o?{width:c,height:f}:{};return i==="insideLeft"?Sn({x:s+S,y:l+f/2,textAnchor:C,verticalAnchor:"middle"},H):i==="insideRight"?Sn({x:s+c-S,y:l+f/2,textAnchor:A,verticalAnchor:"middle"},H):i==="insideTop"?Sn({x:s+c/2,y:l+g,textAnchor:"middle",verticalAnchor:E},H):i==="insideBottom"?Sn({x:s+c/2,y:l+f-g,textAnchor:"middle",verticalAnchor:v},H):i==="insideTopLeft"?Sn({x:s+S,y:l+g,textAnchor:C,verticalAnchor:E},H):i==="insideTopRight"?Sn({x:s+c-S,y:l+g,textAnchor:A,verticalAnchor:E},H):i==="insideBottomLeft"?Sn({x:s+S,y:l+f-g,textAnchor:C,verticalAnchor:v},H):i==="insideBottomRight"?Sn({x:s+c-S,y:l+f-g,textAnchor:A,verticalAnchor:v},H):i&&typeof i=="object"&&(We(i.x)||Ou(i.x))&&(We(i.y)||Ou(i.y))?Sn({x:s+vo(i.x,c),y:l+vo(i.y,f),textAnchor:"end",verticalAnchor:"end"},H):Sn({x:s+c/2,y:l+f/2,textAnchor:"middle",verticalAnchor:"middle"},H)},jpe={offset:5};function tl(t){var e=Ll(t,jpe),{viewBox:n,position:r,value:i,children:o,content:s,className:l="",textBreakAll:c,labelRef:f}=e,h=Bpe(),g=dH(),v=r==="center"?g:h??g,E=n||v;if(!E||rr(i)&&rr(o)&&!P.isValidElement(s)&&typeof s!="function")return null;var b=Sn(Sn({},e),{},{viewBox:E});if(P.isValidElement(s)){var{labelRef:S}=b,A=Dpe(b,Mpe);return P.cloneElement(s,A)}var C;if(typeof s=="function"){if(C=P.createElement(s,b),P.isValidElement(C))return C}else C=qpe(e);var D=hH(E),k=er(e,!0);if(D&&(r==="insideStart"||r==="insideEnd"||r==="end"))return zpe(e,r,C,k,E);var q=D?Hpe(E,e.offset,e.position):Gpe(e,E);return P.createElement(QR,Fs({ref:f,className:Xt("recharts-label",l)},k,q,{breakAll:c}),C)}tl.displayName="Label";var Kpe=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?P.createElement(tl,Fs({key:"label-implicit"},r)):us(t)?P.createElement(tl,Fs({key:"label-implicit",value:t},r)):P.isValidElement(t)?t.type===tl?P.cloneElement(t,Sn({key:"label-implicit"},r)):P.createElement(tl,Fs({key:"label-implicit",content:t},r)):XR(t)?P.createElement(tl,Fs({key:"label-implicit",content:t},r)):t&&typeof t=="object"?P.createElement(tl,Fs({},t,{key:"label-implicit"},r)):null};function Wpe(t){var{label:e}=t,n=dH();return Kpe(e,n)||null}var bS={},SS={},mV;function Ype(){return mV||(mV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(SS)),SS}var AS={},gV;function Jpe(){return gV||(gV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(AS)),AS}var yV;function Qpe(){return yV||(yV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Ype(),n=Jpe(),r=BI();function i(o){if(r.isArrayLike(o))return e.last(n.toArray(o))}t.last=i})(bS)),bS}var xS,vV;function Xpe(){return vV||(vV=1,xS=Qpe().last),xS}var Zpe=Xpe();const eme=fs(Zpe);var tme=["valueAccessor"],nme=["dataKey","clockWise","id","textBreakAll"];function H_(){return H_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},H_.apply(null,arguments)}function _V(t,e){if(t==null)return{};var n,r,i=rme(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function rme(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var ime=t=>Array.isArray(t.value)?eme(t.value):t.value,pH=P.createContext(void 0),ome=pH.Provider,mH=P.createContext(void 0);mH.Provider;function sme(){return P.useContext(pH)}function ame(){return P.useContext(mH)}function Ov(t){var{valueAccessor:e=ime}=t,n=_V(t,tme),{dataKey:r,clockWise:i,id:o,textBreakAll:s}=n,l=_V(n,nme),c=sme(),f=ame(),h=c||f;return!h||!h.length?null:P.createElement(Al,{className:"recharts-label-list"},h.map((g,v)=>{var E,b=rr(r)?e(g,v):Hr(g&&g.payload,r),S=rr(o)?{}:{id:"".concat(o,"-").concat(v)};return P.createElement(tl,H_({},er(g,!0),l,S,{fill:(E=n.fill)!==null&&E!==void 0?E:g.fill,parentViewBox:g.parentViewBox,value:b,textBreakAll:s,viewBox:g.viewBox,key:"label-".concat(v),index:v}))}))}Ov.displayName="LabelList";function lme(t){var{label:e}=t;return e?e===!0?P.createElement(Ov,{key:"labelList-implicit"}):P.isValidElement(e)||XR(e)?P.createElement(Ov,{key:"labelList-implicit",content:e}):typeof e=="object"?P.createElement(Ov,H_({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}var ume={radiusAxis:{},angleAxis:{}},gH=Ci({name:"polarAxis",initialState:ume,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:SIe,removeRadiusAxis:AIe,addAngleAxis:xIe,removeAngleAxis:CIe}=gH.actions,cme=gH.reducer,CS={},TV;function fme(){return TV||(TV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var i;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const o=n[Symbol.toStringTag];return o==null||!((i=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&i.writable)?!1:n.toString()===`[object ${o}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(CS)),CS}var IS,EV;function dme(){return EV||(EV=1,IS=fme().isPlainObject),IS}var hme=dme();const pme=fs(hme);function wV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wV(Object(n),!0).forEach(function(r){mme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mme(t,e,n){return(e=gme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gme(t){var e=yme(t,"string");return typeof e=="symbol"?e:e+""}function yme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function G_(){return G_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},G_.apply(null,arguments)}var SV=(t,e,n,r,i)=>{var o=n-r,s;return s="M ".concat(t,",").concat(e),s+="L ".concat(t+n,",").concat(e),s+="L ".concat(t+n-o/2,",").concat(e+i),s+="L ".concat(t+n-o/2-r,",").concat(e+i),s+="L ".concat(t,",").concat(e," Z"),s},vme={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},_me=t=>{var e=Ll(t,vme),{x:n,y:r,upperWidth:i,lowerWidth:o,height:s,className:l}=e,{animationEasing:c,animationDuration:f,animationBegin:h,isUpdateAnimationActive:g}=e,v=P.useRef(),[E,b]=P.useState(-1),S=P.useRef(i),A=P.useRef(o),C=P.useRef(s),D=P.useRef(n),k=P.useRef(r),q=ZI(t,"trapezoid-");if(P.useEffect(()=>{if(v.current&&v.current.getTotalLength)try{var Se=v.current.getTotalLength();Se&&b(Se)}catch{}},[]),n!==+n||r!==+r||i!==+i||o!==+o||s!==+s||i===0&&o===0||s===0)return null;var $=Xt("recharts-trapezoid",l);if(!g)return P.createElement("g",null,P.createElement("path",G_({},er(e,!0),{className:$,d:SV(n,r,i,o,s)})));var H=S.current,M=A.current,O=C.current,L=D.current,F=k.current,V="0px ".concat(E===-1?1:E,"px"),G="".concat(E,"px 0px"),z=L5(["strokeDasharray"],f,c);return P.createElement(XI,{animationId:q,key:q,canBegin:E>0,duration:f,easing:c,isActive:g,begin:h},Se=>{var Re=Br(H,i,Se),te=Br(M,o,Se),me=Br(O,s,Se),be=Br(L,n,Se),Oe=Br(F,r,Se);v.current&&(S.current=Re,A.current=te,C.current=me,D.current=be,k.current=Oe);var K=Se>0?{transition:z,strokeDasharray:G}:{strokeDasharray:V};return P.createElement("path",G_({},er(e,!0),{className:$,d:SV(be,Oe,Re,te,me),ref:v,style:bV(bV({},K),e.style)}))})},Tme=["option","shapeType","propTransformer","activeClassName","isActive"];function Eme(t,e){if(t==null)return{};var n,r,i=wme(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function wme(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function AV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function j_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AV(Object(n),!0).forEach(function(r){bme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bme(t,e,n){return(e=Sme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sme(t){var e=Ame(t,"string");return typeof e=="symbol"?e:e+""}function Ame(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xme(t,e){return j_(j_({},e),t)}function Cme(t,e){return t==="symbols"}function xV(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return P.createElement(B5,n);case"trapezoid":return P.createElement(_me,n);case"sector":return P.createElement(z5,n);case"symbols":if(Cme(e))return P.createElement(W6,n);break;default:return null}}function Ime(t){return P.isValidElement(t)?t.props:t}function Rme(t){var{option:e,shapeType:n,propTransformer:r=xme,activeClassName:i="recharts-active-shape",isActive:o}=t,s=Eme(t,Tme),l;if(P.isValidElement(e))l=P.cloneElement(e,j_(j_({},s),Ime(e)));else if(typeof e=="function")l=e(s);else if(pme(e)&&typeof e!="boolean"){var c=r(e,s);l=P.createElement(xV,{shapeType:n,elementProps:c})}else{var f=s;l=P.createElement(xV,{shapeType:n,elementProps:f})}return o?P.createElement(Al,{className:i},l):l}var yH=(t,e)=>{var n=ir();return(r,i)=>o=>{t==null||t(r,i,o),n(Lz({activeIndex:String(i),activeDataKey:e,activeCoordinate:r.tooltipPosition}))}},vH=t=>{var e=ir();return(n,r)=>i=>{t==null||t(n,r,i),e(Tde())}},_H=(t,e)=>{var n=ir();return(r,i)=>o=>{t==null||t(r,i,o),n(Ede({activeIndex:String(i),activeDataKey:e,activeCoordinate:r.tooltipPosition}))}};function Pme(t){var{fn:e,args:n}=t,r=ir(),i=wo();return P.useEffect(()=>{if(!i){var o=e(n);return r(yde(o)),()=>{r(vde(o))}}},[e,n,r,i]),null}var Nme=()=>{};function Mme(t){var{legendPayload:e}=t,n=ir(),r=wo();return P.useEffect(()=>r?Nme:(n(dae(e)),()=>{n(hae(e))}),[n,r,e]),null}var RS,Dme=()=>{var[t]=P.useState(()=>bm("uid-"));return t},kme=(RS=e8.useId)!==null&&RS!==void 0?RS:Dme;function Ome(t,e){var n=kme();return e||(t?"".concat(t,"-").concat(n):n)}var Lme=P.createContext(void 0),Vme=t=>{var{id:e,type:n,children:r}=t,i=Ome("recharts-".concat(n),e);return P.createElement(Lme.Provider,{value:i},r(i))},Ume={cartesianItems:[],polarItems:[]},TH=Ci({name:"graphicalItems",initialState:Ume,reducers:{addCartesianGraphicalItem(t,e){t.cartesianItems.push(e.payload)},replaceCartesianGraphicalItem(t,e){var{prev:n,next:r}=e.payload,i=Ks(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},removeCartesianGraphicalItem(t,e){var n=Ks(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},addPolarGraphicalItem(t,e){t.polarItems.push(e.payload)},removePolarGraphicalItem(t,e){var n=Ks(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)}}}),{addCartesianGraphicalItem:Fme,replaceCartesianGraphicalItem:Bme,removeCartesianGraphicalItem:qme,addPolarGraphicalItem:IIe,removePolarGraphicalItem:RIe}=TH.actions,$me=TH.reducer;function zme(t){var e=ir(),n=P.useRef(null);return P.useEffect(()=>{n.current===null?e(Fme(t)):n.current!==t&&e(Bme({prev:n.current,next:t})),n.current=t},[e,t]),P.useEffect(()=>()=>{n.current&&(e(qme(n.current)),n.current=null)},[e]),null}function CV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function IV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CV(Object(n),!0).forEach(function(r){Hme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hme(t,e,n){return(e=Gme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gme(t){var e=jme(t,"string");return typeof e=="symbol"?e:e+""}function jme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Kme={xAxis:{},yAxis:{},zAxis:{}},EH=Ci({name:"cartesianAxis",initialState:Kme,reducers:{addXAxis(t,e){t.xAxis[e.payload.id]=e.payload},removeXAxis(t,e){delete t.xAxis[e.payload.id]},addYAxis(t,e){t.yAxis[e.payload.id]=e.payload},removeYAxis(t,e){delete t.yAxis[e.payload.id]},addZAxis(t,e){t.zAxis[e.payload.id]=e.payload},removeZAxis(t,e){delete t.zAxis[e.payload.id]},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload;t.yAxis[n]&&(t.yAxis[n]=IV(IV({},t.yAxis[n]),{},{width:r}))}}}),{addXAxis:Wme,removeXAxis:Yme,addYAxis:Jme,removeYAxis:Qme,addZAxis:PIe,removeZAxis:NIe,updateYAxisWidth:Xme}=EH.actions,Zme=EH.reducer,ege=se([or],t=>{if(t)return{top:t.top,bottom:t.bottom,left:t.left,right:t.right}}),tge=se([ege,pa,ma],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),wH=()=>ze(tge),nge="Invariant failed";function rge(t,e){throw new Error(nge)}var ige=["x","y"];function dx(){return dx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dx.apply(null,arguments)}function RV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _p(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RV(Object(n),!0).forEach(function(r){oge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oge(t,e,n){return(e=sge(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sge(t){var e=age(t,"string");return typeof e=="symbol"?e:e+""}function age(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lge(t,e){if(t==null)return{};var n,r,i=uge(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function uge(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function cge(t,e){var{x:n,y:r}=t,i=lge(t,ige),o="".concat(n),s=parseInt(o,10),l="".concat(r),c=parseInt(l,10),f="".concat(e.height||i.height),h=parseInt(f,10),g="".concat(e.width||i.width),v=parseInt(g,10);return _p(_p(_p(_p(_p({},e),i),s?{x:s}:{}),c?{y:c}:{}),{},{height:h,width:v,name:e.name,radius:e.radius})}function ZR(t){return P.createElement(Rme,dx({shapeType:"rectangle",propTransformer:cge,activeClassName:"recharts-active-bar"},t))}var fge=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(We(e))return e;var o=We(r)||rr(r);return o?e(r,i):(o||rge(),n)}},dge={},bH=Ci({name:"errorBars",initialState:dge,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(o=>o.dataKey===r.dataKey&&o.direction===r.direction?i:o))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:MIe,replaceErrorBar:DIe,removeErrorBar:kIe}=bH.actions,hge=bH.reducer,pge=["children"];function mge(t,e){if(t==null)return{};var n,r,i=gge(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function gge(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var yge={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},vge=P.createContext(yge);function _ge(t){var{children:e}=t,n=mge(t,pge);return P.createElement(vge.Provider,{value:n},e)}function SH(t,e){var n,r,i=ze(f=>Bl(f,t)),o=ze(f=>ql(f,e)),s=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:di.allowDataOverflow,l=(r=o==null?void 0:o.allowDataOverflow)!==null&&r!==void 0?r:hi.allowDataOverflow,c=s||l;return{needClip:c,needClipX:s,needClipY:l}}function Tge(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=wH(),{needClipX:o,needClipY:s,needClip:l}=SH(e,n);if(!l)return null;var{x:c,y:f,width:h,height:g}=i;return P.createElement("clipPath",{id:"clipPath-".concat(r)},P.createElement("rect",{x:o?c:c-h/2,y:s?f:f-g/2,width:o?h:h*2,height:s?g:g*2}))}var Ege=["onMouseEnter","onMouseLeave","onClick"],wge=["value","background","tooltipPosition"],bge=["id"],Sge=["onMouseEnter","onClick","onMouseLeave"];function xl(){return xl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xl.apply(null,arguments)}function PV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PV(Object(n),!0).forEach(function(r){Age(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Age(t,e,n){return(e=xge(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xge(t){var e=Cge(t,"string");return typeof e=="symbol"?e:e+""}function Cge(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function K_(t,e){if(t==null)return{};var n,r,i=Ige(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Ige(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Rge=t=>{var{dataKey:e,name:n,fill:r,legendType:i,hide:o}=t;return[{inactive:o,dataKey:e,type:i,color:r,value:M5(n,e),payload:t}]};function Pge(t){var{dataKey:e,stroke:n,strokeWidth:r,fill:i,name:o,hide:s,unit:l}=t;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:e,nameKey:void 0,name:M5(o,e),hide:s,type:t.tooltipType,color:t.fill,unit:l}}}function Nge(t){var e=ze(Td),{data:n,dataKey:r,background:i,allOtherBarProps:o}=t,{onMouseEnter:s,onMouseLeave:l,onClick:c}=o,f=K_(o,Ege),h=yH(s,r),g=vH(l),v=_H(c,r);if(!i||n==null)return null;var E=er(i,!1);return P.createElement(P.Fragment,null,n.map((b,S)=>{var{value:A,background:C,tooltipPosition:D}=b,k=K_(b,wge);if(!C)return null;var q=h(b,S),$=g(b,S),H=v(b,S),M=qr(qr(qr(qr(qr({option:i,isActive:String(S)===e},k),{},{fill:"#eee"},C),E),LI(f,b,S)),{},{onMouseEnter:q,onMouseLeave:$,onClick:H,dataKey:r,index:S,className:"recharts-bar-background-rectangle"});return P.createElement(ZR,xl({key:"background-bar-".concat(S)},M))}))}function Mge(t){var{showLabels:e,children:n,rects:r}=t,i=r==null?void 0:r.map(o=>{var s={x:o.x,y:o.y,width:o.width,height:o.height};return qr(qr({},s),{},{value:o.value,payload:o.payload,parentViewBox:o.parentViewBox,viewBox:s,fill:o.fill})});return P.createElement(ome,{value:e?i:void 0},n)}function Dge(t){var{shape:e,activeBar:n,baseProps:r,entry:i,index:o,dataKey:s}=t,l=ze(Td),c=ze(Yz),f=n&&String(o)===l&&(c==null||s===c),h=f?n:e;return P.createElement(ZR,xl({},r,i,{isActive:f,option:h,index:o,dataKey:s}))}function kge(t){var{shape:e,baseProps:n,entry:r,index:i,dataKey:o}=t;return P.createElement(ZR,xl({},n,r,{isActive:!1,option:e,index:i,dataKey:o}))}function Oge(t){var{data:e,props:n}=t,r=K0(n),{id:i}=r,o=K_(r,bge),{shape:s,dataKey:l,activeBar:c}=n,{onMouseEnter:f,onClick:h,onMouseLeave:g}=n,v=K_(n,Sge),E=yH(f,l),b=vH(g),S=_H(h,l);return e?P.createElement(P.Fragment,null,e.map((A,C)=>P.createElement(Al,xl({className:"recharts-bar-rectangle"},LI(v,A,C),{onMouseEnter:E(A,C),onMouseLeave:b(A,C),onClick:S(A,C),key:"rectangle-".concat(A==null?void 0:A.x,"-").concat(A==null?void 0:A.y,"-").concat(A==null?void 0:A.value,"-").concat(C)}),c?P.createElement(Dge,{shape:s,activeBar:c,baseProps:o,entry:A,index:C,dataKey:l}):P.createElement(kge,{shape:s,baseProps:o,entry:A,index:C,dataKey:l})))):null}function Lge(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:i,isAnimationActive:o,animationBegin:s,animationDuration:l,animationEasing:c,onAnimationEnd:f,onAnimationStart:h}=e,g=n.current,v=ZI(e,"recharts-bar-"),[E,b]=P.useState(!1),S=!E,A=P.useCallback(()=>{typeof f=="function"&&f(),b(!1)},[f]),C=P.useCallback(()=>{typeof h=="function"&&h(),b(!0)},[h]);return P.createElement(Mge,{showLabels:S,rects:r},P.createElement(XI,{animationId:v,begin:s,duration:l,isActive:o,easing:c,onAnimationEnd:A,onAnimationStart:C,key:v},D=>{var k=D===1?r:r==null?void 0:r.map((q,$)=>{var H=g&&g[$];if(H)return qr(qr({},q),{},{x:Br(H.x,q.x,D),y:Br(H.y,q.y,D),width:Br(H.width,q.width,D),height:Br(H.height,q.height,D)});if(i==="horizontal"){var M=Br(0,q.height,D);return qr(qr({},q),{},{y:q.y+q.height-M,height:M})}var O=Br(0,q.width,D);return qr(qr({},q),{},{width:O})});return D>0&&(n.current=k??null),k==null?null:P.createElement(Al,null,P.createElement(Oge,{props:e,data:k}))}),P.createElement(lme,{label:e.label}),e.children)}function Vge(t){var e=P.useRef(null);return P.createElement(Lge,{previousRectanglesRef:e,props:t})}var AH=0,Uge=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:Hr(t,e)}};class Fge extends P.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:i,xAxisId:o,yAxisId:s,needClip:l,background:c,id:f}=this.props;if(e||n==null)return null;var h=Xt("recharts-bar",i),g=f;return P.createElement(Al,{className:h,id:f},l&&P.createElement("defs",null,P.createElement(Tge,{clipPathId:g,xAxisId:o,yAxisId:s})),P.createElement(Al,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(g,")"):void 0},P.createElement(Nge,{data:n,dataKey:r,background:c,allOtherBarProps:this.props}),P.createElement(Vge,this.props)))}}var Bge={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!ag.isSsr,legendType:"rect",minPointSize:AH,xAxisId:0,yAxisId:0};function qge(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:o,activeBar:s,animationBegin:l,animationDuration:c,animationEasing:f,isAnimationActive:h}=t,{needClip:g}=SH(e,n),v=QI(),E=wo(),b=Pre(t.children,oH),S=ze(D=>pye(D,e,n,E,t.id,b));if(v!=="vertical"&&v!=="horizontal")return null;var A,C=S==null?void 0:S[0];return C==null||C.height==null||C.width==null?A=0:A=v==="vertical"?C.height/2:C.width/2,P.createElement(_ge,{xAxisId:e,yAxisId:n,data:S,dataPointFormatter:Uge,errorBarOffset:A},P.createElement(Fge,xl({},t,{layout:v,needClip:g,data:S,xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:o,activeBar:s,animationBegin:l,animationDuration:c,animationEasing:f,isAnimationActive:h})))}function $ge(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:o,xAxis:s,yAxis:l,xAxisTicks:c,yAxisTicks:f,stackedData:h,displayedData:g,offset:v,cells:E,parentViewBox:b}=t,S=e==="horizontal"?l:s,A=h?S.scale.domain():null,C=qse({numericAxis:S});return g.map((D,k)=>{var q,$,H,M,O,L;h?q=Ose(h[k],A):(q=Hr(D,n),Array.isArray(q)||(q=[C,q]));var F=fge(r,AH)(q[1],k);if(e==="horizontal"){var V,[G,z]=[l.scale(q[0]),l.scale(q[1])];$=S2({axis:s,ticks:c,bandSize:o,offset:i.offset,entry:D,index:k}),H=(V=z??G)!==null&&V!==void 0?V:void 0,M=i.size;var Se=G-z;if(O=Qi(Se)?0:Se,L={x:$,y:v.top,width:M,height:v.height},Math.abs(F)>0&&Math.abs(O)<Math.abs(F)){var Re=Ti(O||F)*(Math.abs(F)-Math.abs(O));H-=Re,O+=Re}}else{var[te,me]=[s.scale(q[0]),s.scale(q[1])];if($=te,H=S2({axis:l,ticks:f,bandSize:o,offset:i.offset,entry:D,index:k}),M=me-te,O=i.size,L={x:v.left,y:H,width:v.width,height:O},Math.abs(F)>0&&Math.abs(M)<Math.abs(F)){var be=Ti(M||F)*(Math.abs(F)-Math.abs(M));M+=be}}if($==null||H==null||M==null||O==null)return null;var Oe=qr(qr({},D),{},{x:$,y:H,width:M,height:O,value:h?q:q[1],payload:D,background:L,tooltipPosition:{x:$+M/2,y:H+O/2},parentViewBox:b},E&&E[k]&&E[k].props);return Oe}).filter(Boolean)}function xH(t){var e=Ll(t,Bge),n=wo();return P.createElement(Vme,{id:e.id,type:"bar"},r=>P.createElement(P.Fragment,null,P.createElement(Mme,{legendPayload:Rge(e)}),P.createElement(Pme,{fn:Pge,args:e}),P.createElement(zme,{type:"bar",id:r,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:Bse(e.stackId),hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:n}),P.createElement(qge,xl({},e,{id:r}))))}xH.displayName="Bar";function NV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NV(Object(n),!0).forEach(function(r){zge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zge(t,e,n){return(e=Hge(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hge(t){var e=Gge(t,"string");return typeof e=="symbol"?e:e+""}function Gge(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jge=(t,e)=>e,Kge=(t,e,n)=>n,Wge=(t,e,n,r)=>r,Yge=(t,e,n,r,i)=>i,vg=se([kR,Yge],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),Jge=se([vg],t=>t==null?void 0:t.maxBarSize),Qge=(t,e,n,r,i,o)=>o,MV=(t,e,n)=>{var r=n??t;if(!rr(r))return vo(r,e,0)},Xge=se([Dt,kR,jge,Kge,Wge],(t,e,n,r,i)=>e.filter(o=>t==="horizontal"?o.xAxisId===n:o.yAxisId===r).filter(o=>o.isPanorama===i).filter(o=>o.hide===!1).filter(o=>o.type==="bar")),Zge=(t,e,n,r)=>{var i=Dt(t);return i==="horizontal"?sx(t,"yAxis",n,r):sx(t,"xAxis",e,r)},eye=(t,e,n)=>{var r=Dt(t);return r==="horizontal"?FL(t,"xAxis",e):FL(t,"yAxis",n)},tye=(t,e,n)=>{var r={},i=t.filter(vT),o=t.filter(f=>f.stackId==null),s=i.reduce((f,h)=>(f[h.stackId]||(f[h.stackId]=[]),f[h.stackId].push(h),f),r),l=Object.entries(s).map(f=>{var[h,g]=f,v=g.map(b=>b.dataKey),E=MV(e,n,g[0].barSize);return{stackId:h,dataKeys:v,barSize:E}}),c=o.map(f=>{var h=[f.dataKey].filter(v=>v!=null),g=MV(e,n,f.barSize);return{stackId:void 0,dataKeys:h,barSize:g}});return[...l,...c]},nye=se([Xge,yfe,eye],tye),rye=(t,e,n,r,i)=>{var o,s,l=vg(t,e,n,r,i);if(l!=null){var c=Dt(t),f=F$(t),{maxBarSize:h}=l,g=rr(h)?f:h,v,E;return c==="horizontal"?(v=_d(t,"xAxis",e,r),E=vd(t,"xAxis",e,r)):(v=_d(t,"yAxis",n,r),E=vd(t,"yAxis",n,r)),(o=(s=WI(v,E,!0))!==null&&s!==void 0?s:g)!==null&&o!==void 0?o:0}},CH=(t,e,n,r)=>{var i=Dt(t),o,s;return i==="horizontal"?(o=_d(t,"xAxis",e,r),s=vd(t,"xAxis",e,r)):(o=_d(t,"yAxis",n,r),s=vd(t,"yAxis",n,r)),WI(o,s)};function iye(t,e,n,r,i){var o=r.length;if(!(o<1)){var s=vo(t,n,0,!0),l,c=[];if(xi(r[0].barSize)){var f=!1,h=n/o,g=r.reduce((C,D)=>C+(D.barSize||0),0);g+=(o-1)*s,g>=n&&(g-=(o-1)*s,s=0),g>=n&&h>0&&(f=!0,h*=.9,g=o*h);var v=(n-g)/2>>0,E={offset:v-s,size:0};l=r.reduce((C,D)=>{var k,q={stackId:D.stackId,dataKeys:D.dataKeys,position:{offset:E.offset+E.size+s,size:f?h:(k=D.barSize)!==null&&k!==void 0?k:0}},$=[...C,q];return E=$[$.length-1].position,$},c)}else{var b=vo(e,n,0,!0);n-2*b-(o-1)*s<=0&&(s=0);var S=(n-2*b-(o-1)*s)/o;S>1&&(S>>=0);var A=xi(i)?Math.min(S,i):S;l=r.reduce((C,D,k)=>[...C,{stackId:D.stackId,dataKeys:D.dataKeys,position:{offset:b+(S+s)*k+(S-A)/2,size:A}}],c)}return l}}var oye=(t,e,n,r,i,o,s)=>{var l=rr(s)?e:s,c=iye(n,r,i!==o?i:o,t,l);return i!==o&&c!=null&&(c=c.map(f=>pv(pv({},f),{},{position:pv(pv({},f.position),{},{offset:f.position.offset-i/2})}))),c},sye=se([nye,F$,gfe,B$,rye,CH,Jge],oye),aye=(t,e,n,r)=>_d(t,"xAxis",e,r),lye=(t,e,n,r)=>_d(t,"yAxis",n,r),uye=(t,e,n,r)=>vd(t,"xAxis",e,r),cye=(t,e,n,r)=>vd(t,"yAxis",n,r),fye=se([sye,vg],(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}}),dye=(t,e)=>{var n=MR(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var i=t[r];if(i){var{stackedData:o}=i;if(o)return o.find(s=>s.key===n)}}}},hye=se([Zge,vg],dye),pye=se([or,YI,aye,lye,uye,cye,fye,Dt,bR,CH,hye,vg,Qge],(t,e,n,r,i,o,s,l,c,f,h,g,v)=>{var{chartData:E,dataStartIndex:b,dataEndIndex:S}=c;if(!(g==null||s==null||e==null||l!=="horizontal"&&l!=="vertical"||n==null||r==null||i==null||o==null||f==null)){var{data:A}=g,C;if(A!=null&&A.length>0?C=A:C=E==null?void 0:E.slice(b,S+1),C!=null)return $ge({layout:l,barSettings:g,pos:s,parentViewBox:e,bandSize:f,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:o,stackedData:h,displayedData:C,offset:t,cells:v})}}),mye=t=>{var{chartData:e}=t,n=ir(),r=wo();return P.useEffect(()=>r?()=>{}:(n(WL(e)),()=>{n(WL(void 0))}),[e,n,r]),null},DV={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},IH=Ci({name:"brush",initialState:DV,reducers:{setBrushSettings(t,e){return e.payload==null?DV:e.payload}}}),{setBrushSettings:OIe}=IH.actions,gye=IH.reducer;function yye(t,e,n){return(e=vye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vye(t){var e=_ye(t,"string");return typeof e=="symbol"?e:e+""}function _ye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class e1{static create(e){return new e1(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(e)+o}default:return this.scale(e)}if(n){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+s}return this.scale(e)}}isInRange(e){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?e>=r&&e<=i:e>=i&&e<=r}}yye(e1,"EPS",1e-4);function Tye(t){return(t%180+180)%180}var Eye=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=Tye(i),s=o*Math.PI/180,l=Math.atan(r/n),c=s>l&&s<Math.PI-l?r/Math.sin(s):n/Math.cos(s);return Math.abs(c)},wye={dots:[],areas:[],lines:[]},RH=Ci({name:"referenceElements",initialState:wye,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=Ks(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=Ks(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=Ks(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:LIe,removeDot:VIe,addArea:UIe,removeArea:FIe,addLine:BIe,removeLine:qIe}=RH.actions,bye=RH.reducer,Sye=P.createContext(void 0),Aye=t=>{var{children:e}=t,[n]=P.useState("".concat(bm("recharts"),"-clip")),r=wH();if(r==null)return null;var{x:i,y:o,width:s,height:l}=r;return P.createElement(Sye.Provider,{value:n},P.createElement("defs",null,P.createElement("clipPath",{id:n},P.createElement("rect",{x:i,y:o,height:l,width:s}))),e)};function PS(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function PH(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function xye(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Eye(r,n)}function Cye(t,e,n){var r=n==="width",{x:i,y:o,width:s,height:l}=t;return e===1?{start:r?i:o,end:r?i+s:o+l}:{start:r?i+s:o+l,end:r?i:o}}function W_(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var o=n();return t*(e-t*o/2-r)>=0&&t*(e+t*o/2-i)<=0}function Iye(t,e){return PH(t,e+1)}function Rye(t,e,n,r,i){for(var o=(r||[]).slice(),{start:s,end:l}=e,c=0,f=1,h=s,g=function(){var b=r==null?void 0:r[c];if(b===void 0)return{v:PH(r,f)};var S=c,A,C=()=>(A===void 0&&(A=n(b,S)),A),D=b.coordinate,k=c===0||W_(t,D,C,h,l);k||(c=0,h=s,f+=1),k&&(h=D+t*(C()/2+i),c+=f)},v;f<=o.length;)if(v=g(),v)return v.v;return[]}function kV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function br(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kV(Object(n),!0).forEach(function(r){Pye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pye(t,e,n){return(e=Nye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nye(t){var e=Mye(t,"string");return typeof e=="symbol"?e:e+""}function Mye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Dye(t,e,n,r,i){for(var o=(r||[]).slice(),s=o.length,{start:l}=e,{end:c}=e,f=function(v){var E=o[v],b,S=()=>(b===void 0&&(b=n(E,v)),b);if(v===s-1){var A=t*(E.coordinate+t*S()/2-c);o[v]=E=br(br({},E),{},{tickCoord:A>0?E.coordinate-A*t:E.coordinate})}else o[v]=E=br(br({},E),{},{tickCoord:E.coordinate});var C=W_(t,E.tickCoord,S,l,c);C&&(c=E.tickCoord-t*(S()/2+i),o[v]=br(br({},E),{},{isShow:!0}))},h=s-1;h>=0;h--)f(h);return o}function kye(t,e,n,r,i,o){var s=(r||[]).slice(),l=s.length,{start:c,end:f}=e;if(o){var h=r[l-1],g=n(h,l-1),v=t*(h.coordinate+t*g/2-f);s[l-1]=h=br(br({},h),{},{tickCoord:v>0?h.coordinate-v*t:h.coordinate});var E=W_(t,h.tickCoord,()=>g,c,f);E&&(f=h.tickCoord-t*(g/2+i),s[l-1]=br(br({},h),{},{isShow:!0}))}for(var b=o?l-1:l,S=function(D){var k=s[D],q,$=()=>(q===void 0&&(q=n(k,D)),q);if(D===0){var H=t*(k.coordinate-t*$()/2-c);s[D]=k=br(br({},k),{},{tickCoord:H<0?k.coordinate-H*t:k.coordinate})}else s[D]=k=br(br({},k),{},{tickCoord:k.coordinate});var M=W_(t,k.tickCoord,$,c,f);M&&(c=k.tickCoord+t*($()/2+i),s[D]=br(br({},k),{},{isShow:!0}))},A=0;A<b;A++)S(A);return s}function Oye(t,e,n){var{tick:r,ticks:i,viewBox:o,minTickGap:s,orientation:l,interval:c,tickFormatter:f,unit:h,angle:g}=t;if(!i||!i.length||!r)return[];if(We(c)||ag.isSsr){var v;return(v=Iye(i,We(c)?c:0))!==null&&v!==void 0?v:[]}var E=[],b=l==="top"||l==="bottom"?"width":"height",S=h&&b==="width"?Yp(h,{fontSize:e,letterSpacing:n}):{width:0,height:0},A=(k,q)=>{var $=typeof f=="function"?f(k.value,q):k.value;return b==="width"?xye(Yp($,{fontSize:e,letterSpacing:n}),S,g):Yp($,{fontSize:e,letterSpacing:n})[b]},C=i.length>=2?Ti(i[1].coordinate-i[0].coordinate):1,D=Cye(o,C,b);return c==="equidistantPreserveStart"?Rye(C,D,A,i,s):(c==="preserveStart"||c==="preserveStartEnd"?E=kye(C,D,A,i,s,c==="preserveStartEnd"):E=Dye(C,D,A,i,s),E.filter(k=>k.isShow))}var Lye=["viewBox"],Vye=["viewBox"];function Cf(){return Cf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cf.apply(null,arguments)}function OV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OV(Object(n),!0).forEach(function(r){t1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function LV(t,e){if(t==null)return{};var n,r,i=Uye(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Uye(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function t1(t,e,n){return(e=Fye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fye(t){var e=Bye(t,"string");return typeof e=="symbol"?e:e+""}function Bye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class Kd extends P.Component{constructor(e){super(e),this.tickRefs=P.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(e,n){var{viewBox:r}=e,i=LV(e,Lye),o=this.props,{viewBox:s}=o,l=LV(o,Vye);return!PS(r,s)||!PS(i,l)||!PS(n,this.state)}getTickLineCoord(e){var{x:n,y:r,width:i,height:o,orientation:s,tickSize:l,mirror:c,tickMargin:f}=this.props,h,g,v,E,b,S,A=c?-1:1,C=e.tickSize||l,D=We(e.tickCoord)?e.tickCoord:e.coordinate;switch(s){case"top":h=g=e.coordinate,E=r+ +!c*o,v=E-A*C,S=v-A*f,b=D;break;case"left":v=E=e.coordinate,g=n+ +!c*i,h=g-A*C,b=h-A*f,S=D;break;case"right":v=E=e.coordinate,g=n+ +c*i,h=g+A*C,b=h+A*f,S=D;break;default:h=g=e.coordinate,E=r+ +c*o,v=E+A*C,S=v+A*f,b=D;break}return{line:{x1:h,y1:v,x2:g,y2:E},tick:{x:b,y:S}}}getTickTextAnchor(){var{orientation:e,mirror:n}=this.props;switch(e){case"left":return n?"start":"end";case"right":return n?"end":"start";default:return"middle"}}getTickVerticalAnchor(){var{orientation:e,mirror:n}=this.props;switch(e){case"left":case"right":return"middle";case"top":return n?"start":"end";default:return n?"end":"start"}}renderAxisLine(){var{x:e,y:n,width:r,height:i,orientation:o,mirror:s,axisLine:l}=this.props,c=qn(qn(qn({},er(this.props,!1)),er(l,!1)),{},{fill:"none"});if(o==="top"||o==="bottom"){var f=+(o==="top"&&!s||o==="bottom"&&s);c=qn(qn({},c),{},{x1:e,y1:n+f*i,x2:e+r,y2:n+f*i})}else{var h=+(o==="left"&&!s||o==="right"&&s);c=qn(qn({},c),{},{x1:e+h*r,y1:n,x2:e+h*r,y2:n+i})}return P.createElement("line",Cf({},c,{className:Xt("recharts-cartesian-axis-line",fd(l,"className"))}))}static renderTickItem(e,n,r){var i,o=Xt(n.className,"recharts-cartesian-axis-tick-value");if(P.isValidElement(e))i=P.cloneElement(e,qn(qn({},n),{},{className:o}));else if(typeof e=="function")i=e(qn(qn({},n),{},{className:o}));else{var s="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(s=Xt(s,e.className)),i=P.createElement(QR,Cf({},n,{className:s}),r)}return i}renderTicks(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:i,stroke:o,tick:s,tickFormatter:l,unit:c,padding:f,tickTextProps:h}=this.props,g=Oye(qn(qn({},this.props),{},{ticks:r}),e,n),v=this.getTickTextAnchor(),E=this.getTickVerticalAnchor(),b=K0(this.props),S=er(s,!1),A=qn(qn({},b),{},{fill:"none"},er(i,!1)),C=g.map((D,k)=>{var{line:q,tick:$}=this.getTickLineCoord(D),H=qn(qn(qn(qn({textAnchor:v,verticalAnchor:E},b),{},{stroke:"none",fill:o},S),$),{},{index:k,payload:D,visibleTicksCount:g.length,tickFormatter:l,padding:f},h);return P.createElement(Al,Cf({className:"recharts-cartesian-axis-tick",key:"tick-".concat(D.value,"-").concat(D.coordinate,"-").concat(D.tickCoord)},LI(this.props,D,k)),i&&P.createElement("line",Cf({},A,q,{className:Xt("recharts-cartesian-axis-tick-line",fd(i,"className"))})),s&&Kd.renderTickItem(s,H,"".concat(typeof l=="function"?l(D.value,k):D.value).concat(c||"")))});return C.length>0?P.createElement("g",{className:"recharts-cartesian-axis-ticks"},C):null}render(){var{axisLine:e,width:n,height:r,className:i,hide:o}=this.props;if(o)return null;var{ticks:s}=this.props;return n!=null&&n<=0||r!=null&&r<=0?null:P.createElement(Al,{className:Xt("recharts-cartesian-axis",i),ref:l=>{if(l){var c=l.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(c);var f=c[0];if(f){var h=window.getComputedStyle(f).fontSize,g=window.getComputedStyle(f).letterSpacing;(h!==this.state.fontSize||g!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(f).fontSize,letterSpacing:window.getComputedStyle(f).letterSpacing})}}}},e&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,s),P.createElement(Upe,{x:this.props.x,y:this.props.y,width:this.props.width,height:this.props.height},P.createElement(Wpe,{label:this.props.label}),this.props.children))}}t1(Kd,"displayName","CartesianAxis");t1(Kd,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var qye=["children"],$ye=["dangerouslySetInnerHTML","ticks"],zye=["id"];function NH(t,e,n){return(e=Hye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hye(t){var e=Gye(t,"string");return typeof e=="symbol"?e:e+""}function Gye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hx(){return hx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hx.apply(null,arguments)}function px(t,e){if(t==null)return{};var n,r,i=jye(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function jye(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Kye(t){var e=ir(),n=P.useMemo(()=>{var{children:r}=t,i=px(t,qye);return i},[t]);return P.useEffect(()=>(e(Wme(n)),()=>{e(Yme(n))}),[n,e]),t.children}var Wye=t=>{var{xAxisId:e,className:n}=t,r=ze(YI),i=wo(),o="xAxis",s=ze(A=>Hd(A,o,e,i)),l=ze(A=>Pz(A,o,e,i)),c=ze(A=>xz(A,e)),f=ze(A=>lde(A,e)),h=ze(A=>Y$(A,e));if(c==null||f==null||h==null)return null;var{dangerouslySetInnerHTML:g,ticks:v}=t,E=px(t,$ye),{id:b}=h,S=px(h,zye);return P.createElement(Kd,hx({},E,S,{scale:s,x:f.x,y:f.y,width:c.width,height:c.height,className:Xt("recharts-".concat(o," ").concat(o),n),viewBox:r,ticks:l}))},Yye=t=>{var e,n,r,i,o;return P.createElement(Kye,{interval:(e=t.interval)!==null&&e!==void 0?e:"preserveEnd",id:t.xAxisId,scale:t.scale,type:t.type,padding:t.padding,allowDataOverflow:t.allowDataOverflow,domain:t.domain,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,includeHidden:(n=t.includeHidden)!==null&&n!==void 0?n:!1,reversed:t.reversed,ticks:t.ticks,height:t.height,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:(r=t.angle)!==null&&r!==void 0?r:0,minTickGap:(i=t.minTickGap)!==null&&i!==void 0?i:5,tick:(o=t.tick)!==null&&o!==void 0?o:!0,tickFormatter:t.tickFormatter},P.createElement(Wye,t))};class n1 extends P.Component{render(){return P.createElement(Yye,this.props)}}NH(n1,"displayName","XAxis");NH(n1,"defaultProps",{allowDataOverflow:di.allowDataOverflow,allowDecimals:di.allowDecimals,allowDuplicatedCategory:di.allowDuplicatedCategory,height:di.height,hide:!1,mirror:di.mirror,orientation:di.orientation,padding:di.padding,reversed:di.reversed,scale:di.scale,tickCount:di.tickCount,type:di.type,xAxisId:0});var Jye=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:o=0}=t,s=0;if(e){e.forEach(h=>{if(h){var g=h.getBoundingClientRect();g.width>s&&(s=g.width)}});var l=n?n.getBoundingClientRect().width:0,c=i+o,f=s+c+l+(n?r:0);return Math.round(f)}return 0},Qye=["dangerouslySetInnerHTML","ticks"],Xye=["id"];function MH(t,e,n){return(e=Zye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zye(t){var e=eve(t,"string");return typeof e=="symbol"?e:e+""}function eve(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mx(){return mx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mx.apply(null,arguments)}function VV(t,e){if(t==null)return{};var n,r,i=tve(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function tve(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function nve(t){var e=ir();return P.useEffect(()=>(e(Jme(t)),()=>{e(Qme(t))}),[t,e]),null}var rve=t=>{var e,{yAxisId:n,className:r,width:i,label:o}=t,s=P.useRef(null),l=P.useRef(null),c=ze(YI),f=wo(),h=ir(),g="yAxis",v=ze(H=>Hd(H,g,n,f)),E=ze(H=>Cz(H,n)),b=ze(H=>ude(H,n)),S=ze(H=>Pz(H,g,n,f)),A=ze(H=>J$(H,n));if(P.useLayoutEffect(()=>{var H;if(!(i!=="auto"||!E||XR(o)||P.isValidElement(o)||A==null)){var M=s.current,O=M==null||(H=M.tickRefs)===null||H===void 0?void 0:H.current,{tickSize:L,tickMargin:F}=M.props,V=Jye({ticks:O,label:l.current,labelGapWithTick:5,tickSize:L,tickMargin:F});Math.round(E.width)!==Math.round(V)&&h(Xme({id:n,width:V}))}},[s,s==null||(e=s.current)===null||e===void 0||(e=e.tickRefs)===null||e===void 0?void 0:e.current,E==null?void 0:E.width,E,h,o,n,i]),E==null||b==null||A==null)return null;var{dangerouslySetInnerHTML:C,ticks:D}=t,k=VV(t,Qye),{id:q}=A,$=VV(A,Xye);return P.createElement(Kd,mx({},k,$,{ref:s,labelRef:l,scale:v,x:b.x,y:b.y,tickTextProps:i==="auto"?{width:void 0}:{width:i},width:E.width,height:E.height,className:Xt("recharts-".concat(g," ").concat(g),r),viewBox:c,ticks:S}))},ive=t=>{var e,n,r,i,o;return P.createElement(P.Fragment,null,P.createElement(nve,{interval:(e=t.interval)!==null&&e!==void 0?e:"preserveEnd",id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:(n=t.includeHidden)!==null&&n!==void 0?n:!1,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:(r=t.angle)!==null&&r!==void 0?r:0,minTickGap:(i=t.minTickGap)!==null&&i!==void 0?i:5,tick:(o=t.tick)!==null&&o!==void 0?o:!0,tickFormatter:t.tickFormatter}),P.createElement(rve,t))},ove={allowDataOverflow:hi.allowDataOverflow,allowDecimals:hi.allowDecimals,allowDuplicatedCategory:hi.allowDuplicatedCategory,hide:!1,mirror:hi.mirror,orientation:hi.orientation,padding:hi.padding,reversed:hi.reversed,scale:hi.scale,tickCount:hi.tickCount,type:hi.type,width:hi.width,yAxisId:0};class r1 extends P.Component{render(){return P.createElement(ive,this.props)}}MH(r1,"displayName","YAxis");MH(r1,"defaultProps",ove);var NS={exports:{}},MS={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UV;function sve(){if(UV)return MS;UV=1;var t=Ed();function e(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,o=t.useEffect,s=t.useMemo,l=t.useDebugValue;return MS.useSyncExternalStoreWithSelector=function(c,f,h,g,v){var E=i(null);if(E.current===null){var b={hasValue:!1,value:null};E.current=b}else b=E.current;E=s(function(){function A($){if(!C){if(C=!0,D=$,$=g($),v!==void 0&&b.hasValue){var H=b.value;if(v(H,$))return k=H}return k=$}if(H=k,n(D,$))return H;var M=g($);return v!==void 0&&v(H,M)?(D=$,H):(D=$,k=M)}var C=!1,D,k,q=h===void 0?null:h;return[function(){return A(f())},q===null?void 0:function(){return A(q())}]},[f,h,g,v]);var S=r(c,E[0],E[1]);return o(function(){b.hasValue=!0,b.value=S},[S]),l(S),S},MS}var FV;function ave(){return FV||(FV=1,NS.exports=sve()),NS.exports}ave();function lve(t){t()}function uve(){let t=null,e=null;return{clear(){t=null,e=null},notify(){lve(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var BV={notify(){},get:()=>[]};function cve(t,e){let n,r=BV,i=0,o=!1;function s(S){h();const A=r.subscribe(S);let C=!1;return()=>{C||(C=!0,A(),g())}}function l(){r.notify()}function c(){b.onStateChange&&b.onStateChange()}function f(){return o}function h(){i++,n||(n=t.subscribe(c),r=uve())}function g(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=BV)}function v(){o||(o=!0,h())}function E(){o&&(o=!1,g())}const b={addNestedSub:s,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:f,trySubscribe:v,tryUnsubscribe:E,getListeners:()=>r};return b}var fve=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",dve=fve(),hve=()=>typeof navigator<"u"&&navigator.product==="ReactNative",pve=hve(),mve=()=>dve||pve?P.useLayoutEffect:P.useEffect,gve=mve(),DS=Symbol.for("react-redux-context"),kS=typeof globalThis<"u"?globalThis:{};function yve(){if(!P.createContext)return{};const t=kS[DS]??(kS[DS]=new Map);let e=t.get(P.createContext);return e||(e=P.createContext(null),t.set(P.createContext,e)),e}var vve=yve();function _ve(t){const{children:e,context:n,serverState:r,store:i}=t,o=P.useMemo(()=>{const c=cve(i);return{store:i,subscription:c,getServerState:r?()=>r:void 0}},[i,r]),s=P.useMemo(()=>i.getState(),[i]);gve(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),s!==i.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,s]);const l=n||vve;return P.createElement(l.Provider,{value:o},e)}var Tve=_ve,Eve=(t,e)=>e,i1=se([Eve,Dt,j$,Gn,Gz,ya,hhe,or],vhe),o1=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},DH=Xi("mouseClick"),kH=og();kH.startListening({actionCreator:DH,effect:(t,e)=>{var n=t.payload,r=i1(e.getState(),o1(n));(r==null?void 0:r.activeIndex)!=null&&e.dispatch(wde({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var gx=Xi("mouseMove"),OH=og();OH.startListening({actionCreator:gx,effect:(t,e)=>{var n=t.payload,r=e.getState(),i=$R(r,r.tooltip.settings.shared),o=i1(r,o1(n));i==="axis"&&((o==null?void 0:o.activeIndex)!=null?e.dispatch(Uz({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):e.dispatch(Vz()))}});function wve(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":e}var qV={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},LH=Ci({name:"rootProps",initialState:qV,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:qV.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className}}}),bve=LH.reducer,{updateOptions:Sve}=LH.actions,VH=Ci({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:$Ie}=VH.actions,Ave=VH.reducer,UH=Xi("keyDown"),FH=Xi("focus"),s1=og();s1.startListening({actionCreator:UH,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,o=t.payload;if(!(o!=="ArrowRight"&&o!=="ArrowLeft"&&o!=="Enter")){var s=Number(zR(i,jd(n))),l=ya(n);if(o==="Enter"){var c=z_(n,"axis","hover",String(i.index));e.dispatch(lx({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:c}));return}var f=hde(n),h=f==="left-to-right"?1:-1,g=o==="ArrowRight"?1:-1,v=s+g*h;if(!(l==null||v>=l.length||v<0)){var E=z_(n,"axis","hover",String(v));e.dispatch(lx({active:!0,activeIndex:v.toString(),activeDataKey:void 0,activeCoordinate:E}))}}}}});s1.startListening({actionCreator:FH,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var o="0",s=z_(n,"axis","hover",String(o));e.dispatch(lx({activeDataKey:void 0,active:!0,activeIndex:o,activeCoordinate:s}))}}}});var qi=Xi("externalEvent"),BH=og();BH.startListening({actionCreator:qi,effect:(t,e)=>{if(t.payload.handler!=null){var n=e.getState(),r={activeCoordinate:ihe(n),activeDataKey:Yz(n),activeIndex:Td(n),activeLabel:Wz(n),activeTooltipIndex:Td(n),isTooltipActive:ohe(n)};t.payload.handler(r,t.payload.reactEvent)}}});var xve=se([Gd],t=>t.tooltipItemPayloads),Cve=se([xve,gg,(t,e,n)=>e,(t,e,n)=>n],(t,e,n,r)=>{var i=t.find(l=>l.settings.dataKey===r);if(i!=null){var{positions:o}=i;if(o!=null){var s=e(o,n);return s}}}),qH=Xi("touchMove"),$H=og();$H.startListening({actionCreator:qH,effect:(t,e)=>{var n=t.payload,r=e.getState(),i=$R(r,r.tooltip.settings.shared);if(i==="axis"){var o=i1(r,o1({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));(o==null?void 0:o.activeIndex)!=null&&e.dispatch(Uz({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(i==="item"){var s,l=n.touches[0],c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var f=c.getAttribute(Yse),h=(s=c.getAttribute(Jse))!==null&&s!==void 0?s:void 0,g=Cve(e.getState(),f,h);e.dispatch(Lz({activeDataKey:h,activeIndex:f,activeCoordinate:g}))}}});var Ive=l5({brush:gye,cartesianAxis:Zme,chartData:Ohe,errorBars:hge,graphicalItems:$me,layout:vse,legend:pae,options:Phe,polarAxis:cme,polarOptions:Ave,referenceElements:bye,rootProps:bve,tooltip:bde}),Rve=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return zoe({reducer:Ive,preloadedState:e,middleware:r=>r({serializableCheck:!1}).concat([kH.middleware,OH.middleware,s1.middleware,BH.middleware,$H.middleware]),devTools:!!window.RECHARTS_DEV_TOOLS_ENABLED&&{serialize:{replacer:wve},name:"recharts-".concat(n)}})};function Pve(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=wo(),o=P.useRef(null);if(i)return n;o.current==null&&(o.current=Rve(e,r));var s=$I;return P.createElement(Tve,{context:s,store:o.current},n)}function Nve(t){var{layout:e,width:n,height:r,margin:i}=t,o=ir(),s=wo();return P.useEffect(()=>{s||(o(mse(e)),o(gse({width:n,height:r})),o(pse(i)))},[o,s,e,n,r,i]),null}function Mve(t){var e=ir();return P.useEffect(()=>{e(Sve(t))},[e,t]),null}var Dve=["children"];function kve(t,e){if(t==null)return{};var n,r,i=Ove(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Ove(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Y_(){return Y_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Y_.apply(null,arguments)}var Lve={width:"100%",height:"100%"},Vve=P.forwardRef((t,e)=>{var n=uae(),r=cae(),i=O5();if(!C_(n)||!C_(r))return null;var{children:o,otherAttributes:s,title:l,desc:c}=t,f,h;return typeof s.tabIndex=="number"?f=s.tabIndex:f=i?0:void 0,typeof s.role=="string"?h=s.role:h=i?"application":void 0,P.createElement(P6,Y_({},s,{title:l,desc:c,role:h,tabIndex:f,width:n,height:r,style:Lve,ref:e}),o)}),Uve=t=>{var{children:e}=t,n=ze(sT);if(!n)return null;var{width:r,height:i,y:o,x:s}=n;return P.createElement(P6,{width:r,height:i,x:s,y:o},e)},$V=P.forwardRef((t,e)=>{var{children:n}=t,r=kve(t,Dve),i=wo();return i?P.createElement(Uve,null,n):P.createElement(Vve,Y_({ref:e},r),n)});function Fve(){var t=ir(),[e,n]=P.useState(null),r=ze(Wse);return P.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),o=i.width/e.offsetWidth;xi(o)&&o!==r&&t(yse(o))}},[e,t,r]),n}function zV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Bve(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zV(Object(n),!0).forEach(function(r){qve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qve(t,e,n){return(e=$ve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $ve(t){var e=zve(t,"string");return typeof e=="symbol"?e:e+""}function zve(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Hve=P.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:o,onContextMenu:s,onDoubleClick:l,onMouseDown:c,onMouseEnter:f,onMouseLeave:h,onMouseMove:g,onMouseUp:v,onTouchEnd:E,onTouchMove:b,onTouchStart:S,style:A,width:C}=t,D=ir(),[k,q]=P.useState(null),[$,H]=P.useState(null);Hhe();var M=Fve(),O=P.useCallback(ae=>{M(ae),typeof e=="function"&&e(ae),q(ae),H(ae)},[M,e,q,H]),L=P.useCallback(ae=>{D(DH(ae)),D(qi({handler:o,reactEvent:ae}))},[D,o]),F=P.useCallback(ae=>{D(gx(ae)),D(qi({handler:f,reactEvent:ae}))},[D,f]),V=P.useCallback(ae=>{D(Vz()),D(qi({handler:h,reactEvent:ae}))},[D,h]),G=P.useCallback(ae=>{D(gx(ae)),D(qi({handler:g,reactEvent:ae}))},[D,g]),z=P.useCallback(()=>{D(FH())},[D]),Se=P.useCallback(ae=>{D(UH(ae.key))},[D]),Re=P.useCallback(ae=>{D(qi({handler:s,reactEvent:ae}))},[D,s]),te=P.useCallback(ae=>{D(qi({handler:l,reactEvent:ae}))},[D,l]),me=P.useCallback(ae=>{D(qi({handler:c,reactEvent:ae}))},[D,c]),be=P.useCallback(ae=>{D(qi({handler:v,reactEvent:ae}))},[D,v]),Oe=P.useCallback(ae=>{D(qi({handler:S,reactEvent:ae}))},[D,S]),K=P.useCallback(ae=>{D(qH(ae)),D(qi({handler:b,reactEvent:ae}))},[D,b]),le=P.useCallback(ae=>{D(qi({handler:E,reactEvent:ae}))},[D,E]);return P.createElement(tH.Provider,{value:k},P.createElement(Ure.Provider,{value:$},P.createElement("div",{className:Xt("recharts-wrapper",r),style:Bve({position:"relative",cursor:"default",width:C,height:i},A),onClick:L,onContextMenu:Re,onDoubleClick:te,onFocus:z,onKeyDown:Se,onMouseDown:me,onMouseEnter:F,onMouseLeave:V,onMouseMove:G,onMouseUp:be,onTouchEnd:le,onTouchMove:K,onTouchStart:Oe,ref:O},n)))}),Gve=["children","className","width","height","style","compact","title","desc"];function jve(t,e){if(t==null)return{};var n,r,i=Kve(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Kve(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Wve=P.forwardRef((t,e)=>{var{children:n,className:r,width:i,height:o,style:s,compact:l,title:c,desc:f}=t,h=jve(t,Gve),g=K0(h);return l?P.createElement($V,{otherAttributes:g,title:c,desc:f},n):P.createElement(Hve,{className:r,style:s,width:i,height:o,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},P.createElement($V,{otherAttributes:g,title:c,desc:f,ref:e},P.createElement(Aye,null,n)))}),Yve=["width","height"];function yx(){return yx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yx.apply(null,arguments)}function Jve(t,e){if(t==null)return{};var n,r,i=Qve(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Qve(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Xve={top:5,right:5,bottom:5,left:5},Zve={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Xve,reverseStackOrder:!1,syncMethod:"index"},e_e=P.forwardRef(function(e,n){var r,i=Ll(e.categoricalChartProps,Zve),{width:o,height:s}=i,l=Jve(i,Yve);if(!C_(o)||!C_(s))return null;var{chartName:c,defaultTooltipEventType:f,validateTooltipEventTypes:h,tooltipPayloadSearcher:g,categoricalChartProps:v}=e,E={chartName:c,defaultTooltipEventType:f,validateTooltipEventTypes:h,tooltipPayloadSearcher:g,eventEmitter:void 0};return P.createElement(Pve,{preloadedState:{options:E},reduxStoreName:(r=v.id)!==null&&r!==void 0?r:c},P.createElement(mye,{chartData:v.data}),P.createElement(Nve,{width:o,height:s,layout:i.layout,margin:i.margin}),P.createElement(Mve,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),P.createElement(Wve,yx({},l,{width:o,height:s,ref:n})))}),t_e=["axis","item"],n_e=P.forwardRef((t,e)=>P.createElement(e_e,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:t_e,tooltipPayloadSearcher:Ihe,categoricalChartProps:t,ref:e}));const r_e=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{d:"M2 11h3v7H2v-7zM6 3h3v15H6V3zm5 8h3v7h-3v-7zm4-4h3v11h-3V7z"})}),i_e=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),o_e=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})}),s_e=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),a_e=({data:t})=>!t||t.length===0?I.jsx("p",{className:"text-stone-400 text-center py-8",children:"Нет данных для отображения."}):I.jsx(lpe,{width:"100%",height:300,children:I.jsxs(n_e,{data:t,margin:{top:5,right:20,left:-10,bottom:5},children:[I.jsx(n1,{dataKey:"label",stroke:"#a8a29e",fontSize:12,tickLine:!1,axisLine:!1}),I.jsx(r1,{stroke:"#a8a29e",fontSize:12,tickLine:!1,axisLine:!1,allowDecimals:!1}),I.jsx(Xhe,{contentStyle:{backgroundColor:"#292524",border:"1px solid #57534e",borderRadius:"0.375rem"},labelStyle:{color:"#f59e0b"},itemStyle:{color:"#d6d3d1"},formatter:e=>[e,"Просмотры"]}),I.jsx(xH,{dataKey:"value",fill:"#f59e0b",radius:[4,4,0,0]})]})}),l_e=({codeword:t,games:e,onUpdate:n,onDelete:r})=>{const[i,o]=P.useState(t.usedMessage),[s,l]=P.useState(t.introText||"ВАШЕ КОДОВОЕ СЛОВО:"),[c,f]=P.useState(t.note||""),[h,g]=P.useState(!1),[v,E]=P.useState([]),[b,S]=P.useState(!1),[A,C]=P.useState(""),[D,k]=P.useState("day"),q=`${window.location.origin}${window.location.pathname}#/view?c=${t.id}`,$=`https://api.qrserver.com/v1/create-qr-code/?size=256x256&data=${encodeURIComponent(q)}`,H=async()=>{S(!0),C(""),E([]);try{const O=$i(Yo(Vr,"codewords",t.id,"viewEvents"),d_("viewedAt","asc")),F=(await EI(O)).docs.map(z=>z.data().viewedAt.toDate());if(F.length===0){S(!1);return}const V={};F.forEach(z=>{let Se="";D==="day"?Se=z.toLocaleDateString("ru-RU",{year:"2-digit",month:"2-digit",day:"2-digit"}):Se=z.toLocaleDateString("ru-RU",{year:"2-digit",month:"2-digit",day:"2-digit"})+` ${z.getHours()}:00`,V[Se]=(V[Se]||0)+1});const G=Object.keys(V).map(z=>({label:z,value:V[z]}));E(G)}catch(O){console.error("Error fetching stats:",O),C("Не удалось загрузить статистику.")}finally{S(!1)}};P.useEffect(()=>{h&&H()},[h,D]);const M=async()=>{try{const O=await fetch($);if(!O.ok)throw new Error("QR code fetch failed");const L=await O.blob(),F=window.URL.createObjectURL(L),V=document.createElement("a");V.href=F;const G=t.word.replace(/[^a-z0-9а-яё]/gi,"_").toLowerCase();V.setAttribute("download",`qr_${G}.png`),document.body.appendChild(V),V.click(),V.parentNode&&V.parentNode.removeChild(V),window.URL.revokeObjectURL(F)}catch(O){console.error("Failed to download QR code",O),alert("Не удалось скачать QR-код.")}};return I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"bg-stone-800/70 border border-stone-700 p-4 rounded-md grid grid-cols-1 md:grid-cols-3 gap-4 items-start",children:[I.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2",children:[I.jsx("img",{src:$,alt:"QR Code",className:"w-36 h-36 border-2 border-stone-600 rounded-md"}),I.jsxs("button",{onClick:M,className:"flex items-center justify-center gap-2 w-full bg-stone-600 hover:bg-stone-500 text-stone-200 px-3 py-2 rounded-md text-sm transition-colors",children:[I.jsx(s_e,{}),"Скачать QR"]}),I.jsx("a",{href:q,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-amber-400 hover:text-amber-300 break-all text-center pt-1",children:q})]}),I.jsxs("div",{className:"md:col-span-2 space-y-3",children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:`introText_${t.id}`,className:"text-sm font-bold text-stone-400 block",children:"Вступительный текст:"}),I.jsx("input",{id:`introText_${t.id}`,type:"text",value:s,onChange:O=>l(O.target.value),onBlur:()=>n(t.id,{introText:s}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-3 py-1 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"})]}),I.jsxs("div",{children:[I.jsx("label",{className:"text-sm font-bold text-stone-400 block",children:"Кодовое слово:"}),I.jsx("p",{className:"text-lg bg-stone-900 p-2 rounded-md font-bold text-stone-100 break-words",children:t.word})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:`usedMsg_${t.id}`,className:"text-sm font-bold text-stone-400 block",children:"Сообщение (если использовано):"}),I.jsx("input",{id:`usedMsg_${t.id}`,type:"text",value:i,onChange:O=>o(O.target.value),onBlur:()=>n(t.id,{usedMessage:i}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-3 py-1 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:`note_${t.id}`,className:"text-sm font-bold text-stone-400 block",children:"Заметка (видна только вам):"}),I.jsx("textarea",{id:`note_${t.id}`,value:c,onChange:O=>f(O.target.value),onBlur:()=>n(t.id,{note:c}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-3 py-1 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all h-20 resize-y",placeholder:"Любые пометки по этому коду..."})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:`questLink_${t.id}`,className:"text-sm font-bold text-stone-400 block",children:"Запустить квест перед показом:"}),I.jsxs("select",{id:`questLink_${t.id}`,value:t.questId||"",onChange:O=>n(t.id,{questId:O.target.value}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-3 py-1 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",children:[I.jsx("option",{value:"",children:"Квест отключен"}),e.map(O=>I.jsx("option",{value:O.id,children:O.title},O.id))]})]}),I.jsxs("div",{className:"flex items-center justify-between pt-2",children:[I.jsxs("label",{htmlFor:`toggle_${t.id}`,className:"flex items-center cursor-pointer",children:[I.jsxs("div",{className:"relative",children:[I.jsx("input",{type:"checkbox",id:`toggle_${t.id}`,className:"sr-only",checked:t.isUsed,onChange:()=>n(t.id,{isUsed:!t.isUsed})}),I.jsx("div",{className:`block ${t.isUsed?"bg-amber-500":"bg-stone-600"} w-14 h-8 rounded-full transition-colors`}),I.jsx("div",{className:`dot absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition-transform ${t.isUsed?"transform translate-x-6":""}`})]}),I.jsx("div",{className:"ml-3 text-stone-300 font-semibold",children:t.isUsed?"ИСПОЛЬЗОВАНО":"АКТИВНО"})]}),I.jsxs("div",{className:"flex items-center gap-2 text-stone-400",children:[I.jsxs("div",{className:"flex items-center gap-1",title:"Просмотры",children:[I.jsx(i_e,{}),I.jsx("span",{children:t.views||0})]}),I.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-1 bg-sky-800 hover:bg-sky-700 text-stone-100 px-3 py-2 rounded-md text-sm transition-colors",children:[I.jsx(r_e,{}),"Статистика"]}),I.jsxs("button",{onClick:()=>r(t.id),className:"flex items-center gap-1 bg-red-800 hover:bg-red-700 text-stone-100 px-3 py-2 rounded-md text-sm transition-colors",children:[I.jsx(o_e,{}),"Удалить"]})]})]})]})]}),h&&I.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",onClick:()=>g(!1),role:"dialog","aria-modal":"true","aria-labelledby":"stats-modal-title",children:I.jsxs("div",{className:"bg-stone-800 border border-stone-700 rounded-lg w-full max-w-4xl max-h-[90vh] flex flex-col",onClick:O=>O.stopPropagation(),children:[I.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-stone-700",children:[I.jsx("h3",{id:"stats-modal-title",className:"font-display text-2xl text-amber-400",children:"Статистика просмотров"}),I.jsx("button",{onClick:()=>g(!1),className:"text-stone-400 hover:text-white text-3xl leading-none","aria-label":"Close",children:"×"})]}),I.jsxs("div",{className:"p-4 flex-grow overflow-y-auto",children:[I.jsxs("div",{className:"flex gap-2 mb-4",children:[I.jsx("button",{onClick:()=>k("day"),className:`px-4 py-2 rounded-md font-semibold ${D==="day"?"bg-amber-500 text-stone-900":"bg-stone-700 text-stone-300 hover:bg-stone-600"}`,children:"По дням"}),I.jsx("button",{onClick:()=>k("hour"),className:`px-4 py-2 rounded-md font-semibold ${D==="hour"?"bg-amber-500 text-stone-900":"bg-stone-700 text-stone-300 hover:bg-stone-600"}`,children:"По часам"})]}),b&&I.jsx("p",{className:"animate-pulse text-center py-8 font-display text-xl text-stone-400",children:"ЗАГРУЗКА СТАТИСТИКИ..."}),A&&I.jsx("p",{className:"text-red-500 text-center py-8",children:A}),!b&&!A&&I.jsx(a_e,{data:v})]})]})})]})},u_e=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),c_e=()=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[I.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),I.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]}),f_e=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})}),d_e=({game:t,onDelete:e})=>{var o;const n=(o=t.createdAt)==null?void 0:o.toDate().toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}),r=()=>{window.location.hash=`#/admin/quest/${t.id}`},i=()=>{window.location.hash=`#/play/${t.id}`};return I.jsxs("div",{className:"bg-stone-800/70 border border-stone-700 p-4 rounded-md flex justify-between items-center",children:[I.jsxs("div",{children:[I.jsx("h4",{className:"text-xl font-bold text-stone-100",children:t.title}),I.jsxs("div",{className:"text-sm text-stone-400 mt-1",children:[I.jsx("span",{className:`inline-block px-2 py-0.5 rounded-md mr-2 text-xs font-semibold ${t.status==="published"?"bg-green-900/50 text-green-300":"bg-sky-900/50 text-sky-300"}`,children:t.status==="published"?"Опубликован":"Черновик"}),I.jsxs("span",{children:["Создан: ",n||"N/A"]})]})]}),I.jsxs("div",{className:"flex items-center gap-2",children:[I.jsxs("button",{onClick:i,className:"flex items-center gap-1 bg-green-800 hover:bg-green-700 text-stone-100 px-3 py-2 rounded-md text-sm transition-colors",children:[I.jsx(u_e,{})," Играть"]}),I.jsxs("button",{onClick:r,className:"flex items-center gap-1 bg-blue-800 hover:bg-blue-700 text-stone-100 px-3 py-2 rounded-md text-sm transition-colors",children:[I.jsx(c_e,{})," Редактировать"]}),I.jsxs("button",{onClick:()=>e(t.id),className:"flex items-center gap-1 bg-red-800 hover:bg-red-700 text-stone-100 px-3 py-2 rounded-md text-sm transition-colors",children:[I.jsx(f_e,{})," Удалить"]})]})]})},h_e=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H5v-2H3v-2H1v-4a6 6 0 017.743-5.743z"})}),p_e=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),m_e=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{d:"M17 3H5a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2zm-3 12H8v-4h6v4zm2-6H5V5h12v4z"})}),g_e=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),y_e=()=>{const[t,e]=P.useState("quests"),[n,r]=P.useState([]),[i,o]=P.useState(""),[s,l]=P.useState("Этот код уже был использован."),[c,f]=P.useState("ВАШЕ КОДОВОЕ СЛОВО:"),[h,g]=P.useState([]),[v,E]=P.useState(""),[b,S]=P.useState(""),[A,C]=P.useState({type:"",text:""});P.useEffect(()=>{const L=$i(Yo(Vr,"games"),d_("createdAt","desc")),F=Tm(L,V=>{const G=V.docs.map(z=>({...z.data(),id:z.id}));g(G)},V=>{console.error("Error fetching games:",V),alert("Не удалось загрузить квесты.")});return()=>F()},[]),P.useEffect(()=>{if(t!=="codewords"){r([]);return}const L=$i(Yo(Vr,"codewords"),d_("createdAt","desc")),F=Tm(L,V=>{const G=V.docs.map(z=>({...z.data(),id:z.id}));r(G)},V=>{console.error("Error fetching codewords:",V),alert("Не удалось загрузить кодовые слова.")});return()=>F&&F()},[t]);const D=async L=>{if(L.preventDefault(),i.trim()!=="")try{await _m(Yo(Vr,"codewords"),{word:i.trim(),isUsed:!1,usedMessage:s.trim()||"Этот код уже был использован.",introText:c.trim()||"ВАШЕ КОДОВОЕ СЛОВО:",note:"",questId:"",createdAt:dl(),views:0}),o(""),f("ВАШЕ КОДОВОЕ СЛОВО:"),l("Этот код уже был использован.")}catch(F){console.error("Error adding codeword: ",F),alert("Ошибка при добавлении кода.")}},k=async(L,F)=>{try{await vm(po(Vr,"codewords",L),F)}catch(V){console.error("Error updating codeword: ",V),alert("Ошибка при обновлении кода.")}},q=async L=>{if(window.confirm("Вы уверены, что хотите удалить этот код? Это действие необратимо."))try{const F=$i(Yo(Vr,"codewords",L,"viewEvents")),V=await EI(F),G=xte(Vr);V.docs.forEach(z=>G.delete(z.ref)),await G.commit(),await bA(po(Vr,"codewords",L))}catch(F){console.error("Error deleting codeword:",F),alert("Ошибка при удалении кода.")}},$=async L=>{if(L.preventDefault(),v.trim()!=="")try{const F=`quest_${Date.now()}`;await _m(Yo(Vr,"games"),{title:v.trim(),status:"draft",createdAt:dl(),updatedAt:dl(),dsl:{format:"bk-quest@1",meta:{id:F,title:v.trim(),version:1,defaultLocale:"ru"},assets:{images:{},audio:{}},state:{vars:{},inventory:[]},nodes:{start:{text:"This is the beginning."}}}}),E("")}catch(F){console.error("Error adding quest: ",F),alert("Ошибка при создании квеста.")}},H=async L=>{if(window.confirm("Вы уверены, что хотите удалить этот квест? Все его данные будут стерты навсегда."))try{await bA(po(Vr,"games",L))}catch(F){console.error("Error deleting quest:",F),alert("Ошибка при удалении квеста.")}},M=async L=>{if(L.preventDefault(),C({type:"",text:""}),window.confirm("Вы уверены, что хотите изменить пароль?"))try{if(!Wp.currentUser)throw new Error("Пользователь не авторизован.");if(!b||b.length<6)throw new Error("Пароль должен содержать не менее 6 символов.");await OF(Wp.currentUser,b),C({type:"success",text:"Пароль успешно изменен!"}),S("")}catch(F){C({type:"error",text:`Ошибка: ${F.message}`})}},O=({tabName:L,label:F,children:V})=>I.jsxs("button",{onClick:()=>e(L),className:`flex items-center justify-center w-full px-4 py-3 font-display text-xl rounded-t-md transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-500
            ${t===L?"bg-stone-800/50 text-amber-400 border-b-2 border-amber-400":"bg-stone-900/50 text-stone-400 hover:bg-stone-800/50"}`,children:[V,F]});return I.jsxs("div",{className:"container mx-auto py-8 px-4",children:[I.jsxs("div",{className:"flex justify-between items-center mb-6",children:[I.jsx("h2",{className:"font-display text-4xl text-stone-200",children:"Панель управления"}),I.jsx("button",{onClick:()=>rY(Wp),className:"bg-stone-700 hover:bg-stone-600 text-stone-200 font-semibold py-2 px-4 rounded-md transition-colors",children:"Выйти"})]}),I.jsxs("div",{className:"bg-stone-800/50 border border-stone-700 p-6 rounded-md mb-8",children:[I.jsx("h3",{className:"font-display text-2xl text-amber-400 mb-4",children:"Изменить пароль"}),I.jsxs("form",{onSubmit:M,className:"space-y-4",children:[I.jsx("input",{type:"password",value:b,onChange:L=>S(L.target.value),placeholder:"Новый пароль (минимум 6 символов)",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),I.jsxs("button",{type:"submit",className:"w-full flex items-center justify-center font-display text-xl bg-amber-500 text-stone-900 py-2 rounded-md hover:bg-amber-400 transition-colors",children:[I.jsx(m_e,{})," Сохранить пароль"]}),A.text&&I.jsx("p",{className:A.type==="success"?"text-green-400":"text-red-500",children:A.text})]})]}),I.jsxs("div",{className:"flex mb-[-1px]",children:[I.jsx(O,{tabName:"quests",label:"Квесты",children:I.jsx(p_e,{})}),I.jsx(O,{tabName:"codewords",label:"Кодовые слова",children:I.jsx(h_e,{})})]}),I.jsxs("div",{className:"bg-stone-800/50 border border-stone-700 p-6 rounded-b-md rounded-tr-md",children:[t==="codewords"&&I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"mb-8",children:[I.jsx("h3",{className:"font-display text-2xl text-amber-400 mb-4",children:"Добавить новый код"}),I.jsxs("form",{onSubmit:D,className:"space-y-4",children:[I.jsx("input",{type:"text",value:c,onChange:L=>f(L.target.value),placeholder:"Вступительный текст (обращение)",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),I.jsx("input",{type:"text",value:i,onChange:L=>o(L.target.value),placeholder:"Новое кодовое слово",required:!0,className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),I.jsx("input",{type:"text",value:s,onChange:L=>l(L.target.value),placeholder:"Сообщение если код использован",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),I.jsx("button",{type:"submit",className:"w-full font-display text-xl bg-amber-500 text-stone-900 py-2 rounded-md hover:bg-amber-400 transition-colors",children:"Создать QR-код"})]})]}),I.jsx("div",{className:"space-y-4",children:n.map(L=>I.jsx(l_e,{codeword:L,games:h,onUpdate:k,onDelete:q},L.id))})]}),t==="quests"&&I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"mb-8",children:[I.jsx("h3",{className:"font-display text-2xl text-amber-400 mb-4",children:"Создать новый квест"}),I.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[I.jsxs("form",{onSubmit:$,className:"flex-grow flex gap-4",children:[I.jsx("input",{type:"text",value:v,onChange:L=>E(L.target.value),placeholder:"Название квеста",required:!0,className:"flex-grow bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),I.jsx("button",{type:"submit",className:"font-display text-xl bg-amber-500 text-stone-900 py-2 px-6 rounded-md hover:bg-amber-400 transition-colors",children:"Создать"})]}),I.jsxs("a",{href:"/#/admin/architect",className:"w-full md:w-auto flex items-center justify-center font-display text-xl bg-sky-600 text-white py-2 px-6 rounded-md hover:bg-sky-500 transition-colors",children:[I.jsx(g_e,{})," Создать с AI"]})]})]}),I.jsx("div",{className:"space-y-4",children:h.length>0?h.map(L=>I.jsx(d_e,{game:L,onDelete:H},L.id)):I.jsx("p",{className:"text-stone-400 text-center py-4",children:"Квесты еще не созданы."})})]})]})]})},v_e=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 110 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})}),vx=({questId:t,onWin:e})=>{var H;const{questId:n}=A4(),r=t||n,[i,o]=P.useState(null),[s,l]=P.useState(null),[c,f]=P.useState("start"),[h,g]=P.useState(!0),[v,E]=P.useState(""),b=M=>M?typeof M=="string"?M:M[(i==null?void 0:i.dsl.meta.defaultLocale)||"ru"]||Object.values(M)[0]||"":"",S=P.useCallback((M,O)=>{if(!M)return!0;if(M.all)return M.all.every(V=>S(V,O));if(M.any)return M.any.some(V=>S(V,O));if(M.not)return!S(M.not,O);const{vars:L,inventory:F}=O;return M.hp_eq!==void 0?L.hp===M.hp_eq:M.hp_gt!==void 0?L.hp>M.hp_gt:M.hp_gte!==void 0?L.hp>=M.hp_gte:M.hp_lt!==void 0?L.hp<M.hp_lt:M.hp_lte!==void 0?L.hp<=M.hp_lte:M.has_item?F.includes(M.has_item):M.missing_item?!F.includes(M.missing_item):M.var_eq?Array.isArray(M.var_eq)?M.var_eq.every(V=>L[V.key]===V.value):Object.entries(M.var_eq).every(([V,G])=>L[V]===G):M.var_neq?Array.isArray(M.var_neq)?M.var_neq.every(V=>L[V.key]!==V.value):Object.entries(M.var_neq).every(([V,G])=>L[V]!==G):!0},[]),A=P.useCallback((M,O)=>{if(!M)return O;const L=JSON.parse(JSON.stringify(O));return M.forEach(F=>{F.add&&(Array.isArray(F.add)?F.add.forEach(V=>{L.vars[V.key]=(L.vars[V.key]||0)+V.value}):Object.entries(F.add).forEach(([V,G])=>{L.vars[V]=(L.vars[V]||0)+G})),F.set&&(Array.isArray(F.set)?F.set.forEach(V=>{L.vars[V.key]=V.value}):Object.entries(F.set).forEach(([V,G])=>{L.vars[V]=G})),F.inv_add&&!L.inventory.includes(F.inv_add)&&L.inventory.push(F.inv_add),F.inv_remove&&(L.inventory=L.inventory.filter(V=>V!==F.inv_remove))}),L},[]);P.useEffect(()=>{if(!r){E("Квест не найден."),g(!1);return}g(!0),E("");const M=po(Vr,"games",r);TI(M).then(O=>{if(O.exists()){const L={id:O.id,...O.data()};o(L);const F=localStorage.getItem(`quest-save-${r}`);if(F){const{playerState:V,currentNodeId:G}=JSON.parse(F);l(V),f(G)}else l(L.dsl.state),f("start")}else E("Квест не найден.");g(!1)}).catch(O=>{console.error("Error fetching quest:",O),E("Ошибка при загрузке квеста."),g(!1)})},[r]),P.useEffect(()=>{if(i&&s){const M={questId:r,playerState:s,currentNodeId:c};localStorage.setItem(`quest-save-${r}`,JSON.stringify(M))}},[s,c,r,i]);const C=i==null?void 0:i.dsl.nodes[c];P.useEffect(()=>{var O;if(!C||!s)return;if(((O=C.end)==null?void 0:O.type)==="win"&&e){localStorage.removeItem(`quest-save-${r}`),e();return}const M=A(C.effects,s);if(JSON.stringify(M)!==JSON.stringify(s)){l(M);return}if(C.branch){for(const L of C.branch)if(S(L.when,s)){f(L.to);return}}C.fallback&&f(C.fallback)},[c,i,s,A,S,e,r]);const D=M=>{if(!s)return;const O=A(M.effects,s);l(O),f(M.to)},k=P.useCallback(()=>{!r||!i||window.confirm("Вы уверены, что хотите начать квест заново? Весь прогресс будет потерян.")&&(localStorage.removeItem(`quest-save-${r}`),l(i.dsl.state),f("start"))},[r,i]);if(h)return I.jsx("div",{className:"text-center p-8 font-display text-4xl text-stone-400 animate-pulse",children:"ЗАГРУЗКА КВЕСТА..."});if(v)return I.jsx("div",{className:"text-center p-8 text-2xl text-red-500",children:v});if(!i||!s||!C)return I.jsx("div",{className:"text-center p-8 text-2xl text-stone-400",children:"Инициализация..."});const q=C.bg&&i.dsl.assets.images[C.bg]?i.dsl.assets.images[C.bg]:void 0,$=((H=C.choices)==null?void 0:H.filter(M=>M.when?S(M.when,s):!0))||[];return I.jsx("div",{className:"min-h-screen w-full flex items-center justify-center p-4 md:p-8",children:I.jsx("div",{className:"w-full max-w-4xl bg-cover bg-center rounded-lg shadow-2xl shadow-black/50 overflow-hidden border-2 border-stone-800",style:{backgroundImage:q?`url(${q})`:"none",backgroundColor:"#1c1917",minHeight:"70vh"},children:I.jsxs("div",{className:"bg-stone-900/80 backdrop-blur-sm p-6 md:p-8 flex flex-col h-full text-stone-200",children:[I.jsxs("div",{className:"flex items-center justify-between gap-4 mb-6 border-b border-stone-700 pb-4 text-sm",children:[I.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1",children:[Object.keys(s.vars).length>0&&Object.keys(s.vars).map(M=>I.jsxs("span",{className:"font-bold text-amber-400",children:[M.toUpperCase(),": ",I.jsx("span",{className:"font-normal text-stone-200",children:s.vars[M]??0})]},M)),s.inventory.length>0&&I.jsxs("div",{className:"flex items-center gap-2",children:[I.jsx("span",{className:"font-bold text-amber-400",children:"ИНВЕНТАРЬ:"}),I.jsx("span",{className:"text-stone-200",children:s.inventory.join(", ")})]})]}),I.jsxs("button",{onClick:k,className:"flex items-center justify-center font-display text-lg bg-stone-700 text-stone-200 py-2 px-4 rounded-md hover:bg-stone-600 transition-colors flex-shrink-0",children:[I.jsx(v_e,{}),"ЗАНОВО"]})]}),I.jsxs("div",{className:"flex-grow",children:[I.jsx("h2",{className:"font-display text-3xl md:text-4xl text-amber-400 mb-4",children:b(C.title)}),I.jsx("p",{className:"text-stone-300 whitespace-pre-wrap leading-relaxed mb-6",children:b(C.text)}),C.end&&!e&&I.jsxs("div",{className:"text-center py-4 border-t border-stone-700 mt-6",children:[I.jsx("h3",{className:`font-display text-4xl ${C.end.type==="win"?"text-lime-400":"text-red-500"}`,children:C.end.type==="win"?"Победа!":"Конец игры"}),I.jsx("p",{className:"mt-4 text-stone-300",children:b(C.end.message)})]}),!C.end&&I.jsx("div",{className:"flex flex-col space-y-3",children:$.map((M,O)=>I.jsx("button",{onClick:()=>D(M),className:"text-left w-full p-4 bg-stone-800/70 border border-stone-600 rounded-md hover:bg-amber-500 hover:border-amber-400 hover:text-stone-900 transition-all text-stone-200 font-semibold",children:b(M.label)},O))})]})]})})})},__e=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),T_e=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),HV=({codeId:t})=>{const[e,n]=P.useState(null),[r,i]=P.useState("loading"),[o,s]=P.useState(!1),[l,c]=P.useState(!1),f=ds();P.useEffect(()=>{const g=new URLSearchParams(f.search||f.hash.split("?")[1]),v=t||g.get("c");if(v){const E=po(Vr,"codewords",v);(async()=>{try{const S=await TI(E);if(S.exists()){const A={id:S.id,...S.data()};n(A),i("found");const C=`viewed-${v}`;sessionStorage.getItem(C)||(await vm(E,{views:H3(1)}),await _m(Yo(E,"viewEvents"),{viewedAt:dl()}),sessionStorage.setItem(C,"true"))}else i("not-found")}catch(S){console.error("Failed to fetch codeword from Firestore:",S),i("error")}})()}else i("not-found")},[f,t]);const h=()=>{e&&!e.isUsed&&(navigator.clipboard.writeText(e.word),s(!0),setTimeout(()=>s(!1),2e3))};return r==="loading"?I.jsx("div",{className:"flex items-center justify-center min-h-[80vh]",children:I.jsx("p",{className:"font-display text-2xl text-stone-400 animate-pulse",children:"ПОИСК ДАННЫХ..."})}):r==="not-found"||r==="error"?I.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] text-center p-4",children:[I.jsx("h2",{className:"font-display text-6xl text-red-500",children:"404"}),I.jsx("p",{className:"text-stone-300 text-xl mt-2",children:"Код не найден."}),I.jsx("p",{className:"text-stone-500",children:"Возможно, ссылка неверна или код был удален."})]}):e!=null&&e.isUsed?I.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] text-center p-4",children:[I.jsx("h2",{className:"font-display text-5xl text-amber-500",children:"КОД ИСПОЛЬЗОВАН"}),I.jsx("p",{className:"text-stone-300 text-xl mt-4 max-w-lg",children:e.usedMessage})]}):e!=null&&e.questId&&!l?I.jsx(vx,{questId:e.questId,onWin:()=>c(!0)}):I.jsx("div",{className:"flex flex-col items-center justify-center min-h-[80vh] text-center p-4",children:I.jsxs("div",{className:"w-full max-w-2xl bg-stone-800/50 border-2 border-stone-700 p-8 rounded-lg shadow-2xl shadow-black/50",children:[l&&I.jsx("p",{className:"font-display text-2xl text-lime-400 mb-4 tracking-wider",children:"КВЕСТ ПРОЙДЕН!"}),I.jsx("p",{className:"text-stone-400 font-display text-2xl tracking-wide",children:(e==null?void 0:e.introText)||"ВАШЕ КОДОВОЕ СЛОВО:"}),I.jsx("p",{className:"text-amber-400 font-bold text-3xl md:text-5xl my-4 break-words select-all tracking-widest",children:e==null?void 0:e.word}),I.jsxs("button",{onClick:h,className:"w-full flex items-center justify-center gap-3 mt-6 bg-stone-700 hover:bg-amber-500 hover:text-stone-900 text-stone-200 font-display text-2xl py-3 rounded-md transition-all duration-300",children:[o?I.jsx(T_e,{}):I.jsx(__e,{}),o?"СКОПИРОВАНО!":"СКОПИРОВАТЬ КОД"]})]})})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let E_e,w_e;function b_e(){return{geminiUrl:E_e,vertexUrl:w_e}}function S_e(t,e,n,r){var i,o;if(!(t!=null&&t.baseUrl)){const s=b_e();return e?(i=s.vertexUrl)!==null&&i!==void 0?i:n:(o=s.geminiUrl)!==null&&o!==void 0?o:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _c{}function De(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function m(t,e,n){for(let o=0;o<e.length-1;o++){const s=e[o];if(s.endsWith("[]")){const l=s.slice(0,-2);if(!(l in t))if(Array.isArray(n))t[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[l])){const c=t[l];if(Array.isArray(n))for(let f=0;f<c.length;f++){const h=c[f];m(h,e.slice(o+1),n[f])}else for(const f of c)m(f,e.slice(o+1),n)}return}else if(s.endsWith("[0]")){const l=s.slice(0,-3);l in t||(t[l]=[{}]);const c=t[l];m(c[0],e.slice(o+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else t[r]=n}function p(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const r=e[n];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in t){const o=t[i];return Array.isArray(o)?o.map(s=>p(s,e.slice(n+1))):void 0}else return}else t=t[r]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _x(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var GV;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(GV||(GV={}));var jV;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(jV||(jV={}));var Fe;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Fe||(Fe={}));var KV;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(KV||(KV={}));var WV;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(WV||(WV={}));var YV;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(YV||(YV={}));var JV;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(JV||(JV={}));var QV;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(QV||(QV={}));var XV;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(XV||(XV={}));var ZV;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(ZV||(ZV={}));var eU;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(eU||(eU={}));var tU;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(tU||(tU={}));var nU;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(nU||(nU={}));var rU;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(rU||(rU={}));var iU;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(iU||(iU={}));var J_;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(J_||(J_={}));var oU;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(oU||(oU={}));var Tx;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Tx||(Tx={}));var sU;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(sU||(sU={}));var aU;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(aU||(aU={}));var lU;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(lU||(lU={}));var uU;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(uU||(uU={}));var cU;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(cU||(cU={}));var fU;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(fU||(fU={}));var dU;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(dU||(dU={}));var hU;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(hU||(hU={}));var pU;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(pU||(pU={}));var mU;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(mU||(mU={}));var gU;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(gU||(gU={}));var yU;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(yU||(yU={}));var vU;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(vU||(vU={}));var _U;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(_U||(_U={}));var TU;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(TU||(TU={}));var EU;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(EU||(EU={}));var wU;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(wU||(wU={}));var bU;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(bU||(bU={}));var SU;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(SU||(SU={}));var AU;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(AU||(AU={}));var xU;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(xU||(xU={}));var CU;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(CU||(CU={}));var IU;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(IU||(IU={}));var RU;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(RU||(RU={}));var PU;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(PU||(PU={}));var NU;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(NU||(NU={}));var MU;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(MU||(MU={}));var If;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(If||(If={}));class Ex{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Tp{get text(){var e,n,r,i,o,s,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",h=!1;const g=[];for(const v of(c=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[E,b]of Object.entries(v))E!=="text"&&E!=="thought"&&(b!==null||b!==void 0)&&g.push(E);if(typeof v.text=="string"){if(typeof v.thought=="boolean"&&v.thought)continue;h=!0,f+=v.text}}return g.length>0&&console.warn(`there are non-text parts ${g} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?f:void 0}get data(){var e,n,r,i,o,s,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const h=[];for(const g of(c=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[v,E]of Object.entries(g))v!=="inlineData"&&(E!==null||E!==void 0)&&h.push(v);g.inlineData&&typeof g.inlineData.data=="string"&&(f+=atob(g.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,n,r,i,o,s,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(c=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var e,n,r,i,o,s,l,c,f;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(c=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(g=>g.executableCode).map(g=>g.executableCode).filter(g=>g!==void 0);if((h==null?void 0:h.length)!==0)return(f=h==null?void 0:h[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,n,r,i,o,s,l,c,f;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(c=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(g=>g.codeExecutionResult).map(g=>g.codeExecutionResult).filter(g=>g!==void 0);if((h==null?void 0:h.length)!==0)return(f=h==null?void 0:h[0])===null||f===void 0?void 0:f.output}}class DU{}class kU{}class A_e{}class x_e{}class C_e{}class I_e{}class OU{}class LU{}class VU{}class R_e{}class UU{}class Q_{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const r=new Q_;if(r.name=e.name,r.metadata=e.metadata,r.done=e.done,r.error=e.error,n){const i=e.response;if(i){const o=new UU,s=i.videos;o.generatedVideos=s==null?void 0:s.map(l=>({video:{uri:l.gcsUri,videoBytes:l.bytesBase64Encoded?_x(l.bytesBase64Encoded):void 0,mimeType:l.mimeType}})),o.raiMediaFilteredCount=i.raiMediaFilteredCount,o.raiMediaFilteredReasons=i.raiMediaFilteredReasons,r.response=o}}else{const i=e.response;if(i){const o=new UU,s=i.generateVideoResponse,l=s==null?void 0:s.generatedSamples;o.generatedVideos=l==null?void 0:l.map(c=>{const f=c.video;return{video:{uri:f==null?void 0:f.uri,videoBytes:f!=null&&f.encodedVideo?_x(f==null?void 0:f.encodedVideo):void 0,mimeType:c.encoding}}}),o.raiMediaFilteredCount=s==null?void 0:s.raiMediaFilteredCount,o.raiMediaFilteredReasons=s==null?void 0:s.raiMediaFilteredReasons,r.response=o}}return r}}class FU{}class BU{}class qU{}class P_e{}class N_e{}class M_e{}class $U{}class D_e{get text(){var e,n,r;let i="",o=!1;const s=[];for(const l of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[c,f]of Object.entries(l))c!=="text"&&c!=="thought"&&f!==null&&s.push(c);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;o=!0,i+=l.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var e,n,r;let i="";const o=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,c]of Object.entries(s))l!=="inlineData"&&c!==null&&o.push(l);s.inlineData&&typeof s.inlineData.data=="string"&&(i+=atob(s.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class k_e{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Et(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function zH(t,e){const n=Et(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function HH(t){return Array.isArray(t)?t.map(e=>X_(e)):[X_(t)]}function X_(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function GH(t){const e=X_(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function jH(t){const e=X_(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function zU(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function KH(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>zU(e)):[zU(t)]}function wx(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function HU(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function GU(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Cr(t){if(t==null)throw new Error("ContentUnion is required");return wx(t)?t:{role:"user",parts:KH(t)}}function WH(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=Cr(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=Cr(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Cr(n)):[Cr(e)]}function Ki(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(HU(t)||GU(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Cr(t)]}const e=[],n=[],r=wx(t[0]);for(const i of t){const o=wx(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(i);else{if(HU(i)||GU(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:KH(n)}),e}function O_e(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(Fe).includes(n[0].toUpperCase())?n[0].toUpperCase():Fe.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(Fe).includes(r.toUpperCase())?r.toUpperCase():Fe.TYPE_UNSPECIFIED})}}function Uf(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&O_e(t.type,e);for(const[s,l]of Object.entries(t))if(l!=null)if(s=="type"){if(l==="null")throw new Error("type: null can not be the only possible type for the field.");if(l instanceof Array)continue;e.type=Object.values(Fe).includes(l.toUpperCase())?l.toUpperCase():Fe.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=Uf(l);else if(r.includes(s)){const c=[];for(const f of l){if(f.type=="null"){e.nullable=!0;continue}c.push(Uf(f))}e[s]=c}else if(i.includes(s)){const c={};for(const[f,h]of Object.entries(l))c[f]=Uf(h);e[s]=c}else{if(s==="additionalProperties")continue;e[s]=l}return e}function a1(t){return Uf(t)}function l1(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function u1(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Wd(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Uf(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Uf(e.response));return t}function Yd(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function L_e(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function va(t,e){if(typeof e!="string")throw new Error("name must be a string");return L_e(t,e,"cachedContents")}function YH(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Tc(t){return _x(t)}function V_e(t){return t!=null&&typeof t=="object"&&"name"in t}function U_e(t){return t!=null&&typeof t=="object"&&"video"in t}function F_e(t){return t!=null&&typeof t=="object"&&"uri"in t}function JH(t){var e;let n;if(V_e(t)&&(n=t.name),!(F_e(t)&&(n=t.uri,n===void 0))&&!(U_e(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function QH(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function XH(t){for(const e of["models","tunedModels","publisherModels"])if(B_e(t,e))return t[e];return[]}function B_e(t,e){return t!==null&&typeof t=="object"&&e in t}function q_e(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function $_e(t,e={}){const n=[],r=new Set;for(const i of t){const o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const s=q_e(i,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function ZH(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function z_e(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Jd(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function eG(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function H_e(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function G_e(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["data"]);n!=null&&m(e,["data"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function j_e(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function K_e(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],H_e(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],G_e(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],j_e(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const l=p(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const c=p(t,["executableCode"]);c!=null&&m(e,["executableCode"],c);const f=p(t,["functionCall"]);f!=null&&m(e,["functionCall"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=p(t,["text"]);return g!=null&&m(e,["text"],g),e}function tG(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>K_e(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function W_e(t){const e={},n=p(t,["anyOf"]);n!=null&&m(e,["anyOf"],n);const r=p(t,["default"]);r!=null&&m(e,["default"],r);const i=p(t,["description"]);i!=null&&m(e,["description"],i);const o=p(t,["enum"]);o!=null&&m(e,["enum"],o);const s=p(t,["example"]);s!=null&&m(e,["example"],s);const l=p(t,["format"]);l!=null&&m(e,["format"],l);const c=p(t,["items"]);c!=null&&m(e,["items"],c);const f=p(t,["maxItems"]);f!=null&&m(e,["maxItems"],f);const h=p(t,["maxLength"]);h!=null&&m(e,["maxLength"],h);const g=p(t,["maxProperties"]);g!=null&&m(e,["maxProperties"],g);const v=p(t,["maximum"]);v!=null&&m(e,["maximum"],v);const E=p(t,["minItems"]);E!=null&&m(e,["minItems"],E);const b=p(t,["minLength"]);b!=null&&m(e,["minLength"],b);const S=p(t,["minProperties"]);S!=null&&m(e,["minProperties"],S);const A=p(t,["minimum"]);A!=null&&m(e,["minimum"],A);const C=p(t,["nullable"]);C!=null&&m(e,["nullable"],C);const D=p(t,["pattern"]);D!=null&&m(e,["pattern"],D);const k=p(t,["properties"]);k!=null&&m(e,["properties"],k);const q=p(t,["propertyOrdering"]);q!=null&&m(e,["propertyOrdering"],q);const $=p(t,["required"]);$!=null&&m(e,["required"],$);const H=p(t,["title"]);H!=null&&m(e,["title"],H);const M=p(t,["type"]);return M!=null&&m(e,["type"],M),e}function Y_e(t){const e={};if(p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=p(t,["category"]);n!=null&&m(e,["category"],n);const r=p(t,["threshold"]);return r!=null&&m(e,["threshold"],r),e}function J_e(t){const e={},n=p(t,["behavior"]);n!=null&&m(e,["behavior"],n);const r=p(t,["description"]);r!=null&&m(e,["description"],r);const i=p(t,["name"]);i!=null&&m(e,["name"],i);const o=p(t,["parameters"]);o!=null&&m(e,["parameters"],o);const s=p(t,["parametersJsonSchema"]);s!=null&&m(e,["parametersJsonSchema"],s);const l=p(t,["response"]);l!=null&&m(e,["response"],l);const c=p(t,["responseJsonSchema"]);return c!=null&&m(e,["responseJsonSchema"],c),e}function Q_e(t){const e={},n=p(t,["startTime"]);n!=null&&m(e,["startTime"],n);const r=p(t,["endTime"]);return r!=null&&m(e,["endTime"],r),e}function X_e(t){const e={},n=p(t,["timeRangeFilter"]);if(n!=null&&m(e,["timeRangeFilter"],Q_e(n)),p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Z_e(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["dynamicThreshold"]);return r!=null&&m(e,["dynamicThreshold"],r),e}function e0e(t){const e={},n=p(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],Z_e(n)),e}function t0e(){return{}}function n0e(t){const e={},n=p(t,["environment"]);return n!=null&&m(e,["environment"],n),e}function r0e(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>J_e(f))),m(e,["functionDeclarations"],c)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=p(t,["googleSearch"]);r!=null&&m(e,["googleSearch"],X_e(r));const i=p(t,["googleSearchRetrieval"]);if(i!=null&&m(e,["googleSearchRetrieval"],e0e(i)),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(p(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");p(t,["urlContext"])!=null&&m(e,["urlContext"],t0e());const s=p(t,["computerUse"]);s!=null&&m(e,["computerUse"],n0e(s));const l=p(t,["codeExecution"]);return l!=null&&m(e,["codeExecution"],l),e}function i0e(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["allowedFunctionNames"]);return r!=null&&m(e,["allowedFunctionNames"],r),e}function o0e(t){const e={},n=p(t,["latitude"]);n!=null&&m(e,["latitude"],n);const r=p(t,["longitude"]);return r!=null&&m(e,["longitude"],r),e}function s0e(t){const e={},n=p(t,["latLng"]);n!=null&&m(e,["latLng"],o0e(n));const r=p(t,["languageCode"]);return r!=null&&m(e,["languageCode"],r),e}function a0e(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],i0e(n));const r=p(t,["retrievalConfig"]);return r!=null&&m(e,["retrievalConfig"],s0e(r)),e}function l0e(t){const e={},n=p(t,["voiceName"]);return n!=null&&m(e,["voiceName"],n),e}function nG(t){const e={},n=p(t,["prebuiltVoiceConfig"]);return n!=null&&m(e,["prebuiltVoiceConfig"],l0e(n)),e}function u0e(t){const e={},n=p(t,["speaker"]);n!=null&&m(e,["speaker"],n);const r=p(t,["voiceConfig"]);return r!=null&&m(e,["voiceConfig"],nG(r)),e}function c0e(t){const e={},n=p(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>u0e(i))),m(e,["speakerVoiceConfigs"],r)}return e}function f0e(t){const e={},n=p(t,["voiceConfig"]);n!=null&&m(e,["voiceConfig"],nG(n));const r=p(t,["multiSpeakerVoiceConfig"]);r!=null&&m(e,["multiSpeakerVoiceConfig"],c0e(r));const i=p(t,["languageCode"]);return i!=null&&m(e,["languageCode"],i),e}function d0e(t){const e={},n=p(t,["includeThoughts"]);n!=null&&m(e,["includeThoughts"],n);const r=p(t,["thinkingBudget"]);return r!=null&&m(e,["thinkingBudget"],r),e}function h0e(t,e,n){const r={},i=p(e,["systemInstruction"]);n!==void 0&&i!=null&&m(n,["systemInstruction"],tG(Cr(i)));const o=p(e,["temperature"]);o!=null&&m(r,["temperature"],o);const s=p(e,["topP"]);s!=null&&m(r,["topP"],s);const l=p(e,["topK"]);l!=null&&m(r,["topK"],l);const c=p(e,["candidateCount"]);c!=null&&m(r,["candidateCount"],c);const f=p(e,["maxOutputTokens"]);f!=null&&m(r,["maxOutputTokens"],f);const h=p(e,["stopSequences"]);h!=null&&m(r,["stopSequences"],h);const g=p(e,["responseLogprobs"]);g!=null&&m(r,["responseLogprobs"],g);const v=p(e,["logprobs"]);v!=null&&m(r,["logprobs"],v);const E=p(e,["presencePenalty"]);E!=null&&m(r,["presencePenalty"],E);const b=p(e,["frequencyPenalty"]);b!=null&&m(r,["frequencyPenalty"],b);const S=p(e,["seed"]);S!=null&&m(r,["seed"],S);const A=p(e,["responseMimeType"]);A!=null&&m(r,["responseMimeType"],A);const C=p(e,["responseSchema"]);C!=null&&m(r,["responseSchema"],W_e(a1(C)));const D=p(e,["responseJsonSchema"]);if(D!=null&&m(r,["responseJsonSchema"],D),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=p(e,["safetySettings"]);if(n!==void 0&&k!=null){let V=k;Array.isArray(V)&&(V=V.map(G=>Y_e(G))),m(n,["safetySettings"],V)}const q=p(e,["tools"]);if(n!==void 0&&q!=null){let V=Yd(q);Array.isArray(V)&&(V=V.map(G=>r0e(Wd(G)))),m(n,["tools"],V)}const $=p(e,["toolConfig"]);if(n!==void 0&&$!=null&&m(n,["toolConfig"],a0e($)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const H=p(e,["cachedContent"]);n!==void 0&&H!=null&&m(n,["cachedContent"],va(t,H));const M=p(e,["responseModalities"]);M!=null&&m(r,["responseModalities"],M);const O=p(e,["mediaResolution"]);O!=null&&m(r,["mediaResolution"],O);const L=p(e,["speechConfig"]);if(L!=null&&m(r,["speechConfig"],f0e(l1(L))),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const F=p(e,["thinkingConfig"]);return F!=null&&m(r,["thinkingConfig"],d0e(F)),r}function p0e(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["request","model"],Et(t,r));const i=p(e,["contents"]);if(i!=null){let s=Ki(i);Array.isArray(s)&&(s=s.map(l=>tG(l))),m(n,["request","contents"],s)}const o=p(e,["config"]);return o!=null&&m(n,["request","generationConfig"],h0e(t,o,n)),n}function m0e(t,e){const n={};if(p(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(p(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=p(e,["fileName"]);r!=null&&m(n,["fileName"],r);const i=p(e,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>p0e(t,s))),m(n,["requests","requests"],o)}return n}function g0e(t,e){const n={},r=p(t,["displayName"]);if(e!==void 0&&r!=null&&m(e,["batch","displayName"],r),p(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function jU(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],Et(t,r));const i=p(e,["src"]);i!=null&&m(n,["batch","inputConfig"],m0e(t,ZH(t,i)));const o=p(e,["config"]);return o!=null&&m(n,["config"],g0e(o,n)),n}function y0e(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],Jd(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function v0e(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],Jd(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function _0e(t,e){const n={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=p(t,["pageToken"]);if(e!==void 0&&i!=null&&m(e,["_query","pageToken"],i),p(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function T0e(t){const e={},n=p(t,["config"]);return n!=null&&m(e,["config"],_0e(n,e)),e}function E0e(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],Jd(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function w0e(t){const e={},n=p(t,["format"]);n!=null&&m(e,["instancesFormat"],n);const r=p(t,["gcsUri"]);r!=null&&m(e,["gcsSource","uris"],r);const i=p(t,["bigqueryUri"]);if(i!=null&&m(e,["bigquerySource","inputUri"],i),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function b0e(t){const e={},n=p(t,["format"]);n!=null&&m(e,["predictionsFormat"],n);const r=p(t,["gcsUri"]);r!=null&&m(e,["gcsDestination","outputUriPrefix"],r);const i=p(t,["bigqueryUri"]);if(i!=null&&m(e,["bigqueryDestination","outputUri"],i),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function S0e(t,e){const n={},r=p(t,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const i=p(t,["dest"]);return e!==void 0&&i!=null&&m(e,["outputConfig"],b0e(z_e(i))),n}function A0e(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["model"],Et(t,r));const i=p(e,["src"]);i!=null&&m(n,["inputConfig"],w0e(ZH(t,i)));const o=p(e,["config"]);return o!=null&&m(n,["config"],S0e(o,n)),n}function x0e(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],Jd(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function C0e(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],Jd(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function I0e(t,e){const n={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=p(t,["pageToken"]);e!==void 0&&i!=null&&m(e,["_query","pageToken"],i);const o=p(t,["filter"]);return e!==void 0&&o!=null&&m(e,["_query","filter"],o),n}function R0e(t){const e={},n=p(t,["config"]);return n!=null&&m(e,["config"],I0e(n,e)),e}function P0e(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],Jd(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function N0e(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function M0e(t){const e={},n=p(t,["data"]);n!=null&&m(e,["data"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function D0e(t){const e={},n=p(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function k0e(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],N0e(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],M0e(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],D0e(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const l=p(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const c=p(t,["executableCode"]);c!=null&&m(e,["executableCode"],c);const f=p(t,["functionCall"]);f!=null&&m(e,["functionCall"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=p(t,["text"]);return g!=null&&m(e,["text"],g),e}function O0e(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>k0e(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function L0e(t){const e={},n=p(t,["citationSources"]);return n!=null&&m(e,["citations"],n),e}function V0e(t){const e={},n=p(t,["retrievedUrl"]);n!=null&&m(e,["retrievedUrl"],n);const r=p(t,["urlRetrievalStatus"]);return r!=null&&m(e,["urlRetrievalStatus"],r),e}function U0e(t){const e={},n=p(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>V0e(i))),m(e,["urlMetadata"],r)}return e}function F0e(t){const e={},n=p(t,["content"]);n!=null&&m(e,["content"],O0e(n));const r=p(t,["citationMetadata"]);r!=null&&m(e,["citationMetadata"],L0e(r));const i=p(t,["tokenCount"]);i!=null&&m(e,["tokenCount"],i);const o=p(t,["finishReason"]);o!=null&&m(e,["finishReason"],o);const s=p(t,["urlContextMetadata"]);s!=null&&m(e,["urlContextMetadata"],U0e(s));const l=p(t,["avgLogprobs"]);l!=null&&m(e,["avgLogprobs"],l);const c=p(t,["groundingMetadata"]);c!=null&&m(e,["groundingMetadata"],c);const f=p(t,["index"]);f!=null&&m(e,["index"],f);const h=p(t,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const g=p(t,["safetyRatings"]);return g!=null&&m(e,["safetyRatings"],g),e}function B0e(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>F0e(f))),m(e,["candidates"],c)}const i=p(t,["modelVersion"]);i!=null&&m(e,["modelVersion"],i);const o=p(t,["promptFeedback"]);o!=null&&m(e,["promptFeedback"],o);const s=p(t,["responseId"]);s!=null&&m(e,["responseId"],s);const l=p(t,["usageMetadata"]);return l!=null&&m(e,["usageMetadata"],l),e}function rG(t){const e={},n=p(t,["details"]);n!=null&&m(e,["details"],n);const r=p(t,["code"]);r!=null&&m(e,["code"],r);const i=p(t,["message"]);return i!=null&&m(e,["message"],i),e}function q0e(t){const e={},n=p(t,["response"]);n!=null&&m(e,["response"],B0e(n));const r=p(t,["error"]);return r!=null&&m(e,["error"],rG(r)),e}function $0e(t){const e={},n=p(t,["responsesFile"]);n!=null&&m(e,["fileName"],n);const r=p(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>q0e(o))),m(e,["inlinedResponses"],i)}return e}function Lv(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const r=p(t,["metadata","displayName"]);r!=null&&m(e,["displayName"],r);const i=p(t,["metadata","state"]);i!=null&&m(e,["state"],eG(i));const o=p(t,["metadata","createTime"]);o!=null&&m(e,["createTime"],o);const s=p(t,["metadata","endTime"]);s!=null&&m(e,["endTime"],s);const l=p(t,["metadata","updateTime"]);l!=null&&m(e,["updateTime"],l);const c=p(t,["metadata","model"]);c!=null&&m(e,["model"],c);const f=p(t,["metadata","output"]);return f!=null&&m(e,["dest"],$0e(f)),e}function z0e(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(t,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Lv(s))),m(e,["batchJobs"],o)}return e}function H0e(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["name"]);r!=null&&m(e,["name"],r);const i=p(t,["done"]);i!=null&&m(e,["done"],i);const o=p(t,["error"]);return o!=null&&m(e,["error"],rG(o)),e}function iG(t){const e={},n=p(t,["details"]);n!=null&&m(e,["details"],n);const r=p(t,["code"]);r!=null&&m(e,["code"],r);const i=p(t,["message"]);return i!=null&&m(e,["message"],i),e}function G0e(t){const e={},n=p(t,["instancesFormat"]);n!=null&&m(e,["format"],n);const r=p(t,["gcsSource","uris"]);r!=null&&m(e,["gcsUri"],r);const i=p(t,["bigquerySource","inputUri"]);return i!=null&&m(e,["bigqueryUri"],i),e}function j0e(t){const e={},n=p(t,["predictionsFormat"]);n!=null&&m(e,["format"],n);const r=p(t,["gcsDestination","outputUriPrefix"]);r!=null&&m(e,["gcsUri"],r);const i=p(t,["bigqueryDestination","outputUri"]);return i!=null&&m(e,["bigqueryUri"],i),e}function bx(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const r=p(t,["displayName"]);r!=null&&m(e,["displayName"],r);const i=p(t,["state"]);i!=null&&m(e,["state"],eG(i));const o=p(t,["error"]);o!=null&&m(e,["error"],iG(o));const s=p(t,["createTime"]);s!=null&&m(e,["createTime"],s);const l=p(t,["startTime"]);l!=null&&m(e,["startTime"],l);const c=p(t,["endTime"]);c!=null&&m(e,["endTime"],c);const f=p(t,["updateTime"]);f!=null&&m(e,["updateTime"],f);const h=p(t,["model"]);h!=null&&m(e,["model"],h);const g=p(t,["inputConfig"]);g!=null&&m(e,["src"],G0e(g));const v=p(t,["outputConfig"]);return v!=null&&m(e,["dest"],j0e(v)),e}function K0e(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(t,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>bx(s))),m(e,["batchJobs"],o)}return e}function W0e(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["name"]);r!=null&&m(e,["name"],r);const i=p(t,["done"]);i!=null&&m(e,["done"],i);const o=p(t,["error"]);return o!=null&&m(e,["error"],iG(o)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ac;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(ac||(ac={}));class _g{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(i=s.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Y0e extends _c{constructor(e){super(),this.apiClient=e,this.create=async n=>{var r,i;if(this.apiClient.isVertexAI()){const s=Date.now().toString();if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_${timestampStr}"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_${s}`;else throw new Error("Unsupported source:"+n.src)}else if(Array.isArray(n.src)||typeof n.src!="string"&&n.src.inlinedRequests){let o="",s={};const l=jU(this.apiClient,n);o=De("{model}:batchGenerateContent",l._url),s=l._query;const h=l.batch.inputConfig.requests,g=h.requests,v=[];for(const b of g){const S=b;if(S.systemInstruction){const A=S.systemInstruction;delete S.systemInstruction;const C=S.request;C.systemInstruction=A,S.request=C}v.push(S)}return h.requests=v,delete l.config,delete l._url,delete l._query,this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json()).then(b=>Lv(b))}return await this.createInternal(n)},this.list=async(n={})=>new _g(ac.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}async createInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=A0e(this.apiClient,e);return l=De("batchPredictionJobs",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>bx(h))}else{const f=jU(this.apiClient,e);return l=De("{model}:batchGenerateContent",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Lv(h))}}async get(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=x0e(this.apiClient,e);return l=De("batchPredictionJobs/{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>bx(h))}else{const f=y0e(this.apiClient,e);return l=De("batches/{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Lv(h))}}async cancel(e){var n,r,i,o;let s="",l={};if(this.apiClient.isVertexAI()){const c=C0e(this.apiClient,e);s=De("batchPredictionJobs/{name}:cancel",c._url),l=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=v0e(this.apiClient,e);s=De("batches/{name}:cancel",c._url),l=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=R0e(e);return l=De("batchPredictionJobs",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=K0e(h),v=new $U;return Object.assign(v,g),v})}else{const f=T0e(e);return l=De("batches",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=z0e(h),v=new $U;return Object.assign(v,g),v})}}async delete(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=P0e(this.apiClient,e);return l=De("batchPredictionJobs/{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>W0e(h))}else{const f=E0e(this.apiClient,e);return l=De("batches/{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>H0e(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function J0e(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function Q0e(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["data"]);n!=null&&m(e,["data"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function X0e(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function Z0e(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],J0e(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],Q0e(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],X0e(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const l=p(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const c=p(t,["executableCode"]);c!=null&&m(e,["executableCode"],c);const f=p(t,["functionCall"]);f!=null&&m(e,["functionCall"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=p(t,["text"]);return g!=null&&m(e,["text"],g),e}function KU(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Z0e(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function eTe(t){const e={},n=p(t,["behavior"]);n!=null&&m(e,["behavior"],n);const r=p(t,["description"]);r!=null&&m(e,["description"],r);const i=p(t,["name"]);i!=null&&m(e,["name"],i);const o=p(t,["parameters"]);o!=null&&m(e,["parameters"],o);const s=p(t,["parametersJsonSchema"]);s!=null&&m(e,["parametersJsonSchema"],s);const l=p(t,["response"]);l!=null&&m(e,["response"],l);const c=p(t,["responseJsonSchema"]);return c!=null&&m(e,["responseJsonSchema"],c),e}function tTe(t){const e={},n=p(t,["startTime"]);n!=null&&m(e,["startTime"],n);const r=p(t,["endTime"]);return r!=null&&m(e,["endTime"],r),e}function nTe(t){const e={},n=p(t,["timeRangeFilter"]);if(n!=null&&m(e,["timeRangeFilter"],tTe(n)),p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function rTe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["dynamicThreshold"]);return r!=null&&m(e,["dynamicThreshold"],r),e}function iTe(t){const e={},n=p(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],rTe(n)),e}function oTe(){return{}}function sTe(t){const e={},n=p(t,["environment"]);return n!=null&&m(e,["environment"],n),e}function aTe(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>eTe(f))),m(e,["functionDeclarations"],c)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=p(t,["googleSearch"]);r!=null&&m(e,["googleSearch"],nTe(r));const i=p(t,["googleSearchRetrieval"]);if(i!=null&&m(e,["googleSearchRetrieval"],iTe(i)),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(p(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");p(t,["urlContext"])!=null&&m(e,["urlContext"],oTe());const s=p(t,["computerUse"]);s!=null&&m(e,["computerUse"],sTe(s));const l=p(t,["codeExecution"]);return l!=null&&m(e,["codeExecution"],l),e}function lTe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["allowedFunctionNames"]);return r!=null&&m(e,["allowedFunctionNames"],r),e}function uTe(t){const e={},n=p(t,["latitude"]);n!=null&&m(e,["latitude"],n);const r=p(t,["longitude"]);return r!=null&&m(e,["longitude"],r),e}function cTe(t){const e={},n=p(t,["latLng"]);n!=null&&m(e,["latLng"],uTe(n));const r=p(t,["languageCode"]);return r!=null&&m(e,["languageCode"],r),e}function fTe(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],lTe(n));const r=p(t,["retrievalConfig"]);return r!=null&&m(e,["retrievalConfig"],cTe(r)),e}function dTe(t,e){const n={},r=p(t,["ttl"]);e!==void 0&&r!=null&&m(e,["ttl"],r);const i=p(t,["expireTime"]);e!==void 0&&i!=null&&m(e,["expireTime"],i);const o=p(t,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const s=p(t,["contents"]);if(e!==void 0&&s!=null){let h=Ki(s);Array.isArray(h)&&(h=h.map(g=>KU(g))),m(e,["contents"],h)}const l=p(t,["systemInstruction"]);e!==void 0&&l!=null&&m(e,["systemInstruction"],KU(Cr(l)));const c=p(t,["tools"]);if(e!==void 0&&c!=null){let h=c;Array.isArray(h)&&(h=h.map(g=>aTe(g))),m(e,["tools"],h)}const f=p(t,["toolConfig"]);if(e!==void 0&&f!=null&&m(e,["toolConfig"],fTe(f)),p(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function hTe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["model"],zH(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],dTe(i,n)),n}function pTe(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],va(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function mTe(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],va(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function gTe(t,e){const n={},r=p(t,["ttl"]);e!==void 0&&r!=null&&m(e,["ttl"],r);const i=p(t,["expireTime"]);return e!==void 0&&i!=null&&m(e,["expireTime"],i),n}function yTe(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],va(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],gTe(i,n)),n}function vTe(t,e){const n={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=p(t,["pageToken"]);return e!==void 0&&i!=null&&m(e,["_query","pageToken"],i),n}function _Te(t){const e={},n=p(t,["config"]);return n!=null&&m(e,["config"],vTe(n,e)),e}function TTe(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function ETe(t){const e={},n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const r=p(t,["data"]);r!=null&&m(e,["data"],r);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function wTe(t){const e={},n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const r=p(t,["fileUri"]);r!=null&&m(e,["fileUri"],r);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function bTe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],TTe(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],ETe(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],wTe(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const l=p(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const c=p(t,["executableCode"]);c!=null&&m(e,["executableCode"],c);const f=p(t,["functionCall"]);f!=null&&m(e,["functionCall"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=p(t,["text"]);return g!=null&&m(e,["text"],g),e}function WU(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>bTe(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function STe(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&m(e,["description"],n);const r=p(t,["name"]);r!=null&&m(e,["name"],r);const i=p(t,["parameters"]);i!=null&&m(e,["parameters"],i);const o=p(t,["parametersJsonSchema"]);o!=null&&m(e,["parametersJsonSchema"],o);const s=p(t,["response"]);s!=null&&m(e,["response"],s);const l=p(t,["responseJsonSchema"]);return l!=null&&m(e,["responseJsonSchema"],l),e}function ATe(t){const e={},n=p(t,["startTime"]);n!=null&&m(e,["startTime"],n);const r=p(t,["endTime"]);return r!=null&&m(e,["endTime"],r),e}function xTe(t){const e={},n=p(t,["timeRangeFilter"]);n!=null&&m(e,["timeRangeFilter"],ATe(n));const r=p(t,["excludeDomains"]);return r!=null&&m(e,["excludeDomains"],r),e}function CTe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["dynamicThreshold"]);return r!=null&&m(e,["dynamicThreshold"],r),e}function ITe(t){const e={},n=p(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],CTe(n)),e}function RTe(t){const e={},n=p(t,["excludeDomains"]);return n!=null&&m(e,["excludeDomains"],n),e}function PTe(t){const e={},n=p(t,["apiKeyString"]);return n!=null&&m(e,["apiKeyString"],n),e}function NTe(t){const e={},n=p(t,["apiKeyConfig"]);n!=null&&m(e,["apiKeyConfig"],PTe(n));const r=p(t,["authType"]);r!=null&&m(e,["authType"],r);const i=p(t,["googleServiceAccountConfig"]);i!=null&&m(e,["googleServiceAccountConfig"],i);const o=p(t,["httpBasicAuthConfig"]);o!=null&&m(e,["httpBasicAuthConfig"],o);const s=p(t,["oauthConfig"]);s!=null&&m(e,["oauthConfig"],s);const l=p(t,["oidcConfig"]);return l!=null&&m(e,["oidcConfig"],l),e}function MTe(t){const e={},n=p(t,["authConfig"]);return n!=null&&m(e,["authConfig"],NTe(n)),e}function DTe(){return{}}function kTe(t){const e={},n=p(t,["environment"]);return n!=null&&m(e,["environment"],n),e}function OTe(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(v=>STe(v))),m(e,["functionDeclarations"],g)}const r=p(t,["retrieval"]);r!=null&&m(e,["retrieval"],r);const i=p(t,["googleSearch"]);i!=null&&m(e,["googleSearch"],xTe(i));const o=p(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],ITe(o));const s=p(t,["enterpriseWebSearch"]);s!=null&&m(e,["enterpriseWebSearch"],RTe(s));const l=p(t,["googleMaps"]);l!=null&&m(e,["googleMaps"],MTe(l)),p(t,["urlContext"])!=null&&m(e,["urlContext"],DTe());const f=p(t,["computerUse"]);f!=null&&m(e,["computerUse"],kTe(f));const h=p(t,["codeExecution"]);return h!=null&&m(e,["codeExecution"],h),e}function LTe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["allowedFunctionNames"]);return r!=null&&m(e,["allowedFunctionNames"],r),e}function VTe(t){const e={},n=p(t,["latitude"]);n!=null&&m(e,["latitude"],n);const r=p(t,["longitude"]);return r!=null&&m(e,["longitude"],r),e}function UTe(t){const e={},n=p(t,["latLng"]);n!=null&&m(e,["latLng"],VTe(n));const r=p(t,["languageCode"]);return r!=null&&m(e,["languageCode"],r),e}function FTe(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],LTe(n));const r=p(t,["retrievalConfig"]);return r!=null&&m(e,["retrievalConfig"],UTe(r)),e}function BTe(t,e){const n={},r=p(t,["ttl"]);e!==void 0&&r!=null&&m(e,["ttl"],r);const i=p(t,["expireTime"]);e!==void 0&&i!=null&&m(e,["expireTime"],i);const o=p(t,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const s=p(t,["contents"]);if(e!==void 0&&s!=null){let g=Ki(s);Array.isArray(g)&&(g=g.map(v=>WU(v))),m(e,["contents"],g)}const l=p(t,["systemInstruction"]);e!==void 0&&l!=null&&m(e,["systemInstruction"],WU(Cr(l)));const c=p(t,["tools"]);if(e!==void 0&&c!=null){let g=c;Array.isArray(g)&&(g=g.map(v=>OTe(v))),m(e,["tools"],g)}const f=p(t,["toolConfig"]);e!==void 0&&f!=null&&m(e,["toolConfig"],FTe(f));const h=p(t,["kmsKeyName"]);return e!==void 0&&h!=null&&m(e,["encryption_spec","kmsKeyName"],h),n}function qTe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["model"],zH(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],BTe(i,n)),n}function $Te(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],va(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function zTe(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],va(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function HTe(t,e){const n={},r=p(t,["ttl"]);e!==void 0&&r!=null&&m(e,["ttl"],r);const i=p(t,["expireTime"]);return e!==void 0&&i!=null&&m(e,["expireTime"],i),n}function GTe(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],va(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],HTe(i,n)),n}function jTe(t,e){const n={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=p(t,["pageToken"]);return e!==void 0&&i!=null&&m(e,["_query","pageToken"],i),n}function KTe(t){const e={},n=p(t,["config"]);return n!=null&&m(e,["config"],jTe(n,e)),e}function Vv(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const r=p(t,["displayName"]);r!=null&&m(e,["displayName"],r);const i=p(t,["model"]);i!=null&&m(e,["model"],i);const o=p(t,["createTime"]);o!=null&&m(e,["createTime"],o);const s=p(t,["updateTime"]);s!=null&&m(e,["updateTime"],s);const l=p(t,["expireTime"]);l!=null&&m(e,["expireTime"],l);const c=p(t,["usageMetadata"]);return c!=null&&m(e,["usageMetadata"],c),e}function WTe(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function YTe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Vv(s))),m(e,["cachedContents"],o)}return e}function Uv(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const r=p(t,["displayName"]);r!=null&&m(e,["displayName"],r);const i=p(t,["model"]);i!=null&&m(e,["model"],i);const o=p(t,["createTime"]);o!=null&&m(e,["createTime"],o);const s=p(t,["updateTime"]);s!=null&&m(e,["updateTime"],s);const l=p(t,["expireTime"]);l!=null&&m(e,["expireTime"],l);const c=p(t,["usageMetadata"]);return c!=null&&m(e,["usageMetadata"],c),e}function JTe(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function QTe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Uv(s))),m(e,["cachedContents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class XTe extends _c{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new _g(ac.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=qTe(this.apiClient,e);return l=De("cachedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Uv(h))}else{const f=hTe(this.apiClient,e);return l=De("cachedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Vv(h))}}async get(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=$Te(this.apiClient,e);return l=De("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Uv(h))}else{const f=pTe(this.apiClient,e);return l=De("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Vv(h))}}async delete(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=zTe(this.apiClient,e);return l=De("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=JTe(h),v=new BU;return Object.assign(v,g),v})}else{const f=mTe(this.apiClient,e);return l=De("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=WTe(h),v=new BU;return Object.assign(v,g),v})}}async update(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=GTe(this.apiClient,e);return l=De("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Uv(h))}else{const f=yTe(this.apiClient,e);return l=De("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Vv(h))}}async listInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=KTe(e);return l=De("cachedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=QTe(h),v=new qU;return Object.assign(v,g),v})}else{const f=_Te(e);return l=De("cachedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=YTe(h),v=new qU;return Object.assign(v,g),v})}}}function YU(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Wt(t){return this instanceof Wt?(this.v=t,this):new Wt(t)}function Ff(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(E){return function(b){return Promise.resolve(b).then(E,g)}}function l(E,b){r[E]&&(i[E]=function(S){return new Promise(function(A,C){o.push([E,S,A,C])>1||c(E,S)})},b&&(i[E]=b(i[E])))}function c(E,b){try{f(r[E](b))}catch(S){v(o[0][3],S)}}function f(E){E.value instanceof Wt?Promise.resolve(E.value.v).then(h,g):v(o[0][2],E)}function h(E){c("next",E)}function g(E){c("throw",E)}function v(E,b){E(b),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Jp(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof YU=="function"?YU(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(l,c){s=t[o](s),i(l,c,s.done,s.value)})}}function i(o,s,l,c){Promise.resolve(c).then(function(f){o({value:f,done:l})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZTe(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:oG(n)}function oG(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function eEe(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function JU(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let o=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),o&&!oG(t[r])&&(o=!1),r++;o?e.push(...i):e.pop()}return e}class tEe{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new nEe(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class nEe{constructor(e,n,r,i={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),eEe(o)}async sendMessage(e){var n;await this.sendPromise;const r=Cr(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,s,l;const c=await i,f=(s=(o=c.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,h=c.automaticFunctionCallingHistory,g=this.getHistory(!0).length;let v=[];h!=null&&(v=(l=h.slice(g))!==null&&l!==void 0?l:[]);const E=f?[f]:[];this.recordHistory(r,E,v)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=Cr(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){const n=e?JU(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,i;return Ff(this,arguments,function*(){var s,l,c,f;const h=[];try{for(var g=!0,v=Jp(e),E;E=yield Wt(v.next()),s=E.done,!s;g=!0){f=E.value,g=!1;const b=f;if(ZTe(b)){const S=(i=(r=b.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;S!==void 0&&h.push(S)}yield yield Wt(b)}}catch(b){l={error:b}}finally{try{!g&&!s&&(c=v.return)&&(yield Wt(c.call(v)))}finally{if(l)throw l.error}}this.recordHistory(n,h)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(o=>o.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...JU(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ST extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,ST.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rEe(t,e){const n={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=p(t,["pageToken"]);return e!==void 0&&i!=null&&m(e,["_query","pageToken"],i),n}function iEe(t){const e={},n=p(t,["config"]);return n!=null&&m(e,["config"],rEe(n,e)),e}function oEe(t){const e={},n=p(t,["details"]);n!=null&&m(e,["details"],n);const r=p(t,["message"]);r!=null&&m(e,["message"],r);const i=p(t,["code"]);return i!=null&&m(e,["code"],i),e}function sEe(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const r=p(t,["displayName"]);r!=null&&m(e,["displayName"],r);const i=p(t,["mimeType"]);i!=null&&m(e,["mimeType"],i);const o=p(t,["sizeBytes"]);o!=null&&m(e,["sizeBytes"],o);const s=p(t,["createTime"]);s!=null&&m(e,["createTime"],s);const l=p(t,["expirationTime"]);l!=null&&m(e,["expirationTime"],l);const c=p(t,["updateTime"]);c!=null&&m(e,["updateTime"],c);const f=p(t,["sha256Hash"]);f!=null&&m(e,["sha256Hash"],f);const h=p(t,["uri"]);h!=null&&m(e,["uri"],h);const g=p(t,["downloadUri"]);g!=null&&m(e,["downloadUri"],g);const v=p(t,["state"]);v!=null&&m(e,["state"],v);const E=p(t,["source"]);E!=null&&m(e,["source"],E);const b=p(t,["videoMetadata"]);b!=null&&m(e,["videoMetadata"],b);const S=p(t,["error"]);return S!=null&&m(e,["error"],oEe(S)),e}function aEe(t){const e={},n=p(t,["file"]);n!=null&&m(e,["file"],sEe(n));const r=p(t,["config"]);return r!=null&&m(e,["config"],r),e}function lEe(t){const e={},n=p(t,["name"]);n!=null&&m(e,["_url","file"],JH(n));const r=p(t,["config"]);return r!=null&&m(e,["config"],r),e}function uEe(t){const e={},n=p(t,["name"]);n!=null&&m(e,["_url","file"],JH(n));const r=p(t,["config"]);return r!=null&&m(e,["config"],r),e}function cEe(t){const e={},n=p(t,["details"]);n!=null&&m(e,["details"],n);const r=p(t,["message"]);r!=null&&m(e,["message"],r);const i=p(t,["code"]);return i!=null&&m(e,["code"],i),e}function Sx(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const r=p(t,["displayName"]);r!=null&&m(e,["displayName"],r);const i=p(t,["mimeType"]);i!=null&&m(e,["mimeType"],i);const o=p(t,["sizeBytes"]);o!=null&&m(e,["sizeBytes"],o);const s=p(t,["createTime"]);s!=null&&m(e,["createTime"],s);const l=p(t,["expirationTime"]);l!=null&&m(e,["expirationTime"],l);const c=p(t,["updateTime"]);c!=null&&m(e,["updateTime"],c);const f=p(t,["sha256Hash"]);f!=null&&m(e,["sha256Hash"],f);const h=p(t,["uri"]);h!=null&&m(e,["uri"],h);const g=p(t,["downloadUri"]);g!=null&&m(e,["downloadUri"],g);const v=p(t,["state"]);v!=null&&m(e,["state"],v);const E=p(t,["source"]);E!=null&&m(e,["source"],E);const b=p(t,["videoMetadata"]);b!=null&&m(e,["videoMetadata"],b);const S=p(t,["error"]);return S!=null&&m(e,["error"],cEe(S)),e}function fEe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(t,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Sx(s))),m(e,["files"],o)}return e}function dEe(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function hEe(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pEe extends _c{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new _g(ac.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>Sx(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=iEe(e);return o=De("files",l._url),s=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const f=fEe(c),h=new P_e;return Object.assign(h,f),h})}}async createInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=aEe(e);return o=De("upload/v1beta/files",l._url),s=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const f=dEe(c),h=new N_e;return Object.assign(h,f),h})}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=lEe(e);return o=De("files/{file}",l._url),s=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>Sx(c))}}async delete(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=uEe(e);return o=De("files/{file}",l._url),s=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const f=hEe(c),h=new M_e;return Object.assign(h,f),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mEe(t){const e={},n=p(t,["voiceName"]);return n!=null&&m(e,["voiceName"],n),e}function sG(t){const e={},n=p(t,["prebuiltVoiceConfig"]);return n!=null&&m(e,["prebuiltVoiceConfig"],mEe(n)),e}function gEe(t){const e={},n=p(t,["speaker"]);n!=null&&m(e,["speaker"],n);const r=p(t,["voiceConfig"]);return r!=null&&m(e,["voiceConfig"],sG(r)),e}function yEe(t){const e={},n=p(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>gEe(i))),m(e,["speakerVoiceConfigs"],r)}return e}function vEe(t){const e={},n=p(t,["voiceConfig"]);n!=null&&m(e,["voiceConfig"],sG(n));const r=p(t,["multiSpeakerVoiceConfig"]);r!=null&&m(e,["multiSpeakerVoiceConfig"],yEe(r));const i=p(t,["languageCode"]);return i!=null&&m(e,["languageCode"],i),e}function _Ee(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function TEe(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["data"]);n!=null&&m(e,["data"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function EEe(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function wEe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],_Ee(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],TEe(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],EEe(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const l=p(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const c=p(t,["executableCode"]);c!=null&&m(e,["executableCode"],c);const f=p(t,["functionCall"]);f!=null&&m(e,["functionCall"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=p(t,["text"]);return g!=null&&m(e,["text"],g),e}function bEe(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>wEe(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function SEe(t){const e={},n=p(t,["behavior"]);n!=null&&m(e,["behavior"],n);const r=p(t,["description"]);r!=null&&m(e,["description"],r);const i=p(t,["name"]);i!=null&&m(e,["name"],i);const o=p(t,["parameters"]);o!=null&&m(e,["parameters"],o);const s=p(t,["parametersJsonSchema"]);s!=null&&m(e,["parametersJsonSchema"],s);const l=p(t,["response"]);l!=null&&m(e,["response"],l);const c=p(t,["responseJsonSchema"]);return c!=null&&m(e,["responseJsonSchema"],c),e}function AEe(t){const e={},n=p(t,["startTime"]);n!=null&&m(e,["startTime"],n);const r=p(t,["endTime"]);return r!=null&&m(e,["endTime"],r),e}function xEe(t){const e={},n=p(t,["timeRangeFilter"]);if(n!=null&&m(e,["timeRangeFilter"],AEe(n)),p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function CEe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["dynamicThreshold"]);return r!=null&&m(e,["dynamicThreshold"],r),e}function IEe(t){const e={},n=p(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],CEe(n)),e}function REe(){return{}}function PEe(t){const e={},n=p(t,["environment"]);return n!=null&&m(e,["environment"],n),e}function NEe(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>SEe(f))),m(e,["functionDeclarations"],c)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=p(t,["googleSearch"]);r!=null&&m(e,["googleSearch"],xEe(r));const i=p(t,["googleSearchRetrieval"]);if(i!=null&&m(e,["googleSearchRetrieval"],IEe(i)),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(p(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");p(t,["urlContext"])!=null&&m(e,["urlContext"],REe());const s=p(t,["computerUse"]);s!=null&&m(e,["computerUse"],PEe(s));const l=p(t,["codeExecution"]);return l!=null&&m(e,["codeExecution"],l),e}function MEe(t){const e={},n=p(t,["handle"]);if(n!=null&&m(e,["handle"],n),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function QU(){return{}}function DEe(t){const e={},n=p(t,["disabled"]);n!=null&&m(e,["disabled"],n);const r=p(t,["startOfSpeechSensitivity"]);r!=null&&m(e,["startOfSpeechSensitivity"],r);const i=p(t,["endOfSpeechSensitivity"]);i!=null&&m(e,["endOfSpeechSensitivity"],i);const o=p(t,["prefixPaddingMs"]);o!=null&&m(e,["prefixPaddingMs"],o);const s=p(t,["silenceDurationMs"]);return s!=null&&m(e,["silenceDurationMs"],s),e}function kEe(t){const e={},n=p(t,["automaticActivityDetection"]);n!=null&&m(e,["automaticActivityDetection"],DEe(n));const r=p(t,["activityHandling"]);r!=null&&m(e,["activityHandling"],r);const i=p(t,["turnCoverage"]);return i!=null&&m(e,["turnCoverage"],i),e}function OEe(t){const e={},n=p(t,["targetTokens"]);return n!=null&&m(e,["targetTokens"],n),e}function LEe(t){const e={},n=p(t,["triggerTokens"]);n!=null&&m(e,["triggerTokens"],n);const r=p(t,["slidingWindow"]);return r!=null&&m(e,["slidingWindow"],OEe(r)),e}function VEe(t){const e={},n=p(t,["proactiveAudio"]);return n!=null&&m(e,["proactiveAudio"],n),e}function UEe(t,e){const n={},r=p(t,["generationConfig"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig"],r);const i=p(t,["responseModalities"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig","responseModalities"],i);const o=p(t,["temperature"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","temperature"],o);const s=p(t,["topP"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","topP"],s);const l=p(t,["topK"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","topK"],l);const c=p(t,["maxOutputTokens"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","maxOutputTokens"],c);const f=p(t,["mediaResolution"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","mediaResolution"],f);const h=p(t,["seed"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","seed"],h);const g=p(t,["speechConfig"]);e!==void 0&&g!=null&&m(e,["setup","generationConfig","speechConfig"],vEe(u1(g)));const v=p(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],v);const E=p(t,["systemInstruction"]);e!==void 0&&E!=null&&m(e,["setup","systemInstruction"],bEe(Cr(E)));const b=p(t,["tools"]);if(e!==void 0&&b!=null){let $=Yd(b);Array.isArray($)&&($=$.map(H=>NEe(Wd(H)))),m(e,["setup","tools"],$)}const S=p(t,["sessionResumption"]);e!==void 0&&S!=null&&m(e,["setup","sessionResumption"],MEe(S));const A=p(t,["inputAudioTranscription"]);e!==void 0&&A!=null&&m(e,["setup","inputAudioTranscription"],QU());const C=p(t,["outputAudioTranscription"]);e!==void 0&&C!=null&&m(e,["setup","outputAudioTranscription"],QU());const D=p(t,["realtimeInputConfig"]);e!==void 0&&D!=null&&m(e,["setup","realtimeInputConfig"],kEe(D));const k=p(t,["contextWindowCompression"]);e!==void 0&&k!=null&&m(e,["setup","contextWindowCompression"],LEe(k));const q=p(t,["proactivity"]);return e!==void 0&&q!=null&&m(e,["setup","proactivity"],VEe(q)),n}function FEe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["setup","model"],Et(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],UEe(i,n)),n}function BEe(){return{}}function qEe(){return{}}function $Ee(t){const e={},n=p(t,["media"]);n!=null&&m(e,["mediaChunks"],HH(n));const r=p(t,["audio"]);r!=null&&m(e,["audio"],jH(r));const i=p(t,["audioStreamEnd"]);i!=null&&m(e,["audioStreamEnd"],i);const o=p(t,["video"]);o!=null&&m(e,["video"],GH(o));const s=p(t,["text"]);return s!=null&&m(e,["text"],s),p(t,["activityStart"])!=null&&m(e,["activityStart"],BEe()),p(t,["activityEnd"])!=null&&m(e,["activityEnd"],qEe()),e}function aG(t){const e={},n=p(t,["text"]);n!=null&&m(e,["text"],n);const r=p(t,["weight"]);return r!=null&&m(e,["weight"],r),e}function zEe(t){const e={},n=p(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>aG(i))),m(e,["weightedPrompts"],r)}return e}function lG(t){const e={},n=p(t,["temperature"]);n!=null&&m(e,["temperature"],n);const r=p(t,["topK"]);r!=null&&m(e,["topK"],r);const i=p(t,["seed"]);i!=null&&m(e,["seed"],i);const o=p(t,["guidance"]);o!=null&&m(e,["guidance"],o);const s=p(t,["bpm"]);s!=null&&m(e,["bpm"],s);const l=p(t,["density"]);l!=null&&m(e,["density"],l);const c=p(t,["brightness"]);c!=null&&m(e,["brightness"],c);const f=p(t,["scale"]);f!=null&&m(e,["scale"],f);const h=p(t,["muteBass"]);h!=null&&m(e,["muteBass"],h);const g=p(t,["muteDrums"]);g!=null&&m(e,["muteDrums"],g);const v=p(t,["onlyBassAndDrums"]);v!=null&&m(e,["onlyBassAndDrums"],v);const E=p(t,["musicGenerationMode"]);return E!=null&&m(e,["musicGenerationMode"],E),e}function HEe(t){const e={},n=p(t,["musicGenerationConfig"]);return n!=null&&m(e,["musicGenerationConfig"],lG(n)),e}function uG(t){const e={},n=p(t,["model"]);return n!=null&&m(e,["model"],n),e}function cG(t){const e={},n=p(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>aG(i))),m(e,["weightedPrompts"],r)}return e}function Ax(t){const e={},n=p(t,["setup"]);n!=null&&m(e,["setup"],uG(n));const r=p(t,["clientContent"]);r!=null&&m(e,["clientContent"],cG(r));const i=p(t,["musicGenerationConfig"]);i!=null&&m(e,["musicGenerationConfig"],lG(i));const o=p(t,["playbackControl"]);return o!=null&&m(e,["playbackControl"],o),e}function GEe(t){const e={},n=p(t,["voiceName"]);return n!=null&&m(e,["voiceName"],n),e}function jEe(t){const e={},n=p(t,["prebuiltVoiceConfig"]);return n!=null&&m(e,["prebuiltVoiceConfig"],GEe(n)),e}function KEe(t){const e={},n=p(t,["voiceConfig"]);if(n!=null&&m(e,["voiceConfig"],jEe(n)),p(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=p(t,["languageCode"]);return r!=null&&m(e,["languageCode"],r),e}function WEe(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function YEe(t){const e={},n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const r=p(t,["data"]);r!=null&&m(e,["data"],r);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function JEe(t){const e={},n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const r=p(t,["fileUri"]);r!=null&&m(e,["fileUri"],r);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function QEe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],WEe(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],YEe(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],JEe(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const l=p(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const c=p(t,["executableCode"]);c!=null&&m(e,["executableCode"],c);const f=p(t,["functionCall"]);f!=null&&m(e,["functionCall"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=p(t,["text"]);return g!=null&&m(e,["text"],g),e}function XEe(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>QEe(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function ZEe(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&m(e,["description"],n);const r=p(t,["name"]);r!=null&&m(e,["name"],r);const i=p(t,["parameters"]);i!=null&&m(e,["parameters"],i);const o=p(t,["parametersJsonSchema"]);o!=null&&m(e,["parametersJsonSchema"],o);const s=p(t,["response"]);s!=null&&m(e,["response"],s);const l=p(t,["responseJsonSchema"]);return l!=null&&m(e,["responseJsonSchema"],l),e}function ewe(t){const e={},n=p(t,["startTime"]);n!=null&&m(e,["startTime"],n);const r=p(t,["endTime"]);return r!=null&&m(e,["endTime"],r),e}function twe(t){const e={},n=p(t,["timeRangeFilter"]);n!=null&&m(e,["timeRangeFilter"],ewe(n));const r=p(t,["excludeDomains"]);return r!=null&&m(e,["excludeDomains"],r),e}function nwe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["dynamicThreshold"]);return r!=null&&m(e,["dynamicThreshold"],r),e}function rwe(t){const e={},n=p(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],nwe(n)),e}function iwe(t){const e={},n=p(t,["excludeDomains"]);return n!=null&&m(e,["excludeDomains"],n),e}function owe(t){const e={},n=p(t,["apiKeyString"]);return n!=null&&m(e,["apiKeyString"],n),e}function swe(t){const e={},n=p(t,["apiKeyConfig"]);n!=null&&m(e,["apiKeyConfig"],owe(n));const r=p(t,["authType"]);r!=null&&m(e,["authType"],r);const i=p(t,["googleServiceAccountConfig"]);i!=null&&m(e,["googleServiceAccountConfig"],i);const o=p(t,["httpBasicAuthConfig"]);o!=null&&m(e,["httpBasicAuthConfig"],o);const s=p(t,["oauthConfig"]);s!=null&&m(e,["oauthConfig"],s);const l=p(t,["oidcConfig"]);return l!=null&&m(e,["oidcConfig"],l),e}function awe(t){const e={},n=p(t,["authConfig"]);return n!=null&&m(e,["authConfig"],swe(n)),e}function lwe(){return{}}function uwe(t){const e={},n=p(t,["environment"]);return n!=null&&m(e,["environment"],n),e}function cwe(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(v=>ZEe(v))),m(e,["functionDeclarations"],g)}const r=p(t,["retrieval"]);r!=null&&m(e,["retrieval"],r);const i=p(t,["googleSearch"]);i!=null&&m(e,["googleSearch"],twe(i));const o=p(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],rwe(o));const s=p(t,["enterpriseWebSearch"]);s!=null&&m(e,["enterpriseWebSearch"],iwe(s));const l=p(t,["googleMaps"]);l!=null&&m(e,["googleMaps"],awe(l)),p(t,["urlContext"])!=null&&m(e,["urlContext"],lwe());const f=p(t,["computerUse"]);f!=null&&m(e,["computerUse"],uwe(f));const h=p(t,["codeExecution"]);return h!=null&&m(e,["codeExecution"],h),e}function fwe(t){const e={},n=p(t,["handle"]);n!=null&&m(e,["handle"],n);const r=p(t,["transparent"]);return r!=null&&m(e,["transparent"],r),e}function XU(){return{}}function dwe(t){const e={},n=p(t,["disabled"]);n!=null&&m(e,["disabled"],n);const r=p(t,["startOfSpeechSensitivity"]);r!=null&&m(e,["startOfSpeechSensitivity"],r);const i=p(t,["endOfSpeechSensitivity"]);i!=null&&m(e,["endOfSpeechSensitivity"],i);const o=p(t,["prefixPaddingMs"]);o!=null&&m(e,["prefixPaddingMs"],o);const s=p(t,["silenceDurationMs"]);return s!=null&&m(e,["silenceDurationMs"],s),e}function hwe(t){const e={},n=p(t,["automaticActivityDetection"]);n!=null&&m(e,["automaticActivityDetection"],dwe(n));const r=p(t,["activityHandling"]);r!=null&&m(e,["activityHandling"],r);const i=p(t,["turnCoverage"]);return i!=null&&m(e,["turnCoverage"],i),e}function pwe(t){const e={},n=p(t,["targetTokens"]);return n!=null&&m(e,["targetTokens"],n),e}function mwe(t){const e={},n=p(t,["triggerTokens"]);n!=null&&m(e,["triggerTokens"],n);const r=p(t,["slidingWindow"]);return r!=null&&m(e,["slidingWindow"],pwe(r)),e}function gwe(t){const e={},n=p(t,["proactiveAudio"]);return n!=null&&m(e,["proactiveAudio"],n),e}function ywe(t,e){const n={},r=p(t,["generationConfig"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig"],r);const i=p(t,["responseModalities"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig","responseModalities"],i);const o=p(t,["temperature"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","temperature"],o);const s=p(t,["topP"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","topP"],s);const l=p(t,["topK"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","topK"],l);const c=p(t,["maxOutputTokens"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","maxOutputTokens"],c);const f=p(t,["mediaResolution"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","mediaResolution"],f);const h=p(t,["seed"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","seed"],h);const g=p(t,["speechConfig"]);e!==void 0&&g!=null&&m(e,["setup","generationConfig","speechConfig"],KEe(u1(g)));const v=p(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],v);const E=p(t,["systemInstruction"]);e!==void 0&&E!=null&&m(e,["setup","systemInstruction"],XEe(Cr(E)));const b=p(t,["tools"]);if(e!==void 0&&b!=null){let $=Yd(b);Array.isArray($)&&($=$.map(H=>cwe(Wd(H)))),m(e,["setup","tools"],$)}const S=p(t,["sessionResumption"]);e!==void 0&&S!=null&&m(e,["setup","sessionResumption"],fwe(S));const A=p(t,["inputAudioTranscription"]);e!==void 0&&A!=null&&m(e,["setup","inputAudioTranscription"],XU());const C=p(t,["outputAudioTranscription"]);e!==void 0&&C!=null&&m(e,["setup","outputAudioTranscription"],XU());const D=p(t,["realtimeInputConfig"]);e!==void 0&&D!=null&&m(e,["setup","realtimeInputConfig"],hwe(D));const k=p(t,["contextWindowCompression"]);e!==void 0&&k!=null&&m(e,["setup","contextWindowCompression"],mwe(k));const q=p(t,["proactivity"]);return e!==void 0&&q!=null&&m(e,["setup","proactivity"],gwe(q)),n}function vwe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["setup","model"],Et(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],ywe(i,n)),n}function _we(){return{}}function Twe(){return{}}function Ewe(t){const e={},n=p(t,["media"]);n!=null&&m(e,["mediaChunks"],HH(n));const r=p(t,["audio"]);r!=null&&m(e,["audio"],jH(r));const i=p(t,["audioStreamEnd"]);i!=null&&m(e,["audioStreamEnd"],i);const o=p(t,["video"]);o!=null&&m(e,["video"],GH(o));const s=p(t,["text"]);return s!=null&&m(e,["text"],s),p(t,["activityStart"])!=null&&m(e,["activityStart"],_we()),p(t,["activityEnd"])!=null&&m(e,["activityEnd"],Twe()),e}function wwe(){return{}}function bwe(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function Swe(t){const e={},n=p(t,["data"]);n!=null&&m(e,["data"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function Awe(t){const e={},n=p(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function xwe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],bwe(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],Swe(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],Awe(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const l=p(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const c=p(t,["executableCode"]);c!=null&&m(e,["executableCode"],c);const f=p(t,["functionCall"]);f!=null&&m(e,["functionCall"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=p(t,["text"]);return g!=null&&m(e,["text"],g),e}function Cwe(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>xwe(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function ZU(t){const e={},n=p(t,["text"]);n!=null&&m(e,["text"],n);const r=p(t,["finished"]);return r!=null&&m(e,["finished"],r),e}function Iwe(t){const e={},n=p(t,["retrievedUrl"]);n!=null&&m(e,["retrievedUrl"],n);const r=p(t,["urlRetrievalStatus"]);return r!=null&&m(e,["urlRetrievalStatus"],r),e}function Rwe(t){const e={},n=p(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Iwe(i))),m(e,["urlMetadata"],r)}return e}function Pwe(t){const e={},n=p(t,["modelTurn"]);n!=null&&m(e,["modelTurn"],Cwe(n));const r=p(t,["turnComplete"]);r!=null&&m(e,["turnComplete"],r);const i=p(t,["interrupted"]);i!=null&&m(e,["interrupted"],i);const o=p(t,["groundingMetadata"]);o!=null&&m(e,["groundingMetadata"],o);const s=p(t,["generationComplete"]);s!=null&&m(e,["generationComplete"],s);const l=p(t,["inputTranscription"]);l!=null&&m(e,["inputTranscription"],ZU(l));const c=p(t,["outputTranscription"]);c!=null&&m(e,["outputTranscription"],ZU(c));const f=p(t,["urlContextMetadata"]);return f!=null&&m(e,["urlContextMetadata"],Rwe(f)),e}function Nwe(t){const e={},n=p(t,["id"]);n!=null&&m(e,["id"],n);const r=p(t,["args"]);r!=null&&m(e,["args"],r);const i=p(t,["name"]);return i!=null&&m(e,["name"],i),e}function Mwe(t){const e={},n=p(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Nwe(i))),m(e,["functionCalls"],r)}return e}function Dwe(t){const e={},n=p(t,["ids"]);return n!=null&&m(e,["ids"],n),e}function mv(t){const e={},n=p(t,["modality"]);n!=null&&m(e,["modality"],n);const r=p(t,["tokenCount"]);return r!=null&&m(e,["tokenCount"],r),e}function kwe(t){const e={},n=p(t,["promptTokenCount"]);n!=null&&m(e,["promptTokenCount"],n);const r=p(t,["cachedContentTokenCount"]);r!=null&&m(e,["cachedContentTokenCount"],r);const i=p(t,["responseTokenCount"]);i!=null&&m(e,["responseTokenCount"],i);const o=p(t,["toolUsePromptTokenCount"]);o!=null&&m(e,["toolUsePromptTokenCount"],o);const s=p(t,["thoughtsTokenCount"]);s!=null&&m(e,["thoughtsTokenCount"],s);const l=p(t,["totalTokenCount"]);l!=null&&m(e,["totalTokenCount"],l);const c=p(t,["promptTokensDetails"]);if(c!=null){let v=c;Array.isArray(v)&&(v=v.map(E=>mv(E))),m(e,["promptTokensDetails"],v)}const f=p(t,["cacheTokensDetails"]);if(f!=null){let v=f;Array.isArray(v)&&(v=v.map(E=>mv(E))),m(e,["cacheTokensDetails"],v)}const h=p(t,["responseTokensDetails"]);if(h!=null){let v=h;Array.isArray(v)&&(v=v.map(E=>mv(E))),m(e,["responseTokensDetails"],v)}const g=p(t,["toolUsePromptTokensDetails"]);if(g!=null){let v=g;Array.isArray(v)&&(v=v.map(E=>mv(E))),m(e,["toolUsePromptTokensDetails"],v)}return e}function Owe(t){const e={},n=p(t,["timeLeft"]);return n!=null&&m(e,["timeLeft"],n),e}function Lwe(t){const e={},n=p(t,["newHandle"]);n!=null&&m(e,["newHandle"],n);const r=p(t,["resumable"]);r!=null&&m(e,["resumable"],r);const i=p(t,["lastConsumedClientMessageIndex"]);return i!=null&&m(e,["lastConsumedClientMessageIndex"],i),e}function Vwe(t){const e={};p(t,["setupComplete"])!=null&&m(e,["setupComplete"],wwe());const r=p(t,["serverContent"]);r!=null&&m(e,["serverContent"],Pwe(r));const i=p(t,["toolCall"]);i!=null&&m(e,["toolCall"],Mwe(i));const o=p(t,["toolCallCancellation"]);o!=null&&m(e,["toolCallCancellation"],Dwe(o));const s=p(t,["usageMetadata"]);s!=null&&m(e,["usageMetadata"],kwe(s));const l=p(t,["goAway"]);l!=null&&m(e,["goAway"],Owe(l));const c=p(t,["sessionResumptionUpdate"]);return c!=null&&m(e,["sessionResumptionUpdate"],Lwe(c)),e}function Uwe(){return{}}function Fwe(t){const e={},n=p(t,["text"]);n!=null&&m(e,["text"],n);const r=p(t,["weight"]);return r!=null&&m(e,["weight"],r),e}function Bwe(t){const e={},n=p(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Fwe(i))),m(e,["weightedPrompts"],r)}return e}function qwe(t){const e={},n=p(t,["temperature"]);n!=null&&m(e,["temperature"],n);const r=p(t,["topK"]);r!=null&&m(e,["topK"],r);const i=p(t,["seed"]);i!=null&&m(e,["seed"],i);const o=p(t,["guidance"]);o!=null&&m(e,["guidance"],o);const s=p(t,["bpm"]);s!=null&&m(e,["bpm"],s);const l=p(t,["density"]);l!=null&&m(e,["density"],l);const c=p(t,["brightness"]);c!=null&&m(e,["brightness"],c);const f=p(t,["scale"]);f!=null&&m(e,["scale"],f);const h=p(t,["muteBass"]);h!=null&&m(e,["muteBass"],h);const g=p(t,["muteDrums"]);g!=null&&m(e,["muteDrums"],g);const v=p(t,["onlyBassAndDrums"]);v!=null&&m(e,["onlyBassAndDrums"],v);const E=p(t,["musicGenerationMode"]);return E!=null&&m(e,["musicGenerationMode"],E),e}function $we(t){const e={},n=p(t,["clientContent"]);n!=null&&m(e,["clientContent"],Bwe(n));const r=p(t,["musicGenerationConfig"]);return r!=null&&m(e,["musicGenerationConfig"],qwe(r)),e}function zwe(t){const e={},n=p(t,["data"]);n!=null&&m(e,["data"],n);const r=p(t,["mimeType"]);r!=null&&m(e,["mimeType"],r);const i=p(t,["sourceMetadata"]);return i!=null&&m(e,["sourceMetadata"],$we(i)),e}function Hwe(t){const e={},n=p(t,["audioChunks"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>zwe(i))),m(e,["audioChunks"],r)}return e}function Gwe(t){const e={},n=p(t,["text"]);n!=null&&m(e,["text"],n);const r=p(t,["filteredReason"]);return r!=null&&m(e,["filteredReason"],r),e}function jwe(t){const e={};p(t,["setupComplete"])!=null&&m(e,["setupComplete"],Uwe());const r=p(t,["serverContent"]);r!=null&&m(e,["serverContent"],Hwe(r));const i=p(t,["filteredPrompt"]);return i!=null&&m(e,["filteredPrompt"],Gwe(i)),e}function Kwe(t){const e={},n=p(t,["sessionId"]);return n!=null&&m(e,["sessionId"],n),e}function Wwe(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function Ywe(t){const e={},n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const r=p(t,["data"]);r!=null&&m(e,["data"],r);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function Jwe(t){const e={},n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const r=p(t,["fileUri"]);r!=null&&m(e,["fileUri"],r);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function Qwe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],Wwe(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],Ywe(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],Jwe(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const l=p(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const c=p(t,["executableCode"]);c!=null&&m(e,["executableCode"],c);const f=p(t,["functionCall"]);f!=null&&m(e,["functionCall"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=p(t,["text"]);return g!=null&&m(e,["text"],g),e}function Xwe(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Qwe(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function e4(t){const e={},n=p(t,["text"]);n!=null&&m(e,["text"],n);const r=p(t,["finished"]);return r!=null&&m(e,["finished"],r),e}function Zwe(t){const e={},n=p(t,["modelTurn"]);n!=null&&m(e,["modelTurn"],Xwe(n));const r=p(t,["turnComplete"]);r!=null&&m(e,["turnComplete"],r);const i=p(t,["interrupted"]);i!=null&&m(e,["interrupted"],i);const o=p(t,["groundingMetadata"]);o!=null&&m(e,["groundingMetadata"],o);const s=p(t,["generationComplete"]);s!=null&&m(e,["generationComplete"],s);const l=p(t,["inputTranscription"]);l!=null&&m(e,["inputTranscription"],e4(l));const c=p(t,["outputTranscription"]);return c!=null&&m(e,["outputTranscription"],e4(c)),e}function ebe(t){const e={},n=p(t,["args"]);n!=null&&m(e,["args"],n);const r=p(t,["name"]);return r!=null&&m(e,["name"],r),e}function tbe(t){const e={},n=p(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>ebe(i))),m(e,["functionCalls"],r)}return e}function nbe(t){const e={},n=p(t,["ids"]);return n!=null&&m(e,["ids"],n),e}function gv(t){const e={},n=p(t,["modality"]);n!=null&&m(e,["modality"],n);const r=p(t,["tokenCount"]);return r!=null&&m(e,["tokenCount"],r),e}function rbe(t){const e={},n=p(t,["promptTokenCount"]);n!=null&&m(e,["promptTokenCount"],n);const r=p(t,["cachedContentTokenCount"]);r!=null&&m(e,["cachedContentTokenCount"],r);const i=p(t,["candidatesTokenCount"]);i!=null&&m(e,["responseTokenCount"],i);const o=p(t,["toolUsePromptTokenCount"]);o!=null&&m(e,["toolUsePromptTokenCount"],o);const s=p(t,["thoughtsTokenCount"]);s!=null&&m(e,["thoughtsTokenCount"],s);const l=p(t,["totalTokenCount"]);l!=null&&m(e,["totalTokenCount"],l);const c=p(t,["promptTokensDetails"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(b=>gv(b))),m(e,["promptTokensDetails"],E)}const f=p(t,["cacheTokensDetails"]);if(f!=null){let E=f;Array.isArray(E)&&(E=E.map(b=>gv(b))),m(e,["cacheTokensDetails"],E)}const h=p(t,["candidatesTokensDetails"]);if(h!=null){let E=h;Array.isArray(E)&&(E=E.map(b=>gv(b))),m(e,["responseTokensDetails"],E)}const g=p(t,["toolUsePromptTokensDetails"]);if(g!=null){let E=g;Array.isArray(E)&&(E=E.map(b=>gv(b))),m(e,["toolUsePromptTokensDetails"],E)}const v=p(t,["trafficType"]);return v!=null&&m(e,["trafficType"],v),e}function ibe(t){const e={},n=p(t,["timeLeft"]);return n!=null&&m(e,["timeLeft"],n),e}function obe(t){const e={},n=p(t,["newHandle"]);n!=null&&m(e,["newHandle"],n);const r=p(t,["resumable"]);r!=null&&m(e,["resumable"],r);const i=p(t,["lastConsumedClientMessageIndex"]);return i!=null&&m(e,["lastConsumedClientMessageIndex"],i),e}function sbe(t){const e={},n=p(t,["setupComplete"]);n!=null&&m(e,["setupComplete"],Kwe(n));const r=p(t,["serverContent"]);r!=null&&m(e,["serverContent"],Zwe(r));const i=p(t,["toolCall"]);i!=null&&m(e,["toolCall"],tbe(i));const o=p(t,["toolCallCancellation"]);o!=null&&m(e,["toolCallCancellation"],nbe(o));const s=p(t,["usageMetadata"]);s!=null&&m(e,["usageMetadata"],rbe(s));const l=p(t,["goAway"]);l!=null&&m(e,["goAway"],ibe(l));const c=p(t,["sessionResumptionUpdate"]);return c!=null&&m(e,["sessionResumptionUpdate"],obe(c)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function abe(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function lbe(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["data"]);n!=null&&m(e,["data"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function ube(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function cbe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],abe(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],lbe(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],ube(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const l=p(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const c=p(t,["executableCode"]);c!=null&&m(e,["executableCode"],c);const f=p(t,["functionCall"]);f!=null&&m(e,["functionCall"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=p(t,["text"]);return g!=null&&m(e,["text"],g),e}function AT(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>cbe(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function fbe(t){const e={},n=p(t,["anyOf"]);n!=null&&m(e,["anyOf"],n);const r=p(t,["default"]);r!=null&&m(e,["default"],r);const i=p(t,["description"]);i!=null&&m(e,["description"],i);const o=p(t,["enum"]);o!=null&&m(e,["enum"],o);const s=p(t,["example"]);s!=null&&m(e,["example"],s);const l=p(t,["format"]);l!=null&&m(e,["format"],l);const c=p(t,["items"]);c!=null&&m(e,["items"],c);const f=p(t,["maxItems"]);f!=null&&m(e,["maxItems"],f);const h=p(t,["maxLength"]);h!=null&&m(e,["maxLength"],h);const g=p(t,["maxProperties"]);g!=null&&m(e,["maxProperties"],g);const v=p(t,["maximum"]);v!=null&&m(e,["maximum"],v);const E=p(t,["minItems"]);E!=null&&m(e,["minItems"],E);const b=p(t,["minLength"]);b!=null&&m(e,["minLength"],b);const S=p(t,["minProperties"]);S!=null&&m(e,["minProperties"],S);const A=p(t,["minimum"]);A!=null&&m(e,["minimum"],A);const C=p(t,["nullable"]);C!=null&&m(e,["nullable"],C);const D=p(t,["pattern"]);D!=null&&m(e,["pattern"],D);const k=p(t,["properties"]);k!=null&&m(e,["properties"],k);const q=p(t,["propertyOrdering"]);q!=null&&m(e,["propertyOrdering"],q);const $=p(t,["required"]);$!=null&&m(e,["required"],$);const H=p(t,["title"]);H!=null&&m(e,["title"],H);const M=p(t,["type"]);return M!=null&&m(e,["type"],M),e}function dbe(t){const e={};if(p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=p(t,["category"]);n!=null&&m(e,["category"],n);const r=p(t,["threshold"]);return r!=null&&m(e,["threshold"],r),e}function hbe(t){const e={},n=p(t,["behavior"]);n!=null&&m(e,["behavior"],n);const r=p(t,["description"]);r!=null&&m(e,["description"],r);const i=p(t,["name"]);i!=null&&m(e,["name"],i);const o=p(t,["parameters"]);o!=null&&m(e,["parameters"],o);const s=p(t,["parametersJsonSchema"]);s!=null&&m(e,["parametersJsonSchema"],s);const l=p(t,["response"]);l!=null&&m(e,["response"],l);const c=p(t,["responseJsonSchema"]);return c!=null&&m(e,["responseJsonSchema"],c),e}function pbe(t){const e={},n=p(t,["startTime"]);n!=null&&m(e,["startTime"],n);const r=p(t,["endTime"]);return r!=null&&m(e,["endTime"],r),e}function mbe(t){const e={},n=p(t,["timeRangeFilter"]);if(n!=null&&m(e,["timeRangeFilter"],pbe(n)),p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function gbe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["dynamicThreshold"]);return r!=null&&m(e,["dynamicThreshold"],r),e}function ybe(t){const e={},n=p(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],gbe(n)),e}function vbe(){return{}}function _be(t){const e={},n=p(t,["environment"]);return n!=null&&m(e,["environment"],n),e}function Tbe(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>hbe(f))),m(e,["functionDeclarations"],c)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=p(t,["googleSearch"]);r!=null&&m(e,["googleSearch"],mbe(r));const i=p(t,["googleSearchRetrieval"]);if(i!=null&&m(e,["googleSearchRetrieval"],ybe(i)),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(p(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");p(t,["urlContext"])!=null&&m(e,["urlContext"],vbe());const s=p(t,["computerUse"]);s!=null&&m(e,["computerUse"],_be(s));const l=p(t,["codeExecution"]);return l!=null&&m(e,["codeExecution"],l),e}function Ebe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["allowedFunctionNames"]);return r!=null&&m(e,["allowedFunctionNames"],r),e}function wbe(t){const e={},n=p(t,["latitude"]);n!=null&&m(e,["latitude"],n);const r=p(t,["longitude"]);return r!=null&&m(e,["longitude"],r),e}function bbe(t){const e={},n=p(t,["latLng"]);n!=null&&m(e,["latLng"],wbe(n));const r=p(t,["languageCode"]);return r!=null&&m(e,["languageCode"],r),e}function Sbe(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],Ebe(n));const r=p(t,["retrievalConfig"]);return r!=null&&m(e,["retrievalConfig"],bbe(r)),e}function Abe(t){const e={},n=p(t,["voiceName"]);return n!=null&&m(e,["voiceName"],n),e}function fG(t){const e={},n=p(t,["prebuiltVoiceConfig"]);return n!=null&&m(e,["prebuiltVoiceConfig"],Abe(n)),e}function xbe(t){const e={},n=p(t,["speaker"]);n!=null&&m(e,["speaker"],n);const r=p(t,["voiceConfig"]);return r!=null&&m(e,["voiceConfig"],fG(r)),e}function Cbe(t){const e={},n=p(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>xbe(i))),m(e,["speakerVoiceConfigs"],r)}return e}function Ibe(t){const e={},n=p(t,["voiceConfig"]);n!=null&&m(e,["voiceConfig"],fG(n));const r=p(t,["multiSpeakerVoiceConfig"]);r!=null&&m(e,["multiSpeakerVoiceConfig"],Cbe(r));const i=p(t,["languageCode"]);return i!=null&&m(e,["languageCode"],i),e}function Rbe(t){const e={},n=p(t,["includeThoughts"]);n!=null&&m(e,["includeThoughts"],n);const r=p(t,["thinkingBudget"]);return r!=null&&m(e,["thinkingBudget"],r),e}function Pbe(t,e,n){const r={},i=p(e,["systemInstruction"]);n!==void 0&&i!=null&&m(n,["systemInstruction"],AT(Cr(i)));const o=p(e,["temperature"]);o!=null&&m(r,["temperature"],o);const s=p(e,["topP"]);s!=null&&m(r,["topP"],s);const l=p(e,["topK"]);l!=null&&m(r,["topK"],l);const c=p(e,["candidateCount"]);c!=null&&m(r,["candidateCount"],c);const f=p(e,["maxOutputTokens"]);f!=null&&m(r,["maxOutputTokens"],f);const h=p(e,["stopSequences"]);h!=null&&m(r,["stopSequences"],h);const g=p(e,["responseLogprobs"]);g!=null&&m(r,["responseLogprobs"],g);const v=p(e,["logprobs"]);v!=null&&m(r,["logprobs"],v);const E=p(e,["presencePenalty"]);E!=null&&m(r,["presencePenalty"],E);const b=p(e,["frequencyPenalty"]);b!=null&&m(r,["frequencyPenalty"],b);const S=p(e,["seed"]);S!=null&&m(r,["seed"],S);const A=p(e,["responseMimeType"]);A!=null&&m(r,["responseMimeType"],A);const C=p(e,["responseSchema"]);C!=null&&m(r,["responseSchema"],fbe(a1(C)));const D=p(e,["responseJsonSchema"]);if(D!=null&&m(r,["responseJsonSchema"],D),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=p(e,["safetySettings"]);if(n!==void 0&&k!=null){let V=k;Array.isArray(V)&&(V=V.map(G=>dbe(G))),m(n,["safetySettings"],V)}const q=p(e,["tools"]);if(n!==void 0&&q!=null){let V=Yd(q);Array.isArray(V)&&(V=V.map(G=>Tbe(Wd(G)))),m(n,["tools"],V)}const $=p(e,["toolConfig"]);if(n!==void 0&&$!=null&&m(n,["toolConfig"],Sbe($)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const H=p(e,["cachedContent"]);n!==void 0&&H!=null&&m(n,["cachedContent"],va(t,H));const M=p(e,["responseModalities"]);M!=null&&m(r,["responseModalities"],M);const O=p(e,["mediaResolution"]);O!=null&&m(r,["mediaResolution"],O);const L=p(e,["speechConfig"]);if(L!=null&&m(r,["speechConfig"],Ibe(l1(L))),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const F=p(e,["thinkingConfig"]);return F!=null&&m(r,["thinkingConfig"],Rbe(F)),r}function t4(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],Et(t,r));const i=p(e,["contents"]);if(i!=null){let s=Ki(i);Array.isArray(s)&&(s=s.map(l=>AT(l))),m(n,["contents"],s)}const o=p(e,["config"]);return o!=null&&m(n,["generationConfig"],Pbe(t,o,n)),n}function Nbe(t,e){const n={},r=p(t,["taskType"]);e!==void 0&&r!=null&&m(e,["requests[]","taskType"],r);const i=p(t,["title"]);e!==void 0&&i!=null&&m(e,["requests[]","title"],i);const o=p(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&m(e,["requests[]","outputDimensionality"],o),p(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Mbe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],Et(t,r));const i=p(e,["contents"]);i!=null&&m(n,["requests[]","content"],WH(t,i));const o=p(e,["config"]);o!=null&&m(n,["config"],Nbe(o,n));const s=p(e,["model"]);return s!==void 0&&m(n,["requests[]","model"],Et(t,s)),n}function Dbe(t,e){const n={};if(p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=p(t,["numberOfImages"]);e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r);const i=p(t,["aspectRatio"]);e!==void 0&&i!=null&&m(e,["parameters","aspectRatio"],i);const o=p(t,["guidanceScale"]);if(e!==void 0&&o!=null&&m(e,["parameters","guidanceScale"],o),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=p(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&m(e,["parameters","safetySetting"],s);const l=p(t,["personGeneration"]);e!==void 0&&l!=null&&m(e,["parameters","personGeneration"],l);const c=p(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&m(e,["parameters","includeSafetyAttributes"],c);const f=p(t,["includeRaiReason"]);e!==void 0&&f!=null&&m(e,["parameters","includeRaiReason"],f);const h=p(t,["language"]);e!==void 0&&h!=null&&m(e,["parameters","language"],h);const g=p(t,["outputMimeType"]);e!==void 0&&g!=null&&m(e,["parameters","outputOptions","mimeType"],g);const v=p(t,["outputCompressionQuality"]);if(e!==void 0&&v!=null&&m(e,["parameters","outputOptions","compressionQuality"],v),p(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const E=p(t,["imageSize"]);if(e!==void 0&&E!=null&&m(e,["parameters","sampleImageSize"],E),p(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function kbe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],Et(t,r));const i=p(e,["prompt"]);i!=null&&m(n,["instances[0]","prompt"],i);const o=p(e,["config"]);return o!=null&&m(n,["config"],Dbe(o,n)),n}function Obe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","name"],Et(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function Lbe(t,e,n){const r={},i=p(e,["pageSize"]);n!==void 0&&i!=null&&m(n,["_query","pageSize"],i);const o=p(e,["pageToken"]);n!==void 0&&o!=null&&m(n,["_query","pageToken"],o);const s=p(e,["filter"]);n!==void 0&&s!=null&&m(n,["_query","filter"],s);const l=p(e,["queryBase"]);return n!==void 0&&l!=null&&m(n,["_url","models_url"],QH(t,l)),r}function Vbe(t,e){const n={},r=p(e,["config"]);return r!=null&&m(n,["config"],Lbe(t,r,n)),n}function Ube(t,e){const n={},r=p(t,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const i=p(t,["description"]);e!==void 0&&i!=null&&m(e,["description"],i);const o=p(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&m(e,["defaultCheckpointId"],o),n}function Fbe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","name"],Et(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],Ube(i,n)),n}function Bbe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","name"],Et(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function qbe(t){const e={};if(p(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(p(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(p(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function $be(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],Et(t,r));const i=p(e,["contents"]);if(i!=null){let s=Ki(i);Array.isArray(s)&&(s=s.map(l=>AT(l))),m(n,["contents"],s)}const o=p(e,["config"]);return o!=null&&m(n,["config"],qbe(o)),n}function dG(t){const e={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=p(t,["imageBytes"]);n!=null&&m(e,["bytesBase64Encoded"],Tc(n));const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function zbe(t,e){const n={},r=p(t,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const i=p(t,["image"]);if(e!==void 0&&i!=null&&m(e,["instances[0]","image"],dG(i)),p(t,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");return n}function Hbe(t,e){const n={},r=p(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r),p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=p(t,["durationSeconds"]);if(e!==void 0&&i!=null&&m(e,["parameters","durationSeconds"],i),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=p(t,["aspectRatio"]);e!==void 0&&o!=null&&m(e,["parameters","aspectRatio"],o);const s=p(t,["resolution"]);e!==void 0&&s!=null&&m(e,["parameters","resolution"],s);const l=p(t,["personGeneration"]);if(e!==void 0&&l!=null&&m(e,["parameters","personGeneration"],l),p(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=p(t,["negativePrompt"]);e!==void 0&&c!=null&&m(e,["parameters","negativePrompt"],c);const f=p(t,["enhancePrompt"]);if(e!==void 0&&f!=null&&m(e,["parameters","enhancePrompt"],f),p(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(p(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(p(t,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(p(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function Gbe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],Et(t,r));const i=p(e,["prompt"]);i!=null&&m(n,["instances[0]","prompt"],i);const o=p(e,["image"]);if(o!=null&&m(n,["instances[0]","image"],dG(o)),p(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const s=p(e,["source"]);s!=null&&m(n,["config"],zbe(s,n));const l=p(e,["config"]);return l!=null&&m(n,["config"],Hbe(l,n)),n}function jbe(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function Kbe(t){const e={},n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const r=p(t,["data"]);r!=null&&m(e,["data"],r);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function Wbe(t){const e={},n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const r=p(t,["fileUri"]);r!=null&&m(e,["fileUri"],r);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function Ybe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],jbe(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],Kbe(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],Wbe(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const l=p(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const c=p(t,["executableCode"]);c!=null&&m(e,["executableCode"],c);const f=p(t,["functionCall"]);f!=null&&m(e,["functionCall"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=p(t,["text"]);return g!=null&&m(e,["text"],g),e}function Qd(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Ybe(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function Jbe(t){const e={},n=p(t,["anyOf"]);n!=null&&m(e,["anyOf"],n);const r=p(t,["default"]);r!=null&&m(e,["default"],r);const i=p(t,["description"]);i!=null&&m(e,["description"],i);const o=p(t,["enum"]);o!=null&&m(e,["enum"],o);const s=p(t,["example"]);s!=null&&m(e,["example"],s);const l=p(t,["format"]);l!=null&&m(e,["format"],l);const c=p(t,["items"]);c!=null&&m(e,["items"],c);const f=p(t,["maxItems"]);f!=null&&m(e,["maxItems"],f);const h=p(t,["maxLength"]);h!=null&&m(e,["maxLength"],h);const g=p(t,["maxProperties"]);g!=null&&m(e,["maxProperties"],g);const v=p(t,["maximum"]);v!=null&&m(e,["maximum"],v);const E=p(t,["minItems"]);E!=null&&m(e,["minItems"],E);const b=p(t,["minLength"]);b!=null&&m(e,["minLength"],b);const S=p(t,["minProperties"]);S!=null&&m(e,["minProperties"],S);const A=p(t,["minimum"]);A!=null&&m(e,["minimum"],A);const C=p(t,["nullable"]);C!=null&&m(e,["nullable"],C);const D=p(t,["pattern"]);D!=null&&m(e,["pattern"],D);const k=p(t,["properties"]);k!=null&&m(e,["properties"],k);const q=p(t,["propertyOrdering"]);q!=null&&m(e,["propertyOrdering"],q);const $=p(t,["required"]);$!=null&&m(e,["required"],$);const H=p(t,["title"]);H!=null&&m(e,["title"],H);const M=p(t,["type"]);return M!=null&&m(e,["type"],M),e}function Qbe(t){const e={},n=p(t,["featureSelectionPreference"]);return n!=null&&m(e,["featureSelectionPreference"],n),e}function Xbe(t){const e={},n=p(t,["method"]);n!=null&&m(e,["method"],n);const r=p(t,["category"]);r!=null&&m(e,["category"],r);const i=p(t,["threshold"]);return i!=null&&m(e,["threshold"],i),e}function Zbe(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&m(e,["description"],n);const r=p(t,["name"]);r!=null&&m(e,["name"],r);const i=p(t,["parameters"]);i!=null&&m(e,["parameters"],i);const o=p(t,["parametersJsonSchema"]);o!=null&&m(e,["parametersJsonSchema"],o);const s=p(t,["response"]);s!=null&&m(e,["response"],s);const l=p(t,["responseJsonSchema"]);return l!=null&&m(e,["responseJsonSchema"],l),e}function eSe(t){const e={},n=p(t,["startTime"]);n!=null&&m(e,["startTime"],n);const r=p(t,["endTime"]);return r!=null&&m(e,["endTime"],r),e}function tSe(t){const e={},n=p(t,["timeRangeFilter"]);n!=null&&m(e,["timeRangeFilter"],eSe(n));const r=p(t,["excludeDomains"]);return r!=null&&m(e,["excludeDomains"],r),e}function nSe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["dynamicThreshold"]);return r!=null&&m(e,["dynamicThreshold"],r),e}function rSe(t){const e={},n=p(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],nSe(n)),e}function iSe(t){const e={},n=p(t,["excludeDomains"]);return n!=null&&m(e,["excludeDomains"],n),e}function oSe(t){const e={},n=p(t,["apiKeyString"]);return n!=null&&m(e,["apiKeyString"],n),e}function sSe(t){const e={},n=p(t,["apiKeyConfig"]);n!=null&&m(e,["apiKeyConfig"],oSe(n));const r=p(t,["authType"]);r!=null&&m(e,["authType"],r);const i=p(t,["googleServiceAccountConfig"]);i!=null&&m(e,["googleServiceAccountConfig"],i);const o=p(t,["httpBasicAuthConfig"]);o!=null&&m(e,["httpBasicAuthConfig"],o);const s=p(t,["oauthConfig"]);s!=null&&m(e,["oauthConfig"],s);const l=p(t,["oidcConfig"]);return l!=null&&m(e,["oidcConfig"],l),e}function aSe(t){const e={},n=p(t,["authConfig"]);return n!=null&&m(e,["authConfig"],sSe(n)),e}function lSe(){return{}}function uSe(t){const e={},n=p(t,["environment"]);return n!=null&&m(e,["environment"],n),e}function hG(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(v=>Zbe(v))),m(e,["functionDeclarations"],g)}const r=p(t,["retrieval"]);r!=null&&m(e,["retrieval"],r);const i=p(t,["googleSearch"]);i!=null&&m(e,["googleSearch"],tSe(i));const o=p(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],rSe(o));const s=p(t,["enterpriseWebSearch"]);s!=null&&m(e,["enterpriseWebSearch"],iSe(s));const l=p(t,["googleMaps"]);l!=null&&m(e,["googleMaps"],aSe(l)),p(t,["urlContext"])!=null&&m(e,["urlContext"],lSe());const f=p(t,["computerUse"]);f!=null&&m(e,["computerUse"],uSe(f));const h=p(t,["codeExecution"]);return h!=null&&m(e,["codeExecution"],h),e}function cSe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["allowedFunctionNames"]);return r!=null&&m(e,["allowedFunctionNames"],r),e}function fSe(t){const e={},n=p(t,["latitude"]);n!=null&&m(e,["latitude"],n);const r=p(t,["longitude"]);return r!=null&&m(e,["longitude"],r),e}function dSe(t){const e={},n=p(t,["latLng"]);n!=null&&m(e,["latLng"],fSe(n));const r=p(t,["languageCode"]);return r!=null&&m(e,["languageCode"],r),e}function hSe(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],cSe(n));const r=p(t,["retrievalConfig"]);return r!=null&&m(e,["retrievalConfig"],dSe(r)),e}function pSe(t){const e={},n=p(t,["voiceName"]);return n!=null&&m(e,["voiceName"],n),e}function mSe(t){const e={},n=p(t,["prebuiltVoiceConfig"]);return n!=null&&m(e,["prebuiltVoiceConfig"],pSe(n)),e}function gSe(t){const e={},n=p(t,["voiceConfig"]);if(n!=null&&m(e,["voiceConfig"],mSe(n)),p(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=p(t,["languageCode"]);return r!=null&&m(e,["languageCode"],r),e}function ySe(t){const e={},n=p(t,["includeThoughts"]);n!=null&&m(e,["includeThoughts"],n);const r=p(t,["thinkingBudget"]);return r!=null&&m(e,["thinkingBudget"],r),e}function vSe(t,e,n){const r={},i=p(e,["systemInstruction"]);n!==void 0&&i!=null&&m(n,["systemInstruction"],Qd(Cr(i)));const o=p(e,["temperature"]);o!=null&&m(r,["temperature"],o);const s=p(e,["topP"]);s!=null&&m(r,["topP"],s);const l=p(e,["topK"]);l!=null&&m(r,["topK"],l);const c=p(e,["candidateCount"]);c!=null&&m(r,["candidateCount"],c);const f=p(e,["maxOutputTokens"]);f!=null&&m(r,["maxOutputTokens"],f);const h=p(e,["stopSequences"]);h!=null&&m(r,["stopSequences"],h);const g=p(e,["responseLogprobs"]);g!=null&&m(r,["responseLogprobs"],g);const v=p(e,["logprobs"]);v!=null&&m(r,["logprobs"],v);const E=p(e,["presencePenalty"]);E!=null&&m(r,["presencePenalty"],E);const b=p(e,["frequencyPenalty"]);b!=null&&m(r,["frequencyPenalty"],b);const S=p(e,["seed"]);S!=null&&m(r,["seed"],S);const A=p(e,["responseMimeType"]);A!=null&&m(r,["responseMimeType"],A);const C=p(e,["responseSchema"]);C!=null&&m(r,["responseSchema"],Jbe(a1(C)));const D=p(e,["responseJsonSchema"]);D!=null&&m(r,["responseJsonSchema"],D);const k=p(e,["routingConfig"]);k!=null&&m(r,["routingConfig"],k);const q=p(e,["modelSelectionConfig"]);q!=null&&m(r,["modelConfig"],Qbe(q));const $=p(e,["safetySettings"]);if(n!==void 0&&$!=null){let Re=$;Array.isArray(Re)&&(Re=Re.map(te=>Xbe(te))),m(n,["safetySettings"],Re)}const H=p(e,["tools"]);if(n!==void 0&&H!=null){let Re=Yd(H);Array.isArray(Re)&&(Re=Re.map(te=>hG(Wd(te)))),m(n,["tools"],Re)}const M=p(e,["toolConfig"]);n!==void 0&&M!=null&&m(n,["toolConfig"],hSe(M));const O=p(e,["labels"]);n!==void 0&&O!=null&&m(n,["labels"],O);const L=p(e,["cachedContent"]);n!==void 0&&L!=null&&m(n,["cachedContent"],va(t,L));const F=p(e,["responseModalities"]);F!=null&&m(r,["responseModalities"],F);const V=p(e,["mediaResolution"]);V!=null&&m(r,["mediaResolution"],V);const G=p(e,["speechConfig"]);G!=null&&m(r,["speechConfig"],gSe(l1(G)));const z=p(e,["audioTimestamp"]);z!=null&&m(r,["audioTimestamp"],z);const Se=p(e,["thinkingConfig"]);return Se!=null&&m(r,["thinkingConfig"],ySe(Se)),r}function n4(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],Et(t,r));const i=p(e,["contents"]);if(i!=null){let s=Ki(i);Array.isArray(s)&&(s=s.map(l=>Qd(l))),m(n,["contents"],s)}const o=p(e,["config"]);return o!=null&&m(n,["generationConfig"],vSe(t,o,n)),n}function _Se(t,e){const n={},r=p(t,["taskType"]);e!==void 0&&r!=null&&m(e,["instances[]","task_type"],r);const i=p(t,["title"]);e!==void 0&&i!=null&&m(e,["instances[]","title"],i);const o=p(t,["outputDimensionality"]);e!==void 0&&o!=null&&m(e,["parameters","outputDimensionality"],o);const s=p(t,["mimeType"]);e!==void 0&&s!=null&&m(e,["instances[]","mimeType"],s);const l=p(t,["autoTruncate"]);return e!==void 0&&l!=null&&m(e,["parameters","autoTruncate"],l),n}function TSe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],Et(t,r));const i=p(e,["contents"]);i!=null&&m(n,["instances[]","content"],WH(t,i));const o=p(e,["config"]);return o!=null&&m(n,["config"],_Se(o,n)),n}function ESe(t,e){const n={},r=p(t,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const i=p(t,["negativePrompt"]);e!==void 0&&i!=null&&m(e,["parameters","negativePrompt"],i);const o=p(t,["numberOfImages"]);e!==void 0&&o!=null&&m(e,["parameters","sampleCount"],o);const s=p(t,["aspectRatio"]);e!==void 0&&s!=null&&m(e,["parameters","aspectRatio"],s);const l=p(t,["guidanceScale"]);e!==void 0&&l!=null&&m(e,["parameters","guidanceScale"],l);const c=p(t,["seed"]);e!==void 0&&c!=null&&m(e,["parameters","seed"],c);const f=p(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&m(e,["parameters","safetySetting"],f);const h=p(t,["personGeneration"]);e!==void 0&&h!=null&&m(e,["parameters","personGeneration"],h);const g=p(t,["includeSafetyAttributes"]);e!==void 0&&g!=null&&m(e,["parameters","includeSafetyAttributes"],g);const v=p(t,["includeRaiReason"]);e!==void 0&&v!=null&&m(e,["parameters","includeRaiReason"],v);const E=p(t,["language"]);e!==void 0&&E!=null&&m(e,["parameters","language"],E);const b=p(t,["outputMimeType"]);e!==void 0&&b!=null&&m(e,["parameters","outputOptions","mimeType"],b);const S=p(t,["outputCompressionQuality"]);e!==void 0&&S!=null&&m(e,["parameters","outputOptions","compressionQuality"],S);const A=p(t,["addWatermark"]);e!==void 0&&A!=null&&m(e,["parameters","addWatermark"],A);const C=p(t,["imageSize"]);e!==void 0&&C!=null&&m(e,["parameters","sampleImageSize"],C);const D=p(t,["enhancePrompt"]);return e!==void 0&&D!=null&&m(e,["parameters","enhancePrompt"],D),n}function wSe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],Et(t,r));const i=p(e,["prompt"]);i!=null&&m(n,["instances[0]","prompt"],i);const o=p(e,["config"]);return o!=null&&m(n,["config"],ESe(o,n)),n}function hs(t){const e={},n=p(t,["gcsUri"]);n!=null&&m(e,["gcsUri"],n);const r=p(t,["imageBytes"]);r!=null&&m(e,["bytesBase64Encoded"],Tc(r));const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function bSe(t){const e={},n=p(t,["maskMode"]);n!=null&&m(e,["maskMode"],n);const r=p(t,["segmentationClasses"]);r!=null&&m(e,["maskClasses"],r);const i=p(t,["maskDilation"]);return i!=null&&m(e,["dilation"],i),e}function SSe(t){const e={},n=p(t,["controlType"]);n!=null&&m(e,["controlType"],n);const r=p(t,["enableControlImageComputation"]);return r!=null&&m(e,["computeControl"],r),e}function ASe(t){const e={},n=p(t,["styleDescription"]);return n!=null&&m(e,["styleDescription"],n),e}function xSe(t){const e={},n=p(t,["subjectType"]);n!=null&&m(e,["subjectType"],n);const r=p(t,["subjectDescription"]);return r!=null&&m(e,["subjectDescription"],r),e}function CSe(t){const e={},n=p(t,["referenceImage"]);n!=null&&m(e,["referenceImage"],hs(n));const r=p(t,["referenceId"]);r!=null&&m(e,["referenceId"],r);const i=p(t,["referenceType"]);i!=null&&m(e,["referenceType"],i);const o=p(t,["maskImageConfig"]);o!=null&&m(e,["maskImageConfig"],bSe(o));const s=p(t,["controlImageConfig"]);s!=null&&m(e,["controlImageConfig"],SSe(s));const l=p(t,["styleImageConfig"]);l!=null&&m(e,["styleImageConfig"],ASe(l));const c=p(t,["subjectImageConfig"]);return c!=null&&m(e,["subjectImageConfig"],xSe(c)),e}function ISe(t,e){const n={},r=p(t,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const i=p(t,["negativePrompt"]);e!==void 0&&i!=null&&m(e,["parameters","negativePrompt"],i);const o=p(t,["numberOfImages"]);e!==void 0&&o!=null&&m(e,["parameters","sampleCount"],o);const s=p(t,["aspectRatio"]);e!==void 0&&s!=null&&m(e,["parameters","aspectRatio"],s);const l=p(t,["guidanceScale"]);e!==void 0&&l!=null&&m(e,["parameters","guidanceScale"],l);const c=p(t,["seed"]);e!==void 0&&c!=null&&m(e,["parameters","seed"],c);const f=p(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&m(e,["parameters","safetySetting"],f);const h=p(t,["personGeneration"]);e!==void 0&&h!=null&&m(e,["parameters","personGeneration"],h);const g=p(t,["includeSafetyAttributes"]);e!==void 0&&g!=null&&m(e,["parameters","includeSafetyAttributes"],g);const v=p(t,["includeRaiReason"]);e!==void 0&&v!=null&&m(e,["parameters","includeRaiReason"],v);const E=p(t,["language"]);e!==void 0&&E!=null&&m(e,["parameters","language"],E);const b=p(t,["outputMimeType"]);e!==void 0&&b!=null&&m(e,["parameters","outputOptions","mimeType"],b);const S=p(t,["outputCompressionQuality"]);e!==void 0&&S!=null&&m(e,["parameters","outputOptions","compressionQuality"],S);const A=p(t,["addWatermark"]);e!==void 0&&A!=null&&m(e,["parameters","addWatermark"],A);const C=p(t,["editMode"]);e!==void 0&&C!=null&&m(e,["parameters","editMode"],C);const D=p(t,["baseSteps"]);return e!==void 0&&D!=null&&m(e,["parameters","editConfig","baseSteps"],D),n}function RSe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],Et(t,r));const i=p(e,["prompt"]);i!=null&&m(n,["instances[0]","prompt"],i);const o=p(e,["referenceImages"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>CSe(c))),m(n,["instances[0]","referenceImages"],l)}const s=p(e,["config"]);return s!=null&&m(n,["config"],ISe(s,n)),n}function PSe(t,e){const n={},r=p(t,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const i=p(t,["includeRaiReason"]);e!==void 0&&i!=null&&m(e,["parameters","includeRaiReason"],i);const o=p(t,["outputMimeType"]);e!==void 0&&o!=null&&m(e,["parameters","outputOptions","mimeType"],o);const s=p(t,["outputCompressionQuality"]);e!==void 0&&s!=null&&m(e,["parameters","outputOptions","compressionQuality"],s);const l=p(t,["enhanceInputImage"]);e!==void 0&&l!=null&&m(e,["parameters","upscaleConfig","enhanceInputImage"],l);const c=p(t,["imagePreservationFactor"]);e!==void 0&&c!=null&&m(e,["parameters","upscaleConfig","imagePreservationFactor"],c);const f=p(t,["numberOfImages"]);e!==void 0&&f!=null&&m(e,["parameters","sampleCount"],f);const h=p(t,["mode"]);return e!==void 0&&h!=null&&m(e,["parameters","mode"],h),n}function NSe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],Et(t,r));const i=p(e,["image"]);i!=null&&m(n,["instances[0]","image"],hs(i));const o=p(e,["upscaleFactor"]);o!=null&&m(n,["parameters","upscaleConfig","upscaleFactor"],o);const s=p(e,["config"]);return s!=null&&m(n,["config"],PSe(s,n)),n}function MSe(t){const e={},n=p(t,["productImage"]);return n!=null&&m(e,["image"],hs(n)),e}function DSe(t,e){const n={},r=p(t,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const i=p(t,["personImage"]);e!==void 0&&i!=null&&m(e,["instances[0]","personImage","image"],hs(i));const o=p(t,["productImages"]);if(e!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>MSe(l))),m(e,["instances[0]","productImages"],s)}return n}function kSe(t,e){const n={},r=p(t,["numberOfImages"]);e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r);const i=p(t,["baseSteps"]);e!==void 0&&i!=null&&m(e,["parameters","editConfig","baseSteps"],i);const o=p(t,["outputGcsUri"]);e!==void 0&&o!=null&&m(e,["parameters","storageUri"],o);const s=p(t,["seed"]);e!==void 0&&s!=null&&m(e,["parameters","seed"],s);const l=p(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&m(e,["parameters","safetySetting"],l);const c=p(t,["personGeneration"]);e!==void 0&&c!=null&&m(e,["parameters","personGeneration"],c);const f=p(t,["addWatermark"]);e!==void 0&&f!=null&&m(e,["parameters","addWatermark"],f);const h=p(t,["outputMimeType"]);e!==void 0&&h!=null&&m(e,["parameters","outputOptions","mimeType"],h);const g=p(t,["outputCompressionQuality"]);e!==void 0&&g!=null&&m(e,["parameters","outputOptions","compressionQuality"],g);const v=p(t,["enhancePrompt"]);return e!==void 0&&v!=null&&m(e,["parameters","enhancePrompt"],v),n}function OSe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],Et(t,r));const i=p(e,["source"]);i!=null&&m(n,["config"],DSe(i,n));const o=p(e,["config"]);return o!=null&&m(n,["config"],kSe(o,n)),n}function LSe(t){const e={},n=p(t,["image"]);return n!=null&&m(e,["image"],hs(n)),e}function VSe(t,e){const n={},r=p(t,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const i=p(t,["image"]);e!==void 0&&i!=null&&m(e,["instances[0]","image"],hs(i));const o=p(t,["scribbleImage"]);return e!==void 0&&o!=null&&m(e,["instances[0]","scribble"],LSe(o)),n}function USe(t,e){const n={},r=p(t,["mode"]);e!==void 0&&r!=null&&m(e,["parameters","mode"],r);const i=p(t,["maxPredictions"]);e!==void 0&&i!=null&&m(e,["parameters","maxPredictions"],i);const o=p(t,["confidenceThreshold"]);e!==void 0&&o!=null&&m(e,["parameters","confidenceThreshold"],o);const s=p(t,["maskDilation"]);e!==void 0&&s!=null&&m(e,["parameters","maskDilation"],s);const l=p(t,["binaryColorThreshold"]);return e!==void 0&&l!=null&&m(e,["parameters","binaryColorThreshold"],l),n}function FSe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],Et(t,r));const i=p(e,["source"]);i!=null&&m(n,["config"],VSe(i,n));const o=p(e,["config"]);return o!=null&&m(n,["config"],USe(o,n)),n}function BSe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","name"],Et(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function qSe(t,e,n){const r={},i=p(e,["pageSize"]);n!==void 0&&i!=null&&m(n,["_query","pageSize"],i);const o=p(e,["pageToken"]);n!==void 0&&o!=null&&m(n,["_query","pageToken"],o);const s=p(e,["filter"]);n!==void 0&&s!=null&&m(n,["_query","filter"],s);const l=p(e,["queryBase"]);return n!==void 0&&l!=null&&m(n,["_url","models_url"],QH(t,l)),r}function $Se(t,e){const n={},r=p(e,["config"]);return r!=null&&m(n,["config"],qSe(t,r,n)),n}function zSe(t,e){const n={},r=p(t,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const i=p(t,["description"]);e!==void 0&&i!=null&&m(e,["description"],i);const o=p(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&m(e,["defaultCheckpointId"],o),n}function HSe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],Et(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],zSe(i,n)),n}function GSe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","name"],Et(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function jSe(t,e){const n={},r=p(t,["systemInstruction"]);e!==void 0&&r!=null&&m(e,["systemInstruction"],Qd(Cr(r)));const i=p(t,["tools"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>hG(l))),m(e,["tools"],s)}const o=p(t,["generationConfig"]);return e!==void 0&&o!=null&&m(e,["generationConfig"],o),n}function KSe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],Et(t,r));const i=p(e,["contents"]);if(i!=null){let s=Ki(i);Array.isArray(s)&&(s=s.map(l=>Qd(l))),m(n,["contents"],s)}const o=p(e,["config"]);return o!=null&&m(n,["config"],jSe(o,n)),n}function WSe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],Et(t,r));const i=p(e,["contents"]);if(i!=null){let s=Ki(i);Array.isArray(s)&&(s=s.map(l=>Qd(l))),m(n,["contents"],s)}const o=p(e,["config"]);return o!=null&&m(n,["config"],o),n}function pG(t){const e={},n=p(t,["uri"]);n!=null&&m(e,["gcsUri"],n);const r=p(t,["videoBytes"]);r!=null&&m(e,["bytesBase64Encoded"],Tc(r));const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function YSe(t,e){const n={},r=p(t,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const i=p(t,["image"]);e!==void 0&&i!=null&&m(e,["instances[0]","image"],hs(i));const o=p(t,["video"]);return e!==void 0&&o!=null&&m(e,["instances[0]","video"],pG(o)),n}function JSe(t){const e={},n=p(t,["image"]);n!=null&&m(e,["image"],hs(n));const r=p(t,["referenceType"]);return r!=null&&m(e,["referenceType"],r),e}function QSe(t,e){const n={},r=p(t,["numberOfVideos"]);e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r);const i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&m(e,["parameters","storageUri"],i);const o=p(t,["fps"]);e!==void 0&&o!=null&&m(e,["parameters","fps"],o);const s=p(t,["durationSeconds"]);e!==void 0&&s!=null&&m(e,["parameters","durationSeconds"],s);const l=p(t,["seed"]);e!==void 0&&l!=null&&m(e,["parameters","seed"],l);const c=p(t,["aspectRatio"]);e!==void 0&&c!=null&&m(e,["parameters","aspectRatio"],c);const f=p(t,["resolution"]);e!==void 0&&f!=null&&m(e,["parameters","resolution"],f);const h=p(t,["personGeneration"]);e!==void 0&&h!=null&&m(e,["parameters","personGeneration"],h);const g=p(t,["pubsubTopic"]);e!==void 0&&g!=null&&m(e,["parameters","pubsubTopic"],g);const v=p(t,["negativePrompt"]);e!==void 0&&v!=null&&m(e,["parameters","negativePrompt"],v);const E=p(t,["enhancePrompt"]);e!==void 0&&E!=null&&m(e,["parameters","enhancePrompt"],E);const b=p(t,["generateAudio"]);e!==void 0&&b!=null&&m(e,["parameters","generateAudio"],b);const S=p(t,["lastFrame"]);e!==void 0&&S!=null&&m(e,["instances[0]","lastFrame"],hs(S));const A=p(t,["referenceImages"]);if(e!==void 0&&A!=null){let D=A;Array.isArray(D)&&(D=D.map(k=>JSe(k))),m(e,["instances[0]","referenceImages"],D)}const C=p(t,["compressionQuality"]);return e!==void 0&&C!=null&&m(e,["parameters","compressionQuality"],C),n}function XSe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],Et(t,r));const i=p(e,["prompt"]);i!=null&&m(n,["instances[0]","prompt"],i);const o=p(e,["image"]);o!=null&&m(n,["instances[0]","image"],hs(o));const s=p(e,["video"]);s!=null&&m(n,["instances[0]","video"],pG(s));const l=p(e,["source"]);l!=null&&m(n,["config"],YSe(l,n));const c=p(e,["config"]);return c!=null&&m(n,["config"],QSe(c,n)),n}function ZSe(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function eAe(t){const e={},n=p(t,["data"]);n!=null&&m(e,["data"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function tAe(t){const e={},n=p(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function nAe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],ZSe(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],eAe(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],tAe(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const l=p(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const c=p(t,["executableCode"]);c!=null&&m(e,["executableCode"],c);const f=p(t,["functionCall"]);f!=null&&m(e,["functionCall"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=p(t,["text"]);return g!=null&&m(e,["text"],g),e}function rAe(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>nAe(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function iAe(t){const e={},n=p(t,["citationSources"]);return n!=null&&m(e,["citations"],n),e}function oAe(t){const e={},n=p(t,["retrievedUrl"]);n!=null&&m(e,["retrievedUrl"],n);const r=p(t,["urlRetrievalStatus"]);return r!=null&&m(e,["urlRetrievalStatus"],r),e}function sAe(t){const e={},n=p(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>oAe(i))),m(e,["urlMetadata"],r)}return e}function aAe(t){const e={},n=p(t,["content"]);n!=null&&m(e,["content"],rAe(n));const r=p(t,["citationMetadata"]);r!=null&&m(e,["citationMetadata"],iAe(r));const i=p(t,["tokenCount"]);i!=null&&m(e,["tokenCount"],i);const o=p(t,["finishReason"]);o!=null&&m(e,["finishReason"],o);const s=p(t,["urlContextMetadata"]);s!=null&&m(e,["urlContextMetadata"],sAe(s));const l=p(t,["avgLogprobs"]);l!=null&&m(e,["avgLogprobs"],l);const c=p(t,["groundingMetadata"]);c!=null&&m(e,["groundingMetadata"],c);const f=p(t,["index"]);f!=null&&m(e,["index"],f);const h=p(t,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const g=p(t,["safetyRatings"]);return g!=null&&m(e,["safetyRatings"],g),e}function r4(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>aAe(f))),m(e,["candidates"],c)}const i=p(t,["modelVersion"]);i!=null&&m(e,["modelVersion"],i);const o=p(t,["promptFeedback"]);o!=null&&m(e,["promptFeedback"],o);const s=p(t,["responseId"]);s!=null&&m(e,["responseId"],s);const l=p(t,["usageMetadata"]);return l!=null&&m(e,["usageMetadata"],l),e}function lAe(t){const e={},n=p(t,["values"]);return n!=null&&m(e,["values"],n),e}function uAe(){return{}}function cAe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>lAe(s))),m(e,["embeddings"],o)}return p(t,["metadata"])!=null&&m(e,["metadata"],uAe()),e}function fAe(t){const e={},n=p(t,["bytesBase64Encoded"]);n!=null&&m(e,["imageBytes"],Tc(n));const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function mG(t){const e={},n=p(t,["safetyAttributes","categories"]);n!=null&&m(e,["categories"],n);const r=p(t,["safetyAttributes","scores"]);r!=null&&m(e,["scores"],r);const i=p(t,["contentType"]);return i!=null&&m(e,["contentType"],i),e}function dAe(t){const e={},n=p(t,["_self"]);n!=null&&m(e,["image"],fAe(n));const r=p(t,["raiFilteredReason"]);r!=null&&m(e,["raiFilteredReason"],r);const i=p(t,["_self"]);return i!=null&&m(e,["safetyAttributes"],mG(i)),e}function hAe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>dAe(s))),m(e,["generatedImages"],o)}const i=p(t,["positivePromptSafetyAttributes"]);return i!=null&&m(e,["positivePromptSafetyAttributes"],mG(i)),e}function pAe(t){const e={},n=p(t,["baseModel"]);n!=null&&m(e,["baseModel"],n);const r=p(t,["createTime"]);r!=null&&m(e,["createTime"],r);const i=p(t,["updateTime"]);return i!=null&&m(e,["updateTime"],i),e}function xx(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const r=p(t,["displayName"]);r!=null&&m(e,["displayName"],r);const i=p(t,["description"]);i!=null&&m(e,["description"],i);const o=p(t,["version"]);o!=null&&m(e,["version"],o);const s=p(t,["_self"]);s!=null&&m(e,["tunedModelInfo"],pAe(s));const l=p(t,["inputTokenLimit"]);l!=null&&m(e,["inputTokenLimit"],l);const c=p(t,["outputTokenLimit"]);c!=null&&m(e,["outputTokenLimit"],c);const f=p(t,["supportedGenerationMethods"]);return f!=null&&m(e,["supportedActions"],f),e}function mAe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(t,["_self"]);if(i!=null){let o=XH(i);Array.isArray(o)&&(o=o.map(s=>xx(s))),m(e,["models"],o)}return e}function gAe(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function yAe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["totalTokens"]);r!=null&&m(e,["totalTokens"],r);const i=p(t,["cachedContentTokenCount"]);return i!=null&&m(e,["cachedContentTokenCount"],i),e}function vAe(t){const e={},n=p(t,["video","uri"]);n!=null&&m(e,["uri"],n);const r=p(t,["video","encodedVideo"]);r!=null&&m(e,["videoBytes"],Tc(r));const i=p(t,["encoding"]);return i!=null&&m(e,["mimeType"],i),e}function _Ae(t){const e={},n=p(t,["_self"]);return n!=null&&m(e,["video"],vAe(n)),e}function TAe(t){const e={},n=p(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>_Ae(s))),m(e,["generatedVideos"],o)}const r=p(t,["raiMediaFilteredCount"]);r!=null&&m(e,["raiMediaFilteredCount"],r);const i=p(t,["raiMediaFilteredReasons"]);return i!=null&&m(e,["raiMediaFilteredReasons"],i),e}function EAe(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const r=p(t,["metadata"]);r!=null&&m(e,["metadata"],r);const i=p(t,["done"]);i!=null&&m(e,["done"],i);const o=p(t,["error"]);o!=null&&m(e,["error"],o);const s=p(t,["response","generateVideoResponse"]);return s!=null&&m(e,["response"],TAe(s)),e}function wAe(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function bAe(t){const e={},n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const r=p(t,["data"]);r!=null&&m(e,["data"],r);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function SAe(t){const e={},n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const r=p(t,["fileUri"]);r!=null&&m(e,["fileUri"],r);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function AAe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],wAe(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],bAe(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],SAe(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const l=p(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const c=p(t,["executableCode"]);c!=null&&m(e,["executableCode"],c);const f=p(t,["functionCall"]);f!=null&&m(e,["functionCall"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=p(t,["text"]);return g!=null&&m(e,["text"],g),e}function xAe(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>AAe(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function CAe(t){const e={},n=p(t,["citations"]);return n!=null&&m(e,["citations"],n),e}function IAe(t){const e={},n=p(t,["retrievedUrl"]);n!=null&&m(e,["retrievedUrl"],n);const r=p(t,["urlRetrievalStatus"]);return r!=null&&m(e,["urlRetrievalStatus"],r),e}function RAe(t){const e={},n=p(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>IAe(i))),m(e,["urlMetadata"],r)}return e}function PAe(t){const e={},n=p(t,["content"]);n!=null&&m(e,["content"],xAe(n));const r=p(t,["citationMetadata"]);r!=null&&m(e,["citationMetadata"],CAe(r));const i=p(t,["finishMessage"]);i!=null&&m(e,["finishMessage"],i);const o=p(t,["finishReason"]);o!=null&&m(e,["finishReason"],o);const s=p(t,["urlContextMetadata"]);s!=null&&m(e,["urlContextMetadata"],RAe(s));const l=p(t,["avgLogprobs"]);l!=null&&m(e,["avgLogprobs"],l);const c=p(t,["groundingMetadata"]);c!=null&&m(e,["groundingMetadata"],c);const f=p(t,["index"]);f!=null&&m(e,["index"],f);const h=p(t,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const g=p(t,["safetyRatings"]);return g!=null&&m(e,["safetyRatings"],g),e}function i4(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(h=>PAe(h))),m(e,["candidates"],f)}const i=p(t,["createTime"]);i!=null&&m(e,["createTime"],i);const o=p(t,["modelVersion"]);o!=null&&m(e,["modelVersion"],o);const s=p(t,["promptFeedback"]);s!=null&&m(e,["promptFeedback"],s);const l=p(t,["responseId"]);l!=null&&m(e,["responseId"],l);const c=p(t,["usageMetadata"]);return c!=null&&m(e,["usageMetadata"],c),e}function NAe(t){const e={},n=p(t,["truncated"]);n!=null&&m(e,["truncated"],n);const r=p(t,["token_count"]);return r!=null&&m(e,["tokenCount"],r),e}function MAe(t){const e={},n=p(t,["values"]);n!=null&&m(e,["values"],n);const r=p(t,["statistics"]);return r!=null&&m(e,["statistics"],NAe(r)),e}function DAe(t){const e={},n=p(t,["billableCharacterCount"]);return n!=null&&m(e,["billableCharacterCount"],n),e}function kAe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>MAe(s))),m(e,["embeddings"],o)}const i=p(t,["metadata"]);return i!=null&&m(e,["metadata"],DAe(i)),e}function gG(t){const e={},n=p(t,["gcsUri"]);n!=null&&m(e,["gcsUri"],n);const r=p(t,["bytesBase64Encoded"]);r!=null&&m(e,["imageBytes"],Tc(r));const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function yG(t){const e={},n=p(t,["safetyAttributes","categories"]);n!=null&&m(e,["categories"],n);const r=p(t,["safetyAttributes","scores"]);r!=null&&m(e,["scores"],r);const i=p(t,["contentType"]);return i!=null&&m(e,["contentType"],i),e}function xT(t){const e={},n=p(t,["_self"]);n!=null&&m(e,["image"],gG(n));const r=p(t,["raiFilteredReason"]);r!=null&&m(e,["raiFilteredReason"],r);const i=p(t,["_self"]);i!=null&&m(e,["safetyAttributes"],yG(i));const o=p(t,["prompt"]);return o!=null&&m(e,["enhancedPrompt"],o),e}function OAe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>xT(s))),m(e,["generatedImages"],o)}const i=p(t,["positivePromptSafetyAttributes"]);return i!=null&&m(e,["positivePromptSafetyAttributes"],yG(i)),e}function LAe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>xT(o))),m(e,["generatedImages"],i)}return e}function VAe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>xT(o))),m(e,["generatedImages"],i)}return e}function UAe(t){const e={},n=p(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>xT(i))),m(e,["generatedImages"],r)}return e}function FAe(t){const e={},n=p(t,["label"]);n!=null&&m(e,["label"],n);const r=p(t,["score"]);return r!=null&&m(e,["score"],r),e}function BAe(t){const e={},n=p(t,["_self"]);n!=null&&m(e,["mask"],gG(n));const r=p(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>FAe(o))),m(e,["labels"],i)}return e}function qAe(t){const e={},n=p(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>BAe(i))),m(e,["generatedMasks"],r)}return e}function $Ae(t){const e={},n=p(t,["endpoint"]);n!=null&&m(e,["name"],n);const r=p(t,["deployedModelId"]);return r!=null&&m(e,["deployedModelId"],r),e}function zAe(t){const e={},n=p(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&m(e,["baseModel"],n);const r=p(t,["createTime"]);r!=null&&m(e,["createTime"],r);const i=p(t,["updateTime"]);return i!=null&&m(e,["updateTime"],i),e}function HAe(t){const e={},n=p(t,["checkpointId"]);n!=null&&m(e,["checkpointId"],n);const r=p(t,["epoch"]);r!=null&&m(e,["epoch"],r);const i=p(t,["step"]);return i!=null&&m(e,["step"],i),e}function Cx(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const r=p(t,["displayName"]);r!=null&&m(e,["displayName"],r);const i=p(t,["description"]);i!=null&&m(e,["description"],i);const o=p(t,["versionId"]);o!=null&&m(e,["version"],o);const s=p(t,["deployedModels"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(v=>$Ae(v))),m(e,["endpoints"],g)}const l=p(t,["labels"]);l!=null&&m(e,["labels"],l);const c=p(t,["_self"]);c!=null&&m(e,["tunedModelInfo"],zAe(c));const f=p(t,["defaultCheckpointId"]);f!=null&&m(e,["defaultCheckpointId"],f);const h=p(t,["checkpoints"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(v=>HAe(v))),m(e,["checkpoints"],g)}return e}function GAe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(t,["_self"]);if(i!=null){let o=XH(i);Array.isArray(o)&&(o=o.map(s=>Cx(s))),m(e,["models"],o)}return e}function jAe(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function KAe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["totalTokens"]);return r!=null&&m(e,["totalTokens"],r),e}function WAe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["tokensInfo"]);return r!=null&&m(e,["tokensInfo"],r),e}function YAe(t){const e={},n=p(t,["gcsUri"]);n!=null&&m(e,["uri"],n);const r=p(t,["bytesBase64Encoded"]);r!=null&&m(e,["videoBytes"],Tc(r));const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function JAe(t){const e={},n=p(t,["_self"]);return n!=null&&m(e,["video"],YAe(n)),e}function QAe(t){const e={},n=p(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>JAe(s))),m(e,["generatedVideos"],o)}const r=p(t,["raiMediaFilteredCount"]);r!=null&&m(e,["raiMediaFilteredCount"],r);const i=p(t,["raiMediaFilteredReasons"]);return i!=null&&m(e,["raiMediaFilteredReasons"],i),e}function XAe(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const r=p(t,["metadata"]);r!=null&&m(e,["metadata"],r);const i=p(t,["done"]);i!=null&&m(e,["done"],i);const o=p(t,["error"]);o!=null&&m(e,["error"],o);const s=p(t,["response"]);return s!=null&&m(e,["response"],QAe(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ZAe="Content-Type",exe="X-Server-Timeout",txe="User-Agent",Ix="x-goog-api-client",nxe="1.17.0",rxe=`google-genai-sdk/${nxe}`,ixe="v1beta1",oxe="v1beta",o4=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class sxe{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:ixe,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:oxe,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[s,l]of Object.entries(e.queryParams))i.searchParams.append(s,String(l));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(n))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r){if(n&&n.timeout||r){const i=new AbortController,o=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const s=setTimeout(()=>i.abort(),n.timeout);s&&typeof s.unref=="function"&&s.unref()}r&&r.addEventListener("abort",()=>{i.abort()}),e.signal=o}return n&&n.extraBody!==null&&axe(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await s4(i),new Ex(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await s4(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var n;return Ff(this,arguments,function*(){const i=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let s="";for(;;){const{done:l,value:c}=yield Wt(i.read());if(l){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=o.decode(c,{stream:!0});try{const g=JSON.parse(f);if("error"in g){const v=JSON.parse(JSON.stringify(g.error)),E=v.status,b=v.code,S=`got status: ${E}. ${JSON.stringify(g)}`;if(b>=400&&b<600)throw new ST({message:S,status:b})}}catch(g){if(g.name==="ApiError")throw g}s+=f;let h=s.match(o4);for(;h;){const g=h[1];try{const v=new Response(g,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Wt(new Ex(v)),s=s.slice(h[0].length),h=s.match(o4)}catch(v){throw new Error(`exception parsing stream chunk ${g}. ${v}`)}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=rxe+" "+this.clientOptions.userAgentExtra;return e[txe]=n,e[Ix]=n,e[ZAe]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[r,i]of Object.entries(e.headers))n.append(r,i);e.timeout&&e.timeout>0&&n.append(exe,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,s=await o.stat(e);i.sizeBytes=String(s.size);const l=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:s.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=l;const c=await this.fetchUploadUrl(i,n);return o.upload(e,c,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var r;let i={};n!=null&&n.httpOptions?i=n.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const o={file:e},s=await this.request({path:De("upload/v1beta/files",o._url),body:JSON.stringify(o),httpMethod:"POST",httpOptions:i});if(!s||!(s!=null&&s.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const l=(r=s==null?void 0:s.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(l===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return l}}async function s4(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new ST({message:i,status:n}):new Error(i)}}function axe(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,s){const l=Object.assign({},o);for(const c in s)if(Object.prototype.hasOwnProperty.call(s,c)){const f=s[c],h=l[c];f&&typeof f=="object"&&!Array.isArray(f)&&h&&typeof h=="object"&&!Array.isArray(h)?l[c]=r(h,f):(h&&f&&typeof h!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof h}, New type: ${typeof f}. Overwriting.`),l[c]=f)}return l}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lxe="mcp_used/unknown";let uxe=!1;function vG(t){for(const e of t)if(cxe(e)||typeof e=="object"&&"inputSchema"in e)return!0;return uxe}function _G(t){var e;const n=(e=t[Ix])!==null&&e!==void 0?e:"";t[Ix]=(n+` ${lxe}`).trimStart()}function cxe(t){return t!==null&&typeof t=="object"&&t instanceof c1}function fxe(t,e=100){return Ff(this,arguments,function*(){let r,i=0;for(;i<e;){const o=yield Wt(t.listTools({cursor:r}));for(const s of o.tools)yield yield Wt(s),i++;if(!o.nextCursor)break;r=o.nextCursor}})}class c1{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new c1(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const o={},s=[];for(const h of this.mcpClients)try{for(var l=!0,c=(n=void 0,Jp(fxe(h))),f;f=await c.next(),e=f.done,!e;l=!0){i=f.value,l=!1;const g=i;s.push(g);const v=g.name;if(o[v])throw new Error(`Duplicate function name ${v} found in MCP tools. Please ensure function names are unique.`);o[v]=h}}catch(g){n={error:g}}finally{try{!l&&!e&&(r=c.return)&&await r.call(c)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),$_e(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const s=await i.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function dxe(t,e,n){const r=new k_e;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data);const o=jwe(i);Object.assign(r,o),e(r)}class hxe{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),s=gxe(this.apiClient.getDefaultHeaders()),l=this.apiClient.getApiKey(),c=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${l}`;let f=()=>{};const h=new Promise(k=>{f=k}),g=e.callbacks,v=function(){f({})},E=this.apiClient,b={onopen:v,onmessage:k=>{dxe(E,g.onmessage,k)},onerror:(n=g==null?void 0:g.onerror)!==null&&n!==void 0?n:function(k){},onclose:(r=g==null?void 0:g.onclose)!==null&&r!==void 0?r:function(k){}},S=this.webSocketFactory.create(c,mxe(s),b);S.connect(),await h;const A=Et(this.apiClient,e.model),C=uG({model:A}),D=Ax({setup:C});return S.send(JSON.stringify(D)),new pxe(S,this.apiClient)}}class pxe{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=zEe(e),r=cG(n);this.conn.send(JSON.stringify({clientContent:r}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=HEe(e),r=Ax(n);this.conn.send(JSON.stringify(r))}sendPlaybackControl(e){const n=Ax({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(If.PLAY)}pause(){this.sendPlaybackControl(If.PAUSE)}stop(){this.sendPlaybackControl(If.STOP)}resetContext(){this.sendPlaybackControl(If.RESET_CONTEXT)}close(){this.conn.close()}}function mxe(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function gxe(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yxe="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function vxe(t,e,n){const r=new D_e;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const o=JSON.parse(i);if(t.isVertexAI()){const s=sbe(o);Object.assign(r,s)}else{const s=Vwe(o);Object.assign(r,s)}e(r)}class _xe{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new hxe(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,o,s,l;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let h;const g=this.apiClient.getHeaders();e.config&&e.config.tools&&vG(e.config.tools)&&_G(g);const v=bxe(g);if(this.apiClient.isVertexAI())h=`${c}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(v);else{const L=this.apiClient.getApiKey();let F="BidiGenerateContent",V="key";L!=null&&L.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),F="BidiGenerateContentConstrained",V="access_token"),h=`${c}/ws/google.ai.generativelanguage.${f}.GenerativeService.${F}?${V}=${L}`}let E=()=>{};const b=new Promise(L=>{E=L}),S=e.callbacks,A=function(){var L;(L=S==null?void 0:S.onopen)===null||L===void 0||L.call(S),E({})},C=this.apiClient,D={onopen:A,onmessage:L=>{vxe(C,S.onmessage,L)},onerror:(n=S==null?void 0:S.onerror)!==null&&n!==void 0?n:function(L){},onclose:(r=S==null?void 0:S.onclose)!==null&&r!==void 0?r:function(L){}},k=this.webSocketFactory.create(h,wxe(v),D);k.connect(),await b;let q=Et(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&q.startsWith("publishers/")){const L=this.apiClient.getProject(),F=this.apiClient.getLocation();q=`projects/${L}/locations/${F}/`+q}let $={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[J_.AUDIO]}:e.config.responseModalities=[J_.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const H=(l=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[],M=[];for(const L of H)if(this.isCallableTool(L)){const F=L;M.push(await F.tool())}else M.push(L);M.length>0&&(e.config.tools=M);const O={model:q,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?$=vwe(this.apiClient,O):$=FEe(this.apiClient,O),delete $.config,k.send(JSON.stringify($)),new Exe(k,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Txe={turnComplete:!0};class Exe{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Ki(n.turns),e.isVertexAI()?r=r.map(i=>Qd(i)):r=r.map(i=>AT(i))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(yxe)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},Txe),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Ewe(e)}:n={realtimeInput:$Ee(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function wxe(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function bxe(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const a4=10;function l4(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Bf(s)){i=!0;break}if(!i)return!0;const o=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function Bf(t){return"callTool"in t&&typeof t.callTool=="function"}function Sxe(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>Bf(i)))!==null&&r!==void 0?r:!1}function Axe(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>!Bf(i)))!==null&&r!==void 0?r:!1}function u4(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xxe extends _c{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,o,s,l;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!Sxe(n)||l4(n.config))return await this.generateContentInternal(c);if(Axe(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let f,h;const g=Ki(c.contents),v=(o=(i=(r=c.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:a4;let E=0;for(;E<v&&(f=await this.generateContentInternal(c),!(!f.functionCalls||f.functionCalls.length===0));){const b=f.candidates[0].content,S=[];for(const A of(l=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[])if(Bf(A)){const D=await A.callTool(f.functionCalls);S.push(...D)}E++,h={role:"user",parts:S},c.contents=Ki(c.contents),c.contents.push(b),c.contents.push(h),u4(c.config)&&(g.push(b),g.push(h))}return u4(c.config)&&(f.automaticFunctionCallingHistory=g),f},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),l4(n.config)){const r=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(r)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let o;const s=[];if(r!=null&&r.generatedImages)for(const c of r.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((i=c==null?void 0:c.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=c==null?void 0:c.safetyAttributes:s.push(c);let l;return o?l={generatedImages:s,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:l={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},l}),this.list=async n=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new _g(ac.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(s),s)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const s=await Promise.all(o.map(async c=>Bf(c)?await c.tool():c)),l={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(l.config.tools=s,e.config&&e.config.tools&&vG(e.config.tools)){const c=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let f=Object.assign({},c);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),_G(f),l.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return l}async initAfcToolsMap(e){var n,r,i;const o=new Map;for(const s of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Bf(s)){const l=s,c=await l.tool();for(const f of(i=c.functionDeclarations)!==null&&i!==void 0?i:[]){if(!f.name)throw new Error("Function declaration name is required.");if(o.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);o.set(f.name,l)}}return o}async processAfcStream(e){var n,r,i;const o=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:a4;let s=!1,l=0;const c=await this.initAfcToolsMap(e);return(function(f,h,g){var v,E;return Ff(this,arguments,function*(){for(var b,S,A,C;l<o;){s&&(l++,s=!1);const $=yield Wt(f.processParamsMaybeAddMcpUsage(g)),H=yield Wt(f.generateContentStreamInternal($)),M=[],O=[];try{for(var D=!0,k=(S=void 0,Jp(H)),q;q=yield Wt(k.next()),b=q.done,!b;D=!0){C=q.value,D=!1;const L=C;if(yield yield Wt(L),L.candidates&&(!((v=L.candidates[0])===null||v===void 0)&&v.content)){O.push(L.candidates[0].content);for(const F of(E=L.candidates[0].content.parts)!==null&&E!==void 0?E:[])if(l<o&&F.functionCall){if(!F.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(F.functionCall.name)){const V=yield Wt(h.get(F.functionCall.name).callTool([F.functionCall]));M.push(...V)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${F.functionCall.name}`)}}}}catch(L){S={error:L}}finally{try{!D&&!b&&(A=k.return)&&(yield Wt(A.call(k)))}finally{if(S)throw S.error}}if(M.length>0){s=!0;const L=new Tp;L.candidates=[{content:{role:"user",parts:M}}],yield yield Wt(L);const F=[];F.push(...O),F.push({role:"user",parts:M});const V=Ki(g.contents).concat(F);g.contents=V}else break}})})(this,c,e)}async generateContentInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=n4(this.apiClient,e);return l=De("{model}:generateContent",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=i4(h),v=new Tp;return Object.assign(v,g),v})}else{const f=t4(this.apiClient,e);return l=De("{model}:generateContent",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=r4(h),v=new Tp;return Object.assign(v,g),v})}}async generateContentStreamInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=n4(this.apiClient,e);return l=De("{model}:streamGenerateContent?alt=sse",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.requestStream({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(g){return Ff(this,arguments,function*(){var v,E,b,S;try{for(var A=!0,C=Jp(g),D;D=yield Wt(C.next()),v=D.done,!v;A=!0){S=D.value,A=!1;const k=S,q=i4(yield Wt(k.json()));q.sdkHttpResponse={headers:k.headers};const $=new Tp;Object.assign($,q),yield yield Wt($)}}catch(k){E={error:k}}finally{try{!A&&!v&&(b=C.return)&&(yield Wt(b.call(C)))}finally{if(E)throw E.error}}})})}else{const f=t4(this.apiClient,e);return l=De("{model}:streamGenerateContent?alt=sse",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.requestStream({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(g){return Ff(this,arguments,function*(){var v,E,b,S;try{for(var A=!0,C=Jp(g),D;D=yield Wt(C.next()),v=D.done,!v;A=!0){S=D.value,A=!1;const k=S,q=r4(yield Wt(k.json()));q.sdkHttpResponse={headers:k.headers};const $=new Tp;Object.assign($,q),yield yield Wt($)}}catch(k){E={error:k}}finally{try{!A&&!v&&(b=C.return)&&(yield Wt(b.call(C)))}finally{if(E)throw E.error}}})})}}async embedContent(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=TSe(this.apiClient,e);return l=De("{model}:predict",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=kAe(h),v=new DU;return Object.assign(v,g),v})}else{const f=Mbe(this.apiClient,e);return l=De("{model}:batchEmbedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=cAe(h),v=new DU;return Object.assign(v,g),v})}}async generateImagesInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=wSe(this.apiClient,e);return l=De("{model}:predict",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=OAe(h),v=new kU;return Object.assign(v,g),v})}else{const f=kbe(this.apiClient,e);return l=De("{model}:predict",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=hAe(h),v=new kU;return Object.assign(v,g),v})}}async editImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=RSe(this.apiClient,e);return o=De("{model}:predict",l._url),s=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const f=LAe(c),h=new A_e;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=NSe(this.apiClient,e);return o=De("{model}:predict",l._url),s=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const f=VAe(c),h=new x_e;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=OSe(this.apiClient,e);return o=De("{model}:predict",l._url),s=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const f=UAe(c),h=new C_e;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=FSe(this.apiClient,e);return o=De("{model}:predict",l._url),s=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const f=qAe(c),h=new I_e;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=BSe(this.apiClient,e);return l=De("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Cx(h))}else{const f=Obe(this.apiClient,e);return l=De("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>xx(h))}}async listInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=$Se(this.apiClient,e);return l=De("{models_url}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=GAe(h),v=new OU;return Object.assign(v,g),v})}else{const f=Vbe(this.apiClient,e);return l=De("{models_url}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=mAe(h),v=new OU;return Object.assign(v,g),v})}}async update(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=HSe(this.apiClient,e);return l=De("{model}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Cx(h))}else{const f=Fbe(this.apiClient,e);return l=De("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>xx(h))}}async delete(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=GSe(this.apiClient,e);return l=De("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=jAe(h),v=new LU;return Object.assign(v,g),v})}else{const f=Bbe(this.apiClient,e);return l=De("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=gAe(h),v=new LU;return Object.assign(v,g),v})}}async countTokens(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=KSe(this.apiClient,e);return l=De("{model}:countTokens",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=KAe(h),v=new VU;return Object.assign(v,g),v})}else{const f=$be(this.apiClient,e);return l=De("{model}:countTokens",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=yAe(h),v=new VU;return Object.assign(v,g),v})}}async computeTokens(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=WSe(this.apiClient,e);return o=De("{model}:computeTokens",l._url),s=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const f=WAe(c),h=new R_e;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=XSe(this.apiClient,e);return l=De("{model}:predictLongRunning",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>{const g=XAe(h),v=new Q_;return Object.assign(v,g),v})}else{const f=Gbe(this.apiClient,e);return l=De("{model}:predictLongRunning",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const g=EAe(h),v=new Q_;return Object.assign(v,g),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Cxe(t){const e={},n=p(t,["operationName"]);n!=null&&m(e,["_url","operationName"],n);const r=p(t,["config"]);return r!=null&&m(e,["config"],r),e}function Ixe(t){const e={},n=p(t,["operationName"]);n!=null&&m(e,["operationName"],n);const r=p(t,["resourceName"]);r!=null&&m(e,["_url","resourceName"],r);const i=p(t,["config"]);return i!=null&&m(e,["config"],i),e}function Rxe(t){const e={},n=p(t,["operationName"]);n!=null&&m(e,["_url","operationName"],n);const r=p(t,["config"]);return r!=null&&m(e,["config"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Pxe extends _c{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=Rxe(e);return l=De("{operationName}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s}else{const f=Cxe(e);return l=De("{operationName}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s}}async fetchPredictVideosOperationInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=Ixe(e);return o=De("{resourceName}:fetchPredictOperation",l._url),s=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Nxe(t){const e={},n=p(t,["voiceName"]);return n!=null&&m(e,["voiceName"],n),e}function TG(t){const e={},n=p(t,["prebuiltVoiceConfig"]);return n!=null&&m(e,["prebuiltVoiceConfig"],Nxe(n)),e}function Mxe(t){const e={},n=p(t,["speaker"]);n!=null&&m(e,["speaker"],n);const r=p(t,["voiceConfig"]);return r!=null&&m(e,["voiceConfig"],TG(r)),e}function Dxe(t){const e={},n=p(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Mxe(i))),m(e,["speakerVoiceConfigs"],r)}return e}function kxe(t){const e={},n=p(t,["voiceConfig"]);n!=null&&m(e,["voiceConfig"],TG(n));const r=p(t,["multiSpeakerVoiceConfig"]);r!=null&&m(e,["multiSpeakerVoiceConfig"],Dxe(r));const i=p(t,["languageCode"]);return i!=null&&m(e,["languageCode"],i),e}function Oxe(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function Lxe(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["data"]);n!=null&&m(e,["data"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function Vxe(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function Uxe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],Oxe(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],Lxe(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],Vxe(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const l=p(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const c=p(t,["executableCode"]);c!=null&&m(e,["executableCode"],c);const f=p(t,["functionCall"]);f!=null&&m(e,["functionCall"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=p(t,["text"]);return g!=null&&m(e,["text"],g),e}function Fxe(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Uxe(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function Bxe(t){const e={},n=p(t,["behavior"]);n!=null&&m(e,["behavior"],n);const r=p(t,["description"]);r!=null&&m(e,["description"],r);const i=p(t,["name"]);i!=null&&m(e,["name"],i);const o=p(t,["parameters"]);o!=null&&m(e,["parameters"],o);const s=p(t,["parametersJsonSchema"]);s!=null&&m(e,["parametersJsonSchema"],s);const l=p(t,["response"]);l!=null&&m(e,["response"],l);const c=p(t,["responseJsonSchema"]);return c!=null&&m(e,["responseJsonSchema"],c),e}function qxe(t){const e={},n=p(t,["startTime"]);n!=null&&m(e,["startTime"],n);const r=p(t,["endTime"]);return r!=null&&m(e,["endTime"],r),e}function $xe(t){const e={},n=p(t,["timeRangeFilter"]);if(n!=null&&m(e,["timeRangeFilter"],qxe(n)),p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function zxe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["dynamicThreshold"]);return r!=null&&m(e,["dynamicThreshold"],r),e}function Hxe(t){const e={},n=p(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],zxe(n)),e}function Gxe(){return{}}function jxe(t){const e={},n=p(t,["environment"]);return n!=null&&m(e,["environment"],n),e}function Kxe(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>Bxe(f))),m(e,["functionDeclarations"],c)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=p(t,["googleSearch"]);r!=null&&m(e,["googleSearch"],$xe(r));const i=p(t,["googleSearchRetrieval"]);if(i!=null&&m(e,["googleSearchRetrieval"],Hxe(i)),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(p(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");p(t,["urlContext"])!=null&&m(e,["urlContext"],Gxe());const s=p(t,["computerUse"]);s!=null&&m(e,["computerUse"],jxe(s));const l=p(t,["codeExecution"]);return l!=null&&m(e,["codeExecution"],l),e}function Wxe(t){const e={},n=p(t,["handle"]);if(n!=null&&m(e,["handle"],n),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function c4(){return{}}function Yxe(t){const e={},n=p(t,["disabled"]);n!=null&&m(e,["disabled"],n);const r=p(t,["startOfSpeechSensitivity"]);r!=null&&m(e,["startOfSpeechSensitivity"],r);const i=p(t,["endOfSpeechSensitivity"]);i!=null&&m(e,["endOfSpeechSensitivity"],i);const o=p(t,["prefixPaddingMs"]);o!=null&&m(e,["prefixPaddingMs"],o);const s=p(t,["silenceDurationMs"]);return s!=null&&m(e,["silenceDurationMs"],s),e}function Jxe(t){const e={},n=p(t,["automaticActivityDetection"]);n!=null&&m(e,["automaticActivityDetection"],Yxe(n));const r=p(t,["activityHandling"]);r!=null&&m(e,["activityHandling"],r);const i=p(t,["turnCoverage"]);return i!=null&&m(e,["turnCoverage"],i),e}function Qxe(t){const e={},n=p(t,["targetTokens"]);return n!=null&&m(e,["targetTokens"],n),e}function Xxe(t){const e={},n=p(t,["triggerTokens"]);n!=null&&m(e,["triggerTokens"],n);const r=p(t,["slidingWindow"]);return r!=null&&m(e,["slidingWindow"],Qxe(r)),e}function Zxe(t){const e={},n=p(t,["proactiveAudio"]);return n!=null&&m(e,["proactiveAudio"],n),e}function eCe(t,e){const n={},r=p(t,["generationConfig"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig"],r);const i=p(t,["responseModalities"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig","responseModalities"],i);const o=p(t,["temperature"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","temperature"],o);const s=p(t,["topP"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","topP"],s);const l=p(t,["topK"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","topK"],l);const c=p(t,["maxOutputTokens"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","maxOutputTokens"],c);const f=p(t,["mediaResolution"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","mediaResolution"],f);const h=p(t,["seed"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","seed"],h);const g=p(t,["speechConfig"]);e!==void 0&&g!=null&&m(e,["setup","generationConfig","speechConfig"],kxe(u1(g)));const v=p(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],v);const E=p(t,["systemInstruction"]);e!==void 0&&E!=null&&m(e,["setup","systemInstruction"],Fxe(Cr(E)));const b=p(t,["tools"]);if(e!==void 0&&b!=null){let $=Yd(b);Array.isArray($)&&($=$.map(H=>Kxe(Wd(H)))),m(e,["setup","tools"],$)}const S=p(t,["sessionResumption"]);e!==void 0&&S!=null&&m(e,["setup","sessionResumption"],Wxe(S));const A=p(t,["inputAudioTranscription"]);e!==void 0&&A!=null&&m(e,["setup","inputAudioTranscription"],c4());const C=p(t,["outputAudioTranscription"]);e!==void 0&&C!=null&&m(e,["setup","outputAudioTranscription"],c4());const D=p(t,["realtimeInputConfig"]);e!==void 0&&D!=null&&m(e,["setup","realtimeInputConfig"],Jxe(D));const k=p(t,["contextWindowCompression"]);e!==void 0&&k!=null&&m(e,["setup","contextWindowCompression"],Xxe(k));const q=p(t,["proactivity"]);return e!==void 0&&q!=null&&m(e,["setup","proactivity"],Zxe(q)),n}function tCe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["setup","model"],Et(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],eCe(i,n)),n}function nCe(t,e,n){const r={},i=p(e,["expireTime"]);n!==void 0&&i!=null&&m(n,["expireTime"],i);const o=p(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&m(n,["newSessionExpireTime"],o);const s=p(e,["uses"]);n!==void 0&&s!=null&&m(n,["uses"],s);const l=p(e,["liveConnectConstraints"]);n!==void 0&&l!=null&&m(n,["bidiGenerateContentSetup"],tCe(t,l));const c=p(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&m(n,["fieldMask"],c),r}function rCe(t,e){const n={},r=p(e,["config"]);return r!=null&&m(n,["config"],nCe(t,r,n)),n}function iCe(t){const e={},n=p(t,["name"]);return n!=null&&m(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oCe(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(o=>`${n}.${o}`);e.push(...i)}else e.push(n)}return e.join(",")}function sCe(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const o=oCe(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let l=[];i.length>0&&(l=i.map(f=>s.includes(f)?`generationConfig.${f}`:f));const c=[];o&&c.push(o),l.length>0&&c.push(...l),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class aCe extends _c{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const l=rCe(this.apiClient,e);o=De("auth_tokens",l._url),s=l._query,delete l.config,delete l._url,delete l._query;const c=sCe(l,e.config);return i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>iCe(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lCe(t){const e={},n=p(t,["name"]);n!=null&&m(e,["_url","name"],n);const r=p(t,["config"]);return r!=null&&m(e,["config"],r),e}function uCe(t,e){const n={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=p(t,["pageToken"]);e!==void 0&&i!=null&&m(e,["_query","pageToken"],i);const o=p(t,["filter"]);return e!==void 0&&o!=null&&m(e,["_query","filter"],o),n}function cCe(t){const e={},n=p(t,["config"]);return n!=null&&m(e,["config"],uCe(n,e)),e}function fCe(t){const e={},n=p(t,["name"]);n!=null&&m(e,["_url","name"],n);const r=p(t,["config"]);return r!=null&&m(e,["config"],r),e}function dCe(t){const e={},n=p(t,["textInput"]);n!=null&&m(e,["textInput"],n);const r=p(t,["output"]);return r!=null&&m(e,["output"],r),e}function hCe(t){const e={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=p(t,["examples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>dCe(i))),m(e,["examples","examples"],r)}return e}function pCe(t,e){const n={};if(p(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=p(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&m(e,["displayName"],r),p(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=p(t,["epochCount"]);e!==void 0&&i!=null&&m(e,["tuningTask","hyperparameters","epochCount"],i);const o=p(t,["learningRateMultiplier"]);if(o!=null&&m(n,["tuningTask","hyperparameters","learningRateMultiplier"],o),p(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(p(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(p(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const s=p(t,["batchSize"]);e!==void 0&&s!=null&&m(e,["tuningTask","hyperparameters","batchSize"],s);const l=p(t,["learningRate"]);return e!==void 0&&l!=null&&m(e,["tuningTask","hyperparameters","learningRate"],l),n}function mCe(t){const e={},n=p(t,["baseModel"]);n!=null&&m(e,["baseModel"],n);const r=p(t,["preTunedModel"]);r!=null&&m(e,["preTunedModel"],r);const i=p(t,["trainingDataset"]);i!=null&&m(e,["tuningTask","trainingData"],hCe(i));const o=p(t,["config"]);return o!=null&&m(e,["config"],pCe(o,e)),e}function gCe(t){const e={},n=p(t,["name"]);n!=null&&m(e,["_url","name"],n);const r=p(t,["config"]);return r!=null&&m(e,["config"],r),e}function yCe(t,e){const n={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=p(t,["pageToken"]);e!==void 0&&i!=null&&m(e,["_query","pageToken"],i);const o=p(t,["filter"]);return e!==void 0&&o!=null&&m(e,["_query","filter"],o),n}function vCe(t){const e={},n=p(t,["config"]);return n!=null&&m(e,["config"],yCe(n,e)),e}function _Ce(t){const e={},n=p(t,["name"]);n!=null&&m(e,["_url","name"],n);const r=p(t,["config"]);return r!=null&&m(e,["config"],r),e}function TCe(t,e){const n={},r=p(t,["gcsUri"]);e!==void 0&&r!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],r);const i=p(t,["vertexDatasetResource"]);if(e!==void 0&&i!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],i),p(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function ECe(t,e){const n={},r=p(t,["gcsUri"]);r!=null&&m(n,["validationDatasetUri"],r);const i=p(t,["vertexDatasetResource"]);return e!==void 0&&i!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],i),n}function wCe(t,e){const n={},r=p(t,["validationDataset"]);e!==void 0&&r!=null&&m(e,["supervisedTuningSpec"],ECe(r,n));const i=p(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&m(e,["tunedModelDisplayName"],i);const o=p(t,["description"]);e!==void 0&&o!=null&&m(e,["description"],o);const s=p(t,["epochCount"]);e!==void 0&&s!=null&&m(e,["supervisedTuningSpec","hyperParameters","epochCount"],s);const l=p(t,["learningRateMultiplier"]);e!==void 0&&l!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],l);const c=p(t,["exportLastCheckpointOnly"]);e!==void 0&&c!=null&&m(e,["supervisedTuningSpec","exportLastCheckpointOnly"],c);const f=p(t,["preTunedModelCheckpointId"]);f!=null&&m(n,["preTunedModel","checkpointId"],f);const h=p(t,["adapterSize"]);if(e!==void 0&&h!=null&&m(e,["supervisedTuningSpec","hyperParameters","adapterSize"],h),p(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(p(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function bCe(t){const e={},n=p(t,["baseModel"]);n!=null&&m(e,["baseModel"],n);const r=p(t,["preTunedModel"]);r!=null&&m(e,["preTunedModel"],r);const i=p(t,["trainingDataset"]);i!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],TCe(i,e));const o=p(t,["config"]);return o!=null&&m(e,["config"],wCe(o,e)),e}function SCe(t){const e={},n=p(t,["name"]);n!=null&&m(e,["model"],n);const r=p(t,["name"]);return r!=null&&m(e,["endpoint"],r),e}function EG(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["name"]);r!=null&&m(e,["name"],r);const i=p(t,["state"]);i!=null&&m(e,["state"],YH(i));const o=p(t,["createTime"]);o!=null&&m(e,["createTime"],o);const s=p(t,["tuningTask","startTime"]);s!=null&&m(e,["startTime"],s);const l=p(t,["tuningTask","completeTime"]);l!=null&&m(e,["endTime"],l);const c=p(t,["updateTime"]);c!=null&&m(e,["updateTime"],c);const f=p(t,["description"]);f!=null&&m(e,["description"],f);const h=p(t,["baseModel"]);h!=null&&m(e,["baseModel"],h);const g=p(t,["_self"]);g!=null&&m(e,["tunedModel"],SCe(g));const v=p(t,["customBaseModel"]);v!=null&&m(e,["customBaseModel"],v);const E=p(t,["experiment"]);E!=null&&m(e,["experiment"],E);const b=p(t,["labels"]);b!=null&&m(e,["labels"],b);const S=p(t,["outputUri"]);S!=null&&m(e,["outputUri"],S);const A=p(t,["pipelineJob"]);A!=null&&m(e,["pipelineJob"],A);const C=p(t,["serviceAccount"]);C!=null&&m(e,["serviceAccount"],C);const D=p(t,["tunedModelDisplayName"]);return D!=null&&m(e,["tunedModelDisplayName"],D),e}function ACe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(t,["tunedModels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>EG(s))),m(e,["tuningJobs"],o)}return e}function xCe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["name"]);r!=null&&m(e,["name"],r);const i=p(t,["metadata"]);i!=null&&m(e,["metadata"],i);const o=p(t,["done"]);o!=null&&m(e,["done"],o);const s=p(t,["error"]);return s!=null&&m(e,["error"],s),e}function CCe(t){const e={},n=p(t,["checkpointId"]);n!=null&&m(e,["checkpointId"],n);const r=p(t,["epoch"]);r!=null&&m(e,["epoch"],r);const i=p(t,["step"]);i!=null&&m(e,["step"],i);const o=p(t,["endpoint"]);return o!=null&&m(e,["endpoint"],o),e}function ICe(t){const e={},n=p(t,["model"]);n!=null&&m(e,["model"],n);const r=p(t,["endpoint"]);r!=null&&m(e,["endpoint"],r);const i=p(t,["checkpoints"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>CCe(s))),m(e,["checkpoints"],o)}return e}function Rx(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["name"]);r!=null&&m(e,["name"],r);const i=p(t,["state"]);i!=null&&m(e,["state"],YH(i));const o=p(t,["createTime"]);o!=null&&m(e,["createTime"],o);const s=p(t,["startTime"]);s!=null&&m(e,["startTime"],s);const l=p(t,["endTime"]);l!=null&&m(e,["endTime"],l);const c=p(t,["updateTime"]);c!=null&&m(e,["updateTime"],c);const f=p(t,["error"]);f!=null&&m(e,["error"],f);const h=p(t,["description"]);h!=null&&m(e,["description"],h);const g=p(t,["baseModel"]);g!=null&&m(e,["baseModel"],g);const v=p(t,["tunedModel"]);v!=null&&m(e,["tunedModel"],ICe(v));const E=p(t,["preTunedModel"]);E!=null&&m(e,["preTunedModel"],E);const b=p(t,["supervisedTuningSpec"]);b!=null&&m(e,["supervisedTuningSpec"],b);const S=p(t,["tuningDataStats"]);S!=null&&m(e,["tuningDataStats"],S);const A=p(t,["encryptionSpec"]);A!=null&&m(e,["encryptionSpec"],A);const C=p(t,["partnerModelTuningSpec"]);C!=null&&m(e,["partnerModelTuningSpec"],C);const D=p(t,["customBaseModel"]);D!=null&&m(e,["customBaseModel"],D);const k=p(t,["experiment"]);k!=null&&m(e,["experiment"],k);const q=p(t,["labels"]);q!=null&&m(e,["labels"],q);const $=p(t,["outputUri"]);$!=null&&m(e,["outputUri"],$);const H=p(t,["pipelineJob"]);H!=null&&m(e,["pipelineJob"],H);const M=p(t,["serviceAccount"]);M!=null&&m(e,["serviceAccount"],M);const O=p(t,["tunedModelDisplayName"]);return O!=null&&m(e,["tunedModelDisplayName"],O),e}function RCe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(t,["tuningJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Rx(s))),m(e,["tuningJobs"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PCe extends _c{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new _g(ac.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel},i=Object.assign(Object.assign({},n),{preTunedModel:r});return i.baseModel=void 0,await this.tuneInternal(i)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),i=await this.tuneMldevInternal(r);let o="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?o=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(o=i.name.split("/operations/")[0]),{name:o,state:Tx.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=gCe(e);return l=De("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>Rx(h))}else{const f=lCe(e);return l=De("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>EG(h))}}async listInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=vCe(e);return l=De("tuningJobs",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=RCe(h),v=new FU;return Object.assign(v,g),v})}else{const f=cCe(e);return l=De("tunedModels",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=ACe(h),v=new FU;return Object.assign(v,g),v})}}async cancel(e){var n,r,i,o;let s="",l={};if(this.apiClient.isVertexAI()){const c=_Ce(e);s=De("{name}:cancel",c._url),l=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=fCe(e);s=De("{name}:cancel",c._url),l=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async tuneInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=bCe(e);return o=De("tuningJobs",l._url),s=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>Rx(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=mCe(e);return o=De("tunedModels",l._url),s=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>xCe(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class NCe{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const MCe=1024*1024*8,DCe=3,kCe=1e3,OCe=2,OS="x-goog-upload-status";async function LCe(t,e,n){var r,i,o;let s=0,l=0,c=new Ex(new Response),f="upload";for(s=t.size;l<s;){const g=Math.min(MCe,s-l),v=t.slice(l,l+g);l+g>=s&&(f+=", finalize");let E=0,b=kCe;for(;E<DCe&&(c=await n.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(l),"Content-Length":String(g)}}}),!(!((r=c==null?void 0:c.headers)===null||r===void 0)&&r[OS]));)E++,await UCe(b),b=b*OCe;if(l+=g,((i=c==null?void 0:c.headers)===null||i===void 0?void 0:i[OS])!=="active")break;if(s<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const h=await(c==null?void 0:c.json());if(((o=c==null?void 0:c.headers)===null||o===void 0?void 0:o[OS])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return h.file}async function VCe(t){return{size:t.size,type:t.type}}function UCe(t){return new Promise(e=>setTimeout(e,t))}class FCe{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await LCe(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await VCe(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BCe{create(e,n,r){return new qCe(e,n,r)}}class qCe{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const f4="x-goog-api-key";class $Ce{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(f4)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(f4,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zCe="gl-node/";class HCe{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=S_e(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const i=new $Ce(this.apiKey);this.apiClient=new sxe({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:zCe+"web",uploader:new FCe,downloader:new NCe}),this.models=new xxe(this.apiClient),this.live=new _xe(this.apiClient,i,new BCe),this.batches=new Y0e(this.apiClient),this.chats=new tEe(this.models,this.apiClient),this.caches=new XTe(this.apiClient),this.files=new pEe(this.apiClient),this.operations=new Pxe(this.apiClient),this.authTokens=new aCe(this.apiClient),this.tunings=new PCe(this.apiClient)}}const GCe="AIzaSyByOfSHfNNIwPKwNOkklamTuSy1-t3NOPI",Tg=new HCe({apiKey:GCe}),jCe=t=>new Promise(e=>setTimeout(e,t)),KCe=async(t,e=3,n=2e3)=>{var o,s;let r=0,i=n;for(;r<e;)try{return await t()}catch(l){if((((o=l.message)==null?void 0:o.includes("503"))||((s=l.message)==null?void 0:s.toLowerCase().includes("overloaded")))&&r<e-1)console.warn(`Gemini API overloaded. Retrying in ${i}ms... (Attempt ${r+1}/${e})`),await jCe(i),r++,i*=2;else throw l}throw new Error("Max retries reached. Failed to call Gemini API.")},WCe=async t=>{var e;try{const n=await Tg.models.generateImages({model:"imagen-4.0-generate-001",prompt:`Futuristic, dark, dystopian, gritty, mysterious, quest item. ${t}`,config:{numberOfImages:1,outputMimeType:"image/jpeg",aspectRatio:"16:9"}});if(n.generatedImages&&n.generatedImages.length>0)return`data:image/jpeg;base64,${n.generatedImages[0].image.imageBytes}`;throw new Error("No image was generated by the API.")}catch(n){console.error("Error generating image with Gemini API:",n);let r="An unknown error occurred.";if(n instanceof Error){r=n.message;try{const i=n.message.includes("ApiError: ")?n.message.split("ApiError: ")[1]:n.message,o=JSON.parse(i);r=((e=o==null?void 0:o.error)==null?void 0:e.message)||r}catch{}}throw new Error(`Failed to generate image: ${r}`)}},YCe=async t=>{var e;try{const{prompt:n,tone:r,keywords:i,wordCount:o}=t,s=`Ты — талантливый сценарист для текстовых квестов в мрачном, загадочном сеттинге. Напиши художественное описание для одной игровой сцены на русском языке.

        Инструкции:
        - Тон/атмосфера: ${r}.
        - Обязательно упомяни следующие ключевые детали: ${i||"не указаны"}.
        - Объем текста: примерно ${o} слов.
        - Твой ответ должен содержать ТОЛЬКО готовый текст для сцены. Не добавляй заголовков, комментариев, цитат или приветствий.
        - Текст должен быть захватывающим и погружающим игрока в атмосферу.

        Основная идея от автора:
        "${n}"`,c=(await Tg.models.generateContent({model:"gemini-2.5-flash",contents:s})).text;if(!c)throw new Error("API вернул пустой ответ.");return c.trim()}catch(n){console.error("Error generating text with Gemini API:",n);let r="Произошла неизвестная ошибка при генерации текста.";if(n instanceof Error){r=n.message;try{const i=n.message.includes("ApiError: ")?n.message.split("ApiError: ")[1]:n.message,o=JSON.parse(i);r=((e=o==null?void 0:o.error)==null?void 0:e.message)||r}catch{}}throw new Error(`Не удалось сгенерировать текст: ${r}`)}},JCe=async t=>{if(!t||t.trim().length<10)throw new Error("Текст узла слишком короткий для анализа.");try{const e=`Ты — гейм-дизайнер, создающий текстовый квест. Основываясь на описании игровой сцены ниже, предложи 3-4 интересных и логичных варианта выбора для игрока. Варианты должны быть краткими и ориентированными на действие.

        Описание сцены:
        "${t}"

        Инструкции:
        - Верни ТОЛЬКО JSON-массив строк.
        - Никаких лишних комментариев, пояснений или markdown-форматирования.
        - Пример ответа: ["Осмотреть стол", "Подойти к окну", "Проверить карманы"]`,r=(await Tg.models.generateContent({model:"gemini-2.5-flash",contents:e,config:{responseMimeType:"application/json",responseSchema:{type:Fe.ARRAY,items:{type:Fe.STRING}}}})).text.trim();if(!r)throw new Error("API вернул пустой ответ.");const i=JSON.parse(r);if(!Array.isArray(i)||!i.every(o=>typeof o=="string"))throw new Error("API вернул некорректный формат данных.");return i}catch(e){console.error("Error generating choices with Gemini API:",e);let n="Произошла неизвестная ошибка при генерации выборов.";throw e instanceof Error&&(n=`Не удалось сгенерировать выборы: ${e.message}`),new Error(n)}},QCe=async t=>{const{prompt:e,genre:n,keywords:r,nodesCount:i,addLogic:o,complexity:s}=t,l={type:Fe.OBJECT,properties:{key:{type:Fe.STRING,description:"The name of the variable or item."},value:{type:Fe.STRING,description:"The string value. For numbers, use a string like '1'."}},required:["key","value"]},c={type:Fe.OBJECT,properties:{key:{type:Fe.STRING,description:"The name of the numeric variable."},value:{type:Fe.NUMBER,description:"The number to add."}},required:["key","value"]},f={type:Fe.ARRAY,items:l},h={type:Fe.ARRAY,items:c},g={type:Fe.OBJECT,description:"Optional condition to show this choice.",properties:{has_item:{type:Fe.STRING},missing_item:{type:Fe.STRING},var_eq:f,var_neq:f},nullable:!0},v={type:Fe.OBJECT,description:"An effect to apply.",properties:{inv_add:{type:Fe.STRING},inv_remove:{type:Fe.STRING},set:f,add:h}},E={type:Fe.OBJECT,properties:{label:{type:Fe.STRING,description:"The text displayed to the player for this choice, in Russian."},to:{type:Fe.STRING,description:"The 'id' of the node this choice leads to. Must be one of the other generated node IDs."},when:g,effects:{type:Fe.ARRAY,items:v,nullable:!0}},required:["label","to"]},b={type:Fe.OBJECT,properties:{id:{type:Fe.STRING,description:"A unique, short, snake_case identifier for this node. The first node must have the id 'start'."},text:{type:Fe.STRING,description:"The main descriptive text for this scene, in Russian. Should be engaging and atmospheric."},choices:{type:Fe.ARRAY,description:"A list of 2-3 actions the player can take.",items:E,nullable:!0},when:{...g,nullable:!0},effects:{type:Fe.ARRAY,items:v,nullable:!0,description:"Optional effects that trigger upon entering this node."},end:{type:Fe.OBJECT,nullable:!0,properties:{type:{type:Fe.STRING,description:"'win' or 'lose'"},message:{type:Fe.STRING,description:"Final message to the player, in Russian."}}}},required:["id","text"]},S={type:Fe.OBJECT,properties:{nodes:{type:Fe.ARRAY,description:"An array of all the quest nodes.",items:b}},required:["nodes"]};let A="**ВАЖНОЕ ОГРАНИЧЕНИЕ:** НЕ ИСПОЛЬЗУЙ поля 'when' и 'effects'. Создай только простую повествовательную историю без игровой механики.";o&&(A=`
    **Игровая логика (Уровень сложности: ${s}):**
    Твоя главная задача — создать **РЕШАЕМУЮ** загадку по принципу "Решение -> Преграда".

    1.  **"Решение" (Ключ):** Сначала в одном или нескольких узлах размести предметы (через \`"effects": [{"inv_add": "название_предмета"}]\`) или установи переменные (через \`"effects": [{"set": [{"key": "переменная", "value": "1"}]}]\`).
    2.  **"Преграда" (Замок):** Затем, в узле, который находится *дальше по сюжету*, создай выбор, который требует это "Решение". Используй условие 'when' (например, \`"when": {"has_item": "название_предмета"}\` или \`"when": {"var_eq": [...]}\`).
    3.  **ГАРАНТИЯ ПРОХОДИМОСТИ:** Убедись, что игрок может добраться от "Решения" до "Преграды". Путь к победе НЕ ДОЛЖЕН быть заблокирован нерешаемой загадкой. Не создавай предметы, которые нигде не используются. Не создавай преграды, которые невозможно преодолеть.
    4.  **ПРАВИЛО ФОРМАТА:** Для всех переменных в эффектах 'set' и условиях 'var_eq'/'var_neq', используй МАССИВ ОБЪЕКТОВ с полями 'key' и 'value'. ВСЕГДА используй СТРОКИ в качестве 'value' (например, '1', 'true', 'активно').
        -   Пример для 'set': \`"effects": [{"set": [{"key": "power_on", "value": "1"}]}]\`
        -   Пример для 'var_eq': \`"when": {"var_eq": [{"key": "door_locked", "value": "true"}]}\`
    `);const C=`Ты — опытный сценарист и гейм-дизайнер текстовых квестов. Твоя задача — создать структуру для целого квеста на основе идеи автора.

    Инструкции:
    1.  Создай связную историю, состоящую примерно из ${i} узлов.
    2.  Первый узел ОБЯЗАТЕЛЬНО должен иметь id "start".
    3.  Все id узлов должны быть уникальными, короткими и в стиле snake_case (например: 'dark_corridor', 'captain_bridge').
    4.  Для каждого узла напиши атмосферный текст на русском языке.
    5.  Для каждого узла придумай 2-3 логичных варианта выбора ('choices').
    6.  Поле 'to' в каждом выборе должно ссылаться на id другого существующего узла, создавая связный граф истории. Убедись, что нет ссылок на несуществующие id.
    7.  Хотя бы один узел должен быть конечным, завершая историю (используй поле 'end', например: \`"end": {"type": "win", "message": "Вы победили!"}\`). У конечных узлов не должно быть поля 'choices'.
    ${A}
    8.  Верни результат в формате JSON, соответствующем предоставленной схеме. Не добавляй никаких комментариев или лишнего текста вне JSON.

    Параметры квеста от автора:
    -   Жанр/Сеттинг: ${n}
    -   Основная завязка сюжета: "${e}"
    -   Ключевые элементы, которые нужно включить: ${r||"не указаны"}
    `;try{const k=(await Tg.models.generateContent({model:"gemini-2.5-flash",contents:C,config:{responseMimeType:"application/json",responseSchema:S}})).text.trim();if(!k)throw new Error("API вернул пустой ответ.");const q=JSON.parse(k);if(!q.nodes||!Array.isArray(q.nodes))throw new Error("API вернул некорректную структуру данных (отсутствует массив nodes).");const $={};for(const H of q.nodes)if(H.id){const{id:M,...O}=H;O.choices&&O.choices.length===0&&delete O.choices,O.effects&&O.effects.length===0&&delete O.effects,$[M]=O}if(!$.start)throw new Error("Сгенерированный сценарий не содержит обязательного узла 'start'.");return $}catch(D){console.error("Error generating quest DSL with Gemini API:",D);let k="Произошла неизвестная ошибка при генерации сценария.";throw D instanceof Error&&(k=`Не удалось сгенерировать сценарий: ${D.message}`),new Error(k)}},XCe=async t=>{const e={type:Fe.OBJECT,properties:{action:{type:Fe.STRING,description:"Action to perform: CREATE_NODE, DELETE_CHOICE, SET_CHOICE_TARGET, DELETE_NODE."},label:{type:Fe.STRING,description:"Human-readable label for the button, e.g., 'Create missing node'."},details:{type:Fe.OBJECT,properties:{targetNodeId:{type:Fe.STRING,nullable:!0},choiceIndex:{type:Fe.NUMBER,nullable:!0,description:"The index of the choice with the broken link within its node's 'choices' array."},newNodeId:{type:Fe.STRING,nullable:!0},generatedText:{type:Fe.STRING,nullable:!0,description:"Pre-generated Russian text for the new node if action is CREATE_NODE."}}}},required:["action","label","details"]},n={type:Fe.OBJECT,properties:{type:{type:Fe.STRING,description:"Error type: BROKEN_LINK, ORPHAN_NODE, DEAD_END, UNSOLVABLE_PUZZLE"},nodeId:{type:Fe.STRING,description:"ID of the node where the error occurs."},description:{type:Fe.STRING,description:"Human-readable description of the error."},suggestions:{type:Fe.ARRAY,items:e},details:{type:Fe.OBJECT,properties:{choiceLabel:{type:Fe.STRING,nullable:!0,description:"The 'label' text of the choice with the broken link."},targetNodeId:{type:Fe.STRING,nullable:!0}}}},required:["type","nodeId","description","suggestions"]},r={type:Fe.OBJECT,properties:{issues:{type:Fe.ARRAY,items:n}},required:["issues"]},i=`Ты — опытный гейм-дизайнер и QA-тестировщик текстовых квестов. Проанализируй предоставленный JSON-сценарий (QuestDSL) на наличие логических ошибок. Для каждой найденной ошибки "BROKEN_LINK" ты должен не только предложить создать узел, но и СРАЗУ ЖЕ сгенерировать для него подходящий по контексту текст.

    **Типы ошибок для поиска и правила генерации предложений:**

    1.  **BROKEN_LINK (Битые ссылки):**
        -   **Задача:** Найди выбор (\`choices\`), у которого поле \`to\` ссылается на ID узла, которого нет в сценарии. Ты ДОЛЖЕН определить: 1. Текст этого выбора (\`label\`). 2. Индекс этого выбора в массиве \`choices\` (число).
        -   **В \`details\` самой ошибки (\`AnalysisResult.details\`):** Укажи \`choiceLabel\` (текст выбора) и \`targetNodeId\` (несуществующий ID).
        -   **В \`suggestions\`:**
            -   **Для \`action: "CREATE_NODE"\`:** В \`details\` укажи \`choiceIndex\` (индекс), \`newNodeId\` (несуществующий ID) и сгенерируй \`generatedText\`. Текст должен логично продолжать историю, основываясь на тексте исходного узла и \`choiceLabel\`. Учти ID целевого узла (например, \`lose_taunted\` намекает на проигрыш).
            -   **Для \`action: "DELETE_CHOICE"\`:** В \`details\` укажи тот же самый \`choiceIndex\`.

    2.  **ORPHAN_NODE (Узлы-сироты):**
        -   **Задача:** Найди узел (кроме 'start'), на который нет ни одной ссылки из полей \`to\`.
        -   **Предложения:** Предложи удалить этот узел (\`action: "DELETE_NODE"\`).

    3.  **DEAD_END (Тупики):**
        -   **Задача:** Найди узел, который не является концом игры (\`end\`), но не имеет доступных для игрока выборов.
        -   **Предложения:** Предложи удалить этот узел.

    4.  **UNSOLVABLE_PUZZLE (Нерешаемые загадки):**
        -   **Задача:** Найди преграду (выбор с \`when\`), для которой нет решения в предыдущих узлах.
        -   **Предложения:** Опиши проблему в \`description\` и предложи удалить этот выбор.

    **Сценарий для анализа:**
    \`\`\`json
    ${JSON.stringify(t,null,2)}
    \`\`\`

    Верни ТОЛЬКО JSON-объект с полем "issues". Если ошибок нет, верни пустой массив.
    `,o=()=>Tg.models.generateContent({model:"gemini-2.5-flash",contents:i,config:{responseMimeType:"application/json",responseSchema:r}});try{const l=(await KCe(o)).text.trim();return l?JSON.parse(l).issues||[]:[]}catch(s){console.error("Error analyzing quest DSL:",s);let l="Произошла неизвестная ошибка при анализе сценария.";throw s instanceof Error&&(l=`Не удалось проанализировать сценарий: ${s.message}`),new Error(l)}},ZCe=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{d:"M17 3H5a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2zm-3 12H8v-4h6v4zm2-6-H5V5h12v4z"})}),Ep=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),d4=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),wG=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-stone-400 hover:text-red-500 transition-colors",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})}),LS=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),eIe=()=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-stone-400 hover:text-amber-400 transition-colors",viewBox:"0 0 20 20",fill:"currentColor",children:[I.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),I.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]}),tIe=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),nIe=()=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-stone-400 hover:text-amber-400 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924-1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066 2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Px=({nodeId:t,dsl:e,selectedNodeId:n,renamingNodeId:r,renamingValue:i,setRenamingValue:o,onSelectNode:s,onStartRename:l,onFinishRename:c,onDeleteNode:f,level:h=0,visited:g})=>{const v=e.nodes[t];if(!v||g.has(t))return null;g.add(t);const E=()=>{c(t,i)},b=(v.choices||[]).map(S=>S.to).concat((v.branch||[]).map(S=>S.to)).concat(v.fallback?[v.fallback]:[]).filter((S,A,C)=>S&&e.nodes[S]&&C.indexOf(S)===A);return I.jsxs("div",{className:"relative",children:[h>0&&I.jsx("div",{className:"absolute top-0 left-[-11px] h-full w-px bg-stone-600"}),h>0&&I.jsx("div",{className:"absolute top-4 left-[-11px] w-3 h-px bg-stone-600"}),I.jsx("div",{className:`pl-${h*4}`,children:I.jsxs("div",{className:`flex items-center justify-between p-2 rounded-md transition-colors group ${n===t?"bg-amber-500":"bg-stone-700 hover:bg-stone-600"}`,children:[r===t?I.jsx("input",{type:"text",value:i,onChange:S=>o(S.target.value),onBlur:E,onKeyDown:S=>S.key==="Enter"&&E(),className:"bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-2 py-1 text-sm w-full",autoFocus:!0}):I.jsx("button",{onClick:()=>s(t),className:`w-full text-left font-mono text-sm ${n===t?"text-stone-900 font-bold":""}`,children:t}),t!=="start"&&r!==t&&I.jsxs("div",{className:"flex items-center opacity-0 group-hover:opacity-100 transition-opacity",children:[I.jsx("button",{onClick:()=>l(t),className:"p-1",children:I.jsx(eIe,{})}),I.jsx("button",{onClick:()=>f(t),className:"p-1",children:I.jsx(wG,{})})]})]})}),I.jsx("div",{className:"mt-1",children:b.map(S=>I.jsx(Px,{nodeId:S,dsl:e,selectedNodeId:n,renamingNodeId:r,renamingValue:i,setRenamingValue:o,onSelectNode:s,onStartRename:l,onFinishRename:c,onDeleteNode:f,level:h+1,visited:g},S))})]})},rIe=()=>{var Ao,xo,jr,ps,Co;const{questId:t}=A4(),e=e0(),[n,r]=P.useState(null),[i,o]=P.useState(null),[s,l]=P.useState("start"),[c,f]=P.useState(!0),[h,g]=P.useState(!1),[v,E]=P.useState(""),[b,S]=P.useState(null),[A,C]=P.useState({}),[D,k]=P.useState(null),[q,$]=P.useState(""),[H,M]=P.useState(null),O=P.useRef(!1),[L,F]=P.useState(!1),[V,G]=P.useState({prompt:"",tone:"Таинственный",keywords:"",wordCount:100}),[z,Se]=P.useState({loading:!1,error:"",text:""}),[Re,te]=P.useState(!1),[me,be]=P.useState([]),[Oe,K]=P.useState(""),[le,ae]=P.useState({loading:!1,error:"",results:[],isOpen:!1}),de=P.useCallback((Z,ce=!1)=>{o(Z),ce||(O.current=!0)},[]);P.useEffect(()=>{if(!t){E("Квест не найден."),f(!1);return}f(!0);const Z=po(Vr,"games",t),ce=Tm(Z,Ie=>{if(Ie.exists()){const _e={id:Ie.id,...Ie.data()};r(_e),O.current||de(JSON.parse(JSON.stringify(_e.dsl)),!0)}else E("Квест не найден.");f(!1)},Ie=>{console.error(Ie),E("Ошибка загрузки квеста."),f(!1)});return()=>ce()},[t,de]),P.useEffect(()=>{M(null),be([]),K("")},[s]);const Le=async()=>{if(!(!t||!i)){g(!0);try{await vm(po(Vr,"games",t),{title:i.meta.title,dsl:i,updatedAt:dl()}),S(new Date),O.current=!1}catch(Z){console.error(Z),alert("Не удалось сохранить изменения.")}finally{g(!1)}}},Be=(Z,ce,Ie)=>{if(!i)return;const _e={...i,nodes:{...i.nodes}};_e.nodes[Z]={..._e.nodes[Z],[ce]:Ie},de(_e)},qe=(Z,ce,Ie,_e)=>{if(!i)return;const Ee={...i,nodes:{...i.nodes}},St=[...Ee.nodes[Z].choices||[]],ut={...St[ce]};_e===void 0||Array.isArray(_e)&&_e.length===0?delete ut[Ie]:ut[Ie]=_e,St[ce]=ut,Ee.nodes[Z]={...Ee.nodes[Z],choices:St},de(Ee)},hn=(Z,ce,Ie)=>{var _e,Ee,St,ut,Ct,Kt,nt,pt,gt;if(i)if(Ie==="__CREATE_NEW__"){const Ze=prompt("Введите ID нового узла (латиницей, без пробелов):");if(Ze&&/^[a-zA-Z0-9_]+$/.test(Ze)){if(i.nodes[Ze]){alert("Узел с таким ID уже существует.");const In=document.getElementById(`choice-to-${ce}`);In&&(In.value=((St=(Ee=(_e=i.nodes[Z])==null?void 0:_e.choices)==null?void 0:Ee[ce])==null?void 0:St.to)||"");return}const at={...i,nodes:{...i.nodes}};at.nodes[Ze]={text:"Новый узел..."};const kt=[...at.nodes[Z].choices||[]];kt[ce]={...kt[ce],to:Ze},at.nodes[Z]={...at.nodes[Z],choices:kt},de(at),l(Ze)}else if(Ze){alert("Неверный формат ID. Используйте только латинские буквы, цифры и подчеркивание.");const at=document.getElementById(`choice-to-${ce}`);at&&(at.value=((Kt=(Ct=(ut=i.nodes[Z])==null?void 0:ut.choices)==null?void 0:Ct[ce])==null?void 0:Kt.to)||"")}else{const at=document.getElementById(`choice-to-${ce}`);at&&(at.value=((gt=(pt=(nt=i.nodes[Z])==null?void 0:nt.choices)==null?void 0:pt[ce])==null?void 0:gt.to)||"")}}else qe(Z,ce,"to",Ie)},wt=Z=>{if(!i)return;const ce={...i,nodes:{...i.nodes}},Ie=[...ce.nodes[Z].choices||[]];Ie.push({label:"",to:""}),ce.nodes[Z]={...ce.nodes[Z],choices:Ie},de(ce)},xe=(Z,ce)=>{if(!i||!window.confirm("Вы уверены, что хотите удалить этот выбор?"))return;const Ie={...i,nodes:{...i.nodes}},_e=[...Ie.nodes[Z].choices||[]];_e.splice(ce,1),Ie.nodes[Z]={...Ie.nodes[Z],choices:_e},de(Ie)},je=()=>{if(!i)return;const Z=prompt("Введите ID нового узла (латиницей, без пробелов):");if(Z&&/^[a-zA-Z0-9_]+$/.test(Z)){if(i.nodes[Z]){alert("Узел с таким ID уже существует.");return}const ce={...i,nodes:{...i.nodes}};ce.nodes[Z]={text:"Новый узел..."},de(ce),l(Z)}else Z&&alert("Неверный формат ID. Используйте только латинские буквы, цифры и подчеркивание.")},Ye=(Z,ce)=>{if(!i||!ce||ce===Z||Z==="start")return;if(!/^[a-zA-Z0-9_]+$/.test(ce)){alert("Неверный формат ID. Используйте только латинские буквы, цифры и подчеркивание.");return}if(i.nodes[ce]){alert("Узел с таким ID уже существует.");return}const Ie=JSON.parse(JSON.stringify(i));Ie.nodes[ce]=Ie.nodes[Z],delete Ie.nodes[Z],Object.values(Ie.nodes).forEach(_e=>{_e.choices&&_e.choices.forEach(Ee=>{Ee.to===Z&&(Ee.to=ce)}),_e.branch&&_e.branch.forEach(Ee=>{Ee.to===Z&&(Ee.to=ce)}),_e.fallback===Z&&(_e.fallback=ce)}),de(Ie),s===Z&&l(ce)},ye=Z=>{k(Z),$(Z)},jt=(Z,ce)=>{ce.trim()&&ce.trim()!==Z&&Ye(Z,ce.trim()),k(null),$("")},tt=Z=>{if(!i||Z==="start"||!window.confirm(`Вы уверены, что хотите удалить узел "${Z}"? Это действие необратимо.`))return;const ce=[];if(Object.entries(i.nodes).forEach(([_e,Ee])=>{if(_e===Z)return;((Ee.choices||[]).some(ut=>ut.to===Z)||(Ee.branch||[]).some(ut=>ut.to===Z)||Ee.fallback===Z)&&ce.push(_e)}),ce.length>0&&!window.confirm(`Внимание! На этот узел ссылаются следующие узлы: ${ce.join(", ")}. Все ссылки будут удалены. Продолжить?`))return;const Ie=JSON.parse(JSON.stringify(i));delete Ie.nodes[Z],Object.values(Ie.nodes).forEach(_e=>{_e.choices&&(_e.choices=_e.choices.map(Ee=>Ee.to===Z?{...Ee,to:""}:Ee)),_e.branch&&(_e.branch=_e.branch.filter(Ee=>Ee.to!==Z)),_e.fallback===Z&&(_e.fallback=void 0)}),s===Z&&l("start"),de(Ie)},Tn=async Z=>{var Ie;if(!i||!t)return;const ce=(Ie=document.getElementById(`image-prompt-${Z}`))==null?void 0:Ie.value;if(!ce){alert("Пожалуйста, введите описание для генерации изображения.");return}C(_e=>({..._e,[Z]:{loading:!0,error:""}}));try{const _e=await WCe(ce),Ee=`${Z}_${Date.now()}`,St=IA(pre,`quests/${t}/images/${Ee}.jpeg`),ut=_e.split(",")[1],Ct=await Qne(St,ut,"base64",{contentType:"image/jpeg"}),Kt=await T6(Ct.ref),nt=JSON.parse(JSON.stringify(i));nt.assets.images||(nt.assets.images={}),nt.assets.images[Ee]=Kt,nt.nodes[Z].bg=Ee,de(nt),C(pt=>({...pt,[Z]:{loading:!1,error:""}}))}catch(_e){let Ee=_e.message||"Ошибка генерации или загрузки";_e instanceof Il.FirebaseError&&_e.code==="storage/unauthorized"&&(Ee="Ошибка прав доступа. Проверьте правила безопасности Firebase Storage."),C(St=>({...St,[Z]:{loading:!1,error:Ee}}))}},Cn=(Z,ce)=>{var St;if(!((St=bt==null?void 0:bt.choices)==null?void 0:St[Z])||!i)return;const _e=JSON.parse(JSON.stringify(i)),Ee=_e.nodes[s].choices[Z];Ee.when||(Ee.when={}),Ee.when[ce]||(Ee.when[ce]=[]),Ee.when[ce].push({key:"",value:""}),de(_e)},ln=(Z,ce,Ie,_e)=>{if(!i)return;const Ee=JSON.parse(JSON.stringify(i)),St=Ee.nodes[s].choices[Z];_e!==void 0&&(St.when[ce][_e]=Ie),de(Ee)},_a=(Z,ce,Ie)=>{if(!i)return;const _e=JSON.parse(JSON.stringify(i)),Ee=_e.nodes[s].choices[Z];Ee.when&&(Ie!==void 0&&Ee.when[ce]&&(Ee.when[ce].splice(Ie,1),Ee.when[ce].length===0&&delete Ee.when[ce]),Object.keys(Ee.when).length===0&&delete Ee.when,de(_e))},Ta=(Z,ce)=>{if(!i)return;const Ie=JSON.parse(JSON.stringify(i)),_e=Ie.nodes[s].choices[Z];_e.effects||(_e.effects=[]);let Ee={};ce==="set"?Ee={set:[{key:"",value:""}]}:ce==="add"?Ee={add:[{key:"",value:0}]}:ce==="inv_add"?Ee={inv_add:""}:ce==="inv_remove"&&(Ee={inv_remove:""}),_e.effects.push(Ee),de(Ie)},bo=(Z,ce,Ie)=>{if(!i)return;const _e=JSON.parse(JSON.stringify(i)),Ee=_e.nodes[s].choices[Z];Ee.effects&&(Ee.effects[ce]=Ie),de(_e)},So=(Z,ce)=>{if(!i||!window.confirm("Удалить этот эффект?"))return;const Ie=JSON.parse(JSON.stringify(i)),_e=Ie.nodes[s].choices[Z];_e.effects&&(_e.effects.splice(ce,1),_e.effects.length===0&&delete _e.effects),de(Ie)},Xd=()=>{bt&&(Se({loading:!1,error:"",text:""}),G(Z=>({...Z,prompt:bt.text||""})),F(!0))},Ea=async Z=>{Z.preventDefault(),Se({loading:!0,error:"",text:""});try{const ce=await YCe(V);Se({loading:!1,error:"",text:ce})}catch(ce){Se({loading:!1,error:ce.message,text:""})}},$l=()=>{z.text&&(Be(s,"text",z.text),F(!1))},Ec=async()=>{if(!(!bt||typeof bt.text!="string")){te(!0),be([]),K("");try{const Z=await JCe(bt.text);be(Z)}catch(Z){K(Z.message)}finally{te(!1)}}},en=Z=>{if(!i||!s)return;const ce=JSON.parse(JSON.stringify(i)),Ie=ce.nodes[s];Ie.choices||(Ie.choices=[]),Ie.choices.push({label:Z,to:""}),de(ce),be(_e=>_e.filter(Ee=>Ee!==Z))},_t=async()=>{if(i){ae({loading:!0,error:"",results:[],isOpen:!0});try{const Z=await XCe(i);ae({loading:!1,error:"",results:Z,isOpen:!0})}catch(Z){ae({loading:!1,error:Z.message,results:[],isOpen:!0})}}},Pr=(Z,ce)=>{var Ie,_e;if(i)try{const Ee=JSON.parse(JSON.stringify(i));let St=!1;const ut=Ee.nodes[Z.nodeId];if(!ut)throw new Error(`Node with id '${Z.nodeId}' not found.`);switch(ce.action){case"CREATE_NODE":if(ce.details.newNodeId&&!Ee.nodes[ce.details.newNodeId]&&ce.details.generatedText&&(Ee.nodes[ce.details.newNodeId]={text:ce.details.generatedText},ut.choices)){let Ct=ce.details.choiceIndex;if(Ct===void 0&&((Ie=Z.details)!=null&&Ie.choiceLabel)&&(Ct=ut.choices.findIndex(Kt=>Kt.label===Z.details.choiceLabel)),Ct!==void 0&&Ct>-1){const Kt=ut.choices[Ct];Kt&&(Kt.to=ce.details.newNodeId,St=!0)}}break;case"DELETE_CHOICE":if(ut.choices){let Ct=ce.details.choiceIndex;Ct===void 0&&((_e=Z.details)!=null&&_e.choiceLabel)&&(Ct=ut.choices.findIndex(Kt=>Kt.label===Z.details.choiceLabel)),Ct!==void 0&&Ct>-1&&ut.choices[Ct]&&(ut.choices.splice(Ct,1),St=!0)}break;case"DELETE_NODE":Ee.nodes[Z.nodeId]&&Z.nodeId!=="start"&&(delete Ee.nodes[Z.nodeId],St=!0);break}St?(de(Ee),ae(Ct=>({...Ct,results:Ct.results.filter(Kt=>Kt!==Z)}))):alert("Не удалось применить исправление (возможно, данные устарели).")}catch(Ee){alert(`Ошибка при применении исправления: ${Ee.message}`)}};if(c)return I.jsx("div",{className:"text-center p-8 font-display text-2xl text-stone-400 animate-pulse",children:"ЗАГРУЗКА РЕДАКТОРА..."});if(v)return I.jsx("div",{className:"text-center p-8 text-2xl text-red-500",children:v});if(!n||!i)return null;const bt=i.nodes[s],wa=new Set,ba=Object.keys(i.nodes),to=ba.includes("start")?"start":ba[0]||null;return I.jsxs("div",{className:"container mx-auto py-8 px-4",children:[I.jsxs("div",{className:"flex justify-between items-center mb-6",children:[I.jsxs("div",{className:"flex items-center gap-4 flex-grow min-w-0",children:[I.jsx("button",{onClick:()=>e("/admin"),className:"bg-stone-700 hover:bg-stone-600 text-stone-200 font-semibold py-2 px-4 rounded-md transition-colors flex-shrink-0",children:"← Назад"}),I.jsx("input",{type:"text",value:i.meta.title,onChange:Z=>de({...i,meta:{...i.meta,title:Z.target.value}}),className:"font-display text-4xl text-stone-200 bg-transparent border-0 focus:ring-2 focus:ring-amber-500 rounded-md p-1 truncate"})]}),I.jsxs("div",{className:"flex items-center gap-4 flex-shrink-0",children:[b&&I.jsxs("span",{className:"text-sm text-stone-400",children:["Сохранено: ",b.toLocaleTimeString()]}),I.jsxs("button",{onClick:_t,disabled:le.loading,className:"flex items-center justify-center font-display text-xl bg-teal-600 text-white py-2 px-6 rounded-md hover:bg-teal-500 transition-colors disabled:bg-stone-600",children:[I.jsx(d4,{})," ",le.loading?"АНАЛИЗ...":"Проверить сценарий"]}),I.jsxs("button",{onClick:Le,disabled:h,className:"flex items-center justify-center font-display text-xl bg-amber-500 text-stone-900 py-2 px-6 rounded-md hover:bg-amber-400 transition-colors disabled:bg-stone-600 disabled:cursor-not-allowed",children:[I.jsx(ZCe,{})," ",h?"СОХРАНЕНИЕ...":"СОХРАНИТЬ"]})]})]}),I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[I.jsxs("div",{className:"md:col-span-1 bg-stone-800/50 border border-stone-700 p-4 rounded-md flex flex-col h-full max-h-[75vh]",children:[I.jsx("h3",{className:"font-display text-2xl text-amber-400 mb-4 flex-shrink-0",children:"Узлы Сценария"}),I.jsxs("div",{className:"flex-grow overflow-y-auto space-y-1 pr-2",children:[to&&i.nodes[to]&&I.jsx(Px,{nodeId:to,dsl:i,selectedNodeId:s,onSelectNode:l,onStartRename:ye,onFinishRename:jt,onDeleteNode:tt,renamingNodeId:D,renamingValue:q,setRenamingValue:$,visited:wa}),ba.filter(Z=>!wa.has(Z)).map(Z=>I.jsx(Px,{nodeId:Z,dsl:i,selectedNodeId:s,onSelectNode:l,onStartRename:ye,onFinishRename:jt,onDeleteNode:tt,renamingNodeId:D,renamingValue:q,setRenamingValue:$,visited:wa},Z))]}),I.jsxs("button",{onClick:je,className:"mt-4 w-full flex items-center justify-center bg-stone-600 hover:bg-stone-500 text-stone-200 font-semibold py-2 px-4 rounded-md transition-colors flex-shrink-0",children:[I.jsx(tIe,{})," Создать узел"]})]}),I.jsx("div",{className:"md:col-span-3 bg-stone-800/50 border border-stone-700 p-6 rounded-md space-y-6 max-h-[75vh] overflow-y-auto",children:bt?I.jsxs("div",{children:[I.jsxs("h3",{className:"font-display text-3xl text-stone-100 mb-4 border-b-2 border-amber-500 pb-2",children:["Узел: ",I.jsx("span",{className:"text-amber-400",children:s})]}),I.jsxs("div",{children:[I.jsxs("div",{className:"flex justify-between items-center mb-1",children:[I.jsx("label",{htmlFor:"nodeText",className:"text-sm font-bold text-stone-400 block",children:"Текст узла:"}),I.jsxs("button",{onClick:Xd,className:"flex items-center gap-1.5 text-sm bg-sky-600 hover:bg-sky-500 text-white font-semibold py-1 px-3 rounded-md transition-colors",children:[I.jsx(Ep,{})," Сгенерировать с AI"]})]}),I.jsx("textarea",{id:"nodeText",value:bt.text,onChange:Z=>Be(s,"text",Z.target.value),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all h-40 resize-y"})]}),I.jsxs("div",{className:"space-y-2",children:[I.jsx("label",{className:"text-sm font-bold text-stone-400 block",children:"Фоновое изображение (AI):"}),I.jsxs("div",{className:"aspect-video bg-stone-900 rounded-md overflow-hidden relative flex items-center justify-center",children:[i.assets.images[bt.bg||""]?I.jsx("img",{src:i.assets.images[bt.bg||""],alt:"Generated background",className:"w-full h-full object-cover"}):I.jsx("span",{className:"text-stone-500",children:"Нет изображения"}),((Ao=A[s])==null?void 0:Ao.loading)&&I.jsx("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center",children:I.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-500"})})]}),I.jsxs("div",{className:"flex gap-2",children:[I.jsx("input",{id:`image-prompt-${s}`,type:"text",placeholder:"Опишите сцену... (на английском)",className:"flex-grow bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),I.jsxs("button",{onClick:()=>Tn(s),disabled:(xo=A[s])==null?void 0:xo.loading,className:"flex items-center justify-center font-display text-lg bg-sky-600 text-white py-2 px-4 rounded-md hover:bg-sky-500 transition-colors disabled:bg-stone-600",children:[I.jsx(Ep,{})," ",(jr=A[s])!=null&&jr.loading?"Генерация...":"Создать"]})]}),((ps=A[s])==null?void 0:ps.error)&&I.jsx("p",{className:"text-red-500 text-sm mt-1",children:(Co=A[s])==null?void 0:Co.error})]}),I.jsxs("div",{children:[I.jsxs("div",{className:"flex justify-between items-center mt-6 mb-2",children:[I.jsx("h4",{className:"text-lg font-bold text-stone-300",children:"Выборы:"}),I.jsxs("button",{onClick:Ec,disabled:Re,className:"flex items-center gap-1.5 text-sm bg-sky-600 hover:bg-sky-500 text-white font-semibold py-1 px-3 rounded-md transition-colors disabled:bg-stone-600 disabled:cursor-not-allowed",children:[I.jsx(Ep,{})," ",Re?"Думаю...":"Предложить выборы"]})]}),Oe&&I.jsx("p",{className:"text-red-500 text-sm my-2",children:Oe}),me.length>0&&I.jsxs("div",{className:"p-2 bg-stone-900/50 rounded-md mb-2",children:[I.jsx("p",{className:"text-xs text-stone-400 mb-2",children:"Нажмите, чтобы добавить вариант:"}),I.jsx("div",{className:"flex flex-wrap gap-2",children:me.map((Z,ce)=>I.jsxs("button",{onClick:()=>en(Z),className:"bg-sky-800 text-sky-200 text-sm px-3 py-1 rounded-full hover:bg-sky-700 transition-colors",children:['+ "',Z,'"']},ce))})]}),I.jsxs("div",{className:"space-y-2",children:[(bt.choices||[]).map((Z,ce)=>{var Ie,_e,Ee,St,ut,Ct,Kt;return I.jsxs("div",{className:"bg-stone-900/50 p-3 rounded-md transition-all",children:[I.jsxs("div",{className:"flex gap-2 items-center",children:[I.jsx("input",{type:"text",value:Z.label,onChange:nt=>qe(s,ce,"label",nt.target.value),placeholder:"Текст выбора",className:"flex-grow bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 focus:ring-1 focus:ring-amber-500 outline-none"}),I.jsx("span",{className:"text-stone-400",children:"→"}),I.jsxs("select",{id:`choice-to-${ce}`,value:Z.to||"",onChange:nt=>hn(s,ce,nt.target.value),className:"w-48 bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 focus:ring-1 focus:ring-amber-500 outline-none",children:[I.jsx("option",{value:"",disabled:!0,children:"Выберите узел..."}),I.jsx("option",{value:"__CREATE_NEW__",className:"text-sky-400 font-semibold",children:"[ Создать новый узел... ]"}),ba.map(nt=>I.jsx("option",{value:nt,children:nt},nt))]}),I.jsx("button",{onClick:()=>M(H===ce?null:ce),title:"Условия и эффекты",children:I.jsx(nIe,{})}),I.jsx("button",{onClick:()=>xe(s,ce),title:"Удалить выбор",children:I.jsx(wG,{})})]}),H===ce&&I.jsxs("div",{className:"mt-3 space-y-4 border-t border-stone-700 pt-3",children:[I.jsxs("div",{children:[I.jsx("h5",{className:"text-sm font-bold text-stone-400 mb-2",children:"Условия видимости"}),I.jsxs("div",{className:"space-y-2",children:[I.jsxs("div",{className:"flex items-center gap-2 bg-stone-800 p-2 rounded",children:[I.jsxs("select",{value:(Ie=Z.when)!=null&&Ie.has_item?"has_item":(_e=Z.when)!=null&&_e.missing_item?"missing_item":"none",onChange:nt=>{const pt=nt.target.value,gt={...Z.when};delete gt.has_item,delete gt.missing_item,pt!=="none"&&(gt[pt]=""),qe(s,ce,"when",gt)},className:"bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm outline-none",children:[I.jsx("option",{value:"none",children:"Инвентарь: нет"}),I.jsx("option",{value:"has_item",children:"Инвентарь: Есть"}),I.jsx("option",{value:"missing_item",children:"Инвентарь: Нет"})]}),(((Ee=Z.when)==null?void 0:Ee.has_item)!==void 0||((St=Z.when)==null?void 0:St.missing_item)!==void 0)&&I.jsx("input",{type:"text",value:((ut=Z.when)==null?void 0:ut.has_item)||((Ct=Z.when)==null?void 0:Ct.missing_item)||"",onChange:nt=>{const pt={...Z.when};pt.has_item!==void 0&&(pt.has_item=nt.target.value),pt.missing_item!==void 0&&(pt.missing_item=nt.target.value),qe(s,ce,"when",pt)},placeholder:"item_id",className:"flex-grow bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm outline-none"})]}),(((Kt=Z.when)==null?void 0:Kt.var_eq)||[]).map((nt,pt)=>I.jsxs("div",{className:"flex items-center gap-2 bg-stone-800 p-2 rounded",children:[I.jsx("span",{className:"text-sm text-stone-300 font-semibold",children:"Переменная ="}),I.jsx("input",{type:"text",value:nt.key,onChange:gt=>ln(ce,"var_eq",{...nt,key:gt.target.value},pt),placeholder:"variable",className:"w-24 bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm outline-none"}),I.jsx("input",{type:"text",value:nt.value,onChange:gt=>ln(ce,"var_eq",{...nt,value:gt.target.value},pt),placeholder:"value",className:"w-24 bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm outline-none"}),I.jsx("button",{onClick:()=>_a(ce,"var_eq",pt),className:"text-stone-500 hover:text-red-400",children:I.jsx(LS,{})})]},`var_eq_${pt}`)),I.jsx("button",{onClick:()=>Cn(ce,"var_eq"),className:"text-sky-400 hover:text-sky-300 text-sm font-semibold",children:"+ Добавить 'Переменная ='"})]})]}),I.jsxs("div",{children:[I.jsx("h5",{className:"text-sm font-bold text-stone-400 mb-2 mt-4",children:"Эффекты при выборе"}),I.jsx("div",{className:"space-y-2",children:(Z.effects||[]).map((nt,pt)=>{const gt=Object.keys(nt)[0];if(gt==="set"||gt==="add"){const Ze=nt[gt]||[];return Ze.map((at,kt)=>I.jsxs("div",{className:"flex items-center gap-2 bg-stone-800 p-2 rounded",children:[I.jsx("span",{className:"text-sm text-stone-300 font-semibold",children:gt==="set"?"Установить":"Добавить к"}),I.jsx("input",{type:"text",value:at.key,placeholder:"variable",className:"w-24 bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm",onChange:In=>{const no=[...Ze];no[kt]={...at,key:In.target.value},bo(ce,pt,{[gt]:no})}}),I.jsx("input",{type:gt==="add"?"number":"text",value:at.value,placeholder:"value",className:"w-24 bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm",onChange:In=>{const no=[...Ze],Zd=gt==="add"?Number(In.target.value):In.target.value;no[kt]={...at,value:Zd},bo(ce,pt,{[gt]:no})}}),I.jsx("button",{onClick:()=>So(ce,pt),className:"text-stone-500 hover:text-red-400",children:I.jsx(LS,{})})]},`${gt}_${kt}`))}return gt==="inv_add"||gt==="inv_remove"?I.jsxs("div",{className:"flex items-center gap-2 bg-stone-800 p-2 rounded",children:[I.jsx("span",{className:"text-sm text-stone-300 font-semibold",children:gt==="inv_add"?"Добавить предмет":"Удалить предмет"}),I.jsx("input",{type:"text",value:nt[gt],placeholder:"item_id",className:"flex-grow bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm",onChange:Ze=>bo(ce,pt,{[gt]:Ze.target.value})}),I.jsx("button",{onClick:()=>So(ce,pt),className:"text-stone-500 hover:text-red-400",children:I.jsx(LS,{})})]},gt):null})}),I.jsxs("div",{className:"flex gap-4 mt-2",children:[I.jsx("button",{onClick:()=>Ta(ce,"set"),className:"text-sky-400 hover:text-sky-300 text-sm font-semibold",children:"+ Установить переменную"}),I.jsx("button",{onClick:()=>Ta(ce,"inv_add"),className:"text-sky-400 hover:text-sky-300 text-sm font-semibold",children:"+ Добавить предмет"})]})]})]})]},ce)}),I.jsx("button",{onClick:()=>wt(s),className:"w-full text-stone-300 hover:bg-stone-700 p-2 rounded-md transition-colors text-sm font-semibold",children:"+ Добавить выбор"})]})]})]}):I.jsx("p",{className:"text-stone-400",children:"Выберите узел для редактирования"})})]}),L&&I.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",onClick:()=>F(!1),role:"dialog","aria-modal":"true",children:I.jsxs("div",{className:"bg-stone-800 border border-stone-700 rounded-lg w-full max-w-2xl max-h-[90vh] flex flex-col",onClick:Z=>Z.stopPropagation(),children:[I.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-stone-700",children:[I.jsxs("h3",{className:"font-display text-2xl text-amber-400 flex items-center gap-2",children:[I.jsx(Ep,{})," AI-Ассистент Сценариста"]}),I.jsx("button",{onClick:()=>F(!1),className:"text-stone-400 hover:text-white text-3xl leading-none","aria-label":"Close",children:"×"})]}),I.jsxs("form",{onSubmit:Ea,className:"p-6 space-y-4 overflow-y-auto",children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:"ai-prompt",className:"text-sm font-bold text-stone-400 block mb-1",children:"Основная идея сцены:"}),I.jsx("textarea",{id:"ai-prompt",value:V.prompt,onChange:Z=>G({...V,prompt:Z.target.value}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all h-32 resize-y",placeholder:"Напр.: Герой входит в таверну, где за столом сидит загадочный незнакомец...",required:!0})]}),I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:"ai-tone",className:"text-sm font-bold text-stone-400 block mb-1",children:"Тон / Атмосфера:"}),I.jsxs("select",{id:"ai-tone",value:V.tone,onChange:Z=>G({...V,tone:Z.target.value}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",children:[I.jsx("option",{children:"Таинственный"}),I.jsx("option",{children:"Напряженный"}),I.jsx("option",{children:"Юмористический"}),I.jsx("option",{children:"Эпический"}),I.jsx("option",{children:"Мрачный"}),I.jsx("option",{children:"Спокойный"})]})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"ai-keywords",className:"text-sm font-bold text-stone-400 block mb-1",children:"Ключевые детали (через запятую):"}),I.jsx("input",{id:"ai-keywords",type:"text",value:V.keywords,onChange:Z=>G({...V,keywords:Z.target.value}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",placeholder:"Напр.: камин, старая карта, шрам"})]})]}),I.jsxs("div",{children:[I.jsxs("label",{htmlFor:"ai-word-count",className:"text-sm font-bold text-stone-400 block mb-1",children:["Примерная длина текста: ",I.jsxs("span",{className:"font-mono text-amber-400",children:[V.wordCount," слов"]})]}),I.jsx("input",{id:"ai-word-count",type:"range",min:"30",max:"300",step:"10",value:V.wordCount,onChange:Z=>G({...V,wordCount:parseInt(Z.target.value,10)}),className:"w-full h-2 bg-stone-700 rounded-lg appearance-none cursor-pointer accent-amber-500"})]}),I.jsxs("button",{type:"submit",disabled:z.loading,className:"w-full flex items-center justify-center font-display text-xl bg-sky-600 text-white py-2 px-6 rounded-md hover:bg-sky-500 transition-colors disabled:bg-stone-600 disabled:cursor-not-allowed",children:[I.jsx(Ep,{})," ",z.loading?"ГЕНЕРАЦИЯ...":"СГЕНЕРИРОВАТЬ ТЕКСТ"]}),z.error&&I.jsx("p",{className:"text-red-500 text-center text-sm",children:z.error}),z.text&&I.jsxs("div",{className:"space-y-3 pt-4 border-t border-stone-700",children:[I.jsx("h4",{className:"text-sm font-bold text-stone-400 block",children:"Результат:"}),I.jsx("div",{className:"bg-stone-900 p-4 rounded-md text-stone-300 whitespace-pre-wrap max-h-48 overflow-y-auto",children:z.text}),I.jsx("button",{type:"button",onClick:$l,className:"w-full font-display text-xl bg-amber-500 text-stone-900 py-2 rounded-md hover:bg-amber-400 transition-colors",children:"Вставить в редактор"})]})]})]})}),le.isOpen&&I.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",onClick:()=>ae(Z=>({...Z,isOpen:!1})),role:"dialog","aria-modal":"true",children:I.jsxs("div",{className:"bg-stone-800 border border-stone-700 rounded-lg w-full max-w-3xl max-h-[90vh] flex flex-col",onClick:Z=>Z.stopPropagation(),children:[I.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-stone-700",children:[I.jsxs("h3",{className:"font-display text-2xl text-amber-400 flex items-center gap-2",children:[I.jsx(d4,{})," AI-Отладчик Сценария"]}),I.jsx("button",{onClick:()=>ae(Z=>({...Z,isOpen:!1})),className:"text-stone-400 hover:text-white text-3xl leading-none","aria-label":"Close",children:"×"})]}),I.jsxs("div",{className:"p-6 overflow-y-auto space-y-4",children:[le.loading&&I.jsx("p",{className:"animate-pulse text-center py-8 font-display text-xl text-stone-400",children:"АНАЛИЗ СЦЕНАРИЯ..."}),le.error&&I.jsx("p",{className:"text-red-500 text-center py-8",children:le.error}),!le.loading&&!le.error&&le.results.length===0&&I.jsx("p",{className:"text-green-400 text-center py-8 font-semibold",children:"Анализ завершен. Критических ошибок не найдено!"}),le.results.map((Z,ce)=>{var Ie;return I.jsxs("div",{className:"bg-stone-900/50 p-4 rounded-md border border-stone-700",children:[I.jsxs("p",{className:"font-bold text-red-400",children:["Проблема: ",I.jsx("span",{className:"text-stone-300",children:Z.description})]}),I.jsxs("p",{className:"text-sm text-stone-400",children:["В узле: ",I.jsx("button",{onClick:()=>l(Z.nodeId),className:"font-mono text-amber-400 hover:underline",children:Z.nodeId})]}),((Ie=Z.details)==null?void 0:Ie.choiceLabel)&&I.jsxs("p",{className:"text-sm text-stone-400",children:['Выбор: "',Z.details.choiceLabel,'"']}),I.jsx("div",{className:"mt-3 pt-3 border-t border-stone-600 flex flex-wrap gap-2",children:Z.suggestions.map((_e,Ee)=>I.jsx("button",{onClick:()=>Pr(Z,_e),className:"bg-sky-700 hover:bg-sky-600 text-white text-sm font-semibold py-1 px-3 rounded-md transition-colors",children:_e.label},Ee))})]},ce)})]})]})})]})},h4=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),iIe=()=>{const t=e0(),[e,n]=P.useState({prompt:"",keywords:"",nodesCount:"5-7"}),[r,i]=P.useState("Киберпанк-нуар"),[o,s]=P.useState(""),[l,c]=P.useState(!1),[f,h]=P.useState("easy"),[g,v]=P.useState({loading:!1,error:""}),E=A=>{const{name:C,value:D}=A.target;n(k=>({...k,[C]:D}))},b=A=>{i(A.target.value)},S=async A=>{A.preventDefault();const C=r==="__CUSTOM__"?o:r;if(!C.trim()){v({loading:!1,error:"Пожалуйста, укажите жанр."});return}v({loading:!0,error:""});try{const D={...e,genre:C,addLogic:l,complexity:f},k=await QCe(D),q=`AI: ${e.prompt.substring(0,30)}...`,H={format:"bk-quest@1",meta:{id:`quest_ai_${Date.now()}`,title:q,version:1,defaultLocale:"ru"},assets:{images:{},audio:{}},state:{vars:{},inventory:[]},nodes:k},M=await _m(Yo(Vr,"games"),{title:q,status:"draft",createdAt:dl(),updatedAt:dl(),dsl:H});t(`/admin/quest/${M.id}`)}catch(D){v({loading:!1,error:D.message})}};return I.jsxs("div",{className:"container mx-auto py-8 px-4",children:[I.jsx("div",{className:"flex items-center mb-6",children:I.jsx("button",{onClick:()=>t("/admin"),className:"bg-stone-700 hover:bg-stone-600 text-stone-200 font-semibold py-2 px-4 rounded-md transition-colors flex-shrink-0",children:"← Назад"})}),I.jsxs("div",{className:"max-w-4xl mx-auto bg-stone-800/50 border border-stone-700 p-8 rounded-md",children:[I.jsxs("h2",{className:"font-display text-4xl text-amber-400 mb-2 flex items-center",children:[I.jsx(h4,{}),"AI-Архитектор Квестов"]}),I.jsx("p",{className:"text-stone-400 mb-6",children:"Опишите вашу идею, и AI создаст базовую структуру сценария, которую вы сможете доработать в редакторе."}),I.jsxs("form",{onSubmit:S,className:"space-y-6",children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:"prompt",className:"text-sm font-bold text-stone-300 block mb-2",children:"Основная завязка сюжета:"}),I.jsx("textarea",{id:"prompt",name:"prompt",value:e.prompt,onChange:E,className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all h-32 resize-y",placeholder:"Напр.: Детектив в киберпанк-городе расследует исчезновение ученого. Квест начинается в его мрачном офисе...",required:!0})]}),I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:"genre",className:"text-sm font-bold text-stone-300 block mb-2",children:"Жанр / Сеттинг:"}),I.jsxs("select",{id:"genre",name:"genre",value:r,onChange:b,className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",children:[I.jsx("option",{children:"Киберпанк-нуар"}),I.jsx("option",{children:"Темное фэнтези"}),I.jsx("option",{children:"Научная фантастика"}),I.jsx("option",{children:"Космический хоррор"}),I.jsx("option",{children:"Мистический триллер"}),I.jsx("option",{children:"Детектив"}),I.jsx("option",{children:"Постапокалипсис"}),I.jsx("option",{children:"Выживание"}),I.jsx("option",{children:"Приключение"}),I.jsx("option",{value:"__CUSTOM__",children:"Свой вариант..."})]})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"keywords",className:"text-sm font-bold text-stone-300 block mb-2",children:"Ключевые элементы (через запятую):"}),I.jsx("input",{id:"keywords",name:"keywords",type:"text",value:e.keywords,onChange:E,className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",placeholder:"Напр.: импланты, корпорация, дождь"})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"nodesCount",className:"text-sm font-bold text-stone-300 block mb-2",children:"Примерное кол-во узлов:"}),I.jsx("input",{id:"nodesCount",name:"nodesCount",type:"text",value:e.nodesCount,onChange:E,className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",placeholder:"Напр.: 5-7"})]})]}),r==="__CUSTOM__"&&I.jsxs("div",{children:[I.jsx("label",{htmlFor:"customGenre",className:"text-sm font-bold text-stone-300 block mb-2",children:"Ваш собственный жанр:"}),I.jsx("input",{id:"customGenre",name:"customGenre",type:"text",value:o,onChange:A=>s(A.target.value),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",placeholder:"Напр.: Подводное стимпанк-королевство грибов",required:!0})]}),I.jsxs("div",{className:"space-y-4 pt-4 border-t border-stone-600",children:[I.jsxs("label",{htmlFor:"addLogic",className:"flex items-center cursor-pointer",children:[I.jsx("input",{type:"checkbox",id:"addLogic",checked:l,onChange:A=>c(A.target.checked),className:"h-5 w-5 rounded border-stone-500 bg-stone-700 text-sky-500 focus:ring-sky-600"}),I.jsx("span",{className:"ml-3 text-stone-300 font-semibold",children:"Добавить игровую логику (предметы, условия, эффекты)"})]}),l&&I.jsxs("div",{className:"pl-8",children:[I.jsx("label",{htmlFor:"complexity",className:"text-sm font-bold text-stone-300 block mb-2",children:"Сложность логики:"}),I.jsxs("select",{id:"complexity",name:"complexity",value:f,onChange:A=>h(A.target.value),className:"w-full md:w-1/2 bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",children:[I.jsx("option",{value:"easy",children:"Легко"}),I.jsx("option",{value:"medium",children:"Средне"}),I.jsx("option",{value:"hard",children:"Сложно"})]})]})]}),I.jsx("div",{className:"pt-4 border-t border-stone-700",children:I.jsxs("button",{type:"submit",disabled:g.loading,className:"w-full flex items-center justify-center font-display text-2xl bg-sky-600 text-white py-3 px-6 rounded-md hover:bg-sky-500 transition-colors disabled:bg-stone-600 disabled:cursor-not-allowed",children:[I.jsx(h4,{}),g.loading?"СОЗДАНИЕ СЦЕНАРИЯ...":"СГЕНЕРИРОВАТЬ КВЕСТ"]})}),g.error&&I.jsx("p",{className:"text-red-500 text-center text-sm",children:g.error})]})]})]})},oIe=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{fillRule:"evenodd",d:"M10 2a4 4 0 00-4 4v4H4a2 2 0 00-2 2v6a2 2 0 002 2h12a2 2 0 002-2v-6a2 2 0 00-2-2h-2V6a4 4 0 00-4-4zm-2 6V6a2 2 0 114 0v4H8z",clipRule:"evenodd"})}),p4=()=>{const[t,e]=P.useState(""),[n,r]=P.useState(""),[i,o]=P.useState(""),s=async l=>{l.preventDefault(),o("");try{await kF(Wp,t,n)}catch(c){o("Ошибка входа. Проверьте почту и пароль."),console.error(c)}};return I.jsx("div",{className:"flex flex-col items-center justify-center min-h-[60vh]",children:I.jsxs("div",{className:"w-full max-w-sm p-8 bg-stone-800/50 border border-stone-700 rounded-md shadow-lg",children:[I.jsx("h2",{className:"font-display text-3xl text-center text-stone-200 mb-6 tracking-wider",children:"ВХОД В ПАНЕЛЬ"}),I.jsxs("form",{onSubmit:s,className:"space-y-4",children:[I.jsx("input",{type:"email",value:t,onChange:l=>e(l.target.value),placeholder:"Email",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all","aria-label":"Email",required:!0}),I.jsx("input",{type:"password",value:n,onChange:l=>r(l.target.value),placeholder:"Пароль",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all","aria-label":"Password",required:!0}),I.jsxs("button",{type:"submit",className:"w-full flex items-center justify-center font-display text-xl bg-amber-500 text-stone-900 py-2 rounded-md hover:bg-amber-400 transition-colors",children:[I.jsx(oIe,{}),"ВОЙТИ"]}),i&&I.jsx("p",{className:"text-red-500 text-center text-sm mt-4",children:i})]})]})})},sIe=()=>I.jsx("header",{className:"bg-black/50 border-b-2 border-amber-500/50 p-4 sticky top-0 z-20 backdrop-blur-sm",children:I.jsxs("div",{className:"container mx-auto text-center",children:[I.jsx("a",{href:"/#",className:"font-display text-4xl md:text-5xl text-amber-400 tracking-widest no-underline",children:"B_KOMHATE"}),I.jsx("p",{className:"text-stone-400 text-sm tracking-wider",children:"QUEST & CODEWORD PLATFORM"})]})}),m4=()=>I.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] text-center p-4",children:[I.jsx("h2",{className:"font-display text-6xl text-red-500",children:"404"}),I.jsx("p",{className:"text-stone-300 text-xl mt-2",children:"Страница не найдена."}),I.jsx("a",{href:"/#/admin",className:"text-amber-400 hover:text-amber-300 mt-4",children:"Перейти в панель управления"})]}),aIe=()=>{const{currentUser:t,loading:e}=mre(),n=ds();if(e)return I.jsx("div",{className:"flex items-center justify-center min-h-[80vh]",children:I.jsx("p",{className:"font-display text-2xl text-stone-400 animate-pulse",children:"ИНИЦИАЛИЗАЦИЯ СИСТЕМЫ..."})});if(t)return I.jsxs(LM,{children:[I.jsx(Jr,{path:"/admin",element:I.jsx(y_e,{})}),I.jsx(Jr,{path:"/admin/quest/:questId",element:I.jsx(rIe,{})}),I.jsx(Jr,{path:"/admin/architect",element:I.jsx(iIe,{})})," ",I.jsx(Jr,{path:"/",element:I.jsx(OM,{to:"/admin",replace:!0})}),I.jsx(Jr,{path:"/view",element:I.jsx(HV,{})}),I.jsx(Jr,{path:"/play/:questId",element:I.jsx(vx,{})}),I.jsx(Jr,{path:"*",element:I.jsx(m4,{})})]});const r=n.pathname.startsWith("/admin");return I.jsxs(LM,{children:[I.jsx(Jr,{path:"/view",element:I.jsx(HV,{})}),I.jsx(Jr,{path:"/play/:questId",element:I.jsx(vx,{})}),r&&I.jsx(Jr,{path:"/admin/*",element:I.jsx(p4,{})}),I.jsx(Jr,{path:"/admin",element:I.jsx(p4,{})}),I.jsx(Jr,{path:"/",element:I.jsx(OM,{to:"/admin",replace:!0})}),I.jsx(Jr,{path:"*",element:I.jsx(m4,{})})]})},lIe=()=>I.jsx("div",{className:"min-h-screen",children:I.jsx(gre,{children:I.jsxs(_7,{children:[I.jsx(sIe,{}),I.jsx("main",{children:I.jsx(aIe,{})})]})})}),bG=document.getElementById("root");if(!bG)throw new Error("Could not find root element to mount to");const uIe=a8.createRoot(bG);uIe.render(I.jsx(g4.StrictMode,{children:I.jsx(lIe,{})}));
