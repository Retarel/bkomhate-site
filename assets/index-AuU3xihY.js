(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();function R0(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Nd={exports:{}},El={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U_;function wb(){if(U_)return El;U_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,l,c){var f=null;if(c!==void 0&&(f=""+c),l.key!==void 0&&(f=""+l.key),"key"in l){c={};for(var g in l)g!=="key"&&(c[g]=l[g])}else c=l;return l=c.ref,{$$typeof:r,type:s,key:f,ref:l!==void 0?l:null,props:c}}return El.Fragment=t,El.jsx=n,El.jsxs=n,El}var L_;function Rb(){return L_||(L_=1,Nd.exports=wb()),Nd.exports}var x=Rb(),Dd={exports:{}},Rt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j_;function Ib(){if(j_)return Rt;j_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),w=Symbol.iterator;function R(V){return V===null||typeof V!="object"?null:(V=w&&V[w]||V["@@iterator"],typeof V=="function"?V:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,et={};function Z(V,W,st){this.props=V,this.context=W,this.refs=et,this.updater=st||q}Z.prototype.isReactComponent={},Z.prototype.setState=function(V,W){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,W,"setState")},Z.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function lt(){}lt.prototype=Z.prototype;function J(V,W,st){this.props=V,this.context=W,this.refs=et,this.updater=st||q}var tt=J.prototype=new lt;tt.constructor=J,F(tt,Z.prototype),tt.isPureReactComponent=!0;var ht=Array.isArray,ct={H:null,A:null,T:null,S:null,V:null},gt=Object.prototype.hasOwnProperty;function D(V,W,st,nt,pt,Ct){return st=Ct.ref,{$$typeof:r,type:V,key:W,ref:st!==void 0?st:null,props:Ct}}function S(V,W){return D(V.type,W,void 0,void 0,void 0,V.props)}function b(V){return typeof V=="object"&&V!==null&&V.$$typeof===r}function N(V){var W={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(st){return W[st]})}var O=/\/+/g;function P(V,W){return typeof V=="object"&&V!==null&&V.key!=null?N(""+V.key):W.toString(36)}function I(){}function ae(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(I,I):(V.status="pending",V.then(function(W){V.status==="pending"&&(V.status="fulfilled",V.value=W)},function(W){V.status==="pending"&&(V.status="rejected",V.reason=W)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function oe(V,W,st,nt,pt){var Ct=typeof V;(Ct==="undefined"||Ct==="boolean")&&(V=null);var bt=!1;if(V===null)bt=!0;else switch(Ct){case"bigint":case"string":case"number":bt=!0;break;case"object":switch(V.$$typeof){case r:case t:bt=!0;break;case T:return bt=V._init,oe(bt(V._payload),W,st,nt,pt)}}if(bt)return pt=pt(V),bt=nt===""?"."+P(V,0):nt,ht(pt)?(st="",bt!=null&&(st=bt.replace(O,"$&/")+"/"),oe(pt,W,st,"",function(Gn){return Gn})):pt!=null&&(b(pt)&&(pt=S(pt,st+(pt.key==null||V&&V.key===pt.key?"":(""+pt.key).replace(O,"$&/")+"/")+bt)),W.push(pt)),1;bt=0;var Ne=nt===""?".":nt+":";if(ht(V))for(var Wt=0;Wt<V.length;Wt++)nt=V[Wt],Ct=Ne+P(nt,Wt),bt+=oe(nt,W,st,Ct,pt);else if(Wt=R(V),typeof Wt=="function")for(V=Wt.call(V),Wt=0;!(nt=V.next()).done;)nt=nt.value,Ct=Ne+P(nt,Wt++),bt+=oe(nt,W,st,Ct,pt);else if(Ct==="object"){if(typeof V.then=="function")return oe(ae(V),W,st,nt,pt);throw W=String(V),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return bt}function G(V,W,st){if(V==null)return V;var nt=[],pt=0;return oe(V,nt,"","",function(Ct){return W.call(st,Ct,pt++)}),nt}function rt(V){if(V._status===-1){var W=V._result;W=W(),W.then(function(st){(V._status===0||V._status===-1)&&(V._status=1,V._result=st)},function(st){(V._status===0||V._status===-1)&&(V._status=2,V._result=st)}),V._status===-1&&(V._status=0,V._result=W)}if(V._status===1)return V._result.default;throw V._result}var dt=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function zt(){}return Rt.Children={map:G,forEach:function(V,W,st){G(V,function(){W.apply(this,arguments)},st)},count:function(V){var W=0;return G(V,function(){W++}),W},toArray:function(V){return G(V,function(W){return W})||[]},only:function(V){if(!b(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Rt.Component=Z,Rt.Fragment=n,Rt.Profiler=l,Rt.PureComponent=J,Rt.StrictMode=s,Rt.Suspense=p,Rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ct,Rt.__COMPILER_RUNTIME={__proto__:null,c:function(V){return ct.H.useMemoCache(V)}},Rt.cache=function(V){return function(){return V.apply(null,arguments)}},Rt.cloneElement=function(V,W,st){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var nt=F({},V.props),pt=V.key,Ct=void 0;if(W!=null)for(bt in W.ref!==void 0&&(Ct=void 0),W.key!==void 0&&(pt=""+W.key),W)!gt.call(W,bt)||bt==="key"||bt==="__self"||bt==="__source"||bt==="ref"&&W.ref===void 0||(nt[bt]=W[bt]);var bt=arguments.length-2;if(bt===1)nt.children=st;else if(1<bt){for(var Ne=Array(bt),Wt=0;Wt<bt;Wt++)Ne[Wt]=arguments[Wt+2];nt.children=Ne}return D(V.type,pt,void 0,void 0,Ct,nt)},Rt.createContext=function(V){return V={$$typeof:f,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:c,_context:V},V},Rt.createElement=function(V,W,st){var nt,pt={},Ct=null;if(W!=null)for(nt in W.key!==void 0&&(Ct=""+W.key),W)gt.call(W,nt)&&nt!=="key"&&nt!=="__self"&&nt!=="__source"&&(pt[nt]=W[nt]);var bt=arguments.length-2;if(bt===1)pt.children=st;else if(1<bt){for(var Ne=Array(bt),Wt=0;Wt<bt;Wt++)Ne[Wt]=arguments[Wt+2];pt.children=Ne}if(V&&V.defaultProps)for(nt in bt=V.defaultProps,bt)pt[nt]===void 0&&(pt[nt]=bt[nt]);return D(V,Ct,void 0,void 0,null,pt)},Rt.createRef=function(){return{current:null}},Rt.forwardRef=function(V){return{$$typeof:g,render:V}},Rt.isValidElement=b,Rt.lazy=function(V){return{$$typeof:T,_payload:{_status:-1,_result:V},_init:rt}},Rt.memo=function(V,W){return{$$typeof:y,type:V,compare:W===void 0?null:W}},Rt.startTransition=function(V){var W=ct.T,st={};ct.T=st;try{var nt=V(),pt=ct.S;pt!==null&&pt(st,nt),typeof nt=="object"&&nt!==null&&typeof nt.then=="function"&&nt.then(zt,dt)}catch(Ct){dt(Ct)}finally{ct.T=W}},Rt.unstable_useCacheRefresh=function(){return ct.H.useCacheRefresh()},Rt.use=function(V){return ct.H.use(V)},Rt.useActionState=function(V,W,st){return ct.H.useActionState(V,W,st)},Rt.useCallback=function(V,W){return ct.H.useCallback(V,W)},Rt.useContext=function(V){return ct.H.useContext(V)},Rt.useDebugValue=function(){},Rt.useDeferredValue=function(V,W){return ct.H.useDeferredValue(V,W)},Rt.useEffect=function(V,W,st){var nt=ct.H;if(typeof st=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return nt.useEffect(V,W)},Rt.useId=function(){return ct.H.useId()},Rt.useImperativeHandle=function(V,W,st){return ct.H.useImperativeHandle(V,W,st)},Rt.useInsertionEffect=function(V,W){return ct.H.useInsertionEffect(V,W)},Rt.useLayoutEffect=function(V,W){return ct.H.useLayoutEffect(V,W)},Rt.useMemo=function(V,W){return ct.H.useMemo(V,W)},Rt.useOptimistic=function(V,W){return ct.H.useOptimistic(V,W)},Rt.useReducer=function(V,W,st){return ct.H.useReducer(V,W,st)},Rt.useRef=function(V){return ct.H.useRef(V)},Rt.useState=function(V){return ct.H.useState(V)},Rt.useSyncExternalStore=function(V,W,st){return ct.H.useSyncExternalStore(V,W,st)},Rt.useTransition=function(){return ct.H.useTransition()},Rt.version="19.1.1",Rt}var z_;function Rm(){return z_||(z_=1,Dd.exports=Ib()),Dd.exports}var vt=Rm();const Cb=R0(vt);var Od={exports:{}},Tl={},Vd={exports:{}},Md={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B_;function xb(){return B_||(B_=1,(function(r){function t(G,rt){var dt=G.length;G.push(rt);t:for(;0<dt;){var zt=dt-1>>>1,V=G[zt];if(0<l(V,rt))G[zt]=rt,G[dt]=V,dt=zt;else break t}}function n(G){return G.length===0?null:G[0]}function s(G){if(G.length===0)return null;var rt=G[0],dt=G.pop();if(dt!==rt){G[0]=dt;t:for(var zt=0,V=G.length,W=V>>>1;zt<W;){var st=2*(zt+1)-1,nt=G[st],pt=st+1,Ct=G[pt];if(0>l(nt,dt))pt<V&&0>l(Ct,nt)?(G[zt]=Ct,G[pt]=dt,zt=pt):(G[zt]=nt,G[st]=dt,zt=st);else if(pt<V&&0>l(Ct,dt))G[zt]=Ct,G[pt]=dt,zt=pt;else break t}}return rt}function l(G,rt){var dt=G.sortIndex-rt.sortIndex;return dt!==0?dt:G.id-rt.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var f=Date,g=f.now();r.unstable_now=function(){return f.now()-g}}var p=[],y=[],T=1,w=null,R=3,q=!1,F=!1,et=!1,Z=!1,lt=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,tt=typeof setImmediate<"u"?setImmediate:null;function ht(G){for(var rt=n(y);rt!==null;){if(rt.callback===null)s(y);else if(rt.startTime<=G)s(y),rt.sortIndex=rt.expirationTime,t(p,rt);else break;rt=n(y)}}function ct(G){if(et=!1,ht(G),!F)if(n(p)!==null)F=!0,gt||(gt=!0,P());else{var rt=n(y);rt!==null&&oe(ct,rt.startTime-G)}}var gt=!1,D=-1,S=5,b=-1;function N(){return Z?!0:!(r.unstable_now()-b<S)}function O(){if(Z=!1,gt){var G=r.unstable_now();b=G;var rt=!0;try{t:{F=!1,et&&(et=!1,J(D),D=-1),q=!0;var dt=R;try{e:{for(ht(G),w=n(p);w!==null&&!(w.expirationTime>G&&N());){var zt=w.callback;if(typeof zt=="function"){w.callback=null,R=w.priorityLevel;var V=zt(w.expirationTime<=G);if(G=r.unstable_now(),typeof V=="function"){w.callback=V,ht(G),rt=!0;break e}w===n(p)&&s(p),ht(G)}else s(p);w=n(p)}if(w!==null)rt=!0;else{var W=n(y);W!==null&&oe(ct,W.startTime-G),rt=!1}}break t}finally{w=null,R=dt,q=!1}rt=void 0}}finally{rt?P():gt=!1}}}var P;if(typeof tt=="function")P=function(){tt(O)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,ae=I.port2;I.port1.onmessage=O,P=function(){ae.postMessage(null)}}else P=function(){lt(O,0)};function oe(G,rt){D=lt(function(){G(r.unstable_now())},rt)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(G){G.callback=null},r.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<G?Math.floor(1e3/G):5},r.unstable_getCurrentPriorityLevel=function(){return R},r.unstable_next=function(G){switch(R){case 1:case 2:case 3:var rt=3;break;default:rt=R}var dt=R;R=rt;try{return G()}finally{R=dt}},r.unstable_requestPaint=function(){Z=!0},r.unstable_runWithPriority=function(G,rt){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var dt=R;R=G;try{return rt()}finally{R=dt}},r.unstable_scheduleCallback=function(G,rt,dt){var zt=r.unstable_now();switch(typeof dt=="object"&&dt!==null?(dt=dt.delay,dt=typeof dt=="number"&&0<dt?zt+dt:zt):dt=zt,G){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=dt+V,G={id:T++,callback:rt,priorityLevel:G,startTime:dt,expirationTime:V,sortIndex:-1},dt>zt?(G.sortIndex=dt,t(y,G),n(p)===null&&G===n(y)&&(et?(J(D),D=-1):et=!0,oe(ct,dt-zt))):(G.sortIndex=V,t(p,G),F||q||(F=!0,gt||(gt=!0,P()))),G},r.unstable_shouldYield=N,r.unstable_wrapCallback=function(G){var rt=R;return function(){var dt=R;R=rt;try{return G.apply(this,arguments)}finally{R=dt}}}})(Md)),Md}var q_;function Nb(){return q_||(q_=1,Vd.exports=xb()),Vd.exports}var Pd={exports:{}},Ke={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H_;function Db(){if(H_)return Ke;H_=1;var r=Rm();function t(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)y+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(p,y,T){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:w==null?null:""+w,children:p,containerInfo:y,implementation:T}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Ke.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ke.createPortal=function(p,y){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(t(299));return c(p,y,null,T)},Ke.flushSync=function(p){var y=f.T,T=s.p;try{if(f.T=null,s.p=2,p)return p()}finally{f.T=y,s.p=T,s.d.f()}},Ke.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(p,y))},Ke.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Ke.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var T=y.as,w=g(T,y.crossOrigin),R=typeof y.integrity=="string"?y.integrity:void 0,q=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;T==="style"?s.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:w,integrity:R,fetchPriority:q}):T==="script"&&s.d.X(p,{crossOrigin:w,integrity:R,fetchPriority:q,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Ke.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var T=g(y.as,y.crossOrigin);s.d.M(p,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(p)},Ke.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var T=y.as,w=g(T,y.crossOrigin);s.d.L(p,T,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Ke.preloadModule=function(p,y){if(typeof p=="string")if(y){var T=g(y.as,y.crossOrigin);s.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(p)},Ke.requestFormReset=function(p){s.d.r(p)},Ke.unstable_batchedUpdates=function(p,y){return p(y)},Ke.useFormState=function(p,y,T){return f.H.useFormState(p,y,T)},Ke.useFormStatus=function(){return f.H.useHostTransitionStatus()},Ke.version="19.1.1",Ke}var F_;function Ob(){if(F_)return Pd.exports;F_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Pd.exports=Db(),Pd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G_;function Vb(){if(G_)return Tl;G_=1;var r=Nb(),t=Rm(),n=Ob();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function f(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function g(e){if(c(e)!==e)throw Error(s(188))}function p(e){var i=e.alternate;if(!i){if(i=c(e),i===null)throw Error(s(188));return i!==e?null:e}for(var a=e,o=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return g(h),e;if(d===o)return g(h),i;d=d.sibling}throw Error(s(188))}if(a.return!==o.return)a=h,o=d;else{for(var v=!1,E=h.child;E;){if(E===a){v=!0,a=h,o=d;break}if(E===o){v=!0,o=h,a=d;break}E=E.sibling}if(!v){for(E=d.child;E;){if(E===a){v=!0,a=d,o=h;break}if(E===o){v=!0,o=d,a=h;break}E=E.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==o)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:i}function y(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=y(e),i!==null)return i;e=e.sibling}return null}var T=Object.assign,w=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),q=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),et=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),lt=Symbol.for("react.provider"),J=Symbol.for("react.consumer"),tt=Symbol.for("react.context"),ht=Symbol.for("react.forward_ref"),ct=Symbol.for("react.suspense"),gt=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function P(e){return e===null||typeof e!="object"?null:(e=O&&e[O]||e["@@iterator"],typeof e=="function"?e:null)}var I=Symbol.for("react.client.reference");function ae(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===I?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case F:return"Fragment";case Z:return"Profiler";case et:return"StrictMode";case ct:return"Suspense";case gt:return"SuspenseList";case b:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case q:return"Portal";case tt:return(e.displayName||"Context")+".Provider";case J:return(e._context.displayName||"Context")+".Consumer";case ht:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case D:return i=e.displayName||null,i!==null?i:ae(e.type)||"Memo";case S:i=e._payload,e=e._init;try{return ae(e(i))}catch{}}return null}var oe=Array.isArray,G=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,rt=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,dt={pending:!1,data:null,method:null,action:null},zt=[],V=-1;function W(e){return{current:e}}function st(e){0>V||(e.current=zt[V],zt[V]=null,V--)}function nt(e,i){V++,zt[V]=e.current,e.current=i}var pt=W(null),Ct=W(null),bt=W(null),Ne=W(null);function Wt(e,i){switch(nt(bt,i),nt(Ct,e),nt(pt,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?h_(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=h_(i),e=f_(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}st(pt),nt(pt,e)}function Gn(){st(pt),st(Ct),st(bt)}function Wi(e){e.memoizedState!==null&&nt(Ne,e);var i=pt.current,a=f_(i,e.type);i!==a&&(nt(Ct,e),nt(pt,a))}function pi(e){Ct.current===e&&(st(pt),st(Ct)),Ne.current===e&&(st(Ne),gl._currentValue=dt)}var $r=Object.prototype.hasOwnProperty,Zr=r.unstable_scheduleCallback,Wr=r.unstable_cancelCallback,ho=r.unstable_shouldYield,nu=r.unstable_requestPaint,vn=r.unstable_now,xh=r.unstable_getCurrentPriorityLevel,fo=r.unstable_ImmediatePriority,Gs=r.unstable_UserBlockingPriority,Jr=r.unstable_NormalPriority,Nh=r.unstable_LowPriority,Qs=r.unstable_IdlePriority,mo=r.log,iu=r.unstable_setDisableYieldValue,le=null,Ft=null;function ln(e){if(typeof mo=="function"&&iu(e),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(le,e)}catch{}}var Ge=Math.clz32?Math.clz32:ts,ru=Math.log,Dh=Math.LN2;function ts(e){return e>>>=0,e===0?32:31-(ru(e)/Dh|0)|0}var es=256,ns=4194304;function Mn(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ks(e,i,a){var o=e.pendingLanes;if(o===0)return 0;var h=0,d=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var E=o&134217727;return E!==0?(o=E&~d,o!==0?h=Mn(o):(v&=E,v!==0?h=Mn(v):a||(a=E&~e,a!==0&&(h=Mn(a))))):(E=o&~d,E!==0?h=Mn(E):v!==0?h=Mn(v):a||(a=o&~e,a!==0&&(h=Mn(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function is(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function go(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function po(){var e=es;return es<<=1,(es&4194048)===0&&(es=256),e}function yo(){var e=ns;return ns<<=1,(ns&62914560)===0&&(ns=4194304),e}function yi(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function _i(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function _o(e,i,a,o,h,d){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var E=e.entanglements,C=e.expirationTimes,j=e.hiddenUpdates;for(a=v&~a;0<a;){var Q=31-Ge(a),X=1<<Q;E[Q]=0,C[Q]=-1;var z=j[Q];if(z!==null)for(j[Q]=null,Q=0;Q<z.length;Q++){var B=z[Q];B!==null&&(B.lane&=-536870913)}a&=~X}o!==0&&Qn(e,o,0),d!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=d&~(v&~i))}function Qn(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var o=31-Ge(i);e.entangledLanes|=i,e.entanglements[o]=e.entanglements[o]|1073741824|a&4194090}function vo(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var o=31-Ge(a),h=1<<o;h&i|e[o]&i&&(e[o]|=i),a&=~h}}function Ji(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ys(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function tr(){var e=rt.p;return e!==0?e:(e=window.event,e===void 0?32:D_(e.type))}function su(e,i){var a=rt.p;try{return rt.p=e,i()}finally{rt.p=a}}var ne=Math.random().toString(36).slice(2),Se="__reactFiber$"+ne,pe="__reactProps$"+ne,En="__reactContainer$"+ne,Eo="__reactEvents$"+ne,Oh="__reactListeners$"+ne,er="__reactHandles$"+ne,au="__reactResources$"+ne,rs="__reactMarker$"+ne;function nr(e){delete e[Se],delete e[pe],delete e[Eo],delete e[Oh],delete e[er]}function vi(e){var i=e[Se];if(i)return i;for(var a=e.parentNode;a;){if(i=a[En]||a[Se]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=p_(e);e!==null;){if(a=e[Se])return a;e=p_(e)}return i}e=a,a=e.parentNode}return null}function Kn(e){if(e=e[Se]||e[En]){var i=e.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return e}return null}function Yn(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function We(e){var i=e[au];return i||(i=e[au]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function he(e){e[rs]=!0}var To=new Set,Xs={};function Pn(e,i){Ei(e,i),Ei(e+"Capture",i)}function Ei(e,i){for(Xs[e]=i,e=0;e<i.length;e++)To.add(i[e])}var ou=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),lu={},ss={};function uu(e){return $r.call(ss,e)?!0:$r.call(lu,e)?!1:ou.test(e)?ss[e]=!0:(lu[e]=!0,!1)}function ir(e,i,a){if(uu(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function Xn(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function Ue(e,i,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+o)}}var as,cu;function Ti(e){if(as===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);as=i&&i[1]||"",cu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+as+e+cu}var $s=!1;function Zs(e,i){if(!e||$s)return"";$s=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(B){var z=B}Reflect.construct(e,[],X)}else{try{X.call()}catch(B){z=B}e.call(X.prototype)}}else{try{throw Error()}catch(B){z=B}(X=e())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(B){if(B&&z&&typeof B.stack=="string")return[B.stack,z.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=o.DetermineComponentFrameRoot(),v=d[0],E=d[1];if(v&&E){var C=v.split(`
`),j=E.split(`
`);for(h=o=0;o<C.length&&!C[o].includes("DetermineComponentFrameRoot");)o++;for(;h<j.length&&!j[h].includes("DetermineComponentFrameRoot");)h++;if(o===C.length||h===j.length)for(o=C.length-1,h=j.length-1;1<=o&&0<=h&&C[o]!==j[h];)h--;for(;1<=o&&0<=h;o--,h--)if(C[o]!==j[h]){if(o!==1||h!==1)do if(o--,h--,0>h||C[o]!==j[h]){var Q=`
`+C[o].replace(" at new "," at ");return e.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",e.displayName)),Q}while(1<=o&&0<=h);break}}}finally{$s=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ti(a):""}function Ao(e){switch(e.tag){case 26:case 27:case 5:return Ti(e.type);case 16:return Ti("Lazy");case 13:return Ti("Suspense");case 19:return Ti("SuspenseList");case 0:case 15:return Zs(e.type,!1);case 11:return Zs(e.type.render,!1);case 1:return Zs(e.type,!0);case 31:return Ti("Activity");default:return""}}function Ws(e){try{var i="";do i+=Ao(e),e=e.return;while(e);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Je(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function bo(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Vh(e){var i=bo(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),o=""+e[i];if(!e.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){o=""+v,d.call(this,v)}}),Object.defineProperty(e,i,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Js(e){e._valueTracker||(e._valueTracker=Vh(e))}function So(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return e&&(o=bo(e)?e.checked?"true":"false":e.value),e=o,e!==a?(i.setValue(e),!0):!1}function os(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Mh=/[\n"\\]/g;function ye(e){return e.replace(Mh,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function un(e,i,a,o,h,d,v,E){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),i!=null?v==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+Je(i)):e.value!==""+Je(i)&&(e.value=""+Je(i)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),i!=null?rr(e,v,Je(i)):a!=null?rr(e,v,Je(a)):o!=null&&e.removeAttribute("value"),h==null&&d!=null&&(e.defaultChecked=!!d),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+Je(E):e.removeAttribute("name")}function ls(e,i,a,o,h,d,v,E){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null))return;a=a!=null?""+Je(a):"",i=i!=null?""+Je(i):a,E||i===e.value||(e.value=i),e.defaultValue=i}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=E?e.checked:!!o,e.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v)}function rr(e,i,a){i==="number"&&os(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Ai(e,i,a,o){if(e=e.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=i.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&o&&(e[a].defaultSelected=!0)}else{for(a=""+Je(a),i=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,o&&(e[h].defaultSelected=!0);return}i!==null||e[h].disabled||(i=e[h])}i!==null&&(i.selected=!0)}}function Kt(e,i,a){if(i!=null&&(i=""+Je(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+Je(a):""}function us(e,i,a,o){if(i==null){if(o!=null){if(a!=null)throw Error(s(92));if(oe(o)){if(1<o.length)throw Error(s(93));o=o[0]}a=o}a==null&&(a=""),i=a}a=Je(i),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o)}function Tn(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var cs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hu(e,i,a){var o=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":o?e.setProperty(i,a):typeof a!="number"||a===0||cs.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function wo(e,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var h in i)o=i[h],i.hasOwnProperty(h)&&a[h]!==o&&hu(e,h,o)}else for(var d in i)i.hasOwnProperty(d)&&hu(e,d,i[d])}function Ro(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ph=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),kh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ta(e){return kh.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var bi=null;function An(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Si=null,wi=null;function Io(e){var i=Kn(e);if(i&&(e=i.stateNode)){var a=e[pe]||null;t:switch(e=i.stateNode,i.type){case"input":if(un(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ye(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==e&&o.form===e.form){var h=o[pe]||null;if(!h)throw Error(s(90));un(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)o=a[i],o.form===e.form&&So(o)}break t;case"textarea":Kt(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&Ai(e,!!a.multiple,i,!1)}}}var $n=!1;function fu(e,i,a){if($n)return e(i,a);$n=!0;try{var o=e(i);return o}finally{if($n=!1,(Si!==null||wi!==null)&&(sc(),Si&&(i=Si,e=wi,wi=Si=null,Io(i),e)))for(i=0;i<e.length;i++)Io(e[i])}}function hs(e,i){var a=e.stateNode;if(a===null)return null;var o=a[pe]||null;if(o===null)return null;a=o[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bn=!1;if(kn)try{var fs={};Object.defineProperty(fs,"passive",{get:function(){bn=!0}}),window.addEventListener("test",fs,fs),window.removeEventListener("test",fs,fs)}catch{bn=!1}var Zn=null,sr=null,Ri=null;function Co(){if(Ri)return Ri;var e,i=sr,a=i.length,o,h="value"in Zn?Zn.value:Zn.textContent,d=h.length;for(e=0;e<a&&i[e]===h[e];e++);var v=a-e;for(o=1;o<=v&&i[a-o]===h[d-o];o++);return Ri=h.slice(e,1<o?1-o:void 0)}function Wn(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function Jn(){return!0}function xo(){return!1}function De(e){function i(a,o,h,d,v){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(a=e[E],this[E]=a?a(d):d[E]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Jn:xo,this.isPropagationStopped=xo,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Jn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Jn)},persist:function(){},isPersistent:Jn}),i}var qt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ea=De(qt),ds=T({},qt,{view:0,detail:0}),du=De(ds),na,ia,ti,ms=T({},ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ys,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ti&&(ti&&e.type==="mousemove"?(na=e.screenX-ti.screenX,ia=e.screenY-ti.screenY):ia=na=0,ti=e),na)},movementY:function(e){return"movementY"in e?e.movementY:ia}}),Sn=De(ms),mu=T({},ms,{dataTransfer:0}),Uh=De(mu),gs=T({},ds,{relatedTarget:0}),ra=De(gs),No=T({},qt,{animationName:0,elapsedTime:0,pseudoElement:0}),sa=De(No),gu=T({},qt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),aa=De(gu),Lh=T({},qt,{data:0}),Do=De(Lh),ps={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Oo(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=yu[e])?!!i[e]:!1}function ys(){return Oo}var _u=T({},ds,{key:function(e){if(e.key){var i=ps[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=Wn(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?pu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ys,charCode:function(e){return e.type==="keypress"?Wn(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Wn(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),oa=De(_u),vu=T({},ms,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vo=De(vu),Ii=T({},ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ys}),Eu=De(Ii),Tu=T({},qt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Au=De(Tu),bu=T({},ms,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),la=De(bu),tn=T({},qt,{newState:0,oldState:0}),Su=De(tn),wu=[9,13,27,32],ei=kn&&"CompositionEvent"in window,u=null;kn&&"documentMode"in document&&(u=document.documentMode);var m=kn&&"TextEvent"in window&&!u,_=kn&&(!ei||u&&8<u&&11>=u),A=" ",U=!1;function H(e,i){switch(e){case"keyup":return wu.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function it(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Pt=!1;function we(e,i){switch(e){case"compositionend":return it(i);case"keypress":return i.which!==32?null:(U=!0,A);case"textInput":return e=i.data,e===A&&U?null:e;default:return null}}function kt(e,i){if(Pt)return e==="compositionend"||!ei&&H(e,i)?(e=Co(),Ri=sr=Zn=null,Pt=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return _&&i.locale!=="ko"?null:i.data;default:return null}}var Oe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Re(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!Oe[e.type]:i==="textarea"}function Ci(e,i,a,o){Si?wi?wi.push(o):wi=[o]:Si=o,i=hc(i,"onChange"),0<i.length&&(a=new ea("onChange","change",null,a,o),e.push({event:a,listeners:i}))}var Le=null,ni=null;function Mo(e){a_(e,0)}function Ru(e){var i=Yn(e);if(So(i))return e}function Ig(e,i){if(e==="change")return i}var Cg=!1;if(kn){var jh;if(kn){var zh="oninput"in document;if(!zh){var xg=document.createElement("div");xg.setAttribute("oninput","return;"),zh=typeof xg.oninput=="function"}jh=zh}else jh=!1;Cg=jh&&(!document.documentMode||9<document.documentMode)}function Ng(){Le&&(Le.detachEvent("onpropertychange",Dg),ni=Le=null)}function Dg(e){if(e.propertyName==="value"&&Ru(ni)){var i=[];Ci(i,ni,e,An(e)),fu(Mo,i)}}function eA(e,i,a){e==="focusin"?(Ng(),Le=i,ni=a,Le.attachEvent("onpropertychange",Dg)):e==="focusout"&&Ng()}function nA(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ru(ni)}function iA(e,i){if(e==="click")return Ru(i)}function rA(e,i){if(e==="input"||e==="change")return Ru(i)}function sA(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var cn=typeof Object.is=="function"?Object.is:sA;function Po(e,i){if(cn(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!$r.call(i,h)||!cn(e[h],i[h]))return!1}return!0}function Og(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Vg(e,i){var a=Og(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=i&&o>=i)return{node:a,offset:i-e};e=o}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Og(a)}}function Mg(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?Mg(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Pg(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=os(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=os(e.document)}return i}function Bh(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var aA=kn&&"documentMode"in document&&11>=document.documentMode,ua=null,qh=null,ko=null,Hh=!1;function kg(e,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Hh||ua==null||ua!==os(o)||(o=ua,"selectionStart"in o&&Bh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),ko&&Po(ko,o)||(ko=o,o=hc(qh,"onSelect"),0<o.length&&(i=new ea("onSelect","select",null,i,a),e.push({event:i,listeners:o}),i.target=ua)))}function _s(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var ca={animationend:_s("Animation","AnimationEnd"),animationiteration:_s("Animation","AnimationIteration"),animationstart:_s("Animation","AnimationStart"),transitionrun:_s("Transition","TransitionRun"),transitionstart:_s("Transition","TransitionStart"),transitioncancel:_s("Transition","TransitionCancel"),transitionend:_s("Transition","TransitionEnd")},Fh={},Ug={};kn&&(Ug=document.createElement("div").style,"AnimationEvent"in window||(delete ca.animationend.animation,delete ca.animationiteration.animation,delete ca.animationstart.animation),"TransitionEvent"in window||delete ca.transitionend.transition);function vs(e){if(Fh[e])return Fh[e];if(!ca[e])return e;var i=ca[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in Ug)return Fh[e]=i[a];return e}var Lg=vs("animationend"),jg=vs("animationiteration"),zg=vs("animationstart"),oA=vs("transitionrun"),lA=vs("transitionstart"),uA=vs("transitioncancel"),Bg=vs("transitionend"),qg=new Map,Gh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Gh.push("scrollEnd");function Un(e,i){qg.set(e,i),Pn(i,[e])}var Hg=new WeakMap;function wn(e,i){if(typeof e=="object"&&e!==null){var a=Hg.get(e);return a!==void 0?a:(i={value:e,source:i,stack:Ws(i)},Hg.set(e,i),i)}return{value:e,source:i,stack:Ws(i)}}var Rn=[],ha=0,Qh=0;function Iu(){for(var e=ha,i=Qh=ha=0;i<e;){var a=Rn[i];Rn[i++]=null;var o=Rn[i];Rn[i++]=null;var h=Rn[i];Rn[i++]=null;var d=Rn[i];if(Rn[i++]=null,o!==null&&h!==null){var v=o.pending;v===null?h.next=h:(h.next=v.next,v.next=h),o.pending=h}d!==0&&Fg(a,h,d)}}function Cu(e,i,a,o){Rn[ha++]=e,Rn[ha++]=i,Rn[ha++]=a,Rn[ha++]=o,Qh|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function Kh(e,i,a,o){return Cu(e,i,a,o),xu(e)}function fa(e,i){return Cu(e,null,null,i),xu(e)}function Fg(e,i,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var h=!1,d=e.return;d!==null;)d.childLanes|=a,o=d.alternate,o!==null&&(o.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(h=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,h&&i!==null&&(h=31-Ge(a),e=d.hiddenUpdates,o=e[h],o===null?e[h]=[i]:o.push(i),i.lane=a|536870912),d):null}function xu(e){if(50<ol)throw ol=0,td=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var da={};function cA(e,i,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hn(e,i,a,o){return new cA(e,i,a,o)}function Yh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function xi(e,i){var a=e.alternate;return a===null?(a=hn(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Gg(e,i){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function Nu(e,i,a,o,h,d){var v=0;if(o=e,typeof e=="function")Yh(e)&&(v=1);else if(typeof e=="string")v=fb(e,a,pt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case b:return e=hn(31,a,i,h),e.elementType=b,e.lanes=d,e;case F:return Es(a.children,h,d,i);case et:v=8,h|=24;break;case Z:return e=hn(12,a,i,h|2),e.elementType=Z,e.lanes=d,e;case ct:return e=hn(13,a,i,h),e.elementType=ct,e.lanes=d,e;case gt:return e=hn(19,a,i,h),e.elementType=gt,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case lt:case tt:v=10;break t;case J:v=9;break t;case ht:v=11;break t;case D:v=14;break t;case S:v=16,o=null;break t}v=29,a=Error(s(130,e===null?"null":typeof e,"")),o=null}return i=hn(v,a,i,h),i.elementType=e,i.type=o,i.lanes=d,i}function Es(e,i,a,o){return e=hn(7,e,o,i),e.lanes=a,e}function Xh(e,i,a){return e=hn(6,e,null,i),e.lanes=a,e}function $h(e,i,a){return i=hn(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var ma=[],ga=0,Du=null,Ou=0,In=[],Cn=0,Ts=null,Ni=1,Di="";function As(e,i){ma[ga++]=Ou,ma[ga++]=Du,Du=e,Ou=i}function Qg(e,i,a){In[Cn++]=Ni,In[Cn++]=Di,In[Cn++]=Ts,Ts=e;var o=Ni;e=Di;var h=32-Ge(o)-1;o&=~(1<<h),a+=1;var d=32-Ge(i)+h;if(30<d){var v=h-h%5;d=(o&(1<<v)-1).toString(32),o>>=v,h-=v,Ni=1<<32-Ge(i)+h|a<<h|o,Di=d+e}else Ni=1<<d|a<<h|o,Di=e}function Zh(e){e.return!==null&&(As(e,1),Qg(e,1,0))}function Wh(e){for(;e===Du;)Du=ma[--ga],ma[ga]=null,Ou=ma[--ga],ma[ga]=null;for(;e===Ts;)Ts=In[--Cn],In[Cn]=null,Di=In[--Cn],In[Cn]=null,Ni=In[--Cn],In[Cn]=null}var en=null,ue=null,Bt=!1,bs=null,ii=!1,Jh=Error(s(519));function Ss(e){var i=Error(s(418,""));throw jo(wn(i,e)),Jh}function Kg(e){var i=e.stateNode,a=e.type,o=e.memoizedProps;switch(i[Se]=e,i[pe]=o,a){case"dialog":Dt("cancel",i),Dt("close",i);break;case"iframe":case"object":case"embed":Dt("load",i);break;case"video":case"audio":for(a=0;a<ul.length;a++)Dt(ul[a],i);break;case"source":Dt("error",i);break;case"img":case"image":case"link":Dt("error",i),Dt("load",i);break;case"details":Dt("toggle",i);break;case"input":Dt("invalid",i),ls(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),Js(i);break;case"select":Dt("invalid",i);break;case"textarea":Dt("invalid",i),us(i,o.value,o.defaultValue,o.children),Js(i)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||o.suppressHydrationWarning===!0||c_(i.textContent,a)?(o.popover!=null&&(Dt("beforetoggle",i),Dt("toggle",i)),o.onScroll!=null&&Dt("scroll",i),o.onScrollEnd!=null&&Dt("scrollend",i),o.onClick!=null&&(i.onclick=fc),i=!0):i=!1,i||Ss(e)}function Yg(e){for(en=e.return;en;)switch(en.tag){case 5:case 13:ii=!1;return;case 27:case 3:ii=!0;return;default:en=en.return}}function Uo(e){if(e!==en)return!1;if(!Bt)return Yg(e),Bt=!0,!1;var i=e.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||pd(e.type,e.memoizedProps)),a=!a),a&&ue&&Ss(e),Yg(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));t:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(i===0){ue=jn(e.nextSibling);break t}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;e=e.nextSibling}ue=null}}else i===27?(i=ue,Tr(e.type)?(e=Ed,Ed=null,ue=e):ue=i):ue=en?jn(e.stateNode.nextSibling):null;return!0}function Lo(){ue=en=null,Bt=!1}function Xg(){var e=bs;return e!==null&&(sn===null?sn=e:sn.push.apply(sn,e),bs=null),e}function jo(e){bs===null?bs=[e]:bs.push(e)}var tf=W(null),ws=null,Oi=null;function ar(e,i,a){nt(tf,i._currentValue),i._currentValue=a}function Vi(e){e._currentValue=tf.current,st(tf)}function ef(e,i,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),e===a)break;e=e.return}}function nf(e,i,a,o){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var d=h.dependencies;if(d!==null){var v=h.child;d=d.firstContext;t:for(;d!==null;){var E=d;d=h;for(var C=0;C<i.length;C++)if(E.context===i[C]){d.lanes|=a,E=d.alternate,E!==null&&(E.lanes|=a),ef(d.return,a,e),o||(v=null);break t}d=E.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),ef(v,a,e),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===e){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function zo(e,i,a,o){e=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var E=h.type;cn(h.pendingProps.value,v.value)||(e!==null?e.push(E):e=[E])}}else if(h===Ne.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(gl):e=[gl])}h=h.return}e!==null&&nf(i,e,a,o),i.flags|=262144}function Vu(e){for(e=e.firstContext;e!==null;){if(!cn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Rs(e){ws=e,Oi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Qe(e){return $g(ws,e)}function Mu(e,i){return ws===null&&Rs(e),$g(e,i)}function $g(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Oi===null){if(e===null)throw Error(s(308));Oi=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else Oi=Oi.next=i;return a}var hA=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},fA=r.unstable_scheduleCallback,dA=r.unstable_NormalPriority,Ie={$$typeof:tt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function rf(){return{controller:new hA,data:new Map,refCount:0}}function Bo(e){e.refCount--,e.refCount===0&&fA(dA,function(){e.controller.abort()})}var qo=null,sf=0,pa=0,ya=null;function mA(e,i){if(qo===null){var a=qo=[];sf=0,pa=od(),ya={status:"pending",value:void 0,then:function(o){a.push(o)}}}return sf++,i.then(Zg,Zg),i}function Zg(){if(--sf===0&&qo!==null){ya!==null&&(ya.status="fulfilled");var e=qo;qo=null,pa=0,ya=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function gA(e,i){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){o.status="fulfilled",o.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var Wg=G.S;G.S=function(e,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&mA(e,i),Wg!==null&&Wg(e,i)};var Is=W(null);function af(){var e=Is.current;return e!==null?e:Jt.pooledCache}function Pu(e,i){i===null?nt(Is,Is.current):nt(Is,i.pool)}function Jg(){var e=af();return e===null?null:{parent:Ie._currentValue,pool:e}}var Ho=Error(s(460)),tp=Error(s(474)),ku=Error(s(542)),of={then:function(){}};function ep(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Uu(){}function np(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(Uu,Uu),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,rp(e),e;default:if(typeof i.status=="string")i.then(Uu,Uu);else{if(e=Jt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(o){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=o}},function(o){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,rp(e),e}throw Fo=i,Ho}}var Fo=null;function ip(){if(Fo===null)throw Error(s(459));var e=Fo;return Fo=null,e}function rp(e){if(e===Ho||e===ku)throw Error(s(483))}var or=!1;function lf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function uf(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function lr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ur(e,i,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Gt&2)!==0){var h=o.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),o.pending=i,i=xu(e),Fg(e,null,a),i}return Cu(e,o,i,a),xu(e)}function Go(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,vo(e,a)}}function cf(e,i){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var hf=!1;function Qo(){if(hf){var e=ya;if(e!==null)throw e}}function Ko(e,i,a,o){hf=!1;var h=e.updateQueue;or=!1;var d=h.firstBaseUpdate,v=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var C=E,j=C.next;C.next=null,v===null?d=j:v.next=j,v=C;var Q=e.alternate;Q!==null&&(Q=Q.updateQueue,E=Q.lastBaseUpdate,E!==v&&(E===null?Q.firstBaseUpdate=j:E.next=j,Q.lastBaseUpdate=C))}if(d!==null){var X=h.baseState;v=0,Q=j=C=null,E=d;do{var z=E.lane&-536870913,B=z!==E.lane;if(B?(Ut&z)===z:(o&z)===z){z!==0&&z===pa&&(hf=!0),Q!==null&&(Q=Q.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var At=e,yt=E;z=i;var $t=a;switch(yt.tag){case 1:if(At=yt.payload,typeof At=="function"){X=At.call($t,X,z);break t}X=At;break t;case 3:At.flags=At.flags&-65537|128;case 0:if(At=yt.payload,z=typeof At=="function"?At.call($t,X,z):At,z==null)break t;X=T({},X,z);break t;case 2:or=!0}}z=E.callback,z!==null&&(e.flags|=64,B&&(e.flags|=8192),B=h.callbacks,B===null?h.callbacks=[z]:B.push(z))}else B={lane:z,tag:E.tag,payload:E.payload,callback:E.callback,next:null},Q===null?(j=Q=B,C=X):Q=Q.next=B,v|=z;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;B=E,E=B.next,B.next=null,h.lastBaseUpdate=B,h.shared.pending=null}}while(!0);Q===null&&(C=X),h.baseState=C,h.firstBaseUpdate=j,h.lastBaseUpdate=Q,d===null&&(h.shared.lanes=0),yr|=v,e.lanes=v,e.memoizedState=X}}function sp(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function ap(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)sp(a[e],i)}var _a=W(null),Lu=W(0);function op(e,i){e=zi,nt(Lu,e),nt(_a,i),zi=e|i.baseLanes}function ff(){nt(Lu,zi),nt(_a,_a.current)}function df(){zi=Lu.current,st(_a),st(Lu)}var cr=0,It=null,Yt=null,_e=null,ju=!1,va=!1,Cs=!1,zu=0,Yo=0,Ea=null,pA=0;function fe(){throw Error(s(321))}function mf(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!cn(e[a],i[a]))return!1;return!0}function gf(e,i,a,o,h,d){return cr=d,It=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,G.H=e===null||e.memoizedState===null?Fp:Gp,Cs=!1,d=a(o,h),Cs=!1,va&&(d=up(i,a,o,h)),lp(e),d}function lp(e){G.H=Qu;var i=Yt!==null&&Yt.next!==null;if(cr=0,_e=Yt=It=null,ju=!1,Yo=0,Ea=null,i)throw Error(s(300));e===null||Ve||(e=e.dependencies,e!==null&&Vu(e)&&(Ve=!0))}function up(e,i,a,o){It=e;var h=0;do{if(va&&(Ea=null),Yo=0,va=!1,25<=h)throw Error(s(301));if(h+=1,_e=Yt=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}G.H=bA,d=i(a,o)}while(va);return d}function yA(){var e=G.H,i=e.useState()[0];return i=typeof i.then=="function"?Xo(i):i,e=e.useState()[0],(Yt!==null?Yt.memoizedState:null)!==e&&(It.flags|=1024),i}function pf(){var e=zu!==0;return zu=0,e}function yf(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function _f(e){if(ju){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}ju=!1}cr=0,_e=Yt=It=null,va=!1,Yo=zu=0,Ea=null}function nn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _e===null?It.memoizedState=_e=e:_e=_e.next=e,_e}function ve(){if(Yt===null){var e=It.alternate;e=e!==null?e.memoizedState:null}else e=Yt.next;var i=_e===null?It.memoizedState:_e.next;if(i!==null)_e=i,Yt=e;else{if(e===null)throw It.alternate===null?Error(s(467)):Error(s(310));Yt=e,e={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},_e===null?It.memoizedState=_e=e:_e=_e.next=e}return _e}function vf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Xo(e){var i=Yo;return Yo+=1,Ea===null&&(Ea=[]),e=np(Ea,e,i),i=It,(_e===null?i.memoizedState:_e.next)===null&&(i=i.alternate,G.H=i===null||i.memoizedState===null?Fp:Gp),e}function Bu(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Xo(e);if(e.$$typeof===tt)return Qe(e)}throw Error(s(438,String(e)))}function Ef(e){var i=null,a=It.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var o=It.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=vf(),It.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),o=0;o<e;o++)a[o]=N;return i.index++,a}function Mi(e,i){return typeof i=="function"?i(e):i}function qu(e){var i=ve();return Tf(i,Yt,e)}function Tf(e,i,a){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var h=e.baseQueue,d=o.pending;if(d!==null){if(h!==null){var v=h.next;h.next=d.next,d.next=v}i.baseQueue=h=d,o.pending=null}if(d=e.baseState,h===null)e.memoizedState=d;else{i=h.next;var E=v=null,C=null,j=i,Q=!1;do{var X=j.lane&-536870913;if(X!==j.lane?(Ut&X)===X:(cr&X)===X){var z=j.revertLane;if(z===0)C!==null&&(C=C.next={lane:0,revertLane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),X===pa&&(Q=!0);else if((cr&z)===z){j=j.next,z===pa&&(Q=!0);continue}else X={lane:0,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},C===null?(E=C=X,v=d):C=C.next=X,It.lanes|=z,yr|=z;X=j.action,Cs&&a(d,X),d=j.hasEagerState?j.eagerState:a(d,X)}else z={lane:X,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},C===null?(E=C=z,v=d):C=C.next=z,It.lanes|=X,yr|=X;j=j.next}while(j!==null&&j!==i);if(C===null?v=d:C.next=E,!cn(d,e.memoizedState)&&(Ve=!0,Q&&(a=ya,a!==null)))throw a;e.memoizedState=d,e.baseState=v,e.baseQueue=C,o.lastRenderedState=d}return h===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Af(e){var i=ve(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var o=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do d=e(d,v.action),v=v.next;while(v!==h);cn(d,i.memoizedState)||(Ve=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,o]}function cp(e,i,a){var o=It,h=ve(),d=Bt;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!cn((Yt||h).memoizedState,a);v&&(h.memoizedState=a,Ve=!0),h=h.queue;var E=dp.bind(null,o,h,e);if($o(2048,8,E,[e]),h.getSnapshot!==i||v||_e!==null&&_e.memoizedState.tag&1){if(o.flags|=2048,Ta(9,Hu(),fp.bind(null,o,h,a,i),null),Jt===null)throw Error(s(349));d||(cr&124)!==0||hp(o,i,a)}return a}function hp(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=It.updateQueue,i===null?(i=vf(),It.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function fp(e,i,a,o){i.value=a,i.getSnapshot=o,mp(i)&&gp(e)}function dp(e,i,a){return a(function(){mp(i)&&gp(e)})}function mp(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!cn(e,a)}catch{return!0}}function gp(e){var i=fa(e,2);i!==null&&pn(i,e,2)}function bf(e){var i=nn();if(typeof e=="function"){var a=e;if(e=a(),Cs){ln(!0);try{a()}finally{ln(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mi,lastRenderedState:e},i}function pp(e,i,a,o){return e.baseState=a,Tf(e,Yt,typeof o=="function"?o:Mi)}function _A(e,i,a,o,h){if(Gu(e))throw Error(s(485));if(e=i.action,e!==null){var d={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};G.T!==null?a(!0):d.isTransition=!1,o(d),a=i.pending,a===null?(d.next=i.pending=d,yp(i,d)):(d.next=a.next,i.pending=a.next=d)}}function yp(e,i){var a=i.action,o=i.payload,h=e.state;if(i.isTransition){var d=G.T,v={};G.T=v;try{var E=a(h,o),C=G.S;C!==null&&C(v,E),_p(e,i,E)}catch(j){Sf(e,i,j)}finally{G.T=d}}else try{d=a(h,o),_p(e,i,d)}catch(j){Sf(e,i,j)}}function _p(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){vp(e,i,o)},function(o){return Sf(e,i,o)}):vp(e,i,a)}function vp(e,i,a){i.status="fulfilled",i.value=a,Ep(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,yp(e,a)))}function Sf(e,i,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=a,Ep(i),i=i.next;while(i!==o)}e.action=null}function Ep(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function Tp(e,i){return i}function Ap(e,i){if(Bt){var a=Jt.formState;if(a!==null){t:{var o=It;if(Bt){if(ue){e:{for(var h=ue,d=ii;h.nodeType!==8;){if(!d){h=null;break e}if(h=jn(h.nextSibling),h===null){h=null;break e}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){ue=jn(h.nextSibling),o=h.data==="F!";break t}}Ss(o)}o=!1}o&&(i=a[0])}}return a=nn(),a.memoizedState=a.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tp,lastRenderedState:i},a.queue=o,a=Bp.bind(null,It,o),o.dispatch=a,o=bf(!1),d=xf.bind(null,It,!1,o.queue),o=nn(),h={state:i,dispatch:null,action:e,pending:null},o.queue=h,a=_A.bind(null,It,h,d,a),h.dispatch=a,o.memoizedState=e,[i,a,!1]}function bp(e){var i=ve();return Sp(i,Yt,e)}function Sp(e,i,a){if(i=Tf(e,i,Tp)[0],e=qu(Mi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=Xo(i)}catch(v){throw v===Ho?ku:v}else o=i;i=ve();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(It.flags|=2048,Ta(9,Hu(),vA.bind(null,h,a),null)),[o,d,e]}function vA(e,i){e.action=i}function wp(e){var i=ve(),a=Yt;if(a!==null)return Sp(i,a,e);ve(),i=i.memoizedState,a=ve();var o=a.queue.dispatch;return a.memoizedState=e,[i,o,!1]}function Ta(e,i,a,o){return e={tag:e,create:a,deps:o,inst:i,next:null},i=It.updateQueue,i===null&&(i=vf(),It.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,i.lastEffect=e),e}function Hu(){return{destroy:void 0,resource:void 0}}function Rp(){return ve().memoizedState}function Fu(e,i,a,o){var h=nn();o=o===void 0?null:o,It.flags|=e,h.memoizedState=Ta(1|i,Hu(),a,o)}function $o(e,i,a,o){var h=ve();o=o===void 0?null:o;var d=h.memoizedState.inst;Yt!==null&&o!==null&&mf(o,Yt.memoizedState.deps)?h.memoizedState=Ta(i,d,a,o):(It.flags|=e,h.memoizedState=Ta(1|i,d,a,o))}function Ip(e,i){Fu(8390656,8,e,i)}function Cp(e,i){$o(2048,8,e,i)}function xp(e,i){return $o(4,2,e,i)}function Np(e,i){return $o(4,4,e,i)}function Dp(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function Op(e,i,a){a=a!=null?a.concat([e]):null,$o(4,4,Dp.bind(null,i,e),a)}function wf(){}function Vp(e,i){var a=ve();i=i===void 0?null:i;var o=a.memoizedState;return i!==null&&mf(i,o[1])?o[0]:(a.memoizedState=[e,i],e)}function Mp(e,i){var a=ve();i=i===void 0?null:i;var o=a.memoizedState;if(i!==null&&mf(i,o[1]))return o[0];if(o=e(),Cs){ln(!0);try{e()}finally{ln(!1)}}return a.memoizedState=[o,i],o}function Rf(e,i,a){return a===void 0||(cr&1073741824)!==0?e.memoizedState=i:(e.memoizedState=a,e=Uy(),It.lanes|=e,yr|=e,a)}function Pp(e,i,a,o){return cn(a,i)?a:_a.current!==null?(e=Rf(e,a,o),cn(e,i)||(Ve=!0),e):(cr&42)===0?(Ve=!0,e.memoizedState=a):(e=Uy(),It.lanes|=e,yr|=e,i)}function kp(e,i,a,o,h){var d=rt.p;rt.p=d!==0&&8>d?d:8;var v=G.T,E={};G.T=E,xf(e,!1,i,a);try{var C=h(),j=G.S;if(j!==null&&j(E,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var Q=gA(C,o);Zo(e,i,Q,gn(e))}else Zo(e,i,o,gn(e))}catch(X){Zo(e,i,{then:function(){},status:"rejected",reason:X},gn())}finally{rt.p=d,G.T=v}}function EA(){}function If(e,i,a,o){if(e.tag!==5)throw Error(s(476));var h=Up(e).queue;kp(e,h,i,dt,a===null?EA:function(){return Lp(e),a(o)})}function Up(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:dt,baseState:dt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mi,lastRenderedState:dt},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mi,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function Lp(e){var i=Up(e).next.queue;Zo(e,i,{},gn())}function Cf(){return Qe(gl)}function jp(){return ve().memoizedState}function zp(){return ve().memoizedState}function TA(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=gn();e=lr(a);var o=ur(i,e,a);o!==null&&(pn(o,i,a),Go(o,i,a)),i={cache:rf()},e.payload=i;return}i=i.return}}function AA(e,i,a){var o=gn();a={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Gu(e)?qp(i,a):(a=Kh(e,i,a,o),a!==null&&(pn(a,e,o),Hp(a,i,o)))}function Bp(e,i,a){var o=gn();Zo(e,i,a,o)}function Zo(e,i,a,o){var h={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Gu(e))qp(i,h);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var v=i.lastRenderedState,E=d(v,a);if(h.hasEagerState=!0,h.eagerState=E,cn(E,v))return Cu(e,i,h,0),Jt===null&&Iu(),!1}catch{}finally{}if(a=Kh(e,i,h,o),a!==null)return pn(a,e,o),Hp(a,i,o),!0}return!1}function xf(e,i,a,o){if(o={lane:2,revertLane:od(),action:o,hasEagerState:!1,eagerState:null,next:null},Gu(e)){if(i)throw Error(s(479))}else i=Kh(e,a,o,2),i!==null&&pn(i,e,2)}function Gu(e){var i=e.alternate;return e===It||i!==null&&i===It}function qp(e,i){va=ju=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function Hp(e,i,a){if((a&4194048)!==0){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,vo(e,a)}}var Qu={readContext:Qe,use:Bu,useCallback:fe,useContext:fe,useEffect:fe,useImperativeHandle:fe,useLayoutEffect:fe,useInsertionEffect:fe,useMemo:fe,useReducer:fe,useRef:fe,useState:fe,useDebugValue:fe,useDeferredValue:fe,useTransition:fe,useSyncExternalStore:fe,useId:fe,useHostTransitionStatus:fe,useFormState:fe,useActionState:fe,useOptimistic:fe,useMemoCache:fe,useCacheRefresh:fe},Fp={readContext:Qe,use:Bu,useCallback:function(e,i){return nn().memoizedState=[e,i===void 0?null:i],e},useContext:Qe,useEffect:Ip,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,Fu(4194308,4,Dp.bind(null,i,e),a)},useLayoutEffect:function(e,i){return Fu(4194308,4,e,i)},useInsertionEffect:function(e,i){Fu(4,2,e,i)},useMemo:function(e,i){var a=nn();i=i===void 0?null:i;var o=e();if(Cs){ln(!0);try{e()}finally{ln(!1)}}return a.memoizedState=[o,i],o},useReducer:function(e,i,a){var o=nn();if(a!==void 0){var h=a(i);if(Cs){ln(!0);try{a(i)}finally{ln(!1)}}}else h=i;return o.memoizedState=o.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},o.queue=e,e=e.dispatch=AA.bind(null,It,e),[o.memoizedState,e]},useRef:function(e){var i=nn();return e={current:e},i.memoizedState=e},useState:function(e){e=bf(e);var i=e.queue,a=Bp.bind(null,It,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:wf,useDeferredValue:function(e,i){var a=nn();return Rf(a,e,i)},useTransition:function(){var e=bf(!1);return e=kp.bind(null,It,e.queue,!0,!1),nn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var o=It,h=nn();if(Bt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),Jt===null)throw Error(s(349));(Ut&124)!==0||hp(o,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,Ip(dp.bind(null,o,d,e),[e]),o.flags|=2048,Ta(9,Hu(),fp.bind(null,o,d,a,i),null),a},useId:function(){var e=nn(),i=Jt.identifierPrefix;if(Bt){var a=Di,o=Ni;a=(o&~(1<<32-Ge(o)-1)).toString(32)+a,i="«"+i+"R"+a,a=zu++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=pA++,i="«"+i+"r"+a.toString(32)+"»";return e.memoizedState=i},useHostTransitionStatus:Cf,useFormState:Ap,useActionState:Ap,useOptimistic:function(e){var i=nn();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=xf.bind(null,It,!0,a),a.dispatch=i,[e,i]},useMemoCache:Ef,useCacheRefresh:function(){return nn().memoizedState=TA.bind(null,It)}},Gp={readContext:Qe,use:Bu,useCallback:Vp,useContext:Qe,useEffect:Cp,useImperativeHandle:Op,useInsertionEffect:xp,useLayoutEffect:Np,useMemo:Mp,useReducer:qu,useRef:Rp,useState:function(){return qu(Mi)},useDebugValue:wf,useDeferredValue:function(e,i){var a=ve();return Pp(a,Yt.memoizedState,e,i)},useTransition:function(){var e=qu(Mi)[0],i=ve().memoizedState;return[typeof e=="boolean"?e:Xo(e),i]},useSyncExternalStore:cp,useId:jp,useHostTransitionStatus:Cf,useFormState:bp,useActionState:bp,useOptimistic:function(e,i){var a=ve();return pp(a,Yt,e,i)},useMemoCache:Ef,useCacheRefresh:zp},bA={readContext:Qe,use:Bu,useCallback:Vp,useContext:Qe,useEffect:Cp,useImperativeHandle:Op,useInsertionEffect:xp,useLayoutEffect:Np,useMemo:Mp,useReducer:Af,useRef:Rp,useState:function(){return Af(Mi)},useDebugValue:wf,useDeferredValue:function(e,i){var a=ve();return Yt===null?Rf(a,e,i):Pp(a,Yt.memoizedState,e,i)},useTransition:function(){var e=Af(Mi)[0],i=ve().memoizedState;return[typeof e=="boolean"?e:Xo(e),i]},useSyncExternalStore:cp,useId:jp,useHostTransitionStatus:Cf,useFormState:wp,useActionState:wp,useOptimistic:function(e,i){var a=ve();return Yt!==null?pp(a,Yt,e,i):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Ef,useCacheRefresh:zp},Aa=null,Wo=0;function Ku(e){var i=Wo;return Wo+=1,Aa===null&&(Aa=[]),np(Aa,e,i)}function Jo(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function Yu(e,i){throw i.$$typeof===w?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function Qp(e){var i=e._init;return i(e._payload)}function Kp(e){function i(k,M){if(e){var L=k.deletions;L===null?(k.deletions=[M],k.flags|=16):L.push(M)}}function a(k,M){if(!e)return null;for(;M!==null;)i(k,M),M=M.sibling;return null}function o(k){for(var M=new Map;k!==null;)k.key!==null?M.set(k.key,k):M.set(k.index,k),k=k.sibling;return M}function h(k,M){return k=xi(k,M),k.index=0,k.sibling=null,k}function d(k,M,L){return k.index=L,e?(L=k.alternate,L!==null?(L=L.index,L<M?(k.flags|=67108866,M):L):(k.flags|=67108866,M)):(k.flags|=1048576,M)}function v(k){return e&&k.alternate===null&&(k.flags|=67108866),k}function E(k,M,L,K){return M===null||M.tag!==6?(M=Xh(L,k.mode,K),M.return=k,M):(M=h(M,L),M.return=k,M)}function C(k,M,L,K){var ut=L.type;return ut===F?Q(k,M,L.props.children,K,L.key):M!==null&&(M.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===S&&Qp(ut)===M.type)?(M=h(M,L.props),Jo(M,L),M.return=k,M):(M=Nu(L.type,L.key,L.props,null,k.mode,K),Jo(M,L),M.return=k,M)}function j(k,M,L,K){return M===null||M.tag!==4||M.stateNode.containerInfo!==L.containerInfo||M.stateNode.implementation!==L.implementation?(M=$h(L,k.mode,K),M.return=k,M):(M=h(M,L.children||[]),M.return=k,M)}function Q(k,M,L,K,ut){return M===null||M.tag!==7?(M=Es(L,k.mode,K,ut),M.return=k,M):(M=h(M,L),M.return=k,M)}function X(k,M,L){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=Xh(""+M,k.mode,L),M.return=k,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case R:return L=Nu(M.type,M.key,M.props,null,k.mode,L),Jo(L,M),L.return=k,L;case q:return M=$h(M,k.mode,L),M.return=k,M;case S:var K=M._init;return M=K(M._payload),X(k,M,L)}if(oe(M)||P(M))return M=Es(M,k.mode,L,null),M.return=k,M;if(typeof M.then=="function")return X(k,Ku(M),L);if(M.$$typeof===tt)return X(k,Mu(k,M),L);Yu(k,M)}return null}function z(k,M,L,K){var ut=M!==null?M.key:null;if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return ut!==null?null:E(k,M,""+L,K);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case R:return L.key===ut?C(k,M,L,K):null;case q:return L.key===ut?j(k,M,L,K):null;case S:return ut=L._init,L=ut(L._payload),z(k,M,L,K)}if(oe(L)||P(L))return ut!==null?null:Q(k,M,L,K,null);if(typeof L.then=="function")return z(k,M,Ku(L),K);if(L.$$typeof===tt)return z(k,M,Mu(k,L),K);Yu(k,L)}return null}function B(k,M,L,K,ut){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return k=k.get(L)||null,E(M,k,""+K,ut);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case R:return k=k.get(K.key===null?L:K.key)||null,C(M,k,K,ut);case q:return k=k.get(K.key===null?L:K.key)||null,j(M,k,K,ut);case S:var xt=K._init;return K=xt(K._payload),B(k,M,L,K,ut)}if(oe(K)||P(K))return k=k.get(L)||null,Q(M,k,K,ut,null);if(typeof K.then=="function")return B(k,M,L,Ku(K),ut);if(K.$$typeof===tt)return B(k,M,L,Mu(M,K),ut);Yu(M,K)}return null}function At(k,M,L,K){for(var ut=null,xt=null,ft=M,_t=M=0,Pe=null;ft!==null&&_t<L.length;_t++){ft.index>_t?(Pe=ft,ft=null):Pe=ft.sibling;var jt=z(k,ft,L[_t],K);if(jt===null){ft===null&&(ft=Pe);break}e&&ft&&jt.alternate===null&&i(k,ft),M=d(jt,M,_t),xt===null?ut=jt:xt.sibling=jt,xt=jt,ft=Pe}if(_t===L.length)return a(k,ft),Bt&&As(k,_t),ut;if(ft===null){for(;_t<L.length;_t++)ft=X(k,L[_t],K),ft!==null&&(M=d(ft,M,_t),xt===null?ut=ft:xt.sibling=ft,xt=ft);return Bt&&As(k,_t),ut}for(ft=o(ft);_t<L.length;_t++)Pe=B(ft,k,_t,L[_t],K),Pe!==null&&(e&&Pe.alternate!==null&&ft.delete(Pe.key===null?_t:Pe.key),M=d(Pe,M,_t),xt===null?ut=Pe:xt.sibling=Pe,xt=Pe);return e&&ft.forEach(function(Rr){return i(k,Rr)}),Bt&&As(k,_t),ut}function yt(k,M,L,K){if(L==null)throw Error(s(151));for(var ut=null,xt=null,ft=M,_t=M=0,Pe=null,jt=L.next();ft!==null&&!jt.done;_t++,jt=L.next()){ft.index>_t?(Pe=ft,ft=null):Pe=ft.sibling;var Rr=z(k,ft,jt.value,K);if(Rr===null){ft===null&&(ft=Pe);break}e&&ft&&Rr.alternate===null&&i(k,ft),M=d(Rr,M,_t),xt===null?ut=Rr:xt.sibling=Rr,xt=Rr,ft=Pe}if(jt.done)return a(k,ft),Bt&&As(k,_t),ut;if(ft===null){for(;!jt.done;_t++,jt=L.next())jt=X(k,jt.value,K),jt!==null&&(M=d(jt,M,_t),xt===null?ut=jt:xt.sibling=jt,xt=jt);return Bt&&As(k,_t),ut}for(ft=o(ft);!jt.done;_t++,jt=L.next())jt=B(ft,k,_t,jt.value,K),jt!==null&&(e&&jt.alternate!==null&&ft.delete(jt.key===null?_t:jt.key),M=d(jt,M,_t),xt===null?ut=jt:xt.sibling=jt,xt=jt);return e&&ft.forEach(function(Sb){return i(k,Sb)}),Bt&&As(k,_t),ut}function $t(k,M,L,K){if(typeof L=="object"&&L!==null&&L.type===F&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case R:t:{for(var ut=L.key;M!==null;){if(M.key===ut){if(ut=L.type,ut===F){if(M.tag===7){a(k,M.sibling),K=h(M,L.props.children),K.return=k,k=K;break t}}else if(M.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===S&&Qp(ut)===M.type){a(k,M.sibling),K=h(M,L.props),Jo(K,L),K.return=k,k=K;break t}a(k,M);break}else i(k,M);M=M.sibling}L.type===F?(K=Es(L.props.children,k.mode,K,L.key),K.return=k,k=K):(K=Nu(L.type,L.key,L.props,null,k.mode,K),Jo(K,L),K.return=k,k=K)}return v(k);case q:t:{for(ut=L.key;M!==null;){if(M.key===ut)if(M.tag===4&&M.stateNode.containerInfo===L.containerInfo&&M.stateNode.implementation===L.implementation){a(k,M.sibling),K=h(M,L.children||[]),K.return=k,k=K;break t}else{a(k,M);break}else i(k,M);M=M.sibling}K=$h(L,k.mode,K),K.return=k,k=K}return v(k);case S:return ut=L._init,L=ut(L._payload),$t(k,M,L,K)}if(oe(L))return At(k,M,L,K);if(P(L)){if(ut=P(L),typeof ut!="function")throw Error(s(150));return L=ut.call(L),yt(k,M,L,K)}if(typeof L.then=="function")return $t(k,M,Ku(L),K);if(L.$$typeof===tt)return $t(k,M,Mu(k,L),K);Yu(k,L)}return typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint"?(L=""+L,M!==null&&M.tag===6?(a(k,M.sibling),K=h(M,L),K.return=k,k=K):(a(k,M),K=Xh(L,k.mode,K),K.return=k,k=K),v(k)):a(k,M)}return function(k,M,L,K){try{Wo=0;var ut=$t(k,M,L,K);return Aa=null,ut}catch(ft){if(ft===Ho||ft===ku)throw ft;var xt=hn(29,ft,null,k.mode);return xt.lanes=K,xt.return=k,xt}finally{}}}var ba=Kp(!0),Yp=Kp(!1),xn=W(null),ri=null;function hr(e){var i=e.alternate;nt(Ce,Ce.current&1),nt(xn,e),ri===null&&(i===null||_a.current!==null||i.memoizedState!==null)&&(ri=e)}function Xp(e){if(e.tag===22){if(nt(Ce,Ce.current),nt(xn,e),ri===null){var i=e.alternate;i!==null&&i.memoizedState!==null&&(ri=e)}}else fr()}function fr(){nt(Ce,Ce.current),nt(xn,xn.current)}function Pi(e){st(xn),ri===e&&(ri=null),st(Ce)}var Ce=W(0);function Xu(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||vd(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Nf(e,i,a,o){i=e.memoizedState,a=a(o,i),a=a==null?i:T({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Df={enqueueSetState:function(e,i,a){e=e._reactInternals;var o=gn(),h=lr(o);h.payload=i,a!=null&&(h.callback=a),i=ur(e,h,o),i!==null&&(pn(i,e,o),Go(i,e,o))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var o=gn(),h=lr(o);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=ur(e,h,o),i!==null&&(pn(i,e,o),Go(i,e,o))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=gn(),o=lr(a);o.tag=2,i!=null&&(o.callback=i),i=ur(e,o,a),i!==null&&(pn(i,e,a),Go(i,e,a))}};function $p(e,i,a,o,h,d,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,d,v):i.prototype&&i.prototype.isPureReactComponent?!Po(a,o)||!Po(h,d):!0}function Zp(e,i,a,o){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==e&&Df.enqueueReplaceState(i,i.state,null)}function xs(e,i){var a=i;if("ref"in i){a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}if(e=e.defaultProps){a===i&&(a=T({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}var $u=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Wp(e){$u(e)}function Jp(e){console.error(e)}function ty(e){$u(e)}function Zu(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function ey(e,i,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Of(e,i,a){return a=lr(a),a.tag=3,a.payload={element:null},a.callback=function(){Zu(e,i)},a}function ny(e){return e=lr(e),e.tag=3,e}function iy(e,i,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=o.value;e.payload=function(){return h(d)},e.callback=function(){ey(i,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){ey(i,a,o),typeof h!="function"&&(_r===null?_r=new Set([this]):_r.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function SA(e,i,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=a.alternate,i!==null&&zo(i,a,h,!0),a=xn.current,a!==null){switch(a.tag){case 13:return ri===null?nd():a.alternate===null&&ce===0&&(ce=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===of?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([o]):i.add(o),rd(e,o,h)),!1;case 22:return a.flags|=65536,o===of?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([o]):a.add(o)),rd(e,o,h)),!1}throw Error(s(435,a.tag))}return rd(e,o,h),nd(),!1}if(Bt)return i=xn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,o!==Jh&&(e=Error(s(422),{cause:o}),jo(wn(e,a)))):(o!==Jh&&(i=Error(s(423),{cause:o}),jo(wn(i,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,o=wn(o,a),h=Of(e.stateNode,o,h),cf(e,h),ce!==4&&(ce=2)),!1;var d=Error(s(520),{cause:o});if(d=wn(d,a),al===null?al=[d]:al.push(d),ce!==4&&(ce=2),i===null)return!0;o=wn(o,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=Of(a.stateNode,o,e),cf(a,e),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(_r===null||!_r.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=ny(h),iy(h,e,a,o),cf(a,h),!1}a=a.return}while(a!==null);return!1}var ry=Error(s(461)),Ve=!1;function je(e,i,a,o){i.child=e===null?Yp(i,null,a,o):ba(i,e.child,a,o)}function sy(e,i,a,o,h){a=a.render;var d=i.ref;if("ref"in o){var v={};for(var E in o)E!=="ref"&&(v[E]=o[E])}else v=o;return Rs(i),o=gf(e,i,a,v,d,h),E=pf(),e!==null&&!Ve?(yf(e,i,h),ki(e,i,h)):(Bt&&E&&Zh(i),i.flags|=1,je(e,i,o,h),i.child)}function ay(e,i,a,o,h){if(e===null){var d=a.type;return typeof d=="function"&&!Yh(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,oy(e,i,d,o,h)):(e=Nu(a.type,null,o,i,i.mode,h),e.ref=i.ref,e.return=i,i.child=e)}if(d=e.child,!zf(e,h)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:Po,a(v,o)&&e.ref===i.ref)return ki(e,i,h)}return i.flags|=1,e=xi(d,o),e.ref=i.ref,e.return=i,i.child=e}function oy(e,i,a,o,h){if(e!==null){var d=e.memoizedProps;if(Po(d,o)&&e.ref===i.ref)if(Ve=!1,i.pendingProps=o=d,zf(e,h))(e.flags&131072)!==0&&(Ve=!0);else return i.lanes=e.lanes,ki(e,i,h)}return Vf(e,i,a,o,h)}function ly(e,i,a){var o=i.pendingProps,h=o.children,d=e!==null?e.memoizedState:null;if(o.mode==="hidden"){if((i.flags&128)!==0){if(o=d!==null?d.baseLanes|a:a,e!==null){for(h=i.child=e.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;i.childLanes=d&~o}else i.childLanes=0,i.child=null;return uy(e,i,o,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&Pu(i,d!==null?d.cachePool:null),d!==null?op(i,d):ff(),Xp(i);else return i.lanes=i.childLanes=536870912,uy(e,i,d!==null?d.baseLanes|a:a,a)}else d!==null?(Pu(i,d.cachePool),op(i,d),fr(),i.memoizedState=null):(e!==null&&Pu(i,null),ff(),fr());return je(e,i,h,a),i.child}function uy(e,i,a,o){var h=af();return h=h===null?null:{parent:Ie._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},e!==null&&Pu(i,null),ff(),Xp(i),e!==null&&zo(e,i,o,!0),null}function Wu(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(i.flags|=4194816)}}function Vf(e,i,a,o,h){return Rs(i),a=gf(e,i,a,o,void 0,h),o=pf(),e!==null&&!Ve?(yf(e,i,h),ki(e,i,h)):(Bt&&o&&Zh(i),i.flags|=1,je(e,i,a,h),i.child)}function cy(e,i,a,o,h,d){return Rs(i),i.updateQueue=null,a=up(i,o,a,h),lp(e),o=pf(),e!==null&&!Ve?(yf(e,i,d),ki(e,i,d)):(Bt&&o&&Zh(i),i.flags|=1,je(e,i,a,d),i.child)}function hy(e,i,a,o,h){if(Rs(i),i.stateNode===null){var d=da,v=a.contextType;typeof v=="object"&&v!==null&&(d=Qe(v)),d=new a(o,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Df,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=o,d.state=i.memoizedState,d.refs={},lf(i),v=a.contextType,d.context=typeof v=="object"&&v!==null?Qe(v):da,d.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Nf(i,a,v,o),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&Df.enqueueReplaceState(d,d.state,null),Ko(i,o,d,h),Qo(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(e===null){d=i.stateNode;var E=i.memoizedProps,C=xs(a,E);d.props=C;var j=d.context,Q=a.contextType;v=da,typeof Q=="object"&&Q!==null&&(v=Qe(Q));var X=a.getDerivedStateFromProps;Q=typeof X=="function"||typeof d.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,Q||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E||j!==v)&&Zp(i,d,o,v),or=!1;var z=i.memoizedState;d.state=z,Ko(i,o,d,h),Qo(),j=i.memoizedState,E||z!==j||or?(typeof X=="function"&&(Nf(i,a,X,o),j=i.memoizedState),(C=or||$p(i,a,C,o,z,j,v))?(Q||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=j),d.props=o,d.state=j,d.context=v,o=C):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{d=i.stateNode,uf(e,i),v=i.memoizedProps,Q=xs(a,v),d.props=Q,X=i.pendingProps,z=d.context,j=a.contextType,C=da,typeof j=="object"&&j!==null&&(C=Qe(j)),E=a.getDerivedStateFromProps,(j=typeof E=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==X||z!==C)&&Zp(i,d,o,C),or=!1,z=i.memoizedState,d.state=z,Ko(i,o,d,h),Qo();var B=i.memoizedState;v!==X||z!==B||or||e!==null&&e.dependencies!==null&&Vu(e.dependencies)?(typeof E=="function"&&(Nf(i,a,E,o),B=i.memoizedState),(Q=or||$p(i,a,Q,o,z,B,C)||e!==null&&e.dependencies!==null&&Vu(e.dependencies))?(j||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,B,C),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,B,C)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=B),d.props=o,d.state=B,d.context=C,o=Q):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=1024),o=!1)}return d=o,Wu(e,i),o=(i.flags&128)!==0,d||o?(d=i.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,e!==null&&o?(i.child=ba(i,e.child,null,h),i.child=ba(i,null,a,h)):je(e,i,a,h),i.memoizedState=d.state,e=i.child):e=ki(e,i,h),e}function fy(e,i,a,o){return Lo(),i.flags|=256,je(e,i,a,o),i.child}var Mf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Pf(e){return{baseLanes:e,cachePool:Jg()}}function kf(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=Nn),e}function dy(e,i,a){var o=i.pendingProps,h=!1,d=(i.flags&128)!==0,v;if((v=d)||(v=e!==null&&e.memoizedState===null?!1:(Ce.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,e===null){if(Bt){if(h?hr(i):fr(),Bt){var E=ue,C;if(C=E){t:{for(C=E,E=ii;C.nodeType!==8;){if(!E){E=null;break t}if(C=jn(C.nextSibling),C===null){E=null;break t}}E=C}E!==null?(i.memoizedState={dehydrated:E,treeContext:Ts!==null?{id:Ni,overflow:Di}:null,retryLane:536870912,hydrationErrors:null},C=hn(18,null,null,0),C.stateNode=E,C.return=i,i.child=C,en=i,ue=null,C=!0):C=!1}C||Ss(i)}if(E=i.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return vd(E)?i.lanes=32:i.lanes=536870912,null;Pi(i)}return E=o.children,o=o.fallback,h?(fr(),h=i.mode,E=Ju({mode:"hidden",children:E},h),o=Es(o,h,a,null),E.return=i,o.return=i,E.sibling=o,i.child=E,h=i.child,h.memoizedState=Pf(a),h.childLanes=kf(e,v,a),i.memoizedState=Mf,o):(hr(i),Uf(i,E))}if(C=e.memoizedState,C!==null&&(E=C.dehydrated,E!==null)){if(d)i.flags&256?(hr(i),i.flags&=-257,i=Lf(e,i,a)):i.memoizedState!==null?(fr(),i.child=e.child,i.flags|=128,i=null):(fr(),h=o.fallback,E=i.mode,o=Ju({mode:"visible",children:o.children},E),h=Es(h,E,a,null),h.flags|=2,o.return=i,h.return=i,o.sibling=h,i.child=o,ba(i,e.child,null,a),o=i.child,o.memoizedState=Pf(a),o.childLanes=kf(e,v,a),i.memoizedState=Mf,i=h);else if(hr(i),vd(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var j=v.dgst;v=j,o=Error(s(419)),o.stack="",o.digest=v,jo({value:o,source:null,stack:null}),i=Lf(e,i,a)}else if(Ve||zo(e,i,a,!1),v=(a&e.childLanes)!==0,Ve||v){if(v=Jt,v!==null&&(o=a&-a,o=(o&42)!==0?1:Ji(o),o=(o&(v.suspendedLanes|a))!==0?0:o,o!==0&&o!==C.retryLane))throw C.retryLane=o,fa(e,o),pn(v,e,o),ry;E.data==="$?"||nd(),i=Lf(e,i,a)}else E.data==="$?"?(i.flags|=192,i.child=e.child,i=null):(e=C.treeContext,ue=jn(E.nextSibling),en=i,Bt=!0,bs=null,ii=!1,e!==null&&(In[Cn++]=Ni,In[Cn++]=Di,In[Cn++]=Ts,Ni=e.id,Di=e.overflow,Ts=i),i=Uf(i,o.children),i.flags|=4096);return i}return h?(fr(),h=o.fallback,E=i.mode,C=e.child,j=C.sibling,o=xi(C,{mode:"hidden",children:o.children}),o.subtreeFlags=C.subtreeFlags&65011712,j!==null?h=xi(j,h):(h=Es(h,E,a,null),h.flags|=2),h.return=i,o.return=i,o.sibling=h,i.child=o,o=h,h=i.child,E=e.child.memoizedState,E===null?E=Pf(a):(C=E.cachePool,C!==null?(j=Ie._currentValue,C=C.parent!==j?{parent:j,pool:j}:C):C=Jg(),E={baseLanes:E.baseLanes|a,cachePool:C}),h.memoizedState=E,h.childLanes=kf(e,v,a),i.memoizedState=Mf,o):(hr(i),a=e.child,e=a.sibling,a=xi(a,{mode:"visible",children:o.children}),a.return=i,a.sibling=null,e!==null&&(v=i.deletions,v===null?(i.deletions=[e],i.flags|=16):v.push(e)),i.child=a,i.memoizedState=null,a)}function Uf(e,i){return i=Ju({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function Ju(e,i){return e=hn(22,e,null,i),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Lf(e,i,a){return ba(i,e.child,null,a),e=Uf(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function my(e,i,a){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i),ef(e.return,i,a)}function jf(e,i,a,o,h){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h}:(d.isBackwards=i,d.rendering=null,d.renderingStartTime=0,d.last=o,d.tail=a,d.tailMode=h)}function gy(e,i,a){var o=i.pendingProps,h=o.revealOrder,d=o.tail;if(je(e,i,o.children,a),o=Ce.current,(o&2)!==0)o=o&1|2,i.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&my(e,a,i);else if(e.tag===19)my(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}switch(nt(Ce,o),h){case"forwards":for(a=i.child,h=null;a!==null;)e=a.alternate,e!==null&&Xu(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),jf(i,!1,h,a,d);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(e=h.alternate,e!==null&&Xu(e)===null){i.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}jf(i,!0,a,null,d);break;case"together":jf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ki(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),yr|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(zo(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,a=xi(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=xi(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function zf(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&Vu(e)))}function wA(e,i,a){switch(i.tag){case 3:Wt(i,i.stateNode.containerInfo),ar(i,Ie,e.memoizedState.cache),Lo();break;case 27:case 5:Wi(i);break;case 4:Wt(i,i.stateNode.containerInfo);break;case 10:ar(i,i.type,i.memoizedProps.value);break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(hr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?dy(e,i,a):(hr(i),e=ki(e,i,a),e!==null?e.sibling:null);hr(i);break;case 19:var h=(e.flags&128)!==0;if(o=(a&i.childLanes)!==0,o||(zo(e,i,a,!1),o=(a&i.childLanes)!==0),h){if(o)return gy(e,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),nt(Ce,Ce.current),o)break;return null;case 22:case 23:return i.lanes=0,ly(e,i,a);case 24:ar(i,Ie,e.memoizedState.cache)}return ki(e,i,a)}function py(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)Ve=!0;else{if(!zf(e,a)&&(i.flags&128)===0)return Ve=!1,wA(e,i,a);Ve=(e.flags&131072)!==0}else Ve=!1,Bt&&(i.flags&1048576)!==0&&Qg(i,Ou,i.index);switch(i.lanes=0,i.tag){case 16:t:{e=i.pendingProps;var o=i.elementType,h=o._init;if(o=h(o._payload),i.type=o,typeof o=="function")Yh(o)?(e=xs(o,e),i.tag=1,i=hy(null,i,o,e,a)):(i.tag=0,i=Vf(null,i,o,e,a));else{if(o!=null){if(h=o.$$typeof,h===ht){i.tag=11,i=sy(null,i,o,e,a);break t}else if(h===D){i.tag=14,i=ay(null,i,o,e,a);break t}}throw i=ae(o)||o,Error(s(306,i,""))}}return i;case 0:return Vf(e,i,i.type,i.pendingProps,a);case 1:return o=i.type,h=xs(o,i.pendingProps),hy(e,i,o,h,a);case 3:t:{if(Wt(i,i.stateNode.containerInfo),e===null)throw Error(s(387));o=i.pendingProps;var d=i.memoizedState;h=d.element,uf(e,i),Ko(i,o,null,a);var v=i.memoizedState;if(o=v.cache,ar(i,Ie,o),o!==d.cache&&nf(i,[Ie],a,!0),Qo(),o=v.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=fy(e,i,o,a);break t}else if(o!==h){h=wn(Error(s(424)),i),jo(h),i=fy(e,i,o,a);break t}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ue=jn(e.firstChild),en=i,Bt=!0,bs=null,ii=!0,a=Yp(i,null,o,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Lo(),o===h){i=ki(e,i,a);break t}je(e,i,o,a)}i=i.child}return i;case 26:return Wu(e,i),e===null?(a=E_(i.type,null,i.pendingProps,null))?i.memoizedState=a:Bt||(a=i.type,e=i.pendingProps,o=dc(bt.current).createElement(a),o[Se]=i,o[pe]=e,Be(o,a,e),he(o),i.stateNode=o):i.memoizedState=E_(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return Wi(i),e===null&&Bt&&(o=i.stateNode=y_(i.type,i.pendingProps,bt.current),en=i,ii=!0,h=ue,Tr(i.type)?(Ed=h,ue=jn(o.firstChild)):ue=h),je(e,i,i.pendingProps.children,a),Wu(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Bt&&((h=o=ue)&&(o=JA(o,i.type,i.pendingProps,ii),o!==null?(i.stateNode=o,en=i,ue=jn(o.firstChild),ii=!1,h=!0):h=!1),h||Ss(i)),Wi(i),h=i.type,d=i.pendingProps,v=e!==null?e.memoizedProps:null,o=d.children,pd(h,d)?o=null:v!==null&&pd(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=gf(e,i,yA,null,null,a),gl._currentValue=h),Wu(e,i),je(e,i,o,a),i.child;case 6:return e===null&&Bt&&((e=a=ue)&&(a=tb(a,i.pendingProps,ii),a!==null?(i.stateNode=a,en=i,ue=null,e=!0):e=!1),e||Ss(i)),null;case 13:return dy(e,i,a);case 4:return Wt(i,i.stateNode.containerInfo),o=i.pendingProps,e===null?i.child=ba(i,null,o,a):je(e,i,o,a),i.child;case 11:return sy(e,i,i.type,i.pendingProps,a);case 7:return je(e,i,i.pendingProps,a),i.child;case 8:return je(e,i,i.pendingProps.children,a),i.child;case 12:return je(e,i,i.pendingProps.children,a),i.child;case 10:return o=i.pendingProps,ar(i,i.type,o.value),je(e,i,o.children,a),i.child;case 9:return h=i.type._context,o=i.pendingProps.children,Rs(i),h=Qe(h),o=o(h),i.flags|=1,je(e,i,o,a),i.child;case 14:return ay(e,i,i.type,i.pendingProps,a);case 15:return oy(e,i,i.type,i.pendingProps,a);case 19:return gy(e,i,a);case 31:return o=i.pendingProps,a=i.mode,o={mode:o.mode,children:o.children},e===null?(a=Ju(o,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=xi(e.child,o),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return ly(e,i,a);case 24:return Rs(i),o=Qe(Ie),e===null?(h=af(),h===null&&(h=Jt,d=rf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:o,cache:h},lf(i),ar(i,Ie,h)):((e.lanes&a)!==0&&(uf(e,i),Ko(i,null,null,a),Qo()),h=e.memoizedState,d=i.memoizedState,h.parent!==o?(h={parent:o,cache:o},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),ar(i,Ie,o)):(o=d.cache,ar(i,Ie,o),o!==h.cache&&nf(i,[Ie],a,!0))),je(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Ui(e){e.flags|=4}function yy(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!w_(i)){if(i=xn.current,i!==null&&((Ut&4194048)===Ut?ri!==null:(Ut&62914560)!==Ut&&(Ut&536870912)===0||i!==ri))throw Fo=of,tp;e.flags|=8192}}function tc(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?yo():536870912,e.lanes|=i,Ia|=i)}function tl(e,i){if(!Bt)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function re(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(i)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=o,e.childLanes=a,i}function RA(e,i,a){var o=i.pendingProps;switch(Wh(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return re(i),null;case 1:return re(i),null;case 3:return a=i.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Vi(Ie),Gn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Uo(i)?Ui(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Xg())),re(i),null;case 26:return a=i.memoizedState,e===null?(Ui(i),a!==null?(re(i),yy(i,a)):(re(i),i.flags&=-16777217)):a?a!==e.memoizedState?(Ui(i),re(i),yy(i,a)):(re(i),i.flags&=-16777217):(e.memoizedProps!==o&&Ui(i),re(i),i.flags&=-16777217),null;case 27:pi(i),a=bt.current;var h=i.type;if(e!==null&&i.stateNode!=null)e.memoizedProps!==o&&Ui(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return re(i),null}e=pt.current,Uo(i)?Kg(i):(e=y_(h,o,a),i.stateNode=e,Ui(i))}return re(i),null;case 5:if(pi(i),a=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==o&&Ui(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return re(i),null}if(e=pt.current,Uo(i))Kg(i);else{switch(h=dc(bt.current),e){case 1:e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof o.is=="string"?h.createElement("select",{is:o.is}):h.createElement("select"),o.multiple?e.multiple=!0:o.size&&(e.size=o.size);break;default:e=typeof o.is=="string"?h.createElement(a,{is:o.is}):h.createElement(a)}}e[Se]=i,e[pe]=o;t:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)e.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break t;for(;h.sibling===null;){if(h.return===null||h.return===i)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=e;t:switch(Be(e,a,o),a){case"button":case"input":case"select":case"textarea":e=!!o.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Ui(i)}}return re(i),i.flags&=-16777217,null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==o&&Ui(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(s(166));if(e=bt.current,Uo(i)){if(e=i.stateNode,a=i.memoizedProps,o=null,h=en,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}e[Se]=i,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||c_(e.nodeValue,a)),e||Ss(i)}else e=dc(e).createTextNode(o),e[Se]=i,i.stateNode=e}return re(i),null;case 13:if(o=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=Uo(i),o!==null&&o.dehydrated!==null){if(e===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Se]=i}else Lo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;re(i),h=!1}else h=Xg(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Pi(i),i):(Pi(i),null)}if(Pi(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=o!==null,e=e!==null&&e.memoizedState!==null,a){o=i.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool);var d=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==h&&(o.flags|=2048)}return a!==e&&a&&(i.child.flags|=8192),tc(i,i.updateQueue),re(i),null;case 4:return Gn(),e===null&&hd(i.stateNode.containerInfo),re(i),null;case 10:return Vi(i.type),re(i),null;case 19:if(st(Ce),h=i.memoizedState,h===null)return re(i),null;if(o=(i.flags&128)!==0,d=h.rendering,d===null)if(o)tl(h,!1);else{if(ce!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(d=Xu(e),d!==null){for(i.flags|=128,tl(h,!1),e=d.updateQueue,i.updateQueue=e,tc(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)Gg(a,e),a=a.sibling;return nt(Ce,Ce.current&1|2),i.child}e=e.sibling}h.tail!==null&&vn()>ic&&(i.flags|=128,o=!0,tl(h,!1),i.lanes=4194304)}else{if(!o)if(e=Xu(d),e!==null){if(i.flags|=128,o=!0,e=e.updateQueue,i.updateQueue=e,tc(i,e),tl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!Bt)return re(i),null}else 2*vn()-h.renderingStartTime>ic&&a!==536870912&&(i.flags|=128,o=!0,tl(h,!1),i.lanes=4194304);h.isBackwards?(d.sibling=i.child,i.child=d):(e=h.last,e!==null?e.sibling=d:i.child=d,h.last=d)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=vn(),i.sibling=null,e=Ce.current,nt(Ce,o?e&1|2:e&1),i):(re(i),null);case 22:case 23:return Pi(i),df(),o=i.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(a&536870912)!==0&&(i.flags&128)===0&&(re(i),i.subtreeFlags&6&&(i.flags|=8192)):re(i),a=i.updateQueue,a!==null&&tc(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048),e!==null&&st(Is),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Vi(Ie),re(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function IA(e,i){switch(Wh(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Vi(Ie),Gn(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return pi(i),null;case 13:if(Pi(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Lo()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return st(Ce),null;case 4:return Gn(),null;case 10:return Vi(i.type),null;case 22:case 23:return Pi(i),df(),e!==null&&st(Is),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Vi(Ie),null;case 25:return null;default:return null}}function _y(e,i){switch(Wh(i),i.tag){case 3:Vi(Ie),Gn();break;case 26:case 27:case 5:pi(i);break;case 4:Gn();break;case 13:Pi(i);break;case 19:st(Ce);break;case 10:Vi(i.type);break;case 22:case 23:Pi(i),df(),e!==null&&st(Is);break;case 24:Vi(Ie)}}function el(e,i){try{var a=i.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&e)===e){o=void 0;var d=a.create,v=a.inst;o=d(),v.destroy=o}a=a.next}while(a!==h)}}catch(E){Zt(i,i.return,E)}}function dr(e,i,a){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var d=h.next;o=d;do{if((o.tag&e)===e){var v=o.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,h=i;var C=a,j=E;try{j()}catch(Q){Zt(h,C,Q)}}}o=o.next}while(o!==d)}}catch(Q){Zt(i,i.return,Q)}}function vy(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{ap(i,a)}catch(o){Zt(e,e.return,o)}}}function Ey(e,i,a){a.props=xs(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){Zt(e,i,o)}}function nl(e,i){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(h){Zt(e,i,h)}}function si(e,i){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){Zt(e,i,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Zt(e,i,h)}else a.current=null}function Ty(e){var i=e.type,a=e.memoizedProps,o=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break t;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){Zt(e,e.return,h)}}function Bf(e,i,a){try{var o=e.stateNode;YA(o,e.type,a,i),o[pe]=i}catch(h){Zt(e,e.return,h)}}function Ay(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Tr(e.type)||e.tag===4}function qf(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Ay(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Tr(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Hf(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(e),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=fc));else if(o!==4&&(o===27&&Tr(e.type)&&(a=e.stateNode,i=null),e=e.child,e!==null))for(Hf(e,i,a),e=e.sibling;e!==null;)Hf(e,i,a),e=e.sibling}function ec(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(o!==4&&(o===27&&Tr(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(ec(e,i,a),e=e.sibling;e!==null;)ec(e,i,a),e=e.sibling}function by(e){var i=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Be(i,o,a),i[Se]=e,i[pe]=a}catch(d){Zt(e,e.return,d)}}var Li=!1,de=!1,Ff=!1,Sy=typeof WeakSet=="function"?WeakSet:Set,Me=null;function CA(e,i){if(e=e.containerInfo,md=vc,e=Pg(e),Bh(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var v=0,E=-1,C=-1,j=0,Q=0,X=e,z=null;e:for(;;){for(var B;X!==a||h!==0&&X.nodeType!==3||(E=v+h),X!==d||o!==0&&X.nodeType!==3||(C=v+o),X.nodeType===3&&(v+=X.nodeValue.length),(B=X.firstChild)!==null;)z=X,X=B;for(;;){if(X===e)break e;if(z===a&&++j===h&&(E=v),z===d&&++Q===o&&(C=v),(B=X.nextSibling)!==null)break;X=z,z=X.parentNode}X=B}a=E===-1||C===-1?null:{start:E,end:C}}else a=null}a=a||{start:0,end:0}}else a=null;for(gd={focusedElem:e,selectionRange:a},vc=!1,Me=i;Me!==null;)if(i=Me,e=i.child,(i.subtreeFlags&1024)!==0&&e!==null)e.return=i,Me=e;else for(;Me!==null;){switch(i=Me,d=i.alternate,e=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,o=a.stateNode;try{var At=xs(a.type,h,a.elementType===a.type);e=o.getSnapshotBeforeUpdate(At,d),o.__reactInternalSnapshotBeforeUpdate=e}catch(yt){Zt(a,a.return,yt)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)_d(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":_d(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,Me=e;break}Me=i.return}}function wy(e,i,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:mr(e,a),o&4&&el(5,a);break;case 1:if(mr(e,a),o&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(v){Zt(a,a.return,v)}else{var h=xs(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(h,i,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Zt(a,a.return,v)}}o&64&&vy(a),o&512&&nl(a,a.return);break;case 3:if(mr(e,a),o&64&&(e=a.updateQueue,e!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{ap(e,i)}catch(v){Zt(a,a.return,v)}}break;case 27:i===null&&o&4&&by(a);case 26:case 5:mr(e,a),i===null&&o&4&&Ty(a),o&512&&nl(a,a.return);break;case 12:mr(e,a);break;case 13:mr(e,a),o&4&&Cy(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=UA.bind(null,a),eb(e,a))));break;case 22:if(o=a.memoizedState!==null||Li,!o){i=i!==null&&i.memoizedState!==null||de,h=Li;var d=de;Li=o,(de=i)&&!d?gr(e,a,(a.subtreeFlags&8772)!==0):mr(e,a),Li=h,de=d}break;case 30:break;default:mr(e,a)}}function Ry(e){var i=e.alternate;i!==null&&(e.alternate=null,Ry(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&nr(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ie=null,rn=!1;function ji(e,i,a){for(a=a.child;a!==null;)Iy(e,i,a),a=a.sibling}function Iy(e,i,a){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(le,a)}catch{}switch(a.tag){case 26:de||si(a,i),ji(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:de||si(a,i);var o=ie,h=rn;Tr(a.type)&&(ie=a.stateNode,rn=!1),ji(e,i,a),hl(a.stateNode),ie=o,rn=h;break;case 5:de||si(a,i);case 6:if(o=ie,h=rn,ie=null,ji(e,i,a),ie=o,rn=h,ie!==null)if(rn)try{(ie.nodeType===9?ie.body:ie.nodeName==="HTML"?ie.ownerDocument.body:ie).removeChild(a.stateNode)}catch(d){Zt(a,i,d)}else try{ie.removeChild(a.stateNode)}catch(d){Zt(a,i,d)}break;case 18:ie!==null&&(rn?(e=ie,g_(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),vl(e)):g_(ie,a.stateNode));break;case 4:o=ie,h=rn,ie=a.stateNode.containerInfo,rn=!0,ji(e,i,a),ie=o,rn=h;break;case 0:case 11:case 14:case 15:de||dr(2,a,i),de||dr(4,a,i),ji(e,i,a);break;case 1:de||(si(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"&&Ey(a,i,o)),ji(e,i,a);break;case 21:ji(e,i,a);break;case 22:de=(o=de)||a.memoizedState!==null,ji(e,i,a),de=o;break;default:ji(e,i,a)}}function Cy(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{vl(e)}catch(a){Zt(i,i.return,a)}}function xA(e){switch(e.tag){case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new Sy),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new Sy),i;default:throw Error(s(435,e.tag))}}function Gf(e,i){var a=xA(e);i.forEach(function(o){var h=LA.bind(null,e,o);a.has(o)||(a.add(o),o.then(h,h))})}function fn(e,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],d=e,v=i,E=v;t:for(;E!==null;){switch(E.tag){case 27:if(Tr(E.type)){ie=E.stateNode,rn=!1;break t}break;case 5:ie=E.stateNode,rn=!1;break t;case 3:case 4:ie=E.stateNode.containerInfo,rn=!0;break t}E=E.return}if(ie===null)throw Error(s(160));Iy(d,v,h),ie=null,rn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)xy(i,e),i=i.sibling}var Ln=null;function xy(e,i){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:fn(i,e),dn(e),o&4&&(dr(3,e,e.return),el(3,e),dr(5,e,e.return));break;case 1:fn(i,e),dn(e),o&512&&(de||a===null||si(a,a.return)),o&64&&Li&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=Ln;if(fn(i,e),dn(e),o&512&&(de||a===null||si(a,a.return)),o&4){var d=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){t:{o=e.type,a=e.memoizedProps,h=h.ownerDocument||h;e:switch(o){case"title":d=h.getElementsByTagName("title")[0],(!d||d[rs]||d[Se]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(o),h.head.insertBefore(d,h.querySelector("head > title"))),Be(d,o,a),d[Se]=e,he(d),o=d;break t;case"link":var v=b_("link","href",h).get(o+(a.href||""));if(v){for(var E=0;E<v.length;E++)if(d=v[E],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(E,1);break e}}d=h.createElement(o),Be(d,o,a),h.head.appendChild(d);break;case"meta":if(v=b_("meta","content",h).get(o+(a.content||""))){for(E=0;E<v.length;E++)if(d=v[E],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(E,1);break e}}d=h.createElement(o),Be(d,o,a),h.head.appendChild(d);break;default:throw Error(s(468,o))}d[Se]=e,he(d),o=d}e.stateNode=o}else S_(h,e.type,e.stateNode);else e.stateNode=A_(h,o,e.memoizedProps);else d!==o?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,o===null?S_(h,e.type,e.stateNode):A_(h,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Bf(e,e.memoizedProps,a.memoizedProps)}break;case 27:fn(i,e),dn(e),o&512&&(de||a===null||si(a,a.return)),a!==null&&o&4&&Bf(e,e.memoizedProps,a.memoizedProps);break;case 5:if(fn(i,e),dn(e),o&512&&(de||a===null||si(a,a.return)),e.flags&32){h=e.stateNode;try{Tn(h,"")}catch(B){Zt(e,e.return,B)}}o&4&&e.stateNode!=null&&(h=e.memoizedProps,Bf(e,h,a!==null?a.memoizedProps:h)),o&1024&&(Ff=!0);break;case 6:if(fn(i,e),dn(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(B){Zt(e,e.return,B)}}break;case 3:if(pc=null,h=Ln,Ln=mc(i.containerInfo),fn(i,e),Ln=h,dn(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{vl(i.containerInfo)}catch(B){Zt(e,e.return,B)}Ff&&(Ff=!1,Ny(e));break;case 4:o=Ln,Ln=mc(e.stateNode.containerInfo),fn(i,e),dn(e),Ln=o;break;case 12:fn(i,e),dn(e);break;case 13:fn(i,e),dn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Zf=vn()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Gf(e,o)));break;case 22:h=e.memoizedState!==null;var C=a!==null&&a.memoizedState!==null,j=Li,Q=de;if(Li=j||h,de=Q||C,fn(i,e),de=Q,Li=j,dn(e),o&8192)t:for(i=e.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||C||Li||de||Ns(e)),a=null,i=e;;){if(i.tag===5||i.tag===26){if(a===null){C=a=i;try{if(d=C.stateNode,h)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=C.stateNode;var X=C.memoizedProps.style,z=X!=null&&X.hasOwnProperty("display")?X.display:null;E.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(B){Zt(C,C.return,B)}}}else if(i.tag===6){if(a===null){C=i;try{C.stateNode.nodeValue=h?"":C.memoizedProps}catch(B){Zt(C,C.return,B)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,Gf(e,a))));break;case 19:fn(i,e),dn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Gf(e,o)));break;case 30:break;case 21:break;default:fn(i,e),dn(e)}}function dn(e){var i=e.flags;if(i&2){try{for(var a,o=e.return;o!==null;){if(Ay(o)){a=o;break}o=o.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=qf(e);ec(e,d,h);break;case 5:var v=a.stateNode;a.flags&32&&(Tn(v,""),a.flags&=-33);var E=qf(e);ec(e,E,v);break;case 3:case 4:var C=a.stateNode.containerInfo,j=qf(e);Hf(e,j,C);break;default:throw Error(s(161))}}catch(Q){Zt(e,e.return,Q)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function Ny(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;Ny(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function mr(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)wy(e,i.alternate,i),i=i.sibling}function Ns(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:dr(4,i,i.return),Ns(i);break;case 1:si(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Ey(i,i.return,a),Ns(i);break;case 27:hl(i.stateNode);case 26:case 5:si(i,i.return),Ns(i);break;case 22:i.memoizedState===null&&Ns(i);break;case 30:Ns(i);break;default:Ns(i)}e=e.sibling}}function gr(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,h=e,d=i,v=d.flags;switch(d.tag){case 0:case 11:case 15:gr(h,d,a),el(4,d);break;case 1:if(gr(h,d,a),o=d,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(j){Zt(o,o.return,j)}if(o=d,h=o.updateQueue,h!==null){var E=o.stateNode;try{var C=h.shared.hiddenCallbacks;if(C!==null)for(h.shared.hiddenCallbacks=null,h=0;h<C.length;h++)sp(C[h],E)}catch(j){Zt(o,o.return,j)}}a&&v&64&&vy(d),nl(d,d.return);break;case 27:by(d);case 26:case 5:gr(h,d,a),a&&o===null&&v&4&&Ty(d),nl(d,d.return);break;case 12:gr(h,d,a);break;case 13:gr(h,d,a),a&&v&4&&Cy(h,d);break;case 22:d.memoizedState===null&&gr(h,d,a),nl(d,d.return);break;case 30:break;default:gr(h,d,a)}i=i.sibling}}function Qf(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Bo(a))}function Kf(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Bo(e))}function ai(e,i,a,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Dy(e,i,a,o),i=i.sibling}function Dy(e,i,a,o){var h=i.flags;switch(i.tag){case 0:case 11:case 15:ai(e,i,a,o),h&2048&&el(9,i);break;case 1:ai(e,i,a,o);break;case 3:ai(e,i,a,o),h&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Bo(e)));break;case 12:if(h&2048){ai(e,i,a,o),e=i.stateNode;try{var d=i.memoizedProps,v=d.id,E=d.onPostCommit;typeof E=="function"&&E(v,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(C){Zt(i,i.return,C)}}else ai(e,i,a,o);break;case 13:ai(e,i,a,o);break;case 23:break;case 22:d=i.stateNode,v=i.alternate,i.memoizedState!==null?d._visibility&2?ai(e,i,a,o):il(e,i):d._visibility&2?ai(e,i,a,o):(d._visibility|=2,Sa(e,i,a,o,(i.subtreeFlags&10256)!==0)),h&2048&&Qf(v,i);break;case 24:ai(e,i,a,o),h&2048&&Kf(i.alternate,i);break;default:ai(e,i,a,o)}}function Sa(e,i,a,o,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var d=e,v=i,E=a,C=o,j=v.flags;switch(v.tag){case 0:case 11:case 15:Sa(d,v,E,C,h),el(8,v);break;case 23:break;case 22:var Q=v.stateNode;v.memoizedState!==null?Q._visibility&2?Sa(d,v,E,C,h):il(d,v):(Q._visibility|=2,Sa(d,v,E,C,h)),h&&j&2048&&Qf(v.alternate,v);break;case 24:Sa(d,v,E,C,h),h&&j&2048&&Kf(v.alternate,v);break;default:Sa(d,v,E,C,h)}i=i.sibling}}function il(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,o=i,h=o.flags;switch(o.tag){case 22:il(a,o),h&2048&&Qf(o.alternate,o);break;case 24:il(a,o),h&2048&&Kf(o.alternate,o);break;default:il(a,o)}i=i.sibling}}var rl=8192;function wa(e){if(e.subtreeFlags&rl)for(e=e.child;e!==null;)Oy(e),e=e.sibling}function Oy(e){switch(e.tag){case 26:wa(e),e.flags&rl&&e.memoizedState!==null&&mb(Ln,e.memoizedState,e.memoizedProps);break;case 5:wa(e);break;case 3:case 4:var i=Ln;Ln=mc(e.stateNode.containerInfo),wa(e),Ln=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=rl,rl=16777216,wa(e),rl=i):wa(e));break;default:wa(e)}}function Vy(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function sl(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Me=o,Py(o,e)}Vy(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)My(e),e=e.sibling}function My(e){switch(e.tag){case 0:case 11:case 15:sl(e),e.flags&2048&&dr(9,e,e.return);break;case 3:sl(e);break;case 12:sl(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,nc(e)):sl(e);break;default:sl(e)}}function nc(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Me=o,Py(o,e)}Vy(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:dr(8,i,i.return),nc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,nc(i));break;default:nc(i)}e=e.sibling}}function Py(e,i){for(;Me!==null;){var a=Me;switch(a.tag){case 0:case 11:case 15:dr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Bo(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,Me=o;else t:for(a=e;Me!==null;){o=Me;var h=o.sibling,d=o.return;if(Ry(o),o===a){Me=null;break t}if(h!==null){h.return=d,Me=h;break t}Me=d}}}var NA={getCacheForType:function(e){var i=Qe(Ie),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a}},DA=typeof WeakMap=="function"?WeakMap:Map,Gt=0,Jt=null,Nt=null,Ut=0,Qt=0,mn=null,pr=!1,Ra=!1,Yf=!1,zi=0,ce=0,yr=0,Ds=0,Xf=0,Nn=0,Ia=0,al=null,sn=null,$f=!1,Zf=0,ic=1/0,rc=null,_r=null,ze=0,vr=null,Ca=null,xa=0,Wf=0,Jf=null,ky=null,ol=0,td=null;function gn(){if((Gt&2)!==0&&Ut!==0)return Ut&-Ut;if(G.T!==null){var e=pa;return e!==0?e:od()}return tr()}function Uy(){Nn===0&&(Nn=(Ut&536870912)===0||Bt?po():536870912);var e=xn.current;return e!==null&&(e.flags|=32),Nn}function pn(e,i,a){(e===Jt&&(Qt===2||Qt===9)||e.cancelPendingCommit!==null)&&(Na(e,0),Er(e,Ut,Nn,!1)),_i(e,a),((Gt&2)===0||e!==Jt)&&(e===Jt&&((Gt&2)===0&&(Ds|=a),ce===4&&Er(e,Ut,Nn,!1)),oi(e))}function Ly(e,i,a){if((Gt&6)!==0)throw Error(s(327));var o=!a&&(i&124)===0&&(i&e.expiredLanes)===0||is(e,i),h=o?MA(e,i):id(e,i,!0),d=o;do{if(h===0){Ra&&!o&&Er(e,i,0,!1);break}else{if(a=e.current.alternate,d&&!OA(a)){h=id(e,i,!1),d=!1;continue}if(h===2){if(d=i,e.errorRecoveryDisabledLanes&d)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;t:{var E=e;h=al;var C=E.current.memoizedState.isDehydrated;if(C&&(Na(E,v).flags|=256),v=id(E,v,!1),v!==2){if(Yf&&!C){E.errorRecoveryDisabledLanes|=d,Ds|=d,h=4;break t}d=sn,sn=h,d!==null&&(sn===null?sn=d:sn.push.apply(sn,d))}h=v}if(d=!1,h!==2)continue}}if(h===1){Na(e,0),Er(e,i,0,!0);break}t:{switch(o=e,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Er(o,i,Nn,!pr);break t;case 2:sn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=Zf+300-vn(),10<h)){if(Er(o,i,Nn,!pr),Ks(o,0,!0)!==0)break t;o.timeoutHandle=d_(jy.bind(null,o,a,sn,rc,$f,i,Nn,Ds,Ia,pr,d,2,-0,0),h);break t}jy(o,a,sn,rc,$f,i,Nn,Ds,Ia,pr,d,0,-0,0)}}break}while(!0);oi(e)}function jy(e,i,a,o,h,d,v,E,C,j,Q,X,z,B){if(e.timeoutHandle=-1,X=i.subtreeFlags,(X&8192||(X&16785408)===16785408)&&(ml={stylesheets:null,count:0,unsuspend:db},Oy(i),X=gb(),X!==null)){e.cancelPendingCommit=X(Qy.bind(null,e,i,d,a,o,h,v,E,C,Q,1,z,B)),Er(e,d,v,!j);return}Qy(e,i,d,a,o,h,v,E,C)}function OA(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],d=h.getSnapshot;h=h.value;try{if(!cn(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Er(e,i,a,o){i&=~Xf,i&=~Ds,e.suspendedLanes|=i,e.pingedLanes&=~i,o&&(e.warmLanes|=i),o=e.expirationTimes;for(var h=i;0<h;){var d=31-Ge(h),v=1<<d;o[d]=-1,h&=~v}a!==0&&Qn(e,a,i)}function sc(){return(Gt&6)===0?(ll(0),!1):!0}function ed(){if(Nt!==null){if(Qt===0)var e=Nt.return;else e=Nt,Oi=ws=null,_f(e),Aa=null,Wo=0,e=Nt;for(;e!==null;)_y(e.alternate,e),e=e.return;Nt=null}}function Na(e,i){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,$A(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),ed(),Jt=e,Nt=a=xi(e.current,null),Ut=i,Qt=0,mn=null,pr=!1,Ra=is(e,i),Yf=!1,Ia=Nn=Xf=Ds=yr=ce=0,sn=al=null,$f=!1,(i&8)!==0&&(i|=i&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=i;0<o;){var h=31-Ge(o),d=1<<h;i|=e[h],o&=~d}return zi=i,Iu(),a}function zy(e,i){It=null,G.H=Qu,i===Ho||i===ku?(i=ip(),Qt=3):i===tp?(i=ip(),Qt=4):Qt=i===ry?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,mn=i,Nt===null&&(ce=1,Zu(e,wn(i,e.current)))}function By(){var e=G.H;return G.H=Qu,e===null?Qu:e}function qy(){var e=G.A;return G.A=NA,e}function nd(){ce=4,pr||(Ut&4194048)!==Ut&&xn.current!==null||(Ra=!0),(yr&134217727)===0&&(Ds&134217727)===0||Jt===null||Er(Jt,Ut,Nn,!1)}function id(e,i,a){var o=Gt;Gt|=2;var h=By(),d=qy();(Jt!==e||Ut!==i)&&(rc=null,Na(e,i)),i=!1;var v=ce;t:do try{if(Qt!==0&&Nt!==null){var E=Nt,C=mn;switch(Qt){case 8:ed(),v=6;break t;case 3:case 2:case 9:case 6:xn.current===null&&(i=!0);var j=Qt;if(Qt=0,mn=null,Da(e,E,C,j),a&&Ra){v=0;break t}break;default:j=Qt,Qt=0,mn=null,Da(e,E,C,j)}}VA(),v=ce;break}catch(Q){zy(e,Q)}while(!0);return i&&e.shellSuspendCounter++,Oi=ws=null,Gt=o,G.H=h,G.A=d,Nt===null&&(Jt=null,Ut=0,Iu()),v}function VA(){for(;Nt!==null;)Hy(Nt)}function MA(e,i){var a=Gt;Gt|=2;var o=By(),h=qy();Jt!==e||Ut!==i?(rc=null,ic=vn()+500,Na(e,i)):Ra=is(e,i);t:do try{if(Qt!==0&&Nt!==null){i=Nt;var d=mn;e:switch(Qt){case 1:Qt=0,mn=null,Da(e,i,d,1);break;case 2:case 9:if(ep(d)){Qt=0,mn=null,Fy(i);break}i=function(){Qt!==2&&Qt!==9||Jt!==e||(Qt=7),oi(e)},d.then(i,i);break t;case 3:Qt=7;break t;case 4:Qt=5;break t;case 7:ep(d)?(Qt=0,mn=null,Fy(i)):(Qt=0,mn=null,Da(e,i,d,7));break;case 5:var v=null;switch(Nt.tag){case 26:v=Nt.memoizedState;case 5:case 27:var E=Nt;if(!v||w_(v)){Qt=0,mn=null;var C=E.sibling;if(C!==null)Nt=C;else{var j=E.return;j!==null?(Nt=j,ac(j)):Nt=null}break e}}Qt=0,mn=null,Da(e,i,d,5);break;case 6:Qt=0,mn=null,Da(e,i,d,6);break;case 8:ed(),ce=6;break t;default:throw Error(s(462))}}PA();break}catch(Q){zy(e,Q)}while(!0);return Oi=ws=null,G.H=o,G.A=h,Gt=a,Nt!==null?0:(Jt=null,Ut=0,Iu(),ce)}function PA(){for(;Nt!==null&&!ho();)Hy(Nt)}function Hy(e){var i=py(e.alternate,e,zi);e.memoizedProps=e.pendingProps,i===null?ac(e):Nt=i}function Fy(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=cy(a,i,i.pendingProps,i.type,void 0,Ut);break;case 11:i=cy(a,i,i.pendingProps,i.type.render,i.ref,Ut);break;case 5:_f(i);default:_y(a,i),i=Nt=Gg(i,zi),i=py(a,i,zi)}e.memoizedProps=e.pendingProps,i===null?ac(e):Nt=i}function Da(e,i,a,o){Oi=ws=null,_f(i),Aa=null,Wo=0;var h=i.return;try{if(SA(e,h,i,a,Ut)){ce=1,Zu(e,wn(a,e.current)),Nt=null;return}}catch(d){if(h!==null)throw Nt=h,d;ce=1,Zu(e,wn(a,e.current)),Nt=null;return}i.flags&32768?(Bt||o===1?e=!0:Ra||(Ut&536870912)!==0?e=!1:(pr=e=!0,(o===2||o===9||o===3||o===6)&&(o=xn.current,o!==null&&o.tag===13&&(o.flags|=16384))),Gy(i,e)):ac(i)}function ac(e){var i=e;do{if((i.flags&32768)!==0){Gy(i,pr);return}e=i.return;var a=RA(i.alternate,i,zi);if(a!==null){Nt=a;return}if(i=i.sibling,i!==null){Nt=i;return}Nt=i=e}while(i!==null);ce===0&&(ce=5)}function Gy(e,i){do{var a=IA(e.alternate,e);if(a!==null){a.flags&=32767,Nt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){Nt=e;return}Nt=e=a}while(e!==null);ce=6,Nt=null}function Qy(e,i,a,o,h,d,v,E,C){e.cancelPendingCommit=null;do oc();while(ze!==0);if((Gt&6)!==0)throw Error(s(327));if(i!==null){if(i===e.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=Qh,_o(e,a,d,v,E,C),e===Jt&&(Nt=Jt=null,Ut=0),Ca=i,vr=e,xa=a,Wf=d,Jf=h,ky=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,jA(Jr,function(){return Zy(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=G.T,G.T=null,h=rt.p,rt.p=2,v=Gt,Gt|=4;try{CA(e,i,a)}finally{Gt=v,rt.p=h,G.T=o}}ze=1,Ky(),Yy(),Xy()}}function Ky(){if(ze===1){ze=0;var e=vr,i=Ca,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=G.T,G.T=null;var o=rt.p;rt.p=2;var h=Gt;Gt|=4;try{xy(i,e);var d=gd,v=Pg(e.containerInfo),E=d.focusedElem,C=d.selectionRange;if(v!==E&&E&&E.ownerDocument&&Mg(E.ownerDocument.documentElement,E)){if(C!==null&&Bh(E)){var j=C.start,Q=C.end;if(Q===void 0&&(Q=j),"selectionStart"in E)E.selectionStart=j,E.selectionEnd=Math.min(Q,E.value.length);else{var X=E.ownerDocument||document,z=X&&X.defaultView||window;if(z.getSelection){var B=z.getSelection(),At=E.textContent.length,yt=Math.min(C.start,At),$t=C.end===void 0?yt:Math.min(C.end,At);!B.extend&&yt>$t&&(v=$t,$t=yt,yt=v);var k=Vg(E,yt),M=Vg(E,$t);if(k&&M&&(B.rangeCount!==1||B.anchorNode!==k.node||B.anchorOffset!==k.offset||B.focusNode!==M.node||B.focusOffset!==M.offset)){var L=X.createRange();L.setStart(k.node,k.offset),B.removeAllRanges(),yt>$t?(B.addRange(L),B.extend(M.node,M.offset)):(L.setEnd(M.node,M.offset),B.addRange(L))}}}}for(X=[],B=E;B=B.parentNode;)B.nodeType===1&&X.push({element:B,left:B.scrollLeft,top:B.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<X.length;E++){var K=X[E];K.element.scrollLeft=K.left,K.element.scrollTop=K.top}}vc=!!md,gd=md=null}finally{Gt=h,rt.p=o,G.T=a}}e.current=i,ze=2}}function Yy(){if(ze===2){ze=0;var e=vr,i=Ca,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=G.T,G.T=null;var o=rt.p;rt.p=2;var h=Gt;Gt|=4;try{wy(e,i.alternate,i)}finally{Gt=h,rt.p=o,G.T=a}}ze=3}}function Xy(){if(ze===4||ze===3){ze=0,nu();var e=vr,i=Ca,a=xa,o=ky;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?ze=5:(ze=0,Ca=vr=null,$y(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(_r=null),Ys(a),i=i.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(le,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=G.T,h=rt.p,rt.p=2,G.T=null;try{for(var d=e.onRecoverableError,v=0;v<o.length;v++){var E=o[v];d(E.value,{componentStack:E.stack})}}finally{G.T=i,rt.p=h}}(xa&3)!==0&&oc(),oi(e),h=e.pendingLanes,(a&4194090)!==0&&(h&42)!==0?e===td?ol++:(ol=0,td=e):ol=0,ll(0)}}function $y(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,Bo(i)))}function oc(e){return Ky(),Yy(),Xy(),Zy()}function Zy(){if(ze!==5)return!1;var e=vr,i=Wf;Wf=0;var a=Ys(xa),o=G.T,h=rt.p;try{rt.p=32>a?32:a,G.T=null,a=Jf,Jf=null;var d=vr,v=xa;if(ze=0,Ca=vr=null,xa=0,(Gt&6)!==0)throw Error(s(331));var E=Gt;if(Gt|=4,My(d.current),Dy(d,d.current,v,a),Gt=E,ll(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(le,d)}catch{}return!0}finally{rt.p=h,G.T=o,$y(e,i)}}function Wy(e,i,a){i=wn(a,i),i=Of(e.stateNode,i,2),e=ur(e,i,2),e!==null&&(_i(e,2),oi(e))}function Zt(e,i,a){if(e.tag===3)Wy(e,e,a);else for(;i!==null;){if(i.tag===3){Wy(i,e,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(_r===null||!_r.has(o))){e=wn(a,e),a=ny(2),o=ur(i,a,2),o!==null&&(iy(a,o,i,e),_i(o,2),oi(o));break}}i=i.return}}function rd(e,i,a){var o=e.pingCache;if(o===null){o=e.pingCache=new DA;var h=new Set;o.set(i,h)}else h=o.get(i),h===void 0&&(h=new Set,o.set(i,h));h.has(a)||(Yf=!0,h.add(a),e=kA.bind(null,e,i,a),i.then(e,e))}function kA(e,i,a){var o=e.pingCache;o!==null&&o.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Jt===e&&(Ut&a)===a&&(ce===4||ce===3&&(Ut&62914560)===Ut&&300>vn()-Zf?(Gt&2)===0&&Na(e,0):Xf|=a,Ia===Ut&&(Ia=0)),oi(e)}function Jy(e,i){i===0&&(i=yo()),e=fa(e,i),e!==null&&(_i(e,i),oi(e))}function UA(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),Jy(e,a)}function LA(e,i){var a=0;switch(e.tag){case 13:var o=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(i),Jy(e,a)}function jA(e,i){return Zr(e,i)}var lc=null,Oa=null,sd=!1,uc=!1,ad=!1,Os=0;function oi(e){e!==Oa&&e.next===null&&(Oa===null?lc=Oa=e:Oa=Oa.next=e),uc=!0,sd||(sd=!0,BA())}function ll(e,i){if(!ad&&uc){ad=!0;do for(var a=!1,o=lc;o!==null;){if(e!==0){var h=o.pendingLanes;if(h===0)var d=0;else{var v=o.suspendedLanes,E=o.pingedLanes;d=(1<<31-Ge(42|e)+1)-1,d&=h&~(v&~E),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,i_(o,d))}else d=Ut,d=Ks(o,o===Jt?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(d&3)===0||is(o,d)||(a=!0,i_(o,d));o=o.next}while(a);ad=!1}}function zA(){t_()}function t_(){uc=sd=!1;var e=0;Os!==0&&(XA()&&(e=Os),Os=0);for(var i=vn(),a=null,o=lc;o!==null;){var h=o.next,d=e_(o,i);d===0?(o.next=null,a===null?lc=h:a.next=h,h===null&&(Oa=a)):(a=o,(e!==0||(d&3)!==0)&&(uc=!0)),o=h}ll(e)}function e_(e,i){for(var a=e.suspendedLanes,o=e.pingedLanes,h=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var v=31-Ge(d),E=1<<v,C=h[v];C===-1?((E&a)===0||(E&o)!==0)&&(h[v]=go(E,i)):C<=i&&(e.expiredLanes|=E),d&=~E}if(i=Jt,a=Ut,a=Ks(e,e===i?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===i&&(Qt===2||Qt===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&Wr(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||is(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(o!==null&&Wr(o),Ys(a)){case 2:case 8:a=Gs;break;case 32:a=Jr;break;case 268435456:a=Qs;break;default:a=Jr}return o=n_.bind(null,e),a=Zr(a,o),e.callbackPriority=i,e.callbackNode=a,i}return o!==null&&o!==null&&Wr(o),e.callbackPriority=2,e.callbackNode=null,2}function n_(e,i){if(ze!==0&&ze!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(oc()&&e.callbackNode!==a)return null;var o=Ut;return o=Ks(e,e===Jt?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(Ly(e,o,i),e_(e,vn()),e.callbackNode!=null&&e.callbackNode===a?n_.bind(null,e):null)}function i_(e,i){if(oc())return null;Ly(e,i,!0)}function BA(){ZA(function(){(Gt&6)!==0?Zr(fo,zA):t_()})}function od(){return Os===0&&(Os=po()),Os}function r_(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ta(""+e)}function s_(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function qA(e,i,a,o,h){if(i==="submit"&&a&&a.stateNode===h){var d=r_((h[pe]||null).action),v=o.submitter;v&&(i=(i=v[pe]||null)?r_(i.formAction):v.getAttribute("formAction"),i!==null&&(d=i,v=null));var E=new ea("action","action",null,o,h);e.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Os!==0){var C=v?s_(h,v):new FormData(h);If(a,{pending:!0,data:C,method:h.method,action:d},null,C)}}else typeof d=="function"&&(E.preventDefault(),C=v?s_(h,v):new FormData(h),If(a,{pending:!0,data:C,method:h.method,action:d},d,C))},currentTarget:h}]})}}for(var ld=0;ld<Gh.length;ld++){var ud=Gh[ld],HA=ud.toLowerCase(),FA=ud[0].toUpperCase()+ud.slice(1);Un(HA,"on"+FA)}Un(Lg,"onAnimationEnd"),Un(jg,"onAnimationIteration"),Un(zg,"onAnimationStart"),Un("dblclick","onDoubleClick"),Un("focusin","onFocus"),Un("focusout","onBlur"),Un(oA,"onTransitionRun"),Un(lA,"onTransitionStart"),Un(uA,"onTransitionCancel"),Un(Bg,"onTransitionEnd"),Ei("onMouseEnter",["mouseout","mouseover"]),Ei("onMouseLeave",["mouseout","mouseover"]),Ei("onPointerEnter",["pointerout","pointerover"]),Ei("onPointerLeave",["pointerout","pointerover"]),Pn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Pn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Pn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Pn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Pn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Pn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ul="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ul));function a_(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],h=o.event;o=o.listeners;t:{var d=void 0;if(i)for(var v=o.length-1;0<=v;v--){var E=o[v],C=E.instance,j=E.currentTarget;if(E=E.listener,C!==d&&h.isPropagationStopped())break t;d=E,h.currentTarget=j;try{d(h)}catch(Q){$u(Q)}h.currentTarget=null,d=C}else for(v=0;v<o.length;v++){if(E=o[v],C=E.instance,j=E.currentTarget,E=E.listener,C!==d&&h.isPropagationStopped())break t;d=E,h.currentTarget=j;try{d(h)}catch(Q){$u(Q)}h.currentTarget=null,d=C}}}}function Dt(e,i){var a=i[Eo];a===void 0&&(a=i[Eo]=new Set);var o=e+"__bubble";a.has(o)||(o_(i,e,2,!1),a.add(o))}function cd(e,i,a){var o=0;i&&(o|=4),o_(a,e,o,i)}var cc="_reactListening"+Math.random().toString(36).slice(2);function hd(e){if(!e[cc]){e[cc]=!0,To.forEach(function(a){a!=="selectionchange"&&(GA.has(a)||cd(a,!1,e),cd(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[cc]||(i[cc]=!0,cd("selectionchange",!1,i))}}function o_(e,i,a,o){switch(D_(i)){case 2:var h=_b;break;case 8:h=vb;break;default:h=wd}a=h.bind(null,i,a,e),h=void 0,!bn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),o?h!==void 0?e.addEventListener(i,a,{capture:!0,passive:h}):e.addEventListener(i,a,!0):h!==void 0?e.addEventListener(i,a,{passive:h}):e.addEventListener(i,a,!1)}function fd(e,i,a,o,h){var d=o;if((i&1)===0&&(i&2)===0&&o!==null)t:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var E=o.stateNode.containerInfo;if(E===h)break;if(v===4)for(v=o.return;v!==null;){var C=v.tag;if((C===3||C===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;E!==null;){if(v=vi(E),v===null)return;if(C=v.tag,C===5||C===6||C===26||C===27){o=d=v;continue t}E=E.parentNode}}o=o.return}fu(function(){var j=d,Q=An(a),X=[];t:{var z=qg.get(e);if(z!==void 0){var B=ea,At=e;switch(e){case"keypress":if(Wn(a)===0)break t;case"keydown":case"keyup":B=oa;break;case"focusin":At="focus",B=ra;break;case"focusout":At="blur",B=ra;break;case"beforeblur":case"afterblur":B=ra;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=Sn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=Uh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=Eu;break;case Lg:case jg:case zg:B=sa;break;case Bg:B=Au;break;case"scroll":case"scrollend":B=du;break;case"wheel":B=la;break;case"copy":case"cut":case"paste":B=aa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=Vo;break;case"toggle":case"beforetoggle":B=Su}var yt=(i&4)!==0,$t=!yt&&(e==="scroll"||e==="scrollend"),k=yt?z!==null?z+"Capture":null:z;yt=[];for(var M=j,L;M!==null;){var K=M;if(L=K.stateNode,K=K.tag,K!==5&&K!==26&&K!==27||L===null||k===null||(K=hs(M,k),K!=null&&yt.push(cl(M,K,L))),$t)break;M=M.return}0<yt.length&&(z=new B(z,At,null,a,Q),X.push({event:z,listeners:yt}))}}if((i&7)===0){t:{if(z=e==="mouseover"||e==="pointerover",B=e==="mouseout"||e==="pointerout",z&&a!==bi&&(At=a.relatedTarget||a.fromElement)&&(vi(At)||At[En]))break t;if((B||z)&&(z=Q.window===Q?Q:(z=Q.ownerDocument)?z.defaultView||z.parentWindow:window,B?(At=a.relatedTarget||a.toElement,B=j,At=At?vi(At):null,At!==null&&($t=c(At),yt=At.tag,At!==$t||yt!==5&&yt!==27&&yt!==6)&&(At=null)):(B=null,At=j),B!==At)){if(yt=Sn,K="onMouseLeave",k="onMouseEnter",M="mouse",(e==="pointerout"||e==="pointerover")&&(yt=Vo,K="onPointerLeave",k="onPointerEnter",M="pointer"),$t=B==null?z:Yn(B),L=At==null?z:Yn(At),z=new yt(K,M+"leave",B,a,Q),z.target=$t,z.relatedTarget=L,K=null,vi(Q)===j&&(yt=new yt(k,M+"enter",At,a,Q),yt.target=L,yt.relatedTarget=$t,K=yt),$t=K,B&&At)e:{for(yt=B,k=At,M=0,L=yt;L;L=Va(L))M++;for(L=0,K=k;K;K=Va(K))L++;for(;0<M-L;)yt=Va(yt),M--;for(;0<L-M;)k=Va(k),L--;for(;M--;){if(yt===k||k!==null&&yt===k.alternate)break e;yt=Va(yt),k=Va(k)}yt=null}else yt=null;B!==null&&l_(X,z,B,yt,!1),At!==null&&$t!==null&&l_(X,$t,At,yt,!0)}}t:{if(z=j?Yn(j):window,B=z.nodeName&&z.nodeName.toLowerCase(),B==="select"||B==="input"&&z.type==="file")var ut=Ig;else if(Re(z))if(Cg)ut=rA;else{ut=nA;var xt=eA}else B=z.nodeName,!B||B.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?j&&Ro(j.elementType)&&(ut=Ig):ut=iA;if(ut&&(ut=ut(e,j))){Ci(X,ut,a,Q);break t}xt&&xt(e,z,j),e==="focusout"&&j&&z.type==="number"&&j.memoizedProps.value!=null&&rr(z,"number",z.value)}switch(xt=j?Yn(j):window,e){case"focusin":(Re(xt)||xt.contentEditable==="true")&&(ua=xt,qh=j,ko=null);break;case"focusout":ko=qh=ua=null;break;case"mousedown":Hh=!0;break;case"contextmenu":case"mouseup":case"dragend":Hh=!1,kg(X,a,Q);break;case"selectionchange":if(aA)break;case"keydown":case"keyup":kg(X,a,Q)}var ft;if(ei)t:{switch(e){case"compositionstart":var _t="onCompositionStart";break t;case"compositionend":_t="onCompositionEnd";break t;case"compositionupdate":_t="onCompositionUpdate";break t}_t=void 0}else Pt?H(e,a)&&(_t="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(_t="onCompositionStart");_t&&(_&&a.locale!=="ko"&&(Pt||_t!=="onCompositionStart"?_t==="onCompositionEnd"&&Pt&&(ft=Co()):(Zn=Q,sr="value"in Zn?Zn.value:Zn.textContent,Pt=!0)),xt=hc(j,_t),0<xt.length&&(_t=new Do(_t,e,null,a,Q),X.push({event:_t,listeners:xt}),ft?_t.data=ft:(ft=it(a),ft!==null&&(_t.data=ft)))),(ft=m?we(e,a):kt(e,a))&&(_t=hc(j,"onBeforeInput"),0<_t.length&&(xt=new Do("onBeforeInput","beforeinput",null,a,Q),X.push({event:xt,listeners:_t}),xt.data=ft)),qA(X,e,j,a,Q)}a_(X,i)})}function cl(e,i,a){return{instance:e,listener:i,currentTarget:a}}function hc(e,i){for(var a=i+"Capture",o=[];e!==null;){var h=e,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=hs(e,a),h!=null&&o.unshift(cl(e,h,d)),h=hs(e,i),h!=null&&o.push(cl(e,h,d))),e.tag===3)return o;e=e.return}return[]}function Va(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function l_(e,i,a,o,h){for(var d=i._reactName,v=[];a!==null&&a!==o;){var E=a,C=E.alternate,j=E.stateNode;if(E=E.tag,C!==null&&C===o)break;E!==5&&E!==26&&E!==27||j===null||(C=j,h?(j=hs(a,d),j!=null&&v.unshift(cl(a,j,C))):h||(j=hs(a,d),j!=null&&v.push(cl(a,j,C)))),a=a.return}v.length!==0&&e.push({event:i,listeners:v})}var QA=/\r\n?/g,KA=/\u0000|\uFFFD/g;function u_(e){return(typeof e=="string"?e:""+e).replace(QA,`
`).replace(KA,"")}function c_(e,i){return i=u_(i),u_(e)===i}function fc(){}function Xt(e,i,a,o,h,d){switch(a){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||Tn(e,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&Tn(e,""+o);break;case"className":Xn(e,"class",o);break;case"tabIndex":Xn(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Xn(e,a,o);break;case"style":wo(e,o,d);break;case"data":if(i!=="object"){Xn(e,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=ta(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&Xt(e,i,"name",h.name,h,null),Xt(e,i,"formEncType",h.formEncType,h,null),Xt(e,i,"formMethod",h.formMethod,h,null),Xt(e,i,"formTarget",h.formTarget,h,null)):(Xt(e,i,"encType",h.encType,h,null),Xt(e,i,"method",h.method,h,null),Xt(e,i,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=ta(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=fc);break;case"onScroll":o!=null&&Dt("scroll",e);break;case"onScrollEnd":o!=null&&Dt("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=ta(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":Dt("beforetoggle",e),Dt("toggle",e),ir(e,"popover",o);break;case"xlinkActuate":Ue(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Ue(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Ue(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Ue(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Ue(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Ue(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Ue(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Ue(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Ue(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":ir(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Ph.get(a)||a,ir(e,a,o))}}function dd(e,i,a,o,h,d){switch(a){case"style":wo(e,o,d);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof o=="string"?Tn(e,o):(typeof o=="number"||typeof o=="bigint")&&Tn(e,""+o);break;case"onScroll":o!=null&&Dt("scroll",e);break;case"onScrollEnd":o!=null&&Dt("scrollend",e);break;case"onClick":o!=null&&(e.onclick=fc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xs.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=e[pe]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(i,d,h),typeof o=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,o,h);break t}a in e?e[a]=o:o===!0?e.setAttribute(a,""):ir(e,a,o)}}}function Be(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Dt("error",e),Dt("load",e);var o=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Xt(e,i,d,v,a,null)}}h&&Xt(e,i,"srcSet",a.srcSet,a,null),o&&Xt(e,i,"src",a.src,a,null);return;case"input":Dt("invalid",e);var E=d=v=h=null,C=null,j=null;for(o in a)if(a.hasOwnProperty(o)){var Q=a[o];if(Q!=null)switch(o){case"name":h=Q;break;case"type":v=Q;break;case"checked":C=Q;break;case"defaultChecked":j=Q;break;case"value":d=Q;break;case"defaultValue":E=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,i));break;default:Xt(e,i,o,Q,a,null)}}ls(e,d,E,C,j,v,h,!1),Js(e);return;case"select":Dt("invalid",e),o=v=d=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":d=E;break;case"defaultValue":v=E;break;case"multiple":o=E;default:Xt(e,i,h,E,a,null)}i=d,a=v,e.multiple=!!o,i!=null?Ai(e,!!o,i,!1):a!=null&&Ai(e,!!o,a,!0);return;case"textarea":Dt("invalid",e),d=h=o=null;for(v in a)if(a.hasOwnProperty(v)&&(E=a[v],E!=null))switch(v){case"value":o=E;break;case"defaultValue":h=E;break;case"children":d=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:Xt(e,i,v,E,a,null)}us(e,o,h,d),Js(e);return;case"option":for(C in a)if(a.hasOwnProperty(C)&&(o=a[C],o!=null))switch(C){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Xt(e,i,C,o,a,null)}return;case"dialog":Dt("beforetoggle",e),Dt("toggle",e),Dt("cancel",e),Dt("close",e);break;case"iframe":case"object":Dt("load",e);break;case"video":case"audio":for(o=0;o<ul.length;o++)Dt(ul[o],e);break;case"image":Dt("error",e),Dt("load",e);break;case"details":Dt("toggle",e);break;case"embed":case"source":case"link":Dt("error",e),Dt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in a)if(a.hasOwnProperty(j)&&(o=a[j],o!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Xt(e,i,j,o,a,null)}return;default:if(Ro(i)){for(Q in a)a.hasOwnProperty(Q)&&(o=a[Q],o!==void 0&&dd(e,i,Q,o,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(o=a[E],o!=null&&Xt(e,i,E,o,a,null))}function YA(e,i,a,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,v=null,E=null,C=null,j=null,Q=null;for(B in a){var X=a[B];if(a.hasOwnProperty(B)&&X!=null)switch(B){case"checked":break;case"value":break;case"defaultValue":C=X;default:o.hasOwnProperty(B)||Xt(e,i,B,null,o,X)}}for(var z in o){var B=o[z];if(X=a[z],o.hasOwnProperty(z)&&(B!=null||X!=null))switch(z){case"type":d=B;break;case"name":h=B;break;case"checked":j=B;break;case"defaultChecked":Q=B;break;case"value":v=B;break;case"defaultValue":E=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(137,i));break;default:B!==X&&Xt(e,i,z,B,o,X)}}un(e,v,E,C,j,Q,d,h);return;case"select":B=v=E=z=null;for(d in a)if(C=a[d],a.hasOwnProperty(d)&&C!=null)switch(d){case"value":break;case"multiple":B=C;default:o.hasOwnProperty(d)||Xt(e,i,d,null,o,C)}for(h in o)if(d=o[h],C=a[h],o.hasOwnProperty(h)&&(d!=null||C!=null))switch(h){case"value":z=d;break;case"defaultValue":E=d;break;case"multiple":v=d;default:d!==C&&Xt(e,i,h,d,o,C)}i=E,a=v,o=B,z!=null?Ai(e,!!a,z,!1):!!o!=!!a&&(i!=null?Ai(e,!!a,i,!0):Ai(e,!!a,a?[]:"",!1));return;case"textarea":B=z=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Xt(e,i,E,null,o,h)}for(v in o)if(h=o[v],d=a[v],o.hasOwnProperty(v)&&(h!=null||d!=null))switch(v){case"value":z=h;break;case"defaultValue":B=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&Xt(e,i,v,h,o,d)}Kt(e,z,B);return;case"option":for(var At in a)if(z=a[At],a.hasOwnProperty(At)&&z!=null&&!o.hasOwnProperty(At))switch(At){case"selected":e.selected=!1;break;default:Xt(e,i,At,null,o,z)}for(C in o)if(z=o[C],B=a[C],o.hasOwnProperty(C)&&z!==B&&(z!=null||B!=null))switch(C){case"selected":e.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:Xt(e,i,C,z,o,B)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var yt in a)z=a[yt],a.hasOwnProperty(yt)&&z!=null&&!o.hasOwnProperty(yt)&&Xt(e,i,yt,null,o,z);for(j in o)if(z=o[j],B=a[j],o.hasOwnProperty(j)&&z!==B&&(z!=null||B!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(s(137,i));break;default:Xt(e,i,j,z,o,B)}return;default:if(Ro(i)){for(var $t in a)z=a[$t],a.hasOwnProperty($t)&&z!==void 0&&!o.hasOwnProperty($t)&&dd(e,i,$t,void 0,o,z);for(Q in o)z=o[Q],B=a[Q],!o.hasOwnProperty(Q)||z===B||z===void 0&&B===void 0||dd(e,i,Q,z,o,B);return}}for(var k in a)z=a[k],a.hasOwnProperty(k)&&z!=null&&!o.hasOwnProperty(k)&&Xt(e,i,k,null,o,z);for(X in o)z=o[X],B=a[X],!o.hasOwnProperty(X)||z===B||z==null&&B==null||Xt(e,i,X,z,o,B)}var md=null,gd=null;function dc(e){return e.nodeType===9?e:e.ownerDocument}function h_(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function f_(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function pd(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var yd=null;function XA(){var e=window.event;return e&&e.type==="popstate"?e===yd?!1:(yd=e,!0):(yd=null,!1)}var d_=typeof setTimeout=="function"?setTimeout:void 0,$A=typeof clearTimeout=="function"?clearTimeout:void 0,m_=typeof Promise=="function"?Promise:void 0,ZA=typeof queueMicrotask=="function"?queueMicrotask:typeof m_<"u"?function(e){return m_.resolve(null).then(e).catch(WA)}:d_;function WA(e){setTimeout(function(){throw e})}function Tr(e){return e==="head"}function g_(e,i){var a=i,o=0,h=0;do{var d=a.nextSibling;if(e.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<o&&8>o){a=o;var v=e.ownerDocument;if(a&1&&hl(v.documentElement),a&2&&hl(v.body),a&4)for(a=v.head,hl(a),v=a.firstChild;v;){var E=v.nextSibling,C=v.nodeName;v[rs]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=E}}if(h===0){e.removeChild(d),vl(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:o=a.charCodeAt(0)-48;else o=0;a=d}while(a);vl(i)}function _d(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":_d(a),nr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function JA(e,i,a,o){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[rs])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=jn(e.nextSibling),e===null)break}return null}function tb(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=jn(e.nextSibling),e===null))return null;return e}function vd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function eb(e,i){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")i();else{var o=function(){i(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function jn(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return e}var Ed=null;function p_(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return e;i--}else a==="/$"&&i++}e=e.previousSibling}return null}function y_(e,i,a){switch(i=dc(a),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function hl(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);nr(e)}var Dn=new Map,__=new Set;function mc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Bi=rt.d;rt.d={f:nb,r:ib,D:rb,C:sb,L:ab,m:ob,X:ub,S:lb,M:cb};function nb(){var e=Bi.f(),i=sc();return e||i}function ib(e){var i=Kn(e);i!==null&&i.tag===5&&i.type==="form"?Lp(i):Bi.r(e)}var Ma=typeof document>"u"?null:document;function v_(e,i,a){var o=Ma;if(o&&typeof i=="string"&&i){var h=ye(i);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),__.has(h)||(__.add(h),e={rel:e,crossOrigin:a,href:i},o.querySelector(h)===null&&(i=o.createElement("link"),Be(i,"link",e),he(i),o.head.appendChild(i)))}}function rb(e){Bi.D(e),v_("dns-prefetch",e,null)}function sb(e,i){Bi.C(e,i),v_("preconnect",e,i)}function ab(e,i,a){Bi.L(e,i,a);var o=Ma;if(o&&e&&i){var h='link[rel="preload"][as="'+ye(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+ye(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+ye(a.imageSizes)+'"]')):h+='[href="'+ye(e)+'"]';var d=h;switch(i){case"style":d=Pa(e);break;case"script":d=ka(e)}Dn.has(d)||(e=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),Dn.set(d,e),o.querySelector(h)!==null||i==="style"&&o.querySelector(fl(d))||i==="script"&&o.querySelector(dl(d))||(i=o.createElement("link"),Be(i,"link",e),he(i),o.head.appendChild(i)))}}function ob(e,i){Bi.m(e,i);var a=Ma;if(a&&e){var o=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+ye(o)+'"][href="'+ye(e)+'"]',d=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=ka(e)}if(!Dn.has(d)&&(e=T({rel:"modulepreload",href:e},i),Dn.set(d,e),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(dl(d)))return}o=a.createElement("link"),Be(o,"link",e),he(o),a.head.appendChild(o)}}}function lb(e,i,a){Bi.S(e,i,a);var o=Ma;if(o&&e){var h=We(o).hoistableStyles,d=Pa(e);i=i||"default";var v=h.get(d);if(!v){var E={loading:0,preload:null};if(v=o.querySelector(fl(d)))E.loading=5;else{e=T({rel:"stylesheet",href:e,"data-precedence":i},a),(a=Dn.get(d))&&Td(e,a);var C=v=o.createElement("link");he(C),Be(C,"link",e),C._p=new Promise(function(j,Q){C.onload=j,C.onerror=Q}),C.addEventListener("load",function(){E.loading|=1}),C.addEventListener("error",function(){E.loading|=2}),E.loading|=4,gc(v,i,o)}v={type:"stylesheet",instance:v,count:1,state:E},h.set(d,v)}}}function ub(e,i){Bi.X(e,i);var a=Ma;if(a&&e){var o=We(a).hoistableScripts,h=ka(e),d=o.get(h);d||(d=a.querySelector(dl(h)),d||(e=T({src:e,async:!0},i),(i=Dn.get(h))&&Ad(e,i),d=a.createElement("script"),he(d),Be(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function cb(e,i){Bi.M(e,i);var a=Ma;if(a&&e){var o=We(a).hoistableScripts,h=ka(e),d=o.get(h);d||(d=a.querySelector(dl(h)),d||(e=T({src:e,async:!0,type:"module"},i),(i=Dn.get(h))&&Ad(e,i),d=a.createElement("script"),he(d),Be(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function E_(e,i,a,o){var h=(h=bt.current)?mc(h):null;if(!h)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Pa(a.href),a=We(h).hoistableStyles,o=a.get(i),o||(o={type:"style",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Pa(a.href);var d=We(h).hoistableStyles,v=d.get(e);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,v),(d=h.querySelector(fl(e)))&&!d._p&&(v.instance=d,v.state.loading=5),Dn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Dn.set(e,a),d||hb(h,e,a,v.state))),i&&o===null)throw Error(s(528,""));return v}if(i&&o!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=ka(a),a=We(h).hoistableScripts,o=a.get(i),o||(o={type:"script",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Pa(e){return'href="'+ye(e)+'"'}function fl(e){return'link[rel="stylesheet"]['+e+"]"}function T_(e){return T({},e,{"data-precedence":e.precedence,precedence:null})}function hb(e,i,a,o){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=e.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),Be(i,"link",a),he(i),e.head.appendChild(i))}function ka(e){return'[src="'+ye(e)+'"]'}function dl(e){return"script[async]"+e}function A_(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var o=e.querySelector('style[data-href~="'+ye(a.href)+'"]');if(o)return i.instance=o,he(o),o;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),he(o),Be(o,"style",h),gc(o,a.precedence,e),i.instance=o;case"stylesheet":h=Pa(a.href);var d=e.querySelector(fl(h));if(d)return i.state.loading|=4,i.instance=d,he(d),d;o=T_(a),(h=Dn.get(h))&&Td(o,h),d=(e.ownerDocument||e).createElement("link"),he(d);var v=d;return v._p=new Promise(function(E,C){v.onload=E,v.onerror=C}),Be(d,"link",o),i.state.loading|=4,gc(d,a.precedence,e),i.instance=d;case"script":return d=ka(a.src),(h=e.querySelector(dl(d)))?(i.instance=h,he(h),h):(o=a,(h=Dn.get(d))&&(o=T({},a),Ad(o,h)),e=e.ownerDocument||e,h=e.createElement("script"),he(h),Be(h,"link",o),e.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,gc(o,a.precedence,e));return i.instance}function gc(e,i,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,d=h,v=0;v<o.length;v++){var E=o[v];if(E.dataset.precedence===i)d=E;else if(d!==h)break}d?d.parentNode.insertBefore(e,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function Td(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function Ad(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var pc=null;function b_(e,i,a){if(pc===null){var o=new Map,h=pc=new Map;h.set(a,o)}else h=pc,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var d=a[h];if(!(d[rs]||d[Se]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(i)||"";v=e+v;var E=o.get(v);E?E.push(d):o.set(v,[d])}}return o}function S_(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function fb(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function w_(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var ml=null;function db(){}function mb(e,i,a){if(ml===null)throw Error(s(475));var o=ml;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=Pa(a.href),d=e.querySelector(fl(h));if(d){e=d._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(o.count++,o=yc.bind(o),e.then(o,o)),i.state.loading|=4,i.instance=d,he(d);return}d=e.ownerDocument||e,a=T_(a),(h=Dn.get(h))&&Td(a,h),d=d.createElement("link"),he(d);var v=d;v._p=new Promise(function(E,C){v.onload=E,v.onerror=C}),Be(d,"link",a),i.instance=d}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(i,e),(e=i.state.preload)&&(i.state.loading&3)===0&&(o.count++,i=yc.bind(o),e.addEventListener("load",i),e.addEventListener("error",i))}}function gb(){if(ml===null)throw Error(s(475));var e=ml;return e.stylesheets&&e.count===0&&bd(e,e.stylesheets),0<e.count?function(i){var a=setTimeout(function(){if(e.stylesheets&&bd(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(a)}}:null}function yc(){if(this.count--,this.count===0){if(this.stylesheets)bd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var _c=null;function bd(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,_c=new Map,i.forEach(pb,e),_c=null,yc.call(e))}function pb(e,i){if(!(i.state.loading&4)){var a=_c.get(e);if(a)var o=a.get(null);else{a=new Map,_c.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var v=h[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}h=i.instance,v=h.getAttribute("data-precedence"),d=a.get(v)||o,d===o&&a.set(null,h),a.set(v,h),this.count++,o=yc.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),d?d.parentNode.insertBefore(h,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),i.state.loading|=4}}var gl={$$typeof:tt,Provider:null,Consumer:null,_currentValue:dt,_currentValue2:dt,_threadCount:0};function yb(e,i,a,o,h,d,v,E){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=yi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yi(0),this.hiddenUpdates=yi(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function R_(e,i,a,o,h,d,v,E,C,j,Q,X){return e=new yb(e,i,a,v,E,C,j,X),i=1,d===!0&&(i|=24),d=hn(3,null,null,i),e.current=d,d.stateNode=e,i=rf(),i.refCount++,e.pooledCache=i,i.refCount++,d.memoizedState={element:o,isDehydrated:a,cache:i},lf(d),e}function I_(e){return e?(e=da,e):da}function C_(e,i,a,o,h,d){h=I_(h),o.context===null?o.context=h:o.pendingContext=h,o=lr(i),o.payload={element:a},d=d===void 0?null:d,d!==null&&(o.callback=d),a=ur(e,o,i),a!==null&&(pn(a,e,i),Go(a,e,i))}function x_(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function Sd(e,i){x_(e,i),(e=e.alternate)&&x_(e,i)}function N_(e){if(e.tag===13){var i=fa(e,67108864);i!==null&&pn(i,e,67108864),Sd(e,67108864)}}var vc=!0;function _b(e,i,a,o){var h=G.T;G.T=null;var d=rt.p;try{rt.p=2,wd(e,i,a,o)}finally{rt.p=d,G.T=h}}function vb(e,i,a,o){var h=G.T;G.T=null;var d=rt.p;try{rt.p=8,wd(e,i,a,o)}finally{rt.p=d,G.T=h}}function wd(e,i,a,o){if(vc){var h=Rd(o);if(h===null)fd(e,i,o,Ec,a),O_(e,o);else if(Tb(h,e,i,a,o))o.stopPropagation();else if(O_(e,o),i&4&&-1<Eb.indexOf(e)){for(;h!==null;){var d=Kn(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=Mn(d.pendingLanes);if(v!==0){var E=d;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var C=1<<31-Ge(v);E.entanglements[1]|=C,v&=~C}oi(d),(Gt&6)===0&&(ic=vn()+500,ll(0))}}break;case 13:E=fa(d,2),E!==null&&pn(E,d,2),sc(),Sd(d,2)}if(d=Rd(o),d===null&&fd(e,i,o,Ec,a),d===h)break;h=d}h!==null&&o.stopPropagation()}else fd(e,i,o,null,a)}}function Rd(e){return e=An(e),Id(e)}var Ec=null;function Id(e){if(Ec=null,e=vi(e),e!==null){var i=c(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=f(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return Ec=e,null}function D_(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xh()){case fo:return 2;case Gs:return 8;case Jr:case Nh:return 32;case Qs:return 268435456;default:return 32}default:return 32}}var Cd=!1,Ar=null,br=null,Sr=null,pl=new Map,yl=new Map,wr=[],Eb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function O_(e,i){switch(e){case"focusin":case"focusout":Ar=null;break;case"dragenter":case"dragleave":br=null;break;case"mouseover":case"mouseout":Sr=null;break;case"pointerover":case"pointerout":pl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":yl.delete(i.pointerId)}}function _l(e,i,a,o,h,d){return e===null||e.nativeEvent!==d?(e={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:d,targetContainers:[h]},i!==null&&(i=Kn(i),i!==null&&N_(i)),e):(e.eventSystemFlags|=o,i=e.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),e)}function Tb(e,i,a,o,h){switch(i){case"focusin":return Ar=_l(Ar,e,i,a,o,h),!0;case"dragenter":return br=_l(br,e,i,a,o,h),!0;case"mouseover":return Sr=_l(Sr,e,i,a,o,h),!0;case"pointerover":var d=h.pointerId;return pl.set(d,_l(pl.get(d)||null,e,i,a,o,h)),!0;case"gotpointercapture":return d=h.pointerId,yl.set(d,_l(yl.get(d)||null,e,i,a,o,h)),!0}return!1}function V_(e){var i=vi(e.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){e.blockedOn=i,su(e.priority,function(){if(a.tag===13){var o=gn();o=Ji(o);var h=fa(a,o);h!==null&&pn(h,a,o),Sd(a,o)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Tc(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=Rd(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);bi=o,a.target.dispatchEvent(o),bi=null}else return i=Kn(a),i!==null&&N_(i),e.blockedOn=a,!1;i.shift()}return!0}function M_(e,i,a){Tc(e)&&a.delete(i)}function Ab(){Cd=!1,Ar!==null&&Tc(Ar)&&(Ar=null),br!==null&&Tc(br)&&(br=null),Sr!==null&&Tc(Sr)&&(Sr=null),pl.forEach(M_),yl.forEach(M_)}function Ac(e,i){e.blockedOn===i&&(e.blockedOn=null,Cd||(Cd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ab)))}var bc=null;function P_(e){bc!==e&&(bc=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){bc===e&&(bc=null);for(var i=0;i<e.length;i+=3){var a=e[i],o=e[i+1],h=e[i+2];if(typeof o!="function"){if(Id(o||a)===null)continue;break}var d=Kn(a);d!==null&&(e.splice(i,3),i-=3,If(d,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function vl(e){function i(C){return Ac(C,e)}Ar!==null&&Ac(Ar,e),br!==null&&Ac(br,e),Sr!==null&&Ac(Sr,e),pl.forEach(i),yl.forEach(i);for(var a=0;a<wr.length;a++){var o=wr[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<wr.length&&(a=wr[0],a.blockedOn===null);)V_(a),a.blockedOn===null&&wr.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],d=a[o+1],v=h[pe]||null;if(typeof d=="function")v||P_(a);else if(v){var E=null;if(d&&d.hasAttribute("formAction")){if(h=d,v=d[pe]||null)E=v.formAction;else if(Id(h)!==null)continue}else E=v.action;typeof E=="function"?a[o+1]=E:(a.splice(o,3),o-=3),P_(a)}}}function xd(e){this._internalRoot=e}Sc.prototype.render=xd.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,o=gn();C_(a,o,e,i,null,null)},Sc.prototype.unmount=xd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;C_(e.current,2,null,e,null,null),sc(),i[En]=null}};function Sc(e){this._internalRoot=e}Sc.prototype.unstable_scheduleHydration=function(e){if(e){var i=tr();e={blockedOn:null,target:e,priority:i};for(var a=0;a<wr.length&&i!==0&&i<wr[a].priority;a++);wr.splice(a,0,e),a===0&&V_(e)}};var k_=t.version;if(k_!=="19.1.1")throw Error(s(527,k_,"19.1.1"));rt.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=p(i),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var bb={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wc.isDisabled&&wc.supportsFiber)try{le=wc.inject(bb),Ft=wc}catch{}}return Tl.createRoot=function(e,i){if(!l(e))throw Error(s(299));var a=!1,o="",h=Wp,d=Jp,v=ty,E=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(E=i.unstable_transitionCallbacks)),i=R_(e,1,!1,null,null,a,o,h,d,v,E,null),e[En]=i.current,hd(e),new xd(i)},Tl.hydrateRoot=function(e,i,a){if(!l(e))throw Error(s(299));var o=!1,h="",d=Wp,v=Jp,E=ty,C=null,j=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(C=a.unstable_transitionCallbacks),a.formState!==void 0&&(j=a.formState)),i=R_(e,1,!0,i,a??null,o,h,d,v,E,C,j),i.context=I_(null),a=i.current,o=gn(),o=Ji(o),h=lr(o),h.callback=null,ur(a,h,o),a=o,i.current.lanes=a,_i(i,a),oi(i),e[En]=i.current,hd(e),new Sc(i)},Tl.version="19.1.1",Tl}var Q_;function Mb(){if(Q_)return Od.exports;Q_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Od.exports=Vb(),Od.exports}var Pb=Mb();const kb=R0(Pb),Ub=()=>{};var K_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0=function(r){const t=[];let n=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?t[n++]=l:l<2048?(t[n++]=l>>6|192,t[n++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),t[n++]=l>>18|240,t[n++]=l>>12&63|128,t[n++]=l>>6&63|128,t[n++]=l&63|128):(t[n++]=l>>12|224,t[n++]=l>>6&63|128,t[n++]=l&63|128)}return t},Lb=function(r){const t=[];let n=0,s=0;for(;n<r.length;){const l=r[n++];if(l<128)t[s++]=String.fromCharCode(l);else if(l>191&&l<224){const c=r[n++];t[s++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=r[n++],f=r[n++],g=r[n++],p=((l&7)<<18|(c&63)<<12|(f&63)<<6|g&63)-65536;t[s++]=String.fromCharCode(55296+(p>>10)),t[s++]=String.fromCharCode(56320+(p&1023))}else{const c=r[n++],f=r[n++];t[s++]=String.fromCharCode((l&15)<<12|(c&63)<<6|f&63)}}return t.join("")},C0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const c=r[l],f=l+1<r.length,g=f?r[l+1]:0,p=l+2<r.length,y=p?r[l+2]:0,T=c>>2,w=(c&3)<<4|g>>4;let R=(g&15)<<2|y>>6,q=y&63;p||(q=64,f||(R=64)),s.push(n[T],n[w],n[R],n[q])}return s.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(I0(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):Lb(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const c=n[r.charAt(l++)],g=l<r.length?n[r.charAt(l)]:0;++l;const y=l<r.length?n[r.charAt(l)]:64;++l;const w=l<r.length?n[r.charAt(l)]:64;if(++l,c==null||g==null||y==null||w==null)throw new jb;const R=c<<2|g>>4;if(s.push(R),y!==64){const q=g<<4&240|y>>2;if(s.push(q),w!==64){const F=y<<6&192|w;s.push(F)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class jb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zb=function(r){const t=I0(r);return C0.encodeByteArray(t,!0)},qc=function(r){return zb(r).replace(/\./g,"")},x0=function(r){try{return C0.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb=()=>Bb().__FIREBASE_DEFAULTS__,Hb=()=>{if(typeof process>"u"||typeof K_>"u")return;const r=K_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Fb=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&x0(r[1]);return t&&JSON.parse(t)},ah=()=>{try{return Ub()||qb()||Hb()||Fb()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},N0=r=>{var t,n;return(n=(t=ah())==null?void 0:t.emulatorHosts)==null?void 0:n[r]},Gb=r=>{const t=N0(r);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},D0=()=>{var r;return(r=ah())==null?void 0:r.config},O0=r=>{var t;return(t=ah())==null?void 0:t[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function no(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function V0(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",l=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[qc(JSON.stringify(n)),qc(JSON.stringify(f)),""].join(".")}const Cl={};function Yb(){const r={prod:[],emulator:[]};for(const t of Object.keys(Cl))Cl[t]?r.emulator.push(t):r.prod.push(t);return r}function Xb(r){let t=document.getElementById(r),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),n=!0),{created:n,element:t}}let Y_=!1;function M0(r,t){if(typeof window>"u"||typeof document>"u"||!no(window.location.host)||Cl[r]===t||Cl[r]||Y_)return;Cl[r]=t;function n(R){return`__firebase__banner__${R}`}const s="__firebase__banner",c=Yb().prod.length>0;function f(){const R=document.getElementById(s);R&&R.remove()}function g(R){R.style.display="flex",R.style.background="#7faaf0",R.style.position="fixed",R.style.bottom="5px",R.style.left="5px",R.style.padding=".5em",R.style.borderRadius="5px",R.style.alignItems="center"}function p(R,q){R.setAttribute("width","24"),R.setAttribute("id",q),R.setAttribute("height","24"),R.setAttribute("viewBox","0 0 24 24"),R.setAttribute("fill","none"),R.style.marginLeft="-6px"}function y(){const R=document.createElement("span");return R.style.cursor="pointer",R.style.marginLeft="16px",R.style.fontSize="24px",R.innerHTML=" &times;",R.onclick=()=>{Y_=!0,f()},R}function T(R,q){R.setAttribute("id",q),R.innerText="Learn more",R.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",R.setAttribute("target","__blank"),R.style.paddingLeft="5px",R.style.textDecoration="underline"}function w(){const R=Xb(s),q=n("text"),F=document.getElementById(q)||document.createElement("span"),et=n("learnmore"),Z=document.getElementById(et)||document.createElement("a"),lt=n("preprendIcon"),J=document.getElementById(lt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(R.created){const tt=R.element;g(tt),T(Z,et);const ht=y();p(J,lt),tt.append(J,F,Z,ht),document.body.appendChild(tt)}c?(F.innerText="Preview backend disconnected.",J.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(J.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,F.innerText="Preview backend running in this workspace."),F.setAttribute("id",q)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ze(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $b(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ze())}function Zb(){var t;const r=(t=ah())==null?void 0:t.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Wb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Jb(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function tS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eS(){const r=Ze();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function nS(){return!Zb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function iS(){try{return typeof indexedDB=="object"}catch{return!1}}function rS(){return new Promise((r,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{var c;t(((c=l.error)==null?void 0:c.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS="FirebaseError";class $i extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=sS,Object.setPrototypeOf(this,$i.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gl.prototype.create)}}class Gl{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},l=`${this.service}/${t}`,c=this.errors[t],f=c?aS(c,s):"Error",g=`${this.serviceName}: ${f} (${l}).`;return new $i(l,g,s)}}function aS(r,t){return r.replace(oS,(n,s)=>{const l=t[s];return l!=null?String(l):`<${s}?>`})}const oS=/\{\$([^}]+)}/g;function lS(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function Us(r,t){if(r===t)return!0;const n=Object.keys(r),s=Object.keys(t);for(const l of n){if(!s.includes(l))return!1;const c=r[l],f=t[l];if(X_(c)&&X_(f)){if(!Us(c,f))return!1}else if(c!==f)return!1}for(const l of s)if(!n.includes(l))return!1;return!0}function X_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ql(r){const t=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function Al(r){const t={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[l,c]=s.split("=");t[decodeURIComponent(l)]=decodeURIComponent(c)}}),t}function bl(r){const t=r.indexOf("?");if(!t)return"";const n=r.indexOf("#",t);return r.substring(t,n>0?n:void 0)}function uS(r,t){const n=new cS(r,t);return n.subscribe.bind(n)}class cS{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,s){let l;if(t===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");hS(t,["next","error","complete"])?l=t:l={next:t,error:n,complete:s},l.next===void 0&&(l.next=kd),l.error===void 0&&(l.error=kd),l.complete===void 0&&(l.complete=kd);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hS(r,t){if(typeof r!="object"||r===null)return!1;for(const n of t)if(n in r&&typeof r[n]=="function")return!0;return!1}function kd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(r){return r&&r._delegate?r._delegate:r}class Ls{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new Qb;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(t==null?void 0:t.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(mS(t))try{this.getOrInitializeService({instanceIdentifier:Vs})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:l});s.resolve(c)}catch{}}}}clearInstance(t=Vs){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Vs){return this.instances.has(t)}getOptions(t=Vs){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,f]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);s===g&&f.resolve(l)}return l}onInit(t,n){const s=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(s)??new Set;l.add(t),this.onInitCallbacks.set(s,l);const c=this.instances.get(s);return c&&t(c,s),()=>{l.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const l of s)try{l(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:dS(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Vs){return this.component?this.component.multipleInstances?t:Vs:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dS(r){return r===Vs?void 0:r}function mS(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new fS(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ot||(Ot={}));const pS={debug:Ot.DEBUG,verbose:Ot.VERBOSE,info:Ot.INFO,warn:Ot.WARN,error:Ot.ERROR,silent:Ot.SILENT},yS=Ot.INFO,_S={[Ot.DEBUG]:"log",[Ot.VERBOSE]:"log",[Ot.INFO]:"info",[Ot.WARN]:"warn",[Ot.ERROR]:"error"},vS=(r,t,...n)=>{if(t<r.logLevel)return;const s=new Date().toISOString(),l=_S[t];if(l)console[l](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Im{constructor(t){this.name=t,this._logLevel=yS,this._logHandler=vS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ot))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?pS[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ot.DEBUG,...t),this._logHandler(this,Ot.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ot.VERBOSE,...t),this._logHandler(this,Ot.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ot.INFO,...t),this._logHandler(this,Ot.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ot.WARN,...t),this._logHandler(this,Ot.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ot.ERROR,...t),this._logHandler(this,Ot.ERROR,...t)}}const ES=(r,t)=>t.some(n=>r instanceof n);let $_,Z_;function TS(){return $_||($_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function AS(){return Z_||(Z_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const P0=new WeakMap,$d=new WeakMap,k0=new WeakMap,Ud=new WeakMap,Cm=new WeakMap;function bS(r){const t=new Promise((n,s)=>{const l=()=>{r.removeEventListener("success",c),r.removeEventListener("error",f)},c=()=>{n(Vr(r.result)),l()},f=()=>{s(r.error),l()};r.addEventListener("success",c),r.addEventListener("error",f)});return t.then(n=>{n instanceof IDBCursor&&P0.set(n,r)}).catch(()=>{}),Cm.set(t,r),t}function SS(r){if($d.has(r))return;const t=new Promise((n,s)=>{const l=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",f),r.removeEventListener("abort",f)},c=()=>{n(),l()},f=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",c),r.addEventListener("error",f),r.addEventListener("abort",f)});$d.set(r,t)}let Zd={get(r,t,n){if(r instanceof IDBTransaction){if(t==="done")return $d.get(r);if(t==="objectStoreNames")return r.objectStoreNames||k0.get(r);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Vr(r[t])},set(r,t,n){return r[t]=n,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function wS(r){Zd=r(Zd)}function RS(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=r.call(Ld(this),t,...n);return k0.set(s,t.sort?t.sort():[t]),Vr(s)}:AS().includes(r)?function(...t){return r.apply(Ld(this),t),Vr(P0.get(this))}:function(...t){return Vr(r.apply(Ld(this),t))}}function IS(r){return typeof r=="function"?RS(r):(r instanceof IDBTransaction&&SS(r),ES(r,TS())?new Proxy(r,Zd):r)}function Vr(r){if(r instanceof IDBRequest)return bS(r);if(Ud.has(r))return Ud.get(r);const t=IS(r);return t!==r&&(Ud.set(r,t),Cm.set(t,r)),t}const Ld=r=>Cm.get(r);function CS(r,t,{blocked:n,upgrade:s,blocking:l,terminated:c}={}){const f=indexedDB.open(r,t),g=Vr(f);return s&&f.addEventListener("upgradeneeded",p=>{s(Vr(f.result),p.oldVersion,p.newVersion,Vr(f.transaction),p)}),n&&f.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),g.then(p=>{c&&p.addEventListener("close",()=>c()),l&&p.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),g}const xS=["get","getKey","getAll","getAllKeys","count"],NS=["put","add","delete","clear"],jd=new Map;function W_(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(jd.get(t))return jd.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,l=NS.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||xS.includes(n)))return;const c=async function(f,...g){const p=this.transaction(f,l?"readwrite":"readonly");let y=p.store;return s&&(y=y.index(g.shift())),(await Promise.all([y[n](...g),l&&p.done]))[0]};return jd.set(t,c),c}wS(r=>({...r,get:(t,n,s)=>W_(t,n)||r.get(t,n,s),has:(t,n)=>!!W_(t,n)||r.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(OS(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function OS(r){const t=r.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Wd="@firebase/app",J_="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi=new Im("@firebase/app"),VS="@firebase/app-compat",MS="@firebase/analytics-compat",PS="@firebase/analytics",kS="@firebase/app-check-compat",US="@firebase/app-check",LS="@firebase/auth",jS="@firebase/auth-compat",zS="@firebase/database",BS="@firebase/data-connect",qS="@firebase/database-compat",HS="@firebase/functions",FS="@firebase/functions-compat",GS="@firebase/installations",QS="@firebase/installations-compat",KS="@firebase/messaging",YS="@firebase/messaging-compat",XS="@firebase/performance",$S="@firebase/performance-compat",ZS="@firebase/remote-config",WS="@firebase/remote-config-compat",JS="@firebase/storage",t1="@firebase/storage-compat",e1="@firebase/firestore",n1="@firebase/ai",i1="@firebase/firestore-compat",r1="firebase",s1="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jd="[DEFAULT]",a1={[Wd]:"fire-core",[VS]:"fire-core-compat",[PS]:"fire-analytics",[MS]:"fire-analytics-compat",[US]:"fire-app-check",[kS]:"fire-app-check-compat",[LS]:"fire-auth",[jS]:"fire-auth-compat",[zS]:"fire-rtdb",[BS]:"fire-data-connect",[qS]:"fire-rtdb-compat",[HS]:"fire-fn",[FS]:"fire-fn-compat",[GS]:"fire-iid",[QS]:"fire-iid-compat",[KS]:"fire-fcm",[YS]:"fire-fcm-compat",[XS]:"fire-perf",[$S]:"fire-perf-compat",[ZS]:"fire-rc",[WS]:"fire-rc-compat",[JS]:"fire-gcs",[t1]:"fire-gcs-compat",[e1]:"fire-fst",[i1]:"fire-fst-compat",[n1]:"fire-vertex","fire-js":"fire-js",[r1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc=new Map,o1=new Map,tm=new Map;function tv(r,t){try{r.container.addComponent(t)}catch(n){Qi.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,n)}}function Ka(r){const t=r.name;if(tm.has(t))return Qi.debug(`There were multiple attempts to register component ${t}.`),!1;tm.set(t,r);for(const n of Hc.values())tv(n,r);for(const n of o1.values())tv(n,r);return!0}function xm(r,t){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(t)}function zn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mr=new Gl("app","Firebase",l1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(t,n,s){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ls("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Mr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io=s1;function U0(r,t={}){let n=r;typeof t!="object"&&(t={name:t});const s={name:Jd,automaticDataCollectionEnabled:!0,...t},l=s.name;if(typeof l!="string"||!l)throw Mr.create("bad-app-name",{appName:String(l)});if(n||(n=D0()),!n)throw Mr.create("no-options");const c=Hc.get(l);if(c){if(Us(n,c.options)&&Us(s,c.config))return c;throw Mr.create("duplicate-app",{appName:l})}const f=new gS(l);for(const p of tm.values())f.addComponent(p);const g=new u1(n,s,f);return Hc.set(l,g),g}function L0(r=Jd){const t=Hc.get(r);if(!t&&r===Jd&&D0())return U0();if(!t)throw Mr.create("no-app",{appName:r});return t}function Pr(r,t,n){let s=a1[r]??r;n&&(s+=`-${n}`);const l=s.match(/\s|\//),c=t.match(/\s|\//);if(l||c){const f=[`Unable to register library "${s}" with version "${t}":`];l&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&c&&f.push("and"),c&&f.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Qi.warn(f.join(" "));return}Ka(new Ls(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1="firebase-heartbeat-database",h1=1,Ml="firebase-heartbeat-store";let zd=null;function j0(){return zd||(zd=CS(c1,h1,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(Ml)}catch(n){console.warn(n)}}}}).catch(r=>{throw Mr.create("idb-open",{originalErrorMessage:r.message})})),zd}async function f1(r){try{const n=(await j0()).transaction(Ml),s=await n.objectStore(Ml).get(z0(r));return await n.done,s}catch(t){if(t instanceof $i)Qi.warn(t.message);else{const n=Mr.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Qi.warn(n.message)}}}async function ev(r,t){try{const s=(await j0()).transaction(Ml,"readwrite");await s.objectStore(Ml).put(t,z0(r)),await s.done}catch(n){if(n instanceof $i)Qi.warn(n.message);else{const s=Mr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Qi.warn(s.message)}}}function z0(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1=1024,m1=30;class g1{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new y1(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var t,n;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=nv();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(f=>f.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:l}),this._heartbeatsCache.heartbeats.length>m1){const f=_1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Qi.warn(s)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=nv(),{heartbeatsToSend:s,unsentEntries:l}=p1(this._heartbeatsCache.heartbeats),c=qc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return Qi.warn(n),""}}}function nv(){return new Date().toISOString().substring(0,10)}function p1(r,t=d1){const n=[];let s=r.slice();for(const l of r){const c=n.find(f=>f.agent===l.agent);if(c){if(c.dates.push(l.date),iv(n)>t){c.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),iv(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class y1{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return iS()?rS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await f1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return ev(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return ev(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function iv(r){return qc(JSON.stringify({version:2,heartbeats:r})).length}function _1(r){if(r.length===0)return-1;let t=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(r){Ka(new Ls("platform-logger",t=>new DS(t),"PRIVATE")),Ka(new Ls("heartbeat",t=>new g1(t),"PRIVATE")),Pr(Wd,J_,r),Pr(Wd,J_,"esm2020"),Pr("fire-js","")}v1("");function B0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const E1=B0,q0=new Gl("auth","Firebase",B0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fc=new Im("@firebase/auth");function T1(r,...t){Fc.logLevel<=Ot.WARN&&Fc.warn(`Auth (${io}): ${r}`,...t)}function Oc(r,...t){Fc.logLevel<=Ot.ERROR&&Fc.error(`Auth (${io}): ${r}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(r,...t){throw Nm(r,...t)}function ui(r,...t){return Nm(r,...t)}function H0(r,t,n){const s={...E1(),[t]:n};return new Gl("auth","Firebase",s).create(t,{appName:r.name})}function kr(r){return H0(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Nm(r,...t){if(typeof r!="string"){const n=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return q0.create(r,...t)}function Et(r,t,...n){if(!r)throw Nm(t,...n)}function qi(r){const t="INTERNAL ASSERTION FAILED: "+r;throw Oc(t),new Error(t)}function Ki(r,t){r||qi(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function A1(){return rv()==="http:"||rv()==="https:"}function rv(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(A1()||Jb()||"connection"in navigator)?navigator.onLine:!0}function S1(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(t,n){this.shortDelay=t,this.longDelay=n,Ki(n>t,"Short delay should be less than long delay!"),this.isMobile=$b()||tS()}get(){return b1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(r,t){Ki(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{static initialize(t,n,s){this.fetchImpl=t,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],I1=new Kl(3e4,6e4);function qs(r,t){return r.tenantId&&!t.tenantId?{...t,tenantId:r.tenantId}:t}async function Zi(r,t,n,s,l={}){return G0(r,l,async()=>{let c={},f={};s&&(t==="GET"?f=s:c={body:JSON.stringify(s)});const g=Ql({key:r.config.apiKey,...f}).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const y={method:t,headers:p,...c};return Wb()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&no(r.emulatorConfig.host)&&(y.credentials="include"),F0.fetch()(await Q0(r,r.config.apiHost,n,g),y)})}async function G0(r,t,n){r._canInitEmulator=!1;const s={...w1,...t};try{const l=new x1(r),c=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const f=await c.json();if("needConfirmation"in f)throw Rc(r,"account-exists-with-different-credential",f);if(c.ok&&!("errorMessage"in f))return f;{const g=c.ok?f.errorMessage:f.error.message,[p,y]=g.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rc(r,"credential-already-in-use",f);if(p==="EMAIL_EXISTS")throw Rc(r,"email-already-in-use",f);if(p==="USER_DISABLED")throw Rc(r,"user-disabled",f);const T=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw H0(r,T,y);Hn(r,T)}}catch(l){if(l instanceof $i)throw l;Hn(r,"network-request-failed",{message:String(l)})}}async function oh(r,t,n,s,l={}){const c=await Zi(r,t,n,s,l);return"mfaPendingCredential"in c&&Hn(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function Q0(r,t,n,s){const l=`${t}${n}?${s}`,c=r,f=c.config.emulator?Dm(r.config,l):`${r.config.apiScheme}://${l}`;return R1.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(f).toString():f}function C1(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class x1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(ui(this.auth,"network-request-failed")),I1.get())})}}function Rc(r,t,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const l=ui(r,t,s);return l.customData._tokenResponse=n,l}function sv(r){return r!==void 0&&r.enterprise!==void 0}class N1{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return C1(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function D1(r,t){return Zi(r,"GET","/v2/recaptchaConfig",qs(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O1(r,t){return Zi(r,"POST","/v1/accounts:delete",t)}async function Gc(r,t){return Zi(r,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xl(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function V1(r,t=!1){const n=be(r),s=await n.getIdToken(t),l=Om(s);Et(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,f=c==null?void 0:c.sign_in_provider;return{claims:l,token:s,authTime:xl(Bd(l.auth_time)),issuedAtTime:xl(Bd(l.iat)),expirationTime:xl(Bd(l.exp)),signInProvider:f||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Bd(r){return Number(r)*1e3}function Om(r){const[t,n,s]=r.split(".");if(t===void 0||n===void 0||s===void 0)return Oc("JWT malformed, contained fewer than 3 sections"),null;try{const l=x0(n);return l?JSON.parse(l):(Oc("Failed to decode base64 JWT payload"),null)}catch(l){return Oc("Caught error parsing JWT payload as JSON",l==null?void 0:l.toString()),null}}function av(r){const t=Om(r);return Et(t,"internal-error"),Et(typeof t.exp<"u","internal-error"),Et(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ya(r,t,n=!1){if(n)return t;try{return await t}catch(s){throw s instanceof $i&&M1(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function M1({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=xl(this.lastLoginAt),this.creationTime=xl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qc(r){var w;const t=r.auth,n=await r.getIdToken(),s=await Ya(r,Gc(t,{idToken:n}));Et(s==null?void 0:s.users.length,t,"internal-error");const l=s.users[0];r._notifyReloadListener(l);const c=(w=l.providerUserInfo)!=null&&w.length?K0(l.providerUserInfo):[],f=U1(r.providerData,c),g=r.isAnonymous,p=!(r.email&&l.passwordHash)&&!(f!=null&&f.length),y=g?p:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new nm(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(r,T)}async function k1(r){const t=be(r);await Qc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function U1(r,t){return[...r.filter(s=>!t.some(l=>l.providerId===s.providerId)),...t]}function K0(r){return r.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L1(r,t){const n=await G0(r,{},async()=>{const s=Ql({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:l,apiKey:c}=r.config,f=await Q0(r,l,"/v1/token",`key=${c}`),g=await r._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:g,body:s};return r.emulatorConfig&&no(r.emulatorConfig.host)&&(p.credentials="include"),F0.fetch()(f,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function j1(r,t){return Zi(r,"POST","/v2/accounts:revokeToken",qs(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Et(t.idToken,"internal-error"),Et(typeof t.idToken<"u","internal-error"),Et(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):av(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Et(t.length!==0,"internal-error");const n=av(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Et(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:s,refreshToken:l,expiresIn:c}=await L1(t,n);this.updateTokensAndExpiration(s,l,Number(c))}updateTokensAndExpiration(t,n,s){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,n){const{refreshToken:s,accessToken:l,expirationTime:c}=n,f=new Ha;return s&&(Et(typeof s=="string","internal-error",{appName:t}),f.refreshToken=s),l&&(Et(typeof l=="string","internal-error",{appName:t}),f.accessToken=l),c&&(Et(typeof c=="number","internal-error",{appName:t}),f.expirationTime=c),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Ha,this.toJSON())}_performRefresh(){return qi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(r,t){Et(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class Bn{constructor({uid:t,auth:n,stsTokenManager:s,...l}){this.providerId="firebase",this.proactiveRefresh=new P1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new nm(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const n=await Ya(this,this.stsTokenManager.getToken(this.auth,t));return Et(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return V1(this,t)}reload(){return k1(this)}_assign(t){this!==t&&(Et(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Bn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){Et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),n&&await Qc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zn(this.auth.app))return Promise.reject(kr(this.auth));const t=await this.getIdToken();return await Ya(this,O1(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const s=n.displayName??void 0,l=n.email??void 0,c=n.phoneNumber??void 0,f=n.photoURL??void 0,g=n.tenantId??void 0,p=n._redirectEventId??void 0,y=n.createdAt??void 0,T=n.lastLoginAt??void 0,{uid:w,emailVerified:R,isAnonymous:q,providerData:F,stsTokenManager:et}=n;Et(w&&et,t,"internal-error");const Z=Ha.fromJSON(this.name,et);Et(typeof w=="string",t,"internal-error"),Ir(s,t.name),Ir(l,t.name),Et(typeof R=="boolean",t,"internal-error"),Et(typeof q=="boolean",t,"internal-error"),Ir(c,t.name),Ir(f,t.name),Ir(g,t.name),Ir(p,t.name),Ir(y,t.name),Ir(T,t.name);const lt=new Bn({uid:w,auth:t,email:l,emailVerified:R,displayName:s,isAnonymous:q,photoURL:f,phoneNumber:c,tenantId:g,stsTokenManager:Z,createdAt:y,lastLoginAt:T});return F&&Array.isArray(F)&&(lt.providerData=F.map(J=>({...J}))),p&&(lt._redirectEventId=p),lt}static async _fromIdTokenResponse(t,n,s=!1){const l=new Ha;l.updateFromServerResponse(n);const c=new Bn({uid:n.localId,auth:t,stsTokenManager:l,isAnonymous:s});return await Qc(c),c}static async _fromGetAccountInfoResponse(t,n,s){const l=n.users[0];Et(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?K0(l.providerUserInfo):[],f=!(l.email&&l.passwordHash)&&!(c!=null&&c.length),g=new Ha;g.updateFromIdToken(s);const p=new Bn({uid:l.localId,auth:t,stsTokenManager:g,isAnonymous:f}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new nm(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!(c!=null&&c.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov=new Map;function Hi(r){Ki(r instanceof Function,"Expected a class definition");let t=ov.get(r);return t?(Ki(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,ov.set(r,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}Y0.type="NONE";const lv=Y0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vc(r,t,n){return`firebase:${r}:${t}:${n}`}class Fa{constructor(t,n,s){this.persistence=t,this.auth=n,this.userKey=s;const{config:l,name:c}=this.auth;this.fullUserKey=Vc(this.userKey,l.apiKey,c),this.fullPersistenceKey=Vc("persistence",l.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await Gc(this.auth,{idToken:t}).catch(()=>{});return n?Bn._fromGetAccountInfoResponse(this.auth,n,t):null}return Bn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,s="authUser"){if(!n.length)return new Fa(Hi(lv),t,s);const l=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=l[0]||Hi(lv);const f=Vc(s,t.config.apiKey,t.name);let g=null;for(const y of n)try{const T=await y._get(f);if(T){let w;if(typeof T=="string"){const R=await Gc(t,{idToken:T}).catch(()=>{});if(!R)break;w=await Bn._fromGetAccountInfoResponse(t,R,T)}else w=Bn._fromJSON(t,T);y!==c&&(g=w),c=y;break}}catch{}const p=l.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!p.length?new Fa(c,t,s):(c=p[0],g&&await c._set(f,g.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(f)}catch{}})),new Fa(c,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(W0(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(X0(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(tE(t))return"Blackberry";if(eE(t))return"Webos";if($0(t))return"Safari";if((t.includes("chrome/")||Z0(t))&&!t.includes("edge/"))return"Chrome";if(J0(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function X0(r=Ze()){return/firefox\//i.test(r)}function $0(r=Ze()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Z0(r=Ze()){return/crios\//i.test(r)}function W0(r=Ze()){return/iemobile/i.test(r)}function J0(r=Ze()){return/android/i.test(r)}function tE(r=Ze()){return/blackberry/i.test(r)}function eE(r=Ze()){return/webos/i.test(r)}function Vm(r=Ze()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function z1(r=Ze()){var t;return Vm(r)&&!!((t=window.navigator)!=null&&t.standalone)}function B1(){return eS()&&document.documentMode===10}function nE(r=Ze()){return Vm(r)||J0(r)||eE(r)||tE(r)||/windows phone/i.test(r)||W0(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(r,t=[]){let n;switch(r){case"Browser":n=uv(Ze());break;case"Worker":n=`${uv(Ze())}-${r}`;break;default:n=r}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${io}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const s=c=>new Promise((f,g)=>{try{const p=t(c);f(p)}catch(p){g(p)}});s.onAbort=n,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const s of this.queue)await s(t),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H1(r,t={}){return Zi(r,"GET","/v2/passwordPolicy",qs(r,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1=6;class G1{constructor(t){var s;const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??F1,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=t.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=t.length>=s),l&&(n.meetsMaxPasswordLength=t.length<=l)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let l=0;l<t.length;l++)s=t.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,n,s,l,c){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(t,n,s,l){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cv(this),this.idTokenSubscription=new cv(this),this.beforeStateQueue=new q1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=q0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Hi(n)),this._initializationPromise=this.queue(async()=>{var s,l,c;if(!this._deleted&&(this.persistenceManager=await Fa.create(this,t),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((l=this._popupRedirectResolver)!=null&&l._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Gc(this,{idToken:t}),s=await Bn._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var c;if(zn(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(g,g))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(c=this.redirectUser)==null?void 0:c._redirectEventId,g=s==null?void 0:s._redirectEventId,p=await this.tryRedirectSignIn(t);(!f||f===g)&&(p!=null&&p.user)&&(s=p.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(f){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Et(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Qc(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=S1()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(zn(this.app))return Promise.reject(kr(this));const n=t?be(t):null;return n&&Et(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Et(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return zn(this.app)?Promise.reject(kr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return zn(this.app)?Promise.reject(kr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hi(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await H1(this),n=new G1(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Gl("auth","Firebase",t())}onAuthStateChanged(t,n,s){return this.registerStateListener(this.authStateSubscription,t,n,s)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,s){return this.registerStateListener(this.idTokenSubscription,t,n,s)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await j1(this,s)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,n){const s=await this.getOrInitRedirectPersistenceManager(n);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Hi(t)||this._popupRedirectResolver;Et(n,this,"argument-error"),this.redirectPersistenceManager=await Fa.create(this,[Hi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===t?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,s,l){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let f=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(Et(g,this,"internal-error"),g.then(()=>{f||c(this.currentUser)}),typeof n=="function"){const p=t.addObserver(n,s,l);return()=>{f=!0,p()}}else{const p=t.addObserver(n);return()=>{f=!0,p()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=iE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var l;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((l=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:l.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var n;if(zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return t!=null&&t.error&&T1(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function ro(r){return be(r)}class cv{constructor(t){this.auth=t,this.observer=null,this.addObserver=uS(n=>this.observer=n)}get next(){return Et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function K1(r){lh=r}function rE(r){return lh.loadJS(r)}function Y1(){return lh.recaptchaEnterpriseScript}function X1(){return lh.gapiScript}function $1(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class Z1{constructor(){this.enterprise=new W1}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class W1{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const J1="recaptcha-enterprise",sE="NO_RECAPTCHA";class tw{constructor(t){this.type=J1,this.auth=ro(t)}async verify(t="verify",n=!1){async function s(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(f,g)=>{D1(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const y=new N1(p);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,f(y.siteKey)}}).catch(p=>{g(p)})})}function l(c,f,g){const p=window.grecaptcha;sv(p)?p.enterprise.ready(()=>{p.enterprise.execute(c,{action:t}).then(y=>{f(y)}).catch(()=>{f(sE)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Z1().execute("siteKey",{action:"verify"}):new Promise((c,f)=>{s(this.auth).then(g=>{if(!n&&sv(window.grecaptcha))l(g,c,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let p=Y1();p.length!==0&&(p+=g),rE(p).then(()=>{l(g,c,f)}).catch(y=>{f(y)})}}).catch(g=>{f(g)})})}}async function hv(r,t,n,s=!1,l=!1){const c=new tw(r);let f;if(l)f=sE;else try{f=await c.verify(n)}catch{f=await c.verify(n,!0)}const g={...t};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const p=g.phoneEnrollmentInfo.phoneNumber,y=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const p=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return s?Object.assign(g,{captchaResp:f}):Object.assign(g,{captchaResponse:f}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function fv(r,t,n,s,l){var c;if((c=r._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await hv(r,t,n,n==="getOobCode");return s(r,f)}else return s(r,t).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const g=await hv(r,t,n,n==="getOobCode");return s(r,g)}else return Promise.reject(f)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(r,t){const n=xm(r,"auth");if(n.isInitialized()){const l=n.getImmediate(),c=n.getOptions();if(Us(c,t??{}))return l;Hn(l,"already-initialized")}return n.initialize({options:t})}function nw(r,t){const n=(t==null?void 0:t.persistence)||[],s=(Array.isArray(n)?n:[n]).map(Hi);t!=null&&t.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(s,t==null?void 0:t.popupRedirectResolver)}function iw(r,t,n){const s=ro(r);Et(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const l=!1,c=aE(t),{host:f,port:g}=rw(t),p=g===null?"":`:${g}`,y={url:`${c}//${f}${p}/`},T=Object.freeze({host:f,port:g,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){Et(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Et(Us(y,s.config.emulator)&&Us(T,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=T,s.settings.appVerificationDisabledForTesting=!0,no(f)?(V0(`${c}//${f}${p}`),M0("Auth",!0)):sw()}function aE(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function rw(r){const t=aE(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const c=l[1];return{host:c,port:dv(s.substr(c.length+1))}}else{const[c,f]=s.split(":");return{host:c,port:dv(f)}}}function dv(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function sw(){function r(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return qi("not implemented")}_getIdTokenResponse(t){return qi("not implemented")}_linkToIdToken(t,n){return qi("not implemented")}_getReauthenticationResolver(t){return qi("not implemented")}}async function aw(r,t){return Zi(r,"POST","/v1/accounts:update",t)}async function ow(r,t){return Zi(r,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lw(r,t){return oh(r,"POST","/v1/accounts:signInWithPassword",qs(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uw(r,t){return oh(r,"POST","/v1/accounts:signInWithEmailLink",qs(r,t))}async function cw(r,t){return oh(r,"POST","/v1/accounts:signInWithEmailLink",qs(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl extends Mm{constructor(t,n,s,l=null){super("password",s),this._email=t,this._password=n,this._tenantId=l}static _fromEmailAndPassword(t,n){return new Pl(t,n,"password")}static _fromEmailAndCode(t,n,s=null){return new Pl(t,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fv(t,n,"signInWithPassword",lw);case"emailLink":return uw(t,{email:this._email,oobCode:this._password});default:Hn(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fv(t,s,"signUpPassword",ow);case"emailLink":return cw(t,{idToken:n,email:this._email,oobCode:this._password});default:Hn(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ga(r,t){return oh(r,"POST","/v1/accounts:signInWithIdp",qs(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw="http://localhost";class js extends Mm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new js(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Hn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:l,...c}=n;if(!s||!l)return null;const f=new js(s,l);return f.idToken=c.idToken||void 0,f.accessToken=c.accessToken||void 0,f.secret=c.secret,f.nonce=c.nonce,f.pendingToken=c.pendingToken||null,f}_getIdTokenResponse(t){const n=this.buildRequest();return Ga(t,n)}_linkToIdToken(t,n){const s=this.buildRequest();return s.idToken=n,Ga(t,s)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Ga(t,n)}buildRequest(){const t={requestUri:hw,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Ql(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function dw(r){const t=Al(bl(r)).link,n=t?Al(bl(t)).deep_link_id:null,s=Al(bl(r)).deep_link_id;return(s?Al(bl(s)).link:null)||s||n||t||r}class Pm{constructor(t){const n=Al(bl(t)),s=n.apiKey??null,l=n.oobCode??null,c=fw(n.mode??null);Et(s&&l&&c,"argument-error"),this.apiKey=s,this.operation=c,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(t){const n=dw(t);try{return new Pm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(){this.providerId=so.PROVIDER_ID}static credential(t,n){return Pl._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const s=Pm.parseLink(n);return Et(s,"argument-error"),Pl._fromEmailAndCode(t,s.code,s.tenantId)}}so.PROVIDER_ID="password";so.EMAIL_PASSWORD_SIGN_IN_METHOD="password";so.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl extends oE{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr extends Yl{constructor(){super("facebook.com")}static credential(t){return js._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Cr.credentialFromTaggedObject(t)}static credentialFromError(t){return Cr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Cr.credential(t.oauthAccessToken)}catch{return null}}}Cr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Cr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends Yl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return js._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return xr.credentialFromTaggedObject(t)}static credentialFromError(t){return xr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:s}=t;if(!n&&!s)return null;try{return xr.credential(n,s)}catch{return null}}}xr.GOOGLE_SIGN_IN_METHOD="google.com";xr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends Yl{constructor(){super("github.com")}static credential(t){return js._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Nr.credentialFromTaggedObject(t)}static credentialFromError(t){return Nr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Nr.credential(t.oauthAccessToken)}catch{return null}}}Nr.GITHUB_SIGN_IN_METHOD="github.com";Nr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr extends Yl{constructor(){super("twitter.com")}static credential(t,n){return js._fromParams({providerId:Dr.PROVIDER_ID,signInMethod:Dr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Dr.credentialFromTaggedObject(t)}static credentialFromError(t){return Dr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=t;if(!n||!s)return null;try{return Dr.credential(n,s)}catch{return null}}}Dr.TWITTER_SIGN_IN_METHOD="twitter.com";Dr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,s,l=!1){const c=await Bn._fromIdTokenResponse(t,s,l),f=mv(s);return new Xa({user:c,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(t,n,s){await t._updateTokensIfNecessary(s,!0);const l=mv(s);return new Xa({user:t,providerId:l,_tokenResponse:s,operationType:n})}}function mv(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc extends $i{constructor(t,n,s,l){super(n.code,n.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,Kc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,n,s,l){return new Kc(t,n,s,l)}}function lE(r,t,n,s){return(t==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Kc._fromErrorAndOperation(r,c,t,s):c})}async function mw(r,t,n=!1){const s=await Ya(r,t._linkToIdToken(r.auth,await r.getIdToken()),n);return Xa._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gw(r,t,n=!1){const{auth:s}=r;if(zn(s.app))return Promise.reject(kr(s));const l="reauthenticate";try{const c=await Ya(r,lE(s,l,t,r),n);Et(c.idToken,s,"internal-error");const f=Om(c.idToken);Et(f,s,"internal-error");const{sub:g}=f;return Et(r.uid===g,s,"user-mismatch"),Xa._forOperation(r,l,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&Hn(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uE(r,t,n=!1){if(zn(r.app))return Promise.reject(kr(r));const s="signIn",l=await lE(r,s,t),c=await Xa._fromIdTokenResponse(r,s,l);return n||await r._updateCurrentUser(c.user),c}async function pw(r,t){return uE(ro(r),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yw(r){const t=ro(r);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function _w(r,t,n){return zn(r.app)?Promise.reject(kr(r)):pw(be(r),so.credential(t,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&yw(r),s})}function vw(r,t){return Ew(be(r),null,t)}async function Ew(r,t,n){const{auth:s}=r,c={idToken:await r.getIdToken(),returnSecureToken:!0};n&&(c.password=n);const f=await Ya(r,aw(s,c));await r._updateTokensIfNecessary(f,!0)}function Tw(r,t,n,s){return be(r).onIdTokenChanged(t,n,s)}function Aw(r,t,n){return be(r).beforeAuthStateChanged(t,n)}function bw(r,t,n,s){return be(r).onAuthStateChanged(t,n,s)}function Sw(r){return be(r).signOut()}const Yc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Yc,"1"),this.storage.removeItem(Yc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww=1e3,Rw=10;class hE extends cE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=nE(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),l=this.localCache[n];s!==l&&t(n,l,s)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((f,g,p)=>{this.notifyListeners(f,p)});return}const s=t.key;n?this.detachListener():this.stopPolling();const l=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},c=this.storage.getItem(s);B1()&&c!==t.newValue&&t.newValue!==t.oldValue?setTimeout(l,Rw):l()}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:s}),!0)})},ww)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}hE.type="LOCAL";const Iw=hE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE extends cE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}fE.type="SESSION";const dE=fE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(l=>l.isListeningto(t));if(n)return n;const s=new uh(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:s,eventType:l,data:c}=n.data,f=this.handlersMap[l];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const g=Array.from(f).map(async y=>y(n.origin,c)),p=await Cw(g);n.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:p})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}uh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(r="",t=10){let n="";for(let s=0;s<t;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,f;return new Promise((g,p)=>{const y=km("",20);l.port1.start();const T=setTimeout(()=>{p(new Error("unsupported_event"))},s);f={messageChannel:l,onMessage(w){const R=w;if(R.data.eventId===y)switch(R.data.status){case"ack":clearTimeout(T),c=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),g(R.data.response);break;default:clearTimeout(T),clearTimeout(c),p(new Error("invalid_response"));break}}},this.handlers.add(f),l.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:t,eventId:y,data:n},[l.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(){return window}function Nw(r){ci().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mE(){return typeof ci().WorkerGlobalScope<"u"&&typeof ci().importScripts=="function"}async function Dw(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ow(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function Vw(){return mE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE="firebaseLocalStorageDb",Mw=1,Xc="firebaseLocalStorage",pE="fbase_key";class Xl{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ch(r,t){return r.transaction([Xc],t?"readwrite":"readonly").objectStore(Xc)}function Pw(){const r=indexedDB.deleteDatabase(gE);return new Xl(r).toPromise()}function im(){const r=indexedDB.open(gE,Mw);return new Promise((t,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Xc,{keyPath:pE})}catch(l){n(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Xc)?t(s):(s.close(),await Pw(),t(await im()))})})}async function gv(r,t,n){const s=ch(r,!0).put({[pE]:t,value:n});return new Xl(s).toPromise()}async function kw(r,t){const n=ch(r,!1).get(t),s=await new Xl(n).toPromise();return s===void 0?null:s.value}function pv(r,t){const n=ch(r,!0).delete(t);return new Xl(n).toPromise()}const Uw=800,Lw=3;class yE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await im(),this.db)}async _withRetries(t){let n=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(n++>Lw)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=uh._getInstance(Vw()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var n,s;if(this.activeServiceWorker=await Dw(),!this.activeServiceWorker)return;this.sender=new xw(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(n=t[0])!=null&&n.fulfilled&&(s=t[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Ow()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await im();return await gv(t,Yc,"1"),await pv(t,Yc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>gv(s,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(s=>kw(s,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>pv(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(l=>{const c=ch(l,!1).getAll();return new Xl(c).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(t.length!==0)for(const{fbase_key:l,value:c}of t)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Uw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}yE.type="LOCAL";const jw=yE;new Kl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(r,t){return t?Hi(t):(Et(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um extends Mm{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ga(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Ga(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Ga(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function Bw(r){return uE(r.auth,new Um(r),r.bypassAuthState)}function qw(r){const{auth:t,user:n}=r;return Et(n,t,"internal-error"),gw(n,new Um(r),r.bypassAuthState)}async function Hw(r){const{auth:t,user:n}=r;return Et(n,t,"internal-error"),mw(n,new Um(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(t,n,s,l,c=!1){this.auth=t,this.resolver=s,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:s,postBody:l,tenantId:c,error:f,type:g}=t;if(f){this.reject(f);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(p))}catch(y){this.reject(y)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Bw;case"linkViaPopup":case"linkViaRedirect":return Hw;case"reauthViaPopup":case"reauthViaRedirect":return qw;default:Hn(this.auth,"internal-error")}}resolve(t){Ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw=new Kl(2e3,1e4);class Ba extends _E{constructor(t,n,s,l,c){super(t,n,l,c),this.provider=s,this.authWindow=null,this.pollId=null,Ba.currentPopupAction&&Ba.currentPopupAction.cancel(),Ba.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Et(t,this.auth,"internal-error"),t}async onExecution(){Ki(this.filter.length===1,"Popup operations only handle one event");const t=km();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ui(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(ui(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ba.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,s;if((s=(n=this.authWindow)==null?void 0:n.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ui(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Fw.get())};t()}}Ba.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw="pendingRedirect",Mc=new Map;class Qw extends _E{constructor(t,n,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let t=Mc.get(this.auth._key());if(!t){try{const s=await Kw(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(n){t=()=>Promise.reject(n)}Mc.set(this.auth._key(),t)}return this.bypassAuthState||Mc.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Kw(r,t){const n=$w(t),s=Xw(r);if(!await s._isAvailable())return!1;const l=await s._get(n)==="true";return await s._remove(n),l}function Yw(r,t){Mc.set(r._key(),t)}function Xw(r){return Hi(r._redirectPersistence)}function $w(r){return Vc(Gw,r.config.apiKey,r.name)}async function Zw(r,t,n=!1){if(zn(r.app))return Promise.reject(kr(r));const s=ro(r),l=zw(s,t),f=await new Qw(s,l,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,t)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww=600*1e3;class Jw{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(n=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!t2(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var s;if(t.error&&!vE(t)){const l=((s=t.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";n.onError(ui(this.auth,l))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const s=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Ww&&this.cachedEventUids.clear(),this.cachedEventUids.has(yv(t))}saveEventToCache(t){this.cachedEventUids.add(yv(t)),this.lastProcessedEventTime=Date.now()}}function yv(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function vE({type:r,error:t}){return r==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function t2(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vE(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e2(r,t={}){return Zi(r,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,i2=/^https?/;async function r2(r){if(r.config.emulator)return;const{authorizedDomains:t}=await e2(r);for(const n of t)try{if(s2(n))return}catch{}Hn(r,"unauthorized-domain")}function s2(r){const t=em(),{protocol:n,hostname:s}=new URL(t);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!i2.test(n))return!1;if(n2.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=new Kl(3e4,6e4);function _v(){const r=ci().___jsl;if(r!=null&&r.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function o2(r){return new Promise((t,n)=>{var l,c,f;function s(){_v(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{_v(),n(ui(r,"network-request-failed"))},timeout:a2.get()})}if((c=(l=ci().gapi)==null?void 0:l.iframes)!=null&&c.Iframe)t(gapi.iframes.getContext());else if((f=ci().gapi)!=null&&f.load)s();else{const g=$1("iframefcb");return ci()[g]=()=>{gapi.load?s():n(ui(r,"network-request-failed"))},rE(`${X1()}?onload=${g}`).catch(p=>n(p))}}).catch(t=>{throw Pc=null,t})}let Pc=null;function l2(r){return Pc=Pc||o2(r),Pc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2=new Kl(5e3,15e3),c2="__/auth/iframe",h2="emulator/auth/iframe",f2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},d2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function m2(r){const t=r.config;Et(t.authDomain,r,"auth-domain-config-required");const n=t.emulator?Dm(t,h2):`https://${r.config.authDomain}/${c2}`,s={apiKey:t.apiKey,appName:r.name,v:io},l=d2.get(r.config.apiHost);l&&(s.eid=l);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${Ql(s).slice(1)}`}async function g2(r){const t=await l2(r),n=ci().gapi;return Et(n,r,"internal-error"),t.open({where:document.body,url:m2(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:f2,dontclear:!0},s=>new Promise(async(l,c)=>{await s.restyle({setHideOnLeave:!1});const f=ui(r,"network-request-failed"),g=ci().setTimeout(()=>{c(f)},u2.get());function p(){ci().clearTimeout(g),l(s)}s.ping(p).then(p,()=>{c(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},y2=500,_2=600,v2="_blank",E2="http://localhost";class vv{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function T2(r,t,n,s=y2,l=_2){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let g="";const p={...p2,width:s.toString(),height:l.toString(),top:c,left:f},y=Ze().toLowerCase();n&&(g=Z0(y)?v2:n),X0(y)&&(t=t||E2,p.scrollbars="yes");const T=Object.entries(p).reduce((R,[q,F])=>`${R}${q}=${F},`,"");if(z1(y)&&g!=="_self")return A2(t||"",g),new vv(null);const w=window.open(t||"",g,T);Et(w,r,"popup-blocked");try{w.focus()}catch{}return new vv(w)}function A2(r,t){const n=document.createElement("a");n.href=r,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2="__/auth/handler",S2="emulator/auth/handler",w2=encodeURIComponent("fac");async function Ev(r,t,n,s,l,c){Et(r.config.authDomain,r,"auth-domain-config-required"),Et(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:io,eventId:l};if(t instanceof oE){t.setDefaultLanguage(r.languageCode),f.providerId=t.providerId||"",lS(t.getCustomParameters())||(f.customParameters=JSON.stringify(t.getCustomParameters()));for(const[T,w]of Object.entries({}))f[T]=w}if(t instanceof Yl){const T=t.getScopes().filter(w=>w!=="");T.length>0&&(f.scopes=T.join(","))}r.tenantId&&(f.tid=r.tenantId);const g=f;for(const T of Object.keys(g))g[T]===void 0&&delete g[T];const p=await r._getAppCheckToken(),y=p?`#${w2}=${encodeURIComponent(p)}`:"";return`${R2(r)}?${Ql(g).slice(1)}${y}`}function R2({config:r}){return r.emulator?Dm(r,S2):`https://${r.authDomain}/${b2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qd="webStorageSupport";class I2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dE,this._completeRedirectFn=Zw,this._overrideRedirectResult=Yw}async _openPopup(t,n,s,l){var f;Ki((f=this.eventManagers[t._key()])==null?void 0:f.manager,"_initialize() not called before _openPopup()");const c=await Ev(t,n,s,em(),l);return T2(t,c,km())}async _openRedirect(t,n,s,l){await this._originValidation(t);const c=await Ev(t,n,s,em(),l);return Nw(c),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:l,promise:c}=this.eventManagers[n];return l?Promise.resolve(l):(Ki(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(t);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(t){const n=await g2(t),s=new Jw(t);return n.register("authEvent",l=>(Et(l==null?void 0:l.authEvent,t,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=n,s}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(qd,{type:qd},l=>{var f;const c=(f=l==null?void 0:l[0])==null?void 0:f[qd];c!==void 0&&n(!!c),Hn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=r2(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return nE()||$0()||Vm()}}const C2=I2;var Tv="@firebase/auth",Av="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(s=>{t((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function D2(r){Ka(new Ls("auth",(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),l=t.getProvider("heartbeat"),c=t.getProvider("app-check-internal"),{apiKey:f,authDomain:g}=s.options;Et(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:f,authDomain:g,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:iE(r)},y=new Q1(s,l,c,p);return nw(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,s)=>{t.getProvider("auth-internal").initialize()})),Ka(new Ls("auth-internal",t=>{const n=ro(t.getProvider("auth").getImmediate());return(s=>new x2(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pr(Tv,Av,N2(r)),Pr(Tv,Av,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2=300,V2=O0("authIdTokenMaxAge")||O2;let bv=null;const M2=r=>async t=>{const n=t&&await t.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>V2)return;const l=n==null?void 0:n.token;bv!==l&&(bv=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function P2(r=L0()){const t=xm(r,"auth");if(t.isInitialized())return t.getImmediate();const n=ew(r,{popupRedirectResolver:C2,persistence:[jw,Iw,dE]}),s=O0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const f=M2(c.toString());Aw(n,f,()=>f(n.currentUser)),Tw(n,g=>f(g))}}const l=N0("auth");return l&&iw(n,`http://${l}`),n}function k2(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}K1({loadJS(r){return new Promise((t,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=t,s.onerror=l=>{const c=ui("internal-error");c.customData=l,n(c)},s.type="text/javascript",s.charset="UTF-8",k2().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});D2("Browser");var U2="firebase",L2="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pr(U2,L2,"app");var Sv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ur,EE;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(D,S){function b(){}b.prototype=S.prototype,D.D=S.prototype,D.prototype=new b,D.prototype.constructor=D,D.C=function(N,O,P){for(var I=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)I[ae-2]=arguments[ae];return S.prototype[O].apply(N,I)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(D,S,b){b||(b=0);var N=Array(16);if(typeof S=="string")for(var O=0;16>O;++O)N[O]=S.charCodeAt(b++)|S.charCodeAt(b++)<<8|S.charCodeAt(b++)<<16|S.charCodeAt(b++)<<24;else for(O=0;16>O;++O)N[O]=S[b++]|S[b++]<<8|S[b++]<<16|S[b++]<<24;S=D.g[0],b=D.g[1],O=D.g[2];var P=D.g[3],I=S+(P^b&(O^P))+N[0]+3614090360&4294967295;S=b+(I<<7&4294967295|I>>>25),I=P+(O^S&(b^O))+N[1]+3905402710&4294967295,P=S+(I<<12&4294967295|I>>>20),I=O+(b^P&(S^b))+N[2]+606105819&4294967295,O=P+(I<<17&4294967295|I>>>15),I=b+(S^O&(P^S))+N[3]+3250441966&4294967295,b=O+(I<<22&4294967295|I>>>10),I=S+(P^b&(O^P))+N[4]+4118548399&4294967295,S=b+(I<<7&4294967295|I>>>25),I=P+(O^S&(b^O))+N[5]+1200080426&4294967295,P=S+(I<<12&4294967295|I>>>20),I=O+(b^P&(S^b))+N[6]+2821735955&4294967295,O=P+(I<<17&4294967295|I>>>15),I=b+(S^O&(P^S))+N[7]+4249261313&4294967295,b=O+(I<<22&4294967295|I>>>10),I=S+(P^b&(O^P))+N[8]+1770035416&4294967295,S=b+(I<<7&4294967295|I>>>25),I=P+(O^S&(b^O))+N[9]+2336552879&4294967295,P=S+(I<<12&4294967295|I>>>20),I=O+(b^P&(S^b))+N[10]+4294925233&4294967295,O=P+(I<<17&4294967295|I>>>15),I=b+(S^O&(P^S))+N[11]+2304563134&4294967295,b=O+(I<<22&4294967295|I>>>10),I=S+(P^b&(O^P))+N[12]+1804603682&4294967295,S=b+(I<<7&4294967295|I>>>25),I=P+(O^S&(b^O))+N[13]+4254626195&4294967295,P=S+(I<<12&4294967295|I>>>20),I=O+(b^P&(S^b))+N[14]+2792965006&4294967295,O=P+(I<<17&4294967295|I>>>15),I=b+(S^O&(P^S))+N[15]+1236535329&4294967295,b=O+(I<<22&4294967295|I>>>10),I=S+(O^P&(b^O))+N[1]+4129170786&4294967295,S=b+(I<<5&4294967295|I>>>27),I=P+(b^O&(S^b))+N[6]+3225465664&4294967295,P=S+(I<<9&4294967295|I>>>23),I=O+(S^b&(P^S))+N[11]+643717713&4294967295,O=P+(I<<14&4294967295|I>>>18),I=b+(P^S&(O^P))+N[0]+3921069994&4294967295,b=O+(I<<20&4294967295|I>>>12),I=S+(O^P&(b^O))+N[5]+3593408605&4294967295,S=b+(I<<5&4294967295|I>>>27),I=P+(b^O&(S^b))+N[10]+38016083&4294967295,P=S+(I<<9&4294967295|I>>>23),I=O+(S^b&(P^S))+N[15]+3634488961&4294967295,O=P+(I<<14&4294967295|I>>>18),I=b+(P^S&(O^P))+N[4]+3889429448&4294967295,b=O+(I<<20&4294967295|I>>>12),I=S+(O^P&(b^O))+N[9]+568446438&4294967295,S=b+(I<<5&4294967295|I>>>27),I=P+(b^O&(S^b))+N[14]+3275163606&4294967295,P=S+(I<<9&4294967295|I>>>23),I=O+(S^b&(P^S))+N[3]+4107603335&4294967295,O=P+(I<<14&4294967295|I>>>18),I=b+(P^S&(O^P))+N[8]+1163531501&4294967295,b=O+(I<<20&4294967295|I>>>12),I=S+(O^P&(b^O))+N[13]+2850285829&4294967295,S=b+(I<<5&4294967295|I>>>27),I=P+(b^O&(S^b))+N[2]+4243563512&4294967295,P=S+(I<<9&4294967295|I>>>23),I=O+(S^b&(P^S))+N[7]+1735328473&4294967295,O=P+(I<<14&4294967295|I>>>18),I=b+(P^S&(O^P))+N[12]+2368359562&4294967295,b=O+(I<<20&4294967295|I>>>12),I=S+(b^O^P)+N[5]+4294588738&4294967295,S=b+(I<<4&4294967295|I>>>28),I=P+(S^b^O)+N[8]+2272392833&4294967295,P=S+(I<<11&4294967295|I>>>21),I=O+(P^S^b)+N[11]+1839030562&4294967295,O=P+(I<<16&4294967295|I>>>16),I=b+(O^P^S)+N[14]+4259657740&4294967295,b=O+(I<<23&4294967295|I>>>9),I=S+(b^O^P)+N[1]+2763975236&4294967295,S=b+(I<<4&4294967295|I>>>28),I=P+(S^b^O)+N[4]+1272893353&4294967295,P=S+(I<<11&4294967295|I>>>21),I=O+(P^S^b)+N[7]+4139469664&4294967295,O=P+(I<<16&4294967295|I>>>16),I=b+(O^P^S)+N[10]+3200236656&4294967295,b=O+(I<<23&4294967295|I>>>9),I=S+(b^O^P)+N[13]+681279174&4294967295,S=b+(I<<4&4294967295|I>>>28),I=P+(S^b^O)+N[0]+3936430074&4294967295,P=S+(I<<11&4294967295|I>>>21),I=O+(P^S^b)+N[3]+3572445317&4294967295,O=P+(I<<16&4294967295|I>>>16),I=b+(O^P^S)+N[6]+76029189&4294967295,b=O+(I<<23&4294967295|I>>>9),I=S+(b^O^P)+N[9]+3654602809&4294967295,S=b+(I<<4&4294967295|I>>>28),I=P+(S^b^O)+N[12]+3873151461&4294967295,P=S+(I<<11&4294967295|I>>>21),I=O+(P^S^b)+N[15]+530742520&4294967295,O=P+(I<<16&4294967295|I>>>16),I=b+(O^P^S)+N[2]+3299628645&4294967295,b=O+(I<<23&4294967295|I>>>9),I=S+(O^(b|~P))+N[0]+4096336452&4294967295,S=b+(I<<6&4294967295|I>>>26),I=P+(b^(S|~O))+N[7]+1126891415&4294967295,P=S+(I<<10&4294967295|I>>>22),I=O+(S^(P|~b))+N[14]+2878612391&4294967295,O=P+(I<<15&4294967295|I>>>17),I=b+(P^(O|~S))+N[5]+4237533241&4294967295,b=O+(I<<21&4294967295|I>>>11),I=S+(O^(b|~P))+N[12]+1700485571&4294967295,S=b+(I<<6&4294967295|I>>>26),I=P+(b^(S|~O))+N[3]+2399980690&4294967295,P=S+(I<<10&4294967295|I>>>22),I=O+(S^(P|~b))+N[10]+4293915773&4294967295,O=P+(I<<15&4294967295|I>>>17),I=b+(P^(O|~S))+N[1]+2240044497&4294967295,b=O+(I<<21&4294967295|I>>>11),I=S+(O^(b|~P))+N[8]+1873313359&4294967295,S=b+(I<<6&4294967295|I>>>26),I=P+(b^(S|~O))+N[15]+4264355552&4294967295,P=S+(I<<10&4294967295|I>>>22),I=O+(S^(P|~b))+N[6]+2734768916&4294967295,O=P+(I<<15&4294967295|I>>>17),I=b+(P^(O|~S))+N[13]+1309151649&4294967295,b=O+(I<<21&4294967295|I>>>11),I=S+(O^(b|~P))+N[4]+4149444226&4294967295,S=b+(I<<6&4294967295|I>>>26),I=P+(b^(S|~O))+N[11]+3174756917&4294967295,P=S+(I<<10&4294967295|I>>>22),I=O+(S^(P|~b))+N[2]+718787259&4294967295,O=P+(I<<15&4294967295|I>>>17),I=b+(P^(O|~S))+N[9]+3951481745&4294967295,D.g[0]=D.g[0]+S&4294967295,D.g[1]=D.g[1]+(O+(I<<21&4294967295|I>>>11))&4294967295,D.g[2]=D.g[2]+O&4294967295,D.g[3]=D.g[3]+P&4294967295}s.prototype.u=function(D,S){S===void 0&&(S=D.length);for(var b=S-this.blockSize,N=this.B,O=this.h,P=0;P<S;){if(O==0)for(;P<=b;)l(this,D,P),P+=this.blockSize;if(typeof D=="string"){for(;P<S;)if(N[O++]=D.charCodeAt(P++),O==this.blockSize){l(this,N),O=0;break}}else for(;P<S;)if(N[O++]=D[P++],O==this.blockSize){l(this,N),O=0;break}}this.h=O,this.o+=S},s.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var S=1;S<D.length-8;++S)D[S]=0;var b=8*this.o;for(S=D.length-8;S<D.length;++S)D[S]=b&255,b/=256;for(this.u(D),D=Array(16),S=b=0;4>S;++S)for(var N=0;32>N;N+=8)D[b++]=this.g[S]>>>N&255;return D};function c(D,S){var b=g;return Object.prototype.hasOwnProperty.call(b,D)?b[D]:b[D]=S(D)}function f(D,S){this.h=S;for(var b=[],N=!0,O=D.length-1;0<=O;O--){var P=D[O]|0;N&&P==S||(b[O]=P,N=!1)}this.g=b}var g={};function p(D){return-128<=D&&128>D?c(D,function(S){return new f([S|0],0>S?-1:0)}):new f([D|0],0>D?-1:0)}function y(D){if(isNaN(D)||!isFinite(D))return w;if(0>D)return Z(y(-D));for(var S=[],b=1,N=0;D>=b;N++)S[N]=D/b|0,b*=4294967296;return new f(S,0)}function T(D,S){if(D.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(D.charAt(0)=="-")return Z(T(D.substring(1),S));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=y(Math.pow(S,8)),N=w,O=0;O<D.length;O+=8){var P=Math.min(8,D.length-O),I=parseInt(D.substring(O,O+P),S);8>P?(P=y(Math.pow(S,P)),N=N.j(P).add(y(I))):(N=N.j(b),N=N.add(y(I)))}return N}var w=p(0),R=p(1),q=p(16777216);r=f.prototype,r.m=function(){if(et(this))return-Z(this).m();for(var D=0,S=1,b=0;b<this.g.length;b++){var N=this.i(b);D+=(0<=N?N:4294967296+N)*S,S*=4294967296}return D},r.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(F(this))return"0";if(et(this))return"-"+Z(this).toString(D);for(var S=y(Math.pow(D,6)),b=this,N="";;){var O=ht(b,S).g;b=lt(b,O.j(S));var P=((0<b.g.length?b.g[0]:b.h)>>>0).toString(D);if(b=O,F(b))return P+N;for(;6>P.length;)P="0"+P;N=P+N}},r.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function F(D){if(D.h!=0)return!1;for(var S=0;S<D.g.length;S++)if(D.g[S]!=0)return!1;return!0}function et(D){return D.h==-1}r.l=function(D){return D=lt(this,D),et(D)?-1:F(D)?0:1};function Z(D){for(var S=D.g.length,b=[],N=0;N<S;N++)b[N]=~D.g[N];return new f(b,~D.h).add(R)}r.abs=function(){return et(this)?Z(this):this},r.add=function(D){for(var S=Math.max(this.g.length,D.g.length),b=[],N=0,O=0;O<=S;O++){var P=N+(this.i(O)&65535)+(D.i(O)&65535),I=(P>>>16)+(this.i(O)>>>16)+(D.i(O)>>>16);N=I>>>16,P&=65535,I&=65535,b[O]=I<<16|P}return new f(b,b[b.length-1]&-2147483648?-1:0)};function lt(D,S){return D.add(Z(S))}r.j=function(D){if(F(this)||F(D))return w;if(et(this))return et(D)?Z(this).j(Z(D)):Z(Z(this).j(D));if(et(D))return Z(this.j(Z(D)));if(0>this.l(q)&&0>D.l(q))return y(this.m()*D.m());for(var S=this.g.length+D.g.length,b=[],N=0;N<2*S;N++)b[N]=0;for(N=0;N<this.g.length;N++)for(var O=0;O<D.g.length;O++){var P=this.i(N)>>>16,I=this.i(N)&65535,ae=D.i(O)>>>16,oe=D.i(O)&65535;b[2*N+2*O]+=I*oe,J(b,2*N+2*O),b[2*N+2*O+1]+=P*oe,J(b,2*N+2*O+1),b[2*N+2*O+1]+=I*ae,J(b,2*N+2*O+1),b[2*N+2*O+2]+=P*ae,J(b,2*N+2*O+2)}for(N=0;N<S;N++)b[N]=b[2*N+1]<<16|b[2*N];for(N=S;N<2*S;N++)b[N]=0;return new f(b,0)};function J(D,S){for(;(D[S]&65535)!=D[S];)D[S+1]+=D[S]>>>16,D[S]&=65535,S++}function tt(D,S){this.g=D,this.h=S}function ht(D,S){if(F(S))throw Error("division by zero");if(F(D))return new tt(w,w);if(et(D))return S=ht(Z(D),S),new tt(Z(S.g),Z(S.h));if(et(S))return S=ht(D,Z(S)),new tt(Z(S.g),S.h);if(30<D.g.length){if(et(D)||et(S))throw Error("slowDivide_ only works with positive integers.");for(var b=R,N=S;0>=N.l(D);)b=ct(b),N=ct(N);var O=gt(b,1),P=gt(N,1);for(N=gt(N,2),b=gt(b,2);!F(N);){var I=P.add(N);0>=I.l(D)&&(O=O.add(b),P=I),N=gt(N,1),b=gt(b,1)}return S=lt(D,O.j(S)),new tt(O,S)}for(O=w;0<=D.l(S);){for(b=Math.max(1,Math.floor(D.m()/S.m())),N=Math.ceil(Math.log(b)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),P=y(b),I=P.j(S);et(I)||0<I.l(D);)b-=N,P=y(b),I=P.j(S);F(P)&&(P=R),O=O.add(P),D=lt(D,I)}return new tt(O,D)}r.A=function(D){return ht(this,D).h},r.and=function(D){for(var S=Math.max(this.g.length,D.g.length),b=[],N=0;N<S;N++)b[N]=this.i(N)&D.i(N);return new f(b,this.h&D.h)},r.or=function(D){for(var S=Math.max(this.g.length,D.g.length),b=[],N=0;N<S;N++)b[N]=this.i(N)|D.i(N);return new f(b,this.h|D.h)},r.xor=function(D){for(var S=Math.max(this.g.length,D.g.length),b=[],N=0;N<S;N++)b[N]=this.i(N)^D.i(N);return new f(b,this.h^D.h)};function ct(D){for(var S=D.g.length+1,b=[],N=0;N<S;N++)b[N]=D.i(N)<<1|D.i(N-1)>>>31;return new f(b,D.h)}function gt(D,S){var b=S>>5;S%=32;for(var N=D.g.length-b,O=[],P=0;P<N;P++)O[P]=0<S?D.i(P+b)>>>S|D.i(P+b+1)<<32-S:D.i(P+b);return new f(O,D.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,EE=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=y,f.fromString=T,Ur=f}).apply(typeof Sv<"u"?Sv:typeof self<"u"?self:typeof window<"u"?window:{});var Ic=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var TE,Sl,AE,kc,rm,bE,SE,wE;(function(){var r,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,_){return u==Array.prototype||u==Object.prototype||(u[m]=_.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ic=="object"&&Ic];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function l(u,m){if(m)t:{var _=s;u=u.split(".");for(var A=0;A<u.length-1;A++){var U=u[A];if(!(U in _))break t;_=_[U]}u=u[u.length-1],A=_[u],m=m(A),m!=A&&m!=null&&t(_,u,{configurable:!0,writable:!0,value:m})}}function c(u,m){u instanceof String&&(u+="");var _=0,A=!1,U={next:function(){if(!A&&_<u.length){var H=_++;return{value:m(H,u[H]),done:!1}}return A=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}l("Array.prototype.values",function(u){return u||function(){return c(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},g=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function T(u,m,_){return u.call.apply(u.bind,arguments)}function w(u,m,_){if(!u)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,A),u.apply(m,U)}}return function(){return u.apply(m,arguments)}}function R(u,m,_){return R=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:w,R.apply(null,arguments)}function q(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function F(u,m){function _(){}_.prototype=m.prototype,u.aa=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(A,U,H){for(var it=Array(arguments.length-2),Pt=2;Pt<arguments.length;Pt++)it[Pt-2]=arguments[Pt];return m.prototype[U].apply(A,it)}}function et(u){const m=u.length;if(0<m){const _=Array(m);for(let A=0;A<m;A++)_[A]=u[A];return _}return[]}function Z(u,m){for(let _=1;_<arguments.length;_++){const A=arguments[_];if(p(A)){const U=u.length||0,H=A.length||0;u.length=U+H;for(let it=0;it<H;it++)u[U+it]=A[it]}else u.push(A)}}class lt{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function J(u){return/^[\s\xa0]*$/.test(u)}function tt(){var u=g.navigator;return u&&(u=u.userAgent)?u:""}function ht(u){return ht[" "](u),u}ht[" "]=function(){};var ct=tt().indexOf("Gecko")!=-1&&!(tt().toLowerCase().indexOf("webkit")!=-1&&tt().indexOf("Edge")==-1)&&!(tt().indexOf("Trident")!=-1||tt().indexOf("MSIE")!=-1)&&tt().indexOf("Edge")==-1;function gt(u,m,_){for(const A in u)m.call(_,u[A],A,u)}function D(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function S(u){const m={};for(const _ in u)m[_]=u[_];return m}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(u,m){let _,A;for(let U=1;U<arguments.length;U++){A=arguments[U];for(_ in A)u[_]=A[_];for(let H=0;H<b.length;H++)_=b[H],Object.prototype.hasOwnProperty.call(A,_)&&(u[_]=A[_])}}function O(u){var m=1;u=u.split(":");const _=[];for(;0<m&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function P(u){g.setTimeout(()=>{throw u},0)}function I(){var u=zt;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class ae{constructor(){this.h=this.g=null}add(m,_){const A=oe.get();A.set(m,_),this.h?this.h.next=A:this.g=A,this.h=A}}var oe=new lt(()=>new G,u=>u.reset());class G{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let rt,dt=!1,zt=new ae,V=()=>{const u=g.Promise.resolve(void 0);rt=()=>{u.then(W)}};var W=()=>{for(var u;u=I();){try{u.h.call(u.g)}catch(_){P(_)}var m=oe;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}dt=!1};function st(){this.s=this.s,this.C=this.C}st.prototype.s=!1,st.prototype.ma=function(){this.s||(this.s=!0,this.N())},st.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function nt(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}nt.prototype.h=function(){this.defaultPrevented=!0};var pt=(function(){if(!g.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};g.addEventListener("test",_,m),g.removeEventListener("test",_,m)}catch{}return u})();function Ct(u,m){if(nt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(ct){t:{try{ht(m.nodeName);var U=!0;break t}catch{}U=!1}U||(m=null)}}else _=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement);this.relatedTarget=m,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:bt[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ct.aa.h.call(this)}}F(Ct,nt);var bt={2:"touch",3:"pen",4:"mouse"};Ct.prototype.h=function(){Ct.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ne="closure_listenable_"+(1e6*Math.random()|0),Wt=0;function Gn(u,m,_,A,U){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!A,this.ha=U,this.key=++Wt,this.da=this.fa=!1}function Wi(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function pi(u){this.src=u,this.g={},this.h=0}pi.prototype.add=function(u,m,_,A,U){var H=u.toString();u=this.g[H],u||(u=this.g[H]=[],this.h++);var it=Zr(u,m,A,U);return-1<it?(m=u[it],_||(m.fa=!1)):(m=new Gn(m,this.src,H,!!A,U),m.fa=_,u.push(m)),m};function $r(u,m){var _=m.type;if(_ in u.g){var A=u.g[_],U=Array.prototype.indexOf.call(A,m,void 0),H;(H=0<=U)&&Array.prototype.splice.call(A,U,1),H&&(Wi(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Zr(u,m,_,A){for(var U=0;U<u.length;++U){var H=u[U];if(!H.da&&H.listener==m&&H.capture==!!_&&H.ha==A)return U}return-1}var Wr="closure_lm_"+(1e6*Math.random()|0),ho={};function nu(u,m,_,A,U){if(Array.isArray(m)){for(var H=0;H<m.length;H++)nu(u,m[H],_,A,U);return null}return _=iu(_),u&&u[Ne]?u.K(m,_,y(A)?!!A.capture:!1,U):vn(u,m,_,!1,A,U)}function vn(u,m,_,A,U,H){if(!m)throw Error("Invalid event type");var it=y(U)?!!U.capture:!!U,Pt=Qs(u);if(Pt||(u[Wr]=Pt=new pi(u)),_=Pt.add(m,_,A,it,H),_.proxy)return _;if(A=xh(),_.proxy=A,A.src=u,A.listener=_,u.addEventListener)pt||(U=it),U===void 0&&(U=!1),u.addEventListener(m.toString(),A,U);else if(u.attachEvent)u.attachEvent(Jr(m.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function xh(){function u(_){return m.call(u.src,u.listener,_)}const m=Nh;return u}function fo(u,m,_,A,U){if(Array.isArray(m))for(var H=0;H<m.length;H++)fo(u,m[H],_,A,U);else A=y(A)?!!A.capture:!!A,_=iu(_),u&&u[Ne]?(u=u.i,m=String(m).toString(),m in u.g&&(H=u.g[m],_=Zr(H,_,A,U),-1<_&&(Wi(H[_]),Array.prototype.splice.call(H,_,1),H.length==0&&(delete u.g[m],u.h--)))):u&&(u=Qs(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Zr(m,_,A,U)),(_=-1<u?m[u]:null)&&Gs(_))}function Gs(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Ne])$r(m.i,u);else{var _=u.type,A=u.proxy;m.removeEventListener?m.removeEventListener(_,A,u.capture):m.detachEvent?m.detachEvent(Jr(_),A):m.addListener&&m.removeListener&&m.removeListener(A),(_=Qs(m))?($r(_,u),_.h==0&&(_.src=null,m[Wr]=null)):Wi(u)}}}function Jr(u){return u in ho?ho[u]:ho[u]="on"+u}function Nh(u,m){if(u.da)u=!0;else{m=new Ct(m,this);var _=u.listener,A=u.ha||u.src;u.fa&&Gs(u),u=_.call(A,m)}return u}function Qs(u){return u=u[Wr],u instanceof pi?u:null}var mo="__closure_events_fn_"+(1e9*Math.random()>>>0);function iu(u){return typeof u=="function"?u:(u[mo]||(u[mo]=function(m){return u.handleEvent(m)}),u[mo])}function le(){st.call(this),this.i=new pi(this),this.M=this,this.F=null}F(le,st),le.prototype[Ne]=!0,le.prototype.removeEventListener=function(u,m,_,A){fo(this,u,m,_,A)};function Ft(u,m){var _,A=u.F;if(A)for(_=[];A;A=A.F)_.push(A);if(u=u.M,A=m.type||m,typeof m=="string")m=new nt(m,u);else if(m instanceof nt)m.target=m.target||u;else{var U=m;m=new nt(A,u),N(m,U)}if(U=!0,_)for(var H=_.length-1;0<=H;H--){var it=m.g=_[H];U=ln(it,A,!0,m)&&U}if(it=m.g=u,U=ln(it,A,!0,m)&&U,U=ln(it,A,!1,m)&&U,_)for(H=0;H<_.length;H++)it=m.g=_[H],U=ln(it,A,!1,m)&&U}le.prototype.N=function(){if(le.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var _=u.g[m],A=0;A<_.length;A++)Wi(_[A]);delete u.g[m],u.h--}}this.F=null},le.prototype.K=function(u,m,_,A){return this.i.add(String(u),m,!1,_,A)},le.prototype.L=function(u,m,_,A){return this.i.add(String(u),m,!0,_,A)};function ln(u,m,_,A){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var U=!0,H=0;H<m.length;++H){var it=m[H];if(it&&!it.da&&it.capture==_){var Pt=it.listener,we=it.ha||it.src;it.fa&&$r(u.i,it),U=Pt.call(we,A)!==!1&&U}}return U&&!A.defaultPrevented}function Ge(u,m,_){if(typeof u=="function")_&&(u=R(u,_));else if(u&&typeof u.handleEvent=="function")u=R(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:g.setTimeout(u,m||0)}function ru(u){u.g=Ge(()=>{u.g=null,u.i&&(u.i=!1,ru(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Dh extends st{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:ru(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ts(u){st.call(this),this.h=u,this.g={}}F(ts,st);var es=[];function ns(u){gt(u.g,function(m,_){this.g.hasOwnProperty(_)&&Gs(m)},u),u.g={}}ts.prototype.N=function(){ts.aa.N.call(this),ns(this)},ts.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Mn=g.JSON.stringify,Ks=g.JSON.parse,is=class{stringify(u){return g.JSON.stringify(u,void 0)}parse(u){return g.JSON.parse(u,void 0)}};function go(){}go.prototype.h=null;function po(u){return u.h||(u.h=u.i())}function yo(){}var yi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function _i(){nt.call(this,"d")}F(_i,nt);function _o(){nt.call(this,"c")}F(_o,nt);var Qn={},vo=null;function Ji(){return vo=vo||new le}Qn.La="serverreachability";function Ys(u){nt.call(this,Qn.La,u)}F(Ys,nt);function tr(u){const m=Ji();Ft(m,new Ys(m))}Qn.STAT_EVENT="statevent";function su(u,m){nt.call(this,Qn.STAT_EVENT,u),this.stat=m}F(su,nt);function ne(u){const m=Ji();Ft(m,new su(m,u))}Qn.Ma="timingevent";function Se(u,m){nt.call(this,Qn.Ma,u),this.size=m}F(Se,nt);function pe(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){u()},m)}function En(){this.g=!0}En.prototype.xa=function(){this.g=!1};function Eo(u,m,_,A,U,H){u.info(function(){if(u.g)if(H)for(var it="",Pt=H.split("&"),we=0;we<Pt.length;we++){var kt=Pt[we].split("=");if(1<kt.length){var Oe=kt[0];kt=kt[1];var Re=Oe.split("_");it=2<=Re.length&&Re[1]=="type"?it+(Oe+"="+kt+"&"):it+(Oe+"=redacted&")}}else it=null;else it=H;return"XMLHTTP REQ ("+A+") [attempt "+U+"]: "+m+`
`+_+`
`+it})}function Oh(u,m,_,A,U,H,it){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+U+"]: "+m+`
`+_+`
`+H+" "+it})}function er(u,m,_,A){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+rs(u,_)+(A?" "+A:"")})}function au(u,m){u.info(function(){return"TIMEOUT: "+m})}En.prototype.info=function(){};function rs(u,m){if(!u.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var A=_[u];if(!(2>A.length)){var U=A[1];if(Array.isArray(U)&&!(1>U.length)){var H=U[0];if(H!="noop"&&H!="stop"&&H!="close")for(var it=1;it<U.length;it++)U[it]=""}}}}return Mn(_)}catch{return m}}var nr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},vi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Kn;function Yn(){}F(Yn,go),Yn.prototype.g=function(){return new XMLHttpRequest},Yn.prototype.i=function(){return{}},Kn=new Yn;function We(u,m,_,A){this.j=u,this.i=m,this.l=_,this.R=A||1,this.U=new ts(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new he}function he(){this.i=null,this.g="",this.h=!1}var To={},Xs={};function Pn(u,m,_){u.L=1,u.v=us(un(m)),u.m=_,u.P=!0,Ei(u,null)}function Ei(u,m){u.F=Date.now(),ss(u),u.A=un(u.v);var _=u.A,A=u.R;Array.isArray(A)||(A=[String(A)]),Io(_.i,"t",A),u.C=0,_=u.j.J,u.h=new he,u.g=Au(u.j,_?m:null,!u.m),0<u.O&&(u.M=new Dh(R(u.Y,u,u.g),u.O)),m=u.U,_=u.g,A=u.ca;var U="readystatechange";Array.isArray(U)||(U&&(es[0]=U.toString()),U=es);for(var H=0;H<U.length;H++){var it=nu(_,U[H],A||m.handleEvent,!1,m.h||m);if(!it)break;m.g[it.key]=it}m=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),tr(),Eo(u.i,u.u,u.A,u.l,u.R,u.m)}We.prototype.ca=function(u){u=u.target;const m=this.M;m&&Sn(u)==3?m.j():this.Y(u)},We.prototype.Y=function(u){try{if(u==this.g)t:{const Re=Sn(this.g);var m=this.g.Ba();const Ci=this.g.Z();if(!(3>Re)&&(Re!=3||this.g&&(this.h.h||this.g.oa()||mu(this.g)))){this.J||Re!=4||m==7||(m==8||0>=Ci?tr(3):tr(2)),ir(this);var _=this.g.Z();this.X=_;e:if(ou(this)){var A=mu(this.g);u="";var U=A.length,H=Sn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ue(this),Xn(this);var it="";break e}this.h.i=new g.TextDecoder}for(m=0;m<U;m++)this.h.h=!0,u+=this.h.i.decode(A[m],{stream:!(H&&m==U-1)});A.length=0,this.h.g+=u,this.C=0,it=this.h.g}else it=this.g.oa();if(this.o=_==200,Oh(this.i,this.u,this.A,this.l,this.R,Re,_),this.o){if(this.T&&!this.K){e:{if(this.g){var Pt,we=this.g;if((Pt=we.g?we.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!J(Pt)){var kt=Pt;break e}}kt=null}if(_=kt)er(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,as(this,_);else{this.o=!1,this.s=3,ne(12),Ue(this),Xn(this);break t}}if(this.P){_=!0;let Le;for(;!this.J&&this.C<it.length;)if(Le=lu(this,it),Le==Xs){Re==4&&(this.s=4,ne(14),_=!1),er(this.i,this.l,null,"[Incomplete Response]");break}else if(Le==To){this.s=4,ne(15),er(this.i,this.l,it,"[Invalid Chunk]"),_=!1;break}else er(this.i,this.l,Le,null),as(this,Le);if(ou(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Re!=4||it.length!=0||this.h.h||(this.s=1,ne(16),_=!1),this.o=this.o&&_,!_)er(this.i,this.l,it,"[Invalid Chunked Response]"),Ue(this),Xn(this);else if(0<it.length&&!this.W){this.W=!0;var Oe=this.j;Oe.g==this&&Oe.ba&&!Oe.M&&(Oe.j.info("Great, no buffering proxy detected. Bytes received: "+it.length),ys(Oe),Oe.M=!0,ne(11))}}else er(this.i,this.l,it,null),as(this,it);Re==4&&Ue(this),this.o&&!this.J&&(Re==4?vu(this.j,this):(this.o=!1,ss(this)))}else Uh(this.g),_==400&&0<it.indexOf("Unknown SID")?(this.s=3,ne(12)):(this.s=0,ne(13)),Ue(this),Xn(this)}}}catch{}finally{}};function ou(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function lu(u,m){var _=u.C,A=m.indexOf(`
`,_);return A==-1?Xs:(_=Number(m.substring(_,A)),isNaN(_)?To:(A+=1,A+_>m.length?Xs:(m=m.slice(A,A+_),u.C=A+_,m)))}We.prototype.cancel=function(){this.J=!0,Ue(this)};function ss(u){u.S=Date.now()+u.I,uu(u,u.I)}function uu(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=pe(R(u.ba,u),m)}function ir(u){u.B&&(g.clearTimeout(u.B),u.B=null)}We.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(au(this.i,this.A),this.L!=2&&(tr(),ne(17)),Ue(this),this.s=2,Xn(this)):uu(this,this.S-u)};function Xn(u){u.j.G==0||u.J||vu(u.j,u)}function Ue(u){ir(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,ns(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function as(u,m){try{var _=u.j;if(_.G!=0&&(_.g==u||Ao(_.h,u))){if(!u.K&&Ao(_.h,u)&&_.G==3){try{var A=_.Da.g.parse(m)}catch{A=null}if(Array.isArray(A)&&A.length==3){var U=A;if(U[0]==0){t:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)oa(_),sa(_);else break t;Oo(_),ne(18)}}else _.za=U[1],0<_.za-_.T&&37500>U[2]&&_.F&&_.v==0&&!_.C&&(_.C=pe(R(_.Za,_),6e3));if(1>=Zs(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Ii(_,11)}else if((u.K||_.g==u)&&oa(_),!J(m))for(U=_.Da.g.parse(m),m=0;m<U.length;m++){let kt=U[m];if(_.T=kt[0],kt=kt[1],_.G==2)if(kt[0]=="c"){_.K=kt[1],_.ia=kt[2];const Oe=kt[3];Oe!=null&&(_.la=Oe,_.j.info("VER="+_.la));const Re=kt[4];Re!=null&&(_.Aa=Re,_.j.info("SVER="+_.Aa));const Ci=kt[5];Ci!=null&&typeof Ci=="number"&&0<Ci&&(A=1.5*Ci,_.L=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const Le=u.g;if(Le){const ni=Le.g?Le.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ni){var H=A.h;H.g||ni.indexOf("spdy")==-1&&ni.indexOf("quic")==-1&&ni.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Ws(H,H.h),H.h=null))}if(A.D){const Mo=Le.g?Le.g.getResponseHeader("X-HTTP-Session-Id"):null;Mo&&(A.ya=Mo,Kt(A.I,A.D,Mo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),A=_;var it=u;if(A.qa=Tu(A,A.J?A.ia:null,A.W),it.K){Je(A.h,it);var Pt=it,we=A.L;we&&(Pt.I=we),Pt.B&&(ir(Pt),ss(Pt)),A.g=it}else yu(A);0<_.i.length&&aa(_)}else kt[0]!="stop"&&kt[0]!="close"||Ii(_,7);else _.G==3&&(kt[0]=="stop"||kt[0]=="close"?kt[0]=="stop"?Ii(_,7):No(_):kt[0]!="noop"&&_.l&&_.l.ta(kt),_.v=0)}}tr(4)}catch{}}var cu=class{constructor(u,m){this.g=u,this.map=m}};function Ti(u){this.l=u||10,g.PerformanceNavigationTiming?(u=g.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $s(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Zs(u){return u.h?1:u.g?u.g.size:0}function Ao(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Ws(u,m){u.g?u.g.add(m):u.h=m}function Je(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Ti.prototype.cancel=function(){if(this.i=bo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function bo(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.D);return m}return et(u.i)}function Vh(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],_=u.length,A=0;A<_;A++)m.push(u[A]);return m}m=[],_=0;for(A in u)m[_++]=u[A];return m}function Js(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var _=0;_<u;_++)m.push(_);return m}m=[],_=0;for(const A in u)m[_++]=A;return m}}}function So(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var _=Js(u),A=Vh(u),U=A.length,H=0;H<U;H++)m.call(void 0,A[H],_&&_[H],u)}var os=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mh(u,m){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var A=u[_].indexOf("="),U=null;if(0<=A){var H=u[_].substring(0,A);U=u[_].substring(A+1)}else H=u[_];m(H,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function ye(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ye){this.h=u.h,ls(this,u.j),this.o=u.o,this.g=u.g,rr(this,u.s),this.l=u.l;var m=u.i,_=new bi;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),Ai(this,_),this.m=u.m}else u&&(m=String(u).match(os))?(this.h=!1,ls(this,m[1]||"",!0),this.o=Tn(m[2]||""),this.g=Tn(m[3]||"",!0),rr(this,m[4]),this.l=Tn(m[5]||"",!0),Ai(this,m[6]||"",!0),this.m=Tn(m[7]||"")):(this.h=!1,this.i=new bi(null,this.h))}ye.prototype.toString=function(){var u=[],m=this.j;m&&u.push(cs(m,wo,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(cs(m,wo,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(cs(_,_.charAt(0)=="/"?Ph:Ro,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",cs(_,ta)),u.join("")};function un(u){return new ye(u)}function ls(u,m,_){u.j=_?Tn(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function rr(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Ai(u,m,_){m instanceof bi?(u.i=m,fu(u.i,u.h)):(_||(m=cs(m,kh)),u.i=new bi(m,u.h))}function Kt(u,m,_){u.i.set(m,_)}function us(u){return Kt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Tn(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function cs(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,hu),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function hu(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var wo=/[#\/\?@]/g,Ro=/[#\?:]/g,Ph=/[#\?]/g,kh=/[#\?@]/g,ta=/#/g;function bi(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function An(u){u.g||(u.g=new Map,u.h=0,u.i&&Mh(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=bi.prototype,r.add=function(u,m){An(this),this.i=null,u=$n(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function Si(u,m){An(u),m=$n(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function wi(u,m){return An(u),m=$n(u,m),u.g.has(m)}r.forEach=function(u,m){An(this),this.g.forEach(function(_,A){_.forEach(function(U){u.call(m,U,A,this)},this)},this)},r.na=function(){An(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let A=0;A<m.length;A++){const U=u[A];for(let H=0;H<U.length;H++)_.push(m[A])}return _},r.V=function(u){An(this);let m=[];if(typeof u=="string")wi(this,u)&&(m=m.concat(this.g.get($n(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)m=m.concat(u[_])}return m},r.set=function(u,m){return An(this),this.i=null,u=$n(this,u),wi(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Io(u,m,_){Si(u,m),0<_.length&&(u.i=null,u.g.set($n(u,m),et(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var A=m[_];const H=encodeURIComponent(String(A)),it=this.V(A);for(A=0;A<it.length;A++){var U=H;it[A]!==""&&(U+="="+encodeURIComponent(String(it[A]))),u.push(U)}}return this.i=u.join("&")};function $n(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function fu(u,m){m&&!u.j&&(An(u),u.i=null,u.g.forEach(function(_,A){var U=A.toLowerCase();A!=U&&(Si(this,A),Io(this,U,_))},u)),u.j=m}function hs(u,m){const _=new En;if(g.Image){const A=new Image;A.onload=q(bn,_,"TestLoadImage: loaded",!0,m,A),A.onerror=q(bn,_,"TestLoadImage: error",!1,m,A),A.onabort=q(bn,_,"TestLoadImage: abort",!1,m,A),A.ontimeout=q(bn,_,"TestLoadImage: timeout",!1,m,A),g.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else m(!1)}function kn(u,m){const _=new En,A=new AbortController,U=setTimeout(()=>{A.abort(),bn(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:A.signal}).then(H=>{clearTimeout(U),H.ok?bn(_,"TestPingServer: ok",!0,m):bn(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(U),bn(_,"TestPingServer: error",!1,m)})}function bn(u,m,_,A,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),A(_)}catch{}}function fs(){this.g=new is}function Zn(u,m,_){const A=_||"";try{So(u,function(U,H){let it=U;y(U)&&(it=Mn(U)),m.push(A+H+"="+encodeURIComponent(it))})}catch(U){throw m.push(A+"type="+encodeURIComponent("_badmap")),U}}function sr(u){this.l=u.Ub||null,this.j=u.eb||!1}F(sr,go),sr.prototype.g=function(){return new Ri(this.l,this.j)},sr.prototype.i=(function(u){return function(){return u}})({});function Ri(u,m){le.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}F(Ri,le),r=Ri.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Jn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||g).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wn(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Jn(this)),this.g&&(this.readyState=3,Jn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Co(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Co(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Wn(this):Jn(this),this.readyState==3&&Co(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,Wn(this))},r.Qa=function(u){this.g&&(this.response=u,Wn(this))},r.ga=function(){this.g&&Wn(this)};function Wn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Jn(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function Jn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ri.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function xo(u){let m="";return gt(u,function(_,A){m+=A,m+=":",m+=_,m+=`\r
`}),m}function De(u,m,_){t:{for(A in _){var A=!1;break t}A=!0}A||(_=xo(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):Kt(u,m,_))}function qt(u){le.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}F(qt,le);var ea=/^https?$/i,ds=["POST","PUT"];r=qt.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Kn.g(),this.v=this.o?po(this.o):po(Kn),this.g.onreadystatechange=R(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(H){du(this,H);return}if(u=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var U in A)_.set(U,A[U]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const H of A.keys())_.set(H,A.get(H));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find(H=>H.toLowerCase()=="content-type"),U=g.FormData&&u instanceof g.FormData,!(0<=Array.prototype.indexOf.call(ds,m,void 0))||A||U||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,it]of _)this.g.setRequestHeader(H,it);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ms(this),this.u=!0,this.g.send(u),this.u=!1}catch(H){du(this,H)}};function du(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,na(u),ti(u)}function na(u){u.A||(u.A=!0,Ft(u,"complete"),Ft(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ft(this,"complete"),Ft(this,"abort"),ti(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ti(this,!0)),qt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?ia(this):this.bb())},r.bb=function(){ia(this)};function ia(u){if(u.h&&typeof f<"u"&&(!u.v[1]||Sn(u)!=4||u.Z()!=2)){if(u.u&&Sn(u)==4)Ge(u.Ea,0,u);else if(Ft(u,"readystatechange"),Sn(u)==4){u.h=!1;try{const it=u.Z();t:switch(it){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break t;default:m=!1}var _;if(!(_=m)){var A;if(A=it===0){var U=String(u.D).match(os)[1]||null;!U&&g.self&&g.self.location&&(U=g.self.location.protocol.slice(0,-1)),A=!ea.test(U?U.toLowerCase():"")}_=A}if(_)Ft(u,"complete"),Ft(u,"success");else{u.m=6;try{var H=2<Sn(u)?u.g.statusText:""}catch{H=""}u.l=H+" ["+u.Z()+"]",na(u)}}finally{ti(u)}}}}function ti(u,m){if(u.g){ms(u);const _=u.g,A=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||Ft(u,"ready");try{_.onreadystatechange=A}catch{}}}function ms(u){u.I&&(g.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Sn(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Sn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Ks(m)}};function mu(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Uh(u){const m={};u=(u.g&&2<=Sn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(J(u[A]))continue;var _=O(u[A]);const U=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const H=m[U]||[];m[U]=H,H.push(_)}D(m,function(A){return A.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function gs(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function ra(u){this.Aa=0,this.i=[],this.j=new En,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=gs("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=gs("baseRetryDelayMs",5e3,u),this.cb=gs("retryDelaySeedMs",1e4,u),this.Wa=gs("forwardChannelMaxRetries",2,u),this.wa=gs("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ti(u&&u.concurrentRequestLimit),this.Da=new fs,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=ra.prototype,r.la=8,r.G=1,r.connect=function(u,m,_,A){ne(0),this.W=u,this.H=m||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.I=Tu(this,null,this.W),aa(this)};function No(u){if(gu(u),u.G==3){var m=u.U++,_=un(u.I);if(Kt(_,"SID",u.K),Kt(_,"RID",m),Kt(_,"TYPE","terminate"),ps(u,_),m=new We(u,u.j,m),m.L=2,m.v=us(un(_)),_=!1,g.navigator&&g.navigator.sendBeacon)try{_=g.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&g.Image&&(new Image().src=m.v,_=!0),_||(m.g=Au(m.j,null),m.g.ea(m.v)),m.F=Date.now(),ss(m)}Eu(u)}function sa(u){u.g&&(ys(u),u.g.cancel(),u.g=null)}function gu(u){sa(u),u.u&&(g.clearTimeout(u.u),u.u=null),oa(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&g.clearTimeout(u.s),u.s=null)}function aa(u){if(!$s(u.h)&&!u.s){u.s=!0;var m=u.Ga;rt||V(),dt||(rt(),dt=!0),zt.add(m,u),u.B=0}}function Lh(u,m){return Zs(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=pe(R(u.Ga,u,m),Vo(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const U=new We(this,this.j,u);let H=this.o;if(this.S&&(H?(H=S(H),N(H,this.S)):H=this.S),this.m!==null||this.O||(U.H=H,H=null),this.P)t:{for(var m=0,_=0;_<this.i.length;_++){e:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break e}A=void 0}if(A===void 0)break;if(m+=A,4096<m){m=_;break t}if(m===4096||_===this.i.length-1){m=_+1;break t}}m=1e3}else m=1e3;m=pu(this,U,m),_=un(this.I),Kt(_,"RID",u),Kt(_,"CVER",22),this.D&&Kt(_,"X-HTTP-Session-Id",this.D),ps(this,_),H&&(this.O?m="headers="+encodeURIComponent(String(xo(H)))+"&"+m:this.m&&De(_,this.m,H)),Ws(this.h,U),this.Ua&&Kt(_,"TYPE","init"),this.P?(Kt(_,"$req",m),Kt(_,"SID","null"),U.T=!0,Pn(U,_,null)):Pn(U,_,m),this.G=2}}else this.G==3&&(u?Do(this,u):this.i.length==0||$s(this.h)||Do(this))};function Do(u,m){var _;m?_=m.l:_=u.U++;const A=un(u.I);Kt(A,"SID",u.K),Kt(A,"RID",_),Kt(A,"AID",u.T),ps(u,A),u.m&&u.o&&De(A,u.m,u.o),_=new We(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),m&&(u.i=m.D.concat(u.i)),m=pu(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Ws(u.h,_),Pn(_,A,m)}function ps(u,m){u.H&&gt(u.H,function(_,A){Kt(m,A,_)}),u.l&&So({},function(_,A){Kt(m,A,_)})}function pu(u,m,_){_=Math.min(u.i.length,_);var A=u.l?R(u.l.Na,u.l,u):null;t:{var U=u.i;let H=-1;for(;;){const it=["count="+_];H==-1?0<_?(H=U[0].g,it.push("ofs="+H)):H=0:it.push("ofs="+H);let Pt=!0;for(let we=0;we<_;we++){let kt=U[we].g;const Oe=U[we].map;if(kt-=H,0>kt)H=Math.max(0,U[we].g-100),Pt=!1;else try{Zn(Oe,it,"req"+kt+"_")}catch{A&&A(Oe)}}if(Pt){A=it.join("&");break t}}}return u=u.i.splice(0,_),m.D=u,A}function yu(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;rt||V(),dt||(rt(),dt=!0),zt.add(m,u),u.v=0}}function Oo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=pe(R(u.Fa,u),Vo(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,_u(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=pe(R(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ne(10),sa(this),_u(this))};function ys(u){u.A!=null&&(g.clearTimeout(u.A),u.A=null)}function _u(u){u.g=new We(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=un(u.qa);Kt(m,"RID","rpc"),Kt(m,"SID",u.K),Kt(m,"AID",u.T),Kt(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Kt(m,"TO",u.ja),Kt(m,"TYPE","xmlhttp"),ps(u,m),u.m&&u.o&&De(m,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=us(un(m)),_.m=null,_.P=!0,Ei(_,u)}r.Za=function(){this.C!=null&&(this.C=null,sa(this),Oo(this),ne(19))};function oa(u){u.C!=null&&(g.clearTimeout(u.C),u.C=null)}function vu(u,m){var _=null;if(u.g==m){oa(u),ys(u),u.g=null;var A=2}else if(Ao(u.h,m))_=m.D,Je(u.h,m),A=1;else return;if(u.G!=0){if(m.o)if(A==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var U=u.B;A=Ji(),Ft(A,new Se(A,_)),aa(u)}else yu(u);else if(U=m.s,U==3||U==0&&0<m.X||!(A==1&&Lh(u,m)||A==2&&Oo(u)))switch(_&&0<_.length&&(m=u.h,m.i=m.i.concat(_)),U){case 1:Ii(u,5);break;case 4:Ii(u,10);break;case 3:Ii(u,6);break;default:Ii(u,2)}}}function Vo(u,m){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*m}function Ii(u,m){if(u.j.info("Error code "+m),m==2){var _=R(u.fb,u),A=u.Xa;const U=!A;A=new ye(A||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||ls(A,"https"),us(A),U?hs(A.toString(),_):kn(A.toString(),_)}else ne(2);u.G=0,u.l&&u.l.sa(m),Eu(u),gu(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ne(2)):(this.j.info("Failed to ping google.com"),ne(1))};function Eu(u){if(u.G=0,u.ka=[],u.l){const m=bo(u.h);(m.length!=0||u.i.length!=0)&&(Z(u.ka,m),Z(u.ka,u.i),u.h.i.length=0,et(u.i),u.i.length=0),u.l.ra()}}function Tu(u,m,_){var A=_ instanceof ye?un(_):new ye(_);if(A.g!="")m&&(A.g=m+"."+A.g),rr(A,A.s);else{var U=g.location;A=U.protocol,m=m?m+"."+U.hostname:U.hostname,U=+U.port;var H=new ye(null);A&&ls(H,A),m&&(H.g=m),U&&rr(H,U),_&&(H.l=_),A=H}return _=u.D,m=u.ya,_&&m&&Kt(A,_,m),Kt(A,"VER",u.la),ps(u,A),A}function Au(u,m,_){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new qt(new sr({eb:_})):new qt(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function bu(){}r=bu.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function la(){}la.prototype.g=function(u,m){return new tn(u,m)};function tn(u,m){le.call(this),this.g=new ra(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!J(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!J(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ei(this)}F(tn,le),tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){No(this.g)},tn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=Mn(u),u=_);m.i.push(new cu(m.Ya++,u)),m.G==3&&aa(m)},tn.prototype.N=function(){this.g.l=null,delete this.j,No(this.g),delete this.g,tn.aa.N.call(this)};function Su(u){_i.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){t:{for(const _ in m){u=_;break t}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}F(Su,_i);function wu(){_o.call(this),this.status=1}F(wu,_o);function ei(u){this.g=u}F(ei,bu),ei.prototype.ua=function(){Ft(this.g,"a")},ei.prototype.ta=function(u){Ft(this.g,new Su(u))},ei.prototype.sa=function(u){Ft(this.g,new wu)},ei.prototype.ra=function(){Ft(this.g,"b")},la.prototype.createWebChannel=la.prototype.g,tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,wE=function(){return new la},SE=function(){return Ji()},bE=Qn,rm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},nr.NO_ERROR=0,nr.TIMEOUT=8,nr.HTTP_ERROR=6,kc=nr,vi.COMPLETE="complete",AE=vi,yo.EventType=yi,yi.OPEN="a",yi.CLOSE="b",yi.ERROR="c",yi.MESSAGE="d",le.prototype.listen=le.prototype.K,Sl=yo,qt.prototype.listenOnce=qt.prototype.L,qt.prototype.getLastError=qt.prototype.Ka,qt.prototype.getLastErrorCode=qt.prototype.Ba,qt.prototype.getStatus=qt.prototype.Z,qt.prototype.getResponseJson=qt.prototype.Oa,qt.prototype.getResponseText=qt.prototype.oa,qt.prototype.send=qt.prototype.ea,qt.prototype.setWithCredentials=qt.prototype.Ha,TE=qt}).apply(typeof Ic<"u"?Ic:typeof self<"u"?self:typeof window<"u"?window:{});const wv="@firebase/firestore",Rv="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Xe.UNAUTHENTICATED=new Xe(null),Xe.GOOGLE_CREDENTIALS=new Xe("google-credentials-uid"),Xe.FIRST_PARTY=new Xe("first-party-uid"),Xe.MOCK_USER=new Xe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ao="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs=new Im("@firebase/firestore");function Ua(){return zs.logLevel}function ot(r,...t){if(zs.logLevel<=Ot.DEBUG){const n=t.map(Lm);zs.debug(`Firestore (${ao}): ${r}`,...n)}}function Yi(r,...t){if(zs.logLevel<=Ot.ERROR){const n=t.map(Lm);zs.error(`Firestore (${ao}): ${r}`,...n)}}function $a(r,...t){if(zs.logLevel<=Ot.WARN){const n=t.map(Lm);zs.warn(`Firestore (${ao}): ${r}`,...n)}}function Lm(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(r,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,RE(r,s,n)}function RE(r,t,n){let s=`FIRESTORE (${ao}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Yi(s),new Error(s)}function Ht(r,t,n,s){let l="Unexpected state";typeof n=="string"?l=n:s=n,r||RE(t,l,s)}function wt(r,t){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class at extends $i{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class j2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(Xe.UNAUTHENTICATED)))}shutdown(){}}class z2{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class B2{constructor(t){this.t=t,this.currentUser=Xe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Ht(this.o===void 0,42304);let s=this.i;const l=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let c=new Fi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Fi,t.enqueueRetryable((()=>l(this.currentUser)))};const f=()=>{const p=c;t.enqueueRetryable((async()=>{await p.promise,await l(this.currentUser)}))},g=p=>{ot("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((p=>g(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?g(p):(ot("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Fi)}}),0),f()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==t?(ot("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ht(typeof s.accessToken=="string",31837,{l:s}),new IE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Ht(t===null||typeof t=="string",2055,{h:t}),new Xe(t)}}class q2{constructor(t,n,s){this.P=t,this.T=n,this.I=s,this.type="FirstParty",this.user=Xe.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class H2{constructor(t,n,s){this.P=t,this.T=n,this.I=s}getToken(){return Promise.resolve(new q2(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(Xe.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Iv{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class F2{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,zn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Ht(this.o===void 0,3512);const s=c=>{c.error!=null&&ot("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,ot("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(c.token):Promise.resolve()};this.o=c=>{t.enqueueRetryable((()=>s(c)))};const l=c=>{ot("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):ot("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Iv(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(Ht(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Iv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G2(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=G2(40);for(let c=0;c<l.length;++c)s.length<20&&l[c]<n&&(s+=t.charAt(l[c]%62))}return s}}function Vt(r,t){return r<t?-1:r>t?1:0}function sm(r,t){const n=Math.min(r.length,t.length);for(let s=0;s<n;s++){const l=r.charAt(s),c=t.charAt(s);if(l!==c)return Hd(l)===Hd(c)?Vt(l,c):Hd(l)?1:-1}return Vt(r.length,t.length)}const Q2=55296,K2=57343;function Hd(r){const t=r.charCodeAt(0);return t>=Q2&&t<=K2}function Za(r,t,n){return r.length===t.length&&r.every(((s,l)=>n(s,t[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv="__name__";class li{constructor(t,n,s){n===void 0?n=0:n>t.length&&Tt(637,{offset:n,range:t.length}),s===void 0?s=t.length-n:s>t.length-n&&Tt(1746,{length:s,range:t.length-n}),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return li.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof li?t.forEach((s=>{n.push(s)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let l=0;l<s;l++){const c=li.compareSegments(t.get(l),n.get(l));if(c!==0)return c}return Vt(t.length,n.length)}static compareSegments(t,n){const s=li.isNumericId(t),l=li.isNumericId(n);return s&&!l?-1:!s&&l?1:s&&l?li.extractNumericId(t).compare(li.extractNumericId(n)):sm(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Ur.fromString(t.substring(4,t.length-2))}}class te extends li{construct(t,n,s){return new te(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new at(Y.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((l=>l.length>0)))}return new te(n)}static emptyPath(){return new te([])}}const Y2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class He extends li{construct(t,n,s){return new He(t,n,s)}static isValidIdentifier(t){return Y2.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),He.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Cv}static keyField(){return new He([Cv])}static fromServerFormat(t){const n=[];let s="",l=0;const c=()=>{if(s.length===0)throw new at(Y.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;l<t.length;){const g=t[l];if(g==="\\"){if(l+1===t.length)throw new at(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[l+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new at(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=p,l+=2}else g==="`"?(f=!f,l++):g!=="."||f?(s+=g,l++):(c(),l++)}if(c(),f)throw new at(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new He(n)}static emptyPath(){return new He([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(t){this.path=t}static fromPath(t){return new mt(te.fromString(t))}static fromName(t){return new mt(te.fromString(t).popFirst(5))}static empty(){return new mt(te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&te.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return te.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new mt(new te(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(r,t,n){if(!n)throw new at(Y.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function X2(r,t,n,s){if(t===!0&&s===!0)throw new at(Y.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function xv(r){if(!mt.isDocumentKey(r))throw new at(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Nv(r){if(mt.isDocumentKey(r))throw new at(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function xE(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function hh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=(function(s){return s.constructor?s.constructor.name:null})(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":Tt(12329,{type:typeof r})}function Vn(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new at(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=hh(r);throw new at(Y.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(r,t){const n={typeString:r};return t&&(n.value=t),n}function $l(r,t){if(!xE(r))throw new at(Y.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in t)if(t[s]){const l=t[s].typeString,c="value"in t[s]?{value:t[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const f=r[s];if(l&&typeof f!==l){n=`JSON field '${s}' must be a ${l}.`;break}if(c!==void 0&&f!==c.value){n=`Expected '${s}' field to equal '${c.value}'`;break}}if(n)throw new at(Y.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv=-62135596800,Ov=1e6;class ee{static now(){return ee.fromMillis(Date.now())}static fromDate(t){return ee.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*Ov);return new ee(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new at(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new at(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<Dv)throw new at(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new at(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ov}_compareTo(t){return this.seconds===t.seconds?Vt(this.nanoseconds,t.nanoseconds):Vt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ee._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if($l(t,ee._jsonSchema))return new ee(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Dv;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ee._jsonSchemaVersion="firestore/timestamp/1.0",ee._jsonSchema={type:Ae("string",ee._jsonSchemaVersion),seconds:Ae("number"),nanoseconds:Ae("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{static fromTimestamp(t){return new St(t)}static min(){return new St(new ee(0,0))}static max(){return new St(new ee(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl=-1;function $2(r,t){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=St.fromTimestamp(s===1e9?new ee(n+1,0):new ee(n,s));return new zr(l,mt.empty(),t)}function Z2(r){return new zr(r.readTime,r.key,kl)}class zr{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new zr(St.min(),mt.empty(),kl)}static max(){return new zr(St.max(),mt.empty(),kl)}}function W2(r,t){let n=r.readTime.compareTo(t.readTime);return n!==0?n:(n=mt.comparator(r.documentKey,t.documentKey),n!==0?n:Vt(r.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oo(r){if(r.code!==Y.FAILED_PRECONDITION||r.message!==J2)throw r;ot("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Tt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new $(((s,l)=>{this.nextCallback=c=>{this.wrapSuccess(t,c).next(s,l)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,l)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):$.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):$.reject(n)}static resolve(t){return new $(((n,s)=>{n(t)}))}static reject(t){return new $(((n,s)=>{s(t)}))}static waitFor(t){return new $(((n,s)=>{let l=0,c=0,f=!1;t.forEach((g=>{++l,g.next((()=>{++c,f&&c===l&&n()}),(p=>s(p)))})),f=!0,c===l&&n()}))}static or(t){let n=$.resolve(!1);for(const s of t)n=n.next((l=>l?$.resolve(l):s()));return n}static forEach(t,n){const s=[];return t.forEach(((l,c)=>{s.push(n.call(this,l,c))})),this.waitFor(s)}static mapArray(t,n){return new $(((s,l)=>{const c=t.length,f=new Array(c);let g=0;for(let p=0;p<c;p++){const y=p;n(t[y]).next((T=>{f[y]=T,++g,g===c&&s(f)}),(T=>l(T)))}}))}static doWhile(t,n){return new $(((s,l)=>{const c=()=>{t()===!0?n().next((()=>{c()}),l):s()};c()}))}}function eR(r){const t=r.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function lo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}fh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm=-1;function dh(r){return r==null}function $c(r){return r===0&&1/r==-1/0}function nR(r){return typeof r=="number"&&Number.isInteger(r)&&!$c(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE="";function iR(r){let t="";for(let n=0;n<r.length;n++)t.length>0&&(t=Vv(t)),t=rR(r.get(n),t);return Vv(t)}function rR(r,t){let n=t;const s=r.length;for(let l=0;l<s;l++){const c=r.charAt(l);switch(c){case"\0":n+="";break;case NE:n+="";break;default:n+=c}}return n}function Vv(r){return r+NE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mv(r){let t=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t++;return t}function Kr(r,t){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t(n,r[n])}function DE(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(t,n){this.comparator=t,this.root=n||qe.EMPTY}insert(t,n){return new se(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,qe.BLACK,null,null))}remove(t){return new se(this.comparator,this.root.remove(t,this.comparator).copy(null,null,qe.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(t,s.key);if(l===0)return n+s.left.size;l<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,s)=>(t(n,s),!1)))}toString(){const t=[];return this.inorderTraversal(((n,s)=>(t.push(`${n}:${s}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Cc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Cc(this.root,t,this.comparator,!1)}getReverseIterator(){return new Cc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Cc(this.root,t,this.comparator,!0)}}class Cc{constructor(t,n,s,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!t.isEmpty();)if(c=n?s(t.key,n):1,n&&l&&(c*=-1),c<0)t=this.isReverse?t.left:t.right;else{if(c===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class qe{constructor(t,n,s,l,c){this.key=t,this.value=n,this.color=s??qe.RED,this.left=l??qe.EMPTY,this.right=c??qe.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,l,c){return new qe(t??this.key,n??this.value,s??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let l=this;const c=s(t,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(t,n,s),null):c===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(t,n,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return qe.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,l=this;if(n(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(t,l.key)===0){if(l.right.isEmpty())return qe.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,qe.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,qe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Tt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Tt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Tt(27949);return t+(this.isRed()?0:1)}}qe.EMPTY=null,qe.RED=!0,qe.BLACK=!1;qe.EMPTY=new class{constructor(){this.size=0}get key(){throw Tt(57766)}get value(){throw Tt(16141)}get color(){throw Tt(16727)}get left(){throw Tt(29726)}get right(){throw Tt(36894)}copy(t,n,s,l,c){return this}insert(t,n,s){return new qe(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(t){this.comparator=t,this.data=new se(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,s)=>(t(n),!1)))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,t[1])>=0)return;n(l.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Pv(this.data.getIterator())}getIteratorFrom(t){return new Pv(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((s=>{n=n.add(s)})),n}isEqual(t){if(!(t instanceof xe)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new xe(this.comparator);return n.data=t,n}}class Pv{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(t){this.fields=t,t.sort(He.comparator)}static empty(){return new _n([])}unionWith(t){let n=new xe(He.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new _n(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Za(this.fields,t.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new OE("Invalid base64 string: "+c):c}})(t);return new Fe(n)}static fromUint8Array(t){const n=(function(l){let c="";for(let f=0;f<l.length;++f)c+=String.fromCharCode(l[f]);return c})(t);return new Fe(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let l=0;l<n.length;l++)s[l]=n.charCodeAt(l);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Vt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Fe.EMPTY_BYTE_STRING=new Fe("");const sR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Br(r){if(Ht(!!r,39018),typeof r=="string"){let t=0;const n=sR.exec(r);if(Ht(!!n,46558,{timestamp:r}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),t=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:me(r.seconds),nanos:me(r.nanos)}}function me(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function qr(r){return typeof r=="string"?Fe.fromBase64String(r):Fe.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE="server_timestamp",ME="__type__",PE="__previous_value__",kE="__local_write_time__";function Bm(r){var n,s;return((s=(((n=r==null?void 0:r.mapValue)==null?void 0:n.fields)||{})[ME])==null?void 0:s.stringValue)===VE}function mh(r){const t=r.mapValue.fields[PE];return Bm(t)?mh(t):t}function Ul(r){const t=Br(r.mapValue.fields[kE].timestampValue);return new ee(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(t,n,s,l,c,f,g,p,y,T){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=l,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=g,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=T}}const Zc="(default)";class Ll{constructor(t,n){this.projectId=t,this.database=n||Zc}static empty(){return new Ll("","")}get isDefaultDatabase(){return this.database===Zc}isEqual(t){return t instanceof Ll&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE="__type__",oR="__max__",xc={mapValue:{}},LE="__vector__",Wc="value";function Hr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Bm(r)?4:uR(r)?9007199254740991:lR(r)?10:11:Tt(28295,{value:r})}function gi(r,t){if(r===t)return!0;const n=Hr(r);if(n!==Hr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return Ul(r).isEqual(Ul(t));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const f=Br(l.timestampValue),g=Br(c.timestampValue);return f.seconds===g.seconds&&f.nanos===g.nanos})(r,t);case 5:return r.stringValue===t.stringValue;case 6:return(function(l,c){return qr(l.bytesValue).isEqual(qr(c.bytesValue))})(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return(function(l,c){return me(l.geoPointValue.latitude)===me(c.geoPointValue.latitude)&&me(l.geoPointValue.longitude)===me(c.geoPointValue.longitude)})(r,t);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return me(l.integerValue)===me(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const f=me(l.doubleValue),g=me(c.doubleValue);return f===g?$c(f)===$c(g):isNaN(f)&&isNaN(g)}return!1})(r,t);case 9:return Za(r.arrayValue.values||[],t.arrayValue.values||[],gi);case 10:case 11:return(function(l,c){const f=l.mapValue.fields||{},g=c.mapValue.fields||{};if(Mv(f)!==Mv(g))return!1;for(const p in f)if(f.hasOwnProperty(p)&&(g[p]===void 0||!gi(f[p],g[p])))return!1;return!0})(r,t);default:return Tt(52216,{left:r})}}function jl(r,t){return(r.values||[]).find((n=>gi(n,t)))!==void 0}function Wa(r,t){if(r===t)return 0;const n=Hr(r),s=Hr(t);if(n!==s)return Vt(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Vt(r.booleanValue,t.booleanValue);case 2:return(function(c,f){const g=me(c.integerValue||c.doubleValue),p=me(f.integerValue||f.doubleValue);return g<p?-1:g>p?1:g===p?0:isNaN(g)?isNaN(p)?0:-1:1})(r,t);case 3:return kv(r.timestampValue,t.timestampValue);case 4:return kv(Ul(r),Ul(t));case 5:return sm(r.stringValue,t.stringValue);case 6:return(function(c,f){const g=qr(c),p=qr(f);return g.compareTo(p)})(r.bytesValue,t.bytesValue);case 7:return(function(c,f){const g=c.split("/"),p=f.split("/");for(let y=0;y<g.length&&y<p.length;y++){const T=Vt(g[y],p[y]);if(T!==0)return T}return Vt(g.length,p.length)})(r.referenceValue,t.referenceValue);case 8:return(function(c,f){const g=Vt(me(c.latitude),me(f.latitude));return g!==0?g:Vt(me(c.longitude),me(f.longitude))})(r.geoPointValue,t.geoPointValue);case 9:return Uv(r.arrayValue,t.arrayValue);case 10:return(function(c,f){var R,q,F,et;const g=c.fields||{},p=f.fields||{},y=(R=g[Wc])==null?void 0:R.arrayValue,T=(q=p[Wc])==null?void 0:q.arrayValue,w=Vt(((F=y==null?void 0:y.values)==null?void 0:F.length)||0,((et=T==null?void 0:T.values)==null?void 0:et.length)||0);return w!==0?w:Uv(y,T)})(r.mapValue,t.mapValue);case 11:return(function(c,f){if(c===xc.mapValue&&f===xc.mapValue)return 0;if(c===xc.mapValue)return 1;if(f===xc.mapValue)return-1;const g=c.fields||{},p=Object.keys(g),y=f.fields||{},T=Object.keys(y);p.sort(),T.sort();for(let w=0;w<p.length&&w<T.length;++w){const R=sm(p[w],T[w]);if(R!==0)return R;const q=Wa(g[p[w]],y[T[w]]);if(q!==0)return q}return Vt(p.length,T.length)})(r.mapValue,t.mapValue);default:throw Tt(23264,{he:n})}}function kv(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return Vt(r,t);const n=Br(r),s=Br(t),l=Vt(n.seconds,s.seconds);return l!==0?l:Vt(n.nanos,s.nanos)}function Uv(r,t){const n=r.values||[],s=t.values||[];for(let l=0;l<n.length&&l<s.length;++l){const c=Wa(n[l],s[l]);if(c)return c}return Vt(n.length,s.length)}function Ja(r){return am(r)}function am(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=Br(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return qr(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return mt.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",l=!0;for(const c of n.values||[])l?l=!1:s+=",",s+=am(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let l="{",c=!0;for(const f of s)c?c=!1:l+=",",l+=`${f}:${am(n.fields[f])}`;return l+"}"})(r.mapValue):Tt(61005,{value:r})}function Uc(r){switch(Hr(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=mh(r);return t?16+Uc(t):16;case 5:return 2*r.stringValue.length;case 6:return qr(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((l,c)=>l+Uc(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let l=0;return Kr(s.fields,((c,f)=>{l+=c.length+Uc(f)})),l})(r.mapValue);default:throw Tt(13486,{value:r})}}function Lv(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function om(r){return!!r&&"integerValue"in r}function qm(r){return!!r&&"arrayValue"in r}function jv(r){return!!r&&"nullValue"in r}function zv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Lc(r){return!!r&&"mapValue"in r}function lR(r){var n,s;return((s=(((n=r==null?void 0:r.mapValue)==null?void 0:n.fields)||{})[UE])==null?void 0:s.stringValue)===LE}function Nl(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const t={mapValue:{fields:{}}};return Kr(r.mapValue.fields,((n,s)=>t.mapValue.fields[n]=Nl(s))),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Nl(r.arrayValue.values[n]);return t}return{...r}}function uR(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===oR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(t){this.value=t}static empty(){return new on({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!Lc(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Nl(n)}setAll(t){let n=He.emptyPath(),s={},l=[];t.forEach(((f,g)=>{if(!n.isImmediateParentOf(g)){const p=this.getFieldsMap(n);this.applyChanges(p,s,l),s={},l=[],n=g.popLast()}f?s[g.lastSegment()]=Nl(f):l.push(g.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,s,l)}delete(t){const n=this.field(t.popLast());Lc(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return gi(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let l=n.mapValue.fields[t.get(s)];Lc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=l),n=l}return n.mapValue.fields}applyChanges(t,n,s){Kr(n,((l,c)=>t[l]=c));for(const l of s)delete t[l]}clone(){return new on(Nl(this.value))}}function jE(r){const t=[];return Kr(r.fields,((n,s)=>{const l=new He([n]);if(Lc(s)){const c=jE(s.mapValue).fields;if(c.length===0)t.push(l);else for(const f of c)t.push(l.child(f))}else t.push(l)})),new _n(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(t,n,s,l,c,f,g){this.key=t,this.documentType=n,this.version=s,this.readTime=l,this.createTime=c,this.data=f,this.documentState=g}static newInvalidDocument(t){return new $e(t,0,St.min(),St.min(),St.min(),on.empty(),0)}static newFoundDocument(t,n,s,l){return new $e(t,1,n,St.min(),s,l,0)}static newNoDocument(t,n){return new $e(t,2,n,St.min(),St.min(),on.empty(),0)}static newUnknownDocument(t,n){return new $e(t,3,n,St.min(),St.min(),on.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(St.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=on.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=on.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=St.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof $e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new $e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(t,n){this.position=t,this.inclusive=n}}function Bv(r,t,n){let s=0;for(let l=0;l<r.position.length;l++){const c=t[l],f=r.position[l];if(c.field.isKeyField()?s=mt.comparator(mt.fromName(f.referenceValue),n.key):s=Wa(f,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function qv(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!gi(r.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(t,n="asc"){this.field=t,this.dir=n}}function cR(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{}class Te extends zE{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new fR(t,n,s):n==="array-contains"?new gR(t,s):n==="in"?new pR(t,s):n==="not-in"?new yR(t,s):n==="array-contains-any"?new _R(t,s):new Te(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new dR(t,s):new mR(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Wa(n,this.value)):n!==null&&Hr(this.value)===Hr(n)&&this.matchesComparison(Wa(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Tt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fn extends zE{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new Fn(t,n)}matches(t){return BE(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function BE(r){return r.op==="and"}function qE(r){return hR(r)&&BE(r)}function hR(r){for(const t of r.filters)if(t instanceof Fn)return!1;return!0}function lm(r){if(r instanceof Te)return r.field.canonicalString()+r.op.toString()+Ja(r.value);if(qE(r))return r.filters.map((t=>lm(t))).join(",");{const t=r.filters.map((n=>lm(n))).join(",");return`${r.op}(${t})`}}function HE(r,t){return r instanceof Te?(function(s,l){return l instanceof Te&&s.op===l.op&&s.field.isEqual(l.field)&&gi(s.value,l.value)})(r,t):r instanceof Fn?(function(s,l){return l instanceof Fn&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce(((c,f,g)=>c&&HE(f,l.filters[g])),!0):!1})(r,t):void Tt(19439)}function FE(r){return r instanceof Te?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ja(n.value)}`})(r):r instanceof Fn?(function(n){return n.op.toString()+" {"+n.getFilters().map(FE).join(" ,")+"}"})(r):"Filter"}class fR extends Te{constructor(t,n,s){super(t,n,s),this.key=mt.fromName(s.referenceValue)}matches(t){const n=mt.comparator(t.key,this.key);return this.matchesComparison(n)}}class dR extends Te{constructor(t,n){super(t,"in",n),this.keys=GE("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class mR extends Te{constructor(t,n){super(t,"not-in",n),this.keys=GE("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function GE(r,t){var n;return(((n=t.arrayValue)==null?void 0:n.values)||[]).map((s=>mt.fromName(s.referenceValue)))}class gR extends Te{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return qm(n)&&jl(n.arrayValue,this.value)}}class pR extends Te{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&jl(this.value.arrayValue,n)}}class yR extends Te{constructor(t,n){super(t,"not-in",n)}matches(t){if(jl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!jl(this.value.arrayValue,n)}}class _R extends Te{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!qm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>jl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(t,n=null,s=[],l=[],c=null,f=null,g=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=l,this.limit=c,this.startAt=f,this.endAt=g,this.Te=null}}function Hv(r,t=null,n=[],s=[],l=null,c=null,f=null){return new vR(r,t,n,s,l,c,f)}function Hm(r){const t=wt(r);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((s=>lm(s))).join(","),n+="|ob:",n+=t.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),dh(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((s=>Ja(s))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((s=>Ja(s))).join(",")),t.Te=n}return t.Te}function Fm(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!cR(r.orderBy[n],t.orderBy[n]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!HE(r.filters[n],t.filters[n]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!qv(r.startAt,t.startAt)&&qv(r.endAt,t.endAt)}function um(r){return mt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(t,n=null,s=[],l=[],c=null,f="F",g=null,p=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=l,this.limit=c,this.limitType=f,this.startAt=g,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function ER(r,t,n,s,l,c,f,g){return new uo(r,t,n,s,l,c,f,g)}function gh(r){return new uo(r)}function Fv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function QE(r){return r.collectionGroup!==null}function Dl(r){const t=wt(r);if(t.Ie===null){t.Ie=[];const n=new Set;for(const c of t.explicitOrderBy)t.Ie.push(c),n.add(c.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(f){let g=new xe(He.comparator);return f.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(g=g.add(y.field))}))})),g})(t).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||t.Ie.push(new zl(c,s))})),n.has(He.keyField().canonicalString())||t.Ie.push(new zl(He.keyField(),s))}return t.Ie}function hi(r){const t=wt(r);return t.Ee||(t.Ee=TR(t,Dl(r))),t.Ee}function TR(r,t){if(r.limitType==="F")return Hv(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new zl(l.field,c)}));const n=r.endAt?new Jc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Jc(r.startAt.position,r.startAt.inclusive):null;return Hv(r.path,r.collectionGroup,t,r.filters,r.limit,n,s)}}function cm(r,t){const n=r.filters.concat([t]);return new uo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function hm(r,t,n){return new uo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,n,r.startAt,r.endAt)}function ph(r,t){return Fm(hi(r),hi(t))&&r.limitType===t.limitType}function KE(r){return`${Hm(hi(r))}|lt:${r.limitType}`}function La(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((l=>FE(l))).join(", ")}]`),dh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((l=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(l))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((l=>Ja(l))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((l=>Ja(l))).join(",")),`Target(${s})`})(hi(r))}; limitType=${r.limitType})`}function yh(r,t){return t.isFoundDocument()&&(function(s,l){const c=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):mt.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,t)&&(function(s,l){for(const c of Dl(s))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(r,t)&&(function(s,l){for(const c of s.filters)if(!c.matches(l))return!1;return!0})(r,t)&&(function(s,l){return!(s.startAt&&!(function(f,g,p){const y=Bv(f,g,p);return f.inclusive?y<=0:y<0})(s.startAt,Dl(s),l)||s.endAt&&!(function(f,g,p){const y=Bv(f,g,p);return f.inclusive?y>=0:y>0})(s.endAt,Dl(s),l))})(r,t)}function AR(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function YE(r){return(t,n)=>{let s=!1;for(const l of Dl(r)){const c=bR(l,t,n);if(c!==0)return c;s=s||l.field.isKeyField()}return 0}}function bR(r,t,n){const s=r.field.isKeyField()?mt.comparator(t.key,n.key):(function(c,f,g){const p=f.data.field(c),y=g.data.field(c);return p!==null&&y!==null?Wa(p,y):Tt(42886)})(r.field,t,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Tt(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[l,c]of s)if(this.equalsFn(l,t))return c}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),l=this.inner[s];if(l===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],t))return void(l[c]=[t,n]);l.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],t))return s.length===1?delete this.inner[n]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(t){Kr(this.inner,((n,s)=>{for(const[l,c]of s)t(l,c)}))}isEmpty(){return DE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=new se(mt.comparator);function Xi(){return SR}const XE=new se(mt.comparator);function wl(...r){let t=XE;for(const n of r)t=t.insert(n.key,n);return t}function $E(r){let t=XE;return r.forEach(((n,s)=>t=t.insert(n,s.overlayedDocument))),t}function Ms(){return Ol()}function ZE(){return Ol()}function Ol(){return new Hs((r=>r.toString()),((r,t)=>r.isEqual(t)))}const wR=new se(mt.comparator),RR=new xe(mt.comparator);function Mt(...r){let t=RR;for(const n of r)t=t.add(n);return t}const IR=new xe(Vt);function CR(){return IR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$c(t)?"-0":t}}function WE(r){return{integerValue:""+r}}function JE(r,t){return nR(t)?WE(t):Gm(r,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(){this._=void 0}}function xR(r,t,n){return r instanceof Bl?(function(l,c){const f={fields:{[ME]:{stringValue:VE},[kE]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&Bm(c)&&(c=mh(c)),c&&(f.fields[PE]=c),{mapValue:f}})(n,t):r instanceof ql?eT(r,t):r instanceof Hl?nT(r,t):(function(l,c){const f=tT(l,c),g=Gv(f)+Gv(l.Ae);return om(f)&&om(l.Ae)?WE(g):Gm(l.serializer,g)})(r,t)}function NR(r,t,n){return r instanceof ql?eT(r,t):r instanceof Hl?nT(r,t):n}function tT(r,t){return r instanceof Fl?(function(s){return om(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(t)?t:{integerValue:0}:null}class Bl extends _h{}class ql extends _h{constructor(t){super(),this.elements=t}}function eT(r,t){const n=iT(t);for(const s of r.elements)n.some((l=>gi(l,s)))||n.push(s);return{arrayValue:{values:n}}}class Hl extends _h{constructor(t){super(),this.elements=t}}function nT(r,t){let n=iT(t);for(const s of r.elements)n=n.filter((l=>!gi(l,s)));return{arrayValue:{values:n}}}class Fl extends _h{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function Gv(r){return me(r.integerValue||r.doubleValue)}function iT(r){return qm(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(t,n){this.field=t,this.transform=n}}function DR(r,t){return r.field.isEqual(t.field)&&(function(s,l){return s instanceof ql&&l instanceof ql||s instanceof Hl&&l instanceof Hl?Za(s.elements,l.elements,gi):s instanceof Fl&&l instanceof Fl?gi(s.Ae,l.Ae):s instanceof Bl&&l instanceof Bl})(r.transform,t.transform)}class OR{constructor(t,n){this.version=t,this.transformResults=n}}class qn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new qn}static exists(t){return new qn(void 0,t)}static updateTime(t){return new qn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function jc(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class vh{}function sT(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new Qm(r.key,qn.none()):new Zl(r.key,r.data,qn.none());{const n=r.data,s=on.empty();let l=new xe(He.comparator);for(let c of t.fields)if(!l.has(c)){let f=n.field(c);f===null&&c.length>1&&(c=c.popLast(),f=n.field(c)),f===null?s.delete(c):s.set(c,f),l=l.add(c)}return new Yr(r.key,s,new _n(l.toArray()),qn.none())}}function VR(r,t,n){r instanceof Zl?(function(l,c,f){const g=l.value.clone(),p=Kv(l.fieldTransforms,c,f.transformResults);g.setAll(p),c.convertToFoundDocument(f.version,g).setHasCommittedMutations()})(r,t,n):r instanceof Yr?(function(l,c,f){if(!jc(l.precondition,c))return void c.convertToUnknownDocument(f.version);const g=Kv(l.fieldTransforms,c,f.transformResults),p=c.data;p.setAll(aT(l)),p.setAll(g),c.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(r,t,n):(function(l,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()})(0,t,n)}function Vl(r,t,n,s){return r instanceof Zl?(function(c,f,g,p){if(!jc(c.precondition,f))return g;const y=c.value.clone(),T=Yv(c.fieldTransforms,p,f);return y.setAll(T),f.convertToFoundDocument(f.version,y).setHasLocalMutations(),null})(r,t,n,s):r instanceof Yr?(function(c,f,g,p){if(!jc(c.precondition,f))return g;const y=Yv(c.fieldTransforms,p,f),T=f.data;return T.setAll(aT(c)),T.setAll(y),f.convertToFoundDocument(f.version,T).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((w=>w.field)))})(r,t,n,s):(function(c,f,g){return jc(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):g})(r,t,n)}function MR(r,t){let n=null;for(const s of r.fieldTransforms){const l=t.data.field(s.field),c=tT(s.transform,l||null);c!=null&&(n===null&&(n=on.empty()),n.set(s.field,c))}return n||null}function Qv(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!(function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&Za(s,l,((c,f)=>DR(c,f)))})(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class Zl extends vh{constructor(t,n,s,l=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Yr extends vh{constructor(t,n,s,l,c=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function aT(r){const t=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);t.set(n,s)}})),t}function Kv(r,t,n){const s=new Map;Ht(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let l=0;l<n.length;l++){const c=r[l],f=c.transform,g=t.data.field(c.field);s.set(c.field,NR(f,g,n[l]))}return s}function Yv(r,t,n){const s=new Map;for(const l of r){const c=l.transform,f=n.data.field(l.field);s.set(l.field,xR(c,f,t))}return s}class Qm extends vh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class PR extends vh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(t,n,s,l){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(t.key)&&VR(c,t,s[l])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=Vl(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=Vl(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=ZE();return this.mutations.forEach((l=>{const c=t.get(l.key),f=c.overlayedDocument;let g=this.applyToLocalView(f,c.mutatedFields);g=n.has(l.key)?null:g;const p=sT(f,g);p!==null&&s.set(l.key,p),f.isValidDocument()||f.convertToNoDocument(St.min())})),s}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),Mt())}isEqual(t){return this.batchId===t.batchId&&Za(this.mutations,t.mutations,((n,s)=>Qv(n,s)))&&Za(this.baseMutations,t.baseMutations,((n,s)=>Qv(n,s)))}}class Km{constructor(t,n,s,l){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=l}static from(t,n,s){Ht(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let l=(function(){return wR})();const c=t.mutations;for(let f=0;f<c.length;f++)l=l.insert(c[f].key,s[f].version);return new Km(t,n,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ee,Lt;function jR(r){switch(r){case Y.OK:return Tt(64938);case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0;default:return Tt(15467,{code:r})}}function oT(r){if(r===void 0)return Yi("GRPC error has no .code"),Y.UNKNOWN;switch(r){case Ee.OK:return Y.OK;case Ee.CANCELLED:return Y.CANCELLED;case Ee.UNKNOWN:return Y.UNKNOWN;case Ee.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case Ee.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case Ee.INTERNAL:return Y.INTERNAL;case Ee.UNAVAILABLE:return Y.UNAVAILABLE;case Ee.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case Ee.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case Ee.NOT_FOUND:return Y.NOT_FOUND;case Ee.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case Ee.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case Ee.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case Ee.ABORTED:return Y.ABORTED;case Ee.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case Ee.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case Ee.DATA_LOSS:return Y.DATA_LOSS;default:return Tt(39323,{code:r})}}(Lt=Ee||(Ee={}))[Lt.OK=0]="OK",Lt[Lt.CANCELLED=1]="CANCELLED",Lt[Lt.UNKNOWN=2]="UNKNOWN",Lt[Lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Lt[Lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Lt[Lt.NOT_FOUND=5]="NOT_FOUND",Lt[Lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Lt[Lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Lt[Lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Lt[Lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Lt[Lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Lt[Lt.ABORTED=10]="ABORTED",Lt[Lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Lt[Lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Lt[Lt.INTERNAL=13]="INTERNAL",Lt[Lt.UNAVAILABLE=14]="UNAVAILABLE",Lt[Lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR=new Ur([4294967295,4294967295],0);function Xv(r){const t=zR().encode(r),n=new EE;return n.update(t),new Uint8Array(n.digest())}function $v(r){const t=new DataView(r.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),l=t.getUint32(8,!0),c=t.getUint32(12,!0);return[new Ur([n,s],0),new Ur([l,c],0)]}class Ym{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Rl(`Invalid padding: ${n}`);if(s<0)throw new Rl(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new Rl(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new Rl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Ur.fromNumber(this.ge)}ye(t,n,s){let l=t.add(n.multiply(Ur.fromNumber(s)));return l.compare(BR)===1&&(l=new Ur([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=Xv(t),[s,l]=$v(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(s,l,c);if(!this.we(f))return!1}return!0}static create(t,n,s){const l=t%8==0?0:8-t%8,c=new Uint8Array(Math.ceil(t/8)),f=new Ym(c,l,n);return s.forEach((g=>f.insert(g))),f}insert(t){if(this.ge===0)return;const n=Xv(t),[s,l]=$v(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(s,l,c);this.Se(f)}}Se(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class Rl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(t,n,s,l,c){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const l=new Map;return l.set(t,Wl.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new Eh(St.min(),l,new se(Vt),Xi(),Mt())}}class Wl{constructor(t,n,s,l,c){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new Wl(s,n,Mt(),Mt(),Mt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(t,n,s,l){this.be=t,this.removedTargetIds=n,this.key=s,this.De=l}}class lT{constructor(t,n){this.targetId=t,this.Ce=n}}class uT{constructor(t,n,s=Fe.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=l}}class Zv{constructor(){this.ve=0,this.Fe=Wv(),this.Me=Fe.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Mt(),n=Mt(),s=Mt();return this.Fe.forEach(((l,c)=>{switch(c){case 0:t=t.add(l);break;case 2:n=n.add(l);break;case 1:s=s.add(l);break;default:Tt(38017,{changeType:c})}})),new Wl(this.Me,this.xe,t,n,s)}qe(){this.Oe=!1,this.Fe=Wv()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ht(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class qR{constructor(t){this.Ge=t,this.ze=new Map,this.je=Xi(),this.Je=Nc(),this.He=Nc(),this.Ye=new se(Vt)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const s=this.nt(n);switch(t.state){case 0:this.rt(n)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(t.resumeToken));break;default:Tt(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((s,l)=>{this.rt(l)&&n(l)}))}st(t){const n=t.targetId,s=t.Ce.count,l=this.ot(n);if(l){const c=l.target;if(um(c))if(s===0){const f=new mt(c.path);this.et(n,f,$e.newNoDocument(f,St.min()))}else Ht(s===1,20013,{expectedCount:s});else{const f=this._t(n);if(f!==s){const g=this.ut(t),p=g?this.ct(g,t,f):1;if(p!==0){this.it(n);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:c=0}=n;let f,g;try{f=qr(s).toUint8Array()}catch(p){if(p instanceof OE)return $a("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{g=new Ym(f,l,c)}catch(p){return $a(p instanceof Rl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return g.ge===0?null:g}ct(t,n,s){return n.Ce.count===s-this.Pt(t,n.targetId)?0:2}Pt(t,n){const s=this.Ge.getRemoteKeysForTarget(n);let l=0;return s.forEach((c=>{const f=this.Ge.ht(),g=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;t.mightContain(g)||(this.et(n,c,null),l++)})),l}Tt(t){const n=new Map;this.ze.forEach(((c,f)=>{const g=this.ot(f);if(g){if(c.current&&um(g.target)){const p=new mt(g.target.path);this.It(p).has(f)||this.Et(f,p)||this.et(f,p,$e.newNoDocument(p,t))}c.Be&&(n.set(f,c.ke()),c.qe())}}));let s=Mt();this.He.forEach(((c,f)=>{let g=!0;f.forEachWhile((p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(s=s.add(c))})),this.je.forEach(((c,f)=>f.setReadTime(t)));const l=new Eh(t,n,this.Ye,this.je,s);return this.je=Xi(),this.Je=Nc(),this.He=Nc(),this.Ye=new se(Vt),l}Xe(t,n){if(!this.rt(t))return;const s=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,s){if(!this.rt(t))return;const l=this.nt(t);this.Et(t,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),s&&(this.je=this.je.insert(n,s))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new Zv,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new xe(Vt),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new xe(Vt),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||ot("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Zv),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Nc(){return new se(mt.comparator)}function Wv(){return new se(mt.comparator)}const HR={asc:"ASCENDING",desc:"DESCENDING"},FR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},GR={and:"AND",or:"OR"};class QR{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function fm(r,t){return r.useProto3Json||dh(t)?t:{value:t}}function th(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function cT(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function KR(r,t){return th(r,t.toTimestamp())}function fi(r){return Ht(!!r,49232),St.fromTimestamp((function(n){const s=Br(n);return new ee(s.seconds,s.nanos)})(r))}function Xm(r,t){return dm(r,t).canonicalString()}function dm(r,t){const n=(function(l){return new te(["projects",l.projectId,"databases",l.database])})(r).child("documents");return t===void 0?n:n.child(t)}function hT(r){const t=te.fromString(r);return Ht(pT(t),10190,{key:t.toString()}),t}function mm(r,t){return Xm(r.databaseId,t.path)}function Fd(r,t){const n=hT(t);if(n.get(1)!==r.databaseId.projectId)throw new at(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new at(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new mt(dT(n))}function fT(r,t){return Xm(r.databaseId,t)}function YR(r){const t=hT(r);return t.length===4?te.emptyPath():dT(t)}function gm(r){return new te(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function dT(r){return Ht(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Jv(r,t,n){return{name:mm(r,t),fields:n.value.mapValue.fields}}function XR(r,t){let n;if("targetChange"in t){t.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Tt(39313,{state:y})})(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],c=(function(y,T){return y.useProto3Json?(Ht(T===void 0||typeof T=="string",58123),Fe.fromBase64String(T||"")):(Ht(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Fe.fromUint8Array(T||new Uint8Array))})(r,t.targetChange.resumeToken),f=t.targetChange.cause,g=f&&(function(y){const T=y.code===void 0?Y.UNKNOWN:oT(y.code);return new at(T,y.message||"")})(f);n=new uT(s,l,c,g||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const l=Fd(r,s.document.name),c=fi(s.document.updateTime),f=s.document.createTime?fi(s.document.createTime):St.min(),g=new on({mapValue:{fields:s.document.fields}}),p=$e.newFoundDocument(l,c,f,g),y=s.targetIds||[],T=s.removedTargetIds||[];n=new zc(y,T,p.key,p)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const l=Fd(r,s.document),c=s.readTime?fi(s.readTime):St.min(),f=$e.newNoDocument(l,c),g=s.removedTargetIds||[];n=new zc([],g,f.key,f)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const l=Fd(r,s.document),c=s.removedTargetIds||[];n=new zc([],c,l,null)}else{if(!("filter"in t))return Tt(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:l=0,unchangedNames:c}=s,f=new LR(l,c),g=s.targetId;n=new lT(g,f)}}return n}function $R(r,t){let n;if(t instanceof Zl)n={update:Jv(r,t.key,t.value)};else if(t instanceof Qm)n={delete:mm(r,t.key)};else if(t instanceof Yr)n={update:Jv(r,t.key,t.data),updateMask:sI(t.fieldMask)};else{if(!(t instanceof PR))return Tt(16599,{Vt:t.type});n={verify:mm(r,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((s=>(function(c,f){const g=f.transform;if(g instanceof Bl)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof ql)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Hl)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Fl)return{fieldPath:f.field.canonicalString(),increment:g.Ae};throw Tt(20930,{transform:f.transform})})(0,s)))),t.precondition.isNone||(n.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:KR(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Tt(27497)})(r,t.precondition)),n}function ZR(r,t){return r&&r.length>0?(Ht(t!==void 0,14353),r.map((n=>(function(l,c){let f=l.updateTime?fi(l.updateTime):fi(c);return f.isEqual(St.min())&&(f=fi(c)),new OR(f,l.transformResults||[])})(n,t)))):[]}function WR(r,t){return{documents:[fT(r,t.path)]}}function JR(r,t){const n={structuredQuery:{}},s=t.path;let l;t.collectionGroup!==null?(l=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=fT(r,l);const c=(function(y){if(y.length!==0)return gT(Fn.create(y,"and"))})(t.filters);c&&(n.structuredQuery.where=c);const f=(function(y){if(y.length!==0)return y.map((T=>(function(R){return{field:ja(R.field),direction:nI(R.dir)}})(T)))})(t.orderBy);f&&(n.structuredQuery.orderBy=f);const g=fm(r,t.limit);return g!==null&&(n.structuredQuery.limit=g),t.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(t.endAt)),{ft:n,parent:l}}function tI(r){let t=YR(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let l=null;if(s>0){Ht(s===1,65062);const T=n.from[0];T.allDescendants?l=T.collectionId:t=t.child(T.collectionId)}let c=[];n.where&&(c=(function(w){const R=mT(w);return R instanceof Fn&&qE(R)?R.getFilters():[R]})(n.where));let f=[];n.orderBy&&(f=(function(w){return w.map((R=>(function(F){return new zl(za(F.field),(function(Z){switch(Z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(F.direction))})(R)))})(n.orderBy));let g=null;n.limit&&(g=(function(w){let R;return R=typeof w=="object"?w.value:w,dh(R)?null:R})(n.limit));let p=null;n.startAt&&(p=(function(w){const R=!!w.before,q=w.values||[];return new Jc(q,R)})(n.startAt));let y=null;return n.endAt&&(y=(function(w){const R=!w.before,q=w.values||[];return new Jc(q,R)})(n.endAt)),ER(t,l,f,c,g,"F",p,y)}function eI(r,t){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Tt(28987,{purpose:l})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function mT(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=za(n.unaryFilter.field);return Te.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=za(n.unaryFilter.field);return Te.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=za(n.unaryFilter.field);return Te.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=za(n.unaryFilter.field);return Te.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Tt(61313);default:return Tt(60726)}})(r):r.fieldFilter!==void 0?(function(n){return Te.create(za(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Tt(58110);default:return Tt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return Fn.create(n.compositeFilter.filters.map((s=>mT(s))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Tt(1026)}})(n.compositeFilter.op))})(r):Tt(30097,{filter:r})}function nI(r){return HR[r]}function iI(r){return FR[r]}function rI(r){return GR[r]}function ja(r){return{fieldPath:r.canonicalString()}}function za(r){return He.fromServerFormat(r.fieldPath)}function gT(r){return r instanceof Te?(function(n){if(n.op==="=="){if(zv(n.value))return{unaryFilter:{field:ja(n.field),op:"IS_NAN"}};if(jv(n.value))return{unaryFilter:{field:ja(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(zv(n.value))return{unaryFilter:{field:ja(n.field),op:"IS_NOT_NAN"}};if(jv(n.value))return{unaryFilter:{field:ja(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ja(n.field),op:iI(n.op),value:n.value}}})(r):r instanceof Fn?(function(n){const s=n.getFilters().map((l=>gT(l)));return s.length===1?s[0]:{compositeFilter:{op:rI(n.op),filters:s}}})(r):Tt(54877,{filter:r})}function sI(r){const t=[];return r.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function pT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(t,n,s,l,c=St.min(),f=St.min(),g=Fe.EMPTY_BYTE_STRING,p=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=g,this.expectedCount=p}withSequenceNumber(t){return new Or(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Or(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(t){this.yt=t}}function oI(r){const t=tI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?hm(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(){this.Cn=new uI}addToCollectionParentIndex(t,n){return this.Cn.add(n),$.resolve()}getCollectionParents(t,n){return $.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return $.resolve()}deleteFieldIndex(t,n){return $.resolve()}deleteAllFieldIndexes(t){return $.resolve()}createTargetIndexes(t,n){return $.resolve()}getDocumentsMatchingTarget(t,n){return $.resolve(null)}getIndexType(t,n){return $.resolve(0)}getFieldIndexes(t,n){return $.resolve([])}getNextCollectionGroupToUpdate(t){return $.resolve(null)}getMinOffset(t,n){return $.resolve(zr.min())}getMinOffsetFromCollectionGroup(t,n){return $.resolve(zr.min())}updateCollectionGroup(t,n,s){return $.resolve()}updateIndexEntries(t,n){return $.resolve()}}class uI{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),l=this.index[n]||new xe(te.comparator),c=!l.has(s);return this.index[n]=l.add(s),c}has(t){const n=t.lastSegment(),s=t.popLast(),l=this.index[n];return l&&l.has(s)}getEntries(t){return(this.index[t]||new xe(te.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},yT=41943040;class an{static withCacheSize(t){return new an(t,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */an.DEFAULT_COLLECTION_PERCENTILE=10,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,an.DEFAULT=new an(yT,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),an.DISABLED=new an(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new to(0)}static cr(){return new to(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0="LruGarbageCollector",cI=1048576;function n0([r,t],[n,s]){const l=Vt(r,n);return l===0?Vt(t,s):l}class hI{constructor(t){this.Ir=t,this.buffer=new xe(n0),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();n0(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class fI{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){ot(e0,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){lo(n)?ot(e0,"Ignoring IndexedDB error during garbage collection: ",n):await oo(n)}await this.Vr(3e5)}))}}class dI{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(t,n){if(n===0)return $.resolve(fh.ce);const s=new hI(n);return this.mr.forEachTarget(t,(l=>s.Ar(l.sequenceNumber))).next((()=>this.mr.pr(t,(l=>s.Ar(l))))).next((()=>s.maxValue))}removeTargets(t,n,s){return this.mr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(ot("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(t0)):this.getCacheSize(t).next((s=>s<this.params.cacheSizeCollectionThreshold?(ot("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),t0):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let s,l,c,f,g,p,y;const T=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(ot("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),l=this.params.maximumSequenceNumbersToCollect):l=w,f=Date.now(),this.nthSequenceNumber(t,l)))).next((w=>(s=w,g=Date.now(),this.removeTargets(t,s,n)))).next((w=>(c=w,p=Date.now(),this.removeOrphanedDocuments(t,s)))).next((w=>(y=Date.now(),Ua()<=Ot.DEBUG&&ot("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-T}ms
	Determined least recently used ${l} in `+(g-f)+`ms
	Removed ${c} targets in `+(p-g)+`ms
	Removed ${w} documents in `+(y-p)+`ms
Total Duration: ${y-T}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:w}))))}}function mI(r,t){return new dI(r,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(){this.changes=new Hs((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,$e.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?$.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(t,n,s,l){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=l}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next((l=>(s=l,this.remoteDocumentCache.getEntry(t,n)))).next((l=>(s!==null&&Vl(s.mutation,l,_n.empty(),ee.now()),l)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.getLocalViewOfDocuments(t,s,Mt()).next((()=>s))))}getLocalViewOfDocuments(t,n,s=Mt()){const l=Ms();return this.populateOverlays(t,l,n).next((()=>this.computeViews(t,n,l,s).next((c=>{let f=wl();return c.forEach(((g,p)=>{f=f.insert(g,p.overlayedDocument)})),f}))))}getOverlayedDocuments(t,n){const s=Ms();return this.populateOverlays(t,s,n).next((()=>this.computeViews(t,n,s,Mt())))}populateOverlays(t,n,s){const l=[];return s.forEach((c=>{n.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(t,l).next((c=>{c.forEach(((f,g)=>{n.set(f,g)}))}))}computeViews(t,n,s,l){let c=Xi();const f=Ol(),g=(function(){return Ol()})();return n.forEach(((p,y)=>{const T=s.get(y.key);l.has(y.key)&&(T===void 0||T.mutation instanceof Yr)?c=c.insert(y.key,y):T!==void 0?(f.set(y.key,T.mutation.getFieldMask()),Vl(T.mutation,y,T.mutation.getFieldMask(),ee.now())):f.set(y.key,_n.empty())})),this.recalculateAndSaveOverlays(t,c).next((p=>(p.forEach(((y,T)=>f.set(y,T))),n.forEach(((y,T)=>g.set(y,new pI(T,f.get(y)??null)))),g)))}recalculateAndSaveOverlays(t,n){const s=Ol();let l=new se(((f,g)=>f-g)),c=Mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((f=>{for(const g of f)g.keys().forEach((p=>{const y=n.get(p);if(y===null)return;let T=s.get(p)||_n.empty();T=g.applyToLocalView(y,T),s.set(p,T);const w=(l.get(g.batchId)||Mt()).add(p);l=l.insert(g.batchId,w)}))})).next((()=>{const f=[],g=l.getReverseIterator();for(;g.hasNext();){const p=g.getNext(),y=p.key,T=p.value,w=ZE();T.forEach((R=>{if(!c.has(R)){const q=sT(n.get(R),s.get(R));q!==null&&w.set(R,q),c=c.add(R)}})),f.push(this.documentOverlayCache.saveOverlays(t,y,w))}return $.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.recalculateAndSaveOverlays(t,s)))}getDocumentsMatchingQuery(t,n,s,l){return(function(f){return mt.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):QE(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,l):this.getDocumentsMatchingCollectionQuery(t,n,s,l)}getNextDocuments(t,n,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,l).next((c=>{const f=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,l-c.size):$.resolve(Ms());let g=kl,p=c;return f.next((y=>$.forEach(y,((T,w)=>(g<w.largestBatchId&&(g=w.largestBatchId),c.get(T)?$.resolve():this.remoteDocumentCache.getEntry(t,T).next((R=>{p=p.insert(T,R)}))))).next((()=>this.populateOverlays(t,y,c))).next((()=>this.computeViews(t,p,y,Mt()))).next((T=>({batchId:g,changes:$E(T)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new mt(n)).next((s=>{let l=wl();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l}))}getDocumentsMatchingCollectionGroupQuery(t,n,s,l){const c=n.collectionGroup;let f=wl();return this.indexManager.getCollectionParents(t,c).next((g=>$.forEach(g,(p=>{const y=(function(w,R){return new uo(R,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(n,p.child(c));return this.getDocumentsMatchingCollectionQuery(t,y,s,l).next((T=>{T.forEach(((w,R)=>{f=f.insert(w,R)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(t,n,s,l){let c;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next((f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,c,l)))).next((f=>{c.forEach(((p,y)=>{const T=y.getKey();f.get(T)===null&&(f=f.insert(T,$e.newInvalidDocument(T)))}));let g=wl();return f.forEach(((p,y)=>{const T=c.get(p);T!==void 0&&Vl(T.mutation,y,_n.empty(),ee.now()),yh(n,y)&&(g=g.insert(p,y))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return $.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:fi(l.createTime)}})(n)),$.resolve()}getNamedQuery(t,n){return $.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:oI(l.bundledQuery),readTime:fi(l.readTime)}})(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(){this.overlays=new se(mt.comparator),this.qr=new Map}getOverlay(t,n){return $.resolve(this.overlays.get(n))}getOverlays(t,n){const s=Ms();return $.forEach(n,(l=>this.getOverlay(t,l).next((c=>{c!==null&&s.set(l,c)})))).next((()=>s))}saveOverlays(t,n,s){return s.forEach(((l,c)=>{this.St(t,n,c)})),$.resolve()}removeOverlaysForBatchId(t,n,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),$.resolve()}getOverlaysForCollection(t,n,s){const l=Ms(),c=n.length+1,f=new mt(n.child("")),g=this.overlays.getIteratorFrom(f);for(;g.hasNext();){const p=g.getNext().value,y=p.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&p.largestBatchId>s&&l.set(p.getKey(),p)}return $.resolve(l)}getOverlaysForCollectionGroup(t,n,s,l){let c=new se(((y,T)=>y-T));const f=this.overlays.getIterator();for(;f.hasNext();){const y=f.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let T=c.get(y.largestBatchId);T===null&&(T=Ms(),c=c.insert(y.largestBatchId,T)),T.set(y.getKey(),y)}}const g=Ms(),p=c.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,T)=>g.set(y,T))),!(g.size()>=l)););return $.resolve(g)}St(t,n,s){const l=this.overlays.get(s.key);if(l!==null){const f=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new UR(n,s));let c=this.qr.get(n);c===void 0&&(c=Mt(),this.qr.set(n,c)),this.qr.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(){this.sessionToken=Fe.EMPTY_BYTE_STRING}getSessionToken(t){return $.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(){this.Qr=new xe(ke.$r),this.Ur=new xe(ke.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const s=new ke(t,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,n){t.forEach((s=>this.addReference(s,n)))}removeReference(t,n){this.Gr(new ke(t,n))}zr(t,n){t.forEach((s=>this.removeReference(s,n)))}jr(t){const n=new mt(new te([])),s=new ke(n,t),l=new ke(n,t+1),c=[];return this.Ur.forEachInRange([s,l],(f=>{this.Gr(f),c.push(f.key)})),c}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new mt(new te([])),s=new ke(n,t),l=new ke(n,t+1);let c=Mt();return this.Ur.forEachInRange([s,l],(f=>{c=c.add(f.key)})),c}containsKey(t){const n=new ke(t,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class ke{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return mt.comparator(t.key,n.key)||Vt(t.Yr,n.Yr)}static Kr(t,n){return Vt(t.Yr,n.Yr)||mt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new xe(ke.$r)}checkEmpty(t){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new kR(c,n,s,l);this.mutationQueue.push(f);for(const g of l)this.Zr=this.Zr.add(new ke(g.key,c)),this.indexManager.addToCollectionParentIndex(t,g.key.path.popLast());return $.resolve(f)}lookupMutationBatch(t,n){return $.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,l=this.ei(s),c=l<0?0:l;return $.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?zm:this.tr-1)}getAllMutationBatches(t){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new ke(n,0),l=new ke(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,l],(f=>{const g=this.Xr(f.Yr);c.push(g)})),$.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new xe(Vt);return n.forEach((l=>{const c=new ke(l,0),f=new ke(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,f],(g=>{s=s.add(g.Yr)}))})),$.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,l=s.length+1;let c=s;mt.isDocumentKey(c)||(c=c.child(""));const f=new ke(new mt(c),0);let g=new xe(Vt);return this.Zr.forEachWhile((p=>{const y=p.key.path;return!!s.isPrefixOf(y)&&(y.length===l&&(g=g.add(p.Yr)),!0)}),f),$.resolve(this.ti(g))}ti(t){const n=[];return t.forEach((s=>{const l=this.Xr(s);l!==null&&n.push(l)})),n}removeMutationBatch(t,n){Ht(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return $.forEach(n.mutations,(l=>{const c=new ke(l.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)})).next((()=>{this.Zr=s}))}ir(t){}containsKey(t,n){const s=new ke(n,0),l=this.Zr.firstAfterOrEqual(s);return $.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,$.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(t){this.ri=t,this.docs=(function(){return new se(mt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,l=this.docs.get(s),c=l?l.size:0,f=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return $.resolve(s?s.document.mutableCopy():$e.newInvalidDocument(n))}getEntries(t,n){let s=Xi();return n.forEach((l=>{const c=this.docs.get(l);s=s.insert(l,c?c.document.mutableCopy():$e.newInvalidDocument(l))})),$.resolve(s)}getDocumentsMatchingQuery(t,n,s,l){let c=Xi();const f=n.path,g=new mt(f.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(g);for(;p.hasNext();){const{key:y,value:{document:T}}=p.getNext();if(!f.isPrefixOf(y.path))break;y.path.length>f.length+1||W2(Z2(T),s)<=0||(l.has(T.key)||yh(n,T))&&(c=c.insert(T.key,T.mutableCopy()))}return $.resolve(c)}getAllFromCollectionGroup(t,n,s,l){Tt(9500)}ii(t,n){return $.forEach(this.docs,(s=>n(s)))}newChangeBuffer(t){return new bI(this)}getSize(t){return $.resolve(this.size)}}class bI extends gI{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((s,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(t,l)):this.Nr.removeEntry(s)})),$.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(t){this.persistence=t,this.si=new Hs((n=>Hm(n)),Fm),this.lastRemoteSnapshotVersion=St.min(),this.highestTargetId=0,this.oi=0,this._i=new $m,this.targetCount=0,this.ai=to.ur()}forEachTarget(t,n){return this.si.forEach(((s,l)=>n(l))),$.resolve()}getLastRemoteSnapshotVersion(t){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return $.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),$.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new to(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,$.resolve()}updateTargetData(t,n){return this.Pr(n),$.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(t,n,s){let l=0;const c=[];return this.si.forEach(((f,g)=>{g.sequenceNumber<=n&&s.get(g.targetId)===null&&(this.si.delete(f),c.push(this.removeMatchingKeysForTargetId(t,g.targetId)),l++)})),$.waitFor(c).next((()=>l))}getTargetCount(t){return $.resolve(this.targetCount)}getTargetData(t,n){const s=this.si.get(n)||null;return $.resolve(s)}addMatchingKeys(t,n,s){return this._i.Wr(n,s),$.resolve()}removeMatchingKeys(t,n,s){this._i.zr(n,s);const l=this.persistence.referenceDelegate,c=[];return l&&n.forEach((f=>{c.push(l.markPotentiallyOrphaned(t,f))})),$.waitFor(c)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),$.resolve()}getMatchingKeysForTargetId(t,n){const s=this._i.Hr(n);return $.resolve(s)}containsKey(t,n){return $.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(t,n){this.ui={},this.overlays={},this.ci=new fh(0),this.li=!1,this.li=!0,this.hi=new EI,this.referenceDelegate=t(this),this.Pi=new SI(this),this.indexManager=new lI,this.remoteDocumentCache=(function(l){return new AI(l)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new aI(n),this.Ii=new _I(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new vI,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.ui[t.toKey()];return s||(s=new TI(n,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,s){ot("MemoryPersistence","Starting transaction:",t);const l=new wI(this.ci.next());return this.referenceDelegate.Ei(),s(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(t,n){return $.or(Object.values(this.ui).map((s=>()=>s.containsKey(t,n))))}}class wI extends tR{constructor(t){super(),this.currentSequenceNumber=t}}class Zm{constructor(t){this.persistence=t,this.Ri=new $m,this.Vi=null}static mi(t){return new Zm(t)}get fi(){if(this.Vi)return this.Vi;throw Tt(60996)}addReference(t,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),$.resolve()}removeReference(t,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),$.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),$.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.fi,(s=>{const l=mt.fromPath(s);return this.gi(t,l).next((c=>{c||n.removeEntry(l,St.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return $.or([()=>$.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class eh{constructor(t,n){this.persistence=t,this.pi=new Hs((s=>iR(s.path)),((s,l)=>s.isEqual(l))),this.garbageCollector=mI(this,n)}static mi(t,n){return new eh(t,n)}Ei(){}di(t){return $.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((s=>n.next((l=>s+l))))}wr(t){let n=0;return this.pr(t,(s=>{n++})).next((()=>n))}pr(t,n){return $.forEach(this.pi,((s,l)=>this.br(t,s,l).next((c=>c?$.resolve():n(l)))))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(t,(f=>this.br(t,f,n).next((g=>{g||(s++,c.removeEntry(f,St.min()))})))).next((()=>c.apply(t))).next((()=>s))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),$.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),$.resolve()}removeReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),$.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),$.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Uc(t.data.value)),n}br(t,n,s){return $.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const l=this.pi.get(n);return $.resolve(l!==void 0&&l>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(t,n,s,l){this.targetId=t,this.fromCache=n,this.Es=s,this.ds=l}static As(t,n){let s=Mt(),l=Mt();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new Wm(t,n.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return nS()?8:eR(Ze())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,s,l){const c={result:null};return this.ys(t,n).next((f=>{c.result=f})).next((()=>{if(!c.result)return this.ws(t,n,l,s).next((f=>{c.result=f}))})).next((()=>{if(c.result)return;const f=new RI;return this.Ss(t,n,f).next((g=>{if(c.result=g,this.Vs)return this.bs(t,n,f,g.size)}))})).next((()=>c.result))}bs(t,n,s,l){return s.documentReadCount<this.fs?(Ua()<=Ot.DEBUG&&ot("QueryEngine","SDK will not create cache indexes for query:",La(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),$.resolve()):(Ua()<=Ot.DEBUG&&ot("QueryEngine","Query:",La(n),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?(Ua()<=Ot.DEBUG&&ot("QueryEngine","The SDK decides to create cache indexes for query:",La(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,hi(n))):$.resolve())}ys(t,n){if(Fv(n))return $.resolve(null);let s=hi(n);return this.indexManager.getIndexType(t,s).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=hm(n,null,"F"),s=hi(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next((c=>{const f=Mt(...c);return this.ps.getDocuments(t,f).next((g=>this.indexManager.getMinOffset(t,s).next((p=>{const y=this.Ds(n,g);return this.Cs(n,y,f,p.readTime)?this.ys(t,hm(n,null,"F")):this.vs(t,y,n,p)}))))})))))}ws(t,n,s,l){return Fv(n)||l.isEqual(St.min())?$.resolve(null):this.ps.getDocuments(t,s).next((c=>{const f=this.Ds(n,c);return this.Cs(n,f,s,l)?$.resolve(null):(Ua()<=Ot.DEBUG&&ot("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),La(n)),this.vs(t,f,n,$2(l,kl)).next((g=>g)))}))}Ds(t,n){let s=new xe(YE(t));return n.forEach(((l,c)=>{yh(t,c)&&(s=s.add(c))})),s}Cs(t,n,s,l){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const c=t.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(t,n,s){return Ua()<=Ot.DEBUG&&ot("QueryEngine","Using full collection scan to execute query:",La(n)),this.ps.getDocumentsMatchingQuery(t,n,zr.min(),s)}vs(t,n,s,l){return this.ps.getDocumentsMatchingQuery(t,s,l).next((c=>(n.forEach((f=>{c=c.insert(f.key,f)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm="LocalStore",CI=3e8;class xI{constructor(t,n,s,l){this.persistence=t,this.Fs=n,this.serializer=l,this.Ms=new se(Vt),this.xs=new Hs((c=>Hm(c)),Fm),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new yI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function NI(r,t,n,s){return new xI(r,t,n,s)}async function vT(r,t){const n=wt(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let l;return n.mutationQueue.getAllMutationBatches(s).next((c=>(l=c,n.Bs(t),n.mutationQueue.getAllMutationBatches(s)))).next((c=>{const f=[],g=[];let p=Mt();for(const y of l){f.push(y.batchId);for(const T of y.mutations)p=p.add(T.key)}for(const y of c){g.push(y.batchId);for(const T of y.mutations)p=p.add(T.key)}return n.localDocuments.getDocuments(s,p).next((y=>({Ls:y,removedBatchIds:f,addedBatchIds:g})))}))}))}function DI(r,t){const n=wt(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const l=t.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,p,y,T){const w=y.batch,R=w.keys();let q=$.resolve();return R.forEach((F=>{q=q.next((()=>T.getEntry(p,F))).next((et=>{const Z=y.docVersions.get(F);Ht(Z!==null,48541),et.version.compareTo(Z)<0&&(w.applyToRemoteDocument(et,y),et.isValidDocument()&&(et.setReadTime(y.commitVersion),T.addEntry(et)))}))})),q.next((()=>g.mutationQueue.removeMutationBatch(p,w)))})(n,s,t,c).next((()=>c.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,l,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(g){let p=Mt();for(let y=0;y<g.mutationResults.length;++y)g.mutationResults[y].transformResults.length>0&&(p=p.add(g.batch.mutations[y].key));return p})(t)))).next((()=>n.localDocuments.getDocuments(s,l)))}))}function ET(r){const t=wt(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function OI(r,t){const n=wt(r),s=t.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const g=[];t.targetChanges.forEach(((T,w)=>{const R=l.get(w);if(!R)return;g.push(n.Pi.removeMatchingKeys(c,T.removedDocuments,w).next((()=>n.Pi.addMatchingKeys(c,T.addedDocuments,w))));let q=R.withSequenceNumber(c.currentSequenceNumber);t.targetMismatches.get(w)!==null?q=q.withResumeToken(Fe.EMPTY_BYTE_STRING,St.min()).withLastLimboFreeSnapshotVersion(St.min()):T.resumeToken.approximateByteSize()>0&&(q=q.withResumeToken(T.resumeToken,s)),l=l.insert(w,q),(function(et,Z,lt){return et.resumeToken.approximateByteSize()===0||Z.snapshotVersion.toMicroseconds()-et.snapshotVersion.toMicroseconds()>=CI?!0:lt.addedDocuments.size+lt.modifiedDocuments.size+lt.removedDocuments.size>0})(R,q,T)&&g.push(n.Pi.updateTargetData(c,q))}));let p=Xi(),y=Mt();if(t.documentUpdates.forEach((T=>{t.resolvedLimboDocuments.has(T)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(c,T))})),g.push(VI(c,f,t.documentUpdates).next((T=>{p=T.ks,y=T.qs}))),!s.isEqual(St.min())){const T=n.Pi.getLastRemoteSnapshotVersion(c).next((w=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));g.push(T)}return $.waitFor(g).next((()=>f.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,p,y))).next((()=>p))})).then((c=>(n.Ms=l,c)))}function VI(r,t,n){let s=Mt(),l=Mt();return n.forEach((c=>s=s.add(c))),t.getEntries(r,s).next((c=>{let f=Xi();return n.forEach(((g,p)=>{const y=c.get(g);p.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(g)),p.isNoDocument()&&p.version.isEqual(St.min())?(t.removeEntry(g,p.readTime),f=f.insert(g,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(t.addEntry(p),f=f.insert(g,p)):ot(Jm,"Ignoring outdated watch update for ",g,". Current version:",y.version," Watch version:",p.version)})),{ks:f,qs:l}}))}function MI(r,t){const n=wt(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(t===void 0&&(t=zm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t))))}function PI(r,t){const n=wt(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let l;return n.Pi.getTargetData(s,t).next((c=>c?(l=c,$.resolve(l)):n.Pi.allocateTargetId(s).next((f=>(l=new Or(t,f,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,l).next((()=>l)))))))})).then((s=>{const l=n.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(t,s.targetId)),s}))}async function pm(r,t,n){const s=wt(r),l=s.Ms.get(t),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,(f=>s.persistence.referenceDelegate.removeTarget(f,l)))}catch(f){if(!lo(f))throw f;ot(Jm,`Failed to update sequence numbers for target ${t}: ${f}`)}s.Ms=s.Ms.remove(t),s.xs.delete(l.target)}function i0(r,t,n){const s=wt(r);let l=St.min(),c=Mt();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(p,y,T){const w=wt(p),R=w.xs.get(T);return R!==void 0?$.resolve(w.Ms.get(R)):w.Pi.getTargetData(y,T)})(s,f,hi(t)).next((g=>{if(g)return l=g.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(f,g.targetId).next((p=>{c=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(f,t,n?l:St.min(),n?c:Mt()))).next((g=>(kI(s,AR(t),g),{documents:g,Qs:c})))))}function kI(r,t,n){let s=r.Os.get(t)||St.min();n.forEach(((l,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.Os.set(t,s)}class r0{constructor(){this.activeTargetIds=CR()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class UI{constructor(){this.Mo=new r0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,s){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new r0,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0="ConnectivityMonitor";class a0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ot(s0,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){ot(s0,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dc=null;function ym(){return Dc===null?Dc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Dc++,"0x"+Dc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd="RestConnection",jI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class zI{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===Zc?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(t,n,s,l,c){const f=ym(),g=this.zo(t,n.toUriEncodedString());ot(Gd,`Sending RPC '${t}' ${f}:`,g,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,l,c);const{host:y}=new URL(g),T=no(y);return this.Jo(t,g,p,s,T).then((w=>(ot(Gd,`Received RPC '${t}' ${f}: `,w),w)),(w=>{throw $a(Gd,`RPC '${t}' ${f} failed with error: `,w,"url: ",g,"request:",s),w}))}Ho(t,n,s,l,c,f){return this.Go(t,n,s,l,c)}jo(t,n,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ao})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,c)=>t[c]=l)),s&&s.headers.forEach(((l,c)=>t[c]=l))}zo(t,n){const s=jI[t];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ye="WebChannelConnection";class qI extends zI{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,s,l,c){const f=ym();return new Promise(((g,p)=>{const y=new TE;y.setWithCredentials(!0),y.listenOnce(AE.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case kc.NO_ERROR:const w=y.getResponseJson();ot(Ye,`XHR for RPC '${t}' ${f} received:`,JSON.stringify(w)),g(w);break;case kc.TIMEOUT:ot(Ye,`RPC '${t}' ${f} timed out`),p(new at(Y.DEADLINE_EXCEEDED,"Request time out"));break;case kc.HTTP_ERROR:const R=y.getStatus();if(ot(Ye,`RPC '${t}' ${f} failed with status:`,R,"response text:",y.getResponseText()),R>0){let q=y.getResponseJson();Array.isArray(q)&&(q=q[0]);const F=q==null?void 0:q.error;if(F&&F.status&&F.message){const et=(function(lt){const J=lt.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(J)>=0?J:Y.UNKNOWN})(F.status);p(new at(et,F.message))}else p(new at(Y.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new at(Y.UNAVAILABLE,"Connection failed."));break;default:Tt(9055,{l_:t,streamId:f,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ot(Ye,`RPC '${t}' ${f} completed.`)}}));const T=JSON.stringify(l);ot(Ye,`RPC '${t}' ${f} sending request:`,l),y.send(n,"POST",T,s,15)}))}T_(t,n,s){const l=ym(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],f=wE(),g=SE(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const T=c.join("");ot(Ye,`Creating RPC '${t}' stream ${l}: ${T}`,p);const w=f.createWebChannel(T,p);this.I_(w);let R=!1,q=!1;const F=new BI({Yo:Z=>{q?ot(Ye,`Not sending because RPC '${t}' stream ${l} is closed:`,Z):(R||(ot(Ye,`Opening RPC '${t}' stream ${l} transport.`),w.open(),R=!0),ot(Ye,`RPC '${t}' stream ${l} sending:`,Z),w.send(Z))},Zo:()=>w.close()}),et=(Z,lt,J)=>{Z.listen(lt,(tt=>{try{J(tt)}catch(ht){setTimeout((()=>{throw ht}),0)}}))};return et(w,Sl.EventType.OPEN,(()=>{q||(ot(Ye,`RPC '${t}' stream ${l} transport opened.`),F.o_())})),et(w,Sl.EventType.CLOSE,(()=>{q||(q=!0,ot(Ye,`RPC '${t}' stream ${l} transport closed`),F.a_(),this.E_(w))})),et(w,Sl.EventType.ERROR,(Z=>{q||(q=!0,$a(Ye,`RPC '${t}' stream ${l} transport errored. Name:`,Z.name,"Message:",Z.message),F.a_(new at(Y.UNAVAILABLE,"The operation could not be completed")))})),et(w,Sl.EventType.MESSAGE,(Z=>{var lt;if(!q){const J=Z.data[0];Ht(!!J,16349);const tt=J,ht=(tt==null?void 0:tt.error)||((lt=tt[0])==null?void 0:lt.error);if(ht){ot(Ye,`RPC '${t}' stream ${l} received error:`,ht);const ct=ht.status;let gt=(function(b){const N=Ee[b];if(N!==void 0)return oT(N)})(ct),D=ht.message;gt===void 0&&(gt=Y.INTERNAL,D="Unknown error status: "+ct+" with message "+ht.message),q=!0,F.a_(new at(gt,D)),w.close()}else ot(Ye,`RPC '${t}' stream ${l} received:`,J),F.u_(J)}})),et(g,bE.STAT_EVENT,(Z=>{Z.stat===rm.PROXY?ot(Ye,`RPC '${t}' stream ${l} detected buffering proxy`):Z.stat===rm.NOPROXY&&ot(Ye,`RPC '${t}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{F.__()}),0),F}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function Qd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Th(r){return new QR(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(t,n,s=1e3,l=1.5,c=6e4){this.Mi=t,this.timerId=n,this.d_=s,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-s);l>0&&ot("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0="PersistentStream";class AT{constructor(t,n,s,l,c,f,g,p){this.Mi=t,this.S_=s,this.b_=l,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=g,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new TT(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===Y.RESOURCE_EXHAUSTED?(Yi(n.toString()),Yi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,l])=>{this.D_===n&&this.G_(s,l)}),(s=>{t((()=>{const l=new at(Y.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)}))}))}G_(t,n){const s=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{s((()=>this.z_(l)))})),this.stream.onMessage((l=>{s((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return ot(o0,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(ot(o0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class HI extends AT{constructor(t,n,s,l,c,f){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,l,f),this.serializer=c}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=XR(this.serializer,t),s=(function(c){if(!("targetChange"in c))return St.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?St.min():f.readTime?fi(f.readTime):St.min()})(t);return this.listener.H_(n,s)}Y_(t){const n={};n.database=gm(this.serializer),n.addTarget=(function(c,f){let g;const p=f.target;if(g=um(p)?{documents:WR(c,p)}:{query:JR(c,p).ft},g.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){g.resumeToken=cT(c,f.resumeToken);const y=fm(c,f.expectedCount);y!==null&&(g.expectedCount=y)}else if(f.snapshotVersion.compareTo(St.min())>0){g.readTime=th(c,f.snapshotVersion.toTimestamp());const y=fm(c,f.expectedCount);y!==null&&(g.expectedCount=y)}return g})(this.serializer,t);const s=eI(this.serializer,t);s&&(n.labels=s),this.q_(n)}Z_(t){const n={};n.database=gm(this.serializer),n.removeTarget=t,this.q_(n)}}class FI extends AT{constructor(t,n,s,l,c,f){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,l,f),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return Ht(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Ht(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Ht(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=ZR(t.writeResults,t.commitTime),s=fi(t.commitTime);return this.listener.na(s,n)}ra(){const t={};t.database=gm(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((s=>$R(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{}class QI extends GI{constructor(t,n,s,l){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new at(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Go(t,dm(n,s),l,c,f))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new at(Y.UNKNOWN,c.toString())}))}Ho(t,n,s,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,g])=>this.connection.Ho(t,dm(n,s),l,f,g,c))).catch((f=>{throw f.name==="FirebaseError"?(f.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new at(Y.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class KI{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Yi(n),this.aa=!1):ot("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs="RemoteStore";class YI{constructor(t,n,s,l,c){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((f=>{s.enqueueAndForget((async()=>{Fs(this)&&(ot(Bs,"Restarting streams for network reachability change."),await(async function(p){const y=wt(p);y.Ea.add(4),await Jl(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Ah(y)})(this))}))})),this.Ra=new KI(s,l)}}async function Ah(r){if(Fs(r))for(const t of r.da)await t(!0)}async function Jl(r){for(const t of r.da)await t(!1)}function bT(r,t){const n=wt(r);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),ig(n)?ng(n):co(n).O_()&&eg(n,t))}function tg(r,t){const n=wt(r),s=co(n);n.Ia.delete(t),s.O_()&&ST(n,t),n.Ia.size===0&&(s.O_()?s.L_():Fs(n)&&n.Ra.set("Unknown"))}function eg(r,t){if(r.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(St.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}co(r).Y_(t)}function ST(r,t){r.Va.Ue(t),co(r).Z_(t)}function ng(r){r.Va=new qR({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),At:t=>r.Ia.get(t)||null,ht:()=>r.datastore.serializer.databaseId}),co(r).start(),r.Ra.ua()}function ig(r){return Fs(r)&&!co(r).x_()&&r.Ia.size>0}function Fs(r){return wt(r).Ea.size===0}function wT(r){r.Va=void 0}async function XI(r){r.Ra.set("Online")}async function $I(r){r.Ia.forEach(((t,n)=>{eg(r,t)}))}async function ZI(r,t){wT(r),ig(r)?(r.Ra.ha(t),ng(r)):r.Ra.set("Unknown")}async function WI(r,t,n){if(r.Ra.set("Online"),t instanceof uT&&t.state===2&&t.cause)try{await(async function(l,c){const f=c.cause;for(const g of c.targetIds)l.Ia.has(g)&&(await l.remoteSyncer.rejectListen(g,f),l.Ia.delete(g),l.Va.removeTarget(g))})(r,t)}catch(s){ot(Bs,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await nh(r,s)}else if(t instanceof zc?r.Va.Ze(t):t instanceof lT?r.Va.st(t):r.Va.tt(t),!n.isEqual(St.min()))try{const s=await ET(r.localStore);n.compareTo(s)>=0&&await(function(c,f){const g=c.Va.Tt(f);return g.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const T=c.Ia.get(y);T&&c.Ia.set(y,T.withResumeToken(p.resumeToken,f))}})),g.targetMismatches.forEach(((p,y)=>{const T=c.Ia.get(p);if(!T)return;c.Ia.set(p,T.withResumeToken(Fe.EMPTY_BYTE_STRING,T.snapshotVersion)),ST(c,p);const w=new Or(T.target,p,y,T.sequenceNumber);eg(c,w)})),c.remoteSyncer.applyRemoteEvent(g)})(r,n)}catch(s){ot(Bs,"Failed to raise snapshot:",s),await nh(r,s)}}async function nh(r,t,n){if(!lo(t))throw t;r.Ea.add(1),await Jl(r),r.Ra.set("Offline"),n||(n=()=>ET(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ot(Bs,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await Ah(r)}))}function RT(r,t){return t().catch((n=>nh(r,n,t)))}async function bh(r){const t=wt(r),n=Fr(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:zm;for(;JI(t);)try{const l=await MI(t.localStore,s);if(l===null){t.Ta.length===0&&n.L_();break}s=l.batchId,tC(t,l)}catch(l){await nh(t,l)}IT(t)&&CT(t)}function JI(r){return Fs(r)&&r.Ta.length<10}function tC(r,t){r.Ta.push(t);const n=Fr(r);n.O_()&&n.X_&&n.ea(t.mutations)}function IT(r){return Fs(r)&&!Fr(r).x_()&&r.Ta.length>0}function CT(r){Fr(r).start()}async function eC(r){Fr(r).ra()}async function nC(r){const t=Fr(r);for(const n of r.Ta)t.ea(n.mutations)}async function iC(r,t,n){const s=r.Ta.shift(),l=Km.from(s,t,n);await RT(r,(()=>r.remoteSyncer.applySuccessfulWrite(l))),await bh(r)}async function rC(r,t){t&&Fr(r).X_&&await(async function(s,l){if((function(f){return jR(f)&&f!==Y.ABORTED})(l.code)){const c=s.Ta.shift();Fr(s).B_(),await RT(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,l))),await bh(s)}})(r,t),IT(r)&&CT(r)}async function l0(r,t){const n=wt(r);n.asyncQueue.verifyOperationInProgress(),ot(Bs,"RemoteStore received new credentials");const s=Fs(n);n.Ea.add(3),await Jl(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Ah(n)}async function sC(r,t){const n=wt(r);t?(n.Ea.delete(2),await Ah(n)):t||(n.Ea.add(2),await Jl(n),n.Ra.set("Unknown"))}function co(r){return r.ma||(r.ma=(function(n,s,l){const c=wt(n);return c.sa(),new HI(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:XI.bind(null,r),t_:$I.bind(null,r),r_:ZI.bind(null,r),H_:WI.bind(null,r)}),r.da.push((async t=>{t?(r.ma.B_(),ig(r)?ng(r):r.Ra.set("Unknown")):(await r.ma.stop(),wT(r))}))),r.ma}function Fr(r){return r.fa||(r.fa=(function(n,s,l){const c=wt(n);return c.sa(),new FI(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:eC.bind(null,r),r_:rC.bind(null,r),ta:nC.bind(null,r),na:iC.bind(null,r)}),r.da.push((async t=>{t?(r.fa.B_(),await bh(r)):(await r.fa.stop(),r.Ta.length>0&&(ot(Bs,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(t,n,s,l,c){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=l,this.removalCallback=c,this.deferred=new Fi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,l,c){const f=Date.now()+s,g=new rg(t,n,f,l,c);return g.start(s),g}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new at(Y.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sg(r,t){if(Yi("AsyncQueue",`${t}: ${r}`),lo(r))return new at(Y.UNAVAILABLE,`${t}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{static emptySet(t){return new Qa(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||mt.comparator(n.key,s.key):(n,s)=>mt.comparator(n.key,s.key),this.keyedMap=wl(),this.sortedSet=new se(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,s)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Qa)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new Qa;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(){this.ga=new se(mt.comparator)}track(t){const n=t.doc.key,s=this.ga.get(n);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(n,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(n):t.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):Tt(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,s)=>{t.push(s)})),t}}class eo{constructor(t,n,s,l,c,f,g,p,y){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=g,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(t,n,s,l,c){const f=[];return n.forEach((g=>{f.push({type:0,doc:g})})),new eo(t,n,Qa.emptySet(n),f,s,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ph(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==s[l].type||!n[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class oC{constructor(){this.queries=c0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const l=wt(n),c=l.queries;l.queries=c0(),c.forEach(((f,g)=>{for(const p of g.Sa)p.onError(s)}))})(this,new at(Y.ABORTED,"Firestore shutting down"))}}function c0(){return new Hs((r=>KE(r)),ph)}async function ag(r,t){const n=wt(r);let s=3;const l=t.query;let c=n.queries.get(l);c?!c.ba()&&t.Da()&&(s=2):(c=new aC,s=t.Da()?0:1);try{switch(s){case 0:c.wa=await n.onListen(l,!0);break;case 1:c.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(f){const g=sg(f,`Initialization of query '${La(t.query)}' failed`);return void t.onError(g)}n.queries.set(l,c),c.Sa.push(t),t.va(n.onlineState),c.wa&&t.Fa(c.wa)&&lg(n)}async function og(r,t){const n=wt(r),s=t.query;let l=3;const c=n.queries.get(s);if(c){const f=c.Sa.indexOf(t);f>=0&&(c.Sa.splice(f,1),c.Sa.length===0?l=t.Da()?0:1:!c.ba()&&t.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function lC(r,t){const n=wt(r);let s=!1;for(const l of t){const c=l.query,f=n.queries.get(c);if(f){for(const g of f.Sa)g.Fa(l)&&(s=!0);f.wa=l}}s&&lg(n)}function uC(r,t,n){const s=wt(r),l=s.queries.get(t);if(l)for(const c of l.Sa)c.onError(n);s.queries.delete(t)}function lg(r){r.Ca.forEach((t=>{t.next()}))}var _m,h0;(h0=_m||(_m={})).Ma="default",h0.Cache="cache";class ug{constructor(t,n,s){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const l of t.docChanges)l.type!==3&&s.push(l);t=new eo(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=eo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==_m.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(t){this.key=t}}class NT{constructor(t){this.key=t}}class cC{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Mt(),this.mutatedKeys=Mt(),this.eu=YE(t),this.tu=new Qa(this.eu)}get nu(){return this.Ya}ru(t,n){const s=n?n.iu:new u0,l=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,f=l,g=!1;const p=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal(((T,w)=>{const R=l.get(T),q=yh(this.query,w)?w:null,F=!!R&&this.mutatedKeys.has(R.key),et=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let Z=!1;R&&q?R.data.isEqual(q.data)?F!==et&&(s.track({type:3,doc:q}),Z=!0):this.su(R,q)||(s.track({type:2,doc:q}),Z=!0,(p&&this.eu(q,p)>0||y&&this.eu(q,y)<0)&&(g=!0)):!R&&q?(s.track({type:0,doc:q}),Z=!0):R&&!q&&(s.track({type:1,doc:R}),Z=!0,(p||y)&&(g=!0)),Z&&(q?(f=f.add(q),c=et?c.add(T):c.delete(T)):(f=f.delete(T),c=c.delete(T)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const T=this.query.limitType==="F"?f.last():f.first();f=f.delete(T.key),c=c.delete(T.key),s.track({type:1,doc:T})}return{tu:f,iu:s,Cs:g,mutatedKeys:c}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,l){const c=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const f=t.iu.ya();f.sort(((T,w)=>(function(q,F){const et=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Tt(20277,{Rt:Z})}};return et(q)-et(F)})(T.type,w.type)||this.eu(T.doc,w.doc))),this.ou(s),l=l??!1;const g=n&&!l?this._u():[],p=this.Xa.size===0&&this.current&&!l?1:0,y=p!==this.Za;return this.Za=p,f.length!==0||y?{snapshot:new eo(this.query,t.tu,c,f,t.mutatedKeys,p===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new u0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Mt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return t.forEach((s=>{this.Xa.has(s)||n.push(new NT(s))})),this.Xa.forEach((s=>{t.has(s)||n.push(new xT(s))})),n}cu(t){this.Ya=t.Qs,this.Xa=Mt();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return eo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const cg="SyncEngine";class hC{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class fC{constructor(t){this.key=t,this.hu=!1}}class dC{constructor(t,n,s,l,c,f){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Hs((g=>KE(g)),ph),this.Iu=new Map,this.Eu=new Set,this.du=new se(mt.comparator),this.Au=new Map,this.Ru=new $m,this.Vu={},this.mu=new Map,this.fu=to.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function mC(r,t,n=!0){const s=kT(r);let l;const c=s.Tu.get(t);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await DT(s,t,n,!0),l}async function gC(r,t){const n=kT(r);await DT(n,t,!0,!1)}async function DT(r,t,n,s){const l=await PI(r.localStore,hi(t)),c=l.targetId,f=r.sharedClientState.addLocalQueryTarget(c,n);let g;return s&&(g=await pC(r,t,c,f==="current",l.resumeToken)),r.isPrimaryClient&&n&&bT(r.remoteStore,l),g}async function pC(r,t,n,s,l){r.pu=(w,R,q)=>(async function(et,Z,lt,J){let tt=Z.view.ru(lt);tt.Cs&&(tt=await i0(et.localStore,Z.query,!1).then((({documents:D})=>Z.view.ru(D,tt))));const ht=J&&J.targetChanges.get(Z.targetId),ct=J&&J.targetMismatches.get(Z.targetId)!=null,gt=Z.view.applyChanges(tt,et.isPrimaryClient,ht,ct);return d0(et,Z.targetId,gt.au),gt.snapshot})(r,w,R,q);const c=await i0(r.localStore,t,!0),f=new cC(t,c.Qs),g=f.ru(c.documents),p=Wl.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",l),y=f.applyChanges(g,r.isPrimaryClient,p);d0(r,n,y.au);const T=new hC(t,n,f);return r.Tu.set(t,T),r.Iu.has(n)?r.Iu.get(n).push(t):r.Iu.set(n,[t]),y.snapshot}async function yC(r,t,n){const s=wt(r),l=s.Tu.get(t),c=s.Iu.get(l.targetId);if(c.length>1)return s.Iu.set(l.targetId,c.filter((f=>!ph(f,t)))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await pm(s.localStore,l.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(l.targetId),n&&tg(s.remoteStore,l.targetId),vm(s,l.targetId)})).catch(oo)):(vm(s,l.targetId),await pm(s.localStore,l.targetId,!0))}async function _C(r,t){const n=wt(r),s=n.Tu.get(t),l=n.Iu.get(s.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),tg(n.remoteStore,s.targetId))}async function vC(r,t,n){const s=RC(r);try{const l=await(function(f,g){const p=wt(f),y=ee.now(),T=g.reduce(((q,F)=>q.add(F.key)),Mt());let w,R;return p.persistence.runTransaction("Locally write mutations","readwrite",(q=>{let F=Xi(),et=Mt();return p.Ns.getEntries(q,T).next((Z=>{F=Z,F.forEach(((lt,J)=>{J.isValidDocument()||(et=et.add(lt))}))})).next((()=>p.localDocuments.getOverlayedDocuments(q,F))).next((Z=>{w=Z;const lt=[];for(const J of g){const tt=MR(J,w.get(J.key).overlayedDocument);tt!=null&&lt.push(new Yr(J.key,tt,jE(tt.value.mapValue),qn.exists(!0)))}return p.mutationQueue.addMutationBatch(q,y,lt,g)})).next((Z=>{R=Z;const lt=Z.applyToLocalDocumentSet(w,et);return p.documentOverlayCache.saveOverlays(q,Z.batchId,lt)}))})).then((()=>({batchId:R.batchId,changes:$E(w)})))})(s.localStore,t);s.sharedClientState.addPendingMutation(l.batchId),(function(f,g,p){let y=f.Vu[f.currentUser.toKey()];y||(y=new se(Vt)),y=y.insert(g,p),f.Vu[f.currentUser.toKey()]=y})(s,l.batchId,n),await tu(s,l.changes),await bh(s.remoteStore)}catch(l){const c=sg(l,"Failed to persist write");n.reject(c)}}async function OT(r,t){const n=wt(r);try{const s=await OI(n.localStore,t);t.targetChanges.forEach(((l,c)=>{const f=n.Au.get(c);f&&(Ht(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?f.hu=!0:l.modifiedDocuments.size>0?Ht(f.hu,14607):l.removedDocuments.size>0&&(Ht(f.hu,42227),f.hu=!1))})),await tu(n,s,t)}catch(s){await oo(s)}}function f0(r,t,n){const s=wt(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const l=[];s.Tu.forEach(((c,f)=>{const g=f.view.va(t);g.snapshot&&l.push(g.snapshot)})),(function(f,g){const p=wt(f);p.onlineState=g;let y=!1;p.queries.forEach(((T,w)=>{for(const R of w.Sa)R.va(g)&&(y=!0)})),y&&lg(p)})(s.eventManager,t),l.length&&s.Pu.H_(l),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function EC(r,t,n){const s=wt(r);s.sharedClientState.updateQueryState(t,"rejected",n);const l=s.Au.get(t),c=l&&l.key;if(c){let f=new se(mt.comparator);f=f.insert(c,$e.newNoDocument(c,St.min()));const g=Mt().add(c),p=new Eh(St.min(),new Map,new se(Vt),f,g);await OT(s,p),s.du=s.du.remove(c),s.Au.delete(t),hg(s)}else await pm(s.localStore,t,!1).then((()=>vm(s,t,n))).catch(oo)}async function TC(r,t){const n=wt(r),s=t.batch.batchId;try{const l=await DI(n.localStore,t);MT(n,s,null),VT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await tu(n,l)}catch(l){await oo(l)}}async function AC(r,t,n){const s=wt(r);try{const l=await(function(f,g){const p=wt(f);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let T;return p.mutationQueue.lookupMutationBatch(y,g).next((w=>(Ht(w!==null,37113),T=w.keys(),p.mutationQueue.removeMutationBatch(y,w)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,T,g))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,T))).next((()=>p.localDocuments.getDocuments(y,T)))}))})(s.localStore,t);MT(s,t,n),VT(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await tu(s,l)}catch(l){await oo(l)}}function VT(r,t){(r.mu.get(t)||[]).forEach((n=>{n.resolve()})),r.mu.delete(t)}function MT(r,t,n){const s=wt(r);let l=s.Vu[s.currentUser.toKey()];if(l){const c=l.get(t);c&&(n?c.reject(n):c.resolve(),l=l.remove(t)),s.Vu[s.currentUser.toKey()]=l}}function vm(r,t,n=null){r.sharedClientState.removeLocalQueryTarget(t);for(const s of r.Iu.get(t))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(t),r.isPrimaryClient&&r.Ru.jr(t).forEach((s=>{r.Ru.containsKey(s)||PT(r,s)}))}function PT(r,t){r.Eu.delete(t.path.canonicalString());const n=r.du.get(t);n!==null&&(tg(r.remoteStore,n),r.du=r.du.remove(t),r.Au.delete(n),hg(r))}function d0(r,t,n){for(const s of n)s instanceof xT?(r.Ru.addReference(s.key,t),bC(r,s)):s instanceof NT?(ot(cg,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,t),r.Ru.containsKey(s.key)||PT(r,s.key)):Tt(19791,{wu:s})}function bC(r,t){const n=t.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(ot(cg,"New document in limbo: "+n),r.Eu.add(s),hg(r))}function hg(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const t=r.Eu.values().next().value;r.Eu.delete(t);const n=new mt(te.fromString(t)),s=r.fu.next();r.Au.set(s,new fC(n)),r.du=r.du.insert(n,s),bT(r.remoteStore,new Or(hi(gh(n.path)),s,"TargetPurposeLimboResolution",fh.ce))}}async function tu(r,t,n){const s=wt(r),l=[],c=[],f=[];s.Tu.isEmpty()||(s.Tu.forEach(((g,p)=>{f.push(s.pu(p,t,n).then((y=>{var T;if((y||n)&&s.isPrimaryClient){const w=y?!y.fromCache:(T=n==null?void 0:n.targetChanges.get(p.targetId))==null?void 0:T.current;s.sharedClientState.updateQueryState(p.targetId,w?"current":"not-current")}if(y){l.push(y);const w=Wm.As(p.targetId,y);c.push(w)}})))})),await Promise.all(f),s.Pu.H_(l),await(async function(p,y){const T=wt(p);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>$.forEach(y,(R=>$.forEach(R.Es,(q=>T.persistence.referenceDelegate.addReference(w,R.targetId,q))).next((()=>$.forEach(R.ds,(q=>T.persistence.referenceDelegate.removeReference(w,R.targetId,q)))))))))}catch(w){if(!lo(w))throw w;ot(Jm,"Failed to update sequence numbers: "+w)}for(const w of y){const R=w.targetId;if(!w.fromCache){const q=T.Ms.get(R),F=q.snapshotVersion,et=q.withLastLimboFreeSnapshotVersion(F);T.Ms=T.Ms.insert(R,et)}}})(s.localStore,c))}async function SC(r,t){const n=wt(r);if(!n.currentUser.isEqual(t)){ot(cg,"User change. New user:",t.toKey());const s=await vT(n.localStore,t);n.currentUser=t,(function(c,f){c.mu.forEach((g=>{g.forEach((p=>{p.reject(new at(Y.CANCELLED,f))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await tu(n,s.Ls)}}function wC(r,t){const n=wt(r),s=n.Au.get(t);if(s&&s.hu)return Mt().add(s.key);{let l=Mt();const c=n.Iu.get(t);if(!c)return l;for(const f of c){const g=n.Tu.get(f);l=l.unionWith(g.view.nu)}return l}}function kT(r){const t=wt(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=OT.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=wC.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=EC.bind(null,t),t.Pu.H_=lC.bind(null,t.eventManager),t.Pu.yu=uC.bind(null,t.eventManager),t}function RC(r){const t=wt(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=TC.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=AC.bind(null,t),t}class ih{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Th(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return NI(this.persistence,new II,t.initialUser,this.serializer)}Cu(t){return new _T(Zm.mi,this.serializer)}Du(t){return new UI}async terminate(){var t,n;(t=this.gcScheduler)==null||t.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ih.provider={build:()=>new ih};class IC extends ih{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){Ht(this.persistence.referenceDelegate instanceof eh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new fI(s,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?an.withCacheSize(this.cacheSizeBytes):an.DEFAULT;return new _T((s=>eh.mi(s,n)),this.serializer)}}class Em{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>f0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=SC.bind(null,this.syncEngine),await sC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new oC})()}createDatastore(t){const n=Th(t.databaseInfo.databaseId),s=(function(c){return new qI(c)})(t.databaseInfo);return(function(c,f,g,p){return new QI(c,f,g,p)})(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return(function(s,l,c,f,g){return new YI(s,l,c,f,g)})(this.localStore,this.datastore,t.asyncQueue,(n=>f0(this.syncEngine,n,0)),(function(){return a0.v()?new a0:new LI})())}createSyncEngine(t,n){return(function(l,c,f,g,p,y,T){const w=new dC(l,c,f,g,p,y);return T&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await(async function(l){const c=wt(l);ot(Bs,"RemoteStore shutting down."),c.Ea.add(5),await Jl(c),c.Aa.shutdown(),c.Ra.set("Unknown")})(this.remoteStore),(t=this.datastore)==null||t.terminate(),(n=this.eventManager)==null||n.terminate()}}Em.provider={build:()=>new Em};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Yi("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr="FirestoreClient";class CC{constructor(t,n,s,l,c){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=l,this.user=Xe.UNAUTHENTICATED,this.clientId=jm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async f=>{ot(Gr,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(ot(Gr,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Fi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=sg(n,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}async function Kd(r,t){r.asyncQueue.verifyOperationInProgress(),ot(Gr,"Initializing OfflineComponentProvider");const n=r.configuration;await t.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async l=>{s.isEqual(l)||(await vT(t.localStore,l),s=l)})),t.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=t}async function m0(r,t){r.asyncQueue.verifyOperationInProgress();const n=await xC(r);ot(Gr,"Initializing OnlineComponentProvider"),await t.initialize(n,r.configuration),r.setCredentialChangeListener((s=>l0(t.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,l)=>l0(t.remoteStore,l))),r._onlineComponents=t}async function xC(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ot(Gr,"Using user provided OfflineComponentProvider");try{await Kd(r,r._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(l){return l.name==="FirebaseError"?l.code===Y.FAILED_PRECONDITION||l.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;$a("Error using user provided cache. Falling back to memory cache: "+n),await Kd(r,new ih)}}else ot(Gr,"Using default OfflineComponentProvider"),await Kd(r,new IC(void 0));return r._offlineComponents}async function UT(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ot(Gr,"Using user provided OnlineComponentProvider"),await m0(r,r._uninitializedComponentsProvider._online)):(ot(Gr,"Using default OnlineComponentProvider"),await m0(r,new Em))),r._onlineComponents}function NC(r){return UT(r).then((t=>t.syncEngine))}async function rh(r){const t=await UT(r),n=t.eventManager;return n.onListen=mC.bind(null,t.syncEngine),n.onUnlisten=yC.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=gC.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=_C.bind(null,t.syncEngine),n}function DC(r,t,n={}){const s=new Fi;return r.asyncQueue.enqueueAndForget((async()=>(function(c,f,g,p,y){const T=new fg({next:R=>{T.Nu(),f.enqueueAndForget((()=>og(c,w)));const q=R.docs.has(g);!q&&R.fromCache?y.reject(new at(Y.UNAVAILABLE,"Failed to get document because the client is offline.")):q&&R.fromCache&&p&&p.source==="server"?y.reject(new at(Y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(R)},error:R=>y.reject(R)}),w=new ug(gh(g.path),T,{includeMetadataChanges:!0,qa:!0});return ag(c,w)})(await rh(r),r.asyncQueue,t,n,s))),s.promise}function OC(r,t,n={}){const s=new Fi;return r.asyncQueue.enqueueAndForget((async()=>(function(c,f,g,p,y){const T=new fg({next:R=>{T.Nu(),f.enqueueAndForget((()=>og(c,w))),R.fromCache&&p.source==="server"?y.reject(new at(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(R)},error:R=>y.reject(R)}),w=new ug(g,T,{includeMetadataChanges:!0,qa:!0});return ag(c,w)})(await rh(r),r.asyncQueue,t,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT="firestore.googleapis.com",p0=!0;class y0{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new at(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=jT,this.ssl=p0}else this.host=t.host,this.ssl=t.ssl??p0;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=yT;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<cI)throw new at(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}X2("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=LT(t.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new at(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new at(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new at(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(s,l){return s.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Sh{constructor(t,n,s,l){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new y0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new at(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new at(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new y0(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new j2;switch(s.type){case"firstParty":return new H2(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new at(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=g0.get(n);s&&(ot("ComponentProvider","Removing Datastore"),g0.delete(n),s.terminate())})(this),Promise.resolve()}}function VC(r,t,n,s={}){var y;r=Vn(r,Sh);const l=no(t),c=r._getSettings(),f={...c,emulatorOptions:r._getEmulatorOptions()},g=`${t}:${n}`;l&&(V0(`https://${g}`),M0("Firestore",!0)),c.host!==jT&&c.host!==g&&$a("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...c,host:g,ssl:l,emulatorOptions:s};if(!Us(p,f)&&(r._setSettings(p),s.mockUserToken)){let T,w;if(typeof s.mockUserToken=="string")T=s.mockUserToken,w=Xe.MOCK_USER;else{T=Kb(s.mockUserToken,(y=r._app)==null?void 0:y.options.projectId);const R=s.mockUserToken.sub||s.mockUserToken.user_id;if(!R)throw new at(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Xe(R)}r._authCredentials=new z2(new IE(T,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new Xr(this.firestore,t,this._query)}}class ge{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ge(this.firestore,t,this._key)}toJSON(){return{type:ge._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,s){if($l(n,ge._jsonSchema))return new ge(t,s||null,new mt(te.fromString(n.referencePath)))}}ge._jsonSchemaVersion="firestore/documentReference/1.0",ge._jsonSchema={type:Ae("string",ge._jsonSchemaVersion),referencePath:Ae("string")};class Lr extends Xr{constructor(t,n,s){super(t,n,gh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ge(this.firestore,null,new mt(t))}withConverter(t){return new Lr(this.firestore,t,this._path)}}function qa(r,t,...n){if(r=be(r),CE("collection","path",t),r instanceof Sh){const s=te.fromString(t,...n);return Nv(s),new Lr(r,null,s)}{if(!(r instanceof ge||r instanceof Lr))throw new at(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(te.fromString(t,...n));return Nv(s),new Lr(r.firestore,null,s)}}function jr(r,t,...n){if(r=be(r),arguments.length===1&&(t=jm.newId()),CE("doc","path",t),r instanceof Sh){const s=te.fromString(t,...n);return xv(s),new ge(r,null,new mt(s))}{if(!(r instanceof ge||r instanceof Lr))throw new at(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(te.fromString(t,...n));return xv(s),new ge(r.firestore,r instanceof Lr?r.converter:null,new mt(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0="AsyncQueue";class v0{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new TT(this,"async_queue_retry"),this._c=()=>{const s=Qd();s&&ot(_0,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const n=Qd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=Qd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Fi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!lo(t))throw t;ot(_0,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((s=>{throw this.nc=s,this.rc=!1,Yi("INTERNAL UNHANDLED ERROR: ",E0(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(t,n,s){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const l=rg.createAndSchedule(this,t,n,s,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&Tt(47125,{Pc:E0(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function E0(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(r){return(function(n,s){if(typeof n!="object"||n===null)return!1;const l=n;for(const c of s)if(c in l&&typeof l[c]=="function")return!0;return!1})(r,["next","error","complete"])}class Qr extends Sh{constructor(t,n,s,l){super(t,n,s,l),this.type="firestore",this._queue=new v0,this._persistenceKey=(l==null?void 0:l.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new v0(t),this._firestoreClient=void 0,await t}}}function MC(r,t){const n=typeof r=="object"?r:L0(),s=typeof r=="string"?r:Zc,l=xm(n,"firestore").getImmediate({identifier:s});if(!l._initialized){const c=Gb("firestore");c&&VC(l,...c)}return l}function wh(r){if(r._terminated)throw new at(Y.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||PC(r),r._firestoreClient}function PC(r){var s,l,c;const t=r._freezeSettings(),n=(function(g,p,y,T){return new aR(g,p,y,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,LT(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)})(r._databaseId,((s=r._app)==null?void 0:s.options.appId)||"",r._persistenceKey,t);r._componentsProvider||(l=t.localCache)!=null&&l._offlineComponentProvider&&((c=t.localCache)!=null&&c._onlineComponentProvider)&&(r._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),r._firestoreClient=new CC(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(g){const p=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(p),_online:p}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(t){this._byteString=t}static fromBase64String(t){try{return new On(Fe.fromBase64String(t))}catch(n){throw new at(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new On(Fe.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:On._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if($l(t,On._jsonSchema))return On.fromBase64String(t.bytes)}}On._jsonSchemaVersion="firestore/bytes/1.0",On._jsonSchema={type:Ae("string",On._jsonSchemaVersion),bytes:Ae("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new at(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new He(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new at(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new at(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Vt(this._lat,t._lat)||Vt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:di._jsonSchemaVersion}}static fromJSON(t){if($l(t,di._jsonSchema))return new di(t.latitude,t.longitude)}}di._jsonSchemaVersion="firestore/geoPoint/1.0",di._jsonSchema={type:Ae("string",di._jsonSchemaVersion),latitude:Ae("number"),longitude:Ae("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(s,l){if(s.length!==l.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==l[c])return!1;return!0})(this._values,t._values)}toJSON(){return{type:mi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if($l(t,mi._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new mi(t.vectorValues);throw new at(Y.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}mi._jsonSchemaVersion="firestore/vectorValue/1.0",mi._jsonSchema={type:Ae("string",mi._jsonSchemaVersion),vectorValues:Ae("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=/^__.*__$/;class UC{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new Yr(t,this.data,this.fieldMask,n,this.fieldTransforms):new Zl(t,this.data,n,this.fieldTransforms)}}class zT{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return new Yr(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function BT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Tt(40011,{Ac:r})}}class dg{constructor(t,n,s,l,c,f){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new dg({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var l;const n=(l=this.path)==null?void 0:l.child(t),s=this.Vc({path:n,fc:!1});return s.gc(t),s}yc(t){var l;const n=(l=this.path)==null?void 0:l.child(t),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return sh(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(BT(this.Ac)&&kC.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class LC{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||Th(t)}Cc(t,n,s,l=!1){return new dg({Ac:t,methodName:n,Dc:s,path:He.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mg(r){const t=r._freezeSettings(),n=Th(r._databaseId);return new LC(r._databaseId,!!t.ignoreUndefinedProperties,n)}function jC(r,t,n,s,l,c={}){const f=r.Cc(c.merge||c.mergeFields?2:0,t,n,l);yg("Data must be an object, but it was:",f,s);const g=qT(s,f);let p,y;if(c.merge)p=new _n(f.fieldMask),y=f.fieldTransforms;else if(c.mergeFields){const T=[];for(const w of c.mergeFields){const R=Tm(t,w,n);if(!f.contains(R))throw new at(Y.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);FT(T,R)||T.push(R)}p=new _n(T),y=f.fieldTransforms.filter((w=>p.covers(w.field)))}else p=null,y=f.fieldTransforms;return new UC(new on(g),p,y)}class Ih extends Gi{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Ih}}class gg extends Gi{_toFieldTransform(t){return new rT(t.path,new Bl)}isEqual(t){return t instanceof gg}}class pg extends Gi{constructor(t,n){super(t),this.Fc=n}_toFieldTransform(t){const n=new Fl(t.serializer,JE(t.serializer,this.Fc));return new rT(t.path,n)}isEqual(t){return t instanceof pg&&this.Fc===t.Fc}}function zC(r,t,n,s){const l=r.Cc(1,t,n);yg("Data must be an object, but it was:",l,s);const c=[],f=on.empty();Kr(s,((p,y)=>{const T=_g(t,p,n);y=be(y);const w=l.yc(T);if(y instanceof Ih)c.push(T);else{const R=eu(y,w);R!=null&&(c.push(T),f.set(T,R))}}));const g=new _n(c);return new zT(f,g,l.fieldTransforms)}function BC(r,t,n,s,l,c){const f=r.Cc(1,t,n),g=[Tm(t,s,n)],p=[l];if(c.length%2!=0)throw new at(Y.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<c.length;R+=2)g.push(Tm(t,c[R])),p.push(c[R+1]);const y=[],T=on.empty();for(let R=g.length-1;R>=0;--R)if(!FT(y,g[R])){const q=g[R];let F=p[R];F=be(F);const et=f.yc(q);if(F instanceof Ih)y.push(q);else{const Z=eu(F,et);Z!=null&&(y.push(q),T.set(q,Z))}}const w=new _n(y);return new zT(T,w,f.fieldTransforms)}function qC(r,t,n,s=!1){return eu(n,r.Cc(s?4:3,t))}function eu(r,t){if(HT(r=be(r)))return yg("Unsupported field value:",t,r),qT(r,t);if(r instanceof Gi)return(function(s,l){if(!BT(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(s,l){const c=[];let f=0;for(const g of s){let p=eu(g,l.wc(f));p==null&&(p={nullValue:"NULL_VALUE"}),c.push(p),f++}return{arrayValue:{values:c}}})(r,t)}return(function(s,l){if((s=be(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return JE(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=ee.fromDate(s);return{timestampValue:th(l.serializer,c)}}if(s instanceof ee){const c=new ee(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:th(l.serializer,c)}}if(s instanceof di)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof On)return{bytesValue:cT(l.serializer,s._byteString)};if(s instanceof ge){const c=l.databaseId,f=s.firestore._databaseId;if(!f.isEqual(c))throw l.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Xm(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof mi)return(function(f,g){return{mapValue:{fields:{[UE]:{stringValue:LE},[Wc]:{arrayValue:{values:f.toArray().map((y=>{if(typeof y!="number")throw g.Sc("VectorValues must only contain numeric values.");return Gm(g.serializer,y)}))}}}}}})(s,l);throw l.Sc(`Unsupported field value: ${hh(s)}`)})(r,t)}function qT(r,t){const n={};return DE(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Kr(r,((s,l)=>{const c=eu(l,t.mc(s));c!=null&&(n[s]=c)})),{mapValue:{fields:n}}}function HT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof ee||r instanceof di||r instanceof On||r instanceof ge||r instanceof Gi||r instanceof mi)}function yg(r,t,n){if(!HT(n)||!xE(n)){const s=hh(n);throw s==="an object"?t.Sc(r+" a custom object"):t.Sc(r+" "+s)}}function Tm(r,t,n){if((t=be(t))instanceof Rh)return t._internalPath;if(typeof t=="string")return _g(r,t);throw sh("Field path arguments must be of type string or ",r,!1,void 0,n)}const HC=new RegExp("[~\\*/\\[\\]]");function _g(r,t,n){if(t.search(HC)>=0)throw sh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Rh(...t.split("."))._internalPath}catch{throw sh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function sh(r,t,n,s,l){const c=s&&!s.isEmpty(),f=l!==void 0;let g=`Function ${t}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let p="";return(c||f)&&(p+=" (found",c&&(p+=` in field ${s}`),f&&(p+=` in document ${l}`),p+=")"),new at(Y.INVALID_ARGUMENT,g+r+p)}function FT(r,t){return r.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(t,n,s,l,c){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new ge(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new FC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(vg("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class FC extends GT{data(){return super.data()}}function vg(r,t){return typeof t=="string"?_g(r,t):t instanceof Rh?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new at(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Eg{}class KT extends Eg{}function Am(r,t,...n){let s=[];t instanceof Eg&&s.push(t),s=s.concat(n),(function(c){const f=c.filter((p=>p instanceof Ag)).length,g=c.filter((p=>p instanceof Tg)).length;if(f>1||f>0&&g>0)throw new at(Y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const l of s)r=l._apply(r);return r}class Tg extends KT{constructor(t,n,s){super(),this._field=t,this._op=n,this._value=s,this.type="where"}static _create(t,n,s){return new Tg(t,n,s)}_apply(t){const n=this._parse(t);return YT(t._query,n),new Xr(t.firestore,t.converter,cm(t._query,n))}_parse(t){const n=mg(t.firestore);return(function(c,f,g,p,y,T,w){let R;if(y.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new at(Y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){b0(w,T);const F=[];for(const et of w)F.push(A0(p,c,et));R={arrayValue:{values:F}}}else R=A0(p,c,w)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||b0(w,T),R=qC(g,f,w,T==="in"||T==="not-in");return Te.create(y,T,R)})(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class Ag extends Eg{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Ag(t,n)}_parse(t){const n=this._queryConstraints.map((s=>s._parse(t))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Fn.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:((function(l,c){let f=l;const g=c.getFlattenedFilters();for(const p of g)YT(f,p),f=cm(f,p)})(t._query,n),new Xr(t.firestore,t.converter,cm(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class bg extends KT{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new bg(t,n)}_apply(t){const n=(function(l,c,f){if(l.startAt!==null)throw new at(Y.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new at(Y.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zl(c,f)})(t._query,this._field,this._direction);return new Xr(t.firestore,t.converter,(function(l,c){const f=l.explicitOrderBy.concat([c]);return new uo(l.path,l.collectionGroup,f,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)})(t._query,n))}}function bm(r,t="asc"){const n=t,s=vg("orderBy",r);return bg._create(s,n)}function A0(r,t,n){if(typeof(n=be(n))=="string"){if(n==="")throw new at(Y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!QE(t)&&n.indexOf("/")!==-1)throw new at(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=t.path.child(te.fromString(n));if(!mt.isDocumentKey(s))throw new at(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Lv(r,new mt(s))}if(n instanceof ge)return Lv(r,n._key);throw new at(Y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hh(n)}.`)}function b0(r,t){if(!Array.isArray(r)||r.length===0)throw new at(Y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function YT(r,t){const n=(function(l,c){for(const f of l)for(const g of f.getFlattenedFilters())if(c.indexOf(g.op)>=0)return g.op;return null})(r.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(n!==null)throw n===t.op?new at(Y.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new at(Y.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class GC{convertValue(t,n="none"){switch(Hr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return me(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(qr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Tt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return Kr(t,((l,c)=>{s[l]=this.convertValue(c,n)})),s}convertVectorValue(t){var s,l,c;const n=(c=(l=(s=t.fields)==null?void 0:s[Wc].arrayValue)==null?void 0:l.values)==null?void 0:c.map((f=>me(f.doubleValue)));return new mi(n)}convertGeoPoint(t){return new di(me(t.latitude),me(t.longitude))}convertArray(t,n){return(t.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const s=mh(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Ul(t));default:return null}}convertTimestamp(t){const n=Br(t);return new ee(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=te.fromString(t);Ht(pT(s),9688,{name:t});const l=new Ll(s.get(1),s.get(3)),c=new mt(s.popFirst(5));return l.isEqual(n)||Yi(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QC(r,t,n){let s;return s=r?r.toFirestore(t):t,s}class Il{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Ps extends GT{constructor(t,n,s,l,c,f){super(t,n,s,l,f),this._firestore=t,this._firestoreImpl=t,this.metadata=c}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Bc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(vg("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new at(Y.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Ps._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ps._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ps._jsonSchema={type:Ae("string",Ps._jsonSchemaVersion),bundleSource:Ae("string","DocumentSnapshot"),bundleName:Ae("string"),bundle:Ae("string")};class Bc extends Ps{data(t={}){return super.data(t)}}class ks{constructor(t,n,s,l){this._firestore=t,this._userDataWriter=n,this._snapshot=l,this.metadata=new Il(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((s=>{t.call(n,new Bc(this._firestore,this._userDataWriter,s.key,s,new Il(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new at(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let f=0;return l._snapshot.docChanges.map((g=>{const p=new Bc(l._firestore,l._userDataWriter,g.doc.key,g.doc,new Il(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);return g.doc,{type:"added",doc:p,oldIndex:-1,newIndex:f++}}))}{let f=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((g=>c||g.type!==3)).map((g=>{const p=new Bc(l._firestore,l._userDataWriter,g.doc.key,g.doc,new Il(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,T=-1;return g.type!==0&&(y=f.indexOf(g.doc.key),f=f.delete(g.doc.key)),g.type!==1&&(f=f.add(g.doc),T=f.indexOf(g.doc.key)),{type:KC(g.type),doc:p,oldIndex:y,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new at(Y.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=ks._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=jm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function KC(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Tt(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(r){r=Vn(r,ge);const t=Vn(r.firestore,Qr);return DC(wh(t),r._key).then((n=>$T(t,r,n)))}ks._jsonSchemaVersion="firestore/querySnapshot/1.0",ks._jsonSchema={type:Ae("string",ks._jsonSchemaVersion),bundleSource:Ae("string","QuerySnapshot"),bundleName:Ae("string"),bundle:Ae("string")};class Sg extends GC{constructor(t){super(),this.firestore=t}convertBytes(t){return new On(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new ge(this.firestore,null,n)}}function YC(r){r=Vn(r,Xr);const t=Vn(r.firestore,Qr),n=wh(t),s=new Sg(t);return QT(r._query),OC(n,r._query).then((l=>new ks(t,s,r,l)))}function wg(r,t,n,...s){r=Vn(r,ge);const l=Vn(r.firestore,Qr),c=mg(l);let f;return f=typeof(t=be(t))=="string"||t instanceof Rh?BC(c,"updateDoc",r._key,t,n,s):zC(c,"updateDoc",r._key,t),Rg(l,[f.toMutation(r._key,qn.exists(!0))])}function S0(r){return Rg(Vn(r.firestore,Qr),[new Qm(r._key,qn.none())])}function Sm(r,t){const n=Vn(r.firestore,Qr),s=jr(r),l=QC(r.converter,t);return Rg(n,[jC(mg(r.firestore),"addDoc",s._key,l,r.converter!==null,{}).toMutation(s._key,qn.exists(!1))]).then((()=>s))}function wm(r,...t){var p,y,T;r=be(r);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof t[s]!="object"||T0(t[s])||(n=t[s++]);const l={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(T0(t[s])){const w=t[s];t[s]=(p=w.next)==null?void 0:p.bind(w),t[s+1]=(y=w.error)==null?void 0:y.bind(w),t[s+2]=(T=w.complete)==null?void 0:T.bind(w)}let c,f,g;if(r instanceof ge)f=Vn(r.firestore,Qr),g=gh(r._key.path),c={next:w=>{t[s]&&t[s]($T(f,r,w))},error:t[s+1],complete:t[s+2]};else{const w=Vn(r,Xr);f=Vn(w.firestore,Qr),g=w._query;const R=new Sg(f);c={next:q=>{t[s]&&t[s](new ks(f,R,w,q))},error:t[s+1],complete:t[s+2]},QT(r._query)}return(function(R,q,F,et){const Z=new fg(et),lt=new ug(q,Z,F);return R.asyncQueue.enqueueAndForget((async()=>ag(await rh(R),lt))),()=>{Z.Nu(),R.asyncQueue.enqueueAndForget((async()=>og(await rh(R),lt)))}})(wh(f),g,l,c)}function Rg(r,t){return(function(s,l){const c=new Fi;return s.asyncQueue.enqueueAndForget((async()=>vC(await NC(s),l,c))),c.promise})(wh(r),t)}function $T(r,t,n){const s=n.docs.get(t._key),l=new Sg(r);return new Ps(r,l,t._key,s,new Il(n.hasPendingWrites,n.fromCache),t.converter)}function XC(){return new gg("serverTimestamp")}function $C(r){return new pg("increment",r)}(function(t,n=!0){(function(l){ao=l})(io),Ka(new Ls("firestore",((s,{instanceIdentifier:l,options:c})=>{const f=s.getProvider("app").getImmediate(),g=new Qr(new B2(s.getProvider("auth-internal")),new F2(f,s.getProvider("app-check-internal")),(function(y,T){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new at(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ll(y.options.projectId,T)})(f,l),f);return c={useFetchStreams:n,...c},g._setSettings(c),g}),"PUBLIC").setMultipleInstances(!0)),Pr(wv,Rv,t),Pr(wv,Rv,"esm2020")})();const ZC={apiKey:"AIzaSyCZh_PwX7LZfXujZiHGH9T-8uA17hNQGBY",authDomain:"bkomhate-site.firebaseapp.com",projectId:"bkomhate-site",storageBucket:"bkomhate-site.appspot.com",messagingSenderId:"37549082348",appId:"1:37549082348:web:cf0c6c4f504b40192887c9"},ZT=U0(ZC),Yd=P2(ZT),yn=MC(ZT),WT=vt.createContext(null),Ch=()=>{const r=vt.useContext(WT);if(!r)throw new Error("useAuth must be used within an AuthProvider");return r},WC=({children:r})=>{const[t,n]=vt.useState(null),[s,l]=vt.useState(!0);vt.useEffect(()=>bw(Yd,T=>{n(T),l(!1)}),[]);const p={currentUser:t,loading:s,login:(y,T)=>_w(Yd,y,T),logout:()=>Sw(Yd),changePassword:y=>t?!y||y.length<6?Promise.reject(new Error("Пароль должен содержать не менее 6 символов.")):vw(t,y):Promise.reject(new Error("Пользователь не авторизован."))};return x.jsx(WT.Provider,{value:p,children:!s&&r})},JC=()=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M10 2a4 4 0 00-4 4v4H4a2 2 0 00-2 2v6a2 2 0 002 2h12a2 2 0 002-2v-6a2 2 0 00-2-2h-2V6a4 4 0 00-4-4zm-2 6V6a2 2 0 114 0v4H8z",clipRule:"evenodd"})}),JT=()=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})}),tx=()=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),ex=()=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H5v-2H3v-2H1v-4a6 6 0 017.743-5.743z"})}),nx=()=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),ix=()=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[x.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),x.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]}),rx=()=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),sx=()=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{d:"M17 3H5a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2zm-3 12H8v-4h6v4zm2-6H5V5h12v4z"})}),ax=()=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{d:"M2 11h3v7H2v-7zM6 3h3v15H6V3zm5 8h3v7h-3v-7zm4-4h3v11h-3V7z"})}),ox=()=>x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[x.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),x.jsx("path",{fillRule:"evenodd",d:"M.458 10C3.732 4.943 9.522 4.5 10 4.5c.478 0 6.268.443 9.542 5.5.25.362.25.868 0 1.23C16.268 15.057 10.478 15.5 10 15.5c-.478 0-6.268-.443-9.542-5.5a.75.75 0 010-1.23zM10 13.5a3.5 3.5 0 100-7 3.5 3.5 0 000 7z",clipRule:"evenodd"})]}),lx=()=>{const[r,t]=vt.useState(""),[n,s]=vt.useState(""),[l,c]=vt.useState(""),{login:f}=Ch(),g=async p=>{p.preventDefault(),c("");try{await f(r,n)}catch(y){c("Ошибка входа. Проверьте почту и пароль."),console.error(y)}};return x.jsx("div",{className:"flex flex-col items-center justify-center min-h-[60vh]",children:x.jsxs("div",{className:"w-full max-w-sm p-8 bg-stone-800/50 border border-stone-700 rounded-md",children:[x.jsx("h2",{className:"font-display text-3xl text-center text-stone-200 mb-6",children:"ВХОД В ПАНЕЛЬ"}),x.jsxs("form",{onSubmit:g,className:"space-y-4",children:[x.jsx("input",{type:"email",value:r,onChange:p=>t(p.target.value),placeholder:"Email",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all","aria-label":"Email",required:!0}),x.jsx("input",{type:"password",value:n,onChange:p=>s(p.target.value),placeholder:"Пароль",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all","aria-label":"Password",required:!0}),x.jsxs("button",{type:"submit",className:"w-full flex items-center justify-center font-display text-xl bg-amber-500 text-stone-900 py-2 rounded-md hover:bg-amber-400 transition-colors",children:[x.jsx(JC,{}),"ВОЙТИ"]}),l&&x.jsx("p",{className:"text-red-500 text-center mt-4",children:l})]})]})})},ux=({codeword:r,onUpdate:t,onDelete:n})=>{const[s,l]=vt.useState(r.usedMessage),[c,f]=vt.useState(r.introText||"ВАШЕ КОДОВОЕ СЛОВО:"),[g,p]=vt.useState(r.note||""),[y,T]=vt.useState(!1),[w,R]=vt.useState([]),[q,F]=vt.useState(!1),[et,Z]=vt.useState(""),[lt,J]=vt.useState("day"),tt=`${window.location.origin}${window.location.pathname}#/view?c=${r.id}`,ht=`https://api.qrserver.com/v1/create-qr-code/?size=256x256&data=${encodeURIComponent(tt)}`,ct=async()=>{F(!0),Z(""),R([]);try{const D=qa(yn,"codewords",r.id,"viewEvents"),S=Am(D,bm("viewedAt","asc")),N=(await YC(S)).docs.map(I=>I.data().viewedAt.toDate());if(N.length===0){F(!1);return}const O={};N.forEach(I=>{let ae="";lt==="day"?ae=I.toLocaleDateString("ru-RU",{year:"2-digit",month:"2-digit",day:"2-digit"}):ae=I.toLocaleDateString("ru-RU",{year:"2-digit",month:"2-digit",day:"2-digit"})+` ${I.getHours()}:00`,O[ae]=(O[ae]||0)+1});const P=Object.keys(O).map(I=>({label:I,value:O[I]}));R(P)}catch(D){console.error("Error fetching stats:",D),Z("Не удалось загрузить статистику.")}finally{F(!1)}};vt.useEffect(()=>{y&&ct()},[y,lt]);const gt=async()=>{try{const D=await fetch(ht);if(!D.ok)throw new Error("QR code fetch failed");const S=await D.blob(),b=window.URL.createObjectURL(S),N=document.createElement("a");N.href=b;const O=r.word.replace(/[^a-z0-9а-яё]/gi,"_").toLowerCase();N.setAttribute("download",`qr_${O}.png`),document.body.appendChild(N),N.click(),N.parentNode&&N.parentNode.removeChild(N),window.URL.revokeObjectURL(b)}catch(D){console.error("Failed to download QR code",D),alert("Не удалось скачать QR-код.")}};return x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"bg-stone-800/70 border border-stone-700 p-4 rounded-md grid grid-cols-1 md:grid-cols-3 gap-4 items-start",children:[x.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2",children:[x.jsx("img",{src:ht,alt:"QR Code",className:"w-36 h-36 border-2 border-stone-600 rounded-md"}),x.jsxs("button",{onClick:gt,className:"flex items-center justify-center gap-2 w-full bg-stone-600 hover:bg-stone-500 text-stone-200 px-3 py-2 rounded-md text-sm transition-colors",children:[x.jsx(tx,{}),"Скачать QR"]}),x.jsx("a",{href:tt,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-amber-400 hover:text-amber-300 break-all text-center pt-1",children:tt})]}),x.jsxs("div",{className:"md:col-span-2 space-y-3",children:[x.jsxs("div",{children:[x.jsx("label",{htmlFor:`introText_${r.id}`,className:"text-sm font-bold text-stone-400 block",children:"Вступительный текст:"}),x.jsx("input",{id:`introText_${r.id}`,type:"text",value:c,onChange:D=>f(D.target.value),onBlur:()=>t(r.id,{introText:c}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-3 py-1 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"text-sm font-bold text-stone-400 block",children:"Кодовое слово:"}),x.jsx("p",{className:"text-lg bg-stone-900 p-2 rounded-md font-bold text-stone-100 break-words",children:r.word})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:`usedMsg_${r.id}`,className:"text-sm font-bold text-stone-400 block",children:"Сообщение (если использовано):"}),x.jsx("input",{id:`usedMsg_${r.id}`,type:"text",value:s,onChange:D=>l(D.target.value),onBlur:()=>t(r.id,{usedMessage:s}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-3 py-1 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:`note_${r.id}`,className:"text-sm font-bold text-stone-400 block",children:"Заметка (видна только вам):"}),x.jsx("textarea",{id:`note_${r.id}`,value:g,onChange:D=>p(D.target.value),onBlur:()=>t(r.id,{note:g}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-3 py-1 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all h-20 resize-y",placeholder:"Любые пометки по этому коду..."})]}),x.jsxs("div",{className:"flex items-center justify-between pt-2",children:[x.jsxs("label",{htmlFor:`toggle_${r.id}`,className:"flex items-center cursor-pointer",children:[x.jsxs("div",{className:"relative",children:[x.jsx("input",{type:"checkbox",id:`toggle_${r.id}`,className:"sr-only",checked:r.isUsed,onChange:()=>t(r.id,{isUsed:!r.isUsed})}),x.jsx("div",{className:`block ${r.isUsed?"bg-amber-500":"bg-stone-600"} w-14 h-8 rounded-full transition-colors`}),x.jsx("div",{className:`dot absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition-transform ${r.isUsed?"transform translate-x-6":""}`})]}),x.jsx("div",{className:"ml-3 text-stone-300 font-semibold",children:r.isUsed?"ИСПОЛЬЗОВАНО":"АКТИВНО"})]}),x.jsxs("div",{className:"flex items-center gap-2 text-stone-400",children:[x.jsxs("div",{className:"flex items-center gap-1",title:"Просмотры",children:[x.jsx(ox,{})," ",x.jsx("span",{children:r.views||0})]}),x.jsxs("button",{onClick:()=>T(!0),className:"flex items-center gap-1 bg-sky-800 hover:bg-sky-700 text-stone-100 px-3 py-2 rounded-md text-sm transition-colors",children:[x.jsx(ax,{}),"Статистика"]}),x.jsxs("button",{onClick:()=>n(r.id),className:"flex items-center gap-1 bg-red-800 hover:bg-red-700 text-stone-100 px-3 py-2 rounded-md text-sm transition-colors",children:[x.jsx(JT,{}),"Удалить"]})]})]})]})]}),y&&x.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",onClick:()=>T(!1),role:"dialog","aria-modal":"true","aria-labelledby":"stats-modal-title",children:x.jsxs("div",{className:"bg-stone-800 border border-stone-700 rounded-lg w-full max-w-4xl max-h-[90vh] flex flex-col",onClick:D=>D.stopPropagation(),children:[x.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-stone-700",children:[x.jsx("h3",{id:"stats-modal-title",className:"font-display text-2xl text-amber-400",children:"Статистика просмотров"}),x.jsx("button",{onClick:()=>T(!1),className:"text-stone-400 hover:text-white text-3xl leading-none","aria-label":"Close",children:"×"})]}),x.jsxs("div",{className:"p-4 flex-grow overflow-y-auto",children:[x.jsxs("div",{className:"flex gap-2 mb-4",children:[x.jsx("button",{onClick:()=>J("day"),className:`px-4 py-2 rounded-md font-semibold ${lt==="day"?"bg-amber-500 text-stone-900":"bg-stone-700 text-stone-300 hover:bg-stone-600"}`,children:"По дням"}),x.jsx("button",{onClick:()=>J("hour"),className:`px-4 py-2 rounded-md font-semibold ${lt==="hour"?"bg-amber-500 text-stone-900":"bg-stone-700 text-stone-300 hover:bg-stone-600"}`,children:"По часам"})]}),q&&x.jsx("p",{className:"animate-pulse text-center py-8 font-display text-xl text-stone-400",children:"ЗАГРУЗКА СТАТИСТИКИ..."}),et&&x.jsx("p",{className:"text-red-500 text-center py-8",children:et}),!q&&!et&&x.jsx("div",{})]})]})})]})},cx=({game:r,onDelete:t})=>{var c;const n=(c=r.createdAt)==null?void 0:c.toDate().toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}),s=()=>{window.location.hash=`#/admin/quest/${r.id}`},l=()=>{window.location.hash=`#/play/${r.id}`};return x.jsxs("div",{className:"bg-stone-800/70 border border-stone-700 p-4 rounded-md flex justify-between items-center",children:[x.jsxs("div",{children:[x.jsx("h4",{className:"text-xl font-bold text-stone-100",children:r.title}),x.jsxs("div",{className:"text-sm text-stone-400 mt-1",children:[x.jsx("span",{className:`inline-block px-2 py-0.5 rounded-md mr-2 ${r.status==="published"?"bg-green-900/50 text-green-300":"bg-sky-900/50 text-sky-300"}`,children:r.status==="published"?"Опубликован":"Черновик"}),x.jsxs("span",{children:["Создан: ",n||"N/A"]})]})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsxs("button",{onClick:l,className:"flex items-center gap-1 bg-green-800 hover:bg-green-700 text-stone-100 px-3 py-2 rounded-md text-sm transition-colors",children:[x.jsx(rx,{}),"Играть"]}),x.jsxs("button",{onClick:s,className:"flex items-center gap-1 bg-blue-800 hover:bg-blue-700 text-stone-100 px-3 py-2 rounded-md text-sm transition-colors",children:[x.jsx(ix,{}),"Редактировать"]}),x.jsxs("button",{onClick:()=>t(r.id),className:"flex items-center gap-1 bg-red-800 hover:bg-red-700 text-stone-100 px-3 py-2 rounded-md text-sm transition-colors",children:[x.jsx(JT,{}),"Удалить"]})]})]})},hx=()=>{const{logout:r,changePassword:t}=Ch(),[n,s]=vt.useState("codewords"),[l,c]=vt.useState([]),[f,g]=vt.useState(""),[p,y]=vt.useState("Этот код уже был использован."),[T,w]=vt.useState("ВАШЕ КОДОВОЕ СЛОВО:"),[R,q]=vt.useState([]),[F,et]=vt.useState(""),[Z,lt]=vt.useState("");vt.useEffect(()=>{if(n!=="codewords")return;const b=Am(qa(yn,"codewords"),bm("createdAt","desc")),N=wm(b,O=>{const P=O.docs.map(I=>({...I.data(),id:I.id}));c(P)},O=>{console.error("Error fetching codewords:",O),alert("Не удалось загрузить кодовые слова.")});return()=>N()},[n]),vt.useEffect(()=>{if(n!=="quests")return;const b=Am(qa(yn,"games"),bm("createdAt","desc")),N=wm(b,O=>{const P=O.docs.map(I=>({...I.data(),id:I.id}));q(P)},O=>{console.error("Error fetching games:",O),alert("Не удалось загрузить квесты.")});return()=>N()},[n]);const J=async b=>{if(b.preventDefault(),f.trim()!=="")try{await Sm(qa(yn,"codewords"),{word:f.trim(),isUsed:!1,usedMessage:p.trim()||"Этот код уже был использован.",introText:T.trim()||"ВАШЕ КОДОВОЕ СЛОВО:",note:"",createdAt:Gi.serverTimestamp(),views:0}),g(""),w("ВАШЕ КОДОВОЕ СЛОВО:"),y("Этот код уже был использован.")}catch(N){console.error("Error adding codeword:",N),alert("Ошибка при добавлении кода.")}},tt=async(b,N)=>{const O=jr(yn,"codewords",b);try{await wg(O,N)}catch(P){console.error("Error updating codeword:",P),alert("Ошибка при обновлении кода.")}},ht=async b=>{if(window.confirm("Вы уверены, что хотите удалить этот код? Это действие необратимо.")){const N=jr(yn,"codewords",b);try{await S0(N)}catch(O){console.error("Error deleting codeword:",O),alert("Ошибка при удалении кода.")}}},ct=async b=>{if(b.preventDefault(),F.trim()!=="")try{const N=`quest_${Date.now()}`;await Sm(qa(yn,"games"),{title:F.trim(),status:"draft",createdAt:Gi.serverTimestamp(),updatedAt:Gi.serverTimestamp(),dsl:{format:"bk-quest@1",meta:{id:N,title:F.trim(),version:1,defaultLocale:"ru"},assets:{images:{},audio:{}},state:{vars:{},inventory:[]},nodes:{start:{text:"This is the beginning."}}}}),et("")}catch(N){console.error("Error adding quest:",N),alert("Ошибка при создании квеста.")}},gt=async b=>{if(window.confirm("Вы уверены, что хотите удалить этот квест? Все его данные будут стерты навсегда.")){const N=jr(yn,"games",b);try{await S0(N)}catch(O){console.error("Error deleting quest:",O),alert("Ошибка при удалении квеста.")}}},D=async b=>{if(b.preventDefault(),window.confirm("Вы уверены, что хотите изменить пароль?"))try{await t(Z),alert("Пароль успешно изменен!"),lt("")}catch(N){alert(`Ошибка изменения пароля: ${N.message}`)}},S=({tabName:b,label:N,children:O})=>x.jsxs("button",{onClick:()=>s(b),className:`flex items-center justify-center w-full px-4 py-3 font-display text-xl rounded-t-md transition-colors ${n===b?"bg-stone-800/50 text-amber-400 border-b-2 border-amber-400":"bg-stone-900/50 text-stone-400 hover:bg-stone-800/50"}`,children:[O,N]});return x.jsxs("div",{className:"container mx-auto py-8 px-4",children:[x.jsxs("div",{className:"flex justify-between items-center mb-6",children:[x.jsx("h2",{className:"font-display text-4xl text-stone-200",children:"Панель управления"}),x.jsx("button",{onClick:r,className:"bg-stone-700 hover:bg-stone-600 text-stone-200 font-semibold py-2 px-4 rounded-md transition-colors",children:"Выйти"})]}),x.jsxs("div",{className:"bg-stone-800/50 border border-stone-700 p-6 rounded-md mb-8",children:[x.jsx("h3",{className:"font-display text-2xl text-amber-400 mb-4",children:"Изменить пароль"}),x.jsxs("form",{onSubmit:D,className:"space-y-4",children:[x.jsx("input",{type:"password",value:Z,onChange:b=>lt(b.target.value),placeholder:"Новый пароль (минимум 6 символов)",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),x.jsxs("button",{type:"submit",className:"w-full flex items-center justify-center font-display text-xl bg-amber-500 text-stone-900 py-2 rounded-md hover:bg-amber-400 transition-colors",children:[x.jsx(sx,{})," Сохранить пароль"]})]})]}),x.jsxs("div",{className:"flex mb-[-1px]",children:[x.jsx(S,{tabName:"codewords",label:"Кодовые слова",children:x.jsx(ex,{})}),x.jsx(S,{tabName:"quests",label:"Квесты",children:x.jsx(nx,{})})]}),x.jsxs("div",{className:"bg-stone-800/50 border border-stone-700 p-6 rounded-b-md rounded-tr-md",children:[n==="codewords"&&x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"mb-8",children:[x.jsx("h3",{className:"font-display text-2xl text-amber-400 mb-4",children:"Добавить новый код"}),x.jsxs("form",{onSubmit:J,className:"space-y-4",children:[x.jsx("input",{type:"text",value:T,onChange:b=>w(b.target.value),placeholder:"Вступительный текст (обращение)",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),x.jsx("input",{type:"text",value:f,onChange:b=>g(b.target.value),placeholder:"Новое кодовое слово",required:!0,className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),x.jsx("input",{type:"text",value:p,onChange:b=>y(b.target.value),placeholder:"Сообщение если код использован",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),x.jsx("button",{type:"submit",className:"w-full font-display text-xl bg-amber-500 text-stone-900 py-2 rounded-md hover:bg-amber-400 transition-colors",children:"Создать QR-код"})]})]}),x.jsx("div",{className:"space-y-4",children:l.map(b=>x.jsx(ux,{codeword:b,onUpdate:tt,onDelete:ht},b.id))})]}),n==="quests"&&x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"mb-8",children:[x.jsx("h3",{className:"font-display text-2xl text-amber-400 mb-4",children:"Создать новый квест"}),x.jsxs("form",{onSubmit:ct,className:"flex gap-4",children:[x.jsx("input",{type:"text",value:F,onChange:b=>et(b.target.value),placeholder:"Название квеста",required:!0,className:"flex-grow bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),x.jsx("button",{type:"submit",className:"font-display text-xl bg-amber-500 text-stone-900 py-2 px-6 rounded-md hover:bg-amber-400 transition-colors",children:"Создать"})]})]}),x.jsx("div",{className:"space-y-4",children:R.length>0?R.map(b=>x.jsx(cx,{game:b,onDelete:gt},b.id)):x.jsx("p",{className:"text-stone-400 text-center py-4",children:"Квесты еще не созданы."})})]})]})]})},Xd=()=>{const{currentUser:r}=Ch();return r?x.jsx(hx,{}):x.jsx(lx,{})},fx=({codeId:r})=>{const[t,n]=vt.useState(null),[s,l]=vt.useState("loading"),[c,f]=vt.useState(!1);vt.useEffect(()=>{if(r){const T=jr(yn,"codewords",r);(async()=>{try{const R=await XT(T);if(R.exists()){n({id:R.id,...R.data()}),l("found");const q=`viewed-${r}`;if(!sessionStorage.getItem(q)){await wg(T,{views:$C(1)});const F=qa(yn,"codewords",r,"viewEvents");await Sm(F,{viewedAt:XC()}),sessionStorage.setItem(q,"true")}}else l("not-found")}catch(R){console.error("Failed to fetch codeword from Firestore:",R),l("error")}})()}else l("not-found")},[r]);const g=()=>{t&&!t.isUsed&&(navigator.clipboard.writeText(t.word),f(!0),setTimeout(()=>f(!1),2e3))},p=()=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),y=()=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})});return s==="loading"?x.jsx("div",{className:"flex items-center justify-center min-h-[80vh]",children:x.jsx("p",{className:"font-display text-2xl text-stone-400 animate-pulse",children:"ПОИСК КОДА..."})}):s==="not-found"||s==="error"?x.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] text-center p-4",children:[x.jsx("h2",{className:"font-display text-6xl text-red-500",children:"404"}),x.jsx("p",{className:"text-stone-300 text-xl mt-2",children:"Код не найден."}),x.jsx("p",{className:"text-stone-500",children:"Возможно, ссылка неверна или код был удален."})]}):t&&t.isUsed?x.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] text-center p-4",children:[x.jsx("h2",{className:"font-display text-5xl text-amber-500",children:"КОД ИСПОЛЬЗОВАН"}),x.jsx("p",{className:"text-stone-300 text-xl mt-4 max-w-lg",children:t.usedMessage})]}):x.jsx("div",{className:"flex flex-col items-center justify-center min-h-[80vh] text-center p-4",children:x.jsxs("div",{className:"w-full max-w-2xl bg-stone-800/50 border-2 border-stone-700 p-8 rounded-lg",children:[x.jsx("p",{className:"text-stone-400 font-display text-2xl",children:(t==null?void 0:t.introText)||"ВАШЕ КОДОВОЕ СЛОВО:"}),x.jsx("p",{className:"text-amber-400 font-bold text-3xl md:text-5xl my-4 break-words select-all",children:t==null?void 0:t.word}),x.jsxs("button",{onClick:g,className:"w-full flex items-center justify-center gap-3 mt-6 bg-stone-700 hover:bg-amber-500 hover:text-stone-900 text-stone-200 font-display text-2xl py-3 rounded-md transition-all duration-300",children:[c?x.jsx(y,{}):x.jsx(p,{}),c?"СКОПИРОВАНО!":"СКОПИРОВАТЬ КОД"]})]})})},dx=()=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{d:"M17 3H5a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2zm-3 12H8v-4h6v4zm2-6H5V5h12v4z"})}),mx=({questId:r})=>{const[t,n]=vt.useState(null),[s,l]=vt.useState(""),[c,f]=vt.useState(""),[g,p]=vt.useState(!0),[y,T]=vt.useState(""),[w,R]=vt.useState(!1),[q,F]=vt.useState("idle");vt.useEffect(()=>{p(!0),T("");const lt=jr(yn,"games",r),J=wm(lt,tt=>{if(tt.exists()){const ht={id:tt.id,...tt.data()};n(ht),f(ht.title),l(JSON.stringify(ht.dsl,null,2))}else T("Квест не найден.");p(!1)},tt=>{console.error("Error fetching quest:",tt),T("Ошибка при загрузке квеста."),p(!1)});return()=>J()},[r]);const et=async()=>{if(!t)return;R(!0),F("idle");let lt;try{lt=JSON.parse(s)}catch(tt){F("error"),alert(`Ошибка в JSON синтаксисе: ${tt.message}`),R(!1);return}const J=jr(yn,"games",r);try{lt.meta&&typeof lt.meta=="object"&&(lt.meta.title=c.trim()),await wg(J,{title:c.trim(),dsl:lt,updatedAt:Gi.serverTimestamp()}),F("success"),setTimeout(()=>F("idle"),3e3)}catch(tt){console.error("Error saving quest:",tt),F("error"),alert("Не удалось сохранить изменения.")}finally{R(!1)}},Z=()=>{window.location.hash="#/admin"};return g?x.jsx("div",{className:"text-center p-8 font-display text-2xl text-stone-400 animate-pulse",children:"ЗАГРУЗКА РЕДАКТОРА..."}):y?x.jsxs("div",{className:"text-center p-8",children:[x.jsx("p",{className:"text-2xl text-red-500",children:y}),x.jsx("button",{onClick:Z,className:"mt-4 bg-stone-700 hover:bg-stone-600 text-stone-200 font-semibold py-2 px-4 rounded-md transition-colors",children:"← Назад к панели"})]}):x.jsxs("div",{className:"container mx-auto py-8 px-4",children:[x.jsxs("div",{className:"flex justify-between items-center mb-6",children:[x.jsx("h2",{className:"font-display text-4xl text-stone-200",children:"Редактор квеста"}),x.jsx("button",{onClick:Z,className:"bg-stone-700 hover:bg-stone-600 text-stone-200 font-semibold py-2 px-4 rounded-md transition-colors",children:"← Назад к панели"})]}),x.jsxs("div",{className:"bg-stone-800/50 border border-stone-700 p-6 rounded-md space-y-6",children:[x.jsxs("div",{children:[x.jsx("label",{htmlFor:"questTitle",className:"text-sm font-bold text-stone-400 block mb-1",children:"Название квеста:"}),x.jsx("input",{id:"questTitle",type:"text",value:c,onChange:lt=>f(lt.target.value),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all text-xl"})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"questDsl",className:"text-sm font-bold text-stone-400 block mb-1",children:"Сценарий (JSON DSL):"}),x.jsx("textarea",{id:"questDsl",value:s,onChange:lt=>l(lt.target.value),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all h-[60vh] resize-y font-mono text-sm",placeholder:"Вставьте сюда JSON вашего квеста...",spellCheck:"false"})]}),x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsxs("button",{onClick:et,disabled:w,className:"w-full flex items-center justify-center font-display text-xl bg-amber-500 text-stone-900 py-2 rounded-md hover:bg-amber-400 transition-colors disabled:bg-stone-600 disabled:cursor-not-allowed",children:[x.jsx(dx,{})," ",w?"СОХРАНЕНИЕ...":"СОХРАНИТЬ ИЗМЕНЕНИЯ"]}),q==="success"&&x.jsx("p",{className:"text-green-400",children:"Сохранено!"}),q==="error"&&x.jsx("p",{className:"text-red-500",children:"Ошибка сохранения."})]})]})]})},gx=()=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),px=()=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{d:"M8.433 7.418c.158-.103.346-.196.567-.267v1.698a2.5 2.5 0 00-1.133 0V7.418zM12.5 10a2.5 2.5 0 01-2.5 2.5h-1v1.698a4.5 4.5 0 01-1.133 0V12.5h-1a2.5 2.5 0 01-2.5-2.5V5.5a2.5 2.5 0 012.5-2.5h5A2.5 2.5 0 0115 5.5v4.5a2.5 2.5 0 01-2.5 2.5z"})}),yx=()=>x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M10 2a4 4 0 00-4 4v2H3a1 1 0 00-1 1v9a1 1 0 001 1h14a1 1 0 001-1V9a1 1 0 00-1-1h-3V6a4 4 0 00-4-4zm2 6V6a2 2 0 10-4 0v2h4z",clipRule:"evenodd"})}),_x=({questId:r})=>{var lt;const[t,n]=vt.useState(null),[s,l]=vt.useState(null),[c,f]=vt.useState("loading"),[g,p]=vt.useState(""),y=vt.useCallback(J=>{J&&localStorage.setItem(`bkomhate-quest-save-${r}`,JSON.stringify(J))},[r]);vt.useEffect(()=>{(async()=>{f("loading");try{const tt=jr(yn,"games",r),ht=await XT(tt);if(ht.exists()){const ct=ht.data();n(ct.dsl);const gt=localStorage.getItem(`bkomhate-quest-save-${r}`);l(gt?JSON.parse(gt):{currentNodeId:"start",vars:ct.dsl.state.vars||{},inventory:ct.dsl.state.inventory||[],history:["start"],isFinished:!1,endMessage:null}),f("playing")}else p("Квест не найден."),f("error")}catch(tt){console.error("Error loading quest:",tt),p("Ошибка загрузки квеста."),f("error")}})()},[r]),vt.useEffect(()=>{y(s)},[s,y]);const T=J=>{if(!s)return!1;const tt=s.vars[J.var];switch(J.op){case"==":return tt===J.value;case"!=":return tt!==J.value;case">":return tt>J.value;case">=":return tt>=J.value;case"<":return tt<J.value;case"<=":return tt<=J.value;default:return!1}},w=(J,tt)=>{let ht={...tt.vars},ct=[...tt.inventory];switch(J.type){case"set":ht[J.var]=J.value;break;case"add":ht[J.var]=(ht[J.var]||0)+J.value;break;case"inv_add":J.item&&!ct.includes(J.item)&&ct.push(J.item);break;case"inv_remove":J.item&&(ct=ct.filter(gt=>gt!==J.item));break}return{...tt,vars:ht,inventory:ct}},R=J=>{if(!s||!t)return;let tt={...s};if(J.effects)for(const D of J.effects)tt=w(D,tt);let ht=J.go;const ct=t.nodes[ht];if(ct!=null&&ct.branch){let D=!1;for(const S of ct.branch.conditions)if(T(S.when)){ht=S.go,D=!0;break}D||(ht=ct.branch.fallback)}const gt=t.nodes[ht];if(gt!=null&&gt.effects)for(const D of gt.effects)tt=w(D,tt);gt!=null&&gt.end?(tt.isFinished=!0,tt.endMessage=gt.end.text,f("end")):gt!=null&&gt.go&&(ht=gt.go),l({...tt,currentNodeId:ht,history:[...tt.history,ht]})},q=()=>{t&&(localStorage.removeItem(`bkomhate-quest-save-${r}`),l({currentNodeId:"start",vars:t.state.vars||{},inventory:t.state.inventory||[],history:["start"],isFinished:!1,endMessage:null}),f("playing"))};if(c==="loading")return x.jsx("div",{className:"text-center p-8 font-display text-2xl text-stone-400 animate-pulse",children:"ЗАГРУЗКА КВЕСТА..."});if(c==="error")return x.jsx("div",{className:"text-center p-8 text-2xl text-red-500",children:g});const F=t==null?void 0:t.nodes[(s==null?void 0:s.currentNodeId)||""];if(!F)return x.jsxs("div",{className:"text-center p-8 text-2xl text-red-500",children:["Ошибка: узел '",s==null?void 0:s.currentNodeId,"' не найден."]});const et=F.bg&&(t==null?void 0:t.assets.images[F.bg]),Z=F.portrait&&(t==null?void 0:t.assets.images[F.portrait]);return c==="end"||s!=null&&s.isFinished?x.jsx("div",{className:"flex flex-col items-center justify-center min-h-[80vh] text-center p-4",children:x.jsxs("div",{className:"w-full max-w-2xl bg-stone-800/70 border-2 border-amber-500 p-8 rounded-lg shadow-2xl shadow-amber-500/10",children:[x.jsx("h2",{className:"font-display text-4xl text-amber-400 mb-4",children:"КОНЕЦ"}),x.jsx("p",{className:"text-stone-300 text-lg whitespace-pre-wrap",children:s.endMessage}),x.jsx("button",{onClick:q,className:"mt-8 font-display text-xl bg-amber-500 text-stone-900 py-2 px-8 rounded-md hover:bg-amber-400 transition-colors",children:"Начать заново"})]})}):x.jsxs("div",{className:"relative min-h-[calc(100vh-85px)] w-full flex flex-col items-center justify-center p-4 overflow-hidden",style:et?{backgroundImage:`url(${et})`,backgroundSize:"cover",backgroundPosition:"center"}:{},children:[x.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),x.jsxs("div",{className:"relative z-10 w-full max-w-4xl flex flex-col h-[calc(100vh-120px)]",children:[x.jsxs("div",{className:"flex justify-center gap-4 md:gap-8 bg-black/30 backdrop-blur-md p-2 rounded-t-lg border-b border-stone-700",children:[(s==null?void 0:s.vars.hp)!==void 0&&x.jsxs("div",{className:"flex items-center gap-2 text-lg font-bold",children:[x.jsx(gx,{}),x.jsx("span",{children:s.vars.hp})]}),(s==null?void 0:s.vars.money)!==void 0&&x.jsxs("div",{className:"flex items-center gap-2 text-lg font-bold",children:[x.jsx(px,{}),x.jsx("span",{children:s.vars.money})]}),s&&s.inventory.length>0&&x.jsxs("div",{className:"flex items-center gap-2 text-lg font-bold",children:[x.jsx(yx,{}),x.jsx("span",{children:s.inventory.join(", ")})]})]}),x.jsxs("div",{className:"flex-grow bg-stone-900/50 p-6 md:p-8 overflow-y-auto custom-scrollbar flex flex-col md:flex-row gap-6",children:[Z&&x.jsx("div",{className:"flex-shrink-0 md:w-1/3 flex justify-center items-start",children:x.jsx("img",{src:Z,alt:"portrait",className:"max-w-full h-auto max-h-64 md:max-h-full object-contain rounded-md border-2 border-stone-700"})}),x.jsx("div",{className:"flex-grow prose prose-invert prose-p:text-stone-300 prose-p:text-lg",children:x.jsx("p",{className:"whitespace-pre-wrap",children:F.text})})]}),x.jsx("div",{className:"bg-black/30 backdrop-blur-md p-4 rounded-b-lg border-t border-stone-700",children:x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:(lt=F.choices)==null?void 0:lt.filter(J=>J.when?(Array.isArray(J.when)?J.when:[J.when]).every(ht=>T(ht)):!0).map((J,tt)=>x.jsx("button",{onClick:()=>R(J),className:"w-full text-left bg-stone-800/80 hover:bg-amber-500 hover:text-stone-900 border border-stone-700 text-stone-300 font-semibold py-3 px-4 rounded-md transition-all duration-200 ease-in-out transform hover:scale-105",children:J.text},tt))})})]})]})},vx=()=>x.jsx("header",{className:"bg-black/50 border-b-2 border-amber-500/50 p-4",children:x.jsxs("div",{className:"container mx-auto text-center",children:[x.jsx("h1",{className:"font-display text-4xl md:text-5xl text-amber-400 tracking-widest",children:"B_KOMHATE"}),x.jsx("p",{className:"text-stone-400 text-sm tracking-wider",children:"QUEST & CODEWORD PLATFORM"})]})}),w0=()=>x.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] text-center p-4",children:[x.jsx("h2",{className:"font-display text-6xl text-red-500",children:"404"}),x.jsx("p",{className:"text-stone-300 text-xl mt-2",children:"Страница не найдена."}),x.jsx("a",{href:"/#/admin",className:"text-amber-400 hover:text-amber-300 mt-4",children:"Перейти в панель управления"})]}),Ex=()=>{const[r,t]=vt.useState({path:"admin",entityId:null}),{currentUser:n}=Ch();vt.useEffect(()=>{const l=()=>{const c=window.location.hash,f=c.match(/^#\/admin\/quest\/(.+)$/),g=c.match(/^#\/play\/(.+)$/);if(f)t({path:"admin-quest-editor",entityId:f[1]});else if(g)t({path:"play",entityId:g[1]});else if(c.startsWith("#/view")){const p=new URLSearchParams(c.split("?")[1]||"");t({path:"view",entityId:p.get("c")})}else c.startsWith("#/admin")||c==="#/"||c===""?t({path:"admin",entityId:null}):t({path:"404",entityId:null})};return l(),window.addEventListener("hashchange",l),()=>window.removeEventListener("hashchange",l)},[]);const s=()=>{if(!n&&r.path.startsWith("admin"))return x.jsx(Xd,{});switch(r.path){case"view":return x.jsx(fx,{codeId:r.entityId});case"admin":return x.jsx(Xd,{});case"admin-quest-editor":return r.entityId?x.jsx(mx,{questId:r.entityId}):x.jsx(Xd,{});case"play":return r.entityId?x.jsx(_x,{questId:r.entityId}):x.jsx(w0,{});case"404":default:return x.jsx(w0,{})}};return x.jsxs("div",{className:"min-h-screen bg-stone-900 bg-[url('data:image/svg+xml,%3Csvg%20width%3D%2240%22%20height%3D%2240%22%20viewBox%3D%220%200%2040%2040%22%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%3E%3Cg%20fill%3D%22%23292524%22%20fill-opacity%3D%220.4%22%20fill-rule%3D%22evenodd%22%3E%3Cpath%20d%3D%22M0%2040L40%200H20L0%2020M40%2040V20L20%2040%22/%3E%3C/g%3E%3C/svg%3E')]",children:[x.jsx(vx,{}),x.jsx("main",{children:s()})]})},Tx=()=>x.jsx(WC,{children:x.jsx(Ex,{})}),tA=document.getElementById("root");if(!tA)throw new Error("Could not find root element to mount to");const Ax=kb.createRoot(tA);Ax.render(x.jsx(Cb.StrictMode,{children:x.jsx(Tx,{})}));
