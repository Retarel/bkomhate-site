var cae=Object.defineProperty;var fae=(t,e,n)=>e in t?cae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var GS=(t,e,n)=>fae(t,typeof e!="symbol"?e+"":e,n);function dae(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var y_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Co(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jS={exports:{}},pm={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c4;function hae(){if(c4)return pm;c4=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,o){var s=null;if(o!==void 0&&(s=""+o),i.key!==void 0&&(s=""+i.key),"key"in i){o={};for(var a in i)a!=="key"&&(o[a]=i[a])}else o=i;return i=o.ref,{$$typeof:t,type:r,key:s,ref:i!==void 0?i:null,props:o}}return pm.Fragment=e,pm.jsx=n,pm.jsxs=n,pm}var f4;function pae(){return f4||(f4=1,jS.exports=hae()),jS.exports}var M=pae(),KS={exports:{}},lt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d4;function mae(){if(d4)return lt;d4=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),s=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function g(G){return G===null||typeof G!="object"?null:(G=h&&G[h]||G["@@iterator"],typeof G=="function"?G:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,b={};function T(G,te,ee){this.props=G,this.context=te,this.refs=b,this.updater=ee||_}T.prototype.isReactComponent={},T.prototype.setState=function(G,te){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,te,"setState")},T.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function x(){}x.prototype=T.prototype;function C(G,te,ee){this.props=G,this.context=te,this.refs=b,this.updater=ee||_}var I=C.prototype=new x;I.constructor=C,S(I,T.prototype),I.isPureReactComponent=!0;var N=Array.isArray,V={H:null,A:null,T:null,S:null,V:null},q=Object.prototype.hasOwnProperty;function P(G,te,ee,ae,J,ne){return ee=ne.ref,{$$typeof:t,type:G,key:te,ref:ee!==void 0?ee:null,props:ne}}function O(G,te){return P(G.type,te,void 0,void 0,void 0,G.props)}function R(G){return typeof G=="object"&&G!==null&&G.$$typeof===t}function U(G){var te={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(ee){return te[ee]})}var L=/\/+/g;function F(G,te){return typeof G=="object"&&G!==null&&G.key!=null?U(""+G.key):te.toString(36)}function $(){}function H(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then($,$):(G.status="pending",G.then(function(te){G.status==="pending"&&(G.status="fulfilled",G.value=te)},function(te){G.status==="pending"&&(G.status="rejected",G.reason=te)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function Y(G,te,ee,ae,J){var ne=typeof G;(ne==="undefined"||ne==="boolean")&&(G=null);var oe=!1;if(G===null)oe=!0;else switch(ne){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(G.$$typeof){case t:case e:oe=!0;break;case d:return oe=G._init,Y(oe(G._payload),te,ee,ae,J)}}if(oe)return J=J(G),oe=ae===""?"."+F(G,0):ae,N(J)?(ee="",oe!=null&&(ee=oe.replace(L,"$&/")+"/"),Y(J,te,ee,"",function(ye){return ye})):J!=null&&(R(J)&&(J=O(J,ee+(J.key==null||G&&G.key===J.key?"":(""+J.key).replace(L,"$&/")+"/")+oe)),te.push(J)),1;oe=0;var we=ae===""?".":ae+":";if(N(G))for(var Ie=0;Ie<G.length;Ie++)ae=G[Ie],ne=we+F(ae,Ie),oe+=Y(ae,te,ee,ne,J);else if(Ie=g(G),typeof Ie=="function")for(G=Ie.call(G),Ie=0;!(ae=G.next()).done;)ae=ae.value,ne=we+F(ae,Ie++),oe+=Y(ae,te,ee,ne,J);else if(ne==="object"){if(typeof G.then=="function")return Y(H(G),te,ee,ae,J);throw te=String(G),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return oe}function K(G,te,ee){if(G==null)return G;var ae=[],J=0;return Y(G,ae,"","",function(ne){return te.call(ee,ne,J++)}),ae}function Q(G){if(G._status===-1){var te=G._result;te=te(),te.then(function(ee){(G._status===0||G._status===-1)&&(G._status=1,G._result=ee)},function(ee){(G._status===0||G._status===-1)&&(G._status=2,G._result=ee)}),G._status===-1&&(G._status=0,G._result=te)}if(G._status===1)return G._result.default;throw G._result}var re=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",G);return}console.error(G)};function X(){}return lt.Children={map:K,forEach:function(G,te,ee){K(G,function(){te.apply(this,arguments)},ee)},count:function(G){var te=0;return K(G,function(){te++}),te},toArray:function(G){return K(G,function(te){return te})||[]},only:function(G){if(!R(G))throw Error("React.Children.only expected to receive a single React element child.");return G}},lt.Component=T,lt.Fragment=n,lt.Profiler=i,lt.PureComponent=C,lt.StrictMode=r,lt.Suspense=u,lt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,lt.__COMPILER_RUNTIME={__proto__:null,c:function(G){return V.H.useMemoCache(G)}},lt.cache=function(G){return function(){return G.apply(null,arguments)}},lt.cloneElement=function(G,te,ee){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var ae=S({},G.props),J=G.key,ne=void 0;if(te!=null)for(oe in te.ref!==void 0&&(ne=void 0),te.key!==void 0&&(J=""+te.key),te)!q.call(te,oe)||oe==="key"||oe==="__self"||oe==="__source"||oe==="ref"&&te.ref===void 0||(ae[oe]=te[oe]);var oe=arguments.length-2;if(oe===1)ae.children=ee;else if(1<oe){for(var we=Array(oe),Ie=0;Ie<oe;Ie++)we[Ie]=arguments[Ie+2];ae.children=we}return P(G.type,J,void 0,void 0,ne,ae)},lt.createContext=function(G){return G={$$typeof:s,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:o,_context:G},G},lt.createElement=function(G,te,ee){var ae,J={},ne=null;if(te!=null)for(ae in te.key!==void 0&&(ne=""+te.key),te)q.call(te,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(J[ae]=te[ae]);var oe=arguments.length-2;if(oe===1)J.children=ee;else if(1<oe){for(var we=Array(oe),Ie=0;Ie<oe;Ie++)we[Ie]=arguments[Ie+2];J.children=we}if(G&&G.defaultProps)for(ae in oe=G.defaultProps,oe)J[ae]===void 0&&(J[ae]=oe[ae]);return P(G,ne,void 0,void 0,null,J)},lt.createRef=function(){return{current:null}},lt.forwardRef=function(G){return{$$typeof:a,render:G}},lt.isValidElement=R,lt.lazy=function(G){return{$$typeof:d,_payload:{_status:-1,_result:G},_init:Q}},lt.memo=function(G,te){return{$$typeof:c,type:G,compare:te===void 0?null:te}},lt.startTransition=function(G){var te=V.T,ee={};V.T=ee;try{var ae=G(),J=V.S;J!==null&&J(ee,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(X,re)}catch(ne){re(ne)}finally{V.T=te}},lt.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},lt.use=function(G){return V.H.use(G)},lt.useActionState=function(G,te,ee){return V.H.useActionState(G,te,ee)},lt.useCallback=function(G,te){return V.H.useCallback(G,te)},lt.useContext=function(G){return V.H.useContext(G)},lt.useDebugValue=function(){},lt.useDeferredValue=function(G,te){return V.H.useDeferredValue(G,te)},lt.useEffect=function(G,te,ee){var ae=V.H;if(typeof ee=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ae.useEffect(G,te)},lt.useId=function(){return V.H.useId()},lt.useImperativeHandle=function(G,te,ee){return V.H.useImperativeHandle(G,te,ee)},lt.useInsertionEffect=function(G,te){return V.H.useInsertionEffect(G,te)},lt.useLayoutEffect=function(G,te){return V.H.useLayoutEffect(G,te)},lt.useMemo=function(G,te){return V.H.useMemo(G,te)},lt.useOptimistic=function(G,te){return V.H.useOptimistic(G,te)},lt.useReducer=function(G,te,ee){return V.H.useReducer(G,te,ee)},lt.useRef=function(G){return V.H.useRef(G)},lt.useState=function(G){return V.H.useState(G)},lt.useSyncExternalStore=function(G,te,ee){return V.H.useSyncExternalStore(G,te,ee)},lt.useTransition=function(){return V.H.useTransition()},lt.version="19.1.1",lt}var h4;function Mh(){return h4||(h4=1,KS.exports=mae()),KS.exports}var D=Mh();const ge=Co(D),gae=dae({__proto__:null,default:ge},[D]);var WS={exports:{}},mm={},YS={exports:{}},JS={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p4;function yae(){return p4||(p4=1,(function(t){function e(K,Q){var re=K.length;K.push(Q);e:for(;0<re;){var X=re-1>>>1,G=K[X];if(0<i(G,Q))K[X]=Q,K[re]=G,re=X;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var Q=K[0],re=K.pop();if(re!==Q){K[0]=re;e:for(var X=0,G=K.length,te=G>>>1;X<te;){var ee=2*(X+1)-1,ae=K[ee],J=ee+1,ne=K[J];if(0>i(ae,re))J<G&&0>i(ne,ae)?(K[X]=ne,K[J]=re,X=J):(K[X]=ae,K[ee]=re,X=ee);else if(J<G&&0>i(ne,re))K[X]=ne,K[J]=re,X=J;else break e}}return Q}function i(K,Q){var re=K.sortIndex-Q.sortIndex;return re!==0?re:K.id-Q.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var u=[],c=[],d=1,h=null,g=3,_=!1,S=!1,b=!1,T=!1,x=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function N(K){for(var Q=n(c);Q!==null;){if(Q.callback===null)r(c);else if(Q.startTime<=K)r(c),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=n(c)}}function V(K){if(b=!1,N(K),!S)if(n(u)!==null)S=!0,q||(q=!0,F());else{var Q=n(c);Q!==null&&Y(V,Q.startTime-K)}}var q=!1,P=-1,O=5,R=-1;function U(){return T?!0:!(t.unstable_now()-R<O)}function L(){if(T=!1,q){var K=t.unstable_now();R=K;var Q=!0;try{e:{S=!1,b&&(b=!1,C(P),P=-1),_=!0;var re=g;try{t:{for(N(K),h=n(u);h!==null&&!(h.expirationTime>K&&U());){var X=h.callback;if(typeof X=="function"){h.callback=null,g=h.priorityLevel;var G=X(h.expirationTime<=K);if(K=t.unstable_now(),typeof G=="function"){h.callback=G,N(K),Q=!0;break t}h===n(u)&&r(u),N(K)}else r(u);h=n(u)}if(h!==null)Q=!0;else{var te=n(c);te!==null&&Y(V,te.startTime-K),Q=!1}}break e}finally{h=null,g=re,_=!1}Q=void 0}}finally{Q?F():q=!1}}}var F;if(typeof I=="function")F=function(){I(L)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,H=$.port2;$.port1.onmessage=L,F=function(){H.postMessage(null)}}else F=function(){x(L,0)};function Y(K,Q){P=x(function(){K(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(K){switch(g){case 1:case 2:case 3:var Q=3;break;default:Q=g}var re=g;g=Q;try{return K()}finally{g=re}},t.unstable_requestPaint=function(){T=!0},t.unstable_runWithPriority=function(K,Q){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var re=g;g=K;try{return Q()}finally{g=re}},t.unstable_scheduleCallback=function(K,Q,re){var X=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?X+re:X):re=X,K){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=re+G,K={id:d++,callback:Q,priorityLevel:K,startTime:re,expirationTime:G,sortIndex:-1},re>X?(K.sortIndex=re,e(c,K),n(u)===null&&K===n(c)&&(b?(C(P),P=-1):b=!0,Y(V,re-X))):(K.sortIndex=G,e(u,K),S||_||(S=!0,q||(q=!0,F()))),K},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(K){var Q=g;return function(){var re=g;g=Q;try{return K.apply(this,arguments)}finally{g=re}}}})(JS)),JS}var m4;function vae(){return m4||(m4=1,YS.exports=yae()),YS.exports}var XS={exports:{}},Lr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g4;function _ae(){if(g4)return Lr;g4=1;var t=Mh();function e(u){var c="https://react.dev/errors/"+u;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)c+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+u+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(u,c,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:h==null?null:""+h,children:u,containerInfo:c,implementation:d}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(u,c){if(u==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return Lr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Lr.createPortal=function(u,c){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return o(u,c,null,d)},Lr.flushSync=function(u){var c=s.T,d=r.p;try{if(s.T=null,r.p=2,u)return u()}finally{s.T=c,r.p=d,r.d.f()}},Lr.preconnect=function(u,c){typeof u=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(u,c))},Lr.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},Lr.preinit=function(u,c){if(typeof u=="string"&&c&&typeof c.as=="string"){var d=c.as,h=a(d,c.crossOrigin),g=typeof c.integrity=="string"?c.integrity:void 0,_=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;d==="style"?r.d.S(u,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:h,integrity:g,fetchPriority:_}):d==="script"&&r.d.X(u,{crossOrigin:h,integrity:g,fetchPriority:_,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},Lr.preinitModule=function(u,c){if(typeof u=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var d=a(c.as,c.crossOrigin);r.d.M(u,{crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(u)},Lr.preload=function(u,c){if(typeof u=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var d=c.as,h=a(d,c.crossOrigin);r.d.L(u,d,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},Lr.preloadModule=function(u,c){if(typeof u=="string")if(c){var d=a(c.as,c.crossOrigin);r.d.m(u,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(u)},Lr.requestFormReset=function(u){r.d.r(u)},Lr.unstable_batchedUpdates=function(u,c){return u(c)},Lr.useFormState=function(u,c,d){return s.H.useFormState(u,c,d)},Lr.useFormStatus=function(){return s.H.useHostTransitionStatus()},Lr.version="19.1.1",Lr}var y4;function lK(){if(y4)return XS.exports;y4=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),XS.exports=_ae(),XS.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v4;function wae(){if(v4)return mm;v4=1;var t=vae(),e=Mh(),n=lK();function r(l){var f="https://react.dev/errors/"+l;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+l+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function o(l){var f=l,p=l;if(l.alternate)for(;f.return;)f=f.return;else{l=f;do f=l,(f.flags&4098)!==0&&(p=f.return),l=f.return;while(l)}return f.tag===3?p:null}function s(l){if(l.tag===13){var f=l.memoizedState;if(f===null&&(l=l.alternate,l!==null&&(f=l.memoizedState)),f!==null)return f.dehydrated}return null}function a(l){if(o(l)!==l)throw Error(r(188))}function u(l){var f=l.alternate;if(!f){if(f=o(l),f===null)throw Error(r(188));return f!==l?null:l}for(var p=l,v=f;;){var E=p.return;if(E===null)break;var A=E.alternate;if(A===null){if(v=E.return,v!==null){p=v;continue}break}if(E.child===A.child){for(A=E.child;A;){if(A===p)return a(E),l;if(A===v)return a(E),f;A=A.sibling}throw Error(r(188))}if(p.return!==v.return)p=E,v=A;else{for(var z=!1,j=E.child;j;){if(j===p){z=!0,p=E,v=A;break}if(j===v){z=!0,v=E,p=A;break}j=j.sibling}if(!z){for(j=A.child;j;){if(j===p){z=!0,p=A,v=E;break}if(j===v){z=!0,v=A,p=E;break}j=j.sibling}if(!z)throw Error(r(189))}}if(p.alternate!==v)throw Error(r(190))}if(p.tag!==3)throw Error(r(188));return p.stateNode.current===p?l:f}function c(l){var f=l.tag;if(f===5||f===26||f===27||f===6)return l;for(l=l.child;l!==null;){if(f=c(l),f!==null)return f;l=l.sibling}return null}var d=Object.assign,h=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),C=Symbol.for("react.consumer"),I=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function F(l){return l===null||typeof l!="object"?null:(l=L&&l[L]||l["@@iterator"],typeof l=="function"?l:null)}var $=Symbol.for("react.client.reference");function H(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===$?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case S:return"Fragment";case T:return"Profiler";case b:return"StrictMode";case V:return"Suspense";case q:return"SuspenseList";case R:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case _:return"Portal";case I:return(l.displayName||"Context")+".Provider";case C:return(l._context.displayName||"Context")+".Consumer";case N:var f=l.render;return l=l.displayName,l||(l=f.displayName||f.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case P:return f=l.displayName||null,f!==null?f:H(l.type)||"Memo";case O:f=l._payload,l=l._init;try{return H(l(f))}catch{}}return null}var Y=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},X=[],G=-1;function te(l){return{current:l}}function ee(l){0>G||(l.current=X[G],X[G]=null,G--)}function ae(l,f){G++,X[G]=l.current,l.current=f}var J=te(null),ne=te(null),oe=te(null),we=te(null);function Ie(l,f){switch(ae(oe,f),ae(ne,l),ae(J,null),f.nodeType){case 9:case 11:l=(l=f.documentElement)&&(l=l.namespaceURI)?Uq(l):0;break;default:if(l=f.tagName,f=f.namespaceURI)f=Uq(f),l=qq(f,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}ee(J),ae(J,l)}function ye(){ee(J),ee(ne),ee(oe)}function Ce(l){l.memoizedState!==null&&ae(we,l);var f=J.current,p=qq(f,l.type);f!==p&&(ae(ne,l),ae(J,p))}function ke(l){ne.current===l&&(ee(J),ee(ne)),we.current===l&&(ee(we),um._currentValue=re)}var _e=Object.prototype.hasOwnProperty,Ze=t.unstable_scheduleCallback,Ue=t.unstable_cancelCallback,Le=t.unstable_shouldYield,st=t.unstable_requestPaint,Pe=t.unstable_now,qe=t.unstable_getCurrentPriorityLevel,Rt=t.unstable_ImmediatePriority,In=t.unstable_UserBlockingPriority,Rn=t.unstable_NormalPriority,xe=t.unstable_LowPriority,Me=t.unstable_IdlePriority,$e=t.log,ze=t.unstable_setDisableYieldValue,He=null,We=null;function vt(l){if(typeof $e=="function"&&ze(l),We&&typeof We.setStrictMode=="function")try{We.setStrictMode(He,l)}catch{}}var yt=Math.clz32?Math.clz32:_n,Dt=Math.log,Ct=Math.LN2;function _n(l){return l>>>=0,l===0?32:31-(Dt(l)/Ct|0)|0}var on=256,hn=4194304;function Gn(l){var f=l&42;if(f!==0)return f;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function kr(l,f,p){var v=l.pendingLanes;if(v===0)return 0;var E=0,A=l.suspendedLanes,z=l.pingedLanes;l=l.warmLanes;var j=v&134217727;return j!==0?(v=j&~A,v!==0?E=Gn(v):(z&=j,z!==0?E=Gn(z):p||(p=j&~l,p!==0&&(E=Gn(p))))):(j=v&~A,j!==0?E=Gn(j):z!==0?E=Gn(z):p||(p=v&~l,p!==0&&(E=Gn(p)))),E===0?0:f!==0&&f!==E&&(f&A)===0&&(A=E&-E,p=f&-f,A>=p||A===32&&(p&4194048)!==0)?f:E}function rr(l,f){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&f)===0}function No(l,f){switch(l){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Js(){var l=on;return on<<=1,(on&4194048)===0&&(on=256),l}function Mo(){var l=hn;return hn<<=1,(hn&62914560)===0&&(hn=4194304),l}function vi(l){for(var f=[],p=0;31>p;p++)f.push(l);return f}function ji(l,f){l.pendingLanes|=f,f!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function _i(l,f,p,v,E,A){var z=l.pendingLanes;l.pendingLanes=p,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=p,l.entangledLanes&=p,l.errorRecoveryDisabledLanes&=p,l.shellSuspendCounter=0;var j=l.entanglements,Z=l.expirationTimes,fe=l.hiddenUpdates;for(p=z&~p;0<p;){var be=31-yt(p),Ee=1<<be;j[be]=0,Z[be]=-1;var de=fe[be];if(de!==null)for(fe[be]=null,be=0;be<de.length;be++){var he=de[be];he!==null&&(he.lane&=-536870913)}p&=~Ee}v!==0&&Ki(l,v,0),A!==0&&E===0&&l.tag!==0&&(l.suspendedLanes|=A&~(z&~f))}function Ki(l,f,p){l.pendingLanes|=f,l.suspendedLanes&=~f;var v=31-yt(f);l.entangledLanes|=f,l.entanglements[v]=l.entanglements[v]|1073741824|p&4194090}function Ru(l,f){var p=l.entangledLanes|=f;for(l=l.entanglements;p;){var v=31-yt(p),E=1<<v;E&f|l[v]&f&&(l[v]|=f),p&=~E}}function ss(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function al(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function as(){var l=Q.p;return l!==0?l:(l=window.event,l===void 0?32:i4(l.type))}function wf(l,f){var p=Q.p;try{return Q.p=l,f()}finally{Q.p=p}}var Kt=Math.random().toString(36).slice(2),Pn="__reactFiber$"+Kt,wn="__reactProps$"+Kt,oi="__reactContainer$"+Kt,Pu="__reactEvents$"+Kt,mp="__reactListeners$"+Kt,ls="__reactHandles$"+Kt,bf="__reactResources$"+Kt,Xs="__reactMarker$"+Kt;function us(l){delete l[Pn],delete l[wn],delete l[Pu],delete l[mp],delete l[ls]}function Wi(l){var f=l[Pn];if(f)return f;for(var p=l.parentNode;p;){if(f=p[oi]||p[Pn]){if(p=f.alternate,f.child!==null||p!==null&&p.child!==null)for(l=zq(l);l!==null;){if(p=l[Pn])return p;l=zq(l)}return f}l=p,p=l.parentNode}return null}function Yi(l){if(l=l[Pn]||l[oi]){var f=l.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return l}return null}function Ji(l){var f=l.tag;if(f===5||f===26||f===27||f===6)return l.stateNode;throw Error(r(33))}function br(l){var f=l[bf];return f||(f=l[bf]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function pn(l){l[Xs]=!0}var Nu=new Set,ll={};function wi(l,f){Do(l,f),Do(l+"Capture",f)}function Do(l,f){for(ll[l]=f,l=0;l<f.length;l++)Nu.add(f[l])}var Mu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Tf={},Qs={};function Ef(l){return _e.call(Qs,l)?!0:_e.call(Tf,l)?!1:Mu.test(l)?Qs[l]=!0:(Tf[l]=!0,!1)}function cs(l,f,p){if(Ef(f))if(p===null)l.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":l.removeAttribute(f);return;case"boolean":var v=f.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){l.removeAttribute(f);return}}l.setAttribute(f,""+p)}}function Xi(l,f,p){if(p===null)l.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(f);return}l.setAttribute(f,""+p)}}function jn(l,f,p,v){if(v===null)l.removeAttribute(p);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(p);return}l.setAttributeNS(f,p,""+v)}}var fs,Sf;function ko(l){if(fs===void 0)try{throw Error()}catch(p){var f=p.stack.trim().match(/\n( *(at )?)/);fs=f&&f[1]||"",Sf=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fs+l+Sf}var ul=!1;function ds(l,f){if(!l||ul)return"";ul=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(f){var Ee=function(){throw Error()};if(Object.defineProperty(Ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ee,[])}catch(he){var de=he}Reflect.construct(l,[],Ee)}else{try{Ee.call()}catch(he){de=he}l.call(Ee.prototype)}}else{try{throw Error()}catch(he){de=he}(Ee=l())&&typeof Ee.catch=="function"&&Ee.catch(function(){})}}catch(he){if(he&&de&&typeof he.stack=="string")return[he.stack,de.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=v.DetermineComponentFrameRoot(),z=A[0],j=A[1];if(z&&j){var Z=z.split(`
`),fe=j.split(`
`);for(E=v=0;v<Z.length&&!Z[v].includes("DetermineComponentFrameRoot");)v++;for(;E<fe.length&&!fe[E].includes("DetermineComponentFrameRoot");)E++;if(v===Z.length||E===fe.length)for(v=Z.length-1,E=fe.length-1;1<=v&&0<=E&&Z[v]!==fe[E];)E--;for(;1<=v&&0<=E;v--,E--)if(Z[v]!==fe[E]){if(v!==1||E!==1)do if(v--,E--,0>E||Z[v]!==fe[E]){var be=`
`+Z[v].replace(" at new "," at ");return l.displayName&&be.includes("<anonymous>")&&(be=be.replace("<anonymous>",l.displayName)),be}while(1<=v&&0<=E);break}}}finally{ul=!1,Error.prepareStackTrace=p}return(p=l?l.displayName||l.name:"")?ko(p):""}function gp(l){switch(l.tag){case 26:case 27:case 5:return ko(l.type);case 16:return ko("Lazy");case 13:return ko("Suspense");case 19:return ko("SuspenseList");case 0:case 15:return ds(l.type,!1);case 11:return ds(l.type.render,!1);case 1:return ds(l.type,!0);case 31:return ko("Activity");default:return""}}function xf(l){try{var f="";do f+=gp(l),l=l.return;while(l);return f}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}function Gr(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function yp(l){var f=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function YT(l){var f=yp(l)?"checked":"value",p=Object.getOwnPropertyDescriptor(l.constructor.prototype,f),v=""+l[f];if(!l.hasOwnProperty(f)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var E=p.get,A=p.set;return Object.defineProperty(l,f,{configurable:!0,get:function(){return E.call(this)},set:function(z){v=""+z,A.call(this,z)}}),Object.defineProperty(l,f,{enumerable:p.enumerable}),{getValue:function(){return v},setValue:function(z){v=""+z},stopTracking:function(){l._valueTracker=null,delete l[f]}}}}function Af(l){l._valueTracker||(l._valueTracker=YT(l))}function vp(l){if(!l)return!1;var f=l._valueTracker;if(!f)return!0;var p=f.getValue(),v="";return l&&(v=yp(l)?l.checked?"true":"false":l.value),l=v,l!==p?(f.setValue(l),!0):!1}function Du(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var JT=/[\n"\\]/g;function Ln(l){return l.replace(JT,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function bi(l,f,p,v,E,A,z,j){l.name="",z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?l.type=z:l.removeAttribute("type"),f!=null?z==="number"?(f===0&&l.value===""||l.value!=f)&&(l.value=""+Gr(f)):l.value!==""+Gr(f)&&(l.value=""+Gr(f)):z!=="submit"&&z!=="reset"||l.removeAttribute("value"),f!=null?cl(l,z,Gr(f)):p!=null?cl(l,z,Gr(p)):v!=null&&l.removeAttribute("value"),E==null&&A!=null&&(l.defaultChecked=!!A),E!=null&&(l.checked=E&&typeof E!="function"&&typeof E!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?l.name=""+Gr(j):l.removeAttribute("name")}function ku(l,f,p,v,E,A,z,j){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(l.type=A),f!=null||p!=null){if(!(A!=="submit"&&A!=="reset"||f!=null))return;p=p!=null?""+Gr(p):"",f=f!=null?""+Gr(f):p,j||f===l.value||(l.value=f),l.defaultValue=f}v=v??E,v=typeof v!="function"&&typeof v!="symbol"&&!!v,l.checked=j?l.checked:!!v,l.defaultChecked=!!v,z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"&&(l.name=z)}function cl(l,f,p){f==="number"&&Du(l.ownerDocument)===l||l.defaultValue===""+p||(l.defaultValue=""+p)}function Zs(l,f,p,v){if(l=l.options,f){f={};for(var E=0;E<p.length;E++)f["$"+p[E]]=!0;for(p=0;p<l.length;p++)E=f.hasOwnProperty("$"+l[p].value),l[p].selected!==E&&(l[p].selected=E),E&&v&&(l[p].defaultSelected=!0)}else{for(p=""+Gr(p),f=null,E=0;E<l.length;E++){if(l[E].value===p){l[E].selected=!0,v&&(l[E].defaultSelected=!0);return}f!==null||l[E].disabled||(f=l[E])}f!==null&&(f.selected=!0)}}function Ft(l,f,p){if(f!=null&&(f=""+Gr(f),f!==l.value&&(l.value=f),p==null)){l.defaultValue!==f&&(l.defaultValue=f);return}l.defaultValue=p!=null?""+Gr(p):""}function Ou(l,f,p,v){if(f==null){if(v!=null){if(p!=null)throw Error(r(92));if(Y(v)){if(1<v.length)throw Error(r(93));v=v[0]}p=v}p==null&&(p=""),f=p}p=Gr(f),l.defaultValue=p,v=l.textContent,v===p&&v!==""&&v!==null&&(l.value=v)}function Qi(l,f){if(f){var p=l.firstChild;if(p&&p===l.lastChild&&p.nodeType===3){p.nodeValue=f;return}}l.textContent=f}var Lu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function nv(l,f,p){var v=f.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?v?l.setProperty(f,""):f==="float"?l.cssFloat="":l[f]="":v?l.setProperty(f,p):typeof p!="number"||p===0||Lu.has(f)?f==="float"?l.cssFloat=p:l[f]=(""+p).trim():l[f]=p+"px"}function _p(l,f,p){if(f!=null&&typeof f!="object")throw Error(r(62));if(l=l.style,p!=null){for(var v in p)!p.hasOwnProperty(v)||f!=null&&f.hasOwnProperty(v)||(v.indexOf("--")===0?l.setProperty(v,""):v==="float"?l.cssFloat="":l[v]="");for(var E in f)v=f[E],f.hasOwnProperty(E)&&p[E]!==v&&nv(l,E,v)}else for(var A in f)f.hasOwnProperty(A)&&nv(l,A,f[A])}function wp(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var XT=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),QT=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Cf(l){return QT.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var ea=null;function Zi(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var ta=null,na=null;function bp(l){var f=Yi(l);if(f&&(l=f.stateNode)){var p=l[wn]||null;e:switch(l=f.stateNode,f.type){case"input":if(bi(l,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),f=p.name,p.type==="radio"&&f!=null){for(p=l;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+Ln(""+f)+'"][type="radio"]'),f=0;f<p.length;f++){var v=p[f];if(v!==l&&v.form===l.form){var E=v[wn]||null;if(!E)throw Error(r(90));bi(v,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(f=0;f<p.length;f++)v=p[f],v.form===l.form&&vp(v)}break e;case"textarea":Ft(l,p.value,p.defaultValue);break e;case"select":f=p.value,f!=null&&Zs(l,!!p.multiple,f,!1)}}}var hs=!1;function rv(l,f,p){if(hs)return l(f,p);hs=!0;try{var v=l(f);return v}finally{if(hs=!1,(ta!==null||na!==null)&&(Jv(),ta&&(f=ta,l=na,na=ta=null,bp(f),l)))for(f=0;f<l.length;f++)bp(l[f])}}function Vu(l,f){var p=l.stateNode;if(p===null)return null;var v=p[wn]||null;if(v===null)return null;p=v[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(l=l.type,v=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!v;break e;default:l=!1}if(l)return null;if(p&&typeof p!="function")throw Error(r(231,f,typeof p));return p}var Oo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),eo=!1;if(Oo)try{var Uu={};Object.defineProperty(Uu,"passive",{get:function(){eo=!0}}),window.addEventListener("test",Uu,Uu),window.removeEventListener("test",Uu,Uu)}catch{eo=!1}var ps=null,fl=null,ra=null;function Tp(){if(ra)return ra;var l,f=fl,p=f.length,v,E="value"in ps?ps.value:ps.textContent,A=E.length;for(l=0;l<p&&f[l]===E[l];l++);var z=p-l;for(v=1;v<=z&&f[p-v]===E[A-v];v++);return ra=E.slice(l,1<v?1-v:void 0)}function ms(l){var f=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&f===13&&(l=13)):l=f,l===10&&(l=13),32<=l||l===13?l:0}function gs(){return!0}function Ep(){return!1}function ir(l){function f(p,v,E,A,z){this._reactName=p,this._targetInst=E,this.type=v,this.nativeEvent=A,this.target=z,this.currentTarget=null;for(var j in l)l.hasOwnProperty(j)&&(p=l[j],this[j]=p?p(A):A[j]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?gs:Ep,this.isPropagationStopped=Ep,this}return d(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=gs)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=gs)},persist:function(){},isPersistent:gs}),f}var Pt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},If=ir(Pt),qu=d({},Pt,{view:0,detail:0}),iv=ir(qu),Rf,Pf,ys,Fu=d({},qu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zu,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==ys&&(ys&&l.type==="mousemove"?(Rf=l.screenX-ys.screenX,Pf=l.screenY-ys.screenY):Pf=Rf=0,ys=l),Rf)},movementY:function(l){return"movementY"in l?l.movementY:Pf}}),to=ir(Fu),ov=d({},Fu,{dataTransfer:0}),ZT=ir(ov),Bu=d({},qu,{relatedTarget:0}),Nf=ir(Bu),Sp=d({},Pt,{animationName:0,elapsedTime:0,pseudoElement:0}),Mf=ir(Sp),sv=d({},Pt,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Df=ir(sv),eE=d({},Pt,{data:0}),xp=ir(eE),$u={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},av={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ap(l){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(l):(l=lv[l])?!!f[l]:!1}function zu(){return Ap}var uv=d({},qu,{key:function(l){if(l.key){var f=$u[l.key]||l.key;if(f!=="Unidentified")return f}return l.type==="keypress"?(l=ms(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?av[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zu,charCode:function(l){return l.type==="keypress"?ms(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?ms(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),kf=ir(uv),cv=d({},Fu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cp=ir(cv),ia=d({},qu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zu}),fv=ir(ia),dv=d({},Pt,{propertyName:0,elapsedTime:0,pseudoElement:0}),hv=ir(dv),pv=d({},Fu,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),Of=ir(pv),jr=d({},Pt,{newState:0,oldState:0}),mv=ir(jr),gv=[9,13,27,32],vs=Oo&&"CompositionEvent"in window,w=null;Oo&&"documentMode"in document&&(w=document.documentMode);var k=Oo&&"TextEvent"in window&&!w,B=Oo&&(!vs||w&&8<w&&11>=w),W=" ",le=!1;function me(l,f){switch(l){case"keyup":return gv.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ne(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var _t=!1;function Kn(l,f){switch(l){case"compositionend":return Ne(f);case"keypress":return f.which!==32?null:(le=!0,W);case"textInput":return l=f.data,l===W&&le?null:l;default:return null}}function wt(l,f){if(_t)return l==="compositionend"||!vs&&me(l,f)?(l=Tp(),ra=fl=ps=null,_t=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return B&&f.locale!=="ko"?null:f.data;default:return null}}var or={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(l){var f=l&&l.nodeName&&l.nodeName.toLowerCase();return f==="input"?!!or[l.type]:f==="textarea"}function oa(l,f,p,v){ta?na?na.push(v):na=[v]:ta=v,f=n_(f,"onChange"),0<f.length&&(p=new If("onChange","change",null,p,v),l.push({event:p,listeners:f}))}var Tr=null,_s=null;function Ip(l){Dq(l,0)}function yv(l){var f=Ji(l);if(vp(f))return l}function eV(l,f){if(l==="change")return f}var tV=!1;if(Oo){var tE;if(Oo){var nE="oninput"in document;if(!nE){var nV=document.createElement("div");nV.setAttribute("oninput","return;"),nE=typeof nV.oninput=="function"}tE=nE}else tE=!1;tV=tE&&(!document.documentMode||9<document.documentMode)}function rV(){Tr&&(Tr.detachEvent("onpropertychange",iV),_s=Tr=null)}function iV(l){if(l.propertyName==="value"&&yv(_s)){var f=[];oa(f,_s,l,Zi(l)),rv(Ip,f)}}function Foe(l,f,p){l==="focusin"?(rV(),Tr=f,_s=p,Tr.attachEvent("onpropertychange",iV)):l==="focusout"&&rV()}function Boe(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return yv(_s)}function $oe(l,f){if(l==="click")return yv(f)}function zoe(l,f){if(l==="input"||l==="change")return yv(f)}function Hoe(l,f){return l===f&&(l!==0||1/l===1/f)||l!==l&&f!==f}var Ti=typeof Object.is=="function"?Object.is:Hoe;function Rp(l,f){if(Ti(l,f))return!0;if(typeof l!="object"||l===null||typeof f!="object"||f===null)return!1;var p=Object.keys(l),v=Object.keys(f);if(p.length!==v.length)return!1;for(v=0;v<p.length;v++){var E=p[v];if(!_e.call(f,E)||!Ti(l[E],f[E]))return!1}return!0}function oV(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function sV(l,f){var p=oV(l);l=0;for(var v;p;){if(p.nodeType===3){if(v=l+p.textContent.length,l<=f&&v>=f)return{node:p,offset:f-l};l=v}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=oV(p)}}function aV(l,f){return l&&f?l===f?!0:l&&l.nodeType===3?!1:f&&f.nodeType===3?aV(l,f.parentNode):"contains"in l?l.contains(f):l.compareDocumentPosition?!!(l.compareDocumentPosition(f)&16):!1:!1}function lV(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var f=Du(l.document);f instanceof l.HTMLIFrameElement;){try{var p=typeof f.contentWindow.location.href=="string"}catch{p=!1}if(p)l=f.contentWindow;else break;f=Du(l.document)}return f}function rE(l){var f=l&&l.nodeName&&l.nodeName.toLowerCase();return f&&(f==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||f==="textarea"||l.contentEditable==="true")}var Goe=Oo&&"documentMode"in document&&11>=document.documentMode,Lf=null,iE=null,Pp=null,oE=!1;function uV(l,f,p){var v=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;oE||Lf==null||Lf!==Du(v)||(v=Lf,"selectionStart"in v&&rE(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),Pp&&Rp(Pp,v)||(Pp=v,v=n_(iE,"onSelect"),0<v.length&&(f=new If("onSelect","select",null,f,p),l.push({event:f,listeners:v}),f.target=Lf)))}function Hu(l,f){var p={};return p[l.toLowerCase()]=f.toLowerCase(),p["Webkit"+l]="webkit"+f,p["Moz"+l]="moz"+f,p}var Vf={animationend:Hu("Animation","AnimationEnd"),animationiteration:Hu("Animation","AnimationIteration"),animationstart:Hu("Animation","AnimationStart"),transitionrun:Hu("Transition","TransitionRun"),transitionstart:Hu("Transition","TransitionStart"),transitioncancel:Hu("Transition","TransitionCancel"),transitionend:Hu("Transition","TransitionEnd")},sE={},cV={};Oo&&(cV=document.createElement("div").style,"AnimationEvent"in window||(delete Vf.animationend.animation,delete Vf.animationiteration.animation,delete Vf.animationstart.animation),"TransitionEvent"in window||delete Vf.transitionend.transition);function Gu(l){if(sE[l])return sE[l];if(!Vf[l])return l;var f=Vf[l],p;for(p in f)if(f.hasOwnProperty(p)&&p in cV)return sE[l]=f[p];return l}var fV=Gu("animationend"),dV=Gu("animationiteration"),hV=Gu("animationstart"),joe=Gu("transitionrun"),Koe=Gu("transitionstart"),Woe=Gu("transitioncancel"),pV=Gu("transitionend"),mV=new Map,aE="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");aE.push("scrollEnd");function Lo(l,f){mV.set(l,f),wi(f,[l])}var gV=new WeakMap;function no(l,f){if(typeof l=="object"&&l!==null){var p=gV.get(l);return p!==void 0?p:(f={value:l,source:f,stack:xf(f)},gV.set(l,f),f)}return{value:l,source:f,stack:xf(f)}}var ro=[],Uf=0,lE=0;function vv(){for(var l=Uf,f=lE=Uf=0;f<l;){var p=ro[f];ro[f++]=null;var v=ro[f];ro[f++]=null;var E=ro[f];ro[f++]=null;var A=ro[f];if(ro[f++]=null,v!==null&&E!==null){var z=v.pending;z===null?E.next=E:(E.next=z.next,z.next=E),v.pending=E}A!==0&&yV(p,E,A)}}function _v(l,f,p,v){ro[Uf++]=l,ro[Uf++]=f,ro[Uf++]=p,ro[Uf++]=v,lE|=v,l.lanes|=v,l=l.alternate,l!==null&&(l.lanes|=v)}function uE(l,f,p,v){return _v(l,f,p,v),wv(l)}function qf(l,f){return _v(l,null,null,f),wv(l)}function yV(l,f,p){l.lanes|=p;var v=l.alternate;v!==null&&(v.lanes|=p);for(var E=!1,A=l.return;A!==null;)A.childLanes|=p,v=A.alternate,v!==null&&(v.childLanes|=p),A.tag===22&&(l=A.stateNode,l===null||l._visibility&1||(E=!0)),l=A,A=A.return;return l.tag===3?(A=l.stateNode,E&&f!==null&&(E=31-yt(p),l=A.hiddenUpdates,v=l[E],v===null?l[E]=[f]:v.push(f),f.lane=p|536870912),A):null}function wv(l){if(50<tm)throw tm=0,mS=null,Error(r(185));for(var f=l.return;f!==null;)l=f,f=l.return;return l.tag===3?l.stateNode:null}var Ff={};function Yoe(l,f,p,v){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ei(l,f,p,v){return new Yoe(l,f,p,v)}function cE(l){return l=l.prototype,!(!l||!l.isReactComponent)}function sa(l,f){var p=l.alternate;return p===null?(p=Ei(l.tag,f,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=f,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&65011712,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,f=l.dependencies,p.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p.refCleanup=l.refCleanup,p}function vV(l,f){l.flags&=65011714;var p=l.alternate;return p===null?(l.childLanes=0,l.lanes=f,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=p.childLanes,l.lanes=p.lanes,l.child=p.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=p.memoizedProps,l.memoizedState=p.memoizedState,l.updateQueue=p.updateQueue,l.type=p.type,f=p.dependencies,l.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),l}function bv(l,f,p,v,E,A){var z=0;if(v=l,typeof l=="function")cE(l)&&(z=1);else if(typeof l=="string")z=Xse(l,p,J.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case R:return l=Ei(31,p,f,E),l.elementType=R,l.lanes=A,l;case S:return ju(p.children,E,A,f);case b:z=8,E|=24;break;case T:return l=Ei(12,p,f,E|2),l.elementType=T,l.lanes=A,l;case V:return l=Ei(13,p,f,E),l.elementType=V,l.lanes=A,l;case q:return l=Ei(19,p,f,E),l.elementType=q,l.lanes=A,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case x:case I:z=10;break e;case C:z=9;break e;case N:z=11;break e;case P:z=14;break e;case O:z=16,v=null;break e}z=29,p=Error(r(130,l===null?"null":typeof l,"")),v=null}return f=Ei(z,p,f,E),f.elementType=l,f.type=v,f.lanes=A,f}function ju(l,f,p,v){return l=Ei(7,l,v,f),l.lanes=p,l}function fE(l,f,p){return l=Ei(6,l,null,f),l.lanes=p,l}function dE(l,f,p){return f=Ei(4,l.children!==null?l.children:[],l.key,f),f.lanes=p,f.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},f}var Bf=[],$f=0,Tv=null,Ev=0,io=[],oo=0,Ku=null,aa=1,la="";function Wu(l,f){Bf[$f++]=Ev,Bf[$f++]=Tv,Tv=l,Ev=f}function _V(l,f,p){io[oo++]=aa,io[oo++]=la,io[oo++]=Ku,Ku=l;var v=aa;l=la;var E=32-yt(v)-1;v&=~(1<<E),p+=1;var A=32-yt(f)+E;if(30<A){var z=E-E%5;A=(v&(1<<z)-1).toString(32),v>>=z,E-=z,aa=1<<32-yt(f)+E|p<<E|v,la=A+l}else aa=1<<A|p<<E|v,la=l}function hE(l){l.return!==null&&(Wu(l,1),_V(l,1,0))}function pE(l){for(;l===Tv;)Tv=Bf[--$f],Bf[$f]=null,Ev=Bf[--$f],Bf[$f]=null;for(;l===Ku;)Ku=io[--oo],io[oo]=null,la=io[--oo],io[oo]=null,aa=io[--oo],io[oo]=null}var Kr=null,bn=null,It=!1,Yu=null,ws=!1,mE=Error(r(519));function Ju(l){var f=Error(r(418,""));throw Dp(no(f,l)),mE}function wV(l){var f=l.stateNode,p=l.type,v=l.memoizedProps;switch(f[Pn]=l,f[wn]=v,p){case"dialog":ht("cancel",f),ht("close",f);break;case"iframe":case"object":case"embed":ht("load",f);break;case"video":case"audio":for(p=0;p<rm.length;p++)ht(rm[p],f);break;case"source":ht("error",f);break;case"img":case"image":case"link":ht("error",f),ht("load",f);break;case"details":ht("toggle",f);break;case"input":ht("invalid",f),ku(f,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0),Af(f);break;case"select":ht("invalid",f);break;case"textarea":ht("invalid",f),Ou(f,v.value,v.defaultValue,v.children),Af(f)}p=v.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||f.textContent===""+p||v.suppressHydrationWarning===!0||Vq(f.textContent,p)?(v.popover!=null&&(ht("beforetoggle",f),ht("toggle",f)),v.onScroll!=null&&ht("scroll",f),v.onScrollEnd!=null&&ht("scrollend",f),v.onClick!=null&&(f.onclick=r_),f=!0):f=!1,f||Ju(l)}function bV(l){for(Kr=l.return;Kr;)switch(Kr.tag){case 5:case 13:ws=!1;return;case 27:case 3:ws=!0;return;default:Kr=Kr.return}}function Np(l){if(l!==Kr)return!1;if(!It)return bV(l),It=!0,!1;var f=l.tag,p;if((p=f!==3&&f!==27)&&((p=f===5)&&(p=l.type,p=!(p!=="form"&&p!=="button")||NS(l.type,l.memoizedProps)),p=!p),p&&bn&&Ju(l),bV(l),f===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));e:{for(l=l.nextSibling,f=0;l;){if(l.nodeType===8)if(p=l.data,p==="/$"){if(f===0){bn=Uo(l.nextSibling);break e}f--}else p!=="$"&&p!=="$!"&&p!=="$?"||f++;l=l.nextSibling}bn=null}}else f===27?(f=bn,Cl(l.type)?(l=OS,OS=null,bn=l):bn=f):bn=Kr?Uo(l.stateNode.nextSibling):null;return!0}function Mp(){bn=Kr=null,It=!1}function TV(){var l=Yu;return l!==null&&(li===null?li=l:li.push.apply(li,l),Yu=null),l}function Dp(l){Yu===null?Yu=[l]:Yu.push(l)}var gE=te(null),Xu=null,ua=null;function dl(l,f,p){ae(gE,f._currentValue),f._currentValue=p}function ca(l){l._currentValue=gE.current,ee(gE)}function yE(l,f,p){for(;l!==null;){var v=l.alternate;if((l.childLanes&f)!==f?(l.childLanes|=f,v!==null&&(v.childLanes|=f)):v!==null&&(v.childLanes&f)!==f&&(v.childLanes|=f),l===p)break;l=l.return}}function vE(l,f,p,v){var E=l.child;for(E!==null&&(E.return=l);E!==null;){var A=E.dependencies;if(A!==null){var z=E.child;A=A.firstContext;e:for(;A!==null;){var j=A;A=E;for(var Z=0;Z<f.length;Z++)if(j.context===f[Z]){A.lanes|=p,j=A.alternate,j!==null&&(j.lanes|=p),yE(A.return,p,l),v||(z=null);break e}A=j.next}}else if(E.tag===18){if(z=E.return,z===null)throw Error(r(341));z.lanes|=p,A=z.alternate,A!==null&&(A.lanes|=p),yE(z,p,l),z=null}else z=E.child;if(z!==null)z.return=E;else for(z=E;z!==null;){if(z===l){z=null;break}if(E=z.sibling,E!==null){E.return=z.return,z=E;break}z=z.return}E=z}}function kp(l,f,p,v){l=null;for(var E=f,A=!1;E!==null;){if(!A){if((E.flags&524288)!==0)A=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var z=E.alternate;if(z===null)throw Error(r(387));if(z=z.memoizedProps,z!==null){var j=E.type;Ti(E.pendingProps.value,z.value)||(l!==null?l.push(j):l=[j])}}else if(E===we.current){if(z=E.alternate,z===null)throw Error(r(387));z.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(l!==null?l.push(um):l=[um])}E=E.return}l!==null&&vE(f,l,p,v),f.flags|=262144}function Sv(l){for(l=l.firstContext;l!==null;){if(!Ti(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Qu(l){Xu=l,ua=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Or(l){return EV(Xu,l)}function xv(l,f){return Xu===null&&Qu(l),EV(l,f)}function EV(l,f){var p=f._currentValue;if(f={context:f,memoizedValue:p,next:null},ua===null){if(l===null)throw Error(r(308));ua=f,l.dependencies={lanes:0,firstContext:f},l.flags|=524288}else ua=ua.next=f;return p}var Joe=typeof AbortController<"u"?AbortController:function(){var l=[],f=this.signal={aborted:!1,addEventListener:function(p,v){l.push(v)}};this.abort=function(){f.aborted=!0,l.forEach(function(p){return p()})}},Xoe=t.unstable_scheduleCallback,Qoe=t.unstable_NormalPriority,Yn={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _E(){return{controller:new Joe,data:new Map,refCount:0}}function Op(l){l.refCount--,l.refCount===0&&Xoe(Qoe,function(){l.controller.abort()})}var Lp=null,wE=0,zf=0,Hf=null;function Zoe(l,f){if(Lp===null){var p=Lp=[];wE=0,zf=TS(),Hf={status:"pending",value:void 0,then:function(v){p.push(v)}}}return wE++,f.then(SV,SV),f}function SV(){if(--wE===0&&Lp!==null){Hf!==null&&(Hf.status="fulfilled");var l=Lp;Lp=null,zf=0,Hf=null;for(var f=0;f<l.length;f++)(0,l[f])()}}function ese(l,f){var p=[],v={status:"pending",value:null,reason:null,then:function(E){p.push(E)}};return l.then(function(){v.status="fulfilled",v.value=f;for(var E=0;E<p.length;E++)(0,p[E])(f)},function(E){for(v.status="rejected",v.reason=E,E=0;E<p.length;E++)(0,p[E])(void 0)}),v}var xV=K.S;K.S=function(l,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&Zoe(l,f),xV!==null&&xV(l,f)};var Zu=te(null);function bE(){var l=Zu.current;return l!==null?l:Wt.pooledCache}function Av(l,f){f===null?ae(Zu,Zu.current):ae(Zu,f.pool)}function AV(){var l=bE();return l===null?null:{parent:Yn._currentValue,pool:l}}var Vp=Error(r(460)),CV=Error(r(474)),Cv=Error(r(542)),TE={then:function(){}};function IV(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Iv(){}function RV(l,f,p){switch(p=l[p],p===void 0?l.push(f):p!==f&&(f.then(Iv,Iv),f=p),f.status){case"fulfilled":return f.value;case"rejected":throw l=f.reason,NV(l),l;default:if(typeof f.status=="string")f.then(Iv,Iv);else{if(l=Wt,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=f,l.status="pending",l.then(function(v){if(f.status==="pending"){var E=f;E.status="fulfilled",E.value=v}},function(v){if(f.status==="pending"){var E=f;E.status="rejected",E.reason=v}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw l=f.reason,NV(l),l}throw Up=f,Vp}}var Up=null;function PV(){if(Up===null)throw Error(r(459));var l=Up;return Up=null,l}function NV(l){if(l===Vp||l===Cv)throw Error(r(483))}var hl=!1;function EE(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function SE(l,f){l=l.updateQueue,f.updateQueue===l&&(f.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function pl(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function ml(l,f,p){var v=l.updateQueue;if(v===null)return null;if(v=v.shared,(kt&2)!==0){var E=v.pending;return E===null?f.next=f:(f.next=E.next,E.next=f),v.pending=f,f=wv(l),yV(l,null,p),f}return _v(l,v,f,p),wv(l)}function qp(l,f,p){if(f=f.updateQueue,f!==null&&(f=f.shared,(p&4194048)!==0)){var v=f.lanes;v&=l.pendingLanes,p|=v,f.lanes=p,Ru(l,p)}}function xE(l,f){var p=l.updateQueue,v=l.alternate;if(v!==null&&(v=v.updateQueue,p===v)){var E=null,A=null;if(p=p.firstBaseUpdate,p!==null){do{var z={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};A===null?E=A=z:A=A.next=z,p=p.next}while(p!==null);A===null?E=A=f:A=A.next=f}else E=A=f;p={baseState:v.baseState,firstBaseUpdate:E,lastBaseUpdate:A,shared:v.shared,callbacks:v.callbacks},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=f:l.next=f,p.lastBaseUpdate=f}var AE=!1;function Fp(){if(AE){var l=Hf;if(l!==null)throw l}}function Bp(l,f,p,v){AE=!1;var E=l.updateQueue;hl=!1;var A=E.firstBaseUpdate,z=E.lastBaseUpdate,j=E.shared.pending;if(j!==null){E.shared.pending=null;var Z=j,fe=Z.next;Z.next=null,z===null?A=fe:z.next=fe,z=Z;var be=l.alternate;be!==null&&(be=be.updateQueue,j=be.lastBaseUpdate,j!==z&&(j===null?be.firstBaseUpdate=fe:j.next=fe,be.lastBaseUpdate=Z))}if(A!==null){var Ee=E.baseState;z=0,be=fe=Z=null,j=A;do{var de=j.lane&-536870913,he=de!==j.lane;if(he?(bt&de)===de:(v&de)===de){de!==0&&de===zf&&(AE=!0),be!==null&&(be=be.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var rt=l,et=j;de=f;var zt=p;switch(et.tag){case 1:if(rt=et.payload,typeof rt=="function"){Ee=rt.call(zt,Ee,de);break e}Ee=rt;break e;case 3:rt.flags=rt.flags&-65537|128;case 0:if(rt=et.payload,de=typeof rt=="function"?rt.call(zt,Ee,de):rt,de==null)break e;Ee=d({},Ee,de);break e;case 2:hl=!0}}de=j.callback,de!==null&&(l.flags|=64,he&&(l.flags|=8192),he=E.callbacks,he===null?E.callbacks=[de]:he.push(de))}else he={lane:de,tag:j.tag,payload:j.payload,callback:j.callback,next:null},be===null?(fe=be=he,Z=Ee):be=be.next=he,z|=de;if(j=j.next,j===null){if(j=E.shared.pending,j===null)break;he=j,j=he.next,he.next=null,E.lastBaseUpdate=he,E.shared.pending=null}}while(!0);be===null&&(Z=Ee),E.baseState=Z,E.firstBaseUpdate=fe,E.lastBaseUpdate=be,A===null&&(E.shared.lanes=0),El|=z,l.lanes=z,l.memoizedState=Ee}}function MV(l,f){if(typeof l!="function")throw Error(r(191,l));l.call(f)}function DV(l,f){var p=l.callbacks;if(p!==null)for(l.callbacks=null,l=0;l<p.length;l++)MV(p[l],f)}var Gf=te(null),Rv=te(0);function kV(l,f){l=ya,ae(Rv,l),ae(Gf,f),ya=l|f.baseLanes}function CE(){ae(Rv,ya),ae(Gf,Gf.current)}function IE(){ya=Rv.current,ee(Gf),ee(Rv)}var gl=0,ut=null,Bt=null,Vn=null,Pv=!1,jf=!1,ec=!1,Nv=0,$p=0,Kf=null,tse=0;function Nn(){throw Error(r(321))}function RE(l,f){if(f===null)return!1;for(var p=0;p<f.length&&p<l.length;p++)if(!Ti(l[p],f[p]))return!1;return!0}function PE(l,f,p,v,E,A){return gl=A,ut=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,K.H=l===null||l.memoizedState===null?yU:vU,ec=!1,A=p(v,E),ec=!1,jf&&(A=LV(f,p,v,E)),OV(l),A}function OV(l){K.H=Vv;var f=Bt!==null&&Bt.next!==null;if(gl=0,Vn=Bt=ut=null,Pv=!1,$p=0,Kf=null,f)throw Error(r(300));l===null||sr||(l=l.dependencies,l!==null&&Sv(l)&&(sr=!0))}function LV(l,f,p,v){ut=l;var E=0;do{if(jf&&(Kf=null),$p=0,jf=!1,25<=E)throw Error(r(301));if(E+=1,Vn=Bt=null,l.updateQueue!=null){var A=l.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}K.H=lse,A=f(p,v)}while(jf);return A}function nse(){var l=K.H,f=l.useState()[0];return f=typeof f.then=="function"?zp(f):f,l=l.useState()[0],(Bt!==null?Bt.memoizedState:null)!==l&&(ut.flags|=1024),f}function NE(){var l=Nv!==0;return Nv=0,l}function ME(l,f,p){f.updateQueue=l.updateQueue,f.flags&=-2053,l.lanes&=~p}function DE(l){if(Pv){for(l=l.memoizedState;l!==null;){var f=l.queue;f!==null&&(f.pending=null),l=l.next}Pv=!1}gl=0,Vn=Bt=ut=null,jf=!1,$p=Nv=0,Kf=null}function si(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vn===null?ut.memoizedState=Vn=l:Vn=Vn.next=l,Vn}function Un(){if(Bt===null){var l=ut.alternate;l=l!==null?l.memoizedState:null}else l=Bt.next;var f=Vn===null?ut.memoizedState:Vn.next;if(f!==null)Vn=f,Bt=l;else{if(l===null)throw ut.alternate===null?Error(r(467)):Error(r(310));Bt=l,l={memoizedState:Bt.memoizedState,baseState:Bt.baseState,baseQueue:Bt.baseQueue,queue:Bt.queue,next:null},Vn===null?ut.memoizedState=Vn=l:Vn=Vn.next=l}return Vn}function kE(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zp(l){var f=$p;return $p+=1,Kf===null&&(Kf=[]),l=RV(Kf,l,f),f=ut,(Vn===null?f.memoizedState:Vn.next)===null&&(f=f.alternate,K.H=f===null||f.memoizedState===null?yU:vU),l}function Mv(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return zp(l);if(l.$$typeof===I)return Or(l)}throw Error(r(438,String(l)))}function OE(l){var f=null,p=ut.updateQueue;if(p!==null&&(f=p.memoCache),f==null){var v=ut.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(f={data:v.data.map(function(E){return E.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),p===null&&(p=kE(),ut.updateQueue=p),p.memoCache=f,p=f.data[f.index],p===void 0)for(p=f.data[f.index]=Array(l),v=0;v<l;v++)p[v]=U;return f.index++,p}function fa(l,f){return typeof f=="function"?f(l):f}function Dv(l){var f=Un();return LE(f,Bt,l)}function LE(l,f,p){var v=l.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=p;var E=l.baseQueue,A=v.pending;if(A!==null){if(E!==null){var z=E.next;E.next=A.next,A.next=z}f.baseQueue=E=A,v.pending=null}if(A=l.baseState,E===null)l.memoizedState=A;else{f=E.next;var j=z=null,Z=null,fe=f,be=!1;do{var Ee=fe.lane&-536870913;if(Ee!==fe.lane?(bt&Ee)===Ee:(gl&Ee)===Ee){var de=fe.revertLane;if(de===0)Z!==null&&(Z=Z.next={lane:0,revertLane:0,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null}),Ee===zf&&(be=!0);else if((gl&de)===de){fe=fe.next,de===zf&&(be=!0);continue}else Ee={lane:0,revertLane:fe.revertLane,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null},Z===null?(j=Z=Ee,z=A):Z=Z.next=Ee,ut.lanes|=de,El|=de;Ee=fe.action,ec&&p(A,Ee),A=fe.hasEagerState?fe.eagerState:p(A,Ee)}else de={lane:Ee,revertLane:fe.revertLane,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null},Z===null?(j=Z=de,z=A):Z=Z.next=de,ut.lanes|=Ee,El|=Ee;fe=fe.next}while(fe!==null&&fe!==f);if(Z===null?z=A:Z.next=j,!Ti(A,l.memoizedState)&&(sr=!0,be&&(p=Hf,p!==null)))throw p;l.memoizedState=A,l.baseState=z,l.baseQueue=Z,v.lastRenderedState=A}return E===null&&(v.lanes=0),[l.memoizedState,v.dispatch]}function VE(l){var f=Un(),p=f.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=l;var v=p.dispatch,E=p.pending,A=f.memoizedState;if(E!==null){p.pending=null;var z=E=E.next;do A=l(A,z.action),z=z.next;while(z!==E);Ti(A,f.memoizedState)||(sr=!0),f.memoizedState=A,f.baseQueue===null&&(f.baseState=A),p.lastRenderedState=A}return[A,v]}function VV(l,f,p){var v=ut,E=Un(),A=It;if(A){if(p===void 0)throw Error(r(407));p=p()}else p=f();var z=!Ti((Bt||E).memoizedState,p);z&&(E.memoizedState=p,sr=!0),E=E.queue;var j=FV.bind(null,v,E,l);if(Hp(2048,8,j,[l]),E.getSnapshot!==f||z||Vn!==null&&Vn.memoizedState.tag&1){if(v.flags|=2048,Wf(9,kv(),qV.bind(null,v,E,p,f),null),Wt===null)throw Error(r(349));A||(gl&124)!==0||UV(v,f,p)}return p}function UV(l,f,p){l.flags|=16384,l={getSnapshot:f,value:p},f=ut.updateQueue,f===null?(f=kE(),ut.updateQueue=f,f.stores=[l]):(p=f.stores,p===null?f.stores=[l]:p.push(l))}function qV(l,f,p,v){f.value=p,f.getSnapshot=v,BV(f)&&$V(l)}function FV(l,f,p){return p(function(){BV(f)&&$V(l)})}function BV(l){var f=l.getSnapshot;l=l.value;try{var p=f();return!Ti(l,p)}catch{return!0}}function $V(l){var f=qf(l,2);f!==null&&Ii(f,l,2)}function UE(l){var f=si();if(typeof l=="function"){var p=l;if(l=p(),ec){vt(!0);try{p()}finally{vt(!1)}}}return f.memoizedState=f.baseState=l,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:l},f}function zV(l,f,p,v){return l.baseState=p,LE(l,Bt,typeof v=="function"?v:fa)}function rse(l,f,p,v,E){if(Lv(l))throw Error(r(485));if(l=f.action,l!==null){var A={payload:E,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(z){A.listeners.push(z)}};K.T!==null?p(!0):A.isTransition=!1,v(A),p=f.pending,p===null?(A.next=f.pending=A,HV(f,A)):(A.next=p.next,f.pending=p.next=A)}}function HV(l,f){var p=f.action,v=f.payload,E=l.state;if(f.isTransition){var A=K.T,z={};K.T=z;try{var j=p(E,v),Z=K.S;Z!==null&&Z(z,j),GV(l,f,j)}catch(fe){qE(l,f,fe)}finally{K.T=A}}else try{A=p(E,v),GV(l,f,A)}catch(fe){qE(l,f,fe)}}function GV(l,f,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(v){jV(l,f,v)},function(v){return qE(l,f,v)}):jV(l,f,p)}function jV(l,f,p){f.status="fulfilled",f.value=p,KV(f),l.state=p,f=l.pending,f!==null&&(p=f.next,p===f?l.pending=null:(p=p.next,f.next=p,HV(l,p)))}function qE(l,f,p){var v=l.pending;if(l.pending=null,v!==null){v=v.next;do f.status="rejected",f.reason=p,KV(f),f=f.next;while(f!==v)}l.action=null}function KV(l){l=l.listeners;for(var f=0;f<l.length;f++)(0,l[f])()}function WV(l,f){return f}function YV(l,f){if(It){var p=Wt.formState;if(p!==null){e:{var v=ut;if(It){if(bn){t:{for(var E=bn,A=ws;E.nodeType!==8;){if(!A){E=null;break t}if(E=Uo(E.nextSibling),E===null){E=null;break t}}A=E.data,E=A==="F!"||A==="F"?E:null}if(E){bn=Uo(E.nextSibling),v=E.data==="F!";break e}}Ju(v)}v=!1}v&&(f=p[0])}}return p=si(),p.memoizedState=p.baseState=f,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:WV,lastRenderedState:f},p.queue=v,p=pU.bind(null,ut,v),v.dispatch=p,v=UE(!1),A=HE.bind(null,ut,!1,v.queue),v=si(),E={state:f,dispatch:null,action:l,pending:null},v.queue=E,p=rse.bind(null,ut,E,A,p),E.dispatch=p,v.memoizedState=l,[f,p,!1]}function JV(l){var f=Un();return XV(f,Bt,l)}function XV(l,f,p){if(f=LE(l,f,WV)[0],l=Dv(fa)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var v=zp(f)}catch(z){throw z===Vp?Cv:z}else v=f;f=Un();var E=f.queue,A=E.dispatch;return p!==f.memoizedState&&(ut.flags|=2048,Wf(9,kv(),ise.bind(null,E,p),null)),[v,A,l]}function ise(l,f){l.action=f}function QV(l){var f=Un(),p=Bt;if(p!==null)return XV(f,p,l);Un(),f=f.memoizedState,p=Un();var v=p.queue.dispatch;return p.memoizedState=l,[f,v,!1]}function Wf(l,f,p,v){return l={tag:l,create:p,deps:v,inst:f,next:null},f=ut.updateQueue,f===null&&(f=kE(),ut.updateQueue=f),p=f.lastEffect,p===null?f.lastEffect=l.next=l:(v=p.next,p.next=l,l.next=v,f.lastEffect=l),l}function kv(){return{destroy:void 0,resource:void 0}}function ZV(){return Un().memoizedState}function Ov(l,f,p,v){var E=si();v=v===void 0?null:v,ut.flags|=l,E.memoizedState=Wf(1|f,kv(),p,v)}function Hp(l,f,p,v){var E=Un();v=v===void 0?null:v;var A=E.memoizedState.inst;Bt!==null&&v!==null&&RE(v,Bt.memoizedState.deps)?E.memoizedState=Wf(f,A,p,v):(ut.flags|=l,E.memoizedState=Wf(1|f,A,p,v))}function eU(l,f){Ov(8390656,8,l,f)}function tU(l,f){Hp(2048,8,l,f)}function nU(l,f){return Hp(4,2,l,f)}function rU(l,f){return Hp(4,4,l,f)}function iU(l,f){if(typeof f=="function"){l=l();var p=f(l);return function(){typeof p=="function"?p():f(null)}}if(f!=null)return l=l(),f.current=l,function(){f.current=null}}function oU(l,f,p){p=p!=null?p.concat([l]):null,Hp(4,4,iU.bind(null,f,l),p)}function FE(){}function sU(l,f){var p=Un();f=f===void 0?null:f;var v=p.memoizedState;return f!==null&&RE(f,v[1])?v[0]:(p.memoizedState=[l,f],l)}function aU(l,f){var p=Un();f=f===void 0?null:f;var v=p.memoizedState;if(f!==null&&RE(f,v[1]))return v[0];if(v=l(),ec){vt(!0);try{l()}finally{vt(!1)}}return p.memoizedState=[v,f],v}function BE(l,f,p){return p===void 0||(gl&1073741824)!==0?l.memoizedState=f:(l.memoizedState=p,l=cq(),ut.lanes|=l,El|=l,p)}function lU(l,f,p,v){return Ti(p,f)?p:Gf.current!==null?(l=BE(l,p,v),Ti(l,f)||(sr=!0),l):(gl&42)===0?(sr=!0,l.memoizedState=p):(l=cq(),ut.lanes|=l,El|=l,f)}function uU(l,f,p,v,E){var A=Q.p;Q.p=A!==0&&8>A?A:8;var z=K.T,j={};K.T=j,HE(l,!1,f,p);try{var Z=E(),fe=K.S;if(fe!==null&&fe(j,Z),Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var be=ese(Z,v);Gp(l,f,be,Ci(l))}else Gp(l,f,v,Ci(l))}catch(Ee){Gp(l,f,{then:function(){},status:"rejected",reason:Ee},Ci())}finally{Q.p=A,K.T=z}}function ose(){}function $E(l,f,p,v){if(l.tag!==5)throw Error(r(476));var E=cU(l).queue;uU(l,E,f,re,p===null?ose:function(){return fU(l),p(v)})}function cU(l){var f=l.memoizedState;if(f!==null)return f;f={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:re},next:null};var p={};return f.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:p},next:null},l.memoizedState=f,l=l.alternate,l!==null&&(l.memoizedState=f),f}function fU(l){var f=cU(l).next.queue;Gp(l,f,{},Ci())}function zE(){return Or(um)}function dU(){return Un().memoizedState}function hU(){return Un().memoizedState}function sse(l){for(var f=l.return;f!==null;){switch(f.tag){case 24:case 3:var p=Ci();l=pl(p);var v=ml(f,l,p);v!==null&&(Ii(v,f,p),qp(v,f,p)),f={cache:_E()},l.payload=f;return}f=f.return}}function ase(l,f,p){var v=Ci();p={lane:v,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null},Lv(l)?mU(f,p):(p=uE(l,f,p,v),p!==null&&(Ii(p,l,v),gU(p,f,v)))}function pU(l,f,p){var v=Ci();Gp(l,f,p,v)}function Gp(l,f,p,v){var E={lane:v,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null};if(Lv(l))mU(f,E);else{var A=l.alternate;if(l.lanes===0&&(A===null||A.lanes===0)&&(A=f.lastRenderedReducer,A!==null))try{var z=f.lastRenderedState,j=A(z,p);if(E.hasEagerState=!0,E.eagerState=j,Ti(j,z))return _v(l,f,E,0),Wt===null&&vv(),!1}catch{}finally{}if(p=uE(l,f,E,v),p!==null)return Ii(p,l,v),gU(p,f,v),!0}return!1}function HE(l,f,p,v){if(v={lane:2,revertLane:TS(),action:v,hasEagerState:!1,eagerState:null,next:null},Lv(l)){if(f)throw Error(r(479))}else f=uE(l,p,v,2),f!==null&&Ii(f,l,2)}function Lv(l){var f=l.alternate;return l===ut||f!==null&&f===ut}function mU(l,f){jf=Pv=!0;var p=l.pending;p===null?f.next=f:(f.next=p.next,p.next=f),l.pending=f}function gU(l,f,p){if((p&4194048)!==0){var v=f.lanes;v&=l.pendingLanes,p|=v,f.lanes=p,Ru(l,p)}}var Vv={readContext:Or,use:Mv,useCallback:Nn,useContext:Nn,useEffect:Nn,useImperativeHandle:Nn,useLayoutEffect:Nn,useInsertionEffect:Nn,useMemo:Nn,useReducer:Nn,useRef:Nn,useState:Nn,useDebugValue:Nn,useDeferredValue:Nn,useTransition:Nn,useSyncExternalStore:Nn,useId:Nn,useHostTransitionStatus:Nn,useFormState:Nn,useActionState:Nn,useOptimistic:Nn,useMemoCache:Nn,useCacheRefresh:Nn},yU={readContext:Or,use:Mv,useCallback:function(l,f){return si().memoizedState=[l,f===void 0?null:f],l},useContext:Or,useEffect:eU,useImperativeHandle:function(l,f,p){p=p!=null?p.concat([l]):null,Ov(4194308,4,iU.bind(null,f,l),p)},useLayoutEffect:function(l,f){return Ov(4194308,4,l,f)},useInsertionEffect:function(l,f){Ov(4,2,l,f)},useMemo:function(l,f){var p=si();f=f===void 0?null:f;var v=l();if(ec){vt(!0);try{l()}finally{vt(!1)}}return p.memoizedState=[v,f],v},useReducer:function(l,f,p){var v=si();if(p!==void 0){var E=p(f);if(ec){vt(!0);try{p(f)}finally{vt(!1)}}}else E=f;return v.memoizedState=v.baseState=E,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:E},v.queue=l,l=l.dispatch=ase.bind(null,ut,l),[v.memoizedState,l]},useRef:function(l){var f=si();return l={current:l},f.memoizedState=l},useState:function(l){l=UE(l);var f=l.queue,p=pU.bind(null,ut,f);return f.dispatch=p,[l.memoizedState,p]},useDebugValue:FE,useDeferredValue:function(l,f){var p=si();return BE(p,l,f)},useTransition:function(){var l=UE(!1);return l=uU.bind(null,ut,l.queue,!0,!1),si().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,f,p){var v=ut,E=si();if(It){if(p===void 0)throw Error(r(407));p=p()}else{if(p=f(),Wt===null)throw Error(r(349));(bt&124)!==0||UV(v,f,p)}E.memoizedState=p;var A={value:p,getSnapshot:f};return E.queue=A,eU(FV.bind(null,v,A,l),[l]),v.flags|=2048,Wf(9,kv(),qV.bind(null,v,A,p,f),null),p},useId:function(){var l=si(),f=Wt.identifierPrefix;if(It){var p=la,v=aa;p=(v&~(1<<32-yt(v)-1)).toString(32)+p,f="«"+f+"R"+p,p=Nv++,0<p&&(f+="H"+p.toString(32)),f+="»"}else p=tse++,f="«"+f+"r"+p.toString(32)+"»";return l.memoizedState=f},useHostTransitionStatus:zE,useFormState:YV,useActionState:YV,useOptimistic:function(l){var f=si();f.memoizedState=f.baseState=l;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=p,f=HE.bind(null,ut,!0,p),p.dispatch=f,[l,f]},useMemoCache:OE,useCacheRefresh:function(){return si().memoizedState=sse.bind(null,ut)}},vU={readContext:Or,use:Mv,useCallback:sU,useContext:Or,useEffect:tU,useImperativeHandle:oU,useInsertionEffect:nU,useLayoutEffect:rU,useMemo:aU,useReducer:Dv,useRef:ZV,useState:function(){return Dv(fa)},useDebugValue:FE,useDeferredValue:function(l,f){var p=Un();return lU(p,Bt.memoizedState,l,f)},useTransition:function(){var l=Dv(fa)[0],f=Un().memoizedState;return[typeof l=="boolean"?l:zp(l),f]},useSyncExternalStore:VV,useId:dU,useHostTransitionStatus:zE,useFormState:JV,useActionState:JV,useOptimistic:function(l,f){var p=Un();return zV(p,Bt,l,f)},useMemoCache:OE,useCacheRefresh:hU},lse={readContext:Or,use:Mv,useCallback:sU,useContext:Or,useEffect:tU,useImperativeHandle:oU,useInsertionEffect:nU,useLayoutEffect:rU,useMemo:aU,useReducer:VE,useRef:ZV,useState:function(){return VE(fa)},useDebugValue:FE,useDeferredValue:function(l,f){var p=Un();return Bt===null?BE(p,l,f):lU(p,Bt.memoizedState,l,f)},useTransition:function(){var l=VE(fa)[0],f=Un().memoizedState;return[typeof l=="boolean"?l:zp(l),f]},useSyncExternalStore:VV,useId:dU,useHostTransitionStatus:zE,useFormState:QV,useActionState:QV,useOptimistic:function(l,f){var p=Un();return Bt!==null?zV(p,Bt,l,f):(p.baseState=l,[l,p.queue.dispatch])},useMemoCache:OE,useCacheRefresh:hU},Yf=null,jp=0;function Uv(l){var f=jp;return jp+=1,Yf===null&&(Yf=[]),RV(Yf,l,f)}function Kp(l,f){f=f.props.ref,l.ref=f!==void 0?f:null}function qv(l,f){throw f.$$typeof===h?Error(r(525)):(l=Object.prototype.toString.call(f),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":l)))}function _U(l){var f=l._init;return f(l._payload)}function wU(l){function f(se,ie){if(l){var ce=se.deletions;ce===null?(se.deletions=[ie],se.flags|=16):ce.push(ie)}}function p(se,ie){if(!l)return null;for(;ie!==null;)f(se,ie),ie=ie.sibling;return null}function v(se){for(var ie=new Map;se!==null;)se.key!==null?ie.set(se.key,se):ie.set(se.index,se),se=se.sibling;return ie}function E(se,ie){return se=sa(se,ie),se.index=0,se.sibling=null,se}function A(se,ie,ce){return se.index=ce,l?(ce=se.alternate,ce!==null?(ce=ce.index,ce<ie?(se.flags|=67108866,ie):ce):(se.flags|=67108866,ie)):(se.flags|=1048576,ie)}function z(se){return l&&se.alternate===null&&(se.flags|=67108866),se}function j(se,ie,ce,Te){return ie===null||ie.tag!==6?(ie=fE(ce,se.mode,Te),ie.return=se,ie):(ie=E(ie,ce),ie.return=se,ie)}function Z(se,ie,ce,Te){var je=ce.type;return je===S?be(se,ie,ce.props.children,Te,ce.key):ie!==null&&(ie.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===O&&_U(je)===ie.type)?(ie=E(ie,ce.props),Kp(ie,ce),ie.return=se,ie):(ie=bv(ce.type,ce.key,ce.props,null,se.mode,Te),Kp(ie,ce),ie.return=se,ie)}function fe(se,ie,ce,Te){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==ce.containerInfo||ie.stateNode.implementation!==ce.implementation?(ie=dE(ce,se.mode,Te),ie.return=se,ie):(ie=E(ie,ce.children||[]),ie.return=se,ie)}function be(se,ie,ce,Te,je){return ie===null||ie.tag!==7?(ie=ju(ce,se.mode,Te,je),ie.return=se,ie):(ie=E(ie,ce),ie.return=se,ie)}function Ee(se,ie,ce){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return ie=fE(""+ie,se.mode,ce),ie.return=se,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case g:return ce=bv(ie.type,ie.key,ie.props,null,se.mode,ce),Kp(ce,ie),ce.return=se,ce;case _:return ie=dE(ie,se.mode,ce),ie.return=se,ie;case O:var Te=ie._init;return ie=Te(ie._payload),Ee(se,ie,ce)}if(Y(ie)||F(ie))return ie=ju(ie,se.mode,ce,null),ie.return=se,ie;if(typeof ie.then=="function")return Ee(se,Uv(ie),ce);if(ie.$$typeof===I)return Ee(se,xv(se,ie),ce);qv(se,ie)}return null}function de(se,ie,ce,Te){var je=ie!==null?ie.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return je!==null?null:j(se,ie,""+ce,Te);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case g:return ce.key===je?Z(se,ie,ce,Te):null;case _:return ce.key===je?fe(se,ie,ce,Te):null;case O:return je=ce._init,ce=je(ce._payload),de(se,ie,ce,Te)}if(Y(ce)||F(ce))return je!==null?null:be(se,ie,ce,Te,null);if(typeof ce.then=="function")return de(se,ie,Uv(ce),Te);if(ce.$$typeof===I)return de(se,ie,xv(se,ce),Te);qv(se,ce)}return null}function he(se,ie,ce,Te,je){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return se=se.get(ce)||null,j(ie,se,""+Te,je);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case g:return se=se.get(Te.key===null?ce:Te.key)||null,Z(ie,se,Te,je);case _:return se=se.get(Te.key===null?ce:Te.key)||null,fe(ie,se,Te,je);case O:var ct=Te._init;return Te=ct(Te._payload),he(se,ie,ce,Te,je)}if(Y(Te)||F(Te))return se=se.get(ce)||null,be(ie,se,Te,je,null);if(typeof Te.then=="function")return he(se,ie,ce,Uv(Te),je);if(Te.$$typeof===I)return he(se,ie,ce,xv(ie,Te),je);qv(ie,Te)}return null}function rt(se,ie,ce,Te){for(var je=null,ct=null,Je=ie,nt=ie=0,lr=null;Je!==null&&nt<ce.length;nt++){Je.index>nt?(lr=Je,Je=null):lr=Je.sibling;var St=de(se,Je,ce[nt],Te);if(St===null){Je===null&&(Je=lr);break}l&&Je&&St.alternate===null&&f(se,Je),ie=A(St,ie,nt),ct===null?je=St:ct.sibling=St,ct=St,Je=lr}if(nt===ce.length)return p(se,Je),It&&Wu(se,nt),je;if(Je===null){for(;nt<ce.length;nt++)Je=Ee(se,ce[nt],Te),Je!==null&&(ie=A(Je,ie,nt),ct===null?je=Je:ct.sibling=Je,ct=Je);return It&&Wu(se,nt),je}for(Je=v(Je);nt<ce.length;nt++)lr=he(Je,se,nt,ce[nt],Te),lr!==null&&(l&&lr.alternate!==null&&Je.delete(lr.key===null?nt:lr.key),ie=A(lr,ie,nt),ct===null?je=lr:ct.sibling=lr,ct=lr);return l&&Je.forEach(function(Ml){return f(se,Ml)}),It&&Wu(se,nt),je}function et(se,ie,ce,Te){if(ce==null)throw Error(r(151));for(var je=null,ct=null,Je=ie,nt=ie=0,lr=null,St=ce.next();Je!==null&&!St.done;nt++,St=ce.next()){Je.index>nt?(lr=Je,Je=null):lr=Je.sibling;var Ml=de(se,Je,St.value,Te);if(Ml===null){Je===null&&(Je=lr);break}l&&Je&&Ml.alternate===null&&f(se,Je),ie=A(Ml,ie,nt),ct===null?je=Ml:ct.sibling=Ml,ct=Ml,Je=lr}if(St.done)return p(se,Je),It&&Wu(se,nt),je;if(Je===null){for(;!St.done;nt++,St=ce.next())St=Ee(se,St.value,Te),St!==null&&(ie=A(St,ie,nt),ct===null?je=St:ct.sibling=St,ct=St);return It&&Wu(se,nt),je}for(Je=v(Je);!St.done;nt++,St=ce.next())St=he(Je,se,nt,St.value,Te),St!==null&&(l&&St.alternate!==null&&Je.delete(St.key===null?nt:St.key),ie=A(St,ie,nt),ct===null?je=St:ct.sibling=St,ct=St);return l&&Je.forEach(function(uae){return f(se,uae)}),It&&Wu(se,nt),je}function zt(se,ie,ce,Te){if(typeof ce=="object"&&ce!==null&&ce.type===S&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case g:e:{for(var je=ce.key;ie!==null;){if(ie.key===je){if(je=ce.type,je===S){if(ie.tag===7){p(se,ie.sibling),Te=E(ie,ce.props.children),Te.return=se,se=Te;break e}}else if(ie.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===O&&_U(je)===ie.type){p(se,ie.sibling),Te=E(ie,ce.props),Kp(Te,ce),Te.return=se,se=Te;break e}p(se,ie);break}else f(se,ie);ie=ie.sibling}ce.type===S?(Te=ju(ce.props.children,se.mode,Te,ce.key),Te.return=se,se=Te):(Te=bv(ce.type,ce.key,ce.props,null,se.mode,Te),Kp(Te,ce),Te.return=se,se=Te)}return z(se);case _:e:{for(je=ce.key;ie!==null;){if(ie.key===je)if(ie.tag===4&&ie.stateNode.containerInfo===ce.containerInfo&&ie.stateNode.implementation===ce.implementation){p(se,ie.sibling),Te=E(ie,ce.children||[]),Te.return=se,se=Te;break e}else{p(se,ie);break}else f(se,ie);ie=ie.sibling}Te=dE(ce,se.mode,Te),Te.return=se,se=Te}return z(se);case O:return je=ce._init,ce=je(ce._payload),zt(se,ie,ce,Te)}if(Y(ce))return rt(se,ie,ce,Te);if(F(ce)){if(je=F(ce),typeof je!="function")throw Error(r(150));return ce=je.call(ce),et(se,ie,ce,Te)}if(typeof ce.then=="function")return zt(se,ie,Uv(ce),Te);if(ce.$$typeof===I)return zt(se,ie,xv(se,ce),Te);qv(se,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint"?(ce=""+ce,ie!==null&&ie.tag===6?(p(se,ie.sibling),Te=E(ie,ce),Te.return=se,se=Te):(p(se,ie),Te=fE(ce,se.mode,Te),Te.return=se,se=Te),z(se)):p(se,ie)}return function(se,ie,ce,Te){try{jp=0;var je=zt(se,ie,ce,Te);return Yf=null,je}catch(Je){if(Je===Vp||Je===Cv)throw Je;var ct=Ei(29,Je,null,se.mode);return ct.lanes=Te,ct.return=se,ct}finally{}}}var Jf=wU(!0),bU=wU(!1),so=te(null),bs=null;function yl(l){var f=l.alternate;ae(Jn,Jn.current&1),ae(so,l),bs===null&&(f===null||Gf.current!==null||f.memoizedState!==null)&&(bs=l)}function TU(l){if(l.tag===22){if(ae(Jn,Jn.current),ae(so,l),bs===null){var f=l.alternate;f!==null&&f.memoizedState!==null&&(bs=l)}}else vl()}function vl(){ae(Jn,Jn.current),ae(so,so.current)}function da(l){ee(so),bs===l&&(bs=null),ee(Jn)}var Jn=te(0);function Fv(l){for(var f=l;f!==null;){if(f.tag===13){var p=f.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||kS(p)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function GE(l,f,p,v){f=l.memoizedState,p=p(v,f),p=p==null?f:d({},f,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}var jE={enqueueSetState:function(l,f,p){l=l._reactInternals;var v=Ci(),E=pl(v);E.payload=f,p!=null&&(E.callback=p),f=ml(l,E,v),f!==null&&(Ii(f,l,v),qp(f,l,v))},enqueueReplaceState:function(l,f,p){l=l._reactInternals;var v=Ci(),E=pl(v);E.tag=1,E.payload=f,p!=null&&(E.callback=p),f=ml(l,E,v),f!==null&&(Ii(f,l,v),qp(f,l,v))},enqueueForceUpdate:function(l,f){l=l._reactInternals;var p=Ci(),v=pl(p);v.tag=2,f!=null&&(v.callback=f),f=ml(l,v,p),f!==null&&(Ii(f,l,p),qp(f,l,p))}};function EU(l,f,p,v,E,A,z){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(v,A,z):f.prototype&&f.prototype.isPureReactComponent?!Rp(p,v)||!Rp(E,A):!0}function SU(l,f,p,v){l=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(p,v),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(p,v),f.state!==l&&jE.enqueueReplaceState(f,f.state,null)}function tc(l,f){var p=f;if("ref"in f){p={};for(var v in f)v!=="ref"&&(p[v]=f[v])}if(l=l.defaultProps){p===f&&(p=d({},p));for(var E in l)p[E]===void 0&&(p[E]=l[E])}return p}var Bv=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function xU(l){Bv(l)}function AU(l){console.error(l)}function CU(l){Bv(l)}function $v(l,f){try{var p=l.onUncaughtError;p(f.value,{componentStack:f.stack})}catch(v){setTimeout(function(){throw v})}}function IU(l,f,p){try{var v=l.onCaughtError;v(p.value,{componentStack:p.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function KE(l,f,p){return p=pl(p),p.tag=3,p.payload={element:null},p.callback=function(){$v(l,f)},p}function RU(l){return l=pl(l),l.tag=3,l}function PU(l,f,p,v){var E=p.type.getDerivedStateFromError;if(typeof E=="function"){var A=v.value;l.payload=function(){return E(A)},l.callback=function(){IU(f,p,v)}}var z=p.stateNode;z!==null&&typeof z.componentDidCatch=="function"&&(l.callback=function(){IU(f,p,v),typeof E!="function"&&(Sl===null?Sl=new Set([this]):Sl.add(this));var j=v.stack;this.componentDidCatch(v.value,{componentStack:j!==null?j:""})})}function use(l,f,p,v,E){if(p.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(f=p.alternate,f!==null&&kp(f,p,E,!0),p=so.current,p!==null){switch(p.tag){case 13:return bs===null?yS():p.alternate===null&&Tn===0&&(Tn=3),p.flags&=-257,p.flags|=65536,p.lanes=E,v===TE?p.flags|=16384:(f=p.updateQueue,f===null?p.updateQueue=new Set([v]):f.add(v),_S(l,v,E)),!1;case 22:return p.flags|=65536,v===TE?p.flags|=16384:(f=p.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([v])},p.updateQueue=f):(p=f.retryQueue,p===null?f.retryQueue=new Set([v]):p.add(v)),_S(l,v,E)),!1}throw Error(r(435,p.tag))}return _S(l,v,E),yS(),!1}if(It)return f=so.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=E,v!==mE&&(l=Error(r(422),{cause:v}),Dp(no(l,p)))):(v!==mE&&(f=Error(r(423),{cause:v}),Dp(no(f,p))),l=l.current.alternate,l.flags|=65536,E&=-E,l.lanes|=E,v=no(v,p),E=KE(l.stateNode,v,E),xE(l,E),Tn!==4&&(Tn=2)),!1;var A=Error(r(520),{cause:v});if(A=no(A,p),em===null?em=[A]:em.push(A),Tn!==4&&(Tn=2),f===null)return!0;v=no(v,p),p=f;do{switch(p.tag){case 3:return p.flags|=65536,l=E&-E,p.lanes|=l,l=KE(p.stateNode,v,l),xE(p,l),!1;case 1:if(f=p.type,A=p.stateNode,(p.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Sl===null||!Sl.has(A))))return p.flags|=65536,E&=-E,p.lanes|=E,E=RU(E),PU(E,l,p,v),xE(p,E),!1}p=p.return}while(p!==null);return!1}var NU=Error(r(461)),sr=!1;function Er(l,f,p,v){f.child=l===null?bU(f,null,p,v):Jf(f,l.child,p,v)}function MU(l,f,p,v,E){p=p.render;var A=f.ref;if("ref"in v){var z={};for(var j in v)j!=="ref"&&(z[j]=v[j])}else z=v;return Qu(f),v=PE(l,f,p,z,A,E),j=NE(),l!==null&&!sr?(ME(l,f,E),ha(l,f,E)):(It&&j&&hE(f),f.flags|=1,Er(l,f,v,E),f.child)}function DU(l,f,p,v,E){if(l===null){var A=p.type;return typeof A=="function"&&!cE(A)&&A.defaultProps===void 0&&p.compare===null?(f.tag=15,f.type=A,kU(l,f,A,v,E)):(l=bv(p.type,null,v,f,f.mode,E),l.ref=f.ref,l.return=f,f.child=l)}if(A=l.child,!tS(l,E)){var z=A.memoizedProps;if(p=p.compare,p=p!==null?p:Rp,p(z,v)&&l.ref===f.ref)return ha(l,f,E)}return f.flags|=1,l=sa(A,v),l.ref=f.ref,l.return=f,f.child=l}function kU(l,f,p,v,E){if(l!==null){var A=l.memoizedProps;if(Rp(A,v)&&l.ref===f.ref)if(sr=!1,f.pendingProps=v=A,tS(l,E))(l.flags&131072)!==0&&(sr=!0);else return f.lanes=l.lanes,ha(l,f,E)}return WE(l,f,p,v,E)}function OU(l,f,p){var v=f.pendingProps,E=v.children,A=l!==null?l.memoizedState:null;if(v.mode==="hidden"){if((f.flags&128)!==0){if(v=A!==null?A.baseLanes|p:p,l!==null){for(E=f.child=l.child,A=0;E!==null;)A=A|E.lanes|E.childLanes,E=E.sibling;f.childLanes=A&~v}else f.childLanes=0,f.child=null;return LU(l,f,v,p)}if((p&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},l!==null&&Av(f,A!==null?A.cachePool:null),A!==null?kV(f,A):CE(),TU(f);else return f.lanes=f.childLanes=536870912,LU(l,f,A!==null?A.baseLanes|p:p,p)}else A!==null?(Av(f,A.cachePool),kV(f,A),vl(),f.memoizedState=null):(l!==null&&Av(f,null),CE(),vl());return Er(l,f,E,p),f.child}function LU(l,f,p,v){var E=bE();return E=E===null?null:{parent:Yn._currentValue,pool:E},f.memoizedState={baseLanes:p,cachePool:E},l!==null&&Av(f,null),CE(),TU(f),l!==null&&kp(l,f,v,!0),null}function zv(l,f){var p=f.ref;if(p===null)l!==null&&l.ref!==null&&(f.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(r(284));(l===null||l.ref!==p)&&(f.flags|=4194816)}}function WE(l,f,p,v,E){return Qu(f),p=PE(l,f,p,v,void 0,E),v=NE(),l!==null&&!sr?(ME(l,f,E),ha(l,f,E)):(It&&v&&hE(f),f.flags|=1,Er(l,f,p,E),f.child)}function VU(l,f,p,v,E,A){return Qu(f),f.updateQueue=null,p=LV(f,v,p,E),OV(l),v=NE(),l!==null&&!sr?(ME(l,f,A),ha(l,f,A)):(It&&v&&hE(f),f.flags|=1,Er(l,f,p,A),f.child)}function UU(l,f,p,v,E){if(Qu(f),f.stateNode===null){var A=Ff,z=p.contextType;typeof z=="object"&&z!==null&&(A=Or(z)),A=new p(v,A),f.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=jE,f.stateNode=A,A._reactInternals=f,A=f.stateNode,A.props=v,A.state=f.memoizedState,A.refs={},EE(f),z=p.contextType,A.context=typeof z=="object"&&z!==null?Or(z):Ff,A.state=f.memoizedState,z=p.getDerivedStateFromProps,typeof z=="function"&&(GE(f,p,z,v),A.state=f.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(z=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),z!==A.state&&jE.enqueueReplaceState(A,A.state,null),Bp(f,v,A,E),Fp(),A.state=f.memoizedState),typeof A.componentDidMount=="function"&&(f.flags|=4194308),v=!0}else if(l===null){A=f.stateNode;var j=f.memoizedProps,Z=tc(p,j);A.props=Z;var fe=A.context,be=p.contextType;z=Ff,typeof be=="object"&&be!==null&&(z=Or(be));var Ee=p.getDerivedStateFromProps;be=typeof Ee=="function"||typeof A.getSnapshotBeforeUpdate=="function",j=f.pendingProps!==j,be||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(j||fe!==z)&&SU(f,A,v,z),hl=!1;var de=f.memoizedState;A.state=de,Bp(f,v,A,E),Fp(),fe=f.memoizedState,j||de!==fe||hl?(typeof Ee=="function"&&(GE(f,p,Ee,v),fe=f.memoizedState),(Z=hl||EU(f,p,Z,v,de,fe,z))?(be||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(f.flags|=4194308)):(typeof A.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=v,f.memoizedState=fe),A.props=v,A.state=fe,A.context=z,v=Z):(typeof A.componentDidMount=="function"&&(f.flags|=4194308),v=!1)}else{A=f.stateNode,SE(l,f),z=f.memoizedProps,be=tc(p,z),A.props=be,Ee=f.pendingProps,de=A.context,fe=p.contextType,Z=Ff,typeof fe=="object"&&fe!==null&&(Z=Or(fe)),j=p.getDerivedStateFromProps,(fe=typeof j=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(z!==Ee||de!==Z)&&SU(f,A,v,Z),hl=!1,de=f.memoizedState,A.state=de,Bp(f,v,A,E),Fp();var he=f.memoizedState;z!==Ee||de!==he||hl||l!==null&&l.dependencies!==null&&Sv(l.dependencies)?(typeof j=="function"&&(GE(f,p,j,v),he=f.memoizedState),(be=hl||EU(f,p,be,v,de,he,Z)||l!==null&&l.dependencies!==null&&Sv(l.dependencies))?(fe||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(v,he,Z),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(v,he,Z)),typeof A.componentDidUpdate=="function"&&(f.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof A.componentDidUpdate!="function"||z===l.memoizedProps&&de===l.memoizedState||(f.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||z===l.memoizedProps&&de===l.memoizedState||(f.flags|=1024),f.memoizedProps=v,f.memoizedState=he),A.props=v,A.state=he,A.context=Z,v=be):(typeof A.componentDidUpdate!="function"||z===l.memoizedProps&&de===l.memoizedState||(f.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||z===l.memoizedProps&&de===l.memoizedState||(f.flags|=1024),v=!1)}return A=v,zv(l,f),v=(f.flags&128)!==0,A||v?(A=f.stateNode,p=v&&typeof p.getDerivedStateFromError!="function"?null:A.render(),f.flags|=1,l!==null&&v?(f.child=Jf(f,l.child,null,E),f.child=Jf(f,null,p,E)):Er(l,f,p,E),f.memoizedState=A.state,l=f.child):l=ha(l,f,E),l}function qU(l,f,p,v){return Mp(),f.flags|=256,Er(l,f,p,v),f.child}var YE={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function JE(l){return{baseLanes:l,cachePool:AV()}}function XE(l,f,p){return l=l!==null?l.childLanes&~p:0,f&&(l|=ao),l}function FU(l,f,p){var v=f.pendingProps,E=!1,A=(f.flags&128)!==0,z;if((z=A)||(z=l!==null&&l.memoizedState===null?!1:(Jn.current&2)!==0),z&&(E=!0,f.flags&=-129),z=(f.flags&32)!==0,f.flags&=-33,l===null){if(It){if(E?yl(f):vl(),It){var j=bn,Z;if(Z=j){e:{for(Z=j,j=ws;Z.nodeType!==8;){if(!j){j=null;break e}if(Z=Uo(Z.nextSibling),Z===null){j=null;break e}}j=Z}j!==null?(f.memoizedState={dehydrated:j,treeContext:Ku!==null?{id:aa,overflow:la}:null,retryLane:536870912,hydrationErrors:null},Z=Ei(18,null,null,0),Z.stateNode=j,Z.return=f,f.child=Z,Kr=f,bn=null,Z=!0):Z=!1}Z||Ju(f)}if(j=f.memoizedState,j!==null&&(j=j.dehydrated,j!==null))return kS(j)?f.lanes=32:f.lanes=536870912,null;da(f)}return j=v.children,v=v.fallback,E?(vl(),E=f.mode,j=Hv({mode:"hidden",children:j},E),v=ju(v,E,p,null),j.return=f,v.return=f,j.sibling=v,f.child=j,E=f.child,E.memoizedState=JE(p),E.childLanes=XE(l,z,p),f.memoizedState=YE,v):(yl(f),QE(f,j))}if(Z=l.memoizedState,Z!==null&&(j=Z.dehydrated,j!==null)){if(A)f.flags&256?(yl(f),f.flags&=-257,f=ZE(l,f,p)):f.memoizedState!==null?(vl(),f.child=l.child,f.flags|=128,f=null):(vl(),E=v.fallback,j=f.mode,v=Hv({mode:"visible",children:v.children},j),E=ju(E,j,p,null),E.flags|=2,v.return=f,E.return=f,v.sibling=E,f.child=v,Jf(f,l.child,null,p),v=f.child,v.memoizedState=JE(p),v.childLanes=XE(l,z,p),f.memoizedState=YE,f=E);else if(yl(f),kS(j)){if(z=j.nextSibling&&j.nextSibling.dataset,z)var fe=z.dgst;z=fe,v=Error(r(419)),v.stack="",v.digest=z,Dp({value:v,source:null,stack:null}),f=ZE(l,f,p)}else if(sr||kp(l,f,p,!1),z=(p&l.childLanes)!==0,sr||z){if(z=Wt,z!==null&&(v=p&-p,v=(v&42)!==0?1:ss(v),v=(v&(z.suspendedLanes|p))!==0?0:v,v!==0&&v!==Z.retryLane))throw Z.retryLane=v,qf(l,v),Ii(z,l,v),NU;j.data==="$?"||yS(),f=ZE(l,f,p)}else j.data==="$?"?(f.flags|=192,f.child=l.child,f=null):(l=Z.treeContext,bn=Uo(j.nextSibling),Kr=f,It=!0,Yu=null,ws=!1,l!==null&&(io[oo++]=aa,io[oo++]=la,io[oo++]=Ku,aa=l.id,la=l.overflow,Ku=f),f=QE(f,v.children),f.flags|=4096);return f}return E?(vl(),E=v.fallback,j=f.mode,Z=l.child,fe=Z.sibling,v=sa(Z,{mode:"hidden",children:v.children}),v.subtreeFlags=Z.subtreeFlags&65011712,fe!==null?E=sa(fe,E):(E=ju(E,j,p,null),E.flags|=2),E.return=f,v.return=f,v.sibling=E,f.child=v,v=E,E=f.child,j=l.child.memoizedState,j===null?j=JE(p):(Z=j.cachePool,Z!==null?(fe=Yn._currentValue,Z=Z.parent!==fe?{parent:fe,pool:fe}:Z):Z=AV(),j={baseLanes:j.baseLanes|p,cachePool:Z}),E.memoizedState=j,E.childLanes=XE(l,z,p),f.memoizedState=YE,v):(yl(f),p=l.child,l=p.sibling,p=sa(p,{mode:"visible",children:v.children}),p.return=f,p.sibling=null,l!==null&&(z=f.deletions,z===null?(f.deletions=[l],f.flags|=16):z.push(l)),f.child=p,f.memoizedState=null,p)}function QE(l,f){return f=Hv({mode:"visible",children:f},l.mode),f.return=l,l.child=f}function Hv(l,f){return l=Ei(22,l,null,f),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function ZE(l,f,p){return Jf(f,l.child,null,p),l=QE(f,f.pendingProps.children),l.flags|=2,f.memoizedState=null,l}function BU(l,f,p){l.lanes|=f;var v=l.alternate;v!==null&&(v.lanes|=f),yE(l.return,f,p)}function eS(l,f,p,v,E){var A=l.memoizedState;A===null?l.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:v,tail:p,tailMode:E}:(A.isBackwards=f,A.rendering=null,A.renderingStartTime=0,A.last=v,A.tail=p,A.tailMode=E)}function $U(l,f,p){var v=f.pendingProps,E=v.revealOrder,A=v.tail;if(Er(l,f,v.children,p),v=Jn.current,(v&2)!==0)v=v&1|2,f.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=f.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&BU(l,p,f);else if(l.tag===19)BU(l,p,f);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===f)break e;for(;l.sibling===null;){if(l.return===null||l.return===f)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}v&=1}switch(ae(Jn,v),E){case"forwards":for(p=f.child,E=null;p!==null;)l=p.alternate,l!==null&&Fv(l)===null&&(E=p),p=p.sibling;p=E,p===null?(E=f.child,f.child=null):(E=p.sibling,p.sibling=null),eS(f,!1,E,p,A);break;case"backwards":for(p=null,E=f.child,f.child=null;E!==null;){if(l=E.alternate,l!==null&&Fv(l)===null){f.child=E;break}l=E.sibling,E.sibling=p,p=E,E=l}eS(f,!0,p,null,A);break;case"together":eS(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function ha(l,f,p){if(l!==null&&(f.dependencies=l.dependencies),El|=f.lanes,(p&f.childLanes)===0)if(l!==null){if(kp(l,f,p,!1),(p&f.childLanes)===0)return null}else return null;if(l!==null&&f.child!==l.child)throw Error(r(153));if(f.child!==null){for(l=f.child,p=sa(l,l.pendingProps),f.child=p,p.return=f;l.sibling!==null;)l=l.sibling,p=p.sibling=sa(l,l.pendingProps),p.return=f;p.sibling=null}return f.child}function tS(l,f){return(l.lanes&f)!==0?!0:(l=l.dependencies,!!(l!==null&&Sv(l)))}function cse(l,f,p){switch(f.tag){case 3:Ie(f,f.stateNode.containerInfo),dl(f,Yn,l.memoizedState.cache),Mp();break;case 27:case 5:Ce(f);break;case 4:Ie(f,f.stateNode.containerInfo);break;case 10:dl(f,f.type,f.memoizedProps.value);break;case 13:var v=f.memoizedState;if(v!==null)return v.dehydrated!==null?(yl(f),f.flags|=128,null):(p&f.child.childLanes)!==0?FU(l,f,p):(yl(f),l=ha(l,f,p),l!==null?l.sibling:null);yl(f);break;case 19:var E=(l.flags&128)!==0;if(v=(p&f.childLanes)!==0,v||(kp(l,f,p,!1),v=(p&f.childLanes)!==0),E){if(v)return $U(l,f,p);f.flags|=128}if(E=f.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),ae(Jn,Jn.current),v)break;return null;case 22:case 23:return f.lanes=0,OU(l,f,p);case 24:dl(f,Yn,l.memoizedState.cache)}return ha(l,f,p)}function zU(l,f,p){if(l!==null)if(l.memoizedProps!==f.pendingProps)sr=!0;else{if(!tS(l,p)&&(f.flags&128)===0)return sr=!1,cse(l,f,p);sr=(l.flags&131072)!==0}else sr=!1,It&&(f.flags&1048576)!==0&&_V(f,Ev,f.index);switch(f.lanes=0,f.tag){case 16:e:{l=f.pendingProps;var v=f.elementType,E=v._init;if(v=E(v._payload),f.type=v,typeof v=="function")cE(v)?(l=tc(v,l),f.tag=1,f=UU(null,f,v,l,p)):(f.tag=0,f=WE(null,f,v,l,p));else{if(v!=null){if(E=v.$$typeof,E===N){f.tag=11,f=MU(null,f,v,l,p);break e}else if(E===P){f.tag=14,f=DU(null,f,v,l,p);break e}}throw f=H(v)||v,Error(r(306,f,""))}}return f;case 0:return WE(l,f,f.type,f.pendingProps,p);case 1:return v=f.type,E=tc(v,f.pendingProps),UU(l,f,v,E,p);case 3:e:{if(Ie(f,f.stateNode.containerInfo),l===null)throw Error(r(387));v=f.pendingProps;var A=f.memoizedState;E=A.element,SE(l,f),Bp(f,v,null,p);var z=f.memoizedState;if(v=z.cache,dl(f,Yn,v),v!==A.cache&&vE(f,[Yn],p,!0),Fp(),v=z.element,A.isDehydrated)if(A={element:v,isDehydrated:!1,cache:z.cache},f.updateQueue.baseState=A,f.memoizedState=A,f.flags&256){f=qU(l,f,v,p);break e}else if(v!==E){E=no(Error(r(424)),f),Dp(E),f=qU(l,f,v,p);break e}else{switch(l=f.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(bn=Uo(l.firstChild),Kr=f,It=!0,Yu=null,ws=!0,p=bU(f,null,v,p),f.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(Mp(),v===E){f=ha(l,f,p);break e}Er(l,f,v,p)}f=f.child}return f;case 26:return zv(l,f),l===null?(p=Kq(f.type,null,f.pendingProps,null))?f.memoizedState=p:It||(p=f.type,l=f.pendingProps,v=i_(oe.current).createElement(p),v[Pn]=f,v[wn]=l,xr(v,p,l),pn(v),f.stateNode=v):f.memoizedState=Kq(f.type,l.memoizedProps,f.pendingProps,l.memoizedState),null;case 27:return Ce(f),l===null&&It&&(v=f.stateNode=Hq(f.type,f.pendingProps,oe.current),Kr=f,ws=!0,E=bn,Cl(f.type)?(OS=E,bn=Uo(v.firstChild)):bn=E),Er(l,f,f.pendingProps.children,p),zv(l,f),l===null&&(f.flags|=4194304),f.child;case 5:return l===null&&It&&((E=v=bn)&&(v=Use(v,f.type,f.pendingProps,ws),v!==null?(f.stateNode=v,Kr=f,bn=Uo(v.firstChild),ws=!1,E=!0):E=!1),E||Ju(f)),Ce(f),E=f.type,A=f.pendingProps,z=l!==null?l.memoizedProps:null,v=A.children,NS(E,A)?v=null:z!==null&&NS(E,z)&&(f.flags|=32),f.memoizedState!==null&&(E=PE(l,f,nse,null,null,p),um._currentValue=E),zv(l,f),Er(l,f,v,p),f.child;case 6:return l===null&&It&&((l=p=bn)&&(p=qse(p,f.pendingProps,ws),p!==null?(f.stateNode=p,Kr=f,bn=null,l=!0):l=!1),l||Ju(f)),null;case 13:return FU(l,f,p);case 4:return Ie(f,f.stateNode.containerInfo),v=f.pendingProps,l===null?f.child=Jf(f,null,v,p):Er(l,f,v,p),f.child;case 11:return MU(l,f,f.type,f.pendingProps,p);case 7:return Er(l,f,f.pendingProps,p),f.child;case 8:return Er(l,f,f.pendingProps.children,p),f.child;case 12:return Er(l,f,f.pendingProps.children,p),f.child;case 10:return v=f.pendingProps,dl(f,f.type,v.value),Er(l,f,v.children,p),f.child;case 9:return E=f.type._context,v=f.pendingProps.children,Qu(f),E=Or(E),v=v(E),f.flags|=1,Er(l,f,v,p),f.child;case 14:return DU(l,f,f.type,f.pendingProps,p);case 15:return kU(l,f,f.type,f.pendingProps,p);case 19:return $U(l,f,p);case 31:return v=f.pendingProps,p=f.mode,v={mode:v.mode,children:v.children},l===null?(p=Hv(v,p),p.ref=f.ref,f.child=p,p.return=f,f=p):(p=sa(l.child,v),p.ref=f.ref,f.child=p,p.return=f,f=p),f;case 22:return OU(l,f,p);case 24:return Qu(f),v=Or(Yn),l===null?(E=bE(),E===null&&(E=Wt,A=_E(),E.pooledCache=A,A.refCount++,A!==null&&(E.pooledCacheLanes|=p),E=A),f.memoizedState={parent:v,cache:E},EE(f),dl(f,Yn,E)):((l.lanes&p)!==0&&(SE(l,f),Bp(f,null,null,p),Fp()),E=l.memoizedState,A=f.memoizedState,E.parent!==v?(E={parent:v,cache:v},f.memoizedState=E,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=E),dl(f,Yn,v)):(v=A.cache,dl(f,Yn,v),v!==E.cache&&vE(f,[Yn],p,!0))),Er(l,f,f.pendingProps.children,p),f.child;case 29:throw f.pendingProps}throw Error(r(156,f.tag))}function pa(l){l.flags|=4}function HU(l,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!Qq(f)){if(f=so.current,f!==null&&((bt&4194048)===bt?bs!==null:(bt&62914560)!==bt&&(bt&536870912)===0||f!==bs))throw Up=TE,CV;l.flags|=8192}}function Gv(l,f){f!==null&&(l.flags|=4),l.flags&16384&&(f=l.tag!==22?Mo():536870912,l.lanes|=f,ed|=f)}function Wp(l,f){if(!It)switch(l.tailMode){case"hidden":f=l.tail;for(var p=null;f!==null;)f.alternate!==null&&(p=f),f=f.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var v=null;p!==null;)p.alternate!==null&&(v=p),p=p.sibling;v===null?f||l.tail===null?l.tail=null:l.tail.sibling=null:v.sibling=null}}function mn(l){var f=l.alternate!==null&&l.alternate.child===l.child,p=0,v=0;if(f)for(var E=l.child;E!==null;)p|=E.lanes|E.childLanes,v|=E.subtreeFlags&65011712,v|=E.flags&65011712,E.return=l,E=E.sibling;else for(E=l.child;E!==null;)p|=E.lanes|E.childLanes,v|=E.subtreeFlags,v|=E.flags,E.return=l,E=E.sibling;return l.subtreeFlags|=v,l.childLanes=p,f}function fse(l,f,p){var v=f.pendingProps;switch(pE(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mn(f),null;case 1:return mn(f),null;case 3:return p=f.stateNode,v=null,l!==null&&(v=l.memoizedState.cache),f.memoizedState.cache!==v&&(f.flags|=2048),ca(Yn),ye(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(l===null||l.child===null)&&(Np(f)?pa(f):l===null||l.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,TV())),mn(f),null;case 26:return p=f.memoizedState,l===null?(pa(f),p!==null?(mn(f),HU(f,p)):(mn(f),f.flags&=-16777217)):p?p!==l.memoizedState?(pa(f),mn(f),HU(f,p)):(mn(f),f.flags&=-16777217):(l.memoizedProps!==v&&pa(f),mn(f),f.flags&=-16777217),null;case 27:ke(f),p=oe.current;var E=f.type;if(l!==null&&f.stateNode!=null)l.memoizedProps!==v&&pa(f);else{if(!v){if(f.stateNode===null)throw Error(r(166));return mn(f),null}l=J.current,Np(f)?wV(f):(l=Hq(E,v,p),f.stateNode=l,pa(f))}return mn(f),null;case 5:if(ke(f),p=f.type,l!==null&&f.stateNode!=null)l.memoizedProps!==v&&pa(f);else{if(!v){if(f.stateNode===null)throw Error(r(166));return mn(f),null}if(l=J.current,Np(f))wV(f);else{switch(E=i_(oe.current),l){case 1:l=E.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:l=E.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":l=E.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":l=E.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":l=E.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof v.is=="string"?E.createElement("select",{is:v.is}):E.createElement("select"),v.multiple?l.multiple=!0:v.size&&(l.size=v.size);break;default:l=typeof v.is=="string"?E.createElement(p,{is:v.is}):E.createElement(p)}}l[Pn]=f,l[wn]=v;e:for(E=f.child;E!==null;){if(E.tag===5||E.tag===6)l.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===f)break e;for(;E.sibling===null;){if(E.return===null||E.return===f)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}f.stateNode=l;e:switch(xr(l,p,v),p){case"button":case"input":case"select":case"textarea":l=!!v.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&pa(f)}}return mn(f),f.flags&=-16777217,null;case 6:if(l&&f.stateNode!=null)l.memoizedProps!==v&&pa(f);else{if(typeof v!="string"&&f.stateNode===null)throw Error(r(166));if(l=oe.current,Np(f)){if(l=f.stateNode,p=f.memoizedProps,v=null,E=Kr,E!==null)switch(E.tag){case 27:case 5:v=E.memoizedProps}l[Pn]=f,l=!!(l.nodeValue===p||v!==null&&v.suppressHydrationWarning===!0||Vq(l.nodeValue,p)),l||Ju(f)}else l=i_(l).createTextNode(v),l[Pn]=f,f.stateNode=l}return mn(f),null;case 13:if(v=f.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(E=Np(f),v!==null&&v.dehydrated!==null){if(l===null){if(!E)throw Error(r(318));if(E=f.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(r(317));E[Pn]=f}else Mp(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;mn(f),E=!1}else E=TV(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=E),E=!0;if(!E)return f.flags&256?(da(f),f):(da(f),null)}if(da(f),(f.flags&128)!==0)return f.lanes=p,f;if(p=v!==null,l=l!==null&&l.memoizedState!==null,p){v=f.child,E=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(E=v.alternate.memoizedState.cachePool.pool);var A=null;v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(A=v.memoizedState.cachePool.pool),A!==E&&(v.flags|=2048)}return p!==l&&p&&(f.child.flags|=8192),Gv(f,f.updateQueue),mn(f),null;case 4:return ye(),l===null&&AS(f.stateNode.containerInfo),mn(f),null;case 10:return ca(f.type),mn(f),null;case 19:if(ee(Jn),E=f.memoizedState,E===null)return mn(f),null;if(v=(f.flags&128)!==0,A=E.rendering,A===null)if(v)Wp(E,!1);else{if(Tn!==0||l!==null&&(l.flags&128)!==0)for(l=f.child;l!==null;){if(A=Fv(l),A!==null){for(f.flags|=128,Wp(E,!1),l=A.updateQueue,f.updateQueue=l,Gv(f,l),f.subtreeFlags=0,l=p,p=f.child;p!==null;)vV(p,l),p=p.sibling;return ae(Jn,Jn.current&1|2),f.child}l=l.sibling}E.tail!==null&&Pe()>Wv&&(f.flags|=128,v=!0,Wp(E,!1),f.lanes=4194304)}else{if(!v)if(l=Fv(A),l!==null){if(f.flags|=128,v=!0,l=l.updateQueue,f.updateQueue=l,Gv(f,l),Wp(E,!0),E.tail===null&&E.tailMode==="hidden"&&!A.alternate&&!It)return mn(f),null}else 2*Pe()-E.renderingStartTime>Wv&&p!==536870912&&(f.flags|=128,v=!0,Wp(E,!1),f.lanes=4194304);E.isBackwards?(A.sibling=f.child,f.child=A):(l=E.last,l!==null?l.sibling=A:f.child=A,E.last=A)}return E.tail!==null?(f=E.tail,E.rendering=f,E.tail=f.sibling,E.renderingStartTime=Pe(),f.sibling=null,l=Jn.current,ae(Jn,v?l&1|2:l&1),f):(mn(f),null);case 22:case 23:return da(f),IE(),v=f.memoizedState!==null,l!==null?l.memoizedState!==null!==v&&(f.flags|=8192):v&&(f.flags|=8192),v?(p&536870912)!==0&&(f.flags&128)===0&&(mn(f),f.subtreeFlags&6&&(f.flags|=8192)):mn(f),p=f.updateQueue,p!==null&&Gv(f,p.retryQueue),p=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),v=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(v=f.memoizedState.cachePool.pool),v!==p&&(f.flags|=2048),l!==null&&ee(Zu),null;case 24:return p=null,l!==null&&(p=l.memoizedState.cache),f.memoizedState.cache!==p&&(f.flags|=2048),ca(Yn),mn(f),null;case 25:return null;case 30:return null}throw Error(r(156,f.tag))}function dse(l,f){switch(pE(f),f.tag){case 1:return l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 3:return ca(Yn),ye(),l=f.flags,(l&65536)!==0&&(l&128)===0?(f.flags=l&-65537|128,f):null;case 26:case 27:case 5:return ke(f),null;case 13:if(da(f),l=f.memoizedState,l!==null&&l.dehydrated!==null){if(f.alternate===null)throw Error(r(340));Mp()}return l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 19:return ee(Jn),null;case 4:return ye(),null;case 10:return ca(f.type),null;case 22:case 23:return da(f),IE(),l!==null&&ee(Zu),l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 24:return ca(Yn),null;case 25:return null;default:return null}}function GU(l,f){switch(pE(f),f.tag){case 3:ca(Yn),ye();break;case 26:case 27:case 5:ke(f);break;case 4:ye();break;case 13:da(f);break;case 19:ee(Jn);break;case 10:ca(f.type);break;case 22:case 23:da(f),IE(),l!==null&&ee(Zu);break;case 24:ca(Yn)}}function Yp(l,f){try{var p=f.updateQueue,v=p!==null?p.lastEffect:null;if(v!==null){var E=v.next;p=E;do{if((p.tag&l)===l){v=void 0;var A=p.create,z=p.inst;v=A(),z.destroy=v}p=p.next}while(p!==E)}}catch(j){Gt(f,f.return,j)}}function _l(l,f,p){try{var v=f.updateQueue,E=v!==null?v.lastEffect:null;if(E!==null){var A=E.next;v=A;do{if((v.tag&l)===l){var z=v.inst,j=z.destroy;if(j!==void 0){z.destroy=void 0,E=f;var Z=p,fe=j;try{fe()}catch(be){Gt(E,Z,be)}}}v=v.next}while(v!==A)}}catch(be){Gt(f,f.return,be)}}function jU(l){var f=l.updateQueue;if(f!==null){var p=l.stateNode;try{DV(f,p)}catch(v){Gt(l,l.return,v)}}}function KU(l,f,p){p.props=tc(l.type,l.memoizedProps),p.state=l.memoizedState;try{p.componentWillUnmount()}catch(v){Gt(l,f,v)}}function Jp(l,f){try{var p=l.ref;if(p!==null){switch(l.tag){case 26:case 27:case 5:var v=l.stateNode;break;case 30:v=l.stateNode;break;default:v=l.stateNode}typeof p=="function"?l.refCleanup=p(v):p.current=v}}catch(E){Gt(l,f,E)}}function Ts(l,f){var p=l.ref,v=l.refCleanup;if(p!==null)if(typeof v=="function")try{v()}catch(E){Gt(l,f,E)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(E){Gt(l,f,E)}else p.current=null}function WU(l){var f=l.type,p=l.memoizedProps,v=l.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":p.autoFocus&&v.focus();break e;case"img":p.src?v.src=p.src:p.srcSet&&(v.srcset=p.srcSet)}}catch(E){Gt(l,l.return,E)}}function nS(l,f,p){try{var v=l.stateNode;Dse(v,l.type,p,f),v[wn]=f}catch(E){Gt(l,l.return,E)}}function YU(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Cl(l.type)||l.tag===4}function rS(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||YU(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Cl(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function iS(l,f,p){var v=l.tag;if(v===5||v===6)l=l.stateNode,f?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(l,f):(f=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,f.appendChild(l),p=p._reactRootContainer,p!=null||f.onclick!==null||(f.onclick=r_));else if(v!==4&&(v===27&&Cl(l.type)&&(p=l.stateNode,f=null),l=l.child,l!==null))for(iS(l,f,p),l=l.sibling;l!==null;)iS(l,f,p),l=l.sibling}function jv(l,f,p){var v=l.tag;if(v===5||v===6)l=l.stateNode,f?p.insertBefore(l,f):p.appendChild(l);else if(v!==4&&(v===27&&Cl(l.type)&&(p=l.stateNode),l=l.child,l!==null))for(jv(l,f,p),l=l.sibling;l!==null;)jv(l,f,p),l=l.sibling}function JU(l){var f=l.stateNode,p=l.memoizedProps;try{for(var v=l.type,E=f.attributes;E.length;)f.removeAttributeNode(E[0]);xr(f,v,p),f[Pn]=l,f[wn]=p}catch(A){Gt(l,l.return,A)}}var ma=!1,Mn=!1,oS=!1,XU=typeof WeakSet=="function"?WeakSet:Set,ar=null;function hse(l,f){if(l=l.containerInfo,RS=c_,l=lV(l),rE(l)){if("selectionStart"in l)var p={start:l.selectionStart,end:l.selectionEnd};else e:{p=(p=l.ownerDocument)&&p.defaultView||window;var v=p.getSelection&&p.getSelection();if(v&&v.rangeCount!==0){p=v.anchorNode;var E=v.anchorOffset,A=v.focusNode;v=v.focusOffset;try{p.nodeType,A.nodeType}catch{p=null;break e}var z=0,j=-1,Z=-1,fe=0,be=0,Ee=l,de=null;t:for(;;){for(var he;Ee!==p||E!==0&&Ee.nodeType!==3||(j=z+E),Ee!==A||v!==0&&Ee.nodeType!==3||(Z=z+v),Ee.nodeType===3&&(z+=Ee.nodeValue.length),(he=Ee.firstChild)!==null;)de=Ee,Ee=he;for(;;){if(Ee===l)break t;if(de===p&&++fe===E&&(j=z),de===A&&++be===v&&(Z=z),(he=Ee.nextSibling)!==null)break;Ee=de,de=Ee.parentNode}Ee=he}p=j===-1||Z===-1?null:{start:j,end:Z}}else p=null}p=p||{start:0,end:0}}else p=null;for(PS={focusedElem:l,selectionRange:p},c_=!1,ar=f;ar!==null;)if(f=ar,l=f.child,(f.subtreeFlags&1024)!==0&&l!==null)l.return=f,ar=l;else for(;ar!==null;){switch(f=ar,A=f.alternate,l=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&A!==null){l=void 0,p=f,E=A.memoizedProps,A=A.memoizedState,v=p.stateNode;try{var rt=tc(p.type,E,p.elementType===p.type);l=v.getSnapshotBeforeUpdate(rt,A),v.__reactInternalSnapshotBeforeUpdate=l}catch(et){Gt(p,p.return,et)}}break;case 3:if((l&1024)!==0){if(l=f.stateNode.containerInfo,p=l.nodeType,p===9)DS(l);else if(p===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":DS(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=f.sibling,l!==null){l.return=f.return,ar=l;break}ar=f.return}}function QU(l,f,p){var v=p.flags;switch(p.tag){case 0:case 11:case 15:wl(l,p),v&4&&Yp(5,p);break;case 1:if(wl(l,p),v&4)if(l=p.stateNode,f===null)try{l.componentDidMount()}catch(z){Gt(p,p.return,z)}else{var E=tc(p.type,f.memoizedProps);f=f.memoizedState;try{l.componentDidUpdate(E,f,l.__reactInternalSnapshotBeforeUpdate)}catch(z){Gt(p,p.return,z)}}v&64&&jU(p),v&512&&Jp(p,p.return);break;case 3:if(wl(l,p),v&64&&(l=p.updateQueue,l!==null)){if(f=null,p.child!==null)switch(p.child.tag){case 27:case 5:f=p.child.stateNode;break;case 1:f=p.child.stateNode}try{DV(l,f)}catch(z){Gt(p,p.return,z)}}break;case 27:f===null&&v&4&&JU(p);case 26:case 5:wl(l,p),f===null&&v&4&&WU(p),v&512&&Jp(p,p.return);break;case 12:wl(l,p);break;case 13:wl(l,p),v&4&&tq(l,p),v&64&&(l=p.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(p=Tse.bind(null,p),Fse(l,p))));break;case 22:if(v=p.memoizedState!==null||ma,!v){f=f!==null&&f.memoizedState!==null||Mn,E=ma;var A=Mn;ma=v,(Mn=f)&&!A?bl(l,p,(p.subtreeFlags&8772)!==0):wl(l,p),ma=E,Mn=A}break;case 30:break;default:wl(l,p)}}function ZU(l){var f=l.alternate;f!==null&&(l.alternate=null,ZU(f)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(f=l.stateNode,f!==null&&us(f)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var sn=null,ai=!1;function ga(l,f,p){for(p=p.child;p!==null;)eq(l,f,p),p=p.sibling}function eq(l,f,p){if(We&&typeof We.onCommitFiberUnmount=="function")try{We.onCommitFiberUnmount(He,p)}catch{}switch(p.tag){case 26:Mn||Ts(p,f),ga(l,f,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:Mn||Ts(p,f);var v=sn,E=ai;Cl(p.type)&&(sn=p.stateNode,ai=!1),ga(l,f,p),om(p.stateNode),sn=v,ai=E;break;case 5:Mn||Ts(p,f);case 6:if(v=sn,E=ai,sn=null,ga(l,f,p),sn=v,ai=E,sn!==null)if(ai)try{(sn.nodeType===9?sn.body:sn.nodeName==="HTML"?sn.ownerDocument.body:sn).removeChild(p.stateNode)}catch(A){Gt(p,f,A)}else try{sn.removeChild(p.stateNode)}catch(A){Gt(p,f,A)}break;case 18:sn!==null&&(ai?(l=sn,$q(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,p.stateNode),hm(l)):$q(sn,p.stateNode));break;case 4:v=sn,E=ai,sn=p.stateNode.containerInfo,ai=!0,ga(l,f,p),sn=v,ai=E;break;case 0:case 11:case 14:case 15:Mn||_l(2,p,f),Mn||_l(4,p,f),ga(l,f,p);break;case 1:Mn||(Ts(p,f),v=p.stateNode,typeof v.componentWillUnmount=="function"&&KU(p,f,v)),ga(l,f,p);break;case 21:ga(l,f,p);break;case 22:Mn=(v=Mn)||p.memoizedState!==null,ga(l,f,p),Mn=v;break;default:ga(l,f,p)}}function tq(l,f){if(f.memoizedState===null&&(l=f.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{hm(l)}catch(p){Gt(f,f.return,p)}}function pse(l){switch(l.tag){case 13:case 19:var f=l.stateNode;return f===null&&(f=l.stateNode=new XU),f;case 22:return l=l.stateNode,f=l._retryCache,f===null&&(f=l._retryCache=new XU),f;default:throw Error(r(435,l.tag))}}function sS(l,f){var p=pse(l);f.forEach(function(v){var E=Ese.bind(null,l,v);p.has(v)||(p.add(v),v.then(E,E))})}function Si(l,f){var p=f.deletions;if(p!==null)for(var v=0;v<p.length;v++){var E=p[v],A=l,z=f,j=z;e:for(;j!==null;){switch(j.tag){case 27:if(Cl(j.type)){sn=j.stateNode,ai=!1;break e}break;case 5:sn=j.stateNode,ai=!1;break e;case 3:case 4:sn=j.stateNode.containerInfo,ai=!0;break e}j=j.return}if(sn===null)throw Error(r(160));eq(A,z,E),sn=null,ai=!1,A=E.alternate,A!==null&&(A.return=null),E.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)nq(f,l),f=f.sibling}var Vo=null;function nq(l,f){var p=l.alternate,v=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Si(f,l),xi(l),v&4&&(_l(3,l,l.return),Yp(3,l),_l(5,l,l.return));break;case 1:Si(f,l),xi(l),v&512&&(Mn||p===null||Ts(p,p.return)),v&64&&ma&&(l=l.updateQueue,l!==null&&(v=l.callbacks,v!==null&&(p=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=p===null?v:p.concat(v))));break;case 26:var E=Vo;if(Si(f,l),xi(l),v&512&&(Mn||p===null||Ts(p,p.return)),v&4){var A=p!==null?p.memoizedState:null;if(v=l.memoizedState,p===null)if(v===null)if(l.stateNode===null){e:{v=l.type,p=l.memoizedProps,E=E.ownerDocument||E;t:switch(v){case"title":A=E.getElementsByTagName("title")[0],(!A||A[Xs]||A[Pn]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=E.createElement(v),E.head.insertBefore(A,E.querySelector("head > title"))),xr(A,v,p),A[Pn]=l,pn(A),v=A;break e;case"link":var z=Jq("link","href",E).get(v+(p.href||""));if(z){for(var j=0;j<z.length;j++)if(A=z[j],A.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&A.getAttribute("rel")===(p.rel==null?null:p.rel)&&A.getAttribute("title")===(p.title==null?null:p.title)&&A.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){z.splice(j,1);break t}}A=E.createElement(v),xr(A,v,p),E.head.appendChild(A);break;case"meta":if(z=Jq("meta","content",E).get(v+(p.content||""))){for(j=0;j<z.length;j++)if(A=z[j],A.getAttribute("content")===(p.content==null?null:""+p.content)&&A.getAttribute("name")===(p.name==null?null:p.name)&&A.getAttribute("property")===(p.property==null?null:p.property)&&A.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&A.getAttribute("charset")===(p.charSet==null?null:p.charSet)){z.splice(j,1);break t}}A=E.createElement(v),xr(A,v,p),E.head.appendChild(A);break;default:throw Error(r(468,v))}A[Pn]=l,pn(A),v=A}l.stateNode=v}else Xq(E,l.type,l.stateNode);else l.stateNode=Yq(E,v,l.memoizedProps);else A!==v?(A===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):A.count--,v===null?Xq(E,l.type,l.stateNode):Yq(E,v,l.memoizedProps)):v===null&&l.stateNode!==null&&nS(l,l.memoizedProps,p.memoizedProps)}break;case 27:Si(f,l),xi(l),v&512&&(Mn||p===null||Ts(p,p.return)),p!==null&&v&4&&nS(l,l.memoizedProps,p.memoizedProps);break;case 5:if(Si(f,l),xi(l),v&512&&(Mn||p===null||Ts(p,p.return)),l.flags&32){E=l.stateNode;try{Qi(E,"")}catch(he){Gt(l,l.return,he)}}v&4&&l.stateNode!=null&&(E=l.memoizedProps,nS(l,E,p!==null?p.memoizedProps:E)),v&1024&&(oS=!0);break;case 6:if(Si(f,l),xi(l),v&4){if(l.stateNode===null)throw Error(r(162));v=l.memoizedProps,p=l.stateNode;try{p.nodeValue=v}catch(he){Gt(l,l.return,he)}}break;case 3:if(a_=null,E=Vo,Vo=o_(f.containerInfo),Si(f,l),Vo=E,xi(l),v&4&&p!==null&&p.memoizedState.isDehydrated)try{hm(f.containerInfo)}catch(he){Gt(l,l.return,he)}oS&&(oS=!1,rq(l));break;case 4:v=Vo,Vo=o_(l.stateNode.containerInfo),Si(f,l),xi(l),Vo=v;break;case 12:Si(f,l),xi(l);break;case 13:Si(f,l),xi(l),l.child.flags&8192&&l.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(dS=Pe()),v&4&&(v=l.updateQueue,v!==null&&(l.updateQueue=null,sS(l,v)));break;case 22:E=l.memoizedState!==null;var Z=p!==null&&p.memoizedState!==null,fe=ma,be=Mn;if(ma=fe||E,Mn=be||Z,Si(f,l),Mn=be,ma=fe,xi(l),v&8192)e:for(f=l.stateNode,f._visibility=E?f._visibility&-2:f._visibility|1,E&&(p===null||Z||ma||Mn||nc(l)),p=null,f=l;;){if(f.tag===5||f.tag===26){if(p===null){Z=p=f;try{if(A=Z.stateNode,E)z=A.style,typeof z.setProperty=="function"?z.setProperty("display","none","important"):z.display="none";else{j=Z.stateNode;var Ee=Z.memoizedProps.style,de=Ee!=null&&Ee.hasOwnProperty("display")?Ee.display:null;j.style.display=de==null||typeof de=="boolean"?"":(""+de).trim()}}catch(he){Gt(Z,Z.return,he)}}}else if(f.tag===6){if(p===null){Z=f;try{Z.stateNode.nodeValue=E?"":Z.memoizedProps}catch(he){Gt(Z,Z.return,he)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===l)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break e;for(;f.sibling===null;){if(f.return===null||f.return===l)break e;p===f&&(p=null),f=f.return}p===f&&(p=null),f.sibling.return=f.return,f=f.sibling}v&4&&(v=l.updateQueue,v!==null&&(p=v.retryQueue,p!==null&&(v.retryQueue=null,sS(l,p))));break;case 19:Si(f,l),xi(l),v&4&&(v=l.updateQueue,v!==null&&(l.updateQueue=null,sS(l,v)));break;case 30:break;case 21:break;default:Si(f,l),xi(l)}}function xi(l){var f=l.flags;if(f&2){try{for(var p,v=l.return;v!==null;){if(YU(v)){p=v;break}v=v.return}if(p==null)throw Error(r(160));switch(p.tag){case 27:var E=p.stateNode,A=rS(l);jv(l,A,E);break;case 5:var z=p.stateNode;p.flags&32&&(Qi(z,""),p.flags&=-33);var j=rS(l);jv(l,j,z);break;case 3:case 4:var Z=p.stateNode.containerInfo,fe=rS(l);iS(l,fe,Z);break;default:throw Error(r(161))}}catch(be){Gt(l,l.return,be)}l.flags&=-3}f&4096&&(l.flags&=-4097)}function rq(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var f=l;rq(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),l=l.sibling}}function wl(l,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)QU(l,f.alternate,f),f=f.sibling}function nc(l){for(l=l.child;l!==null;){var f=l;switch(f.tag){case 0:case 11:case 14:case 15:_l(4,f,f.return),nc(f);break;case 1:Ts(f,f.return);var p=f.stateNode;typeof p.componentWillUnmount=="function"&&KU(f,f.return,p),nc(f);break;case 27:om(f.stateNode);case 26:case 5:Ts(f,f.return),nc(f);break;case 22:f.memoizedState===null&&nc(f);break;case 30:nc(f);break;default:nc(f)}l=l.sibling}}function bl(l,f,p){for(p=p&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var v=f.alternate,E=l,A=f,z=A.flags;switch(A.tag){case 0:case 11:case 15:bl(E,A,p),Yp(4,A);break;case 1:if(bl(E,A,p),v=A,E=v.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(fe){Gt(v,v.return,fe)}if(v=A,E=v.updateQueue,E!==null){var j=v.stateNode;try{var Z=E.shared.hiddenCallbacks;if(Z!==null)for(E.shared.hiddenCallbacks=null,E=0;E<Z.length;E++)MV(Z[E],j)}catch(fe){Gt(v,v.return,fe)}}p&&z&64&&jU(A),Jp(A,A.return);break;case 27:JU(A);case 26:case 5:bl(E,A,p),p&&v===null&&z&4&&WU(A),Jp(A,A.return);break;case 12:bl(E,A,p);break;case 13:bl(E,A,p),p&&z&4&&tq(E,A);break;case 22:A.memoizedState===null&&bl(E,A,p),Jp(A,A.return);break;case 30:break;default:bl(E,A,p)}f=f.sibling}}function aS(l,f){var p=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),l=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(l=f.memoizedState.cachePool.pool),l!==p&&(l!=null&&l.refCount++,p!=null&&Op(p))}function lS(l,f){l=null,f.alternate!==null&&(l=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==l&&(f.refCount++,l!=null&&Op(l))}function Es(l,f,p,v){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)iq(l,f,p,v),f=f.sibling}function iq(l,f,p,v){var E=f.flags;switch(f.tag){case 0:case 11:case 15:Es(l,f,p,v),E&2048&&Yp(9,f);break;case 1:Es(l,f,p,v);break;case 3:Es(l,f,p,v),E&2048&&(l=null,f.alternate!==null&&(l=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==l&&(f.refCount++,l!=null&&Op(l)));break;case 12:if(E&2048){Es(l,f,p,v),l=f.stateNode;try{var A=f.memoizedProps,z=A.id,j=A.onPostCommit;typeof j=="function"&&j(z,f.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(Z){Gt(f,f.return,Z)}}else Es(l,f,p,v);break;case 13:Es(l,f,p,v);break;case 23:break;case 22:A=f.stateNode,z=f.alternate,f.memoizedState!==null?A._visibility&2?Es(l,f,p,v):Xp(l,f):A._visibility&2?Es(l,f,p,v):(A._visibility|=2,Xf(l,f,p,v,(f.subtreeFlags&10256)!==0)),E&2048&&aS(z,f);break;case 24:Es(l,f,p,v),E&2048&&lS(f.alternate,f);break;default:Es(l,f,p,v)}}function Xf(l,f,p,v,E){for(E=E&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var A=l,z=f,j=p,Z=v,fe=z.flags;switch(z.tag){case 0:case 11:case 15:Xf(A,z,j,Z,E),Yp(8,z);break;case 23:break;case 22:var be=z.stateNode;z.memoizedState!==null?be._visibility&2?Xf(A,z,j,Z,E):Xp(A,z):(be._visibility|=2,Xf(A,z,j,Z,E)),E&&fe&2048&&aS(z.alternate,z);break;case 24:Xf(A,z,j,Z,E),E&&fe&2048&&lS(z.alternate,z);break;default:Xf(A,z,j,Z,E)}f=f.sibling}}function Xp(l,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var p=l,v=f,E=v.flags;switch(v.tag){case 22:Xp(p,v),E&2048&&aS(v.alternate,v);break;case 24:Xp(p,v),E&2048&&lS(v.alternate,v);break;default:Xp(p,v)}f=f.sibling}}var Qp=8192;function Qf(l){if(l.subtreeFlags&Qp)for(l=l.child;l!==null;)oq(l),l=l.sibling}function oq(l){switch(l.tag){case 26:Qf(l),l.flags&Qp&&l.memoizedState!==null&&Zse(Vo,l.memoizedState,l.memoizedProps);break;case 5:Qf(l);break;case 3:case 4:var f=Vo;Vo=o_(l.stateNode.containerInfo),Qf(l),Vo=f;break;case 22:l.memoizedState===null&&(f=l.alternate,f!==null&&f.memoizedState!==null?(f=Qp,Qp=16777216,Qf(l),Qp=f):Qf(l));break;default:Qf(l)}}function sq(l){var f=l.alternate;if(f!==null&&(l=f.child,l!==null)){f.child=null;do f=l.sibling,l.sibling=null,l=f;while(l!==null)}}function Zp(l){var f=l.deletions;if((l.flags&16)!==0){if(f!==null)for(var p=0;p<f.length;p++){var v=f[p];ar=v,lq(v,l)}sq(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)aq(l),l=l.sibling}function aq(l){switch(l.tag){case 0:case 11:case 15:Zp(l),l.flags&2048&&_l(9,l,l.return);break;case 3:Zp(l);break;case 12:Zp(l);break;case 22:var f=l.stateNode;l.memoizedState!==null&&f._visibility&2&&(l.return===null||l.return.tag!==13)?(f._visibility&=-3,Kv(l)):Zp(l);break;default:Zp(l)}}function Kv(l){var f=l.deletions;if((l.flags&16)!==0){if(f!==null)for(var p=0;p<f.length;p++){var v=f[p];ar=v,lq(v,l)}sq(l)}for(l=l.child;l!==null;){switch(f=l,f.tag){case 0:case 11:case 15:_l(8,f,f.return),Kv(f);break;case 22:p=f.stateNode,p._visibility&2&&(p._visibility&=-3,Kv(f));break;default:Kv(f)}l=l.sibling}}function lq(l,f){for(;ar!==null;){var p=ar;switch(p.tag){case 0:case 11:case 15:_l(8,p,f);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var v=p.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:Op(p.memoizedState.cache)}if(v=p.child,v!==null)v.return=p,ar=v;else e:for(p=l;ar!==null;){v=ar;var E=v.sibling,A=v.return;if(ZU(v),v===p){ar=null;break e}if(E!==null){E.return=A,ar=E;break e}ar=A}}}var mse={getCacheForType:function(l){var f=Or(Yn),p=f.data.get(l);return p===void 0&&(p=l(),f.data.set(l,p)),p}},gse=typeof WeakMap=="function"?WeakMap:Map,kt=0,Wt=null,dt=null,bt=0,Ot=0,Ai=null,Tl=!1,Zf=!1,uS=!1,ya=0,Tn=0,El=0,rc=0,cS=0,ao=0,ed=0,em=null,li=null,fS=!1,dS=0,Wv=1/0,Yv=null,Sl=null,Sr=0,xl=null,td=null,nd=0,hS=0,pS=null,uq=null,tm=0,mS=null;function Ci(){if((kt&2)!==0&&bt!==0)return bt&-bt;if(K.T!==null){var l=zf;return l!==0?l:TS()}return as()}function cq(){ao===0&&(ao=(bt&536870912)===0||It?Js():536870912);var l=so.current;return l!==null&&(l.flags|=32),ao}function Ii(l,f,p){(l===Wt&&(Ot===2||Ot===9)||l.cancelPendingCommit!==null)&&(rd(l,0),Al(l,bt,ao,!1)),ji(l,p),((kt&2)===0||l!==Wt)&&(l===Wt&&((kt&2)===0&&(rc|=p),Tn===4&&Al(l,bt,ao,!1)),Ss(l))}function fq(l,f,p){if((kt&6)!==0)throw Error(r(327));var v=!p&&(f&124)===0&&(f&l.expiredLanes)===0||rr(l,f),E=v?_se(l,f):vS(l,f,!0),A=v;do{if(E===0){Zf&&!v&&Al(l,f,0,!1);break}else{if(p=l.current.alternate,A&&!yse(p)){E=vS(l,f,!1),A=!1;continue}if(E===2){if(A=f,l.errorRecoveryDisabledLanes&A)var z=0;else z=l.pendingLanes&-536870913,z=z!==0?z:z&536870912?536870912:0;if(z!==0){f=z;e:{var j=l;E=em;var Z=j.current.memoizedState.isDehydrated;if(Z&&(rd(j,z).flags|=256),z=vS(j,z,!1),z!==2){if(uS&&!Z){j.errorRecoveryDisabledLanes|=A,rc|=A,E=4;break e}A=li,li=E,A!==null&&(li===null?li=A:li.push.apply(li,A))}E=z}if(A=!1,E!==2)continue}}if(E===1){rd(l,0),Al(l,f,0,!0);break}e:{switch(v=l,A=E,A){case 0:case 1:throw Error(r(345));case 4:if((f&4194048)!==f)break;case 6:Al(v,f,ao,!Tl);break e;case 2:li=null;break;case 3:case 5:break;default:throw Error(r(329))}if((f&62914560)===f&&(E=dS+300-Pe(),10<E)){if(Al(v,f,ao,!Tl),kr(v,0,!0)!==0)break e;v.timeoutHandle=Fq(dq.bind(null,v,p,li,Yv,fS,f,ao,rc,ed,Tl,A,2,-0,0),E);break e}dq(v,p,li,Yv,fS,f,ao,rc,ed,Tl,A,0,-0,0)}}break}while(!0);Ss(l)}function dq(l,f,p,v,E,A,z,j,Z,fe,be,Ee,de,he){if(l.timeoutHandle=-1,Ee=f.subtreeFlags,(Ee&8192||(Ee&16785408)===16785408)&&(lm={stylesheets:null,count:0,unsuspend:Qse},oq(f),Ee=eae(),Ee!==null)){l.cancelPendingCommit=Ee(_q.bind(null,l,f,A,p,v,E,z,j,Z,be,1,de,he)),Al(l,A,z,!fe);return}_q(l,f,A,p,v,E,z,j,Z)}function yse(l){for(var f=l;;){var p=f.tag;if((p===0||p===11||p===15)&&f.flags&16384&&(p=f.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var v=0;v<p.length;v++){var E=p[v],A=E.getSnapshot;E=E.value;try{if(!Ti(A(),E))return!1}catch{return!1}}if(p=f.child,f.subtreeFlags&16384&&p!==null)p.return=f,f=p;else{if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Al(l,f,p,v){f&=~cS,f&=~rc,l.suspendedLanes|=f,l.pingedLanes&=~f,v&&(l.warmLanes|=f),v=l.expirationTimes;for(var E=f;0<E;){var A=31-yt(E),z=1<<A;v[A]=-1,E&=~z}p!==0&&Ki(l,p,f)}function Jv(){return(kt&6)===0?(nm(0),!1):!0}function gS(){if(dt!==null){if(Ot===0)var l=dt.return;else l=dt,ua=Xu=null,DE(l),Yf=null,jp=0,l=dt;for(;l!==null;)GU(l.alternate,l),l=l.return;dt=null}}function rd(l,f){var p=l.timeoutHandle;p!==-1&&(l.timeoutHandle=-1,Ose(p)),p=l.cancelPendingCommit,p!==null&&(l.cancelPendingCommit=null,p()),gS(),Wt=l,dt=p=sa(l.current,null),bt=f,Ot=0,Ai=null,Tl=!1,Zf=rr(l,f),uS=!1,ed=ao=cS=rc=El=Tn=0,li=em=null,fS=!1,(f&8)!==0&&(f|=f&32);var v=l.entangledLanes;if(v!==0)for(l=l.entanglements,v&=f;0<v;){var E=31-yt(v),A=1<<E;f|=l[E],v&=~A}return ya=f,vv(),p}function hq(l,f){ut=null,K.H=Vv,f===Vp||f===Cv?(f=PV(),Ot=3):f===CV?(f=PV(),Ot=4):Ot=f===NU?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,Ai=f,dt===null&&(Tn=1,$v(l,no(f,l.current)))}function pq(){var l=K.H;return K.H=Vv,l===null?Vv:l}function mq(){var l=K.A;return K.A=mse,l}function yS(){Tn=4,Tl||(bt&4194048)!==bt&&so.current!==null||(Zf=!0),(El&134217727)===0&&(rc&134217727)===0||Wt===null||Al(Wt,bt,ao,!1)}function vS(l,f,p){var v=kt;kt|=2;var E=pq(),A=mq();(Wt!==l||bt!==f)&&(Yv=null,rd(l,f)),f=!1;var z=Tn;e:do try{if(Ot!==0&&dt!==null){var j=dt,Z=Ai;switch(Ot){case 8:gS(),z=6;break e;case 3:case 2:case 9:case 6:so.current===null&&(f=!0);var fe=Ot;if(Ot=0,Ai=null,id(l,j,Z,fe),p&&Zf){z=0;break e}break;default:fe=Ot,Ot=0,Ai=null,id(l,j,Z,fe)}}vse(),z=Tn;break}catch(be){hq(l,be)}while(!0);return f&&l.shellSuspendCounter++,ua=Xu=null,kt=v,K.H=E,K.A=A,dt===null&&(Wt=null,bt=0,vv()),z}function vse(){for(;dt!==null;)gq(dt)}function _se(l,f){var p=kt;kt|=2;var v=pq(),E=mq();Wt!==l||bt!==f?(Yv=null,Wv=Pe()+500,rd(l,f)):Zf=rr(l,f);e:do try{if(Ot!==0&&dt!==null){f=dt;var A=Ai;t:switch(Ot){case 1:Ot=0,Ai=null,id(l,f,A,1);break;case 2:case 9:if(IV(A)){Ot=0,Ai=null,yq(f);break}f=function(){Ot!==2&&Ot!==9||Wt!==l||(Ot=7),Ss(l)},A.then(f,f);break e;case 3:Ot=7;break e;case 4:Ot=5;break e;case 7:IV(A)?(Ot=0,Ai=null,yq(f)):(Ot=0,Ai=null,id(l,f,A,7));break;case 5:var z=null;switch(dt.tag){case 26:z=dt.memoizedState;case 5:case 27:var j=dt;if(!z||Qq(z)){Ot=0,Ai=null;var Z=j.sibling;if(Z!==null)dt=Z;else{var fe=j.return;fe!==null?(dt=fe,Xv(fe)):dt=null}break t}}Ot=0,Ai=null,id(l,f,A,5);break;case 6:Ot=0,Ai=null,id(l,f,A,6);break;case 8:gS(),Tn=6;break e;default:throw Error(r(462))}}wse();break}catch(be){hq(l,be)}while(!0);return ua=Xu=null,K.H=v,K.A=E,kt=p,dt!==null?0:(Wt=null,bt=0,vv(),Tn)}function wse(){for(;dt!==null&&!Le();)gq(dt)}function gq(l){var f=zU(l.alternate,l,ya);l.memoizedProps=l.pendingProps,f===null?Xv(l):dt=f}function yq(l){var f=l,p=f.alternate;switch(f.tag){case 15:case 0:f=VU(p,f,f.pendingProps,f.type,void 0,bt);break;case 11:f=VU(p,f,f.pendingProps,f.type.render,f.ref,bt);break;case 5:DE(f);default:GU(p,f),f=dt=vV(f,ya),f=zU(p,f,ya)}l.memoizedProps=l.pendingProps,f===null?Xv(l):dt=f}function id(l,f,p,v){ua=Xu=null,DE(f),Yf=null,jp=0;var E=f.return;try{if(use(l,E,f,p,bt)){Tn=1,$v(l,no(p,l.current)),dt=null;return}}catch(A){if(E!==null)throw dt=E,A;Tn=1,$v(l,no(p,l.current)),dt=null;return}f.flags&32768?(It||v===1?l=!0:Zf||(bt&536870912)!==0?l=!1:(Tl=l=!0,(v===2||v===9||v===3||v===6)&&(v=so.current,v!==null&&v.tag===13&&(v.flags|=16384))),vq(f,l)):Xv(f)}function Xv(l){var f=l;do{if((f.flags&32768)!==0){vq(f,Tl);return}l=f.return;var p=fse(f.alternate,f,ya);if(p!==null){dt=p;return}if(f=f.sibling,f!==null){dt=f;return}dt=f=l}while(f!==null);Tn===0&&(Tn=5)}function vq(l,f){do{var p=dse(l.alternate,l);if(p!==null){p.flags&=32767,dt=p;return}if(p=l.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!f&&(l=l.sibling,l!==null)){dt=l;return}dt=l=p}while(l!==null);Tn=6,dt=null}function _q(l,f,p,v,E,A,z,j,Z){l.cancelPendingCommit=null;do Qv();while(Sr!==0);if((kt&6)!==0)throw Error(r(327));if(f!==null){if(f===l.current)throw Error(r(177));if(A=f.lanes|f.childLanes,A|=lE,_i(l,p,A,z,j,Z),l===Wt&&(dt=Wt=null,bt=0),td=f,xl=l,nd=p,hS=A,pS=E,uq=v,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,Sse(Rn,function(){return Sq(),null})):(l.callbackNode=null,l.callbackPriority=0),v=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||v){v=K.T,K.T=null,E=Q.p,Q.p=2,z=kt,kt|=4;try{hse(l,f,p)}finally{kt=z,Q.p=E,K.T=v}}Sr=1,wq(),bq(),Tq()}}function wq(){if(Sr===1){Sr=0;var l=xl,f=td,p=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||p){p=K.T,K.T=null;var v=Q.p;Q.p=2;var E=kt;kt|=4;try{nq(f,l);var A=PS,z=lV(l.containerInfo),j=A.focusedElem,Z=A.selectionRange;if(z!==j&&j&&j.ownerDocument&&aV(j.ownerDocument.documentElement,j)){if(Z!==null&&rE(j)){var fe=Z.start,be=Z.end;if(be===void 0&&(be=fe),"selectionStart"in j)j.selectionStart=fe,j.selectionEnd=Math.min(be,j.value.length);else{var Ee=j.ownerDocument||document,de=Ee&&Ee.defaultView||window;if(de.getSelection){var he=de.getSelection(),rt=j.textContent.length,et=Math.min(Z.start,rt),zt=Z.end===void 0?et:Math.min(Z.end,rt);!he.extend&&et>zt&&(z=zt,zt=et,et=z);var se=sV(j,et),ie=sV(j,zt);if(se&&ie&&(he.rangeCount!==1||he.anchorNode!==se.node||he.anchorOffset!==se.offset||he.focusNode!==ie.node||he.focusOffset!==ie.offset)){var ce=Ee.createRange();ce.setStart(se.node,se.offset),he.removeAllRanges(),et>zt?(he.addRange(ce),he.extend(ie.node,ie.offset)):(ce.setEnd(ie.node,ie.offset),he.addRange(ce))}}}}for(Ee=[],he=j;he=he.parentNode;)he.nodeType===1&&Ee.push({element:he,left:he.scrollLeft,top:he.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<Ee.length;j++){var Te=Ee[j];Te.element.scrollLeft=Te.left,Te.element.scrollTop=Te.top}}c_=!!RS,PS=RS=null}finally{kt=E,Q.p=v,K.T=p}}l.current=f,Sr=2}}function bq(){if(Sr===2){Sr=0;var l=xl,f=td,p=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||p){p=K.T,K.T=null;var v=Q.p;Q.p=2;var E=kt;kt|=4;try{QU(l,f.alternate,f)}finally{kt=E,Q.p=v,K.T=p}}Sr=3}}function Tq(){if(Sr===4||Sr===3){Sr=0,st();var l=xl,f=td,p=nd,v=uq;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?Sr=5:(Sr=0,td=xl=null,Eq(l,l.pendingLanes));var E=l.pendingLanes;if(E===0&&(Sl=null),al(p),f=f.stateNode,We&&typeof We.onCommitFiberRoot=="function")try{We.onCommitFiberRoot(He,f,void 0,(f.current.flags&128)===128)}catch{}if(v!==null){f=K.T,E=Q.p,Q.p=2,K.T=null;try{for(var A=l.onRecoverableError,z=0;z<v.length;z++){var j=v[z];A(j.value,{componentStack:j.stack})}}finally{K.T=f,Q.p=E}}(nd&3)!==0&&Qv(),Ss(l),E=l.pendingLanes,(p&4194090)!==0&&(E&42)!==0?l===mS?tm++:(tm=0,mS=l):tm=0,nm(0)}}function Eq(l,f){(l.pooledCacheLanes&=f)===0&&(f=l.pooledCache,f!=null&&(l.pooledCache=null,Op(f)))}function Qv(l){return wq(),bq(),Tq(),Sq()}function Sq(){if(Sr!==5)return!1;var l=xl,f=hS;hS=0;var p=al(nd),v=K.T,E=Q.p;try{Q.p=32>p?32:p,K.T=null,p=pS,pS=null;var A=xl,z=nd;if(Sr=0,td=xl=null,nd=0,(kt&6)!==0)throw Error(r(331));var j=kt;if(kt|=4,aq(A.current),iq(A,A.current,z,p),kt=j,nm(0,!1),We&&typeof We.onPostCommitFiberRoot=="function")try{We.onPostCommitFiberRoot(He,A)}catch{}return!0}finally{Q.p=E,K.T=v,Eq(l,f)}}function xq(l,f,p){f=no(p,f),f=KE(l.stateNode,f,2),l=ml(l,f,2),l!==null&&(ji(l,2),Ss(l))}function Gt(l,f,p){if(l.tag===3)xq(l,l,p);else for(;f!==null;){if(f.tag===3){xq(f,l,p);break}else if(f.tag===1){var v=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Sl===null||!Sl.has(v))){l=no(p,l),p=RU(2),v=ml(f,p,2),v!==null&&(PU(p,v,f,l),ji(v,2),Ss(v));break}}f=f.return}}function _S(l,f,p){var v=l.pingCache;if(v===null){v=l.pingCache=new gse;var E=new Set;v.set(f,E)}else E=v.get(f),E===void 0&&(E=new Set,v.set(f,E));E.has(p)||(uS=!0,E.add(p),l=bse.bind(null,l,f,p),f.then(l,l))}function bse(l,f,p){var v=l.pingCache;v!==null&&v.delete(f),l.pingedLanes|=l.suspendedLanes&p,l.warmLanes&=~p,Wt===l&&(bt&p)===p&&(Tn===4||Tn===3&&(bt&62914560)===bt&&300>Pe()-dS?(kt&2)===0&&rd(l,0):cS|=p,ed===bt&&(ed=0)),Ss(l)}function Aq(l,f){f===0&&(f=Mo()),l=qf(l,f),l!==null&&(ji(l,f),Ss(l))}function Tse(l){var f=l.memoizedState,p=0;f!==null&&(p=f.retryLane),Aq(l,p)}function Ese(l,f){var p=0;switch(l.tag){case 13:var v=l.stateNode,E=l.memoizedState;E!==null&&(p=E.retryLane);break;case 19:v=l.stateNode;break;case 22:v=l.stateNode._retryCache;break;default:throw Error(r(314))}v!==null&&v.delete(f),Aq(l,p)}function Sse(l,f){return Ze(l,f)}var Zv=null,od=null,wS=!1,e_=!1,bS=!1,ic=0;function Ss(l){l!==od&&l.next===null&&(od===null?Zv=od=l:od=od.next=l),e_=!0,wS||(wS=!0,Ase())}function nm(l,f){if(!bS&&e_){bS=!0;do for(var p=!1,v=Zv;v!==null;){if(l!==0){var E=v.pendingLanes;if(E===0)var A=0;else{var z=v.suspendedLanes,j=v.pingedLanes;A=(1<<31-yt(42|l)+1)-1,A&=E&~(z&~j),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(p=!0,Pq(v,A))}else A=bt,A=kr(v,v===Wt?A:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(A&3)===0||rr(v,A)||(p=!0,Pq(v,A));v=v.next}while(p);bS=!1}}function xse(){Cq()}function Cq(){e_=wS=!1;var l=0;ic!==0&&(kse()&&(l=ic),ic=0);for(var f=Pe(),p=null,v=Zv;v!==null;){var E=v.next,A=Iq(v,f);A===0?(v.next=null,p===null?Zv=E:p.next=E,E===null&&(od=p)):(p=v,(l!==0||(A&3)!==0)&&(e_=!0)),v=E}nm(l)}function Iq(l,f){for(var p=l.suspendedLanes,v=l.pingedLanes,E=l.expirationTimes,A=l.pendingLanes&-62914561;0<A;){var z=31-yt(A),j=1<<z,Z=E[z];Z===-1?((j&p)===0||(j&v)!==0)&&(E[z]=No(j,f)):Z<=f&&(l.expiredLanes|=j),A&=~j}if(f=Wt,p=bt,p=kr(l,l===f?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),v=l.callbackNode,p===0||l===f&&(Ot===2||Ot===9)||l.cancelPendingCommit!==null)return v!==null&&v!==null&&Ue(v),l.callbackNode=null,l.callbackPriority=0;if((p&3)===0||rr(l,p)){if(f=p&-p,f===l.callbackPriority)return f;switch(v!==null&&Ue(v),al(p)){case 2:case 8:p=In;break;case 32:p=Rn;break;case 268435456:p=Me;break;default:p=Rn}return v=Rq.bind(null,l),p=Ze(p,v),l.callbackPriority=f,l.callbackNode=p,f}return v!==null&&v!==null&&Ue(v),l.callbackPriority=2,l.callbackNode=null,2}function Rq(l,f){if(Sr!==0&&Sr!==5)return l.callbackNode=null,l.callbackPriority=0,null;var p=l.callbackNode;if(Qv()&&l.callbackNode!==p)return null;var v=bt;return v=kr(l,l===Wt?v:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),v===0?null:(fq(l,v,f),Iq(l,Pe()),l.callbackNode!=null&&l.callbackNode===p?Rq.bind(null,l):null)}function Pq(l,f){if(Qv())return null;fq(l,f,!0)}function Ase(){Lse(function(){(kt&6)!==0?Ze(Rt,xse):Cq()})}function TS(){return ic===0&&(ic=Js()),ic}function Nq(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Cf(""+l)}function Mq(l,f){var p=f.ownerDocument.createElement("input");return p.name=f.name,p.value=f.value,l.id&&p.setAttribute("form",l.id),f.parentNode.insertBefore(p,f),l=new FormData(l),p.parentNode.removeChild(p),l}function Cse(l,f,p,v,E){if(f==="submit"&&p&&p.stateNode===E){var A=Nq((E[wn]||null).action),z=v.submitter;z&&(f=(f=z[wn]||null)?Nq(f.formAction):z.getAttribute("formAction"),f!==null&&(A=f,z=null));var j=new If("action","action",null,v,E);l.push({event:j,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(ic!==0){var Z=z?Mq(E,z):new FormData(E);$E(p,{pending:!0,data:Z,method:E.method,action:A},null,Z)}}else typeof A=="function"&&(j.preventDefault(),Z=z?Mq(E,z):new FormData(E),$E(p,{pending:!0,data:Z,method:E.method,action:A},A,Z))},currentTarget:E}]})}}for(var ES=0;ES<aE.length;ES++){var SS=aE[ES],Ise=SS.toLowerCase(),Rse=SS[0].toUpperCase()+SS.slice(1);Lo(Ise,"on"+Rse)}Lo(fV,"onAnimationEnd"),Lo(dV,"onAnimationIteration"),Lo(hV,"onAnimationStart"),Lo("dblclick","onDoubleClick"),Lo("focusin","onFocus"),Lo("focusout","onBlur"),Lo(joe,"onTransitionRun"),Lo(Koe,"onTransitionStart"),Lo(Woe,"onTransitionCancel"),Lo(pV,"onTransitionEnd"),Do("onMouseEnter",["mouseout","mouseover"]),Do("onMouseLeave",["mouseout","mouseover"]),Do("onPointerEnter",["pointerout","pointerover"]),Do("onPointerLeave",["pointerout","pointerover"]),wi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),wi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),wi("onBeforeInput",["compositionend","keypress","textInput","paste"]),wi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),wi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),wi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pse=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(rm));function Dq(l,f){f=(f&4)!==0;for(var p=0;p<l.length;p++){var v=l[p],E=v.event;v=v.listeners;e:{var A=void 0;if(f)for(var z=v.length-1;0<=z;z--){var j=v[z],Z=j.instance,fe=j.currentTarget;if(j=j.listener,Z!==A&&E.isPropagationStopped())break e;A=j,E.currentTarget=fe;try{A(E)}catch(be){Bv(be)}E.currentTarget=null,A=Z}else for(z=0;z<v.length;z++){if(j=v[z],Z=j.instance,fe=j.currentTarget,j=j.listener,Z!==A&&E.isPropagationStopped())break e;A=j,E.currentTarget=fe;try{A(E)}catch(be){Bv(be)}E.currentTarget=null,A=Z}}}}function ht(l,f){var p=f[Pu];p===void 0&&(p=f[Pu]=new Set);var v=l+"__bubble";p.has(v)||(kq(f,l,2,!1),p.add(v))}function xS(l,f,p){var v=0;f&&(v|=4),kq(p,l,v,f)}var t_="_reactListening"+Math.random().toString(36).slice(2);function AS(l){if(!l[t_]){l[t_]=!0,Nu.forEach(function(p){p!=="selectionchange"&&(Pse.has(p)||xS(p,!1,l),xS(p,!0,l))});var f=l.nodeType===9?l:l.ownerDocument;f===null||f[t_]||(f[t_]=!0,xS("selectionchange",!1,f))}}function kq(l,f,p,v){switch(i4(f)){case 2:var E=rae;break;case 8:E=iae;break;default:E=FS}p=E.bind(null,f,p,l),E=void 0,!eo||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(E=!0),v?E!==void 0?l.addEventListener(f,p,{capture:!0,passive:E}):l.addEventListener(f,p,!0):E!==void 0?l.addEventListener(f,p,{passive:E}):l.addEventListener(f,p,!1)}function CS(l,f,p,v,E){var A=v;if((f&1)===0&&(f&2)===0&&v!==null)e:for(;;){if(v===null)return;var z=v.tag;if(z===3||z===4){var j=v.stateNode.containerInfo;if(j===E)break;if(z===4)for(z=v.return;z!==null;){var Z=z.tag;if((Z===3||Z===4)&&z.stateNode.containerInfo===E)return;z=z.return}for(;j!==null;){if(z=Wi(j),z===null)return;if(Z=z.tag,Z===5||Z===6||Z===26||Z===27){v=A=z;continue e}j=j.parentNode}}v=v.return}rv(function(){var fe=A,be=Zi(p),Ee=[];e:{var de=mV.get(l);if(de!==void 0){var he=If,rt=l;switch(l){case"keypress":if(ms(p)===0)break e;case"keydown":case"keyup":he=kf;break;case"focusin":rt="focus",he=Nf;break;case"focusout":rt="blur",he=Nf;break;case"beforeblur":case"afterblur":he=Nf;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=to;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=ZT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=fv;break;case fV:case dV:case hV:he=Mf;break;case pV:he=hv;break;case"scroll":case"scrollend":he=iv;break;case"wheel":he=Of;break;case"copy":case"cut":case"paste":he=Df;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=Cp;break;case"toggle":case"beforetoggle":he=mv}var et=(f&4)!==0,zt=!et&&(l==="scroll"||l==="scrollend"),se=et?de!==null?de+"Capture":null:de;et=[];for(var ie=fe,ce;ie!==null;){var Te=ie;if(ce=Te.stateNode,Te=Te.tag,Te!==5&&Te!==26&&Te!==27||ce===null||se===null||(Te=Vu(ie,se),Te!=null&&et.push(im(ie,Te,ce))),zt)break;ie=ie.return}0<et.length&&(de=new he(de,rt,null,p,be),Ee.push({event:de,listeners:et}))}}if((f&7)===0){e:{if(de=l==="mouseover"||l==="pointerover",he=l==="mouseout"||l==="pointerout",de&&p!==ea&&(rt=p.relatedTarget||p.fromElement)&&(Wi(rt)||rt[oi]))break e;if((he||de)&&(de=be.window===be?be:(de=be.ownerDocument)?de.defaultView||de.parentWindow:window,he?(rt=p.relatedTarget||p.toElement,he=fe,rt=rt?Wi(rt):null,rt!==null&&(zt=o(rt),et=rt.tag,rt!==zt||et!==5&&et!==27&&et!==6)&&(rt=null)):(he=null,rt=fe),he!==rt)){if(et=to,Te="onMouseLeave",se="onMouseEnter",ie="mouse",(l==="pointerout"||l==="pointerover")&&(et=Cp,Te="onPointerLeave",se="onPointerEnter",ie="pointer"),zt=he==null?de:Ji(he),ce=rt==null?de:Ji(rt),de=new et(Te,ie+"leave",he,p,be),de.target=zt,de.relatedTarget=ce,Te=null,Wi(be)===fe&&(et=new et(se,ie+"enter",rt,p,be),et.target=ce,et.relatedTarget=zt,Te=et),zt=Te,he&&rt)t:{for(et=he,se=rt,ie=0,ce=et;ce;ce=sd(ce))ie++;for(ce=0,Te=se;Te;Te=sd(Te))ce++;for(;0<ie-ce;)et=sd(et),ie--;for(;0<ce-ie;)se=sd(se),ce--;for(;ie--;){if(et===se||se!==null&&et===se.alternate)break t;et=sd(et),se=sd(se)}et=null}else et=null;he!==null&&Oq(Ee,de,he,et,!1),rt!==null&&zt!==null&&Oq(Ee,zt,rt,et,!0)}}e:{if(de=fe?Ji(fe):window,he=de.nodeName&&de.nodeName.toLowerCase(),he==="select"||he==="input"&&de.type==="file")var je=eV;else if(Wn(de))if(tV)je=zoe;else{je=Boe;var ct=Foe}else he=de.nodeName,!he||he.toLowerCase()!=="input"||de.type!=="checkbox"&&de.type!=="radio"?fe&&wp(fe.elementType)&&(je=eV):je=$oe;if(je&&(je=je(l,fe))){oa(Ee,je,p,be);break e}ct&&ct(l,de,fe),l==="focusout"&&fe&&de.type==="number"&&fe.memoizedProps.value!=null&&cl(de,"number",de.value)}switch(ct=fe?Ji(fe):window,l){case"focusin":(Wn(ct)||ct.contentEditable==="true")&&(Lf=ct,iE=fe,Pp=null);break;case"focusout":Pp=iE=Lf=null;break;case"mousedown":oE=!0;break;case"contextmenu":case"mouseup":case"dragend":oE=!1,uV(Ee,p,be);break;case"selectionchange":if(Goe)break;case"keydown":case"keyup":uV(Ee,p,be)}var Je;if(vs)e:{switch(l){case"compositionstart":var nt="onCompositionStart";break e;case"compositionend":nt="onCompositionEnd";break e;case"compositionupdate":nt="onCompositionUpdate";break e}nt=void 0}else _t?me(l,p)&&(nt="onCompositionEnd"):l==="keydown"&&p.keyCode===229&&(nt="onCompositionStart");nt&&(B&&p.locale!=="ko"&&(_t||nt!=="onCompositionStart"?nt==="onCompositionEnd"&&_t&&(Je=Tp()):(ps=be,fl="value"in ps?ps.value:ps.textContent,_t=!0)),ct=n_(fe,nt),0<ct.length&&(nt=new xp(nt,l,null,p,be),Ee.push({event:nt,listeners:ct}),Je?nt.data=Je:(Je=Ne(p),Je!==null&&(nt.data=Je)))),(Je=k?Kn(l,p):wt(l,p))&&(nt=n_(fe,"onBeforeInput"),0<nt.length&&(ct=new xp("onBeforeInput","beforeinput",null,p,be),Ee.push({event:ct,listeners:nt}),ct.data=Je)),Cse(Ee,l,fe,p,be)}Dq(Ee,f)})}function im(l,f,p){return{instance:l,listener:f,currentTarget:p}}function n_(l,f){for(var p=f+"Capture",v=[];l!==null;){var E=l,A=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||A===null||(E=Vu(l,p),E!=null&&v.unshift(im(l,E,A)),E=Vu(l,f),E!=null&&v.push(im(l,E,A))),l.tag===3)return v;l=l.return}return[]}function sd(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function Oq(l,f,p,v,E){for(var A=f._reactName,z=[];p!==null&&p!==v;){var j=p,Z=j.alternate,fe=j.stateNode;if(j=j.tag,Z!==null&&Z===v)break;j!==5&&j!==26&&j!==27||fe===null||(Z=fe,E?(fe=Vu(p,A),fe!=null&&z.unshift(im(p,fe,Z))):E||(fe=Vu(p,A),fe!=null&&z.push(im(p,fe,Z)))),p=p.return}z.length!==0&&l.push({event:f,listeners:z})}var Nse=/\r\n?/g,Mse=/\u0000|\uFFFD/g;function Lq(l){return(typeof l=="string"?l:""+l).replace(Nse,`
`).replace(Mse,"")}function Vq(l,f){return f=Lq(f),Lq(l)===f}function r_(){}function $t(l,f,p,v,E,A){switch(p){case"children":typeof v=="string"?f==="body"||f==="textarea"&&v===""||Qi(l,v):(typeof v=="number"||typeof v=="bigint")&&f!=="body"&&Qi(l,""+v);break;case"className":Xi(l,"class",v);break;case"tabIndex":Xi(l,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":Xi(l,p,v);break;case"style":_p(l,v,A);break;case"data":if(f!=="object"){Xi(l,"data",v);break}case"src":case"href":if(v===""&&(f!=="a"||p!=="href")){l.removeAttribute(p);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){l.removeAttribute(p);break}v=Cf(""+v),l.setAttribute(p,v);break;case"action":case"formAction":if(typeof v=="function"){l.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(p==="formAction"?(f!=="input"&&$t(l,f,"name",E.name,E,null),$t(l,f,"formEncType",E.formEncType,E,null),$t(l,f,"formMethod",E.formMethod,E,null),$t(l,f,"formTarget",E.formTarget,E,null)):($t(l,f,"encType",E.encType,E,null),$t(l,f,"method",E.method,E,null),$t(l,f,"target",E.target,E,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){l.removeAttribute(p);break}v=Cf(""+v),l.setAttribute(p,v);break;case"onClick":v!=null&&(l.onclick=r_);break;case"onScroll":v!=null&&ht("scroll",l);break;case"onScrollEnd":v!=null&&ht("scrollend",l);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(p=v.__html,p!=null){if(E.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"multiple":l.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":l.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){l.removeAttribute("xlink:href");break}p=Cf(""+v),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(p,""+v):l.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(p,""):l.removeAttribute(p);break;case"capture":case"download":v===!0?l.setAttribute(p,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(p,v):l.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?l.setAttribute(p,v):l.removeAttribute(p);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?l.removeAttribute(p):l.setAttribute(p,v);break;case"popover":ht("beforetoggle",l),ht("toggle",l),cs(l,"popover",v);break;case"xlinkActuate":jn(l,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":jn(l,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":jn(l,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":jn(l,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":jn(l,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":jn(l,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":jn(l,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":jn(l,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":jn(l,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":cs(l,"is",v);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=XT.get(p)||p,cs(l,p,v))}}function IS(l,f,p,v,E,A){switch(p){case"style":_p(l,v,A);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(p=v.__html,p!=null){if(E.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"children":typeof v=="string"?Qi(l,v):(typeof v=="number"||typeof v=="bigint")&&Qi(l,""+v);break;case"onScroll":v!=null&&ht("scroll",l);break;case"onScrollEnd":v!=null&&ht("scrollend",l);break;case"onClick":v!=null&&(l.onclick=r_);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ll.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(E=p.endsWith("Capture"),f=p.slice(2,E?p.length-7:void 0),A=l[wn]||null,A=A!=null?A[p]:null,typeof A=="function"&&l.removeEventListener(f,A,E),typeof v=="function")){typeof A!="function"&&A!==null&&(p in l?l[p]=null:l.hasAttribute(p)&&l.removeAttribute(p)),l.addEventListener(f,v,E);break e}p in l?l[p]=v:v===!0?l.setAttribute(p,""):cs(l,p,v)}}}function xr(l,f,p){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ht("error",l),ht("load",l);var v=!1,E=!1,A;for(A in p)if(p.hasOwnProperty(A)){var z=p[A];if(z!=null)switch(A){case"src":v=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:$t(l,f,A,z,p,null)}}E&&$t(l,f,"srcSet",p.srcSet,p,null),v&&$t(l,f,"src",p.src,p,null);return;case"input":ht("invalid",l);var j=A=z=E=null,Z=null,fe=null;for(v in p)if(p.hasOwnProperty(v)){var be=p[v];if(be!=null)switch(v){case"name":E=be;break;case"type":z=be;break;case"checked":Z=be;break;case"defaultChecked":fe=be;break;case"value":A=be;break;case"defaultValue":j=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(r(137,f));break;default:$t(l,f,v,be,p,null)}}ku(l,A,j,Z,fe,z,E,!1),Af(l);return;case"select":ht("invalid",l),v=z=A=null;for(E in p)if(p.hasOwnProperty(E)&&(j=p[E],j!=null))switch(E){case"value":A=j;break;case"defaultValue":z=j;break;case"multiple":v=j;default:$t(l,f,E,j,p,null)}f=A,p=z,l.multiple=!!v,f!=null?Zs(l,!!v,f,!1):p!=null&&Zs(l,!!v,p,!0);return;case"textarea":ht("invalid",l),A=E=v=null;for(z in p)if(p.hasOwnProperty(z)&&(j=p[z],j!=null))switch(z){case"value":v=j;break;case"defaultValue":E=j;break;case"children":A=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(91));break;default:$t(l,f,z,j,p,null)}Ou(l,v,E,A),Af(l);return;case"option":for(Z in p)if(p.hasOwnProperty(Z)&&(v=p[Z],v!=null))switch(Z){case"selected":l.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:$t(l,f,Z,v,p,null)}return;case"dialog":ht("beforetoggle",l),ht("toggle",l),ht("cancel",l),ht("close",l);break;case"iframe":case"object":ht("load",l);break;case"video":case"audio":for(v=0;v<rm.length;v++)ht(rm[v],l);break;case"image":ht("error",l),ht("load",l);break;case"details":ht("toggle",l);break;case"embed":case"source":case"link":ht("error",l),ht("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(fe in p)if(p.hasOwnProperty(fe)&&(v=p[fe],v!=null))switch(fe){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:$t(l,f,fe,v,p,null)}return;default:if(wp(f)){for(be in p)p.hasOwnProperty(be)&&(v=p[be],v!==void 0&&IS(l,f,be,v,p,void 0));return}}for(j in p)p.hasOwnProperty(j)&&(v=p[j],v!=null&&$t(l,f,j,v,p,null))}function Dse(l,f,p,v){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,A=null,z=null,j=null,Z=null,fe=null,be=null;for(he in p){var Ee=p[he];if(p.hasOwnProperty(he)&&Ee!=null)switch(he){case"checked":break;case"value":break;case"defaultValue":Z=Ee;default:v.hasOwnProperty(he)||$t(l,f,he,null,v,Ee)}}for(var de in v){var he=v[de];if(Ee=p[de],v.hasOwnProperty(de)&&(he!=null||Ee!=null))switch(de){case"type":A=he;break;case"name":E=he;break;case"checked":fe=he;break;case"defaultChecked":be=he;break;case"value":z=he;break;case"defaultValue":j=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(r(137,f));break;default:he!==Ee&&$t(l,f,de,he,v,Ee)}}bi(l,z,j,Z,fe,be,A,E);return;case"select":he=z=j=de=null;for(A in p)if(Z=p[A],p.hasOwnProperty(A)&&Z!=null)switch(A){case"value":break;case"multiple":he=Z;default:v.hasOwnProperty(A)||$t(l,f,A,null,v,Z)}for(E in v)if(A=v[E],Z=p[E],v.hasOwnProperty(E)&&(A!=null||Z!=null))switch(E){case"value":de=A;break;case"defaultValue":j=A;break;case"multiple":z=A;default:A!==Z&&$t(l,f,E,A,v,Z)}f=j,p=z,v=he,de!=null?Zs(l,!!p,de,!1):!!v!=!!p&&(f!=null?Zs(l,!!p,f,!0):Zs(l,!!p,p?[]:"",!1));return;case"textarea":he=de=null;for(j in p)if(E=p[j],p.hasOwnProperty(j)&&E!=null&&!v.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:$t(l,f,j,null,v,E)}for(z in v)if(E=v[z],A=p[z],v.hasOwnProperty(z)&&(E!=null||A!=null))switch(z){case"value":de=E;break;case"defaultValue":he=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:E!==A&&$t(l,f,z,E,v,A)}Ft(l,de,he);return;case"option":for(var rt in p)if(de=p[rt],p.hasOwnProperty(rt)&&de!=null&&!v.hasOwnProperty(rt))switch(rt){case"selected":l.selected=!1;break;default:$t(l,f,rt,null,v,de)}for(Z in v)if(de=v[Z],he=p[Z],v.hasOwnProperty(Z)&&de!==he&&(de!=null||he!=null))switch(Z){case"selected":l.selected=de&&typeof de!="function"&&typeof de!="symbol";break;default:$t(l,f,Z,de,v,he)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var et in p)de=p[et],p.hasOwnProperty(et)&&de!=null&&!v.hasOwnProperty(et)&&$t(l,f,et,null,v,de);for(fe in v)if(de=v[fe],he=p[fe],v.hasOwnProperty(fe)&&de!==he&&(de!=null||he!=null))switch(fe){case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(r(137,f));break;default:$t(l,f,fe,de,v,he)}return;default:if(wp(f)){for(var zt in p)de=p[zt],p.hasOwnProperty(zt)&&de!==void 0&&!v.hasOwnProperty(zt)&&IS(l,f,zt,void 0,v,de);for(be in v)de=v[be],he=p[be],!v.hasOwnProperty(be)||de===he||de===void 0&&he===void 0||IS(l,f,be,de,v,he);return}}for(var se in p)de=p[se],p.hasOwnProperty(se)&&de!=null&&!v.hasOwnProperty(se)&&$t(l,f,se,null,v,de);for(Ee in v)de=v[Ee],he=p[Ee],!v.hasOwnProperty(Ee)||de===he||de==null&&he==null||$t(l,f,Ee,de,v,he)}var RS=null,PS=null;function i_(l){return l.nodeType===9?l:l.ownerDocument}function Uq(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function qq(l,f){if(l===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&f==="foreignObject"?0:l}function NS(l,f){return l==="textarea"||l==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var MS=null;function kse(){var l=window.event;return l&&l.type==="popstate"?l===MS?!1:(MS=l,!0):(MS=null,!1)}var Fq=typeof setTimeout=="function"?setTimeout:void 0,Ose=typeof clearTimeout=="function"?clearTimeout:void 0,Bq=typeof Promise=="function"?Promise:void 0,Lse=typeof queueMicrotask=="function"?queueMicrotask:typeof Bq<"u"?function(l){return Bq.resolve(null).then(l).catch(Vse)}:Fq;function Vse(l){setTimeout(function(){throw l})}function Cl(l){return l==="head"}function $q(l,f){var p=f,v=0,E=0;do{var A=p.nextSibling;if(l.removeChild(p),A&&A.nodeType===8)if(p=A.data,p==="/$"){if(0<v&&8>v){p=v;var z=l.ownerDocument;if(p&1&&om(z.documentElement),p&2&&om(z.body),p&4)for(p=z.head,om(p),z=p.firstChild;z;){var j=z.nextSibling,Z=z.nodeName;z[Xs]||Z==="SCRIPT"||Z==="STYLE"||Z==="LINK"&&z.rel.toLowerCase()==="stylesheet"||p.removeChild(z),z=j}}if(E===0){l.removeChild(A),hm(f);return}E--}else p==="$"||p==="$?"||p==="$!"?E++:v=p.charCodeAt(0)-48;else v=0;p=A}while(p);hm(f)}function DS(l){var f=l.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var p=f;switch(f=f.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":DS(p),us(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}l.removeChild(p)}}function Use(l,f,p,v){for(;l.nodeType===1;){var E=p;if(l.nodeName.toLowerCase()!==f.toLowerCase()){if(!v&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(v){if(!l[Xs])switch(f){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(A=l.getAttribute("rel"),A==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(A!==E.rel||l.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||l.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||l.getAttribute("title")!==(E.title==null?null:E.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(A=l.getAttribute("src"),(A!==(E.src==null?null:E.src)||l.getAttribute("type")!==(E.type==null?null:E.type)||l.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&A&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(f==="input"&&l.type==="hidden"){var A=E.name==null?null:""+E.name;if(E.type==="hidden"&&l.getAttribute("name")===A)return l}else return l;if(l=Uo(l.nextSibling),l===null)break}return null}function qse(l,f,p){if(f==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!p||(l=Uo(l.nextSibling),l===null))return null;return l}function kS(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function Fse(l,f){var p=l.ownerDocument;if(l.data!=="$?"||p.readyState==="complete")f();else{var v=function(){f(),p.removeEventListener("DOMContentLoaded",v)};p.addEventListener("DOMContentLoaded",v),l._reactRetry=v}}function Uo(l){for(;l!=null;l=l.nextSibling){var f=l.nodeType;if(f===1||f===3)break;if(f===8){if(f=l.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return l}var OS=null;function zq(l){l=l.previousSibling;for(var f=0;l;){if(l.nodeType===8){var p=l.data;if(p==="$"||p==="$!"||p==="$?"){if(f===0)return l;f--}else p==="/$"&&f++}l=l.previousSibling}return null}function Hq(l,f,p){switch(f=i_(p),l){case"html":if(l=f.documentElement,!l)throw Error(r(452));return l;case"head":if(l=f.head,!l)throw Error(r(453));return l;case"body":if(l=f.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function om(l){for(var f=l.attributes;f.length;)l.removeAttributeNode(f[0]);us(l)}var lo=new Map,Gq=new Set;function o_(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var va=Q.d;Q.d={f:Bse,r:$se,D:zse,C:Hse,L:Gse,m:jse,X:Wse,S:Kse,M:Yse};function Bse(){var l=va.f(),f=Jv();return l||f}function $se(l){var f=Yi(l);f!==null&&f.tag===5&&f.type==="form"?fU(f):va.r(l)}var ad=typeof document>"u"?null:document;function jq(l,f,p){var v=ad;if(v&&typeof f=="string"&&f){var E=Ln(f);E='link[rel="'+l+'"][href="'+E+'"]',typeof p=="string"&&(E+='[crossorigin="'+p+'"]'),Gq.has(E)||(Gq.add(E),l={rel:l,crossOrigin:p,href:f},v.querySelector(E)===null&&(f=v.createElement("link"),xr(f,"link",l),pn(f),v.head.appendChild(f)))}}function zse(l){va.D(l),jq("dns-prefetch",l,null)}function Hse(l,f){va.C(l,f),jq("preconnect",l,f)}function Gse(l,f,p){va.L(l,f,p);var v=ad;if(v&&l&&f){var E='link[rel="preload"][as="'+Ln(f)+'"]';f==="image"&&p&&p.imageSrcSet?(E+='[imagesrcset="'+Ln(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(E+='[imagesizes="'+Ln(p.imageSizes)+'"]')):E+='[href="'+Ln(l)+'"]';var A=E;switch(f){case"style":A=ld(l);break;case"script":A=ud(l)}lo.has(A)||(l=d({rel:"preload",href:f==="image"&&p&&p.imageSrcSet?void 0:l,as:f},p),lo.set(A,l),v.querySelector(E)!==null||f==="style"&&v.querySelector(sm(A))||f==="script"&&v.querySelector(am(A))||(f=v.createElement("link"),xr(f,"link",l),pn(f),v.head.appendChild(f)))}}function jse(l,f){va.m(l,f);var p=ad;if(p&&l){var v=f&&typeof f.as=="string"?f.as:"script",E='link[rel="modulepreload"][as="'+Ln(v)+'"][href="'+Ln(l)+'"]',A=E;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=ud(l)}if(!lo.has(A)&&(l=d({rel:"modulepreload",href:l},f),lo.set(A,l),p.querySelector(E)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(am(A)))return}v=p.createElement("link"),xr(v,"link",l),pn(v),p.head.appendChild(v)}}}function Kse(l,f,p){va.S(l,f,p);var v=ad;if(v&&l){var E=br(v).hoistableStyles,A=ld(l);f=f||"default";var z=E.get(A);if(!z){var j={loading:0,preload:null};if(z=v.querySelector(sm(A)))j.loading=5;else{l=d({rel:"stylesheet",href:l,"data-precedence":f},p),(p=lo.get(A))&&LS(l,p);var Z=z=v.createElement("link");pn(Z),xr(Z,"link",l),Z._p=new Promise(function(fe,be){Z.onload=fe,Z.onerror=be}),Z.addEventListener("load",function(){j.loading|=1}),Z.addEventListener("error",function(){j.loading|=2}),j.loading|=4,s_(z,f,v)}z={type:"stylesheet",instance:z,count:1,state:j},E.set(A,z)}}}function Wse(l,f){va.X(l,f);var p=ad;if(p&&l){var v=br(p).hoistableScripts,E=ud(l),A=v.get(E);A||(A=p.querySelector(am(E)),A||(l=d({src:l,async:!0},f),(f=lo.get(E))&&VS(l,f),A=p.createElement("script"),pn(A),xr(A,"link",l),p.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},v.set(E,A))}}function Yse(l,f){va.M(l,f);var p=ad;if(p&&l){var v=br(p).hoistableScripts,E=ud(l),A=v.get(E);A||(A=p.querySelector(am(E)),A||(l=d({src:l,async:!0,type:"module"},f),(f=lo.get(E))&&VS(l,f),A=p.createElement("script"),pn(A),xr(A,"link",l),p.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},v.set(E,A))}}function Kq(l,f,p,v){var E=(E=oe.current)?o_(E):null;if(!E)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(f=ld(p.href),p=br(E).hoistableStyles,v=p.get(f),v||(v={type:"style",instance:null,count:0,state:null},p.set(f,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){l=ld(p.href);var A=br(E).hoistableStyles,z=A.get(l);if(z||(E=E.ownerDocument||E,z={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(l,z),(A=E.querySelector(sm(l)))&&!A._p&&(z.instance=A,z.state.loading=5),lo.has(l)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},lo.set(l,p),A||Jse(E,l,p,z.state))),f&&v===null)throw Error(r(528,""));return z}if(f&&v!==null)throw Error(r(529,""));return null;case"script":return f=p.async,p=p.src,typeof p=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=ud(p),p=br(E).hoistableScripts,v=p.get(f),v||(v={type:"script",instance:null,count:0,state:null},p.set(f,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function ld(l){return'href="'+Ln(l)+'"'}function sm(l){return'link[rel="stylesheet"]['+l+"]"}function Wq(l){return d({},l,{"data-precedence":l.precedence,precedence:null})}function Jse(l,f,p,v){l.querySelector('link[rel="preload"][as="style"]['+f+"]")?v.loading=1:(f=l.createElement("link"),v.preload=f,f.addEventListener("load",function(){return v.loading|=1}),f.addEventListener("error",function(){return v.loading|=2}),xr(f,"link",p),pn(f),l.head.appendChild(f))}function ud(l){return'[src="'+Ln(l)+'"]'}function am(l){return"script[async]"+l}function Yq(l,f,p){if(f.count++,f.instance===null)switch(f.type){case"style":var v=l.querySelector('style[data-href~="'+Ln(p.href)+'"]');if(v)return f.instance=v,pn(v),v;var E=d({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return v=(l.ownerDocument||l).createElement("style"),pn(v),xr(v,"style",E),s_(v,p.precedence,l),f.instance=v;case"stylesheet":E=ld(p.href);var A=l.querySelector(sm(E));if(A)return f.state.loading|=4,f.instance=A,pn(A),A;v=Wq(p),(E=lo.get(E))&&LS(v,E),A=(l.ownerDocument||l).createElement("link"),pn(A);var z=A;return z._p=new Promise(function(j,Z){z.onload=j,z.onerror=Z}),xr(A,"link",v),f.state.loading|=4,s_(A,p.precedence,l),f.instance=A;case"script":return A=ud(p.src),(E=l.querySelector(am(A)))?(f.instance=E,pn(E),E):(v=p,(E=lo.get(A))&&(v=d({},p),VS(v,E)),l=l.ownerDocument||l,E=l.createElement("script"),pn(E),xr(E,"link",v),l.head.appendChild(E),f.instance=E);case"void":return null;default:throw Error(r(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(v=f.instance,f.state.loading|=4,s_(v,p.precedence,l));return f.instance}function s_(l,f,p){for(var v=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=v.length?v[v.length-1]:null,A=E,z=0;z<v.length;z++){var j=v[z];if(j.dataset.precedence===f)A=j;else if(A!==E)break}A?A.parentNode.insertBefore(l,A.nextSibling):(f=p.nodeType===9?p.head:p,f.insertBefore(l,f.firstChild))}function LS(l,f){l.crossOrigin==null&&(l.crossOrigin=f.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=f.referrerPolicy),l.title==null&&(l.title=f.title)}function VS(l,f){l.crossOrigin==null&&(l.crossOrigin=f.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=f.referrerPolicy),l.integrity==null&&(l.integrity=f.integrity)}var a_=null;function Jq(l,f,p){if(a_===null){var v=new Map,E=a_=new Map;E.set(p,v)}else E=a_,v=E.get(p),v||(v=new Map,E.set(p,v));if(v.has(l))return v;for(v.set(l,null),p=p.getElementsByTagName(l),E=0;E<p.length;E++){var A=p[E];if(!(A[Xs]||A[Pn]||l==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var z=A.getAttribute(f)||"";z=l+z;var j=v.get(z);j?j.push(A):v.set(z,[A])}}return v}function Xq(l,f,p){l=l.ownerDocument||l,l.head.insertBefore(p,f==="title"?l.querySelector("head > title"):null)}function Xse(l,f,p){if(p===1||f.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return l=f.disabled,typeof f.precedence=="string"&&l==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function Qq(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var lm=null;function Qse(){}function Zse(l,f,p){if(lm===null)throw Error(r(475));var v=lm;if(f.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var E=ld(p.href),A=l.querySelector(sm(E));if(A){l=A._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(v.count++,v=l_.bind(v),l.then(v,v)),f.state.loading|=4,f.instance=A,pn(A);return}A=l.ownerDocument||l,p=Wq(p),(E=lo.get(E))&&LS(p,E),A=A.createElement("link"),pn(A);var z=A;z._p=new Promise(function(j,Z){z.onload=j,z.onerror=Z}),xr(A,"link",p),f.instance=A}v.stylesheets===null&&(v.stylesheets=new Map),v.stylesheets.set(f,l),(l=f.state.preload)&&(f.state.loading&3)===0&&(v.count++,f=l_.bind(v),l.addEventListener("load",f),l.addEventListener("error",f))}}function eae(){if(lm===null)throw Error(r(475));var l=lm;return l.stylesheets&&l.count===0&&US(l,l.stylesheets),0<l.count?function(f){var p=setTimeout(function(){if(l.stylesheets&&US(l,l.stylesheets),l.unsuspend){var v=l.unsuspend;l.unsuspend=null,v()}},6e4);return l.unsuspend=f,function(){l.unsuspend=null,clearTimeout(p)}}:null}function l_(){if(this.count--,this.count===0){if(this.stylesheets)US(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var u_=null;function US(l,f){l.stylesheets=null,l.unsuspend!==null&&(l.count++,u_=new Map,f.forEach(tae,l),u_=null,l_.call(l))}function tae(l,f){if(!(f.state.loading&4)){var p=u_.get(l);if(p)var v=p.get(null);else{p=new Map,u_.set(l,p);for(var E=l.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<E.length;A++){var z=E[A];(z.nodeName==="LINK"||z.getAttribute("media")!=="not all")&&(p.set(z.dataset.precedence,z),v=z)}v&&p.set(null,v)}E=f.instance,z=E.getAttribute("data-precedence"),A=p.get(z)||v,A===v&&p.set(null,E),p.set(z,E),this.count++,v=l_.bind(this),E.addEventListener("load",v),E.addEventListener("error",v),A?A.parentNode.insertBefore(E,A.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(E,l.firstChild)),f.state.loading|=4}}var um={$$typeof:I,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function nae(l,f,p,v,E,A,z,j){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vi(0),this.hiddenUpdates=vi(null),this.identifierPrefix=v,this.onUncaughtError=E,this.onCaughtError=A,this.onRecoverableError=z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function Zq(l,f,p,v,E,A,z,j,Z,fe,be,Ee){return l=new nae(l,f,p,z,j,Z,fe,Ee),f=1,A===!0&&(f|=24),A=Ei(3,null,null,f),l.current=A,A.stateNode=l,f=_E(),f.refCount++,l.pooledCache=f,f.refCount++,A.memoizedState={element:v,isDehydrated:p,cache:f},EE(A),l}function e4(l){return l?(l=Ff,l):Ff}function t4(l,f,p,v,E,A){E=e4(E),v.context===null?v.context=E:v.pendingContext=E,v=pl(f),v.payload={element:p},A=A===void 0?null:A,A!==null&&(v.callback=A),p=ml(l,v,f),p!==null&&(Ii(p,l,f),qp(p,l,f))}function n4(l,f){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<f?p:f}}function qS(l,f){n4(l,f),(l=l.alternate)&&n4(l,f)}function r4(l){if(l.tag===13){var f=qf(l,67108864);f!==null&&Ii(f,l,67108864),qS(l,67108864)}}var c_=!0;function rae(l,f,p,v){var E=K.T;K.T=null;var A=Q.p;try{Q.p=2,FS(l,f,p,v)}finally{Q.p=A,K.T=E}}function iae(l,f,p,v){var E=K.T;K.T=null;var A=Q.p;try{Q.p=8,FS(l,f,p,v)}finally{Q.p=A,K.T=E}}function FS(l,f,p,v){if(c_){var E=BS(v);if(E===null)CS(l,f,v,f_,p),o4(l,v);else if(sae(E,l,f,p,v))v.stopPropagation();else if(o4(l,v),f&4&&-1<oae.indexOf(l)){for(;E!==null;){var A=Yi(E);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var z=Gn(A.pendingLanes);if(z!==0){var j=A;for(j.pendingLanes|=2,j.entangledLanes|=2;z;){var Z=1<<31-yt(z);j.entanglements[1]|=Z,z&=~Z}Ss(A),(kt&6)===0&&(Wv=Pe()+500,nm(0))}}break;case 13:j=qf(A,2),j!==null&&Ii(j,A,2),Jv(),qS(A,2)}if(A=BS(v),A===null&&CS(l,f,v,f_,p),A===E)break;E=A}E!==null&&v.stopPropagation()}else CS(l,f,v,null,p)}}function BS(l){return l=Zi(l),$S(l)}var f_=null;function $S(l){if(f_=null,l=Wi(l),l!==null){var f=o(l);if(f===null)l=null;else{var p=f.tag;if(p===13){if(l=s(f),l!==null)return l;l=null}else if(p===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;l=null}else f!==l&&(l=null)}}return f_=l,null}function i4(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(qe()){case Rt:return 2;case In:return 8;case Rn:case xe:return 32;case Me:return 268435456;default:return 32}default:return 32}}var zS=!1,Il=null,Rl=null,Pl=null,cm=new Map,fm=new Map,Nl=[],oae="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function o4(l,f){switch(l){case"focusin":case"focusout":Il=null;break;case"dragenter":case"dragleave":Rl=null;break;case"mouseover":case"mouseout":Pl=null;break;case"pointerover":case"pointerout":cm.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":fm.delete(f.pointerId)}}function dm(l,f,p,v,E,A){return l===null||l.nativeEvent!==A?(l={blockedOn:f,domEventName:p,eventSystemFlags:v,nativeEvent:A,targetContainers:[E]},f!==null&&(f=Yi(f),f!==null&&r4(f)),l):(l.eventSystemFlags|=v,f=l.targetContainers,E!==null&&f.indexOf(E)===-1&&f.push(E),l)}function sae(l,f,p,v,E){switch(f){case"focusin":return Il=dm(Il,l,f,p,v,E),!0;case"dragenter":return Rl=dm(Rl,l,f,p,v,E),!0;case"mouseover":return Pl=dm(Pl,l,f,p,v,E),!0;case"pointerover":var A=E.pointerId;return cm.set(A,dm(cm.get(A)||null,l,f,p,v,E)),!0;case"gotpointercapture":return A=E.pointerId,fm.set(A,dm(fm.get(A)||null,l,f,p,v,E)),!0}return!1}function s4(l){var f=Wi(l.target);if(f!==null){var p=o(f);if(p!==null){if(f=p.tag,f===13){if(f=s(p),f!==null){l.blockedOn=f,wf(l.priority,function(){if(p.tag===13){var v=Ci();v=ss(v);var E=qf(p,v);E!==null&&Ii(E,p,v),qS(p,v)}});return}}else if(f===3&&p.stateNode.current.memoizedState.isDehydrated){l.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}l.blockedOn=null}function d_(l){if(l.blockedOn!==null)return!1;for(var f=l.targetContainers;0<f.length;){var p=BS(l.nativeEvent);if(p===null){p=l.nativeEvent;var v=new p.constructor(p.type,p);ea=v,p.target.dispatchEvent(v),ea=null}else return f=Yi(p),f!==null&&r4(f),l.blockedOn=p,!1;f.shift()}return!0}function a4(l,f,p){d_(l)&&p.delete(f)}function aae(){zS=!1,Il!==null&&d_(Il)&&(Il=null),Rl!==null&&d_(Rl)&&(Rl=null),Pl!==null&&d_(Pl)&&(Pl=null),cm.forEach(a4),fm.forEach(a4)}function h_(l,f){l.blockedOn===f&&(l.blockedOn=null,zS||(zS=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,aae)))}var p_=null;function l4(l){p_!==l&&(p_=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){p_===l&&(p_=null);for(var f=0;f<l.length;f+=3){var p=l[f],v=l[f+1],E=l[f+2];if(typeof v!="function"){if($S(v||p)===null)continue;break}var A=Yi(p);A!==null&&(l.splice(f,3),f-=3,$E(A,{pending:!0,data:E,method:p.method,action:v},v,E))}}))}function hm(l){function f(Z){return h_(Z,l)}Il!==null&&h_(Il,l),Rl!==null&&h_(Rl,l),Pl!==null&&h_(Pl,l),cm.forEach(f),fm.forEach(f);for(var p=0;p<Nl.length;p++){var v=Nl[p];v.blockedOn===l&&(v.blockedOn=null)}for(;0<Nl.length&&(p=Nl[0],p.blockedOn===null);)s4(p),p.blockedOn===null&&Nl.shift();if(p=(l.ownerDocument||l).$$reactFormReplay,p!=null)for(v=0;v<p.length;v+=3){var E=p[v],A=p[v+1],z=E[wn]||null;if(typeof A=="function")z||l4(p);else if(z){var j=null;if(A&&A.hasAttribute("formAction")){if(E=A,z=A[wn]||null)j=z.formAction;else if($S(E)!==null)continue}else j=z.action;typeof j=="function"?p[v+1]=j:(p.splice(v,3),v-=3),l4(p)}}}function HS(l){this._internalRoot=l}m_.prototype.render=HS.prototype.render=function(l){var f=this._internalRoot;if(f===null)throw Error(r(409));var p=f.current,v=Ci();t4(p,v,l,f,null,null)},m_.prototype.unmount=HS.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var f=l.containerInfo;t4(l.current,2,null,l,null,null),Jv(),f[oi]=null}};function m_(l){this._internalRoot=l}m_.prototype.unstable_scheduleHydration=function(l){if(l){var f=as();l={blockedOn:null,target:l,priority:f};for(var p=0;p<Nl.length&&f!==0&&f<Nl[p].priority;p++);Nl.splice(p,0,l),p===0&&s4(l)}};var u4=e.version;if(u4!=="19.1.1")throw Error(r(527,u4,"19.1.1"));Q.findDOMNode=function(l){var f=l._reactInternals;if(f===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=u(f),l=l!==null?c(l):null,l=l===null?null:l.stateNode,l};var lae={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var g_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!g_.isDisabled&&g_.supportsFiber)try{He=g_.inject(lae),We=g_}catch{}}return mm.createRoot=function(l,f){if(!i(l))throw Error(r(299));var p=!1,v="",E=xU,A=AU,z=CU,j=null;return f!=null&&(f.unstable_strictMode===!0&&(p=!0),f.identifierPrefix!==void 0&&(v=f.identifierPrefix),f.onUncaughtError!==void 0&&(E=f.onUncaughtError),f.onCaughtError!==void 0&&(A=f.onCaughtError),f.onRecoverableError!==void 0&&(z=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(j=f.unstable_transitionCallbacks)),f=Zq(l,1,!1,null,null,p,v,E,A,z,j,null),l[oi]=f.current,AS(l),new HS(f)},mm.hydrateRoot=function(l,f,p){if(!i(l))throw Error(r(299));var v=!1,E="",A=xU,z=AU,j=CU,Z=null,fe=null;return p!=null&&(p.unstable_strictMode===!0&&(v=!0),p.identifierPrefix!==void 0&&(E=p.identifierPrefix),p.onUncaughtError!==void 0&&(A=p.onUncaughtError),p.onCaughtError!==void 0&&(z=p.onCaughtError),p.onRecoverableError!==void 0&&(j=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(Z=p.unstable_transitionCallbacks),p.formState!==void 0&&(fe=p.formState)),f=Zq(l,1,!0,f,p??null,v,E,A,z,j,Z,fe),f.context=e4(null),p=f.current,v=Ci(),v=ss(v),E=pl(v),E.callback=null,ml(p,E,v),p=v,f.current.lanes=p,ji(f,p),Ss(f),l[oi]=f.current,AS(l),new m_(f)},mm.version="19.1.1",mm}var _4;function bae(){if(_4)return WS.exports;_4=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),WS.exports=wae(),WS.exports}var Tae=bae();const Eae=Co(Tae);/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var w4="popstate";function Sae(t={}){function e(i,o){let{pathname:s="/",search:a="",hash:u=""}=tf(i.location.hash.substring(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),MN("",{pathname:s,search:a,hash:u},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){let s=i.document.querySelector("base"),a="";if(s&&s.getAttribute("href")){let u=i.location.href,c=u.indexOf("#");a=c===-1?u:u.slice(0,c)}return a+"#"+(typeof o=="string"?o:Tg(o))}function r(i,o){bo(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return Aae(e,n,r,t)}function fn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function bo(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function xae(){return Math.random().toString(36).substring(2,10)}function b4(t,e){return{usr:t.state,key:t.key,idx:e}}function MN(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?tf(e):e,state:n,key:e&&e.key||r||xae()}}function Tg({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function tf(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function Aae(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a="POP",u=null,c=d();c==null&&(c=0,s.replaceState({...s.state,idx:c},""));function d(){return(s.state||{idx:null}).idx}function h(){a="POP";let T=d(),x=T==null?null:T-c;c=T,u&&u({action:a,location:b.location,delta:x})}function g(T,x){a="PUSH";let C=MN(b.location,T,x);n&&n(C,T),c=d()+1;let I=b4(C,c),N=b.createHref(C);try{s.pushState(I,"",N)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;i.location.assign(N)}o&&u&&u({action:a,location:b.location,delta:1})}function _(T,x){a="REPLACE";let C=MN(b.location,T,x);n&&n(C,T),c=d();let I=b4(C,c),N=b.createHref(C);s.replaceState(I,"",N),o&&u&&u({action:a,location:b.location,delta:0})}function S(T){return Cae(T)}let b={get action(){return a},get location(){return t(i,s)},listen(T){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(w4,h),u=T,()=>{i.removeEventListener(w4,h),u=null}},createHref(T){return e(i,T)},createURL:S,encodeLocation(T){let x=S(T);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:g,replace:_,go(T){return s.go(T)}};return b}function Cae(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),fn(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Tg(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function uK(t,e,n="/"){return Iae(t,e,n,!1)}function Iae(t,e,n,r){let i=typeof e=="string"?tf(e):e,o=Da(i.pathname||"/",n);if(o==null)return null;let s=cK(t);Rae(s);let a=null;for(let u=0;a==null&&u<s.length;++u){let c=Fae(o);a=Uae(s[u],c,r)}return a}function cK(t,e=[],n=[],r="",i=!1){let o=(s,a,u=i,c)=>{let d={relativePath:c===void 0?s.path||"":c,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(r)&&u)return;fn(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length)}let h=Ca([r,d.relativePath]),g=n.concat(d);s.children&&s.children.length>0&&(fn(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),cK(s.children,e,g,h,u)),!(s.path==null&&!s.index)&&e.push({path:h,score:Lae(h,s.index),routesMeta:g})};return t.forEach((s,a)=>{var u;if(s.path===""||!((u=s.path)!=null&&u.includes("?")))o(s,a);else for(let c of fK(s.path))o(s,a,!0,c)}),e}function fK(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=fK(r.join("/")),a=[];return a.push(...s.map(u=>u===""?o:[o,u].join("/"))),i&&a.push(...s),a.map(u=>t.startsWith("/")&&u===""?"/":u)}function Rae(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Vae(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var Pae=/^:[\w-]+$/,Nae=3,Mae=2,Dae=1,kae=10,Oae=-2,T4=t=>t==="*";function Lae(t,e){let n=t.split("/"),r=n.length;return n.some(T4)&&(r+=Oae),e&&(r+=Mae),n.filter(i=>!T4(i)).reduce((i,o)=>i+(Pae.test(o)?Nae:o===""?Dae:kae),r)}function Vae(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function Uae(t,e,n=!1){let{routesMeta:r}=t,i={},o="/",s=[];for(let a=0;a<r.length;++a){let u=r[a],c=a===r.length-1,d=o==="/"?e:e.slice(o.length)||"/",h=A0({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},d),g=u.route;if(!h&&c&&n&&!r[r.length-1].route.index&&(h=A0({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},d)),!h)return null;Object.assign(i,h.params),s.push({params:i,pathname:Ca([o,h.pathname]),pathnameBase:Hae(Ca([o,h.pathnameBase])),route:g}),h.pathnameBase!=="/"&&(o=Ca([o,h.pathnameBase]))}return s}function A0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=qae(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,{paramName:d,isOptional:h},g)=>{if(d==="*"){let S=a[g]||"";s=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const _=a[g];return h&&!_?c[d]=void 0:c[d]=(_||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:s,pattern:t}}function qae(t,e=!1,n=!0){bo(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Fae(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return bo(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Da(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Bae(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?tf(t):t;return{pathname:n?n.startsWith("/")?n:$ae(n,e):e,search:Gae(r),hash:jae(i)}}function $ae(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function QS(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function zae(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function U2(t){let e=zae(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function q2(t,e,n,r=!1){let i;typeof t=="string"?i=tf(t):(i={...t},fn(!i.pathname||!i.pathname.includes("?"),QS("?","pathname","search",i)),fn(!i.pathname||!i.pathname.includes("#"),QS("#","pathname","hash",i)),fn(!i.search||!i.search.includes("#"),QS("#","search","hash",i)));let o=t===""||i.pathname==="",s=o?"/":i.pathname,a;if(s==null)a=n;else{let h=e.length-1;if(!r&&s.startsWith("..")){let g=s.split("/");for(;g[0]==="..";)g.shift(),h-=1;i.pathname=g.join("/")}a=h>=0?e[h]:"/"}let u=Bae(i,a),c=s&&s!=="/"&&s.endsWith("/"),d=(o||s===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||d)&&(u.pathname+="/"),u}var Ca=t=>t.join("/").replace(/\/\/+/g,"/"),Hae=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Gae=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,jae=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Kae(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var dK=["POST","PUT","PATCH","DELETE"];new Set(dK);var Wae=["GET",...dK];new Set(Wae);var Dh=D.createContext(null);Dh.displayName="DataRouter";var Yw=D.createContext(null);Yw.displayName="DataRouterState";D.createContext(!1);var hK=D.createContext({isTransitioning:!1});hK.displayName="ViewTransition";var Yae=D.createContext(new Map);Yae.displayName="Fetchers";var Jae=D.createContext(null);Jae.displayName="Await";var Zo=D.createContext(null);Zo.displayName="Navigation";var ly=D.createContext(null);ly.displayName="Location";var es=D.createContext({outlet:null,matches:[],isDataRoute:!1});es.displayName="Route";var F2=D.createContext(null);F2.displayName="RouteError";function Xae(t,{relative:e}={}){fn(kh(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=D.useContext(Zo),{hash:i,pathname:o,search:s}=uy(t,{relative:e}),a=o;return n!=="/"&&(a=o==="/"?n:Ca([n,o])),r.createHref({pathname:a,search:s,hash:i})}function kh(){return D.useContext(ly)!=null}function Ks(){return fn(kh(),"useLocation() may be used only in the context of a <Router> component."),D.useContext(ly).location}var pK="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function mK(t){D.useContext(Zo).static||D.useLayoutEffect(t)}function Jw(){let{isDataRoute:t}=D.useContext(es);return t?cle():Qae()}function Qae(){fn(kh(),"useNavigate() may be used only in the context of a <Router> component.");let t=D.useContext(Dh),{basename:e,navigator:n}=D.useContext(Zo),{matches:r}=D.useContext(es),{pathname:i}=Ks(),o=JSON.stringify(U2(r)),s=D.useRef(!1);return mK(()=>{s.current=!0}),D.useCallback((u,c={})=>{if(bo(s.current,pK),!s.current)return;if(typeof u=="number"){n.go(u);return}let d=q2(u,JSON.parse(o),i,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ca([e,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[e,n,o,i,t])}D.createContext(null);function gK(){let{matches:t}=D.useContext(es),e=t[t.length-1];return e?e.params:{}}function uy(t,{relative:e}={}){let{matches:n}=D.useContext(es),{pathname:r}=Ks(),i=JSON.stringify(U2(n));return D.useMemo(()=>q2(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function Zae(t,e){return yK(t,e)}function yK(t,e,n,r,i){var C;fn(kh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=D.useContext(Zo),{matches:s}=D.useContext(es),a=s[s.length-1],u=a?a.params:{},c=a?a.pathname:"/",d=a?a.pathnameBase:"/",h=a&&a.route;{let I=h&&h.path||"";vK(c,!h||I.endsWith("*")||I.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${I}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${I}"> to <Route path="${I==="/"?"*":`${I}/*`}">.`)}let g=Ks(),_;if(e){let I=typeof e=="string"?tf(e):e;fn(d==="/"||((C=I.pathname)==null?void 0:C.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${I.pathname}" was given in the \`location\` prop.`),_=I}else _=g;let S=_.pathname||"/",b=S;if(d!=="/"){let I=d.replace(/^\//,"").split("/");b="/"+S.replace(/^\//,"").split("/").slice(I.length).join("/")}let T=uK(t,{pathname:b});bo(h||T!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),bo(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=ile(T&&T.map(I=>Object.assign({},I,{params:Object.assign({},u,I.params),pathname:Ca([d,o.encodeLocation?o.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?d:Ca([d,o.encodeLocation?o.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),s,n,r,i);return e&&x?D.createElement(ly.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},x):x}function ele(){let t=ule(),e=Kae(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=D.createElement(D.Fragment,null,D.createElement("p",null,"💿 Hey developer 👋"),D.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",D.createElement("code",{style:o},"ErrorBoundary")," or"," ",D.createElement("code",{style:o},"errorElement")," prop on your route.")),D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:i},n):null,s)}var tle=D.createElement(ele,null),nle=class extends D.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?D.createElement(es.Provider,{value:this.props.routeContext},D.createElement(F2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function rle({routeContext:t,match:e,children:n}){let r=D.useContext(Dh);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),D.createElement(es.Provider,{value:t},n)}function ile(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,s=n==null?void 0:n.errors;if(s!=null){let c=o.findIndex(d=>d.route.id&&(s==null?void 0:s[d.route.id])!==void 0);fn(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),o=o.slice(0,Math.min(o.length,c+1))}let a=!1,u=-1;if(n)for(let c=0;c<o.length;c++){let d=o[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:h,errors:g}=n,_=d.route.loader&&!h.hasOwnProperty(d.route.id)&&(!g||g[d.route.id]===void 0);if(d.route.lazy||_){a=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,d,h)=>{let g,_=!1,S=null,b=null;n&&(g=s&&d.route.id?s[d.route.id]:void 0,S=d.route.errorElement||tle,a&&(u<0&&h===0?(vK("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,b=null):u===h&&(_=!0,b=d.route.hydrateFallbackElement||null)));let T=e.concat(o.slice(0,h+1)),x=()=>{let C;return g?C=S:_?C=b:d.route.Component?C=D.createElement(d.route.Component,null):d.route.element?C=d.route.element:C=c,D.createElement(rle,{match:d,routeContext:{outlet:c,matches:T,isDataRoute:n!=null},children:C})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?D.createElement(nle,{location:n.location,revalidation:n.revalidation,component:S,error:g,children:x(),routeContext:{outlet:null,matches:T,isDataRoute:!0},unstable_onError:r}):x()},null)}function B2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ole(t){let e=D.useContext(Dh);return fn(e,B2(t)),e}function sle(t){let e=D.useContext(Yw);return fn(e,B2(t)),e}function ale(t){let e=D.useContext(es);return fn(e,B2(t)),e}function $2(t){let e=ale(t),n=e.matches[e.matches.length-1];return fn(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function lle(){return $2("useRouteId")}function ule(){var r;let t=D.useContext(F2),e=sle("useRouteError"),n=$2("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function cle(){let{router:t}=ole("useNavigate"),e=$2("useNavigate"),n=D.useRef(!1);return mK(()=>{n.current=!0}),D.useCallback(async(i,o={})=>{bo(n.current,pK),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...o}))},[t,e])}var E4={};function vK(t,e,n){!e&&!E4[t]&&(E4[t]=!0,bo(!1,n))}D.memo(fle);function fle({routes:t,future:e,state:n,unstable_onError:r}){return yK(t,void 0,n,r,e)}function S4({to:t,replace:e,state:n,relative:r}){fn(kh(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=D.useContext(Zo);bo(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=D.useContext(es),{pathname:s}=Ks(),a=Jw(),u=q2(t,U2(o),s,r==="path"),c=JSON.stringify(u);return D.useEffect(()=>{a(JSON.parse(c),{replace:e,state:n,relative:r})},[a,c,r,e,n]),null}function ui(t){fn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function dle({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:o=!1}){fn(!kh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=t.replace(/^\/*/,"/"),a=D.useMemo(()=>({basename:s,navigator:i,static:o,future:{}}),[s,i,o]);typeof n=="string"&&(n=tf(n));let{pathname:u="/",search:c="",hash:d="",state:h=null,key:g="default"}=n,_=D.useMemo(()=>{let S=Da(u,s);return S==null?null:{location:{pathname:S,search:c,hash:d,state:h,key:g},navigationType:r}},[s,u,c,d,h,g,r]);return bo(_!=null,`<Router basename="${s}"> is not able to match the URL "${u}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:D.createElement(Zo.Provider,{value:a},D.createElement(ly.Provider,{children:e,value:_}))}function x4({children:t,location:e}){return Zae(DN(t),e)}function DN(t,e=[]){let n=[];return D.Children.forEach(t,(r,i)=>{if(!D.isValidElement(r))return;let o=[...e,i];if(r.type===D.Fragment){n.push.apply(n,DN(r.props.children,o));return}fn(r.type===ui,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),fn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=DN(r.props.children,o)),n.push(s)}),n}var t0="get",n0="application/x-www-form-urlencoded";function Xw(t){return t!=null&&typeof t.tagName=="string"}function hle(t){return Xw(t)&&t.tagName.toLowerCase()==="button"}function ple(t){return Xw(t)&&t.tagName.toLowerCase()==="form"}function mle(t){return Xw(t)&&t.tagName.toLowerCase()==="input"}function gle(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function yle(t,e){return t.button===0&&(!e||e==="_self")&&!gle(t)}var v_=null;function vle(){if(v_===null)try{new FormData(document.createElement("form"),0),v_=!1}catch{v_=!0}return v_}var _le=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ZS(t){return t!=null&&!_le.has(t)?(bo(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${n0}"`),null):t}function wle(t,e){let n,r,i,o,s;if(ple(t)){let a=t.getAttribute("action");r=a?Da(a,e):null,n=t.getAttribute("method")||t0,i=ZS(t.getAttribute("enctype"))||n0,o=new FormData(t)}else if(hle(t)||mle(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||a.getAttribute("action");if(r=u?Da(u,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||t0,i=ZS(t.getAttribute("formenctype"))||ZS(a.getAttribute("enctype"))||n0,o=new FormData(a,t),!vle()){let{name:c,type:d,value:h}=t;if(d==="image"){let g=c?`${c}.`:"";o.append(`${g}x`,"0"),o.append(`${g}y`,"0")}else c&&o.append(c,h)}}else{if(Xw(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=t0,r=null,i=n0,s=t}return o&&i==="text/plain"&&(s=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function z2(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ble(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Da(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function Tle(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ele(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Sle(t,e,n){let r=await Promise.all(t.map(async i=>{let o=e.routes[i.route.id];if(o){let s=await Tle(o,n);return s.links?s.links():[]}return[]}));return Ile(r.flat(1).filter(Ele).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function A4(t,e,n,r,i,o){let s=(u,c)=>n[c]?u.route.id!==n[c].route.id:!0,a=(u,c)=>{var d;return n[c].pathname!==u.pathname||((d=n[c].route.path)==null?void 0:d.endsWith("*"))&&n[c].params["*"]!==u.params["*"]};return o==="assets"?e.filter((u,c)=>s(u,c)||a(u,c)):o==="data"?e.filter((u,c)=>{var h;let d=r.routes[u.route.id];if(!d||!d.hasLoader)return!1;if(s(u,c)||a(u,c))return!0;if(u.route.shouldRevalidate){let g=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((h=n[0])==null?void 0:h.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function xle(t,e,{includeHydrateFallback:n}={}){return Ale(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function Ale(t){return[...new Set(t)]}function Cle(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function Ile(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let o=JSON.stringify(Cle(i));return n.has(o)||(n.add(o),r.push({key:o,link:i})),r},[])}function _K(){let t=D.useContext(Dh);return z2(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Rle(){let t=D.useContext(Yw);return z2(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var H2=D.createContext(void 0);H2.displayName="FrameworkContext";function wK(){let t=D.useContext(H2);return z2(t,"You must render this element inside a <HydratedRouter> element"),t}function Ple(t,e){let n=D.useContext(H2),[r,i]=D.useState(!1),[o,s]=D.useState(!1),{onFocus:a,onBlur:u,onMouseEnter:c,onMouseLeave:d,onTouchStart:h}=e,g=D.useRef(null);D.useEffect(()=>{if(t==="render"&&s(!0),t==="viewport"){let b=x=>{x.forEach(C=>{s(C.isIntersecting)})},T=new IntersectionObserver(b,{threshold:.5});return g.current&&T.observe(g.current),()=>{T.disconnect()}}},[t]),D.useEffect(()=>{if(r){let b=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(b)}}},[r]);let _=()=>{i(!0)},S=()=>{i(!1),s(!1)};return n?t!=="intent"?[o,g,{}]:[o,g,{onFocus:gm(a,_),onBlur:gm(u,S),onMouseEnter:gm(c,_),onMouseLeave:gm(d,S),onTouchStart:gm(h,_)}]:[!1,g,{}]}function gm(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function Nle({page:t,...e}){let{router:n}=_K(),r=D.useMemo(()=>uK(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?D.createElement(Dle,{page:t,matches:r,...e}):null}function Mle(t){let{manifest:e,routeModules:n}=wK(),[r,i]=D.useState([]);return D.useEffect(()=>{let o=!1;return Sle(t,e,n).then(s=>{o||i(s)}),()=>{o=!0}},[t,e,n]),r}function Dle({page:t,matches:e,...n}){let r=Ks(),{manifest:i,routeModules:o}=wK(),{basename:s}=_K(),{loaderData:a,matches:u}=Rle(),c=D.useMemo(()=>A4(t,e,u,i,r,"data"),[t,e,u,i,r]),d=D.useMemo(()=>A4(t,e,u,i,r,"assets"),[t,e,u,i,r]),h=D.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let S=new Set,b=!1;if(e.forEach(x=>{var I;let C=i.routes[x.route.id];!C||!C.hasLoader||(!c.some(N=>N.route.id===x.route.id)&&x.route.id in a&&((I=o[x.route.id])!=null&&I.shouldRevalidate)||C.hasClientLoader?b=!0:S.add(x.route.id))}),S.size===0)return[];let T=ble(t,s,"data");return b&&S.size>0&&T.searchParams.set("_routes",e.filter(x=>S.has(x.route.id)).map(x=>x.route.id).join(",")),[T.pathname+T.search]},[s,a,r,i,c,e,t,o]),g=D.useMemo(()=>xle(d,i),[d,i]),_=Mle(d);return D.createElement(D.Fragment,null,h.map(S=>D.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...n})),g.map(S=>D.createElement("link",{key:S,rel:"modulepreload",href:S,...n})),_.map(({key:S,link:b})=>D.createElement("link",{key:S,nonce:n.nonce,...b})))}function kle(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var bK=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{bK&&(window.__reactRouterVersion="7.8.2")}catch{}function Ole({basename:t,children:e,window:n}){let r=D.useRef();r.current==null&&(r.current=Sae({window:n,v5Compat:!0}));let i=r.current,[o,s]=D.useState({action:i.action,location:i.location}),a=D.useCallback(u=>{D.startTransition(()=>s(u))},[s]);return D.useLayoutEffect(()=>i.listen(a),[i,a]),D.createElement(dle,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:i})}var TK=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,EK=D.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:s,state:a,target:u,to:c,preventScrollReset:d,viewTransition:h,...g},_){let{basename:S}=D.useContext(Zo),b=typeof c=="string"&&TK.test(c),T,x=!1;if(typeof c=="string"&&b&&(T=c,bK))try{let R=new URL(window.location.href),U=c.startsWith("//")?new URL(R.protocol+c):new URL(c),L=Da(U.pathname,S);U.origin===R.origin&&L!=null?c=L+U.search+U.hash:x=!0}catch{bo(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=Xae(c,{relative:i}),[I,N,V]=Ple(r,g),q=qle(c,{replace:s,state:a,target:u,preventScrollReset:d,relative:i,viewTransition:h});function P(R){e&&e(R),R.defaultPrevented||q(R)}let O=D.createElement("a",{...g,...V,href:T||C,onClick:x||o?e:P,ref:kle(_,N),target:u,"data-discover":!b&&n==="render"?"true":void 0});return I&&!b?D.createElement(D.Fragment,null,O,D.createElement(Nle,{page:C})):O});EK.displayName="Link";var Lle=D.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:s,viewTransition:a,children:u,...c},d){let h=uy(s,{relative:c.relative}),g=Ks(),_=D.useContext(Yw),{navigator:S,basename:b}=D.useContext(Zo),T=_!=null&&Hle(h)&&a===!0,x=S.encodeLocation?S.encodeLocation(h).pathname:h.pathname,C=g.pathname,I=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;n||(C=C.toLowerCase(),I=I?I.toLowerCase():null,x=x.toLowerCase()),I&&b&&(I=Da(I,b)||I);const N=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let V=C===x||!i&&C.startsWith(x)&&C.charAt(N)==="/",q=I!=null&&(I===x||!i&&I.startsWith(x)&&I.charAt(x.length)==="/"),P={isActive:V,isPending:q,isTransitioning:T},O=V?e:void 0,R;typeof r=="function"?R=r(P):R=[r,V?"active":null,q?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let U=typeof o=="function"?o(P):o;return D.createElement(EK,{...c,"aria-current":O,className:R,ref:d,style:U,to:s,viewTransition:a},typeof u=="function"?u(P):u)});Lle.displayName="NavLink";var Vle=D.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:o,method:s=t0,action:a,onSubmit:u,relative:c,preventScrollReset:d,viewTransition:h,...g},_)=>{let S=$le(),b=zle(a,{relative:c}),T=s.toLowerCase()==="get"?"get":"post",x=typeof a=="string"&&TK.test(a),C=I=>{if(u&&u(I),I.defaultPrevented)return;I.preventDefault();let N=I.nativeEvent.submitter,V=(N==null?void 0:N.getAttribute("formmethod"))||s;S(N||I.currentTarget,{fetcherKey:e,method:V,navigate:n,replace:i,state:o,relative:c,preventScrollReset:d,viewTransition:h})};return D.createElement("form",{ref:_,method:T,action:b,onSubmit:r?u:C,...g,"data-discover":!x&&t==="render"?"true":void 0})});Vle.displayName="Form";function Ule(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function SK(t){let e=D.useContext(Dh);return fn(e,Ule(t)),e}function qle(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:s}={}){let a=Jw(),u=Ks(),c=uy(t,{relative:o});return D.useCallback(d=>{if(yle(d,e)){d.preventDefault();let h=n!==void 0?n:Tg(u)===Tg(c);a(t,{replace:h,state:r,preventScrollReset:i,relative:o,viewTransition:s})}},[u,a,c,n,r,e,t,i,o,s])}var Fle=0,Ble=()=>`__${String(++Fle)}__`;function $le(){let{router:t}=SK("useSubmit"),{basename:e}=D.useContext(Zo),n=lle();return D.useCallback(async(r,i={})=>{let{action:o,method:s,encType:a,formData:u,body:c}=wle(r,e);if(i.navigate===!1){let d=i.fetcherKey||Ble();await t.fetch(d,n,i.action||o,{preventScrollReset:i.preventScrollReset,formData:u,body:c,formMethod:i.method||s,formEncType:i.encType||a,flushSync:i.flushSync})}else await t.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:u,body:c,formMethod:i.method||s,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function zle(t,{relative:e}={}){let{basename:n}=D.useContext(Zo),r=D.useContext(es);fn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...uy(t||".",{relative:e})},s=Ks();if(t==null){o.search=s.search;let a=new URLSearchParams(o.search),u=a.getAll("index");if(u.some(d=>d==="")){a.delete("index"),u.filter(h=>h).forEach(h=>a.append("index",h));let d=a.toString();o.search=d?`?${d}`:""}}return(!t||t===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Ca([n,o.pathname])),Tg(o)}function Hle(t,{relative:e}={}){let n=D.useContext(hK);fn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=SK("useViewTransitionState"),i=uy(t,{relative:e});if(!n.isTransitioning)return!1;let o=Da(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=Da(n.nextLocation.pathname,r)||n.nextLocation.pathname;return A0(i.pathname,s)!=null||A0(i.pathname,o)!=null}var xK=lK();const Gle=()=>{};var C4={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AK=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},jle=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},CK={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,d=o>>2,h=(o&3)<<4|a>>4;let g=(a&15)<<2|c>>6,_=c&63;u||(_=64,s||(g=64)),r.push(n[d],n[h],n[g],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(AK(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):jle(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||c==null||h==null)throw new Kle;const g=o<<2|a>>4;if(r.push(g),c!==64){const _=a<<4&240|c>>2;if(r.push(_),h!==64){const S=c<<6&192|h;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Kle extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Wle=function(t){const e=AK(t);return CK.encodeByteArray(e,!0)},C0=function(t){return Wle(t).replace(/\./g,"")},G2=function(t){try{return CK.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function I0(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Yle(n)||(t[n]=I0(t[n],e[n]));return t}function Yle(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jle=()=>j2().__FIREBASE_DEFAULTS__,Xle=()=>{if(typeof process>"u"||typeof C4>"u")return;const t=C4.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Qle=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&G2(t[1]);return e&&JSON.parse(e)},Qw=()=>{try{return Gle()||Jle()||Xle()||Qle()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},IK=t=>{var e,n;return(n=(e=Qw())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},RK=t=>{const e=IK(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},K2=()=>{var t;return(t=Qw())==null?void 0:t.config},PK=t=>{var e;return(e=Qw())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zle{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function W2(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NK(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[C0(JSON.stringify(n)),C0(JSON.stringify(s)),""].join(".")}const rg={};function eue(){const t={prod:[],emulator:[]};for(const e of Object.keys(rg))rg[e]?t.emulator.push(e):t.prod.push(e);return t}function tue(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let I4=!1;function Y2(t,e){if(typeof window>"u"||typeof document>"u"||!pu(window.location.host)||rg[t]===e||rg[t]||I4)return;rg[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",o=eue().prod.length>0;function s(){const g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,_){g.setAttribute("width","24"),g.setAttribute("id",_),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function c(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{I4=!0,s()},g}function d(g,_){g.setAttribute("id",_),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function h(){const g=tue(r),_=n("text"),S=document.getElementById(_)||document.createElement("span"),b=n("learnmore"),T=document.getElementById(b)||document.createElement("a"),x=n("preprendIcon"),C=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const I=g.element;a(I),d(T,b);const N=c();u(C,x),I.append(C,S,T,N),document.body.appendChild(I)}o?(S.innerText="Preview backend disconnected.",C.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(C.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nue(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gn())}function Zw(){var e;const t=(e=Qw())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rue(){return typeof window<"u"||MK()}function MK(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function iue(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function DK(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function J2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kK(){const t=gn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function OK(){return!Zw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function LK(){return!Zw()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Eg(){try{return typeof indexedDB=="object"}catch{return!1}}function oue(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sue="FirebaseError";class zr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=sue,Object.setPrototypeOf(this,zr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nf.prototype.create)}}class nf{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?aue(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new zr(i,a,r)}}function aue(t,e){return t.replace(lue,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const lue=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R4(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function uue(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ka(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(P4(o)&&P4(s)){if(!ka(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function P4(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Rd(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Bm(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function VK(t,e){const n=new cue(t,e);return n.subscribe.bind(n)}class cue{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");fue(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=ex),i.error===void 0&&(i.error=ex),i.complete===void 0&&(i.complete=ex);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fue(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ex(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(t){return t&&t._delegate?t._delegate:t}class To{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ac="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let due=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Zle;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(pue(e))try{this.getOrInitializeService({instanceIdentifier:ac})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=ac){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ac){return this.instances.has(e)}getOptions(e=ac){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:hue(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ac){return this.component?this.component.multipleInstances?e:ac:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function hue(t){return t===ac?void 0:t}function pue(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UK{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new due(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2=[];var pt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(pt||(pt={}));const qK={debug:pt.DEBUG,verbose:pt.VERBOSE,info:pt.INFO,warn:pt.WARN,error:pt.ERROR,silent:pt.SILENT},mue=pt.INFO,gue={[pt.DEBUG]:"log",[pt.VERBOSE]:"log",[pt.INFO]:"info",[pt.WARN]:"warn",[pt.ERROR]:"error"},yue=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=gue[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class eb{constructor(e){this.name=e,this._logLevel=mue,this._logHandler=yue,this._userLogHandler=null,X2.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qK[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pt.DEBUG,...e),this._logHandler(this,pt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pt.VERBOSE,...e),this._logHandler(this,pt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pt.INFO,...e),this._logHandler(this,pt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pt.WARN,...e),this._logHandler(this,pt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pt.ERROR,...e),this._logHandler(this,pt.ERROR,...e)}}function vue(t){X2.forEach(e=>{e.setLogLevel(t)})}function _ue(t,e){for(const n of X2){let r=null;e&&e.level&&(r=qK[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,o,...s)=>{const a=s.map(u=>{if(u==null)return null;if(typeof u=="string")return u;if(typeof u=="number"||typeof u=="boolean")return u.toString();if(u instanceof Error)return u.message;try{return JSON.stringify(u)}catch{return null}}).filter(u=>u).join(" ");o>=(r??i.logLevel)&&t({level:pt[o].toLowerCase(),message:a,args:s,type:i.name})}}}const wue=(t,e)=>e.some(n=>t instanceof n);let N4,M4;function bue(){return N4||(N4=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Tue(){return M4||(M4=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const FK=new WeakMap,kN=new WeakMap,BK=new WeakMap,tx=new WeakMap,Q2=new WeakMap;function Eue(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Kl(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&FK.set(n,t)}).catch(()=>{}),Q2.set(e,t),e}function Sue(t){if(kN.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});kN.set(t,e)}let ON={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return kN.get(t);if(e==="objectStoreNames")return t.objectStoreNames||BK.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Kl(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function xue(t){ON=t(ON)}function Aue(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(nx(this),e,...n);return BK.set(r,e.sort?e.sort():[e]),Kl(r)}:Tue().includes(t)?function(...e){return t.apply(nx(this),e),Kl(FK.get(this))}:function(...e){return Kl(t.apply(nx(this),e))}}function Cue(t){return typeof t=="function"?Aue(t):(t instanceof IDBTransaction&&Sue(t),wue(t,bue())?new Proxy(t,ON):t)}function Kl(t){if(t instanceof IDBRequest)return Eue(t);if(tx.has(t))return tx.get(t);const e=Cue(t);return e!==t&&(tx.set(t,e),Q2.set(e,t)),e}const nx=t=>Q2.get(t);function Iue(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=Kl(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Kl(s.result),u.oldVersion,u.newVersion,Kl(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Rue=["get","getKey","getAll","getAllKeys","count"],Pue=["put","add","delete","clear"],rx=new Map;function D4(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(rx.get(e))return rx.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Pue.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Rue.includes(n)))return;const o=async function(s,...a){const u=this.transaction(s,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&u.done]))[0]};return rx.set(e,o),o}xue(t=>({...t,get:(e,n,r)=>D4(e,n)||t.get(e,n,r),has:(e,n)=>!!D4(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nue{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Mue(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Mue(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const R0="@firebase/app",LN="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa=new eb("@firebase/app"),Due="@firebase/app-compat",kue="@firebase/analytics-compat",Oue="@firebase/analytics",Lue="@firebase/app-check-compat",Vue="@firebase/app-check",Uue="@firebase/auth",que="@firebase/auth-compat",Fue="@firebase/database",Bue="@firebase/data-connect",$ue="@firebase/database-compat",zue="@firebase/functions",Hue="@firebase/functions-compat",Gue="@firebase/installations",jue="@firebase/installations-compat",Kue="@firebase/messaging",Wue="@firebase/messaging-compat",Yue="@firebase/performance",Jue="@firebase/performance-compat",Xue="@firebase/remote-config",Que="@firebase/remote-config-compat",Zue="@firebase/storage",ece="@firebase/storage-compat",tce="@firebase/firestore",nce="@firebase/ai",rce="@firebase/firestore-compat",ice="firebase",oce="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tu="[DEFAULT]",sce={[R0]:"fire-core",[Due]:"fire-core-compat",[Oue]:"fire-analytics",[kue]:"fire-analytics-compat",[Vue]:"fire-app-check",[Lue]:"fire-app-check-compat",[Uue]:"fire-auth",[que]:"fire-auth-compat",[Fue]:"fire-rtdb",[Bue]:"fire-data-connect",[$ue]:"fire-rtdb-compat",[zue]:"fire-fn",[Hue]:"fire-fn-compat",[Gue]:"fire-iid",[jue]:"fire-iid-compat",[Kue]:"fire-fcm",[Wue]:"fire-fcm-compat",[Yue]:"fire-perf",[Jue]:"fire-perf-compat",[Xue]:"fire-rc",[Que]:"fire-rc-compat",[Zue]:"fire-gcs",[ece]:"fire-gcs-compat",[tce]:"fire-fst",[rce]:"fire-fst-compat",[nce]:"fire-vertex","fire-js":"fire-js",[ice]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nu=new Map,Wd=new Map,Yd=new Map;function Sg(t,e){try{t.container.addComponent(e)}catch(n){Oa.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function $K(t,e){t.container.addOrOverwriteComponent(e)}function La(t){const e=t.name;if(Yd.has(e))return Oa.debug(`There were multiple attempts to register component ${e}.`),!1;Yd.set(e,t);for(const n of nu.values())Sg(n,t);for(const n of Wd.values())Sg(n,t);return!0}function Lh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ace(t,e,n=tu){Lh(t,e).clearInstance(n)}function Z2(t){return t.options!==void 0}function zK(t){return Z2(t)?!1:"authIdToken"in t||"appCheckToken"in t||"releaseOnDeref"in t||"automaticDataCollectionEnabled"in t}function tn(t){return t==null?!1:t.settings!==void 0}function lce(){Yd.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uce={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ui=new nf("app","Firebase",uce);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let HK=class{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new To("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ui.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k4(t,e){const n=G2(t.split(".")[1]);if(n===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(n).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const i=JSON.parse(n).exp*1e3,o=new Date().getTime();i-o<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class cce extends HK{constructor(e,n,r,i){const o=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!0,s={name:r,automaticDataCollectionEnabled:o};if(e.apiKey!==void 0)super(e,s,i);else{const a=e;super(a.options,s,i)}this._serverConfig={automaticDataCollectionEnabled:o,...n},this._serverConfig.authIdToken&&k4(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&k4(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,qi(R0,LN,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){tD(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Ui.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja=oce;function eD(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:tu,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Ui.create("bad-app-name",{appName:String(i)});if(n||(n=K2()),!n)throw Ui.create("no-options");const o=nu.get(i);if(o){if(ka(n,o.options)&&ka(r,o.config))return o;throw Ui.create("duplicate-app",{appName:i})}const s=new UK(i);for(const u of Yd.values())s.addComponent(u);const a=new HK(n,r,s);return nu.set(i,a),a}function fce(t,e={}){if(rue()&&!MK())throw Ui.create("invalid-server-app-environment");let n,r=e||{};if(t&&(Z2(t)?n=t.options:zK(t)?r=t:n=t),r.automaticDataCollectionEnabled===void 0&&(r.automaticDataCollectionEnabled=!0),n||(n=K2()),!n)throw Ui.create("no-options");const i={...r,...n};i.releaseOnDeref!==void 0&&delete i.releaseOnDeref;const o=d=>[...d].reduce((h,g)=>Math.imul(31,h)+g.charCodeAt(0)|0,0);if(r.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Ui.create("finalization-registry-not-supported",{});const s=""+o(JSON.stringify(i)),a=Wd.get(s);if(a)return a.incRefCount(r.releaseOnDeref),a;const u=new UK(s);for(const d of Yd.values())u.addComponent(d);const c=new cce(n,r,s,u);return Wd.set(s,c),c}function tb(t=tu){const e=nu.get(t);if(!e&&t===tu&&K2())return eD();if(!e)throw Ui.create("no-app",{appName:t});return e}function dce(){return Array.from(nu.values())}async function tD(t){let e=!1;const n=t.name;nu.has(n)?(e=!0,nu.delete(n)):Wd.has(n)&&t.decRefCount()<=0&&(Wd.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function qi(t,e,n){let r=sce[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Oa.warn(s.join(" "));return}La(new To(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function GK(t,e){if(t!==null&&typeof t!="function")throw Ui.create("invalid-log-argument");_ue(t,e)}function jK(t){vue(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hce="firebase-heartbeat-database",pce=1,xg="firebase-heartbeat-store";let ix=null;function KK(){return ix||(ix=Iue(hce,pce,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(xg)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ui.create("idb-open",{originalErrorMessage:t.message})})),ix}async function mce(t){try{const n=(await KK()).transaction(xg),r=await n.objectStore(xg).get(WK(t));return await n.done,r}catch(e){if(e instanceof zr)Oa.warn(e.message);else{const n=Ui.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Oa.warn(n.message)}}}async function O4(t,e){try{const r=(await KK()).transaction(xg,"readwrite");await r.objectStore(xg).put(e,WK(t)),await r.done}catch(n){if(n instanceof zr)Oa.warn(n.message);else{const r=Ui.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Oa.warn(r.message)}}}function WK(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gce=1024,yce=30;class vce{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new wce(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=L4();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>yce){const s=bce(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Oa.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=L4(),{heartbeatsToSend:r,unsentEntries:i}=_ce(this._heartbeatsCache.heartbeats),o=C0(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Oa.warn(n),""}}}function L4(){return new Date().toISOString().substring(0,10)}function _ce(t,e=gce){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),V4(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),V4(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class wce{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Eg()?oue().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await mce(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return O4(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return O4(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function V4(t){return C0(JSON.stringify({version:2,heartbeats:t})).length}function bce(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tce(t){La(new To("platform-logger",e=>new Nue(e),"PRIVATE")),La(new To("heartbeat",e=>new vce(e),"PRIVATE")),qi(R0,LN,t),qi(R0,LN,"esm2020"),qi("fire-js","")}Tce("");const Ece=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:zr,SDK_VERSION:ja,_DEFAULT_ENTRY_NAME:tu,_addComponent:Sg,_addOrOverwriteComponent:$K,_apps:nu,_clearComponents:lce,_components:Yd,_getProvider:Lh,_isFirebaseApp:Z2,_isFirebaseServerApp:tn,_isFirebaseServerAppSettings:zK,_registerComponent:La,_removeServiceInstance:ace,_serverApps:Wd,deleteApp:tD,getApp:tb,getApps:dce,initializeApp:eD,initializeServerApp:fce,onLog:GK,registerVersion:qi,setLogLevel:jK},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sce{constructor(e,n){this._delegate=e,this.firebase=n,Sg(e,new To("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),tD(this._delegate)))}_getService(e,n=tu){var i;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&((i=r.getComponent())==null?void 0:i.instantiationMode)==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:n})}_removeServiceInstance(e,n=tu){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Sg(this._delegate,e)}_addOrOverwriteComponent(e){$K(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xce={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},U4=new nf("app-compat","Firebase",xce);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ace(t){const e={},n={__esModule:!0,initializeApp:o,app:i,registerVersion:qi,setLogLevel:jK,onLog:GK,apps:null,SDK_VERSION:ja,INTERNAL:{registerComponent:a,removeApp:r,useAsService:u,modularAPIs:Ece}};n.default=n,Object.defineProperty(n,"apps",{get:s});function r(c){delete e[c]}function i(c){if(c=c||tu,!R4(e,c))throw U4.create("no-app",{appName:c});return e[c]}i.App=t;function o(c,d={}){const h=eD(c,d);if(R4(e,h.name))return e[h.name];const g=new t(h,n);return e[h.name]=g,g}function s(){return Object.keys(e).map(c=>e[c])}function a(c){const d=c.name,h=d.replace("-compat","");if(La(c)&&c.type==="PUBLIC"){const g=(_=i())=>{if(typeof _[h]!="function")throw U4.create("invalid-app-argument",{appName:d});return _[h]()};c.serviceProps!==void 0&&I0(g,c.serviceProps),n[h]=g,t.prototype[h]=function(..._){return this._getService.bind(this,d).apply(this,c.multipleInstances?_:[])}}return c.type==="PUBLIC"?n[h]:null}function u(c,d){return d==="serverAuth"?null:d}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YK(){const t=Ace(Sce);t.INTERNAL={...t.INTERNAL,createFirebaseNamespace:YK,extendNamespace:e,createSubscribe:VK,ErrorFactory:nf,deepExtend:I0};function e(n){I0(t,n)}return t}const Cce=YK();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4=new eb("@firebase/app-compat"),Ice="@firebase/app-compat",Rce="0.5.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pce(t){qi(Ice,Rce,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=j2();if(t.firebase!==void 0){q4.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&q4.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const rf=Cce;Pce();var Nce="firebase",Mce="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rf.registerVersion(Nce,Mce,"app-compat");const ym={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},cd={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dce(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function JK(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kce=Dce,Oce=JK,XK=new nf("auth","Firebase",JK());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0=new eb("@firebase/auth");function Lce(t,...e){P0.logLevel<=pt.WARN&&P0.warn(`Auth (${ja}): ${t}`,...e)}function r0(t,...e){P0.logLevel<=pt.ERROR&&P0.error(`Auth (${ja}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(t,...e){throw rD(t,...e)}function Qn(t,...e){return rD(t,...e)}function nD(t,e,n){const r={...Oce(),[e]:n};return new nf("auth","Firebase",r).create(e,{appName:t.name})}function hr(t){return nD(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Vh(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&pr(t,"argument-error"),nD(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function rD(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return XK.create(t,...e)}function Re(t,e,...n){if(!t)throw rD(e,...n)}function Ds(t){const e="INTERNAL ASSERTION FAILED: "+t;throw r0(e),new Error(e)}function Jo(t,e){t||Ds(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ag(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function iD(){return F4()==="http:"||F4()==="https:"}function F4(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vce(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(iD()||DK()||"connection"in navigator)?navigator.onLine:!0}function Uce(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(e,n){this.shortDelay=e,this.longDelay=n,Jo(n>e,"Short delay should be less than long delay!"),this.isMobile=nue()||J2()}get(){return Vce()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(t,e){Jo(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QK{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ds("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ds("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ds("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qce={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fce=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Bce=new cy(3e4,6e4);function An(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Cn(t,e,n,r,i={}){return ZK(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});const a=Oh({key:t.config.apiKey,...s}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:u,...o};return iue()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&pu(t.emulatorConfig.host)&&(c.credentials="include"),QK.fetch()(await eW(t,t.config.apiHost,n,a),c)})}async function ZK(t,e,n){t._canInitEmulator=!1;const r={...qce,...e};try{const i=new zce(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw $m(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[u,c]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw $m(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw $m(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw $m(t,"user-disabled",s);const d=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw nD(t,d,c);pr(t,d)}}catch(i){if(i instanceof zr)throw i;pr(t,"network-request-failed",{message:String(i)})}}async function Ka(t,e,n,r,i={}){const o=await Cn(t,e,n,r,i);return"mfaPendingCredential"in o&&pr(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function eW(t,e,n,r){const i=`${e}${n}?${r}`,o=t,s=o.config.emulator?oD(t.config,i):`${t.config.apiScheme}://${i}`;return Fce.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}function $ce(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class zce{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Qn(this.auth,"network-request-failed")),Bce.get())})}}function $m(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Qn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B4(t){return t!==void 0&&t.getResponse!==void 0}function $4(t){return t!==void 0&&t.enterprise!==void 0}class tW{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return $ce(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hce(t){return(await Cn(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function nW(t,e){return Cn(t,"GET","/v2/recaptchaConfig",An(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gce(t,e){return Cn(t,"POST","/v1/accounts:delete",e)}async function jce(t,e){return Cn(t,"POST","/v1/accounts:update",e)}async function N0(t,e){return Cn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Kce(t,e=!1){const n=Be(t),r=await n.getIdToken(e),i=nb(r);Re(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:ig(ox(i.auth_time)),issuedAtTime:ig(ox(i.iat)),expirationTime:ig(ox(i.exp)),signInProvider:s||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function ox(t){return Number(t)*1e3}function nb(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return r0("JWT malformed, contained fewer than 3 sections"),null;try{const i=G2(n);return i?JSON.parse(i):(r0("Failed to decode base64 JWT payload"),null)}catch(i){return r0("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function z4(t){const e=nb(t);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Va(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof zr&&Wce(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Wce({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yce{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ig(this.lastLoginAt),this.creationTime=ig(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cg(t){var h;const e=t.auth,n=await t.getIdToken(),r=await Va(t,N0(e,{idToken:n}));Re(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const o=(h=i.providerUserInfo)!=null&&h.length?rW(i.providerUserInfo):[],s=Xce(t.providerData,o),a=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(s!=null&&s.length),c=a?u:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new VN(i.createdAt,i.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function Jce(t){const e=Be(t);await Cg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Xce(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function rW(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qce(t,e){const n=await ZK(t,{},async()=>{const r=Oh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=await eW(t,i,"/v1/token",`key=${o}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:a,body:r};return t.emulatorConfig&&pu(t.emulatorConfig.host)&&(u.credentials="include"),QK.fetch()(s,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Zce(t,e){return Cn(t,"POST","/v2/accounts:revokeToken",An(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):z4(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const n=z4(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await Qce(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new kd;return r&&(Re(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Re(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Re(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new kd,this.toJSON())}_performRefresh(){return Ds("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(t,e){Re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Go{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new Yce(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new VN(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Va(this,this.stsTokenManager.getToken(this.auth,e));return Re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Kce(this,e)}reload(){return Jce(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Go({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Cg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(tn(this.auth.app))return Promise.reject(hr(this.auth));const e=await this.getIdToken();return await Va(this,Gce(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,o=n.phoneNumber??void 0,s=n.photoURL??void 0,a=n.tenantId??void 0,u=n._redirectEventId??void 0,c=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:g,isAnonymous:_,providerData:S,stsTokenManager:b}=n;Re(h&&b,e,"internal-error");const T=kd.fromJSON(this.name,b);Re(typeof h=="string",e,"internal-error"),Dl(r,e.name),Dl(i,e.name),Re(typeof g=="boolean",e,"internal-error"),Re(typeof _=="boolean",e,"internal-error"),Dl(o,e.name),Dl(s,e.name),Dl(a,e.name),Dl(u,e.name),Dl(c,e.name),Dl(d,e.name);const x=new Go({uid:h,auth:e,email:i,emailVerified:g,displayName:r,isAnonymous:_,photoURL:s,phoneNumber:o,tenantId:a,stsTokenManager:T,createdAt:c,lastLoginAt:d});return S&&Array.isArray(S)&&(x.providerData=S.map(C=>({...C}))),u&&(x._redirectEventId=u),x}static async _fromIdTokenResponse(e,n,r=!1){const i=new kd;i.updateFromServerResponse(n);const o=new Go({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Cg(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Re(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?rW(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),a=new kd;a.updateFromIdToken(r);const u=new Go({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new VN(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4=new Map;function Oi(t){Jo(t instanceof Function,"Expected a class definition");let e=H4.get(t);return e?(Jo(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,H4.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iW{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}iW.type="NONE";const Jd=iW;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cc(t,e,n){return`firebase:${t}:${e}:${n}`}class Od{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Cc(this.userKey,i.apiKey,o),this.fullPersistenceKey=Cc("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await N0(this.auth,{idToken:e}).catch(()=>{});return n?Go._fromGetAccountInfoResponse(this.auth,n,e):null}return Go._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Od(Oi(Jd),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let o=i[0]||Oi(Jd);const s=Cc(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(s);if(d){let h;if(typeof d=="string"){const g=await N0(e,{idToken:d}).catch(()=>{});if(!g)break;h=await Go._fromGetAccountInfoResponse(e,g,d)}else h=Go._fromJSON(e,d);c!==o&&(a=h),o=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new Od(o,e,r):(o=u[0],a&&await o._set(s,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==o)try{await c._remove(s)}catch{}})),new Od(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G4(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lW(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(oW(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uW(e))return"Blackberry";if(cW(e))return"Webos";if(sW(e))return"Safari";if((e.includes("chrome/")||aW(e))&&!e.includes("edge/"))return"Chrome";if(fy(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function oW(t=gn()){return/firefox\//i.test(t)}function sW(t=gn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function aW(t=gn()){return/crios\//i.test(t)}function lW(t=gn()){return/iemobile/i.test(t)}function fy(t=gn()){return/android/i.test(t)}function uW(t=gn()){return/blackberry/i.test(t)}function cW(t=gn()){return/webos/i.test(t)}function dy(t=gn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function efe(t=gn()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function tfe(t=gn()){var e;return dy(t)&&!!((e=window.navigator)!=null&&e.standalone)}function nfe(){return kK()&&document.documentMode===10}function fW(t=gn()){return dy(t)||fy(t)||cW(t)||uW(t)||/windows phone/i.test(t)||lW(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dW(t,e=[]){let n;switch(t){case"Browser":n=G4(gn());break;case"Worker":n=`${G4(gn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ja}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rfe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,a)=>{try{const u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ife(t,e={}){return Cn(t,"GET","/v2/passwordPolicy",An(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ofe=6;class sfe{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??ofe,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class afe{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new j4(this),this.idTokenSubscription=new j4(this),this.beforeStateQueue=new rfe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=XK,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Oi(n)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await Od.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await N0(this,{idToken:e}),r=await Go._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(tn(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(o=this.redirectUser)==null?void 0:o._redirectEventId,a=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!s||s===a)&&(u!=null&&u.user)&&(r=u.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Cg(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Uce()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(tn(this.app))return Promise.reject(hr(this));const n=e?Be(e):null;return n&&Re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return tn(this.app)?Promise.reject(hr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return tn(this.app)?Promise.reject(hr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Oi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ife(this),n=new sfe(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new nf("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Zce(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Oi(e)||this._popupRedirectResolver;Re(n,this,"argument-error"),this.redirectPersistenceManager=await Od.create(this,[Oi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{const u=e.addObserver(n);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=dW(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(tn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&Lce(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function yn(t){return Be(t)}class j4{constructor(e){this.auth=e,this.observer=null,this.addObserver=VK(n=>this.observer=n)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lfe(t){hy=t}function sD(t){return hy.loadJS(t)}function ufe(){return hy.recaptchaV2Script}function cfe(){return hy.recaptchaEnterpriseScript}function ffe(){return hy.gapiScript}function hW(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dfe=500,hfe=6e4,__=1e12;class pfe{constructor(e){this.auth=e,this.counter=__,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new yfe(e,this.auth.name,n||{})),this.counter++,r}reset(e){var r;const n=e||__;(r=this._widgets.get(n))==null||r.delete(),this._widgets.delete(n)}getResponse(e){var r;const n=e||__;return((r=this._widgets.get(n))==null?void 0:r.getResponse())||""}async execute(e){var r;const n=e||__;return(r=this._widgets.get(n))==null||r.execute(),""}}class mfe{constructor(){this.enterprise=new gfe}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class gfe{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class yfe{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;Re(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=vfe(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},hfe)},dfe))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function vfe(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const _fe="recaptcha-enterprise",og="NO_RECAPTCHA";class pW{constructor(e){this.type=_fe,this.auth=yn(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(s,a)=>{nW(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new tW(u);return o.tenantId==null?o._agentRecaptchaConfig=c:o._tenantRecaptchaConfigs[o.tenantId]=c,s(c.siteKey)}}).catch(u=>{a(u)})})}function i(o,s,a){const u=window.grecaptcha;$4(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(c=>{s(c)}).catch(()=>{s(og)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new mfe().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&$4(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=cfe();u.length!==0&&(u+=a),sD(u).then(()=>{i(a,o,s)}).catch(c=>{s(c)})}}).catch(a=>{s(a)})})}}async function vm(t,e,n,r=!1,i=!1){const o=new pW(t);let s;if(i)s=og;else try{s=await o.verify(n)}catch{s=await o.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const u=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Wl(t,e,n,r,i){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await vm(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await vm(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("PHONE_PROVIDER")){const a=await vm(t,e,n);return r(t,a).catch(async u=>{var c;if(((c=t._getRecaptchaConfig())==null?void 0:c.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const d=await vm(t,e,n,!1,!0);return r(t,d)}return Promise.reject(u)})}else{const a=await vm(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")}async function wfe(t){const e=yn(t),n=await nW(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new tW(n);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new pW(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bfe(t,e){const n=Lh(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(ka(o,e??{}))return i;pr(i,"already-initialized")}return n.initialize({options:e})}function Tfe(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Oi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function mW(t,e,n){const r=yn(t);Re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),o=gW(e),{host:s,port:a}=Efe(e),u=a===null?"":`:${a}`,c={url:`${o}//${s}${u}/`},d=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Re(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Re(ka(c,r.config.emulator)&&ka(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,pu(s)?(W2(`${o}//${s}${u}`),Y2("Auth",!0)):i||Sfe()}function gW(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Efe(t){const e=gW(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:K4(r.substr(o.length+1))}}else{const[o,s]=r.split(":");return{host:o,port:K4(s)}}}function K4(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Sfe(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ds("not implemented")}_getIdTokenResponse(e){return Ds("not implemented")}_linkToIdToken(e,n){return Ds("not implemented")}_getReauthenticationResolver(e){return Ds("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yW(t,e){return Cn(t,"POST","/v1/accounts:resetPassword",An(t,e))}async function xfe(t,e){return Cn(t,"POST","/v1/accounts:update",e)}async function Afe(t,e){return Cn(t,"POST","/v1/accounts:signUp",e)}async function Cfe(t,e){return Cn(t,"POST","/v1/accounts:update",An(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ife(t,e){return Ka(t,"POST","/v1/accounts:signInWithPassword",An(t,e))}async function rb(t,e){return Cn(t,"POST","/v1/accounts:sendOobCode",An(t,e))}async function Rfe(t,e){return rb(t,e)}async function Pfe(t,e){return rb(t,e)}async function Nfe(t,e){return rb(t,e)}async function Mfe(t,e){return rb(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dfe(t,e){return Ka(t,"POST","/v1/accounts:signInWithEmailLink",An(t,e))}async function kfe(t,e){return Ka(t,"POST","/v1/accounts:signInWithEmailLink",An(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig extends Uh{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Ig(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ig(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wl(e,n,"signInWithPassword",Ife,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Dfe(e,{email:this._email,oobCode:this._password});default:pr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wl(e,r,"signUpPassword",Afe,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return kfe(e,{idToken:n,email:this._email,oobCode:this._password});default:pr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ia(t,e){return Ka(t,"POST","/v1/accounts:signInWithIdp",An(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ofe="http://localhost";class $s extends Uh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new $s(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):pr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=n;if(!r||!i)return null;const s=new $s(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return Ia(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ia(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ia(e,n)}buildRequest(){const e={requestUri:Ofe,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Oh(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W4(t,e){return Cn(t,"POST","/v1/accounts:sendVerificationCode",An(t,e))}async function Lfe(t,e){return Ka(t,"POST","/v1/accounts:signInWithPhoneNumber",An(t,e))}async function Vfe(t,e){const n=await Ka(t,"POST","/v1/accounts:signInWithPhoneNumber",An(t,e));if(n.temporaryProof)throw $m(t,"account-exists-with-different-credential",n);return n}const Ufe={USER_NOT_FOUND:"user-not-found"};async function qfe(t,e){const n={...e,operation:"REAUTH"};return Ka(t,"POST","/v1/accounts:signInWithPhoneNumber",An(t,n),Ufe)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic extends Uh{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Ic({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Ic({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return Lfe(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return Vfe(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return qfe(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:o}=e;return!r&&!n&&!i&&!o?null:new Ic({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ffe(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Bfe(t){const e=Rd(Bm(t)).link,n=e?Rd(Bm(e)).deep_link_id:null,r=Rd(Bm(t)).deep_link_id;return(r?Rd(Bm(r)).link:null)||r||n||e||t}class ib{constructor(e){const n=Rd(Bm(e)),r=n.apiKey??null,i=n.oobCode??null,o=Ffe(n.mode??null);Re(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Bfe(e);try{return new ib(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(){this.providerId=mu.PROVIDER_ID}static credential(e,n){return Ig._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=ib.parseLink(n);return Re(r,"argument-error"),Ig._fromEmailAndCode(e,r.code,r.tenantId)}}mu.PROVIDER_ID="password";mu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";mu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh extends Wa{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ld extends qh{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return Re("providerId"in n&&"signInMethod"in n,"argument-error"),$s._fromParams(n)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return Re(e.idToken||e.accessToken,"argument-error"),$s._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return Ld.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Ld.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:o,nonce:s,providerId:a}=e;if(!r&&!i&&!n&&!o||!a)return null;try{return new Ld(a)._credential({idToken:n,accessToken:r,nonce:s,pendingToken:o})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs extends qh{constructor(){super("facebook.com")}static credential(e){return $s._fromParams({providerId:Cs.PROVIDER_ID,signInMethod:Cs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cs.credentialFromTaggedObject(e)}static credentialFromError(e){return Cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cs.credential(e.oauthAccessToken)}catch{return null}}}Cs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Cs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends qh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return $s._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Is.credentialFromTaggedObject(e)}static credentialFromError(e){return Is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Is.credential(n,r)}catch{return null}}}Is.GOOGLE_SIGN_IN_METHOD="google.com";Is.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs extends qh{constructor(){super("github.com")}static credential(e){return $s._fromParams({providerId:Rs.PROVIDER_ID,signInMethod:Rs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rs.credentialFromTaggedObject(e)}static credentialFromError(e){return Rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rs.credential(e.oauthAccessToken)}catch{return null}}}Rs.GITHUB_SIGN_IN_METHOD="github.com";Rs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $fe="http://localhost";class Xd extends Uh{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Ia(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ia(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ia(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:o}=n;return!r||!i||!o||r!==i?null:new Xd(r,o)}static _create(e,n){return new Xd(e,n)}buildRequest(){return{requestUri:$fe,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zfe="saml.";class M0 extends Wa{constructor(e){Re(e.startsWith(zfe),"argument-error"),super(e)}static credentialFromResult(e){return M0.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return M0.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Xd.fromJSON(e);return Re(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Xd._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps extends qh{constructor(){super("twitter.com")}static credential(e,n){return $s._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ps.credentialFromTaggedObject(e)}static credentialFromError(e){return Ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ps.credential(n,r)}catch{return null}}}Ps.TWITTER_SIGN_IN_METHOD="twitter.com";Ps.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vW(t,e){return Ka(t,"POST","/v1/accounts:signUp",An(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await Go._fromIdTokenResponse(e,r,i),s=Y4(r);return new Eo({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Y4(r);return new Eo({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Y4(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hfe(t){var i;if(tn(t.app))return Promise.reject(hr(t));const e=yn(t);if(await e._initializationPromise,(i=e.currentUser)!=null&&i.isAnonymous)return new Eo({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await vW(e,{returnSecureToken:!0}),r=await Eo._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0 extends zr{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,D0.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new D0(e,n,r,i)}}function _W(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?D0._fromErrorAndOperation(t,o,e,r):o})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wW(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gfe(t,e){const n=Be(t);await ob(!0,n,e);const{providerUserInfo:r}=await jce(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=wW(r||[]);return n.providerData=n.providerData.filter(o=>i.has(o.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function aD(t,e,n=!1){const r=await Va(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Eo._forOperation(t,"link",r)}async function ob(t,e,n){await Cg(e);const r=wW(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";Re(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bW(t,e,n=!1){const{auth:r}=t;if(tn(r.app))return Promise.reject(hr(r));const i="reauthenticate";try{const o=await Va(t,_W(r,i,e,t),n);Re(o.idToken,r,"internal-error");const s=nb(o.idToken);Re(s,r,"internal-error");const{sub:a}=s;return Re(t.uid===a,r,"user-mismatch"),Eo._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&pr(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TW(t,e,n=!1){if(tn(t.app))return Promise.reject(hr(t));const r="signIn",i=await _W(t,r,e),o=await Eo._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function sb(t,e){return TW(yn(t),e)}async function EW(t,e){const n=Be(t);return await ob(!1,n,e.providerId),aD(n,e)}async function SW(t,e){return bW(Be(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jfe(t,e){return Ka(t,"POST","/v1/accounts:signInWithCustomToken",An(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kfe(t,e){if(tn(t.app))return Promise.reject(hr(t));const n=yn(t),r=await jfe(n,{token:e,returnSecureToken:!0}),i=await Eo._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?lD._fromServerResponse(e,n):"totpInfo"in n?uD._fromServerResponse(e,n):pr(e,"internal-error")}}class lD extends py{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new lD(n)}}class uD extends py{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new uD(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(t,e,n){var r;Re(((r=n.url)==null?void 0:r.length)>0,t,"invalid-continue-uri"),Re(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),Re(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Re(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(Re(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cD(t){const e=yn(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Wfe(t,e,n){const r=yn(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&ab(r,i,n),await Wl(r,i,"getOobCode",Pfe,"EMAIL_PASSWORD_PROVIDER")}async function Yfe(t,e,n){await yW(Be(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&cD(t),r})}async function Jfe(t,e){await Cfe(Be(t),{oobCode:e})}async function xW(t,e){const n=Be(t),r=await yW(n,{oobCode:e}),i=r.requestType;switch(Re(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Re(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Re(r.mfaInfo,n,"internal-error");default:Re(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=py._fromServerResponse(yn(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:o},operation:i}}async function Xfe(t,e){const{data:n}=await xW(Be(t),e);return n.email}async function Qfe(t,e,n){if(tn(t.app))return Promise.reject(hr(t));const r=yn(t),s=await Wl(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",vW,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&cD(t),u}),a=await Eo._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a}function AW(t,e,n){return tn(t.app)?Promise.reject(hr(t)):sb(Be(t),mu.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&cD(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zfe(t,e,n){const r=yn(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function o(s,a){Re(a.handleCodeInApp,r,"argument-error"),a&&ab(r,s,a)}o(i,n),await Wl(r,i,"getOobCode",Nfe,"EMAIL_PASSWORD_PROVIDER")}function ede(t,e){const n=ib.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function tde(t,e,n){if(tn(t.app))return Promise.reject(hr(t));const r=Be(t),i=mu.credentialWithLink(e,n||Ag());return Re(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),sb(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nde(t,e){return Cn(t,"POST","/v1/accounts:createAuthUri",An(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rde(t,e){const n=iD()?Ag():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await nde(Be(t),r);return i||[]}async function ide(t,e){const n=Be(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&ab(n.auth,i,e);const{email:o}=await Rfe(n.auth,i);o!==t.email&&await t.reload()}async function ode(t,e,n){const r=Be(t),o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&ab(r.auth,o,n);const{email:s}=await Mfe(r.auth,o);s!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sde(t,e){return Cn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ade(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Be(t),o={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},s=await Va(r,sde(r.auth,o));r.displayName=s.displayName||null,r.photoURL=s.photoUrl||null;const a=r.providerData.find(({providerId:u})=>u==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(s)}function lde(t,e){const n=Be(t);return tn(n.auth.app)?Promise.reject(hr(n.auth)):IW(n,e,null)}function CW(t,e){return IW(Be(t),null,e)}async function IW(t,e,n){const{auth:r}=t,o={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(o.email=e),n&&(o.password=n);const s=await Va(t,xfe(r,o));await t._updateTokensIfNecessary(s,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ude(t){var i,o;if(!t)return null;const{providerId:e}=t,n=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},r=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(t!=null&&t.idToken)){const s=(o=(i=nb(t.idToken))==null?void 0:i.firebase)==null?void 0:o.sign_in_provider;if(s){const a=s!=="anonymous"&&s!=="custom"?s:null;return new Vd(r,a)}}if(!e)return null;switch(e){case"facebook.com":return new cde(r,n);case"github.com":return new fde(r,n);case"google.com":return new dde(r,n);case"twitter.com":return new hde(r,n,t.screenName||null);case"custom":case"anonymous":return new Vd(r,null);default:return new Vd(r,e,n)}}class Vd{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class RW extends Vd{constructor(e,n,r,i){super(e,n,r),this.username=i}}class cde extends Vd{constructor(e,n){super(e,"facebook.com",n)}}class fde extends RW{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class dde extends Vd{constructor(e,n){super(e,"google.com",n)}}class hde extends RW{constructor(e,n,r){super(e,"twitter.com",n,r)}}function pde(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:ude(n)}function mde(t,e,n,r){return Be(t).onIdTokenChanged(e,n,r)}function gde(t,e,n){return Be(t).beforeAuthStateChanged(e,n)}function yde(t,e,n,r){return Be(t).onAuthStateChanged(e,n,r)}function vde(t){return Be(t).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new _c("enroll",e,n)}static _fromMfaPendingCredential(e){return new _c("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if((n=e.multiFactorSession)!=null&&n.pendingCredential)return _c._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if((r=e.multiFactorSession)!=null&&r.idToken)return _c._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=yn(e),i=n.customData._serverResponse,o=(i.mfaInfo||[]).map(a=>py._fromServerResponse(r,a));Re(i.mfaPendingCredential,r,"internal-error");const s=_c._fromMfaPendingCredential(i.mfaPendingCredential);return new fD(s,o,async a=>{const u=await a._process(r,s);delete i.mfaInfo,delete i.mfaPendingCredential;const c={...i,idToken:u.idToken,refreshToken:u.refreshToken};switch(n.operationType){case"signIn":const d=await Eo._fromIdTokenResponse(r,n.operationType,c);return await r._updateCurrentUser(d.user),d;case"reauthenticate":return Re(n.user,r,"internal-error"),Eo._forOperation(n.user,n.operationType,c);default:pr(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function _de(t,e){var i;const n=Be(t),r=e;return Re(e.customData.operationType,n,"argument-error"),Re((i=r.customData._serverResponse)==null?void 0:i.mfaPendingCredential,n,"argument-error"),fD._fromError(n,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J4(t,e){return Cn(t,"POST","/v2/accounts/mfaEnrollment:start",An(t,e))}function wde(t,e){return Cn(t,"POST","/v2/accounts/mfaEnrollment:finalize",An(t,e))}function bde(t,e){return Cn(t,"POST","/v2/accounts/mfaEnrollment:withdraw",An(t,e))}class dD{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>py._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new dD(e)}async getSession(){return _c._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,i=await this.getSession(),o=await Va(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(o),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await Va(this.user,bde(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:o})=>o!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const sx=new WeakMap;function Tde(t){const e=Be(t);return sx.has(e)||sx.set(e,dD._fromUser(e)),sx.get(e)}const k0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PW{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(k0,"1"),this.storage.removeItem(k0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ede=1e3,Sde=10;class NW extends PW{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fW(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,a,u)=>{this.notifyListeners(s,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},o=this.storage.getItem(r);nfe()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Sde):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Ede)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}NW.type="LOCAL";const lb=NW;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MW extends PW{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}MW.type="SESSION";const ru=MW;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xde(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new ub(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(s).map(async c=>c(n.origin,o)),u=await xde(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ub.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function my(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ade{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{const c=my("",20);i.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(h){const g=h;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(d),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(){return window}function Cde(t){Fn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hD(){return typeof Fn().WorkerGlobalScope<"u"&&typeof Fn().importScripts=="function"}async function Ide(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Rde(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function Pde(){return hD()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DW="firebaseLocalStorageDb",Nde=1,O0="firebaseLocalStorage",kW="fbase_key";class gy{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function cb(t,e){return t.transaction([O0],e?"readwrite":"readonly").objectStore(O0)}function Mde(){const t=indexedDB.deleteDatabase(DW);return new gy(t).toPromise()}function UN(){const t=indexedDB.open(DW,Nde);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(O0,{keyPath:kW})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(O0)?e(r):(r.close(),await Mde(),e(await UN()))})})}async function X4(t,e,n){const r=cb(t,!0).put({[kW]:e,value:n});return new gy(r).toPromise()}async function Dde(t,e){const n=cb(t,!1).get(e),r=await new gy(n).toPromise();return r===void 0?null:r.value}function Q4(t,e){const n=cb(t,!0).delete(e);return new gy(n).toPromise()}const kde=800,Ode=3;class OW{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await UN(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Ode)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hD()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ub._getInstance(Pde()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await Ide(),!this.activeServiceWorker)return;this.sender=new Ade(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Rde()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await UN();return await X4(e,k0,"1"),await Q4(e,k0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>X4(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Dde(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Q4(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=cb(i,!1).getAll();return new gy(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),kde)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}OW.type="LOCAL";const Qd=OW;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z4(t,e){return Cn(t,"POST","/v2/accounts/mfaSignIn:start",An(t,e))}function Lde(t,e){return Cn(t,"POST","/v2/accounts/mfaSignIn:finalize",An(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax=hW("rcb"),Vde=new cy(3e4,6e4);class Ude{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=Fn().grecaptcha)!=null&&e.render)}load(e,n=""){return Re(qde(n),e,"argument-error"),this.shouldResolveImmediately(n)&&B4(Fn().grecaptcha)?Promise.resolve(Fn().grecaptcha):new Promise((r,i)=>{const o=Fn().setTimeout(()=>{i(Qn(e,"network-request-failed"))},Vde.get());Fn()[ax]=()=>{Fn().clearTimeout(o),delete Fn()[ax];const a=Fn().grecaptcha;if(!a||!B4(a)){i(Qn(e,"internal-error"));return}const u=a.render;a.render=(c,d)=>{const h=u(c,d);return this.counter++,h},this.hostLanguage=n,r(a)};const s=`${ufe()}?${Oh({onload:ax,render:"explicit",hl:n})}`;sD(s).catch(()=>{clearTimeout(o),i(Qn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!((n=Fn().grecaptcha)!=null&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function qde(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class Fde{async load(e){return new pfe(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg="recaptcha",Bde={theme:"light",type:"image"};let $de=class{constructor(e,n,r={...Bde}){this.parameters=r,this.type=sg,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=yn(e),this.isInvisible=this.parameters.size==="invisible",Re(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;Re(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Fde:new Ude,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const o=s=>{s&&(this.tokenChangeListeners.delete(o),i(s))};this.tokenChangeListeners.add(o),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){Re(!this.parameters.sitekey,this.auth,"argument-error"),Re(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Re(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=Fn()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){Re(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Re(iD()&&!hD(),this.auth,"internal-error"),await zde(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await Hce(this.auth);Re(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Re(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function zde(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Ic._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function Hde(t,e,n){if(tn(t.app))return Promise.reject(hr(t));const r=yn(t),i=await fb(r,e,Be(n));return new pD(i,o=>sb(r,o))}async function Gde(t,e,n){const r=Be(t);await ob(!1,r,"phone");const i=await fb(r.auth,e,Be(n));return new pD(i,o=>EW(r,o))}async function jde(t,e,n){const r=Be(t);if(tn(r.auth.app))return Promise.reject(hr(r.auth));const i=await fb(r.auth,e,Be(n));return new pD(i,o=>SW(r,o))}async function fb(t,e,n){var r;if(!t._getRecaptchaConfig())try{await wfe(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const o=i.session;if("phoneNumber"in i){Re(o.type==="enroll",t,"internal-error");const s={idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Wl(t,s,"mfaSmsEnrollment",async(d,h)=>{if(h.phoneEnrollmentInfo.captchaResponse===og){Re((n==null?void 0:n.type)===sg,d,"argument-error");const g=await lx(d,h,n);return J4(d,g)}return J4(d,h)},"PHONE_PROVIDER").catch(d=>Promise.reject(d))).phoneSessionInfo.sessionInfo}else{Re(o.type==="signin",t,"internal-error");const s=((r=i.multiFactorHint)==null?void 0:r.uid)||i.multiFactorUid;Re(s,t,"missing-multi-factor-info");const a={mfaPendingCredential:o.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Wl(t,a,"mfaSmsSignIn",async(h,g)=>{if(g.phoneSignInInfo.captchaResponse===og){Re((n==null?void 0:n.type)===sg,h,"argument-error");const _=await lx(h,g,n);return Z4(h,_)}return Z4(h,g)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneResponseInfo.sessionInfo}}else{const o={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Wl(t,o,"sendVerificationCode",async(c,d)=>{if(d.captchaResponse===og){Re((n==null?void 0:n.type)===sg,c,"argument-error");const h=await lx(c,d,n);return W4(c,h)}return W4(c,d)},"PHONE_PROVIDER").catch(c=>Promise.reject(c))).sessionInfo}}finally{n==null||n._reset()}}async function Kde(t,e){const n=Be(t);if(tn(n.auth.app))return Promise.reject(hr(n.auth));await aD(n,e)}async function lx(t,e,n){Re(n.type===sg,t,"argument-error");const r=await n.verify();Re(typeof r=="string",t,"argument-error");const i={...e};if("phoneEnrollmentInfo"in i){const o=i.phoneEnrollmentInfo.phoneNumber,s=i.phoneEnrollmentInfo.captchaResponse,a=i.phoneEnrollmentInfo.clientType,u=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r,captchaResponse:s,clientType:a,recaptchaVersion:u}}),i}else if("phoneSignInInfo"in i){const o=i.phoneSignInInfo.captchaResponse,s=i.phoneSignInInfo.clientType,a=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:o,clientType:s,recaptchaVersion:a}}),i}else return Object.assign(i,{recaptchaToken:r}),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lc=class i0{constructor(e){this.providerId=i0.PROVIDER_ID,this.auth=yn(e)}verifyPhoneNumber(e,n){return fb(this.auth,e,Be(n))}static credential(e,n){return Ic._fromVerification(e,n)}static credentialFromResult(e){const n=e;return i0.credentialFromTaggedObject(n)}static credentialFromError(e){return i0.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Ic._fromTokenResponse(n,r):null}};Lc.PROVIDER_ID="phone";Lc.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function of(t,e){return e?Oi(e):(Re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD extends Uh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ia(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ia(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ia(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Wde(t){return TW(t.auth,new mD(t),t.bypassAuthState)}function Yde(t){const{auth:e,user:n}=t;return Re(n,e,"internal-error"),bW(n,new mD(t),t.bypassAuthState)}async function Jde(t){const{auth:e,user:n}=t;return Re(n,e,"internal-error"),aD(n,new mD(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LW{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Wde;case"linkViaPopup":case"linkViaRedirect":return Jde;case"reauthViaPopup":case"reauthViaRedirect":return Yde;default:pr(this.auth,"internal-error")}}resolve(e){Jo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Jo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xde=new cy(2e3,1e4);async function Qde(t,e,n){if(tn(t.app))return Promise.reject(Qn(t,"operation-not-supported-in-this-environment"));const r=yn(t);Vh(t,e,Wa);const i=of(r,n);return new Ta(r,"signInViaPopup",e,i).executeNotNull()}async function Zde(t,e,n){const r=Be(t);if(tn(r.auth.app))return Promise.reject(Qn(r.auth,"operation-not-supported-in-this-environment"));Vh(r.auth,e,Wa);const i=of(r.auth,n);return new Ta(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function ehe(t,e,n){const r=Be(t);Vh(r.auth,e,Wa);const i=of(r.auth,n);return new Ta(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Ta extends LW{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Ta.currentPopupAction&&Ta.currentPopupAction.cancel(),Ta.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){Jo(this.filter.length===1,"Popup operations only handle one event");const e=my();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Qn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Qn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ta.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Xde.get())};e()}}Ta.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const the="pendingRedirect",ag=new Map;class nhe extends LW{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ag.get(this.auth._key());if(!e){try{const r=await rhe(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ag.set(this.auth._key(),e)}return this.bypassAuthState||ag.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rhe(t,e){const n=UW(e),r=VW(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function gD(t,e){return VW(t)._set(UW(e),"true")}function ihe(){ag.clear()}function yD(t,e){ag.set(t._key(),e)}function VW(t){return Oi(t._redirectPersistence)}function UW(t){return Cc(the,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ohe(t,e,n){return she(t,e,n)}async function she(t,e,n){if(tn(t.app))return Promise.reject(hr(t));const r=yn(t);Vh(t,e,Wa),await r._initializationPromise;const i=of(r,n);return await gD(i,r),i._openRedirect(r,e,"signInViaRedirect")}function ahe(t,e,n){return lhe(t,e,n)}async function lhe(t,e,n){const r=Be(t);if(Vh(r.auth,e,Wa),tn(r.auth.app))return Promise.reject(hr(r.auth));await r.auth._initializationPromise;const i=of(r.auth,n);await gD(i,r.auth);const o=await qW(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",o)}function uhe(t,e,n){return che(t,e,n)}async function che(t,e,n){const r=Be(t);Vh(r.auth,e,Wa),await r.auth._initializationPromise;const i=of(r.auth,n);await ob(!1,r,e.providerId),await gD(i,r.auth);const o=await qW(r);return i._openRedirect(r.auth,e,"linkViaRedirect",o)}async function fhe(t,e){return await yn(t)._initializationPromise,db(t,e,!1)}async function db(t,e,n=!1){if(tn(t.app))return Promise.reject(hr(t));const r=yn(t),i=of(r,e),s=await new nhe(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}async function qW(t){const e=my(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dhe=600*1e3;class FW{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hhe(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!BW(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Qn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=dhe&&this.cachedEventUids.clear(),this.cachedEventUids.has(eF(e))}saveEventToCache(e){this.cachedEventUids.add(eF(e)),this.lastProcessedEventTime=Date.now()}}function eF(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function BW({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function hhe(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return BW(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $W(t,e={}){return Cn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const phe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mhe=/^https?/;async function ghe(t){if(t.config.emulator)return;const{authorizedDomains:e}=await $W(t);for(const n of e)try{if(yhe(n))return}catch{}pr(t,"unauthorized-domain")}function yhe(t){const e=Ag(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!mhe.test(n))return!1;if(phe.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vhe=new cy(3e4,6e4);function tF(){const t=Fn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function _he(t){return new Promise((e,n)=>{var i,o,s;function r(){tF(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{tF(),n(Qn(t,"network-request-failed"))},timeout:vhe.get()})}if((o=(i=Fn().gapi)==null?void 0:i.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((s=Fn().gapi)!=null&&s.load)r();else{const a=hW("iframefcb");return Fn()[a]=()=>{gapi.load?r():n(Qn(t,"network-request-failed"))},sD(`${ffe()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw o0=null,e})}let o0=null;function whe(t){return o0=o0||_he(t),o0}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bhe=new cy(5e3,15e3),The="__/auth/iframe",Ehe="emulator/auth/iframe",She={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xhe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ahe(t){const e=t.config;Re(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?oD(e,Ehe):`https://${t.config.authDomain}/${The}`,r={apiKey:e.apiKey,appName:t.name,v:ja},i=xhe.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Oh(r).slice(1)}`}async function Che(t){const e=await whe(t),n=Fn().gapi;return Re(n,t,"internal-error"),e.open({where:document.body,url:Ahe(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:She,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const s=Qn(t,"network-request-failed"),a=Fn().setTimeout(()=>{o(s)},bhe.get());function u(){Fn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ihe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Rhe=500,Phe=600,Nhe="_blank",Mhe="http://localhost";class nF{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Dhe(t,e,n,r=Rhe,i=Phe){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u={...Ihe,width:r.toString(),height:i.toString(),top:o,left:s},c=gn().toLowerCase();n&&(a=aW(c)?Nhe:n),oW(c)&&(e=e||Mhe,u.scrollbars="yes");const d=Object.entries(u).reduce((g,[_,S])=>`${g}${_}=${S},`,"");if(tfe(c)&&a!=="_self")return khe(e||"",a),new nF(null);const h=window.open(e||"",a,d);Re(h,t,"popup-blocked");try{h.focus()}catch{}return new nF(h)}function khe(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ohe="__/auth/handler",Lhe="emulator/auth/handler",Vhe=encodeURIComponent("fac");async function qN(t,e,n,r,i,o){Re(t.config.authDomain,t,"auth-domain-config-required"),Re(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ja,eventId:i};if(e instanceof Wa){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",uue(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(o||{}))s[d]=h}if(e instanceof qh){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(s.scopes=d.join(","))}t.tenantId&&(s.tid=t.tenantId);const a=s;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const u=await t._getAppCheckToken(),c=u?`#${Vhe}=${encodeURIComponent(u)}`:"";return`${Uhe(t)}?${Oh(a).slice(1)}${c}`}function Uhe({config:t}){return t.emulator?oD(t,Lhe):`https://${t.authDomain}/${Ohe}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux="webStorageSupport";class qhe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ru,this._completeRedirectFn=db,this._overrideRedirectResult=yD}async _openPopup(e,n,r,i){var s;Jo((s=this.eventManagers[e._key()])==null?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await qN(e,n,r,Ag(),i);return Dhe(e,o,my())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await qN(e,n,r,Ag(),i);return Cde(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Jo(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Che(e),r=new FW(e);return n.register("authEvent",i=>(Re(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ux,{type:ux},i=>{var s;const o=(s=i==null?void 0:i[0])==null?void 0:s[ux];o!==void 0&&n(!!o),pr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ghe(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return fW()||sW()||dy()}}const zW=qhe;class Fhe{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return Ds("unexpected MultiFactorSessionType")}}}class vD extends Fhe{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new vD(e)}_finalizeEnroll(e,n,r){return wde(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return Lde(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class HW{constructor(){}static assertion(e){return vD._fromCredential(e)}}HW.FACTOR_ID="phone";var rF="@firebase/auth",iF="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bhe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $he(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function zhe(t){La(new To("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Re(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dW(t)},c=new afe(r,i,o,u);return Tfe(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),La(new To("auth-internal",e=>{const n=yn(e.getProvider("auth").getImmediate());return(r=>new Bhe(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),qi(rF,iF,$he(t)),qi(rF,iF,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hhe=300,Ghe=PK("authIdTokenMaxAge")||Hhe;let oF=null;const jhe=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Ghe)return;const i=n==null?void 0:n.token;oF!==i&&(oF=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Khe(t=tb()){const e=Lh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=bfe(t,{popupRedirectResolver:zW,persistence:[Qd,lb,ru]}),r=PK("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=jhe(o.toString());gde(n,s,()=>s(n.currentUser)),mde(n,a=>s(a))}}const i=IK("auth");return i&&mW(n,`http://${i}`),n}function Whe(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}lfe({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=Qn("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",Whe().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});zhe("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vc(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yhe=2e3;async function Jhe(t,e,n){const{BuildInfo:r}=Vc();Jo(e.sessionId,"AuthEvent did not contain a session ID");const i=await tpe(e.sessionId),o={};return dy()?o.ibi=r.packageName:fy()?o.apn=r.packageName:pr(t,"operation-not-supported-in-this-environment"),r.displayName&&(o.appDisplayName=r.displayName),o.sessionId=i,qN(t,n,e.type,void 0,e.eventId??void 0,o)}async function Xhe(t){const{BuildInfo:e}=Vc(),n={};dy()?n.iosBundleId=e.packageName:fy()?n.androidPackageName=e.packageName:pr(t,"operation-not-supported-in-this-environment"),await $W(t,n)}function Qhe(t){const{cordova:e}=Vc();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,efe()?"_blank":"_system","location=yes"),n(i)})})}async function Zhe(t,e,n){const{cordova:r}=Vc();let i=()=>{};try{await new Promise((o,s)=>{let a=null;function u(){var g;o();const h=(g=r.plugins.browsertab)==null?void 0:g.close;typeof h=="function"&&h(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function c(){a||(a=window.setTimeout(()=>{s(Qn(t,"redirect-cancelled-by-user"))},Yhe))}function d(){(document==null?void 0:document.visibilityState)==="visible"&&c()}e.addPassiveListener(u),document.addEventListener("resume",c,!1),fy()&&document.addEventListener("visibilitychange",d,!1),i=()=>{e.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",d,!1),a&&window.clearTimeout(a)}})}finally{i()}}function epe(t){var n,r,i,o,s,a,u,c,d,h;const e=Vc();Re(typeof((n=e==null?void 0:e.universalLinks)==null?void 0:n.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Re(typeof((r=e==null?void 0:e.BuildInfo)==null?void 0:r.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Re(typeof((s=(o=(i=e==null?void 0:e.cordova)==null?void 0:i.plugins)==null?void 0:o.browsertab)==null?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Re(typeof((c=(u=(a=e==null?void 0:e.cordova)==null?void 0:a.plugins)==null?void 0:u.browsertab)==null?void 0:c.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Re(typeof((h=(d=e==null?void 0:e.cordova)==null?void 0:d.InAppBrowser)==null?void 0:h.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function tpe(t){const e=npe(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function npe(t){if(Jo(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rpe=20;class ipe extends FW{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function ope(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:lpe(),postBody:null,tenantId:t.tenantId,error:Qn(t,"no-auth-event")}}function spe(t,e){return FN()._set(BN(t),e)}async function sF(t){const e=await FN()._get(BN(t));return e&&await FN()._remove(BN(t)),e}function ape(t,e){var r,i;const n=cpe(e);if(n.includes("/__/auth/callback")){const o=s0(n),s=o.firebaseError?upe(decodeURIComponent(o.firebaseError)):null,a=(i=(r=s==null?void 0:s.code)==null?void 0:r.split("auth/"))==null?void 0:i[1],u=a?Qn(a):null;return u?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:n,postBody:null}}return null}function lpe(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<rpe;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function FN(){return Oi(lb)}function BN(t){return Cc("authEvent",t.config.apiKey,t.name)}function upe(t){try{return JSON.parse(t)}catch{return null}}function cpe(t){const e=s0(t),n=e.link?decodeURIComponent(e.link):void 0,r=s0(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return s0(i).link||i||r||n||t}function s0(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return Rd(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fpe=500;class dpe{constructor(){this._redirectPersistence=ru,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=db,this._overrideRedirectResult=yD}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new ipe(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){pr(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){epe(e);const o=await this._initialize(e);await o.initialized(),o.resetRedirect(),ihe(),await this._originValidation(e);const s=ope(e,r,i);await spe(e,s);const a=await Jhe(e,s,n),u=await Qhe(a);return Zhe(e,o,u)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Xhe(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:o}=Vc(),s=setTimeout(async()=>{await sF(e),n.onEvent(aF())},fpe),a=async d=>{clearTimeout(s);const h=await sF(e);let g=null;h&&(d!=null&&d.url)&&(g=ape(h,d.url)),n.onEvent(g||aF())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const u=i,c=`${o.packageName.toLowerCase()}://`;Vc().handleOpenURL=async d=>{if(d.toLowerCase().startsWith(c)&&a({url:d}),typeof u=="function")try{u(d)}catch(h){console.error(h)}}}}const hpe=dpe;function aF(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Qn("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ppe(t,e){yn(t)._logFramework(e)}var mpe="@firebase/auth-compat",gpe="0.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ype=1e3;function lg(){var t;return((t=self==null?void 0:self.location)==null?void 0:t.protocol)||null}function vpe(){return lg()==="http:"||lg()==="https:"}function GW(t=gn()){return!!((lg()==="file:"||lg()==="ionic:"||lg()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function _pe(){return J2()||Zw()}function wpe(){return kK()&&(document==null?void 0:document.documentMode)===11}function bpe(t=gn()){return/Edge\/\d+/.test(t)}function Tpe(t=gn()){return wpe()||bpe(t)}function jW(){try{const t=self.localStorage,e=my();if(t)return t.setItem(e,"1"),t.removeItem(e),Tpe()?Eg():!0}catch{return _D()&&Eg()}return!1}function _D(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function cx(){return(vpe()||DK()||GW())&&!_pe()&&jW()&&!_D()}function KW(){return GW()&&typeof document<"u"}async function Epe(){return KW()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},ype);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function Spe(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di={LOCAL:"local",NONE:"none",SESSION:"session"},_m=Re,WW="persistence";function xpe(t,e){if(_m(Object.values(Di).includes(e),t,"invalid-persistence-type"),J2()){_m(e!==Di.SESSION,t,"unsupported-persistence-type");return}if(Zw()){_m(e===Di.NONE,t,"unsupported-persistence-type");return}if(_D()){_m(e===Di.NONE||e===Di.LOCAL&&Eg(),t,"unsupported-persistence-type");return}_m(e===Di.NONE||jW(),t,"unsupported-persistence-type")}async function $N(t){await t._initializationPromise;const e=YW(),n=Cc(WW,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistenceType())}function Ape(t,e){const n=YW();if(!n)return[];const r=Cc(WW,t,e);switch(n.getItem(r)){case Di.NONE:return[Jd];case Di.LOCAL:return[Qd,ru];case Di.SESSION:return[ru];default:return[]}}function YW(){var t;try{return((t=Spe())==null?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cpe=Re;class Hl{constructor(){this.browserResolver=Oi(zW),this.cordovaResolver=Oi(hpe),this.underlyingResolver=null,this._redirectPersistence=ru,this._completeRedirectFn=db,this._overrideRedirectResult=yD}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return KW()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Cpe(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await Epe();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JW(t){return t.unwrap()}function Ipe(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rpe(t){return XW(t)}function Ppe(t,e){var r;const n=(r=e.customData)==null?void 0:r._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new Npe(t,_de(t,e))}else if(n){const i=XW(e),o=e;i&&(o.credential=i,o.tenantId=n.tenantId||void 0,o.email=n.email||void 0,o.phoneNumber=n.phoneNumber||void 0)}}function XW(t){const{_tokenResponse:e}=t instanceof zr?t.customData:t;if(!e)return null;if(!(t instanceof zr)&&"temporaryProof"in e&&"phoneNumber"in e)return Lc.credentialFromResult(t);const n=e.providerId;if(!n||n===ym.PASSWORD)return null;let r;switch(n){case ym.GOOGLE:r=Is;break;case ym.FACEBOOK:r=Cs;break;case ym.GITHUB:r=Rs;break;case ym.TWITTER:r=Ps;break;default:const{oauthIdToken:i,oauthAccessToken:o,oauthTokenSecret:s,pendingToken:a,nonce:u}=e;return!o&&!s&&!i&&!a?null:a?n.startsWith("saml.")?Xd._create(n,a):$s._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:i,accessToken:o}):new Ld(n).credential({idToken:i,accessToken:o,rawNonce:u})}return t instanceof zr?r.credentialFromError(t):r.credentialFromResult(t)}function fi(t,e){return e.catch(n=>{throw n instanceof zr&&Ppe(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:Rpe(n),additionalUserInfo:pde(n),user:hb.getOrCreate(i)}})}async function zN(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>fi(t,n.confirm(r))}}class Npe{constructor(e,n){this.resolver=n,this.auth=Ipe(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return fi(JW(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hb=class zm{constructor(e){this._delegate=e,this.multiFactor=Tde(e)}static getOrCreate(e){return zm.USER_MAP.has(e)||zm.USER_MAP.set(e,new zm(e)),zm.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return fi(this.auth,EW(this._delegate,e))}async linkWithPhoneNumber(e,n){return zN(this.auth,Gde(this._delegate,e,n))}async linkWithPopup(e){return fi(this.auth,ehe(this._delegate,e,Hl))}async linkWithRedirect(e){return await $N(yn(this.auth)),uhe(this._delegate,e,Hl)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return fi(this.auth,SW(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return zN(this.auth,jde(this._delegate,e,n))}reauthenticateWithPopup(e){return fi(this.auth,Zde(this._delegate,e,Hl))}async reauthenticateWithRedirect(e){return await $N(yn(this.auth)),ahe(this._delegate,e,Hl)}sendEmailVerification(e){return ide(this._delegate,e)}async unlink(e){return await Gfe(this._delegate,e),this}updateEmail(e){return lde(this._delegate,e)}updatePassword(e){return CW(this._delegate,e)}updatePhoneNumber(e){return Kde(this._delegate,e)}updateProfile(e){return ade(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return ode(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};hb.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wm=Re;class HN{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;wm(r,"invalid-api-key",{appName:e.name}),wm(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?Hl:void 0;this._delegate=n.initialize({options:{persistence:Mpe(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(kce),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?hb.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){mW(this._delegate,e,n)}applyActionCode(e){return Jfe(this._delegate,e)}checkActionCode(e){return xW(this._delegate,e)}confirmPasswordReset(e,n){return Yfe(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return fi(this._delegate,Qfe(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return rde(this._delegate,e)}isSignInWithEmailLink(e){return ede(this._delegate,e)}async getRedirectResult(){wm(cx(),this._delegate,"operation-not-supported-in-this-environment");const e=await fhe(this._delegate,Hl);return e?fi(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){ppe(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:o,complete:s}=lF(e,n,r);return this._delegate.onAuthStateChanged(i,o,s)}onIdTokenChanged(e,n,r){const{next:i,error:o,complete:s}=lF(e,n,r);return this._delegate.onIdTokenChanged(i,o,s)}sendSignInLinkToEmail(e,n){return Zfe(this._delegate,e,n)}sendPasswordResetEmail(e,n){return Wfe(this._delegate,e,n||void 0)}async setPersistence(e){xpe(this._delegate,e);let n;switch(e){case Di.SESSION:n=ru;break;case Di.LOCAL:n=await Oi(Qd)._isAvailable()?Qd:lb;break;case Di.NONE:n=Jd;break;default:return pr("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return fi(this._delegate,Hfe(this._delegate))}signInWithCredential(e){return fi(this._delegate,sb(this._delegate,e))}signInWithCustomToken(e){return fi(this._delegate,Kfe(this._delegate,e))}signInWithEmailAndPassword(e,n){return fi(this._delegate,AW(this._delegate,e,n))}signInWithEmailLink(e,n){return fi(this._delegate,tde(this._delegate,e,n))}signInWithPhoneNumber(e,n){return zN(this._delegate,Hde(this._delegate,e,n))}async signInWithPopup(e){return wm(cx(),this._delegate,"operation-not-supported-in-this-environment"),fi(this._delegate,Qde(this._delegate,e,Hl))}async signInWithRedirect(e){return wm(cx(),this._delegate,"operation-not-supported-in-this-environment"),await $N(this._delegate),ohe(this._delegate,e,Hl)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return Xfe(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}HN.Persistence=Di;function lF(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:s=>i(s&&hb.getOrCreate(s)),error:e,complete:n}}function Mpe(t,e){const n=Ape(t,e);if(typeof self<"u"&&!n.includes(Qd)&&n.push(Qd),typeof window<"u")for(const r of[lb,ru])n.includes(r)||n.push(r);return n.includes(Jd)||n.push(Jd),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{static credential(e,n){return Lc.credential(e,n)}constructor(){this.providerId="phone",this._delegate=new Lc(JW(rf.auth()))}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}wD.PHONE_SIGN_IN_METHOD=Lc.PHONE_SIGN_IN_METHOD;wD.PROVIDER_ID=Lc.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dpe=Re;class kpe{constructor(e,n,r=rf.app()){var i;Dpe((i=r.options)==null?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new $de(r.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ope="auth-compat";function Lpe(t){t.INTERNAL.registerComponent(new To(Ope,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new HN(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:cd.EMAIL_SIGNIN,PASSWORD_RESET:cd.PASSWORD_RESET,RECOVER_EMAIL:cd.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:cd.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:cd.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:cd.VERIFY_EMAIL}},EmailAuthProvider:mu,FacebookAuthProvider:Cs,GithubAuthProvider:Rs,GoogleAuthProvider:Is,OAuthProvider:Ld,SAMLAuthProvider:M0,PhoneAuthProvider:wD,PhoneMultiFactorGenerator:HW,RecaptchaVerifier:kpe,TwitterAuthProvider:Ps,Auth:HN,AuthCredential:Uh,Error:zr}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(mpe,gpe)}Lpe(rf);var uF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Yl,QW;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,O){function R(){}R.prototype=O.prototype,P.D=O.prototype,P.prototype=new R,P.prototype.constructor=P,P.C=function(U,L,F){for(var $=Array(arguments.length-2),H=2;H<arguments.length;H++)$[H-2]=arguments[H];return O.prototype[L].apply(U,$)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,O,R){R||(R=0);var U=Array(16);if(typeof O=="string")for(var L=0;16>L;++L)U[L]=O.charCodeAt(R++)|O.charCodeAt(R++)<<8|O.charCodeAt(R++)<<16|O.charCodeAt(R++)<<24;else for(L=0;16>L;++L)U[L]=O[R++]|O[R++]<<8|O[R++]<<16|O[R++]<<24;O=P.g[0],R=P.g[1],L=P.g[2];var F=P.g[3],$=O+(F^R&(L^F))+U[0]+3614090360&4294967295;O=R+($<<7&4294967295|$>>>25),$=F+(L^O&(R^L))+U[1]+3905402710&4294967295,F=O+($<<12&4294967295|$>>>20),$=L+(R^F&(O^R))+U[2]+606105819&4294967295,L=F+($<<17&4294967295|$>>>15),$=R+(O^L&(F^O))+U[3]+3250441966&4294967295,R=L+($<<22&4294967295|$>>>10),$=O+(F^R&(L^F))+U[4]+4118548399&4294967295,O=R+($<<7&4294967295|$>>>25),$=F+(L^O&(R^L))+U[5]+1200080426&4294967295,F=O+($<<12&4294967295|$>>>20),$=L+(R^F&(O^R))+U[6]+2821735955&4294967295,L=F+($<<17&4294967295|$>>>15),$=R+(O^L&(F^O))+U[7]+4249261313&4294967295,R=L+($<<22&4294967295|$>>>10),$=O+(F^R&(L^F))+U[8]+1770035416&4294967295,O=R+($<<7&4294967295|$>>>25),$=F+(L^O&(R^L))+U[9]+2336552879&4294967295,F=O+($<<12&4294967295|$>>>20),$=L+(R^F&(O^R))+U[10]+4294925233&4294967295,L=F+($<<17&4294967295|$>>>15),$=R+(O^L&(F^O))+U[11]+2304563134&4294967295,R=L+($<<22&4294967295|$>>>10),$=O+(F^R&(L^F))+U[12]+1804603682&4294967295,O=R+($<<7&4294967295|$>>>25),$=F+(L^O&(R^L))+U[13]+4254626195&4294967295,F=O+($<<12&4294967295|$>>>20),$=L+(R^F&(O^R))+U[14]+2792965006&4294967295,L=F+($<<17&4294967295|$>>>15),$=R+(O^L&(F^O))+U[15]+1236535329&4294967295,R=L+($<<22&4294967295|$>>>10),$=O+(L^F&(R^L))+U[1]+4129170786&4294967295,O=R+($<<5&4294967295|$>>>27),$=F+(R^L&(O^R))+U[6]+3225465664&4294967295,F=O+($<<9&4294967295|$>>>23),$=L+(O^R&(F^O))+U[11]+643717713&4294967295,L=F+($<<14&4294967295|$>>>18),$=R+(F^O&(L^F))+U[0]+3921069994&4294967295,R=L+($<<20&4294967295|$>>>12),$=O+(L^F&(R^L))+U[5]+3593408605&4294967295,O=R+($<<5&4294967295|$>>>27),$=F+(R^L&(O^R))+U[10]+38016083&4294967295,F=O+($<<9&4294967295|$>>>23),$=L+(O^R&(F^O))+U[15]+3634488961&4294967295,L=F+($<<14&4294967295|$>>>18),$=R+(F^O&(L^F))+U[4]+3889429448&4294967295,R=L+($<<20&4294967295|$>>>12),$=O+(L^F&(R^L))+U[9]+568446438&4294967295,O=R+($<<5&4294967295|$>>>27),$=F+(R^L&(O^R))+U[14]+3275163606&4294967295,F=O+($<<9&4294967295|$>>>23),$=L+(O^R&(F^O))+U[3]+4107603335&4294967295,L=F+($<<14&4294967295|$>>>18),$=R+(F^O&(L^F))+U[8]+1163531501&4294967295,R=L+($<<20&4294967295|$>>>12),$=O+(L^F&(R^L))+U[13]+2850285829&4294967295,O=R+($<<5&4294967295|$>>>27),$=F+(R^L&(O^R))+U[2]+4243563512&4294967295,F=O+($<<9&4294967295|$>>>23),$=L+(O^R&(F^O))+U[7]+1735328473&4294967295,L=F+($<<14&4294967295|$>>>18),$=R+(F^O&(L^F))+U[12]+2368359562&4294967295,R=L+($<<20&4294967295|$>>>12),$=O+(R^L^F)+U[5]+4294588738&4294967295,O=R+($<<4&4294967295|$>>>28),$=F+(O^R^L)+U[8]+2272392833&4294967295,F=O+($<<11&4294967295|$>>>21),$=L+(F^O^R)+U[11]+1839030562&4294967295,L=F+($<<16&4294967295|$>>>16),$=R+(L^F^O)+U[14]+4259657740&4294967295,R=L+($<<23&4294967295|$>>>9),$=O+(R^L^F)+U[1]+2763975236&4294967295,O=R+($<<4&4294967295|$>>>28),$=F+(O^R^L)+U[4]+1272893353&4294967295,F=O+($<<11&4294967295|$>>>21),$=L+(F^O^R)+U[7]+4139469664&4294967295,L=F+($<<16&4294967295|$>>>16),$=R+(L^F^O)+U[10]+3200236656&4294967295,R=L+($<<23&4294967295|$>>>9),$=O+(R^L^F)+U[13]+681279174&4294967295,O=R+($<<4&4294967295|$>>>28),$=F+(O^R^L)+U[0]+3936430074&4294967295,F=O+($<<11&4294967295|$>>>21),$=L+(F^O^R)+U[3]+3572445317&4294967295,L=F+($<<16&4294967295|$>>>16),$=R+(L^F^O)+U[6]+76029189&4294967295,R=L+($<<23&4294967295|$>>>9),$=O+(R^L^F)+U[9]+3654602809&4294967295,O=R+($<<4&4294967295|$>>>28),$=F+(O^R^L)+U[12]+3873151461&4294967295,F=O+($<<11&4294967295|$>>>21),$=L+(F^O^R)+U[15]+530742520&4294967295,L=F+($<<16&4294967295|$>>>16),$=R+(L^F^O)+U[2]+3299628645&4294967295,R=L+($<<23&4294967295|$>>>9),$=O+(L^(R|~F))+U[0]+4096336452&4294967295,O=R+($<<6&4294967295|$>>>26),$=F+(R^(O|~L))+U[7]+1126891415&4294967295,F=O+($<<10&4294967295|$>>>22),$=L+(O^(F|~R))+U[14]+2878612391&4294967295,L=F+($<<15&4294967295|$>>>17),$=R+(F^(L|~O))+U[5]+4237533241&4294967295,R=L+($<<21&4294967295|$>>>11),$=O+(L^(R|~F))+U[12]+1700485571&4294967295,O=R+($<<6&4294967295|$>>>26),$=F+(R^(O|~L))+U[3]+2399980690&4294967295,F=O+($<<10&4294967295|$>>>22),$=L+(O^(F|~R))+U[10]+4293915773&4294967295,L=F+($<<15&4294967295|$>>>17),$=R+(F^(L|~O))+U[1]+2240044497&4294967295,R=L+($<<21&4294967295|$>>>11),$=O+(L^(R|~F))+U[8]+1873313359&4294967295,O=R+($<<6&4294967295|$>>>26),$=F+(R^(O|~L))+U[15]+4264355552&4294967295,F=O+($<<10&4294967295|$>>>22),$=L+(O^(F|~R))+U[6]+2734768916&4294967295,L=F+($<<15&4294967295|$>>>17),$=R+(F^(L|~O))+U[13]+1309151649&4294967295,R=L+($<<21&4294967295|$>>>11),$=O+(L^(R|~F))+U[4]+4149444226&4294967295,O=R+($<<6&4294967295|$>>>26),$=F+(R^(O|~L))+U[11]+3174756917&4294967295,F=O+($<<10&4294967295|$>>>22),$=L+(O^(F|~R))+U[2]+718787259&4294967295,L=F+($<<15&4294967295|$>>>17),$=R+(F^(L|~O))+U[9]+3951481745&4294967295,P.g[0]=P.g[0]+O&4294967295,P.g[1]=P.g[1]+(L+($<<21&4294967295|$>>>11))&4294967295,P.g[2]=P.g[2]+L&4294967295,P.g[3]=P.g[3]+F&4294967295}r.prototype.u=function(P,O){O===void 0&&(O=P.length);for(var R=O-this.blockSize,U=this.B,L=this.h,F=0;F<O;){if(L==0)for(;F<=R;)i(this,P,F),F+=this.blockSize;if(typeof P=="string"){for(;F<O;)if(U[L++]=P.charCodeAt(F++),L==this.blockSize){i(this,U),L=0;break}}else for(;F<O;)if(U[L++]=P[F++],L==this.blockSize){i(this,U),L=0;break}}this.h=L,this.o+=O},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var O=1;O<P.length-8;++O)P[O]=0;var R=8*this.o;for(O=P.length-8;O<P.length;++O)P[O]=R&255,R/=256;for(this.u(P),P=Array(16),O=R=0;4>O;++O)for(var U=0;32>U;U+=8)P[R++]=this.g[O]>>>U&255;return P};function o(P,O){var R=a;return Object.prototype.hasOwnProperty.call(R,P)?R[P]:R[P]=O(P)}function s(P,O){this.h=O;for(var R=[],U=!0,L=P.length-1;0<=L;L--){var F=P[L]|0;U&&F==O||(R[L]=F,U=!1)}this.g=R}var a={};function u(P){return-128<=P&&128>P?o(P,function(O){return new s([O|0],0>O?-1:0)}):new s([P|0],0>P?-1:0)}function c(P){if(isNaN(P)||!isFinite(P))return h;if(0>P)return T(c(-P));for(var O=[],R=1,U=0;P>=R;U++)O[U]=P/R|0,R*=4294967296;return new s(O,0)}function d(P,O){if(P.length==0)throw Error("number format error: empty string");if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(P.charAt(0)=="-")return T(d(P.substring(1),O));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=c(Math.pow(O,8)),U=h,L=0;L<P.length;L+=8){var F=Math.min(8,P.length-L),$=parseInt(P.substring(L,L+F),O);8>F?(F=c(Math.pow(O,F)),U=U.j(F).add(c($))):(U=U.j(R),U=U.add(c($)))}return U}var h=u(0),g=u(1),_=u(16777216);t=s.prototype,t.m=function(){if(b(this))return-T(this).m();for(var P=0,O=1,R=0;R<this.g.length;R++){var U=this.i(R);P+=(0<=U?U:4294967296+U)*O,O*=4294967296}return P},t.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(S(this))return"0";if(b(this))return"-"+T(this).toString(P);for(var O=c(Math.pow(P,6)),R=this,U="";;){var L=N(R,O).g;R=x(R,L.j(O));var F=((0<R.g.length?R.g[0]:R.h)>>>0).toString(P);if(R=L,S(R))return F+U;for(;6>F.length;)F="0"+F;U=F+U}},t.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function S(P){if(P.h!=0)return!1;for(var O=0;O<P.g.length;O++)if(P.g[O]!=0)return!1;return!0}function b(P){return P.h==-1}t.l=function(P){return P=x(this,P),b(P)?-1:S(P)?0:1};function T(P){for(var O=P.g.length,R=[],U=0;U<O;U++)R[U]=~P.g[U];return new s(R,~P.h).add(g)}t.abs=function(){return b(this)?T(this):this},t.add=function(P){for(var O=Math.max(this.g.length,P.g.length),R=[],U=0,L=0;L<=O;L++){var F=U+(this.i(L)&65535)+(P.i(L)&65535),$=(F>>>16)+(this.i(L)>>>16)+(P.i(L)>>>16);U=$>>>16,F&=65535,$&=65535,R[L]=$<<16|F}return new s(R,R[R.length-1]&-2147483648?-1:0)};function x(P,O){return P.add(T(O))}t.j=function(P){if(S(this)||S(P))return h;if(b(this))return b(P)?T(this).j(T(P)):T(T(this).j(P));if(b(P))return T(this.j(T(P)));if(0>this.l(_)&&0>P.l(_))return c(this.m()*P.m());for(var O=this.g.length+P.g.length,R=[],U=0;U<2*O;U++)R[U]=0;for(U=0;U<this.g.length;U++)for(var L=0;L<P.g.length;L++){var F=this.i(U)>>>16,$=this.i(U)&65535,H=P.i(L)>>>16,Y=P.i(L)&65535;R[2*U+2*L]+=$*Y,C(R,2*U+2*L),R[2*U+2*L+1]+=F*Y,C(R,2*U+2*L+1),R[2*U+2*L+1]+=$*H,C(R,2*U+2*L+1),R[2*U+2*L+2]+=F*H,C(R,2*U+2*L+2)}for(U=0;U<O;U++)R[U]=R[2*U+1]<<16|R[2*U];for(U=O;U<2*O;U++)R[U]=0;return new s(R,0)};function C(P,O){for(;(P[O]&65535)!=P[O];)P[O+1]+=P[O]>>>16,P[O]&=65535,O++}function I(P,O){this.g=P,this.h=O}function N(P,O){if(S(O))throw Error("division by zero");if(S(P))return new I(h,h);if(b(P))return O=N(T(P),O),new I(T(O.g),T(O.h));if(b(O))return O=N(P,T(O)),new I(T(O.g),O.h);if(30<P.g.length){if(b(P)||b(O))throw Error("slowDivide_ only works with positive integers.");for(var R=g,U=O;0>=U.l(P);)R=V(R),U=V(U);var L=q(R,1),F=q(U,1);for(U=q(U,2),R=q(R,2);!S(U);){var $=F.add(U);0>=$.l(P)&&(L=L.add(R),F=$),U=q(U,1),R=q(R,1)}return O=x(P,L.j(O)),new I(L,O)}for(L=h;0<=P.l(O);){for(R=Math.max(1,Math.floor(P.m()/O.m())),U=Math.ceil(Math.log(R)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),F=c(R),$=F.j(O);b($)||0<$.l(P);)R-=U,F=c(R),$=F.j(O);S(F)&&(F=g),L=L.add(F),P=x(P,$)}return new I(L,P)}t.A=function(P){return N(this,P).h},t.and=function(P){for(var O=Math.max(this.g.length,P.g.length),R=[],U=0;U<O;U++)R[U]=this.i(U)&P.i(U);return new s(R,this.h&P.h)},t.or=function(P){for(var O=Math.max(this.g.length,P.g.length),R=[],U=0;U<O;U++)R[U]=this.i(U)|P.i(U);return new s(R,this.h|P.h)},t.xor=function(P){for(var O=Math.max(this.g.length,P.g.length),R=[],U=0;U<O;U++)R[U]=this.i(U)^P.i(U);return new s(R,this.h^P.h)};function V(P){for(var O=P.g.length+1,R=[],U=0;U<O;U++)R[U]=P.i(U)<<1|P.i(U-1)>>>31;return new s(R,P.h)}function q(P,O){var R=O>>5;O%=32;for(var U=P.g.length-R,L=[],F=0;F<U;F++)L[F]=0<O?P.i(F+R)>>>O|P.i(F+R+1)<<32-O:P.i(F+R);return new s(L,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,QW=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=c,s.fromString=d,Yl=s}).apply(typeof uF<"u"?uF:typeof self<"u"?self:typeof window<"u"?window:{});var w_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ZW,Hm,eY,a0,GN,tY,nY,rY;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(w,k,B){return w==Array.prototype||w==Object.prototype||(w[k]=B.value),w};function n(w){w=[typeof globalThis=="object"&&globalThis,w,typeof window=="object"&&window,typeof self=="object"&&self,typeof w_=="object"&&w_];for(var k=0;k<w.length;++k){var B=w[k];if(B&&B.Math==Math)return B}throw Error("Cannot find global object")}var r=n(this);function i(w,k){if(k)e:{var B=r;w=w.split(".");for(var W=0;W<w.length-1;W++){var le=w[W];if(!(le in B))break e;B=B[le]}w=w[w.length-1],W=B[w],k=k(W),k!=W&&k!=null&&e(B,w,{configurable:!0,writable:!0,value:k})}}function o(w,k){w instanceof String&&(w+="");var B=0,W=!1,le={next:function(){if(!W&&B<w.length){var me=B++;return{value:k(me,w[me]),done:!1}}return W=!0,{done:!0,value:void 0}}};return le[Symbol.iterator]=function(){return le},le}i("Array.prototype.values",function(w){return w||function(){return o(this,function(k,B){return B})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function u(w){var k=typeof w;return k=k!="object"?k:w?Array.isArray(w)?"array":k:"null",k=="array"||k=="object"&&typeof w.length=="number"}function c(w){var k=typeof w;return k=="object"&&w!=null||k=="function"}function d(w,k,B){return w.call.apply(w.bind,arguments)}function h(w,k,B){if(!w)throw Error();if(2<arguments.length){var W=Array.prototype.slice.call(arguments,2);return function(){var le=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(le,W),w.apply(k,le)}}return function(){return w.apply(k,arguments)}}function g(w,k,B){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,g.apply(null,arguments)}function _(w,k){var B=Array.prototype.slice.call(arguments,1);return function(){var W=B.slice();return W.push.apply(W,arguments),w.apply(this,W)}}function S(w,k){function B(){}B.prototype=k.prototype,w.aa=k.prototype,w.prototype=new B,w.prototype.constructor=w,w.Qb=function(W,le,me){for(var Ne=Array(arguments.length-2),_t=2;_t<arguments.length;_t++)Ne[_t-2]=arguments[_t];return k.prototype[le].apply(W,Ne)}}function b(w){const k=w.length;if(0<k){const B=Array(k);for(let W=0;W<k;W++)B[W]=w[W];return B}return[]}function T(w,k){for(let B=1;B<arguments.length;B++){const W=arguments[B];if(u(W)){const le=w.length||0,me=W.length||0;w.length=le+me;for(let Ne=0;Ne<me;Ne++)w[le+Ne]=W[Ne]}else w.push(W)}}class x{constructor(k,B){this.i=k,this.j=B,this.h=0,this.g=null}get(){let k;return 0<this.h?(this.h--,k=this.g,this.g=k.next,k.next=null):k=this.i(),k}}function C(w){return/^[\s\xa0]*$/.test(w)}function I(){var w=a.navigator;return w&&(w=w.userAgent)?w:""}function N(w){return N[" "](w),w}N[" "]=function(){};var V=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function q(w,k,B){for(const W in w)k.call(B,w[W],W,w)}function P(w,k){for(const B in w)k.call(void 0,w[B],B,w)}function O(w){const k={};for(const B in w)k[B]=w[B];return k}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(w,k){let B,W;for(let le=1;le<arguments.length;le++){W=arguments[le];for(B in W)w[B]=W[B];for(let me=0;me<R.length;me++)B=R[me],Object.prototype.hasOwnProperty.call(W,B)&&(w[B]=W[B])}}function L(w){var k=1;w=w.split(":");const B=[];for(;0<k&&w.length;)B.push(w.shift()),k--;return w.length&&B.push(w.join(":")),B}function F(w){a.setTimeout(()=>{throw w},0)}function $(){var w=X;let k=null;return w.g&&(k=w.g,w.g=w.g.next,w.g||(w.h=null),k.next=null),k}class H{constructor(){this.h=this.g=null}add(k,B){const W=Y.get();W.set(k,B),this.h?this.h.next=W:this.g=W,this.h=W}}var Y=new x(()=>new K,w=>w.reset());class K{constructor(){this.next=this.g=this.h=null}set(k,B){this.h=k,this.g=B,this.next=null}reset(){this.next=this.g=this.h=null}}let Q,re=!1,X=new H,G=()=>{const w=a.Promise.resolve(void 0);Q=()=>{w.then(te)}};var te=()=>{for(var w;w=$();){try{w.h.call(w.g)}catch(B){F(B)}var k=Y;k.j(w),100>k.h&&(k.h++,w.next=k.g,k.g=w)}re=!1};function ee(){this.s=this.s,this.C=this.C}ee.prototype.s=!1,ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(w,k){this.type=w,this.g=this.target=k,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var J=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var w=!1,k=Object.defineProperty({},"passive",{get:function(){w=!0}});try{const B=()=>{};a.addEventListener("test",B,k),a.removeEventListener("test",B,k)}catch{}return w})();function ne(w,k){if(ae.call(this,w?w.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,w){var B=this.type=w.type,W=w.changedTouches&&w.changedTouches.length?w.changedTouches[0]:null;if(this.target=w.target||w.srcElement,this.g=k,k=w.relatedTarget){if(V){e:{try{N(k.nodeName);var le=!0;break e}catch{}le=!1}le||(k=null)}}else B=="mouseover"?k=w.fromElement:B=="mouseout"&&(k=w.toElement);this.relatedTarget=k,W?(this.clientX=W.clientX!==void 0?W.clientX:W.pageX,this.clientY=W.clientY!==void 0?W.clientY:W.pageY,this.screenX=W.screenX||0,this.screenY=W.screenY||0):(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0),this.button=w.button,this.key=w.key||"",this.ctrlKey=w.ctrlKey,this.altKey=w.altKey,this.shiftKey=w.shiftKey,this.metaKey=w.metaKey,this.pointerId=w.pointerId||0,this.pointerType=typeof w.pointerType=="string"?w.pointerType:oe[w.pointerType]||"",this.state=w.state,this.i=w,w.defaultPrevented&&ne.aa.h.call(this)}}S(ne,ae);var oe={2:"touch",3:"pen",4:"mouse"};ne.prototype.h=function(){ne.aa.h.call(this);var w=this.i;w.preventDefault?w.preventDefault():w.returnValue=!1};var we="closure_listenable_"+(1e6*Math.random()|0),Ie=0;function ye(w,k,B,W,le){this.listener=w,this.proxy=null,this.src=k,this.type=B,this.capture=!!W,this.ha=le,this.key=++Ie,this.da=this.fa=!1}function Ce(w){w.da=!0,w.listener=null,w.proxy=null,w.src=null,w.ha=null}function ke(w){this.src=w,this.g={},this.h=0}ke.prototype.add=function(w,k,B,W,le){var me=w.toString();w=this.g[me],w||(w=this.g[me]=[],this.h++);var Ne=Ze(w,k,W,le);return-1<Ne?(k=w[Ne],B||(k.fa=!1)):(k=new ye(k,this.src,me,!!W,le),k.fa=B,w.push(k)),k};function _e(w,k){var B=k.type;if(B in w.g){var W=w.g[B],le=Array.prototype.indexOf.call(W,k,void 0),me;(me=0<=le)&&Array.prototype.splice.call(W,le,1),me&&(Ce(k),w.g[B].length==0&&(delete w.g[B],w.h--))}}function Ze(w,k,B,W){for(var le=0;le<w.length;++le){var me=w[le];if(!me.da&&me.listener==k&&me.capture==!!B&&me.ha==W)return le}return-1}var Ue="closure_lm_"+(1e6*Math.random()|0),Le={};function st(w,k,B,W,le){if(Array.isArray(k)){for(var me=0;me<k.length;me++)st(w,k[me],B,W,le);return null}return B=ze(B),w&&w[we]?w.K(k,B,c(W)?!!W.capture:!1,le):Pe(w,k,B,!1,W,le)}function Pe(w,k,B,W,le,me){if(!k)throw Error("Invalid event type");var Ne=c(le)?!!le.capture:!!le,_t=Me(w);if(_t||(w[Ue]=_t=new ke(w)),B=_t.add(k,B,W,Ne,me),B.proxy)return B;if(W=qe(),B.proxy=W,W.src=w,W.listener=B,w.addEventListener)J||(le=Ne),le===void 0&&(le=!1),w.addEventListener(k.toString(),W,le);else if(w.attachEvent)w.attachEvent(Rn(k.toString()),W);else if(w.addListener&&w.removeListener)w.addListener(W);else throw Error("addEventListener and attachEvent are unavailable.");return B}function qe(){function w(B){return k.call(w.src,w.listener,B)}const k=xe;return w}function Rt(w,k,B,W,le){if(Array.isArray(k))for(var me=0;me<k.length;me++)Rt(w,k[me],B,W,le);else W=c(W)?!!W.capture:!!W,B=ze(B),w&&w[we]?(w=w.i,k=String(k).toString(),k in w.g&&(me=w.g[k],B=Ze(me,B,W,le),-1<B&&(Ce(me[B]),Array.prototype.splice.call(me,B,1),me.length==0&&(delete w.g[k],w.h--)))):w&&(w=Me(w))&&(k=w.g[k.toString()],w=-1,k&&(w=Ze(k,B,W,le)),(B=-1<w?k[w]:null)&&In(B))}function In(w){if(typeof w!="number"&&w&&!w.da){var k=w.src;if(k&&k[we])_e(k.i,w);else{var B=w.type,W=w.proxy;k.removeEventListener?k.removeEventListener(B,W,w.capture):k.detachEvent?k.detachEvent(Rn(B),W):k.addListener&&k.removeListener&&k.removeListener(W),(B=Me(k))?(_e(B,w),B.h==0&&(B.src=null,k[Ue]=null)):Ce(w)}}}function Rn(w){return w in Le?Le[w]:Le[w]="on"+w}function xe(w,k){if(w.da)w=!0;else{k=new ne(k,this);var B=w.listener,W=w.ha||w.src;w.fa&&In(w),w=B.call(W,k)}return w}function Me(w){return w=w[Ue],w instanceof ke?w:null}var $e="__closure_events_fn_"+(1e9*Math.random()>>>0);function ze(w){return typeof w=="function"?w:(w[$e]||(w[$e]=function(k){return w.handleEvent(k)}),w[$e])}function He(){ee.call(this),this.i=new ke(this),this.M=this,this.F=null}S(He,ee),He.prototype[we]=!0,He.prototype.removeEventListener=function(w,k,B,W){Rt(this,w,k,B,W)};function We(w,k){var B,W=w.F;if(W)for(B=[];W;W=W.F)B.push(W);if(w=w.M,W=k.type||k,typeof k=="string")k=new ae(k,w);else if(k instanceof ae)k.target=k.target||w;else{var le=k;k=new ae(W,w),U(k,le)}if(le=!0,B)for(var me=B.length-1;0<=me;me--){var Ne=k.g=B[me];le=vt(Ne,W,!0,k)&&le}if(Ne=k.g=w,le=vt(Ne,W,!0,k)&&le,le=vt(Ne,W,!1,k)&&le,B)for(me=0;me<B.length;me++)Ne=k.g=B[me],le=vt(Ne,W,!1,k)&&le}He.prototype.N=function(){if(He.aa.N.call(this),this.i){var w=this.i,k;for(k in w.g){for(var B=w.g[k],W=0;W<B.length;W++)Ce(B[W]);delete w.g[k],w.h--}}this.F=null},He.prototype.K=function(w,k,B,W){return this.i.add(String(w),k,!1,B,W)},He.prototype.L=function(w,k,B,W){return this.i.add(String(w),k,!0,B,W)};function vt(w,k,B,W){if(k=w.i.g[String(k)],!k)return!0;k=k.concat();for(var le=!0,me=0;me<k.length;++me){var Ne=k[me];if(Ne&&!Ne.da&&Ne.capture==B){var _t=Ne.listener,Kn=Ne.ha||Ne.src;Ne.fa&&_e(w.i,Ne),le=_t.call(Kn,W)!==!1&&le}}return le&&!W.defaultPrevented}function yt(w,k,B){if(typeof w=="function")B&&(w=g(w,B));else if(w&&typeof w.handleEvent=="function")w=g(w.handleEvent,w);else throw Error("Invalid listener argument");return 2147483647<Number(k)?-1:a.setTimeout(w,k||0)}function Dt(w){w.g=yt(()=>{w.g=null,w.i&&(w.i=!1,Dt(w))},w.l);const k=w.h;w.h=null,w.m.apply(null,k)}class Ct extends ee{constructor(k,B){super(),this.m=k,this.l=B,this.h=null,this.i=!1,this.g=null}j(k){this.h=arguments,this.g?this.i=!0:Dt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _n(w){ee.call(this),this.h=w,this.g={}}S(_n,ee);var on=[];function hn(w){q(w.g,function(k,B){this.g.hasOwnProperty(B)&&In(k)},w),w.g={}}_n.prototype.N=function(){_n.aa.N.call(this),hn(this)},_n.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gn=a.JSON.stringify,kr=a.JSON.parse,rr=class{stringify(w){return a.JSON.stringify(w,void 0)}parse(w){return a.JSON.parse(w,void 0)}};function No(){}No.prototype.h=null;function Js(w){return w.h||(w.h=w.i())}function Mo(){}var vi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ji(){ae.call(this,"d")}S(ji,ae);function _i(){ae.call(this,"c")}S(_i,ae);var Ki={},Ru=null;function ss(){return Ru=Ru||new He}Ki.La="serverreachability";function al(w){ae.call(this,Ki.La,w)}S(al,ae);function as(w){const k=ss();We(k,new al(k))}Ki.STAT_EVENT="statevent";function wf(w,k){ae.call(this,Ki.STAT_EVENT,w),this.stat=k}S(wf,ae);function Kt(w){const k=ss();We(k,new wf(k,w))}Ki.Ma="timingevent";function Pn(w,k){ae.call(this,Ki.Ma,w),this.size=k}S(Pn,ae);function wn(w,k){if(typeof w!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){w()},k)}function oi(){this.g=!0}oi.prototype.xa=function(){this.g=!1};function Pu(w,k,B,W,le,me){w.info(function(){if(w.g)if(me)for(var Ne="",_t=me.split("&"),Kn=0;Kn<_t.length;Kn++){var wt=_t[Kn].split("=");if(1<wt.length){var or=wt[0];wt=wt[1];var Wn=or.split("_");Ne=2<=Wn.length&&Wn[1]=="type"?Ne+(or+"="+wt+"&"):Ne+(or+"=redacted&")}}else Ne=null;else Ne=me;return"XMLHTTP REQ ("+W+") [attempt "+le+"]: "+k+`
`+B+`
`+Ne})}function mp(w,k,B,W,le,me,Ne){w.info(function(){return"XMLHTTP RESP ("+W+") [ attempt "+le+"]: "+k+`
`+B+`
`+me+" "+Ne})}function ls(w,k,B,W){w.info(function(){return"XMLHTTP TEXT ("+k+"): "+Xs(w,B)+(W?" "+W:"")})}function bf(w,k){w.info(function(){return"TIMEOUT: "+k})}oi.prototype.info=function(){};function Xs(w,k){if(!w.g)return k;if(!k)return null;try{var B=JSON.parse(k);if(B){for(w=0;w<B.length;w++)if(Array.isArray(B[w])){var W=B[w];if(!(2>W.length)){var le=W[1];if(Array.isArray(le)&&!(1>le.length)){var me=le[0];if(me!="noop"&&me!="stop"&&me!="close")for(var Ne=1;Ne<le.length;Ne++)le[Ne]=""}}}}return Gn(B)}catch{return k}}var us={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Wi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Yi;function Ji(){}S(Ji,No),Ji.prototype.g=function(){return new XMLHttpRequest},Ji.prototype.i=function(){return{}},Yi=new Ji;function br(w,k,B,W){this.j=w,this.i=k,this.l=B,this.R=W||1,this.U=new _n(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pn}function pn(){this.i=null,this.g="",this.h=!1}var Nu={},ll={};function wi(w,k,B){w.L=1,w.v=Ou(bi(k)),w.m=B,w.P=!0,Do(w,null)}function Do(w,k){w.F=Date.now(),Qs(w),w.A=bi(w.v);var B=w.A,W=w.R;Array.isArray(W)||(W=[String(W)]),bp(B.i,"t",W),w.C=0,B=w.j.J,w.h=new pn,w.g=hv(w.j,B?k:null,!w.m),0<w.O&&(w.M=new Ct(g(w.Y,w,w.g),w.O)),k=w.U,B=w.g,W=w.ca;var le="readystatechange";Array.isArray(le)||(le&&(on[0]=le.toString()),le=on);for(var me=0;me<le.length;me++){var Ne=st(B,le[me],W||k.handleEvent,!1,k.h||k);if(!Ne)break;k.g[Ne.key]=Ne}k=w.H?O(w.H):{},w.m?(w.u||(w.u="POST"),k["Content-Type"]="application/x-www-form-urlencoded",w.g.ea(w.A,w.u,w.m,k)):(w.u="GET",w.g.ea(w.A,w.u,null,k)),as(),Pu(w.i,w.u,w.A,w.l,w.R,w.m)}br.prototype.ca=function(w){w=w.target;const k=this.M;k&&to(w)==3?k.j():this.Y(w)},br.prototype.Y=function(w){try{if(w==this.g)e:{const Wn=to(this.g);var k=this.g.Ba();const oa=this.g.Z();if(!(3>Wn)&&(Wn!=3||this.g&&(this.h.h||this.g.oa()||ov(this.g)))){this.J||Wn!=4||k==7||(k==8||0>=oa?as(3):as(2)),cs(this);var B=this.g.Z();this.X=B;t:if(Mu(this)){var W=ov(this.g);w="";var le=W.length,me=to(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){jn(this),Xi(this);var Ne="";break t}this.h.i=new a.TextDecoder}for(k=0;k<le;k++)this.h.h=!0,w+=this.h.i.decode(W[k],{stream:!(me&&k==le-1)});W.length=0,this.h.g+=w,this.C=0,Ne=this.h.g}else Ne=this.g.oa();if(this.o=B==200,mp(this.i,this.u,this.A,this.l,this.R,Wn,B),this.o){if(this.T&&!this.K){t:{if(this.g){var _t,Kn=this.g;if((_t=Kn.g?Kn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(_t)){var wt=_t;break t}}wt=null}if(B=wt)ls(this.i,this.l,B,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fs(this,B);else{this.o=!1,this.s=3,Kt(12),jn(this),Xi(this);break e}}if(this.P){B=!0;let Tr;for(;!this.J&&this.C<Ne.length;)if(Tr=Tf(this,Ne),Tr==ll){Wn==4&&(this.s=4,Kt(14),B=!1),ls(this.i,this.l,null,"[Incomplete Response]");break}else if(Tr==Nu){this.s=4,Kt(15),ls(this.i,this.l,Ne,"[Invalid Chunk]"),B=!1;break}else ls(this.i,this.l,Tr,null),fs(this,Tr);if(Mu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Wn!=4||Ne.length!=0||this.h.h||(this.s=1,Kt(16),B=!1),this.o=this.o&&B,!B)ls(this.i,this.l,Ne,"[Invalid Chunked Response]"),jn(this),Xi(this);else if(0<Ne.length&&!this.W){this.W=!0;var or=this.j;or.g==this&&or.ba&&!or.M&&(or.j.info("Great, no buffering proxy detected. Bytes received: "+Ne.length),zu(or),or.M=!0,Kt(11))}}else ls(this.i,this.l,Ne,null),fs(this,Ne);Wn==4&&jn(this),this.o&&!this.J&&(Wn==4?cv(this.j,this):(this.o=!1,Qs(this)))}else ZT(this.g),B==400&&0<Ne.indexOf("Unknown SID")?(this.s=3,Kt(12)):(this.s=0,Kt(13)),jn(this),Xi(this)}}}catch{}finally{}};function Mu(w){return w.g?w.u=="GET"&&w.L!=2&&w.j.Ca:!1}function Tf(w,k){var B=w.C,W=k.indexOf(`
`,B);return W==-1?ll:(B=Number(k.substring(B,W)),isNaN(B)?Nu:(W+=1,W+B>k.length?ll:(k=k.slice(W,W+B),w.C=W+B,k)))}br.prototype.cancel=function(){this.J=!0,jn(this)};function Qs(w){w.S=Date.now()+w.I,Ef(w,w.I)}function Ef(w,k){if(w.B!=null)throw Error("WatchDog timer not null");w.B=wn(g(w.ba,w),k)}function cs(w){w.B&&(a.clearTimeout(w.B),w.B=null)}br.prototype.ba=function(){this.B=null;const w=Date.now();0<=w-this.S?(bf(this.i,this.A),this.L!=2&&(as(),Kt(17)),jn(this),this.s=2,Xi(this)):Ef(this,this.S-w)};function Xi(w){w.j.G==0||w.J||cv(w.j,w)}function jn(w){cs(w);var k=w.M;k&&typeof k.ma=="function"&&k.ma(),w.M=null,hn(w.U),w.g&&(k=w.g,w.g=null,k.abort(),k.ma())}function fs(w,k){try{var B=w.j;if(B.G!=0&&(B.g==w||gp(B.h,w))){if(!w.K&&gp(B.h,w)&&B.G==3){try{var W=B.Da.g.parse(k)}catch{W=null}if(Array.isArray(W)&&W.length==3){var le=W;if(le[0]==0){e:if(!B.u){if(B.g)if(B.g.F+3e3<w.F)kf(B),Mf(B);else break e;Ap(B),Kt(18)}}else B.za=le[1],0<B.za-B.T&&37500>le[2]&&B.F&&B.v==0&&!B.C&&(B.C=wn(g(B.Za,B),6e3));if(1>=ds(B.h)&&B.ca){try{B.ca()}catch{}B.ca=void 0}}else ia(B,11)}else if((w.K||B.g==w)&&kf(B),!C(k))for(le=B.Da.g.parse(k),k=0;k<le.length;k++){let wt=le[k];if(B.T=wt[0],wt=wt[1],B.G==2)if(wt[0]=="c"){B.K=wt[1],B.ia=wt[2];const or=wt[3];or!=null&&(B.la=or,B.j.info("VER="+B.la));const Wn=wt[4];Wn!=null&&(B.Aa=Wn,B.j.info("SVER="+B.Aa));const oa=wt[5];oa!=null&&typeof oa=="number"&&0<oa&&(W=1.5*oa,B.L=W,B.j.info("backChannelRequestTimeoutMs_="+W)),W=B;const Tr=w.g;if(Tr){const _s=Tr.g?Tr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_s){var me=W.h;me.g||_s.indexOf("spdy")==-1&&_s.indexOf("quic")==-1&&_s.indexOf("h2")==-1||(me.j=me.l,me.g=new Set,me.h&&(xf(me,me.h),me.h=null))}if(W.D){const Ip=Tr.g?Tr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ip&&(W.ya=Ip,Ft(W.I,W.D,Ip))}}B.G=3,B.l&&B.l.ua(),B.ba&&(B.R=Date.now()-w.F,B.j.info("Handshake RTT: "+B.R+"ms")),W=B;var Ne=w;if(W.qa=dv(W,W.J?W.ia:null,W.W),Ne.K){Gr(W.h,Ne);var _t=Ne,Kn=W.L;Kn&&(_t.I=Kn),_t.B&&(cs(_t),Qs(_t)),W.g=Ne}else lv(W);0<B.i.length&&Df(B)}else wt[0]!="stop"&&wt[0]!="close"||ia(B,7);else B.G==3&&(wt[0]=="stop"||wt[0]=="close"?wt[0]=="stop"?ia(B,7):Sp(B):wt[0]!="noop"&&B.l&&B.l.ta(wt),B.v=0)}}as(4)}catch{}}var Sf=class{constructor(w,k){this.g=w,this.map=k}};function ko(w){this.l=w||10,a.PerformanceNavigationTiming?(w=a.performance.getEntriesByType("navigation"),w=0<w.length&&(w[0].nextHopProtocol=="hq"||w[0].nextHopProtocol=="h2")):w=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=w?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ul(w){return w.h?!0:w.g?w.g.size>=w.j:!1}function ds(w){return w.h?1:w.g?w.g.size:0}function gp(w,k){return w.h?w.h==k:w.g?w.g.has(k):!1}function xf(w,k){w.g?w.g.add(k):w.h=k}function Gr(w,k){w.h&&w.h==k?w.h=null:w.g&&w.g.has(k)&&w.g.delete(k)}ko.prototype.cancel=function(){if(this.i=yp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const w of this.g.values())w.cancel();this.g.clear()}};function yp(w){if(w.h!=null)return w.i.concat(w.h.D);if(w.g!=null&&w.g.size!==0){let k=w.i;for(const B of w.g.values())k=k.concat(B.D);return k}return b(w.i)}function YT(w){if(w.V&&typeof w.V=="function")return w.V();if(typeof Map<"u"&&w instanceof Map||typeof Set<"u"&&w instanceof Set)return Array.from(w.values());if(typeof w=="string")return w.split("");if(u(w)){for(var k=[],B=w.length,W=0;W<B;W++)k.push(w[W]);return k}k=[],B=0;for(W in w)k[B++]=w[W];return k}function Af(w){if(w.na&&typeof w.na=="function")return w.na();if(!w.V||typeof w.V!="function"){if(typeof Map<"u"&&w instanceof Map)return Array.from(w.keys());if(!(typeof Set<"u"&&w instanceof Set)){if(u(w)||typeof w=="string"){var k=[];w=w.length;for(var B=0;B<w;B++)k.push(B);return k}k=[],B=0;for(const W in w)k[B++]=W;return k}}}function vp(w,k){if(w.forEach&&typeof w.forEach=="function")w.forEach(k,void 0);else if(u(w)||typeof w=="string")Array.prototype.forEach.call(w,k,void 0);else for(var B=Af(w),W=YT(w),le=W.length,me=0;me<le;me++)k.call(void 0,W[me],B&&B[me],w)}var Du=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function JT(w,k){if(w){w=w.split("&");for(var B=0;B<w.length;B++){var W=w[B].indexOf("="),le=null;if(0<=W){var me=w[B].substring(0,W);le=w[B].substring(W+1)}else me=w[B];k(me,le?decodeURIComponent(le.replace(/\+/g," ")):"")}}}function Ln(w){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,w instanceof Ln){this.h=w.h,ku(this,w.j),this.o=w.o,this.g=w.g,cl(this,w.s),this.l=w.l;var k=w.i,B=new ea;B.i=k.i,k.g&&(B.g=new Map(k.g),B.h=k.h),Zs(this,B),this.m=w.m}else w&&(k=String(w).match(Du))?(this.h=!1,ku(this,k[1]||"",!0),this.o=Qi(k[2]||""),this.g=Qi(k[3]||"",!0),cl(this,k[4]),this.l=Qi(k[5]||"",!0),Zs(this,k[6]||"",!0),this.m=Qi(k[7]||"")):(this.h=!1,this.i=new ea(null,this.h))}Ln.prototype.toString=function(){var w=[],k=this.j;k&&w.push(Lu(k,_p,!0),":");var B=this.g;return(B||k=="file")&&(w.push("//"),(k=this.o)&&w.push(Lu(k,_p,!0),"@"),w.push(encodeURIComponent(String(B)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),B=this.s,B!=null&&w.push(":",String(B))),(B=this.l)&&(this.g&&B.charAt(0)!="/"&&w.push("/"),w.push(Lu(B,B.charAt(0)=="/"?XT:wp,!0))),(B=this.i.toString())&&w.push("?",B),(B=this.m)&&w.push("#",Lu(B,Cf)),w.join("")};function bi(w){return new Ln(w)}function ku(w,k,B){w.j=B?Qi(k,!0):k,w.j&&(w.j=w.j.replace(/:$/,""))}function cl(w,k){if(k){if(k=Number(k),isNaN(k)||0>k)throw Error("Bad port number "+k);w.s=k}else w.s=null}function Zs(w,k,B){k instanceof ea?(w.i=k,rv(w.i,w.h)):(B||(k=Lu(k,QT)),w.i=new ea(k,w.h))}function Ft(w,k,B){w.i.set(k,B)}function Ou(w){return Ft(w,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),w}function Qi(w,k){return w?k?decodeURI(w.replace(/%25/g,"%2525")):decodeURIComponent(w):""}function Lu(w,k,B){return typeof w=="string"?(w=encodeURI(w).replace(k,nv),B&&(w=w.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w):null}function nv(w){return w=w.charCodeAt(0),"%"+(w>>4&15).toString(16)+(w&15).toString(16)}var _p=/[#\/\?@]/g,wp=/[#\?:]/g,XT=/[#\?]/g,QT=/[#\?@]/g,Cf=/#/g;function ea(w,k){this.h=this.g=null,this.i=w||null,this.j=!!k}function Zi(w){w.g||(w.g=new Map,w.h=0,w.i&&JT(w.i,function(k,B){w.add(decodeURIComponent(k.replace(/\+/g," ")),B)}))}t=ea.prototype,t.add=function(w,k){Zi(this),this.i=null,w=hs(this,w);var B=this.g.get(w);return B||this.g.set(w,B=[]),B.push(k),this.h+=1,this};function ta(w,k){Zi(w),k=hs(w,k),w.g.has(k)&&(w.i=null,w.h-=w.g.get(k).length,w.g.delete(k))}function na(w,k){return Zi(w),k=hs(w,k),w.g.has(k)}t.forEach=function(w,k){Zi(this),this.g.forEach(function(B,W){B.forEach(function(le){w.call(k,le,W,this)},this)},this)},t.na=function(){Zi(this);const w=Array.from(this.g.values()),k=Array.from(this.g.keys()),B=[];for(let W=0;W<k.length;W++){const le=w[W];for(let me=0;me<le.length;me++)B.push(k[W])}return B},t.V=function(w){Zi(this);let k=[];if(typeof w=="string")na(this,w)&&(k=k.concat(this.g.get(hs(this,w))));else{w=Array.from(this.g.values());for(let B=0;B<w.length;B++)k=k.concat(w[B])}return k},t.set=function(w,k){return Zi(this),this.i=null,w=hs(this,w),na(this,w)&&(this.h-=this.g.get(w).length),this.g.set(w,[k]),this.h+=1,this},t.get=function(w,k){return w?(w=this.V(w),0<w.length?String(w[0]):k):k};function bp(w,k,B){ta(w,k),0<B.length&&(w.i=null,w.g.set(hs(w,k),b(B)),w.h+=B.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const w=[],k=Array.from(this.g.keys());for(var B=0;B<k.length;B++){var W=k[B];const me=encodeURIComponent(String(W)),Ne=this.V(W);for(W=0;W<Ne.length;W++){var le=me;Ne[W]!==""&&(le+="="+encodeURIComponent(String(Ne[W]))),w.push(le)}}return this.i=w.join("&")};function hs(w,k){return k=String(k),w.j&&(k=k.toLowerCase()),k}function rv(w,k){k&&!w.j&&(Zi(w),w.i=null,w.g.forEach(function(B,W){var le=W.toLowerCase();W!=le&&(ta(this,W),bp(this,le,B))},w)),w.j=k}function Vu(w,k){const B=new oi;if(a.Image){const W=new Image;W.onload=_(eo,B,"TestLoadImage: loaded",!0,k,W),W.onerror=_(eo,B,"TestLoadImage: error",!1,k,W),W.onabort=_(eo,B,"TestLoadImage: abort",!1,k,W),W.ontimeout=_(eo,B,"TestLoadImage: timeout",!1,k,W),a.setTimeout(function(){W.ontimeout&&W.ontimeout()},1e4),W.src=w}else k(!1)}function Oo(w,k){const B=new oi,W=new AbortController,le=setTimeout(()=>{W.abort(),eo(B,"TestPingServer: timeout",!1,k)},1e4);fetch(w,{signal:W.signal}).then(me=>{clearTimeout(le),me.ok?eo(B,"TestPingServer: ok",!0,k):eo(B,"TestPingServer: server error",!1,k)}).catch(()=>{clearTimeout(le),eo(B,"TestPingServer: error",!1,k)})}function eo(w,k,B,W,le){try{le&&(le.onload=null,le.onerror=null,le.onabort=null,le.ontimeout=null),W(B)}catch{}}function Uu(){this.g=new rr}function ps(w,k,B){const W=B||"";try{vp(w,function(le,me){let Ne=le;c(le)&&(Ne=Gn(le)),k.push(W+me+"="+encodeURIComponent(Ne))})}catch(le){throw k.push(W+"type="+encodeURIComponent("_badmap")),le}}function fl(w){this.l=w.Ub||null,this.j=w.eb||!1}S(fl,No),fl.prototype.g=function(){return new ra(this.l,this.j)},fl.prototype.i=(function(w){return function(){return w}})({});function ra(w,k){He.call(this),this.D=w,this.o=k,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(ra,He),t=ra.prototype,t.open=function(w,k){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=w,this.A=k,this.readyState=1,gs(this)},t.send=function(w){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const k={headers:this.u,method:this.B,credentials:this.m,cache:void 0};w&&(k.body=w),(this.D||a).fetch(new Request(this.A,k)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ms(this)),this.readyState=0},t.Sa=function(w){if(this.g&&(this.l=w,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=w.headers,this.readyState=2,gs(this)),this.g&&(this.readyState=3,gs(this),this.g)))if(this.responseType==="arraybuffer")w.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in w){if(this.j=w.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Tp(this)}else w.text().then(this.Ra.bind(this),this.ga.bind(this))};function Tp(w){w.j.read().then(w.Pa.bind(w)).catch(w.ga.bind(w))}t.Pa=function(w){if(this.g){if(this.o&&w.value)this.response.push(w.value);else if(!this.o){var k=w.value?w.value:new Uint8Array(0);(k=this.v.decode(k,{stream:!w.done}))&&(this.response=this.responseText+=k)}w.done?ms(this):gs(this),this.readyState==3&&Tp(this)}},t.Ra=function(w){this.g&&(this.response=this.responseText=w,ms(this))},t.Qa=function(w){this.g&&(this.response=w,ms(this))},t.ga=function(){this.g&&ms(this)};function ms(w){w.readyState=4,w.l=null,w.j=null,w.v=null,gs(w)}t.setRequestHeader=function(w,k){this.u.append(w,k)},t.getResponseHeader=function(w){return this.h&&this.h.get(w.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const w=[],k=this.h.entries();for(var B=k.next();!B.done;)B=B.value,w.push(B[0]+": "+B[1]),B=k.next();return w.join(`\r
`)};function gs(w){w.onreadystatechange&&w.onreadystatechange.call(w)}Object.defineProperty(ra.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(w){this.m=w?"include":"same-origin"}});function Ep(w){let k="";return q(w,function(B,W){k+=W,k+=":",k+=B,k+=`\r
`}),k}function ir(w,k,B){e:{for(W in B){var W=!1;break e}W=!0}W||(B=Ep(B),typeof w=="string"?B!=null&&encodeURIComponent(String(B)):Ft(w,k,B))}function Pt(w){He.call(this),this.headers=new Map,this.o=w||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Pt,He);var If=/^https?$/i,qu=["POST","PUT"];t=Pt.prototype,t.Ha=function(w){this.J=w},t.ea=function(w,k,B,W){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+w);k=k?k.toUpperCase():"GET",this.D=w,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Yi.g(),this.v=this.o?Js(this.o):Js(Yi),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(k,String(w),!0),this.B=!1}catch(me){iv(this,me);return}if(w=B||"",B=new Map(this.headers),W)if(Object.getPrototypeOf(W)===Object.prototype)for(var le in W)B.set(le,W[le]);else if(typeof W.keys=="function"&&typeof W.get=="function")for(const me of W.keys())B.set(me,W.get(me));else throw Error("Unknown input type for opt_headers: "+String(W));W=Array.from(B.keys()).find(me=>me.toLowerCase()=="content-type"),le=a.FormData&&w instanceof a.FormData,!(0<=Array.prototype.indexOf.call(qu,k,void 0))||W||le||B.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[me,Ne]of B)this.g.setRequestHeader(me,Ne);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Fu(this),this.u=!0,this.g.send(w),this.u=!1}catch(me){iv(this,me)}};function iv(w,k){w.h=!1,w.g&&(w.j=!0,w.g.abort(),w.j=!1),w.l=k,w.m=5,Rf(w),ys(w)}function Rf(w){w.A||(w.A=!0,We(w,"complete"),We(w,"error"))}t.abort=function(w){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=w||7,We(this,"complete"),We(this,"abort"),ys(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ys(this,!0)),Pt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Pf(this):this.bb())},t.bb=function(){Pf(this)};function Pf(w){if(w.h&&typeof s<"u"&&(!w.v[1]||to(w)!=4||w.Z()!=2)){if(w.u&&to(w)==4)yt(w.Ea,0,w);else if(We(w,"readystatechange"),to(w)==4){w.h=!1;try{const Ne=w.Z();e:switch(Ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var k=!0;break e;default:k=!1}var B;if(!(B=k)){var W;if(W=Ne===0){var le=String(w.D).match(Du)[1]||null;!le&&a.self&&a.self.location&&(le=a.self.location.protocol.slice(0,-1)),W=!If.test(le?le.toLowerCase():"")}B=W}if(B)We(w,"complete"),We(w,"success");else{w.m=6;try{var me=2<to(w)?w.g.statusText:""}catch{me=""}w.l=me+" ["+w.Z()+"]",Rf(w)}}finally{ys(w)}}}}function ys(w,k){if(w.g){Fu(w);const B=w.g,W=w.v[0]?()=>{}:null;w.g=null,w.v=null,k||We(w,"ready");try{B.onreadystatechange=W}catch{}}}function Fu(w){w.I&&(a.clearTimeout(w.I),w.I=null)}t.isActive=function(){return!!this.g};function to(w){return w.g?w.g.readyState:0}t.Z=function(){try{return 2<to(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(w){if(this.g){var k=this.g.responseText;return w&&k.indexOf(w)==0&&(k=k.substring(w.length)),kr(k)}};function ov(w){try{if(!w.g)return null;if("response"in w.g)return w.g.response;switch(w.H){case"":case"text":return w.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in w.g)return w.g.mozResponseArrayBuffer}return null}catch{return null}}function ZT(w){const k={};w=(w.g&&2<=to(w)&&w.g.getAllResponseHeaders()||"").split(`\r
`);for(let W=0;W<w.length;W++){if(C(w[W]))continue;var B=L(w[W]);const le=B[0];if(B=B[1],typeof B!="string")continue;B=B.trim();const me=k[le]||[];k[le]=me,me.push(B)}P(k,function(W){return W.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bu(w,k,B){return B&&B.internalChannelParams&&B.internalChannelParams[w]||k}function Nf(w){this.Aa=0,this.i=[],this.j=new oi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Bu("failFast",!1,w),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Bu("baseRetryDelayMs",5e3,w),this.cb=Bu("retryDelaySeedMs",1e4,w),this.Wa=Bu("forwardChannelMaxRetries",2,w),this.wa=Bu("forwardChannelRequestTimeoutMs",2e4,w),this.pa=w&&w.xmlHttpFactory||void 0,this.Xa=w&&w.Tb||void 0,this.Ca=w&&w.useFetchStreams||!1,this.L=void 0,this.J=w&&w.supportsCrossDomainXhr||!1,this.K="",this.h=new ko(w&&w.concurrentRequestLimit),this.Da=new Uu,this.P=w&&w.fastHandshake||!1,this.O=w&&w.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=w&&w.Rb||!1,w&&w.xa&&this.j.xa(),w&&w.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&w&&w.detectBufferingProxy||!1,this.ja=void 0,w&&w.longPollingTimeout&&0<w.longPollingTimeout&&(this.ja=w.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Nf.prototype,t.la=8,t.G=1,t.connect=function(w,k,B,W){Kt(0),this.W=w,this.H=k||{},B&&W!==void 0&&(this.H.OSID=B,this.H.OAID=W),this.F=this.X,this.I=dv(this,null,this.W),Df(this)};function Sp(w){if(sv(w),w.G==3){var k=w.U++,B=bi(w.I);if(Ft(B,"SID",w.K),Ft(B,"RID",k),Ft(B,"TYPE","terminate"),$u(w,B),k=new br(w,w.j,k),k.L=2,k.v=Ou(bi(B)),B=!1,a.navigator&&a.navigator.sendBeacon)try{B=a.navigator.sendBeacon(k.v.toString(),"")}catch{}!B&&a.Image&&(new Image().src=k.v,B=!0),B||(k.g=hv(k.j,null),k.g.ea(k.v)),k.F=Date.now(),Qs(k)}fv(w)}function Mf(w){w.g&&(zu(w),w.g.cancel(),w.g=null)}function sv(w){Mf(w),w.u&&(a.clearTimeout(w.u),w.u=null),kf(w),w.h.cancel(),w.s&&(typeof w.s=="number"&&a.clearTimeout(w.s),w.s=null)}function Df(w){if(!ul(w.h)&&!w.s){w.s=!0;var k=w.Ga;Q||G(),re||(Q(),re=!0),X.add(k,w),w.B=0}}function eE(w,k){return ds(w.h)>=w.h.j-(w.s?1:0)?!1:w.s?(w.i=k.D.concat(w.i),!0):w.G==1||w.G==2||w.B>=(w.Va?0:w.Wa)?!1:(w.s=wn(g(w.Ga,w,k),Cp(w,w.B)),w.B++,!0)}t.Ga=function(w){if(this.s)if(this.s=null,this.G==1){if(!w){this.U=Math.floor(1e5*Math.random()),w=this.U++;const le=new br(this,this.j,w);let me=this.o;if(this.S&&(me?(me=O(me),U(me,this.S)):me=this.S),this.m!==null||this.O||(le.H=me,me=null),this.P)e:{for(var k=0,B=0;B<this.i.length;B++){t:{var W=this.i[B];if("__data__"in W.map&&(W=W.map.__data__,typeof W=="string")){W=W.length;break t}W=void 0}if(W===void 0)break;if(k+=W,4096<k){k=B;break e}if(k===4096||B===this.i.length-1){k=B+1;break e}}k=1e3}else k=1e3;k=av(this,le,k),B=bi(this.I),Ft(B,"RID",w),Ft(B,"CVER",22),this.D&&Ft(B,"X-HTTP-Session-Id",this.D),$u(this,B),me&&(this.O?k="headers="+encodeURIComponent(String(Ep(me)))+"&"+k:this.m&&ir(B,this.m,me)),xf(this.h,le),this.Ua&&Ft(B,"TYPE","init"),this.P?(Ft(B,"$req",k),Ft(B,"SID","null"),le.T=!0,wi(le,B,null)):wi(le,B,k),this.G=2}}else this.G==3&&(w?xp(this,w):this.i.length==0||ul(this.h)||xp(this))};function xp(w,k){var B;k?B=k.l:B=w.U++;const W=bi(w.I);Ft(W,"SID",w.K),Ft(W,"RID",B),Ft(W,"AID",w.T),$u(w,W),w.m&&w.o&&ir(W,w.m,w.o),B=new br(w,w.j,B,w.B+1),w.m===null&&(B.H=w.o),k&&(w.i=k.D.concat(w.i)),k=av(w,B,1e3),B.I=Math.round(.5*w.wa)+Math.round(.5*w.wa*Math.random()),xf(w.h,B),wi(B,W,k)}function $u(w,k){w.H&&q(w.H,function(B,W){Ft(k,W,B)}),w.l&&vp({},function(B,W){Ft(k,W,B)})}function av(w,k,B){B=Math.min(w.i.length,B);var W=w.l?g(w.l.Na,w.l,w):null;e:{var le=w.i;let me=-1;for(;;){const Ne=["count="+B];me==-1?0<B?(me=le[0].g,Ne.push("ofs="+me)):me=0:Ne.push("ofs="+me);let _t=!0;for(let Kn=0;Kn<B;Kn++){let wt=le[Kn].g;const or=le[Kn].map;if(wt-=me,0>wt)me=Math.max(0,le[Kn].g-100),_t=!1;else try{ps(or,Ne,"req"+wt+"_")}catch{W&&W(or)}}if(_t){W=Ne.join("&");break e}}}return w=w.i.splice(0,B),k.D=w,W}function lv(w){if(!w.g&&!w.u){w.Y=1;var k=w.Fa;Q||G(),re||(Q(),re=!0),X.add(k,w),w.v=0}}function Ap(w){return w.g||w.u||3<=w.v?!1:(w.Y++,w.u=wn(g(w.Fa,w),Cp(w,w.v)),w.v++,!0)}t.Fa=function(){if(this.u=null,uv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var w=2*this.R;this.j.info("BP detection timer enabled: "+w),this.A=wn(g(this.ab,this),w)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Kt(10),Mf(this),uv(this))};function zu(w){w.A!=null&&(a.clearTimeout(w.A),w.A=null)}function uv(w){w.g=new br(w,w.j,"rpc",w.Y),w.m===null&&(w.g.H=w.o),w.g.O=0;var k=bi(w.qa);Ft(k,"RID","rpc"),Ft(k,"SID",w.K),Ft(k,"AID",w.T),Ft(k,"CI",w.F?"0":"1"),!w.F&&w.ja&&Ft(k,"TO",w.ja),Ft(k,"TYPE","xmlhttp"),$u(w,k),w.m&&w.o&&ir(k,w.m,w.o),w.L&&(w.g.I=w.L);var B=w.g;w=w.ia,B.L=1,B.v=Ou(bi(k)),B.m=null,B.P=!0,Do(B,w)}t.Za=function(){this.C!=null&&(this.C=null,Mf(this),Ap(this),Kt(19))};function kf(w){w.C!=null&&(a.clearTimeout(w.C),w.C=null)}function cv(w,k){var B=null;if(w.g==k){kf(w),zu(w),w.g=null;var W=2}else if(gp(w.h,k))B=k.D,Gr(w.h,k),W=1;else return;if(w.G!=0){if(k.o)if(W==1){B=k.m?k.m.length:0,k=Date.now()-k.F;var le=w.B;W=ss(),We(W,new Pn(W,B)),Df(w)}else lv(w);else if(le=k.s,le==3||le==0&&0<k.X||!(W==1&&eE(w,k)||W==2&&Ap(w)))switch(B&&0<B.length&&(k=w.h,k.i=k.i.concat(B)),le){case 1:ia(w,5);break;case 4:ia(w,10);break;case 3:ia(w,6);break;default:ia(w,2)}}}function Cp(w,k){let B=w.Ta+Math.floor(Math.random()*w.cb);return w.isActive()||(B*=2),B*k}function ia(w,k){if(w.j.info("Error code "+k),k==2){var B=g(w.fb,w),W=w.Xa;const le=!W;W=new Ln(W||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ku(W,"https"),Ou(W),le?Vu(W.toString(),B):Oo(W.toString(),B)}else Kt(2);w.G=0,w.l&&w.l.sa(k),fv(w),sv(w)}t.fb=function(w){w?(this.j.info("Successfully pinged google.com"),Kt(2)):(this.j.info("Failed to ping google.com"),Kt(1))};function fv(w){if(w.G=0,w.ka=[],w.l){const k=yp(w.h);(k.length!=0||w.i.length!=0)&&(T(w.ka,k),T(w.ka,w.i),w.h.i.length=0,b(w.i),w.i.length=0),w.l.ra()}}function dv(w,k,B){var W=B instanceof Ln?bi(B):new Ln(B);if(W.g!="")k&&(W.g=k+"."+W.g),cl(W,W.s);else{var le=a.location;W=le.protocol,k=k?k+"."+le.hostname:le.hostname,le=+le.port;var me=new Ln(null);W&&ku(me,W),k&&(me.g=k),le&&cl(me,le),B&&(me.l=B),W=me}return B=w.D,k=w.ya,B&&k&&Ft(W,B,k),Ft(W,"VER",w.la),$u(w,W),W}function hv(w,k,B){if(k&&!w.J)throw Error("Can't create secondary domain capable XhrIo object.");return k=w.Ca&&!w.pa?new Pt(new fl({eb:B})):new Pt(w.pa),k.Ha(w.J),k}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function pv(){}t=pv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Of(){}Of.prototype.g=function(w,k){return new jr(w,k)};function jr(w,k){He.call(this),this.g=new Nf(k),this.l=w,this.h=k&&k.messageUrlParams||null,w=k&&k.messageHeaders||null,k&&k.clientProtocolHeaderRequired&&(w?w["X-Client-Protocol"]="webchannel":w={"X-Client-Protocol":"webchannel"}),this.g.o=w,w=k&&k.initMessageHeaders||null,k&&k.messageContentType&&(w?w["X-WebChannel-Content-Type"]=k.messageContentType:w={"X-WebChannel-Content-Type":k.messageContentType}),k&&k.va&&(w?w["X-WebChannel-Client-Profile"]=k.va:w={"X-WebChannel-Client-Profile":k.va}),this.g.S=w,(w=k&&k.Sb)&&!C(w)&&(this.g.m=w),this.v=k&&k.supportsCrossDomainXhr||!1,this.u=k&&k.sendRawJson||!1,(k=k&&k.httpSessionIdParam)&&!C(k)&&(this.g.D=k,w=this.h,w!==null&&k in w&&(w=this.h,k in w&&delete w[k])),this.j=new vs(this)}S(jr,He),jr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},jr.prototype.close=function(){Sp(this.g)},jr.prototype.o=function(w){var k=this.g;if(typeof w=="string"){var B={};B.__data__=w,w=B}else this.u&&(B={},B.__data__=Gn(w),w=B);k.i.push(new Sf(k.Ya++,w)),k.G==3&&Df(k)},jr.prototype.N=function(){this.g.l=null,delete this.j,Sp(this.g),delete this.g,jr.aa.N.call(this)};function mv(w){ji.call(this),w.__headers__&&(this.headers=w.__headers__,this.statusCode=w.__status__,delete w.__headers__,delete w.__status__);var k=w.__sm__;if(k){e:{for(const B in k){w=B;break e}w=void 0}(this.i=w)&&(w=this.i,k=k!==null&&w in k?k[w]:void 0),this.data=k}else this.data=w}S(mv,ji);function gv(){_i.call(this),this.status=1}S(gv,_i);function vs(w){this.g=w}S(vs,pv),vs.prototype.ua=function(){We(this.g,"a")},vs.prototype.ta=function(w){We(this.g,new mv(w))},vs.prototype.sa=function(w){We(this.g,new gv)},vs.prototype.ra=function(){We(this.g,"b")},Of.prototype.createWebChannel=Of.prototype.g,jr.prototype.send=jr.prototype.o,jr.prototype.open=jr.prototype.m,jr.prototype.close=jr.prototype.close,rY=function(){return new Of},nY=function(){return ss()},tY=Ki,GN={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},us.NO_ERROR=0,us.TIMEOUT=8,us.HTTP_ERROR=6,a0=us,Wi.COMPLETE="complete",eY=Wi,Mo.EventType=vi,vi.OPEN="a",vi.CLOSE="b",vi.ERROR="c",vi.MESSAGE="d",He.prototype.listen=He.prototype.K,Hm=Mo,Pt.prototype.listenOnce=Pt.prototype.L,Pt.prototype.getLastError=Pt.prototype.Ka,Pt.prototype.getLastErrorCode=Pt.prototype.Ba,Pt.prototype.getStatus=Pt.prototype.Z,Pt.prototype.getResponseJson=Pt.prototype.Oa,Pt.prototype.getResponseText=Pt.prototype.oa,Pt.prototype.send=Pt.prototype.ea,Pt.prototype.setWithCredentials=Pt.prototype.Ha,ZW=Pt}).apply(typeof w_<"u"?w_:typeof self<"u"?self:typeof window<"u"?window:{});const cF="@firebase/firestore",fF="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fr.UNAUTHENTICATED=new fr(null),fr.GOOGLE_CREDENTIALS=new fr("google-credentials-uid"),fr.FIRST_PARTY=new fr("first-party-uid"),fr.MOCK_USER=new fr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fh="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu=new eb("@firebase/firestore");function Ed(){return iu.logLevel}function Vpe(t){iu.setLogLevel(t)}function Ae(t,...e){if(iu.logLevel<=pt.DEBUG){const n=e.map(bD);iu.debug(`Firestore (${Fh}): ${t}`,...n)}}function kn(t,...e){if(iu.logLevel<=pt.ERROR){const n=e.map(bD);iu.error(`Firestore (${Fh}): ${t}`,...n)}}function zs(t,...e){if(iu.logLevel<=pt.WARN){const n=e.map(bD);iu.warn(`Firestore (${Fh}): ${t}`,...n)}}function bD(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,iY(t,r,n)}function iY(t,e,n){let r=`FIRESTORE (${Fh}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw kn(r),new Error(r)}function Ke(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||iY(e,i,r)}function Upe(t,e){t||Ve(57014,e)}function Oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends zr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oY{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qpe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(fr.UNAUTHENTICATED)))}shutdown(){}}class Fpe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class Bpe{constructor(e){this.t=e,this.currentUser=fr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ke(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let o=new Nr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Nr,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const u=o;e.enqueueRetryable((async()=>{await u.promise,await i(this.currentUser)}))},a=u=>{Ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((u=>a(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(Ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Nr)}}),0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ke(typeof r.accessToken=="string",31837,{l:r}),new oY(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new fr(e)}}class $pe{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=fr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class zpe{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new $pe(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(fr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class dF{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Hpe{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ke(this.o===void 0,3512);const r=o=>{o.error!=null&&Ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.m;return this.m=o.token,Ae("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const i=o=>{Ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>i(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):Ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new dF(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ke(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new dF(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gpe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=Gpe(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}}function it(t,e){return t<e?-1:t>e?1:0}function jN(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),o=e.charAt(r);if(i!==o)return fx(i)===fx(o)?it(i,o):fx(i)?1:-1}return it(t.length,e.length)}const jpe=55296,Kpe=57343;function fx(t){const e=t.charCodeAt(0);return e>=jpe&&e<=Kpe}function Zd(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}function sY(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hF="__name__";class xs{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ve(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ve(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return xs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof xs?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=xs.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return it(e.length,n.length)}static compareSegments(e,n){const r=xs.isNumericId(e),i=xs.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?xs.extractNumericId(e).compare(xs.extractNumericId(n)):jN(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Yl.fromString(e.substring(4,e.length-2))}}class mt extends xs{construct(e,n,r){return new mt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Se(pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new mt(n)}static emptyPath(){return new mt([])}}const Wpe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ln extends xs{construct(e,n,r){return new ln(e,n,r)}static isValidIdentifier(e){return Wpe.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ln.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===hF}static keyField(){return new ln([hF])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new Se(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Se(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Se(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Se(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ln(n)}static emptyPath(){return new ln([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e){this.path=e}static fromPath(e){return new De(mt.fromString(e))}static fromName(e){return new De(mt.fromString(e).popFirst(5))}static empty(){return new De(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return mt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new De(new mt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ED(t,e,n){if(!n)throw new Se(pe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function aY(t,e,n,r){if(e===!0&&r===!0)throw new Se(pe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function pF(t){if(!De.isDocumentKey(t))throw new Se(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function mF(t){if(De.isDocumentKey(t))throw new Se(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function lY(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function pb(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ve(12329,{type:typeof t})}function Et(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Se(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=pb(t);throw new Se(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function uY(t,e){if(e<=0)throw new Se(pe.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(t,e){const n={typeString:t};return e&&(n.value=e),n}function yy(t,e){if(!lY(t))throw new Se(pe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new Se(pe.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gF=-62135596800,yF=1e6;class Nt{static now(){return Nt.fromMillis(Date.now())}static fromDate(e){return Nt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*yF);return new Nt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Se(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Se(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<gF)throw new Se(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/yF}_compareTo(e){return this.seconds===e.seconds?it(this.nanoseconds,e.nanoseconds):it(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Nt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(yy(e,Nt._jsonSchema))return new Nt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-gF;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Nt._jsonSchemaVersion="firestore/timestamp/1.0",Nt._jsonSchema={type:Bn("string",Nt._jsonSchemaVersion),seconds:Bn("number"),nanoseconds:Bn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{static fromTimestamp(e){return new Ye(e)}static min(){return new Ye(new Nt(0,0))}static max(){return new Ye(new Nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eh=-1;class L0{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function KN(t){return t.fields.find((e=>e.kind===2))}function lc(t){return t.fields.filter((e=>e.kind!==2))}L0.UNKNOWN_ID=-1;class l0{constructor(e,n){this.fieldPath=e,this.kind=n}}class Rg{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Rg(0,Bi.min())}}function cY(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ye.fromTimestamp(r===1e9?new Nt(n+1,0):new Nt(n,r));return new Bi(i,De.empty(),e)}function fY(t){return new Bi(t.readTime,t.key,eh)}class Bi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Bi(Ye.min(),De.empty(),eh)}static max(){return new Bi(Ye.max(),De.empty(),eh)}}function SD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=De.comparator(t.documentKey,e.documentKey),n!==0?n:it(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dY="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hY{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gu(t){if(t.code!==pe.FAILED_PRECONDITION||t.message!==dY)throw t;Ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ue(((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ue?n:ue.resolve(n)}catch(n){return ue.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ue.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ue.reject(n)}static resolve(e){return new ue(((n,r)=>{n(e)}))}static reject(e){return new ue(((n,r)=>{r(e)}))}static waitFor(e){return new ue(((n,r)=>{let i=0,o=0,s=!1;e.forEach((a=>{++i,a.next((()=>{++o,s&&o===i&&n()}),(u=>r(u)))})),s=!0,o===i&&n()}))}static or(e){let n=ue.resolve(!1);for(const r of e)n=n.next((i=>i?ue.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,o)=>{r.push(n.call(this,i,o))})),this.waitFor(r)}static mapArray(e,n){return new ue(((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let u=0;u<o;u++){const c=u;n(e[c]).next((d=>{s[c]=d,++a,a===o&&r(s)}),(d=>i(d)))}}))}static doWhile(e,n){return new ue(((r,i)=>{const o=()=>{e()===!0?n().next((()=>{o()}),i):r()};o()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni="SimpleDb";class mb{static open(e,n,r,i){try{return new mb(n,e.transaction(i,r))}catch(o){throw new ug(n,o)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new Nr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new ug(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=xD(r.target.error);this.S.reject(new ug(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Ae(Ni,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Jpe(n)}}class Vs{static delete(e){return Ae(Ni,"Removing database:",e),pc(j2().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Eg())return!1;if(Vs.F())return!0;const e=gn(),n=Vs.M(e),r=0<n&&n<10,i=pY(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,Vs.M(gn())===12.2&&kn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(Ae(Ni,"Opening database:",this.name),this.db=await new Promise(((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{const s=o.target.result;n(s)},i.onblocked=()=>{r(new ug(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{const s=o.target.error;s.name==="VersionError"?r(new Se(pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new Se(pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new ug(e,s))},i.onupgradeneeded=o=>{Ae(Ni,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const s=o.target.result;this.N.k(s,i.transaction,o.oldVersion,this.version).next((()=>{Ae(Ni,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const o=n==="readonly";let s=0;for(;;){++s;try{this.db=await this.L(e);const a=mb.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next((c=>(a.C(),c))).catch((c=>(a.abort(c),ue.reject(c)))).toPromise();return u.catch((()=>{})),await a.D,u}catch(a){const u=a,c=u.name!=="FirebaseError"&&s<3;if(Ae(Ni,"Transaction failed with error:",u.message,"Retrying:",c),this.close(),!c)return Promise.reject(u)}}}close(){this.db&&this.db.close(),this.db=void 0}}function pY(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Ype{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return pc(this.U.delete())}}class ug extends Se{constructor(e,n){super(pe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function yu(t){return t.name==="IndexedDbTransactionError"}class Jpe{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(Ae(Ni,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(Ae(Ni,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),pc(r)}add(e){return Ae(Ni,"ADD",this.store.name,e,e),pc(this.store.add(e))}get(e){return pc(this.store.get(e)).next((n=>(n===void 0&&(n=null),Ae(Ni,"GET",this.store.name,e,n),n)))}delete(e){return Ae(Ni,"DELETE",this.store.name,e),pc(this.store.delete(e))}count(){return Ae(Ni,"COUNT",this.store.name),pc(this.store.count())}J(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const o=i.getAll(r.range);return new ue(((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}}))}{const o=this.cursor(r),s=[];return this.H(o,((a,u)=>{s.push(u)})).next((()=>s))}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new ue(((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}}))}Z(e,n){Ae(Ni,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const i=this.cursor(r);return this.H(i,((o,s,a)=>a.delete()))}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}te(e){const n=this.cursor({});return new ue(((r,i)=>{n.onerror=o=>{const s=xD(o.target.error);i(s)},n.onsuccess=o=>{const s=o.target.result;s?e(s.primaryKey,s.value).next((a=>{a?s.continue():r()})):r()}}))}H(e,n){const r=[];return new ue(((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{const a=s.target.result;if(!a)return void i();const u=new Ype(a),c=n(a.primaryKey,a.value,u);if(c instanceof ue){const d=c.catch((h=>(u.done(),ue.reject(h))));r.push(d)}u.isDone?i():u.G===null?a.continue():a.continue(u.G)}})).next((()=>ue.waitFor(r)))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function pc(t){return new ue(((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=xD(r.target.error);n(i)}}))}let vF=!1;function xD(t){const e=Vs.M(gn());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new Se("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return vF||(vF=!0,setTimeout((()=>{throw r}),0)),r}}return t}const cg="IndexBackfiller";class Xpe{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){Ae(cg,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const n=await this.ne.ie();Ae(cg,`Documents written: ${n}`)}catch(n){yu(n)?Ae(cg,"Ignoring IndexedDB error during index backfill: ",n):await gu(n)}await this.re(6e4)}))}}class Qpe{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.se(n,e)))}se(e,n){const r=new Set;let i=n,o=!0;return ue.doWhile((()=>o===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((s=>{if(s!==null&&!r.has(s))return Ae(cg,`Processing collection: ${s}`),this.oe(e,s,i).next((a=>{i-=a,r.add(s)}));o=!1})))).next((()=>n-i))}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next((i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next((o=>{const s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next((()=>this._e(i,o))).next((a=>(Ae(cg,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a)))).next((()=>s.size))}))))}_e(e,n){let r=e;return n.changes.forEach(((i,o)=>{const s=fY(o);SD(s,r)>0&&(r=s)})),new Bi(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}di.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl=-1;function vy(t){return t==null}function Pg(t){return t===0&&1/t==-1/0}function mY(t){return typeof t=="number"&&Number.isInteger(t)&&!Pg(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0="";function Hr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=_F(e)),e=Zpe(t.get(n),e);return _F(e)}function Zpe(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case V0:n+="";break;default:n+=o}}return n}function _F(t){return t+V0+""}function ks(t){const e=t.length;if(Ke(e>=2,64408,{path:t}),e===2)return Ke(t.charAt(0)===V0&&t.charAt(1)==="",56145,{path:t}),mt.emptyPath();const n=e-2,r=[];let i="";for(let o=0;o<e;){const s=t.indexOf(V0,o);switch((s<0||s>n)&&Ve(50515,{path:t}),t.charAt(s+1)){case"":const a=t.substring(o,s);let u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:Ve(61167,{path:t})}o=s+2}return new mt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uc="remoteDocuments",_y="owner",fd="owner",Ng="mutationQueues",eme="userId",qo="mutations",wF="batchId",wc="userMutationsIndex",bF=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(t,e){return[t,Hr(e)]}function gY(t,e,n){return[t,Hr(e),n]}const tme={},th="documentMutations",U0="remoteDocumentsV14",nme=["prefixPath","collectionGroup","readTime","documentId"],c0="documentKeyIndex",rme=["prefixPath","collectionGroup","documentId"],yY="collectionGroupIndex",ime=["collectionGroup","readTime","prefixPath","documentId"],Mg="remoteDocumentGlobal",WN="remoteDocumentGlobalKey",nh="targets",vY="queryTargetsIndex",ome=["canonicalId","targetId"],rh="targetDocuments",sme=["targetId","path"],AD="documentTargetsIndex",ame=["path","targetId"],q0="targetGlobalKey",Rc="targetGlobal",Dg="collectionParents",lme=["collectionId","parent"],ih="clientMetadata",ume="clientId",gb="bundles",cme="bundleId",yb="namedQueries",fme="name",CD="indexConfiguration",dme="indexId",YN="collectionGroupIndex",hme="collectionGroup",fg="indexState",pme=["indexId","uid"],_Y="sequenceNumberIndex",mme=["uid","sequenceNumber"],dg="indexEntries",gme=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],wY="documentKeyIndex",yme=["indexId","uid","orderedDocumentKey"],vb="documentOverlays",vme=["userId","collectionPath","documentId"],JN="collectionPathOverlayIndex",_me=["userId","collectionPath","largestBatchId"],bY="collectionGroupOverlayIndex",wme=["userId","collectionGroup","largestBatchId"],ID="globals",bme="name",TY=[Ng,qo,th,uc,nh,_y,Rc,rh,ih,Mg,Dg,gb,yb],Tme=[...TY,vb],EY=[Ng,qo,th,U0,nh,_y,Rc,rh,ih,Mg,Dg,gb,yb,vb],SY=EY,RD=[...SY,CD,fg,dg],Eme=RD,xY=[...RD,ID],Sme=xY;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN extends hY{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Zn(t,e){const n=Oe(t);return Vs.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TF(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function vu(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function AY(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,n){this.comparator=e,this.root=n||Cr.EMPTY}insert(e,n){return new Xt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Cr.BLACK,null,null))}remove(e){return new Xt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Cr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new b_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new b_(this.root,e,this.comparator,!1)}getReverseIterator(){return new b_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new b_(this.root,e,this.comparator,!0)}}class b_{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Cr{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??Cr.RED,this.left=i??Cr.EMPTY,this.right=o??Cr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new Cr(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Cr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Cr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Cr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Cr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ve(27949);return e+(this.isRed()?0:1)}}Cr.EMPTY=null,Cr.RED=!0,Cr.BLACK=!1;Cr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ve(57766)}get value(){throw Ve(16141)}get color(){throw Ve(16727)}get left(){throw Ve(29726)}get right(){throw Ve(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new Cr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new Xt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new EF(this.data.getIterator())}getIteratorFrom(e){return new EF(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Ut(this.comparator);return n.data=e,n}}class EF{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function dd(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.fields=e,e.sort(ln.comparator)}static empty(){return new hi([])}unionWith(e){let n=new Ut(ln.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new hi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Zd(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CY extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xme(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new CY("Invalid base64 string: "+o):o}})(e);return new Sn(n)}static fromUint8Array(e){const n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new Sn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return it(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Sn.EMPTY_BYTE_STRING=new Sn("");const Ame=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ua(t){if(Ke(!!t,39018),typeof t=="string"){let e=0;const n=Ame.exec(t);if(Ke(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:an(t.seconds),nanos:an(t.nanos)}}function an(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function qa(t){return typeof t=="string"?Sn.fromBase64String(t):Sn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IY="server_timestamp",RY="__type__",PY="__previous_value__",NY="__local_write_time__";function _b(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[RY])==null?void 0:r.stringValue)===IY}function wb(t){const e=t.mapValue.fields[PY];return _b(e)?wb(e):e}function kg(t){const e=Ua(t.mapValue.fields[NY].timestampValue);return new Nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cme{constructor(e,n,r,i,o,s,a,u,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c,this.isUsingEmulator=d}}const F0="(default)";class ou{constructor(e,n){this.projectId=e,this.database=n||F0}static empty(){return new ou("","")}get isDefaultDatabase(){return this.database===F0}isEqual(e){return e instanceof ou&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD="__type__",MY="__max__",Gl={mapValue:{fields:{__type__:{stringValue:MY}}}},ND="__vector__",oh="value",f0={nullValue:"NULL_VALUE"};function su(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_b(t)?4:DY(t)?9007199254740991:bb(t)?10:11:Ve(28295,{value:t})}function Hs(t,e){if(t===e)return!0;const n=su(t);if(n!==su(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return kg(t).isEqual(kg(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Ua(i.timestampValue),a=Ua(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return qa(i.bytesValue).isEqual(qa(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return an(i.geoPointValue.latitude)===an(o.geoPointValue.latitude)&&an(i.geoPointValue.longitude)===an(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return an(i.integerValue)===an(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=an(i.doubleValue),a=an(o.doubleValue);return s===a?Pg(s)===Pg(a):isNaN(s)&&isNaN(a)}return!1})(t,e);case 9:return Zd(t.arrayValue.values||[],e.arrayValue.values||[],Hs);case 10:case 11:return(function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(TF(s)!==TF(a))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Hs(s[u],a[u])))return!1;return!0})(t,e);default:return Ve(52216,{left:t})}}function Og(t,e){return(t.values||[]).find((n=>Hs(n,e)))!==void 0}function au(t,e){if(t===e)return 0;const n=su(t),r=su(e);if(n!==r)return it(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return it(t.booleanValue,e.booleanValue);case 2:return(function(o,s){const a=an(o.integerValue||o.doubleValue),u=an(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1})(t,e);case 3:return SF(t.timestampValue,e.timestampValue);case 4:return SF(kg(t),kg(e));case 5:return jN(t.stringValue,e.stringValue);case 6:return(function(o,s){const a=qa(o),u=qa(s);return a.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){const a=o.split("/"),u=s.split("/");for(let c=0;c<a.length&&c<u.length;c++){const d=it(a[c],u[c]);if(d!==0)return d}return it(a.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){const a=it(an(o.latitude),an(s.latitude));return a!==0?a:it(an(o.longitude),an(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return xF(t.arrayValue,e.arrayValue);case 10:return(function(o,s){var g,_,S,b;const a=o.fields||{},u=s.fields||{},c=(g=a[oh])==null?void 0:g.arrayValue,d=(_=u[oh])==null?void 0:_.arrayValue,h=it(((S=c==null?void 0:c.values)==null?void 0:S.length)||0,((b=d==null?void 0:d.values)==null?void 0:b.length)||0);return h!==0?h:xF(c,d)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Gl.mapValue&&s===Gl.mapValue)return 0;if(o===Gl.mapValue)return 1;if(s===Gl.mapValue)return-1;const a=o.fields||{},u=Object.keys(a),c=s.fields||{},d=Object.keys(c);u.sort(),d.sort();for(let h=0;h<u.length&&h<d.length;++h){const g=jN(u[h],d[h]);if(g!==0)return g;const _=au(a[u[h]],c[d[h]]);if(_!==0)return _}return it(u.length,d.length)})(t.mapValue,e.mapValue);default:throw Ve(23264,{he:n})}}function SF(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return it(t,e);const n=Ua(t),r=Ua(e),i=it(n.seconds,r.seconds);return i!==0?i:it(n.nanos,r.nanos)}function xF(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=au(n[i],r[i]);if(o)return o}return it(n.length,r.length)}function sh(t){return QN(t)}function QN(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Ua(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return qa(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return De.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=QN(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${QN(n.fields[s])}`;return i+"}"})(t.mapValue):Ve(61005,{value:t})}function d0(t){switch(su(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=wb(t);return e?16+d0(e):16;case 5:return 2*t.stringValue.length;case 6:return qa(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,o)=>i+d0(o)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return vu(r.fields,((o,s)=>{i+=o.length+d0(s)})),i})(t.mapValue);default:throw Ve(13486,{value:t})}}function Uc(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ZN(t){return!!t&&"integerValue"in t}function Lg(t){return!!t&&"arrayValue"in t}function AF(t){return!!t&&"nullValue"in t}function CF(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function h0(t){return!!t&&"mapValue"in t}function bb(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[PD])==null?void 0:r.stringValue)===ND}function hg(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return vu(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=hg(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=hg(t.arrayValue.values[n]);return e}return{...t}}function DY(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===MY}const kY={mapValue:{fields:{[PD]:{stringValue:ND},[oh]:{arrayValue:{}}}}};function Ime(t){return"nullValue"in t?f0:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Uc(ou.empty(),De.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?bb(t)?kY:{mapValue:{}}:Ve(35942,{value:t})}function Rme(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Uc(ou.empty(),De.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?kY:"mapValue"in t?bb(t)?{mapValue:{}}:Gl:Ve(61959,{value:t})}function IF(t,e){const n=au(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function RF(t,e){const n=au(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e){this.value=e}static empty(){return new Rr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!h0(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=hg(n)}setAll(e){let n=ln.emptyPath(),r={},i=[];e.forEach(((s,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=hg(s):i.push(a.lastSegment())}));const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());h0(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Hs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];h0(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){vu(n,((i,o)=>e[i]=o));for(const i of r)delete e[i]}clone(){return new Rr(hg(this.value))}}function OY(t){const e=[];return vu(t.fields,((n,r)=>{const i=new ln([n]);if(h0(r)){const o=OY(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)})),new hi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new en(e,0,Ye.min(),Ye.min(),Ye.min(),Rr.empty(),0)}static newFoundDocument(e,n,r,i){return new en(e,1,n,Ye.min(),r,i,0)}static newNoDocument(e,n){return new en(e,2,n,Ye.min(),Ye.min(),Rr.empty(),0)}static newUnknownDocument(e,n){return new en(e,3,n,Ye.min(),Ye.min(),Rr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof en&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new en(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n){this.position=e,this.inclusive=n}}function PF(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?r=De.comparator(De.fromName(s.referenceValue),n.key):r=au(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function NF(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Hs(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e,n="asc"){this.field=e,this.dir=n}}function Pme(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LY{}class gt extends LY{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Nme(e,n,r):n==="array-contains"?new kme(e,r):n==="in"?new $Y(e,r):n==="not-in"?new Ome(e,r):n==="array-contains-any"?new Lme(e,r):new gt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Mme(e,r):new Dme(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(au(n,this.value)):n!==null&&su(this.value)===su(n)&&this.matchesComparison(au(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vt extends LY{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Vt(e,n)}matches(e){return ah(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ah(t){return t.op==="and"}function eM(t){return t.op==="or"}function MD(t){return VY(t)&&ah(t)}function VY(t){for(const e of t.filters)if(e instanceof Vt)return!1;return!0}function tM(t){if(t instanceof gt)return t.field.canonicalString()+t.op.toString()+sh(t.value);if(MD(t))return t.filters.map((e=>tM(e))).join(",");{const e=t.filters.map((n=>tM(n))).join(",");return`${t.op}(${e})`}}function UY(t,e){return t instanceof gt?(function(r,i){return i instanceof gt&&r.op===i.op&&r.field.isEqual(i.field)&&Hs(r.value,i.value)})(t,e):t instanceof Vt?(function(r,i){return i instanceof Vt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((o,s,a)=>o&&UY(s,i.filters[a])),!0):!1})(t,e):void Ve(19439)}function qY(t,e){const n=t.filters.concat(e);return Vt.create(n,t.op)}function FY(t){return t instanceof gt?(function(n){return`${n.field.canonicalString()} ${n.op} ${sh(n.value)}`})(t):t instanceof Vt?(function(n){return n.op.toString()+" {"+n.getFilters().map(FY).join(" ,")+"}"})(t):"Filter"}class Nme extends gt{constructor(e,n,r){super(e,n,r),this.key=De.fromName(r.referenceValue)}matches(e){const n=De.comparator(e.key,this.key);return this.matchesComparison(n)}}class Mme extends gt{constructor(e,n){super(e,"in",n),this.keys=BY("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class Dme extends gt{constructor(e,n){super(e,"not-in",n),this.keys=BY("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function BY(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((r=>De.fromName(r.referenceValue)))}class kme extends gt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Lg(n)&&Og(n.arrayValue,this.value)}}class $Y extends gt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Og(this.value.arrayValue,n)}}class Ome extends gt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Og(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Og(this.value.arrayValue,n)}}class Lme extends gt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Lg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Og(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vme{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Te=null}}function nM(t,e=null,n=[],r=[],i=null,o=null,s=null){return new Vme(t,e,n,r,i,o,s)}function qc(t){const e=Oe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>tM(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),vy(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>sh(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>sh(r))).join(",")),e.Te=n}return e.Te}function wy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Pme(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!UY(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!NF(t.startAt,e.startAt)&&NF(t.endAt,e.endAt)}function B0(t){return De.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function $0(t,e){return t.filters.filter((n=>n instanceof gt&&n.field.isEqual(e)))}function MF(t,e,n){let r=f0,i=!0;for(const o of $0(t,e)){let s=f0,a=!0;switch(o.op){case"<":case"<=":s=Ime(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=f0}IF({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const s=n.position[o];IF({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function DF(t,e,n){let r=Gl,i=!0;for(const o of $0(t,e)){let s=Gl,a=!0;switch(o.op){case">=":case">":s=Rme(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Gl}RF({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const s=n.position[o];RF({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function zY(t,e,n,r,i,o,s,a){return new Ya(t,e,n,r,i,o,s,a)}function Bh(t){return new Ya(t)}function kF(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function DD(t){return t.collectionGroup!==null}function Ud(t){const e=Oe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ut(ln.comparator);return s.filters.forEach((u=>{u.getFlattenedFilters().forEach((c=>{c.isInequality()&&(a=a.add(c.field))}))})),a})(e).forEach((o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Vg(o,r))})),n.has(ln.keyField().canonicalString())||e.Ie.push(new Vg(ln.keyField(),r))}return e.Ie}function ni(t){const e=Oe(t);return e.Ee||(e.Ee=Ume(e,Ud(t))),e.Ee}function Ume(t,e){if(t.limitType==="F")return nM(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const o=i.dir==="desc"?"asc":"desc";return new Vg(i.field,o)}));const n=t.endAt?new lu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new lu(t.startAt.position,t.startAt.inclusive):null;return nM(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function rM(t,e){const n=t.filters.concat([e]);return new Ya(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function z0(t,e,n){return new Ya(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function by(t,e){return wy(ni(t),ni(e))&&t.limitType===e.limitType}function HY(t){return`${qc(ni(t))}|lt:${t.limitType}`}function Sd(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>FY(i))).join(", ")}]`),vy(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>sh(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>sh(i))).join(",")),`Target(${r})`})(ni(t))}; limitType=${t.limitType})`}function Ty(t,e){return e.isFoundDocument()&&(function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):De.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(const o of Ud(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,u){const c=PF(s,a,u);return s.inclusive?c<=0:c<0})(r.startAt,Ud(r),i)||r.endAt&&!(function(s,a,u){const c=PF(s,a,u);return s.inclusive?c>=0:c>0})(r.endAt,Ud(r),i))})(t,e)}function GY(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function jY(t){return(e,n)=>{let r=!1;for(const i of Ud(t)){const o=qme(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function qme(t,e,n){const r=t.field.isKeyField()?De.comparator(e.key,n.key):(function(o,s,a){const u=s.data.field(o),c=a.data.field(o);return u!==null&&c!==null?au(u,c):Ve(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ve(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){vu(this.inner,((n,r)=>{for(const[i,o]of r)e(i,o)}))}isEmpty(){return AY(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fme=new Xt(De.comparator);function pi(){return Fme}const KY=new Xt(De.comparator);function Gm(...t){let e=KY;for(const n of t)e=e.insert(n.key,n);return e}function WY(t){let e=KY;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Os(){return pg()}function YY(){return pg()}function pg(){return new Ja((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Bme=new Xt(De.comparator),$me=new Ut(De.comparator);function at(...t){let e=$me;for(const n of t)e=e.add(n);return e}const zme=new Ut(it);function kD(){return zme}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pg(e)?"-0":e}}function JY(t){return{integerValue:""+t}}function XY(t,e){return mY(e)?JY(e):OD(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(){this._=void 0}}function Hme(t,e,n){return t instanceof lh?(function(i,o){const s={fields:{[RY]:{stringValue:IY},[NY]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&_b(o)&&(o=wb(o)),o&&(s.fields[PY]=o),{mapValue:s}})(n,e):t instanceof Fc?ZY(t,e):t instanceof Bc?eJ(t,e):(function(i,o){const s=QY(i,o),a=OF(s)+OF(i.Ae);return ZN(s)&&ZN(i.Ae)?JY(a):OD(i.serializer,a)})(t,e)}function Gme(t,e,n){return t instanceof Fc?ZY(t,e):t instanceof Bc?eJ(t,e):n}function QY(t,e){return t instanceof uh?(function(r){return ZN(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class lh extends Tb{}class Fc extends Tb{constructor(e){super(),this.elements=e}}function ZY(t,e){const n=tJ(e);for(const r of t.elements)n.some((i=>Hs(i,r)))||n.push(r);return{arrayValue:{values:n}}}class Bc extends Tb{constructor(e){super(),this.elements=e}}function eJ(t,e){let n=tJ(e);for(const r of t.elements)n=n.filter((i=>!Hs(i,r)));return{arrayValue:{values:n}}}class uh extends Tb{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function OF(t){return an(t.integerValue||t.doubleValue)}function tJ(t){return Lg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e,n){this.field=e,this.transform=n}}function jme(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Fc&&i instanceof Fc||r instanceof Bc&&i instanceof Bc?Zd(r.elements,i.elements,Hs):r instanceof uh&&i instanceof uh?Hs(r.Ae,i.Ae):r instanceof lh&&i instanceof lh})(t.transform,e.transform)}class Kme{constructor(e,n){this.version=e,this.transformResults=n}}class un{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new un}static exists(e){return new un(void 0,e)}static updateTime(e){return new un(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function p0(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Eb{}function nJ(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new zh(t.key,un.none()):new $h(t.key,t.data,un.none());{const n=t.data,r=Rr.empty();let i=new Ut(ln.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Xa(t.key,r,new hi(i.toArray()),un.none())}}function Wme(t,e,n){t instanceof $h?(function(i,o,s){const a=i.value.clone(),u=VF(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(t,e,n):t instanceof Xa?(function(i,o,s){if(!p0(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=VF(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(rJ(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function mg(t,e,n,r){return t instanceof $h?(function(o,s,a,u){if(!p0(o.precondition,s))return a;const c=o.value.clone(),d=UF(o.fieldTransforms,u,s);return c.setAll(d),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null})(t,e,n,r):t instanceof Xa?(function(o,s,a,u){if(!p0(o.precondition,s))return a;const c=UF(o.fieldTransforms,u,s),d=s.data;return d.setAll(rJ(o)),d.setAll(c),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((h=>h.field)))})(t,e,n,r):(function(o,s,a){return p0(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(t,e,n)}function Yme(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=QY(r.transform,i||null);o!=null&&(n===null&&(n=Rr.empty()),n.set(r.field,o))}return n||null}function LF(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Zd(r,i,((o,s)=>jme(o,s)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class $h extends Eb{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Xa extends Eb{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function rJ(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function VF(t,e,n){const r=new Map;Ke(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Gme(s,a,n[i]))}return r}function UF(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,Hme(o,s,e))}return r}class zh extends Eb{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LD extends Eb{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&Wme(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=mg(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=mg(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=YY();return this.mutations.forEach((i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const u=nJ(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(Ye.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),at())}isEqual(e){return this.batchId===e.batchId&&Zd(this.mutations,e.mutations,((n,r)=>LF(n,r)))&&Zd(this.baseMutations,e.baseMutations,((n,r)=>LF(n,r)))}}class UD{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ke(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return Bme})();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new UD(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jme{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qn,Tt;function iJ(t){switch(t){case pe.OK:return Ve(64938);case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0;default:return Ve(15467,{code:t})}}function oJ(t){if(t===void 0)return kn("GRPC error has no .code"),pe.UNKNOWN;switch(t){case qn.OK:return pe.OK;case qn.CANCELLED:return pe.CANCELLED;case qn.UNKNOWN:return pe.UNKNOWN;case qn.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case qn.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case qn.INTERNAL:return pe.INTERNAL;case qn.UNAVAILABLE:return pe.UNAVAILABLE;case qn.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case qn.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case qn.NOT_FOUND:return pe.NOT_FOUND;case qn.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case qn.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case qn.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case qn.ABORTED:return pe.ABORTED;case qn.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case qn.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case qn.DATA_LOSS:return pe.DATA_LOSS;default:return Ve(39323,{code:t})}}(Tt=qn||(qn={}))[Tt.OK=0]="OK",Tt[Tt.CANCELLED=1]="CANCELLED",Tt[Tt.UNKNOWN=2]="UNKNOWN",Tt[Tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tt[Tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tt[Tt.NOT_FOUND=5]="NOT_FOUND",Tt[Tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tt[Tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tt[Tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tt[Tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tt[Tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tt[Tt.ABORTED=10]="ABORTED",Tt[Tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tt[Tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tt[Tt.INTERNAL=13]="INTERNAL",Tt[Tt.UNAVAILABLE=14]="UNAVAILABLE",Tt[Tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sJ(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xme=new Yl([4294967295,4294967295],0);function qF(t){const e=sJ().encode(t),n=new QW;return n.update(e),new Uint8Array(n.digest())}function FF(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Yl([n,r],0),new Yl([i,o],0)]}class FD{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new jm(`Invalid padding: ${n}`);if(r<0)throw new jm(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new jm(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new jm(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Yl.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Yl.fromNumber(r)));return i.compare(Xme)===1&&(i=new Yl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=qF(e),[r,i]=FF(n);for(let o=0;o<this.hashCount;o++){const s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new FD(o,i,n);return r.forEach((a=>s.insert(a))),s}insert(e){if(this.ge===0)return;const n=qF(e),[r,i]=FF(n);for(let o=0;o<this.hashCount;o++){const s=this.ye(r,i,o);this.Se(s)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class jm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,xy.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Sy(Ye.min(),i,new Xt(it),pi(),at())}}class xy{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new xy(r,n,at(),at(),at())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class aJ{constructor(e,n){this.targetId=e,this.Ce=n}}class lJ{constructor(e,n,r=Sn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class BF{constructor(){this.ve=0,this.Fe=$F(),this.Me=Sn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=at(),n=at(),r=at();return this.Fe.forEach(((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ve(38017,{changeType:o})}})),new xy(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=$F()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ke(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Qme{constructor(e){this.Ge=e,this.ze=new Map,this.je=pi(),this.Je=T_(),this.He=T_(),this.Ye=new Xt(it)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Ve(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const o=i.target;if(B0(o))if(r===0){const s=new De(o.path);this.et(n,s,en.newNoDocument(s,Ye.min()))}else Ke(r===1,20013,{expectedCount:r});else{const s=this._t(n);if(s!==r){const a=this.ut(e),u=a?this.ct(a,e,s):1;if(u!==0){this.it(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=qa(r).toUint8Array()}catch(u){if(u instanceof CY)return zs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new FD(s,i,o)}catch(u){return zs(u instanceof jm?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((o=>{const s=this.Ge.ht(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.et(n,o,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((o,s)=>{const a=this.ot(s);if(a){if(o.current&&B0(a.target)){const u=new De(a.target.path);this.It(u).has(s)||this.Et(s,u)||this.et(s,u,en.newNoDocument(u,e))}o.Be&&(n.set(s,o.ke()),o.qe())}}));let r=at();this.He.forEach(((o,s)=>{let a=!0;s.forEachWhile((u=>{const c=this.ot(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(r=r.add(o))})),this.je.forEach(((o,s)=>s.setReadTime(e)));const i=new Sy(e,n,this.Ye,this.je,r);return this.je=pi(),this.Je=T_(),this.He=T_(),this.Ye=new Xt(it),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new BF,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ut(it),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ut(it),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ae("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new BF),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function T_(){return new Xt(De.comparator)}function $F(){return new Xt(De.comparator)}const Zme={asc:"ASCENDING",desc:"DESCENDING"},ege={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tge={and:"AND",or:"OR"};class nge{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function iM(t,e){return t.useProto3Json||vy(e)?e:{value:e}}function ch(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uJ(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function rge(t,e){return ch(t,e.toTimestamp())}function On(t){return Ke(!!t,49232),Ye.fromTimestamp((function(n){const r=Ua(n);return new Nt(r.seconds,r.nanos)})(t))}function BD(t,e){return oM(t,e).canonicalString()}function oM(t,e){const n=(function(i){return new mt(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function cJ(t){const e=mt.fromString(t);return Ke(wJ(e),10190,{key:e.toString()}),e}function Ug(t,e){return BD(t.databaseId,e.path)}function Us(t,e){const n=cJ(e);if(n.get(1)!==t.databaseId.projectId)throw new Se(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Se(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new De(hJ(n))}function fJ(t,e){return BD(t.databaseId,e)}function dJ(t){const e=cJ(t);return e.length===4?mt.emptyPath():hJ(e)}function sM(t){return new mt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function hJ(t){return Ke(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function zF(t,e,n){return{name:Ug(t,e),fields:n.value.mapValue.fields}}function pJ(t,e,n){const r=Us(t,e.name),i=On(e.updateTime),o=e.createTime?On(e.createTime):Ye.min(),s=new Rr({mapValue:{fields:e.fields}}),a=en.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function ige(t,e){return"found"in e?(function(r,i){Ke(!!i.found,43571),i.found.name,i.found.updateTime;const o=Us(r,i.found.name),s=On(i.found.updateTime),a=i.found.createTime?On(i.found.createTime):Ye.min(),u=new Rr({mapValue:{fields:i.found.fields}});return en.newFoundDocument(o,s,a,u)})(t,e):"missing"in e?(function(r,i){Ke(!!i.missing,3894),Ke(!!i.readTime,22933);const o=Us(r,i.missing),s=On(i.readTime);return en.newNoDocument(o,s)})(t,e):Ve(7234,{result:e})}function oge(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ve(39313,{state:c})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(c,d){return c.useProto3Json?(Ke(d===void 0||typeof d=="string",58123),Sn.fromBase64String(d||"")):(Ke(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Sn.fromUint8Array(d||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(c){const d=c.code===void 0?pe.UNKNOWN:oJ(c.code);return new Se(d,c.message||"")})(s);n=new lJ(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Us(t,r.document.name),o=On(r.document.updateTime),s=r.document.createTime?On(r.document.createTime):Ye.min(),a=new Rr({mapValue:{fields:r.document.fields}}),u=en.newFoundDocument(i,o,s,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new m0(c,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Us(t,r.document),o=r.readTime?On(r.readTime):Ye.min(),s=en.newNoDocument(i,o),a=r.removedTargetIds||[];n=new m0([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Us(t,r.document),o=r.removedTargetIds||[];n=new m0([],o,i,null)}else{if(!("filter"in e))return Ve(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new Jme(i,o),a=r.targetId;n=new aJ(a,s)}}return n}function qg(t,e){let n;if(e instanceof $h)n={update:zF(t,e.key,e.value)};else if(e instanceof zh)n={delete:Ug(t,e.key)};else if(e instanceof Xa)n={update:zF(t,e.key,e.data),updateMask:fge(e.fieldMask)};else{if(!(e instanceof LD))return Ve(16599,{Vt:e.type});n={verify:Ug(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(o,s){const a=s.transform;if(a instanceof lh)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Fc)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Bc)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof uh)return{fieldPath:s.field.canonicalString(),increment:a.Ae};throw Ve(20930,{transform:s.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:rge(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ve(27497)})(t,e.precondition)),n}function aM(t,e){const n=e.currentDocument?(function(o){return o.updateTime!==void 0?un.updateTime(On(o.updateTime)):o.exists!==void 0?un.exists(o.exists):un.none()})(e.currentDocument):un.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(s,a){let u=null;if("setToServerValue"in a)Ke(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),u=new lh;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];u=new Fc(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];u=new Bc(d)}else"increment"in a?u=new uh(s,a.increment):Ve(16584,{proto:a});const c=ln.fromServerFormat(a.fieldPath);return new Ey(c,u)})(t,i))):[];if(e.update){e.update.name;const i=Us(t,e.update.name),o=new Rr({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=(function(u){const c=u.fieldPaths||[];return new hi(c.map((d=>ln.fromServerFormat(d))))})(e.updateMask);return new Xa(i,o,s,n,r)}return new $h(i,o,n,r)}if(e.delete){const i=Us(t,e.delete);return new zh(i,n)}if(e.verify){const i=Us(t,e.verify);return new LD(i,n)}return Ve(1463,{proto:e})}function sge(t,e){return t&&t.length>0?(Ke(e!==void 0,14353),t.map((n=>(function(i,o){let s=i.updateTime?On(i.updateTime):On(o);return s.isEqual(Ye.min())&&(s=On(o)),new Kme(s,i.transformResults||[])})(n,e)))):[]}function mJ(t,e){return{documents:[fJ(t,e.path)]}}function gJ(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=fJ(t,i);const o=(function(c){if(c.length!==0)return _J(Vt.create(c,"and"))})(e.filters);o&&(n.structuredQuery.where=o);const s=(function(c){if(c.length!==0)return c.map((d=>(function(g){return{field:xd(g.field),direction:lge(g.dir)}})(d)))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=iM(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(c){return{before:c.inclusive,values:c.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(c){return{before:!c.inclusive,values:c.position}})(e.endAt)),{ft:n,parent:i}}function yJ(t){let e=dJ(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ke(r===1,65062);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];n.where&&(o=(function(h){const g=vJ(h);return g instanceof Vt&&MD(g)?g.getFilters():[g]})(n.where));let s=[];n.orderBy&&(s=(function(h){return h.map((g=>(function(S){return new Vg(Ad(S.field),(function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(g)))})(n.orderBy));let a=null;n.limit&&(a=(function(h){let g;return g=typeof h=="object"?h.value:h,vy(g)?null:g})(n.limit));let u=null;n.startAt&&(u=(function(h){const g=!!h.before,_=h.values||[];return new lu(_,g)})(n.startAt));let c=null;return n.endAt&&(c=(function(h){const g=!h.before,_=h.values||[];return new lu(_,g)})(n.endAt)),zY(e,i,s,o,a,"F",u,c)}function age(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ve(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function vJ(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ad(n.unaryFilter.field);return gt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ad(n.unaryFilter.field);return gt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ad(n.unaryFilter.field);return gt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Ad(n.unaryFilter.field);return gt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ve(61313);default:return Ve(60726)}})(t):t.fieldFilter!==void 0?(function(n){return gt.create(Ad(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ve(58110);default:return Ve(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Vt.create(n.compositeFilter.filters.map((r=>vJ(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ve(1026)}})(n.compositeFilter.op))})(t):Ve(30097,{filter:t})}function lge(t){return Zme[t]}function uge(t){return ege[t]}function cge(t){return tge[t]}function xd(t){return{fieldPath:t.canonicalString()}}function Ad(t){return ln.fromServerFormat(t.fieldPath)}function _J(t){return t instanceof gt?(function(n){if(n.op==="=="){if(CF(n.value))return{unaryFilter:{field:xd(n.field),op:"IS_NAN"}};if(AF(n.value))return{unaryFilter:{field:xd(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(CF(n.value))return{unaryFilter:{field:xd(n.field),op:"IS_NOT_NAN"}};if(AF(n.value))return{unaryFilter:{field:xd(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xd(n.field),op:uge(n.op),value:n.value}}})(t):t instanceof Vt?(function(n){const r=n.getFilters().map((i=>_J(i)));return r.length===1?r[0]:{compositeFilter:{op:cge(n.op),filters:r}}})(t):Ve(54877,{filter:t})}function fge(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function wJ(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,n,r,i,o=Ye.min(),s=Ye.min(),a=Sn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Ea(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ea(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ea(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ea(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bJ{constructor(e){this.yt=e}}function dge(t,e){let n;if(e.document)n=pJ(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=De.fromSegments(e.noDocument.path),i=zc(e.noDocument.readTime);n=en.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ve(56709);{const r=De.fromSegments(e.unknownDocument.path),i=zc(e.unknownDocument.version);n=en.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime((function(i){const o=new Nt(i[0],i[1]);return Ye.fromTimestamp(o)})(e.readTime)),n}function HF(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:H0(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(o,s){return{name:Ug(o,s.key),fields:s.data.value.mapValue.fields,updateTime:ch(o,s.version.toTimestamp()),createTime:ch(o,s.createTime.toTimestamp())}})(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:$c(e.version)};else{if(!e.isUnknownDocument())return Ve(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:$c(e.version)}}return r}function H0(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function $c(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function zc(t){const e=new Nt(t.seconds,t.nanoseconds);return Ye.fromTimestamp(e)}function mc(t,e){const n=(e.baseMutations||[]).map((o=>aM(t.yt,o)));for(let o=0;o<e.mutations.length-1;++o){const s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const r=e.mutations.map((o=>aM(t.yt,o))),i=Nt.fromMillis(e.localWriteTimeMs);return new VD(e.batchId,i,n,r)}function Km(t){const e=zc(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?zc(t.lastLimboFreeSnapshotVersion):Ye.min();let r;return r=(function(o){return o.documents!==void 0})(t.query)?(function(o){const s=o.documents.length;return Ke(s===1,1966,{count:s}),ni(Bh(dJ(o.documents[0])))})(t.query):(function(o){return ni(yJ(o))})(t.query),new Ea(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Sn.fromBase64String(t.resumeToken))}function TJ(t,e){const n=$c(e.snapshotVersion),r=$c(e.lastLimboFreeSnapshotVersion);let i;i=B0(e.target)?mJ(t.yt,e.target):gJ(t.yt,e.target).ft;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:qc(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function $D(t){const e=yJ({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?z0(e,e.limit,"L"):e}function dx(t,e){return new qD(e.largestBatchId,aM(t.yt,e.overlayMutation))}function GF(t,e){const n=e.path.lastSegment();return[t,Hr(e.path.popLast()),n]}function jF(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:$c(r.readTime),documentKey:Hr(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hge{getBundleMetadata(e,n){return KF(e).get(n).next((r=>{if(r)return(function(o){return{id:o.bundleId,createTime:zc(o.createTime),version:o.version}})(r)}))}saveBundleMetadata(e,n){return KF(e).put((function(i){return{bundleId:i.id,createTime:$c(On(i.createTime)),version:i.version}})(n))}getNamedQuery(e,n){return WF(e).get(n).next((r=>{if(r)return(function(o){return{name:o.name,query:$D(o.bundledQuery),readTime:zc(o.readTime)}})(r)}))}saveNamedQuery(e,n){return WF(e).put((function(i){return{name:i.name,readTime:$c(On(i.readTime)),bundledQuery:i.bundledQuery}})(n))}}function KF(t){return Zn(t,gb)}function WF(t){return Zn(t,yb)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new Sb(e,r)}getOverlay(e,n){return bm(e).get(GF(this.userId,n)).next((r=>r?dx(this.serializer,r):null))}getOverlays(e,n){const r=Os();return ue.forEach(n,(i=>this.getOverlay(e,i).next((o=>{o!==null&&r.set(i,o)})))).next((()=>r))}saveOverlays(e,n,r){const i=[];return r.forEach(((o,s)=>{const a=new qD(n,s);i.push(this.St(e,a))})),ue.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach((s=>i.add(Hr(s.getCollectionPath()))));const o=[];return i.forEach((s=>{const a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(bm(e).Z(JN,a))})),ue.waitFor(o)}getOverlaysForCollection(e,n,r){const i=Os(),o=Hr(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return bm(e).J(JN,s).next((a=>{for(const u of a){const c=dx(this.serializer,u);i.set(c.getKey(),c)}return i}))}getOverlaysForCollectionGroup(e,n,r,i){const o=Os();let s;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return bm(e).ee({index:bY,range:a},((u,c,d)=>{const h=dx(this.serializer,c);o.size()<i||h.largestBatchId===s?(o.set(h.getKey(),h),s=h.largestBatchId):d.done()})).next((()=>o))}St(e,n){return bm(e).put((function(i,o,s){const[a,u,c]=GF(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:c,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:qg(i.yt,s.mutation)}})(this.serializer,this.userId,n))}}function bm(t){return Zn(t,vb)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pge{bt(e){return Zn(e,ID)}getSessionToken(e){return this.bt(e).get("sessionToken").next((n=>{const r=n==null?void 0:n.value;return r?Sn.fromUint8Array(r):Sn.EMPTY_BYTE_STRING}))}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(an(e.integerValue));else if("doubleValue"in e){const r=an(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Pg(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Ua(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(qa(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?DY(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):bb(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):Ve(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){var s,a;const r=e.fields||{};this.Ft(n,53);const i=oh,o=((a=(s=r[i].arrayValue)==null?void 0:s.values)==null?void 0:a.length)||0;this.Ft(n,15),n.Mt(an(o)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),De.fromName(e).path.forEach((r=>{this.Ft(n,60),this.Ut(r,n)}))}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}gc.Kt=new gc;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hd=255;function mge(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function YF(t){const e=64-(function(r){let i=0;for(let o=0;o<8;++o){const s=mge(255&r[o]);if(i+=s,s!==8)break}return i})(t);return Math.ceil(e/8)}class gge{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=n.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const n=this.en(e),r=YF(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=YF(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(hd),this.sn(255)}_n(){this.an(hd),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=(function(o){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)})(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===hd?(this.sn(hd),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===hd?(this.an(hd),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class yge{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class vge{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Tm{constructor(){this.cn=new gge,this.ln=new yge(this.cn),this.hn=new vge(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,n,r,i){this.Tn=e,this.In=n,this.En=r,this.dn=i}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new yc(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:g0(this.En),directionalValue:g0(this.dn),orderedDocumentKey:g0(n),documentKey:r.path.toArray()}}Vn(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function kl(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=JF(t.En,e.En),n!==0?n:(n=JF(t.dn,e.dn),n!==0?n:De.comparator(t.In,e.In)))}function JF(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function g0(t){return LK()?(function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r})(t):t}function XF(t){return typeof t!="string"?t:(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(t)}class QF{constructor(e){this.mn=new Ut(((n,r)=>ln.comparator(n.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(Ke(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=KN(e);if(n!==void 0&&!this.wn(n))return!1;const r=lc(e);let i=new Set,o=0,s=0;for(;o<r.length&&this.wn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[o];if(!this.Sn(a,u)||!this.bn(this.fn[s++],u))return!1}++o}for(;o<r.length;++o){const a=r[o];if(s>=this.fn.length||!this.bn(this.fn[s++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new Ut(ln.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new l0(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new l0(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new l0(r.field,r.dir==="asc"?0:1)));return new L0(L0.UNKNOWN_ID,this.collectionId,n,Rg.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EJ(t){var n,r;if(Ke(t instanceof gt||t instanceof Vt,20012),t instanceof gt){if(t instanceof $Y){const i=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map((o=>gt.create(t.field,"==",o))))||[];return Vt.create(i,"or")}return t}const e=t.filters.map((i=>EJ(i)));return Vt.create(e,t.op)}function _ge(t){if(t.getFilters().length===0)return[];const e=cM(EJ(t));return Ke(SJ(e),7391),lM(e)||uM(e)?[e]:e.getFilters()}function lM(t){return t instanceof gt}function uM(t){return t instanceof Vt&&MD(t)}function SJ(t){return lM(t)||uM(t)||(function(n){if(n instanceof Vt&&eM(n)){for(const r of n.getFilters())if(!lM(r)&&!uM(r))return!1;return!0}return!1})(t)}function cM(t){if(Ke(t instanceof gt||t instanceof Vt,34018),t instanceof gt)return t;if(t.filters.length===1)return cM(t.filters[0]);const e=t.filters.map((r=>cM(r)));let n=Vt.create(e,t.op);return n=G0(n),SJ(n)?n:(Ke(n instanceof Vt,64498),Ke(ah(n),40251),Ke(n.filters.length>1,57927),n.filters.reduce(((r,i)=>zD(r,i))))}function zD(t,e){let n;return Ke(t instanceof gt||t instanceof Vt,38388),Ke(e instanceof gt||e instanceof Vt,25473),n=t instanceof gt?e instanceof gt?(function(i,o){return Vt.create([i,o],"and")})(t,e):ZF(t,e):e instanceof gt?ZF(e,t):(function(i,o){if(Ke(i.filters.length>0&&o.filters.length>0,48005),ah(i)&&ah(o))return qY(i,o.getFilters());const s=eM(i)?i:o,a=eM(i)?o:i,u=s.filters.map((c=>zD(c,a)));return Vt.create(u,"or")})(t,e),G0(n)}function ZF(t,e){if(ah(e))return qY(e,t.getFilters());{const n=e.filters.map((r=>zD(t,r)));return Vt.create(n,"or")}}function G0(t){if(Ke(t instanceof gt||t instanceof Vt,11850),t instanceof gt)return t;const e=t.getFilters();if(e.length===1)return G0(e[0]);if(VY(t))return t;const n=e.map((i=>G0(i))),r=[];return n.forEach((i=>{i instanceof gt?r.push(i):i instanceof Vt&&(i.op===t.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:Vt.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wge{constructor(){this.Cn=new HD}addToCollectionParentIndex(e,n){return this.Cn.add(n),ue.resolve()}getCollectionParents(e,n){return ue.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ue.resolve()}deleteFieldIndex(e,n){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,n){return ue.resolve()}getDocumentsMatchingTarget(e,n){return ue.resolve(null)}getIndexType(e,n){return ue.resolve(0)}getFieldIndexes(e,n){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,n){return ue.resolve(Bi.min())}getMinOffsetFromCollectionGroup(e,n){return ue.resolve(Bi.min())}updateCollectionGroup(e,n,r){return ue.resolve()}updateIndexEntries(e,n){return ue.resolve()}}class HD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ut(mt.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ut(mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eB="IndexedDbIndexManager",E_=new Uint8Array(0);class bge{constructor(e,n){this.databaseId=n,this.vn=new HD,this.Fn=new Ja((r=>qc(r)),((r,i)=>wy(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener((()=>{this.vn.add(n)}));const o={collectionId:r,parent:Hr(i)};return tB(e).put(o)}return ue.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[sY(n),""],!1,!0);return tB(e).J(i).next((o=>{for(const s of o){if(s.collectionId!==n)break;r.push(ks(s.parent))}return r}))}addFieldIndex(e,n){const r=Em(e),i=(function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map((u=>[u.fieldPath.canonicalString(),u.kind]))}})(n);delete i.indexId;const o=r.add(i);if(n.indexState){const s=md(e);return o.next((a=>{s.put(jF(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return o.next()}deleteFieldIndex(e,n){const r=Em(e),i=md(e),o=pd(e);return r.delete(n.indexId).next((()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const n=Em(e),r=pd(e),i=md(e);return n.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,n){return ue.forEach(this.Mn(n),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const o=new QF(r).Dn();if(o!=null)return this.addFieldIndex(e,o)}}))))}getDocumentsMatchingTarget(e,n){const r=pd(e);let i=!0;const o=new Map;return ue.forEach(this.Mn(n),(s=>this.xn(e,s).next((a=>{i&&(i=!!a),o.set(s,a)})))).next((()=>{if(i){let s=at();const a=[];return ue.forEach(o,((u,c)=>{Ae(eB,`Using index ${(function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map((N=>`${N.fieldPath}:${N.kind}`)).join(",")}`})(u)} to execute ${qc(n)}`);const d=(function(I,N){const V=KN(N);if(V===void 0)return null;for(const q of $0(I,V.fieldPath))switch(q.op){case"array-contains-any":return q.value.arrayValue.values||[];case"array-contains":return[q.value]}return null})(c,u),h=(function(I,N){const V=new Map;for(const q of lc(N))for(const P of $0(I,q.fieldPath))switch(P.op){case"==":case"in":V.set(q.fieldPath.canonicalString(),P.value);break;case"not-in":case"!=":return V.set(q.fieldPath.canonicalString(),P.value),Array.from(V.values())}return null})(c,u),g=(function(I,N){const V=[];let q=!0;for(const P of lc(N)){const O=P.kind===0?MF(I,P.fieldPath,I.startAt):DF(I,P.fieldPath,I.startAt);V.push(O.value),q&&(q=O.inclusive)}return new lu(V,q)})(c,u),_=(function(I,N){const V=[];let q=!0;for(const P of lc(N)){const O=P.kind===0?DF(I,P.fieldPath,I.endAt):MF(I,P.fieldPath,I.endAt);V.push(O.value),q&&(q=O.inclusive)}return new lu(V,q)})(c,u),S=this.On(u,c,g),b=this.On(u,c,_),T=this.Nn(u,c,h),x=this.Bn(u.indexId,d,S,g.inclusive,b,_.inclusive,T);return ue.forEach(x,(C=>r.Y(C,n.limit).next((I=>{I.forEach((N=>{const V=De.fromSegments(N.documentKey);s.has(V)||(s=s.add(V),a.push(V))}))}))))})).next((()=>a))}return ue.resolve(null)}))}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=_ge(Vt.create(e.filters,"and")).map((r=>nM(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,n),n)}Bn(e,n,r,i,o,s,a){const u=(n!=null?n.length:1)*Math.max(r.length,o.length),c=u/(n!=null?n.length:1),d=[];for(let h=0;h<u;++h){const g=n?this.Ln(n[h/c]):E_,_=this.kn(e,g,r[h%c],i),S=this.qn(e,g,o[h%c],s),b=a.map((T=>this.kn(e,g,T,!0)));d.push(...this.createRange(_,S,b))}return d}kn(e,n,r,i){const o=new yc(e,De.empty(),n,r);return i?o:o.An()}qn(e,n,r,i){const o=new yc(e,De.empty(),n,r);return i?o.An():o}xn(e,n){const r=new QF(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next((o=>{let s=null;for(const a of o)r.yn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s}))}getIndexType(e,n){let r=2;const i=this.Mn(n);return ue.forEach(i,(o=>this.xn(e,o).next((s=>{s?r!==0&&s.fields.length<(function(u){let c=new Ut(ln.comparator),d=!1;for(const h of u.filters)for(const g of h.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?d=!0:c=c.add(g.field));for(const h of u.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)})(o)&&(r=1):r=0})))).next((()=>(function(s){return s.limit!==null})(n)&&i.length>1&&r===2?1:r))}Qn(e,n){const r=new Tm;for(const i of lc(e)){const o=n.data.field(i.fieldPath);if(o==null)return null;const s=r.Pn(i.kind);gc.Kt.Dt(o,s)}return r.un()}Ln(e){const n=new Tm;return gc.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new Tm;return gc.Kt.Dt(Uc(this.databaseId,n),r.Pn((function(o){const s=lc(o);return s.length===0?0:s[s.length-1].kind})(e))),r.un()}Nn(e,n,r){if(r===null)return[];let i=[];i.push(new Tm);let o=0;for(const s of lc(e)){const a=r[o++];for(const u of i)if(this.Un(n,s.fieldPath)&&Lg(a))i=this.Kn(i,s,a);else{const c=u.Pn(s.kind);gc.Kt.Dt(a,c)}}return this.Wn(i)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const i=[...e],o=[];for(const s of r.arrayValue.values||[])for(const a of i){const u=new Tm;u.seed(a.un()),gc.Kt.Dt(s,u.Pn(n.kind)),o.push(u)}return o}Un(e,n){return!!e.filters.find((r=>r instanceof gt&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,n){const r=Em(e),i=md(e);return(n?r.J(YN,IDBKeyRange.bound(n,n)):r.J()).next((o=>{const s=[];return ue.forEach(o,(a=>i.get([a.indexId,this.uid]).next((u=>{s.push((function(d,h){const g=h?new Rg(h.sequenceNumber,new Bi(zc(h.readTime),new De(ks(h.documentKey)),h.largestBatchId)):Rg.empty(),_=d.fields.map((([S,b])=>new l0(ln.fromServerFormat(S),b)));return new L0(d.indexId,d.collectionGroup,_,g)})(a,u))})))).next((()=>s))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((n=>n.length===0?null:(n.sort(((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:it(r.collectionGroup,i.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(e,n,r){const i=Em(e),o=md(e);return this.Gn(e).next((s=>i.J(YN,IDBKeyRange.bound(n,n)).next((a=>ue.forEach(a,(u=>o.put(jF(u.indexId,this.uid,s,r))))))))}updateIndexEntries(e,n){const r=new Map;return ue.forEach(n,((i,o)=>{const s=r.get(i.collectionGroup);return(s?ue.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next((a=>(r.set(i.collectionGroup,a),ue.forEach(a,(u=>this.zn(e,i,u).next((c=>{const d=this.jn(o,u);return c.isEqual(d)?ue.resolve():this.Jn(e,o,u,c,d)})))))))}))}Hn(e,n,r,i){return pd(e).put(i.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,i){return pd(e).delete(i.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const i=pd(e);let o=new Ut(kl);return i.ee({index:wY,range:IDBKeyRange.only([r.indexId,this.uid,g0(this.$n(r,n))])},((s,a)=>{o=o.add(new yc(r.indexId,n,XF(a.arrayValue),XF(a.directionalValue)))})).next((()=>o))}jn(e,n){let r=new Ut(kl);const i=this.Qn(n,e);if(i==null)return r;const o=KN(n);if(o!=null){const s=e.data.field(o.fieldPath);if(Lg(s))for(const a of s.arrayValue.values||[])r=r.add(new yc(n.indexId,e.key,this.Ln(a),i))}else r=r.add(new yc(n.indexId,e.key,E_,i));return r}Jn(e,n,r,i,o){Ae(eB,"Updating index entries for document '%s'",n.key);const s=[];return(function(u,c,d,h,g){const _=u.getIterator(),S=c.getIterator();let b=dd(_),T=dd(S);for(;b||T;){let x=!1,C=!1;if(b&&T){const I=d(b,T);I<0?C=!0:I>0&&(x=!0)}else b!=null?C=!0:x=!0;x?(h(T),T=dd(S)):C?(g(b),b=dd(_)):(b=dd(_),T=dd(S))}})(i,o,kl,(a=>{s.push(this.Hn(e,n,r,a))}),(a=>{s.push(this.Yn(e,n,r,a))})),ue.waitFor(s)}Gn(e){let n=1;return md(e).ee({index:_Y,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,o)=>{o.done(),n=i.sequenceNumber+1})).next((()=>n))}createRange(e,n,r){r=r.sort(((s,a)=>kl(s,a))).filter(((s,a,u)=>!a||kl(s,u[a-1])!==0));const i=[];i.push(e);for(const s of r){const a=kl(s,e),u=kl(s,n);if(a===0)i[0]=e.An();else if(a>0&&u<0)i.push(s),i.push(s.An());else if(u>0)break}i.push(n);const o=[];for(let s=0;s<i.length;s+=2){if(this.Zn(i[s],i[s+1]))return[];const a=i[s].Vn(this.uid,E_,De.empty()),u=i[s+1].Vn(this.uid,E_,De.empty());o.push(IDBKeyRange.bound(a,u))}return o}Zn(e,n){return kl(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(nB)}getMinOffset(e,n){return ue.mapArray(this.Mn(n),(r=>this.xn(e,r).next((i=>i||Ve(44426))))).next(nB)}}function tB(t){return Zn(t,Dg)}function pd(t){return Zn(t,dg)}function Em(t){return Zn(t,CD)}function md(t){return Zn(t,fg)}function nB(t){Ke(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;SD(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Bi(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rB={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xJ=41943040;class qr{static withCacheSize(e){return new qr(e,qr.DEFAULT_COLLECTION_PERCENTILE,qr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AJ(t,e,n){const r=t.store(qo),i=t.store(th),o=[],s=IDBKeyRange.only(n.batchId);let a=0;const u=r.ee({range:s},((d,h,g)=>(a++,g.delete())));o.push(u.next((()=>{Ke(a===1,47070,{batchId:n.batchId})})));const c=[];for(const d of n.mutations){const h=gY(e,d.key.path,n.batchId);o.push(i.delete(h)),c.push(d.key)}return ue.waitFor(o).next((()=>c))}function j0(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ve(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qr.DEFAULT_COLLECTION_PERCENTILE=10,qr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qr.DEFAULT=new qr(xJ,qr.DEFAULT_COLLECTION_PERCENTILE,qr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qr.DISABLED=new qr(-1,0,0);class xb{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,n,r,i){Ke(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new xb(o,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ol(e).ee({index:wc,range:r},((i,o,s)=>{n=!1,s.done()})).next((()=>n))}addMutationBatch(e,n,r,i){const o=Cd(e),s=Ol(e);return s.add({}).next((a=>{Ke(typeof a=="number",49019);const u=new VD(a,n,r,i),c=(function(_,S,b){const T=b.baseMutations.map((C=>qg(_.yt,C))),x=b.mutations.map((C=>qg(_.yt,C)));return{userId:S,batchId:b.batchId,localWriteTimeMs:b.localWriteTime.toMillis(),baseMutations:T,mutations:x}})(this.serializer,this.userId,u),d=[];let h=new Ut(((g,_)=>it(g.canonicalString(),_.canonicalString())));for(const g of i){const _=gY(this.userId,g.key.path,a);h=h.add(g.key.path.popLast()),d.push(s.put(c)),d.push(o.put(_,tme))}return h.forEach((g=>{d.push(this.indexManager.addToCollectionParentIndex(e,g))})),e.addOnCommittedListener((()=>{this.Xn[a]=u.keys()})),ue.waitFor(d).next((()=>u))}))}lookupMutationBatch(e,n){return Ol(e).get(n).next((r=>r?(Ke(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),mc(this.serializer,r)):null))}er(e,n){return this.Xn[n]?ue.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next((r=>{if(r){const i=r.keys();return this.Xn[n]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return Ol(e).ee({index:wc,range:i},((s,a,u)=>{a.userId===this.userId&&(Ke(a.batchId>=r,47524,{tr:r}),o=mc(this.serializer,a)),u.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Jl;return Ol(e).ee({index:wc,range:n,reverse:!0},((i,o,s)=>{r=o.batchId,s.done()})).next((()=>r))}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Jl],[this.userId,Number.POSITIVE_INFINITY]);return Ol(e).J(wc,n).next((r=>r.map((i=>mc(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=u0(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return Cd(e).ee({range:i},((s,a,u)=>{const[c,d,h]=s,g=ks(d);if(c===this.userId&&n.path.isEqual(g))return Ol(e).get(h).next((_=>{if(!_)throw Ve(61480,{nr:s,batchId:h});Ke(_.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:_.userId,batchId:h}),o.push(mc(this.serializer,_))}));u.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ut(it);const i=[];return n.forEach((o=>{const s=u0(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=Cd(e).ee({range:a},((c,d,h)=>{const[g,_,S]=c,b=ks(_);g===this.userId&&o.path.isEqual(b)?r=r.add(S):h.done()}));i.push(u)})),ue.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,o=u0(this.userId,r),s=IDBKeyRange.lowerBound(o);let a=new Ut(it);return Cd(e).ee({range:s},((u,c,d)=>{const[h,g,_]=u,S=ks(g);h===this.userId&&r.isPrefixOf(S)?S.length===i&&(a=a.add(_)):d.done()})).next((()=>this.rr(e,a)))}rr(e,n){const r=[],i=[];return n.forEach((o=>{i.push(Ol(e).get(o).next((s=>{if(s===null)throw Ve(35274,{batchId:o});Ke(s.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:s.userId,batchId:o}),r.push(mc(this.serializer,s))})))})),ue.waitFor(i).next((()=>r))}removeMutationBatch(e,n){return AJ(e.le,this.userId,n).next((r=>(e.addOnCommittedListener((()=>{this.ir(n.batchId)})),ue.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((n=>{if(!n)return ue.resolve();const r=IDBKeyRange.lowerBound((function(s){return[s]})(this.userId)),i=[];return Cd(e).ee({range:r},((o,s,a)=>{if(o[0]===this.userId){const u=ks(o[1]);i.push(u)}else a.done()})).next((()=>{Ke(i.length===0,56720,{sr:i.map((o=>o.canonicalString()))})}))}))}containsKey(e,n){return CJ(e,this.userId,n)}_r(e){return IJ(e).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:Jl,lastStreamToken:""}))}}function CJ(t,e,n){const r=u0(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return Cd(t).ee({range:o,X:!0},((a,u,c)=>{const[d,h,g]=a;d===e&&h===i&&(s=!0),c.done()})).next((()=>s))}function Ol(t){return Zn(t,qo)}function Cd(t){return Zn(t,th)}function IJ(t){return Zn(t,Ng)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Hc(0)}static cr(){return new Hc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tge{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next((n=>{const r=new Hc(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((n=>Ye.fromTimestamp(new Nt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(e,n,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.hr(e,i))))}addTargetData(e,n){return this.Pr(e,n).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next((()=>gd(e).delete(n.targetId))).next((()=>this.lr(e))).next((r=>(Ke(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,n,r){let i=0;const o=[];return gd(e).ee(((s,a)=>{const u=Km(a);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))})).next((()=>ue.waitFor(o))).next((()=>i))}forEachTarget(e,n){return gd(e).ee(((r,i)=>{const o=Km(i);n(o)}))}lr(e){return iB(e).get(q0).next((n=>(Ke(n!==null,2888),n)))}hr(e,n){return iB(e).put(q0,n)}Pr(e,n){return gd(e).put(TJ(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((n=>n.targetCount))}getTargetData(e,n){const r=qc(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return gd(e).ee({range:i,index:vY},((s,a,u)=>{const c=Km(a);wy(n,c.target)&&(o=c,u.done())})).next((()=>o))}addMatchingKeys(e,n,r){const i=[],o=Bl(e);return n.forEach((s=>{const a=Hr(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))})),ue.waitFor(i)}removeMatchingKeys(e,n,r){const i=Bl(e);return ue.forEach(n,(o=>{const s=Hr(o.path);return ue.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])}))}removeMatchingKeysForTargetId(e,n){const r=Bl(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Bl(e);let o=at();return i.ee({range:r,X:!0},((s,a,u)=>{const c=ks(s[1]),d=new De(c);o=o.add(d)})).next((()=>o))}containsKey(e,n){const r=Hr(n.path),i=IDBKeyRange.bound([r],[sY(r)],!1,!0);let o=0;return Bl(e).ee({index:AD,X:!0,range:i},(([s,a],u,c)=>{s!==0&&(o++,c.done())})).next((()=>o>0))}At(e,n){return gd(e).get(n).next((r=>r?Km(r):null))}}function gd(t){return Zn(t,nh)}function iB(t){return Zn(t,Rc)}function Bl(t){return Zn(t,rh)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oB="LruGarbageCollector",Ege=1048576;function sB([t,e],[n,r]){const i=it(t,n);return i===0?it(e,r):i}class Sge{constructor(e){this.Ir=e,this.buffer=new Ut(sB),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();sB(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class RJ{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ae(oB,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){yu(n)?Ae(oB,"Ignoring IndexedDB error during garbage collection: ",n):await gu(n)}await this.Vr(3e5)}))}}class xge{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return ue.resolve(di.ce);const r=new Sge(n);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ae("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(rB)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rB):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,o,s,a,u,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((h=>(h>this.params.maximumSequenceNumbersToCollect?(Ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,s=Date.now(),this.nthSequenceNumber(e,i)))).next((h=>(r=h,a=Date.now(),this.removeTargets(e,r,n)))).next((h=>(o=h,u=Date.now(),this.removeOrphanedDocuments(e,r)))).next((h=>(c=Date.now(),Ed()<=pt.DEBUG&&Ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${h} documents in `+(c-u)+`ms
Total Duration: ${c-d}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:h}))))}}function PJ(t,e){return new xge(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Age{constructor(e,n){this.db=e,this.garbageCollector=PJ(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,((r,i)=>n(i)))}addReference(e,n,r){return S_(e,r)}removeReference(e,n,r){return S_(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return S_(e,n)}br(e,n){return(function(i,o){let s=!1;return IJ(i).te((a=>CJ(i,a,o).next((u=>(u&&(s=!0),ue.resolve(!u)))))).next((()=>s))})(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Sr(e,((s,a)=>{if(a<=n){const u=this.br(e,s).next((c=>{if(!c)return o++,r.getEntry(e,s).next((()=>(r.removeEntry(s,Ye.min()),Bl(e).delete((function(h){return[0,Hr(h.path)]})(s)))))}));i.push(u)}})).next((()=>ue.waitFor(i))).next((()=>r.apply(e))).next((()=>o))}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return S_(e,n)}Sr(e,n){const r=Bl(e);let i,o=di.ce;return r.ee({index:AD},(([s,a],{path:u,sequenceNumber:c})=>{s===0?(o!==di.ce&&n(new De(ks(i)),o),o=c,i=u):o=di.ce})).next((()=>{o!==di.ce&&n(new De(ks(i)),o)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function S_(t,e){return Bl(t).put((function(r,i){return{targetId:0,path:Hr(r.path),sequenceNumber:i}})(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NJ{constructor(){this.changes=new Ja((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,en.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ue.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cge{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return oc(e).put(r)}removeEntry(e,n,r){return oc(e).delete((function(o,s){const a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],H0(s),a[a.length-1]]})(n,r))}updateMetadata(e,n){return this.getMetadata(e).next((r=>(r.byteSize+=n,this.Dr(e,r))))}getEntry(e,n){let r=en.newInvalidDocument(n);return oc(e).ee({index:c0,range:IDBKeyRange.only(Sm(n))},((i,o)=>{r=this.Cr(n,o)})).next((()=>r))}vr(e,n){let r={size:0,document:en.newInvalidDocument(n)};return oc(e).ee({index:c0,range:IDBKeyRange.only(Sm(n))},((i,o)=>{r={document:this.Cr(n,o),size:j0(o)}})).next((()=>r))}getEntries(e,n){let r=pi();return this.Fr(e,n,((i,o)=>{const s=this.Cr(i,o);r=r.insert(i,s)})).next((()=>r))}Mr(e,n){let r=pi(),i=new Xt(De.comparator);return this.Fr(e,n,((o,s)=>{const a=this.Cr(o,s);r=r.insert(o,a),i=i.insert(o,j0(s))})).next((()=>({documents:r,Or:i})))}Fr(e,n,r){if(n.isEmpty())return ue.resolve();let i=new Ut(uB);n.forEach((u=>i=i.add(u)));const o=IDBKeyRange.bound(Sm(i.first()),Sm(i.last())),s=i.getIterator();let a=s.getNext();return oc(e).ee({index:c0,range:o},((u,c,d)=>{const h=De.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&uB(a,h)<0;)r(a,null),a=s.getNext();a&&a.isEqual(h)&&(r(a,c),a=s.hasNext()?s.getNext():null),a?d.j(Sm(a)):d.done()})).next((()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,n,r,i,o){const s=n.path,a=[s.popLast().toArray(),s.lastSegment(),H0(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return oc(e).J(IDBKeyRange.bound(a,u,!0)).next((c=>{o==null||o.incrementDocumentReadCount(c.length);let d=pi();for(const h of c){const g=this.Cr(De.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);g.isFoundDocument()&&(Ty(n,g)||i.has(g.key))&&(d=d.insert(g.key,g))}return d}))}getAllFromCollectionGroup(e,n,r,i){let o=pi();const s=lB(n,r),a=lB(n,Bi.max());return oc(e).ee({index:yY,range:IDBKeyRange.bound(s,a,!0)},((u,c,d)=>{const h=this.Cr(De.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);o=o.insert(h.key,h),o.size===i&&d.done()})).next((()=>o))}newChangeBuffer(e){return new Ige(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((n=>n.byteSize))}getMetadata(e){return aB(e).get(WN).next((n=>(Ke(!!n,20021),n)))}Dr(e,n){return aB(e).put(WN,n)}Cr(e,n){if(n){const r=dge(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Ye.min())))return r}return en.newInvalidDocument(e)}}function MJ(t){return new Cge(t)}class Ige extends NJ{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Ja((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const n=[];let r=0,i=new Ut(((o,s)=>it(o.canonicalString(),s.canonicalString())));return this.changes.forEach(((o,s)=>{const a=this.Br.get(o);if(n.push(this.Nr.removeEntry(e,o,a.readTime)),s.isValidDocument()){const u=HF(this.Nr.serializer,s);i=i.add(o.path.popLast());const c=j0(u);r+=c-a.size,n.push(this.Nr.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){const u=HF(this.Nr.serializer,s.convertToNoDocument(Ye.min()));n.push(this.Nr.addEntry(e,o,u))}})),i.forEach((o=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,o))})),n.push(this.Nr.updateMetadata(e,r)),ue.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next((r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next((({documents:r,Or:i})=>(i.forEach(((o,s)=>{this.Br.set(o,{size:s,readTime:r.get(o).readTime})})),r)))}}function aB(t){return Zn(t,Mg)}function oc(t){return Zn(t,U0)}function Sm(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function lB(t,e){const n=e.documentKey.path.toArray();return[t,H0(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function uB(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=it(n[o],r[o]),i)return i;return i=it(n.length,r.length),i||(i=it(n[n.length-2],r[r.length-2]),i||it(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rge{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DJ{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&mg(r.mutation,i,hi.empty(),Nt.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,at()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=at()){const i=Os();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((o=>{let s=Gm();return o.forEach(((a,u)=>{s=s.insert(a,u.overlayedDocument)})),s}))))}getOverlayedDocuments(e,n){const r=Os();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,at())))}populateOverlays(e,n,r){const i=[];return r.forEach((o=>{n.has(o)||i.push(o)})),this.documentOverlayCache.getOverlays(e,i).next((o=>{o.forEach(((s,a)=>{n.set(s,a)}))}))}computeViews(e,n,r,i){let o=pi();const s=pg(),a=(function(){return pg()})();return n.forEach(((u,c)=>{const d=r.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof Xa)?o=o.insert(c.key,c):d!==void 0?(s.set(c.key,d.mutation.getFieldMask()),mg(d.mutation,c,d.mutation.getFieldMask(),Nt.now())):s.set(c.key,hi.empty())})),this.recalculateAndSaveOverlays(e,o).next((u=>(u.forEach(((c,d)=>s.set(c,d))),n.forEach(((c,d)=>a.set(c,new Rge(d,s.get(c)??null)))),a)))}recalculateAndSaveOverlays(e,n){const r=pg();let i=new Xt(((s,a)=>s-a)),o=at();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((s=>{for(const a of s)a.keys().forEach((u=>{const c=n.get(u);if(c===null)return;let d=r.get(u)||hi.empty();d=a.applyToLocalView(c,d),r.set(u,d);const h=(i.get(a.batchId)||at()).add(u);i=i.insert(a.batchId,h)}))})).next((()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,d=u.value,h=YY();d.forEach((g=>{if(!o.has(g)){const _=nJ(n.get(g),r.get(g));_!==null&&h.set(g,_),o=o.add(g)}})),s.push(this.documentOverlayCache.saveOverlays(e,c,h))}return ue.waitFor(s)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return De.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):DD(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):ue.resolve(Os());let a=eh,u=o;return s.next((c=>ue.forEach(c,((d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),o.get(d)?ue.resolve():this.remoteDocumentCache.getEntry(e,d).next((g=>{u=u.insert(d,g)}))))).next((()=>this.populateOverlays(e,c,o))).next((()=>this.computeViews(e,u,c,at()))).next((d=>({batchId:a,changes:WY(d)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new De(n)).next((r=>{let i=Gm();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=Gm();return this.indexManager.getCollectionParents(e,o).next((a=>ue.forEach(a,(u=>{const c=(function(h,g){return new Ya(g,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)})(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next((d=>{d.forEach(((h,g)=>{s=s.insert(h,g)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i)))).next((s=>{o.forEach(((u,c)=>{const d=c.getKey();s.get(d)===null&&(s=s.insert(d,en.newInvalidDocument(d)))}));let a=Gm();return s.forEach(((u,c)=>{const d=o.get(u);d!==void 0&&mg(d.mutation,c,hi.empty(),Nt.now()),Ty(n,c)&&(a=a.insert(u,c))})),a}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pge{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ue.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:On(i.createTime)}})(n)),ue.resolve()}getNamedQuery(e,n){return ue.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:$D(i.bundledQuery),readTime:On(i.readTime)}})(n)),ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nge{constructor(){this.overlays=new Xt(De.comparator),this.qr=new Map}getOverlay(e,n){return ue.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Os();return ue.forEach(n,(i=>this.getOverlay(e,i).next((o=>{o!==null&&r.set(i,o)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,o)=>{this.St(e,n,o)})),ue.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(r)),ue.resolve()}getOverlaysForCollection(e,n,r){const i=Os(),o=n.length+1,s=new De(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return ue.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Xt(((c,d)=>c-d));const s=this.overlays.getIterator();for(;s.hasNext();){const c=s.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=o.get(c.largestBatchId);d===null&&(d=Os(),o=o.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Os(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((c,d)=>a.set(c,d))),!(a.size()>=i)););return ue.resolve(a)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new qD(n,r));let o=this.qr.get(n);o===void 0&&(o=at(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mge{constructor(){this.sessionToken=Sn.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(){this.Qr=new Ut(ur.$r),this.Ur=new Ut(ur.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new ur(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new ur(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new De(new mt([])),r=new ur(n,e),i=new ur(n,e+1),o=[];return this.Ur.forEachInRange([r,i],(s=>{this.Gr(s),o.push(s.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new De(new mt([])),r=new ur(n,e),i=new ur(n,e+1);let o=at();return this.Ur.forEachInRange([r,i],(s=>{o=o.add(s.key)})),o}containsKey(e){const n=new ur(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ur{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return De.comparator(e.key,n.key)||it(e.Yr,n.Yr)}static Kr(e,n){return it(e.Yr,n.Yr)||De.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dge{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ut(ur.$r)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new VD(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.Zr=this.Zr.add(new ur(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ue.resolve(s)}lookupMutationBatch(e,n){return ue.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),o=i<0?0:i;return ue.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?Jl:this.tr-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ur(n,0),i=new ur(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],(s=>{const a=this.Xr(s.Yr);o.push(a)})),ue.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ut(it);return n.forEach((i=>{const o=new ur(i,0),s=new ur(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],(a=>{r=r.add(a.Yr)}))})),ue.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;De.isDocumentKey(o)||(o=o.child(""));const s=new ur(new De(o),0);let a=new Ut(it);return this.Zr.forEachWhile((u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.Yr)),!0)}),s),ue.resolve(this.ti(a))}ti(e){const n=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){Ke(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ue.forEach(n.mutations,(i=>{const o=new ur(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new ur(n,0),i=this.Zr.firstAfterOrEqual(r);return ue.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kge{constructor(e){this.ri=e,this.docs=(function(){return new Xt(De.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ue.resolve(r?r.document.mutableCopy():en.newInvalidDocument(n))}getEntries(e,n){let r=pi();return n.forEach((i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():en.newInvalidDocument(i))})),ue.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=pi();const s=n.path,a=new De(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:d}}=u.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||SD(fY(d),r)<=0||(i.has(d.key)||Ty(n,d))&&(o=o.insert(d.key,d.mutableCopy()))}return ue.resolve(o)}getAllFromCollectionGroup(e,n,r,i){Ve(9500)}ii(e,n){return ue.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new Oge(this)}getSize(e){return ue.resolve(this.size)}}class Oge extends NJ{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),ue.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lge{constructor(e){this.persistence=e,this.si=new Ja((n=>qc(n)),wy),this.lastRemoteSnapshotVersion=Ye.min(),this.highestTargetId=0,this.oi=0,this._i=new GD,this.targetCount=0,this.ai=Hc.ur()}forEachTarget(e,n){return this.si.forEach(((r,i)=>n(i))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),ue.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Hc(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ue.resolve()}updateTargetData(e,n){return this.Pr(n),ue.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.si.forEach(((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)})),ue.waitFor(o).next((()=>i))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return ue.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),ue.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach((s=>{o.push(i.markPotentiallyOrphaned(e,s))})),ue.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ue.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return ue.resolve(r)}containsKey(e,n){return ue.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e,n){this.ui={},this.overlays={},this.ci=new di(0),this.li=!1,this.li=!0,this.hi=new Mge,this.referenceDelegate=e(this),this.Pi=new Lge(this),this.indexManager=new wge,this.remoteDocumentCache=(function(i){return new kge(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new bJ(n),this.Ii=new Pge(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Nge,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Dge(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Ae("MemoryPersistence","Starting transaction:",e);const i=new Vge(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((o=>this.referenceDelegate.di(i).next((()=>o)))).toPromise().then((o=>(i.raiseOnCommittedEvent(),o)))}Ai(e,n){return ue.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class Vge extends hY{constructor(e){super(),this.currentSequenceNumber=e}}class Ab{constructor(e){this.persistence=e,this.Ri=new GD,this.Vi=null}static mi(e){return new Ab(e)}get fi(){if(this.Vi)return this.Vi;throw Ve(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),ue.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),ue.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ue.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((o=>this.fi.add(o.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.fi,(r=>{const i=De.fromPath(r);return this.gi(e,i).next((o=>{o||n.removeEntry(i,Ye.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ue.or([()=>ue.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class K0{constructor(e,n){this.persistence=e,this.pi=new Ja((r=>Hr(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=PJ(this,n)}static mi(e,n){return new K0(e,n)}Ei(){}di(e){return ue.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return ue.forEach(this.pi,((r,i)=>this.br(e,r,i).next((o=>o?ue.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,(s=>this.br(e,s,n).next((a=>{a||(r++,o.removeEntry(s,Ye.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ue.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),ue.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ue.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=d0(e.data.value)),n}br(e,n,r){return ue.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return ue.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uge{constructor(e){this.serializer=e}k(e,n,r,i){const o=new mb("createOrUpgrade",n);r<1&&i>=1&&((function(u){u.createObjectStore(_y)})(e),(function(u){u.createObjectStore(Ng,{keyPath:eme}),u.createObjectStore(qo,{keyPath:wF,autoIncrement:!0}).createIndex(wc,bF,{unique:!0}),u.createObjectStore(th)})(e),cB(e),(function(u){u.createObjectStore(uc)})(e));let s=ue.resolve();return r<3&&i>=3&&(r!==0&&((function(u){u.deleteObjectStore(rh),u.deleteObjectStore(nh),u.deleteObjectStore(Rc)})(e),cB(e)),s=s.next((()=>(function(u){const c=u.store(Rc),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ye.min().toTimestamp(),targetCount:0};return c.put(q0,d)})(o)))),r<4&&i>=4&&(r!==0&&(s=s.next((()=>(function(u,c){return c.store(qo).J().next((h=>{u.deleteObjectStore(qo),u.createObjectStore(qo,{keyPath:wF,autoIncrement:!0}).createIndex(wc,bF,{unique:!0});const g=c.store(qo),_=h.map((S=>g.put(S)));return ue.waitFor(_)}))})(e,o)))),s=s.next((()=>{(function(u){u.createObjectStore(ih,{keyPath:ume})})(e)}))),r<5&&i>=5&&(s=s.next((()=>this.yi(o)))),r<6&&i>=6&&(s=s.next((()=>((function(u){u.createObjectStore(Mg)})(e),this.wi(o))))),r<7&&i>=7&&(s=s.next((()=>this.Si(o)))),r<8&&i>=8&&(s=s.next((()=>this.bi(e,o)))),r<9&&i>=9&&(s=s.next((()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(s=s.next((()=>this.Di(o)))),r<11&&i>=11&&(s=s.next((()=>{(function(u){u.createObjectStore(gb,{keyPath:cme})})(e),(function(u){u.createObjectStore(yb,{keyPath:fme})})(e)}))),r<12&&i>=12&&(s=s.next((()=>{(function(u){const c=u.createObjectStore(vb,{keyPath:vme});c.createIndex(JN,_me,{unique:!1}),c.createIndex(bY,wme,{unique:!1})})(e)}))),r<13&&i>=13&&(s=s.next((()=>(function(u){const c=u.createObjectStore(U0,{keyPath:nme});c.createIndex(c0,rme),c.createIndex(yY,ime)})(e))).next((()=>this.Ci(e,o))).next((()=>e.deleteObjectStore(uc)))),r<14&&i>=14&&(s=s.next((()=>this.Fi(e,o)))),r<15&&i>=15&&(s=s.next((()=>(function(u){u.createObjectStore(CD,{keyPath:dme,autoIncrement:!0}).createIndex(YN,hme,{unique:!1}),u.createObjectStore(fg,{keyPath:pme}).createIndex(_Y,mme,{unique:!1}),u.createObjectStore(dg,{keyPath:gme}).createIndex(wY,yme,{unique:!1})})(e)))),r<16&&i>=16&&(s=s.next((()=>{n.objectStore(fg).clear()})).next((()=>{n.objectStore(dg).clear()}))),r<17&&i>=17&&(s=s.next((()=>{(function(u){u.createObjectStore(ID,{keyPath:bme})})(e)}))),r<18&&i>=18&&LK()&&(s=s.next((()=>{n.objectStore(fg).clear()})).next((()=>{n.objectStore(dg).clear()}))),s}wi(e){let n=0;return e.store(uc).ee(((r,i)=>{n+=j0(i)})).next((()=>{const r={byteSize:n};return e.store(Mg).put(WN,r)}))}yi(e){const n=e.store(Ng),r=e.store(qo);return n.J().next((i=>ue.forEach(i,(o=>{const s=IDBKeyRange.bound([o.userId,Jl],[o.userId,o.lastAcknowledgedBatchId]);return r.J(wc,s).next((a=>ue.forEach(a,(u=>{Ke(u.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:u.batchId});const c=mc(this.serializer,u);return AJ(e,o.userId,c).next((()=>{}))}))))}))))}Si(e){const n=e.store(rh),r=e.store(uc);return e.store(Rc).get(q0).next((i=>{const o=[];return r.ee(((s,a)=>{const u=new mt(s),c=(function(h){return[0,Hr(h)]})(u);o.push(n.get(c).next((d=>d?ue.resolve():(h=>n.put({targetId:0,path:Hr(h),sequenceNumber:i.highestListenSequenceNumber}))(u))))})).next((()=>ue.waitFor(o)))}))}bi(e,n){e.createObjectStore(Dg,{keyPath:lme});const r=n.store(Dg),i=new HD,o=s=>{if(i.add(s)){const a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:Hr(u)})}};return n.store(uc).ee({X:!0},((s,a)=>{const u=new mt(s);return o(u.popLast())})).next((()=>n.store(th).ee({X:!0},(([s,a,u],c)=>{const d=ks(a);return o(d.popLast())}))))}Di(e){const n=e.store(nh);return n.ee(((r,i)=>{const o=Km(i),s=TJ(this.serializer,o);return n.put(s)}))}Ci(e,n){const r=n.store(uc),i=[];return r.ee(((o,s)=>{const a=n.store(U0),u=(function(h){return h.document?new De(mt.fromString(h.document.name).popFirst(5)):h.noDocument?De.fromSegments(h.noDocument.path):h.unknownDocument?De.fromSegments(h.unknownDocument.path):Ve(36783)})(s).path.toArray(),c={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(c))})).next((()=>ue.waitFor(i)))}Fi(e,n){const r=n.store(qo),i=MJ(this.serializer),o=new jD(Ab.mi,this.serializer.yt);return r.J().next((s=>{const a=new Map;return s.forEach((u=>{let c=a.get(u.userId)??at();mc(this.serializer,u).keys().forEach((d=>c=c.add(d))),a.set(u.userId,c)})),ue.forEach(a,((u,c)=>{const d=new fr(c),h=Sb.wt(this.serializer,d),g=o.getIndexManager(d),_=xb.wt(d,this.serializer,g,o.referenceDelegate);return new DJ(i,_,h,g).recalculateAndSaveOverlaysForDocumentKeys(new XN(n,di.ce),u).next()}))}))}}function cB(t){t.createObjectStore(rh,{keyPath:sme}).createIndex(AD,ame,{unique:!0}),t.createObjectStore(nh,{keyPath:"targetId"}).createIndex(vY,ome,{unique:!0}),t.createObjectStore(Rc)}const Ll="IndexedDbPersistence",hx=18e5,px=5e3,mx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",kJ="main";class KD{constructor(e,n,r,i,o,s,a,u,c,d,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=o,this.window=s,this.document=a,this.xi=c,this.Oi=d,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=g=>Promise.resolve(),!KD.v())throw new Se(pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Age(this,i),this.$i=n+kJ,this.serializer=new bJ(u),this.Ui=new Vs(this.$i,this.Ni,new Uge(this.serializer)),this.hi=new pge,this.Pi=new Tge(this.referenceDelegate,this.serializer),this.remoteDocumentCache=MJ(this.serializer),this.Ii=new hge,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,d===!1&&kn(Ll,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Se(pe.FAILED_PRECONDITION,mx);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new di(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async n=>{n.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>x_(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((n=>this.isPrimary&&!n?this.Zi(e).next((()=>!1)):!!n&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(yu(e))return Ae(Ll,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ae(Ll,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return xm(e).get(fd).next((n=>ue.resolve(this.es(n))))}ts(e){return x_(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,hx)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const r=Zn(n,ih);return r.J().next((i=>{const o=this.ss(i,hx),s=i.filter((a=>o.indexOf(a)===-1));return ue.forEach(s,(a=>r.delete(a.clientId))).next((()=>s))}))})).catch((()=>[]));if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?ue.resolve(!0):xm(e).get(fd).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,px)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new Se(pe.FAILED_PRECONDITION,mx);return!1}}return!(!this.networkEnabled||!this.inForeground)||x_(e).J().next((r=>this.ss(r,px).find((i=>{if(this.clientId!==i.clientId){const o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&Ae(Ll,`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[_y,ih],(e=>{const n=new XN(e,di.ce);return this.Zi(n).next((()=>this.ts(n)))})),this.Ui.close(),this.Ps()}ss(e,n){return e.filter((r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>x_(e).J().next((n=>this.ss(n,hx).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return xb.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new bge(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Sb.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){Ae(Ll,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",o=(function(u){return u===18?Sme:u===17?xY:u===16?Eme:u===15?RD:u===14?SY:u===13?EY:u===12?Tme:u===11?TY:void Ve(60245)})(this.Ni);let s;return this.Ui.runTransaction(e,i,o,(a=>(s=new XN(a,this.ci?this.ci.next():di.ce),n==="readwrite-primary"?this.Hi(s).next((u=>!!u||this.Yi(s))).next((u=>{if(!u)throw kn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new Se(pe.FAILED_PRECONDITION,dY);return r(s)})).next((u=>this.Xi(s).next((()=>u)))):this.Is(s).next((()=>r(s)))))).then((a=>(s.raiseOnCommittedEvent(),a)))}Is(e){return xm(e).get(fd).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,px)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Se(pe.FAILED_PRECONDITION,mx)}))}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return xm(e).put(fd,n)}static v(){return Vs.v()}Zi(e){const n=xm(e);return n.get(fd).next((r=>this.es(r)?(Ae(Ll,"Releasing primary lease."),n.delete(fd)):ue.resolve()))}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(kn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;OK()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return Ae(Ll,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return kn(Ll,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){kn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function xm(t){return Zn(t,_y)}function x_(t){return Zn(t,ih)}function WD(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=at(),i=at();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new YD(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qge{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OJ{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return OK()?8:pY(gn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.ys(e,n).next((s=>{o.result=s})).next((()=>{if(!o.result)return this.ws(e,n,i,r).next((s=>{o.result=s}))})).next((()=>{if(o.result)return;const s=new qge;return this.Ss(e,n,s).next((a=>{if(o.result=a,this.Vs)return this.bs(e,n,s,a.size)}))})).next((()=>o.result))}bs(e,n,r,i){return r.documentReadCount<this.fs?(Ed()<=pt.DEBUG&&Ae("QueryEngine","SDK will not create cache indexes for query:",Sd(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ue.resolve()):(Ed()<=pt.DEBUG&&Ae("QueryEngine","Query:",Sd(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Ed()<=pt.DEBUG&&Ae("QueryEngine","The SDK decides to create cache indexes for query:",Sd(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ni(n))):ue.resolve())}ys(e,n){if(kF(n))return ue.resolve(null);let r=ni(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=z0(n,null,"F"),r=ni(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const s=at(...o);return this.ps.getDocuments(e,s).next((a=>this.indexManager.getMinOffset(e,r).next((u=>{const c=this.Ds(n,a);return this.Cs(n,c,s,u.readTime)?this.ys(e,z0(n,null,"F")):this.vs(e,c,n,u)}))))})))))}ws(e,n,r,i){return kF(n)||i.isEqual(Ye.min())?ue.resolve(null):this.ps.getDocuments(e,r).next((o=>{const s=this.Ds(n,o);return this.Cs(n,s,r,i)?ue.resolve(null):(Ed()<=pt.DEBUG&&Ae("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Sd(n)),this.vs(e,s,n,cY(i,eh)).next((a=>a)))}))}Ds(e,n){let r=new Ut(jY(e));return n.forEach(((i,o)=>{Ty(e,o)&&(r=r.add(o))})),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,r){return Ed()<=pt.DEBUG&&Ae("QueryEngine","Using full collection scan to execute query:",Sd(n)),this.ps.getDocumentsMatchingQuery(e,n,Bi.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((o=>(n.forEach((s=>{o=o.insert(s.key,s)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD="LocalStore",Fge=3e8;class Bge{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Xt(it),this.xs=new Ja((o=>qc(o)),wy),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DJ(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function LJ(t,e,n,r){return new Bge(t,e,n,r)}async function VJ(t,e){const n=Oe(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((o=>(i=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((o=>{const s=[],a=[];let u=at();for(const c of i){s.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}for(const c of o){a.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next((c=>({Ls:c,removedBatchIds:s,addedBatchIds:a})))}))}))}function $ge(t,e){const n=Oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,u,c,d){const h=c.batch,g=h.keys();let _=ue.resolve();return g.forEach((S=>{_=_.next((()=>d.getEntry(u,S))).next((b=>{const T=c.docVersions.get(S);Ke(T!==null,48541),b.version.compareTo(T)<0&&(h.applyToRemoteDocument(b,c),b.isValidDocument()&&(b.setReadTime(c.commitVersion),d.addEntry(b)))}))})),_.next((()=>a.mutationQueue.removeMutationBatch(u,h)))})(n,r,e,o).next((()=>o.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let u=at();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function UJ(t){const e=Oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function zge(t,e){const n=Oe(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];e.targetChanges.forEach(((d,h)=>{const g=i.get(h);if(!g)return;a.push(n.Pi.removeMatchingKeys(o,d.removedDocuments,h).next((()=>n.Pi.addMatchingKeys(o,d.addedDocuments,h))));let _=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(h)!==null?_=_.withResumeToken(Sn.EMPTY_BYTE_STRING,Ye.min()).withLastLimboFreeSnapshotVersion(Ye.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,r)),i=i.insert(h,_),(function(b,T,x){return b.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=Fge?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0})(g,_,d)&&a.push(n.Pi.updateTargetData(o,_))}));let u=pi(),c=at();if(e.documentUpdates.forEach((d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,d))})),a.push(qJ(o,s,e.documentUpdates).next((d=>{u=d.ks,c=d.qs}))),!r.isEqual(Ye.min())){const d=n.Pi.getLastRemoteSnapshotVersion(o).next((h=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r)));a.push(d)}return ue.waitFor(a).next((()=>s.apply(o))).next((()=>n.localDocuments.getLocalViewOfDocuments(o,u,c))).next((()=>u))})).then((o=>(n.Ms=i,o)))}function qJ(t,e,n){let r=at(),i=at();return n.forEach((o=>r=r.add(o))),e.getEntries(t,r).next((o=>{let s=pi();return n.forEach(((a,u)=>{const c=o.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Ye.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):Ae(JD,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)})),{ks:s,qs:i}}))}function Hge(t,e){const n=Oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Jl),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function fh(t,e){const n=Oe(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Pi.getTargetData(r,e).next((o=>o?(i=o,ue.resolve(i)):n.Pi.allocateTargetId(r).next((s=>(i=new Ea(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function dh(t,e,n){const r=Oe(t),i=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!yu(s))throw s;Ae(JD,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function W0(t,e,n){const r=Oe(t);let i=Ye.min(),o=at();return r.persistence.runTransaction("Execute query","readwrite",(s=>(function(u,c,d){const h=Oe(u),g=h.xs.get(d);return g!==void 0?ue.resolve(h.Ms.get(g)):h.Pi.getTargetData(c,d)})(r,s,ni(e)).next((a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,a.targetId).next((u=>{o=u}))})).next((()=>r.Fs.getDocumentsMatchingQuery(s,e,n?i:Ye.min(),n?o:at()))).next((a=>($J(r,GY(e),a),{documents:a,Qs:o})))))}function FJ(t,e){const n=Oe(t),r=Oe(n.Pi),i=n.Ms.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(o=>r.At(o,e).next((s=>s?s.target:null))))}function BJ(t,e){const n=Oe(t),r=n.Os.get(e)||Ye.min();return n.persistence.runTransaction("Get new document changes","readonly",(i=>n.Ns.getAllFromCollectionGroup(i,e,cY(r,eh),Number.MAX_SAFE_INTEGER))).then((i=>($J(n,e,i),i)))}function $J(t,e,n){let r=t.Os.get(e)||Ye.min();n.forEach(((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),t.Os.set(e,r)}async function Gge(t,e,n,r){const i=Oe(t);let o=at(),s=pi();for(const c of n){const d=e.$s(c.metadata.name);c.document&&(o=o.add(d));const h=e.Us(c);h.setReadTime(e.Ks(c.metadata.readTime)),s=s.insert(d,h)}const a=i.Ns.newChangeBuffer({trackRemovals:!0}),u=await fh(i,(function(d){return ni(Bh(mt.fromString(`__bundle__/docs/${d}`)))})(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(c=>qJ(c,a,s).next((d=>(a.apply(c),d))).next((d=>i.Pi.removeMatchingKeysForTargetId(c,u.targetId).next((()=>i.Pi.addMatchingKeys(c,o,u.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(c,d.ks,d.qs))).next((()=>d.ks))))))}async function jge(t,e,n=at()){const r=await fh(t,ni($D(e.bundledQuery))),i=Oe(t);return i.persistence.runTransaction("Save named query","readwrite",(o=>{const s=On(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Ii.saveNamedQuery(o,e);const a=r.withResumeToken(Sn.EMPTY_BYTE_STRING,s);return i.Ms=i.Ms.insert(a.targetId,a),i.Pi.updateTargetData(o,a).next((()=>i.Pi.removeMatchingKeysForTargetId(o,r.targetId))).next((()=>i.Pi.addMatchingKeys(o,n,r.targetId))).next((()=>i.Ii.saveNamedQuery(o,e)))}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zJ="firestore_clients";function fB(t,e){return`${zJ}_${t}_${e}`}const HJ="firestore_mutations";function dB(t,e,n){let r=`${HJ}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const GJ="firestore_targets";function gx(t,e){return`${GJ}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As="SharedClientState";class Y0{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ws(e,n,r){const i=JSON.parse(r);let o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new Se(i.error.code,i.error.message))),s?new Y0(e,n,i.state,o):(kn(As,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class gg{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new Se(r.error.code,r.error.message))),o?new gg(e,r.state,i):(kn(As,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class J0{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=kD();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=mY(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new J0(e,o):(kn(As,`Failed to parse client data for instance '${e}': ${n}`),null)}}class XD{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new XD(n.clientId,n.onlineState):(kn(As,`Failed to parse online state: ${e}`),null)}}class fM{constructor(){this.activeTargetIds=kD()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yx{constructor(e,n,r,i,o){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Xt(it),this.started=!1,this.Xs=[];const s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.eo=fB(this.persistenceKey,this.Js),this.no=(function(u){return`firestore_sequence_number_${u}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new fM),this.ro=new RegExp(`^${zJ}_${s}_([^_]*)$`),this.io=new RegExp(`^${HJ}_${s}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${GJ}_${s}_(\\d+)$`),this.oo=(function(u){return`firestore_online_state_${u}`})(this.persistenceKey),this._o=(function(u){return`firestore_bundle_loaded_v2_${u}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(fB(this.persistenceKey,r));if(i){const o=J0.Ws(r,i);o&&(this.Zs=this.Zs.insert(o.clientId,o))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach(((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)})),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(gx(this.persistenceKey,e));if(i){const o=gg.Ws(e,i);o&&(r=o.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(gx(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach((i=>{this.Po(i)})),this.currentUser=e,r.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Ae(As,"READ",e,n),n}setItem(e,n){Ae(As,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){Ae(As,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(Ae(As,"EVENT",n.key,n.newValue),n.key===this.eo)return void kn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=(function(o){let s=di.ce;if(o!=null)try{const a=JSON.parse(o);Ke(typeof a=="number",30636,{So:o}),s=a}catch(a){kn(As,"Failed to read sequence number from WebStorage",a)}return s})(n.newValue);r!==di.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map((i=>this.syncEngine.Do(i))))}}}else this.Xs.push(n)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const i=new Y0(this.currentUser,e,n,r),o=dB(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Gs())}Po(e){const n=dB(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const i=gx(this.persistenceKey,e),o=new gg(e,n,r);this.setItem(i,o.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return J0.Ws(r,n)}fo(e,n){const r=this.io.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Y0.Ws(new fr(o),i,n)}yo(e,n){const r=this.so.exec(e),i=Number(r[1]);return gg.Ws(i,n)}uo(e){return XD.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);Ae(As,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),i=this.lo(this.Zs),o=this.lo(r),s=[],a=[];return o.forEach((u=>{i.has(u)||s.push(u)})),i.forEach((u=>{o.has(u)||a.push(u)})),this.syncEngine.Fo(s,a).then((()=>{this.Zs=r}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=kD();return e.forEach(((r,i)=>{n=n.unionWith(i.activeTargetIds)})),n}}class jJ{constructor(){this.Mo=new fM,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new fM,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kge{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hB="ConnectivityMonitor";class pB{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ae(hB,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ae(hB,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let A_=null;function dM(){return A_===null?A_=(function(){return 268435456+Math.round(2147483648*Math.random())})():A_++,"0x"+A_.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx="RestConnection",Wge={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Yge{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===F0?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,o){const s=dM(),a=this.zo(e,n.toUriEncodedString());Ae(vx,`Sending RPC '${e}' ${s}:`,a,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,o);const{host:c}=new URL(a),d=pu(c);return this.Jo(e,a,u,r,d).then((h=>(Ae(vx,`Received RPC '${e}' ${s}: `,h),h)),(h=>{throw zs(vx,`RPC '${e}' ${s} failed with error: `,h,"url: ",a,"request:",r),h}))}Ho(e,n,r,i,o,s){return this.Go(e,n,r,i,o)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Fh})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,o)=>e[o]=i)),r&&r.headers.forEach(((i,o)=>e[o]=i))}zo(e,n){const r=Wge[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jge{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr="WebChannelConnection";class Xge extends Yge{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,o){const s=dM();return new Promise(((a,u)=>{const c=new ZW;c.setWithCredentials(!0),c.listenOnce(eY.COMPLETE,(()=>{try{switch(c.getLastErrorCode()){case a0.NO_ERROR:const h=c.getResponseJson();Ae(Vr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),a(h);break;case a0.TIMEOUT:Ae(Vr,`RPC '${e}' ${s} timed out`),u(new Se(pe.DEADLINE_EXCEEDED,"Request time out"));break;case a0.HTTP_ERROR:const g=c.getStatus();if(Ae(Vr,`RPC '${e}' ${s} failed with status:`,g,"response text:",c.getResponseText()),g>0){let _=c.getResponseJson();Array.isArray(_)&&(_=_[0]);const S=_==null?void 0:_.error;if(S&&S.status&&S.message){const b=(function(x){const C=x.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(C)>=0?C:pe.UNKNOWN})(S.status);u(new Se(b,S.message))}else u(new Se(pe.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new Se(pe.UNAVAILABLE,"Connection failed."));break;default:Ve(9055,{l_:e,streamId:s,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{Ae(Vr,`RPC '${e}' ${s} completed.`)}}));const d=JSON.stringify(i);Ae(Vr,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",d,r,15)}))}T_(e,n,r){const i=dM(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=rY(),a=nY(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const d=o.join("");Ae(Vr,`Creating RPC '${e}' stream ${i}: ${d}`,u);const h=s.createWebChannel(d,u);this.I_(h);let g=!1,_=!1;const S=new Jge({Yo:T=>{_?Ae(Vr,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(g||(Ae(Vr,`Opening RPC '${e}' stream ${i} transport.`),h.open(),g=!0),Ae(Vr,`RPC '${e}' stream ${i} sending:`,T),h.send(T))},Zo:()=>h.close()}),b=(T,x,C)=>{T.listen(x,(I=>{try{C(I)}catch(N){setTimeout((()=>{throw N}),0)}}))};return b(h,Hm.EventType.OPEN,(()=>{_||(Ae(Vr,`RPC '${e}' stream ${i} transport opened.`),S.o_())})),b(h,Hm.EventType.CLOSE,(()=>{_||(_=!0,Ae(Vr,`RPC '${e}' stream ${i} transport closed`),S.a_(),this.E_(h))})),b(h,Hm.EventType.ERROR,(T=>{_||(_=!0,zs(Vr,`RPC '${e}' stream ${i} transport errored. Name:`,T.name,"Message:",T.message),S.a_(new Se(pe.UNAVAILABLE,"The operation could not be completed")))})),b(h,Hm.EventType.MESSAGE,(T=>{var x;if(!_){const C=T.data[0];Ke(!!C,16349);const I=C,N=(I==null?void 0:I.error)||((x=I[0])==null?void 0:x.error);if(N){Ae(Vr,`RPC '${e}' stream ${i} received error:`,N);const V=N.status;let q=(function(R){const U=qn[R];if(U!==void 0)return oJ(U)})(V),P=N.message;q===void 0&&(q=pe.INTERNAL,P="Unknown error status: "+V+" with message "+N.message),_=!0,S.a_(new Se(q,P)),h.close()}else Ae(Vr,`RPC '${e}' stream ${i} received:`,C),S.u_(C)}})),b(a,tY.STAT_EVENT,(T=>{T.stat===GN.PROXY?Ae(Vr,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===GN.NOPROXY&&Ae(Vr,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{S.__()}),0),S}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KJ(){return typeof window<"u"?window:null}function y0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ay(t){return new nge(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&Ae("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mB="PersistentStream";class WJ{constructor(e,n,r,i,o,s,a,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new QD(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===pe.RESOURCE_EXHAUSTED?(kn(n.toString()),kn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new Se(pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ae(mB,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Ae(mB,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Qge extends WJ{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=oge(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Ye.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?Ye.min():s.readTime?On(s.readTime):Ye.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=sM(this.serializer),n.addTarget=(function(o,s){let a;const u=s.target;if(a=B0(u)?{documents:mJ(o,u)}:{query:gJ(o,u).ft},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=uJ(o,s.resumeToken);const c=iM(o,s.expectedCount);c!==null&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo(Ye.min())>0){a.readTime=ch(o,s.snapshotVersion.toTimestamp());const c=iM(o,s.expectedCount);c!==null&&(a.expectedCount=c)}return a})(this.serializer,e);const r=age(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=sM(this.serializer),n.removeTarget=e,this.q_(n)}}class Zge extends WJ{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=sge(e.writeResults,e.commitTime),r=On(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=sM(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>qg(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eye{}class tye extends eye{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Se(pe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,s])=>this.connection.Go(e,oM(n,r),i,o,s))).catch((o=>{throw o.name==="FirebaseError"?(o.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Se(pe.UNKNOWN,o.toString())}))}Ho(e,n,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.Ho(e,oM(n,r),i,s,a,o))).catch((s=>{throw s.name==="FirebaseError"?(s.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Se(pe.UNKNOWN,s.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class nye{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(kn(n),this.aa=!1):Ae("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gc="RemoteStore";class rye{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((s=>{r.enqueueAndForget((async()=>{_u(this)&&(Ae(Gc,"Restarting streams for network reachability change."),await(async function(u){const c=Oe(u);c.Ea.add(4),await Hh(c),c.Ra.set("Unknown"),c.Ea.delete(4),await Cy(c)})(this))}))})),this.Ra=new nye(r,i)}}async function Cy(t){if(_u(t))for(const e of t.da)await e(!0)}async function Hh(t){for(const e of t.da)await e(!1)}function Cb(t,e){const n=Oe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),tk(n)?ek(n):jh(n).O_()&&ZD(n,e))}function hh(t,e){const n=Oe(t),r=jh(n);n.Ia.delete(e),r.O_()&&YJ(n,e),n.Ia.size===0&&(r.O_()?r.L_():_u(n)&&n.Ra.set("Unknown"))}function ZD(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ye.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}jh(t).Y_(e)}function YJ(t,e){t.Va.Ue(e),jh(t).Z_(e)}function ek(t){t.Va=new Qme({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),jh(t).start(),t.Ra.ua()}function tk(t){return _u(t)&&!jh(t).x_()&&t.Ia.size>0}function _u(t){return Oe(t).Ea.size===0}function JJ(t){t.Va=void 0}async function iye(t){t.Ra.set("Online")}async function oye(t){t.Ia.forEach(((e,n)=>{ZD(t,e)}))}async function sye(t,e){JJ(t),tk(t)?(t.Ra.ha(e),ek(t)):t.Ra.set("Unknown")}async function aye(t,e,n){if(t.Ra.set("Online"),e instanceof lJ&&e.state===2&&e.cause)try{await(async function(i,o){const s=o.cause;for(const a of o.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ia.delete(a),i.Va.removeTarget(a))})(t,e)}catch(r){Ae(Gc,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await X0(t,r)}else if(e instanceof m0?t.Va.Ze(e):e instanceof aJ?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ye.min()))try{const r=await UJ(t.localStore);n.compareTo(r)>=0&&await(function(o,s){const a=o.Va.Tt(s);return a.targetChanges.forEach(((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const d=o.Ia.get(c);d&&o.Ia.set(c,d.withResumeToken(u.resumeToken,s))}})),a.targetMismatches.forEach(((u,c)=>{const d=o.Ia.get(u);if(!d)return;o.Ia.set(u,d.withResumeToken(Sn.EMPTY_BYTE_STRING,d.snapshotVersion)),YJ(o,u);const h=new Ea(d.target,u,c,d.sequenceNumber);ZD(o,h)})),o.remoteSyncer.applyRemoteEvent(a)})(t,n)}catch(r){Ae(Gc,"Failed to raise snapshot:",r),await X0(t,r)}}async function X0(t,e,n){if(!yu(e))throw e;t.Ea.add(1),await Hh(t),t.Ra.set("Offline"),n||(n=()=>UJ(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Ae(Gc,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Cy(t)}))}function XJ(t,e){return e().catch((n=>X0(t,n,e)))}async function Gh(t){const e=Oe(t),n=uu(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Jl;for(;lye(e);)try{const i=await Hge(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,uye(e,i)}catch(i){await X0(e,i)}QJ(e)&&ZJ(e)}function lye(t){return _u(t)&&t.Ta.length<10}function uye(t,e){t.Ta.push(e);const n=uu(t);n.O_()&&n.X_&&n.ea(e.mutations)}function QJ(t){return _u(t)&&!uu(t).x_()&&t.Ta.length>0}function ZJ(t){uu(t).start()}async function cye(t){uu(t).ra()}async function fye(t){const e=uu(t);for(const n of t.Ta)e.ea(n.mutations)}async function dye(t,e,n){const r=t.Ta.shift(),i=UD.from(r,e,n);await XJ(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await Gh(t)}async function hye(t,e){e&&uu(t).X_&&await(async function(r,i){if((function(s){return iJ(s)&&s!==pe.ABORTED})(i.code)){const o=r.Ta.shift();uu(r).B_(),await XJ(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i))),await Gh(r)}})(t,e),QJ(t)&&ZJ(t)}async function gB(t,e){const n=Oe(t);n.asyncQueue.verifyOperationInProgress(),Ae(Gc,"RemoteStore received new credentials");const r=_u(n);n.Ea.add(3),await Hh(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Cy(n)}async function hM(t,e){const n=Oe(t);e?(n.Ea.delete(2),await Cy(n)):e||(n.Ea.add(2),await Hh(n),n.Ra.set("Unknown"))}function jh(t){return t.ma||(t.ma=(function(n,r,i){const o=Oe(n);return o.sa(),new Qge(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:iye.bind(null,t),t_:oye.bind(null,t),r_:sye.bind(null,t),H_:aye.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),tk(t)?ek(t):t.Ra.set("Unknown")):(await t.ma.stop(),JJ(t))}))),t.ma}function uu(t){return t.fa||(t.fa=(function(n,r,i){const o=Oe(n);return o.sa(),new Zge(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:cye.bind(null,t),r_:hye.bind(null,t),ta:fye.bind(null,t),na:dye.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Gh(t)):(await t.fa.stop(),t.Ta.length>0&&(Ae(Gc,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((s=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,a=new nk(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Se(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kh(t,e){if(kn("AsyncQueue",`${e}: ${t}`),yu(t))return new Se(pe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{static emptySet(e){return new qd(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||De.comparator(n.key,r.key):(n,r)=>De.comparator(n.key,r.key),this.keyedMap=Gm(),this.sortedSet=new Xt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof qd)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new qd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yB{constructor(){this.ga=new Xt(De.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ve(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class ph{constructor(e,n,r,i,o,s,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach((a=>{s.push({type:0,doc:a})})),new ph(e,n,qd.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&by(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pye{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class mye{constructor(){this.queries=vB(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=Oe(n),o=i.queries;i.queries=vB(),o.forEach(((s,a)=>{for(const u of a.Sa)u.onError(r)}))})(this,new Se(pe.ABORTED,"Firestore shutting down"))}}function vB(){return new Ja((t=>HY(t)),by)}async function rk(t,e){const n=Oe(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new pye,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const a=Kh(s,`Initialization of query '${Sd(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&ok(n)}async function ik(t,e){const n=Oe(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function gye(t,e){const n=Oe(t);let r=!1;for(const i of e){const o=i.query,s=n.queries.get(o);if(s){for(const a of s.Sa)a.Fa(i)&&(r=!0);s.wa=i}}r&&ok(n)}function yye(t,e,n){const r=Oe(t),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(n);r.queries.delete(e)}function ok(t){t.Ca.forEach((e=>{e.next()}))}var pM,_B;(_B=pM||(pM={})).Ma="default",_B.Cache="cache";class sk{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ph(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ph.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==pM.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vye{constructor(e,n){this.Qa=e,this.byteLength=n}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wB{constructor(e){this.serializer=e}$s(e){return Us(this.serializer,e)}Us(e){return e.metadata.exists?pJ(this.serializer,e.document,!1):en.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return On(e)}}class _ye{constructor(e,n){this.Ua=e,this.serializer=n,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=eX(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++n;const r=mt.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,{...this.progress}):null}za(e){const n=new Map,r=new wB(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.$s(i.metadata.name);for(const s of i.metadata.queries){const a=(n.get(s)||at()).add(o);n.set(s,a)}}return n}async ja(e){const n=await Gge(e,new wB(this.serializer),this.Wa,this.Ua.id),r=this.za(this.documents);for(const i of this.Ka)await jge(e,i,r.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:n}}}function eX(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tX{constructor(e){this.key=e}}class nX{constructor(e){this.key=e}}class rX{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=at(),this.mutatedKeys=at(),this.eu=jY(e),this.tu=new qd(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new yB,i=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((d,h)=>{const g=i.get(d),_=Ty(this.query,h)?h:null,S=!!g&&this.mutatedKeys.has(g.key),b=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let T=!1;g&&_?g.data.isEqual(_.data)?S!==b&&(r.track({type:3,doc:_}),T=!0):this.su(g,_)||(r.track({type:2,doc:_}),T=!0,(u&&this.eu(_,u)>0||c&&this.eu(_,c)<0)&&(a=!0)):!g&&_?(r.track({type:0,doc:_}),T=!0):g&&!_&&(r.track({type:1,doc:g}),T=!0,(u||c)&&(a=!0)),T&&(_?(s=s.add(_),o=b?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))})),this.query.limit!==null)for(;s.size>this.query.limit;){const d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{tu:s,iu:r,Cs:a,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort(((d,h)=>(function(_,S){const b=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ve(20277,{Rt:T})}};return b(_)-b(S)})(d.type,h.type)||this.eu(d.doc,h.doc))),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,c=u!==this.Za;return this.Za=u,s.length!==0||c?{snapshot:new ph(this.query,e.tu,o,s,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new yB,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=at(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new nX(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new tX(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=at();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ph.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const wu="SyncEngine";class wye{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class bye{constructor(e){this.key=e,this.hu=!1}}class Tye{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Ja((a=>HY(a)),by),this.Iu=new Map,this.Eu=new Set,this.du=new Xt(De.comparator),this.Au=new Map,this.Ru=new GD,this.Vu={},this.mu=new Map,this.fu=Hc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Eye(t,e,n=!0){const r=Ib(t);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await iX(r,e,n,!0),i}async function Sye(t,e){const n=Ib(t);await iX(n,e,!0,!1)}async function iX(t,e,n,r){const i=await fh(t.localStore,ni(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=await ak(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&Cb(t.remoteStore,i),a}async function ak(t,e,n,r,i){t.pu=(h,g,_)=>(async function(b,T,x,C){let I=T.view.ru(x);I.Cs&&(I=await W0(b.localStore,T.query,!1).then((({documents:P})=>T.view.ru(P,I))));const N=C&&C.targetChanges.get(T.targetId),V=C&&C.targetMismatches.get(T.targetId)!=null,q=T.view.applyChanges(I,b.isPrimaryClient,N,V);return mM(b,T.targetId,q.au),q.snapshot})(t,h,g,_);const o=await W0(t.localStore,e,!0),s=new rX(e,o.Qs),a=s.ru(o.documents),u=xy.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=s.applyChanges(a,t.isPrimaryClient,u);mM(t,n,c.au);const d=new wye(e,n,s);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function xye(t,e,n){const r=Oe(t),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter((s=>!by(s,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await dh(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&hh(r.remoteStore,i.targetId),mh(r,i.targetId)})).catch(gu)):(mh(r,i.targetId),await dh(r.localStore,i.targetId,!0))}async function Aye(t,e){const n=Oe(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),hh(n.remoteStore,r.targetId))}async function Cye(t,e,n){const r=fk(t);try{const i=await(function(s,a){const u=Oe(s),c=Nt.now(),d=a.reduce(((_,S)=>_.add(S.key)),at());let h,g;return u.persistence.runTransaction("Locally write mutations","readwrite",(_=>{let S=pi(),b=at();return u.Ns.getEntries(_,d).next((T=>{S=T,S.forEach(((x,C)=>{C.isValidDocument()||(b=b.add(x))}))})).next((()=>u.localDocuments.getOverlayedDocuments(_,S))).next((T=>{h=T;const x=[];for(const C of a){const I=Yme(C,h.get(C.key).overlayedDocument);I!=null&&x.push(new Xa(C.key,I,OY(I.value.mapValue),un.exists(!0)))}return u.mutationQueue.addMutationBatch(_,c,x,a)})).next((T=>{g=T;const x=T.applyToLocalDocumentSet(h,b);return u.documentOverlayCache.saveOverlays(_,T.batchId,x)}))})).then((()=>({batchId:g.batchId,changes:WY(h)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,u){let c=s.Vu[s.currentUser.toKey()];c||(c=new Xt(it)),c=c.insert(a,u),s.Vu[s.currentUser.toKey()]=c})(r,i.batchId,n),await Qa(r,i.changes),await Gh(r.remoteStore)}catch(i){const o=Kh(i,"Failed to persist write");n.reject(o)}}async function oX(t,e){const n=Oe(t);try{const r=await zge(n.localStore,e);e.targetChanges.forEach(((i,o)=>{const s=n.Au.get(o);s&&(Ke(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?Ke(s.hu,14607):i.removedDocuments.size>0&&(Ke(s.hu,42227),s.hu=!1))})),await Qa(n,r,e)}catch(r){await gu(r)}}function bB(t,e,n){const r=Oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((o,s)=>{const a=s.view.va(e);a.snapshot&&i.push(a.snapshot)})),(function(s,a){const u=Oe(s);u.onlineState=a;let c=!1;u.queries.forEach(((d,h)=>{for(const g of h.Sa)g.va(a)&&(c=!0)})),c&&ok(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Iye(t,e,n){const r=Oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),o=i&&i.key;if(o){let s=new Xt(De.comparator);s=s.insert(o,en.newNoDocument(o,Ye.min()));const a=at().add(o),u=new Sy(Ye.min(),new Map,new Xt(it),s,a);await oX(r,u),r.du=r.du.remove(o),r.Au.delete(e),ck(r)}else await dh(r.localStore,e,!1).then((()=>mh(r,e,n))).catch(gu)}async function Rye(t,e){const n=Oe(t),r=e.batch.batchId;try{const i=await $ge(n.localStore,e);uk(n,r,null),lk(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Qa(n,i)}catch(i){await gu(i)}}async function Pye(t,e,n){const r=Oe(t);try{const i=await(function(s,a){const u=Oe(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",(c=>{let d;return u.mutationQueue.lookupMutationBatch(c,a).next((h=>(Ke(h!==null,37113),d=h.keys(),u.mutationQueue.removeMutationBatch(c,h)))).next((()=>u.mutationQueue.performConsistencyCheck(c))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(c,d,a))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d))).next((()=>u.localDocuments.getDocuments(c,d)))}))})(r.localStore,e);uk(r,e,n),lk(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Qa(r,i)}catch(i){await gu(i)}}async function Nye(t,e){const n=Oe(t);_u(n.remoteStore)||Ae(wu,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await(function(s){const a=Oe(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u)))})(n.localStore);if(r===Jl)return void e.resolve();const i=n.mu.get(r)||[];i.push(e),n.mu.set(r,i)}catch(r){const i=Kh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function lk(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function uk(t,e,n){const r=Oe(t);let i=r.Vu[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function mh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||sX(t,r)}))}function sX(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(hh(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),ck(t))}function mM(t,e,n){for(const r of n)r instanceof tX?(t.Ru.addReference(r.key,e),Mye(t,r)):r instanceof nX?(Ae(wu,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||sX(t,r.key)):Ve(19791,{wu:r})}function Mye(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Ae(wu,"New document in limbo: "+n),t.Eu.add(r),ck(t))}function ck(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new De(mt.fromString(e)),r=t.fu.next();t.Au.set(r,new bye(n)),t.du=t.du.insert(n,r),Cb(t.remoteStore,new Ea(ni(Bh(n.path)),r,"TargetPurposeLimboResolution",di.ce))}}async function Qa(t,e,n){const r=Oe(t),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach(((a,u)=>{s.push(r.pu(u,e,n).then((c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(c){i.push(c);const h=YD.As(u.targetId,c);o.push(h)}})))})),await Promise.all(s),r.Pu.H_(i),await(async function(u,c){const d=Oe(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",(h=>ue.forEach(c,(g=>ue.forEach(g.Es,(_=>d.persistence.referenceDelegate.addReference(h,g.targetId,_))).next((()=>ue.forEach(g.ds,(_=>d.persistence.referenceDelegate.removeReference(h,g.targetId,_)))))))))}catch(h){if(!yu(h))throw h;Ae(JD,"Failed to update sequence numbers: "+h)}for(const h of c){const g=h.targetId;if(!h.fromCache){const _=d.Ms.get(g),S=_.snapshotVersion,b=_.withLastLimboFreeSnapshotVersion(S);d.Ms=d.Ms.insert(g,b)}}})(r.localStore,o))}async function Dye(t,e){const n=Oe(t);if(!n.currentUser.isEqual(e)){Ae(wu,"User change. New user:",e.toKey());const r=await VJ(n.localStore,e);n.currentUser=e,(function(o,s){o.mu.forEach((a=>{a.forEach((u=>{u.reject(new Se(pe.CANCELLED,s))}))})),o.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Qa(n,r.Ls)}}function kye(t,e){const n=Oe(t),r=n.Au.get(e);if(r&&r.hu)return at().add(r.key);{let i=at();const o=n.Iu.get(e);if(!o)return i;for(const s of o){const a=n.Tu.get(s);i=i.unionWith(a.view.nu)}return i}}async function Oye(t,e){const n=Oe(t),r=await W0(n.localStore,e.query,!0),i=e.view.cu(r);return n.isPrimaryClient&&mM(n,e.targetId,i.au),i}async function Lye(t,e){const n=Oe(t);return BJ(n.localStore,e).then((r=>Qa(n,r)))}async function Vye(t,e,n,r){const i=Oe(t),o=await(function(a,u){const c=Oe(a),d=Oe(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",(h=>d.er(h,u).next((g=>g?c.localDocuments.getDocuments(h,g):ue.resolve(null)))))})(i.localStore,e);o!==null?(n==="pending"?await Gh(i.remoteStore):n==="acknowledged"||n==="rejected"?(uk(i,e,r||null),lk(i,e),(function(a,u){Oe(Oe(a).mutationQueue).ir(u)})(i.localStore,e)):Ve(6720,"Unknown batchState",{Su:n}),await Qa(i,o)):Ae(wu,"Cannot apply mutation batch with id: "+e)}async function Uye(t,e){const n=Oe(t);if(Ib(n),fk(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await TB(n,r.toArray());n.gu=!0,await hM(n.remoteStore,!0);for(const o of i)Cb(n.remoteStore,o)}else if(e===!1&&n.gu!==!1){const r=[];let i=Promise.resolve();n.Iu.forEach(((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then((()=>(mh(n,s),dh(n.localStore,s,!0)))),hh(n.remoteStore,s)})),await i,await TB(n,r),(function(s){const a=Oe(s);a.Au.forEach(((u,c)=>{hh(a.remoteStore,c)})),a.Ru.Jr(),a.Au=new Map,a.du=new Xt(De.comparator)})(n),n.gu=!1,await hM(n.remoteStore,!1)}}async function TB(t,e,n){const r=Oe(t),i=[],o=[];for(const s of e){let a;const u=r.Iu.get(s);if(u&&u.length!==0){a=await fh(r.localStore,ni(u[0]));for(const c of u){const d=r.Tu.get(c),h=await Oye(r,d);h.snapshot&&o.push(h.snapshot)}}else{const c=await FJ(r.localStore,s);a=await fh(r.localStore,c),await ak(r,aX(c),s,!1,a.resumeToken)}i.push(a)}return r.Pu.H_(o),i}function aX(t){return zY(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function qye(t){return(function(n){return Oe(Oe(n).persistence).Ts()})(Oe(t).localStore)}async function Fye(t,e,n,r){const i=Oe(t);if(i.gu)return void Ae(wu,"Ignoring unexpected query state notification.");const o=i.Iu.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{const s=await BJ(i.localStore,GY(o[0])),a=Sy.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Sn.EMPTY_BYTE_STRING);await Qa(i,s,a);break}case"rejected":await dh(i.localStore,e,!0),mh(i,e,r);break;default:Ve(64155,n)}}async function Bye(t,e,n){const r=Ib(t);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){Ae(wu,"Adding an already active target "+i);continue}const o=await FJ(r.localStore,i),s=await fh(r.localStore,o);await ak(r,aX(o),s.targetId,!1,s.resumeToken),Cb(r.remoteStore,s)}for(const i of n)r.Iu.has(i)&&await dh(r.localStore,i,!1).then((()=>{hh(r.remoteStore,i),mh(r,i)})).catch(gu)}}function Ib(t){const e=Oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=oX.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kye.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Iye.bind(null,e),e.Pu.H_=gye.bind(null,e.eventManager),e.Pu.yu=yye.bind(null,e.eventManager),e}function fk(t){const e=Oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Rye.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Pye.bind(null,e),e}function $ye(t,e,n){const r=Oe(t);(async function(o,s,a){try{const u=await s.getMetadata();if(await(function(_,S){const b=Oe(_),T=On(S.createTime);return b.persistence.runTransaction("hasNewerBundle","readonly",(x=>b.Ii.getBundleMetadata(x,S.id))).then((x=>!!x&&x.createTime.compareTo(T)>=0))})(o.localStore,u))return await s.close(),a._completeWith((function(_){return{taskState:"Success",documentsLoaded:_.totalDocuments,bytesLoaded:_.totalBytes,totalDocuments:_.totalDocuments,totalBytes:_.totalBytes}})(u)),Promise.resolve(new Set);a._updateProgress(eX(u));const c=new _ye(u,s.serializer);let d=await s.bu();for(;d;){const g=await c.Ga(d);g&&a._updateProgress(g),d=await s.bu()}const h=await c.ja(o.localStore);return await Qa(o,h.Ha,void 0),await(function(_,S){const b=Oe(_);return b.persistence.runTransaction("Save bundle","readwrite",(T=>b.Ii.saveBundleMetadata(T,S)))})(o.localStore,u),a._completeWith(h.progress),Promise.resolve(h.Ja)}catch(u){return zs(wu,`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})(r,e,n).then((i=>{r.sharedClientState.notifyBundleLoaded(i)}))}class Fg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ay(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return LJ(this.persistence,new OJ,e.initialUser,this.serializer)}Cu(e){return new jD(Ab.mi,this.serializer)}Du(e){return new jJ}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fg.provider={build:()=>new Fg};class zye extends Fg{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ke(this.persistence.referenceDelegate instanceof K0,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new RJ(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?qr.withCacheSize(this.cacheSizeBytes):qr.DEFAULT;return new jD((r=>K0.mi(r,n)),this.serializer)}}class lX extends Fg{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await fk(this.xu.syncEngine),await Gh(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return LJ(this.persistence,new OJ,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new RJ(r,e.asyncQueue,n)}Mu(e,n){const r=new Qpe(n,this.persistence);return new Xpe(e.asyncQueue,r)}Cu(e){const n=WD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?qr.withCacheSize(this.cacheSizeBytes):qr.DEFAULT;return new KD(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,KJ(),y0(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new jJ}}class Hye extends lX{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof yx&&(this.sharedClientState.syncEngine={Co:Vye.bind(null,n),vo:Fye.bind(null,n),Fo:Bye.bind(null,n),Ts:qye.bind(null,n),Do:Lye.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await Uye(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const n=KJ();if(!yx.v(n))throw new Se(pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=WD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new yx(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Bg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>bB(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Dye.bind(null,this.syncEngine),await hM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new mye})()}createDatastore(e){const n=Ay(e.databaseInfo.databaseId),r=(function(o){return new Xge(o)})(e.databaseInfo);return(function(o,s,a,u){return new tye(o,s,a,u)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,o,s,a){return new rye(r,i,o,s,a)})(this.localStore,this.datastore,e.asyncQueue,(n=>bB(this.syncEngine,n,0)),(function(){return pB.v()?new pB:new Kge})())}createSyncEngine(e,n){return(function(i,o,s,a,u,c,d){const h=new Tye(i,o,s,a,u,c);return d&&(h.gu=!0),h})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(i){const o=Oe(i);Ae(Gc,"RemoteStore shutting down."),o.Ea.add(5),await Hh(o),o.Aa.shutdown(),o.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Bg.provider={build:()=>new Bg};function EB(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):kn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gye{constructor(e,n){this.Bu=e,this.serializer=n,this.metadata=new Nr,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((r=>{r&&r.$a()?this.metadata.resolve(r.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Qa)}`))}),(r=>this.metadata.reject(r)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const n=this.Lu.decode(e),r=Number(n);isNaN(r)&&this.Qu(`length string (${n}) is not valid number`);const i=await this.$u(r);return new vye(JSON.parse(i),e.length+r)}Uu(){return this.buffer.findIndex((e=>e===123))}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const n=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jye{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Se(pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(i,o){const s=Oe(i),a={documents:o.map((h=>Ug(s.serializer,h)))},u=await s.Ho("BatchGetDocuments",s.serializer.databaseId,mt.emptyPath(),a,o.length),c=new Map;u.forEach((h=>{const g=ige(s.serializer,h);c.set(g.key.toString(),g)}));const d=[];return o.forEach((h=>{const g=c.get(h.toString());Ke(!!g,55234,{key:h}),d.push(g)})),d})(this.datastore,e);return n.forEach((r=>this.recordVersion(r))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new zh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,r)=>{const i=De.fromPath(r);this.mutations.push(new LD(i,this.precondition(i)))})),await(async function(r,i){const o=Oe(r),s={writes:i.map((a=>qg(o.serializer,a)))};await o.Go("Commit",o.serializer.databaseId,mt.emptyPath(),s)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Ve(50498,{Gu:e.constructor.name});n=Ye.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new Se(pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Ye.min())?un.exists(!1):un.updateTime(n):un.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Ye.min()))throw new Se(pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return un.updateTime(n)}return un.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kye{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.zu=r.maxAttempts,this.M_=new QD(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new jye(this.datastore),n=this.Hu(e);n&&n.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((i=>{this.Yu(i)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const n=this.updateFunction(e);return!vy(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!iJ(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu="FirestoreClient";class Wye{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=fr.UNAUTHENTICATED,this.clientId=TD.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async s=>{Ae(cu,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,(s=>(Ae(cu,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Kh(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function _x(t,e){t.asyncQueue.verifyOperationInProgress(),Ae(cu,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await VJ(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function SB(t,e){t.asyncQueue.verifyOperationInProgress();const n=await dk(t);Ae(cu,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>gB(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>gB(e.remoteStore,i))),t._onlineComponents=e}async function dk(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ae(cu,"Using user provided OfflineComponentProvider");try{await _x(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===pe.FAILED_PRECONDITION||i.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;zs("Error using user provided cache. Falling back to memory cache: "+n),await _x(t,new Fg)}}else Ae(cu,"Using default OfflineComponentProvider"),await _x(t,new zye(void 0));return t._offlineComponents}async function Pb(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ae(cu,"Using user provided OnlineComponentProvider"),await SB(t,t._uninitializedComponentsProvider._online)):(Ae(cu,"Using default OnlineComponentProvider"),await SB(t,new Bg))),t._onlineComponents}function uX(t){return dk(t).then((e=>e.persistence))}function hk(t){return dk(t).then((e=>e.localStore))}function cX(t){return Pb(t).then((e=>e.remoteStore))}function pk(t){return Pb(t).then((e=>e.syncEngine))}function Yye(t){return Pb(t).then((e=>e.datastore))}async function gh(t){const e=await Pb(t),n=e.eventManager;return n.onListen=Eye.bind(null,e.syncEngine),n.onUnlisten=xye.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Sye.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Aye.bind(null,e.syncEngine),n}function Jye(t){return t.asyncQueue.enqueue((async()=>{const e=await uX(t),n=await cX(t);return e.setNetworkEnabled(!0),(function(i){const o=Oe(i);return o.Ea.delete(0),Cy(o)})(n)}))}function Xye(t){return t.asyncQueue.enqueue((async()=>{const e=await uX(t),n=await cX(t);return e.setNetworkEnabled(!1),(async function(i){const o=Oe(i);o.Ea.add(0),await Hh(o),o.Ra.set("Offline")})(n)}))}function Qye(t,e){const n=new Nr;return t.asyncQueue.enqueueAndForget((async()=>(async function(i,o,s){try{const a=await(function(c,d){const h=Oe(c);return h.persistence.runTransaction("read document","readonly",(g=>h.localDocuments.getDocument(g,d)))})(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new Se(pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const u=Kh(a,`Failed to get document '${o} from cache`);s.reject(u)}})(await hk(t),e,n))),n.promise}function fX(t,e,n={}){const r=new Nr;return t.asyncQueue.enqueueAndForget((async()=>(function(o,s,a,u,c){const d=new Rb({next:g=>{d.Nu(),s.enqueueAndForget((()=>ik(o,h)));const _=g.docs.has(a);!_&&g.fromCache?c.reject(new Se(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&g.fromCache&&u&&u.source==="server"?c.reject(new Se(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),h=new sk(Bh(a.path),d,{includeMetadataChanges:!0,qa:!0});return rk(o,h)})(await gh(t),t.asyncQueue,e,n,r))),r.promise}function Zye(t,e){const n=new Nr;return t.asyncQueue.enqueueAndForget((async()=>(async function(i,o,s){try{const a=await W0(i,o,!0),u=new rX(o,a.Qs),c=u.ru(a.documents),d=u.applyChanges(c,!1);s.resolve(d.snapshot)}catch(a){const u=Kh(a,`Failed to execute query '${o} against cache`);s.reject(u)}})(await hk(t),e,n))),n.promise}function dX(t,e,n={}){const r=new Nr;return t.asyncQueue.enqueueAndForget((async()=>(function(o,s,a,u,c){const d=new Rb({next:g=>{d.Nu(),s.enqueueAndForget((()=>ik(o,h))),g.fromCache&&u.source==="server"?c.reject(new Se(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),h=new sk(a,d,{includeMetadataChanges:!0,qa:!0});return rk(o,h)})(await gh(t),t.asyncQueue,e,n,r))),r.promise}function eve(t,e){const n=new Rb(e);return t.asyncQueue.enqueueAndForget((async()=>(function(i,o){Oe(i).Ca.add(o),o.next()})(await gh(t),n))),()=>{n.Nu(),t.asyncQueue.enqueueAndForget((async()=>(function(i,o){Oe(i).Ca.delete(o)})(await gh(t),n)))}}function tve(t,e,n,r){const i=(function(s,a){let u;return u=typeof s=="string"?sJ().encode(s):s,(function(d,h){return new Gye(d,h)})((function(d,h){if(d instanceof Uint8Array)return EB(d,h);if(d instanceof ArrayBuffer)return EB(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(u),a)})(n,Ay(e));t.asyncQueue.enqueueAndForget((async()=>{$ye(await pk(t),i,r)}))}function nve(t,e){return t.asyncQueue.enqueue((async()=>(function(r,i){const o=Oe(r);return o.persistence.runTransaction("Get named query","readonly",(s=>o.Ii.getNamedQuery(s,i)))})(await hk(t),e)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hX(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xB=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pX="firestore.googleapis.com",AB=!0;class CB{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Se(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=pX,this.ssl=AB}else this.host=e.host,this.ssl=e.ssl??AB;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=xJ;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Ege)throw new Se(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}aY("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hX(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Se(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Se(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Se(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Iy{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new CB({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Se(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Se(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new CB(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new qpe;switch(r.type){case"firstParty":return new zpe(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Se(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=xB.get(n);r&&(Ae("ComponentProvider","Removing Datastore"),xB.delete(n),r.terminate())})(this),Promise.resolve()}}function mX(t,e,n,r={}){var c;t=Et(t,Iy);const i=pu(e),o=t._getSettings(),s={...o,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;i&&(W2(`https://${a}`),Y2("Firestore",!0)),o.host!==pX&&o.host!==a&&zs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...o,host:a,ssl:i,emulatorOptions:r};if(!ka(u,s)&&(t._setSettings(u),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=fr.MOCK_USER;else{d=NK(r.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Se(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new fr(g)}t._authCredentials=new Fpe(new oY(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ii=class gX{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new gX(this.firestore,e,this._query)}},Jt=class Wm{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wm(this.firestore,e,this._key)}toJSON(){return{type:Wm._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(yy(n,Wm._jsonSchema))return new Wm(e,r||null,new De(mt.fromString(n.referencePath)))}};Jt._jsonSchemaVersion="firestore/documentReference/1.0",Jt._jsonSchema={type:Bn("string",Jt._jsonSchemaVersion),referencePath:Bn("string")};let Xl=class yX extends ii{constructor(e,n,r){super(e,n,Bh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jt(this.firestore,null,new De(e))}withConverter(e){return new yX(this.firestore,e,this._path)}};function Ns(t,e,...n){if(t=Be(t),ED("collection","path",e),t instanceof Iy){const r=mt.fromString(e,...n);return mF(r),new Xl(t,null,r)}{if(!(t instanceof Jt||t instanceof Xl))throw new Se(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(mt.fromString(e,...n));return mF(r),new Xl(t.firestore,null,r)}}function rve(t,e){if(t=Et(t,Iy),ED("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Se(pe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ii(t,null,(function(r){return new Ya(mt.emptyPath(),r)})(e))}function jo(t,e,...n){if(t=Be(t),arguments.length===1&&(e=TD.newId()),ED("doc","path",e),t instanceof Iy){const r=mt.fromString(e,...n);return pF(r),new Jt(t,null,new De(r))}{if(!(t instanceof Jt||t instanceof Xl))throw new Se(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(mt.fromString(e,...n));return pF(r),new Jt(t.firestore,t instanceof Xl?t.converter:null,new De(r))}}function vX(t,e){return t=Be(t),e=Be(e),(t instanceof Jt||t instanceof Xl)&&(e instanceof Jt||e instanceof Xl)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function _X(t,e){return t=Be(t),e=Be(e),t instanceof ii&&e instanceof ii&&t.firestore===e.firestore&&by(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IB="AsyncQueue";class RB{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new QD(this,"async_queue_retry"),this._c=()=>{const r=y0();r&&Ae(IB,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=y0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=y0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Nr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!yu(e))throw e;Ae(IB,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,kn("INTERNAL UNHANDLED ERROR: ",PB(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=nk.createAndSchedule(this,e,n,r,(o=>this.hc(o)));return this.tc.push(i),i}uc(){this.nc&&Ve(47125,{Pc:PB(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function PB(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gM(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(t,["next","error","complete"])}class ive{constructor(){this._progressObserver={},this._taskCompletionResolver=new Nr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ove=-1;let xn=class extends Iy{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new RB,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new RB(e),this._firestoreClient=void 0,await e}}};function sve(t,e){const n=typeof t=="object"?t:tb(),r=typeof t=="string"?t:F0,i=Lh(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=RK("firestore");o&&mX(i,...o)}return i}function Mr(t){if(t._terminated)throw new Se(pe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||wX(t),t._firestoreClient}function wX(t){var r,i,o;const e=t._freezeSettings(),n=(function(a,u,c,d){return new Cme(a,u,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,hX(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Wye(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}})(t._componentsProvider))}function ave(t,e){zs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return bX(t,Bg.provider,{build:r=>new lX(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function lve(t){zs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();bX(t,Bg.provider,{build:n=>new Hye(n,e.cacheSizeBytes)})}function bX(t,e,n){if((t=Et(t,xn))._firestoreClient||t._terminated)throw new Se(pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new Se(pe.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},wX(t)}function uve(t){if(t._initialized&&!t._terminated)throw new Se(pe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Nr;return t._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(r){if(!Vs.v())return Promise.resolve();const i=r+kJ;await Vs.delete(i)})(WD(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function cve(t){return(function(n){const r=new Nr;return n.asyncQueue.enqueueAndForget((async()=>Nye(await pk(n),r))),r.promise})(Mr(t=Et(t,xn)))}function fve(t){return Jye(Mr(t=Et(t,xn)))}function dve(t){return Xye(Mr(t=Et(t,xn)))}function hve(t,e){const n=Mr(t=Et(t,xn)),r=new ive;return tve(n,t._databaseId,e,r),r}function pve(t,e){return nve(Mr(t=Et(t,xn)),e).then((n=>n?new ii(t,null,n.query):null))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fr(Sn.fromBase64String(e))}catch(n){throw new Se(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Fr(Sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Fr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(yy(e,Fr._jsonSchema))return Fr.fromBase64String(e.bytes)}}Fr._jsonSchemaVersion="firestore/bytes/1.0",Fr._jsonSchema={type:Bn("string",Fr._jsonSchemaVersion),bytes:Bn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fu=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Se(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ln(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sf=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Se(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Se(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return it(this._lat,e._lat)||it(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ko._jsonSchemaVersion}}static fromJSON(e){if(yy(e,Ko._jsonSchema))return new Ko(e.latitude,e.longitude)}}Ko._jsonSchemaVersion="firestore/geoPoint/1.0",Ko._jsonSchema={type:Bn("string",Ko._jsonSchemaVersion),latitude:Bn("number"),longitude:Bn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:qs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(yy(e,qs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new qs(e.vectorValues);throw new Se(pe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}qs._jsonSchemaVersion="firestore/vectorValue/1.0",qs._jsonSchema={type:Bn("string",qs._jsonSchemaVersion),vectorValues:Bn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mve=/^__.*__$/;class gve{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Xa(e,this.data,this.fieldMask,n,this.fieldTransforms):new $h(e,this.data,n,this.fieldTransforms)}}class TX{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Xa(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function EX(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ve(40011,{Ac:t})}}class Nb{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Nb({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Q0(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(EX(this.Ac)&&mve.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class yve{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ay(e)}Cc(e,n,r,i=!1){return new Nb({Ac:e,methodName:n,Dc:r,path:ln.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function af(t){const e=t._freezeSettings(),n=Ay(t._databaseId);return new yve(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Mb(t,e,n,r,i,o={}){const s=t.Cc(o.merge||o.mergeFields?2:0,e,n,i);bk("Data must be an object, but it was:",s,r);const a=AX(r,s);let u,c;if(o.merge)u=new hi(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const d=[];for(const h of o.mergeFields){const g=yM(e,h,n);if(!s.contains(g))throw new Se(pe.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);IX(d,g)||d.push(g)}u=new hi(d),c=s.fieldTransforms.filter((h=>u.covers(h.field)))}else u=null,c=s.fieldTransforms;return new gve(new Rr(a),u,c)}class Ry extends sf{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ry}}function SX(t,e,n){return new Nb({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class mk extends sf{_toFieldTransform(e){return new Ey(e.path,new lh)}isEqual(e){return e instanceof mk}}class gk extends sf{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=SX(this,e,!0),r=this.vc.map((o=>lf(o,n))),i=new Fc(r);return new Ey(e.path,i)}isEqual(e){return e instanceof gk&&ka(this.vc,e.vc)}}class yk extends sf{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=SX(this,e,!0),r=this.vc.map((o=>lf(o,n))),i=new Bc(r);return new Ey(e.path,i)}isEqual(e){return e instanceof yk&&ka(this.vc,e.vc)}}class vk extends sf{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new uh(e.serializer,XY(e.serializer,this.Fc));return new Ey(e.path,n)}isEqual(e){return e instanceof vk&&this.Fc===e.Fc}}function _k(t,e,n,r){const i=t.Cc(1,e,n);bk("Data must be an object, but it was:",i,r);const o=[],s=Rr.empty();vu(r,((u,c)=>{const d=Tk(e,u,n);c=Be(c);const h=i.yc(d);if(c instanceof Ry)o.push(d);else{const g=lf(c,h);g!=null&&(o.push(d),s.set(d,g))}}));const a=new hi(o);return new TX(s,a,i.fieldTransforms)}function wk(t,e,n,r,i,o){const s=t.Cc(1,e,n),a=[yM(e,r,n)],u=[i];if(o.length%2!=0)throw new Se(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(yM(e,o[g])),u.push(o[g+1]);const c=[],d=Rr.empty();for(let g=a.length-1;g>=0;--g)if(!IX(c,a[g])){const _=a[g];let S=u[g];S=Be(S);const b=s.yc(_);if(S instanceof Ry)c.push(_);else{const T=lf(S,b);T!=null&&(c.push(_),d.set(_,T))}}const h=new hi(c);return new TX(d,h,s.fieldTransforms)}function xX(t,e,n,r=!1){return lf(n,t.Cc(r?4:3,e))}function lf(t,e){if(CX(t=Be(t)))return bk("Unsupported field value:",e,t),AX(t,e);if(t instanceof sf)return(function(r,i){if(!EX(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const o=[];let s=0;for(const a of r){let u=lf(a,i.wc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=Be(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return XY(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Nt.fromDate(r);return{timestampValue:ch(i.serializer,o)}}if(r instanceof Nt){const o=new Nt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ch(i.serializer,o)}}if(r instanceof Ko)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Fr)return{bytesValue:uJ(i.serializer,r._byteString)};if(r instanceof Jt){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:BD(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof qs)return(function(s,a){return{mapValue:{fields:{[PD]:{stringValue:ND},[oh]:{arrayValue:{values:s.toArray().map((c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return OD(a.serializer,c)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${pb(r)}`)})(t,e)}function AX(t,e){const n={};return AY(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vu(t,((r,i)=>{const o=lf(i,e.mc(r));o!=null&&(n[r]=o)})),{mapValue:{fields:n}}}function CX(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Nt||t instanceof Ko||t instanceof Fr||t instanceof Jt||t instanceof sf||t instanceof qs)}function bk(t,e,n){if(!CX(n)||!lY(n)){const r=pb(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function yM(t,e,n){if((e=Be(e))instanceof fu)return e._internalPath;if(typeof e=="string")return Tk(t,e);throw Q0("Field path arguments must be of type string or ",t,!1,void 0,n)}const vve=new RegExp("[~\\*/\\[\\]]");function Tk(t,e,n){if(e.search(vve)>=0)throw Q0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new fu(...e.split("."))._internalPath}catch{throw Q0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Q0(t,e,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new Se(pe.INVALID_ARGUMENT,a+t+u)}function IX(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _ve(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Db("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class _ve extends $g{data(){return super.data()}}function Db(t,e){return typeof e=="string"?Tk(t,e):e instanceof fu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RX(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Se(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ek{}class Py extends Ek{}function ho(t,e,...n){let r=[];e instanceof Ek&&r.push(e),r=r.concat(n),(function(o){const s=o.filter((u=>u instanceof Sk)).length,a=o.filter((u=>u instanceof kb)).length;if(s>1||s>0&&a>0)throw new Se(pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class kb extends Py{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new kb(e,n,r)}_apply(e){const n=this._parse(e);return NX(e._query,n),new ii(e.firestore,e.converter,rM(e._query,n))}_parse(e){const n=af(e.firestore);return(function(o,s,a,u,c,d,h){let g;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Se(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){MB(h,d);const S=[];for(const b of h)S.push(NB(u,o,b));g={arrayValue:{values:S}}}else g=NB(u,o,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||MB(h,d),g=xX(a,s,h,d==="in"||d==="not-in");return gt.create(c,d,g)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function wve(t,e,n){const r=e,i=Db("where",t);return kb._create(i,r,n)}class Sk extends Ek{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Sk(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Vt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,o){let s=i;const a=o.getFlattenedFilters();for(const u of a)NX(s,u),s=rM(s,u)})(e._query,n),new ii(e.firestore,e.converter,rM(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class xk extends Py{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new xk(e,n)}_apply(e){const n=(function(i,o,s){if(i.startAt!==null)throw new Se(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Se(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Vg(o,s)})(e._query,this._field,this._direction);return new ii(e.firestore,e.converter,(function(i,o){const s=i.explicitOrderBy.concat([o]);return new Ya(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}}function Z0(t,e="asc"){const n=e,r=Db("orderBy",t);return xk._create(r,n)}class Ob extends Py{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Ob(e,n,r)}_apply(e){return new ii(e.firestore,e.converter,z0(e._query,this._limit,this._limitType))}}function bve(t){return uY("limit",t),Ob._create("limit",t,"F")}function Tve(t){return uY("limitToLast",t),Ob._create("limitToLast",t,"L")}class Lb extends Py{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Lb(e,n,r)}_apply(e){const n=PX(e,this.type,this._docOrFields,this._inclusive);return new ii(e.firestore,e.converter,(function(i,o){return new Ya(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)})(e._query,n))}}function Eve(...t){return Lb._create("startAt",t,!0)}function Sve(...t){return Lb._create("startAfter",t,!1)}class Vb extends Py{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Vb(e,n,r)}_apply(e){const n=PX(e,this.type,this._docOrFields,this._inclusive);return new ii(e.firestore,e.converter,(function(i,o){return new Ya(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)})(e._query,n))}}function xve(...t){return Vb._create("endBefore",t,!1)}function Ave(...t){return Vb._create("endAt",t,!0)}function PX(t,e,n,r){if(n[0]=Be(n[0]),n[0]instanceof $g)return(function(o,s,a,u,c){if(!u)throw new Se(pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const h of Ud(o))if(h.field.isKeyField())d.push(Uc(s,u.key));else{const g=u.data.field(h.field);if(_b(g))throw new Se(pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){const _=h.field.canonicalString();throw new Se(pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${_}' (used as the orderBy) does not exist.`)}d.push(g)}return new lu(d,c)})(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=af(t.firestore);return(function(s,a,u,c,d,h){const g=s.explicitOrderBy;if(d.length>g.length)throw new Se(pe.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const _=[];for(let S=0;S<d.length;S++){const b=d[S];if(g[S].field.isKeyField()){if(typeof b!="string")throw new Se(pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof b}`);if(!DD(s)&&b.indexOf("/")!==-1)throw new Se(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${b}' contains a slash.`);const T=s.path.child(mt.fromString(b));if(!De.isDocumentKey(T))throw new Se(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${T}' is not because it contains an odd number of segments.`);const x=new De(T);_.push(Uc(a,x))}else{const T=xX(u,c,b);_.push(T)}}return new lu(_,h)})(t._query,t.firestore._databaseId,i,e,n,r)}}function NB(t,e,n){if(typeof(n=Be(n))=="string"){if(n==="")throw new Se(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!DD(e)&&n.indexOf("/")!==-1)throw new Se(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(mt.fromString(n));if(!De.isDocumentKey(r))throw new Se(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Uc(t,new De(r))}if(n instanceof Jt)return Uc(t,n._key);throw new Se(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pb(n)}.`)}function MB(t,e){if(!Array.isArray(t)||t.length===0)throw new Se(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function NX(t,e){const n=(function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Se(pe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Se(pe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Ak{convertValue(e,n="none"){switch(su(e)){case 0:return null;case 1:return e.booleanValue;case 2:return an(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(qa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ve(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return vu(e,((i,o)=>{r[i]=this.convertValue(o,n)})),r}convertVectorValue(e){var r,i,o;const n=(o=(i=(r=e.fields)==null?void 0:r[oh].arrayValue)==null?void 0:i.values)==null?void 0:o.map((s=>an(s.doubleValue)));return new qs(n)}convertGeoPoint(e){return new Ko(an(e.latitude),an(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=wb(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(kg(e));default:return null}}convertTimestamp(e){const n=Ua(e);return new Nt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=mt.fromString(e);Ke(wJ(r),9688,{name:e});const i=new ou(r.get(1),r.get(3)),o=new De(r.popFirst(5));return i.isEqual(n)||kn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Cve extends Ak{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Jt(this.firestore,null,n)}}class bc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let _o=class MX extends $g{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new yg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Db("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(pe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=MX._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};_o._jsonSchemaVersion="firestore/documentSnapshot/1.0",_o._jsonSchema={type:Bn("string",_o._jsonSchemaVersion),bundleSource:Bn("string","DocumentSnapshot"),bundleName:Bn("string"),bundle:Bn("string")};let yg=class extends _o{data(e={}){return super.data(e)}},Wo=class DX{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new bc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new yg(this._firestore,this._userDataWriter,r.key,r,new bc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Se(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map((a=>{const u=new yg(i._firestore,i._userDataWriter,a.doc.key,a.doc,new bc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((a=>o||a.type!==3)).map((a=>{const u=new yg(i._firestore,i._userDataWriter,a.doc.key,a.doc,new bc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return a.type!==0&&(c=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:Ive(a.type),doc:u,oldIndex:c,newIndex:d}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(pe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=DX._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=TD.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function Ive(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ve(61501,{type:t})}}function kX(t,e){return t instanceof _o&&e instanceof _o?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Wo&&e instanceof Wo&&t._firestore===e._firestore&&_X(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(t){t=Et(t,Jt);const e=Et(t.firestore,xn);return fX(Mr(e),t._key).then((n=>Ik(e,t,n)))}Wo._jsonSchemaVersion="firestore/querySnapshot/1.0",Wo._jsonSchema={type:Bn("string",Wo._jsonSchemaVersion),bundleSource:Bn("string","QuerySnapshot"),bundleName:Bn("string"),bundle:Bn("string")};class uf extends Ak{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Jt(this.firestore,null,n)}}function Rve(t){t=Et(t,Jt);const e=Et(t.firestore,xn),n=Mr(e),r=new uf(e);return Qye(n,t._key).then((i=>new _o(e,r,t._key,i,new bc(i!==null&&i.hasLocalMutations,!0),t.converter)))}function Pve(t){t=Et(t,Jt);const e=Et(t.firestore,xn);return fX(Mr(e),t._key,{source:"server"}).then((n=>Ik(e,t,n)))}function Ck(t){t=Et(t,ii);const e=Et(t.firestore,xn),n=Mr(e),r=new uf(e);return RX(t._query),dX(n,t._query).then((i=>new Wo(e,r,t,i)))}function Nve(t){t=Et(t,ii);const e=Et(t.firestore,xn),n=Mr(e),r=new uf(e);return Zye(n,t._query).then((i=>new Wo(e,r,t,i)))}function Mve(t){t=Et(t,ii);const e=Et(t.firestore,xn),n=Mr(e),r=new uf(e);return dX(n,t._query,{source:"server"}).then((i=>new Wo(e,r,t,i)))}function DB(t,e,n){t=Et(t,Jt);const r=Et(t.firestore,xn),i=Ub(t.converter,e,n);return Wh(r,[Mb(af(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,un.none())])}function zg(t,e,n,...r){t=Et(t,Jt);const i=Et(t.firestore,xn),o=af(i);let s;return s=typeof(e=Be(e))=="string"||e instanceof fu?wk(o,"updateDoc",t._key,e,n,r):_k(o,"updateDoc",t._key,e),Wh(i,[s.toMutation(t._key,un.exists(!0))])}function vM(t){return Wh(Et(t.firestore,xn),[new zh(t._key,un.none())])}function Hg(t,e){const n=Et(t.firestore,xn),r=jo(t),i=Ub(t.converter,e);return Wh(n,[Mb(af(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,un.exists(!1))]).then((()=>r))}function ew(t,...e){var u,c,d;t=Be(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||gM(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(gM(e[r])){const h=e[r];e[r]=(u=h.next)==null?void 0:u.bind(h),e[r+1]=(c=h.error)==null?void 0:c.bind(h),e[r+2]=(d=h.complete)==null?void 0:d.bind(h)}let o,s,a;if(t instanceof Jt)s=Et(t.firestore,xn),a=Bh(t._key.path),o={next:h=>{e[r]&&e[r](Ik(s,t,h))},error:e[r+1],complete:e[r+2]};else{const h=Et(t,ii);s=Et(h.firestore,xn),a=h._query;const g=new uf(s);o={next:_=>{e[r]&&e[r](new Wo(s,g,h,_))},error:e[r+1],complete:e[r+2]},RX(t._query)}return(function(g,_,S,b){const T=new Rb(b),x=new sk(_,T,S);return g.asyncQueue.enqueueAndForget((async()=>rk(await gh(g),x))),()=>{T.Nu(),g.asyncQueue.enqueueAndForget((async()=>ik(await gh(g),x)))}})(Mr(s),a,i,o)}function Dve(t,e){return eve(Mr(t=Et(t,xn)),gM(e)?e:{next:e})}function Wh(t,e){return(function(r,i){const o=new Nr;return r.asyncQueue.enqueueAndForget((async()=>Cye(await pk(r),i,o))),o.promise})(Mr(t),e)}function Ik(t,e,n){const r=n.docs.get(e._key),i=new uf(t);return new _o(t,i,e._key,r,new bc(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kve={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let OX=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=af(e)}set(e,n,r){this._verifyNotCommitted();const i=jl(e,this._firestore),o=Ub(i.converter,n,r),s=Mb(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,un.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const o=jl(e,this._firestore);let s;return s=typeof(n=Be(n))=="string"||n instanceof fu?wk(this._dataReader,"WriteBatch.update",o._key,n,r,i):_k(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,un.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=jl(e,this._firestore);return this._mutations=this._mutations.concat(new zh(n._key,un.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Se(pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function jl(t,e){if((t=Be(t)).firestore!==e)throw new Se(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ove{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=af(e)}get(e){const n=jl(e,this._firestore),r=new Cve(this._firestore);return this._transaction.lookup([n._key]).then((i=>{if(!i||i.length!==1)return Ve(24041);const o=i[0];if(o.isFoundDocument())return new $g(this._firestore,r,o.key,o,n.converter);if(o.isNoDocument())return new $g(this._firestore,r,n._key,null,n.converter);throw Ve(18433,{doc:o})}))}set(e,n,r){const i=jl(e,this._firestore),o=Ub(i.converter,n,r),s=Mb(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this}update(e,n,r,...i){const o=jl(e,this._firestore);let s;return s=typeof(n=Be(n))=="string"||n instanceof fu?wk(this._dataReader,"Transaction.update",o._key,n,r,i):_k(this._dataReader,"Transaction.update",o._key,n),this._transaction.update(o._key,s),this}delete(e){const n=jl(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lve=class extends Ove{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=jl(e,this._firestore),r=new uf(this._firestore);return super.get(e).then((i=>new _o(this._firestore,r,n._key,i._document,new bc(!1,!1),n.converter)))}};function Vve(t,e,n){t=Et(t,xn);const r={...kve,...n};return(function(o){if(o.maxAttempts<1)throw new Se(pe.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(o,s,a){const u=new Nr;return o.asyncQueue.enqueueAndForget((async()=>{const c=await Yye(o);new Kye(o.asyncQueue,c,a,s,u).ju()})),u.promise})(Mr(t),(i=>e(new Lve(t,i))),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uve(){return new Ry("deleteField")}function Ql(){return new mk("serverTimestamp")}function qve(...t){return new gk("arrayUnion",t)}function Fve(...t){return new yk("arrayRemove",t)}function LX(t){return new vk("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bve(t){return Mr(t=Et(t,xn)),new OX(t,(e=>Wh(t,e)))}(function(e,n=!0){(function(i){Fh=i})(ja),La(new To("firestore",((r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new xn(new Bpe(r.getProvider("auth-internal")),new Hpe(s,r.getProvider("app-check-internal")),(function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Se(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ou(c.options.projectId,d)})(s,i),s);return o={useFetchStreams:n,...o},a._setSettings(o),a}),"PUBLIC").setMultipleInstances(!0)),qi(cF,fF,e),qi(cF,fF,"esm2020")})();const $ve="@firebase/firestore-compat",zve="0.4.1";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rk(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new Se("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kB(){if(typeof Uint8Array>"u")throw new Se("unimplemented","Uint8Arrays are not available in this environment.")}function OB(){if(!xme())throw new Se("unimplemented","Blobs are unavailable in Firestore in this environment.")}let VX=class _M{constructor(e){this._delegate=e}static fromBase64String(e){return OB(),new _M(Fr.fromBase64String(e))}static fromUint8Array(e){return kB(),new _M(Fr.fromUint8Array(e))}toBase64(){return OB(),this._delegate.toBase64()}toUint8Array(){return kB(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wM(t){return Hve(t,["next","error","complete"])}function Hve(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gve{enableIndexedDbPersistence(e,n){return ave(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return lve(e._delegate)}clearIndexedDbPersistence(e){return uve(e._delegate)}}class UX{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ou||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&zs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...n,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){mX(this._delegate,e,n,r)}enableNetwork(){return fve(this._delegate)}disableNetwork(){return dve(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,aY("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return cve(this._delegate)}onSnapshotsInSync(e){return Dve(this._delegate,e)}get app(){if(!this._appCompat)throw new Se("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new yh(this,Ns(this._delegate,e))}catch(n){throw Xr(n,"collection()","Firestore.collection()")}}doc(e){try{return new go(this,jo(this._delegate,e))}catch(n){throw Xr(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Yr(this,rve(this._delegate,e))}catch(n){throw Xr(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return Vve(this._delegate,n=>e(new qX(this,n)))}batch(){return Mr(this._delegate),new FX(new OX(this._delegate,e=>Wh(this._delegate,e)))}loadBundle(e){return hve(this._delegate,e)}namedQuery(e){return pve(this._delegate,e).then(n=>n?new Yr(this,n):null)}}class Fb extends Ak{constructor(e){super(),this.firestore=e}convertBytes(e){return new VX(new Fr(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return go.forKey(n,this.firestore,null)}}function jve(t){Vpe(t)}class qX{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Fb(e)}get(e){const n=Tc(e);return this._delegate.get(n).then(r=>new Gg(this._firestore,new _o(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Tc(e);return r?(Rk("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=Tc(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=Tc(e);return this._delegate.delete(n),this}}class FX{constructor(e){this._delegate=e}set(e,n,r){const i=Tc(e);return r?(Rk("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=Tc(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=Tc(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class jc{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new yg(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new jg(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=jc.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new jc(e,new Fb(e),n),i.set(n,o)),o}}jc.INSTANCES=new WeakMap;class go{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Fb(e)}static forPath(e,n,r){if(e.length%2!==0)throw new Se("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new go(n,new Jt(n._delegate,r,new De(e)))}static forKey(e,n,r){return new go(n,new Jt(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new yh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new yh(this.firestore,Ns(this._delegate,e))}catch(n){throw Xr(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Be(e),e instanceof Jt?vX(this._delegate,e):!1}set(e,n){n=Rk("DocumentReference.set",n);try{return n?DB(this._delegate,e,n):DB(this._delegate,e)}catch(r){throw Xr(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?zg(this._delegate,e):zg(this._delegate,e,n,...r)}catch(i){throw Xr(i,"updateDoc()","DocumentReference.update()")}}delete(){return vM(this._delegate)}onSnapshot(...e){const n=BX(e),r=$X(e,i=>new Gg(this.firestore,new _o(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return ew(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=Rve(this._delegate):(e==null?void 0:e.source)==="server"?n=Pve(this._delegate):n=qb(this._delegate),n.then(r=>new Gg(this.firestore,new _o(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new go(this.firestore,e?this._delegate.withConverter(jc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Xr(t,e,n){return t.message=t.message.replace(e,n),t}function BX(t){for(const e of t)if(typeof e=="object"&&!wM(e))return e;return{}}function $X(t,e){var r,i;let n;return wM(t[0])?n=t[0]:wM(t[1])?n=t[1]:typeof t[0]=="function"?n={next:t[0],error:t[1],complete:t[2]}:n={next:t[1],error:t[2],complete:t[3]},{next:o=>{n.next&&n.next(e(o))},error:(r=n.error)==null?void 0:r.bind(n),complete:(i=n.complete)==null?void 0:i.bind(n)}}class Gg{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new go(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return kX(this._delegate,e._delegate)}}class jg extends Gg{data(e){const n=this._delegate.data(e);return this._delegate._converter||Upe(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}}class Yr{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Fb(e)}where(e,n,r){try{return new Yr(this.firestore,ho(this._delegate,wve(e,n,r)))}catch(i){throw Xr(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Yr(this.firestore,ho(this._delegate,Z0(e,n)))}catch(r){throw Xr(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Yr(this.firestore,ho(this._delegate,bve(e)))}catch(n){throw Xr(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Yr(this.firestore,ho(this._delegate,Tve(e)))}catch(n){throw Xr(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Yr(this.firestore,ho(this._delegate,Eve(...e)))}catch(n){throw Xr(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Yr(this.firestore,ho(this._delegate,Sve(...e)))}catch(n){throw Xr(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Yr(this.firestore,ho(this._delegate,xve(...e)))}catch(n){throw Xr(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Yr(this.firestore,ho(this._delegate,Ave(...e)))}catch(n){throw Xr(n,"endAt()","Query.endAt()")}}isEqual(e){return _X(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=Nve(this._delegate):(e==null?void 0:e.source)==="server"?n=Mve(this._delegate):n=Ck(this._delegate),n.then(r=>new bM(this.firestore,new Wo(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=BX(e),r=$X(e,i=>new bM(this.firestore,new Wo(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return ew(this._delegate,n,r)}withConverter(e){return new Yr(this.firestore,e?this._delegate.withConverter(jc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class Kve{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new jg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class bM{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Yr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new jg(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new Kve(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new jg(this._firestore,r))})}isEqual(e){return kX(this._delegate,e._delegate)}}class yh extends Yr{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new go(this.firestore,e):null}doc(e){try{return e===void 0?new go(this.firestore,jo(this._delegate)):new go(this.firestore,jo(this._delegate,e))}catch(n){throw Xr(n,"doc()","CollectionReference.doc()")}}add(e){return Hg(this._delegate,e).then(n=>new go(this.firestore,n))}isEqual(e){return vX(this._delegate,e._delegate)}withConverter(e){return new yh(this.firestore,e?this._delegate.withConverter(jc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Tc(t){return Et(t,Jt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(...e){this._delegate=new fu(...e)}static documentId(){return new Pk(ln.keyField().canonicalString())}isEqual(e){return e=Be(e),e instanceof fu?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{static serverTimestamp(){const e=Ql();return e._methodName="FieldValue.serverTimestamp",new vc(e)}static delete(){const e=Uve();return e._methodName="FieldValue.delete",new vc(e)}static arrayUnion(...e){const n=qve(...e);return n._methodName="FieldValue.arrayUnion",new vc(n)}static arrayRemove(...e){const n=Fve(...e);return n._methodName="FieldValue.arrayRemove",new vc(n)}static increment(e){const n=LX(e);return n._methodName="FieldValue.increment",new vc(n)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wve={Firestore:UX,GeoPoint:Ko,Timestamp:Nt,Blob:VX,Transaction:qX,WriteBatch:FX,DocumentReference:go,DocumentSnapshot:Gg,Query:Yr,QueryDocumentSnapshot:jg,QuerySnapshot:bM,CollectionReference:yh,FieldPath:Pk,FieldValue:vc,setLogLevel:jve,CACHE_SIZE_UNLIMITED:ove};function Yve(t,e){t.INTERNAL.registerComponent(new To("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps({...Wve}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jve(t){Yve(t,(e,n)=>new UX(e,n,new Gve)),t.registerVersion($ve,zve)}Jve(rf);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zX="firebasestorage.googleapis.com",HX="storageBucket",Xve=120*1e3,Qve=600*1e3,Zve=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn extends zr{constructor(e,n,r=0){super(wx(e),`Firebase Storage: ${n} (${wx(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,vn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return wx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var rn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(rn||(rn={}));function wx(t){return"storage/"+t}function Nk(){const t="An unknown error occurred, please check the error payload for server response.";return new vn(rn.UNKNOWN,t)}function e_e(t){return new vn(rn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function t_e(t){return new vn(rn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function n_e(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new vn(rn.UNAUTHENTICATED,t)}function r_e(){return new vn(rn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function i_e(t){return new vn(rn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function GX(){return new vn(rn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function jX(){return new vn(rn.CANCELED,"User canceled the upload/download.")}function o_e(t){return new vn(rn.INVALID_URL,"Invalid URL '"+t+"'.")}function s_e(t){return new vn(rn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function a_e(){return new vn(rn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+HX+"' property when initializing the app?")}function KX(){return new vn(rn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function l_e(){return new vn(rn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function u_e(){return new vn(rn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function c_e(t){return new vn(rn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Fd(t){return new vn(rn.INVALID_ARGUMENT,t)}function WX(){return new vn(rn.APP_DELETED,"The Firebase app was deleted.")}function YX(t){return new vn(rn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function vg(t,e){return new vn(rn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Am(t){throw new vn(rn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Br.makeFromUrl(e,n)}catch{return new Br(e,"")}if(r.path==="")return r;throw s_e(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(N){N.path.charAt(N.path.length-1)==="/"&&(N.path_=N.path_.slice(0,-1))}const s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),u={bucket:1,path:3};function c(N){N.path_=decodeURIComponent(N.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",_=new RegExp(`^https?://${h}/${d}/b/${i}/o${g}`,"i"),S={bucket:1,path:3},b=n===zX?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",x=new RegExp(`^https?://${b}/${i}/${T}`,"i"),I=[{regex:a,indices:u,postModify:o},{regex:_,indices:S,postModify:c},{regex:x,indices:{bucket:1,path:2},postModify:c}];for(let N=0;N<I.length;N++){const V=I[N],q=V.regex.exec(e);if(q){const P=q[V.indices.bucket];let O=q[V.indices.path];O||(O=""),r=new Br(P,O),V.postModify(r);break}}if(r==null)throw o_e(e);return r}}class f_e{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d_e(t,e,n){let r=1,i=null,o=null,s=!1,a=0;function u(){return a===2}let c=!1;function d(...T){c||(c=!0,e.apply(null,T))}function h(T){i=setTimeout(()=>{i=null,t(_,u())},T)}function g(){o&&clearTimeout(o)}function _(T,...x){if(c){g();return}if(T){g(),d.call(null,T,...x);return}if(u()||s){g(),d.call(null,T,...x);return}r<64&&(r*=2);let I;a===1?(a=2,I=0):I=(r+Math.random())*1e3,h(I)}let S=!1;function b(T){S||(S=!0,g(),!c&&(i!==null?(T||(a=2),clearTimeout(i),h(0)):T||(a=1)))}return h(0),o=setTimeout(()=>{s=!0,b(!0)},n),b}function h_e(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_e(t){return t!==void 0}function m_e(t){return typeof t=="function"}function g_e(t){return typeof t=="object"&&!Array.isArray(t)}function Bb(t){return typeof t=="string"||t instanceof String}function LB(t){return Mk()&&t instanceof Blob}function Mk(){return typeof Blob<"u"}function TM(t,e,n,r){if(r<e)throw Fd(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Fd(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function JX(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Pc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Pc||(Pc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XX(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_e{constructor(e,n,r,i,o,s,a,u,c,d,h,g=!0,_=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=g,this.isUsingEmulator=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,b)=>{this.resolve_=S,this.reject_=b,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new C_(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const s=a=>{const u=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,c)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const a=o.getErrorCode()===Pc.NO_ERROR,u=o.getStatus();if(!a||XX(u,this.additionalRetryCodes_)&&this.retry){const d=o.getErrorCode()===Pc.ABORT;r(!1,new C_(!1,null,d));return}const c=this.successCodes_.indexOf(u)!==-1;r(!0,new C_(c,o))})},n=(r,i)=>{const o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());p_e(u)?o(u):o()}catch(u){s(u)}else if(a!==null){const u=Nk();u.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,u)):s(u)}else if(i.canceled){const u=this.appDelete_?WX():jX();s(u)}else{const u=GX();s(u)}};this.canceled_?n(!1,new C_(!1,null,!0)):this.backoffId_=d_e(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&h_e(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class C_{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function v_e(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function __e(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function w_e(t,e){e&&(t["X-Firebase-GMPID"]=e)}function b_e(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function T_e(t,e,n,r,i,o,s=!0,a=!1){const u=JX(t.urlParams),c=t.url+u,d=Object.assign({},t.headers);return w_e(d,e),v_e(d,n),__e(d,o),b_e(d,r),new y_e(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_e(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function S_e(...t){const e=E_e();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Mk())return new Blob(t);throw new vn(rn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function x_e(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A_e(t){if(typeof atob>"u")throw c_e("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class bx{constructor(e,n){this.data=e,this.contentType=n||null}}function Dk(t,e){switch(t){case Li.RAW:return new bx(QX(e));case Li.BASE64:case Li.BASE64URL:return new bx(ZX(t,e));case Li.DATA_URL:return new bx(I_e(e),R_e(e))}throw Nk()}function QX(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=r,s=t.charCodeAt(++n);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function C_e(t){let e;try{e=decodeURIComponent(t)}catch{throw vg(Li.DATA_URL,"Malformed data URL.")}return QX(e)}function ZX(t,e){switch(t){case Li.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw vg(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Li.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw vg(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=A_e(e)}catch(i){throw i.message.includes("polyfill")?i:vg(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class eQ{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw vg(Li.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=P_e(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function I_e(t){const e=new eQ(t);return e.base64?ZX(Li.BASE64,e.rest):C_e(e.rest)}function R_e(t){return new eQ(t).contentType}function P_e(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,n){let r=0,i="";LB(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(LB(this.data_)){const r=this.data_,i=x_e(r,e,n);return i===null?null:new Ms(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ms(r,!0)}}static getBlob(...e){if(Mk()){const n=e.map(r=>r instanceof Ms?r.data_:r);return new Ms(S_e.apply(null,n))}else{const n=e.map(s=>Bb(s)?Dk(Li.RAW,s).data:s.data_);let r=0;n.forEach(s=>{r+=s.byteLength});const i=new Uint8Array(r);let o=0;return n.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new Ms(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kk(t){let e;try{e=JSON.parse(t)}catch{return null}return g_e(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N_e(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function M_e(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function tQ(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_e(t,e){return e}class Wr{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||D_e}}let I_=null;function k_e(t){return!Bb(t)||t.length<2?t:tQ(t)}function Ny(){if(I_)return I_;const t=[];t.push(new Wr("bucket")),t.push(new Wr("generation")),t.push(new Wr("metageneration")),t.push(new Wr("name","fullPath",!0));function e(o,s){return k_e(s)}const n=new Wr("name");n.xform=e,t.push(n);function r(o,s){return s!==void 0?Number(s):s}const i=new Wr("size");return i.xform=r,t.push(i),t.push(new Wr("timeCreated")),t.push(new Wr("updated")),t.push(new Wr("md5Hash",null,!0)),t.push(new Wr("cacheControl",null,!0)),t.push(new Wr("contentDisposition",null,!0)),t.push(new Wr("contentEncoding",null,!0)),t.push(new Wr("contentLanguage",null,!0)),t.push(new Wr("contentType",null,!0)),t.push(new Wr("metadata","customMetadata",!0)),I_=t,I_}function O_e(t,e){function n(){const r=t.bucket,i=t.fullPath,o=new Br(r,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function L_e(t,e,n){const r={};r.type="file";const i=n.length;for(let o=0;o<i;o++){const s=n[o];r[s.local]=s.xform(r,e[s.server])}return O_e(r,t),r}function nQ(t,e,n){const r=kk(e);return r===null?null:L_e(t,r,n)}function V_e(t,e,n,r){const i=kk(e);if(i===null||!Bb(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const s=encodeURIComponent;return o.split(",").map(c=>{const d=t.bucket,h=t.fullPath,g="/b/"+s(d)+"/o/"+s(h),_=bu(g,n,r),S=JX({alt:"media",token:c});return _+S})[0]}function Ok(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VB="prefixes",UB="items";function U_e(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[VB])for(const i of n[VB]){const o=i.replace(/\/$/,""),s=t._makeStorageReference(new Br(e,o));r.prefixes.push(s)}if(n[UB])for(const i of n[UB]){const o=t._makeStorageReference(new Br(e,i.name));r.items.push(o)}return r}function q_e(t,e,n){const r=kk(n);return r===null?null:U_e(t,e,r)}class Za{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fs(t){if(!t)throw Nk()}function $b(t,e){function n(r,i){const o=nQ(t,i,e);return Fs(o!==null),o}return n}function F_e(t,e){function n(r,i){const o=q_e(t,e,i);return Fs(o!==null),o}return n}function B_e(t,e){function n(r,i){const o=nQ(t,i,e);return Fs(o!==null),V_e(o,i,t.host,t._protocol)}return n}function Yh(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=r_e():i=n_e():n.getStatus()===402?i=t_e(t.bucket):n.getStatus()===403?i=i_e(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function zb(t){const e=Yh(t);function n(r,i){let o=e(r,i);return r.getStatus()===404&&(o=e_e(t.path)),o.serverResponse=i.serverResponse,o}return n}function rQ(t,e,n){const r=e.fullServerUrl(),i=bu(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,a=new Za(i,o,$b(t,n),s);return a.errorHandler=zb(e),a}function $_e(t,e,n,r,i){const o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);const s=e.bucketOnlyServerUrl(),a=bu(s,t.host,t._protocol),u="GET",c=t.maxOperationRetryTime,d=new Za(a,u,F_e(t,e.bucket),c);return d.urlParams=o,d.errorHandler=Yh(e),d}function z_e(t,e,n){const r=e.fullServerUrl(),i=bu(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,a=new Za(i,o,B_e(t,n),s);return a.errorHandler=zb(e),a}function H_e(t,e,n,r){const i=e.fullServerUrl(),o=bu(i,t.host,t._protocol),s="PATCH",a=Ok(n,r),u={"Content-Type":"application/json; charset=utf-8"},c=t.maxOperationRetryTime,d=new Za(o,s,$b(t,r),c);return d.headers=u,d.body=a,d.errorHandler=zb(e),d}function G_e(t,e){const n=e.fullServerUrl(),r=bu(n,t.host,t._protocol),i="DELETE",o=t.maxOperationRetryTime;function s(u,c){}const a=new Za(r,i,s,o);return a.successCodes=[200,204],a.errorHandler=zb(e),a}function j_e(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function iQ(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=j_e(null,e)),r}function oQ(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let I="";for(let N=0;N<2;N++)I=I+Math.random().toString().slice(2);return I}const u=a();s["Content-Type"]="multipart/related; boundary="+u;const c=iQ(e,r,i),d=Ok(c,n),h="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+u+`\r
Content-Type: `+c.contentType+`\r
\r
`,g=`\r
--`+u+"--",_=Ms.getBlob(h,r,g);if(_===null)throw KX();const S={name:c.fullPath},b=bu(o,t.host,t._protocol),T="POST",x=t.maxUploadRetryTime,C=new Za(b,T,$b(t,n),x);return C.urlParams=S,C.headers=s,C.body=_.uploadData(),C.errorHandler=Yh(e),C}class tw{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function Lk(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Fs(!1)}return Fs(!!n&&(e||["active"]).indexOf(n)!==-1),n}function K_e(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),s=iQ(e,r,i),a={name:s.fullPath},u=bu(o,t.host,t._protocol),c="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},h=Ok(s,n),g=t.maxUploadRetryTime;function _(b){Lk(b);let T;try{T=b.getResponseHeader("X-Goog-Upload-URL")}catch{Fs(!1)}return Fs(Bb(T)),T}const S=new Za(u,c,_,g);return S.urlParams=a,S.headers=d,S.body=h,S.errorHandler=Yh(e),S}function W_e(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function o(c){const d=Lk(c,["active","final"]);let h=null;try{h=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Fs(!1)}h||Fs(!1);const g=Number(h);return Fs(!isNaN(g)),new tw(g,r.size(),d==="final")}const s="POST",a=t.maxUploadRetryTime,u=new Za(n,s,o,a);return u.headers=i,u.errorHandler=Yh(e),u}const qB=256*1024;function Y_e(t,e,n,r,i,o,s,a){const u=new tw(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw l_e();const c=u.total-u.current;let d=c;i>0&&(d=Math.min(d,i));const h=u.current,g=h+d;let _="";d===0?_="finalize":c===d?_="upload, finalize":_="upload";const S={"X-Goog-Upload-Command":_,"X-Goog-Upload-Offset":`${u.current}`},b=r.slice(h,g);if(b===null)throw KX();function T(N,V){const q=Lk(N,["active","final"]),P=u.current+d,O=r.size();let R;return q==="final"?R=$b(e,o)(N,V):R=null,new tw(P,O,q==="final",R)}const x="POST",C=e.maxUploadRetryTime,I=new Za(n,x,T,C);return I.headers=S,I.body=b.uploadData(),I.progressCallback=a||null,I.errorHandler=Yh(t),I}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_e={STATE_CHANGED:"state_changed"},Qr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Tx(t){switch(t){case"running":case"pausing":case"canceling":return Qr.RUNNING;case"paused":return Qr.PAUSED;case"success":return Qr.SUCCESS;case"canceled":return Qr.CANCELED;case"error":return Qr.ERROR;default:return Qr.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_e{constructor(e,n,r){if(m_e(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yd(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class Q_e{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Pc.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Pc.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Pc.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,o){if(this.sent_)throw Am("cannot .send() more than once");if(pu(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const s in o)o.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,o[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Am("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Am("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Am("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Am("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Z_e extends Q_e{initXhr(){this.xhr_.responseType="text"}}function $o(){return new Z_e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sQ{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=Ny(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(rn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(XX(i.status,[]))if(o)i=GX();else{this.sleepTime=Math.max(this.sleepTime*2,Zve),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(rn.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=K_e(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,$o,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=W_e(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,$o,n,r);this._request=o,o.getPromise().then(s=>{s=s,this._request=void 0,this._updateProgress(s.current),this._needToFetchStatus=!1,s.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=qB*this._chunkMultiplier,n=new tw(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let s;try{s=Y_e(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(u){this._error=u,this._transition("error");return}const a=this._ref.storage._makeRequest(s,$o,i,o,!1);this._request=a,a.getPromise().then(u=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(u.current),u.finalized?(this._metadata=u.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){qB*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=rQ(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,$o,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=oQ(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,$o,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=jX(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Tx(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const o=new X_e(n||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Tx(this._state)){case Qr.SUCCESS:yd(this._resolve.bind(null,this.snapshot))();break;case Qr.CANCELED:case Qr.ERROR:const n=this._reject;yd(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Tx(this._state)){case Qr.RUNNING:case Qr.PAUSED:e.next&&yd(e.next.bind(e,this.snapshot))();break;case Qr.SUCCESS:e.complete&&yd(e.complete.bind(e))();break;case Qr.CANCELED:case Qr.ERROR:e.error&&yd(e.error.bind(e,this._error))();break;default:e.error&&yd(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,n){this._service=e,n instanceof Br?this._location=n:this._location=Br.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Kc(e,n)}get root(){const e=new Br(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return tQ(this._location.path)}get storage(){return this._service}get parent(){const e=N_e(this._location.path);if(e===null)return null;const n=new Br(this._location.bucket,e);return new Kc(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw YX(e)}}function e0e(t,e,n){t._throwIfRoot("uploadBytes");const r=oQ(t.storage,t._location,Ny(),new Ms(e,!0),n);return t.storage.makeRequestWithTokens(r,$o).then(i=>({metadata:i,ref:t}))}function t0e(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new sQ(t,new Ms(e),n)}function n0e(t,e,n=Li.RAW,r){t._throwIfRoot("uploadString");const i=Dk(n,e),o={...r};return o.contentType==null&&i.contentType!=null&&(o.contentType=i.contentType),e0e(t,i.data,o)}function r0e(t){const e={prefixes:[],items:[]};return aQ(t,e).then(()=>e)}async function aQ(t,e,n){const i=await lQ(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&await aQ(t,e,i.nextPageToken)}function lQ(t,e){e!=null&&typeof e.maxResults=="number"&&TM("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=$_e(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,$o)}function i0e(t){t._throwIfRoot("getMetadata");const e=rQ(t.storage,t._location,Ny());return t.storage.makeRequestWithTokens(e,$o)}function o0e(t,e){t._throwIfRoot("updateMetadata");const n=H_e(t.storage,t._location,e,Ny());return t.storage.makeRequestWithTokens(n,$o)}function s0e(t){t._throwIfRoot("getDownloadURL");const e=z_e(t.storage,t._location,Ny());return t.storage.makeRequestWithTokens(e,$o).then(n=>{if(n===null)throw u_e();return n})}function a0e(t){t._throwIfRoot("deleteObject");const e=G_e(t.storage,t._location);return t.storage.makeRequestWithTokens(e,$o)}function uQ(t,e){const n=M_e(t._location.path,e),r=new Br(t._location.bucket,n);return new Kc(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0e(t){return/^[A-Za-z]+:\/\//.test(t)}function u0e(t,e){return new Kc(t,e)}function cQ(t,e){if(t instanceof Vk){const n=t;if(n._bucket==null)throw a_e();const r=new Kc(n,n._bucket);return e!=null?cQ(r,e):r}else return e!==void 0?uQ(t,e):t}function c0e(t,e){if(e&&l0e(e)){if(t instanceof Vk)return u0e(t,e);throw Fd("To use ref(service, url), the first argument must be a Storage instance.")}else return cQ(t,e)}function FB(t,e){const n=e==null?void 0:e[HX];return n==null?null:Br.makeFromBucketSpec(n,t)}function f0e(t,e,n,r={}){t.host=`${e}:${n}`;const i=pu(e);i&&(W2(`https://${t.host}/b`),Y2("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:o}=r;o&&(t._overrideAuthToken=typeof o=="string"?o:NK(o,t.app.options.projectId))}class Vk{constructor(e,n,r,i,o,s=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=s,this._bucket=null,this._host=zX,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Xve,this._maxUploadRetryTime=Qve,this._requests=new Set,i!=null?this._bucket=Br.makeFromBucketSpec(i,this._host):this._bucket=FB(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Br.makeFromBucketSpec(this._url,e):this._bucket=FB(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){TM("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){TM("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(tn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Kc(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new f_e(WX());{const s=T_e(e,this._appId,r,i,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const BB="@firebase/storage",$B="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fQ="storage";function d0e(t,e,n,r){return t=Be(t),n0e(t,e,n,r)}function h0e(t,e,n){return t=Be(t),t0e(t,e,n)}function p0e(t){return t=Be(t),i0e(t)}function m0e(t,e){return t=Be(t),o0e(t,e)}function g0e(t,e){return t=Be(t),lQ(t,e)}function y0e(t){return t=Be(t),r0e(t)}function dQ(t){return t=Be(t),s0e(t)}function v0e(t){return t=Be(t),a0e(t)}function EM(t,e){return t=Be(t),c0e(t,e)}function _0e(t,e){return uQ(t,e)}function w0e(t=tb(),e){t=Be(t);const r=Lh(t,fQ).getImmediate({identifier:e}),i=RK("storage");return i&&hQ(r,...i),r}function hQ(t,e,n,r={}){f0e(t,e,n,r)}function b0e(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Vk(n,r,i,e,ja)}function T0e(){La(new To(fQ,b0e,"PUBLIC").setMultipleInstances(!0)),qi(BB,$B,""),qi(BB,$B,"esm2020")}T0e();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zB{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new R_(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new R_(r,this,this._ref))},n)}on(e,n,r,i){let o;return n&&(typeof n=="function"?o=s=>n(new R_(s,this,this._ref)):o={next:n.next?s=>n.next(new R_(s,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,o,r||void 0,i||void 0)}}class HB{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new Ra(e,this._service))}get items(){return this._delegate.items.map(e=>new Ra(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=_0e(this._delegate,e);return new Ra(n,this.storage)}get root(){return new Ra(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new Ra(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new zB(h0e(this._delegate,e,n),this)}putString(e,n=Li.RAW,r){this._throwIfRoot("putString");const i=Dk(n,e),o={...r};return o.contentType==null&&i.contentType!=null&&(o.contentType=i.contentType),new zB(new sQ(this._delegate,new Ms(i.data,!0),o),this)}listAll(){return y0e(this._delegate).then(e=>new HB(e,this.storage))}list(e){return g0e(this._delegate,e||void 0).then(n=>new HB(n,this.storage))}getMetadata(){return p0e(this._delegate)}updateMetadata(e){return m0e(this._delegate,e)}getDownloadURL(){return dQ(this._delegate)}delete(){return this._throwIfRoot("delete"),v0e(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw YX(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pQ{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(GB(e))throw Fd("ref() expected a child path but got a URL, use refFromURL instead.");return new Ra(EM(this._delegate,e),this)}refFromURL(e){if(!GB(e))throw Fd("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Br.makeFromUrl(e,this._delegate.host)}catch{throw Fd("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ra(EM(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){hQ(this._delegate,e,n,r)}}function GB(t){return/^[A-Za-z]+:\/\//.test(t)}const E0e="@firebase/storage-compat",S0e="0.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0e="storage-compat";function A0e(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new pQ(n,r)}function C0e(t){const e={TaskState:Qr,TaskEvent:J_e,StringFormat:Li,Storage:pQ,Reference:Ra};t.INTERNAL.registerComponent(new To(x0e,A0e,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(E0e,S0e)}C0e(rf);const I0e={apiKey:"AIzaSyCZh_PwX7LZfXujZiHGH9T-8uA17hNQGBY",authDomain:"bkomhate-site.firebaseapp.com",projectId:"bkomhate-site",storageBucket:"bkomhate-site.firebasestorage.app",messagingSenderId:"37549082348",appId:"1:37549082348:web:cf0c6c4f504b40192887c9"},Uk=rf.initializeApp(I0e),_g=Khe(Uk),Jr=sve(Uk),R0e=w0e(Uk),mQ=D.createContext({currentUser:null,loading:!0}),P0e=()=>D.useContext(mQ),N0e=({children:t})=>{const[e,n]=D.useState(null),[r,i]=D.useState(!0);D.useEffect(()=>yde(_g,a=>{n(a),i(!1)}),[]);const o={currentUser:e,loading:r};return M.jsx(mQ.Provider,{value:o,children:t})};function gQ(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=gQ(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function nn(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=gQ(t))&&(r&&(r+=" "),r+=e);return r}var Ex={},Sx={},jB;function M0e(){return jB||(jB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(Sx)),Sx}var xx={},KB;function yQ(){return KB||(KB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(xx)),xx}var Ax={},WB;function vQ(){return WB||(WB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}t.toKey=e})(Ax)),Ax}var Cx={},YB;function qk(){return YB||(YB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){const r=[],i=n.length;if(i===0)return r;let o=0,s="",a="",u=!1;for(n.charCodeAt(0)===46&&(r.push(""),o++);o<i;){const c=n[o];a?c==="\\"&&o+1<i?(o++,s+=n[o]):c===a?a="":s+=c:u?c==='"'||c==="'"?a=c:c==="]"?(u=!1,r.push(s),s=""):s+=c:c==="["?(u=!0,s&&(r.push(s),s="")):c==="."?s&&(r.push(s),s=""):s+=c,o++}return s&&r.push(s),r}t.toPath=e})(Cx)),Cx}var JB;function Fk(){return JB||(JB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=M0e(),n=yQ(),r=vQ(),i=qk();function o(a,u,c){if(a==null)return c;switch(typeof u){case"string":{if(e.isUnsafeProperty(u))return c;const d=a[u];return d===void 0?n.isDeepKey(u)?o(a,i.toPath(u),c):c:d}case"number":case"symbol":{typeof u=="number"&&(u=r.toKey(u));const d=a[u];return d===void 0?c:d}default:{if(Array.isArray(u))return s(a,u,c);if(Object.is(u==null?void 0:u.valueOf(),-0)?u="-0":u=String(u),e.isUnsafeProperty(u))return c;const d=a[u];return d===void 0?c:d}}}function s(a,u,c){if(u.length===0)return c;let d=a;for(let h=0;h<u.length;h++){if(d==null||e.isUnsafeProperty(u[h]))return c;d=d[u[h]]}return d===void 0?c:d}t.get=o})(Ex)),Ex}var Ix,XB;function D0e(){return XB||(XB=1,Ix=Fk().get),Ix}var k0e=D0e();const vh=Co(k0e);var Rx={exports:{}},Ht={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QB;function O0e(){if(QB)return Ht;QB=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),s=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),c=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),g=Symbol.for("react.view_transition"),_=Symbol.for("react.client.reference");function S(b){if(typeof b=="object"&&b!==null){var T=b.$$typeof;switch(T){case t:switch(b=b.type,b){case n:case i:case r:case u:case c:case g:return b;default:switch(b=b&&b.$$typeof,b){case s:case a:case h:case d:return b;case o:return b;default:return T}}case e:return T}}}return Ht.ContextConsumer=o,Ht.ContextProvider=s,Ht.Element=t,Ht.ForwardRef=a,Ht.Fragment=n,Ht.Lazy=h,Ht.Memo=d,Ht.Portal=e,Ht.Profiler=i,Ht.StrictMode=r,Ht.Suspense=u,Ht.SuspenseList=c,Ht.isContextConsumer=function(b){return S(b)===o},Ht.isContextProvider=function(b){return S(b)===s},Ht.isElement=function(b){return typeof b=="object"&&b!==null&&b.$$typeof===t},Ht.isForwardRef=function(b){return S(b)===a},Ht.isFragment=function(b){return S(b)===n},Ht.isLazy=function(b){return S(b)===h},Ht.isMemo=function(b){return S(b)===d},Ht.isPortal=function(b){return S(b)===e},Ht.isProfiler=function(b){return S(b)===i},Ht.isStrictMode=function(b){return S(b)===r},Ht.isSuspense=function(b){return S(b)===u},Ht.isSuspenseList=function(b){return S(b)===c},Ht.isValidElementType=function(b){return typeof b=="string"||typeof b=="function"||b===n||b===i||b===r||b===u||b===c||typeof b=="object"&&b!==null&&(b.$$typeof===h||b.$$typeof===d||b.$$typeof===s||b.$$typeof===o||b.$$typeof===a||b.$$typeof===_||b.getModuleId!==void 0)},Ht.typeOf=S,Ht}var ZB;function L0e(){return ZB||(ZB=1,Rx.exports=O0e()),Rx.exports}var V0e=L0e(),Vi=t=>t===0?0:t>0?1:-1,So=t=>typeof t=="number"&&t!=+t,Ec=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,ot=t=>(typeof t=="number"||t instanceof Number)&&!So(t),Gs=t=>ot(t)||typeof t=="string",U0e=0,Kg=t=>{var e=++U0e;return"".concat(t||"").concat(e)},Xo=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ot(e)&&typeof e!="string")return r;var o;if(Ec(e)){if(n==null)return r;var s=e.indexOf("%");o=n*parseFloat(e.slice(0,s))/100}else o=+e;return So(o)&&(o=r),i&&n!=null&&o>n&&(o=n),o},_Q=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[t[r]])n[t[r]]=!0;else return!0;return!1};function Zr(t,e,n){return ot(t)&&ot(e)?t+n*(e-t):e}function q0e(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):vh(r,e))===n)}var mr=t=>t===null||typeof t>"u",My=t=>mr(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1)),F0e=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Bk(t){if(typeof t!="string")return!1;var e=F0e;return e.includes(t)}var B0e=["viewBox","children"],e3=["points","pathLength"],Px={svg:B0e,polygon:e3,polyline:e3},$0e=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(D.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{Bk(i)&&(r[i]=(o=>n[i](n,o)))}),r},z0e=(t,e,n)=>r=>(t(e,n,r),null),$k=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var o=t[i];Bk(i)&&typeof o=="function"&&(r||(r={}),r[i]=z0e(o,e,n))}),r},H0e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function wQ(t){if(typeof t!="string")return!1;var e=H0e;return e.includes(t)}function Hb(t){var e=Object.entries(t).filter(n=>{var[r]=n;return wQ(r)});return Object.fromEntries(e)}var t3=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",n3=null,Nx=null,bQ=t=>{if(t===n3&&Array.isArray(Nx))return Nx;var e=[];return D.Children.forEach(t,n=>{mr(n)||(V0e.isFragment(n)?e=e.concat(bQ(n.props.children)):e.push(n))}),Nx=e,n3=t,e};function G0e(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>t3(i)):r=[t3(e)],bQ(t).forEach(i=>{var o=vh(i,"type.displayName")||vh(i,"type.name");r.indexOf(o)!==-1&&n.push(i)}),n}var j0e=(t,e,n,r)=>{var i;if(typeof e=="symbol"||typeof e=="number")return!0;var o=(i=r&&(Px==null?void 0:Px[r]))!==null&&i!==void 0?i:[],s=e.startsWith("data-"),a=typeof t!="function"&&(!!r&&o.includes(e)||wQ(e)),u=!!n&&Bk(e);return s||a||u},dr=(t,e,n)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(D.isValidElement(t)&&(r=t.props),typeof r!="object"&&typeof r!="function")return null;var i={};return Object.keys(r).forEach(o=>{var s;j0e((s=r)===null||s===void 0?void 0:s[o],o,e,n)&&(i[o]=r[o])}),i},K0e=["children","width","height","viewBox","className","style","title","desc"];function SM(){return SM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},SM.apply(null,arguments)}function W0e(t,e){if(t==null)return{};var n,r,i=Y0e(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Y0e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var TQ=D.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:o,className:s,style:a,title:u,desc:c}=t,d=W0e(t,K0e),h=o||{width:r,height:i,x:0,y:0},g=nn("recharts-surface",s);return D.createElement("svg",SM({},dr(d,!0,"svg"),{className:g,width:r,height:i,style:a,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:e}),D.createElement("title",null,u),D.createElement("desc",null,c),n)}),J0e=["children","className"];function xM(){return xM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xM.apply(null,arguments)}function X0e(t,e){if(t==null)return{};var n,r,i=Q0e(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Q0e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var du=D.forwardRef((t,e)=>{var{children:n,className:r}=t,i=X0e(t,J0e),o=nn("recharts-layer",r);return D.createElement("g",xM({className:o},dr(i,!0),{ref:e}),n)}),Z0e=D.createContext(null);function Yt(t){return function(){return t}}const EQ=Math.cos,nw=Math.sin,ts=Math.sqrt,rw=Math.PI,Gb=2*rw,AM=Math.PI,CM=2*AM,cc=1e-6,ewe=CM-cc;function SQ(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function twe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return SQ;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class nwe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?SQ:twe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,u=r-e,c=i-n,d=s-e,h=a-n,g=d*d+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(g>cc)if(!(Math.abs(h*u-c*d)>cc)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let _=r-s,S=i-a,b=u*u+c*c,T=_*_+S*S,x=Math.sqrt(b),C=Math.sqrt(g),I=o*Math.tan((AM-Math.acos((b+g-T)/(2*x*C)))/2),N=I/C,V=I/x;Math.abs(N-1)>cc&&this._append`L${e+N*d},${n+N*h}`,this._append`A${o},${o},0,0,${+(h*_>d*S)},${this._x1=e+V*u},${this._y1=n+V*c}`}}arc(e,n,r,i,o,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),c=e+a,d=n+u,h=1^s,g=s?i-o:o-i;this._x1===null?this._append`M${c},${d}`:(Math.abs(this._x1-c)>cc||Math.abs(this._y1-d)>cc)&&this._append`L${c},${d}`,r&&(g<0&&(g=g%CM+CM),g>ewe?this._append`A${r},${r},0,1,${h},${e-a},${n-u}A${r},${r},0,1,${h},${this._x1=c},${this._y1=d}`:g>cc&&this._append`A${r},${r},0,${+(g>=AM)},${h},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function zk(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new nwe(e)}function Hk(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function xQ(t){this._context=t}xQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function jb(t){return new xQ(t)}function AQ(t){return t[0]}function CQ(t){return t[1]}function IQ(t,e){var n=Yt(!0),r=null,i=jb,o=null,s=zk(a);t=typeof t=="function"?t:t===void 0?AQ:Yt(t),e=typeof e=="function"?e:e===void 0?CQ:Yt(e);function a(u){var c,d=(u=Hk(u)).length,h,g=!1,_;for(r==null&&(o=i(_=s())),c=0;c<=d;++c)!(c<d&&n(h=u[c],c,u))===g&&((g=!g)?o.lineStart():o.lineEnd()),g&&o.point(+t(h,c,u),+e(h,c,u));if(_)return o=null,_+""||null}return a.x=function(u){return arguments.length?(t=typeof u=="function"?u:Yt(+u),a):t},a.y=function(u){return arguments.length?(e=typeof u=="function"?u:Yt(+u),a):e},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Yt(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(o=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=o=null:o=i(r=u),a):r},a}function P_(t,e,n){var r=null,i=Yt(!0),o=null,s=jb,a=null,u=zk(c);t=typeof t=="function"?t:t===void 0?AQ:Yt(+t),e=typeof e=="function"?e:Yt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?CQ:Yt(+n);function c(h){var g,_,S,b=(h=Hk(h)).length,T,x=!1,C,I=new Array(b),N=new Array(b);for(o==null&&(a=s(C=u())),g=0;g<=b;++g){if(!(g<b&&i(T=h[g],g,h))===x)if(x=!x)_=g,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),S=g-1;S>=_;--S)a.point(I[S],N[S]);a.lineEnd(),a.areaEnd()}x&&(I[g]=+t(T,g,h),N[g]=+e(T,g,h),a.point(r?+r(T,g,h):I[g],n?+n(T,g,h):N[g]))}if(C)return a=null,C+""||null}function d(){return IQ().defined(i).curve(s).context(o)}return c.x=function(h){return arguments.length?(t=typeof h=="function"?h:Yt(+h),r=null,c):t},c.x0=function(h){return arguments.length?(t=typeof h=="function"?h:Yt(+h),c):t},c.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:Yt(+h),c):r},c.y=function(h){return arguments.length?(e=typeof h=="function"?h:Yt(+h),n=null,c):e},c.y0=function(h){return arguments.length?(e=typeof h=="function"?h:Yt(+h),c):e},c.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Yt(+h),c):n},c.lineX0=c.lineY0=function(){return d().x(t).y(e)},c.lineY1=function(){return d().x(t).y(n)},c.lineX1=function(){return d().x(r).y(e)},c.defined=function(h){return arguments.length?(i=typeof h=="function"?h:Yt(!!h),c):i},c.curve=function(h){return arguments.length?(s=h,o!=null&&(a=s(o)),c):s},c.context=function(h){return arguments.length?(h==null?o=a=null:a=s(o=h),c):o},c}class RQ{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function rwe(t){return new RQ(t,!0)}function iwe(t){return new RQ(t,!1)}const Gk={draw(t,e){const n=ts(e/rw);t.moveTo(n,0),t.arc(0,0,n,0,Gb)}},owe={draw(t,e){const n=ts(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},PQ=ts(1/3),swe=PQ*2,awe={draw(t,e){const n=ts(e/swe),r=n*PQ;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},lwe={draw(t,e){const n=ts(e),r=-n/2;t.rect(r,r,n,n)}},uwe=.8908130915292852,NQ=nw(rw/10)/nw(7*rw/10),cwe=nw(Gb/10)*NQ,fwe=-EQ(Gb/10)*NQ,dwe={draw(t,e){const n=ts(e*uwe),r=cwe*n,i=fwe*n;t.moveTo(0,-n),t.lineTo(r,i);for(let o=1;o<5;++o){const s=Gb*o/5,a=EQ(s),u=nw(s);t.lineTo(u*n,-a*n),t.lineTo(a*r-u*i,u*r+a*i)}t.closePath()}},Mx=ts(3),hwe={draw(t,e){const n=-ts(e/(Mx*3));t.moveTo(0,n*2),t.lineTo(-Mx*n,-n),t.lineTo(Mx*n,-n),t.closePath()}},uo=-.5,co=ts(3)/2,IM=1/ts(12),pwe=(IM/2+1)*3,mwe={draw(t,e){const n=ts(e/pwe),r=n/2,i=n*IM,o=r,s=n*IM+n,a=-o,u=s;t.moveTo(r,i),t.lineTo(o,s),t.lineTo(a,u),t.lineTo(uo*r-co*i,co*r+uo*i),t.lineTo(uo*o-co*s,co*o+uo*s),t.lineTo(uo*a-co*u,co*a+uo*u),t.lineTo(uo*r+co*i,uo*i-co*r),t.lineTo(uo*o+co*s,uo*s-co*o),t.lineTo(uo*a+co*u,uo*u-co*a),t.closePath()}};function gwe(t,e){let n=null,r=zk(i);t=typeof t=="function"?t:Yt(t||Gk),e=typeof e=="function"?e:Yt(e===void 0?64:+e);function i(){let o;if(n||(n=o=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(t=typeof o=="function"?o:Yt(o),i):t},i.size=function(o){return arguments.length?(e=typeof o=="function"?o:Yt(+o),i):e},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function iw(){}function ow(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function MQ(t){this._context=t}MQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ow(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ow(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function ywe(t){return new MQ(t)}function DQ(t){this._context=t}DQ.prototype={areaStart:iw,areaEnd:iw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:ow(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function vwe(t){return new DQ(t)}function kQ(t){this._context=t}kQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:ow(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function _we(t){return new kQ(t)}function OQ(t){this._context=t}OQ.prototype={areaStart:iw,areaEnd:iw,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function wwe(t){return new OQ(t)}function r3(t){return t<0?-1:1}function i3(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),a=(o*i+s*r)/(r+i);return(r3(o)+r3(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function o3(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Dx(t,e,n){var r=t._x0,i=t._y0,o=t._x1,s=t._y1,a=(o-r)/3;t._context.bezierCurveTo(r+a,i+a*e,o-a,s-a*n,o,s)}function sw(t){this._context=t}sw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Dx(this,this._t0,o3(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Dx(this,o3(this,n=i3(this,t,e)),n);break;default:Dx(this,this._t0,n=i3(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function LQ(t){this._context=new VQ(t)}(LQ.prototype=Object.create(sw.prototype)).point=function(t,e){sw.prototype.point.call(this,e,t)};function VQ(t){this._context=t}VQ.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}};function bwe(t){return new sw(t)}function Twe(t){return new LQ(t)}function UQ(t){this._context=t}UQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=s3(t),i=s3(e),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function s3(t){var e,n=t.length-1,r,i=new Array(n),o=new Array(n),s=new Array(n);for(i[0]=0,o[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,o[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,o[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/o[e-1],o[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/o[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/o[e];for(o[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function Ewe(t){return new UQ(t)}function Kb(t,e){this._context=t,this._t=e}Kb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Swe(t){return new Kb(t,.5)}function xwe(t){return new Kb(t,0)}function Awe(t){return new Kb(t,1)}function _h(t,e){if((s=t.length)>1)for(var n=1,r,i,o=t[e[0]],s,a=o.length;n<s;++n)for(i=o,o=t[e[n]],r=0;r<a;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function RM(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Cwe(t,e){return t[e]}function Iwe(t){const e=[];return e.key=t,e}function Rwe(){var t=Yt([]),e=RM,n=_h,r=Cwe;function i(o){var s=Array.from(t.apply(this,arguments),Iwe),a,u=s.length,c=-1,d;for(const h of o)for(a=0,++c;a<u;++a)(s[a][c]=[0,+r(h,s[a].key,c,o)]).data=h;for(a=0,d=Hk(e(s));a<u;++a)s[d[a]].index=a;return n(s,d),s}return i.keys=function(o){return arguments.length?(t=typeof o=="function"?o:Yt(Array.from(o)),i):t},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:Yt(+o),i):r},i.order=function(o){return arguments.length?(e=o==null?RM:typeof o=="function"?o:Yt(Array.from(o)),i):e},i.offset=function(o){return arguments.length?(n=o??_h,i):n},i}function Pwe(t,e){if((r=t.length)>0){for(var n,r,i=0,o=t[0].length,s;i<o;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}_h(t,e)}}function Nwe(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,o=r.length;n<o;++n){for(var s=0,a=0;s<i;++s)a+=t[s][n][1]||0;r[n][1]+=r[n][0]=-a/2}_h(t,e)}}function Mwe(t,e){if(!(!((s=t.length)>0)||!((o=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,o,s;r<o;++r){for(var a=0,u=0,c=0;a<s;++a){for(var d=t[e[a]],h=d[r][1]||0,g=d[r-1][1]||0,_=(h-g)/2,S=0;S<a;++S){var b=t[e[S]],T=b[r][1]||0,x=b[r-1][1]||0;_+=T-x}u+=h,c+=_*h}i[r-1][1]+=i[r-1][0]=n,u&&(n-=c/u)}i[r-1][1]+=i[r-1][0]=n,_h(t,e)}}var Dwe=["type","size","sizeType"];function PM(){return PM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},PM.apply(null,arguments)}function a3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function l3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?a3(Object(n),!0).forEach(function(r){kwe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kwe(t,e,n){return(e=Owe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Owe(t){var e=Lwe(t,"string");return typeof e=="symbol"?e:e+""}function Lwe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vwe(t,e){if(t==null)return{};var n,r,i=Uwe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Uwe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var qQ={symbolCircle:Gk,symbolCross:owe,symbolDiamond:awe,symbolSquare:lwe,symbolStar:dwe,symbolTriangle:hwe,symbolWye:mwe},qwe=Math.PI/180,Fwe=t=>{var e="symbol".concat(My(t));return qQ[e]||Gk},Bwe=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*qwe;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},$we=(t,e)=>{qQ["symbol".concat(My(t))]=e},FQ=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=Vwe(t,Dwe),o=l3(l3({},i),{},{type:e,size:n,sizeType:r}),s="circle";typeof e=="string"&&(s=e);var a=()=>{var g=Fwe(s),_=gwe().type(g).size(Bwe(n,r,s));return _()},{className:u,cx:c,cy:d}=o,h=dr(o,!0);return c===+c&&d===+d&&n===+n?D.createElement("path",PM({},h,{className:nn("recharts-symbols",u),transform:"translate(".concat(c,", ").concat(d,")"),d:a()})):null};FQ.registerSymbol=$we;var kx={},Ox={},u3;function zwe(){return u3||(u3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let o=0;o<n.length;o++){const s=n[o],a=r(s);i.has(a)||i.set(a,s)}return Array.from(i.values())}t.uniqBy=e})(Ox)),Ox}var Lx={},c3;function BQ(){return c3||(c3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(Lx)),Lx}var Vx={},Ux={},qx={},f3;function Hwe(){return f3||(f3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(qx)),qx}var d3;function jk(){return d3||(d3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Hwe();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(Ux)),Ux}var Fx={},h3;function Gwe(){return h3||(h3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(Fx)),Fx}var p3;function jwe(){return p3||(p3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=jk(),n=Gwe();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(Vx)),Vx}var Bx={},$x={},m3;function Kwe(){return m3||(m3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Fk();function n(r){return function(i){return e.get(i,r)}}t.property=n})($x)),$x}var zx={},Hx={},Gx={},jx={},g3;function $Q(){return g3||(g3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(jx)),jx}var Kx={},y3;function zQ(){return y3||(y3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(Kx)),Kx}var Wx={},v3;function HQ(){return v3||(v3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.eq=e})(Wx)),Wx}var _3;function Wwe(){return _3||(_3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Kk(),n=$Q(),r=zQ(),i=HQ();function o(h,g,_){return typeof _!="function"?e.isMatch(h,g):s(h,g,function S(b,T,x,C,I,N){const V=_(b,T,x,C,I,N);return V!==void 0?!!V:s(b,T,S,N)},new Map)}function s(h,g,_,S){if(g===h)return!0;switch(typeof g){case"object":return a(h,g,_,S);case"function":return Object.keys(g).length>0?s(h,{...g},_,S):i.eq(h,g);default:return n.isObject(h)?typeof g=="string"?g==="":!0:i.eq(h,g)}}function a(h,g,_,S){if(g==null)return!0;if(Array.isArray(g))return c(h,g,_,S);if(g instanceof Map)return u(h,g,_,S);if(g instanceof Set)return d(h,g,_,S);const b=Object.keys(g);if(h==null)return b.length===0;if(b.length===0)return!0;if(S&&S.has(g))return S.get(g)===h;S&&S.set(g,h);try{for(let T=0;T<b.length;T++){const x=b[T];if(!r.isPrimitive(h)&&!(x in h)||g[x]===void 0&&h[x]!==void 0||g[x]===null&&h[x]!==null||!_(h[x],g[x],x,h,g,S))return!1}return!0}finally{S&&S.delete(g)}}function u(h,g,_,S){if(g.size===0)return!0;if(!(h instanceof Map))return!1;for(const[b,T]of g.entries()){const x=h.get(b);if(_(x,T,b,h,g,S)===!1)return!1}return!0}function c(h,g,_,S){if(g.length===0)return!0;if(!Array.isArray(h))return!1;const b=new Set;for(let T=0;T<g.length;T++){const x=g[T];let C=!1;for(let I=0;I<h.length;I++){if(b.has(I))continue;const N=h[I];let V=!1;if(_(N,x,T,h,g,S)&&(V=!0),V){b.add(I),C=!0;break}}if(!C)return!1}return!0}function d(h,g,_,S){return g.size===0?!0:h instanceof Set?c([...h],[...g],_,S):!1}t.isMatchWith=o,t.isSetMatch=d})(Gx)),Gx}var w3;function Kk(){return w3||(w3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Wwe();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(Hx)),Hx}var Yx={},Jx={},Xx={},b3;function Ywe(){return b3||(b3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(Xx)),Xx}var Qx={},T3;function GQ(){return T3||(T3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(Qx)),Qx}var Zx={},E3;function jQ(){return E3||(E3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",o="[object Arguments]",s="[object Symbol]",a="[object Date]",u="[object Map]",c="[object Set]",d="[object Array]",h="[object Function]",g="[object ArrayBuffer]",_="[object Object]",S="[object Error]",b="[object DataView]",T="[object Uint8Array]",x="[object Uint8ClampedArray]",C="[object Uint16Array]",I="[object Uint32Array]",N="[object BigUint64Array]",V="[object Int8Array]",q="[object Int16Array]",P="[object Int32Array]",O="[object BigInt64Array]",R="[object Float32Array]",U="[object Float64Array]";t.argumentsTag=o,t.arrayBufferTag=g,t.arrayTag=d,t.bigInt64ArrayTag=O,t.bigUint64ArrayTag=N,t.booleanTag=i,t.dataViewTag=b,t.dateTag=a,t.errorTag=S,t.float32ArrayTag=R,t.float64ArrayTag=U,t.functionTag=h,t.int16ArrayTag=q,t.int32ArrayTag=P,t.int8ArrayTag=V,t.mapTag=u,t.numberTag=r,t.objectTag=_,t.regexpTag=e,t.setTag=c,t.stringTag=n,t.symbolTag=s,t.uint16ArrayTag=C,t.uint32ArrayTag=I,t.uint8ArrayTag=T,t.uint8ClampedArrayTag=x})(Zx)),Zx}var eA={},S3;function Jwe(){return S3||(S3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(eA)),eA}var x3;function KQ(){return x3||(x3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Ywe(),n=GQ(),r=jQ(),i=zQ(),o=Jwe();function s(d,h){return a(d,void 0,d,new Map,h)}function a(d,h,g,_=new Map,S=void 0){const b=S==null?void 0:S(d,h,g,_);if(b!==void 0)return b;if(i.isPrimitive(d))return d;if(_.has(d))return _.get(d);if(Array.isArray(d)){const T=new Array(d.length);_.set(d,T);for(let x=0;x<d.length;x++)T[x]=a(d[x],x,g,_,S);return Object.hasOwn(d,"index")&&(T.index=d.index),Object.hasOwn(d,"input")&&(T.input=d.input),T}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const T=new RegExp(d.source,d.flags);return T.lastIndex=d.lastIndex,T}if(d instanceof Map){const T=new Map;_.set(d,T);for(const[x,C]of d)T.set(x,a(C,x,g,_,S));return T}if(d instanceof Set){const T=new Set;_.set(d,T);for(const x of d)T.add(a(x,void 0,g,_,S));return T}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(o.isTypedArray(d)){const T=new(Object.getPrototypeOf(d)).constructor(d.length);_.set(d,T);for(let x=0;x<d.length;x++)T[x]=a(d[x],x,g,_,S);return T}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const T=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return _.set(d,T),u(T,d,g,_,S),T}if(typeof File<"u"&&d instanceof File){const T=new File([d],d.name,{type:d.type});return _.set(d,T),u(T,d,g,_,S),T}if(d instanceof Blob){const T=new Blob([d],{type:d.type});return _.set(d,T),u(T,d,g,_,S),T}if(d instanceof Error){const T=new d.constructor;return _.set(d,T),T.message=d.message,T.name=d.name,T.stack=d.stack,T.cause=d.cause,u(T,d,g,_,S),T}if(typeof d=="object"&&c(d)){const T=Object.create(Object.getPrototypeOf(d));return _.set(d,T),u(T,d,g,_,S),T}return d}function u(d,h,g=d,_,S){const b=[...Object.keys(h),...e.getSymbols(h)];for(let T=0;T<b.length;T++){const x=b[T],C=Object.getOwnPropertyDescriptor(d,x);(C==null||C.writable)&&(d[x]=a(h[x],x,g,_,S))}}function c(d){switch(n.getTag(d)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=s,t.cloneDeepWithImpl=a,t.copyProperties=u})(Jx)),Jx}var A3;function Xwe(){return A3||(A3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=KQ();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(Yx)),Yx}var C3;function Qwe(){return C3||(C3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Kk(),n=Xwe();function r(i){return i=n.cloneDeep(i),o=>e.isMatch(o,i)}t.matches=r})(zx)),zx}var tA={},nA={},rA={},I3;function Zwe(){return I3||(I3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=KQ(),n=jQ();function r(i,o){return e.cloneDeepWith(i,(s,a,u,c)=>{const d=o==null?void 0:o(s,a,u,c);if(d!==void 0)return d;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const h=new i.constructor(i==null?void 0:i.valueOf());return e.copyProperties(h,i),h}case n.argumentsTag:{const h={};return e.copyProperties(h,i),h.length=i.length,h[Symbol.iterator]=i[Symbol.iterator],h}default:return}})}t.cloneDeepWith=r})(rA)),rA}var R3;function ebe(){return R3||(R3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Zwe();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(nA)),nA}var iA={},oA={},P3;function WQ(){return P3||(P3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(oA)),oA}var sA={},N3;function tbe(){return N3||(N3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=GQ();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(sA)),sA}var M3;function nbe(){return M3||(M3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yQ(),n=WQ(),r=tbe(),i=qk();function o(s,a){let u;if(Array.isArray(a)?u=a:typeof a=="string"&&e.isDeepKey(a)&&(s==null?void 0:s[a])==null?u=i.toPath(a):u=[a],u.length===0)return!1;let c=s;for(let d=0;d<u.length;d++){const h=u[d];if((c==null||!Object.hasOwn(c,h))&&!((Array.isArray(c)||r.isArguments(c))&&n.isIndex(h)&&h<c.length))return!1;c=c[h]}return!0}t.has=o})(iA)),iA}var D3;function rbe(){return D3||(D3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Kk(),n=vQ(),r=ebe(),i=Fk(),o=nbe();function s(a,u){switch(typeof a){case"object":{Object.is(a==null?void 0:a.valueOf(),-0)&&(a="-0");break}case"number":{a=n.toKey(a);break}}return u=r.cloneDeep(u),function(c){const d=i.get(c,a);return d===void 0?o.has(c,a):u===void 0?d===void 0:e.isMatch(d,u)}}t.matchesProperty=s})(tA)),tA}var k3;function ibe(){return k3||(k3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=BQ(),n=Kwe(),r=Qwe(),i=rbe();function o(s){if(s==null)return e.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?i.matchesProperty(s[0],s[1]):r.matches(s);case"string":case"symbol":case"number":return n.property(s)}}t.iteratee=o})(Bx)),Bx}var O3;function obe(){return O3||(O3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zwe(),n=BQ(),r=jwe(),i=ibe();function o(s,a=n.identity){return r.isArrayLikeObject(s)?e.uniqBy(Array.from(s),i.iteratee(a)):[]}t.uniqBy=o})(kx)),kx}var aA,L3;function sbe(){return L3||(L3=1,aA=obe().uniqBy),aA}var abe=sbe();const V3=Co(abe);function lbe(t,e,n){return e===!0?V3(t,n):typeof e=="function"?V3(t,e):t}var lA={exports:{}},uA={},cA={exports:{}},fA={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U3;function ube(){if(U3)return fA;U3=1;var t=Mh();function e(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,o=t.useLayoutEffect,s=t.useDebugValue;function a(h,g){var _=g(),S=r({inst:{value:_,getSnapshot:g}}),b=S[0].inst,T=S[1];return o(function(){b.value=_,b.getSnapshot=g,u(b)&&T({inst:b})},[h,_,g]),i(function(){return u(b)&&T({inst:b}),h(function(){u(b)&&T({inst:b})})},[h]),s(_),_}function u(h){var g=h.getSnapshot;h=h.value;try{var _=g();return!n(h,_)}catch{return!0}}function c(h,g){return g()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return fA.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,fA}var q3;function cbe(){return q3||(q3=1,cA.exports=ube()),cA.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F3;function fbe(){if(F3)return uA;F3=1;var t=Mh(),e=cbe();function n(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,o=t.useRef,s=t.useEffect,a=t.useMemo,u=t.useDebugValue;return uA.useSyncExternalStoreWithSelector=function(c,d,h,g,_){var S=o(null);if(S.current===null){var b={hasValue:!1,value:null};S.current=b}else b=S.current;S=a(function(){function x(q){if(!C){if(C=!0,I=q,q=g(q),_!==void 0&&b.hasValue){var P=b.value;if(_(P,q))return N=P}return N=q}if(P=N,r(I,q))return P;var O=g(q);return _!==void 0&&_(P,O)?(I=q,P):(I=q,N=O)}var C=!1,I,N,V=h===void 0?null:h;return[function(){return x(d())},V===null?void 0:function(){return x(V())}]},[d,h,g,_]);var T=i(c,S[0],S[1]);return s(function(){b.hasValue=!0,b.value=T},[T]),u(T),T},uA}var B3;function dbe(){return B3||(B3=1,lA.exports=fbe()),lA.exports}var YQ=dbe();const hbe=Co(YQ);var Wk=D.createContext(null),pbe=t=>t,yr=()=>{var t=D.useContext(Wk);return t?t.store.dispatch:pbe},v0=()=>{},mbe=()=>v0,gbe=(t,e)=>t===e;function tt(t){var e=D.useContext(Wk);return YQ.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:mbe,e?e.store.getState:v0,e?e.store.getState:v0,e?t:v0,gbe)}function ybe(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function vbe(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function _be(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var $3=t=>Array.isArray(t)?t:[t];function wbe(t){const e=Array.isArray(t[0])?t[0]:t;return _be(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function bbe(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var Tbe=class{constructor(t){this.value=t}deref(){return this.value}},Ebe=typeof WeakRef<"u"?WeakRef:Tbe,Sbe=0,z3=1;function N_(){return{s:Sbe,v:void 0,o:null,p:null}}function JQ(t,e={}){let n=N_();const{resultEqualityCheck:r}=e;let i,o=0;function s(){var h;let a=n;const{length:u}=arguments;for(let g=0,_=u;g<_;g++){const S=arguments[g];if(typeof S=="function"||typeof S=="object"&&S!==null){let b=a.o;b===null&&(a.o=b=new WeakMap);const T=b.get(S);T===void 0?(a=N_(),b.set(S,a)):a=T}else{let b=a.p;b===null&&(a.p=b=new Map);const T=b.get(S);T===void 0?(a=N_(),b.set(S,a)):a=T}}const c=a;let d;if(a.s===z3)d=a.v;else if(d=t.apply(null,arguments),o++,r){const g=((h=i==null?void 0:i.deref)==null?void 0:h.call(i))??i;g!=null&&r(g,d)&&(d=g,o!==0&&o--),i=typeof d=="object"&&d!==null||typeof d=="function"?new Ebe(d):d}return c.s=z3,c.v=d,d}return s.clearCache=()=>{n=N_(),s.resetResultsCount()},s.resultsCount=()=>o,s.resetResultsCount=()=>{o=0},s}function xbe(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let o=0,s=0,a,u={},c=i.pop();typeof c=="object"&&(u=c,c=i.pop()),ybe(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const d={...n,...u},{memoize:h,memoizeOptions:g=[],argsMemoize:_=JQ,argsMemoizeOptions:S=[]}=d,b=$3(g),T=$3(S),x=wbe(i),C=h(function(){return o++,c.apply(null,arguments)},...b),I=_(function(){s++;const V=bbe(x,arguments);return a=C.apply(null,V),a},...T);return Object.assign(I,{resultFunc:c,memoizedResultFunc:C,dependencies:x,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>a,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:h,argsMemoize:_})};return Object.assign(r,{withTypes:()=>r}),r}var ve=xbe(JQ),Abe=Object.assign((t,e=ve)=>{vbe(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(o=>t[o]);return e(r,(...o)=>o.reduce((s,a,u)=>(s[n[u]]=a,s),{}))},{withTypes:()=>Abe}),dA={},hA={},pA={},H3;function Cbe(){return H3||(H3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,o)=>{if(r!==i){const s=e(r),a=e(i);if(s===a&&s===0){if(r<i)return o==="desc"?1:-1;if(r>i)return o==="desc"?-1:1}return o==="desc"?a-s:s-a}return 0};t.compareValues=n})(pA)),pA}var mA={},gA={},G3;function XQ(){return G3||(G3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(gA)),gA}var j3;function Ibe(){return j3||(j3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=XQ(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(o,s){return Array.isArray(o)?!1:typeof o=="number"||typeof o=="boolean"||o==null||e.isSymbol(o)?!0:typeof o=="string"&&(r.test(o)||!n.test(o))||s!=null&&Object.hasOwn(s,o)}t.isKey=i})(mA)),mA}var K3;function Rbe(){return K3||(K3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Cbe(),n=Ibe(),r=qk();function i(o,s,a,u){if(o==null)return[];a=u?void 0:a,Array.isArray(o)||(o=Object.values(o)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(a)||(a=a==null?[]:[a]),a=a.map(_=>String(_));const c=(_,S)=>{let b=_;for(let T=0;T<S.length&&b!=null;++T)b=b[S[T]];return b},d=(_,S)=>S==null||_==null?S:typeof _=="object"&&"key"in _?Object.hasOwn(S,_.key)?S[_.key]:c(S,_.path):typeof _=="function"?_(S):Array.isArray(_)?c(S,_):typeof S=="object"?S[_]:S,h=s.map(_=>(Array.isArray(_)&&_.length===1&&(_=_[0]),_==null||typeof _=="function"||Array.isArray(_)||n.isKey(_)?_:{key:_,path:r.toPath(_)}));return o.map(_=>({original:_,criteria:h.map(S=>d(S,_))})).slice().sort((_,S)=>{for(let b=0;b<h.length;b++){const T=e.compareValues(_.criteria[b],S.criteria[b],a[b]);if(T!==0)return T}return 0}).map(_=>_.original)}t.orderBy=i})(hA)),hA}var yA={},W3;function Pbe(){return W3||(W3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],o=Math.floor(r),s=(a,u)=>{for(let c=0;c<a.length;c++){const d=a[c];Array.isArray(d)&&u<o?s(d,u+1):i.push(d)}};return s(n,0),i}t.flatten=e})(yA)),yA}var vA={},Y3;function QQ(){return Y3||(Y3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=WQ(),n=jk(),r=$Q(),i=HQ();function o(s,a,u){return r.isObject(u)&&(typeof a=="number"&&n.isArrayLike(u)&&e.isIndex(a)&&a<u.length||typeof a=="string"&&a in u)?i.eq(u[a],s):!1}t.isIterateeCall=o})(vA)),vA}var J3;function Nbe(){return J3||(J3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Rbe(),n=Pbe(),r=QQ();function i(o,...s){const a=s.length;return a>1&&r.isIterateeCall(o,s[0],s[1])?s=[]:a>2&&r.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),e.orderBy(o,n.flatten(s),["asc"])}t.sortBy=i})(dA)),dA}var _A,X3;function Mbe(){return X3||(X3=1,_A=Nbe().sortBy),_A}var Dbe=Mbe();const Wb=Co(Dbe);var ZQ=t=>t.legend.settings,kbe=t=>t.legend.size,Obe=t=>t.legend.payload;ve([Obe,ZQ],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?Wb(r,n):r});var M_=1;function Lbe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=D.useState({height:0,left:0,top:0,width:0}),r=D.useCallback(i=>{if(i!=null){var o=i.getBoundingClientRect(),s={height:o.height,left:o.left,top:o.top,width:o.width};(Math.abs(s.height-e.height)>M_||Math.abs(s.left-e.left)>M_||Math.abs(s.top-e.top)>M_||Math.abs(s.width-e.width)>M_)&&n({height:s.height,left:s.left,top:s.top,width:s.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function Ar(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Vbe=typeof Symbol=="function"&&Symbol.observable||"@@observable",Q3=Vbe,wA=()=>Math.random().toString(36).substring(7).split("").join("."),Ube={INIT:`@@redux/INIT${wA()}`,REPLACE:`@@redux/REPLACE${wA()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${wA()}`},aw=Ube;function Yk(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function eZ(t,e,n){if(typeof t!="function")throw new Error(Ar(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ar(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ar(1));return n(eZ)(t,e)}let r=t,i=e,o=new Map,s=o,a=0,u=!1;function c(){s===o&&(s=new Map,o.forEach((T,x)=>{s.set(x,T)}))}function d(){if(u)throw new Error(Ar(3));return i}function h(T){if(typeof T!="function")throw new Error(Ar(4));if(u)throw new Error(Ar(5));let x=!0;c();const C=a++;return s.set(C,T),function(){if(x){if(u)throw new Error(Ar(6));x=!1,c(),s.delete(C),o=null}}}function g(T){if(!Yk(T))throw new Error(Ar(7));if(typeof T.type>"u")throw new Error(Ar(8));if(typeof T.type!="string")throw new Error(Ar(17));if(u)throw new Error(Ar(9));try{u=!0,i=r(i,T)}finally{u=!1}return(o=s).forEach(C=>{C()}),T}function _(T){if(typeof T!="function")throw new Error(Ar(10));r=T,g({type:aw.REPLACE})}function S(){const T=h;return{subscribe(x){if(typeof x!="object"||x===null)throw new Error(Ar(11));function C(){const N=x;N.next&&N.next(d())}return C(),{unsubscribe:T(C)}},[Q3](){return this}}}return g({type:aw.INIT}),{dispatch:g,subscribe:h,getState:d,replaceReducer:_,[Q3]:S}}function qbe(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:aw.INIT})>"u")throw new Error(Ar(12));if(typeof n(void 0,{type:aw.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ar(13))})}function tZ(t){const e=Object.keys(t),n={};for(let o=0;o<e.length;o++){const s=e[o];typeof t[s]=="function"&&(n[s]=t[s])}const r=Object.keys(n);let i;try{qbe(n)}catch(o){i=o}return function(s={},a){if(i)throw i;let u=!1;const c={};for(let d=0;d<r.length;d++){const h=r[d],g=n[h],_=s[h],S=g(_,a);if(typeof S>"u")throw a&&a.type,new Error(Ar(14));c[h]=S,u=u||S!==_}return u=u||r.length!==Object.keys(s).length,u?c:s}}function lw(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function Fbe(...t){return e=>(n,r)=>{const i=e(n,r);let o=()=>{throw new Error(Ar(15))};const s={getState:i.getState,dispatch:(u,...c)=>o(u,...c)},a=t.map(u=>u(s));return o=lw(...a)(i.dispatch),{...i,dispatch:o}}}function nZ(t){return Yk(t)&&"type"in t&&typeof t.type=="string"}var rZ=Symbol.for("immer-nothing"),Z3=Symbol.for("immer-draftable"),$i=Symbol.for("immer-state");function zo(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var wh=Object.getPrototypeOf;function Wc(t){return!!t&&!!t[$i]}function Fa(t){var e;return t?iZ(t)||Array.isArray(t)||!!t[Z3]||!!((e=t.constructor)!=null&&e[Z3])||Dy(t)||Jb(t):!1}var Bbe=Object.prototype.constructor.toString();function iZ(t){if(!t||typeof t!="object")return!1;const e=wh(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Bbe}function uw(t,e){Yb(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function Yb(t){const e=t[$i];return e?e.type_:Array.isArray(t)?1:Dy(t)?2:Jb(t)?3:0}function NM(t,e){return Yb(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function oZ(t,e,n){const r=Yb(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function $be(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Dy(t){return t instanceof Map}function Jb(t){return t instanceof Set}function fc(t){return t.copy_||t.base_}function MM(t,e){if(Dy(t))return new Map(t);if(Jb(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=iZ(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[$i];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const s=i[o],a=r[s];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[s]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[s]})}return Object.create(wh(t),r)}else{const r=wh(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function Jk(t,e=!1){return Xb(t)||Wc(t)||!Fa(t)||(Yb(t)>1&&Object.defineProperties(t,{set:{value:D_},add:{value:D_},clear:{value:D_},delete:{value:D_}}),Object.freeze(t),e&&Object.values(t).forEach(n=>Jk(n,!0))),t}function D_(){zo(2)}function Xb(t){return Object.isFrozen(t)}var zbe={};function Yc(t){const e=zbe[t];return e||zo(0,t),e}var Wg;function sZ(){return Wg}function Hbe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function e6(t,e){e&&(Yc("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function DM(t){kM(t),t.drafts_.forEach(Gbe),t.drafts_=null}function kM(t){t===Wg&&(Wg=t.parent_)}function t6(t){return Wg=Hbe(Wg,t)}function Gbe(t){const e=t[$i];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function n6(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[$i].modified_&&(DM(e),zo(4)),Fa(t)&&(t=cw(e,t),e.parent_||fw(e,t)),e.patches_&&Yc("Patches").generateReplacementPatches_(n[$i].base_,t,e.patches_,e.inversePatches_)):t=cw(e,n,[]),DM(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==rZ?t:void 0}function cw(t,e,n){if(Xb(e))return e;const r=e[$i];if(!r)return uw(e,(i,o)=>r6(t,r,e,i,o,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return fw(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,s=!1;r.type_===3&&(o=new Set(i),i.clear(),s=!0),uw(o,(a,u)=>r6(t,r,i,a,u,n,s)),fw(t,i,!1),n&&t.patches_&&Yc("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function r6(t,e,n,r,i,o,s){if(Wc(i)){const a=o&&e&&e.type_!==3&&!NM(e.assigned_,r)?o.concat(r):void 0,u=cw(t,i,a);if(oZ(n,r,u),Wc(u))t.canAutoFreeze_=!1;else return}else s&&n.add(i);if(Fa(i)&&!Xb(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;cw(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(Dy(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&fw(t,i)}}function fw(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&Jk(e,n)}function jbe(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:sZ(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=Xk;n&&(i=[r],o=Yg);const{revoke:s,proxy:a}=Proxy.revocable(i,o);return r.draft_=a,r.revoke_=s,a}var Xk={get(t,e){if(e===$i)return t;const n=fc(t);if(!NM(n,e))return Kbe(t,n,e);const r=n[e];return t.finalized_||!Fa(r)?r:r===bA(t.base_,e)?(TA(t),t.copy_[e]=LM(r,t)):r},has(t,e){return e in fc(t)},ownKeys(t){return Reflect.ownKeys(fc(t))},set(t,e,n){const r=aZ(fc(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=bA(fc(t),e),o=i==null?void 0:i[$i];if(o&&o.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if($be(n,i)&&(n!==void 0||NM(t.base_,e)))return!0;TA(t),OM(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return bA(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,TA(t),OM(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=fc(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){zo(11)},getPrototypeOf(t){return wh(t.base_)},setPrototypeOf(){zo(12)}},Yg={};uw(Xk,(t,e)=>{Yg[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Yg.deleteProperty=function(t,e){return Yg.set.call(this,t,e,void 0)};Yg.set=function(t,e,n){return Xk.set.call(this,t[0],e,n,t[0])};function bA(t,e){const n=t[$i];return(n?fc(n):t)[e]}function Kbe(t,e,n){var i;const r=aZ(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function aZ(t,e){if(!(e in t))return;let n=wh(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=wh(n)}}function OM(t){t.modified_||(t.modified_=!0,t.parent_&&OM(t.parent_))}function TA(t){t.copy_||(t.copy_=MM(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Wbe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const o=n;n=e;const s=this;return function(u=o,...c){return s.produce(u,d=>n.call(this,d,...c))}}typeof n!="function"&&zo(6),r!==void 0&&typeof r!="function"&&zo(7);let i;if(Fa(e)){const o=t6(this),s=LM(e,void 0);let a=!0;try{i=n(s),a=!1}finally{a?DM(o):kM(o)}return e6(o,r),n6(i,o)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===rZ&&(i=void 0),this.autoFreeze_&&Jk(i,!0),r){const o=[],s=[];Yc("Patches").generateReplacementPatches_(e,i,o,s),r(o,s)}return i}else zo(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(s,...a)=>this.produceWithPatches(s,u=>e(u,...a));let r,i;return[this.produce(e,n,(s,a)=>{r=s,i=a}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Fa(t)||zo(8),Wc(t)&&(t=Pa(t));const e=t6(this),n=LM(t,void 0);return n[$i].isManual_=!0,kM(e),n}finishDraft(t,e){const n=t&&t[$i];(!n||!n.isManual_)&&zo(9);const{scope_:r}=n;return e6(r,e),n6(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=Yc("Patches").applyPatches_;return Wc(t)?r(t,e):this.produce(t,i=>r(i,e))}};function LM(t,e){const n=Dy(t)?Yc("MapSet").proxyMap_(t,e):Jb(t)?Yc("MapSet").proxySet_(t,e):jbe(t,e);return(e?e.scope_:sZ()).drafts_.push(n),n}function Pa(t){return Wc(t)||zo(10,t),lZ(t)}function lZ(t){if(!Fa(t)||Xb(t))return t;const e=t[$i];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=MM(t,e.scope_.immer_.useStrictShallowCopy_)}else n=MM(t,!0);return uw(n,(r,i)=>{oZ(n,r,lZ(i))}),e&&(e.finalized_=!1),n}var Ybe=new Wbe,uZ=Ybe.produce;function cZ(t){return({dispatch:n,getState:r})=>i=>o=>typeof o=="function"?o(n,r,t):i(o)}var Jbe=cZ(),Xbe=cZ,Qbe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?lw:lw.apply(null,arguments)};function xo(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(Fi(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>nZ(r)&&r.type===t,n}var fZ=class Ym extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Ym.prototype)}static get[Symbol.species](){return Ym}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Ym(...e[0].concat(this)):new Ym(...e.concat(this))}};function i6(t){return Fa(t)?uZ(t,()=>{}):t}function k_(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function Zbe(t){return typeof t=="boolean"}var eTe=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=e??{};let s=new fZ;return n&&(Zbe(n)?s.push(Jbe):s.push(Xbe(n.extraArgument))),s},tTe="RTK_autoBatch",o6=t=>e=>{setTimeout(e,t)},nTe=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,o=!1,s=!1;const a=new Set,u=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:o6(10):t.type==="callback"?t.queueNotification:o6(t.timeout),c=()=>{s=!1,o&&(o=!1,a.forEach(d=>d()))};return Object.assign({},r,{subscribe(d){const h=()=>i&&d(),g=r.subscribe(h);return a.add(d),()=>{g(),a.delete(d)}},dispatch(d){var h;try{return i=!((h=d==null?void 0:d.meta)!=null&&h[tTe]),o=!i,o&&(s||(s=!0,u(c))),r.dispatch(d)}finally{i=!0}}})},rTe=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new fZ(t);return r&&i.push(nTe(typeof r=="object"?r:void 0)),i};function iTe(t){const e=eTe(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:o=void 0,enhancers:s=void 0}=t||{};let a;if(typeof n=="function")a=n;else if(Yk(n))a=tZ(n);else throw new Error(Fi(1));let u;typeof r=="function"?u=r(e):u=e();let c=lw;i&&(c=Qbe({trace:!1,...typeof i=="object"&&i}));const d=Fbe(...u),h=rTe(d);let g=typeof s=="function"?s(h):h();const _=c(...g);return eZ(a,o,_)}function dZ(t){const e={},n=[];let r;const i={addCase(o,s){const a=typeof o=="string"?o:o.type;if(!a)throw new Error(Fi(28));if(a in e)throw new Error(Fi(29));return e[a]=s,i},addAsyncThunk(o,s){return s.pending&&(e[o.pending.type]=s.pending),s.rejected&&(e[o.rejected.type]=s.rejected),s.fulfilled&&(e[o.fulfilled.type]=s.fulfilled),s.settled&&n.push({matcher:o.settled,reducer:s.settled}),i},addMatcher(o,s){return n.push({matcher:o,reducer:s}),i},addDefaultCase(o){return r=o,i}};return t(i),[e,n,r]}function oTe(t){return typeof t=="function"}function sTe(t,e){let[n,r,i]=dZ(e),o;if(oTe(t))o=()=>i6(t());else{const a=i6(t);o=()=>a}function s(a=o(),u){let c=[n[u.type],...r.filter(({matcher:d})=>d(u)).map(({reducer:d})=>d)];return c.filter(d=>!!d).length===0&&(c=[i]),c.reduce((d,h)=>{if(h)if(Wc(d)){const _=h(d,u);return _===void 0?d:_}else{if(Fa(d))return uZ(d,g=>h(g,u));{const g=h(d,u);if(g===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return d},a)}return s.getInitialState=o,s}var aTe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",lTe=(t=21)=>{let e="",n=t;for(;n--;)e+=aTe[Math.random()*64|0];return e},uTe=Symbol.for("rtk-slice-createasyncthunk");function cTe(t,e){return`${t}/${e}`}function fTe({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[uTe];return function(i){const{name:o,reducerPath:s=o}=i;if(!o)throw new Error(Fi(11));const a=(typeof i.reducers=="function"?i.reducers(hTe()):i.reducers)||{},u=Object.keys(a),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(N,V){const q=typeof N=="string"?N:N.type;if(!q)throw new Error(Fi(12));if(q in c.sliceCaseReducersByType)throw new Error(Fi(13));return c.sliceCaseReducersByType[q]=V,d},addMatcher(N,V){return c.sliceMatchers.push({matcher:N,reducer:V}),d},exposeAction(N,V){return c.actionCreators[N]=V,d},exposeCaseReducer(N,V){return c.sliceCaseReducersByName[N]=V,d}};u.forEach(N=>{const V=a[N],q={reducerName:N,type:cTe(o,N),createNotation:typeof i.reducers=="function"};mTe(V)?yTe(q,V,d,e):pTe(q,V,d)});function h(){const[N={},V=[],q=void 0]=typeof i.extraReducers=="function"?dZ(i.extraReducers):[i.extraReducers],P={...N,...c.sliceCaseReducersByType};return sTe(i.initialState,O=>{for(let R in P)O.addCase(R,P[R]);for(let R of c.sliceMatchers)O.addMatcher(R.matcher,R.reducer);for(let R of V)O.addMatcher(R.matcher,R.reducer);q&&O.addDefaultCase(q)})}const g=N=>N,_=new Map,S=new WeakMap;let b;function T(N,V){return b||(b=h()),b(N,V)}function x(){return b||(b=h()),b.getInitialState()}function C(N,V=!1){function q(O){let R=O[N];return typeof R>"u"&&V&&(R=k_(S,q,x)),R}function P(O=g){const R=k_(_,V,()=>new WeakMap);return k_(R,O,()=>{const U={};for(const[L,F]of Object.entries(i.selectors??{}))U[L]=dTe(F,O,()=>k_(S,O,x),V);return U})}return{reducerPath:N,getSelectors:P,get selectors(){return P(q)},selectSlice:q}}const I={name:o,reducer:T,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:x,...C(s),injectInto(N,{reducerPath:V,...q}={}){const P=V??s;return N.inject({reducerPath:P,reducer:T},q),{...I,...C(P,!0)}}};return I}}function dTe(t,e,n,r){function i(o,...s){let a=e(o);return typeof a>"u"&&r&&(a=n()),t(a,...s)}return i.unwrapped=t,i}var Gi=fTe();function hTe(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function pTe({type:t,reducerName:e,createNotation:n},r,i){let o,s;if("reducer"in r){if(n&&!gTe(r))throw new Error(Fi(17));o=r.reducer,s=r.prepare}else o=r;i.addCase(t,o).exposeCaseReducer(e,o).exposeAction(e,s?xo(t,s):xo(t))}function mTe(t){return t._reducerDefinitionType==="asyncThunk"}function gTe(t){return t._reducerDefinitionType==="reducerWithPrepare"}function yTe({type:t,reducerName:e},n,r,i){if(!i)throw new Error(Fi(18));const{payloadCreator:o,fulfilled:s,pending:a,rejected:u,settled:c,options:d}=n,h=i(t,o,d);r.exposeAction(e,h),s&&r.addCase(h.fulfilled,s),a&&r.addCase(h.pending,a),u&&r.addCase(h.rejected,u),c&&r.addMatcher(h.settled,c),r.exposeCaseReducer(e,{fulfilled:s||O_,pending:a||O_,rejected:u||O_,settled:c||O_})}function O_(){}var vTe="task",hZ="listener",pZ="completed",Qk="cancelled",_Te=`task-${Qk}`,wTe=`task-${pZ}`,VM=`${hZ}-${Qk}`,bTe=`${hZ}-${pZ}`,Qb=class{constructor(t){GS(this,"name","TaskAbortError");GS(this,"message");this.code=t,this.message=`${vTe} ${Qk} (reason: ${t})`}},Zk=(t,e)=>{if(typeof t!="function")throw new TypeError(Fi(32))},dw=()=>{},mZ=(t,e=dw)=>(t.catch(e),t),gZ=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Nc=(t,e)=>{const n=t.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},Mc=t=>{if(t.aborted){const{reason:e}=t;throw new Qb(e)}};function yZ(t,e){let n=dw;return new Promise((r,i)=>{const o=()=>i(new Qb(t.reason));if(t.aborted){o();return}n=gZ(t,o),e.finally(()=>n()).then(r,i)}).finally(()=>{n=dw})}var TTe=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof Qb?"cancelled":"rejected",error:n}}finally{e==null||e()}},hw=t=>e=>mZ(yZ(t,e).then(n=>(Mc(t),n))),vZ=t=>{const e=hw(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:Bd}=Object,s6={},Zb="listenerMiddleware",ETe=(t,e)=>{const n=r=>gZ(t,()=>Nc(r,t.reason));return(r,i)=>{Zk(r);const o=new AbortController;n(o);const s=TTe(async()=>{Mc(t),Mc(o.signal);const a=await r({pause:hw(o.signal),delay:vZ(o.signal),signal:o.signal});return Mc(o.signal),a},()=>Nc(o,wTe));return i!=null&&i.autoJoin&&e.push(s.catch(dw)),{result:hw(t)(s),cancel(){Nc(o,_Te)}}}},STe=(t,e)=>{const n=async(r,i)=>{Mc(e);let o=()=>{};const a=[new Promise((u,c)=>{let d=t({predicate:r,effect:(h,g)=>{g.unsubscribe(),u([h,g.getState(),g.getOriginalState()])}});o=()=>{d(),c()}})];i!=null&&a.push(new Promise(u=>setTimeout(u,i,null)));try{const u=await yZ(e,Promise.race(a));return Mc(e),u}finally{o()}};return(r,i)=>mZ(n(r,i))},_Z=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:o}=t;if(e)i=xo(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Fi(21));return Zk(o),{predicate:i,type:e,effect:o}},wZ=Bd(t=>{const{type:e,predicate:n,effect:r}=_Z(t);return{id:lTe(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Fi(22))}}},{withTypes:()=>wZ}),a6=(t,e)=>{const{type:n,effect:r,predicate:i}=_Z(e);return Array.from(t.values()).find(o=>(typeof n=="string"?o.type===n:o.predicate===i)&&o.effect===r)},UM=t=>{t.pending.forEach(e=>{Nc(e,VM)})},xTe=t=>()=>{t.forEach(UM),t.clear()},l6=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},bZ=Bd(xo(`${Zb}/add`),{withTypes:()=>bZ}),ATe=xo(`${Zb}/removeAll`),TZ=Bd(xo(`${Zb}/remove`),{withTypes:()=>TZ}),CTe=(...t)=>{console.error(`${Zb}/error`,...t)},ky=(t={})=>{const e=new Map,{extra:n,onError:r=CTe}=t;Zk(r);const i=d=>(d.unsubscribe=()=>e.delete(d.id),e.set(d.id,d),h=>{d.unsubscribe(),h!=null&&h.cancelActive&&UM(d)}),o=d=>{const h=a6(e,d)??wZ(d);return i(h)};Bd(o,{withTypes:()=>o});const s=d=>{const h=a6(e,d);return h&&(h.unsubscribe(),d.cancelActive&&UM(h)),!!h};Bd(s,{withTypes:()=>s});const a=async(d,h,g,_)=>{const S=new AbortController,b=STe(o,S.signal),T=[];try{d.pending.add(S),await Promise.resolve(d.effect(h,Bd({},g,{getOriginalState:_,condition:(x,C)=>b(x,C).then(Boolean),take:b,delay:vZ(S.signal),pause:hw(S.signal),extra:n,signal:S.signal,fork:ETe(S.signal,T),unsubscribe:d.unsubscribe,subscribe:()=>{e.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((x,C,I)=>{x!==S&&(Nc(x,VM),I.delete(x))})},cancel:()=>{Nc(S,VM),d.pending.delete(S)},throwIfCancelled:()=>{Mc(S.signal)}})))}catch(x){x instanceof Qb||l6(r,x,{raisedBy:"effect"})}finally{await Promise.all(T),Nc(S,bTe),d.pending.delete(S)}},u=xTe(e);return{middleware:d=>h=>g=>{if(!nZ(g))return h(g);if(bZ.match(g))return o(g.payload);if(ATe.match(g)){u();return}if(TZ.match(g))return s(g.payload);let _=d.getState();const S=()=>{if(_===s6)throw new Error(Fi(23));return _};let b;try{if(b=h(g),e.size>0){const T=d.getState(),x=Array.from(e.values());for(const C of x){let I=!1;try{I=C.predicate(g,T,_)}catch(N){I=!1,l6(r,N,{raisedBy:"predicate"})}I&&a(C,g,d,S)}}}finally{_=s6}return b},startListening:o,stopListening:s,clearListeners:u}};function Fi(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var ITe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},EZ=Gi({name:"chartLayout",initialState:ITe,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,o;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(o=e.payload.left)!==null&&o!==void 0?o:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:RTe,setLayout:PTe,setChartSize:NTe,setScale:MTe}=EZ.actions,DTe=EZ.reducer;function u6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function c6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?u6(Object(n),!0).forEach(function(r){kTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kTe(t,e,n){return(e=OTe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OTe(t){var e=LTe(t,"string");return typeof e=="symbol"?e:e+""}function LTe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pw=Math.PI/180,VTe=t=>t*180/Math.PI,Pr=(t,e,n,r)=>({x:t+Math.cos(-pw*r)*n,y:e+Math.sin(-pw*r)*n}),UTe=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},qTe=(t,e)=>{var{x:n,y:r}=t,{x:i,y:o}=e;return Math.sqrt((n-i)**2+(r-o)**2)},FTe=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:o}=e,s=qTe({x:n,y:r},{x:i,y:o});if(s<=0)return{radius:s,angle:0};var a=(n-i)/s,u=Math.acos(a);return r>o&&(u=2*Math.PI-u),{radius:s,angle:VTe(u),angleInRadian:u}},BTe=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),o=Math.min(r,i);return{startAngle:e-o*360,endAngle:n-o*360}},$Te=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),o=Math.floor(r/360),s=Math.min(i,o);return t+s*360},zTe=(t,e)=>{var{x:n,y:r}=t,{radius:i,angle:o}=FTe({x:n,y:r},e),{innerRadius:s,outerRadius:a}=e;if(i<s||i>a||i===0)return null;var{startAngle:u,endAngle:c}=BTe(e),d=o,h;if(u<=c){for(;d>c;)d-=360;for(;d<u;)d+=360;h=d>=u&&d<=c}else{for(;d>u;)d-=360;for(;d<c;)d+=360;h=d>=c&&d<=u}return h?c6(c6({},e),{},{radius:i,angle:$Te(d,e)}):null};function SZ(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function f6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function po(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?f6(Object(n),!0).forEach(function(r){HTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function HTe(t,e,n){return(e=GTe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GTe(t){var e=jTe(t,"string");return typeof e=="symbol"?e:e+""}function jTe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ri(t,e,n){return mr(t)||mr(e)?n:Gs(e)?vh(t,e,n):typeof e=="function"?e(t):n}var KTe=(t,e,n,r,i)=>{var o,s=-1,a=(o=e==null?void 0:e.length)!==null&&o!==void 0?o:0;if(a<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var u=0;u<a;u++){var c=u>0?n[u-1].coordinate:n[a-1].coordinate,d=n[u].coordinate,h=u>=a-1?n[0].coordinate:n[u+1].coordinate,g=void 0;if(Vi(d-c)!==Vi(h-d)){var _=[];if(Vi(h-d)===Vi(i[1]-i[0])){g=h;var S=d+i[1]-i[0];_[0]=Math.min(S,(S+c)/2),_[1]=Math.max(S,(S+c)/2)}else{g=c;var b=h+i[1]-i[0];_[0]=Math.min(d,(b+d)/2),_[1]=Math.max(d,(b+d)/2)}var T=[Math.min(d,(g+d)/2),Math.max(d,(g+d)/2)];if(t>T[0]&&t<=T[1]||t>=_[0]&&t<=_[1]){({index:s}=n[u]);break}}else{var x=Math.min(c,h),C=Math.max(c,h);if(t>(x+d)/2&&t<=(C+d)/2){({index:s}=n[u]);break}}}else if(e){for(var I=0;I<a;I++)if(I===0&&t<=(e[I].coordinate+e[I+1].coordinate)/2||I>0&&I<a-1&&t>(e[I].coordinate+e[I-1].coordinate)/2&&t<=(e[I].coordinate+e[I+1].coordinate)/2||I===a-1&&t>(e[I].coordinate+e[I-1].coordinate)/2){({index:s}=e[I]);break}}return s},WTe=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:o,verticalAlign:s,layout:a}=e;if((a==="vertical"||a==="horizontal"&&s==="middle")&&o!=="center"&&ot(t[o]))return po(po({},t),{},{[o]:t[o]+(r||0)});if((a==="horizontal"||a==="vertical"&&o==="center")&&s!=="middle"&&ot(t[s]))return po(po({},t),{},{[s]:t[s]+(i||0)})}return t},cf=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",d6=1e-4,YTe=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),i=Math.min(r[0],r[1])-d6,o=Math.max(r[0],r[1])+d6,s=t(e[0]),a=t(e[n-1]);(s<i||s>o||a<i||a>o)&&t.domain([e[0],e[n-1]])}},JTe=(t,e)=>{if(!e||e.length!==2||!ot(e[0])||!ot(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!ot(t[0])||t[0]<n)&&(i[0]=n),(!ot(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},XTe=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,o=0,s=0;s<e;++s){var a=So(t[s][n][1])?t[s][n][0]:t[s][n][1];a>=0?(t[s][n][0]=i,t[s][n][1]=i+a,i=t[s][n][1]):(t[s][n][0]=o,t[s][n][1]=o+a,o=t[s][n][1])}},QTe=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,o=0;o<e;++o){var s=So(t[o][n][1])?t[o][n][0]:t[o][n][1];s>=0?(t[o][n][0]=i,t[o][n][1]=i+s,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},ZTe={sign:XTe,expand:Pwe,none:_h,silhouette:Nwe,wiggle:Mwe,positive:QTe},eEe=(t,e,n)=>{var r=ZTe[n],i=Rwe().keys(e).value((o,s)=>+ri(o,s,0)).order(RM).offset(r);return i(t)};function tEe(t){return t==null?void 0:String(t)}var h6=t=>{var{axis:e,ticks:n,offset:r,bandSize:i,entry:o,index:s}=t;if(e.type==="category")return n[s]?n[s].coordinate+r:null;var a=ri(o,e.dataKey,e.scale.domain()[s]);return mr(a)?null:e.scale(a)-i/2+r},nEe=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},rEe=t=>{var e=t.flat(2).filter(ot);return[Math.min(...e),Math.max(...e)]},iEe=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],oEe=(t,e,n)=>{if(t!=null)return iEe(Object.keys(t).reduce((r,i)=>{var o=t[i],{stackedData:s}=o,a=s.reduce((u,c)=>{var d=SZ(c,e,n),h=rEe(d);return[Math.min(u[0],h[0]),Math.max(u[1],h[1])]},[1/0,-1/0]);return[Math.min(a[0],r[0]),Math.max(a[1],r[1])]},[1/0,-1/0]))},p6=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,m6=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,eO=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=Wb(e,d=>d.coordinate),o=1/0,s=1,a=i.length;s<a;s++){var u=i[s],c=i[s-1];o=Math.min((u.coordinate||0)-(c.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0};function g6(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:o}=t;return po(po({},e),{},{dataKey:n,payload:r,value:i,name:o})}function xZ(t,e){if(t)return String(t);if(typeof e=="string")return e}function sEe(t,e,n,r,i){if(n==="horizontal"||n==="vertical"){var o=t>=i.left&&t<=i.left+i.width&&e>=i.top&&e<=i.top+i.height;return o?{x:t,y:e}:null}return r?zTe({x:t,y:e},r):null}var aEe=(t,e,n,r)=>{var i=e.find(c=>c&&c.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.y};if(t==="vertical")return{x:r.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,{radius:s}=r;return po(po(po({},r),Pr(r.cx,r.cy,s,o)),{},{angle:o,radius:s})}var a=i.coordinate,{angle:u}=r;return po(po(po({},r),Pr(r.cx,r.cy,a,u)),{},{angle:u,radius:a})}return{x:0,y:0}},lEe=(t,e)=>e==="horizontal"?t.x:e==="vertical"?t.y:e==="centric"?t.angle:t.radius,el=t=>t.layout.width,tl=t=>t.layout.height,uEe=t=>t.layout.scale,AZ=t=>t.layout.margin,eT=ve(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),tT=ve(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),cEe="data-recharts-item-index",fEe="data-recharts-item-data-key",Oy=60;function y6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function L_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y6(Object(n),!0).forEach(function(r){dEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dEe(t,e,n){return(e=hEe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hEe(t){var e=pEe(t,"string");return typeof e=="symbol"?e:e+""}function pEe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mEe=t=>t.brush.height;function gEe(t){var e=tT(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Oy;return n+i}return n},0)}function yEe(t){var e=tT(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Oy;return n+i}return n},0)}function vEe(t){var e=eT(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function _Ee(t){var e=eT(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var vr=ve([el,tl,AZ,mEe,gEe,yEe,vEe,_Ee,ZQ,kbe],(t,e,n,r,i,o,s,a,u,c)=>{var d={left:(n.left||0)+i,right:(n.right||0)+o},h={top:(n.top||0)+s,bottom:(n.bottom||0)+a},g=L_(L_({},h),d),_=g.bottom;g.bottom+=r,g=WTe(g,u,c);var S=t-g.left-g.right,b=e-g.top-g.bottom;return L_(L_({brushBottom:_},g),{},{width:Math.max(S,0),height:Math.max(b,0)})}),wEe=ve(vr,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),tO=ve(el,tl,(t,e)=>({x:0,y:0,width:t,height:e})),bEe=D.createContext(null),ns=()=>D.useContext(bEe)!=null,nT=t=>t.brush,rT=ve([nT,vr,AZ],(t,e,n)=>({height:t.height,x:ot(t.x)?t.x:e.left,y:ot(t.y)?t.y:e.top+e.height+e.brushBottom-((n==null?void 0:n.bottom)||0),width:ot(t.width)?t.width:e.width})),nO=()=>{var t,e=ns(),n=tt(wEe),r=tt(rT),i=(t=tt(nT))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},TEe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},EEe=()=>{var t;return(t=tt(vr))!==null&&t!==void 0?t:TEe},SEe=()=>tt(el),xEe=()=>tt(tl),qt=t=>t.layout.layoutType,rO=()=>tt(qt),AEe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},CZ=Gi({name:"legend",initialState:AEe,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload(t,e){t.payload.push(e.payload)},removeLegendPayload(t,e){var n=Pa(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)}}}),{setLegendSize:V7e,setLegendSettings:U7e,addLegendPayload:CEe,removeLegendPayload:IEe}=CZ.actions,REe=CZ.reducer;function qM(){return qM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qM.apply(null,arguments)}function v6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function EA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?v6(Object(n),!0).forEach(function(r){PEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function PEe(t,e,n){return(e=NEe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NEe(t){var e=MEe(t,"string");return typeof e=="symbol"?e:e+""}function MEe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function DEe(t){return Array.isArray(t)&&Gs(t[0])&&Gs(t[1])?t.join(" ~ "):t}var kEe=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:o,formatter:s,itemSorter:a,wrapperClassName:u,labelClassName:c,label:d,labelFormatter:h,accessibilityLayer:g=!1}=t,_=()=>{if(o&&o.length){var V={padding:0,margin:0},q=(a?Wb(o,a):o).map((P,O)=>{if(P.type==="none")return null;var R=P.formatter||s||DEe,{value:U,name:L}=P,F=U,$=L;if(R){var H=R(U,L,P,O,o);if(Array.isArray(H))[F,$]=H;else if(H!=null)F=H;else return null}var Y=EA({display:"block",paddingTop:4,paddingBottom:4,color:P.color||"#000"},r);return D.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(O),style:Y},Gs($)?D.createElement("span",{className:"recharts-tooltip-item-name"},$):null,Gs($)?D.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,D.createElement("span",{className:"recharts-tooltip-item-value"},F),D.createElement("span",{className:"recharts-tooltip-item-unit"},P.unit||""))});return D.createElement("ul",{className:"recharts-tooltip-item-list",style:V},q)}return null},S=EA({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),b=EA({margin:0},i),T=!mr(d),x=T?d:"",C=nn("recharts-default-tooltip",u),I=nn("recharts-tooltip-label",c);T&&h&&o!==void 0&&o!==null&&(x=h(d,o));var N=g?{role:"status","aria-live":"assertive"}:{};return D.createElement("div",qM({className:C,style:S},N),D.createElement("p",{className:I,style:b},D.isValidElement(x)?x:"".concat(x)),_())},Cm="recharts-tooltip-wrapper",OEe={visibility:"hidden"};function LEe(t){var{coordinate:e,translateX:n,translateY:r}=t;return nn(Cm,{["".concat(Cm,"-right")]:ot(n)&&e&&ot(e.x)&&n>=e.x,["".concat(Cm,"-left")]:ot(n)&&e&&ot(e.x)&&n<e.x,["".concat(Cm,"-bottom")]:ot(r)&&e&&ot(e.y)&&r>=e.y,["".concat(Cm,"-top")]:ot(r)&&e&&ot(e.y)&&r<e.y})}function _6(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:i,position:o,reverseDirection:s,tooltipDimension:a,viewBox:u,viewBoxDimension:c}=t;if(o&&ot(o[r]))return o[r];var d=n[r]-a-(i>0?i:0),h=n[r]+i;if(e[r])return s[r]?d:h;var g=u[r];if(g==null)return 0;if(s[r]){var _=d,S=g;return _<S?Math.max(h,g):Math.max(d,g)}if(c==null)return 0;var b=h+a,T=g+c;return b>T?Math.max(d,g):Math.max(h,g)}function VEe(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function UEe(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:o,tooltipBox:s,useTranslate3d:a,viewBox:u}=t,c,d,h;return s.height>0&&s.width>0&&n?(d=_6({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:s.width,viewBox:u,viewBoxDimension:u.width}),h=_6({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:s.height,viewBox:u,viewBoxDimension:u.height}),c=VEe({translateX:d,translateY:h,useTranslate3d:a})):c=OEe,{cssProperties:c,cssClasses:LEe({translateX:d,translateY:h,coordinate:n})}}function w6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function V_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w6(Object(n),!0).forEach(function(r){FM(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function FM(t,e,n){return(e=qEe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qEe(t){var e=FEe(t,"string");return typeof e=="symbol"?e:e+""}function FEe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class BEe extends D.PureComponent{constructor(){super(...arguments),FM(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),FM(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,o;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:o,coordinate:s,hasPayload:a,isAnimationActive:u,offset:c,position:d,reverseDirection:h,useTranslate3d:g,viewBox:_,wrapperStyle:S,lastBoundingBox:b,innerRef:T,hasPortalFromProps:x}=this.props,{cssClasses:C,cssProperties:I}=UEe({allowEscapeViewBox:n,coordinate:s,offsetTopLeft:c,position:d,reverseDirection:h,tooltipBox:{height:b.height,width:b.width},useTranslate3d:g,viewBox:_}),N=x?{}:V_(V_({transition:u&&e?"transform ".concat(r,"ms ").concat(i):void 0},I),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&a?"visible":"hidden",position:"absolute",top:0,left:0}),V=V_(V_({},N),{},{visibility:!this.state.dismissed&&e&&a?"visible":"hidden"},S);return D.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:C,style:V,ref:T},o)}}var $Ee=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Ly={isSsr:$Ee()},IZ=()=>tt(t=>t.rootProps.accessibilityLayer);function zi(t){return Number.isFinite(t)}function mw(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function BM(){return BM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},BM.apply(null,arguments)}function b6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function T6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?b6(Object(n),!0).forEach(function(r){zEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zEe(t,e,n){return(e=HEe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HEe(t){var e=GEe(t,"string");return typeof e=="symbol"?e:e+""}function GEe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var E6={curveBasisClosed:vwe,curveBasisOpen:_we,curveBasis:ywe,curveBumpX:rwe,curveBumpY:iwe,curveLinearClosed:wwe,curveLinear:jb,curveMonotoneX:bwe,curveMonotoneY:Twe,curveNatural:Ewe,curveStep:Swe,curveStepAfter:Awe,curveStepBefore:xwe},U_=t=>zi(t.x)&&zi(t.y),Im=t=>t.x,Rm=t=>t.y,jEe=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(My(t));return(n==="curveMonotone"||n==="curveBump")&&e?E6["".concat(n).concat(e==="vertical"?"Y":"X")]:E6[n]||jb},KEe=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:i,connectNulls:o=!1}=t,s=jEe(e,i),a=o?n.filter(U_):n,u;if(Array.isArray(r)){var c=o?r.filter(h=>U_(h)):r,d=a.map((h,g)=>T6(T6({},h),{},{base:c[g]}));return i==="vertical"?u=P_().y(Rm).x1(Im).x0(h=>h.base.x):u=P_().x(Im).y1(Rm).y0(h=>h.base.y),u.defined(U_).curve(s),u(d)}return i==="vertical"&&ot(r)?u=P_().y(Rm).x1(Im).x0(r):ot(r)?u=P_().x(Im).y1(Rm).y0(r):u=IQ().x(Im).y(Rm),u.defined(U_).curve(s),u(a)},WEe=t=>{var{className:e,points:n,path:r,pathRef:i}=t;if((!n||!n.length)&&!r)return null;var o=n&&n.length?KEe(t):r;return D.createElement("path",BM({},Hb(t),$0e(t),{className:nn("recharts-curve",e),d:o===null?void 0:o,ref:i}))},YEe=["x","y","top","left","width","height","className"];function $M(){return $M=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$M.apply(null,arguments)}function S6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function JEe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?S6(Object(n),!0).forEach(function(r){XEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function XEe(t,e,n){return(e=QEe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QEe(t){var e=ZEe(t,"string");return typeof e=="symbol"?e:e+""}function ZEe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eSe(t,e){if(t==null)return{};var n,r,i=tSe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function tSe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var nSe=(t,e,n,r,i,o)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(o,",").concat(e,"h").concat(n),rSe=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:o=0,height:s=0,className:a}=t,u=eSe(t,YEe),c=JEe({x:e,y:n,top:r,left:i,width:o,height:s},u);return!ot(e)||!ot(n)||!ot(o)||!ot(s)||!ot(r)||!ot(i)?null:D.createElement("path",$M({},dr(c,!0),{className:nn("recharts-cross",a),d:nSe(e,n,o,s,r,i)}))};function iSe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function x6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function oSe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?x6(Object(n),!0).forEach(function(r){sSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sSe(t,e,n){return(e=aSe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aSe(t){var e=lSe(t,"string");return typeof e=="symbol"?e:e+""}function lSe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Tu(t,e){var n=oSe({},t),r=e,i=Object.keys(e),o=i.reduce((s,a)=>(s[a]===void 0&&r[a]!==void 0&&(s[a]=r[a]),s),n);return o}function uSe(){}function A6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function C6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?A6(Object(n),!0).forEach(function(r){cSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cSe(t,e,n){return(e=fSe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fSe(t){var e=dSe(t,"string");return typeof e=="symbol"?e:e+""}function dSe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hSe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),RZ=(t,e,n)=>t.map(r=>"".concat(hSe(r)," ").concat(e,"ms ").concat(n)).join(","),pSe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),Jg=(t,e)=>Object.keys(e).reduce((n,r)=>C6(C6({},n),{},{[r]:t(r,e[r])}),{});function I6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ir(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I6(Object(n),!0).forEach(function(r){mSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mSe(t,e,n){return(e=gSe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gSe(t){var e=ySe(t,"string");return typeof e=="symbol"?e:e+""}function ySe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gw=(t,e,n)=>t+(e-t)*n,zM=t=>{var{from:e,to:n}=t;return e!==n},PZ=(t,e,n)=>{var r=Jg((i,o)=>{if(zM(o)){var[s,a]=t(o.from,o.to,o.velocity);return Ir(Ir({},o),{},{from:s,velocity:a})}return o},e);return n<1?Jg((i,o)=>zM(o)?Ir(Ir({},o),{},{velocity:gw(o.velocity,r[i].velocity,n),from:gw(o.from,r[i].from,n)}):o,e):PZ(t,r,n-1)};function vSe(t,e,n,r,i,o){var s,a=r.reduce((g,_)=>Ir(Ir({},g),{},{[_]:{from:t[_],velocity:0,to:e[_]}}),{}),u=()=>Jg((g,_)=>_.from,a),c=()=>!Object.values(a).filter(zM).length,d=null,h=g=>{s||(s=g);var _=g-s,S=_/n.dt;a=PZ(n,a,S),i(Ir(Ir(Ir({},t),e),u())),s=g,c()||(d=o.setTimeout(h))};return()=>(d=o.setTimeout(h),()=>{d()})}function _Se(t,e,n,r,i,o,s){var a=null,u=i.reduce((h,g)=>Ir(Ir({},h),{},{[g]:[t[g],e[g]]}),{}),c,d=h=>{c||(c=h);var g=(h-c)/r,_=Jg((b,T)=>gw(...T,n(g)),u);if(o(Ir(Ir(Ir({},t),e),_)),g<1)a=s.setTimeout(d);else{var S=Jg((b,T)=>gw(...T,n(1)),u);o(Ir(Ir(Ir({},t),e),S))}};return()=>(a=s.setTimeout(d),()=>{a()})}const wSe=(t,e,n,r,i,o)=>{var s=pSe(t,e);return n.isStepper===!0?vSe(t,e,n,s,i,o):_Se(t,e,n,r,s,i,o)};var yw=1e-4,NZ=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],MZ=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),R6=(t,e)=>n=>{var r=NZ(t,e);return MZ(r,n)},bSe=(t,e)=>n=>{var r=NZ(t,e),i=[...r.map((o,s)=>o*s).slice(1),0];return MZ(i,n)},P6=function(){for(var e,n,r,i,o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];if(s.length===1)switch(s[0]){case"linear":[e,r,n,i]=[0,0,1,1];break;case"ease":[e,r,n,i]=[.25,.1,.25,1];break;case"ease-in":[e,r,n,i]=[.42,0,1,1];break;case"ease-out":[e,r,n,i]=[.42,0,.58,1];break;case"ease-in-out":[e,r,n,i]=[0,0,.58,1];break;default:{var u=s[0].split("(");u[0]==="cubic-bezier"&&u[1].split(")")[0].split(",").length===4&&([e,r,n,i]=u[1].split(")")[0].split(",").map(S=>parseFloat(S)))}}else s.length===4&&([e,r,n,i]=s);var c=R6(e,n),d=R6(r,i),h=bSe(e,n),g=S=>S>1?1:S<0?0:S,_=S=>{for(var b=S>1?1:S,T=b,x=0;x<8;++x){var C=c(T)-b,I=h(T);if(Math.abs(C-b)<yw||I<yw)return d(T);T=g(T-C/I)}return d(T)};return _.isStepper=!1,_},TSe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,o=(s,a,u)=>{var c=-(s-a)*n,d=u*r,h=u+(c-d)*i/1e3,g=u*i/1e3+s;return Math.abs(g-a)<yw&&Math.abs(h)<yw?[a,0]:[g,h]};return o.isStepper=!0,o.dt=i,o},ESe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return P6(t);case"spring":return TSe();default:if(t.split("(")[0]==="cubic-bezier")return P6(t)}return typeof t=="function"?t:null};function SSe(t){var e,n=()=>null,r=!1,i=null,o=s=>{if(!r){if(Array.isArray(s)){if(!s.length)return;var a=s,[u,...c]=a;if(typeof u=="number"){i=t.setTimeout(o.bind(null,c),u);return}o(u),i=t.setTimeout(o.bind(null,c));return}typeof s=="string"&&(e=s,n(e)),typeof s=="object"&&(e=s,n(e)),typeof s=="function"&&s()}};return{stop:()=>{r=!0},start:s=>{r=!1,i&&(i(),i=null),o(s)},subscribe:s=>(n=s,()=>{n=()=>null}),getTimeoutController:()=>t}}class xSe{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,o=s=>{s-r>=n?e(s):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(o))};return i=requestAnimationFrame(o),()=>{cancelAnimationFrame(i)}}}function ASe(){return SSe(new xSe)}var CSe=D.createContext(ASe);function ISe(t,e){var n=D.useContext(CSe);return D.useMemo(()=>e??n(t),[t,e,n])}var RSe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},N6={t:0},SA={t:1};function iO(t){var e=Tu(t,RSe),{isActive:n,canBegin:r,duration:i,easing:o,begin:s,onAnimationEnd:a,onAnimationStart:u,children:c}=e,d=ISe(e.animationId,e.animationManager),[h,g]=D.useState(n?N6:SA),_=D.useRef(null);return D.useEffect(()=>{n||g(SA)},[n]),D.useEffect(()=>{if(!n||!r)return uSe;var S=wSe(N6,SA,ESe(o),i,g,d.getTimeoutController()),b=()=>{_.current=S()};return d.start([u,s,b,i,a]),()=>{d.stop(),_.current&&_.current(),a()}},[n,r,i,o,s,u,a,d]),c(h.t)}function oO(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=D.useRef(Kg(e)),r=D.useRef(t);return r.current!==t&&(n.current=Kg(e),r.current=t),n.current}function M6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function D6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M6(Object(n),!0).forEach(function(r){PSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function PSe(t,e,n){return(e=NSe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NSe(t){var e=MSe(t,"string");return typeof e=="symbol"?e:e+""}function MSe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vw(){return vw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vw.apply(null,arguments)}var k6=(t,e,n,r,i)=>{var o=Math.min(Math.abs(n)/2,Math.abs(r)/2),s=r>=0?1:-1,a=n>=0?1:-1,u=r>=0&&n>=0||r<0&&n<0?1:0,c;if(o>0&&i instanceof Array){for(var d=[0,0,0,0],h=0,g=4;h<g;h++)d[h]=i[h]>o?o:i[h];c="M".concat(t,",").concat(e+s*d[0]),d[0]>0&&(c+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(u,",").concat(t+a*d[0],",").concat(e)),c+="L ".concat(t+n-a*d[1],",").concat(e),d[1]>0&&(c+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(e+s*d[1])),c+="L ".concat(t+n,",").concat(e+r-s*d[2]),d[2]>0&&(c+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(u,`,
        `).concat(t+n-a*d[2],",").concat(e+r)),c+="L ".concat(t+a*d[3],",").concat(e+r),d[3]>0&&(c+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(e+r-s*d[3])),c+="Z"}else if(o>0&&i===+i&&i>0){var _=Math.min(o,i);c="M ".concat(t,",").concat(e+s*_,`
            A `).concat(_,",").concat(_,",0,0,").concat(u,",").concat(t+a*_,",").concat(e,`
            L `).concat(t+n-a*_,",").concat(e,`
            A `).concat(_,",").concat(_,",0,0,").concat(u,",").concat(t+n,",").concat(e+s*_,`
            L `).concat(t+n,",").concat(e+r-s*_,`
            A `).concat(_,",").concat(_,",0,0,").concat(u,",").concat(t+n-a*_,",").concat(e+r,`
            L `).concat(t+a*_,",").concat(e+r,`
            A `).concat(_,",").concat(_,",0,0,").concat(u,",").concat(t,",").concat(e+r-s*_," Z")}else c="M ".concat(t,",").concat(e," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return c},DSe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},DZ=t=>{var e=Tu(t,DSe),n=D.useRef(null),[r,i]=D.useState(-1);D.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var H=n.current.getTotalLength();H&&i(H)}catch{}},[]);var{x:o,y:s,width:a,height:u,radius:c,className:d}=e,{animationEasing:h,animationDuration:g,animationBegin:_,isAnimationActive:S,isUpdateAnimationActive:b}=e,T=D.useRef(a),x=D.useRef(u),C=D.useRef(o),I=D.useRef(s),N=D.useMemo(()=>({x:o,y:s,width:a,height:u,radius:c}),[o,s,a,u,c]),V=oO(N,"rectangle-");if(o!==+o||s!==+s||a!==+a||u!==+u||a===0||u===0)return null;var q=nn("recharts-rectangle",d);if(!b)return D.createElement("path",vw({},dr(e,!0),{className:q,d:k6(o,s,a,u,c)}));var P=T.current,O=x.current,R=C.current,U=I.current,L="0px ".concat(r===-1?1:r,"px"),F="".concat(r,"px 0px"),$=RZ(["strokeDasharray"],g,typeof h=="string"?h:void 0);return D.createElement(iO,{animationId:V,key:V,canBegin:r>0,duration:g,easing:h,isActive:b,begin:_},H=>{var Y=Zr(P,a,H),K=Zr(O,u,H),Q=Zr(R,o,H),re=Zr(U,s,H);n.current&&(T.current=Y,x.current=K,C.current=Q,I.current=re);var X;return S?H>0?X={transition:$,strokeDasharray:F}:X={strokeDasharray:L}:X={strokeDasharray:F},D.createElement("path",vw({},dr(e,!0),{className:q,d:k6(Q,re,Y,K,c),ref:n,style:D6(D6({},X),e.style)}))})};function kZ(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:o}=t,s=Pr(e,n,r,i),a=Pr(e,n,r,o);return{points:[s,a],cx:e,cy:n,radius:r,startAngle:i,endAngle:o}}function HM(){return HM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},HM.apply(null,arguments)}var kSe=(t,e)=>{var n=Vi(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},q_=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:o,isExternal:s,cornerRadius:a,cornerIsExternal:u}=t,c=a*(s?1:-1)+r,d=Math.asin(a/c)/pw,h=u?i:i+o*d,g=Pr(e,n,c,h),_=Pr(e,n,r,h),S=u?i-o*d:i,b=Pr(e,n,c*Math.cos(d*pw),S);return{center:g,circleTangency:_,lineTangency:b,theta:d}},OZ=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:o,endAngle:s}=t,a=kSe(o,s),u=o+a,c=Pr(e,n,i,o),d=Pr(e,n,i,u),h="M ".concat(c.x,",").concat(c.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(a)>180),",").concat(+(o>u),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(r>0){var g=Pr(e,n,r,o),_=Pr(e,n,r,u);h+="L ".concat(_.x,",").concat(_.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(a)>180),",").concat(+(o<=u),`,
            `).concat(g.x,",").concat(g.y," Z")}else h+="L ".concat(e,",").concat(n," Z");return h},OSe=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:o,forceCornerRadius:s,cornerIsExternal:a,startAngle:u,endAngle:c}=t,d=Vi(c-u),{circleTangency:h,lineTangency:g,theta:_}=q_({cx:e,cy:n,radius:i,angle:u,sign:d,cornerRadius:o,cornerIsExternal:a}),{circleTangency:S,lineTangency:b,theta:T}=q_({cx:e,cy:n,radius:i,angle:c,sign:-d,cornerRadius:o,cornerIsExternal:a}),x=a?Math.abs(u-c):Math.abs(u-c)-_-T;if(x<0)return s?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):OZ({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:u,endAngle:c});var C="M ".concat(g.x,",").concat(g.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(x>180),",").concat(+(d<0),",").concat(S.x,",").concat(S.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(b.x,",").concat(b.y,`
  `);if(r>0){var{circleTangency:I,lineTangency:N,theta:V}=q_({cx:e,cy:n,radius:r,angle:u,sign:d,isExternal:!0,cornerRadius:o,cornerIsExternal:a}),{circleTangency:q,lineTangency:P,theta:O}=q_({cx:e,cy:n,radius:r,angle:c,sign:-d,isExternal:!0,cornerRadius:o,cornerIsExternal:a}),R=a?Math.abs(u-c):Math.abs(u-c)-V-O;if(R<0&&o===0)return"".concat(C,"L").concat(e,",").concat(n,"Z");C+="L".concat(P.x,",").concat(P.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(q.x,",").concat(q.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(R>180),",").concat(+(d>0),",").concat(I.x,",").concat(I.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(N.x,",").concat(N.y,"Z")}else C+="L".concat(e,",").concat(n,"Z");return C},LSe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},LZ=t=>{var e=Tu(t,LSe),{cx:n,cy:r,innerRadius:i,outerRadius:o,cornerRadius:s,forceCornerRadius:a,cornerIsExternal:u,startAngle:c,endAngle:d,className:h}=e;if(o<i||c===d)return null;var g=nn("recharts-sector",h),_=o-i,S=Xo(s,_,0,!0),b;return S>0&&Math.abs(c-d)<360?b=OSe({cx:n,cy:r,innerRadius:i,outerRadius:o,cornerRadius:Math.min(S,_/2),forceCornerRadius:a,cornerIsExternal:u,startAngle:c,endAngle:d}):b=OZ({cx:n,cy:r,innerRadius:i,outerRadius:o,startAngle:c,endAngle:d}),D.createElement("path",HM({},dr(e,!0),{className:g,d:b}))};function VSe(t,e,n){var r,i,o,s;if(t==="horizontal")r=e.x,o=r,i=n.top,s=n.top+n.height;else if(t==="vertical")i=e.y,s=i,r=n.left,o=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var{cx:a,cy:u,innerRadius:c,outerRadius:d,angle:h}=e,g=Pr(a,u,c,h),_=Pr(a,u,d,h);r=g.x,i=g.y,o=_.x,s=_.y}else return kZ(e);return[{x:r,y:i},{x:o,y:s}]}var xA={},AA={},CA={},O6;function USe(){return O6||(O6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=XQ();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(CA)),CA}var L6;function qSe(){return L6||(L6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=USe();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(AA)),AA}var V6;function FSe(){return V6||(V6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=QQ(),n=qSe();function r(i,o,s){s&&typeof s!="number"&&e.isIterateeCall(i,o,s)&&(o=s=void 0),i=n.toFinite(i),o===void 0?(o=i,i=0):o=n.toFinite(o),s=s===void 0?i<o?1:-1:n.toFinite(s);const a=Math.max(Math.ceil((o-i)/(s||1)),0),u=new Array(a);for(let c=0;c<a;c++)u[c]=i,i+=s;return u}t.range=r})(xA)),xA}var IA,U6;function BSe(){return U6||(U6=1,IA=FSe().range),IA}var $Se=BSe();const VZ=Co($Se);function Zl(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function zSe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function sO(t){let e,n,r;t.length!==2?(e=Zl,n=(a,u)=>Zl(t(a),u),r=(a,u)=>t(a)-u):(e=t===Zl||t===zSe?t:HSe,n=t,r=t);function i(a,u,c=0,d=a.length){if(c<d){if(e(u,u)!==0)return d;do{const h=c+d>>>1;n(a[h],u)<0?c=h+1:d=h}while(c<d)}return c}function o(a,u,c=0,d=a.length){if(c<d){if(e(u,u)!==0)return d;do{const h=c+d>>>1;n(a[h],u)<=0?c=h+1:d=h}while(c<d)}return c}function s(a,u,c=0,d=a.length){const h=i(a,u,c,d-1);return h>c&&r(a[h-1],u)>-r(a[h],u)?h-1:h}return{left:i,center:s,right:o}}function HSe(){return 0}function UZ(t){return t===null?NaN:+t}function*GSe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const jSe=sO(Zl),Vy=jSe.right;sO(UZ).center;class q6 extends Map{constructor(e,n=YSe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(F6(this,e))}has(e){return super.has(F6(this,e))}set(e,n){return super.set(KSe(this,e),n)}delete(e){return super.delete(WSe(this,e))}}function F6({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function KSe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function WSe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function YSe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function JSe(t=Zl){if(t===Zl)return qZ;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function qZ(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const XSe=Math.sqrt(50),QSe=Math.sqrt(10),ZSe=Math.sqrt(2);function _w(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=XSe?10:o>=QSe?5:o>=ZSe?2:1;let a,u,c;return i<0?(c=Math.pow(10,-i)/s,a=Math.round(t*c),u=Math.round(e*c),a/c<t&&++a,u/c>e&&--u,c=-c):(c=Math.pow(10,i)*s,a=Math.round(t/c),u=Math.round(e/c),a*c<t&&++a,u*c>e&&--u),u<a&&.5<=n&&n<2?_w(t,e,n*2):[a,u,c]}function GM(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,s]=r?_w(e,t,n):_w(t,e,n);if(!(o>=i))return[];const a=o-i+1,u=new Array(a);if(r)if(s<0)for(let c=0;c<a;++c)u[c]=(o-c)/-s;else for(let c=0;c<a;++c)u[c]=(o-c)*s;else if(s<0)for(let c=0;c<a;++c)u[c]=(i+c)/-s;else for(let c=0;c<a;++c)u[c]=(i+c)*s;return u}function jM(t,e,n){return e=+e,t=+t,n=+n,_w(t,e,n)[2]}function KM(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?jM(e,t,n):jM(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function B6(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function $6(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function FZ(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?qZ:JSe(i);r>n;){if(r-n>600){const u=r-n+1,c=e-n+1,d=Math.log(u),h=.5*Math.exp(2*d/3),g=.5*Math.sqrt(d*h*(u-h)/u)*(c-u/2<0?-1:1),_=Math.max(n,Math.floor(e-c*h/u+g)),S=Math.min(r,Math.floor(e+(u-c)*h/u+g));FZ(t,e,_,S,i)}const o=t[e];let s=n,a=r;for(Pm(t,n,e),i(t[r],o)>0&&Pm(t,n,r);s<a;){for(Pm(t,s,a),++s,--a;i(t[s],o)<0;)++s;for(;i(t[a],o)>0;)--a}i(t[n],o)===0?Pm(t,n,a):(++a,Pm(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}return t}function Pm(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function exe(t,e,n){if(t=Float64Array.from(GSe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return $6(t);if(e>=1)return B6(t);var r,i=(r-1)*e,o=Math.floor(i),s=B6(FZ(t,o).subarray(0,o+1)),a=$6(t.subarray(o+1));return s+(a-s)*(i-o)}}function txe(t,e,n=UZ){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),s=+n(t[o],o,t),a=+n(t[o+1],o+1,t);return s+(a-s)*(i-o)}}function nxe(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function Io(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function nl(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const WM=Symbol("implicit");function aO(){var t=new q6,e=[],n=[],r=WM;function i(o){let s=t.get(o);if(s===void 0){if(r!==WM)return r;t.set(o,s=e.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new q6;for(const s of o)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return aO(e,n).unknown(r)},Io.apply(i,arguments),i}function lO(){var t=aO().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,o,s,a=!1,u=0,c=0,d=.5;delete t.unknown;function h(){var g=e().length,_=i<r,S=_?i:r,b=_?r:i;o=(b-S)/Math.max(1,g-u+c*2),a&&(o=Math.floor(o)),S+=(b-S-o*(g-u))*d,s=o*(1-u),a&&(S=Math.round(S),s=Math.round(s));var T=nxe(g).map(function(x){return S+o*x});return n(_?T.reverse():T)}return t.domain=function(g){return arguments.length?(e(g),h()):e()},t.range=function(g){return arguments.length?([r,i]=g,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(g){return[r,i]=g,r=+r,i=+i,a=!0,h()},t.bandwidth=function(){return s},t.step=function(){return o},t.round=function(g){return arguments.length?(a=!!g,h()):a},t.padding=function(g){return arguments.length?(u=Math.min(1,c=+g),h()):u},t.paddingInner=function(g){return arguments.length?(u=Math.min(1,g),h()):u},t.paddingOuter=function(g){return arguments.length?(c=+g,h()):c},t.align=function(g){return arguments.length?(d=Math.max(0,Math.min(1,g)),h()):d},t.copy=function(){return lO(e(),[r,i]).round(a).paddingInner(u).paddingOuter(c).align(d)},Io.apply(h(),arguments)}function BZ(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return BZ(e())},t}function rxe(){return BZ(lO.apply(null,arguments).paddingInner(1))}function uO(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function $Z(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Uy(){}var Xg=.7,ww=1/Xg,$d="\\s*([+-]?\\d+)\\s*",Qg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Bs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ixe=/^#([0-9a-f]{3,8})$/,oxe=new RegExp(`^rgb\\(${$d},${$d},${$d}\\)$`),sxe=new RegExp(`^rgb\\(${Bs},${Bs},${Bs}\\)$`),axe=new RegExp(`^rgba\\(${$d},${$d},${$d},${Qg}\\)$`),lxe=new RegExp(`^rgba\\(${Bs},${Bs},${Bs},${Qg}\\)$`),uxe=new RegExp(`^hsl\\(${Qg},${Bs},${Bs}\\)$`),cxe=new RegExp(`^hsla\\(${Qg},${Bs},${Bs},${Qg}\\)$`),z6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};uO(Uy,Jc,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:H6,formatHex:H6,formatHex8:fxe,formatHsl:dxe,formatRgb:G6,toString:G6});function H6(){return this.rgb().formatHex()}function fxe(){return this.rgb().formatHex8()}function dxe(){return zZ(this).formatHsl()}function G6(){return this.rgb().formatRgb()}function Jc(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ixe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?j6(e):n===3?new mi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?F_(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?F_(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=oxe.exec(t))?new mi(e[1],e[2],e[3],1):(e=sxe.exec(t))?new mi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=axe.exec(t))?F_(e[1],e[2],e[3],e[4]):(e=lxe.exec(t))?F_(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=uxe.exec(t))?Y6(e[1],e[2]/100,e[3]/100,1):(e=cxe.exec(t))?Y6(e[1],e[2]/100,e[3]/100,e[4]):z6.hasOwnProperty(t)?j6(z6[t]):t==="transparent"?new mi(NaN,NaN,NaN,0):null}function j6(t){return new mi(t>>16&255,t>>8&255,t&255,1)}function F_(t,e,n,r){return r<=0&&(t=e=n=NaN),new mi(t,e,n,r)}function hxe(t){return t instanceof Uy||(t=Jc(t)),t?(t=t.rgb(),new mi(t.r,t.g,t.b,t.opacity)):new mi}function YM(t,e,n,r){return arguments.length===1?hxe(t):new mi(t,e,n,r??1)}function mi(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}uO(mi,YM,$Z(Uy,{brighter(t){return t=t==null?ww:Math.pow(ww,t),new mi(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Xg:Math.pow(Xg,t),new mi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new mi(Dc(this.r),Dc(this.g),Dc(this.b),bw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:K6,formatHex:K6,formatHex8:pxe,formatRgb:W6,toString:W6}));function K6(){return`#${Sc(this.r)}${Sc(this.g)}${Sc(this.b)}`}function pxe(){return`#${Sc(this.r)}${Sc(this.g)}${Sc(this.b)}${Sc((isNaN(this.opacity)?1:this.opacity)*255)}`}function W6(){const t=bw(this.opacity);return`${t===1?"rgb(":"rgba("}${Dc(this.r)}, ${Dc(this.g)}, ${Dc(this.b)}${t===1?")":`, ${t})`}`}function bw(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Dc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Sc(t){return t=Dc(t),(t<16?"0":"")+t.toString(16)}function Y6(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ho(t,e,n,r)}function zZ(t){if(t instanceof Ho)return new Ho(t.h,t.s,t.l,t.opacity);if(t instanceof Uy||(t=Jc(t)),!t)return new Ho;if(t instanceof Ho)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,a=o-i,u=(o+i)/2;return a?(e===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-e)/a+2:s=(e-n)/a+4,a/=u<.5?o+i:2-o-i,s*=60):a=u>0&&u<1?0:s,new Ho(s,a,u,t.opacity)}function mxe(t,e,n,r){return arguments.length===1?zZ(t):new Ho(t,e,n,r??1)}function Ho(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}uO(Ho,mxe,$Z(Uy,{brighter(t){return t=t==null?ww:Math.pow(ww,t),new Ho(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Xg:Math.pow(Xg,t),new Ho(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new mi(RA(t>=240?t-240:t+120,i,r),RA(t,i,r),RA(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Ho(J6(this.h),B_(this.s),B_(this.l),bw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=bw(this.opacity);return`${t===1?"hsl(":"hsla("}${J6(this.h)}, ${B_(this.s)*100}%, ${B_(this.l)*100}%${t===1?")":`, ${t})`}`}}));function J6(t){return t=(t||0)%360,t<0?t+360:t}function B_(t){return Math.max(0,Math.min(1,t||0))}function RA(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const cO=t=>()=>t;function gxe(t,e){return function(n){return t+n*e}}function yxe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function vxe(t){return(t=+t)==1?HZ:function(e,n){return n-e?yxe(e,n,t):cO(isNaN(e)?n:e)}}function HZ(t,e){var n=e-t;return n?gxe(t,n):cO(isNaN(t)?e:t)}const Tw=(function t(e){var n=vxe(e);function r(i,o){var s=n((i=YM(i)).r,(o=YM(o)).r),a=n(i.g,o.g),u=n(i.b,o.b),c=HZ(i.opacity,o.opacity);return function(d){return i.r=s(d),i.g=a(d),i.b=u(d),i.opacity=c(d),i+""}}return r.gamma=t,r})(1);function _xe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function wxe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function bxe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=Jh(t[s],e[s]);for(;s<n;++s)o[s]=e[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function Txe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Bo(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Exe(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Jh(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var JM=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,PA=new RegExp(JM.source,"g");function Sxe(t){return function(){return t}}function xxe(t){return function(e){return t(e)+""}}function GZ(t,e){var n=JM.lastIndex=PA.lastIndex=0,r,i,o,s=-1,a=[],u=[];for(t=t+"",e=e+"";(r=JM.exec(t))&&(i=PA.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,u.push({i:s,x:Bo(r,i)})),n=PA.lastIndex;return n<e.length&&(o=e.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?u[0]?xxe(u[0].x):Sxe(e):(e=u.length,function(c){for(var d=0,h;d<e;++d)a[(h=u[d]).i]=h.x(c);return a.join("")})}function Jh(t,e){var n=typeof e,r;return e==null||n==="boolean"?cO(e):(n==="number"?Bo:n==="string"?(r=Jc(e))?(e=r,Tw):GZ:e instanceof Jc?Tw:e instanceof Date?Txe:wxe(e)?_xe:Array.isArray(e)?bxe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Exe:Bo)(t,e)}function fO(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var X6=180/Math.PI,XM={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function jZ(t,e,n,r,i,o){var s,a,u;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),t*r<e*n&&(t=-t,e=-e,u=-u,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*X6,skewX:Math.atan(u)*X6,scaleX:s,scaleY:a}}var $_;function Axe(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?XM:jZ(e.a,e.b,e.c,e.d,e.e,e.f)}function Cxe(t){return t==null||($_||($_=document.createElementNS("http://www.w3.org/2000/svg","g")),$_.setAttribute("transform",t),!(t=$_.transform.baseVal.consolidate()))?XM:(t=t.matrix,jZ(t.a,t.b,t.c,t.d,t.e,t.f))}function KZ(t,e,n,r){function i(c){return c.length?c.pop()+" ":""}function o(c,d,h,g,_,S){if(c!==h||d!==g){var b=_.push("translate(",null,e,null,n);S.push({i:b-4,x:Bo(c,h)},{i:b-2,x:Bo(d,g)})}else(h||g)&&_.push("translate("+h+e+g+n)}function s(c,d,h,g){c!==d?(c-d>180?d+=360:d-c>180&&(c+=360),g.push({i:h.push(i(h)+"rotate(",null,r)-2,x:Bo(c,d)})):d&&h.push(i(h)+"rotate("+d+r)}function a(c,d,h,g){c!==d?g.push({i:h.push(i(h)+"skewX(",null,r)-2,x:Bo(c,d)}):d&&h.push(i(h)+"skewX("+d+r)}function u(c,d,h,g,_,S){if(c!==h||d!==g){var b=_.push(i(_)+"scale(",null,",",null,")");S.push({i:b-4,x:Bo(c,h)},{i:b-2,x:Bo(d,g)})}else(h!==1||g!==1)&&_.push(i(_)+"scale("+h+","+g+")")}return function(c,d){var h=[],g=[];return c=t(c),d=t(d),o(c.translateX,c.translateY,d.translateX,d.translateY,h,g),s(c.rotate,d.rotate,h,g),a(c.skewX,d.skewX,h,g),u(c.scaleX,c.scaleY,d.scaleX,d.scaleY,h,g),c=d=null,function(_){for(var S=-1,b=g.length,T;++S<b;)h[(T=g[S]).i]=T.x(_);return h.join("")}}}var Ixe=KZ(Axe,"px, ","px)","deg)"),Rxe=KZ(Cxe,", ",")",")"),Pxe=1e-12;function Q6(t){return((t=Math.exp(t))+1/t)/2}function Nxe(t){return((t=Math.exp(t))-1/t)/2}function Mxe(t){return((t=Math.exp(2*t))-1)/(t+1)}const Dxe=(function t(e,n,r){function i(o,s){var a=o[0],u=o[1],c=o[2],d=s[0],h=s[1],g=s[2],_=d-a,S=h-u,b=_*_+S*S,T,x;if(b<Pxe)x=Math.log(g/c)/e,T=function(P){return[a+P*_,u+P*S,c*Math.exp(e*P*x)]};else{var C=Math.sqrt(b),I=(g*g-c*c+r*b)/(2*c*n*C),N=(g*g-c*c-r*b)/(2*g*n*C),V=Math.log(Math.sqrt(I*I+1)-I),q=Math.log(Math.sqrt(N*N+1)-N);x=(q-V)/e,T=function(P){var O=P*x,R=Q6(V),U=c/(n*C)*(R*Mxe(e*O+V)-Nxe(V));return[a+U*_,u+U*S,c*R/Q6(e*O+V)]}}return T.duration=x*1e3*e/Math.SQRT2,T}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,u=a*a;return t(s,a,u)},i})(Math.SQRT2,2,4);function kxe(t,e){e===void 0&&(e=t,t=Jh);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(s){var a=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return o[a](s-a)}}function Oxe(t){return function(){return t}}function Ew(t){return+t}var Z6=[0,1];function ti(t){return t}function QM(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Oxe(isNaN(e)?NaN:.5)}function Lxe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Vxe(t,e,n){var r=t[0],i=t[1],o=e[0],s=e[1];return i<r?(r=QM(i,r),o=n(s,o)):(r=QM(r,i),o=n(o,s)),function(a){return o(r(a))}}function Uxe(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=QM(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(a){var u=Vy(t,a,1,r)-1;return o[u](i[u](a))}}function qy(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function iT(){var t=Z6,e=Z6,n=Jh,r,i,o,s=ti,a,u,c;function d(){var g=Math.min(t.length,e.length);return s!==ti&&(s=Lxe(t[0],t[g-1])),a=g>2?Uxe:Vxe,u=c=null,h}function h(g){return g==null||isNaN(g=+g)?o:(u||(u=a(t.map(r),e,n)))(r(s(g)))}return h.invert=function(g){return s(i((c||(c=a(e,t.map(r),Bo)))(g)))},h.domain=function(g){return arguments.length?(t=Array.from(g,Ew),d()):t.slice()},h.range=function(g){return arguments.length?(e=Array.from(g),d()):e.slice()},h.rangeRound=function(g){return e=Array.from(g),n=fO,d()},h.clamp=function(g){return arguments.length?(s=g?!0:ti,d()):s!==ti},h.interpolate=function(g){return arguments.length?(n=g,d()):n},h.unknown=function(g){return arguments.length?(o=g,h):o},function(g,_){return r=g,i=_,d()}}function dO(){return iT()(ti,ti)}function qxe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Sw(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function bh(t){return t=Sw(Math.abs(t)),t?t[1]:NaN}function Fxe(t,e){return function(n,r){for(var i=n.length,o=[],s=0,a=t[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),o.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=t[s=(s+1)%t.length];return o.reverse().join(e)}}function Bxe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var $xe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Zg(t){if(!(e=$xe.exec(t)))throw new Error("invalid format: "+t);var e;return new hO({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Zg.prototype=hO.prototype;function hO(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}hO.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function zxe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var WZ;function Hxe(t,e){var n=Sw(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(WZ=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Sw(t,Math.max(0,e+o-1))[0]}function e$(t,e){var n=Sw(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const t$={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:qxe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>e$(t*100,e),r:e$,s:Hxe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function n$(t){return t}var r$=Array.prototype.map,i$=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Gxe(t){var e=t.grouping===void 0||t.thousands===void 0?n$:Fxe(r$.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?n$:Bxe(r$.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"−":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function c(h){h=Zg(h);var g=h.fill,_=h.align,S=h.sign,b=h.symbol,T=h.zero,x=h.width,C=h.comma,I=h.precision,N=h.trim,V=h.type;V==="n"?(C=!0,V="g"):t$[V]||(I===void 0&&(I=12),N=!0,V="g"),(T||g==="0"&&_==="=")&&(T=!0,g="0",_="=");var q=b==="$"?n:b==="#"&&/[boxX]/.test(V)?"0"+V.toLowerCase():"",P=b==="$"?r:/[%p]/.test(V)?s:"",O=t$[V],R=/[defgprs%]/.test(V);I=I===void 0?6:/[gprs]/.test(V)?Math.max(1,Math.min(21,I)):Math.max(0,Math.min(20,I));function U(L){var F=q,$=P,H,Y,K;if(V==="c")$=O(L)+$,L="";else{L=+L;var Q=L<0||1/L<0;if(L=isNaN(L)?u:O(Math.abs(L),I),N&&(L=zxe(L)),Q&&+L==0&&S!=="+"&&(Q=!1),F=(Q?S==="("?S:a:S==="-"||S==="("?"":S)+F,$=(V==="s"?i$[8+WZ/3]:"")+$+(Q&&S==="("?")":""),R){for(H=-1,Y=L.length;++H<Y;)if(K=L.charCodeAt(H),48>K||K>57){$=(K===46?i+L.slice(H+1):L.slice(H))+$,L=L.slice(0,H);break}}}C&&!T&&(L=e(L,1/0));var re=F.length+L.length+$.length,X=re<x?new Array(x-re+1).join(g):"";switch(C&&T&&(L=e(X+L,X.length?x-$.length:1/0),X=""),_){case"<":L=F+L+$+X;break;case"=":L=F+X+L+$;break;case"^":L=X.slice(0,re=X.length>>1)+F+L+$+X.slice(re);break;default:L=X+F+L+$;break}return o(L)}return U.toString=function(){return h+""},U}function d(h,g){var _=c((h=Zg(h),h.type="f",h)),S=Math.max(-8,Math.min(8,Math.floor(bh(g)/3)))*3,b=Math.pow(10,-S),T=i$[8+S/3];return function(x){return _(b*x)+T}}return{format:c,formatPrefix:d}}var z_,pO,YZ;jxe({thousands:",",grouping:[3],currency:["$",""]});function jxe(t){return z_=Gxe(t),pO=z_.format,YZ=z_.formatPrefix,z_}function Kxe(t){return Math.max(0,-bh(Math.abs(t)))}function Wxe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(bh(e)/3)))*3-bh(Math.abs(t)))}function Yxe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,bh(e)-bh(t))+1}function JZ(t,e,n,r){var i=KM(t,e,n),o;switch(r=Zg(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=Wxe(i,s))&&(r.precision=o),YZ(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=Yxe(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=Kxe(i))&&(r.precision=o-(r.type==="%")*2);break}}return pO(r)}function Eu(t){var e=t.domain;return t.ticks=function(n){var r=e();return GM(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return JZ(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,s=r[i],a=r[o],u,c,d=10;for(a<s&&(c=s,s=a,a=c,c=i,i=o,o=c);d-- >0;){if(c=jM(s,a,n),c===u)return r[i]=s,r[o]=a,e(r);if(c>0)s=Math.floor(s/c)*c,a=Math.ceil(a/c)*c;else if(c<0)s=Math.ceil(s*c)/c,a=Math.floor(a*c)/c;else break;u=c}return t},t}function XZ(){var t=dO();return t.copy=function(){return qy(t,XZ())},Io.apply(t,arguments),Eu(t)}function QZ(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Ew),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return QZ(t).unknown(e)},t=arguments.length?Array.from(t,Ew):[0,1],Eu(n)}function ZZ(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],o=t[r],s;return o<i&&(s=n,n=r,r=s,s=i,i=o,o=s),t[n]=e.floor(i),t[r]=e.ceil(o),t}function o$(t){return Math.log(t)}function s$(t){return Math.exp(t)}function Jxe(t){return-Math.log(-t)}function Xxe(t){return-Math.exp(-t)}function Qxe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Zxe(t){return t===10?Qxe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function eAe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function a$(t){return(e,n)=>-t(-e,n)}function mO(t){const e=t(o$,s$),n=e.domain;let r=10,i,o;function s(){return i=eAe(r),o=Zxe(r),n()[0]<0?(i=a$(i),o=a$(o),t(Jxe,Xxe)):t(o$,s$),e}return e.base=function(a){return arguments.length?(r=+a,s()):r},e.domain=function(a){return arguments.length?(n(a),s()):n()},e.ticks=a=>{const u=n();let c=u[0],d=u[u.length-1];const h=d<c;h&&([c,d]=[d,c]);let g=i(c),_=i(d),S,b;const T=a==null?10:+a;let x=[];if(!(r%1)&&_-g<T){if(g=Math.floor(g),_=Math.ceil(_),c>0){for(;g<=_;++g)for(S=1;S<r;++S)if(b=g<0?S/o(-g):S*o(g),!(b<c)){if(b>d)break;x.push(b)}}else for(;g<=_;++g)for(S=r-1;S>=1;--S)if(b=g>0?S/o(-g):S*o(g),!(b<c)){if(b>d)break;x.push(b)}x.length*2<T&&(x=GM(c,d,T))}else x=GM(g,_,Math.min(_-g,T)).map(o);return h?x.reverse():x},e.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=Zg(u)).precision==null&&(u.trim=!0),u=pO(u)),a===1/0)return u;const c=Math.max(1,r*a/e.ticks().length);return d=>{let h=d/o(Math.round(i(d)));return h*r<r-.5&&(h*=r),h<=c?u(d):""}},e.nice=()=>n(ZZ(n(),{floor:a=>o(Math.floor(i(a))),ceil:a=>o(Math.ceil(i(a)))})),e}function eee(){const t=mO(iT()).domain([1,10]);return t.copy=()=>qy(t,eee()).base(t.base()),Io.apply(t,arguments),t}function l$(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function u$(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function gO(t){var e=1,n=t(l$(e),u$(e));return n.constant=function(r){return arguments.length?t(l$(e=+r),u$(e)):e},Eu(n)}function tee(){var t=gO(iT());return t.copy=function(){return qy(t,tee()).constant(t.constant())},Io.apply(t,arguments)}function c$(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function tAe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function nAe(t){return t<0?-t*t:t*t}function yO(t){var e=t(ti,ti),n=1;function r(){return n===1?t(ti,ti):n===.5?t(tAe,nAe):t(c$(n),c$(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Eu(e)}function vO(){var t=yO(iT());return t.copy=function(){return qy(t,vO()).exponent(t.exponent())},Io.apply(t,arguments),t}function rAe(){return vO.apply(null,arguments).exponent(.5)}function f$(t){return Math.sign(t)*t*t}function iAe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function nee(){var t=dO(),e=[0,1],n=!1,r;function i(o){var s=iAe(t(o));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(o){return t.invert(f$(o))},i.domain=function(o){return arguments.length?(t.domain(o),i):t.domain()},i.range=function(o){return arguments.length?(t.range((e=Array.from(o,Ew)).map(f$)),i):e.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(n=!!o,i):n},i.clamp=function(o){return arguments.length?(t.clamp(o),i):t.clamp()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return nee(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Io.apply(i,arguments),Eu(i)}function ree(){var t=[],e=[],n=[],r;function i(){var s=0,a=Math.max(1,e.length);for(n=new Array(a-1);++s<a;)n[s-1]=txe(t,s/a);return o}function o(s){return s==null||isNaN(s=+s)?r:e[Vy(n,s)]}return o.invertExtent=function(s){var a=e.indexOf(s);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},o.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let a of s)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Zl),i()},o.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return ree().domain(t).range(e).unknown(r)},Io.apply(o,arguments)}function iee(){var t=0,e=1,n=1,r=[.5],i=[0,1],o;function s(u){return u!=null&&u<=u?i[Vy(r,u,0,n)]:o}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*e-(u-n)*t)/(n+1);return s}return s.domain=function(u){return arguments.length?([t,e]=u,t=+t,e=+e,a()):[t,e]},s.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},s.invertExtent=function(u){var c=i.indexOf(u);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},s.unknown=function(u){return arguments.length&&(o=u),s},s.thresholds=function(){return r.slice()},s.copy=function(){return iee().domain([t,e]).range(i).unknown(o)},Io.apply(Eu(s),arguments)}function oee(){var t=[.5],e=[0,1],n,r=1;function i(o){return o!=null&&o<=o?e[Vy(t,o,0,r)]:n}return i.domain=function(o){return arguments.length?(t=Array.from(o),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(o){return arguments.length?(e=Array.from(o),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(o){var s=e.indexOf(o);return[t[s-1],t[s]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return oee().domain(t).range(e).unknown(n)},Io.apply(i,arguments)}const NA=new Date,MA=new Date;function er(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=(o,s)=>(e(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,a)=>{const u=[];if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return u;let c;do u.push(c=new Date(+o)),e(o,a),t(o);while(c<o&&o<s);return u},i.filter=o=>er(s=>{if(s>=s)for(;t(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;e(s,-1),!o(s););else for(;--a>=0;)for(;e(s,1),!o(s););}),n&&(i.count=(o,s)=>(NA.setTime(+o),MA.setTime(+s),t(NA),t(MA),Math.floor(n(NA,MA))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?s=>r(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const xw=er(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);xw.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?er(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):xw);xw.range;const Sa=1e3,yo=Sa*60,xa=yo*60,Ba=xa*24,_O=Ba*7,d$=Ba*30,DA=Ba*365,xc=er(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Sa)},(t,e)=>(e-t)/Sa,t=>t.getUTCSeconds());xc.range;const wO=er(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Sa)},(t,e)=>{t.setTime(+t+e*yo)},(t,e)=>(e-t)/yo,t=>t.getMinutes());wO.range;const bO=er(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*yo)},(t,e)=>(e-t)/yo,t=>t.getUTCMinutes());bO.range;const TO=er(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Sa-t.getMinutes()*yo)},(t,e)=>{t.setTime(+t+e*xa)},(t,e)=>(e-t)/xa,t=>t.getHours());TO.range;const EO=er(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*xa)},(t,e)=>(e-t)/xa,t=>t.getUTCHours());EO.range;const Fy=er(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*yo)/Ba,t=>t.getDate()-1);Fy.range;const oT=er(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ba,t=>t.getUTCDate()-1);oT.range;const see=er(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ba,t=>Math.floor(t/Ba));see.range;function ff(t){return er(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*yo)/_O)}const sT=ff(0),Aw=ff(1),oAe=ff(2),sAe=ff(3),Th=ff(4),aAe=ff(5),lAe=ff(6);sT.range;Aw.range;oAe.range;sAe.range;Th.range;aAe.range;lAe.range;function df(t){return er(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/_O)}const aT=df(0),Cw=df(1),uAe=df(2),cAe=df(3),Eh=df(4),fAe=df(5),dAe=df(6);aT.range;Cw.range;uAe.range;cAe.range;Eh.range;fAe.range;dAe.range;const SO=er(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());SO.range;const xO=er(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());xO.range;const $a=er(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());$a.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:er(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});$a.range;const za=er(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());za.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:er(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});za.range;function aee(t,e,n,r,i,o){const s=[[xc,1,Sa],[xc,5,5*Sa],[xc,15,15*Sa],[xc,30,30*Sa],[o,1,yo],[o,5,5*yo],[o,15,15*yo],[o,30,30*yo],[i,1,xa],[i,3,3*xa],[i,6,6*xa],[i,12,12*xa],[r,1,Ba],[r,2,2*Ba],[n,1,_O],[e,1,d$],[e,3,3*d$],[t,1,DA]];function a(c,d,h){const g=d<c;g&&([c,d]=[d,c]);const _=h&&typeof h.range=="function"?h:u(c,d,h),S=_?_.range(c,+d+1):[];return g?S.reverse():S}function u(c,d,h){const g=Math.abs(d-c)/h,_=sO(([,,T])=>T).right(s,g);if(_===s.length)return t.every(KM(c/DA,d/DA,h));if(_===0)return xw.every(Math.max(KM(c,d,h),1));const[S,b]=s[g/s[_-1][2]<s[_][2]/g?_-1:_];return S.every(b)}return[a,u]}const[hAe,pAe]=aee(za,xO,aT,see,EO,bO),[mAe,gAe]=aee($a,SO,sT,Fy,TO,wO);function kA(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function OA(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Nm(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function yAe(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,s=t.shortDays,a=t.months,u=t.shortMonths,c=Mm(i),d=Dm(i),h=Mm(o),g=Dm(o),_=Mm(s),S=Dm(s),b=Mm(a),T=Dm(a),x=Mm(u),C=Dm(u),I={a:Q,A:re,b:X,B:G,c:null,d:v$,e:v$,f:FAe,g:JAe,G:QAe,H:VAe,I:UAe,j:qAe,L:lee,m:BAe,M:$Ae,p:te,q:ee,Q:b$,s:T$,S:zAe,u:HAe,U:GAe,V:jAe,w:KAe,W:WAe,x:null,X:null,y:YAe,Y:XAe,Z:ZAe,"%":w$},N={a:ae,A:J,b:ne,B:oe,c:null,d:_$,e:_$,f:r1e,g:h1e,G:m1e,H:e1e,I:t1e,j:n1e,L:cee,m:i1e,M:o1e,p:we,q:Ie,Q:b$,s:T$,S:s1e,u:a1e,U:l1e,V:u1e,w:c1e,W:f1e,x:null,X:null,y:d1e,Y:p1e,Z:g1e,"%":w$},V={a:U,A:L,b:F,B:$,c:H,d:g$,e:g$,f:DAe,g:m$,G:p$,H:y$,I:y$,j:RAe,L:MAe,m:IAe,M:PAe,p:R,q:CAe,Q:OAe,s:LAe,S:NAe,u:TAe,U:EAe,V:SAe,w:bAe,W:xAe,x:Y,X:K,y:m$,Y:p$,Z:AAe,"%":kAe};I.x=q(n,I),I.X=q(r,I),I.c=q(e,I),N.x=q(n,N),N.X=q(r,N),N.c=q(e,N);function q(ye,Ce){return function(ke){var _e=[],Ze=-1,Ue=0,Le=ye.length,st,Pe,qe;for(ke instanceof Date||(ke=new Date(+ke));++Ze<Le;)ye.charCodeAt(Ze)===37&&(_e.push(ye.slice(Ue,Ze)),(Pe=h$[st=ye.charAt(++Ze)])!=null?st=ye.charAt(++Ze):Pe=st==="e"?" ":"0",(qe=Ce[st])&&(st=qe(ke,Pe)),_e.push(st),Ue=Ze+1);return _e.push(ye.slice(Ue,Ze)),_e.join("")}}function P(ye,Ce){return function(ke){var _e=Nm(1900,void 0,1),Ze=O(_e,ye,ke+="",0),Ue,Le;if(Ze!=ke.length)return null;if("Q"in _e)return new Date(_e.Q);if("s"in _e)return new Date(_e.s*1e3+("L"in _e?_e.L:0));if(Ce&&!("Z"in _e)&&(_e.Z=0),"p"in _e&&(_e.H=_e.H%12+_e.p*12),_e.m===void 0&&(_e.m="q"in _e?_e.q:0),"V"in _e){if(_e.V<1||_e.V>53)return null;"w"in _e||(_e.w=1),"Z"in _e?(Ue=OA(Nm(_e.y,0,1)),Le=Ue.getUTCDay(),Ue=Le>4||Le===0?Cw.ceil(Ue):Cw(Ue),Ue=oT.offset(Ue,(_e.V-1)*7),_e.y=Ue.getUTCFullYear(),_e.m=Ue.getUTCMonth(),_e.d=Ue.getUTCDate()+(_e.w+6)%7):(Ue=kA(Nm(_e.y,0,1)),Le=Ue.getDay(),Ue=Le>4||Le===0?Aw.ceil(Ue):Aw(Ue),Ue=Fy.offset(Ue,(_e.V-1)*7),_e.y=Ue.getFullYear(),_e.m=Ue.getMonth(),_e.d=Ue.getDate()+(_e.w+6)%7)}else("W"in _e||"U"in _e)&&("w"in _e||(_e.w="u"in _e?_e.u%7:"W"in _e?1:0),Le="Z"in _e?OA(Nm(_e.y,0,1)).getUTCDay():kA(Nm(_e.y,0,1)).getDay(),_e.m=0,_e.d="W"in _e?(_e.w+6)%7+_e.W*7-(Le+5)%7:_e.w+_e.U*7-(Le+6)%7);return"Z"in _e?(_e.H+=_e.Z/100|0,_e.M+=_e.Z%100,OA(_e)):kA(_e)}}function O(ye,Ce,ke,_e){for(var Ze=0,Ue=Ce.length,Le=ke.length,st,Pe;Ze<Ue;){if(_e>=Le)return-1;if(st=Ce.charCodeAt(Ze++),st===37){if(st=Ce.charAt(Ze++),Pe=V[st in h$?Ce.charAt(Ze++):st],!Pe||(_e=Pe(ye,ke,_e))<0)return-1}else if(st!=ke.charCodeAt(_e++))return-1}return _e}function R(ye,Ce,ke){var _e=c.exec(Ce.slice(ke));return _e?(ye.p=d.get(_e[0].toLowerCase()),ke+_e[0].length):-1}function U(ye,Ce,ke){var _e=_.exec(Ce.slice(ke));return _e?(ye.w=S.get(_e[0].toLowerCase()),ke+_e[0].length):-1}function L(ye,Ce,ke){var _e=h.exec(Ce.slice(ke));return _e?(ye.w=g.get(_e[0].toLowerCase()),ke+_e[0].length):-1}function F(ye,Ce,ke){var _e=x.exec(Ce.slice(ke));return _e?(ye.m=C.get(_e[0].toLowerCase()),ke+_e[0].length):-1}function $(ye,Ce,ke){var _e=b.exec(Ce.slice(ke));return _e?(ye.m=T.get(_e[0].toLowerCase()),ke+_e[0].length):-1}function H(ye,Ce,ke){return O(ye,e,Ce,ke)}function Y(ye,Ce,ke){return O(ye,n,Ce,ke)}function K(ye,Ce,ke){return O(ye,r,Ce,ke)}function Q(ye){return s[ye.getDay()]}function re(ye){return o[ye.getDay()]}function X(ye){return u[ye.getMonth()]}function G(ye){return a[ye.getMonth()]}function te(ye){return i[+(ye.getHours()>=12)]}function ee(ye){return 1+~~(ye.getMonth()/3)}function ae(ye){return s[ye.getUTCDay()]}function J(ye){return o[ye.getUTCDay()]}function ne(ye){return u[ye.getUTCMonth()]}function oe(ye){return a[ye.getUTCMonth()]}function we(ye){return i[+(ye.getUTCHours()>=12)]}function Ie(ye){return 1+~~(ye.getUTCMonth()/3)}return{format:function(ye){var Ce=q(ye+="",I);return Ce.toString=function(){return ye},Ce},parse:function(ye){var Ce=P(ye+="",!1);return Ce.toString=function(){return ye},Ce},utcFormat:function(ye){var Ce=q(ye+="",N);return Ce.toString=function(){return ye},Ce},utcParse:function(ye){var Ce=P(ye+="",!0);return Ce.toString=function(){return ye},Ce}}}var h$={"-":"",_:" ",0:"0"},_r=/^\s*\d+/,vAe=/^%/,_Ae=/[\\^$*+?|[\]().{}]/g;function xt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function wAe(t){return t.replace(_Ae,"\\$&")}function Mm(t){return new RegExp("^(?:"+t.map(wAe).join("|")+")","i")}function Dm(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function bAe(t,e,n){var r=_r.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function TAe(t,e,n){var r=_r.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function EAe(t,e,n){var r=_r.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function SAe(t,e,n){var r=_r.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function xAe(t,e,n){var r=_r.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function p$(t,e,n){var r=_r.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function m$(t,e,n){var r=_r.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function AAe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function CAe(t,e,n){var r=_r.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function IAe(t,e,n){var r=_r.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function g$(t,e,n){var r=_r.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function RAe(t,e,n){var r=_r.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function y$(t,e,n){var r=_r.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function PAe(t,e,n){var r=_r.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function NAe(t,e,n){var r=_r.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function MAe(t,e,n){var r=_r.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function DAe(t,e,n){var r=_r.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function kAe(t,e,n){var r=vAe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function OAe(t,e,n){var r=_r.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function LAe(t,e,n){var r=_r.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function v$(t,e){return xt(t.getDate(),e,2)}function VAe(t,e){return xt(t.getHours(),e,2)}function UAe(t,e){return xt(t.getHours()%12||12,e,2)}function qAe(t,e){return xt(1+Fy.count($a(t),t),e,3)}function lee(t,e){return xt(t.getMilliseconds(),e,3)}function FAe(t,e){return lee(t,e)+"000"}function BAe(t,e){return xt(t.getMonth()+1,e,2)}function $Ae(t,e){return xt(t.getMinutes(),e,2)}function zAe(t,e){return xt(t.getSeconds(),e,2)}function HAe(t){var e=t.getDay();return e===0?7:e}function GAe(t,e){return xt(sT.count($a(t)-1,t),e,2)}function uee(t){var e=t.getDay();return e>=4||e===0?Th(t):Th.ceil(t)}function jAe(t,e){return t=uee(t),xt(Th.count($a(t),t)+($a(t).getDay()===4),e,2)}function KAe(t){return t.getDay()}function WAe(t,e){return xt(Aw.count($a(t)-1,t),e,2)}function YAe(t,e){return xt(t.getFullYear()%100,e,2)}function JAe(t,e){return t=uee(t),xt(t.getFullYear()%100,e,2)}function XAe(t,e){return xt(t.getFullYear()%1e4,e,4)}function QAe(t,e){var n=t.getDay();return t=n>=4||n===0?Th(t):Th.ceil(t),xt(t.getFullYear()%1e4,e,4)}function ZAe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+xt(e/60|0,"0",2)+xt(e%60,"0",2)}function _$(t,e){return xt(t.getUTCDate(),e,2)}function e1e(t,e){return xt(t.getUTCHours(),e,2)}function t1e(t,e){return xt(t.getUTCHours()%12||12,e,2)}function n1e(t,e){return xt(1+oT.count(za(t),t),e,3)}function cee(t,e){return xt(t.getUTCMilliseconds(),e,3)}function r1e(t,e){return cee(t,e)+"000"}function i1e(t,e){return xt(t.getUTCMonth()+1,e,2)}function o1e(t,e){return xt(t.getUTCMinutes(),e,2)}function s1e(t,e){return xt(t.getUTCSeconds(),e,2)}function a1e(t){var e=t.getUTCDay();return e===0?7:e}function l1e(t,e){return xt(aT.count(za(t)-1,t),e,2)}function fee(t){var e=t.getUTCDay();return e>=4||e===0?Eh(t):Eh.ceil(t)}function u1e(t,e){return t=fee(t),xt(Eh.count(za(t),t)+(za(t).getUTCDay()===4),e,2)}function c1e(t){return t.getUTCDay()}function f1e(t,e){return xt(Cw.count(za(t)-1,t),e,2)}function d1e(t,e){return xt(t.getUTCFullYear()%100,e,2)}function h1e(t,e){return t=fee(t),xt(t.getUTCFullYear()%100,e,2)}function p1e(t,e){return xt(t.getUTCFullYear()%1e4,e,4)}function m1e(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Eh(t):Eh.ceil(t),xt(t.getUTCFullYear()%1e4,e,4)}function g1e(){return"+0000"}function w$(){return"%"}function b$(t){return+t}function T$(t){return Math.floor(+t/1e3)}var vd,dee,hee;y1e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function y1e(t){return vd=yAe(t),dee=vd.format,vd.parse,hee=vd.utcFormat,vd.utcParse,vd}function v1e(t){return new Date(t)}function _1e(t){return t instanceof Date?+t:+new Date(+t)}function AO(t,e,n,r,i,o,s,a,u,c){var d=dO(),h=d.invert,g=d.domain,_=c(".%L"),S=c(":%S"),b=c("%I:%M"),T=c("%I %p"),x=c("%a %d"),C=c("%b %d"),I=c("%B"),N=c("%Y");function V(q){return(u(q)<q?_:a(q)<q?S:s(q)<q?b:o(q)<q?T:r(q)<q?i(q)<q?x:C:n(q)<q?I:N)(q)}return d.invert=function(q){return new Date(h(q))},d.domain=function(q){return arguments.length?g(Array.from(q,_1e)):g().map(v1e)},d.ticks=function(q){var P=g();return t(P[0],P[P.length-1],q??10)},d.tickFormat=function(q,P){return P==null?V:c(P)},d.nice=function(q){var P=g();return(!q||typeof q.range!="function")&&(q=e(P[0],P[P.length-1],q??10)),q?g(ZZ(P,q)):d},d.copy=function(){return qy(d,AO(t,e,n,r,i,o,s,a,u,c))},d}function w1e(){return Io.apply(AO(mAe,gAe,$a,SO,sT,Fy,TO,wO,xc,dee).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function b1e(){return Io.apply(AO(hAe,pAe,za,xO,aT,oT,EO,bO,xc,hee).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function lT(){var t=0,e=1,n,r,i,o,s=ti,a=!1,u;function c(h){return h==null||isNaN(h=+h)?u:s(i===0?.5:(h=(o(h)-n)*i,a?Math.max(0,Math.min(1,h)):h))}c.domain=function(h){return arguments.length?([t,e]=h,n=o(t=+t),r=o(e=+e),i=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(h){return arguments.length?(a=!!h,c):a},c.interpolator=function(h){return arguments.length?(s=h,c):s};function d(h){return function(g){var _,S;return arguments.length?([_,S]=g,s=h(_,S),c):[s(0),s(1)]}}return c.range=d(Jh),c.rangeRound=d(fO),c.unknown=function(h){return arguments.length?(u=h,c):u},function(h){return o=h,n=h(t),r=h(e),i=n===r?0:1/(r-n),c}}function Su(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function pee(){var t=Eu(lT()(ti));return t.copy=function(){return Su(t,pee())},nl.apply(t,arguments)}function mee(){var t=mO(lT()).domain([1,10]);return t.copy=function(){return Su(t,mee()).base(t.base())},nl.apply(t,arguments)}function gee(){var t=gO(lT());return t.copy=function(){return Su(t,gee()).constant(t.constant())},nl.apply(t,arguments)}function CO(){var t=yO(lT());return t.copy=function(){return Su(t,CO()).exponent(t.exponent())},nl.apply(t,arguments)}function T1e(){return CO.apply(null,arguments).exponent(.5)}function yee(){var t=[],e=ti;function n(r){if(r!=null&&!isNaN(r=+r))return e((Vy(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Zl),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,o)=>exe(t,o/r))},n.copy=function(){return yee(e).domain(t)},nl.apply(n,arguments)}function uT(){var t=0,e=.5,n=1,r=1,i,o,s,a,u,c=ti,d,h=!1,g;function _(b){return isNaN(b=+b)?g:(b=.5+((b=+d(b))-o)*(r*b<r*o?a:u),c(h?Math.max(0,Math.min(1,b)):b))}_.domain=function(b){return arguments.length?([t,e,n]=b,i=d(t=+t),o=d(e=+e),s=d(n=+n),a=i===o?0:.5/(o-i),u=o===s?0:.5/(s-o),r=o<i?-1:1,_):[t,e,n]},_.clamp=function(b){return arguments.length?(h=!!b,_):h},_.interpolator=function(b){return arguments.length?(c=b,_):c};function S(b){return function(T){var x,C,I;return arguments.length?([x,C,I]=T,c=kxe(b,[x,C,I]),_):[c(0),c(.5),c(1)]}}return _.range=S(Jh),_.rangeRound=S(fO),_.unknown=function(b){return arguments.length?(g=b,_):g},function(b){return d=b,i=b(t),o=b(e),s=b(n),a=i===o?0:.5/(o-i),u=o===s?0:.5/(s-o),r=o<i?-1:1,_}}function vee(){var t=Eu(uT()(ti));return t.copy=function(){return Su(t,vee())},nl.apply(t,arguments)}function _ee(){var t=mO(uT()).domain([.1,1,10]);return t.copy=function(){return Su(t,_ee()).base(t.base())},nl.apply(t,arguments)}function wee(){var t=gO(uT());return t.copy=function(){return Su(t,wee()).constant(t.constant())},nl.apply(t,arguments)}function IO(){var t=yO(uT());return t.copy=function(){return Su(t,IO()).exponent(t.exponent())},nl.apply(t,arguments)}function E1e(){return IO.apply(null,arguments).exponent(.5)}const Jm=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:lO,scaleDiverging:vee,scaleDivergingLog:_ee,scaleDivergingPow:IO,scaleDivergingSqrt:E1e,scaleDivergingSymlog:wee,scaleIdentity:QZ,scaleImplicit:WM,scaleLinear:XZ,scaleLog:eee,scaleOrdinal:aO,scalePoint:rxe,scalePow:vO,scaleQuantile:ree,scaleQuantize:iee,scaleRadial:nee,scaleSequential:pee,scaleSequentialLog:mee,scaleSequentialPow:CO,scaleSequentialQuantile:yee,scaleSequentialSqrt:T1e,scaleSequentialSymlog:gee,scaleSqrt:rAe,scaleSymlog:tee,scaleThreshold:oee,scaleTime:w1e,scaleUtc:b1e,tickFormat:JZ},Symbol.toStringTag,{value:"Module"}));var xu=t=>t.chartData,S1e=ve([xu],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),RO=(t,e,n,r)=>r?S1e(t):xu(t);function Sh(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(zi(e)&&zi(n))return!0}return!1}function E$(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function x1e(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,o;if(zi(n))i=n;else if(typeof n=="function")return;if(zi(r))o=r;else if(typeof r=="function")return;var s=[i,o];if(Sh(s))return s}}function A1e(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(Sh(r))return E$(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,o]=t,s,a;if(i==="auto")e!=null&&(s=Math.min(...e));else if(ot(i))s=i;else if(typeof i=="function")try{e!=null&&(s=i(e==null?void 0:e[0]))}catch{}else if(typeof i=="string"&&p6.test(i)){var u=p6.exec(i);if(u==null||e==null)s=void 0;else{var c=+u[1];s=e[0]-c}}else s=e==null?void 0:e[0];if(o==="auto")e!=null&&(a=Math.max(...e));else if(ot(o))a=o;else if(typeof o=="function")try{e!=null&&(a=o(e==null?void 0:e[1]))}catch{}else if(typeof o=="string"&&m6.test(o)){var d=m6.exec(o);if(d==null||e==null)a=void 0;else{var h=+d[1];a=e[1]+h}}else a=e==null?void 0:e[1];var g=[s,a];if(Sh(g))return e==null?g:E$(g,e,n)}}}var Xh=1e9,C1e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},NO,cn=!0,Ao="[DecimalError] ",kc=Ao+"Invalid argument: ",PO=Ao+"Exponent out of range: ",Qh=Math.floor,dc=Math.pow,I1e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ki,cr=1e7,Zt=7,bee=9007199254740991,Iw=Qh(bee/Zt),Fe={};Fe.absoluteValue=Fe.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Fe.comparedTo=Fe.cmp=function(t){var e,n,r,i,o=this;if(t=new o.constructor(t),o.s!==t.s)return o.s||-t.s;if(o.e!==t.e)return o.e>t.e^o.s<0?1:-1;for(r=o.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(o.d[e]!==t.d[e])return o.d[e]>t.d[e]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1};Fe.decimalPlaces=Fe.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Zt;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Fe.dividedBy=Fe.div=function(t){return Na(this,new this.constructor(t))};Fe.dividedToIntegerBy=Fe.idiv=function(t){var e=this,n=e.constructor;return jt(Na(e,new n(t),0,1),n.precision)};Fe.equals=Fe.eq=function(t){return!this.cmp(t)};Fe.exponent=function(){return $n(this)};Fe.greaterThan=Fe.gt=function(t){return this.cmp(t)>0};Fe.greaterThanOrEqualTo=Fe.gte=function(t){return this.cmp(t)>=0};Fe.isInteger=Fe.isint=function(){return this.e>this.d.length-2};Fe.isNegative=Fe.isneg=function(){return this.s<0};Fe.isPositive=Fe.ispos=function(){return this.s>0};Fe.isZero=function(){return this.s===0};Fe.lessThan=Fe.lt=function(t){return this.cmp(t)<0};Fe.lessThanOrEqualTo=Fe.lte=function(t){return this.cmp(t)<1};Fe.logarithm=Fe.log=function(t){var e,n=this,r=n.constructor,i=r.precision,o=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(ki))throw Error(Ao+"NaN");if(n.s<1)throw Error(Ao+(n.s?"NaN":"-Infinity"));return n.eq(ki)?new r(0):(cn=!1,e=Na(ey(n,o),ey(t,o),o),cn=!0,jt(e,i))};Fe.minus=Fe.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?See(e,t):Tee(e,(t.s=-t.s,t))};Fe.modulo=Fe.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Ao+"NaN");return n.s?(cn=!1,e=Na(n,t,0,1).times(t),cn=!0,n.minus(e)):jt(new r(n),i)};Fe.naturalExponential=Fe.exp=function(){return Eee(this)};Fe.naturalLogarithm=Fe.ln=function(){return ey(this)};Fe.negated=Fe.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Fe.plus=Fe.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Tee(e,t):See(e,(t.s=-t.s,t))};Fe.precision=Fe.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(kc+t);if(e=$n(i)+1,r=i.d.length-1,n=r*Zt+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Fe.squareRoot=Fe.sqrt=function(){var t,e,n,r,i,o,s,a=this,u=a.constructor;if(a.s<1){if(!a.s)return new u(0);throw Error(Ao+"NaN")}for(t=$n(a),cn=!1,i=Math.sqrt(+a),i==0||i==1/0?(e=Ls(a.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Qh((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new u(e)):r=new u(i.toString()),n=u.precision,i=s=n+3;;)if(o=r,r=o.plus(Na(a,o,s+2)).times(.5),Ls(o.d).slice(0,s)===(e=Ls(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(jt(o,n+1,0),o.times(o).eq(a)){r=o;break}}else if(e!="9999")break;s+=4}return cn=!0,jt(r,n)};Fe.times=Fe.mul=function(t){var e,n,r,i,o,s,a,u,c,d=this,h=d.constructor,g=d.d,_=(t=new h(t)).d;if(!d.s||!t.s)return new h(0);for(t.s*=d.s,n=d.e+t.e,u=g.length,c=_.length,u<c&&(o=g,g=_,_=o,s=u,u=c,c=s),o=[],s=u+c,r=s;r--;)o.push(0);for(r=c;--r>=0;){for(e=0,i=u+r;i>r;)a=o[i]+_[r]*g[i-r-1]+e,o[i--]=a%cr|0,e=a/cr|0;o[i]=(o[i]+e)%cr|0}for(;!o[--s];)o.pop();return e?++n:o.shift(),t.d=o,t.e=n,cn?jt(t,h.precision):t};Fe.toDecimalPlaces=Fe.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(js(t,0,Xh),e===void 0?e=r.rounding:js(e,0,8),jt(n,t+$n(n)+1,e))};Fe.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Xc(r,!0):(js(t,0,Xh),e===void 0?e=i.rounding:js(e,0,8),r=jt(new i(r),t+1,e),n=Xc(r,!0,t+1)),n};Fe.toFixed=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?Xc(i):(js(t,0,Xh),e===void 0?e=o.rounding:js(e,0,8),r=jt(new o(i),t+$n(i)+1,e),n=Xc(r.abs(),!1,t+$n(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Fe.toInteger=Fe.toint=function(){var t=this,e=t.constructor;return jt(new e(t),$n(t)+1,e.rounding)};Fe.toNumber=function(){return+this};Fe.toPower=Fe.pow=function(t){var e,n,r,i,o,s,a=this,u=a.constructor,c=12,d=+(t=new u(t));if(!t.s)return new u(ki);if(a=new u(a),!a.s){if(t.s<1)throw Error(Ao+"Infinity");return a}if(a.eq(ki))return a;if(r=u.precision,t.eq(ki))return jt(a,r);if(e=t.e,n=t.d.length-1,s=e>=n,o=a.s,s){if((n=d<0?-d:d)<=bee){for(i=new u(ki),e=Math.ceil(r/Zt+4),cn=!1;n%2&&(i=i.times(a),x$(i.d,e)),n=Qh(n/2),n!==0;)a=a.times(a),x$(a.d,e);return cn=!0,t.s<0?new u(ki).div(i):jt(i,r)}}else if(o<0)throw Error(Ao+"NaN");return o=o<0&&t.d[Math.max(e,n)]&1?-1:1,a.s=1,cn=!1,i=t.times(ey(a,r+c)),cn=!0,i=Eee(i),i.s=o,i};Fe.toPrecision=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?(n=$n(i),r=Xc(i,n<=o.toExpNeg||n>=o.toExpPos)):(js(t,1,Xh),e===void 0?e=o.rounding:js(e,0,8),i=jt(new o(i),t,e),n=$n(i),r=Xc(i,t<=n||n<=o.toExpNeg,t)),r};Fe.toSignificantDigits=Fe.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(js(t,1,Xh),e===void 0?e=r.rounding:js(e,0,8)),jt(new r(n),t,e)};Fe.toString=Fe.valueOf=Fe.val=Fe.toJSON=Fe[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=$n(t),n=t.constructor;return Xc(t,e<=n.toExpNeg||e>=n.toExpPos)};function Tee(t,e){var n,r,i,o,s,a,u,c,d=t.constructor,h=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),cn?jt(e,h):e;if(u=t.d,c=e.d,s=t.e,i=e.e,u=u.slice(),o=s-i,o){for(o<0?(r=u,o=-o,a=c.length):(r=c,i=s,a=u.length),s=Math.ceil(h/Zt),a=s>a?s+1:a+1,o>a&&(o=a,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for(a=u.length,o=c.length,a-o<0&&(o=a,r=c,c=u,u=r),n=0;o;)n=(u[--o]=u[o]+c[o]+n)/cr|0,u[o]%=cr;for(n&&(u.unshift(n),++i),a=u.length;u[--a]==0;)u.pop();return e.d=u,e.e=i,cn?jt(e,h):e}function js(t,e,n){if(t!==~~t||t<e||t>n)throw Error(kc+t)}function Ls(t){var e,n,r,i=t.length-1,o="",s=t[0];if(i>0){for(o+=s,e=1;e<i;e++)r=t[e]+"",n=Zt-r.length,n&&(o+=Ul(n)),o+=r;s=t[e],r=s+"",n=Zt-r.length,n&&(o+=Ul(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return o+s}var Na=(function(){function t(r,i){var o,s=0,a=r.length;for(r=r.slice();a--;)o=r[a]*i+s,r[a]=o%cr|0,s=o/cr|0;return s&&r.unshift(s),r}function e(r,i,o,s){var a,u;if(o!=s)u=o>s?1:-1;else for(a=u=0;a<o;a++)if(r[a]!=i[a]){u=r[a]>i[a]?1:-1;break}return u}function n(r,i,o){for(var s=0;o--;)r[o]-=s,s=r[o]<i[o]?1:0,r[o]=s*cr+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,s){var a,u,c,d,h,g,_,S,b,T,x,C,I,N,V,q,P,O,R=r.constructor,U=r.s==i.s?1:-1,L=r.d,F=i.d;if(!r.s)return new R(r);if(!i.s)throw Error(Ao+"Division by zero");for(u=r.e-i.e,P=F.length,V=L.length,_=new R(U),S=_.d=[],c=0;F[c]==(L[c]||0);)++c;if(F[c]>(L[c]||0)&&--u,o==null?C=o=R.precision:s?C=o+($n(r)-$n(i))+1:C=o,C<0)return new R(0);if(C=C/Zt+2|0,c=0,P==1)for(d=0,F=F[0],C++;(c<V||d)&&C--;c++)I=d*cr+(L[c]||0),S[c]=I/F|0,d=I%F|0;else{for(d=cr/(F[0]+1)|0,d>1&&(F=t(F,d),L=t(L,d),P=F.length,V=L.length),N=P,b=L.slice(0,P),T=b.length;T<P;)b[T++]=0;O=F.slice(),O.unshift(0),q=F[0],F[1]>=cr/2&&++q;do d=0,a=e(F,b,P,T),a<0?(x=b[0],P!=T&&(x=x*cr+(b[1]||0)),d=x/q|0,d>1?(d>=cr&&(d=cr-1),h=t(F,d),g=h.length,T=b.length,a=e(h,b,g,T),a==1&&(d--,n(h,P<g?O:F,g))):(d==0&&(a=d=1),h=F.slice()),g=h.length,g<T&&h.unshift(0),n(b,h,T),a==-1&&(T=b.length,a=e(F,b,P,T),a<1&&(d++,n(b,P<T?O:F,T))),T=b.length):a===0&&(d++,b=[0]),S[c++]=d,a&&b[0]?b[T++]=L[N]||0:(b=[L[N]],T=1);while((N++<V||b[0]!==void 0)&&C--)}return S[0]||S.shift(),_.e=u,jt(_,s?o+$n(_)+1:o)}})();function Eee(t,e){var n,r,i,o,s,a,u=0,c=0,d=t.constructor,h=d.precision;if($n(t)>16)throw Error(PO+$n(t));if(!t.s)return new d(ki);for(cn=!1,a=h,s=new d(.03125);t.abs().gte(.1);)t=t.times(s),c+=5;for(r=Math.log(dc(2,c))/Math.LN10*2+5|0,a+=r,n=i=o=new d(ki),d.precision=a;;){if(i=jt(i.times(t),a),n=n.times(++u),s=o.plus(Na(i,n,a)),Ls(s.d).slice(0,a)===Ls(o.d).slice(0,a)){for(;c--;)o=jt(o.times(o),a);return d.precision=h,e==null?(cn=!0,jt(o,h)):o}o=s}}function $n(t){for(var e=t.e*Zt,n=t.d[0];n>=10;n/=10)e++;return e}function LA(t,e,n){if(e>t.LN10.sd())throw cn=!0,n&&(t.precision=n),Error(Ao+"LN10 precision limit exceeded");return jt(new t(t.LN10),e)}function Ul(t){for(var e="";t--;)e+="0";return e}function ey(t,e){var n,r,i,o,s,a,u,c,d,h=1,g=10,_=t,S=_.d,b=_.constructor,T=b.precision;if(_.s<1)throw Error(Ao+(_.s?"NaN":"-Infinity"));if(_.eq(ki))return new b(0);if(e==null?(cn=!1,c=T):c=e,_.eq(10))return e==null&&(cn=!0),LA(b,c);if(c+=g,b.precision=c,n=Ls(S),r=n.charAt(0),o=$n(_),Math.abs(o)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)_=_.times(t),n=Ls(_.d),r=n.charAt(0),h++;o=$n(_),r>1?(_=new b("0."+n),o++):_=new b(r+"."+n.slice(1))}else return u=LA(b,c+2,T).times(o+""),_=ey(new b(r+"."+n.slice(1)),c-g).plus(u),b.precision=T,e==null?(cn=!0,jt(_,T)):_;for(a=s=_=Na(_.minus(ki),_.plus(ki),c),d=jt(_.times(_),c),i=3;;){if(s=jt(s.times(d),c),u=a.plus(Na(s,new b(i),c)),Ls(u.d).slice(0,c)===Ls(a.d).slice(0,c))return a=a.times(2),o!==0&&(a=a.plus(LA(b,c+2,T).times(o+""))),a=Na(a,new b(h),c),b.precision=T,e==null?(cn=!0,jt(a,T)):a;a=u,i+=2}}function S$(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Qh(n/Zt),t.d=[],r=(n+1)%Zt,n<0&&(r+=Zt),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Zt;r<i;)t.d.push(+e.slice(r,r+=Zt));e=e.slice(r),r=Zt-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),cn&&(t.e>Iw||t.e<-Iw))throw Error(PO+n)}else t.s=0,t.e=0,t.d=[0];return t}function jt(t,e,n){var r,i,o,s,a,u,c,d,h=t.d;for(s=1,o=h[0];o>=10;o/=10)s++;if(r=e-s,r<0)r+=Zt,i=e,c=h[d=0];else{if(d=Math.ceil((r+1)/Zt),o=h.length,d>=o)return t;for(c=o=h[d],s=1;o>=10;o/=10)s++;r%=Zt,i=r-Zt+s}if(n!==void 0&&(o=dc(10,s-i-1),a=c/o%10|0,u=e<0||h[d+1]!==void 0||c%o,u=n<4?(a||u)&&(n==0||n==(t.s<0?3:2)):a>5||a==5&&(n==4||u||n==6&&(r>0?i>0?c/dc(10,s-i):0:h[d-1])%10&1||n==(t.s<0?8:7))),e<1||!h[0])return u?(o=$n(t),h.length=1,e=e-o-1,h[0]=dc(10,(Zt-e%Zt)%Zt),t.e=Qh(-e/Zt)||0):(h.length=1,h[0]=t.e=t.s=0),t;if(r==0?(h.length=d,o=1,d--):(h.length=d+1,o=dc(10,Zt-r),h[d]=i>0?(c/dc(10,s-i)%dc(10,i)|0)*o:0),u)for(;;)if(d==0){(h[0]+=o)==cr&&(h[0]=1,++t.e);break}else{if(h[d]+=o,h[d]!=cr)break;h[d--]=0,o=1}for(r=h.length;h[--r]===0;)h.pop();if(cn&&(t.e>Iw||t.e<-Iw))throw Error(PO+$n(t));return t}function See(t,e){var n,r,i,o,s,a,u,c,d,h,g=t.constructor,_=g.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new g(t),cn?jt(e,_):e;if(u=t.d,h=e.d,r=e.e,c=t.e,u=u.slice(),s=c-r,s){for(d=s<0,d?(n=u,s=-s,a=h.length):(n=h,r=c,a=u.length),i=Math.max(Math.ceil(_/Zt),a)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=u.length,a=h.length,d=i<a,d&&(a=i),i=0;i<a;i++)if(u[i]!=h[i]){d=u[i]<h[i];break}s=0}for(d&&(n=u,u=h,h=n,e.s=-e.s),a=u.length,i=h.length-a;i>0;--i)u[a++]=0;for(i=h.length;i>s;){if(u[--i]<h[i]){for(o=i;o&&u[--o]===0;)u[o]=cr-1;--u[o],u[i]+=cr}u[i]-=h[i]}for(;u[--a]===0;)u.pop();for(;u[0]===0;u.shift())--r;return u[0]?(e.d=u,e.e=r,cn?jt(e,_):e):new g(0)}function Xc(t,e,n){var r,i=$n(t),o=Ls(t.d),s=o.length;return e?(n&&(r=n-s)>0?o=o.charAt(0)+"."+o.slice(1)+Ul(r):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+Ul(-i-1)+o,n&&(r=n-s)>0&&(o+=Ul(r))):i>=s?(o+=Ul(i+1-s),n&&(r=n-i-1)>0&&(o=o+"."+Ul(r))):((r=i+1)<s&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(o+="."),o+=Ul(r))),t.s<0?"-"+o:o}function x$(t,e){if(t.length>e)return t.length=e,!0}function xee(t){var e,n,r;function i(o){var s=this;if(!(s instanceof i))return new i(o);if(s.constructor=i,o instanceof i){s.s=o.s,s.e=o.e,s.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(kc+o);if(o>0)s.s=1;else if(o<0)o=-o,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(o===~~o&&o<1e7){s.e=0,s.d=[o];return}return S$(s,o.toString())}else if(typeof o!="string")throw Error(kc+o);if(o.charCodeAt(0)===45?(o=o.slice(1),s.s=-1):s.s=1,I1e.test(o))S$(s,o);else throw Error(kc+o)}if(i.prototype=Fe,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=xee,i.config=i.set=R1e,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function R1e(t){if(!t||typeof t!="object")throw Error(Ao+"Object expected");var e,n,r,i=["precision",1,Xh,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Qh(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(kc+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(kc+n+": "+r);return this}var NO=xee(C1e);ki=new NO(1);const Lt=NO;var P1e=t=>t,Aee={},Cee=t=>t===Aee,A$=t=>function e(){return arguments.length===0||arguments.length===1&&Cee(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},Iee=(t,e)=>t===1?e:A$(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=r.filter(s=>s!==Aee).length;return o>=t?e(...r):Iee(t-o,A$(function(){for(var s=arguments.length,a=new Array(s),u=0;u<s;u++)a[u]=arguments[u];var c=r.map(d=>Cee(d)?a.shift():d);return e(...c,...a)}))}),cT=t=>Iee(t.length,t),ZM=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},N1e=cT((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),M1e=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return P1e;var i=n.reverse(),o=i[0],s=i.slice(1);return function(){return s.reduce((a,u)=>u(a),o(...arguments))}},e2=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join(""),Ree=t=>{var e=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e&&i.every((s,a)=>{var u;return s===((u=e)===null||u===void 0?void 0:u[a])})||(e=i,n=t(...i)),n}};function Pee(t){var e;return t===0?e=1:e=Math.floor(new Lt(t).abs().log(10).toNumber())+1,e}function Nee(t,e,n){for(var r=new Lt(t),i=0,o=[];r.lt(e)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o}cT((t,e,n)=>{var r=+t,i=+e;return r+n*(i-r)});cT((t,e,n)=>{var r=e-+t;return r=r||1/0,(n-t)/r});cT((t,e,n)=>{var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});var Mee=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},Dee=(t,e,n)=>{if(t.lte(0))return new Lt(0);var r=Pee(t.toNumber()),i=new Lt(10).pow(r),o=t.div(i),s=r!==1?.05:.1,a=new Lt(Math.ceil(o.div(s).toNumber())).add(n).mul(s),u=a.mul(i);return e?new Lt(u.toNumber()):new Lt(Math.ceil(u.toNumber()))},D1e=(t,e,n)=>{var r=new Lt(1),i=new Lt(t);if(!i.isint()&&n){var o=Math.abs(t);o<1?(r=new Lt(10).pow(Pee(t)-1),i=new Lt(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new Lt(Math.floor(t)))}else t===0?i=new Lt(Math.floor((e-1)/2)):n||(i=new Lt(Math.floor(t)));var s=Math.floor((e-1)/2),a=M1e(N1e(u=>i.add(new Lt(u-s).mul(r)).toNumber()),ZM);return a(0,e)},kee=function(e,n,r,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new Lt(0),tickMin:new Lt(0),tickMax:new Lt(0)};var s=Dee(new Lt(n).sub(e).div(r-1),i,o),a;e<=0&&n>=0?a=new Lt(0):(a=new Lt(e).add(n).div(2),a=a.sub(new Lt(a).mod(s)));var u=Math.ceil(a.sub(e).div(s).toNumber()),c=Math.ceil(new Lt(n).sub(a).div(s).toNumber()),d=u+c+1;return d>r?kee(e,n,r,i,o+1):(d<r&&(c=n>0?c+(r-d):c,u=n>0?u:u+(r-d)),{step:s,tickMin:a.sub(new Lt(u).mul(s)),tickMax:a.add(new Lt(c).mul(s))})};function k1e(t){var[e,n]=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(r,2),[s,a]=Mee([e,n]);if(s===-1/0||a===1/0){var u=a===1/0?[s,...ZM(0,r-1).map(()=>1/0)]:[...ZM(0,r-1).map(()=>-1/0),a];return e>n?e2(u):u}if(s===a)return D1e(s,r,i);var{step:c,tickMin:d,tickMax:h}=kee(s,a,o,i,0),g=Nee(d,h.add(new Lt(.1).mul(c)),c);return e>n?e2(g):g}function O1e(t,e){var[n,r]=t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,s]=Mee([n,r]);if(o===-1/0||s===1/0)return[n,r];if(o===s)return[o];var a=Math.max(e,2),u=Dee(new Lt(s).sub(o).div(a-1),i,0),c=[...Nee(new Lt(o),new Lt(s),u),s];return i===!1&&(c=c.map(d=>Math.round(d))),n>r?e2(c):c}var L1e=Ree(k1e),V1e=Ree(O1e),Oee=t=>t.rootProps.maxBarSize,U1e=t=>t.rootProps.barGap,Lee=t=>t.rootProps.barCategoryGap,q1e=t=>t.rootProps.barSize,fT=t=>t.rootProps.stackOffset,MO=t=>t.options.chartName,DO=t=>t.rootProps.syncId,Vee=t=>t.rootProps.syncMethod,kO=t=>t.options.eventEmitter,wa={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Mi={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},dT=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},F1e={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:wa.angleAxisId,includeHidden:!1,name:void 0,reversed:wa.reversed,scale:wa.scale,tick:wa.tick,tickCount:void 0,ticks:void 0,type:wa.type,unit:void 0},B1e={allowDataOverflow:Mi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Mi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Mi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Mi.scale,tick:Mi.tick,tickCount:Mi.tickCount,ticks:void 0,type:Mi.type,unit:void 0},$1e={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:wa.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:wa.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:wa.scale,tick:wa.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},z1e={allowDataOverflow:Mi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Mi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Mi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Mi.scale,tick:Mi.tick,tickCount:Mi.tickCount,ticks:void 0,type:"category",unit:void 0},OO=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?$1e:F1e,LO=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?z1e:B1e,hT=t=>t.polarOptions,VO=ve([el,tl,vr],UTe),Uee=ve([hT,VO],(t,e)=>{if(t!=null)return Xo(t.innerRadius,e,0)}),qee=ve([hT,VO],(t,e)=>{if(t!=null)return Xo(t.outerRadius,e,e*.8)}),H1e=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},Fee=ve([hT],H1e);ve([OO,Fee],dT);var Bee=ve([VO,Uee,qee],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});ve([LO,Bee],dT);var $ee=ve([qt,hT,Uee,qee,el,tl],(t,e,n,r,i,o)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:s,cy:a,startAngle:u,endAngle:c}=e;return{cx:Xo(s,i,i/2),cy:Xo(a,o,o/2),innerRadius:n,outerRadius:r,startAngle:u,endAngle:c,clockWise:!1}}}),zn=(t,e)=>e,pT=(t,e,n)=>n;function UO(t){return t==null?void 0:t.id}var tr=t=>{var e=qt(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Zh=t=>t.tooltip.settings.axisId,wr=t=>{var e=tr(t),n=Zh(t);return By(t,e,n)},zee=ve([wr],t=>t==null?void 0:t.dataKey);function Hee(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:o}=n,s=new Map;return t.forEach(a=>{var u,c=(u=a.data)!==null&&u!==void 0?u:r;if(!(c==null||c.length===0)){var d=UO(a);c.forEach((h,g)=>{var _=o==null||i?g:String(ri(h,o,null)),S=ri(h,a.dataKey,0),b;s.has(_)?b=s.get(_):b={},Object.assign(b,{[d]:S}),s.set(_,b)})}}),Array.from(s.values())}function mT(t){return t.stackId!=null&&t.dataKey!=null}function C$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?C$(Object(n),!0).forEach(function(r){G1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function G1e(t,e,n){return(e=j1e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function j1e(t){var e=K1e(t,"string");return typeof e=="symbol"?e:e+""}function K1e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var t2=[0,"auto"],Ri={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Gee=(t,e)=>t.cartesianAxis.xAxis[e],Au=(t,e)=>{var n=Gee(t,e);return n??Ri},Pi={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:t2,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Oy},jee=(t,e)=>t.cartesianAxis.yAxis[e],Cu=(t,e)=>{var n=jee(t,e);return n??Pi},W1e={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},qO=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??W1e},yi=(t,e,n)=>{switch(e){case"xAxis":return Au(t,n);case"yAxis":return Cu(t,n);case"zAxis":return qO(t,n);case"angleAxis":return OO(t,n);case"radiusAxis":return LO(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Y1e=(t,e,n)=>{switch(e){case"xAxis":return Au(t,n);case"yAxis":return Cu(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},By=(t,e,n)=>{switch(e){case"xAxis":return Au(t,n);case"yAxis":return Cu(t,n);case"angleAxis":return OO(t,n);case"radiusAxis":return LO(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Kee=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function Wee(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var FO=t=>t.graphicalItems.cartesianItems,J1e=ve([zn,pT],Wee),Yee=(t,e,n)=>t.filter(n).filter(r=>(e==null?void 0:e.includeHidden)===!0?!0:!r.hide),$y=ve([FO,yi,J1e],Yee),Jee=ve([$y],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(mT)),Xee=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),Qee=ve([$y],Xee),Zee=t=>t.map(e=>e.data).filter(Boolean).flat(1),X1e=ve([$y],Zee),ete=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},BO=ve([X1e,RO],ete),tte=(t,e,n)=>(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:ri(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:ri(i,r)}))):t.map(r=>({value:r})),gT=ve([BO,yi,$y],tte);function nte(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function hf(t){return t.filter(e=>Gs(e)||e instanceof Date).map(Number).filter(e=>So(e)===!1)}function Q1e(t,e,n){return!n||typeof e!="number"||So(e)?[]:n.length?hf(n.flatMap(r=>{var i=ri(t,r.dataKey),o,s;if(Array.isArray(i)?[o,s]=i:o=s=i,!(!zi(o)||!zi(s)))return[e-o,e+s]})):[]}var Z1e=ve([Jee,RO,wr],Hee),rte=(t,e,n)=>{var r={},i=e.reduce((o,s)=>(s.stackId==null||(o[s.stackId]==null&&(o[s.stackId]=[]),o[s.stackId].push(s)),o),r);return Object.fromEntries(Object.entries(i).map(o=>{var[s,a]=o,u=a.map(UO);return[s,{stackedData:eEe(t,u,n),graphicalItems:a}]}))},n2=ve([Z1e,Jee,fT],rte),ite=(t,e,n)=>{var{dataStartIndex:r,dataEndIndex:i}=e;if(n!=="zAxis"){var o=oEe(t,r,i);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},eCe=ve([n2,xu,zn],ite),ote=(t,e,n,r,i)=>n.length>0?t.flatMap(o=>n.flatMap(s=>{var a,u,c=(a=r[s.id])===null||a===void 0?void 0:a.filter(h=>nte(i,h)),d=ri(o,(u=e.dataKey)!==null&&u!==void 0?u:s.dataKey);return{value:d,errorDomain:Q1e(o,d,c)}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(o=>({value:ri(o,e.dataKey),errorDomain:[]})):t.map(o=>({value:o,errorDomain:[]})),yT=t=>t.errorBars,ste=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>nte(n,r));ve([Qee,yT,zn],ste);var tCe=ve([BO,yi,Qee,yT,zn],ote);function nCe(t){var{value:e}=t;if(Gs(e)||e instanceof Date)return e}var I$=t=>{var e=t.flatMap(r=>[r.value,r.errorDomain]).flat(1),n=hf(e);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},rCe=(t,e,n)=>{var r=t.map(nCe).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&_Q(r))?VZ(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},$O=t=>{var e;if(t==null||!("domain"in t))return t2;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var n=hf(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:t2},Pw=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var o=i.flat(),s=Math.min(...o),a=Math.max(...o);return[s,a]}},ate=t=>t.referenceElements.dots,ep=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),iCe=ve([ate,zn,pT],ep),lte=t=>t.referenceElements.areas,oCe=ve([lte,zn,pT],ep),ute=t=>t.referenceElements.lines,sCe=ve([ute,zn,pT],ep),cte=(t,e)=>{var n=hf(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},aCe=ve(iCe,zn,cte),fte=(t,e)=>{var n=hf(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},lCe=ve([oCe,zn],fte),dte=(t,e)=>{var n=hf(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},uCe=ve(sCe,zn,dte),cCe=ve(aCe,uCe,lCe,(t,e,n)=>Pw(t,n,e)),fCe=ve([yi],$O),hte=(t,e,n,r,i,o,s)=>{var a=x1e(e,t.allowDataOverflow);if(a!=null)return a;var u=o==="vertical"&&s==="xAxis"||o==="horizontal"&&s==="yAxis",c=u?Pw(n,i,I$(r)):Pw(i,I$(r));return A1e(e,c,t.allowDataOverflow)},dCe=ve([yi,fCe,eCe,tCe,cCe,qt,zn],hte),hCe=[0,1],pte=(t,e,n,r,i,o,s)=>{if(!((t==null||n==null||n.length===0)&&s===void 0)){var{dataKey:a,type:u}=t,c=cf(e,o);return c&&a==null?VZ(0,n.length):u==="category"?rCe(r,t,c):i==="expand"?hCe:s}},zO=ve([yi,qt,BO,gT,fT,zn,dCe],pte),mte=(t,e,n,r,i)=>{if(t!=null){var{scale:o,type:s}=t;if(o==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":s==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":s==="category"?"band":"linear";if(typeof o=="string"){var a="scale".concat(My(o));return a in Jm?a:"point"}}},zy=ve([yi,qt,Kee,MO,zn],mte);function pCe(t){if(t!=null){if(t in Jm)return Jm[t]();var e="scale".concat(My(t));if(e in Jm)return Jm[e]()}}function HO(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var i=pCe(e);if(i!=null){var o=i.domain(n).range(r);return YTe(o),o}}}var gte=(t,e,n)=>{var r=$O(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Sh(t))return L1e(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Sh(t))return V1e(t,e.tickCount,e.allowDecimals)}},GO=ve([zO,By,zy],gte),yte=(t,e,n,r)=>{if(r!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&Sh(e)&&Array.isArray(n)&&n.length>0){var i=e[0],o=n[0],s=e[1],a=n[n.length-1];return[Math.min(i,o),Math.max(s,a)]}return e},mCe=ve([yi,zO,GO,zn],yte),gCe=ve(gT,yi,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(hf(t.map(a=>a.value))).sort((a,u)=>a-u);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var o=0;o<r.length-1;o++){var s=r[o+1]-r[o];n=Math.min(n,s)}return n/i}}),vte=ve(gCe,qt,Lee,vr,(t,e,n,r)=>r,(t,e,n,r,i)=>{if(!zi(t))return 0;var o=e==="vertical"?r.height:r.width;if(i==="gap")return t*o/2;if(i==="no-gap"){var s=Xo(n,t*o),a=t*o/2;return a-s-(a-s)/o*s}return 0}),yCe=(t,e)=>{var n=Au(t,e);return n==null||typeof n.padding!="string"?0:vte(t,"xAxis",e,n.padding)},vCe=(t,e)=>{var n=Cu(t,e);return n==null||typeof n.padding!="string"?0:vte(t,"yAxis",e,n.padding)},_Ce=ve(Au,yCe,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),wCe=ve(Cu,vCe,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),bCe=ve([vr,_Ce,rT,nT,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:o}=r;return i?[o.left,n.width-o.right]:[t.left+e.left,t.left+t.width-e.right]}),TCe=ve([vr,qt,wCe,rT,nT,(t,e,n)=>n],(t,e,n,r,i,o)=>{var{padding:s}=i;return o?[r.height-s.bottom,s.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),Hy=(t,e,n,r)=>{var i;switch(e){case"xAxis":return bCe(t,n,r);case"yAxis":return TCe(t,n,r);case"zAxis":return(i=qO(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return Fee(t);case"radiusAxis":return Bee(t,n);default:return}},_te=ve([yi,Hy],dT),tp=ve([yi,zy,mCe,_te],HO);ve([$y,yT,zn],ste);function wte(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var vT=(t,e)=>e,_T=(t,e,n)=>n,ECe=ve(eT,vT,_T,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(wte)),SCe=ve(tT,vT,_T,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(wte)),bte=(t,e)=>({width:t.width,height:e.height}),xCe=(t,e)=>{var n=typeof e.width=="number"?e.width:Oy;return{width:n,height:t.height}},Tte=ve(vr,Au,bte),ACe=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},CCe=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},ICe=ve(tl,vr,ECe,vT,_T,(t,e,n,r,i)=>{var o={},s;return n.forEach(a=>{var u=bte(e,a);s==null&&(s=ACe(e,r,t));var c=r==="top"&&!i||r==="bottom"&&i;o[a.id]=s-Number(c)*u.height,s+=(c?-1:1)*u.height}),o}),RCe=ve(el,vr,SCe,vT,_T,(t,e,n,r,i)=>{var o={},s;return n.forEach(a=>{var u=xCe(e,a);s==null&&(s=CCe(e,r,t));var c=r==="left"&&!i||r==="right"&&i;o[a.id]=s-Number(c)*u.width,s+=(c?-1:1)*u.width}),o}),PCe=(t,e)=>{var n=vr(t),r=Au(t,e);if(r!=null){var i=ICe(t,r.orientation,r.mirror),o=i[e];return o==null?{x:n.left,y:0}:{x:n.left,y:o}}},NCe=(t,e)=>{var n=vr(t),r=Cu(t,e);if(r!=null){var i=RCe(t,r.orientation,r.mirror),o=i[e];return o==null?{x:0,y:n.top}:{x:o,y:n.top}}},Ete=ve(vr,Cu,(t,e)=>{var n=typeof e.width=="number"?e.width:Oy;return{width:n,height:t.height}}),R$=(t,e,n)=>{switch(e){case"xAxis":return Tte(t,n).width;case"yAxis":return Ete(t,n).height;default:return}},Ste=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:o,dataKey:s}=n,a=cf(t,r),u=e.map(c=>c.value);if(s&&a&&o==="category"&&i&&_Q(u))return u}},jO=ve([qt,gT,yi,zn],Ste),xte=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:o}=n,s=cf(t,r);if(s&&(i==="number"||o!=="auto"))return e.map(a=>a.value)}},KO=ve([qt,gT,By,zn],xte);ve([qt,Y1e,zy,tp,jO,KO,Hy,GO,zn],(t,e,n,r,i,o,s,a,u)=>{if(e==null)return null;var c=cf(t,u);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:u,categoricalDomain:o,duplicateDomain:i,isCategorical:c,niceTicks:a,range:s,realScaleType:n,scale:r}});var MCe=(t,e,n,r,i,o,s,a,u)=>{if(!(e==null||r==null)){var c=cf(t,u),{type:d,ticks:h,tickCount:g}=e,_=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,S=d==="category"&&r.bandwidth?r.bandwidth()/_:0;S=u==="angleAxis"&&o!=null&&o.length>=2?Vi(o[0]-o[1])*2*S:S;var b=h||i;if(b){var T=b.map((x,C)=>{var I=s?s.indexOf(x):x;return{index:C,coordinate:r(I)+S,value:x,offset:S}});return T.filter(x=>!So(x.coordinate))}return c&&a?a.map((x,C)=>({coordinate:r(x)+S,value:x,index:C,offset:S})):r.ticks?r.ticks(g).map(x=>({coordinate:r(x)+S,value:x,offset:S})):r.domain().map((x,C)=>({coordinate:r(x)+S,value:s?s[x]:x,index:C,offset:S}))}},Ate=ve([qt,By,zy,tp,GO,Hy,jO,KO,zn],MCe),DCe=(t,e,n,r,i,o,s)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var a=cf(t,s),{tickCount:u}=e,c=0;return c=s==="angleAxis"&&(r==null?void 0:r.length)>=2?Vi(r[0]-r[1])*2*c:c,a&&o?o.map((d,h)=>({coordinate:n(d)+c,value:d,index:h,offset:c})):n.ticks?n.ticks(u).map(d=>({coordinate:n(d)+c,value:d,offset:c})):n.domain().map((d,h)=>({coordinate:n(d)+c,value:i?i[d]:d,index:h,offset:c}))}},xh=ve([qt,By,tp,Hy,jO,KO,zn],DCe),Ah=ve(yi,tp,(t,e)=>{if(!(t==null||e==null))return Rw(Rw({},t),{},{scale:e})}),kCe=ve([yi,zy,zO,_te],HO);ve((t,e,n)=>qO(t,n),kCe,(t,e)=>{if(!(t==null||e==null))return Rw(Rw({},t),{},{scale:e})});var OCe=ve([qt,eT,tT],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Cte=t=>t.options.defaultTooltipEventType,Ite=t=>t.options.validateTooltipEventTypes;function Rte(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function WO(t,e){var n=Cte(t),r=Ite(t);return Rte(e,n,r)}function LCe(t){return tt(e=>WO(e,t))}var Pte=(t,e)=>{var n,r=Number(e);if(!(So(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},VCe=t=>t.tooltip.settings,$l={active:!1,index:null,dataKey:void 0,coordinate:void 0},UCe={itemInteraction:{click:$l,hover:$l},axisInteraction:{click:$l,hover:$l},keyboardInteraction:$l,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Nte=Gi({name:"tooltip",initialState:UCe,reducers:{addTooltipEntrySettings(t,e){t.tooltipItemPayloads.push(e.payload)},removeTooltipEntrySettings(t,e){var n=Pa(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:qCe,removeTooltipEntrySettings:FCe,setTooltipSettingsState:BCe,setActiveMouseOverItemIndex:Mte,mouseLeaveItem:$Ce,mouseLeaveChart:Dte,setActiveClickItemIndex:zCe,setMouseOverAxisIndex:kte,setMouseClickAxisIndex:HCe,setSyncInteraction:r2,setKeyboardInteraction:i2}=Nte.actions,GCe=Nte.reducer;function P$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function H_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?P$(Object(n),!0).forEach(function(r){jCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jCe(t,e,n){return(e=KCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KCe(t){var e=WCe(t,"string");return typeof e=="symbol"?e:e+""}function WCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function YCe(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function JCe(t){return t.index!=null}var Ote=(t,e,n,r)=>{if(e==null)return $l;var i=YCe(t,e,n);if(i==null)return $l;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var o=t.settings.active===!0;if(JCe(i)){if(o)return H_(H_({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return H_(H_({},$l),{},{coordinate:i.coordinate})},YO=(t,e)=>{var n=t==null?void 0:t.index;if(n==null)return null;var r=Number(n);if(!zi(r))return n;var i=0,o=1/0;return e.length>0&&(o=e.length-1),String(Math.max(i,Math.min(r,o)))},Lte=(t,e,n,r,i,o,s,a)=>{if(!(o==null||a==null)){var u=s[0],c=u==null?void 0:a(u.positions,o);if(c!=null)return c;var d=i==null?void 0:i[Number(o)];if(d)switch(n){case"horizontal":return{x:d.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:d.coordinate}}}},Vte=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=t.itemInteraction.hover.dataKey:i=t.itemInteraction.click.dataKey,i==null&&r!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(o=>{var s;return((s=o.settings)===null||s===void 0?void 0:s.dataKey)===i})},Gy=t=>t.options.tooltipPayloadSearcher,np=t=>t.tooltip;function N$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function M$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?N$(Object(n),!0).forEach(function(r){XCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function XCe(t,e,n){return(e=QCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QCe(t){var e=ZCe(t,"string");return typeof e=="symbol"?e:e+""}function ZCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eIe(t,e){return t??e}var Ute=(t,e,n,r,i,o,s)=>{if(!(e==null||o==null)){var{chartData:a,computedData:u,dataStartIndex:c,dataEndIndex:d}=n,h=[];return t.reduce((g,_)=>{var S,{dataDefinedOnItem:b,settings:T}=_,x=eIe(b,a),C=Array.isArray(x)?SZ(x,c,d):x,I=(S=T==null?void 0:T.dataKey)!==null&&S!==void 0?S:r,N=T==null?void 0:T.nameKey,V;if(r&&Array.isArray(C)&&!Array.isArray(C[0])&&s==="axis"?V=q0e(C,r,i):V=o(C,e,u,N),Array.isArray(V))V.forEach(P=>{var O=M$(M$({},T),{},{name:P.name,unit:P.unit,color:void 0,fill:void 0});g.push(g6({tooltipEntrySettings:O,dataKey:P.dataKey,payload:P.payload,value:ri(P.payload,P.dataKey),name:P.name}))});else{var q;g.push(g6({tooltipEntrySettings:T,dataKey:I,payload:V,value:ri(V,I),name:(q=ri(V,N))!==null&&q!==void 0?q:T==null?void 0:T.name}))}return g},h)}},JO=ve([wr,qt,Kee,MO,tr],mte),tIe=ve([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),nIe=ve([tr,Zh],Wee),jy=ve([tIe,wr,nIe],Yee),rIe=ve([jy],t=>t.filter(mT)),iIe=ve([jy],Zee),rp=ve([iIe,xu],ete),oIe=ve([rIe,xu,wr],Hee),XO=ve([rp,wr,jy],tte),sIe=ve([wr],$O),aIe=ve([jy],t=>t.filter(mT)),lIe=ve([oIe,aIe,fT],rte),uIe=ve([lIe,xu,tr],ite),cIe=ve([jy],Xee),fIe=ve([rp,wr,cIe,yT,tr],ote),dIe=ve([ate,tr,Zh],ep),hIe=ve([dIe,tr],cte),pIe=ve([lte,tr,Zh],ep),mIe=ve([pIe,tr],fte),gIe=ve([ute,tr,Zh],ep),yIe=ve([gIe,tr],dte),vIe=ve([hIe,yIe,mIe],Pw),_Ie=ve([wr,sIe,uIe,fIe,vIe,qt,tr],hte),qte=ve([wr,qt,rp,XO,fT,tr,_Ie],pte),wIe=ve([qte,wr,JO],gte),bIe=ve([wr,qte,wIe,tr],yte),Fte=t=>{var e=tr(t),n=Zh(t),r=!1;return Hy(t,e,n,r)},Bte=ve([wr,Fte],dT),$te=ve([wr,JO,bIe,Bte],HO),TIe=ve([qt,XO,wr,tr],Ste),EIe=ve([qt,XO,wr,tr],xte),SIe=(t,e,n,r,i,o,s,a)=>{if(e){var{type:u}=e,c=cf(t,a);if(r){var d=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,h=u==="category"&&r.bandwidth?r.bandwidth()/d:0;return h=a==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?Vi(i[0]-i[1])*2*h:h,c&&s?s.map((g,_)=>({coordinate:r(g)+h,value:g,index:_,offset:h})):r.domain().map((g,_)=>({coordinate:r(g)+h,value:o?o[g]:g,index:_,offset:h}))}}},rl=ve([qt,wr,JO,$te,Fte,TIe,EIe,tr],SIe),QO=ve([Cte,Ite,VCe],(t,e,n)=>Rte(n.shared,t,e)),zte=t=>t.tooltip.settings.trigger,ZO=t=>t.tooltip.settings.defaultIndex,wT=ve([np,QO,zte,ZO],Ote),Ch=ve([wT,rp],YO),Hte=ve([rl,Ch],Pte),Gte=ve([wT],t=>{if(t)return t.dataKey}),jte=ve([np,QO,zte,ZO],Vte),xIe=ve([el,tl,qt,vr,rl,ZO,jte,Gy],Lte),AIe=ve([wT,xIe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),CIe=ve([wT],t=>t.active),IIe=ve([jte,Ch,xu,zee,Hte,Gy,QO],Ute);ve([IIe],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function D$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function k$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D$(Object(n),!0).forEach(function(r){RIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function RIe(t,e,n){return(e=PIe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PIe(t){var e=NIe(t,"string");return typeof e=="symbol"?e:e+""}function NIe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var MIe=()=>tt(wr),DIe=()=>{var t=MIe(),e=tt(rl),n=tt($te);return eO(k$(k$({},t),{},{scale:n}),e)},kIe=()=>tt(MO),eL=(t,e)=>e,Kte=(t,e,n)=>n,tL=(t,e,n,r)=>r,OIe=ve(rl,t=>Wb(t,e=>e.coordinate)),nL=ve([np,eL,Kte,tL],Ote),Wte=ve([nL,rp],YO),LIe=(t,e,n)=>{if(e!=null){var r=np(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},Yte=ve([np,eL,Kte,tL],Vte),Nw=ve([el,tl,qt,vr,rl,tL,Yte,Gy],Lte),VIe=ve([nL,Nw],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),Jte=ve(rl,Wte,Pte),UIe=ve([Yte,Wte,xu,zee,Jte,Gy,eL],Ute),qIe=ve([nL],t=>({isActive:t.active,activeIndex:t.index})),FIe=(t,e,n,r,i,o,s,a)=>{if(!(!t||!e||!r||!i||!o)){var u=sEe(t.chartX,t.chartY,e,n,a);if(u){var c=lEe(u,e),d=KTe(c,s,o,r,i),h=aEe(e,o,d,u);return{activeIndex:String(d),activeCoordinate:h}}}};function o2(){return o2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o2.apply(null,arguments)}function O$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function G_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?O$(Object(n),!0).forEach(function(r){BIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function BIe(t,e,n){return(e=$Ie(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $Ie(t){var e=zIe(t,"string");return typeof e=="symbol"?e:e+""}function zIe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function HIe(t){var{coordinate:e,payload:n,index:r,offset:i,tooltipAxisBandSize:o,layout:s,cursor:a,tooltipEventType:u,chartName:c}=t,d=e,h=n,g=r;if(!a||!d||c!=="ScatterChart"&&u!=="axis")return null;var _,S;if(c==="ScatterChart")_=d,S=rSe;else if(c==="BarChart")_=iSe(s,d,i,o),S=DZ;else if(s==="radial"){var{cx:b,cy:T,radius:x,startAngle:C,endAngle:I}=kZ(d);_={cx:b,cy:T,startAngle:C,endAngle:I,innerRadius:x,outerRadius:x},S=LZ}else _={points:VSe(s,d,i)},S=WEe;var N=typeof a=="object"&&"className"in a?a.className:void 0,V=G_(G_(G_(G_({stroke:"#ccc",pointerEvents:"none"},i),_),dr(a,!1)),{},{payload:h,payloadIndex:g,className:nn("recharts-tooltip-cursor",N)});return D.isValidElement(a)?D.cloneElement(a,V):D.createElement(S,V)}function GIe(t){var e=DIe(),n=EEe(),r=rO(),i=kIe();return D.createElement(HIe,o2({},t,{coordinate:t.coordinate,index:t.index,payload:t.payload,offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var Xte=D.createContext(null),jIe=()=>D.useContext(Xte),VA={exports:{}},L$;function KIe(){return L$||(L$=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(u,c,d){this.fn=u,this.context=c,this.once=d||!1}function o(u,c,d,h,g){if(typeof d!="function")throw new TypeError("The listener must be a function");var _=new i(d,h||u,g),S=n?n+c:c;return u._events[S]?u._events[S].fn?u._events[S]=[u._events[S],_]:u._events[S].push(_):(u._events[S]=_,u._eventsCount++),u}function s(u,c){--u._eventsCount===0?u._events=new r:delete u._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],d,h;if(this._eventsCount===0)return c;for(h in d=this._events)e.call(d,h)&&c.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(d)):c},a.prototype.listeners=function(c){var d=n?n+c:c,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var g=0,_=h.length,S=new Array(_);g<_;g++)S[g]=h[g].fn;return S},a.prototype.listenerCount=function(c){var d=n?n+c:c,h=this._events[d];return h?h.fn?1:h.length:0},a.prototype.emit=function(c,d,h,g,_,S){var b=n?n+c:c;if(!this._events[b])return!1;var T=this._events[b],x=arguments.length,C,I;if(T.fn){switch(T.once&&this.removeListener(c,T.fn,void 0,!0),x){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,d),!0;case 3:return T.fn.call(T.context,d,h),!0;case 4:return T.fn.call(T.context,d,h,g),!0;case 5:return T.fn.call(T.context,d,h,g,_),!0;case 6:return T.fn.call(T.context,d,h,g,_,S),!0}for(I=1,C=new Array(x-1);I<x;I++)C[I-1]=arguments[I];T.fn.apply(T.context,C)}else{var N=T.length,V;for(I=0;I<N;I++)switch(T[I].once&&this.removeListener(c,T[I].fn,void 0,!0),x){case 1:T[I].fn.call(T[I].context);break;case 2:T[I].fn.call(T[I].context,d);break;case 3:T[I].fn.call(T[I].context,d,h);break;case 4:T[I].fn.call(T[I].context,d,h,g);break;default:if(!C)for(V=1,C=new Array(x-1);V<x;V++)C[V-1]=arguments[V];T[I].fn.apply(T[I].context,C)}}return!0},a.prototype.on=function(c,d,h){return o(this,c,d,h,!1)},a.prototype.once=function(c,d,h){return o(this,c,d,h,!0)},a.prototype.removeListener=function(c,d,h,g){var _=n?n+c:c;if(!this._events[_])return this;if(!d)return s(this,_),this;var S=this._events[_];if(S.fn)S.fn===d&&(!g||S.once)&&(!h||S.context===h)&&s(this,_);else{for(var b=0,T=[],x=S.length;b<x;b++)(S[b].fn!==d||g&&!S[b].once||h&&S[b].context!==h)&&T.push(S[b]);T.length?this._events[_]=T.length===1?T[0]:T:s(this,_)}return this},a.prototype.removeAllListeners=function(c){var d;return c?(d=n?n+c:c,this._events[d]&&s(this,d)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(VA)),VA.exports}var WIe=KIe();const YIe=Co(WIe);var ty=new YIe,s2="recharts.syncEvent.tooltip",V$="recharts.syncEvent.brush";function JIe(t,e){if(e){var n=Number.parseInt(e,10);if(!So(n))return t==null?void 0:t[n]}}var XIe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},Qte=Gi({name:"options",initialState:XIe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),QIe=Qte.reducer,{createEventEmitter:ZIe}=Qte.actions;function eRe(t){return t.tooltip.syncInteraction}var tRe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},Zte=Gi({name:"chartData",initialState:tRe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:U$,setDataStartEndIndexes:nRe,setComputedData:q7e}=Zte.actions,rRe=Zte.reducer,iRe=["x","y"];function q$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?q$(Object(n),!0).forEach(function(r){oRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oRe(t,e,n){return(e=sRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sRe(t){var e=aRe(t,"string");return typeof e=="symbol"?e:e+""}function aRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lRe(t,e){if(t==null)return{};var n,r,i=uRe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function uRe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var ene=()=>{};function cRe(){var t=tt(DO),e=tt(kO),n=yr(),r=tt(Vee),i=tt(rl),o=rO(),s=nO(),a=tt(u=>u.rootProps.className);D.useEffect(()=>{if(t==null)return ene;var u=(c,d,h)=>{if(e!==h&&t===c){if(r==="index"){var g;if(s&&d!==null&&d!==void 0&&(g=d.payload)!==null&&g!==void 0&&g.coordinate){var _=d.payload.coordinate,{x:S,y:b}=_,T=lRe(_,iRe),x=sc(sc(sc({},T),typeof S=="number"&&{x:Math.max(s.x,Math.min(S,s.x+s.width))}),typeof b=="number"&&{y:Math.max(s.y,Math.min(b,s.y+s.height))}),C=sc(sc({},d),{},{payload:sc(sc({},d.payload),{},{coordinate:x})});n(C)}else n(d);return}if(i!=null){var I;if(typeof r=="function"){var N={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},V=r(i,N);I=i[V]}else r==="value"&&(I=i.find($=>String($.value)===d.payload.label));var{coordinate:q}=d.payload;if(I==null||d.payload.active===!1||q==null||s==null){n(r2({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:P,y:O}=q,R=Math.min(P,s.x+s.width),U=Math.min(O,s.y+s.height),L={x:o==="horizontal"?I.coordinate:R,y:o==="horizontal"?U:I.coordinate},F=r2({active:d.payload.active,coordinate:L,dataKey:d.payload.dataKey,index:String(I.index),label:d.payload.label});n(F)}}};return ty.on(s2,u),()=>{ty.off(s2,u)}},[a,n,e,t,r,i,o,s])}function fRe(){var t=tt(DO),e=tt(kO),n=yr();D.useEffect(()=>{if(t==null)return ene;var r=(i,o,s)=>{e!==s&&t===i&&n(nRe(o))};return ty.on(V$,r),()=>{ty.off(V$,r)}},[n,e,t])}function dRe(){var t=yr();D.useEffect(()=>{t(ZIe())},[t]),cRe(),fRe()}function hRe(t,e,n,r,i,o){var s=tt(g=>LIe(g,t,e)),a=tt(kO),u=tt(DO),c=tt(Vee),d=tt(eRe),h=d==null?void 0:d.active;D.useEffect(()=>{if(!h&&u!=null&&a!=null){var g=r2({active:o,coordinate:n,dataKey:s,index:i,label:typeof r=="number"?String(r):r});ty.emit(s2,u,g,a)}},[h,n,s,i,r,a,u,c,o])}function F$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function B$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F$(Object(n),!0).forEach(function(r){pRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pRe(t,e,n){return(e=mRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mRe(t){var e=gRe(t,"string");return typeof e=="symbol"?e:e+""}function gRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yRe(t){return t.dataKey}function vRe(t,e){return D.isValidElement(t)?D.cloneElement(t,e):typeof t=="function"?D.createElement(t,e):D.createElement(kEe,e)}var $$=[],_Re={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Ly.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function wRe(t){var e=Tu(t,_Re),{active:n,allowEscapeViewBox:r,animationDuration:i,animationEasing:o,content:s,filterNull:a,isAnimationActive:u,offset:c,payloadUniqBy:d,position:h,reverseDirection:g,useTranslate3d:_,wrapperStyle:S,cursor:b,shared:T,trigger:x,defaultIndex:C,portal:I,axisId:N}=e,V=yr(),q=typeof C=="number"?String(C):C;D.useEffect(()=>{V(BCe({shared:T,trigger:x,axisId:N,active:n,defaultIndex:q}))},[V,T,x,N,n,q]);var P=nO(),O=IZ(),R=LCe(T),{activeIndex:U,isActive:L}=tt(ne=>qIe(ne,R,x,q)),F=tt(ne=>UIe(ne,R,x,q)),$=tt(ne=>Jte(ne,R,x,q)),H=tt(ne=>VIe(ne,R,x,q)),Y=F,K=jIe(),Q=n??L,[re,X]=Lbe([Y,Q]),G=R==="axis"?$:void 0;hRe(R,x,H,G,U,Q);var te=I??K;if(te==null)return null;var ee=Y??$$;Q||(ee=$$),a&&ee.length&&(ee=lbe(Y.filter(ne=>ne.value!=null&&(ne.hide!==!0||e.includeHidden)),d,yRe));var ae=ee.length>0,J=D.createElement(BEe,{allowEscapeViewBox:r,animationDuration:i,animationEasing:o,isAnimationActive:u,active:Q,coordinate:H,hasPayload:ae,offset:c,position:h,reverseDirection:g,useTranslate3d:_,viewBox:P,wrapperStyle:S,lastBoundingBox:re,innerRef:X,hasPortalFromProps:!!I},vRe(s,B$(B$({},e),{},{payload:ee,label:G,active:Q,coordinate:H,accessibilityLayer:O})));return D.createElement(D.Fragment,null,xK.createPortal(J,te),Q&&D.createElement(GIe,{cursor:b,tooltipEventType:R,coordinate:H,payload:Y,index:U}))}var UA={},qA={},FA={},z$;function bRe(){return z$||(z$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:o}={}){let s,a=null;const u=o!=null&&o.includes("leading"),c=o==null||o.includes("trailing"),d=()=>{a!==null&&(n.apply(s,a),s=void 0,a=null)},h=()=>{c&&d(),b()};let g=null;const _=()=>{g!=null&&clearTimeout(g),g=setTimeout(()=>{g=null,h()},r)},S=()=>{g!==null&&(clearTimeout(g),g=null)},b=()=>{S(),s=void 0,a=null},T=()=>{d()},x=function(...C){if(i!=null&&i.aborted)return;s=this,a=C;const I=g==null;_(),u&&I&&d()};return x.schedule=_,x.cancel=b,x.flush=T,i==null||i.addEventListener("abort",b,{once:!0}),x}t.debounce=e})(FA)),FA}var H$;function TRe(){return H$||(H$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=bRe();function n(r,i=0,o={}){typeof o!="object"&&(o={});const{leading:s=!1,trailing:a=!0,maxWait:u}=o,c=Array(2);s&&(c[0]="leading"),a&&(c[1]="trailing");let d,h=null;const g=e.debounce(function(...b){d=r.apply(this,b),h=null},i,{edges:c}),_=function(...b){return u!=null&&(h===null&&(h=Date.now()),Date.now()-h>=u)?(d=r.apply(this,b),h=Date.now(),g.cancel(),g.schedule(),d):(g.apply(this,b),d)},S=()=>(g.flush(),d);return _.cancel=g.cancel,_.flush=S,_}t.debounce=n})(qA)),qA}var G$;function ERe(){return G$||(G$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=TRe();function n(r,i=0,o={}){const{leading:s=!0,trailing:a=!0}=o;return e.debounce(r,i,{leading:s,maxWait:i,trailing:a})}t.throttle=n})(UA)),UA}var BA,j$;function SRe(){return j$||(j$=1,BA=ERe().throttle),BA}var xRe=SRe();const ARe=Co(xRe);var $A=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o]};function K$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?K$(Object(n),!0).forEach(function(r){CRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function CRe(t,e,n){return(e=IRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IRe(t){var e=RRe(t,"string");return typeof e=="symbol"?e:e+""}function RRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var PRe=D.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i="100%",height:o="100%",minWidth:s=0,minHeight:a,maxHeight:u,children:c,debounce:d=0,id:h,className:g,onResize:_,style:S={}}=t,b=D.useRef(null),T=D.useRef();T.current=_,D.useImperativeHandle(e,()=>b.current);var[x,C]=D.useState({containerWidth:r.width,containerHeight:r.height}),I=D.useCallback((V,q)=>{C(P=>{var O=Math.round(V),R=Math.round(q);return P.containerWidth===O&&P.containerHeight===R?P:{containerWidth:O,containerHeight:R}})},[]);D.useEffect(()=>{var V=R=>{var U,{width:L,height:F}=R[0].contentRect;I(L,F),(U=T.current)===null||U===void 0||U.call(T,L,F)};d>0&&(V=ARe(V,d,{trailing:!0,leading:!1}));var q=new ResizeObserver(V),{width:P,height:O}=b.current.getBoundingClientRect();return I(P,O),q.observe(b.current),()=>{q.disconnect()}},[I,d]);var N=D.useMemo(()=>{var{containerWidth:V,containerHeight:q}=x;if(V<0||q<0)return null;$A(Ec(i)||Ec(o),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,o),$A(!n||n>0,"The aspect(%s) must be greater than zero.",n);var P=Ec(i)?V:i,O=Ec(o)?q:o;return n&&n>0&&(P?O=P/n:O&&(P=O*n),u&&O>u&&(O=u)),$A(P>0||O>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,P,O,i,o,s,a,n),D.Children.map(c,R=>D.cloneElement(R,{width:P,height:O,style:zA({width:P,height:O},R.props.style)}))},[n,c,o,u,a,s,x,i]);return D.createElement("div",{id:h?"".concat(h):void 0,className:nn("recharts-responsive-container",g),style:zA(zA({},S),{},{width:i,height:o,minWidth:s,minHeight:a,maxHeight:u}),ref:b},D.createElement("div",{style:{width:0,height:0,overflow:"visible"}},N))}),tne=t=>null;tne.displayName="Cell";function NRe(t,e,n){return(e=MRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MRe(t){var e=DRe(t,"string");return typeof e=="symbol"?e:e+""}function DRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class kRe{constructor(e){NRe(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function W$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ORe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?W$(Object(n),!0).forEach(function(r){LRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function LRe(t,e,n){return(e=VRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VRe(t){var e=URe(t,"string");return typeof e=="symbol"?e:e+""}function URe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qRe={cacheSize:2e3,enableCache:!0},nne=ORe({},qRe),Y$=new kRe(nne.cacheSize),FRe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},J$="recharts_measurement_span";function BRe(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",o=e.fontStyle||"",s=e.letterSpacing||"",a=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(o,"|").concat(s,"|").concat(a)}var X$=(t,e)=>{try{var n=document.getElementById(J$);n||(n=document.createElement("span"),n.setAttribute("id",J$),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,FRe,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},wg=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Ly.isSsr)return{width:0,height:0};if(!nne.enableCache)return X$(e,n);var r=BRe(e,n),i=Y$.get(r);if(i)return i;var o=X$(e,n);return Y$.set(r,o),o},Q$=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Z$=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,$Re=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,zRe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,rne={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},HRe=Object.keys(rne),Pd="NaN";function GRe(t,e){return t*rne[e]}class ci{static parse(e){var n,[,r,i]=(n=zRe.exec(e))!==null&&n!==void 0?n:[];return new ci(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,So(e)&&(this.unit=""),n!==""&&!$Re.test(n)&&(this.num=NaN,this.unit=""),HRe.includes(n)&&(this.num=GRe(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new ci(NaN,""):new ci(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new ci(NaN,""):new ci(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new ci(NaN,""):new ci(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new ci(NaN,""):new ci(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return So(this.num)}}function ine(t){if(t.includes(Pd))return Pd;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,o]=(n=Q$.exec(e))!==null&&n!==void 0?n:[],s=ci.parse(r??""),a=ci.parse(o??""),u=i==="*"?s.multiply(a):s.divide(a);if(u.isNaN())return Pd;e=e.replace(Q$,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var c,[,d,h,g]=(c=Z$.exec(e))!==null&&c!==void 0?c:[],_=ci.parse(d??""),S=ci.parse(g??""),b=h==="+"?_.add(S):_.subtract(S);if(b.isNaN())return Pd;e=e.replace(Z$,b.toString())}return e}var e5=/\(([^()]*)\)/;function jRe(t){for(var e=t,n;(n=e5.exec(e))!=null;){var[,r]=n;e=e.replace(e5,ine(r))}return e}function KRe(t){var e=t.replace(/\s+/g,"");return e=jRe(e),e=ine(e),e}function WRe(t){try{return KRe(t)}catch{return Pd}}function HA(t){var e=WRe(t.slice(5,-1));return e===Pd?"":e}var YRe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],JRe=["dx","dy","angle","className","breakAll"];function a2(){return a2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a2.apply(null,arguments)}function t5(t,e){if(t==null)return{};var n,r,i=XRe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function XRe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var one=/[ \f\n\r\t\v\u2028\u2029]+/,sne=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];mr(e)||(n?i=e.toString().split(""):i=e.toString().split(one));var o=i.map(a=>({word:a,width:wg(a,r).width})),s=n?0:wg(" ",r).width;return{wordsWithComputedWidth:o,spaceWidth:s}}catch{return null}},QRe=(t,e,n,r,i)=>{var{maxLines:o,children:s,style:a,breakAll:u}=t,c=ot(o),d=s,h=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return L.reduce((F,$)=>{var{word:H,width:Y}=$,K=F[F.length-1];if(K&&(r==null||i||K.width+Y+n<Number(r)))K.words.push(H),K.width+=Y+n;else{var Q={words:[H],width:Y};F.push(Q)}return F},[])},g=h(e),_=U=>U.reduce((L,F)=>L.width>F.width?L:F);if(!c||i)return g;var S=g.length>o||_(g).width>Number(r);if(!S)return g;for(var b="…",T=U=>{var L=d.slice(0,U),F=sne({breakAll:u,style:a,children:L+b}).wordsWithComputedWidth,$=h(F),H=$.length>o||_($).width>Number(r);return[H,$]},x=0,C=d.length-1,I=0,N;x<=C&&I<=d.length-1;){var V=Math.floor((x+C)/2),q=V-1,[P,O]=T(q),[R]=T(V);if(!P&&!R&&(x=V+1),P&&R&&(C=V-1),!P&&R){N=O;break}I++}return N||g},n5=t=>{var e=mr(t)?[]:t.toString().split(one);return[{words:e}]},ZRe=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:o,maxLines:s}=t;if((e||n)&&!Ly.isSsr){var a,u,c=sne({breakAll:o,children:r,style:i});if(c){var{wordsWithComputedWidth:d,spaceWidth:h}=c;a=d,u=h}else return n5(r);return QRe({breakAll:o,children:r,maxLines:s,style:i},a,u,e,n)}return n5(r)},r5="#808080",rL=D.forwardRef((t,e)=>{var{x:n=0,y:r=0,lineHeight:i="1em",capHeight:o="0.71em",scaleToFit:s=!1,textAnchor:a="start",verticalAnchor:u="end",fill:c=r5}=t,d=t5(t,YRe),h=D.useMemo(()=>ZRe({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:s,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,s,d.style,d.width]),{dx:g,dy:_,angle:S,className:b,breakAll:T}=d,x=t5(d,JRe);if(!Gs(n)||!Gs(r)||h.length===0)return null;var C=n+(ot(g)?g:0),I=r+(ot(_)?_:0),N;switch(u){case"start":N=HA("calc(".concat(o,")"));break;case"middle":N=HA("calc(".concat((h.length-1)/2," * -").concat(i," + (").concat(o," / 2))"));break;default:N=HA("calc(".concat(h.length-1," * -").concat(i,")"));break}var V=[];if(s){var q=h[0].width,{width:P}=d;V.push("scale(".concat(ot(P)?P/q:1,")"))}return S&&V.push("rotate(".concat(S,", ").concat(C,", ").concat(I,")")),V.length&&(x.transform=V.join(" ")),D.createElement("text",a2({},dr(x,!0),{ref:e,x:C,y:I,className:nn("recharts-text",b),textAnchor:a,fill:c.includes("url")?r5:c}),h.map((O,R)=>{var U=O.words.join(T?"":" ");return D.createElement("tspan",{x:C,dy:R===0?N:i,key:"".concat(U,"-").concat(R)},U)}))});rL.displayName="Text";var ePe=["labelRef"];function tPe(t,e){if(t==null)return{};var n,r,i=nPe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function nPe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function i5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Dn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?i5(Object(n),!0).forEach(function(r){rPe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rPe(t,e,n){return(e=iPe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iPe(t){var e=oPe(t,"string");return typeof e=="symbol"?e:e+""}function oPe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ba(){return ba=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ba.apply(null,arguments)}var ane=D.createContext(null),sPe=t=>{var{x:e,y:n,width:r,height:i,children:o}=t,s=D.useMemo(()=>({x:e,y:n,width:r,height:i}),[e,n,r,i]);return D.createElement(ane.Provider,{value:s},o)},lne=()=>{var t=D.useContext(ane),e=nO();return t||e},aPe=D.createContext(null),lPe=()=>{var t=D.useContext(aPe),e=tt($ee);return t||e},uPe=t=>{var{value:e,formatter:n}=t,r=mr(t.children)?e:t.children;return typeof n=="function"?n(r):r},iL=t=>t!=null&&typeof t=="function",cPe=(t,e)=>{var n=Vi(e-t),r=Math.min(Math.abs(e-t),360);return n*r},fPe=(t,e,n,r,i)=>{var{offset:o,className:s}=t,{cx:a,cy:u,innerRadius:c,outerRadius:d,startAngle:h,endAngle:g,clockWise:_}=i,S=(c+d)/2,b=cPe(h,g),T=b>=0?1:-1,x,C;switch(e){case"insideStart":x=h+T*o,C=_;break;case"insideEnd":x=g-T*o,C=!_;break;case"end":x=g+T*o,C=_;break;default:throw new Error("Unsupported position ".concat(e))}C=b<=0?C:!C;var I=Pr(a,u,S,x),N=Pr(a,u,S,x+(C?1:-1)*359),V="M".concat(I.x,",").concat(I.y,`
    A`).concat(S,",").concat(S,",0,1,").concat(C?0:1,`,
    `).concat(N.x,",").concat(N.y),q=mr(t.id)?Kg("recharts-radial-line-"):t.id;return D.createElement("text",ba({},r,{dominantBaseline:"central",className:nn("recharts-radial-bar-label",s)}),D.createElement("defs",null,D.createElement("path",{id:q,d:V})),D.createElement("textPath",{xlinkHref:"#".concat(q)},n))},dPe=(t,e,n)=>{var{cx:r,cy:i,innerRadius:o,outerRadius:s,startAngle:a,endAngle:u}=t,c=(a+u)/2;if(n==="outside"){var{x:d,y:h}=Pr(r,i,s+e,c);return{x:d,y:h,textAnchor:d>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var g=(o+s)/2,{x:_,y:S}=Pr(r,i,g,c);return{x:_,y:S,textAnchor:"middle",verticalAnchor:"middle"}},une=t=>"cx"in t&&ot(t.cx),hPe=(t,e)=>{var{parentViewBox:n,offset:r,position:i}=t,o;n!=null&&!une(n)&&(o=n);var{x:s,y:a,width:u,height:c}=e,d=c>=0?1:-1,h=d*r,g=d>0?"end":"start",_=d>0?"start":"end",S=u>=0?1:-1,b=S*r,T=S>0?"end":"start",x=S>0?"start":"end";if(i==="top"){var C={x:s+u/2,y:a-d*r,textAnchor:"middle",verticalAnchor:g};return Dn(Dn({},C),o?{height:Math.max(a-o.y,0),width:u}:{})}if(i==="bottom"){var I={x:s+u/2,y:a+c+h,textAnchor:"middle",verticalAnchor:_};return Dn(Dn({},I),o?{height:Math.max(o.y+o.height-(a+c),0),width:u}:{})}if(i==="left"){var N={x:s-b,y:a+c/2,textAnchor:T,verticalAnchor:"middle"};return Dn(Dn({},N),o?{width:Math.max(N.x-o.x,0),height:c}:{})}if(i==="right"){var V={x:s+u+b,y:a+c/2,textAnchor:x,verticalAnchor:"middle"};return Dn(Dn({},V),o?{width:Math.max(o.x+o.width-V.x,0),height:c}:{})}var q=o?{width:u,height:c}:{};return i==="insideLeft"?Dn({x:s+b,y:a+c/2,textAnchor:x,verticalAnchor:"middle"},q):i==="insideRight"?Dn({x:s+u-b,y:a+c/2,textAnchor:T,verticalAnchor:"middle"},q):i==="insideTop"?Dn({x:s+u/2,y:a+h,textAnchor:"middle",verticalAnchor:_},q):i==="insideBottom"?Dn({x:s+u/2,y:a+c-h,textAnchor:"middle",verticalAnchor:g},q):i==="insideTopLeft"?Dn({x:s+b,y:a+h,textAnchor:x,verticalAnchor:_},q):i==="insideTopRight"?Dn({x:s+u-b,y:a+h,textAnchor:T,verticalAnchor:_},q):i==="insideBottomLeft"?Dn({x:s+b,y:a+c-h,textAnchor:x,verticalAnchor:g},q):i==="insideBottomRight"?Dn({x:s+u-b,y:a+c-h,textAnchor:T,verticalAnchor:g},q):i&&typeof i=="object"&&(ot(i.x)||Ec(i.x))&&(ot(i.y)||Ec(i.y))?Dn({x:s+Xo(i.x,u),y:a+Xo(i.y,c),textAnchor:"end",verticalAnchor:"end"},q):Dn({x:s+u/2,y:a+c/2,textAnchor:"middle",verticalAnchor:"middle"},q)},pPe={offset:5};function ql(t){var e=Tu(t,pPe),{viewBox:n,position:r,value:i,children:o,content:s,className:a="",textBreakAll:u,labelRef:c}=e,d=lPe(),h=lne(),g=r==="center"?h:d??h,_=n||g;if(!_||mr(i)&&mr(o)&&!D.isValidElement(s)&&typeof s!="function")return null;var S=Dn(Dn({},e),{},{viewBox:_});if(D.isValidElement(s)){var{labelRef:b}=S,T=tPe(S,ePe);return D.cloneElement(s,T)}var x;if(typeof s=="function"){if(x=D.createElement(s,S),D.isValidElement(x))return x}else x=uPe(e);var C=une(_),I=dr(e,!0);if(C&&(r==="insideStart"||r==="insideEnd"||r==="end"))return fPe(e,r,x,I,_);var N=C?dPe(_,e.offset,e.position):hPe(e,_);return D.createElement(rL,ba({ref:c,className:nn("recharts-label",a)},I,N,{breakAll:u}),x)}ql.displayName="Label";var mPe=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?D.createElement(ql,ba({key:"label-implicit"},r)):Gs(t)?D.createElement(ql,ba({key:"label-implicit",value:t},r)):D.isValidElement(t)?t.type===ql?D.cloneElement(t,Dn({key:"label-implicit"},r)):D.createElement(ql,ba({key:"label-implicit",content:t},r)):iL(t)?D.createElement(ql,ba({key:"label-implicit",content:t},r)):t&&typeof t=="object"?D.createElement(ql,ba({},t,{key:"label-implicit"},r)):null};function gPe(t){var{label:e}=t,n=lne();return mPe(e,n)||null}var GA={},jA={},o5;function yPe(){return o5||(o5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(jA)),jA}var KA={},s5;function vPe(){return s5||(s5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(KA)),KA}var a5;function _Pe(){return a5||(a5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yPe(),n=vPe(),r=jk();function i(o){if(r.isArrayLike(o))return e.last(n.toArray(o))}t.last=i})(GA)),GA}var WA,l5;function wPe(){return l5||(l5=1,WA=_Pe().last),WA}var bPe=wPe();const TPe=Co(bPe);var EPe=["valueAccessor"],SPe=["dataKey","clockWise","id","textBreakAll"];function Mw(){return Mw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mw.apply(null,arguments)}function u5(t,e){if(t==null)return{};var n,r,i=xPe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function xPe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var APe=t=>Array.isArray(t.value)?TPe(t.value):t.value,cne=D.createContext(void 0),CPe=cne.Provider,fne=D.createContext(void 0);fne.Provider;function IPe(){return D.useContext(cne)}function RPe(){return D.useContext(fne)}function _0(t){var{valueAccessor:e=APe}=t,n=u5(t,EPe),{dataKey:r,clockWise:i,id:o,textBreakAll:s}=n,a=u5(n,SPe),u=IPe(),c=RPe(),d=u||c;return!d||!d.length?null:D.createElement(du,{className:"recharts-label-list"},d.map((h,g)=>{var _,S=mr(r)?e(h,g):ri(h&&h.payload,r),b=mr(o)?{}:{id:"".concat(o,"-").concat(g)};return D.createElement(ql,Mw({},dr(h,!0),a,b,{fill:(_=n.fill)!==null&&_!==void 0?_:h.fill,parentViewBox:h.parentViewBox,value:S,textBreakAll:s,viewBox:h.viewBox,key:"label-".concat(g),index:g}))}))}_0.displayName="LabelList";function PPe(t){var{label:e}=t;return e?e===!0?D.createElement(_0,{key:"labelList-implicit"}):D.isValidElement(e)||iL(e)?D.createElement(_0,{key:"labelList-implicit",content:e}):typeof e=="object"?D.createElement(_0,Mw({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}var NPe={radiusAxis:{},angleAxis:{}},dne=Gi({name:"polarAxis",initialState:NPe,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:F7e,removeRadiusAxis:B7e,addAngleAxis:$7e,removeAngleAxis:z7e}=dne.actions,MPe=dne.reducer,YA={},c5;function DPe(){return c5||(c5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var i;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const o=n[Symbol.toStringTag];return o==null||!((i=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&i.writable)?!1:n.toString()===`[object ${o}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(YA)),YA}var JA,f5;function kPe(){return f5||(f5=1,JA=DPe().isPlainObject),JA}var OPe=kPe();const LPe=Co(OPe);function d5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function h5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?d5(Object(n),!0).forEach(function(r){VPe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function VPe(t,e,n){return(e=UPe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UPe(t){var e=qPe(t,"string");return typeof e=="symbol"?e:e+""}function qPe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Dw(){return Dw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dw.apply(null,arguments)}var p5=(t,e,n,r,i)=>{var o=n-r,s;return s="M ".concat(t,",").concat(e),s+="L ".concat(t+n,",").concat(e),s+="L ".concat(t+n-o/2,",").concat(e+i),s+="L ".concat(t+n-o/2-r,",").concat(e+i),s+="L ".concat(t,",").concat(e," Z"),s},FPe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},BPe=t=>{var e=Tu(t,FPe),{x:n,y:r,upperWidth:i,lowerWidth:o,height:s,className:a}=e,{animationEasing:u,animationDuration:c,animationBegin:d,isUpdateAnimationActive:h}=e,g=D.useRef(),[_,S]=D.useState(-1),b=D.useRef(i),T=D.useRef(o),x=D.useRef(s),C=D.useRef(n),I=D.useRef(r),N=oO(t,"trapezoid-");if(D.useEffect(()=>{if(g.current&&g.current.getTotalLength)try{var H=g.current.getTotalLength();H&&S(H)}catch{}},[]),n!==+n||r!==+r||i!==+i||o!==+o||s!==+s||i===0&&o===0||s===0)return null;var V=nn("recharts-trapezoid",a);if(!h)return D.createElement("g",null,D.createElement("path",Dw({},dr(e,!0),{className:V,d:p5(n,r,i,o,s)})));var q=b.current,P=T.current,O=x.current,R=C.current,U=I.current,L="0px ".concat(_===-1?1:_,"px"),F="".concat(_,"px 0px"),$=RZ(["strokeDasharray"],c,u);return D.createElement(iO,{animationId:N,key:N,canBegin:_>0,duration:c,easing:u,isActive:h,begin:d},H=>{var Y=Zr(q,i,H),K=Zr(P,o,H),Q=Zr(O,s,H),re=Zr(R,n,H),X=Zr(U,r,H);g.current&&(b.current=Y,T.current=K,x.current=Q,C.current=re,I.current=X);var G=H>0?{transition:$,strokeDasharray:F}:{strokeDasharray:L};return D.createElement("path",Dw({},dr(e,!0),{className:V,d:p5(re,X,Y,K,Q),ref:g,style:h5(h5({},G),e.style)}))})},$Pe=["option","shapeType","propTransformer","activeClassName","isActive"];function zPe(t,e){if(t==null)return{};var n,r,i=HPe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function HPe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function m5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?m5(Object(n),!0).forEach(function(r){GPe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function GPe(t,e,n){return(e=jPe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jPe(t){var e=KPe(t,"string");return typeof e=="symbol"?e:e+""}function KPe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function WPe(t,e){return kw(kw({},e),t)}function YPe(t,e){return t==="symbols"}function g5(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return D.createElement(DZ,n);case"trapezoid":return D.createElement(BPe,n);case"sector":return D.createElement(LZ,n);case"symbols":if(YPe(e))return D.createElement(FQ,n);break;default:return null}}function JPe(t){return D.isValidElement(t)?t.props:t}function XPe(t){var{option:e,shapeType:n,propTransformer:r=WPe,activeClassName:i="recharts-active-shape",isActive:o}=t,s=zPe(t,$Pe),a;if(D.isValidElement(e))a=D.cloneElement(e,kw(kw({},s),JPe(e)));else if(typeof e=="function")a=e(s);else if(LPe(e)&&typeof e!="boolean"){var u=r(e,s);a=D.createElement(g5,{shapeType:n,elementProps:u})}else{var c=s;a=D.createElement(g5,{shapeType:n,elementProps:c})}return o?D.createElement(du,{className:i},a):a}var hne=(t,e)=>{var n=yr();return(r,i)=>o=>{t==null||t(r,i,o),n(Mte({activeIndex:String(i),activeDataKey:e,activeCoordinate:r.tooltipPosition}))}},pne=t=>{var e=yr();return(n,r)=>i=>{t==null||t(n,r,i),e($Ce())}},mne=(t,e)=>{var n=yr();return(r,i)=>o=>{t==null||t(r,i,o),n(zCe({activeIndex:String(i),activeDataKey:e,activeCoordinate:r.tooltipPosition}))}};function QPe(t){var{fn:e,args:n}=t,r=yr(),i=ns();return D.useEffect(()=>{if(!i){var o=e(n);return r(qCe(o)),()=>{r(FCe(o))}}},[e,n,r,i]),null}var ZPe=()=>{};function eNe(t){var{legendPayload:e}=t,n=yr(),r=ns();return D.useEffect(()=>r?ZPe:(n(CEe(e)),()=>{n(IEe(e))}),[n,r,e]),null}var XA,tNe=()=>{var[t]=D.useState(()=>Kg("uid-"));return t},nNe=(XA=gae.useId)!==null&&XA!==void 0?XA:tNe;function rNe(t,e){var n=nNe();return e||(t?"".concat(t,"-").concat(n):n)}var iNe=D.createContext(void 0),oNe=t=>{var{id:e,type:n,children:r}=t,i=rNe("recharts-".concat(n),e);return D.createElement(iNe.Provider,{value:i},r(i))},sNe={cartesianItems:[],polarItems:[]},gne=Gi({name:"graphicalItems",initialState:sNe,reducers:{addCartesianGraphicalItem(t,e){t.cartesianItems.push(e.payload)},replaceCartesianGraphicalItem(t,e){var{prev:n,next:r}=e.payload,i=Pa(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},removeCartesianGraphicalItem(t,e){var n=Pa(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},addPolarGraphicalItem(t,e){t.polarItems.push(e.payload)},removePolarGraphicalItem(t,e){var n=Pa(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)}}}),{addCartesianGraphicalItem:aNe,replaceCartesianGraphicalItem:lNe,removeCartesianGraphicalItem:uNe,addPolarGraphicalItem:H7e,removePolarGraphicalItem:G7e}=gne.actions,cNe=gne.reducer;function fNe(t){var e=yr(),n=D.useRef(null);return D.useEffect(()=>{n.current===null?e(aNe(t)):n.current!==t&&e(lNe({prev:n.current,next:t})),n.current=t},[e,t]),D.useEffect(()=>()=>{n.current&&(e(uNe(n.current)),n.current=null)},[e]),null}function y5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function v5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y5(Object(n),!0).forEach(function(r){dNe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dNe(t,e,n){return(e=hNe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hNe(t){var e=pNe(t,"string");return typeof e=="symbol"?e:e+""}function pNe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mNe={xAxis:{},yAxis:{},zAxis:{}},yne=Gi({name:"cartesianAxis",initialState:mNe,reducers:{addXAxis(t,e){t.xAxis[e.payload.id]=e.payload},removeXAxis(t,e){delete t.xAxis[e.payload.id]},addYAxis(t,e){t.yAxis[e.payload.id]=e.payload},removeYAxis(t,e){delete t.yAxis[e.payload.id]},addZAxis(t,e){t.zAxis[e.payload.id]=e.payload},removeZAxis(t,e){delete t.zAxis[e.payload.id]},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload;t.yAxis[n]&&(t.yAxis[n]=v5(v5({},t.yAxis[n]),{},{width:r}))}}}),{addXAxis:gNe,removeXAxis:yNe,addYAxis:vNe,removeYAxis:_Ne,addZAxis:j7e,removeZAxis:K7e,updateYAxisWidth:wNe}=yne.actions,bNe=yne.reducer,TNe=ve([vr],t=>{if(t)return{top:t.top,bottom:t.bottom,left:t.left,right:t.right}}),ENe=ve([TNe,el,tl],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),vne=()=>tt(ENe),SNe="Invariant failed";function xNe(t,e){throw new Error(SNe)}var ANe=["x","y"];function l2(){return l2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l2.apply(null,arguments)}function _5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function km(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_5(Object(n),!0).forEach(function(r){CNe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function CNe(t,e,n){return(e=INe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function INe(t){var e=RNe(t,"string");return typeof e=="symbol"?e:e+""}function RNe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function PNe(t,e){if(t==null)return{};var n,r,i=NNe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function NNe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function MNe(t,e){var{x:n,y:r}=t,i=PNe(t,ANe),o="".concat(n),s=parseInt(o,10),a="".concat(r),u=parseInt(a,10),c="".concat(e.height||i.height),d=parseInt(c,10),h="".concat(e.width||i.width),g=parseInt(h,10);return km(km(km(km(km({},e),i),s?{x:s}:{}),u?{y:u}:{}),{},{height:d,width:g,name:e.name,radius:e.radius})}function oL(t){return D.createElement(XPe,l2({shapeType:"rectangle",propTransformer:MNe,activeClassName:"recharts-active-bar"},t))}var DNe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(ot(e))return e;var o=ot(r)||mr(r);return o?e(r,i):(o||xNe(),n)}},kNe={},_ne=Gi({name:"errorBars",initialState:kNe,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(o=>o.dataKey===r.dataKey&&o.direction===r.direction?i:o))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:W7e,replaceErrorBar:Y7e,removeErrorBar:J7e}=_ne.actions,ONe=_ne.reducer,LNe=["children"];function VNe(t,e){if(t==null)return{};var n,r,i=UNe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function UNe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var qNe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},FNe=D.createContext(qNe);function BNe(t){var{children:e}=t,n=VNe(t,LNe);return D.createElement(FNe.Provider,{value:n},e)}function wne(t,e){var n,r,i=tt(c=>Au(c,t)),o=tt(c=>Cu(c,e)),s=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:Ri.allowDataOverflow,a=(r=o==null?void 0:o.allowDataOverflow)!==null&&r!==void 0?r:Pi.allowDataOverflow,u=s||a;return{needClip:u,needClipX:s,needClipY:a}}function $Ne(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=vne(),{needClipX:o,needClipY:s,needClip:a}=wne(e,n);if(!a)return null;var{x:u,y:c,width:d,height:h}=i;return D.createElement("clipPath",{id:"clipPath-".concat(r)},D.createElement("rect",{x:o?u:u-d/2,y:s?c:c-h/2,width:o?d:d*2,height:s?h:h*2}))}var zNe=["onMouseEnter","onMouseLeave","onClick"],HNe=["value","background","tooltipPosition"],GNe=["id"],jNe=["onMouseEnter","onClick","onMouseLeave"];function hu(){return hu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hu.apply(null,arguments)}function w5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ei(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w5(Object(n),!0).forEach(function(r){KNe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KNe(t,e,n){return(e=WNe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WNe(t){var e=YNe(t,"string");return typeof e=="symbol"?e:e+""}function YNe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ow(t,e){if(t==null)return{};var n,r,i=JNe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function JNe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var XNe=t=>{var{dataKey:e,name:n,fill:r,legendType:i,hide:o}=t;return[{inactive:o,dataKey:e,type:i,color:r,value:xZ(n,e),payload:t}]};function QNe(t){var{dataKey:e,stroke:n,strokeWidth:r,fill:i,name:o,hide:s,unit:a}=t;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:e,nameKey:void 0,name:xZ(o,e),hide:s,type:t.tooltipType,color:t.fill,unit:a}}}function ZNe(t){var e=tt(Ch),{data:n,dataKey:r,background:i,allOtherBarProps:o}=t,{onMouseEnter:s,onMouseLeave:a,onClick:u}=o,c=Ow(o,zNe),d=hne(s,r),h=pne(a),g=mne(u,r);if(!i||n==null)return null;var _=dr(i,!1);return D.createElement(D.Fragment,null,n.map((S,b)=>{var{value:T,background:x,tooltipPosition:C}=S,I=Ow(S,HNe);if(!x)return null;var N=d(S,b),V=h(S,b),q=g(S,b),P=ei(ei(ei(ei(ei({option:i,isActive:String(b)===e},I),{},{fill:"#eee"},x),_),$k(c,S,b)),{},{onMouseEnter:N,onMouseLeave:V,onClick:q,dataKey:r,index:b,className:"recharts-bar-background-rectangle"});return D.createElement(oL,hu({key:"background-bar-".concat(b)},P))}))}function eMe(t){var{showLabels:e,children:n,rects:r}=t,i=r==null?void 0:r.map(o=>{var s={x:o.x,y:o.y,width:o.width,height:o.height};return ei(ei({},s),{},{value:o.value,payload:o.payload,parentViewBox:o.parentViewBox,viewBox:s,fill:o.fill})});return D.createElement(CPe,{value:e?i:void 0},n)}function tMe(t){var{shape:e,activeBar:n,baseProps:r,entry:i,index:o,dataKey:s}=t,a=tt(Ch),u=tt(Gte),c=n&&String(o)===a&&(u==null||s===u),d=c?n:e;return D.createElement(oL,hu({},r,i,{isActive:c,option:d,index:o,dataKey:s}))}function nMe(t){var{shape:e,baseProps:n,entry:r,index:i,dataKey:o}=t;return D.createElement(oL,hu({},n,r,{isActive:!1,option:e,index:i,dataKey:o}))}function rMe(t){var{data:e,props:n}=t,r=Hb(n),{id:i}=r,o=Ow(r,GNe),{shape:s,dataKey:a,activeBar:u}=n,{onMouseEnter:c,onClick:d,onMouseLeave:h}=n,g=Ow(n,jNe),_=hne(c,a),S=pne(h),b=mne(d,a);return e?D.createElement(D.Fragment,null,e.map((T,x)=>D.createElement(du,hu({className:"recharts-bar-rectangle"},$k(g,T,x),{onMouseEnter:_(T,x),onMouseLeave:S(T,x),onClick:b(T,x),key:"rectangle-".concat(T==null?void 0:T.x,"-").concat(T==null?void 0:T.y,"-").concat(T==null?void 0:T.value,"-").concat(x)}),u?D.createElement(tMe,{shape:s,activeBar:u,baseProps:o,entry:T,index:x,dataKey:a}):D.createElement(nMe,{shape:s,baseProps:o,entry:T,index:x,dataKey:a})))):null}function iMe(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:i,isAnimationActive:o,animationBegin:s,animationDuration:a,animationEasing:u,onAnimationEnd:c,onAnimationStart:d}=e,h=n.current,g=oO(e,"recharts-bar-"),[_,S]=D.useState(!1),b=!_,T=D.useCallback(()=>{typeof c=="function"&&c(),S(!1)},[c]),x=D.useCallback(()=>{typeof d=="function"&&d(),S(!0)},[d]);return D.createElement(eMe,{showLabels:b,rects:r},D.createElement(iO,{animationId:g,begin:s,duration:a,isActive:o,easing:u,onAnimationEnd:T,onAnimationStart:x,key:g},C=>{var I=C===1?r:r==null?void 0:r.map((N,V)=>{var q=h&&h[V];if(q)return ei(ei({},N),{},{x:Zr(q.x,N.x,C),y:Zr(q.y,N.y,C),width:Zr(q.width,N.width,C),height:Zr(q.height,N.height,C)});if(i==="horizontal"){var P=Zr(0,N.height,C);return ei(ei({},N),{},{y:N.y+N.height-P,height:P})}var O=Zr(0,N.width,C);return ei(ei({},N),{},{width:O})});return C>0&&(n.current=I??null),I==null?null:D.createElement(du,null,D.createElement(rMe,{props:e,data:I}))}),D.createElement(PPe,{label:e.label}),e.children)}function oMe(t){var e=D.useRef(null);return D.createElement(iMe,{previousRectanglesRef:e,props:t})}var bne=0,sMe=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:ri(t,e)}};class aMe extends D.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:i,xAxisId:o,yAxisId:s,needClip:a,background:u,id:c}=this.props;if(e||n==null)return null;var d=nn("recharts-bar",i),h=c;return D.createElement(du,{className:d,id:c},a&&D.createElement("defs",null,D.createElement($Ne,{clipPathId:h,xAxisId:o,yAxisId:s})),D.createElement(du,{className:"recharts-bar-rectangles",clipPath:a?"url(#clipPath-".concat(h,")"):void 0},D.createElement(ZNe,{data:n,dataKey:r,background:u,allOtherBarProps:this.props}),D.createElement(oMe,this.props)))}}var lMe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Ly.isSsr,legendType:"rect",minPointSize:bne,xAxisId:0,yAxisId:0};function uMe(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:o,activeBar:s,animationBegin:a,animationDuration:u,animationEasing:c,isAnimationActive:d}=t,{needClip:h}=wne(e,n),g=rO(),_=ns(),S=G0e(t.children,tne),b=tt(C=>LMe(C,e,n,_,t.id,S));if(g!=="vertical"&&g!=="horizontal")return null;var T,x=b==null?void 0:b[0];return x==null||x.height==null||x.width==null?T=0:T=g==="vertical"?x.height/2:x.width/2,D.createElement(BNe,{xAxisId:e,yAxisId:n,data:b,dataPointFormatter:sMe,errorBarOffset:T},D.createElement(aMe,hu({},t,{layout:g,needClip:h,data:b,xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:o,activeBar:s,animationBegin:a,animationDuration:u,animationEasing:c,isAnimationActive:d})))}function cMe(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:o,xAxis:s,yAxis:a,xAxisTicks:u,yAxisTicks:c,stackedData:d,displayedData:h,offset:g,cells:_,parentViewBox:S}=t,b=e==="horizontal"?a:s,T=d?b.scale.domain():null,x=nEe({numericAxis:b});return h.map((C,I)=>{var N,V,q,P,O,R;d?N=JTe(d[I],T):(N=ri(C,n),Array.isArray(N)||(N=[x,N]));var U=DNe(r,bne)(N[1],I);if(e==="horizontal"){var L,[F,$]=[a.scale(N[0]),a.scale(N[1])];V=h6({axis:s,ticks:u,bandSize:o,offset:i.offset,entry:C,index:I}),q=(L=$??F)!==null&&L!==void 0?L:void 0,P=i.size;var H=F-$;if(O=So(H)?0:H,R={x:V,y:g.top,width:P,height:g.height},Math.abs(U)>0&&Math.abs(O)<Math.abs(U)){var Y=Vi(O||U)*(Math.abs(U)-Math.abs(O));q-=Y,O+=Y}}else{var[K,Q]=[s.scale(N[0]),s.scale(N[1])];if(V=K,q=h6({axis:a,ticks:c,bandSize:o,offset:i.offset,entry:C,index:I}),P=Q-K,O=i.size,R={x:g.left,y:q,width:g.width,height:O},Math.abs(U)>0&&Math.abs(P)<Math.abs(U)){var re=Vi(P||U)*(Math.abs(U)-Math.abs(P));P+=re}}if(V==null||q==null||P==null||O==null)return null;var X=ei(ei({},C),{},{x:V,y:q,width:P,height:O,value:d?N:N[1],payload:C,background:R,tooltipPosition:{x:V+P/2,y:q+O/2},parentViewBox:S},_&&_[I]&&_[I].props);return X}).filter(Boolean)}function Tne(t){var e=Tu(t,lMe),n=ns();return D.createElement(oNe,{id:e.id,type:"bar"},r=>D.createElement(D.Fragment,null,D.createElement(eNe,{legendPayload:XNe(e)}),D.createElement(QPe,{fn:QNe,args:e}),D.createElement(fNe,{type:"bar",id:r,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:tEe(e.stackId),hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:n}),D.createElement(uMe,hu({},e,{id:r}))))}Tne.displayName="Bar";function b5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function j_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?b5(Object(n),!0).forEach(function(r){fMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fMe(t,e,n){return(e=dMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dMe(t){var e=hMe(t,"string");return typeof e=="symbol"?e:e+""}function hMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pMe=(t,e)=>e,mMe=(t,e,n)=>n,gMe=(t,e,n,r)=>r,yMe=(t,e,n,r,i)=>i,Ky=ve([FO,yMe],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),vMe=ve([Ky],t=>t==null?void 0:t.maxBarSize),_Me=(t,e,n,r,i,o)=>o,T5=(t,e,n)=>{var r=n??t;if(!mr(r))return Xo(r,e,0)},wMe=ve([qt,FO,pMe,mMe,gMe],(t,e,n,r,i)=>e.filter(o=>t==="horizontal"?o.xAxisId===n:o.yAxisId===r).filter(o=>o.isPanorama===i).filter(o=>o.hide===!1).filter(o=>o.type==="bar")),bMe=(t,e,n,r)=>{var i=qt(t);return i==="horizontal"?n2(t,"yAxis",n,r):n2(t,"xAxis",e,r)},TMe=(t,e,n)=>{var r=qt(t);return r==="horizontal"?R$(t,"xAxis",e):R$(t,"yAxis",n)},EMe=(t,e,n)=>{var r={},i=t.filter(mT),o=t.filter(c=>c.stackId==null),s=i.reduce((c,d)=>(c[d.stackId]||(c[d.stackId]=[]),c[d.stackId].push(d),c),r),a=Object.entries(s).map(c=>{var[d,h]=c,g=h.map(S=>S.dataKey),_=T5(e,n,h[0].barSize);return{stackId:d,dataKeys:g,barSize:_}}),u=o.map(c=>{var d=[c.dataKey].filter(g=>g!=null),h=T5(e,n,c.barSize);return{stackId:void 0,dataKeys:d,barSize:h}});return[...a,...u]},SMe=ve([wMe,q1e,TMe],EMe),xMe=(t,e,n,r,i)=>{var o,s,a=Ky(t,e,n,r,i);if(a!=null){var u=qt(t),c=Oee(t),{maxBarSize:d}=a,h=mr(d)?c:d,g,_;return u==="horizontal"?(g=Ah(t,"xAxis",e,r),_=xh(t,"xAxis",e,r)):(g=Ah(t,"yAxis",n,r),_=xh(t,"yAxis",n,r)),(o=(s=eO(g,_,!0))!==null&&s!==void 0?s:h)!==null&&o!==void 0?o:0}},Ene=(t,e,n,r)=>{var i=qt(t),o,s;return i==="horizontal"?(o=Ah(t,"xAxis",e,r),s=xh(t,"xAxis",e,r)):(o=Ah(t,"yAxis",n,r),s=xh(t,"yAxis",n,r)),eO(o,s)};function AMe(t,e,n,r,i){var o=r.length;if(!(o<1)){var s=Xo(t,n,0,!0),a,u=[];if(zi(r[0].barSize)){var c=!1,d=n/o,h=r.reduce((x,C)=>x+(C.barSize||0),0);h+=(o-1)*s,h>=n&&(h-=(o-1)*s,s=0),h>=n&&d>0&&(c=!0,d*=.9,h=o*d);var g=(n-h)/2>>0,_={offset:g-s,size:0};a=r.reduce((x,C)=>{var I,N={stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:_.offset+_.size+s,size:c?d:(I=C.barSize)!==null&&I!==void 0?I:0}},V=[...x,N];return _=V[V.length-1].position,V},u)}else{var S=Xo(e,n,0,!0);n-2*S-(o-1)*s<=0&&(s=0);var b=(n-2*S-(o-1)*s)/o;b>1&&(b>>=0);var T=zi(i)?Math.min(b,i):b;a=r.reduce((x,C,I)=>[...x,{stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:S+(b+s)*I+(b-T)/2,size:T}}],u)}return a}}var CMe=(t,e,n,r,i,o,s)=>{var a=mr(s)?e:s,u=AMe(n,r,i!==o?i:o,t,a);return i!==o&&u!=null&&(u=u.map(c=>j_(j_({},c),{},{position:j_(j_({},c.position),{},{offset:c.position.offset-i/2})}))),u},IMe=ve([SMe,Oee,U1e,Lee,xMe,Ene,vMe],CMe),RMe=(t,e,n,r)=>Ah(t,"xAxis",e,r),PMe=(t,e,n,r)=>Ah(t,"yAxis",n,r),NMe=(t,e,n,r)=>xh(t,"xAxis",e,r),MMe=(t,e,n,r)=>xh(t,"yAxis",n,r),DMe=ve([IMe,Ky],(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}}),kMe=(t,e)=>{var n=UO(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var i=t[r];if(i){var{stackedData:o}=i;if(o)return o.find(s=>s.key===n)}}}},OMe=ve([bMe,Ky],kMe),LMe=ve([vr,tO,RMe,PMe,NMe,MMe,DMe,qt,RO,Ene,OMe,Ky,_Me],(t,e,n,r,i,o,s,a,u,c,d,h,g)=>{var{chartData:_,dataStartIndex:S,dataEndIndex:b}=u;if(!(h==null||s==null||e==null||a!=="horizontal"&&a!=="vertical"||n==null||r==null||i==null||o==null||c==null)){var{data:T}=h,x;if(T!=null&&T.length>0?x=T:x=_==null?void 0:_.slice(S,b+1),x!=null)return cMe({layout:a,barSettings:h,pos:s,parentViewBox:e,bandSize:c,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:o,stackedData:d,displayedData:x,offset:t,cells:g})}}),VMe=t=>{var{chartData:e}=t,n=yr(),r=ns();return D.useEffect(()=>r?()=>{}:(n(U$(e)),()=>{n(U$(void 0))}),[e,n,r]),null},E5={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Sne=Gi({name:"brush",initialState:E5,reducers:{setBrushSettings(t,e){return e.payload==null?E5:e.payload}}}),{setBrushSettings:X7e}=Sne.actions,UMe=Sne.reducer;function qMe(t,e,n){return(e=FMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FMe(t){var e=BMe(t,"string");return typeof e=="symbol"?e:e+""}function BMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class sL{static create(e){return new sL(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(e)+o}default:return this.scale(e)}if(n){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+s}return this.scale(e)}}isInRange(e){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?e>=r&&e<=i:e>=i&&e<=r}}qMe(sL,"EPS",1e-4);function $Me(t){return(t%180+180)%180}var zMe=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=$Me(i),s=o*Math.PI/180,a=Math.atan(r/n),u=s>a&&s<Math.PI-a?r/Math.sin(s):n/Math.cos(s);return Math.abs(u)},HMe={dots:[],areas:[],lines:[]},xne=Gi({name:"referenceElements",initialState:HMe,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=Pa(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=Pa(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=Pa(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:Q7e,removeDot:Z7e,addArea:eKe,removeArea:tKe,addLine:nKe,removeLine:rKe}=xne.actions,GMe=xne.reducer,jMe=D.createContext(void 0),KMe=t=>{var{children:e}=t,[n]=D.useState("".concat(Kg("recharts"),"-clip")),r=vne();if(r==null)return null;var{x:i,y:o,width:s,height:a}=r;return D.createElement(jMe.Provider,{value:n},D.createElement("defs",null,D.createElement("clipPath",{id:n},D.createElement("rect",{x:i,y:o,height:a,width:s}))),e)};function QA(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function Ane(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function WMe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return zMe(r,n)}function YMe(t,e,n){var r=n==="width",{x:i,y:o,width:s,height:a}=t;return e===1?{start:r?i:o,end:r?i+s:o+a}:{start:r?i+s:o+a,end:r?i:o}}function Lw(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var o=n();return t*(e-t*o/2-r)>=0&&t*(e+t*o/2-i)<=0}function JMe(t,e){return Ane(t,e+1)}function XMe(t,e,n,r,i){for(var o=(r||[]).slice(),{start:s,end:a}=e,u=0,c=1,d=s,h=function(){var S=r==null?void 0:r[u];if(S===void 0)return{v:Ane(r,c)};var b=u,T,x=()=>(T===void 0&&(T=n(S,b)),T),C=S.coordinate,I=u===0||Lw(t,C,x,d,a);I||(u=0,d=s,c+=1),I&&(d=C+t*(x()/2+i),u+=c)},g;c<=o.length;)if(g=h(),g)return g.v;return[]}function S5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ur(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?S5(Object(n),!0).forEach(function(r){QMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function QMe(t,e,n){return(e=ZMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZMe(t){var e=e2e(t,"string");return typeof e=="symbol"?e:e+""}function e2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function t2e(t,e,n,r,i){for(var o=(r||[]).slice(),s=o.length,{start:a}=e,{end:u}=e,c=function(g){var _=o[g],S,b=()=>(S===void 0&&(S=n(_,g)),S);if(g===s-1){var T=t*(_.coordinate+t*b()/2-u);o[g]=_=Ur(Ur({},_),{},{tickCoord:T>0?_.coordinate-T*t:_.coordinate})}else o[g]=_=Ur(Ur({},_),{},{tickCoord:_.coordinate});var x=Lw(t,_.tickCoord,b,a,u);x&&(u=_.tickCoord-t*(b()/2+i),o[g]=Ur(Ur({},_),{},{isShow:!0}))},d=s-1;d>=0;d--)c(d);return o}function n2e(t,e,n,r,i,o){var s=(r||[]).slice(),a=s.length,{start:u,end:c}=e;if(o){var d=r[a-1],h=n(d,a-1),g=t*(d.coordinate+t*h/2-c);s[a-1]=d=Ur(Ur({},d),{},{tickCoord:g>0?d.coordinate-g*t:d.coordinate});var _=Lw(t,d.tickCoord,()=>h,u,c);_&&(c=d.tickCoord-t*(h/2+i),s[a-1]=Ur(Ur({},d),{},{isShow:!0}))}for(var S=o?a-1:a,b=function(C){var I=s[C],N,V=()=>(N===void 0&&(N=n(I,C)),N);if(C===0){var q=t*(I.coordinate-t*V()/2-u);s[C]=I=Ur(Ur({},I),{},{tickCoord:q<0?I.coordinate-q*t:I.coordinate})}else s[C]=I=Ur(Ur({},I),{},{tickCoord:I.coordinate});var P=Lw(t,I.tickCoord,V,u,c);P&&(u=I.tickCoord+t*(V()/2+i),s[C]=Ur(Ur({},I),{},{isShow:!0}))},T=0;T<S;T++)b(T);return s}function r2e(t,e,n){var{tick:r,ticks:i,viewBox:o,minTickGap:s,orientation:a,interval:u,tickFormatter:c,unit:d,angle:h}=t;if(!i||!i.length||!r)return[];if(ot(u)||Ly.isSsr){var g;return(g=JMe(i,ot(u)?u:0))!==null&&g!==void 0?g:[]}var _=[],S=a==="top"||a==="bottom"?"width":"height",b=d&&S==="width"?wg(d,{fontSize:e,letterSpacing:n}):{width:0,height:0},T=(I,N)=>{var V=typeof c=="function"?c(I.value,N):I.value;return S==="width"?WMe(wg(V,{fontSize:e,letterSpacing:n}),b,h):wg(V,{fontSize:e,letterSpacing:n})[S]},x=i.length>=2?Vi(i[1].coordinate-i[0].coordinate):1,C=YMe(o,x,S);return u==="equidistantPreserveStart"?XMe(x,C,T,i,s):(u==="preserveStart"||u==="preserveStartEnd"?_=n2e(x,C,T,i,s,u==="preserveStartEnd"):_=t2e(x,C,T,i,s),_.filter(I=>I.isShow))}var i2e=["viewBox"],o2e=["viewBox"];function Nd(){return Nd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nd.apply(null,arguments)}function x5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?x5(Object(n),!0).forEach(function(r){aL(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function A5(t,e){if(t==null)return{};var n,r,i=s2e(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function s2e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function aL(t,e,n){return(e=a2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a2e(t){var e=l2e(t,"string");return typeof e=="symbol"?e:e+""}function l2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class ip extends D.Component{constructor(e){super(e),this.tickRefs=D.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(e,n){var{viewBox:r}=e,i=A5(e,i2e),o=this.props,{viewBox:s}=o,a=A5(o,o2e);return!QA(r,s)||!QA(i,a)||!QA(n,this.state)}getTickLineCoord(e){var{x:n,y:r,width:i,height:o,orientation:s,tickSize:a,mirror:u,tickMargin:c}=this.props,d,h,g,_,S,b,T=u?-1:1,x=e.tickSize||a,C=ot(e.tickCoord)?e.tickCoord:e.coordinate;switch(s){case"top":d=h=e.coordinate,_=r+ +!u*o,g=_-T*x,b=g-T*c,S=C;break;case"left":g=_=e.coordinate,h=n+ +!u*i,d=h-T*x,S=d-T*c,b=C;break;case"right":g=_=e.coordinate,h=n+ +u*i,d=h+T*x,S=d+T*c,b=C;break;default:d=h=e.coordinate,_=r+ +u*o,g=_+T*x,b=g+T*c,S=C;break}return{line:{x1:d,y1:g,x2:h,y2:_},tick:{x:S,y:b}}}getTickTextAnchor(){var{orientation:e,mirror:n}=this.props;switch(e){case"left":return n?"start":"end";case"right":return n?"end":"start";default:return"middle"}}getTickVerticalAnchor(){var{orientation:e,mirror:n}=this.props;switch(e){case"left":case"right":return"middle";case"top":return n?"start":"end";default:return n?"end":"start"}}renderAxisLine(){var{x:e,y:n,width:r,height:i,orientation:o,mirror:s,axisLine:a}=this.props,u=Xn(Xn(Xn({},dr(this.props,!1)),dr(a,!1)),{},{fill:"none"});if(o==="top"||o==="bottom"){var c=+(o==="top"&&!s||o==="bottom"&&s);u=Xn(Xn({},u),{},{x1:e,y1:n+c*i,x2:e+r,y2:n+c*i})}else{var d=+(o==="left"&&!s||o==="right"&&s);u=Xn(Xn({},u),{},{x1:e+d*r,y1:n,x2:e+d*r,y2:n+i})}return D.createElement("line",Nd({},u,{className:nn("recharts-cartesian-axis-line",vh(a,"className"))}))}static renderTickItem(e,n,r){var i,o=nn(n.className,"recharts-cartesian-axis-tick-value");if(D.isValidElement(e))i=D.cloneElement(e,Xn(Xn({},n),{},{className:o}));else if(typeof e=="function")i=e(Xn(Xn({},n),{},{className:o}));else{var s="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(s=nn(s,e.className)),i=D.createElement(rL,Nd({},n,{className:s}),r)}return i}renderTicks(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:i,stroke:o,tick:s,tickFormatter:a,unit:u,padding:c,tickTextProps:d}=this.props,h=r2e(Xn(Xn({},this.props),{},{ticks:r}),e,n),g=this.getTickTextAnchor(),_=this.getTickVerticalAnchor(),S=Hb(this.props),b=dr(s,!1),T=Xn(Xn({},S),{},{fill:"none"},dr(i,!1)),x=h.map((C,I)=>{var{line:N,tick:V}=this.getTickLineCoord(C),q=Xn(Xn(Xn(Xn({textAnchor:g,verticalAnchor:_},S),{},{stroke:"none",fill:o},b),V),{},{index:I,payload:C,visibleTicksCount:h.length,tickFormatter:a,padding:c},d);return D.createElement(du,Nd({className:"recharts-cartesian-axis-tick",key:"tick-".concat(C.value,"-").concat(C.coordinate,"-").concat(C.tickCoord)},$k(this.props,C,I)),i&&D.createElement("line",Nd({},T,N,{className:nn("recharts-cartesian-axis-tick-line",vh(i,"className"))})),s&&ip.renderTickItem(s,q,"".concat(typeof a=="function"?a(C.value,I):C.value).concat(u||"")))});return x.length>0?D.createElement("g",{className:"recharts-cartesian-axis-ticks"},x):null}render(){var{axisLine:e,width:n,height:r,className:i,hide:o}=this.props;if(o)return null;var{ticks:s}=this.props;return n!=null&&n<=0||r!=null&&r<=0?null:D.createElement(du,{className:nn("recharts-cartesian-axis",i),ref:a=>{if(a){var u=a.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(u);var c=u[0];if(c){var d=window.getComputedStyle(c).fontSize,h=window.getComputedStyle(c).letterSpacing;(d!==this.state.fontSize||h!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(c).fontSize,letterSpacing:window.getComputedStyle(c).letterSpacing})}}}},e&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,s),D.createElement(sPe,{x:this.props.x,y:this.props.y,width:this.props.width,height:this.props.height},D.createElement(gPe,{label:this.props.label}),this.props.children))}}aL(ip,"displayName","CartesianAxis");aL(ip,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var u2e=["children"],c2e=["dangerouslySetInnerHTML","ticks"],f2e=["id"];function Cne(t,e,n){return(e=d2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d2e(t){var e=h2e(t,"string");return typeof e=="symbol"?e:e+""}function h2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function u2(){return u2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u2.apply(null,arguments)}function c2(t,e){if(t==null)return{};var n,r,i=p2e(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function p2e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function m2e(t){var e=yr(),n=D.useMemo(()=>{var{children:r}=t,i=c2(t,u2e);return i},[t]);return D.useEffect(()=>(e(gNe(n)),()=>{e(yNe(n))}),[n,e]),t.children}var g2e=t=>{var{xAxisId:e,className:n}=t,r=tt(tO),i=ns(),o="xAxis",s=tt(T=>tp(T,o,e,i)),a=tt(T=>Ate(T,o,e,i)),u=tt(T=>Tte(T,e)),c=tt(T=>PCe(T,e)),d=tt(T=>Gee(T,e));if(u==null||c==null||d==null)return null;var{dangerouslySetInnerHTML:h,ticks:g}=t,_=c2(t,c2e),{id:S}=d,b=c2(d,f2e);return D.createElement(ip,u2({},_,b,{scale:s,x:c.x,y:c.y,width:u.width,height:u.height,className:nn("recharts-".concat(o," ").concat(o),n),viewBox:r,ticks:a}))},y2e=t=>{var e,n,r,i,o;return D.createElement(m2e,{interval:(e=t.interval)!==null&&e!==void 0?e:"preserveEnd",id:t.xAxisId,scale:t.scale,type:t.type,padding:t.padding,allowDataOverflow:t.allowDataOverflow,domain:t.domain,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,includeHidden:(n=t.includeHidden)!==null&&n!==void 0?n:!1,reversed:t.reversed,ticks:t.ticks,height:t.height,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:(r=t.angle)!==null&&r!==void 0?r:0,minTickGap:(i=t.minTickGap)!==null&&i!==void 0?i:5,tick:(o=t.tick)!==null&&o!==void 0?o:!0,tickFormatter:t.tickFormatter},D.createElement(g2e,t))};class lL extends D.Component{render(){return D.createElement(y2e,this.props)}}Cne(lL,"displayName","XAxis");Cne(lL,"defaultProps",{allowDataOverflow:Ri.allowDataOverflow,allowDecimals:Ri.allowDecimals,allowDuplicatedCategory:Ri.allowDuplicatedCategory,height:Ri.height,hide:!1,mirror:Ri.mirror,orientation:Ri.orientation,padding:Ri.padding,reversed:Ri.reversed,scale:Ri.scale,tickCount:Ri.tickCount,type:Ri.type,xAxisId:0});var v2e=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:o=0}=t,s=0;if(e){e.forEach(d=>{if(d){var h=d.getBoundingClientRect();h.width>s&&(s=h.width)}});var a=n?n.getBoundingClientRect().width:0,u=i+o,c=s+u+a+(n?r:0);return Math.round(c)}return 0},_2e=["dangerouslySetInnerHTML","ticks"],w2e=["id"];function Ine(t,e,n){return(e=b2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b2e(t){var e=T2e(t,"string");return typeof e=="symbol"?e:e+""}function T2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function f2(){return f2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},f2.apply(null,arguments)}function C5(t,e){if(t==null)return{};var n,r,i=E2e(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function E2e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function S2e(t){var e=yr();return D.useEffect(()=>(e(vNe(t)),()=>{e(_Ne(t))}),[t,e]),null}var x2e=t=>{var e,{yAxisId:n,className:r,width:i,label:o}=t,s=D.useRef(null),a=D.useRef(null),u=tt(tO),c=ns(),d=yr(),h="yAxis",g=tt(q=>tp(q,h,n,c)),_=tt(q=>Ete(q,n)),S=tt(q=>NCe(q,n)),b=tt(q=>Ate(q,h,n,c)),T=tt(q=>jee(q,n));if(D.useLayoutEffect(()=>{var q;if(!(i!=="auto"||!_||iL(o)||D.isValidElement(o)||T==null)){var P=s.current,O=P==null||(q=P.tickRefs)===null||q===void 0?void 0:q.current,{tickSize:R,tickMargin:U}=P.props,L=v2e({ticks:O,label:a.current,labelGapWithTick:5,tickSize:R,tickMargin:U});Math.round(_.width)!==Math.round(L)&&d(wNe({id:n,width:L}))}},[s,s==null||(e=s.current)===null||e===void 0||(e=e.tickRefs)===null||e===void 0?void 0:e.current,_==null?void 0:_.width,_,d,o,n,i]),_==null||S==null||T==null)return null;var{dangerouslySetInnerHTML:x,ticks:C}=t,I=C5(t,_2e),{id:N}=T,V=C5(T,w2e);return D.createElement(ip,f2({},I,V,{ref:s,labelRef:a,scale:g,x:S.x,y:S.y,tickTextProps:i==="auto"?{width:void 0}:{width:i},width:_.width,height:_.height,className:nn("recharts-".concat(h," ").concat(h),r),viewBox:u,ticks:b}))},A2e=t=>{var e,n,r,i,o;return D.createElement(D.Fragment,null,D.createElement(S2e,{interval:(e=t.interval)!==null&&e!==void 0?e:"preserveEnd",id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:(n=t.includeHidden)!==null&&n!==void 0?n:!1,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:(r=t.angle)!==null&&r!==void 0?r:0,minTickGap:(i=t.minTickGap)!==null&&i!==void 0?i:5,tick:(o=t.tick)!==null&&o!==void 0?o:!0,tickFormatter:t.tickFormatter}),D.createElement(x2e,t))},C2e={allowDataOverflow:Pi.allowDataOverflow,allowDecimals:Pi.allowDecimals,allowDuplicatedCategory:Pi.allowDuplicatedCategory,hide:!1,mirror:Pi.mirror,orientation:Pi.orientation,padding:Pi.padding,reversed:Pi.reversed,scale:Pi.scale,tickCount:Pi.tickCount,type:Pi.type,width:Pi.width,yAxisId:0};class uL extends D.Component{render(){return D.createElement(A2e,this.props)}}Ine(uL,"displayName","YAxis");Ine(uL,"defaultProps",C2e);var ZA={exports:{}},e1={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I5;function I2e(){if(I5)return e1;I5=1;var t=Mh();function e(u,c){return u===c&&(u!==0||1/u===1/c)||u!==u&&c!==c}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,o=t.useEffect,s=t.useMemo,a=t.useDebugValue;return e1.useSyncExternalStoreWithSelector=function(u,c,d,h,g){var _=i(null);if(_.current===null){var S={hasValue:!1,value:null};_.current=S}else S=_.current;_=s(function(){function T(V){if(!x){if(x=!0,C=V,V=h(V),g!==void 0&&S.hasValue){var q=S.value;if(g(q,V))return I=q}return I=V}if(q=I,n(C,V))return q;var P=h(V);return g!==void 0&&g(q,P)?(C=V,q):(C=V,I=P)}var x=!1,C,I,N=d===void 0?null:d;return[function(){return T(c())},N===null?void 0:function(){return T(N())}]},[c,d,h,g]);var b=r(u,_[0],_[1]);return o(function(){S.hasValue=!0,S.value=b},[b]),a(b),b},e1}var R5;function R2e(){return R5||(R5=1,ZA.exports=I2e()),ZA.exports}R2e();function P2e(t){t()}function N2e(){let t=null,e=null;return{clear(){t=null,e=null},notify(){P2e(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var P5={notify(){},get:()=>[]};function M2e(t,e){let n,r=P5,i=0,o=!1;function s(b){d();const T=r.subscribe(b);let x=!1;return()=>{x||(x=!0,T(),h())}}function a(){r.notify()}function u(){S.onStateChange&&S.onStateChange()}function c(){return o}function d(){i++,n||(n=t.subscribe(u),r=N2e())}function h(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=P5)}function g(){o||(o=!0,d())}function _(){o&&(o=!1,h())}const S={addNestedSub:s,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:c,trySubscribe:g,tryUnsubscribe:_,getListeners:()=>r};return S}var D2e=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",k2e=D2e(),O2e=()=>typeof navigator<"u"&&navigator.product==="ReactNative",L2e=O2e(),V2e=()=>k2e||L2e?D.useLayoutEffect:D.useEffect,U2e=V2e(),t1=Symbol.for("react-redux-context"),n1=typeof globalThis<"u"?globalThis:{};function q2e(){if(!D.createContext)return{};const t=n1[t1]??(n1[t1]=new Map);let e=t.get(D.createContext);return e||(e=D.createContext(null),t.set(D.createContext,e)),e}var F2e=q2e();function B2e(t){const{children:e,context:n,serverState:r,store:i}=t,o=D.useMemo(()=>{const u=M2e(i);return{store:i,subscription:u,getServerState:r?()=>r:void 0}},[i,r]),s=D.useMemo(()=>i.getState(),[i]);U2e(()=>{const{subscription:u}=o;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),s!==i.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[o,s]);const a=n||F2e;return D.createElement(a.Provider,{value:o},e)}var $2e=B2e,z2e=(t,e)=>e,cL=ve([z2e,qt,$ee,tr,Bte,rl,OIe,vr],FIe),fL=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},Rne=xo("mouseClick"),Pne=ky();Pne.startListening({actionCreator:Rne,effect:(t,e)=>{var n=t.payload,r=cL(e.getState(),fL(n));(r==null?void 0:r.activeIndex)!=null&&e.dispatch(HCe({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var d2=xo("mouseMove"),Nne=ky();Nne.startListening({actionCreator:d2,effect:(t,e)=>{var n=t.payload,r=e.getState(),i=WO(r,r.tooltip.settings.shared),o=cL(r,fL(n));i==="axis"&&((o==null?void 0:o.activeIndex)!=null?e.dispatch(kte({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):e.dispatch(Dte()))}});function H2e(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":e}var N5={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},Mne=Gi({name:"rootProps",initialState:N5,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:N5.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className}}}),G2e=Mne.reducer,{updateOptions:j2e}=Mne.actions,Dne=Gi({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:iKe}=Dne.actions,K2e=Dne.reducer,kne=xo("keyDown"),One=xo("focus"),dL=ky();dL.startListening({actionCreator:kne,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,o=t.payload;if(!(o!=="ArrowRight"&&o!=="ArrowLeft"&&o!=="Enter")){var s=Number(YO(i,rp(n))),a=rl(n);if(o==="Enter"){var u=Nw(n,"axis","hover",String(i.index));e.dispatch(i2({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:u}));return}var c=OCe(n),d=c==="left-to-right"?1:-1,h=o==="ArrowRight"?1:-1,g=s+h*d;if(!(a==null||g>=a.length||g<0)){var _=Nw(n,"axis","hover",String(g));e.dispatch(i2({active:!0,activeIndex:g.toString(),activeDataKey:void 0,activeCoordinate:_}))}}}}});dL.startListening({actionCreator:One,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var o="0",s=Nw(n,"axis","hover",String(o));e.dispatch(i2({activeDataKey:void 0,active:!0,activeIndex:o,activeCoordinate:s}))}}}});var fo=xo("externalEvent"),Lne=ky();Lne.startListening({actionCreator:fo,effect:(t,e)=>{if(t.payload.handler!=null){var n=e.getState(),r={activeCoordinate:AIe(n),activeDataKey:Gte(n),activeIndex:Ch(n),activeLabel:Hte(n),activeTooltipIndex:Ch(n),isTooltipActive:CIe(n)};t.payload.handler(r,t.payload.reactEvent)}}});var W2e=ve([np],t=>t.tooltipItemPayloads),Y2e=ve([W2e,Gy,(t,e,n)=>e,(t,e,n)=>n],(t,e,n,r)=>{var i=t.find(a=>a.settings.dataKey===r);if(i!=null){var{positions:o}=i;if(o!=null){var s=e(o,n);return s}}}),Vne=xo("touchMove"),Une=ky();Une.startListening({actionCreator:Vne,effect:(t,e)=>{var n=t.payload,r=e.getState(),i=WO(r,r.tooltip.settings.shared);if(i==="axis"){var o=cL(r,fL({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));(o==null?void 0:o.activeIndex)!=null&&e.dispatch(kte({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(i==="item"){var s,a=n.touches[0],u=document.elementFromPoint(a.clientX,a.clientY);if(!u||!u.getAttribute)return;var c=u.getAttribute(cEe),d=(s=u.getAttribute(fEe))!==null&&s!==void 0?s:void 0,h=Y2e(e.getState(),c,d);e.dispatch(Mte({activeDataKey:d,activeIndex:c,activeCoordinate:h}))}}});var J2e=tZ({brush:UMe,cartesianAxis:bNe,chartData:rRe,errorBars:ONe,graphicalItems:cNe,layout:DTe,legend:REe,options:QIe,polarAxis:MPe,polarOptions:K2e,referenceElements:GMe,rootProps:G2e,tooltip:GCe}),X2e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return iTe({reducer:J2e,preloadedState:e,middleware:r=>r({serializableCheck:!1}).concat([Pne.middleware,Nne.middleware,dL.middleware,Lne.middleware,Une.middleware]),devTools:!!window.RECHARTS_DEV_TOOLS_ENABLED&&{serialize:{replacer:H2e},name:"recharts-".concat(n)}})};function Q2e(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=ns(),o=D.useRef(null);if(i)return n;o.current==null&&(o.current=X2e(e,r));var s=Wk;return D.createElement($2e,{context:s,store:o.current},n)}function Z2e(t){var{layout:e,width:n,height:r,margin:i}=t,o=yr(),s=ns();return D.useEffect(()=>{s||(o(PTe(e)),o(NTe({width:n,height:r})),o(RTe(i)))},[o,s,e,n,r,i]),null}function eDe(t){var e=yr();return D.useEffect(()=>{e(j2e(t))},[e,t]),null}var tDe=["children"];function nDe(t,e){if(t==null)return{};var n,r,i=rDe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function rDe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Vw(){return Vw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vw.apply(null,arguments)}var iDe={width:"100%",height:"100%"},oDe=D.forwardRef((t,e)=>{var n=SEe(),r=xEe(),i=IZ();if(!mw(n)||!mw(r))return null;var{children:o,otherAttributes:s,title:a,desc:u}=t,c,d;return typeof s.tabIndex=="number"?c=s.tabIndex:c=i?0:void 0,typeof s.role=="string"?d=s.role:d=i?"application":void 0,D.createElement(TQ,Vw({},s,{title:a,desc:u,role:d,tabIndex:c,width:n,height:r,style:iDe,ref:e}),o)}),sDe=t=>{var{children:e}=t,n=tt(rT);if(!n)return null;var{width:r,height:i,y:o,x:s}=n;return D.createElement(TQ,{width:r,height:i,x:s,y:o},e)},M5=D.forwardRef((t,e)=>{var{children:n}=t,r=nDe(t,tDe),i=ns();return i?D.createElement(sDe,null,n):D.createElement(oDe,Vw({ref:e},r),n)});function aDe(){var t=yr(),[e,n]=D.useState(null),r=tt(uEe);return D.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),o=i.width/e.offsetWidth;zi(o)&&o!==r&&t(MTe(o))}},[e,t,r]),n}function D5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lDe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D5(Object(n),!0).forEach(function(r){uDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uDe(t,e,n){return(e=cDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cDe(t){var e=fDe(t,"string");return typeof e=="symbol"?e:e+""}function fDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var dDe=D.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:o,onContextMenu:s,onDoubleClick:a,onMouseDown:u,onMouseEnter:c,onMouseLeave:d,onMouseMove:h,onMouseUp:g,onTouchEnd:_,onTouchMove:S,onTouchStart:b,style:T,width:x}=t,C=yr(),[I,N]=D.useState(null),[V,q]=D.useState(null);dRe();var P=aDe(),O=D.useCallback(ee=>{P(ee),typeof e=="function"&&e(ee),N(ee),q(ee)},[P,e,N,q]),R=D.useCallback(ee=>{C(Rne(ee)),C(fo({handler:o,reactEvent:ee}))},[C,o]),U=D.useCallback(ee=>{C(d2(ee)),C(fo({handler:c,reactEvent:ee}))},[C,c]),L=D.useCallback(ee=>{C(Dte()),C(fo({handler:d,reactEvent:ee}))},[C,d]),F=D.useCallback(ee=>{C(d2(ee)),C(fo({handler:h,reactEvent:ee}))},[C,h]),$=D.useCallback(()=>{C(One())},[C]),H=D.useCallback(ee=>{C(kne(ee.key))},[C]),Y=D.useCallback(ee=>{C(fo({handler:s,reactEvent:ee}))},[C,s]),K=D.useCallback(ee=>{C(fo({handler:a,reactEvent:ee}))},[C,a]),Q=D.useCallback(ee=>{C(fo({handler:u,reactEvent:ee}))},[C,u]),re=D.useCallback(ee=>{C(fo({handler:g,reactEvent:ee}))},[C,g]),X=D.useCallback(ee=>{C(fo({handler:b,reactEvent:ee}))},[C,b]),G=D.useCallback(ee=>{C(Vne(ee)),C(fo({handler:S,reactEvent:ee}))},[C,S]),te=D.useCallback(ee=>{C(fo({handler:_,reactEvent:ee}))},[C,_]);return D.createElement(Xte.Provider,{value:I},D.createElement(Z0e.Provider,{value:V},D.createElement("div",{className:nn("recharts-wrapper",r),style:lDe({position:"relative",cursor:"default",width:x,height:i},T),onClick:R,onContextMenu:Y,onDoubleClick:K,onFocus:$,onKeyDown:H,onMouseDown:Q,onMouseEnter:U,onMouseLeave:L,onMouseMove:F,onMouseUp:re,onTouchEnd:te,onTouchMove:G,onTouchStart:X,ref:O},n)))}),hDe=["children","className","width","height","style","compact","title","desc"];function pDe(t,e){if(t==null)return{};var n,r,i=mDe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function mDe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var gDe=D.forwardRef((t,e)=>{var{children:n,className:r,width:i,height:o,style:s,compact:a,title:u,desc:c}=t,d=pDe(t,hDe),h=Hb(d);return a?D.createElement(M5,{otherAttributes:h,title:u,desc:c},n):D.createElement(dDe,{className:r,style:s,width:i,height:o,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},D.createElement(M5,{otherAttributes:h,title:u,desc:c,ref:e},D.createElement(KMe,null,n)))}),yDe=["width","height"];function h2(){return h2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},h2.apply(null,arguments)}function vDe(t,e){if(t==null)return{};var n,r,i=_De(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function _De(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var wDe={top:5,right:5,bottom:5,left:5},bDe={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:wDe,reverseStackOrder:!1,syncMethod:"index"},TDe=D.forwardRef(function(e,n){var r,i=Tu(e.categoricalChartProps,bDe),{width:o,height:s}=i,a=vDe(i,yDe);if(!mw(o)||!mw(s))return null;var{chartName:u,defaultTooltipEventType:c,validateTooltipEventTypes:d,tooltipPayloadSearcher:h,categoricalChartProps:g}=e,_={chartName:u,defaultTooltipEventType:c,validateTooltipEventTypes:d,tooltipPayloadSearcher:h,eventEmitter:void 0};return D.createElement(Q2e,{preloadedState:{options:_},reduxStoreName:(r=g.id)!==null&&r!==void 0?r:u},D.createElement(VMe,{chartData:g.data}),D.createElement(Z2e,{width:o,height:s,layout:i.layout,margin:i.margin}),D.createElement(eDe,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),D.createElement(gDe,h2({},a,{width:o,height:s,ref:n})))}),EDe=["axis","item"],SDe=D.forwardRef((t,e)=>D.createElement(TDe,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:EDe,tooltipPayloadSearcher:JIe,categoricalChartProps:t,ref:e}));const xDe=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:M.jsx("path",{d:"M2 11h3v7H2v-7zM6 3h3v15H6V3zm5 8h3v7h-3v-7zm4-4h3v11h-3V7z"})}),ADe=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:M.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),CDe=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:M.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})}),IDe=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),RDe=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:M.jsx("path",{fillRule:"evenodd",d:"M10 2a4 4 0 00-4 4v4H4a2 2 0 00-2 2v6a2 2 0 002 2h12a2 2 0 002-2v-6a2 2 0 00-2-2h-2V6a4 4 0 00-4-4zm-2 6V6a2 2 0 114 0v4H8z",clipRule:"evenodd"})}),PDe=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:M.jsx("path",{d:"M10 2a4 4 0 00-4 4v4H4a2 2 0 00-2 2v6a2 2 0 002 2h12a2 2 0 002-2v-6a2 2 0 00-2-2h-2V6a4 4 0 00-4-4zm2 6V6a2 2 0 10-4 0v4h4zM4 12h12v6H4v-6z"})}),NDe=({data:t})=>!t||t.length===0?M.jsx("p",{className:"text-stone-400 text-center py-8",children:"Нет данных для отображения."}):M.jsx(PRe,{width:"100%",height:300,children:M.jsxs(SDe,{data:t,margin:{top:5,right:20,left:-10,bottom:5},children:[M.jsx(lL,{dataKey:"label",stroke:"#a8a29e",fontSize:12,tickLine:!1,axisLine:!1}),M.jsx(uL,{stroke:"#a8a29e",fontSize:12,tickLine:!1,axisLine:!1,allowDecimals:!1}),M.jsx(wRe,{contentStyle:{backgroundColor:"#292524",border:"1px solid #57534e",borderRadius:"0.375rem"},labelStyle:{color:"#f59e0b"},itemStyle:{color:"#d6d3d1"},formatter:e=>[e,"Просмотры"]}),M.jsx(Tne,{dataKey:"value",fill:"#f59e0b",radius:[4,4,0,0]})]})}),MDe=({codeword:t,games:e,onUpdate:n,onDelete:r})=>{const[i,o]=D.useState(t.usedMessage),[s,a]=D.useState(t.introText||"ВАШЕ КОДОВОЕ СЛОВО:"),[u,c]=D.useState(t.note||""),[d,h]=D.useState(!1),[g,_]=D.useState([]),[S,b]=D.useState(!1),[T,x]=D.useState(""),[C,I]=D.useState("day"),[N,V]=D.useState(!1),[q,P]=D.useState(t.word),O=`${window.location.origin}${window.location.pathname}#/view?c=${t.id}`,R=`https://api.qrserver.com/v1/create-qr-code/?size=256x256&data=${encodeURIComponent(O)}`,U=async()=>{b(!0),x(""),_([]);try{const F=ho(Ns(Jr,"codewords",t.id,"viewEvents"),Z0("viewedAt","asc")),H=(await Ck(F)).docs.map(Q=>Q.data().viewedAt.toDate());if(H.length===0){b(!1);return}const Y={};H.forEach(Q=>{let re="";C==="day"?re=Q.toLocaleDateString("ru-RU",{year:"2-digit",month:"2-digit",day:"2-digit"}):re=Q.toLocaleDateString("ru-RU",{year:"2-digit",month:"2-digit",day:"2-digit"})+` ${Q.getHours()}:00`,Y[re]=(Y[re]||0)+1});const K=Object.keys(Y).map(Q=>({label:Q,value:Y[Q]}));_(K)}catch(F){console.error("Error fetching stats:",F),x("Не удалось загрузить статистику.")}finally{b(!1)}};D.useEffect(()=>{d&&U()},[d,C]),D.useEffect(()=>{N||P(t.word)},[t.word,N]);const L=async()=>{try{const F=await fetch(R);if(!F.ok)throw new Error("QR code fetch failed");const $=await F.blob(),H=window.URL.createObjectURL($),Y=document.createElement("a");Y.href=H;const K=t.word.replace(/[^a-z0-9а-яё]/gi,"_").toLowerCase();Y.setAttribute("download",`qr_${K}.png`),document.body.appendChild(Y),Y.click(),Y.parentNode&&Y.parentNode.removeChild(Y),window.URL.revokeObjectURL(H)}catch(F){console.error("Failed to download QR code",F),alert("Не удалось скачать QR-код.")}};return M.jsxs(M.Fragment,{children:[M.jsxs("div",{className:"bg-stone-800/70 border border-stone-700 p-4 rounded-md grid grid-cols-1 md:grid-cols-3 gap-4 items-start",children:[M.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2",children:[M.jsx("img",{src:R,alt:"QR Code",className:"w-36 h-36 border-2 border-stone-600 rounded-md"}),M.jsxs("button",{onClick:L,className:"flex items-center justify-center gap-2 w-full bg-stone-600 hover:bg-stone-500 text-stone-200 px-3 py-2 rounded-md text-sm transition-colors",children:[M.jsx(IDe,{}),"Скачать QR"]}),M.jsx("a",{href:O,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-amber-400 hover:text-amber-300 break-all text-center pt-1",children:O})]}),M.jsxs("div",{className:"md:col-span-2 space-y-3",children:[M.jsxs("div",{children:[M.jsx("label",{htmlFor:`introText_${t.id}`,className:"text-sm font-bold text-stone-400 block",children:"Вступительный текст:"}),M.jsx("input",{id:`introText_${t.id}`,type:"text",value:s,onChange:F=>a(F.target.value),onBlur:()=>n(t.id,{introText:s}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-3 py-1 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"})]}),M.jsxs("div",{children:[M.jsx("label",{htmlFor:`word_${t.id}`,className:"text-sm font-bold text-stone-400 block",children:"Кодовое слово:"}),M.jsxs("div",{className:"flex items-center gap-2 bg-stone-900 rounded-md pr-2 border border-stone-600 focus-within:border-amber-500 focus-within:ring-1 focus-within:ring-amber-500 transition-all",children:[N?M.jsx("input",{id:`word_${t.id}`,type:"text",value:q,onChange:F=>P(F.target.value),onBlur:()=>{q.trim()&&q.trim()!==t.word?n(t.id,{word:q.trim()}):P(t.word),V(!1)},onKeyDown:F=>{F.key==="Enter"&&F.target.blur(),F.key==="Escape"&&(P(t.word),V(!1))},className:"text-lg w-full bg-transparent p-1 px-3 font-bold text-amber-400 focus:ring-0 border-0 outline-none",autoFocus:!0}):M.jsx("p",{id:`word_${t.id}`,className:"flex-grow text-lg p-1 px-3 font-bold text-stone-100 break-words",children:t.word}),M.jsx("button",{onClick:()=>{N||P(t.word),V(!N)},className:"p-1 text-stone-400 hover:text-amber-400 transition-colors",title:N?"Заблокировать":"Редактировать кодовое слово","aria-label":N?"Заблокировать редактирование":"Редактировать кодовое слово","aria-controls":`word_${t.id}`,children:N?M.jsx(PDe,{}):M.jsx(RDe,{})})]})]}),M.jsxs("div",{children:[M.jsx("label",{htmlFor:`usedMsg_${t.id}`,className:"text-sm font-bold text-stone-400 block",children:"Сообщение (если использовано):"}),M.jsx("input",{id:`usedMsg_${t.id}`,type:"text",value:i,onChange:F=>o(F.target.value),onBlur:()=>n(t.id,{usedMessage:i}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-3 py-1 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"})]}),M.jsxs("div",{children:[M.jsx("label",{htmlFor:`note_${t.id}`,className:"text-sm font-bold text-stone-400 block",children:"Заметка (видна только вам):"}),M.jsx("textarea",{id:`note_${t.id}`,value:u,onChange:F=>c(F.target.value),onBlur:()=>n(t.id,{note:u}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-3 py-1 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all h-20 resize-y",placeholder:"Любые пометки по этому коду..."})]}),M.jsxs("div",{children:[M.jsx("label",{htmlFor:`questLink_${t.id}`,className:"text-sm font-bold text-stone-400 block",children:"Запустить квест перед показом:"}),M.jsxs("select",{id:`questLink_${t.id}`,value:t.questId||"",onChange:F=>n(t.id,{questId:F.target.value}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-3 py-1 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",children:[M.jsx("option",{value:"",children:"Квест отключен"}),e.map(F=>M.jsx("option",{value:F.id,children:F.title},F.id))]})]}),M.jsxs("div",{className:"flex items-center justify-between pt-2",children:[M.jsxs("label",{htmlFor:`toggle_${t.id}`,className:"flex items-center cursor-pointer",children:[M.jsxs("div",{className:"relative",children:[M.jsx("input",{type:"checkbox",id:`toggle_${t.id}`,className:"sr-only",checked:t.isUsed,onChange:()=>n(t.id,{isUsed:!t.isUsed})}),M.jsx("div",{className:`block ${t.isUsed?"bg-amber-500":"bg-stone-600"} w-14 h-8 rounded-full transition-colors`}),M.jsx("div",{className:`dot absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition-transform ${t.isUsed?"transform translate-x-6":""}`})]}),M.jsx("div",{className:"ml-3 text-stone-300 font-semibold",children:t.isUsed?"ИСПОЛЬЗОВАНО":"АКТИВНО"})]}),M.jsxs("div",{className:"flex items-center gap-2 text-stone-400",children:[M.jsxs("div",{className:"flex items-center gap-1",title:"Просмотры",children:[M.jsx(ADe,{}),M.jsx("span",{children:t.views||0})]}),M.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-1 bg-sky-800 hover:bg-sky-700 text-stone-100 px-3 py-2 rounded-md text-sm transition-colors",children:[M.jsx(xDe,{}),"Статистика"]}),M.jsxs("button",{onClick:()=>r(t.id),className:"flex items-center gap-1 bg-red-800 hover:bg-red-700 text-stone-100 px-3 py-2 rounded-md text-sm transition-colors",children:[M.jsx(CDe,{}),"Удалить"]})]})]})]})]}),d&&M.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",onClick:()=>h(!1),role:"dialog","aria-modal":"true","aria-labelledby":"stats-modal-title",children:M.jsxs("div",{className:"bg-stone-800 border border-stone-700 rounded-lg w-full max-w-4xl max-h-[90vh] flex flex-col",onClick:F=>F.stopPropagation(),children:[M.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-stone-700",children:[M.jsx("h3",{id:"stats-modal-title",className:"font-display text-2xl text-amber-400",children:"Статистика просмотров"}),M.jsx("button",{onClick:()=>h(!1),className:"text-stone-400 hover:text-white text-3xl leading-none","aria-label":"Close",children:"×"})]}),M.jsxs("div",{className:"p-4 flex-grow overflow-y-auto",children:[M.jsxs("div",{className:"flex gap-2 mb-4",children:[M.jsx("button",{onClick:()=>I("day"),className:`px-4 py-2 rounded-md font-semibold ${C==="day"?"bg-amber-500 text-stone-900":"bg-stone-700 text-stone-300 hover:bg-stone-600"}`,children:"По дням"}),M.jsx("button",{onClick:()=>I("hour"),className:`px-4 py-2 rounded-md font-semibold ${C==="hour"?"bg-amber-500 text-stone-900":"bg-stone-700 text-stone-300 hover:bg-stone-600"}`,children:"По часам"})]}),S&&M.jsx("p",{className:"animate-pulse text-center py-8 font-display text-xl text-stone-400",children:"ЗАГРУЗКА СТАТИСТИКИ..."}),T&&M.jsx("p",{className:"text-red-500 text-center py-8",children:T}),!S&&!T&&M.jsx(NDe,{data:g})]})]})})]})},DDe=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:M.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),kDe=()=>M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[M.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),M.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]}),ODe=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:M.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})}),LDe=({game:t,onDelete:e})=>{var o;const n=(o=t.createdAt)==null?void 0:o.toDate().toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}),r=()=>{window.location.hash=`#/admin/quest/${t.id}`},i=()=>{window.location.hash=`#/play/${t.id}`};return M.jsxs("div",{className:"bg-stone-800/70 border border-stone-700 p-4 rounded-md flex justify-between items-center",children:[M.jsxs("div",{children:[M.jsx("h4",{className:"text-xl font-bold text-stone-100",children:t.title}),M.jsxs("div",{className:"text-sm text-stone-400 mt-1",children:[M.jsx("span",{className:`inline-block px-2 py-0.5 rounded-md mr-2 text-xs font-semibold ${t.status==="published"?"bg-green-900/50 text-green-300":"bg-sky-900/50 text-sky-300"}`,children:t.status==="published"?"Опубликован":"Черновик"}),M.jsxs("span",{children:["Создан: ",n||"N/A"]})]})]}),M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsxs("button",{onClick:i,className:"flex items-center gap-1 bg-green-800 hover:bg-green-700 text-stone-100 px-3 py-2 rounded-md text-sm transition-colors",children:[M.jsx(DDe,{})," Играть"]}),M.jsxs("button",{onClick:r,className:"flex items-center gap-1 bg-blue-800 hover:bg-blue-700 text-stone-100 px-3 py-2 rounded-md text-sm transition-colors",children:[M.jsx(kDe,{})," Редактировать"]}),M.jsxs("button",{onClick:()=>e(t.id),className:"flex items-center gap-1 bg-red-800 hover:bg-red-700 text-stone-100 px-3 py-2 rounded-md text-sm transition-colors",children:[M.jsx(ODe,{})," Удалить"]})]})]})},VDe=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H5v-2H3v-2H1v-4a6 6 0 017.743-5.743z"})}),UDe=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),qDe=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:M.jsx("path",{d:"M17 3H5a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2zm-3 12H8v-4h6v4zm2-6H5V5h12v4z"})}),FDe=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),BDe=()=>{const[t,e]=D.useState("quests"),[n,r]=D.useState([]),[i,o]=D.useState(""),[s,a]=D.useState("Этот код уже был использован."),[u,c]=D.useState("ВАШЕ КОДОВОЕ СЛОВО:"),[d,h]=D.useState([]),[g,_]=D.useState(""),[S,b]=D.useState(""),[T,x]=D.useState({type:"",text:""});D.useEffect(()=>{const R=ho(Ns(Jr,"games"),Z0("createdAt","desc")),U=ew(R,L=>{const F=L.docs.map($=>({...$.data(),id:$.id}));h(F)},L=>{console.error("Error fetching games:",L),alert("Не удалось загрузить квесты.")});return()=>U()},[]),D.useEffect(()=>{if(t!=="codewords"){r([]);return}const R=ho(Ns(Jr,"codewords"),Z0("createdAt","desc")),U=ew(R,L=>{const F=L.docs.map($=>({...$.data(),id:$.id}));r(F)},L=>{console.error("Error fetching codewords:",L),alert("Не удалось загрузить кодовые слова.")});return()=>U&&U()},[t]);const C=async R=>{if(R.preventDefault(),i.trim()!=="")try{await Hg(Ns(Jr,"codewords"),{word:i.trim(),isUsed:!1,usedMessage:s.trim()||"Этот код уже был использован.",introText:u.trim()||"ВАШЕ КОДОВОЕ СЛОВО:",note:"",questId:"",createdAt:Ql(),views:0}),o(""),c("ВАШЕ КОДОВОЕ СЛОВО:"),a("Этот код уже был использован.")}catch(U){console.error("Error adding codeword: ",U),alert("Ошибка при добавлении кода.")}},I=async(R,U)=>{try{await zg(jo(Jr,"codewords",R),U)}catch(L){console.error("Error updating codeword: ",L),alert("Ошибка при обновлении кода.")}},N=async R=>{if(window.confirm("Вы уверены, что хотите удалить этот код? Это действие необратимо."))try{const U=ho(Ns(Jr,"codewords",R,"viewEvents")),L=await Ck(U),F=Bve(Jr);L.docs.forEach($=>F.delete($.ref)),await F.commit(),await vM(jo(Jr,"codewords",R))}catch(U){console.error("Error deleting codeword:",U),alert("Ошибка при удалении кода.")}},V=async R=>{if(R.preventDefault(),g.trim()!=="")try{const U=`quest_${Date.now()}`;await Hg(Ns(Jr,"games"),{title:g.trim(),status:"draft",createdAt:Ql(),updatedAt:Ql(),dsl:{format:"bk-quest@1",meta:{id:U,title:g.trim(),version:1,defaultLocale:"ru"},assets:{images:{},audio:{}},state:{vars:{},inventory:[]},nodes:{start:{text:"This is the beginning."}}}}),_("")}catch(U){console.error("Error adding quest: ",U),alert("Ошибка при создании квеста.")}},q=async R=>{if(window.confirm("Вы уверены, что хотите удалить этот квест? Все его данные будут стерты навсегда."))try{await vM(jo(Jr,"games",R))}catch(U){console.error("Error deleting quest:",U),alert("Ошибка при удалении квеста.")}},P=async R=>{if(R.preventDefault(),x({type:"",text:""}),window.confirm("Вы уверены, что хотите изменить пароль?"))try{if(!_g.currentUser)throw new Error("Пользователь не авторизован.");if(!S||S.length<6)throw new Error("Пароль должен содержать не менее 6 символов.");await CW(_g.currentUser,S),x({type:"success",text:"Пароль успешно изменен!"}),b("")}catch(U){x({type:"error",text:`Ошибка: ${U.message}`})}},O=({tabName:R,label:U,children:L})=>M.jsxs("button",{onClick:()=>e(R),className:`flex items-center justify-center w-full px-4 py-3 font-display text-xl rounded-t-md transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-500
            ${t===R?"bg-stone-800/50 text-amber-400 border-b-2 border-amber-400":"bg-stone-900/50 text-stone-400 hover:bg-stone-800/50"}`,children:[L,U]});return M.jsxs("div",{className:"container mx-auto py-8 px-4",children:[M.jsxs("div",{className:"flex justify-between items-center mb-6",children:[M.jsx("h2",{className:"font-display text-4xl text-stone-200",children:"Панель управления"}),M.jsx("button",{onClick:()=>vde(_g),className:"bg-stone-700 hover:bg-stone-600 text-stone-200 font-semibold py-2 px-4 rounded-md transition-colors",children:"Выйти"})]}),M.jsxs("div",{className:"bg-stone-800/50 border border-stone-700 p-6 rounded-md mb-8",children:[M.jsx("h3",{className:"font-display text-2xl text-amber-400 mb-4",children:"Изменить пароль"}),M.jsxs("form",{onSubmit:P,className:"space-y-4",children:[M.jsx("input",{type:"password",value:S,onChange:R=>b(R.target.value),placeholder:"Новый пароль (минимум 6 символов)",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),M.jsxs("button",{type:"submit",className:"w-full flex items-center justify-center font-display text-xl bg-amber-500 text-stone-900 py-2 rounded-md hover:bg-amber-400 transition-colors",children:[M.jsx(qDe,{})," Сохранить пароль"]}),T.text&&M.jsx("p",{className:T.type==="success"?"text-green-400":"text-red-500",children:T.text})]})]}),M.jsxs("div",{className:"flex mb-[-1px]",children:[M.jsx(O,{tabName:"quests",label:"Квесты",children:M.jsx(UDe,{})}),M.jsx(O,{tabName:"codewords",label:"Кодовые слова",children:M.jsx(VDe,{})})]}),M.jsxs("div",{className:"bg-stone-800/50 border border-stone-700 p-6 rounded-b-md rounded-tr-md",children:[t==="codewords"&&M.jsxs(M.Fragment,{children:[M.jsxs("div",{className:"mb-8",children:[M.jsx("h3",{className:"font-display text-2xl text-amber-400 mb-4",children:"Добавить новый код"}),M.jsxs("form",{onSubmit:C,className:"space-y-4",children:[M.jsx("input",{type:"text",value:u,onChange:R=>c(R.target.value),placeholder:"Вступительный текст (обращение)",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),M.jsx("input",{type:"text",value:i,onChange:R=>o(R.target.value),placeholder:"Новое кодовое слово",required:!0,className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),M.jsx("input",{type:"text",value:s,onChange:R=>a(R.target.value),placeholder:"Сообщение если код использован",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),M.jsx("button",{type:"submit",className:"w-full font-display text-xl bg-amber-500 text-stone-900 py-2 rounded-md hover:bg-amber-400 transition-colors",children:"Создать QR-код"})]})]}),M.jsx("div",{className:"space-y-4",children:n.map(R=>M.jsx(MDe,{codeword:R,games:d,onUpdate:I,onDelete:N},R.id))})]}),t==="quests"&&M.jsxs(M.Fragment,{children:[M.jsxs("div",{className:"mb-8",children:[M.jsx("h3",{className:"font-display text-2xl text-amber-400 mb-4",children:"Создать новый квест"}),M.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[M.jsxs("form",{onSubmit:V,className:"flex-grow flex gap-4",children:[M.jsx("input",{type:"text",value:g,onChange:R=>_(R.target.value),placeholder:"Название квеста",required:!0,className:"flex-grow bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),M.jsx("button",{type:"submit",className:"font-display text-xl bg-amber-500 text-stone-900 py-2 px-6 rounded-md hover:bg-amber-400 transition-colors",children:"Создать"})]}),M.jsxs("a",{href:"/#/admin/architect",className:"w-full md:w-auto flex items-center justify-center font-display text-xl bg-sky-600 text-white py-2 px-6 rounded-md hover:bg-sky-500 transition-colors",children:[M.jsx(FDe,{})," Создать с AI"]})]})]}),M.jsx("div",{className:"space-y-4",children:d.length>0?d.map(R=>M.jsx(LDe,{game:R,onDelete:q},R.id)):M.jsx("p",{className:"text-stone-400 text-center py-4",children:"Квесты еще не созданы."})})]})]})]})},$De=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:M.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 110 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})}),p2=({questId:t,onWin:e})=>{var q;const{questId:n}=gK(),r=t||n,[i,o]=D.useState(null),[s,a]=D.useState(null),[u,c]=D.useState("start"),[d,h]=D.useState(!0),[g,_]=D.useState(""),S=P=>P?typeof P=="string"?P:P[(i==null?void 0:i.dsl.meta.defaultLocale)||"ru"]||Object.values(P)[0]||"":"",b=D.useCallback((P,O)=>{if(!P)return!0;if(P.all)return P.all.every(L=>b(L,O));if(P.any)return P.any.some(L=>b(L,O));if(P.not)return!b(P.not,O);const{vars:R,inventory:U}=O;return P.hp_eq!==void 0?R.hp===P.hp_eq:P.hp_gt!==void 0?R.hp>P.hp_gt:P.hp_gte!==void 0?R.hp>=P.hp_gte:P.hp_lt!==void 0?R.hp<P.hp_lt:P.hp_lte!==void 0?R.hp<=P.hp_lte:P.has_item?U.includes(P.has_item):P.missing_item?!U.includes(P.missing_item):P.var_eq?Array.isArray(P.var_eq)?P.var_eq.every(L=>R[L.key]===L.value):Object.entries(P.var_eq).every(([L,F])=>R[L]===F):P.var_neq?Array.isArray(P.var_neq)?P.var_neq.every(L=>R[L.key]!==L.value):Object.entries(P.var_neq).every(([L,F])=>R[L]!==F):!0},[]),T=D.useCallback((P,O)=>{if(!P)return O;const R=JSON.parse(JSON.stringify(O));return P.forEach(U=>{U.add&&(Array.isArray(U.add)?U.add.forEach(L=>{R.vars[L.key]=(R.vars[L.key]||0)+L.value}):Object.entries(U.add).forEach(([L,F])=>{R.vars[L]=(R.vars[L]||0)+F})),U.set&&(Array.isArray(U.set)?U.set.forEach(L=>{R.vars[L.key]=L.value}):Object.entries(U.set).forEach(([L,F])=>{R.vars[L]=F})),U.inv_add&&!R.inventory.includes(U.inv_add)&&R.inventory.push(U.inv_add),U.inv_remove&&(R.inventory=R.inventory.filter(L=>L!==U.inv_remove))}),R},[]);D.useEffect(()=>{if(!r){_("Квест не найден."),h(!1);return}h(!0),_("");const P=jo(Jr,"games",r);qb(P).then(O=>{if(O.exists()){const R={id:O.id,...O.data()};o(R);const U=localStorage.getItem(`quest-save-${r}`);if(U){const{playerState:L,currentNodeId:F}=JSON.parse(U);a(L),c(F)}else a(R.dsl.state),c("start")}else _("Квест не найден.");h(!1)}).catch(O=>{console.error("Error fetching quest:",O),_("Ошибка при загрузке квеста."),h(!1)})},[r]),D.useEffect(()=>{if(i&&s){const P={questId:r,playerState:s,currentNodeId:u};localStorage.setItem(`quest-save-${r}`,JSON.stringify(P))}},[s,u,r,i]);const x=i==null?void 0:i.dsl.nodes[u];D.useEffect(()=>{var O;if(!x||!s)return;if(((O=x.end)==null?void 0:O.type)==="win"&&e){localStorage.removeItem(`quest-save-${r}`),e();return}const P=T(x.effects,s);if(JSON.stringify(P)!==JSON.stringify(s)){a(P);return}if(x.branch){for(const R of x.branch)if(b(R.when,s)){c(R.to);return}}x.fallback&&c(x.fallback)},[u,i,s,T,b,e,r]);const C=P=>{if(!s)return;const O=T(P.effects,s);a(O),c(P.to)},I=D.useCallback(()=>{!r||!i||window.confirm("Вы уверены, что хотите начать квест заново? Весь прогресс будет потерян.")&&(localStorage.removeItem(`quest-save-${r}`),a(i.dsl.state),c("start"))},[r,i]);if(d)return M.jsx("div",{className:"text-center p-8 font-display text-4xl text-stone-400 animate-pulse",children:"ЗАГРУЗКА КВЕСТА..."});if(g)return M.jsx("div",{className:"text-center p-8 text-2xl text-red-500",children:g});if(!i||!s||!x)return M.jsx("div",{className:"text-center p-8 text-2xl text-stone-400",children:"Инициализация..."});const N=x.bg&&i.dsl.assets.images[x.bg]?i.dsl.assets.images[x.bg]:void 0,V=((q=x.choices)==null?void 0:q.filter(P=>P.when?b(P.when,s):!0))||[];return M.jsx("div",{className:"min-h-screen w-full flex items-center justify-center p-4 md:p-8",children:M.jsx("div",{className:"w-full max-w-4xl bg-cover bg-center rounded-lg shadow-2xl shadow-black/50 overflow-hidden border-2 border-stone-800",style:{backgroundImage:N?`url(${N})`:"none",backgroundColor:"#1c1917",minHeight:"70vh"},children:M.jsxs("div",{className:"bg-stone-900/80 backdrop-blur-sm p-6 md:p-8 flex flex-col h-full text-stone-200",children:[M.jsxs("div",{className:"flex items-center justify-between gap-4 mb-6 border-b border-stone-700 pb-4 text-sm",children:[M.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1",children:[Object.keys(s.vars).length>0&&Object.keys(s.vars).map(P=>M.jsxs("span",{className:"font-bold text-amber-400",children:[P.toUpperCase(),": ",M.jsx("span",{className:"font-normal text-stone-200",children:s.vars[P]??0})]},P)),s.inventory.length>0&&M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsx("span",{className:"font-bold text-amber-400",children:"ИНВЕНТАРЬ:"}),M.jsx("span",{className:"text-stone-200",children:s.inventory.join(", ")})]})]}),M.jsxs("button",{onClick:I,className:"flex items-center justify-center font-display text-lg bg-stone-700 text-stone-200 py-2 px-4 rounded-md hover:bg-stone-600 transition-colors flex-shrink-0",children:[M.jsx($De,{}),"ЗАНОВО"]})]}),M.jsxs("div",{className:"flex-grow",children:[M.jsx("h2",{className:"font-display text-3xl md:text-4xl text-amber-400 mb-4",children:S(x.title)}),M.jsx("p",{className:"text-stone-300 whitespace-pre-wrap leading-relaxed mb-6",children:S(x.text)}),x.end&&!e&&M.jsxs("div",{className:"text-center py-4 border-t border-stone-700 mt-6",children:[M.jsx("h3",{className:`font-display text-4xl ${x.end.type==="win"?"text-lime-400":"text-red-500"}`,children:x.end.type==="win"?"Победа!":"Конец игры"}),M.jsx("p",{className:"mt-4 text-stone-300",children:S(x.end.message)})]}),!x.end&&M.jsx("div",{className:"flex flex-col space-y-3",children:V.map((P,O)=>M.jsx("button",{onClick:()=>C(P),className:"text-left w-full p-4 bg-stone-800/70 border border-stone-600 rounded-md hover:bg-amber-500 hover:border-amber-400 hover:text-stone-900 transition-all text-stone-200 font-semibold",children:S(P.label)},O))})]})]})})})},zDe=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),HDe=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),k5=({codeId:t})=>{const[e,n]=D.useState(null),[r,i]=D.useState("loading"),[o,s]=D.useState(!1),[a,u]=D.useState(!1),c=Ks();D.useEffect(()=>{const h=new URLSearchParams(c.search||c.hash.split("?")[1]),g=t||h.get("c");if(g){const _=jo(Jr,"codewords",g);(async()=>{try{const b=await qb(_);if(b.exists()){const T={id:b.id,...b.data()};n(T),i("found");const x=`viewed-${g}`;sessionStorage.getItem(x)||(await zg(_,{views:LX(1)}),await Hg(Ns(_,"viewEvents"),{viewedAt:Ql()}),sessionStorage.setItem(x,"true"))}else i("not-found")}catch(b){console.error("Failed to fetch codeword from Firestore:",b),i("error")}})()}else i("not-found")},[c,t]);const d=()=>{e&&!e.isUsed&&(navigator.clipboard.writeText(e.word),s(!0),setTimeout(()=>s(!1),2e3))};return r==="loading"?M.jsx("div",{className:"flex items-center justify-center min-h-[80vh]",children:M.jsx("p",{className:"font-display text-2xl text-stone-400 animate-pulse",children:"ПОИСК ДАННЫХ..."})}):r==="not-found"||r==="error"?M.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] text-center p-4",children:[M.jsx("h2",{className:"font-display text-6xl text-red-500",children:"404"}),M.jsx("p",{className:"text-stone-300 text-xl mt-2",children:"Код не найден."}),M.jsx("p",{className:"text-stone-500",children:"Возможно, ссылка неверна или код был удален."})]}):e!=null&&e.isUsed?M.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] text-center p-4",children:[M.jsx("h2",{className:"font-display text-5xl text-amber-500",children:"КОД ИСПОЛЬЗОВАН"}),M.jsx("p",{className:"text-stone-300 text-xl mt-4 max-w-lg",children:e.usedMessage})]}):e!=null&&e.questId&&!a?M.jsx(p2,{questId:e.questId,onWin:()=>u(!0)}):M.jsx("div",{className:"flex flex-col items-center justify-center min-h-[80vh] text-center p-4",children:M.jsxs("div",{className:"w-full max-w-2xl bg-stone-800/50 border-2 border-stone-700 p-8 rounded-lg shadow-2xl shadow-black/50",children:[a&&M.jsx("p",{className:"font-display text-2xl text-lime-400 mb-4 tracking-wider",children:"КВЕСТ ПРОЙДЕН!"}),M.jsx("p",{className:"text-stone-400 font-display text-2xl tracking-wide",children:(e==null?void 0:e.introText)||"ВАШЕ КОДОВОЕ СЛОВО:"}),M.jsx("p",{className:"text-amber-400 font-bold text-3xl md:text-5xl my-4 break-words select-all tracking-widest",children:e==null?void 0:e.word}),M.jsxs("button",{onClick:d,className:"w-full flex items-center justify-center gap-3 mt-6 bg-stone-700 hover:bg-amber-500 hover:text-stone-900 text-stone-200 font-display text-2xl py-3 rounded-md transition-all duration-300",children:[o?M.jsx(HDe,{}):M.jsx(zDe,{}),o?"СКОПИРОВАНО!":"СКОПИРОВАТЬ КОД"]})]})})};function Dr(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=Dr(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}const GDe={},O5=t=>{let e;const n=new Set,r=(d,h)=>{const g=typeof d=="function"?d(e):d;if(!Object.is(g,e)){const _=e;e=h??(typeof g!="object"||g===null)?g:Object.assign({},e,g),n.forEach(S=>S(e,_))}},i=()=>e,u={setState:r,getState:i,getInitialState:()=>c,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(GDe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(r,i,u);return u},jDe=t=>t?O5(t):O5,{useDebugValue:KDe}=ge,{useSyncExternalStoreWithSelector:WDe}=hbe,YDe=t=>t;function qne(t,e=YDe,n){const r=WDe(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return KDe(r),r}const L5=(t,e)=>{const n=jDe(t),r=(i,o=e)=>qne(n,i,o);return Object.assign(r,n),r},JDe=(t,e)=>t?L5(t,e):L5;function gr(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,i]of t)if(!Object.is(i,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}var XDe={value:()=>{}};function bT(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new w0(n)}function w0(t){this._=t}function QDe(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}w0.prototype=bT.prototype={constructor:w0,on:function(t,e){var n=this._,r=QDe(t+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(t=r[o]).type)&&(i=ZDe(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(i=(t=r[o]).type)n[i]=V5(n[i],t.name,e);else if(e==null)for(i in n)n[i]=V5(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new w0(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function ZDe(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function V5(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=XDe,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var m2="http://www.w3.org/1999/xhtml";const U5={svg:"http://www.w3.org/2000/svg",xhtml:m2,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function TT(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),U5.hasOwnProperty(e)?{space:U5[e],local:t}:t}function eke(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===m2&&e.documentElement.namespaceURI===m2?e.createElement(t):e.createElementNS(n,t)}}function tke(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Fne(t){var e=TT(t);return(e.local?tke:eke)(e)}function nke(){}function hL(t){return t==null?nke:function(){return this.querySelector(t)}}function rke(t){typeof t!="function"&&(t=hL(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=new Array(s),u,c,d=0;d<s;++d)(u=o[d])&&(c=t.call(u,u.__data__,d,o))&&("__data__"in u&&(c.__data__=u.__data__),a[d]=c);return new Hi(r,this._parents)}function ike(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function oke(){return[]}function Bne(t){return t==null?oke:function(){return this.querySelectorAll(t)}}function ske(t){return function(){return ike(t.apply(this,arguments))}}function ake(t){typeof t=="function"?t=ske(t):t=Bne(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var s=e[o],a=s.length,u,c=0;c<a;++c)(u=s[c])&&(r.push(t.call(u,u.__data__,c,s)),i.push(u));return new Hi(r,i)}function $ne(t){return function(){return this.matches(t)}}function zne(t){return function(e){return e.matches(t)}}var lke=Array.prototype.find;function uke(t){return function(){return lke.call(this.children,t)}}function cke(){return this.firstElementChild}function fke(t){return this.select(t==null?cke:uke(typeof t=="function"?t:zne(t)))}var dke=Array.prototype.filter;function hke(){return Array.from(this.children)}function pke(t){return function(){return dke.call(this.children,t)}}function mke(t){return this.selectAll(t==null?hke:pke(typeof t=="function"?t:zne(t)))}function gke(t){typeof t!="function"&&(t=$ne(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=[],u,c=0;c<s;++c)(u=o[c])&&t.call(u,u.__data__,c,o)&&a.push(u);return new Hi(r,this._parents)}function Hne(t){return new Array(t.length)}function yke(){return new Hi(this._enter||this._groups.map(Hne),this._parents)}function Uw(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Uw.prototype={constructor:Uw,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function vke(t){return function(){return t}}function _ke(t,e,n,r,i,o){for(var s=0,a,u=e.length,c=o.length;s<c;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new Uw(t,o[s]);for(;s<u;++s)(a=e[s])&&(i[s]=a)}function wke(t,e,n,r,i,o,s){var a,u,c=new Map,d=e.length,h=o.length,g=new Array(d),_;for(a=0;a<d;++a)(u=e[a])&&(g[a]=_=s.call(u,u.__data__,a,e)+"",c.has(_)?i[a]=u:c.set(_,u));for(a=0;a<h;++a)_=s.call(t,o[a],a,o)+"",(u=c.get(_))?(r[a]=u,u.__data__=o[a],c.delete(_)):n[a]=new Uw(t,o[a]);for(a=0;a<d;++a)(u=e[a])&&c.get(g[a])===u&&(i[a]=u)}function bke(t){return t.__data__}function Tke(t,e){if(!arguments.length)return Array.from(this,bke);var n=e?wke:_ke,r=this._parents,i=this._groups;typeof t!="function"&&(t=vke(t));for(var o=i.length,s=new Array(o),a=new Array(o),u=new Array(o),c=0;c<o;++c){var d=r[c],h=i[c],g=h.length,_=Eke(t.call(d,d&&d.__data__,c,r)),S=_.length,b=a[c]=new Array(S),T=s[c]=new Array(S),x=u[c]=new Array(g);n(d,h,b,T,x,_,e);for(var C=0,I=0,N,V;C<S;++C)if(N=b[C]){for(C>=I&&(I=C+1);!(V=T[I])&&++I<S;);N._next=V||null}}return s=new Hi(s,r),s._enter=a,s._exit=u,s}function Eke(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ske(){return new Hi(this._exit||this._groups.map(Hne),this._parents)}function xke(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Ake(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),u=0;u<s;++u)for(var c=n[u],d=r[u],h=c.length,g=a[u]=new Array(h),_,S=0;S<h;++S)(_=c[S]||d[S])&&(g[S]=_);for(;u<i;++u)a[u]=n[u];return new Hi(a,this._parents)}function Cke(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function Ike(t){t||(t=Rke);function e(h,g){return h&&g?t(h.__data__,g.__data__):!h-!g}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,u=i[o]=new Array(a),c,d=0;d<a;++d)(c=s[d])&&(u[d]=c);u.sort(e)}return new Hi(i,this._parents).order()}function Rke(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Pke(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Nke(){return Array.from(this)}function Mke(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function Dke(){let t=0;for(const e of this)++t;return t}function kke(){return!this.node()}function Oke(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&t.call(a,a.__data__,o,i);return this}function Lke(t){return function(){this.removeAttribute(t)}}function Vke(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Uke(t,e){return function(){this.setAttribute(t,e)}}function qke(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Fke(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Bke(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function $ke(t,e){var n=TT(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Vke:Lke:typeof e=="function"?n.local?Bke:Fke:n.local?qke:Uke)(n,e))}function Gne(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function zke(t){return function(){this.style.removeProperty(t)}}function Hke(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Gke(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function jke(t,e,n){return arguments.length>1?this.each((e==null?zke:typeof e=="function"?Gke:Hke)(t,e,n??"")):Ih(this.node(),t)}function Ih(t,e){return t.style.getPropertyValue(e)||Gne(t).getComputedStyle(t,null).getPropertyValue(e)}function Kke(t){return function(){delete this[t]}}function Wke(t,e){return function(){this[t]=e}}function Yke(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Jke(t,e){return arguments.length>1?this.each((e==null?Kke:typeof e=="function"?Yke:Wke)(t,e)):this.node()[t]}function jne(t){return t.trim().split(/^|\s+/)}function pL(t){return t.classList||new Kne(t)}function Kne(t){this._node=t,this._names=jne(t.getAttribute("class")||"")}Kne.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Wne(t,e){for(var n=pL(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Yne(t,e){for(var n=pL(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Xke(t){return function(){Wne(this,t)}}function Qke(t){return function(){Yne(this,t)}}function Zke(t,e){return function(){(e.apply(this,arguments)?Wne:Yne)(this,t)}}function eOe(t,e){var n=jne(t+"");if(arguments.length<2){for(var r=pL(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Zke:e?Xke:Qke)(n,e))}function tOe(){this.textContent=""}function nOe(t){return function(){this.textContent=t}}function rOe(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function iOe(t){return arguments.length?this.each(t==null?tOe:(typeof t=="function"?rOe:nOe)(t)):this.node().textContent}function oOe(){this.innerHTML=""}function sOe(t){return function(){this.innerHTML=t}}function aOe(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function lOe(t){return arguments.length?this.each(t==null?oOe:(typeof t=="function"?aOe:sOe)(t)):this.node().innerHTML}function uOe(){this.nextSibling&&this.parentNode.appendChild(this)}function cOe(){return this.each(uOe)}function fOe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function dOe(){return this.each(fOe)}function hOe(t){var e=typeof t=="function"?t:Fne(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function pOe(){return null}function mOe(t,e){var n=typeof t=="function"?t:Fne(t),r=e==null?pOe:typeof e=="function"?e:hL(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function gOe(){var t=this.parentNode;t&&t.removeChild(this)}function yOe(){return this.each(gOe)}function vOe(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function _Oe(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function wOe(t){return this.select(t?_Oe:vOe)}function bOe(t){return arguments.length?this.property("__data__",t):this.node().__data__}function TOe(t){return function(e){t.call(this,e,this.__data__)}}function EOe(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function SOe(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function xOe(t,e,n){return function(){var r=this.__on,i,o=TOe(e);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function AOe(t,e,n){var r=EOe(t+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,c=a.length,d;u<c;++u)for(i=0,d=a[u];i<o;++i)if((s=r[i]).type===d.type&&s.name===d.name)return d.value}return}for(a=e?xOe:SOe,i=0;i<o;++i)this.each(a(r[i],e,n));return this}function Jne(t,e,n){var r=Gne(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function COe(t,e){return function(){return Jne(this,t,e)}}function IOe(t,e){return function(){return Jne(this,t,e.apply(this,arguments))}}function ROe(t,e){return this.each((typeof e=="function"?IOe:COe)(t,e))}function*POe(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var Xne=[null];function Hi(t,e){this._groups=t,this._parents=e}function Wy(){return new Hi([[document.documentElement]],Xne)}function NOe(){return this}Hi.prototype=Wy.prototype={constructor:Hi,select:rke,selectAll:ake,selectChild:fke,selectChildren:mke,filter:gke,data:Tke,enter:yke,exit:Ske,join:xke,merge:Ake,selection:NOe,order:Cke,sort:Ike,call:Pke,nodes:Nke,node:Mke,size:Dke,empty:kke,each:Oke,attr:$ke,style:jke,property:Jke,classed:eOe,text:iOe,html:lOe,raise:cOe,lower:dOe,append:hOe,insert:mOe,remove:yOe,clone:wOe,datum:bOe,on:AOe,dispatch:ROe,[Symbol.iterator]:POe};function mo(t){return typeof t=="string"?new Hi([[document.querySelector(t)]],[document.documentElement]):new Hi([[t]],Xne)}function MOe(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Fo(t,e){if(t=MOe(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const DOe={passive:!1},ny={capture:!0,passive:!1};function r1(t){t.stopImmediatePropagation()}function zd(t){t.preventDefault(),t.stopImmediatePropagation()}function Qne(t){var e=t.document.documentElement,n=mo(t).on("dragstart.drag",zd,ny);"onselectstart"in e?n.on("selectstart.drag",zd,ny):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Zne(t,e){var n=t.document.documentElement,r=mo(t).on("dragstart.drag",null);e&&(r.on("click.drag",zd,ny),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const K_=t=>()=>t;function g2(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:o,x:s,y:a,dx:u,dy:c,dispatch:d}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}g2.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function kOe(t){return!t.ctrlKey&&!t.button}function OOe(){return this.parentNode}function LOe(t,e){return e??{x:t.x,y:t.y}}function VOe(){return navigator.maxTouchPoints||"ontouchstart"in this}function UOe(){var t=kOe,e=OOe,n=LOe,r=VOe,i={},o=bT("start","drag","end"),s=0,a,u,c,d,h=0;function g(N){N.on("mousedown.drag",_).filter(r).on("touchstart.drag",T).on("touchmove.drag",x,DOe).on("touchend.drag touchcancel.drag",C).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function _(N,V){if(!(d||!t.call(this,N,V))){var q=I(this,e.call(this,N,V),N,V,"mouse");q&&(mo(N.view).on("mousemove.drag",S,ny).on("mouseup.drag",b,ny),Qne(N.view),r1(N),c=!1,a=N.clientX,u=N.clientY,q("start",N))}}function S(N){if(zd(N),!c){var V=N.clientX-a,q=N.clientY-u;c=V*V+q*q>h}i.mouse("drag",N)}function b(N){mo(N.view).on("mousemove.drag mouseup.drag",null),Zne(N.view,c),zd(N),i.mouse("end",N)}function T(N,V){if(t.call(this,N,V)){var q=N.changedTouches,P=e.call(this,N,V),O=q.length,R,U;for(R=0;R<O;++R)(U=I(this,P,N,V,q[R].identifier,q[R]))&&(r1(N),U("start",N,q[R]))}}function x(N){var V=N.changedTouches,q=V.length,P,O;for(P=0;P<q;++P)(O=i[V[P].identifier])&&(zd(N),O("drag",N,V[P]))}function C(N){var V=N.changedTouches,q=V.length,P,O;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),P=0;P<q;++P)(O=i[V[P].identifier])&&(r1(N),O("end",N,V[P]))}function I(N,V,q,P,O,R){var U=o.copy(),L=Fo(R||q,V),F,$,H;if((H=n.call(N,new g2("beforestart",{sourceEvent:q,target:g,identifier:O,active:s,x:L[0],y:L[1],dx:0,dy:0,dispatch:U}),P))!=null)return F=H.x-L[0]||0,$=H.y-L[1]||0,function Y(K,Q,re){var X=L,G;switch(K){case"start":i[O]=Y,G=s++;break;case"end":delete i[O],--s;case"drag":L=Fo(re||Q,V),G=s;break}U.call(K,N,new g2(K,{sourceEvent:Q,subject:H,target:g,identifier:O,active:G,x:L[0]+F,y:L[1]+$,dx:L[0]-X[0],dy:L[1]-X[1],dispatch:U}),P)}}return g.filter=function(N){return arguments.length?(t=typeof N=="function"?N:K_(!!N),g):t},g.container=function(N){return arguments.length?(e=typeof N=="function"?N:K_(N),g):e},g.subject=function(N){return arguments.length?(n=typeof N=="function"?N:K_(N),g):n},g.touchable=function(N){return arguments.length?(r=typeof N=="function"?N:K_(!!N),g):r},g.on=function(){var N=o.on.apply(o,arguments);return N===o?g:N},g.clickDistance=function(N){return arguments.length?(h=(N=+N)*N,g):Math.sqrt(h)},g}var Rh=0,Xm=0,Om=0,ere=1e3,qw,Qm,Fw=0,Qc=0,ET=0,ry=typeof performance=="object"&&performance.now?performance:Date,tre=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function mL(){return Qc||(tre(qOe),Qc=ry.now()+ET)}function qOe(){Qc=0}function Bw(){this._call=this._time=this._next=null}Bw.prototype=nre.prototype={constructor:Bw,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?mL():+n)+(e==null?0:+e),!this._next&&Qm!==this&&(Qm?Qm._next=this:qw=this,Qm=this),this._call=t,this._time=n,y2()},stop:function(){this._call&&(this._call=null,this._time=1/0,y2())}};function nre(t,e,n){var r=new Bw;return r.restart(t,e,n),r}function FOe(){mL(),++Rh;for(var t=qw,e;t;)(e=Qc-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Rh}function q5(){Qc=(Fw=ry.now())+ET,Rh=Xm=0;try{FOe()}finally{Rh=0,$Oe(),Qc=0}}function BOe(){var t=ry.now(),e=t-Fw;e>ere&&(ET-=e,Fw=t)}function $Oe(){for(var t,e=qw,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:qw=n);Qm=t,y2(r)}function y2(t){if(!Rh){Xm&&(Xm=clearTimeout(Xm));var e=t-Qc;e>24?(t<1/0&&(Xm=setTimeout(q5,t-ry.now()-ET)),Om&&(Om=clearInterval(Om))):(Om||(Fw=ry.now(),Om=setInterval(BOe,ere)),Rh=1,tre(q5))}}function F5(t,e,n){var r=new Bw;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var zOe=bT("start","end","cancel","interrupt"),HOe=[],rre=0,B5=1,v2=2,b0=3,$5=4,_2=5,T0=6;function ST(t,e,n,r,i,o){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;GOe(t,n,{name:e,index:r,group:i,on:zOe,tween:HOe,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:rre})}function gL(t,e){var n=rs(t,e);if(n.state>rre)throw new Error("too late; already scheduled");return n}function Ws(t,e){var n=rs(t,e);if(n.state>b0)throw new Error("too late; already running");return n}function rs(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function GOe(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=nre(o,0,n.time);function o(c){n.state=B5,n.timer.restart(s,n.delay,n.time),n.delay<=c&&s(c-n.delay)}function s(c){var d,h,g,_;if(n.state!==B5)return u();for(d in r)if(_=r[d],_.name===n.name){if(_.state===b0)return F5(s);_.state===$5?(_.state=T0,_.timer.stop(),_.on.call("interrupt",t,t.__data__,_.index,_.group),delete r[d]):+d<e&&(_.state=T0,_.timer.stop(),_.on.call("cancel",t,t.__data__,_.index,_.group),delete r[d])}if(F5(function(){n.state===b0&&(n.state=$5,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=v2,n.on.call("start",t,t.__data__,n.index,n.group),n.state===v2){for(n.state=b0,i=new Array(g=n.tween.length),d=0,h=-1;d<g;++d)(_=n.tween[d].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=_);i.length=h+1}}function a(c){for(var d=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(u),n.state=_2,1),h=-1,g=i.length;++h<g;)i[h].call(t,d);n.state===_2&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=T0,n.timer.stop(),delete r[e];for(var c in r)return;delete t.__transition}}function E0(t,e){var n=t.__transition,r,i,o=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((r=n[s]).name!==e){o=!1;continue}i=r.state>v2&&r.state<_2,r.state=T0,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[s]}o&&delete t.__transition}}function jOe(t){return this.each(function(){E0(this,t)})}function KOe(t,e){var n,r;return function(){var i=Ws(this,t),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function WOe(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Ws(this,t),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:e,value:n},u=0,c=i.length;u<c;++u)if(i[u].name===e){i[u]=a;break}u===c&&i.push(a)}o.tween=i}}function YOe(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=rs(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((e==null?KOe:WOe)(n,t,e))}function yL(t,e,n){var r=t._id;return t.each(function(){var i=Ws(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return rs(i,r).value[e]}}function ire(t,e){var n;return(typeof e=="number"?Bo:e instanceof Jc?Tw:(n=Jc(e))?(e=n,Tw):GZ)(t,e)}function JOe(t){return function(){this.removeAttribute(t)}}function XOe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function QOe(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttribute(t);return s===i?null:s===r?o:o=e(r=s,n)}}function ZOe(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?o:o=e(r=s,n)}}function eLe(t,e,n){var r,i,o;return function(){var s,a=n(this),u;return a==null?void this.removeAttribute(t):(s=this.getAttribute(t),u=a+"",s===u?null:s===r&&u===i?o:(i=u,o=e(r=s,a)))}}function tLe(t,e,n){var r,i,o;return function(){var s,a=n(this),u;return a==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),u=a+"",s===u?null:s===r&&u===i?o:(i=u,o=e(r=s,a)))}}function nLe(t,e){var n=TT(t),r=n==="transform"?Rxe:ire;return this.attrTween(t,typeof e=="function"?(n.local?tLe:eLe)(n,r,yL(this,"attr."+t,e)):e==null?(n.local?XOe:JOe)(n):(n.local?ZOe:QOe)(n,r,e))}function rLe(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function iLe(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function oLe(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&iLe(t,o)),n}return i._value=e,i}function sLe(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&rLe(t,o)),n}return i._value=e,i}function aLe(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=TT(t);return this.tween(n,(r.local?oLe:sLe)(r,e))}function lLe(t,e){return function(){gL(this,t).delay=+e.apply(this,arguments)}}function uLe(t,e){return e=+e,function(){gL(this,t).delay=e}}function cLe(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?lLe:uLe)(e,t)):rs(this.node(),e).delay}function fLe(t,e){return function(){Ws(this,t).duration=+e.apply(this,arguments)}}function dLe(t,e){return e=+e,function(){Ws(this,t).duration=e}}function hLe(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?fLe:dLe)(e,t)):rs(this.node(),e).duration}function pLe(t,e){if(typeof e!="function")throw new Error;return function(){Ws(this,t).ease=e}}function mLe(t){var e=this._id;return arguments.length?this.each(pLe(e,t)):rs(this.node(),e).ease}function gLe(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Ws(this,t).ease=n}}function yLe(t){if(typeof t!="function")throw new Error;return this.each(gLe(this._id,t))}function vLe(t){typeof t!="function"&&(t=$ne(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=[],u,c=0;c<s;++c)(u=o[c])&&t.call(u,u.__data__,c,o)&&a.push(u);return new Ha(r,this._parents,this._name,this._id)}function _Le(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var u=e[a],c=n[a],d=u.length,h=s[a]=new Array(d),g,_=0;_<d;++_)(g=u[_]||c[_])&&(h[_]=g);for(;a<r;++a)s[a]=e[a];return new Ha(s,this._parents,this._name,this._id)}function wLe(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function bLe(t,e,n){var r,i,o=wLe(e)?gL:Ws;return function(){var s=o(this,t),a=s.on;a!==r&&(i=(r=a).copy()).on(e,n),s.on=i}}function TLe(t,e){var n=this._id;return arguments.length<2?rs(this.node(),n).on.on(t):this.each(bLe(n,t,e))}function ELe(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function SLe(){return this.on("end.remove",ELe(this._id))}function xLe(t){var e=this._name,n=this._id;typeof t!="function"&&(t=hL(t));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],u=a.length,c=o[s]=new Array(u),d,h,g=0;g<u;++g)(d=a[g])&&(h=t.call(d,d.__data__,g,a))&&("__data__"in d&&(h.__data__=d.__data__),c[g]=h,ST(c[g],e,n,g,c,rs(d,n)));return new Ha(o,this._parents,e,n)}function ALe(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Bne(t));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var u=r[a],c=u.length,d,h=0;h<c;++h)if(d=u[h]){for(var g=t.call(d,d.__data__,h,u),_,S=rs(d,n),b=0,T=g.length;b<T;++b)(_=g[b])&&ST(_,e,n,b,g,S);o.push(g),s.push(d)}return new Ha(o,s,e,n)}var CLe=Wy.prototype.constructor;function ILe(){return new CLe(this._groups,this._parents)}function RLe(t,e){var n,r,i;return function(){var o=Ih(this,t),s=(this.style.removeProperty(t),Ih(this,t));return o===s?null:o===n&&s===r?i:i=e(n=o,r=s)}}function ore(t){return function(){this.style.removeProperty(t)}}function PLe(t,e,n){var r,i=n+"",o;return function(){var s=Ih(this,t);return s===i?null:s===r?o:o=e(r=s,n)}}function NLe(t,e,n){var r,i,o;return function(){var s=Ih(this,t),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(t),Ih(this,t))),s===u?null:s===r&&u===i?o:(i=u,o=e(r=s,a))}}function MLe(t,e){var n,r,i,o="style."+e,s="end."+o,a;return function(){var u=Ws(this,t),c=u.on,d=u.value[o]==null?a||(a=ore(e)):void 0;(c!==n||i!==d)&&(r=(n=c).copy()).on(s,i=d),u.on=r}}function DLe(t,e,n){var r=(t+="")=="transform"?Ixe:ire;return e==null?this.styleTween(t,RLe(t,r)).on("end.style."+t,ore(t)):typeof e=="function"?this.styleTween(t,NLe(t,r,yL(this,"style."+t,e))).each(MLe(this._id,t)):this.styleTween(t,PLe(t,r,e),n).on("end.style."+t,null)}function kLe(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function OLe(t,e,n){var r,i;function o(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&kLe(t,s,n)),r}return o._value=e,o}function LLe(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,OLe(t,e,n??""))}function VLe(t){return function(){this.textContent=t}}function ULe(t){return function(){var e=t(this);this.textContent=e??""}}function qLe(t){return this.tween("text",typeof t=="function"?ULe(yL(this,"text",t)):VLe(t==null?"":t+""))}function FLe(t){return function(e){this.textContent=t.call(this,e)}}function BLe(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&FLe(i)),e}return r._value=t,r}function $Le(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,BLe(t))}function zLe(){for(var t=this._name,e=this._id,n=sre(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,u,c=0;c<a;++c)if(u=s[c]){var d=rs(u,e);ST(u,t,n,c,s,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Ha(r,this._parents,t,n)}function HLe(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},u={value:function(){--i===0&&o()}};n.each(function(){var c=Ws(this,r),d=c.on;d!==t&&(e=(t=d).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(u)),c.on=e}),i===0&&o()})}var GLe=0;function Ha(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function sre(){return++GLe}var _a=Wy.prototype;Ha.prototype={constructor:Ha,select:xLe,selectAll:ALe,selectChild:_a.selectChild,selectChildren:_a.selectChildren,filter:vLe,merge:_Le,selection:ILe,transition:zLe,call:_a.call,nodes:_a.nodes,node:_a.node,size:_a.size,empty:_a.empty,each:_a.each,on:TLe,attr:nLe,attrTween:aLe,style:DLe,styleTween:LLe,text:qLe,textTween:$Le,remove:SLe,tween:YOe,delay:cLe,duration:hLe,ease:mLe,easeVarying:yLe,end:HLe,[Symbol.iterator]:_a[Symbol.iterator]};function jLe(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var KLe={time:null,delay:0,duration:250,ease:jLe};function WLe(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function YLe(t){var e,n;t instanceof Ha?(e=t._id,t=t._name):(e=sre(),(n=KLe).time=mL(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,u,c=0;c<a;++c)(u=s[c])&&ST(u,t,e,c,s,n||WLe(u,e));return new Ha(r,this._parents,t,e)}Wy.prototype.interrupt=jOe;Wy.prototype.transition=YLe;const W_=t=>()=>t;function JLe(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Aa(t,e,n){this.k=t,this.x=e,this.y=n}Aa.prototype={constructor:Aa,scale:function(t){return t===1?this:new Aa(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Aa(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ma=new Aa(1,0,0);Aa.prototype;function i1(t){t.stopImmediatePropagation()}function Lm(t){t.preventDefault(),t.stopImmediatePropagation()}function XLe(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function QLe(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function z5(){return this.__zoom||Ma}function ZLe(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function eVe(){return navigator.maxTouchPoints||"ontouchstart"in this}function tVe(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function are(){var t=XLe,e=QLe,n=tVe,r=ZLe,i=eVe,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,u=Dxe,c=bT("start","zoom","end"),d,h,g,_=500,S=150,b=0,T=10;function x(H){H.property("__zoom",z5).on("wheel.zoom",O,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",U).filter(i).on("touchstart.zoom",L).on("touchmove.zoom",F).on("touchend.zoom touchcancel.zoom",$).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(H,Y,K,Q){var re=H.selection?H.selection():H;re.property("__zoom",z5),H!==re?V(H,Y,K,Q):re.interrupt().each(function(){q(this,arguments).event(Q).start().zoom(null,typeof Y=="function"?Y.apply(this,arguments):Y).end()})},x.scaleBy=function(H,Y,K,Q){x.scaleTo(H,function(){var re=this.__zoom.k,X=typeof Y=="function"?Y.apply(this,arguments):Y;return re*X},K,Q)},x.scaleTo=function(H,Y,K,Q){x.transform(H,function(){var re=e.apply(this,arguments),X=this.__zoom,G=K==null?N(re):typeof K=="function"?K.apply(this,arguments):K,te=X.invert(G),ee=typeof Y=="function"?Y.apply(this,arguments):Y;return n(I(C(X,ee),G,te),re,s)},K,Q)},x.translateBy=function(H,Y,K,Q){x.transform(H,function(){return n(this.__zoom.translate(typeof Y=="function"?Y.apply(this,arguments):Y,typeof K=="function"?K.apply(this,arguments):K),e.apply(this,arguments),s)},null,Q)},x.translateTo=function(H,Y,K,Q,re){x.transform(H,function(){var X=e.apply(this,arguments),G=this.__zoom,te=Q==null?N(X):typeof Q=="function"?Q.apply(this,arguments):Q;return n(Ma.translate(te[0],te[1]).scale(G.k).translate(typeof Y=="function"?-Y.apply(this,arguments):-Y,typeof K=="function"?-K.apply(this,arguments):-K),X,s)},Q,re)};function C(H,Y){return Y=Math.max(o[0],Math.min(o[1],Y)),Y===H.k?H:new Aa(Y,H.x,H.y)}function I(H,Y,K){var Q=Y[0]-K[0]*H.k,re=Y[1]-K[1]*H.k;return Q===H.x&&re===H.y?H:new Aa(H.k,Q,re)}function N(H){return[(+H[0][0]+ +H[1][0])/2,(+H[0][1]+ +H[1][1])/2]}function V(H,Y,K,Q){H.on("start.zoom",function(){q(this,arguments).event(Q).start()}).on("interrupt.zoom end.zoom",function(){q(this,arguments).event(Q).end()}).tween("zoom",function(){var re=this,X=arguments,G=q(re,X).event(Q),te=e.apply(re,X),ee=K==null?N(te):typeof K=="function"?K.apply(re,X):K,ae=Math.max(te[1][0]-te[0][0],te[1][1]-te[0][1]),J=re.__zoom,ne=typeof Y=="function"?Y.apply(re,X):Y,oe=u(J.invert(ee).concat(ae/J.k),ne.invert(ee).concat(ae/ne.k));return function(we){if(we===1)we=ne;else{var Ie=oe(we),ye=ae/Ie[2];we=new Aa(ye,ee[0]-Ie[0]*ye,ee[1]-Ie[1]*ye)}G.zoom(null,we)}})}function q(H,Y,K){return!K&&H.__zooming||new P(H,Y)}function P(H,Y){this.that=H,this.args=Y,this.active=0,this.sourceEvent=null,this.extent=e.apply(H,Y),this.taps=0}P.prototype={event:function(H){return H&&(this.sourceEvent=H),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(H,Y){return this.mouse&&H!=="mouse"&&(this.mouse[1]=Y.invert(this.mouse[0])),this.touch0&&H!=="touch"&&(this.touch0[1]=Y.invert(this.touch0[0])),this.touch1&&H!=="touch"&&(this.touch1[1]=Y.invert(this.touch1[0])),this.that.__zoom=Y,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(H){var Y=mo(this.that).datum();c.call(H,this.that,new JLe(H,{sourceEvent:this.sourceEvent,target:x,transform:this.that.__zoom,dispatch:c}),Y)}};function O(H,...Y){if(!t.apply(this,arguments))return;var K=q(this,Y).event(H),Q=this.__zoom,re=Math.max(o[0],Math.min(o[1],Q.k*Math.pow(2,r.apply(this,arguments)))),X=Fo(H);if(K.wheel)(K.mouse[0][0]!==X[0]||K.mouse[0][1]!==X[1])&&(K.mouse[1]=Q.invert(K.mouse[0]=X)),clearTimeout(K.wheel);else{if(Q.k===re)return;K.mouse=[X,Q.invert(X)],E0(this),K.start()}Lm(H),K.wheel=setTimeout(G,S),K.zoom("mouse",n(I(C(Q,re),K.mouse[0],K.mouse[1]),K.extent,s));function G(){K.wheel=null,K.end()}}function R(H,...Y){if(g||!t.apply(this,arguments))return;var K=H.currentTarget,Q=q(this,Y,!0).event(H),re=mo(H.view).on("mousemove.zoom",ee,!0).on("mouseup.zoom",ae,!0),X=Fo(H,K),G=H.clientX,te=H.clientY;Qne(H.view),i1(H),Q.mouse=[X,this.__zoom.invert(X)],E0(this),Q.start();function ee(J){if(Lm(J),!Q.moved){var ne=J.clientX-G,oe=J.clientY-te;Q.moved=ne*ne+oe*oe>b}Q.event(J).zoom("mouse",n(I(Q.that.__zoom,Q.mouse[0]=Fo(J,K),Q.mouse[1]),Q.extent,s))}function ae(J){re.on("mousemove.zoom mouseup.zoom",null),Zne(J.view,Q.moved),Lm(J),Q.event(J).end()}}function U(H,...Y){if(t.apply(this,arguments)){var K=this.__zoom,Q=Fo(H.changedTouches?H.changedTouches[0]:H,this),re=K.invert(Q),X=K.k*(H.shiftKey?.5:2),G=n(I(C(K,X),Q,re),e.apply(this,Y),s);Lm(H),a>0?mo(this).transition().duration(a).call(V,G,Q,H):mo(this).call(x.transform,G,Q,H)}}function L(H,...Y){if(t.apply(this,arguments)){var K=H.touches,Q=K.length,re=q(this,Y,H.changedTouches.length===Q).event(H),X,G,te,ee;for(i1(H),G=0;G<Q;++G)te=K[G],ee=Fo(te,this),ee=[ee,this.__zoom.invert(ee),te.identifier],re.touch0?!re.touch1&&re.touch0[2]!==ee[2]&&(re.touch1=ee,re.taps=0):(re.touch0=ee,X=!0,re.taps=1+!!d);d&&(d=clearTimeout(d)),X&&(re.taps<2&&(h=ee[0],d=setTimeout(function(){d=null},_)),E0(this),re.start())}}function F(H,...Y){if(this.__zooming){var K=q(this,Y).event(H),Q=H.changedTouches,re=Q.length,X,G,te,ee;for(Lm(H),X=0;X<re;++X)G=Q[X],te=Fo(G,this),K.touch0&&K.touch0[2]===G.identifier?K.touch0[0]=te:K.touch1&&K.touch1[2]===G.identifier&&(K.touch1[0]=te);if(G=K.that.__zoom,K.touch1){var ae=K.touch0[0],J=K.touch0[1],ne=K.touch1[0],oe=K.touch1[1],we=(we=ne[0]-ae[0])*we+(we=ne[1]-ae[1])*we,Ie=(Ie=oe[0]-J[0])*Ie+(Ie=oe[1]-J[1])*Ie;G=C(G,Math.sqrt(we/Ie)),te=[(ae[0]+ne[0])/2,(ae[1]+ne[1])/2],ee=[(J[0]+oe[0])/2,(J[1]+oe[1])/2]}else if(K.touch0)te=K.touch0[0],ee=K.touch0[1];else return;K.zoom("touch",n(I(G,te,ee),K.extent,s))}}function $(H,...Y){if(this.__zooming){var K=q(this,Y).event(H),Q=H.changedTouches,re=Q.length,X,G;for(i1(H),g&&clearTimeout(g),g=setTimeout(function(){g=null},_),X=0;X<re;++X)G=Q[X],K.touch0&&K.touch0[2]===G.identifier?delete K.touch0:K.touch1&&K.touch1[2]===G.identifier&&delete K.touch1;if(K.touch1&&!K.touch0&&(K.touch0=K.touch1,delete K.touch1),K.touch0)K.touch0[1]=this.__zoom.invert(K.touch0[0]);else if(K.end(),K.taps===2&&(G=Fo(G,this),Math.hypot(h[0]-G[0],h[1]-G[1])<T)){var te=mo(this).on("dblclick.zoom");te&&te.apply(this,arguments)}}}return x.wheelDelta=function(H){return arguments.length?(r=typeof H=="function"?H:W_(+H),x):r},x.filter=function(H){return arguments.length?(t=typeof H=="function"?H:W_(!!H),x):t},x.touchable=function(H){return arguments.length?(i=typeof H=="function"?H:W_(!!H),x):i},x.extent=function(H){return arguments.length?(e=typeof H=="function"?H:W_([[+H[0][0],+H[0][1]],[+H[1][0],+H[1][1]]]),x):e},x.scaleExtent=function(H){return arguments.length?(o[0]=+H[0],o[1]=+H[1],x):[o[0],o[1]]},x.translateExtent=function(H){return arguments.length?(s[0][0]=+H[0][0],s[1][0]=+H[1][0],s[0][1]=+H[0][1],s[1][1]=+H[1][1],x):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},x.constrain=function(H){return arguments.length?(n=H,x):n},x.duration=function(H){return arguments.length?(a=+H,x):a},x.interpolate=function(H){return arguments.length?(u=H,x):u},x.on=function(){var H=c.on.apply(c,arguments);return H===c?x:H},x.clickDistance=function(H){return arguments.length?(b=(H=+H)*H,x):Math.sqrt(b)},x.tapDistance=function(H){return arguments.length?(T=+H,x):T},x}const xT=D.createContext(null),nVe=xT.Provider,Ga={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},lre=Ga.error001();function Mt(t,e){const n=D.useContext(xT);if(n===null)throw new Error(lre);return qne(n,t,e)}const nr=()=>{const t=D.useContext(xT);if(t===null)throw new Error(lre);return D.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},rVe=t=>t.userSelectionActive?"none":"all";function vL({position:t,children:e,className:n,style:r,...i}){const o=Mt(rVe),s=`${t}`.split("-");return ge.createElement("div",{className:Dr(["react-flow__panel",n,...s]),style:{...r,pointerEvents:o},...i},e)}function iVe({proOptions:t,position:e="bottom-right"}){return t!=null&&t.hideAttribution?null:ge.createElement(vL,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},ge.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const oVe=({x:t,y:e,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:o={},labelBgPadding:s=[2,4],labelBgBorderRadius:a=2,children:u,className:c,...d})=>{const h=D.useRef(null),[g,_]=D.useState({x:0,y:0,width:0,height:0}),S=Dr(["react-flow__edge-textwrapper",c]);return D.useEffect(()=>{if(h.current){const b=h.current.getBBox();_({x:b.x,y:b.y,width:b.width,height:b.height})}},[n]),typeof n>"u"||!n?null:ge.createElement("g",{transform:`translate(${t-g.width/2} ${e-g.height/2})`,className:S,visibility:g.width?"visible":"hidden",...d},i&&ge.createElement("rect",{width:g.width+2*s[0],x:-s[0],y:-s[1],height:g.height+2*s[1],className:"react-flow__edge-textbg",style:o,rx:a,ry:a}),ge.createElement("text",{className:"react-flow__edge-text",y:g.height/2,dy:"0.3em",ref:h,style:r},n),u)};var sVe=D.memo(oVe);const _L=t=>({width:t.offsetWidth,height:t.offsetHeight}),Ph=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),wL=(t={x:0,y:0},e)=>({x:Ph(t.x,e[0][0],e[1][0]),y:Ph(t.y,e[0][1],e[1][1])}),H5=(t,e,n)=>t<e?Ph(Math.abs(t-e),1,50)/50:t>n?-Ph(Math.abs(t-n),1,50)/50:0,ure=(t,e)=>{const n=H5(t.x,35,e.width-35)*20,r=H5(t.y,35,e.height-35)*20;return[n,r]},cre=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},fre=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),iy=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),dre=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),G5=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),aVe=(t,e)=>dre(fre(iy(t),iy(e))),w2=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},lVe=t=>vo(t.width)&&vo(t.height)&&vo(t.x)&&vo(t.y),vo=t=>!isNaN(t)&&isFinite(t),En=Symbol.for("internals"),hre=["Enter"," ","Escape"],uVe=(t,e)=>{},cVe=t=>"nativeEvent"in t;function b2(t){var i,o;const e=cVe(t)?t.nativeEvent:t,n=((o=(i=e.composedPath)==null?void 0:i.call(e))==null?void 0:o[0])||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const pre=t=>"clientX"in t,eu=(t,e)=>{var o,s;const n=pre(t),r=n?t.clientX:(o=t.touches)==null?void 0:o[0].clientX,i=n?t.clientY:(s=t.touches)==null?void 0:s[0].clientY;return{x:r-((e==null?void 0:e.left)??0),y:i-((e==null?void 0:e.top)??0)}},$w=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0},Yy=({id:t,path:e,labelX:n,labelY:r,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:u,labelBgBorderRadius:c,style:d,markerEnd:h,markerStart:g,interactionWidth:_=20})=>ge.createElement(ge.Fragment,null,ge.createElement("path",{id:t,style:d,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:h,markerStart:g}),_&&ge.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:_,className:"react-flow__edge-interaction"}),i&&vo(n)&&vo(r)?ge.createElement(sVe,{x:n,y:r,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:u,labelBgBorderRadius:c}):null);Yy.displayName="BaseEdge";function Vm(t,e,n){return n===void 0?n:r=>{const i=e().edges.find(o=>o.id===t);i&&n(r,{...i})}}function mre({sourceX:t,sourceY:e,targetX:n,targetY:r}){const i=Math.abs(n-t)/2,o=n<t?n+i:n-i,s=Math.abs(r-e)/2,a=r<e?r+s:r-s;return[o,a,i,s]}function gre({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:i,sourceControlY:o,targetControlX:s,targetControlY:a}){const u=t*.125+i*.375+s*.375+n*.125,c=e*.125+o*.375+a*.375+r*.125,d=Math.abs(u-t),h=Math.abs(c-e);return[u,c,d,h]}var Zc;(function(t){t.Strict="strict",t.Loose="loose"})(Zc||(Zc={}));var Ac;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Ac||(Ac={}));var oy;(function(t){t.Partial="partial",t.Full="full"})(oy||(oy={}));var zl;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(zl||(zl={}));var sy;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(sy||(sy={}));var Qe;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Qe||(Qe={}));function j5({pos:t,x1:e,y1:n,x2:r,y2:i}){return t===Qe.Left||t===Qe.Right?[.5*(e+r),n]:[e,.5*(n+i)]}function yre({sourceX:t,sourceY:e,sourcePosition:n=Qe.Bottom,targetX:r,targetY:i,targetPosition:o=Qe.Top}){const[s,a]=j5({pos:n,x1:t,y1:e,x2:r,y2:i}),[u,c]=j5({pos:o,x1:r,y1:i,x2:t,y2:e}),[d,h,g,_]=gre({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:s,sourceControlY:a,targetControlX:u,targetControlY:c});return[`M${t},${e} C${s},${a} ${u},${c} ${r},${i}`,d,h,g,_]}const bL=D.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:i=Qe.Bottom,targetPosition:o=Qe.Top,label:s,labelStyle:a,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:h,style:g,markerEnd:_,markerStart:S,interactionWidth:b})=>{const[T,x,C]=yre({sourceX:t,sourceY:e,sourcePosition:i,targetX:n,targetY:r,targetPosition:o});return ge.createElement(Yy,{path:T,labelX:x,labelY:C,label:s,labelStyle:a,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:h,style:g,markerEnd:_,markerStart:S,interactionWidth:b})});bL.displayName="SimpleBezierEdge";const K5={[Qe.Left]:{x:-1,y:0},[Qe.Right]:{x:1,y:0},[Qe.Top]:{x:0,y:-1},[Qe.Bottom]:{x:0,y:1}},fVe=({source:t,sourcePosition:e=Qe.Bottom,target:n})=>e===Qe.Left||e===Qe.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},W5=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function dVe({source:t,sourcePosition:e=Qe.Bottom,target:n,targetPosition:r=Qe.Top,center:i,offset:o}){const s=K5[e],a=K5[r],u={x:t.x+s.x*o,y:t.y+s.y*o},c={x:n.x+a.x*o,y:n.y+a.y*o},d=fVe({source:u,sourcePosition:e,target:c}),h=d.x!==0?"x":"y",g=d[h];let _=[],S,b;const T={x:0,y:0},x={x:0,y:0},[C,I,N,V]=mre({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(s[h]*a[h]===-1){S=i.x??C,b=i.y??I;const P=[{x:S,y:u.y},{x:S,y:c.y}],O=[{x:u.x,y:b},{x:c.x,y:b}];s[h]===g?_=h==="x"?P:O:_=h==="x"?O:P}else{const P=[{x:u.x,y:c.y}],O=[{x:c.x,y:u.y}];if(h==="x"?_=s.x===g?O:P:_=s.y===g?P:O,e===r){const $=Math.abs(t[h]-n[h]);if($<=o){const H=Math.min(o-1,o-$);s[h]===g?T[h]=(u[h]>t[h]?-1:1)*H:x[h]=(c[h]>n[h]?-1:1)*H}}if(e!==r){const $=h==="x"?"y":"x",H=s[h]===a[$],Y=u[$]>c[$],K=u[$]<c[$];(s[h]===1&&(!H&&Y||H&&K)||s[h]!==1&&(!H&&K||H&&Y))&&(_=h==="x"?P:O)}const R={x:u.x+T.x,y:u.y+T.y},U={x:c.x+x.x,y:c.y+x.y},L=Math.max(Math.abs(R.x-_[0].x),Math.abs(U.x-_[0].x)),F=Math.max(Math.abs(R.y-_[0].y),Math.abs(U.y-_[0].y));L>=F?(S=(R.x+U.x)/2,b=_[0].y):(S=_[0].x,b=(R.y+U.y)/2)}return[[t,{x:u.x+T.x,y:u.y+T.y},..._,{x:c.x+x.x,y:c.y+x.y},n],S,b,N,V]}function hVe(t,e,n,r){const i=Math.min(W5(t,e)/2,W5(e,n)/2,r),{x:o,y:s}=e;if(t.x===o&&o===n.x||t.y===s&&s===n.y)return`L${o} ${s}`;if(t.y===s){const c=t.x<n.x?-1:1,d=t.y<n.y?1:-1;return`L ${o+i*c},${s}Q ${o},${s} ${o},${s+i*d}`}const a=t.x<n.x?1:-1,u=t.y<n.y?-1:1;return`L ${o},${s+i*u}Q ${o},${s} ${o+i*a},${s}`}function zw({sourceX:t,sourceY:e,sourcePosition:n=Qe.Bottom,targetX:r,targetY:i,targetPosition:o=Qe.Top,borderRadius:s=5,centerX:a,centerY:u,offset:c=20}){const[d,h,g,_,S]=dVe({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:i},targetPosition:o,center:{x:a,y:u},offset:c});return[d.reduce((T,x,C)=>{let I="";return C>0&&C<d.length-1?I=hVe(d[C-1],x,d[C+1],s):I=`${C===0?"M":"L"}${x.x} ${x.y}`,T+=I,T},""),h,g,_,S]}const AT=D.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:u,labelBgBorderRadius:c,style:d,sourcePosition:h=Qe.Bottom,targetPosition:g=Qe.Top,markerEnd:_,markerStart:S,pathOptions:b,interactionWidth:T})=>{const[x,C,I]=zw({sourceX:t,sourceY:e,sourcePosition:h,targetX:n,targetY:r,targetPosition:g,borderRadius:b==null?void 0:b.borderRadius,offset:b==null?void 0:b.offset});return ge.createElement(Yy,{path:x,labelX:C,labelY:I,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:u,labelBgBorderRadius:c,style:d,markerEnd:_,markerStart:S,interactionWidth:T})});AT.displayName="SmoothStepEdge";const TL=D.memo(t=>{var e;return ge.createElement(AT,{...t,pathOptions:D.useMemo(()=>{var n;return{borderRadius:0,offset:(n=t.pathOptions)==null?void 0:n.offset}},[(e=t.pathOptions)==null?void 0:e.offset])})});TL.displayName="StepEdge";function pVe({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[i,o,s,a]=mre({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,i,o,s,a]}const EL=D.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:u,labelBgBorderRadius:c,style:d,markerEnd:h,markerStart:g,interactionWidth:_})=>{const[S,b,T]=pVe({sourceX:t,sourceY:e,targetX:n,targetY:r});return ge.createElement(Yy,{path:S,labelX:b,labelY:T,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:u,labelBgBorderRadius:c,style:d,markerEnd:h,markerStart:g,interactionWidth:_})});EL.displayName="StraightEdge";function Y_(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function Y5({pos:t,x1:e,y1:n,x2:r,y2:i,c:o}){switch(t){case Qe.Left:return[e-Y_(e-r,o),n];case Qe.Right:return[e+Y_(r-e,o),n];case Qe.Top:return[e,n-Y_(n-i,o)];case Qe.Bottom:return[e,n+Y_(i-n,o)]}}function vre({sourceX:t,sourceY:e,sourcePosition:n=Qe.Bottom,targetX:r,targetY:i,targetPosition:o=Qe.Top,curvature:s=.25}){const[a,u]=Y5({pos:n,x1:t,y1:e,x2:r,y2:i,c:s}),[c,d]=Y5({pos:o,x1:r,y1:i,x2:t,y2:e,c:s}),[h,g,_,S]=gre({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:a,sourceControlY:u,targetControlX:c,targetControlY:d});return[`M${t},${e} C${a},${u} ${c},${d} ${r},${i}`,h,g,_,S]}const Hw=D.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:i=Qe.Bottom,targetPosition:o=Qe.Top,label:s,labelStyle:a,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:h,style:g,markerEnd:_,markerStart:S,pathOptions:b,interactionWidth:T})=>{const[x,C,I]=vre({sourceX:t,sourceY:e,sourcePosition:i,targetX:n,targetY:r,targetPosition:o,curvature:b==null?void 0:b.curvature});return ge.createElement(Yy,{path:x,labelX:C,labelY:I,label:s,labelStyle:a,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:h,style:g,markerEnd:_,markerStart:S,interactionWidth:T})});Hw.displayName="BezierEdge";const SL=D.createContext(null),mVe=SL.Provider;SL.Consumer;const gVe=()=>D.useContext(SL),yVe=t=>"id"in t&&"source"in t&&"target"in t,vVe=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`reactflow__edge-${t}${e||""}-${n}${r||""}`,T2=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`,_Ve=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),wVe=(t,e)=>{if(!t.source||!t.target)return e;let n;return yVe(t)?n={...t}:n={...t,id:vVe(t)},_Ve(n,e)?e:e.concat(n)},E2=({x:t,y:e},[n,r,i],o,[s,a])=>{const u={x:(t-n)/i,y:(e-r)/i};return o?{x:s*Math.round(u.x/s),y:a*Math.round(u.y/a)}:u},_re=({x:t,y:e},[n,r,i])=>({x:t*i+n,y:e*i+r}),Oc=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],r=(t.height??0)*e[1],i={x:t.position.x-n,y:t.position.y-r};return{...i,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-r}:i}},CT=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,i)=>{const{x:o,y:s}=Oc(i,e).positionAbsolute;return fre(r,iy({x:o,y:s,width:i.width||0,height:i.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return dre(n)},wre=(t,e,[n,r,i]=[0,0,1],o=!1,s=!1,a=[0,0])=>{const u={x:(e.x-n)/i,y:(e.y-r)/i,width:e.width/i,height:e.height/i},c=[];return t.forEach(d=>{const{width:h,height:g,selectable:_=!0,hidden:S=!1}=d;if(s&&!_||S)return!1;const{positionAbsolute:b}=Oc(d,a),T={x:b.x,y:b.y,width:h||0,height:g||0},x=w2(u,T),C=typeof h>"u"||typeof g>"u"||h===null||g===null,I=o&&x>0,N=(h||0)*(g||0);(C||I||x>=N||d.dragging)&&c.push(d)}),c},bre=(t,e)=>{const n=t.map(r=>r.id);return e.filter(r=>n.includes(r.source)||n.includes(r.target))},Tre=(t,e,n,r,i,o=.1)=>{const s=e/(t.width*(1+o)),a=n/(t.height*(1+o)),u=Math.min(s,a),c=Ph(u,r,i),d=t.x+t.width/2,h=t.y+t.height/2,g=e/2-d*c,_=n/2-h*c;return{x:g,y:_,zoom:c}},hc=(t,e=0)=>t.transition().duration(e);function J5(t,e,n,r){return(e[n]||[]).reduce((i,o)=>{var s,a;return`${t.id}-${o.id}-${n}`!==r&&i.push({id:o.id||null,type:n,nodeId:t.id,x:(((s=t.positionAbsolute)==null?void 0:s.x)??0)+o.x+o.width/2,y:(((a=t.positionAbsolute)==null?void 0:a.y)??0)+o.y+o.height/2}),i},[])}function bVe(t,e,n,r,i,o){const{x:s,y:a}=eu(t),c=e.elementsFromPoint(s,a).find(S=>S.classList.contains("react-flow__handle"));if(c){const S=c.getAttribute("data-nodeid");if(S){const b=xL(void 0,c),T=c.getAttribute("data-handleid"),x=o({nodeId:S,id:T,type:b});if(x){const C=i.find(I=>I.nodeId===S&&I.type===b&&I.id===T);return{handle:{id:T,type:b,nodeId:S,x:(C==null?void 0:C.x)||n.x,y:(C==null?void 0:C.y)||n.y},validHandleResult:x}}}}let d=[],h=1/0;if(i.forEach(S=>{const b=Math.sqrt((S.x-n.x)**2+(S.y-n.y)**2);if(b<=r){const T=o(S);b<=h&&(b<h?d=[{handle:S,validHandleResult:T}]:b===h&&d.push({handle:S,validHandleResult:T}),h=b)}}),!d.length)return{handle:null,validHandleResult:Ere()};if(d.length===1)return d[0];const g=d.some(({validHandleResult:S})=>S.isValid),_=d.some(({handle:S})=>S.type==="target");return d.find(({handle:S,validHandleResult:b})=>_?S.type==="target":g?b.isValid:!0)||d[0]}const TVe={source:null,target:null,sourceHandle:null,targetHandle:null},Ere=()=>({handleDomNode:null,isValid:!1,connection:TVe,endHandle:null});function Sre(t,e,n,r,i,o,s){const a=i==="target",u=s.querySelector(`.react-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),c={...Ere(),handleDomNode:u};if(u){const d=xL(void 0,u),h=u.getAttribute("data-nodeid"),g=u.getAttribute("data-handleid"),_=u.classList.contains("connectable"),S=u.classList.contains("connectableend"),b={source:a?h:n,sourceHandle:a?g:r,target:a?n:h,targetHandle:a?r:g};c.connection=b,_&&S&&(e===Zc.Strict?a&&d==="source"||!a&&d==="target":h!==n||g!==r)&&(c.endHandle={nodeId:h,handleId:g,type:d},c.isValid=o(b))}return c}function EVe({nodes:t,nodeId:e,handleId:n,handleType:r}){return t.reduce((i,o)=>{if(o[En]){const{handleBounds:s}=o[En];let a=[],u=[];s&&(a=J5(o,s,"source",`${e}-${n}-${r}`),u=J5(o,s,"target",`${e}-${n}-${r}`)),i.push(...a,...u)}return i},[])}function xL(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function o1(t){t==null||t.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function SVe(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function xre({event:t,handleId:e,nodeId:n,onConnect:r,isTarget:i,getState:o,setState:s,isValidConnection:a,edgeUpdaterType:u,onReconnectEnd:c}){const d=cre(t.target),{connectionMode:h,domNode:g,autoPanOnConnect:_,connectionRadius:S,onConnectStart:b,panBy:T,getNodes:x,cancelConnection:C}=o();let I=0,N;const{x:V,y:q}=eu(t),P=d==null?void 0:d.elementFromPoint(V,q),O=xL(u,P),R=g==null?void 0:g.getBoundingClientRect();if(!R||!O)return;let U,L=eu(t,R),F=!1,$=null,H=!1,Y=null;const K=EVe({nodes:x(),nodeId:n,handleId:e,handleType:O}),Q=()=>{if(!_)return;const[G,te]=ure(L,R);T({x:G,y:te}),I=requestAnimationFrame(Q)};s({connectionPosition:L,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:O,connectionStartHandle:{nodeId:n,handleId:e,type:O},connectionEndHandle:null}),b==null||b(t,{nodeId:n,handleId:e,handleType:O});function re(G){const{transform:te}=o();L=eu(G,R);const{handle:ee,validHandleResult:ae}=bVe(G,d,E2(L,te,!1,[1,1]),S,K,J=>Sre(J,h,n,e,i?"target":"source",a,d));if(N=ee,F||(Q(),F=!0),Y=ae.handleDomNode,$=ae.connection,H=ae.isValid,s({connectionPosition:N&&H?_re({x:N.x,y:N.y},te):L,connectionStatus:SVe(!!N,H),connectionEndHandle:ae.endHandle}),!N&&!H&&!Y)return o1(U);$.source!==$.target&&Y&&(o1(U),U=Y,Y.classList.add("connecting","react-flow__handle-connecting"),Y.classList.toggle("valid",H),Y.classList.toggle("react-flow__handle-valid",H))}function X(G){var te,ee;(N||Y)&&$&&H&&(r==null||r($)),(ee=(te=o()).onConnectEnd)==null||ee.call(te,G),u&&(c==null||c(G)),o1(U),C(),cancelAnimationFrame(I),F=!1,H=!1,$=null,Y=null,d.removeEventListener("mousemove",re),d.removeEventListener("mouseup",X),d.removeEventListener("touchmove",re),d.removeEventListener("touchend",X)}d.addEventListener("mousemove",re),d.addEventListener("mouseup",X),d.addEventListener("touchmove",re),d.addEventListener("touchend",X)}const X5=()=>!0,xVe=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),AVe=(t,e,n)=>r=>{const{connectionStartHandle:i,connectionEndHandle:o,connectionClickStartHandle:s}=r;return{connecting:(i==null?void 0:i.nodeId)===t&&(i==null?void 0:i.handleId)===e&&(i==null?void 0:i.type)===n||(o==null?void 0:o.nodeId)===t&&(o==null?void 0:o.handleId)===e&&(o==null?void 0:o.type)===n,clickConnecting:(s==null?void 0:s.nodeId)===t&&(s==null?void 0:s.handleId)===e&&(s==null?void 0:s.type)===n}},Are=D.forwardRef(({type:t="source",position:e=Qe.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:o=!0,id:s,onConnect:a,children:u,className:c,onMouseDown:d,onTouchStart:h,...g},_)=>{var R,U;const S=s||null,b=t==="target",T=nr(),x=gVe(),{connectOnClick:C,noPanClassName:I}=Mt(xVe,gr),{connecting:N,clickConnecting:V}=Mt(AVe(x,S,t),gr);x||(U=(R=T.getState()).onError)==null||U.call(R,"010",Ga.error010());const q=L=>{const{defaultEdgeOptions:F,onConnect:$,hasDefaultEdges:H}=T.getState(),Y={...F,...L};if(H){const{edges:K,setEdges:Q}=T.getState();Q(wVe(Y,K))}$==null||$(Y),a==null||a(Y)},P=L=>{if(!x)return;const F=pre(L);i&&(F&&L.button===0||!F)&&xre({event:L,handleId:S,nodeId:x,onConnect:q,isTarget:b,getState:T.getState,setState:T.setState,isValidConnection:n||T.getState().isValidConnection||X5}),F?d==null||d(L):h==null||h(L)},O=L=>{const{onClickConnectStart:F,onClickConnectEnd:$,connectionClickStartHandle:H,connectionMode:Y,isValidConnection:K}=T.getState();if(!x||!H&&!i)return;if(!H){F==null||F(L,{nodeId:x,handleId:S,handleType:t}),T.setState({connectionClickStartHandle:{nodeId:x,type:t,handleId:S}});return}const Q=cre(L.target),re=n||K||X5,{connection:X,isValid:G}=Sre({nodeId:x,id:S,type:t},Y,H.nodeId,H.handleId||null,H.type,re,Q);G&&q(X),$==null||$(L),T.setState({connectionClickStartHandle:null})};return ge.createElement("div",{"data-handleid":S,"data-nodeid":x,"data-handlepos":e,"data-id":`${x}-${S}-${t}`,className:Dr(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",I,c,{source:!b,target:b,connectable:r,connectablestart:i,connectableend:o,connecting:V,connectionindicator:r&&(i&&!N||o&&N)}]),onMouseDown:P,onTouchStart:P,onClick:C?O:void 0,ref:_,...g},u)});Are.displayName="Handle";var Nh=D.memo(Are);const Cre=({data:t,isConnectable:e,targetPosition:n=Qe.Top,sourcePosition:r=Qe.Bottom})=>ge.createElement(ge.Fragment,null,ge.createElement(Nh,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label,ge.createElement(Nh,{type:"source",position:r,isConnectable:e}));Cre.displayName="DefaultNode";var S2=D.memo(Cre);const Ire=({data:t,isConnectable:e,sourcePosition:n=Qe.Bottom})=>ge.createElement(ge.Fragment,null,t==null?void 0:t.label,ge.createElement(Nh,{type:"source",position:n,isConnectable:e}));Ire.displayName="InputNode";var Rre=D.memo(Ire);const Pre=({data:t,isConnectable:e,targetPosition:n=Qe.Top})=>ge.createElement(ge.Fragment,null,ge.createElement(Nh,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label);Pre.displayName="OutputNode";var Nre=D.memo(Pre);const AL=()=>null;AL.displayName="GroupNode";const CVe=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),J_=t=>t.id;function IVe(t,e){return gr(t.selectedNodes.map(J_),e.selectedNodes.map(J_))&&gr(t.selectedEdges.map(J_),e.selectedEdges.map(J_))}const Mre=D.memo(({onSelectionChange:t})=>{const e=nr(),{selectedNodes:n,selectedEdges:r}=Mt(CVe,IVe);return D.useEffect(()=>{const i={nodes:n,edges:r};t==null||t(i),e.getState().onSelectionChange.forEach(o=>o(i))},[n,r,t]),null});Mre.displayName="SelectionListener";const RVe=t=>!!t.onSelectionChange;function PVe({onSelectionChange:t}){const e=Mt(RVe);return t||e?ge.createElement(Mre,{onSelectionChange:t}):null}const NVe=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function _d(t,e){D.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function ft(t,e,n){D.useEffect(()=>{typeof e<"u"&&n({[t]:e})},[e])}const MVe=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:i,onConnectStart:o,onConnectEnd:s,onClickConnectStart:a,onClickConnectEnd:u,nodesDraggable:c,nodesConnectable:d,nodesFocusable:h,edgesFocusable:g,edgesUpdatable:_,elevateNodesOnSelect:S,minZoom:b,maxZoom:T,nodeExtent:x,onNodesChange:C,onEdgesChange:I,elementsSelectable:N,connectionMode:V,snapGrid:q,snapToGrid:P,translateExtent:O,connectOnClick:R,defaultEdgeOptions:U,fitView:L,fitViewOptions:F,onNodesDelete:$,onEdgesDelete:H,onNodeDrag:Y,onNodeDragStart:K,onNodeDragStop:Q,onSelectionDrag:re,onSelectionDragStart:X,onSelectionDragStop:G,noPanClassName:te,nodeOrigin:ee,rfId:ae,autoPanOnConnect:J,autoPanOnNodeDrag:ne,onError:oe,connectionRadius:we,isValidConnection:Ie,nodeDragThreshold:ye})=>{const{setNodes:Ce,setEdges:ke,setDefaultNodesAndEdges:_e,setMinZoom:Ze,setMaxZoom:Ue,setTranslateExtent:Le,setNodeExtent:st,reset:Pe}=Mt(NVe,gr),qe=nr();return D.useEffect(()=>{const Rt=r==null?void 0:r.map(In=>({...In,...U}));return _e(n,Rt),()=>{Pe()}},[]),ft("defaultEdgeOptions",U,qe.setState),ft("connectionMode",V,qe.setState),ft("onConnect",i,qe.setState),ft("onConnectStart",o,qe.setState),ft("onConnectEnd",s,qe.setState),ft("onClickConnectStart",a,qe.setState),ft("onClickConnectEnd",u,qe.setState),ft("nodesDraggable",c,qe.setState),ft("nodesConnectable",d,qe.setState),ft("nodesFocusable",h,qe.setState),ft("edgesFocusable",g,qe.setState),ft("edgesUpdatable",_,qe.setState),ft("elementsSelectable",N,qe.setState),ft("elevateNodesOnSelect",S,qe.setState),ft("snapToGrid",P,qe.setState),ft("snapGrid",q,qe.setState),ft("onNodesChange",C,qe.setState),ft("onEdgesChange",I,qe.setState),ft("connectOnClick",R,qe.setState),ft("fitViewOnInit",L,qe.setState),ft("fitViewOnInitOptions",F,qe.setState),ft("onNodesDelete",$,qe.setState),ft("onEdgesDelete",H,qe.setState),ft("onNodeDrag",Y,qe.setState),ft("onNodeDragStart",K,qe.setState),ft("onNodeDragStop",Q,qe.setState),ft("onSelectionDrag",re,qe.setState),ft("onSelectionDragStart",X,qe.setState),ft("onSelectionDragStop",G,qe.setState),ft("noPanClassName",te,qe.setState),ft("nodeOrigin",ee,qe.setState),ft("rfId",ae,qe.setState),ft("autoPanOnConnect",J,qe.setState),ft("autoPanOnNodeDrag",ne,qe.setState),ft("onError",oe,qe.setState),ft("connectionRadius",we,qe.setState),ft("isValidConnection",Ie,qe.setState),ft("nodeDragThreshold",ye,qe.setState),_d(t,Ce),_d(e,ke),_d(b,Ze),_d(T,Ue),_d(O,Le),_d(x,st),null},Q5={display:"none"},DVe={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Dre="react-flow__node-desc",kre="react-flow__edge-desc",kVe="react-flow__aria-live",OVe=t=>t.ariaLiveMessage;function LVe({rfId:t}){const e=Mt(OVe);return ge.createElement("div",{id:`${kVe}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:DVe},e)}function VVe({rfId:t,disableKeyboardA11y:e}){return ge.createElement(ge.Fragment,null,ge.createElement("div",{id:`${Dre}-${t}`,style:Q5},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),ge.createElement("div",{id:`${kre}-${t}`,style:Q5},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&ge.createElement(LVe,{rfId:t}))}var ay=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,r]=D.useState(!1),i=D.useRef(!1),o=D.useRef(new Set([])),[s,a]=D.useMemo(()=>{if(t!==null){const c=(Array.isArray(t)?t:[t]).filter(h=>typeof h=="string").map(h=>h.split("+")),d=c.reduce((h,g)=>h.concat(...g),[]);return[c,d]}return[[],[]]},[t]);return D.useEffect(()=>{const u=typeof document<"u"?document:null,c=(e==null?void 0:e.target)||u;if(t!==null){const d=_=>{if(i.current=_.ctrlKey||_.metaKey||_.shiftKey,(!i.current||i.current&&!e.actInsideInputWithModifier)&&b2(_))return!1;const b=ez(_.code,a);o.current.add(_[b]),Z5(s,o.current,!1)&&(_.preventDefault(),r(!0))},h=_=>{if((!i.current||i.current&&!e.actInsideInputWithModifier)&&b2(_))return!1;const b=ez(_.code,a);Z5(s,o.current,!0)?(r(!1),o.current.clear()):o.current.delete(_[b]),_.key==="Meta"&&o.current.clear(),i.current=!1},g=()=>{o.current.clear(),r(!1)};return c==null||c.addEventListener("keydown",d),c==null||c.addEventListener("keyup",h),window.addEventListener("blur",g),()=>{c==null||c.removeEventListener("keydown",d),c==null||c.removeEventListener("keyup",h),window.removeEventListener("blur",g)}}},[t,r]),n};function Z5(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(i=>e.has(i)))}function ez(t,e){return e.includes(t)?"code":"key"}function Ore(t,e,n,r){var a,u;const i=t.parentNode||t.parentId;if(!i)return n;const o=e.get(i),s=Oc(o,r);return Ore(o,e,{x:(n.x??0)+s.x,y:(n.y??0)+s.y,z:(((a=o[En])==null?void 0:a.z)??0)>(n.z??0)?((u=o[En])==null?void 0:u.z)??0:n.z??0},r)}function Lre(t,e,n){t.forEach(r=>{var o;const i=r.parentNode||r.parentId;if(i&&!t.has(i))throw new Error(`Parent node ${i} not found`);if(i||n!=null&&n[r.id]){const{x:s,y:a,z:u}=Ore(r,t,{...r.position,z:((o=r[En])==null?void 0:o.z)??0},e);r.positionAbsolute={x:s,y:a},r[En].z=u,n!=null&&n[r.id]&&(r[En].isParent=!0)}})}function s1(t,e,n,r){const i=new Map,o={},s=r?1e3:0;return t.forEach(a=>{var _;const u=(vo(a.zIndex)?a.zIndex:0)+(a.selected?s:0),c=e.get(a.id),d={...a,positionAbsolute:{x:a.position.x,y:a.position.y}},h=a.parentNode||a.parentId;h&&(o[h]=!0);const g=(c==null?void 0:c.type)&&(c==null?void 0:c.type)!==a.type;Object.defineProperty(d,En,{enumerable:!1,value:{handleBounds:g||(_=c==null?void 0:c[En])==null?void 0:_.handleBounds,z:u}}),i.set(a.id,d)}),Lre(i,n,o),i}function Vre(t,e={}){const{getNodes:n,width:r,height:i,minZoom:o,maxZoom:s,d3Zoom:a,d3Selection:u,fitViewOnInitDone:c,fitViewOnInit:d,nodeOrigin:h}=t(),g=e.initial&&!c&&d;if(a&&u&&(g||!e.initial)){const S=n().filter(T=>{var C;const x=e.includeHiddenNodes?T.width&&T.height:!T.hidden;return(C=e.nodes)!=null&&C.length?x&&e.nodes.some(I=>I.id===T.id):x}),b=S.every(T=>T.width&&T.height);if(S.length>0&&b){const T=CT(S,h),{x,y:C,zoom:I}=Tre(T,r,i,e.minZoom??o,e.maxZoom??s,e.padding??.1),N=Ma.translate(x,C).scale(I);return typeof e.duration=="number"&&e.duration>0?a.transform(hc(u,e.duration),N):a.transform(u,N),!0}}return!1}function UVe(t,e){return t.forEach(n=>{const r=e.get(n.id);r&&e.set(r.id,{...r,[En]:r[En],selected:n.selected})}),new Map(e)}function qVe(t,e){return e.map(n=>{const r=t.find(i=>i.id===n.id);return r&&(n.selected=r.selected),n})}function X_({changedNodes:t,changedEdges:e,get:n,set:r}){const{nodeInternals:i,edges:o,onNodesChange:s,onEdgesChange:a,hasDefaultNodes:u,hasDefaultEdges:c}=n();t!=null&&t.length&&(u&&r({nodeInternals:UVe(t,i)}),s==null||s(t)),e!=null&&e.length&&(c&&r({edges:qVe(e,o)}),a==null||a(e))}const wd=()=>{},FVe={zoomIn:wd,zoomOut:wd,zoomTo:wd,getZoom:()=>1,setViewport:wd,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:wd,fitBounds:wd,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},BVe=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),$Ve=()=>{const t=nr(),{d3Zoom:e,d3Selection:n}=Mt(BVe,gr);return D.useMemo(()=>n&&e?{zoomIn:i=>e.scaleBy(hc(n,i==null?void 0:i.duration),1.2),zoomOut:i=>e.scaleBy(hc(n,i==null?void 0:i.duration),1/1.2),zoomTo:(i,o)=>e.scaleTo(hc(n,o==null?void 0:o.duration),i),getZoom:()=>t.getState().transform[2],setViewport:(i,o)=>{const[s,a,u]=t.getState().transform,c=Ma.translate(i.x??s,i.y??a).scale(i.zoom??u);e.transform(hc(n,o==null?void 0:o.duration),c)},getViewport:()=>{const[i,o,s]=t.getState().transform;return{x:i,y:o,zoom:s}},fitView:i=>Vre(t.getState,i),setCenter:(i,o,s)=>{const{width:a,height:u,maxZoom:c}=t.getState(),d=typeof(s==null?void 0:s.zoom)<"u"?s.zoom:c,h=a/2-i*d,g=u/2-o*d,_=Ma.translate(h,g).scale(d);e.transform(hc(n,s==null?void 0:s.duration),_)},fitBounds:(i,o)=>{const{width:s,height:a,minZoom:u,maxZoom:c}=t.getState(),{x:d,y:h,zoom:g}=Tre(i,s,a,u,c,(o==null?void 0:o.padding)??.1),_=Ma.translate(d,h).scale(g);e.transform(hc(n,o==null?void 0:o.duration),_)},project:i=>{const{transform:o,snapToGrid:s,snapGrid:a}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),E2(i,o,s,a)},screenToFlowPosition:i=>{const{transform:o,snapToGrid:s,snapGrid:a,domNode:u}=t.getState();if(!u)return i;const{x:c,y:d}=u.getBoundingClientRect(),h={x:i.x-c,y:i.y-d};return E2(h,o,s,a)},flowToScreenPosition:i=>{const{transform:o,domNode:s}=t.getState();if(!s)return i;const{x:a,y:u}=s.getBoundingClientRect(),c=_re(i,o);return{x:c.x+a,y:c.y+u}},viewportInitialized:!0}:FVe,[e,n])};function IT(){const t=$Ve(),e=nr(),n=D.useCallback(()=>e.getState().getNodes().map(b=>({...b})),[]),r=D.useCallback(b=>e.getState().nodeInternals.get(b),[]),i=D.useCallback(()=>{const{edges:b=[]}=e.getState();return b.map(T=>({...T}))},[]),o=D.useCallback(b=>{const{edges:T=[]}=e.getState();return T.find(x=>x.id===b)},[]),s=D.useCallback(b=>{const{getNodes:T,setNodes:x,hasDefaultNodes:C,onNodesChange:I}=e.getState(),N=T(),V=typeof b=="function"?b(N):b;if(C)x(V);else if(I){const q=V.length===0?N.map(P=>({type:"remove",id:P.id})):V.map(P=>({item:P,type:"reset"}));I(q)}},[]),a=D.useCallback(b=>{const{edges:T=[],setEdges:x,hasDefaultEdges:C,onEdgesChange:I}=e.getState(),N=typeof b=="function"?b(T):b;if(C)x(N);else if(I){const V=N.length===0?T.map(q=>({type:"remove",id:q.id})):N.map(q=>({item:q,type:"reset"}));I(V)}},[]),u=D.useCallback(b=>{const T=Array.isArray(b)?b:[b],{getNodes:x,setNodes:C,hasDefaultNodes:I,onNodesChange:N}=e.getState();if(I){const q=[...x(),...T];C(q)}else if(N){const V=T.map(q=>({item:q,type:"add"}));N(V)}},[]),c=D.useCallback(b=>{const T=Array.isArray(b)?b:[b],{edges:x=[],setEdges:C,hasDefaultEdges:I,onEdgesChange:N}=e.getState();if(I)C([...x,...T]);else if(N){const V=T.map(q=>({item:q,type:"add"}));N(V)}},[]),d=D.useCallback(()=>{const{getNodes:b,edges:T=[],transform:x}=e.getState(),[C,I,N]=x;return{nodes:b().map(V=>({...V})),edges:T.map(V=>({...V})),viewport:{x:C,y:I,zoom:N}}},[]),h=D.useCallback(({nodes:b,edges:T})=>{const{nodeInternals:x,getNodes:C,edges:I,hasDefaultNodes:N,hasDefaultEdges:V,onNodesDelete:q,onEdgesDelete:P,onNodesChange:O,onEdgesChange:R}=e.getState(),U=(b||[]).map(Y=>Y.id),L=(T||[]).map(Y=>Y.id),F=C().reduce((Y,K)=>{const Q=K.parentNode||K.parentId,re=!U.includes(K.id)&&Q&&Y.find(G=>G.id===Q);return(typeof K.deletable=="boolean"?K.deletable:!0)&&(U.includes(K.id)||re)&&Y.push(K),Y},[]),$=I.filter(Y=>typeof Y.deletable=="boolean"?Y.deletable:!0),H=$.filter(Y=>L.includes(Y.id));if(F||H){const Y=bre(F,$),K=[...H,...Y],Q=K.reduce((re,X)=>(re.includes(X.id)||re.push(X.id),re),[]);if((V||N)&&(V&&e.setState({edges:I.filter(re=>!Q.includes(re.id))}),N&&(F.forEach(re=>{x.delete(re.id)}),e.setState({nodeInternals:new Map(x)}))),Q.length>0&&(P==null||P(K),R&&R(Q.map(re=>({id:re,type:"remove"})))),F.length>0&&(q==null||q(F),O)){const re=F.map(X=>({id:X.id,type:"remove"}));O(re)}}},[]),g=D.useCallback(b=>{const T=lVe(b),x=T?null:e.getState().nodeInternals.get(b.id);return!T&&!x?[null,null,T]:[T?b:G5(x),x,T]},[]),_=D.useCallback((b,T=!0,x)=>{const[C,I,N]=g(b);return C?(x||e.getState().getNodes()).filter(V=>{if(!N&&(V.id===I.id||!V.positionAbsolute))return!1;const q=G5(V),P=w2(q,C);return T&&P>0||P>=C.width*C.height}):[]},[]),S=D.useCallback((b,T,x=!0)=>{const[C]=g(b);if(!C)return!1;const I=w2(C,T);return x&&I>0||I>=C.width*C.height},[]);return D.useMemo(()=>({...t,getNodes:n,getNode:r,getEdges:i,getEdge:o,setNodes:s,setEdges:a,addNodes:u,addEdges:c,toObject:d,deleteElements:h,getIntersectingNodes:_,isNodeIntersecting:S}),[t,n,r,i,o,s,a,u,c,d,h,_,S])}const zVe={actInsideInputWithModifier:!1};var HVe=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const n=nr(),{deleteElements:r}=IT(),i=ay(t,zVe),o=ay(e);D.useEffect(()=>{if(i){const{edges:s,getNodes:a}=n.getState(),u=a().filter(d=>d.selected),c=s.filter(d=>d.selected);r({nodes:u,edges:c}),n.setState({nodesSelectionActive:!1})}},[i]),D.useEffect(()=>{n.setState({multiSelectionActive:o})},[o])};function GVe(t){const e=nr();D.useEffect(()=>{let n;const r=()=>{var o,s;if(!t.current)return;const i=_L(t.current);(i.height===0||i.width===0)&&((s=(o=e.getState()).onError)==null||s.call(o,"004",Ga.error004())),e.setState({width:i.width||500,height:i.height||500})};return r(),window.addEventListener("resize",r),t.current&&(n=new ResizeObserver(()=>r()),n.observe(t.current)),()=>{window.removeEventListener("resize",r),n&&t.current&&n.unobserve(t.current)}},[])}const CL={position:"absolute",width:"100%",height:"100%",top:0,left:0},jVe=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,Q_=t=>({x:t.x,y:t.y,zoom:t.k}),bd=(t,e)=>t.target.closest(`.${e}`),tz=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),nz=t=>{const e=t.ctrlKey&&$w()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},KVe=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),WVe=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:i=!0,zoomOnPinch:o=!0,panOnScroll:s=!1,panOnScrollSpeed:a=.5,panOnScrollMode:u=Ac.Free,zoomOnDoubleClick:c=!0,elementsSelectable:d,panOnDrag:h=!0,defaultViewport:g,translateExtent:_,minZoom:S,maxZoom:b,zoomActivationKeyCode:T,preventScrolling:x=!0,children:C,noWheelClassName:I,noPanClassName:N})=>{const V=D.useRef(),q=nr(),P=D.useRef(!1),O=D.useRef(!1),R=D.useRef(null),U=D.useRef({x:0,y:0,zoom:0}),{d3Zoom:L,d3Selection:F,d3ZoomHandler:$,userSelectionActive:H}=Mt(KVe,gr),Y=ay(T),K=D.useRef(0),Q=D.useRef(!1),re=D.useRef();return GVe(R),D.useEffect(()=>{if(R.current){const X=R.current.getBoundingClientRect(),G=are().scaleExtent([S,b]).translateExtent(_),te=mo(R.current).call(G),ee=Ma.translate(g.x,g.y).scale(Ph(g.zoom,S,b)),ae=[[0,0],[X.width,X.height]],J=G.constrain()(ee,ae,_);G.transform(te,J),G.wheelDelta(nz),q.setState({d3Zoom:G,d3Selection:te,d3ZoomHandler:te.on("wheel.zoom"),transform:[J.x,J.y,J.k],domNode:R.current.closest(".react-flow")})}},[]),D.useEffect(()=>{F&&L&&(s&&!Y&&!H?F.on("wheel.zoom",X=>{if(bd(X,I))return!1;X.preventDefault(),X.stopImmediatePropagation();const G=F.property("__zoom").k||1;if(X.ctrlKey&&o){const Ie=Fo(X),ye=nz(X),Ce=G*Math.pow(2,ye);L.scaleTo(F,Ce,Ie,X);return}const te=X.deltaMode===1?20:1;let ee=u===Ac.Vertical?0:X.deltaX*te,ae=u===Ac.Horizontal?0:X.deltaY*te;!$w()&&X.shiftKey&&u!==Ac.Vertical&&(ee=X.deltaY*te,ae=0),L.translateBy(F,-(ee/G)*a,-(ae/G)*a,{internal:!0});const J=Q_(F.property("__zoom")),{onViewportChangeStart:ne,onViewportChange:oe,onViewportChangeEnd:we}=q.getState();clearTimeout(re.current),Q.current||(Q.current=!0,e==null||e(X,J),ne==null||ne(J)),Q.current&&(t==null||t(X,J),oe==null||oe(J),re.current=setTimeout(()=>{n==null||n(X,J),we==null||we(J),Q.current=!1},150))},{passive:!1}):typeof $<"u"&&F.on("wheel.zoom",function(X,G){if(!x&&X.type==="wheel"&&!X.ctrlKey||bd(X,I))return null;X.preventDefault(),$.call(this,X,G)},{passive:!1}))},[H,s,u,F,L,$,Y,o,x,I,e,t,n]),D.useEffect(()=>{L&&L.on("start",X=>{var ee,ae;if(!X.sourceEvent||X.sourceEvent.internal)return null;K.current=(ee=X.sourceEvent)==null?void 0:ee.button;const{onViewportChangeStart:G}=q.getState(),te=Q_(X.transform);P.current=!0,U.current=te,((ae=X.sourceEvent)==null?void 0:ae.type)==="mousedown"&&q.setState({paneDragging:!0}),G==null||G(te),e==null||e(X.sourceEvent,te)})},[L,e]),D.useEffect(()=>{L&&(H&&!P.current?L.on("zoom",null):H||L.on("zoom",X=>{var te;const{onViewportChange:G}=q.getState();if(q.setState({transform:[X.transform.x,X.transform.y,X.transform.k]}),O.current=!!(r&&tz(h,K.current??0)),(t||G)&&!((te=X.sourceEvent)!=null&&te.internal)){const ee=Q_(X.transform);G==null||G(ee),t==null||t(X.sourceEvent,ee)}}))},[H,L,t,h,r]),D.useEffect(()=>{L&&L.on("end",X=>{if(!X.sourceEvent||X.sourceEvent.internal)return null;const{onViewportChangeEnd:G}=q.getState();if(P.current=!1,q.setState({paneDragging:!1}),r&&tz(h,K.current??0)&&!O.current&&r(X.sourceEvent),O.current=!1,(n||G)&&jVe(U.current,X.transform)){const te=Q_(X.transform);U.current=te,clearTimeout(V.current),V.current=setTimeout(()=>{G==null||G(te),n==null||n(X.sourceEvent,te)},s?150:0)}})},[L,s,h,n,r]),D.useEffect(()=>{L&&L.filter(X=>{const G=Y||i,te=o&&X.ctrlKey;if((h===!0||Array.isArray(h)&&h.includes(1))&&X.button===1&&X.type==="mousedown"&&(bd(X,"react-flow__node")||bd(X,"react-flow__edge")))return!0;if(!h&&!G&&!s&&!c&&!o||H||!c&&X.type==="dblclick"||bd(X,I)&&X.type==="wheel"||bd(X,N)&&(X.type!=="wheel"||s&&X.type==="wheel"&&!Y)||!o&&X.ctrlKey&&X.type==="wheel"||!G&&!s&&!te&&X.type==="wheel"||!h&&(X.type==="mousedown"||X.type==="touchstart")||Array.isArray(h)&&!h.includes(X.button)&&X.type==="mousedown")return!1;const ee=Array.isArray(h)&&h.includes(X.button)||!X.button||X.button<=1;return(!X.ctrlKey||X.type==="wheel")&&ee})},[H,L,i,o,s,c,h,d,Y]),ge.createElement("div",{className:"react-flow__renderer",ref:R,style:CL},C)},YVe=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function JVe(){const{userSelectionActive:t,userSelectionRect:e}=Mt(YVe,gr);return t&&e?ge.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function rz(t,e){const n=e.parentNode||e.parentId,r=t.find(i=>i.id===n);if(r){const i=e.position.x+e.width-r.width,o=e.position.y+e.height-r.height;if(i>0||o>0||e.position.x<0||e.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,i>0&&(r.style.width+=i),o>0&&(r.style.height+=o),e.position.x<0){const s=Math.abs(e.position.x);r.position.x=r.position.x-s,r.style.width+=s,e.position.x=0}if(e.position.y<0){const s=Math.abs(e.position.y);r.position.y=r.position.y-s,r.style.height+=s,e.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function Ure(t,e){if(t.some(r=>r.type==="reset"))return t.filter(r=>r.type==="reset").map(r=>r.item);const n=t.filter(r=>r.type==="add").map(r=>r.item);return e.reduce((r,i)=>{const o=t.filter(a=>a.id===i.id);if(o.length===0)return r.push(i),r;const s={...i};for(const a of o)if(a)switch(a.type){case"select":{s.selected=a.selected;break}case"position":{typeof a.position<"u"&&(s.position=a.position),typeof a.positionAbsolute<"u"&&(s.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(s.dragging=a.dragging),s.expandParent&&rz(r,s);break}case"dimensions":{typeof a.dimensions<"u"&&(s.width=a.dimensions.width,s.height=a.dimensions.height),typeof a.updateStyle<"u"&&(s.style={...s.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(s.resizing=a.resizing),s.expandParent&&rz(r,s);break}case"remove":return r}return r.push(s),r},n)}function qre(t,e){return Ure(t,e)}function XVe(t,e){return Ure(t,e)}const Fl=(t,e)=>({id:t,type:"select",selected:e});function Md(t,e){return t.reduce((n,r)=>{const i=e.includes(r.id);return!r.selected&&i?(r.selected=!0,n.push(Fl(r.id,!0))):r.selected&&!i&&(r.selected=!1,n.push(Fl(r.id,!1))),n},[])}const a1=(t,e)=>n=>{n.target===e.current&&(t==null||t(n))},QVe=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),Fre=D.memo(({isSelecting:t,selectionMode:e=oy.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:i,onPaneClick:o,onPaneContextMenu:s,onPaneScroll:a,onPaneMouseEnter:u,onPaneMouseMove:c,onPaneMouseLeave:d,children:h})=>{const g=D.useRef(null),_=nr(),S=D.useRef(0),b=D.useRef(0),T=D.useRef(),{userSelectionActive:x,elementsSelectable:C,dragging:I}=Mt(QVe,gr),N=()=>{_.setState({userSelectionActive:!1,userSelectionRect:null}),S.current=0,b.current=0},V=$=>{o==null||o($),_.getState().resetSelectedElements(),_.setState({nodesSelectionActive:!1})},q=$=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){$.preventDefault();return}s==null||s($)},P=a?$=>a($):void 0,O=$=>{const{resetSelectedElements:H,domNode:Y}=_.getState();if(T.current=Y==null?void 0:Y.getBoundingClientRect(),!C||!t||$.button!==0||$.target!==g.current||!T.current)return;const{x:K,y:Q}=eu($,T.current);H(),_.setState({userSelectionRect:{width:0,height:0,startX:K,startY:Q,x:K,y:Q}}),r==null||r($)},R=$=>{const{userSelectionRect:H,nodeInternals:Y,edges:K,transform:Q,onNodesChange:re,onEdgesChange:X,nodeOrigin:G,getNodes:te}=_.getState();if(!t||!T.current||!H)return;_.setState({userSelectionActive:!0,nodesSelectionActive:!1});const ee=eu($,T.current),ae=H.startX??0,J=H.startY??0,ne={...H,x:ee.x<ae?ee.x:ae,y:ee.y<J?ee.y:J,width:Math.abs(ee.x-ae),height:Math.abs(ee.y-J)},oe=te(),we=wre(Y,ne,Q,e===oy.Partial,!0,G),Ie=bre(we,K).map(Ce=>Ce.id),ye=we.map(Ce=>Ce.id);if(S.current!==ye.length){S.current=ye.length;const Ce=Md(oe,ye);Ce.length&&(re==null||re(Ce))}if(b.current!==Ie.length){b.current=Ie.length;const Ce=Md(K,Ie);Ce.length&&(X==null||X(Ce))}_.setState({userSelectionRect:ne})},U=$=>{if($.button!==0)return;const{userSelectionRect:H}=_.getState();!x&&H&&$.target===g.current&&(V==null||V($)),_.setState({nodesSelectionActive:S.current>0}),N(),i==null||i($)},L=$=>{x&&(_.setState({nodesSelectionActive:S.current>0}),i==null||i($)),N()},F=C&&(t||x);return ge.createElement("div",{className:Dr(["react-flow__pane",{dragging:I,selection:t}]),onClick:F?void 0:a1(V,g),onContextMenu:a1(q,g),onWheel:a1(P,g),onMouseEnter:F?void 0:u,onMouseDown:F?O:void 0,onMouseMove:F?R:c,onMouseUp:F?U:void 0,onMouseLeave:F?L:d,ref:g,style:CL},h,ge.createElement(JVe,null))});Fre.displayName="Pane";function Bre(t,e){const n=t.parentNode||t.parentId;if(!n)return!1;const r=e.get(n);return r?r.selected?!0:Bre(r,e):!1}function iz(t,e,n){let r=t;do{if(r!=null&&r.matches(e))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function ZVe(t,e,n,r){return Array.from(t.values()).filter(i=>(i.selected||i.id===r)&&(!i.parentNode||i.parentId||!Bre(i,t))&&(i.draggable||e&&typeof i.draggable>"u")).map(i=>{var o,s;return{id:i.id,position:i.position||{x:0,y:0},positionAbsolute:i.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((o=i.positionAbsolute)==null?void 0:o.x)??0),y:n.y-(((s=i.positionAbsolute)==null?void 0:s.y)??0)},delta:{x:0,y:0},extent:i.extent,parentNode:i.parentNode||i.parentId,parentId:i.parentNode||i.parentId,width:i.width,height:i.height,expandParent:i.expandParent}})}function eUe(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function $re(t,e,n,r,i=[0,0],o){const s=eUe(t,t.extent||r);let a=s;const u=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(u&&t.width&&t.height){const h=n.get(u),{x:g,y:_}=Oc(h,i).positionAbsolute;a=h&&vo(g)&&vo(_)&&vo(h.width)&&vo(h.height)?[[g+t.width*i[0],_+t.height*i[1]],[g+h.width-t.width+t.width*i[0],_+h.height-t.height+t.height*i[1]]]:a}else o==null||o("005",Ga.error005()),a=s;else if(t.extent&&u&&t.extent!=="parent"){const h=n.get(u),{x:g,y:_}=Oc(h,i).positionAbsolute;a=[[t.extent[0][0]+g,t.extent[0][1]+_],[t.extent[1][0]+g,t.extent[1][1]+_]]}let c={x:0,y:0};if(u){const h=n.get(u);c=Oc(h,i).positionAbsolute}const d=a&&a!=="parent"?wL(e,a):e;return{position:{x:d.x-c.x,y:d.y-c.y},positionAbsolute:d}}function l1({nodeId:t,dragItems:e,nodeInternals:n}){const r=e.map(i=>({...n.get(i.id),position:i.position,positionAbsolute:i.positionAbsolute}));return[t?r.find(i=>i.id===t):r[0],r]}const oz=(t,e,n,r)=>{const i=e.querySelectorAll(t);if(!i||!i.length)return null;const o=Array.from(i),s=e.getBoundingClientRect(),a={x:s.width*r[0],y:s.height*r[1]};return o.map(u=>{const c=u.getBoundingClientRect();return{id:u.getAttribute("data-handleid"),position:u.getAttribute("data-handlepos"),x:(c.left-s.left-a.x)/n,y:(c.top-s.top-a.y)/n,..._L(u)}})};function Um(t,e,n){return n===void 0?n:r=>{const i=e().nodeInternals.get(t);i&&n(r,{...i})}}function x2({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:o,multiSelectionActive:s,nodeInternals:a,onError:u}=e.getState(),c=a.get(t);if(!c){u==null||u("012",Ga.error012(t));return}e.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&s)&&(o({nodes:[c],edges:[]}),requestAnimationFrame(()=>{var d;return(d=r==null?void 0:r.current)==null?void 0:d.blur()})):i([t])}function tUe(){const t=nr();return D.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:i,snapToGrid:o}=t.getState(),s=n.touches?n.touches[0].clientX:n.clientX,a=n.touches?n.touches[0].clientY:n.clientY,u={x:(s-r[0])/r[2],y:(a-r[1])/r[2]};return{xSnapped:o?i[0]*Math.round(u.x/i[0]):u.x,ySnapped:o?i[1]*Math.round(u.y/i[1]):u.y,...u}},[])}function u1(t){return(e,n,r)=>t==null?void 0:t(e,r)}function zre({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:o,selectNodesOnDrag:s}){const a=nr(),[u,c]=D.useState(!1),d=D.useRef([]),h=D.useRef({x:null,y:null}),g=D.useRef(0),_=D.useRef(null),S=D.useRef({x:0,y:0}),b=D.useRef(null),T=D.useRef(!1),x=D.useRef(!1),C=D.useRef(!1),I=tUe();return D.useEffect(()=>{if(t!=null&&t.current){const N=mo(t.current),V=({x:O,y:R})=>{const{nodeInternals:U,onNodeDrag:L,onSelectionDrag:F,updateNodePositions:$,nodeExtent:H,snapGrid:Y,snapToGrid:K,nodeOrigin:Q,onError:re}=a.getState();h.current={x:O,y:R};let X=!1,G={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&H){const ee=CT(d.current,Q);G=iy(ee)}if(d.current=d.current.map(ee=>{const ae={x:O-ee.distance.x,y:R-ee.distance.y};K&&(ae.x=Y[0]*Math.round(ae.x/Y[0]),ae.y=Y[1]*Math.round(ae.y/Y[1]));const J=[[H[0][0],H[0][1]],[H[1][0],H[1][1]]];d.current.length>1&&H&&!ee.extent&&(J[0][0]=ee.positionAbsolute.x-G.x+H[0][0],J[1][0]=ee.positionAbsolute.x+(ee.width??0)-G.x2+H[1][0],J[0][1]=ee.positionAbsolute.y-G.y+H[0][1],J[1][1]=ee.positionAbsolute.y+(ee.height??0)-G.y2+H[1][1]);const ne=$re(ee,ae,U,J,Q,re);return X=X||ee.position.x!==ne.position.x||ee.position.y!==ne.position.y,ee.position=ne.position,ee.positionAbsolute=ne.positionAbsolute,ee}),!X)return;$(d.current,!0,!0),c(!0);const te=i?L:u1(F);if(te&&b.current){const[ee,ae]=l1({nodeId:i,dragItems:d.current,nodeInternals:U});te(b.current,ee,ae)}},q=()=>{if(!_.current)return;const[O,R]=ure(S.current,_.current);if(O!==0||R!==0){const{transform:U,panBy:L}=a.getState();h.current.x=(h.current.x??0)-O/U[2],h.current.y=(h.current.y??0)-R/U[2],L({x:O,y:R})&&V(h.current)}g.current=requestAnimationFrame(q)},P=O=>{var Q;const{nodeInternals:R,multiSelectionActive:U,nodesDraggable:L,unselectNodesAndEdges:F,onNodeDragStart:$,onSelectionDragStart:H}=a.getState();x.current=!0;const Y=i?$:u1(H);(!s||!o)&&!U&&i&&((Q=R.get(i))!=null&&Q.selected||F()),i&&o&&s&&x2({id:i,store:a,nodeRef:t});const K=I(O);if(h.current=K,d.current=ZVe(R,L,K,i),Y&&d.current){const[re,X]=l1({nodeId:i,dragItems:d.current,nodeInternals:R});Y(O.sourceEvent,re,X)}};if(e)N.on(".drag",null);else{const O=UOe().on("start",R=>{const{domNode:U,nodeDragThreshold:L}=a.getState();L===0&&P(R),C.current=!1;const F=I(R);h.current=F,_.current=(U==null?void 0:U.getBoundingClientRect())||null,S.current=eu(R.sourceEvent,_.current)}).on("drag",R=>{var $,H;const U=I(R),{autoPanOnNodeDrag:L,nodeDragThreshold:F}=a.getState();if(R.sourceEvent.type==="touchmove"&&R.sourceEvent.touches.length>1&&(C.current=!0),!C.current){if(!T.current&&x.current&&L&&(T.current=!0,q()),!x.current){const Y=U.xSnapped-((($=h==null?void 0:h.current)==null?void 0:$.x)??0),K=U.ySnapped-(((H=h==null?void 0:h.current)==null?void 0:H.y)??0);Math.sqrt(Y*Y+K*K)>F&&P(R)}(h.current.x!==U.xSnapped||h.current.y!==U.ySnapped)&&d.current&&x.current&&(b.current=R.sourceEvent,S.current=eu(R.sourceEvent,_.current),V(U))}}).on("end",R=>{if(!(!x.current||C.current)&&(c(!1),T.current=!1,x.current=!1,cancelAnimationFrame(g.current),d.current)){const{updateNodePositions:U,nodeInternals:L,onNodeDragStop:F,onSelectionDragStop:$}=a.getState(),H=i?F:u1($);if(U(d.current,!1,!1),H){const[Y,K]=l1({nodeId:i,dragItems:d.current,nodeInternals:L});H(R.sourceEvent,Y,K)}}}).filter(R=>{const U=R.target;return!R.button&&(!n||!iz(U,`.${n}`,t))&&(!r||iz(U,r,t))});return N.call(O),()=>{N.on(".drag",null)}}}},[t,e,n,r,o,a,i,s,I]),u}function Hre(){const t=nr();return D.useCallback(n=>{const{nodeInternals:r,nodeExtent:i,updateNodePositions:o,getNodes:s,snapToGrid:a,snapGrid:u,onError:c,nodesDraggable:d}=t.getState(),h=s().filter(C=>C.selected&&(C.draggable||d&&typeof C.draggable>"u")),g=a?u[0]:5,_=a?u[1]:5,S=n.isShiftPressed?4:1,b=n.x*g*S,T=n.y*_*S,x=h.map(C=>{if(C.positionAbsolute){const I={x:C.positionAbsolute.x+b,y:C.positionAbsolute.y+T};a&&(I.x=u[0]*Math.round(I.x/u[0]),I.y=u[1]*Math.round(I.y/u[1]));const{positionAbsolute:N,position:V}=$re(C,I,r,i,void 0,c);C.position=V,C.positionAbsolute=N}return C});o(x,!0,!1)},[])}const Hd={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var qm=t=>{const e=({id:n,type:r,data:i,xPos:o,yPos:s,xPosOrigin:a,yPosOrigin:u,selected:c,onClick:d,onMouseEnter:h,onMouseMove:g,onMouseLeave:_,onContextMenu:S,onDoubleClick:b,style:T,className:x,isDraggable:C,isSelectable:I,isConnectable:N,isFocusable:V,selectNodesOnDrag:q,sourcePosition:P,targetPosition:O,hidden:R,resizeObserver:U,dragHandle:L,zIndex:F,isParent:$,noDragClassName:H,noPanClassName:Y,initialized:K,disableKeyboardA11y:Q,ariaLabel:re,rfId:X,hasHandleBounds:G})=>{const te=nr(),ee=D.useRef(null),ae=D.useRef(null),J=D.useRef(P),ne=D.useRef(O),oe=D.useRef(r),we=I||C||d||h||g||_,Ie=Hre(),ye=Um(n,te.getState,h),Ce=Um(n,te.getState,g),ke=Um(n,te.getState,_),_e=Um(n,te.getState,S),Ze=Um(n,te.getState,b),Ue=Pe=>{const{nodeDragThreshold:qe}=te.getState();if(I&&(!q||!C||qe>0)&&x2({id:n,store:te,nodeRef:ee}),d){const Rt=te.getState().nodeInternals.get(n);Rt&&d(Pe,{...Rt})}},Le=Pe=>{if(!b2(Pe)&&!Q)if(hre.includes(Pe.key)&&I){const qe=Pe.key==="Escape";x2({id:n,store:te,unselect:qe,nodeRef:ee})}else C&&c&&Object.prototype.hasOwnProperty.call(Hd,Pe.key)&&(te.setState({ariaLiveMessage:`Moved selected node ${Pe.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~o}, y: ${~~s}`}),Ie({x:Hd[Pe.key].x,y:Hd[Pe.key].y,isShiftPressed:Pe.shiftKey}))};D.useEffect(()=>()=>{ae.current&&(U==null||U.unobserve(ae.current),ae.current=null)},[]),D.useEffect(()=>{if(ee.current&&!R){const Pe=ee.current;(!K||!G||ae.current!==Pe)&&(ae.current&&(U==null||U.unobserve(ae.current)),U==null||U.observe(Pe),ae.current=Pe)}},[R,K,G]),D.useEffect(()=>{const Pe=oe.current!==r,qe=J.current!==P,Rt=ne.current!==O;ee.current&&(Pe||qe||Rt)&&(Pe&&(oe.current=r),qe&&(J.current=P),Rt&&(ne.current=O),te.getState().updateNodeDimensions([{id:n,nodeElement:ee.current,forceUpdate:!0}]))},[n,r,P,O]);const st=zre({nodeRef:ee,disabled:R||!C,noDragClassName:H,handleSelector:L,nodeId:n,isSelectable:I,selectNodesOnDrag:q});return R?null:ge.createElement("div",{className:Dr(["react-flow__node",`react-flow__node-${r}`,{[Y]:C},x,{selected:c,selectable:I,parent:$,dragging:st}]),ref:ee,style:{zIndex:F,transform:`translate(${a}px,${u}px)`,pointerEvents:we?"all":"none",visibility:K?"visible":"hidden",...T},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:ye,onMouseMove:Ce,onMouseLeave:ke,onContextMenu:_e,onClick:Ue,onDoubleClick:Ze,onKeyDown:V?Le:void 0,tabIndex:V?0:void 0,role:V?"button":void 0,"aria-describedby":Q?void 0:`${Dre}-${X}`,"aria-label":re},ge.createElement(mVe,{value:n},ge.createElement(t,{id:n,data:i,type:r,xPos:o,yPos:s,selected:c,isConnectable:N,sourcePosition:P,targetPosition:O,dragging:st,dragHandle:L,zIndex:F})))};return e.displayName="NodeWrapper",D.memo(e)};const nUe=t=>{const e=t.getNodes().filter(n=>n.selected);return{...CT(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function rUe({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=nr(),{width:i,height:o,x:s,y:a,transformString:u,userSelectionActive:c}=Mt(nUe,gr),d=Hre(),h=D.useRef(null);if(D.useEffect(()=>{var S;n||(S=h.current)==null||S.focus({preventScroll:!0})},[n]),zre({nodeRef:h}),c||!i||!o)return null;const g=t?S=>{const b=r.getState().getNodes().filter(T=>T.selected);t(S,b)}:void 0,_=S=>{Object.prototype.hasOwnProperty.call(Hd,S.key)&&d({x:Hd[S.key].x,y:Hd[S.key].y,isShiftPressed:S.shiftKey})};return ge.createElement("div",{className:Dr(["react-flow__nodesselection","react-flow__container",e]),style:{transform:u}},ge.createElement("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:g,tabIndex:n?void 0:-1,onKeyDown:n?void 0:_,style:{width:i,height:o,top:a,left:s}}))}var iUe=D.memo(rUe);const oUe=t=>t.nodesSelectionActive,Gre=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:o,onPaneScroll:s,deleteKeyCode:a,onMove:u,onMoveStart:c,onMoveEnd:d,selectionKeyCode:h,selectionOnDrag:g,selectionMode:_,onSelectionStart:S,onSelectionEnd:b,multiSelectionKeyCode:T,panActivationKeyCode:x,zoomActivationKeyCode:C,elementsSelectable:I,zoomOnScroll:N,zoomOnPinch:V,panOnScroll:q,panOnScrollSpeed:P,panOnScrollMode:O,zoomOnDoubleClick:R,panOnDrag:U,defaultViewport:L,translateExtent:F,minZoom:$,maxZoom:H,preventScrolling:Y,onSelectionContextMenu:K,noWheelClassName:Q,noPanClassName:re,disableKeyboardA11y:X})=>{const G=Mt(oUe),te=ay(h),ee=ay(x),ae=ee||U,J=ee||q,ne=te||g&&ae!==!0;return HVe({deleteKeyCode:a,multiSelectionKeyCode:T}),ge.createElement(WVe,{onMove:u,onMoveStart:c,onMoveEnd:d,onPaneContextMenu:o,elementsSelectable:I,zoomOnScroll:N,zoomOnPinch:V,panOnScroll:J,panOnScrollSpeed:P,panOnScrollMode:O,zoomOnDoubleClick:R,panOnDrag:!te&&ae,defaultViewport:L,translateExtent:F,minZoom:$,maxZoom:H,zoomActivationKeyCode:C,preventScrolling:Y,noWheelClassName:Q,noPanClassName:re},ge.createElement(Fre,{onSelectionStart:S,onSelectionEnd:b,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:o,onPaneScroll:s,panOnDrag:ae,isSelecting:!!ne,selectionMode:_},t,G&&ge.createElement(iUe,{onSelectionContextMenu:K,noPanClassName:re,disableKeyboardA11y:X})))};Gre.displayName="FlowRenderer";var sUe=D.memo(Gre);function aUe(t){return Mt(D.useCallback(n=>t?wre(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function lUe(t){const e={input:qm(t.input||Rre),default:qm(t.default||S2),output:qm(t.output||Nre),group:qm(t.group||AL)},n={},r=Object.keys(t).filter(i=>!["input","default","output","group"].includes(i)).reduce((i,o)=>(i[o]=qm(t[o]||S2),i),n);return{...e,...r}}const uUe=({x:t,y:e,width:n,height:r,origin:i})=>!n||!r?{x:t,y:e}:i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:t,y:e}:{x:t-n*i[0],y:e-r*i[1]},cUe=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),jre=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,updateNodeDimensions:o,onError:s}=Mt(cUe,gr),a=aUe(t.onlyRenderVisibleElements),u=D.useRef(),c=D.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(h=>{const g=h.map(_=>({id:_.target.getAttribute("data-id"),nodeElement:_.target,forceUpdate:!0}));o(g)});return u.current=d,d},[]);return D.useEffect(()=>()=>{var d;(d=u==null?void 0:u.current)==null||d.disconnect()},[]),ge.createElement("div",{className:"react-flow__nodes",style:CL},a.map(d=>{var V,q,P;let h=d.type||"default";t.nodeTypes[h]||(s==null||s("003",Ga.error003(h)),h="default");const g=t.nodeTypes[h]||t.nodeTypes.default,_=!!(d.draggable||e&&typeof d.draggable>"u"),S=!!(d.selectable||i&&typeof d.selectable>"u"),b=!!(d.connectable||n&&typeof d.connectable>"u"),T=!!(d.focusable||r&&typeof d.focusable>"u"),x=t.nodeExtent?wL(d.positionAbsolute,t.nodeExtent):d.positionAbsolute,C=(x==null?void 0:x.x)??0,I=(x==null?void 0:x.y)??0,N=uUe({x:C,y:I,width:d.width??0,height:d.height??0,origin:t.nodeOrigin});return ge.createElement(g,{key:d.id,id:d.id,className:d.className,style:d.style,type:h,data:d.data,sourcePosition:d.sourcePosition||Qe.Bottom,targetPosition:d.targetPosition||Qe.Top,hidden:d.hidden,xPos:C,yPos:I,xPosOrigin:N.x,yPosOrigin:N.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!d.selected,isDraggable:_,isSelectable:S,isConnectable:b,isFocusable:T,resizeObserver:c,dragHandle:d.dragHandle,zIndex:((V=d[En])==null?void 0:V.z)??0,isParent:!!((q=d[En])!=null&&q.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!d.width&&!!d.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((P=d[En])!=null&&P.handleBounds)})}))};jre.displayName="NodeRenderer";var fUe=D.memo(jre);const dUe=(t,e,n)=>n===Qe.Left?t-e:n===Qe.Right?t+e:t,hUe=(t,e,n)=>n===Qe.Top?t-e:n===Qe.Bottom?t+e:t,sz="react-flow__edgeupdater",az=({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:o,onMouseOut:s,type:a})=>ge.createElement("circle",{onMouseDown:i,onMouseEnter:o,onMouseOut:s,className:Dr([sz,`${sz}-${a}`]),cx:dUe(e,r,t),cy:hUe(n,r,t),r,stroke:"transparent",fill:"transparent"}),pUe=()=>!0;var Td=t=>{const e=({id:n,className:r,type:i,data:o,onClick:s,onEdgeDoubleClick:a,selected:u,animated:c,label:d,labelStyle:h,labelShowBg:g,labelBgStyle:_,labelBgPadding:S,labelBgBorderRadius:b,style:T,source:x,target:C,sourceX:I,sourceY:N,targetX:V,targetY:q,sourcePosition:P,targetPosition:O,elementsSelectable:R,hidden:U,sourceHandleId:L,targetHandleId:F,onContextMenu:$,onMouseEnter:H,onMouseMove:Y,onMouseLeave:K,reconnectRadius:Q,onReconnect:re,onReconnectStart:X,onReconnectEnd:G,markerEnd:te,markerStart:ee,rfId:ae,ariaLabel:J,isFocusable:ne,isReconnectable:oe,pathOptions:we,interactionWidth:Ie,disableKeyboardA11y:ye})=>{const Ce=D.useRef(null),[ke,_e]=D.useState(!1),[Ze,Ue]=D.useState(!1),Le=nr(),st=D.useMemo(()=>`url('#${T2(ee,ae)}')`,[ee,ae]),Pe=D.useMemo(()=>`url('#${T2(te,ae)}')`,[te,ae]);if(U)return null;const qe=Ct=>{var rr;const{edges:_n,addSelectedEdges:on,unselectNodesAndEdges:hn,multiSelectionActive:Gn}=Le.getState(),kr=_n.find(No=>No.id===n);kr&&(R&&(Le.setState({nodesSelectionActive:!1}),kr.selected&&Gn?(hn({nodes:[],edges:[kr]}),(rr=Ce.current)==null||rr.blur()):on([n])),s&&s(Ct,kr))},Rt=Vm(n,Le.getState,a),In=Vm(n,Le.getState,$),Rn=Vm(n,Le.getState,H),xe=Vm(n,Le.getState,Y),Me=Vm(n,Le.getState,K),$e=(Ct,_n)=>{if(Ct.button!==0)return;const{edges:on,isValidConnection:hn}=Le.getState(),Gn=_n?C:x,kr=(_n?F:L)||null,rr=_n?"target":"source",No=hn||pUe,Js=_n,Mo=on.find(_i=>_i.id===n);Ue(!0),X==null||X(Ct,Mo,rr);const vi=_i=>{Ue(!1),G==null||G(_i,Mo,rr)};xre({event:Ct,handleId:kr,nodeId:Gn,onConnect:_i=>re==null?void 0:re(Mo,_i),isTarget:Js,getState:Le.getState,setState:Le.setState,isValidConnection:No,edgeUpdaterType:rr,onReconnectEnd:vi})},ze=Ct=>$e(Ct,!0),He=Ct=>$e(Ct,!1),We=()=>_e(!0),vt=()=>_e(!1),yt=!R&&!s,Dt=Ct=>{var _n;if(!ye&&hre.includes(Ct.key)&&R){const{unselectNodesAndEdges:on,addSelectedEdges:hn,edges:Gn}=Le.getState();Ct.key==="Escape"?((_n=Ce.current)==null||_n.blur(),on({edges:[Gn.find(rr=>rr.id===n)]})):hn([n])}};return ge.createElement("g",{className:Dr(["react-flow__edge",`react-flow__edge-${i}`,r,{selected:u,animated:c,inactive:yt,updating:ke}]),onClick:qe,onDoubleClick:Rt,onContextMenu:In,onMouseEnter:Rn,onMouseMove:xe,onMouseLeave:Me,onKeyDown:ne?Dt:void 0,tabIndex:ne?0:void 0,role:ne?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":J===null?void 0:J||`Edge from ${x} to ${C}`,"aria-describedby":ne?`${kre}-${ae}`:void 0,ref:Ce},!Ze&&ge.createElement(t,{id:n,source:x,target:C,selected:u,animated:c,label:d,labelStyle:h,labelShowBg:g,labelBgStyle:_,labelBgPadding:S,labelBgBorderRadius:b,data:o,style:T,sourceX:I,sourceY:N,targetX:V,targetY:q,sourcePosition:P,targetPosition:O,sourceHandleId:L,targetHandleId:F,markerStart:st,markerEnd:Pe,pathOptions:we,interactionWidth:Ie}),oe&&ge.createElement(ge.Fragment,null,(oe==="source"||oe===!0)&&ge.createElement(az,{position:P,centerX:I,centerY:N,radius:Q,onMouseDown:ze,onMouseEnter:We,onMouseOut:vt,type:"source"}),(oe==="target"||oe===!0)&&ge.createElement(az,{position:O,centerX:V,centerY:q,radius:Q,onMouseDown:He,onMouseEnter:We,onMouseOut:vt,type:"target"})))};return e.displayName="EdgeWrapper",D.memo(e)};function mUe(t){const e={default:Td(t.default||Hw),straight:Td(t.bezier||EL),step:Td(t.step||TL),smoothstep:Td(t.step||AT),simplebezier:Td(t.simplebezier||bL)},n={},r=Object.keys(t).filter(i=>!["default","bezier"].includes(i)).reduce((i,o)=>(i[o]=Td(t[o]||Hw),i),n);return{...e,...r}}function lz(t,e,n=null){const r=((n==null?void 0:n.x)||0)+e.x,i=((n==null?void 0:n.y)||0)+e.y,o=(n==null?void 0:n.width)||e.width,s=(n==null?void 0:n.height)||e.height;switch(t){case Qe.Top:return{x:r+o/2,y:i};case Qe.Right:return{x:r+o,y:i+s/2};case Qe.Bottom:return{x:r+o/2,y:i+s};case Qe.Left:return{x:r,y:i+s/2}}}function uz(t,e){return t?t.length===1||!e?t[0]:e&&t.find(n=>n.id===e)||null:null}const gUe=(t,e,n,r,i,o)=>{const s=lz(n,t,e),a=lz(o,r,i);return{sourceX:s.x,sourceY:s.y,targetX:a.x,targetY:a.y}};function yUe({sourcePos:t,targetPos:e,sourceWidth:n,sourceHeight:r,targetWidth:i,targetHeight:o,width:s,height:a,transform:u}){const c={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+n,e.x+i),y2:Math.max(t.y+r,e.y+o)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const d=iy({x:(0-u[0])/u[2],y:(0-u[1])/u[2],width:s/u[2],height:a/u[2]}),h=Math.max(0,Math.min(d.x2,c.x2)-Math.max(d.x,c.x)),g=Math.max(0,Math.min(d.y2,c.y2)-Math.max(d.y,c.y));return Math.ceil(h*g)>0}function cz(t){var r,i,o,s,a;const e=((r=t==null?void 0:t[En])==null?void 0:r.handleBounds)||null,n=e&&(t==null?void 0:t.width)&&(t==null?void 0:t.height)&&typeof((i=t==null?void 0:t.positionAbsolute)==null?void 0:i.x)<"u"&&typeof((o=t==null?void 0:t.positionAbsolute)==null?void 0:o.y)<"u";return[{x:((s=t==null?void 0:t.positionAbsolute)==null?void 0:s.x)||0,y:((a=t==null?void 0:t.positionAbsolute)==null?void 0:a.y)||0,width:(t==null?void 0:t.width)||0,height:(t==null?void 0:t.height)||0},e,!!n]}const vUe=[{level:0,isMaxLevel:!0,edges:[]}];function _Ue(t,e,n=!1){let r=-1;const i=t.reduce((s,a)=>{var d,h;const u=vo(a.zIndex);let c=u?a.zIndex:0;if(n){const g=e.get(a.target),_=e.get(a.source),S=a.selected||(g==null?void 0:g.selected)||(_==null?void 0:_.selected),b=Math.max(((d=_==null?void 0:_[En])==null?void 0:d.z)||0,((h=g==null?void 0:g[En])==null?void 0:h.z)||0,1e3);c=(u?a.zIndex:0)+(S?b:0)}return s[c]?s[c].push(a):s[c]=[a],r=c>r?c:r,s},{}),o=Object.entries(i).map(([s,a])=>{const u=+s;return{edges:a,level:u,isMaxLevel:u===r}});return o.length===0?vUe:o}function wUe(t,e,n){const r=Mt(D.useCallback(i=>t?i.edges.filter(o=>{const s=e.get(o.source),a=e.get(o.target);return(s==null?void 0:s.width)&&(s==null?void 0:s.height)&&(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&yUe({sourcePos:s.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:s.width,sourceHeight:s.height,targetWidth:a.width,targetHeight:a.height,width:i.width,height:i.height,transform:i.transform})}):i.edges,[t,e]));return _Ue(r,e,n)}const bUe=({color:t="none",strokeWidth:e=1})=>ge.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),TUe=({color:t="none",strokeWidth:e=1})=>ge.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),fz={[sy.Arrow]:bUe,[sy.ArrowClosed]:TUe};function EUe(t){const e=nr();return D.useMemo(()=>{var i,o;return Object.prototype.hasOwnProperty.call(fz,t)?fz[t]:((o=(i=e.getState()).onError)==null||o.call(i,"009",Ga.error009(t)),null)},[t])}const SUe=({id:t,type:e,color:n,width:r=12.5,height:i=12.5,markerUnits:o="strokeWidth",strokeWidth:s,orient:a="auto-start-reverse"})=>{const u=EUe(e);return u?ge.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:a,refX:"0",refY:"0"},ge.createElement(u,{color:n,strokeWidth:s})):null},xUe=({defaultColor:t,rfId:e})=>n=>{const r=[];return n.edges.reduce((i,o)=>([o.markerStart,o.markerEnd].forEach(s=>{if(s&&typeof s=="object"){const a=T2(s,e);r.includes(a)||(i.push({id:a,color:s.color||t,...s}),r.push(a))}}),i),[]).sort((i,o)=>i.id.localeCompare(o.id))},Kre=({defaultColor:t,rfId:e})=>{const n=Mt(D.useCallback(xUe({defaultColor:t,rfId:e}),[t,e]),(r,i)=>!(r.length!==i.length||r.some((o,s)=>o.id!==i[s].id)));return ge.createElement("defs",null,n.map(r=>ge.createElement(SUe,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};Kre.displayName="MarkerDefinitions";var AUe=D.memo(Kre);const CUe=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),Wre=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:r,edgeTypes:i,noPanClassName:o,onEdgeContextMenu:s,onEdgeMouseEnter:a,onEdgeMouseMove:u,onEdgeMouseLeave:c,onEdgeClick:d,onEdgeDoubleClick:h,onReconnect:g,onReconnectStart:_,onReconnectEnd:S,reconnectRadius:b,children:T,disableKeyboardA11y:x})=>{const{edgesFocusable:C,edgesUpdatable:I,elementsSelectable:N,width:V,height:q,connectionMode:P,nodeInternals:O,onError:R}=Mt(CUe,gr),U=wUe(e,O,n);return V?ge.createElement(ge.Fragment,null,U.map(({level:L,edges:F,isMaxLevel:$})=>ge.createElement("svg",{key:L,style:{zIndex:L},width:V,height:q,className:"react-flow__edges react-flow__container"},$&&ge.createElement(AUe,{defaultColor:t,rfId:r}),ge.createElement("g",null,F.map(H=>{const[Y,K,Q]=cz(O.get(H.source)),[re,X,G]=cz(O.get(H.target));if(!Q||!G)return null;let te=H.type||"default";i[te]||(R==null||R("011",Ga.error011(te)),te="default");const ee=i[te]||i.default,ae=P===Zc.Strict?X.target:(X.target??[]).concat(X.source??[]),J=uz(K.source,H.sourceHandle),ne=uz(ae,H.targetHandle),oe=(J==null?void 0:J.position)||Qe.Bottom,we=(ne==null?void 0:ne.position)||Qe.Top,Ie=!!(H.focusable||C&&typeof H.focusable>"u"),ye=H.reconnectable||H.updatable,Ce=typeof g<"u"&&(ye||I&&typeof ye>"u");if(!J||!ne)return R==null||R("008",Ga.error008(J,H)),null;const{sourceX:ke,sourceY:_e,targetX:Ze,targetY:Ue}=gUe(Y,J,oe,re,ne,we);return ge.createElement(ee,{key:H.id,id:H.id,className:Dr([H.className,o]),type:te,data:H.data,selected:!!H.selected,animated:!!H.animated,hidden:!!H.hidden,label:H.label,labelStyle:H.labelStyle,labelShowBg:H.labelShowBg,labelBgStyle:H.labelBgStyle,labelBgPadding:H.labelBgPadding,labelBgBorderRadius:H.labelBgBorderRadius,style:H.style,source:H.source,target:H.target,sourceHandleId:H.sourceHandle,targetHandleId:H.targetHandle,markerEnd:H.markerEnd,markerStart:H.markerStart,sourceX:ke,sourceY:_e,targetX:Ze,targetY:Ue,sourcePosition:oe,targetPosition:we,elementsSelectable:N,onContextMenu:s,onMouseEnter:a,onMouseMove:u,onMouseLeave:c,onClick:d,onEdgeDoubleClick:h,onReconnect:g,onReconnectStart:_,onReconnectEnd:S,reconnectRadius:b,rfId:r,ariaLabel:H.ariaLabel,isFocusable:Ie,isReconnectable:Ce,pathOptions:"pathOptions"in H?H.pathOptions:void 0,interactionWidth:H.interactionWidth,disableKeyboardA11y:x})})))),T):null};Wre.displayName="EdgeRenderer";var IUe=D.memo(Wre);const RUe=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function PUe({children:t}){const e=Mt(RUe);return ge.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function NUe(t){const e=IT(),n=D.useRef(!1);D.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const MUe={[Qe.Left]:Qe.Right,[Qe.Right]:Qe.Left,[Qe.Top]:Qe.Bottom,[Qe.Bottom]:Qe.Top},Yre=({nodeId:t,handleType:e,style:n,type:r=zl.Bezier,CustomComponent:i,connectionStatus:o})=>{var q,P,O;const{fromNode:s,handleId:a,toX:u,toY:c,connectionMode:d}=Mt(D.useCallback(R=>({fromNode:R.nodeInternals.get(t),handleId:R.connectionHandleId,toX:(R.connectionPosition.x-R.transform[0])/R.transform[2],toY:(R.connectionPosition.y-R.transform[1])/R.transform[2],connectionMode:R.connectionMode}),[t]),gr),h=(q=s==null?void 0:s[En])==null?void 0:q.handleBounds;let g=h==null?void 0:h[e];if(d===Zc.Loose&&(g=g||(h==null?void 0:h[e==="source"?"target":"source"])),!s||!g)return null;const _=a?g.find(R=>R.id===a):g[0],S=_?_.x+_.width/2:(s.width??0)/2,b=_?_.y+_.height/2:s.height??0,T=(((P=s.positionAbsolute)==null?void 0:P.x)??0)+S,x=(((O=s.positionAbsolute)==null?void 0:O.y)??0)+b,C=_==null?void 0:_.position,I=C?MUe[C]:null;if(!C||!I)return null;if(i)return ge.createElement(i,{connectionLineType:r,connectionLineStyle:n,fromNode:s,fromHandle:_,fromX:T,fromY:x,toX:u,toY:c,fromPosition:C,toPosition:I,connectionStatus:o});let N="";const V={sourceX:T,sourceY:x,sourcePosition:C,targetX:u,targetY:c,targetPosition:I};return r===zl.Bezier?[N]=vre(V):r===zl.Step?[N]=zw({...V,borderRadius:0}):r===zl.SmoothStep?[N]=zw(V):r===zl.SimpleBezier?[N]=yre(V):N=`M${T},${x} ${u},${c}`,ge.createElement("path",{d:N,fill:"none",className:"react-flow__connection-path",style:n})};Yre.displayName="ConnectionLine";const DUe=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function kUe({containerStyle:t,style:e,type:n,component:r}){const{nodeId:i,handleType:o,nodesConnectable:s,width:a,height:u,connectionStatus:c}=Mt(DUe,gr);return!(i&&o&&a&&s)?null:ge.createElement("svg",{style:t,width:a,height:u,className:"react-flow__edges react-flow__connectionline react-flow__container"},ge.createElement("g",{className:Dr(["react-flow__connection",c])},ge.createElement(Yre,{nodeId:i,handleType:o,style:e,type:n,CustomComponent:r,connectionStatus:c})))}function dz(t,e){return D.useRef(null),nr(),D.useMemo(()=>e(t),[t])}const Jre=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:r,onMoveEnd:i,onInit:o,onNodeClick:s,onEdgeClick:a,onNodeDoubleClick:u,onEdgeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:g,onNodeContextMenu:_,onSelectionContextMenu:S,onSelectionStart:b,onSelectionEnd:T,connectionLineType:x,connectionLineStyle:C,connectionLineComponent:I,connectionLineContainerStyle:N,selectionKeyCode:V,selectionOnDrag:q,selectionMode:P,multiSelectionKeyCode:O,panActivationKeyCode:R,zoomActivationKeyCode:U,deleteKeyCode:L,onlyRenderVisibleElements:F,elementsSelectable:$,selectNodesOnDrag:H,defaultViewport:Y,translateExtent:K,minZoom:Q,maxZoom:re,preventScrolling:X,defaultMarkerColor:G,zoomOnScroll:te,zoomOnPinch:ee,panOnScroll:ae,panOnScrollSpeed:J,panOnScrollMode:ne,zoomOnDoubleClick:oe,panOnDrag:we,onPaneClick:Ie,onPaneMouseEnter:ye,onPaneMouseMove:Ce,onPaneMouseLeave:ke,onPaneScroll:_e,onPaneContextMenu:Ze,onEdgeContextMenu:Ue,onEdgeMouseEnter:Le,onEdgeMouseMove:st,onEdgeMouseLeave:Pe,onReconnect:qe,onReconnectStart:Rt,onReconnectEnd:In,reconnectRadius:Rn,noDragClassName:xe,noWheelClassName:Me,noPanClassName:$e,elevateEdgesOnSelect:ze,disableKeyboardA11y:He,nodeOrigin:We,nodeExtent:vt,rfId:yt})=>{const Dt=dz(t,lUe),Ct=dz(e,mUe);return NUe(o),ge.createElement(sUe,{onPaneClick:Ie,onPaneMouseEnter:ye,onPaneMouseMove:Ce,onPaneMouseLeave:ke,onPaneContextMenu:Ze,onPaneScroll:_e,deleteKeyCode:L,selectionKeyCode:V,selectionOnDrag:q,selectionMode:P,onSelectionStart:b,onSelectionEnd:T,multiSelectionKeyCode:O,panActivationKeyCode:R,zoomActivationKeyCode:U,elementsSelectable:$,onMove:n,onMoveStart:r,onMoveEnd:i,zoomOnScroll:te,zoomOnPinch:ee,zoomOnDoubleClick:oe,panOnScroll:ae,panOnScrollSpeed:J,panOnScrollMode:ne,panOnDrag:we,defaultViewport:Y,translateExtent:K,minZoom:Q,maxZoom:re,onSelectionContextMenu:S,preventScrolling:X,noDragClassName:xe,noWheelClassName:Me,noPanClassName:$e,disableKeyboardA11y:He},ge.createElement(PUe,null,ge.createElement(IUe,{edgeTypes:Ct,onEdgeClick:a,onEdgeDoubleClick:c,onlyRenderVisibleElements:F,onEdgeContextMenu:Ue,onEdgeMouseEnter:Le,onEdgeMouseMove:st,onEdgeMouseLeave:Pe,onReconnect:qe,onReconnectStart:Rt,onReconnectEnd:In,reconnectRadius:Rn,defaultMarkerColor:G,noPanClassName:$e,elevateEdgesOnSelect:!!ze,disableKeyboardA11y:He,rfId:yt},ge.createElement(kUe,{style:C,type:x,component:I,containerStyle:N})),ge.createElement("div",{className:"react-flow__edgelabel-renderer"}),ge.createElement(fUe,{nodeTypes:Dt,onNodeClick:s,onNodeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:g,onNodeContextMenu:_,selectNodesOnDrag:H,onlyRenderVisibleElements:F,noPanClassName:$e,noDragClassName:xe,disableKeyboardA11y:He,nodeOrigin:We,nodeExtent:vt,rfId:yt})))};Jre.displayName="GraphView";var OUe=D.memo(Jre);const A2=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Vl={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:A2,nodeExtent:A2,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Zc.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:uVe,isValidConnection:void 0},LUe=()=>JDe((t,e)=>({...Vl,setNodes:n=>{const{nodeInternals:r,nodeOrigin:i,elevateNodesOnSelect:o}=e();t({nodeInternals:s1(n,r,i,o)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=e();t({edges:n.map(i=>({...r,...i}))})},setDefaultNodesAndEdges:(n,r)=>{const i=typeof n<"u",o=typeof r<"u",s=i?s1(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:s,edges:o?r:[],hasDefaultNodes:i,hasDefaultEdges:o})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:i,fitViewOnInit:o,fitViewOnInitDone:s,fitViewOnInitOptions:a,domNode:u,nodeOrigin:c}=e(),d=u==null?void 0:u.querySelector(".react-flow__viewport");if(!d)return;const h=window.getComputedStyle(d),{m22:g}=new window.DOMMatrixReadOnly(h.transform),_=n.reduce((b,T)=>{const x=i.get(T.id);if(x!=null&&x.hidden)i.set(x.id,{...x,[En]:{...x[En],handleBounds:void 0}});else if(x){const C=_L(T.nodeElement);!!(C.width&&C.height&&(x.width!==C.width||x.height!==C.height||T.forceUpdate))&&(i.set(x.id,{...x,[En]:{...x[En],handleBounds:{source:oz(".source",T.nodeElement,g,c),target:oz(".target",T.nodeElement,g,c)}},...C}),b.push({id:x.id,type:"dimensions",dimensions:C}))}return b},[]);Lre(i,c);const S=s||o&&!s&&Vre(e,{initial:!0,...a});t({nodeInternals:new Map(i),fitViewOnInitDone:S}),(_==null?void 0:_.length)>0&&(r==null||r(_))},updateNodePositions:(n,r=!0,i=!1)=>{const{triggerNodeChanges:o}=e(),s=n.map(a=>{const u={id:a.id,type:"position",dragging:i};return r&&(u.positionAbsolute=a.positionAbsolute,u.position=a.position),u});o(s)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:i,hasDefaultNodes:o,nodeOrigin:s,getNodes:a,elevateNodesOnSelect:u}=e();if(n!=null&&n.length){if(o){const c=qre(n,a()),d=s1(c,i,s,u);t({nodeInternals:d})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:i,getNodes:o}=e();let s,a=null;r?s=n.map(u=>Fl(u,!0)):(s=Md(o(),n),a=Md(i,[])),X_({changedNodes:s,changedEdges:a,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:i,getNodes:o}=e();let s,a=null;r?s=n.map(u=>Fl(u,!0)):(s=Md(i,n),a=Md(o(),[])),X_({changedNodes:a,changedEdges:s,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:i,getNodes:o}=e(),s=n||o(),a=r||i,u=s.map(d=>(d.selected=!1,Fl(d.id,!1))),c=a.map(d=>Fl(d.id,!1));X_({changedNodes:u,changedEdges:c,get:e,set:t})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:i}=e();r==null||r.scaleExtent([n,i]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:i}=e();r==null||r.scaleExtent([i,n]),t({maxZoom:n})},setTranslateExtent:n=>{var r;(r=e().d3Zoom)==null||r.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=e(),o=r().filter(a=>a.selected).map(a=>Fl(a.id,!1)),s=n.filter(a=>a.selected).map(a=>Fl(a.id,!1));X_({changedNodes:o,changedEdges:s,get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:r}=e();r.forEach(i=>{i.positionAbsolute=wL(i.position,n)}),t({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:i,height:o,d3Zoom:s,d3Selection:a,translateExtent:u}=e();if(!s||!a||!n.x&&!n.y)return!1;const c=Ma.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),d=[[0,0],[i,o]],h=s==null?void 0:s.constrain()(c,d,u);return s.transform(a,h),r[0]!==h.x||r[1]!==h.y||r[2]!==h.k},cancelConnection:()=>t({connectionNodeId:Vl.connectionNodeId,connectionHandleId:Vl.connectionHandleId,connectionHandleType:Vl.connectionHandleType,connectionStatus:Vl.connectionStatus,connectionStartHandle:Vl.connectionStartHandle,connectionEndHandle:Vl.connectionEndHandle}),reset:()=>t({...Vl})}),Object.is),IL=({children:t})=>{const e=D.useRef(null);return e.current||(e.current=LUe()),ge.createElement(nVe,{value:e.current},t)};IL.displayName="ReactFlowProvider";const Xre=({children:t})=>D.useContext(xT)?ge.createElement(ge.Fragment,null,t):ge.createElement(IL,null,t);Xre.displayName="ReactFlowWrapper";const VUe={input:Rre,default:S2,output:Nre,group:AL},UUe={default:Hw,straight:EL,step:TL,smoothstep:AT,simplebezier:bL},qUe=[0,0],FUe=[15,15],BUe={x:0,y:0,zoom:1},$Ue={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Qre=D.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:o=VUe,edgeTypes:s=UUe,onNodeClick:a,onEdgeClick:u,onInit:c,onMove:d,onMoveStart:h,onMoveEnd:g,onConnect:_,onConnectStart:S,onConnectEnd:b,onClickConnectStart:T,onClickConnectEnd:x,onNodeMouseEnter:C,onNodeMouseMove:I,onNodeMouseLeave:N,onNodeContextMenu:V,onNodeDoubleClick:q,onNodeDragStart:P,onNodeDrag:O,onNodeDragStop:R,onNodesDelete:U,onEdgesDelete:L,onSelectionChange:F,onSelectionDragStart:$,onSelectionDrag:H,onSelectionDragStop:Y,onSelectionContextMenu:K,onSelectionStart:Q,onSelectionEnd:re,connectionMode:X=Zc.Strict,connectionLineType:G=zl.Bezier,connectionLineStyle:te,connectionLineComponent:ee,connectionLineContainerStyle:ae,deleteKeyCode:J="Backspace",selectionKeyCode:ne="Shift",selectionOnDrag:oe=!1,selectionMode:we=oy.Full,panActivationKeyCode:Ie="Space",multiSelectionKeyCode:ye=$w()?"Meta":"Control",zoomActivationKeyCode:Ce=$w()?"Meta":"Control",snapToGrid:ke=!1,snapGrid:_e=FUe,onlyRenderVisibleElements:Ze=!1,selectNodesOnDrag:Ue=!0,nodesDraggable:Le,nodesConnectable:st,nodesFocusable:Pe,nodeOrigin:qe=qUe,edgesFocusable:Rt,edgesUpdatable:In,elementsSelectable:Rn,defaultViewport:xe=BUe,minZoom:Me=.5,maxZoom:$e=2,translateExtent:ze=A2,preventScrolling:He=!0,nodeExtent:We,defaultMarkerColor:vt="#b1b1b7",zoomOnScroll:yt=!0,zoomOnPinch:Dt=!0,panOnScroll:Ct=!1,panOnScrollSpeed:_n=.5,panOnScrollMode:on=Ac.Free,zoomOnDoubleClick:hn=!0,panOnDrag:Gn=!0,onPaneClick:kr,onPaneMouseEnter:rr,onPaneMouseMove:No,onPaneMouseLeave:Js,onPaneScroll:Mo,onPaneContextMenu:vi,children:ji,onEdgeContextMenu:_i,onEdgeDoubleClick:Ki,onEdgeMouseEnter:Ru,onEdgeMouseMove:ss,onEdgeMouseLeave:al,onEdgeUpdate:as,onEdgeUpdateStart:wf,onEdgeUpdateEnd:Kt,onReconnect:Pn,onReconnectStart:wn,onReconnectEnd:oi,reconnectRadius:Pu=10,edgeUpdaterRadius:mp=10,onNodesChange:ls,onEdgesChange:bf,noDragClassName:Xs="nodrag",noWheelClassName:us="nowheel",noPanClassName:Wi="nopan",fitView:Yi=!1,fitViewOptions:Ji,connectOnClick:br=!0,attributionPosition:pn,proOptions:Nu,defaultEdgeOptions:ll,elevateNodesOnSelect:wi=!0,elevateEdgesOnSelect:Do=!1,disableKeyboardA11y:Mu=!1,autoPanOnConnect:Tf=!0,autoPanOnNodeDrag:Qs=!0,connectionRadius:Ef=20,isValidConnection:cs,onError:Xi,style:jn,id:fs,nodeDragThreshold:Sf,...ko},ul)=>{const ds=fs||"1";return ge.createElement("div",{...ko,style:{...jn,...$Ue},ref:ul,className:Dr(["react-flow",i]),"data-testid":"rf__wrapper",id:fs},ge.createElement(Xre,null,ge.createElement(OUe,{onInit:c,onMove:d,onMoveStart:h,onMoveEnd:g,onNodeClick:a,onEdgeClick:u,onNodeMouseEnter:C,onNodeMouseMove:I,onNodeMouseLeave:N,onNodeContextMenu:V,onNodeDoubleClick:q,nodeTypes:o,edgeTypes:s,connectionLineType:G,connectionLineStyle:te,connectionLineComponent:ee,connectionLineContainerStyle:ae,selectionKeyCode:ne,selectionOnDrag:oe,selectionMode:we,deleteKeyCode:J,multiSelectionKeyCode:ye,panActivationKeyCode:Ie,zoomActivationKeyCode:Ce,onlyRenderVisibleElements:Ze,selectNodesOnDrag:Ue,defaultViewport:xe,translateExtent:ze,minZoom:Me,maxZoom:$e,preventScrolling:He,zoomOnScroll:yt,zoomOnPinch:Dt,zoomOnDoubleClick:hn,panOnScroll:Ct,panOnScrollSpeed:_n,panOnScrollMode:on,panOnDrag:Gn,onPaneClick:kr,onPaneMouseEnter:rr,onPaneMouseMove:No,onPaneMouseLeave:Js,onPaneScroll:Mo,onPaneContextMenu:vi,onSelectionContextMenu:K,onSelectionStart:Q,onSelectionEnd:re,onEdgeContextMenu:_i,onEdgeDoubleClick:Ki,onEdgeMouseEnter:Ru,onEdgeMouseMove:ss,onEdgeMouseLeave:al,onReconnect:Pn??as,onReconnectStart:wn??wf,onReconnectEnd:oi??Kt,reconnectRadius:Pu??mp,defaultMarkerColor:vt,noDragClassName:Xs,noWheelClassName:us,noPanClassName:Wi,elevateEdgesOnSelect:Do,rfId:ds,disableKeyboardA11y:Mu,nodeOrigin:qe,nodeExtent:We}),ge.createElement(MVe,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:_,onConnectStart:S,onConnectEnd:b,onClickConnectStart:T,onClickConnectEnd:x,nodesDraggable:Le,nodesConnectable:st,nodesFocusable:Pe,edgesFocusable:Rt,edgesUpdatable:In,elementsSelectable:Rn,elevateNodesOnSelect:wi,minZoom:Me,maxZoom:$e,nodeExtent:We,onNodesChange:ls,onEdgesChange:bf,snapToGrid:ke,snapGrid:_e,connectionMode:X,translateExtent:ze,connectOnClick:br,defaultEdgeOptions:ll,fitView:Yi,fitViewOptions:Ji,onNodesDelete:U,onEdgesDelete:L,onNodeDragStart:P,onNodeDrag:O,onNodeDragStop:R,onSelectionDrag:H,onSelectionDragStart:$,onSelectionDragStop:Y,noPanClassName:Wi,nodeOrigin:qe,rfId:ds,autoPanOnConnect:Tf,autoPanOnNodeDrag:Qs,onError:Xi,connectionRadius:Ef,isValidConnection:cs,nodeDragThreshold:Sf}),ge.createElement(PVe,{onSelectionChange:F}),ji,ge.createElement(iVe,{proOptions:Nu,position:pn}),ge.createElement(VVe,{rfId:ds,disableKeyboardA11y:Mu})))});Qre.displayName="ReactFlow";const zUe=t=>{var e;return(e=t.domNode)==null?void 0:e.querySelector(".react-flow__edgelabel-renderer")};function HUe({children:t}){const e=Mt(zUe);return e?xK.createPortal(t,e):null}function Zre(t){return e=>{const[n,r]=D.useState(e),i=D.useCallback(o=>r(s=>t(o,s)),[]);return[n,r,i]}}const GUe=Zre(qre),jUe=Zre(XVe),eie=({id:t,x:e,y:n,width:r,height:i,style:o,color:s,strokeColor:a,strokeWidth:u,className:c,borderRadius:d,shapeRendering:h,onClick:g,selected:_})=>{const{background:S,backgroundColor:b}=o||{},T=s||S||b;return ge.createElement("rect",{className:Dr(["react-flow__minimap-node",{selected:_},c]),x:e,y:n,rx:d,ry:d,width:r,height:i,fill:T,stroke:a,strokeWidth:u,shapeRendering:h,onClick:g?x=>g(x,t):void 0})};eie.displayName="MiniMapNode";var KUe=D.memo(eie);const WUe=t=>t.nodeOrigin,YUe=t=>t.getNodes().filter(e=>!e.hidden&&e.width&&e.height),c1=t=>t instanceof Function?t:()=>t;function JUe({nodeStrokeColor:t="transparent",nodeColor:e="#e2e2e2",nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i=2,nodeComponent:o=KUe,onClick:s}){const a=Mt(YUe,gr),u=Mt(WUe),c=c1(e),d=c1(t),h=c1(n),g=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return ge.createElement(ge.Fragment,null,a.map(_=>{const{x:S,y:b}=Oc(_,u).positionAbsolute;return ge.createElement(o,{key:_.id,x:S,y:b,width:_.width,height:_.height,style:_.style,selected:_.selected,className:h(_),color:c(_),borderRadius:r,strokeColor:d(_),strokeWidth:i,shapeRendering:g,onClick:s,id:_.id})}))}var XUe=D.memo(JUe);const QUe=200,ZUe=150,eqe=t=>{const e=t.getNodes(),n={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:n,boundingRect:e.length>0?aVe(CT(e,t.nodeOrigin),n):n,rfId:t.rfId}},tqe="react-flow__minimap-desc";function tie({style:t,className:e,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:i="",nodeBorderRadius:o=5,nodeStrokeWidth:s=2,nodeComponent:a,maskColor:u="rgb(240, 240, 240, 0.6)",maskStrokeColor:c="none",maskStrokeWidth:d=1,position:h="bottom-right",onClick:g,onNodeClick:_,pannable:S=!1,zoomable:b=!1,ariaLabel:T="React Flow mini map",inversePan:x=!1,zoomStep:C=10,offsetScale:I=5}){const N=nr(),V=D.useRef(null),{boundingRect:q,viewBB:P,rfId:O}=Mt(eqe,gr),R=(t==null?void 0:t.width)??QUe,U=(t==null?void 0:t.height)??ZUe,L=q.width/R,F=q.height/U,$=Math.max(L,F),H=$*R,Y=$*U,K=I*$,Q=q.x-(H-q.width)/2-K,re=q.y-(Y-q.height)/2-K,X=H+K*2,G=Y+K*2,te=`${tqe}-${O}`,ee=D.useRef(0);ee.current=$,D.useEffect(()=>{if(V.current){const ne=mo(V.current),oe=ye=>{const{transform:Ce,d3Selection:ke,d3Zoom:_e}=N.getState();if(ye.sourceEvent.type!=="wheel"||!ke||!_e)return;const Ze=-ye.sourceEvent.deltaY*(ye.sourceEvent.deltaMode===1?.05:ye.sourceEvent.deltaMode?1:.002)*C,Ue=Ce[2]*Math.pow(2,Ze);_e.scaleTo(ke,Ue)},we=ye=>{const{transform:Ce,d3Selection:ke,d3Zoom:_e,translateExtent:Ze,width:Ue,height:Le}=N.getState();if(ye.sourceEvent.type!=="mousemove"||!ke||!_e)return;const st=ee.current*Math.max(1,Ce[2])*(x?-1:1),Pe={x:Ce[0]-ye.sourceEvent.movementX*st,y:Ce[1]-ye.sourceEvent.movementY*st},qe=[[0,0],[Ue,Le]],Rt=Ma.translate(Pe.x,Pe.y).scale(Ce[2]),In=_e.constrain()(Rt,qe,Ze);_e.transform(ke,In)},Ie=are().on("zoom",S?we:null).on("zoom.wheel",b?oe:null);return ne.call(Ie),()=>{ne.on("zoom",null)}}},[S,b,x,C]);const ae=g?ne=>{const oe=Fo(ne);g(ne,{x:oe[0],y:oe[1]})}:void 0,J=_?(ne,oe)=>{const we=N.getState().nodeInternals.get(oe);_(ne,we)}:void 0;return ge.createElement(vL,{position:h,style:t,className:Dr(["react-flow__minimap",e]),"data-testid":"rf__minimap"},ge.createElement("svg",{width:R,height:U,viewBox:`${Q} ${re} ${X} ${G}`,role:"img","aria-labelledby":te,ref:V,onClick:ae},T&&ge.createElement("title",{id:te},T),ge.createElement(XUe,{onClick:J,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:o,nodeClassName:i,nodeStrokeWidth:s,nodeComponent:a}),ge.createElement("path",{className:"react-flow__minimap-mask",d:`M${Q-K},${re-K}h${X+K*2}v${G+K*2}h${-X-K*2}z
        M${P.x},${P.y}h${P.width}v${P.height}h${-P.width}z`,fill:u,fillRule:"evenodd",stroke:c,strokeWidth:d,pointerEvents:"none"})))}tie.displayName="MiniMap";var nqe=D.memo(tie);function rqe(){return ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},ge.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function iqe(){return ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},ge.createElement("path",{d:"M0 0h32v4.2H0z"}))}function oqe(){return ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},ge.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function sqe(){return ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ge.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function aqe(){return ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ge.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Zm=({children:t,className:e,...n})=>ge.createElement("button",{type:"button",className:Dr(["react-flow__controls-button",e]),...n},t);Zm.displayName="ControlButton";const lqe=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),nie=({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:o,onZoomOut:s,onFitView:a,onInteractiveChange:u,className:c,children:d,position:h="bottom-left"})=>{const g=nr(),[_,S]=D.useState(!1),{isInteractive:b,minZoomReached:T,maxZoomReached:x}=Mt(lqe,gr),{zoomIn:C,zoomOut:I,fitView:N}=IT();if(D.useEffect(()=>{S(!0)},[]),!_)return null;const V=()=>{C(),o==null||o()},q=()=>{I(),s==null||s()},P=()=>{N(i),a==null||a()},O=()=>{g.setState({nodesDraggable:!b,nodesConnectable:!b,elementsSelectable:!b}),u==null||u(!b)};return ge.createElement(vL,{className:Dr(["react-flow__controls",c]),position:h,style:t,"data-testid":"rf__controls"},e&&ge.createElement(ge.Fragment,null,ge.createElement(Zm,{onClick:V,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:x},ge.createElement(rqe,null)),ge.createElement(Zm,{onClick:q,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:T},ge.createElement(iqe,null))),n&&ge.createElement(Zm,{className:"react-flow__controls-fitview",onClick:P,title:"fit view","aria-label":"fit view"},ge.createElement(oqe,null)),r&&ge.createElement(Zm,{className:"react-flow__controls-interactive",onClick:O,title:"toggle interactivity","aria-label":"toggle interactivity"},b?ge.createElement(aqe,null):ge.createElement(sqe,null)),d)};nie.displayName="Controls";var uqe=D.memo(nie),Yo;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(Yo||(Yo={}));function cqe({color:t,dimensions:e,lineWidth:n}){return ge.createElement("path",{stroke:t,strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function fqe({color:t,radius:e}){return ge.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const dqe={[Yo.Dots]:"#91919a",[Yo.Lines]:"#eee",[Yo.Cross]:"#e2e2e2"},hqe={[Yo.Dots]:1,[Yo.Lines]:1,[Yo.Cross]:6},pqe=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function rie({id:t,variant:e=Yo.Dots,gap:n=20,size:r,lineWidth:i=1,offset:o=2,color:s,style:a,className:u}){const c=D.useRef(null),{transform:d,patternId:h}=Mt(pqe,gr),g=s||dqe[e],_=r||hqe[e],S=e===Yo.Dots,b=e===Yo.Cross,T=Array.isArray(n)?n:[n,n],x=[T[0]*d[2]||1,T[1]*d[2]||1],C=_*d[2],I=b?[C,C]:x,N=S?[C/o,C/o]:[I[0]/o,I[1]/o];return ge.createElement("svg",{className:Dr(["react-flow__background",u]),style:{...a,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:c,"data-testid":"rf__background"},ge.createElement("pattern",{id:h+t,x:d[0]%x[0],y:d[1]%x[1],width:x[0],height:x[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${N[0]},-${N[1]})`},S?ge.createElement(fqe,{color:g,radius:C/o}):ge.createElement(cqe,{dimensions:I,color:g,lineWidth:i})),ge.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${h+t})`}))}rie.displayName="Background";var mqe=D.memo(rie);function RL(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var f1,hz;function gqe(){if(hz)return f1;hz=1;function t(){this.__data__=[],this.size=0}return f1=t,f1}var d1,pz;function op(){if(pz)return d1;pz=1;function t(e,n){return e===n||e!==e&&n!==n}return d1=t,d1}var h1,mz;function RT(){if(mz)return h1;mz=1;var t=op();function e(n,r){for(var i=n.length;i--;)if(t(n[i][0],r))return i;return-1}return h1=e,h1}var p1,gz;function yqe(){if(gz)return p1;gz=1;var t=RT(),e=Array.prototype,n=e.splice;function r(i){var o=this.__data__,s=t(o,i);if(s<0)return!1;var a=o.length-1;return s==a?o.pop():n.call(o,s,1),--this.size,!0}return p1=r,p1}var m1,yz;function vqe(){if(yz)return m1;yz=1;var t=RT();function e(n){var r=this.__data__,i=t(r,n);return i<0?void 0:r[i][1]}return m1=e,m1}var g1,vz;function _qe(){if(vz)return g1;vz=1;var t=RT();function e(n){return t(this.__data__,n)>-1}return g1=e,g1}var y1,_z;function wqe(){if(_z)return y1;_z=1;var t=RT();function e(n,r){var i=this.__data__,o=t(i,n);return o<0?(++this.size,i.push([n,r])):i[o][1]=r,this}return y1=e,y1}var v1,wz;function PT(){if(wz)return v1;wz=1;var t=gqe(),e=yqe(),n=vqe(),r=_qe(),i=wqe();function o(s){var a=-1,u=s==null?0:s.length;for(this.clear();++a<u;){var c=s[a];this.set(c[0],c[1])}}return o.prototype.clear=t,o.prototype.delete=e,o.prototype.get=n,o.prototype.has=r,o.prototype.set=i,v1=o,v1}var _1,bz;function bqe(){if(bz)return _1;bz=1;var t=PT();function e(){this.__data__=new t,this.size=0}return _1=e,_1}var w1,Tz;function Tqe(){if(Tz)return w1;Tz=1;function t(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r}return w1=t,w1}var b1,Ez;function Eqe(){if(Ez)return b1;Ez=1;function t(e){return this.__data__.get(e)}return b1=t,b1}var T1,Sz;function Sqe(){if(Sz)return T1;Sz=1;function t(e){return this.__data__.has(e)}return T1=t,T1}var E1,xz;function iie(){if(xz)return E1;xz=1;var t=typeof y_=="object"&&y_&&y_.Object===Object&&y_;return E1=t,E1}var S1,Az;function is(){if(Az)return S1;Az=1;var t=iie(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return S1=n,S1}var x1,Cz;function sp(){if(Cz)return x1;Cz=1;var t=is(),e=t.Symbol;return x1=e,x1}var A1,Iz;function xqe(){if(Iz)return A1;Iz=1;var t=sp(),e=Object.prototype,n=e.hasOwnProperty,r=e.toString,i=t?t.toStringTag:void 0;function o(s){var a=n.call(s,i),u=s[i];try{s[i]=void 0;var c=!0}catch{}var d=r.call(s);return c&&(a?s[i]=u:delete s[i]),d}return A1=o,A1}var C1,Rz;function Aqe(){if(Rz)return C1;Rz=1;var t=Object.prototype,e=t.toString;function n(r){return e.call(r)}return C1=n,C1}var I1,Pz;function pf(){if(Pz)return I1;Pz=1;var t=sp(),e=xqe(),n=Aqe(),r="[object Null]",i="[object Undefined]",o=t?t.toStringTag:void 0;function s(a){return a==null?a===void 0?i:r:o&&o in Object(a)?e(a):n(a)}return I1=s,I1}var R1,Nz;function Ro(){if(Nz)return R1;Nz=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return R1=t,R1}var P1,Mz;function Jy(){if(Mz)return P1;Mz=1;var t=pf(),e=Ro(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",o="[object Proxy]";function s(a){if(!e(a))return!1;var u=t(a);return u==r||u==i||u==n||u==o}return P1=s,P1}var N1,Dz;function Cqe(){if(Dz)return N1;Dz=1;var t=is(),e=t["__core-js_shared__"];return N1=e,N1}var M1,kz;function Iqe(){if(kz)return M1;kz=1;var t=Cqe(),e=(function(){var r=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function n(r){return!!e&&e in r}return M1=n,M1}var D1,Oz;function oie(){if(Oz)return D1;Oz=1;var t=Function.prototype,e=t.toString;function n(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return D1=n,D1}var k1,Lz;function Rqe(){if(Lz)return k1;Lz=1;var t=Jy(),e=Iqe(),n=Ro(),r=oie(),i=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,s=Function.prototype,a=Object.prototype,u=s.toString,c=a.hasOwnProperty,d=RegExp("^"+u.call(c).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(g){if(!n(g)||e(g))return!1;var _=t(g)?d:o;return _.test(r(g))}return k1=h,k1}var O1,Vz;function Pqe(){if(Vz)return O1;Vz=1;function t(e,n){return e==null?void 0:e[n]}return O1=t,O1}var L1,Uz;function mf(){if(Uz)return L1;Uz=1;var t=Rqe(),e=Pqe();function n(r,i){var o=e(r,i);return t(o)?o:void 0}return L1=n,L1}var V1,qz;function PL(){if(qz)return V1;qz=1;var t=mf(),e=is(),n=t(e,"Map");return V1=n,V1}var U1,Fz;function NT(){if(Fz)return U1;Fz=1;var t=mf(),e=t(Object,"create");return U1=e,U1}var q1,Bz;function Nqe(){if(Bz)return q1;Bz=1;var t=NT();function e(){this.__data__=t?t(null):{},this.size=0}return q1=e,q1}var F1,$z;function Mqe(){if($z)return F1;$z=1;function t(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return F1=t,F1}var B1,zz;function Dqe(){if(zz)return B1;zz=1;var t=NT(),e="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(o){var s=this.__data__;if(t){var a=s[o];return a===e?void 0:a}return r.call(s,o)?s[o]:void 0}return B1=i,B1}var $1,Hz;function kqe(){if(Hz)return $1;Hz=1;var t=NT(),e=Object.prototype,n=e.hasOwnProperty;function r(i){var o=this.__data__;return t?o[i]!==void 0:n.call(o,i)}return $1=r,$1}var z1,Gz;function Oqe(){if(Gz)return z1;Gz=1;var t=NT(),e="__lodash_hash_undefined__";function n(r,i){var o=this.__data__;return this.size+=this.has(r)?0:1,o[r]=t&&i===void 0?e:i,this}return z1=n,z1}var H1,jz;function Lqe(){if(jz)return H1;jz=1;var t=Nqe(),e=Mqe(),n=Dqe(),r=kqe(),i=Oqe();function o(s){var a=-1,u=s==null?0:s.length;for(this.clear();++a<u;){var c=s[a];this.set(c[0],c[1])}}return o.prototype.clear=t,o.prototype.delete=e,o.prototype.get=n,o.prototype.has=r,o.prototype.set=i,H1=o,H1}var G1,Kz;function Vqe(){if(Kz)return G1;Kz=1;var t=Lqe(),e=PT(),n=PL();function r(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}return G1=r,G1}var j1,Wz;function Uqe(){if(Wz)return j1;Wz=1;function t(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return j1=t,j1}var K1,Yz;function MT(){if(Yz)return K1;Yz=1;var t=Uqe();function e(n,r){var i=n.__data__;return t(r)?i[typeof r=="string"?"string":"hash"]:i.map}return K1=e,K1}var W1,Jz;function qqe(){if(Jz)return W1;Jz=1;var t=MT();function e(n){var r=t(this,n).delete(n);return this.size-=r?1:0,r}return W1=e,W1}var Y1,Xz;function Fqe(){if(Xz)return Y1;Xz=1;var t=MT();function e(n){return t(this,n).get(n)}return Y1=e,Y1}var J1,Qz;function Bqe(){if(Qz)return J1;Qz=1;var t=MT();function e(n){return t(this,n).has(n)}return J1=e,J1}var X1,Zz;function $qe(){if(Zz)return X1;Zz=1;var t=MT();function e(n,r){var i=t(this,n),o=i.size;return i.set(n,r),this.size+=i.size==o?0:1,this}return X1=e,X1}var Q1,eH;function NL(){if(eH)return Q1;eH=1;var t=Vqe(),e=qqe(),n=Fqe(),r=Bqe(),i=$qe();function o(s){var a=-1,u=s==null?0:s.length;for(this.clear();++a<u;){var c=s[a];this.set(c[0],c[1])}}return o.prototype.clear=t,o.prototype.delete=e,o.prototype.get=n,o.prototype.has=r,o.prototype.set=i,Q1=o,Q1}var Z1,tH;function zqe(){if(tH)return Z1;tH=1;var t=PT(),e=PL(),n=NL(),r=200;function i(o,s){var a=this.__data__;if(a instanceof t){var u=a.__data__;if(!e||u.length<r-1)return u.push([o,s]),this.size=++a.size,this;a=this.__data__=new n(u)}return a.set(o,s),this.size=a.size,this}return Z1=i,Z1}var eC,nH;function DT(){if(nH)return eC;nH=1;var t=PT(),e=bqe(),n=Tqe(),r=Eqe(),i=Sqe(),o=zqe();function s(a){var u=this.__data__=new t(a);this.size=u.size}return s.prototype.clear=e,s.prototype.delete=n,s.prototype.get=r,s.prototype.has=i,s.prototype.set=o,eC=s,eC}var tC,rH;function ML(){if(rH)return tC;rH=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i&&n(e[r],r,e)!==!1;);return e}return tC=t,tC}var nC,iH;function sie(){if(iH)return nC;iH=1;var t=mf(),e=(function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}})();return nC=e,nC}var rC,oH;function kT(){if(oH)return rC;oH=1;var t=sie();function e(n,r,i){r=="__proto__"&&t?t(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return rC=e,rC}var iC,sH;function OT(){if(sH)return iC;sH=1;var t=kT(),e=op(),n=Object.prototype,r=n.hasOwnProperty;function i(o,s,a){var u=o[s];(!(r.call(o,s)&&e(u,a))||a===void 0&&!(s in o))&&t(o,s,a)}return iC=i,iC}var oC,aH;function Xy(){if(aH)return oC;aH=1;var t=OT(),e=kT();function n(r,i,o,s){var a=!o;o||(o={});for(var u=-1,c=i.length;++u<c;){var d=i[u],h=s?s(o[d],r[d],d,o,r):void 0;h===void 0&&(h=r[d]),a?e(o,d,h):t(o,d,h)}return o}return oC=n,oC}var sC,lH;function Hqe(){if(lH)return sC;lH=1;function t(e,n){for(var r=-1,i=Array(e);++r<e;)i[r]=n(r);return i}return sC=t,sC}var aC,uH;function Ys(){if(uH)return aC;uH=1;function t(e){return e!=null&&typeof e=="object"}return aC=t,aC}var lC,cH;function Gqe(){if(cH)return lC;cH=1;var t=pf(),e=Ys(),n="[object Arguments]";function r(i){return e(i)&&t(i)==n}return lC=r,lC}var uC,fH;function Qy(){if(fH)return uC;fH=1;var t=Gqe(),e=Ys(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,o=t((function(){return arguments})())?t:function(s){return e(s)&&r.call(s,"callee")&&!i.call(s,"callee")};return uC=o,uC}var cC,dH;function Hn(){if(dH)return cC;dH=1;var t=Array.isArray;return cC=t,cC}var eg={exports:{}},fC,hH;function jqe(){if(hH)return fC;hH=1;function t(){return!1}return fC=t,fC}eg.exports;var pH;function ap(){return pH||(pH=1,(function(t,e){var n=is(),r=jqe(),i=e&&!e.nodeType&&e,o=i&&!0&&t&&!t.nodeType&&t,s=o&&o.exports===i,a=s?n.Buffer:void 0,u=a?a.isBuffer:void 0,c=u||r;t.exports=c})(eg,eg.exports)),eg.exports}var dC,mH;function LT(){if(mH)return dC;mH=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(r,i){var o=typeof r;return i=i??t,!!i&&(o=="number"||o!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return dC=n,dC}var hC,gH;function DL(){if(gH)return hC;gH=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return hC=e,hC}var pC,yH;function Kqe(){if(yH)return pC;yH=1;var t=pf(),e=DL(),n=Ys(),r="[object Arguments]",i="[object Array]",o="[object Boolean]",s="[object Date]",a="[object Error]",u="[object Function]",c="[object Map]",d="[object Number]",h="[object Object]",g="[object RegExp]",_="[object Set]",S="[object String]",b="[object WeakMap]",T="[object ArrayBuffer]",x="[object DataView]",C="[object Float32Array]",I="[object Float64Array]",N="[object Int8Array]",V="[object Int16Array]",q="[object Int32Array]",P="[object Uint8Array]",O="[object Uint8ClampedArray]",R="[object Uint16Array]",U="[object Uint32Array]",L={};L[C]=L[I]=L[N]=L[V]=L[q]=L[P]=L[O]=L[R]=L[U]=!0,L[r]=L[i]=L[T]=L[o]=L[x]=L[s]=L[a]=L[u]=L[c]=L[d]=L[h]=L[g]=L[_]=L[S]=L[b]=!1;function F($){return n($)&&e($.length)&&!!L[t($)]}return pC=F,pC}var mC,vH;function VT(){if(vH)return mC;vH=1;function t(e){return function(n){return e(n)}}return mC=t,mC}var tg={exports:{}};tg.exports;var _H;function kL(){return _H||(_H=1,(function(t,e){var n=iie(),r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===r,s=o&&n.process,a=(function(){try{var u=i&&i.require&&i.require("util").types;return u||s&&s.binding&&s.binding("util")}catch{}})();t.exports=a})(tg,tg.exports)),tg.exports}var gC,wH;function Zy(){if(wH)return gC;wH=1;var t=Kqe(),e=VT(),n=kL(),r=n&&n.isTypedArray,i=r?e(r):t;return gC=i,gC}var yC,bH;function aie(){if(bH)return yC;bH=1;var t=Hqe(),e=Qy(),n=Hn(),r=ap(),i=LT(),o=Zy(),s=Object.prototype,a=s.hasOwnProperty;function u(c,d){var h=n(c),g=!h&&e(c),_=!h&&!g&&r(c),S=!h&&!g&&!_&&o(c),b=h||g||_||S,T=b?t(c.length,String):[],x=T.length;for(var C in c)(d||a.call(c,C))&&!(b&&(C=="length"||_&&(C=="offset"||C=="parent")||S&&(C=="buffer"||C=="byteLength"||C=="byteOffset")||i(C,x)))&&T.push(C);return T}return yC=u,yC}var vC,TH;function UT(){if(TH)return vC;TH=1;var t=Object.prototype;function e(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||t;return n===i}return vC=e,vC}var _C,EH;function lie(){if(EH)return _C;EH=1;function t(e,n){return function(r){return e(n(r))}}return _C=t,_C}var wC,SH;function Wqe(){if(SH)return wC;SH=1;var t=lie(),e=t(Object.keys,Object);return wC=e,wC}var bC,xH;function OL(){if(xH)return bC;xH=1;var t=UT(),e=Wqe(),n=Object.prototype,r=n.hasOwnProperty;function i(o){if(!t(o))return e(o);var s=[];for(var a in Object(o))r.call(o,a)&&a!="constructor"&&s.push(a);return s}return bC=i,bC}var TC,AH;function il(){if(AH)return TC;AH=1;var t=Jy(),e=DL();function n(r){return r!=null&&e(r.length)&&!t(r)}return TC=n,TC}var EC,CH;function Iu(){if(CH)return EC;CH=1;var t=aie(),e=OL(),n=il();function r(i){return n(i)?t(i):e(i)}return EC=r,EC}var SC,IH;function Yqe(){if(IH)return SC;IH=1;var t=Xy(),e=Iu();function n(r,i){return r&&t(i,e(i),r)}return SC=n,SC}var xC,RH;function Jqe(){if(RH)return xC;RH=1;function t(e){var n=[];if(e!=null)for(var r in Object(e))n.push(r);return n}return xC=t,xC}var AC,PH;function Xqe(){if(PH)return AC;PH=1;var t=Ro(),e=UT(),n=Jqe(),r=Object.prototype,i=r.hasOwnProperty;function o(s){if(!t(s))return n(s);var a=e(s),u=[];for(var c in s)c=="constructor"&&(a||!i.call(s,c))||u.push(c);return u}return AC=o,AC}var CC,NH;function gf(){if(NH)return CC;NH=1;var t=aie(),e=Xqe(),n=il();function r(i){return n(i)?t(i,!0):e(i)}return CC=r,CC}var IC,MH;function Qqe(){if(MH)return IC;MH=1;var t=Xy(),e=gf();function n(r,i){return r&&t(i,e(i),r)}return IC=n,IC}var ng={exports:{}};ng.exports;var DH;function uie(){return DH||(DH=1,(function(t,e){var n=is(),r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===r,s=o?n.Buffer:void 0,a=s?s.allocUnsafe:void 0;function u(c,d){if(d)return c.slice();var h=c.length,g=a?a(h):new c.constructor(h);return c.copy(g),g}t.exports=u})(ng,ng.exports)),ng.exports}var RC,kH;function cie(){if(kH)return RC;kH=1;function t(e,n){var r=-1,i=e.length;for(n||(n=Array(i));++r<i;)n[r]=e[r];return n}return RC=t,RC}var PC,OH;function fie(){if(OH)return PC;OH=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,o=0,s=[];++r<i;){var a=e[r];n(a,r,e)&&(s[o++]=a)}return s}return PC=t,PC}var NC,LH;function die(){if(LH)return NC;LH=1;function t(){return[]}return NC=t,NC}var MC,VH;function LL(){if(VH)return MC;VH=1;var t=fie(),e=die(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,o=i?function(s){return s==null?[]:(s=Object(s),t(i(s),function(a){return r.call(s,a)}))}:e;return MC=o,MC}var DC,UH;function Zqe(){if(UH)return DC;UH=1;var t=Xy(),e=LL();function n(r,i){return t(r,e(r),i)}return DC=n,DC}var kC,qH;function VL(){if(qH)return kC;qH=1;function t(e,n){for(var r=-1,i=n.length,o=e.length;++r<i;)e[o+r]=n[r];return e}return kC=t,kC}var OC,FH;function qT(){if(FH)return OC;FH=1;var t=lie(),e=t(Object.getPrototypeOf,Object);return OC=e,OC}var LC,BH;function hie(){if(BH)return LC;BH=1;var t=VL(),e=qT(),n=LL(),r=die(),i=Object.getOwnPropertySymbols,o=i?function(s){for(var a=[];s;)t(a,n(s)),s=e(s);return a}:r;return LC=o,LC}var VC,$H;function e4e(){if($H)return VC;$H=1;var t=Xy(),e=hie();function n(r,i){return t(r,e(r),i)}return VC=n,VC}var UC,zH;function pie(){if(zH)return UC;zH=1;var t=VL(),e=Hn();function n(r,i,o){var s=i(r);return e(r)?s:t(s,o(r))}return UC=n,UC}var qC,HH;function mie(){if(HH)return qC;HH=1;var t=pie(),e=LL(),n=Iu();function r(i){return t(i,n,e)}return qC=r,qC}var FC,GH;function t4e(){if(GH)return FC;GH=1;var t=pie(),e=hie(),n=gf();function r(i){return t(i,n,e)}return FC=r,FC}var BC,jH;function n4e(){if(jH)return BC;jH=1;var t=mf(),e=is(),n=t(e,"DataView");return BC=n,BC}var $C,KH;function r4e(){if(KH)return $C;KH=1;var t=mf(),e=is(),n=t(e,"Promise");return $C=n,$C}var zC,WH;function gie(){if(WH)return zC;WH=1;var t=mf(),e=is(),n=t(e,"Set");return zC=n,zC}var HC,YH;function i4e(){if(YH)return HC;YH=1;var t=mf(),e=is(),n=t(e,"WeakMap");return HC=n,HC}var GC,JH;function lp(){if(JH)return GC;JH=1;var t=n4e(),e=PL(),n=r4e(),r=gie(),i=i4e(),o=pf(),s=oie(),a="[object Map]",u="[object Object]",c="[object Promise]",d="[object Set]",h="[object WeakMap]",g="[object DataView]",_=s(t),S=s(e),b=s(n),T=s(r),x=s(i),C=o;return(t&&C(new t(new ArrayBuffer(1)))!=g||e&&C(new e)!=a||n&&C(n.resolve())!=c||r&&C(new r)!=d||i&&C(new i)!=h)&&(C=function(I){var N=o(I),V=N==u?I.constructor:void 0,q=V?s(V):"";if(q)switch(q){case _:return g;case S:return a;case b:return c;case T:return d;case x:return h}return N}),GC=C,GC}var jC,XH;function o4e(){if(XH)return jC;XH=1;var t=Object.prototype,e=t.hasOwnProperty;function n(r){var i=r.length,o=new r.constructor(i);return i&&typeof r[0]=="string"&&e.call(r,"index")&&(o.index=r.index,o.input=r.input),o}return jC=n,jC}var KC,QH;function yie(){if(QH)return KC;QH=1;var t=is(),e=t.Uint8Array;return KC=e,KC}var WC,ZH;function UL(){if(ZH)return WC;ZH=1;var t=yie();function e(n){var r=new n.constructor(n.byteLength);return new t(r).set(new t(n)),r}return WC=e,WC}var YC,eG;function s4e(){if(eG)return YC;eG=1;var t=UL();function e(n,r){var i=r?t(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return YC=e,YC}var JC,tG;function a4e(){if(tG)return JC;tG=1;var t=/\w*$/;function e(n){var r=new n.constructor(n.source,t.exec(n));return r.lastIndex=n.lastIndex,r}return JC=e,JC}var XC,nG;function l4e(){if(nG)return XC;nG=1;var t=sp(),e=t?t.prototype:void 0,n=e?e.valueOf:void 0;function r(i){return n?Object(n.call(i)):{}}return XC=r,XC}var QC,rG;function vie(){if(rG)return QC;rG=1;var t=UL();function e(n,r){var i=r?t(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)}return QC=e,QC}var ZC,iG;function u4e(){if(iG)return ZC;iG=1;var t=UL(),e=s4e(),n=a4e(),r=l4e(),i=vie(),o="[object Boolean]",s="[object Date]",a="[object Map]",u="[object Number]",c="[object RegExp]",d="[object Set]",h="[object String]",g="[object Symbol]",_="[object ArrayBuffer]",S="[object DataView]",b="[object Float32Array]",T="[object Float64Array]",x="[object Int8Array]",C="[object Int16Array]",I="[object Int32Array]",N="[object Uint8Array]",V="[object Uint8ClampedArray]",q="[object Uint16Array]",P="[object Uint32Array]";function O(R,U,L){var F=R.constructor;switch(U){case _:return t(R);case o:case s:return new F(+R);case S:return e(R,L);case b:case T:case x:case C:case I:case N:case V:case q:case P:return i(R,L);case a:return new F;case u:case h:return new F(R);case c:return n(R);case d:return new F;case g:return r(R)}}return ZC=O,ZC}var eI,oG;function _ie(){if(oG)return eI;oG=1;var t=Ro(),e=Object.create,n=(function(){function r(){}return function(i){if(!t(i))return{};if(e)return e(i);r.prototype=i;var o=new r;return r.prototype=void 0,o}})();return eI=n,eI}var tI,sG;function wie(){if(sG)return tI;sG=1;var t=_ie(),e=qT(),n=UT();function r(i){return typeof i.constructor=="function"&&!n(i)?t(e(i)):{}}return tI=r,tI}var nI,aG;function c4e(){if(aG)return nI;aG=1;var t=lp(),e=Ys(),n="[object Map]";function r(i){return e(i)&&t(i)==n}return nI=r,nI}var rI,lG;function f4e(){if(lG)return rI;lG=1;var t=c4e(),e=VT(),n=kL(),r=n&&n.isMap,i=r?e(r):t;return rI=i,rI}var iI,uG;function d4e(){if(uG)return iI;uG=1;var t=lp(),e=Ys(),n="[object Set]";function r(i){return e(i)&&t(i)==n}return iI=r,iI}var oI,cG;function h4e(){if(cG)return oI;cG=1;var t=d4e(),e=VT(),n=kL(),r=n&&n.isSet,i=r?e(r):t;return oI=i,oI}var sI,fG;function bie(){if(fG)return sI;fG=1;var t=DT(),e=ML(),n=OT(),r=Yqe(),i=Qqe(),o=uie(),s=cie(),a=Zqe(),u=e4e(),c=mie(),d=t4e(),h=lp(),g=o4e(),_=u4e(),S=wie(),b=Hn(),T=ap(),x=f4e(),C=Ro(),I=h4e(),N=Iu(),V=gf(),q=1,P=2,O=4,R="[object Arguments]",U="[object Array]",L="[object Boolean]",F="[object Date]",$="[object Error]",H="[object Function]",Y="[object GeneratorFunction]",K="[object Map]",Q="[object Number]",re="[object Object]",X="[object RegExp]",G="[object Set]",te="[object String]",ee="[object Symbol]",ae="[object WeakMap]",J="[object ArrayBuffer]",ne="[object DataView]",oe="[object Float32Array]",we="[object Float64Array]",Ie="[object Int8Array]",ye="[object Int16Array]",Ce="[object Int32Array]",ke="[object Uint8Array]",_e="[object Uint8ClampedArray]",Ze="[object Uint16Array]",Ue="[object Uint32Array]",Le={};Le[R]=Le[U]=Le[J]=Le[ne]=Le[L]=Le[F]=Le[oe]=Le[we]=Le[Ie]=Le[ye]=Le[Ce]=Le[K]=Le[Q]=Le[re]=Le[X]=Le[G]=Le[te]=Le[ee]=Le[ke]=Le[_e]=Le[Ze]=Le[Ue]=!0,Le[$]=Le[H]=Le[ae]=!1;function st(Pe,qe,Rt,In,Rn,xe){var Me,$e=qe&q,ze=qe&P,He=qe&O;if(Rt&&(Me=Rn?Rt(Pe,In,Rn,xe):Rt(Pe)),Me!==void 0)return Me;if(!C(Pe))return Pe;var We=b(Pe);if(We){if(Me=g(Pe),!$e)return s(Pe,Me)}else{var vt=h(Pe),yt=vt==H||vt==Y;if(T(Pe))return o(Pe,$e);if(vt==re||vt==R||yt&&!Rn){if(Me=ze||yt?{}:S(Pe),!$e)return ze?u(Pe,i(Me,Pe)):a(Pe,r(Me,Pe))}else{if(!Le[vt])return Rn?Pe:{};Me=_(Pe,vt,$e)}}xe||(xe=new t);var Dt=xe.get(Pe);if(Dt)return Dt;xe.set(Pe,Me),I(Pe)?Pe.forEach(function(on){Me.add(st(on,qe,Rt,on,Pe,xe))}):x(Pe)&&Pe.forEach(function(on,hn){Me.set(hn,st(on,qe,Rt,hn,Pe,xe))});var Ct=He?ze?d:c:ze?V:N,_n=We?void 0:Ct(Pe);return e(_n||Pe,function(on,hn){_n&&(hn=on,on=Pe[hn]),n(Me,hn,st(on,qe,Rt,hn,Pe,xe))}),Me}return sI=st,sI}var aI,dG;function p4e(){if(dG)return aI;dG=1;var t=bie(),e=4;function n(r){return t(r,e)}return aI=n,aI}var lI,hG;function qL(){if(hG)return lI;hG=1;function t(e){return function(){return e}}return lI=t,lI}var uI,pG;function m4e(){if(pG)return uI;pG=1;function t(e){return function(n,r,i){for(var o=-1,s=Object(n),a=i(n),u=a.length;u--;){var c=a[e?u:++o];if(r(s[c],c,s)===!1)break}return n}}return uI=t,uI}var cI,mG;function FL(){if(mG)return cI;mG=1;var t=m4e(),e=t();return cI=e,cI}var fI,gG;function BL(){if(gG)return fI;gG=1;var t=FL(),e=Iu();function n(r,i){return r&&t(r,i,e)}return fI=n,fI}var dI,yG;function g4e(){if(yG)return dI;yG=1;var t=il();function e(n,r){return function(i,o){if(i==null)return i;if(!t(i))return n(i,o);for(var s=i.length,a=r?s:-1,u=Object(i);(r?a--:++a<s)&&o(u[a],a,u)!==!1;);return i}}return dI=e,dI}var hI,vG;function FT(){if(vG)return hI;vG=1;var t=BL(),e=g4e(),n=e(t);return hI=n,hI}var pI,_G;function yf(){if(_G)return pI;_G=1;function t(e){return e}return pI=t,pI}var mI,wG;function Tie(){if(wG)return mI;wG=1;var t=yf();function e(n){return typeof n=="function"?n:t}return mI=e,mI}var gI,bG;function Eie(){if(bG)return gI;bG=1;var t=ML(),e=FT(),n=Tie(),r=Hn();function i(o,s){var a=r(o)?t:e;return a(o,n(s))}return gI=i,gI}var yI,TG;function Sie(){return TG||(TG=1,yI=Eie()),yI}var vI,EG;function y4e(){if(EG)return vI;EG=1;var t=FT();function e(n,r){var i=[];return t(n,function(o,s,a){r(o,s,a)&&i.push(o)}),i}return vI=e,vI}var _I,SG;function v4e(){if(SG)return _I;SG=1;var t="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,t),this}return _I=e,_I}var wI,xG;function _4e(){if(xG)return wI;xG=1;function t(e){return this.__data__.has(e)}return wI=t,wI}var bI,AG;function xie(){if(AG)return bI;AG=1;var t=NL(),e=v4e(),n=_4e();function r(i){var o=-1,s=i==null?0:i.length;for(this.__data__=new t;++o<s;)this.add(i[o])}return r.prototype.add=r.prototype.push=e,r.prototype.has=n,bI=r,bI}var TI,CG;function w4e(){if(CG)return TI;CG=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(e[r],r,e))return!0;return!1}return TI=t,TI}var EI,IG;function Aie(){if(IG)return EI;IG=1;function t(e,n){return e.has(n)}return EI=t,EI}var SI,RG;function Cie(){if(RG)return SI;RG=1;var t=xie(),e=w4e(),n=Aie(),r=1,i=2;function o(s,a,u,c,d,h){var g=u&r,_=s.length,S=a.length;if(_!=S&&!(g&&S>_))return!1;var b=h.get(s),T=h.get(a);if(b&&T)return b==a&&T==s;var x=-1,C=!0,I=u&i?new t:void 0;for(h.set(s,a),h.set(a,s);++x<_;){var N=s[x],V=a[x];if(c)var q=g?c(V,N,x,a,s,h):c(N,V,x,s,a,h);if(q!==void 0){if(q)continue;C=!1;break}if(I){if(!e(a,function(P,O){if(!n(I,O)&&(N===P||d(N,P,u,c,h)))return I.push(O)})){C=!1;break}}else if(!(N===V||d(N,V,u,c,h))){C=!1;break}}return h.delete(s),h.delete(a),C}return SI=o,SI}var xI,PG;function b4e(){if(PG)return xI;PG=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i,o){r[++n]=[o,i]}),r}return xI=t,xI}var AI,NG;function $L(){if(NG)return AI;NG=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i){r[++n]=i}),r}return AI=t,AI}var CI,MG;function T4e(){if(MG)return CI;MG=1;var t=sp(),e=yie(),n=op(),r=Cie(),i=b4e(),o=$L(),s=1,a=2,u="[object Boolean]",c="[object Date]",d="[object Error]",h="[object Map]",g="[object Number]",_="[object RegExp]",S="[object Set]",b="[object String]",T="[object Symbol]",x="[object ArrayBuffer]",C="[object DataView]",I=t?t.prototype:void 0,N=I?I.valueOf:void 0;function V(q,P,O,R,U,L,F){switch(O){case C:if(q.byteLength!=P.byteLength||q.byteOffset!=P.byteOffset)return!1;q=q.buffer,P=P.buffer;case x:return!(q.byteLength!=P.byteLength||!L(new e(q),new e(P)));case u:case c:case g:return n(+q,+P);case d:return q.name==P.name&&q.message==P.message;case _:case b:return q==P+"";case h:var $=i;case S:var H=R&s;if($||($=o),q.size!=P.size&&!H)return!1;var Y=F.get(q);if(Y)return Y==P;R|=a,F.set(q,P);var K=r($(q),$(P),R,U,L,F);return F.delete(q),K;case T:if(N)return N.call(q)==N.call(P)}return!1}return CI=V,CI}var II,DG;function E4e(){if(DG)return II;DG=1;var t=mie(),e=1,n=Object.prototype,r=n.hasOwnProperty;function i(o,s,a,u,c,d){var h=a&e,g=t(o),_=g.length,S=t(s),b=S.length;if(_!=b&&!h)return!1;for(var T=_;T--;){var x=g[T];if(!(h?x in s:r.call(s,x)))return!1}var C=d.get(o),I=d.get(s);if(C&&I)return C==s&&I==o;var N=!0;d.set(o,s),d.set(s,o);for(var V=h;++T<_;){x=g[T];var q=o[x],P=s[x];if(u)var O=h?u(P,q,x,s,o,d):u(q,P,x,o,s,d);if(!(O===void 0?q===P||c(q,P,a,u,d):O)){N=!1;break}V||(V=x=="constructor")}if(N&&!V){var R=o.constructor,U=s.constructor;R!=U&&"constructor"in o&&"constructor"in s&&!(typeof R=="function"&&R instanceof R&&typeof U=="function"&&U instanceof U)&&(N=!1)}return d.delete(o),d.delete(s),N}return II=i,II}var RI,kG;function S4e(){if(kG)return RI;kG=1;var t=DT(),e=Cie(),n=T4e(),r=E4e(),i=lp(),o=Hn(),s=ap(),a=Zy(),u=1,c="[object Arguments]",d="[object Array]",h="[object Object]",g=Object.prototype,_=g.hasOwnProperty;function S(b,T,x,C,I,N){var V=o(b),q=o(T),P=V?d:i(b),O=q?d:i(T);P=P==c?h:P,O=O==c?h:O;var R=P==h,U=O==h,L=P==O;if(L&&s(b)){if(!s(T))return!1;V=!0,R=!1}if(L&&!R)return N||(N=new t),V||a(b)?e(b,T,x,C,I,N):n(b,T,P,x,C,I,N);if(!(x&u)){var F=R&&_.call(b,"__wrapped__"),$=U&&_.call(T,"__wrapped__");if(F||$){var H=F?b.value():b,Y=$?T.value():T;return N||(N=new t),I(H,Y,x,C,N)}}return L?(N||(N=new t),r(b,T,x,C,I,N)):!1}return RI=S,RI}var PI,OG;function Iie(){if(OG)return PI;OG=1;var t=S4e(),e=Ys();function n(r,i,o,s,a){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:t(r,i,o,s,n,a)}return PI=n,PI}var NI,LG;function x4e(){if(LG)return NI;LG=1;var t=DT(),e=Iie(),n=1,r=2;function i(o,s,a,u){var c=a.length,d=c,h=!u;if(o==null)return!d;for(o=Object(o);c--;){var g=a[c];if(h&&g[2]?g[1]!==o[g[0]]:!(g[0]in o))return!1}for(;++c<d;){g=a[c];var _=g[0],S=o[_],b=g[1];if(h&&g[2]){if(S===void 0&&!(_ in o))return!1}else{var T=new t;if(u)var x=u(S,b,_,o,s,T);if(!(x===void 0?e(b,S,n|r,u,T):x))return!1}}return!0}return NI=i,NI}var MI,VG;function Rie(){if(VG)return MI;VG=1;var t=Ro();function e(n){return n===n&&!t(n)}return MI=e,MI}var DI,UG;function A4e(){if(UG)return DI;UG=1;var t=Rie(),e=Iu();function n(r){for(var i=e(r),o=i.length;o--;){var s=i[o],a=r[s];i[o]=[s,a,t(a)]}return i}return DI=n,DI}var kI,qG;function Pie(){if(qG)return kI;qG=1;function t(e,n){return function(r){return r==null?!1:r[e]===n&&(n!==void 0||e in Object(r))}}return kI=t,kI}var OI,FG;function C4e(){if(FG)return OI;FG=1;var t=x4e(),e=A4e(),n=Pie();function r(i){var o=e(i);return o.length==1&&o[0][2]?n(o[0][0],o[0][1]):function(s){return s===i||t(s,i,o)}}return OI=r,OI}var LI,BG;function up(){if(BG)return LI;BG=1;var t=pf(),e=Ys(),n="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&t(i)==n}return LI=r,LI}var VI,$G;function zL(){if($G)return VI;$G=1;var t=Hn(),e=up(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(o,s){if(t(o))return!1;var a=typeof o;return a=="number"||a=="symbol"||a=="boolean"||o==null||e(o)?!0:r.test(o)||!n.test(o)||s!=null&&o in Object(s)}return VI=i,VI}var UI,zG;function I4e(){if(zG)return UI;zG=1;var t=NL(),e="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var o=function(){var s=arguments,a=i?i.apply(this,s):s[0],u=o.cache;if(u.has(a))return u.get(a);var c=r.apply(this,s);return o.cache=u.set(a,c)||u,c};return o.cache=new(n.Cache||t),o}return n.Cache=t,UI=n,UI}var qI,HG;function R4e(){if(HG)return qI;HG=1;var t=I4e(),e=500;function n(r){var i=t(r,function(s){return o.size===e&&o.clear(),s}),o=i.cache;return i}return qI=n,qI}var FI,GG;function P4e(){if(GG)return FI;GG=1;var t=R4e(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=t(function(i){var o=[];return i.charCodeAt(0)===46&&o.push(""),i.replace(e,function(s,a,u,c){o.push(u?c.replace(n,"$1"):a||s)}),o});return FI=r,FI}var BI,jG;function BT(){if(jG)return BI;jG=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,o=Array(i);++r<i;)o[r]=n(e[r],r,e);return o}return BI=t,BI}var $I,KG;function N4e(){if(KG)return $I;KG=1;var t=sp(),e=BT(),n=Hn(),r=up(),i=t?t.prototype:void 0,o=i?i.toString:void 0;function s(a){if(typeof a=="string")return a;if(n(a))return e(a,s)+"";if(r(a))return o?o.call(a):"";var u=a+"";return u=="0"&&1/a==-1/0?"-0":u}return $I=s,$I}var zI,WG;function Nie(){if(WG)return zI;WG=1;var t=N4e();function e(n){return n==null?"":t(n)}return zI=e,zI}var HI,YG;function $T(){if(YG)return HI;YG=1;var t=Hn(),e=zL(),n=P4e(),r=Nie();function i(o,s){return t(o)?o:e(o,s)?[o]:n(r(o))}return HI=i,HI}var GI,JG;function ev(){if(JG)return GI;JG=1;var t=up();function e(n){if(typeof n=="string"||t(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return GI=e,GI}var jI,XG;function zT(){if(XG)return jI;XG=1;var t=$T(),e=ev();function n(r,i){i=t(i,r);for(var o=0,s=i.length;r!=null&&o<s;)r=r[e(i[o++])];return o&&o==s?r:void 0}return jI=n,jI}var KI,QG;function M4e(){if(QG)return KI;QG=1;var t=zT();function e(n,r,i){var o=n==null?void 0:t(n,r);return o===void 0?i:o}return KI=e,KI}var WI,ZG;function D4e(){if(ZG)return WI;ZG=1;function t(e,n){return e!=null&&n in Object(e)}return WI=t,WI}var YI,e9;function Mie(){if(e9)return YI;e9=1;var t=$T(),e=Qy(),n=Hn(),r=LT(),i=DL(),o=ev();function s(a,u,c){u=t(u,a);for(var d=-1,h=u.length,g=!1;++d<h;){var _=o(u[d]);if(!(g=a!=null&&c(a,_)))break;a=a[_]}return g||++d!=h?g:(h=a==null?0:a.length,!!h&&i(h)&&r(_,h)&&(n(a)||e(a)))}return YI=s,YI}var JI,t9;function Die(){if(t9)return JI;t9=1;var t=D4e(),e=Mie();function n(r,i){return r!=null&&e(r,i,t)}return JI=n,JI}var XI,n9;function k4e(){if(n9)return XI;n9=1;var t=Iie(),e=M4e(),n=Die(),r=zL(),i=Rie(),o=Pie(),s=ev(),a=1,u=2;function c(d,h){return r(d)&&i(h)?o(s(d),h):function(g){var _=e(g,d);return _===void 0&&_===h?n(g,d):t(h,_,a|u)}}return XI=c,XI}var QI,r9;function kie(){if(r9)return QI;r9=1;function t(e){return function(n){return n==null?void 0:n[e]}}return QI=t,QI}var ZI,i9;function O4e(){if(i9)return ZI;i9=1;var t=zT();function e(n){return function(r){return t(r,n)}}return ZI=e,ZI}var eR,o9;function L4e(){if(o9)return eR;o9=1;var t=kie(),e=O4e(),n=zL(),r=ev();function i(o){return n(o)?t(r(o)):e(o)}return eR=i,eR}var tR,s9;function ol(){if(s9)return tR;s9=1;var t=C4e(),e=k4e(),n=yf(),r=Hn(),i=L4e();function o(s){return typeof s=="function"?s:s==null?n:typeof s=="object"?r(s)?e(s[0],s[1]):t(s):i(s)}return tR=o,tR}var nR,a9;function Oie(){if(a9)return nR;a9=1;var t=fie(),e=y4e(),n=ol(),r=Hn();function i(o,s){var a=r(o)?t:e;return a(o,n(s,3))}return nR=i,nR}var rR,l9;function V4e(){if(l9)return rR;l9=1;var t=Object.prototype,e=t.hasOwnProperty;function n(r,i){return r!=null&&e.call(r,i)}return rR=n,rR}var iR,u9;function Lie(){if(u9)return iR;u9=1;var t=V4e(),e=Mie();function n(r,i){return r!=null&&e(r,i,t)}return iR=n,iR}var oR,c9;function U4e(){if(c9)return oR;c9=1;var t=OL(),e=lp(),n=Qy(),r=Hn(),i=il(),o=ap(),s=UT(),a=Zy(),u="[object Map]",c="[object Set]",d=Object.prototype,h=d.hasOwnProperty;function g(_){if(_==null)return!0;if(i(_)&&(r(_)||typeof _=="string"||typeof _.splice=="function"||o(_)||a(_)||n(_)))return!_.length;var S=e(_);if(S==u||S==c)return!_.size;if(s(_))return!t(_).length;for(var b in _)if(h.call(_,b))return!1;return!0}return oR=g,oR}var sR,f9;function Vie(){if(f9)return sR;f9=1;function t(e){return e===void 0}return sR=t,sR}var aR,d9;function Uie(){if(d9)return aR;d9=1;var t=FT(),e=il();function n(r,i){var o=-1,s=e(r)?Array(r.length):[];return t(r,function(a,u,c){s[++o]=i(a,u,c)}),s}return aR=n,aR}var lR,h9;function qie(){if(h9)return lR;h9=1;var t=BT(),e=ol(),n=Uie(),r=Hn();function i(o,s){var a=r(o)?t:n;return a(o,e(s,3))}return lR=i,lR}var uR,p9;function q4e(){if(p9)return uR;p9=1;function t(e,n,r,i){var o=-1,s=e==null?0:e.length;for(i&&s&&(r=e[++o]);++o<s;)r=n(r,e[o],o,e);return r}return uR=t,uR}var cR,m9;function F4e(){if(m9)return cR;m9=1;function t(e,n,r,i,o){return o(e,function(s,a,u){r=i?(i=!1,s):n(r,s,a,u)}),r}return cR=t,cR}var fR,g9;function Fie(){if(g9)return fR;g9=1;var t=q4e(),e=FT(),n=ol(),r=F4e(),i=Hn();function o(s,a,u){var c=i(s)?t:r,d=arguments.length<3;return c(s,n(a,4),u,d,e)}return fR=o,fR}var dR,y9;function B4e(){if(y9)return dR;y9=1;var t=pf(),e=Hn(),n=Ys(),r="[object String]";function i(o){return typeof o=="string"||!e(o)&&n(o)&&t(o)==r}return dR=i,dR}var hR,v9;function $4e(){if(v9)return hR;v9=1;var t=kie(),e=t("length");return hR=e,hR}var pR,_9;function z4e(){if(_9)return pR;_9=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,o="\\ufe0e\\ufe0f",s="\\u200d",a=RegExp("["+s+t+i+o+"]");function u(c){return a.test(c)}return pR=u,pR}var mR,w9;function H4e(){if(w9)return mR;w9=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,o="\\ufe0e\\ufe0f",s="["+t+"]",a="["+i+"]",u="\\ud83c[\\udffb-\\udfff]",c="(?:"+a+"|"+u+")",d="[^"+t+"]",h="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",_="\\u200d",S=c+"?",b="["+o+"]?",T="(?:"+_+"(?:"+[d,h,g].join("|")+")"+b+S+")*",x=b+S+T,C="(?:"+[d+a+"?",a,h,g,s].join("|")+")",I=RegExp(u+"(?="+u+")|"+C+x,"g");function N(V){for(var q=I.lastIndex=0;I.test(V);)++q;return q}return mR=N,mR}var gR,b9;function G4e(){if(b9)return gR;b9=1;var t=$4e(),e=z4e(),n=H4e();function r(i){return e(i)?n(i):t(i)}return gR=r,gR}var yR,T9;function j4e(){if(T9)return yR;T9=1;var t=OL(),e=lp(),n=il(),r=B4e(),i=G4e(),o="[object Map]",s="[object Set]";function a(u){if(u==null)return 0;if(n(u))return r(u)?i(u):u.length;var c=e(u);return c==o||c==s?u.size:t(u).length}return yR=a,yR}var vR,E9;function K4e(){if(E9)return vR;E9=1;var t=ML(),e=_ie(),n=BL(),r=ol(),i=qT(),o=Hn(),s=ap(),a=Jy(),u=Ro(),c=Zy();function d(h,g,_){var S=o(h),b=S||s(h)||c(h);if(g=r(g,4),_==null){var T=h&&h.constructor;b?_=S?new T:[]:u(h)?_=a(T)?e(i(h)):{}:_={}}return(b?t:n)(h,function(x,C,I){return g(_,x,C,I)}),_}return vR=d,vR}var _R,S9;function W4e(){if(S9)return _R;S9=1;var t=sp(),e=Qy(),n=Hn(),r=t?t.isConcatSpreadable:void 0;function i(o){return n(o)||e(o)||!!(r&&o&&o[r])}return _R=i,_R}var wR,x9;function HL(){if(x9)return wR;x9=1;var t=VL(),e=W4e();function n(r,i,o,s,a){var u=-1,c=r.length;for(o||(o=e),a||(a=[]);++u<c;){var d=r[u];i>0&&o(d)?i>1?n(d,i-1,o,s,a):t(a,d):s||(a[a.length]=d)}return a}return wR=n,wR}var bR,A9;function Y4e(){if(A9)return bR;A9=1;function t(e,n,r){switch(r.length){case 0:return e.call(n);case 1:return e.call(n,r[0]);case 2:return e.call(n,r[0],r[1]);case 3:return e.call(n,r[0],r[1],r[2])}return e.apply(n,r)}return bR=t,bR}var TR,C9;function Bie(){if(C9)return TR;C9=1;var t=Y4e(),e=Math.max;function n(r,i,o){return i=e(i===void 0?r.length-1:i,0),function(){for(var s=arguments,a=-1,u=e(s.length-i,0),c=Array(u);++a<u;)c[a]=s[i+a];a=-1;for(var d=Array(i+1);++a<i;)d[a]=s[a];return d[i]=o(c),t(r,this,d)}}return TR=n,TR}var ER,I9;function J4e(){if(I9)return ER;I9=1;var t=qL(),e=sie(),n=yf(),r=e?function(i,o){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(o),writable:!0})}:n;return ER=r,ER}var SR,R9;function X4e(){if(R9)return SR;R9=1;var t=800,e=16,n=Date.now;function r(i){var o=0,s=0;return function(){var a=n(),u=e-(a-s);if(s=a,u>0){if(++o>=t)return arguments[0]}else o=0;return i.apply(void 0,arguments)}}return SR=r,SR}var xR,P9;function $ie(){if(P9)return xR;P9=1;var t=J4e(),e=X4e(),n=e(t);return xR=n,xR}var AR,N9;function HT(){if(N9)return AR;N9=1;var t=yf(),e=Bie(),n=$ie();function r(i,o){return n(e(i,o,t),i+"")}return AR=r,AR}var CR,M9;function zie(){if(M9)return CR;M9=1;function t(e,n,r,i){for(var o=e.length,s=r+(i?1:-1);i?s--:++s<o;)if(n(e[s],s,e))return s;return-1}return CR=t,CR}var IR,D9;function Q4e(){if(D9)return IR;D9=1;function t(e){return e!==e}return IR=t,IR}var RR,k9;function Z4e(){if(k9)return RR;k9=1;function t(e,n,r){for(var i=r-1,o=e.length;++i<o;)if(e[i]===n)return i;return-1}return RR=t,RR}var PR,O9;function eFe(){if(O9)return PR;O9=1;var t=zie(),e=Q4e(),n=Z4e();function r(i,o,s){return o===o?n(i,o,s):t(i,e,s)}return PR=r,PR}var NR,L9;function tFe(){if(L9)return NR;L9=1;var t=eFe();function e(n,r){var i=n==null?0:n.length;return!!i&&t(n,r,0)>-1}return NR=e,NR}var MR,V9;function nFe(){if(V9)return MR;V9=1;function t(e,n,r){for(var i=-1,o=e==null?0:e.length;++i<o;)if(r(n,e[i]))return!0;return!1}return MR=t,MR}var DR,U9;function rFe(){if(U9)return DR;U9=1;function t(){}return DR=t,DR}var kR,q9;function iFe(){if(q9)return kR;q9=1;var t=gie(),e=rFe(),n=$L(),r=1/0,i=t&&1/n(new t([,-0]))[1]==r?function(o){return new t(o)}:e;return kR=i,kR}var OR,F9;function oFe(){if(F9)return OR;F9=1;var t=xie(),e=tFe(),n=nFe(),r=Aie(),i=iFe(),o=$L(),s=200;function a(u,c,d){var h=-1,g=e,_=u.length,S=!0,b=[],T=b;if(d)S=!1,g=n;else if(_>=s){var x=c?null:i(u);if(x)return o(x);S=!1,g=r,T=new t}else T=c?[]:b;e:for(;++h<_;){var C=u[h],I=c?c(C):C;if(C=d||C!==0?C:0,S&&I===I){for(var N=T.length;N--;)if(T[N]===I)continue e;c&&T.push(I),b.push(C)}else g(T,I,d)||(T!==b&&T.push(I),b.push(C))}return b}return OR=a,OR}var LR,B9;function Hie(){if(B9)return LR;B9=1;var t=il(),e=Ys();function n(r){return e(r)&&t(r)}return LR=n,LR}var VR,$9;function sFe(){if($9)return VR;$9=1;var t=HL(),e=HT(),n=oFe(),r=Hie(),i=e(function(o){return n(t(o,1,r,!0))});return VR=i,VR}var UR,z9;function aFe(){if(z9)return UR;z9=1;var t=BT();function e(n,r){return t(r,function(i){return n[i]})}return UR=e,UR}var qR,H9;function Gie(){if(H9)return qR;H9=1;var t=aFe(),e=Iu();function n(r){return r==null?[]:t(r,e(r))}return qR=n,qR}var FR,G9;function Po(){if(G9)return FR;G9=1;var t;if(typeof RL=="function")try{t={clone:p4e(),constant:qL(),each:Sie(),filter:Oie(),has:Lie(),isArray:Hn(),isEmpty:U4e(),isFunction:Jy(),isUndefined:Vie(),keys:Iu(),map:qie(),reduce:Fie(),size:j4e(),transform:K4e(),union:sFe(),values:Gie()}}catch{}return t||(t=window._),FR=t,FR}var BR,j9;function GL(){if(j9)return BR;j9=1;var t=Po();BR=i;var e="\0",n="\0",r="";function i(d){this._isDirected=t.has(d,"directed")?d.directed:!0,this._isMultigraph=t.has(d,"multigraph")?d.multigraph:!1,this._isCompound=t.has(d,"compound")?d.compound:!1,this._label=void 0,this._defaultNodeLabelFn=t.constant(void 0),this._defaultEdgeLabelFn=t.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(d){return this._label=d,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(d){return t.isFunction(d)||(d=t.constant(d)),this._defaultNodeLabelFn=d,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return t.keys(this._nodes)},i.prototype.sources=function(){var d=this;return t.filter(this.nodes(),function(h){return t.isEmpty(d._in[h])})},i.prototype.sinks=function(){var d=this;return t.filter(this.nodes(),function(h){return t.isEmpty(d._out[h])})},i.prototype.setNodes=function(d,h){var g=arguments,_=this;return t.each(d,function(S){g.length>1?_.setNode(S,h):_.setNode(S)}),this},i.prototype.setNode=function(d,h){return t.has(this._nodes,d)?(arguments.length>1&&(this._nodes[d]=h),this):(this._nodes[d]=arguments.length>1?h:this._defaultNodeLabelFn(d),this._isCompound&&(this._parent[d]=n,this._children[d]={},this._children[n][d]=!0),this._in[d]={},this._preds[d]={},this._out[d]={},this._sucs[d]={},++this._nodeCount,this)},i.prototype.node=function(d){return this._nodes[d]},i.prototype.hasNode=function(d){return t.has(this._nodes,d)},i.prototype.removeNode=function(d){var h=this;if(t.has(this._nodes,d)){var g=function(_){h.removeEdge(h._edgeObjs[_])};delete this._nodes[d],this._isCompound&&(this._removeFromParentsChildList(d),delete this._parent[d],t.each(this.children(d),function(_){h.setParent(_)}),delete this._children[d]),t.each(t.keys(this._in[d]),g),delete this._in[d],delete this._preds[d],t.each(t.keys(this._out[d]),g),delete this._out[d],delete this._sucs[d],--this._nodeCount}return this},i.prototype.setParent=function(d,h){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(t.isUndefined(h))h=n;else{h+="";for(var g=h;!t.isUndefined(g);g=this.parent(g))if(g===d)throw new Error("Setting "+h+" as parent of "+d+" would create a cycle");this.setNode(h)}return this.setNode(d),this._removeFromParentsChildList(d),this._parent[d]=h,this._children[h][d]=!0,this},i.prototype._removeFromParentsChildList=function(d){delete this._children[this._parent[d]][d]},i.prototype.parent=function(d){if(this._isCompound){var h=this._parent[d];if(h!==n)return h}},i.prototype.children=function(d){if(t.isUndefined(d)&&(d=n),this._isCompound){var h=this._children[d];if(h)return t.keys(h)}else{if(d===n)return this.nodes();if(this.hasNode(d))return[]}},i.prototype.predecessors=function(d){var h=this._preds[d];if(h)return t.keys(h)},i.prototype.successors=function(d){var h=this._sucs[d];if(h)return t.keys(h)},i.prototype.neighbors=function(d){var h=this.predecessors(d);if(h)return t.union(h,this.successors(d))},i.prototype.isLeaf=function(d){var h;return this.isDirected()?h=this.successors(d):h=this.neighbors(d),h.length===0},i.prototype.filterNodes=function(d){var h=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});h.setGraph(this.graph());var g=this;t.each(this._nodes,function(b,T){d(T)&&h.setNode(T,b)}),t.each(this._edgeObjs,function(b){h.hasNode(b.v)&&h.hasNode(b.w)&&h.setEdge(b,g.edge(b))});var _={};function S(b){var T=g.parent(b);return T===void 0||h.hasNode(T)?(_[b]=T,T):T in _?_[T]:S(T)}return this._isCompound&&t.each(h.nodes(),function(b){h.setParent(b,S(b))}),h},i.prototype.setDefaultEdgeLabel=function(d){return t.isFunction(d)||(d=t.constant(d)),this._defaultEdgeLabelFn=d,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return t.values(this._edgeObjs)},i.prototype.setPath=function(d,h){var g=this,_=arguments;return t.reduce(d,function(S,b){return _.length>1?g.setEdge(S,b,h):g.setEdge(S,b),b}),this},i.prototype.setEdge=function(){var d,h,g,_,S=!1,b=arguments[0];typeof b=="object"&&b!==null&&"v"in b?(d=b.v,h=b.w,g=b.name,arguments.length===2&&(_=arguments[1],S=!0)):(d=b,h=arguments[1],g=arguments[3],arguments.length>2&&(_=arguments[2],S=!0)),d=""+d,h=""+h,t.isUndefined(g)||(g=""+g);var T=a(this._isDirected,d,h,g);if(t.has(this._edgeLabels,T))return S&&(this._edgeLabels[T]=_),this;if(!t.isUndefined(g)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(d),this.setNode(h),this._edgeLabels[T]=S?_:this._defaultEdgeLabelFn(d,h,g);var x=u(this._isDirected,d,h,g);return d=x.v,h=x.w,Object.freeze(x),this._edgeObjs[T]=x,o(this._preds[h],d),o(this._sucs[d],h),this._in[h][T]=x,this._out[d][T]=x,this._edgeCount++,this},i.prototype.edge=function(d,h,g){var _=arguments.length===1?c(this._isDirected,arguments[0]):a(this._isDirected,d,h,g);return this._edgeLabels[_]},i.prototype.hasEdge=function(d,h,g){var _=arguments.length===1?c(this._isDirected,arguments[0]):a(this._isDirected,d,h,g);return t.has(this._edgeLabels,_)},i.prototype.removeEdge=function(d,h,g){var _=arguments.length===1?c(this._isDirected,arguments[0]):a(this._isDirected,d,h,g),S=this._edgeObjs[_];return S&&(d=S.v,h=S.w,delete this._edgeLabels[_],delete this._edgeObjs[_],s(this._preds[h],d),s(this._sucs[d],h),delete this._in[h][_],delete this._out[d][_],this._edgeCount--),this},i.prototype.inEdges=function(d,h){var g=this._in[d];if(g){var _=t.values(g);return h?t.filter(_,function(S){return S.v===h}):_}},i.prototype.outEdges=function(d,h){var g=this._out[d];if(g){var _=t.values(g);return h?t.filter(_,function(S){return S.w===h}):_}},i.prototype.nodeEdges=function(d,h){var g=this.inEdges(d,h);if(g)return g.concat(this.outEdges(d,h))};function o(d,h){d[h]?d[h]++:d[h]=1}function s(d,h){--d[h]||delete d[h]}function a(d,h,g,_){var S=""+h,b=""+g;if(!d&&S>b){var T=S;S=b,b=T}return S+r+b+r+(t.isUndefined(_)?e:_)}function u(d,h,g,_){var S=""+h,b=""+g;if(!d&&S>b){var T=S;S=b,b=T}var x={v:S,w:b};return _&&(x.name=_),x}function c(d,h){return a(d,h.v,h.w,h.name)}return BR}var $R,K9;function lFe(){return K9||(K9=1,$R="2.1.8"),$R}var zR,W9;function uFe(){return W9||(W9=1,zR={Graph:GL(),version:lFe()}),zR}var HR,Y9;function cFe(){if(Y9)return HR;Y9=1;var t=Po(),e=GL();HR={write:n,read:o};function n(s){var a={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:r(s),edges:i(s)};return t.isUndefined(s.graph())||(a.value=t.clone(s.graph())),a}function r(s){return t.map(s.nodes(),function(a){var u=s.node(a),c=s.parent(a),d={v:a};return t.isUndefined(u)||(d.value=u),t.isUndefined(c)||(d.parent=c),d})}function i(s){return t.map(s.edges(),function(a){var u=s.edge(a),c={v:a.v,w:a.w};return t.isUndefined(a.name)||(c.name=a.name),t.isUndefined(u)||(c.value=u),c})}function o(s){var a=new e(s.options).setGraph(s.value);return t.each(s.nodes,function(u){a.setNode(u.v,u.value),u.parent&&a.setParent(u.v,u.parent)}),t.each(s.edges,function(u){a.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),a}return HR}var GR,J9;function fFe(){if(J9)return GR;J9=1;var t=Po();GR=e;function e(n){var r={},i=[],o;function s(a){t.has(r,a)||(r[a]=!0,o.push(a),t.each(n.successors(a),s),t.each(n.predecessors(a),s))}return t.each(n.nodes(),function(a){o=[],s(a),o.length&&i.push(o)}),i}return GR}var jR,X9;function jie(){if(X9)return jR;X9=1;var t=Po();jR=e;function e(){this._arr=[],this._keyIndices={}}return e.prototype.size=function(){return this._arr.length},e.prototype.keys=function(){return this._arr.map(function(n){return n.key})},e.prototype.has=function(n){return t.has(this._keyIndices,n)},e.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},e.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},e.prototype.add=function(n,r){var i=this._keyIndices;if(n=String(n),!t.has(i,n)){var o=this._arr,s=o.length;return i[n]=s,o.push({key:n,priority:r}),this._decrease(s),!0}return!1},e.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},e.prototype.decrease=function(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},e.prototype._heapify=function(n){var r=this._arr,i=2*n,o=i+1,s=n;i<r.length&&(s=r[i].priority<r[s].priority?i:s,o<r.length&&(s=r[o].priority<r[s].priority?o:s),s!==n&&(this._swap(n,s),this._heapify(s)))},e.prototype._decrease=function(n){for(var r=this._arr,i=r[n].priority,o;n!==0&&(o=n>>1,!(r[o].priority<i));)this._swap(n,o),n=o},e.prototype._swap=function(n,r){var i=this._arr,o=this._keyIndices,s=i[n],a=i[r];i[n]=a,i[r]=s,o[a.key]=n,o[s.key]=r},jR}var KR,Q9;function Kie(){if(Q9)return KR;Q9=1;var t=Po(),e=jie();KR=r;var n=t.constant(1);function r(o,s,a,u){return i(o,String(s),a||n,u||function(c){return o.outEdges(c)})}function i(o,s,a,u){var c={},d=new e,h,g,_=function(S){var b=S.v!==h?S.v:S.w,T=c[b],x=a(S),C=g.distance+x;if(x<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+S+" Weight: "+x);C<T.distance&&(T.distance=C,T.predecessor=h,d.decrease(b,C))};for(o.nodes().forEach(function(S){var b=S===s?0:Number.POSITIVE_INFINITY;c[S]={distance:b},d.add(S,b)});d.size()>0&&(h=d.removeMin(),g=c[h],g.distance!==Number.POSITIVE_INFINITY);)u(h).forEach(_);return c}return KR}var WR,Z9;function dFe(){if(Z9)return WR;Z9=1;var t=Kie(),e=Po();WR=n;function n(r,i,o){return e.transform(r.nodes(),function(s,a){s[a]=t(r,a,i,o)},{})}return WR}var YR,e8;function Wie(){if(e8)return YR;e8=1;var t=Po();YR=e;function e(n){var r=0,i=[],o={},s=[];function a(u){var c=o[u]={onStack:!0,lowlink:r,index:r++};if(i.push(u),n.successors(u).forEach(function(g){t.has(o,g)?o[g].onStack&&(c.lowlink=Math.min(c.lowlink,o[g].index)):(a(g),c.lowlink=Math.min(c.lowlink,o[g].lowlink))}),c.lowlink===c.index){var d=[],h;do h=i.pop(),o[h].onStack=!1,d.push(h);while(u!==h);s.push(d)}}return n.nodes().forEach(function(u){t.has(o,u)||a(u)}),s}return YR}var JR,t8;function hFe(){if(t8)return JR;t8=1;var t=Po(),e=Wie();JR=n;function n(r){return t.filter(e(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return JR}var XR,n8;function pFe(){if(n8)return XR;n8=1;var t=Po();XR=n;var e=t.constant(1);function n(i,o,s){return r(i,o||e,s||function(a){return i.outEdges(a)})}function r(i,o,s){var a={},u=i.nodes();return u.forEach(function(c){a[c]={},a[c][c]={distance:0},u.forEach(function(d){c!==d&&(a[c][d]={distance:Number.POSITIVE_INFINITY})}),s(c).forEach(function(d){var h=d.v===c?d.w:d.v,g=o(d);a[c][h]={distance:g,predecessor:c}})}),u.forEach(function(c){var d=a[c];u.forEach(function(h){var g=a[h];u.forEach(function(_){var S=g[c],b=d[_],T=g[_],x=S.distance+b.distance;x<T.distance&&(T.distance=x,T.predecessor=b.predecessor)})})}),a}return XR}var QR,r8;function Yie(){if(r8)return QR;r8=1;var t=Po();QR=e,e.CycleException=n;function e(r){var i={},o={},s=[];function a(u){if(t.has(o,u))throw new n;t.has(i,u)||(o[u]=!0,i[u]=!0,t.each(r.predecessors(u),a),delete o[u],s.push(u))}if(t.each(r.sinks(),a),t.size(i)!==r.nodeCount())throw new n;return s}function n(){}return n.prototype=new Error,QR}var ZR,i8;function mFe(){if(i8)return ZR;i8=1;var t=Yie();ZR=e;function e(n){try{t(n)}catch(r){if(r instanceof t.CycleException)return!1;throw r}return!0}return ZR}var eP,o8;function Jie(){if(o8)return eP;o8=1;var t=Po();eP=e;function e(r,i,o){t.isArray(i)||(i=[i]);var s=(r.isDirected()?r.successors:r.neighbors).bind(r),a=[],u={};return t.each(i,function(c){if(!r.hasNode(c))throw new Error("Graph does not have node: "+c);n(r,c,o==="post",u,s,a)}),a}function n(r,i,o,s,a,u){t.has(s,i)||(s[i]=!0,o||u.push(i),t.each(a(i),function(c){n(r,c,o,s,a,u)}),o&&u.push(i))}return eP}var tP,s8;function gFe(){if(s8)return tP;s8=1;var t=Jie();tP=e;function e(n,r){return t(n,r,"post")}return tP}var nP,a8;function yFe(){if(a8)return nP;a8=1;var t=Jie();nP=e;function e(n,r){return t(n,r,"pre")}return nP}var rP,l8;function vFe(){if(l8)return rP;l8=1;var t=Po(),e=GL(),n=jie();rP=r;function r(i,o){var s=new e,a={},u=new n,c;function d(g){var _=g.v===c?g.w:g.v,S=u.priority(_);if(S!==void 0){var b=o(g);b<S&&(a[_]=c,u.decrease(_,b))}}if(i.nodeCount()===0)return s;t.each(i.nodes(),function(g){u.add(g,Number.POSITIVE_INFINITY),s.setNode(g)}),u.decrease(i.nodes()[0],0);for(var h=!1;u.size()>0;){if(c=u.removeMin(),t.has(a,c))s.setEdge(c,a[c]);else{if(h)throw new Error("Input graph is not connected: "+i);h=!0}i.nodeEdges(c).forEach(d)}return s}return rP}var iP,u8;function _Fe(){return u8||(u8=1,iP={components:fFe(),dijkstra:Kie(),dijkstraAll:dFe(),findCycles:hFe(),floydWarshall:pFe(),isAcyclic:mFe(),postorder:gFe(),preorder:yFe(),prim:vFe(),tarjan:Wie(),topsort:Yie()}),iP}var oP,c8;function wFe(){if(c8)return oP;c8=1;var t=uFe();return oP={Graph:t.Graph,json:cFe(),alg:_Fe(),version:t.version},oP}var sP,f8;function Qo(){if(f8)return sP;f8=1;var t;if(typeof RL=="function")try{t=wFe()}catch{}return t||(t=window.graphlib),sP=t,sP}var aP,d8;function bFe(){if(d8)return aP;d8=1;var t=bie(),e=1,n=4;function r(i){return t(i,e|n)}return aP=r,aP}var lP,h8;function GT(){if(h8)return lP;h8=1;var t=op(),e=il(),n=LT(),r=Ro();function i(o,s,a){if(!r(a))return!1;var u=typeof s;return(u=="number"?e(a)&&n(s,a.length):u=="string"&&s in a)?t(a[s],o):!1}return lP=i,lP}var uP,p8;function TFe(){if(p8)return uP;p8=1;var t=HT(),e=op(),n=GT(),r=gf(),i=Object.prototype,o=i.hasOwnProperty,s=t(function(a,u){a=Object(a);var c=-1,d=u.length,h=d>2?u[2]:void 0;for(h&&n(u[0],u[1],h)&&(d=1);++c<d;)for(var g=u[c],_=r(g),S=-1,b=_.length;++S<b;){var T=_[S],x=a[T];(x===void 0||e(x,i[T])&&!o.call(a,T))&&(a[T]=g[T])}return a});return uP=s,uP}var cP,m8;function EFe(){if(m8)return cP;m8=1;var t=ol(),e=il(),n=Iu();function r(i){return function(o,s,a){var u=Object(o);if(!e(o)){var c=t(s,3);o=n(o),s=function(h){return c(u[h],h,u)}}var d=i(o,s,a);return d>-1?u[c?o[d]:d]:void 0}}return cP=r,cP}var fP,g8;function SFe(){if(g8)return fP;g8=1;var t=/\s/;function e(n){for(var r=n.length;r--&&t.test(n.charAt(r)););return r}return fP=e,fP}var dP,y8;function xFe(){if(y8)return dP;y8=1;var t=SFe(),e=/^\s+/;function n(r){return r&&r.slice(0,t(r)+1).replace(e,"")}return dP=n,dP}var hP,v8;function AFe(){if(v8)return hP;v8=1;var t=xFe(),e=Ro(),n=up(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt;function u(c){if(typeof c=="number")return c;if(n(c))return r;if(e(c)){var d=typeof c.valueOf=="function"?c.valueOf():c;c=e(d)?d+"":d}if(typeof c!="string")return c===0?c:+c;c=t(c);var h=o.test(c);return h||s.test(c)?a(c.slice(2),h?2:8):i.test(c)?r:+c}return hP=u,hP}var pP,_8;function Xie(){if(_8)return pP;_8=1;var t=AFe(),e=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-e){var o=i<0?-1:1;return o*n}return i===i?i:0}return pP=r,pP}var mP,w8;function CFe(){if(w8)return mP;w8=1;var t=Xie();function e(n){var r=t(n),i=r%1;return r===r?i?r-i:r:0}return mP=e,mP}var gP,b8;function IFe(){if(b8)return gP;b8=1;var t=zie(),e=ol(),n=CFe(),r=Math.max;function i(o,s,a){var u=o==null?0:o.length;if(!u)return-1;var c=a==null?0:n(a);return c<0&&(c=r(u+c,0)),t(o,e(s,3),c)}return gP=i,gP}var yP,T8;function RFe(){if(T8)return yP;T8=1;var t=EFe(),e=IFe(),n=t(e);return yP=n,yP}var vP,E8;function Qie(){if(E8)return vP;E8=1;var t=HL();function e(n){var r=n==null?0:n.length;return r?t(n,1):[]}return vP=e,vP}var _P,S8;function PFe(){if(S8)return _P;S8=1;var t=FL(),e=Tie(),n=gf();function r(i,o){return i==null?i:t(i,e(o),n)}return _P=r,_P}var wP,x8;function NFe(){if(x8)return wP;x8=1;function t(e){var n=e==null?0:e.length;return n?e[n-1]:void 0}return wP=t,wP}var bP,A8;function MFe(){if(A8)return bP;A8=1;var t=kT(),e=BL(),n=ol();function r(i,o){var s={};return o=n(o,3),e(i,function(a,u,c){t(s,u,o(a,u,c))}),s}return bP=r,bP}var TP,C8;function jL(){if(C8)return TP;C8=1;var t=up();function e(n,r,i){for(var o=-1,s=n.length;++o<s;){var a=n[o],u=r(a);if(u!=null&&(c===void 0?u===u&&!t(u):i(u,c)))var c=u,d=a}return d}return TP=e,TP}var EP,I8;function DFe(){if(I8)return EP;I8=1;function t(e,n){return e>n}return EP=t,EP}var SP,R8;function kFe(){if(R8)return SP;R8=1;var t=jL(),e=DFe(),n=yf();function r(i){return i&&i.length?t(i,n,e):void 0}return SP=r,SP}var xP,P8;function Zie(){if(P8)return xP;P8=1;var t=kT(),e=op();function n(r,i,o){(o!==void 0&&!e(r[i],o)||o===void 0&&!(i in r))&&t(r,i,o)}return xP=n,xP}var AP,N8;function OFe(){if(N8)return AP;N8=1;var t=pf(),e=qT(),n=Ys(),r="[object Object]",i=Function.prototype,o=Object.prototype,s=i.toString,a=o.hasOwnProperty,u=s.call(Object);function c(d){if(!n(d)||t(d)!=r)return!1;var h=e(d);if(h===null)return!0;var g=a.call(h,"constructor")&&h.constructor;return typeof g=="function"&&g instanceof g&&s.call(g)==u}return AP=c,AP}var CP,M8;function eoe(){if(M8)return CP;M8=1;function t(e,n){if(!(n==="constructor"&&typeof e[n]=="function")&&n!="__proto__")return e[n]}return CP=t,CP}var IP,D8;function LFe(){if(D8)return IP;D8=1;var t=Xy(),e=gf();function n(r){return t(r,e(r))}return IP=n,IP}var RP,k8;function VFe(){if(k8)return RP;k8=1;var t=Zie(),e=uie(),n=vie(),r=cie(),i=wie(),o=Qy(),s=Hn(),a=Hie(),u=ap(),c=Jy(),d=Ro(),h=OFe(),g=Zy(),_=eoe(),S=LFe();function b(T,x,C,I,N,V,q){var P=_(T,C),O=_(x,C),R=q.get(O);if(R){t(T,C,R);return}var U=V?V(P,O,C+"",T,x,q):void 0,L=U===void 0;if(L){var F=s(O),$=!F&&u(O),H=!F&&!$&&g(O);U=O,F||$||H?s(P)?U=P:a(P)?U=r(P):$?(L=!1,U=e(O,!0)):H?(L=!1,U=n(O,!0)):U=[]:h(O)||o(O)?(U=P,o(P)?U=S(P):(!d(P)||c(P))&&(U=i(O))):L=!1}L&&(q.set(O,U),N(U,O,I,V,q),q.delete(O)),t(T,C,U)}return RP=b,RP}var PP,O8;function UFe(){if(O8)return PP;O8=1;var t=DT(),e=Zie(),n=FL(),r=VFe(),i=Ro(),o=gf(),s=eoe();function a(u,c,d,h,g){u!==c&&n(c,function(_,S){if(g||(g=new t),i(_))r(u,c,S,d,a,h,g);else{var b=h?h(s(u,S),_,S+"",u,c,g):void 0;b===void 0&&(b=_),e(u,S,b)}},o)}return PP=a,PP}var NP,L8;function qFe(){if(L8)return NP;L8=1;var t=HT(),e=GT();function n(r){return t(function(i,o){var s=-1,a=o.length,u=a>1?o[a-1]:void 0,c=a>2?o[2]:void 0;for(u=r.length>3&&typeof u=="function"?(a--,u):void 0,c&&e(o[0],o[1],c)&&(u=a<3?void 0:u,a=1),i=Object(i);++s<a;){var d=o[s];d&&r(i,d,s,u)}return i})}return NP=n,NP}var MP,V8;function FFe(){if(V8)return MP;V8=1;var t=UFe(),e=qFe(),n=e(function(r,i,o){t(r,i,o)});return MP=n,MP}var DP,U8;function toe(){if(U8)return DP;U8=1;function t(e,n){return e<n}return DP=t,DP}var kP,q8;function BFe(){if(q8)return kP;q8=1;var t=jL(),e=toe(),n=yf();function r(i){return i&&i.length?t(i,n,e):void 0}return kP=r,kP}var OP,F8;function $Fe(){if(F8)return OP;F8=1;var t=jL(),e=ol(),n=toe();function r(i,o){return i&&i.length?t(i,e(o,2),n):void 0}return OP=r,OP}var LP,B8;function zFe(){if(B8)return LP;B8=1;var t=is(),e=function(){return t.Date.now()};return LP=e,LP}var VP,$8;function HFe(){if($8)return VP;$8=1;var t=OT(),e=$T(),n=LT(),r=Ro(),i=ev();function o(s,a,u,c){if(!r(s))return s;a=e(a,s);for(var d=-1,h=a.length,g=h-1,_=s;_!=null&&++d<h;){var S=i(a[d]),b=u;if(S==="__proto__"||S==="constructor"||S==="prototype")return s;if(d!=g){var T=_[S];b=c?c(T,S,_):void 0,b===void 0&&(b=r(T)?T:n(a[d+1])?[]:{})}t(_,S,b),_=_[S]}return s}return VP=o,VP}var UP,z8;function GFe(){if(z8)return UP;z8=1;var t=zT(),e=HFe(),n=$T();function r(i,o,s){for(var a=-1,u=o.length,c={};++a<u;){var d=o[a],h=t(i,d);s(h,d)&&e(c,n(d,i),h)}return c}return UP=r,UP}var qP,H8;function jFe(){if(H8)return qP;H8=1;var t=GFe(),e=Die();function n(r,i){return t(r,i,function(o,s){return e(r,s)})}return qP=n,qP}var FP,G8;function KFe(){if(G8)return FP;G8=1;var t=Qie(),e=Bie(),n=$ie();function r(i){return n(e(i,void 0,t),i+"")}return FP=r,FP}var BP,j8;function WFe(){if(j8)return BP;j8=1;var t=jFe(),e=KFe(),n=e(function(r,i){return r==null?{}:t(r,i)});return BP=n,BP}var $P,K8;function YFe(){if(K8)return $P;K8=1;var t=Math.ceil,e=Math.max;function n(r,i,o,s){for(var a=-1,u=e(t((i-r)/(o||1)),0),c=Array(u);u--;)c[s?u:++a]=r,r+=o;return c}return $P=n,$P}var zP,W8;function JFe(){if(W8)return zP;W8=1;var t=YFe(),e=GT(),n=Xie();function r(i){return function(o,s,a){return a&&typeof a!="number"&&e(o,s,a)&&(s=a=void 0),o=n(o),s===void 0?(s=o,o=0):s=n(s),a=a===void 0?o<s?1:-1:n(a),t(o,s,a,i)}}return zP=r,zP}var HP,Y8;function XFe(){if(Y8)return HP;Y8=1;var t=JFe(),e=t();return HP=e,HP}var GP,J8;function QFe(){if(J8)return GP;J8=1;function t(e,n){var r=e.length;for(e.sort(n);r--;)e[r]=e[r].value;return e}return GP=t,GP}var jP,X8;function ZFe(){if(X8)return jP;X8=1;var t=up();function e(n,r){if(n!==r){var i=n!==void 0,o=n===null,s=n===n,a=t(n),u=r!==void 0,c=r===null,d=r===r,h=t(r);if(!c&&!h&&!a&&n>r||a&&u&&d&&!c&&!h||o&&u&&d||!i&&d||!s)return 1;if(!o&&!a&&!h&&n<r||h&&i&&s&&!o&&!a||c&&i&&s||!u&&s||!d)return-1}return 0}return jP=e,jP}var KP,Q8;function eBe(){if(Q8)return KP;Q8=1;var t=ZFe();function e(n,r,i){for(var o=-1,s=n.criteria,a=r.criteria,u=s.length,c=i.length;++o<u;){var d=t(s[o],a[o]);if(d){if(o>=c)return d;var h=i[o];return d*(h=="desc"?-1:1)}}return n.index-r.index}return KP=e,KP}var WP,Z8;function tBe(){if(Z8)return WP;Z8=1;var t=BT(),e=zT(),n=ol(),r=Uie(),i=QFe(),o=VT(),s=eBe(),a=yf(),u=Hn();function c(d,h,g){h.length?h=t(h,function(b){return u(b)?function(T){return e(T,b.length===1?b[0]:b)}:b}):h=[a];var _=-1;h=t(h,o(n));var S=r(d,function(b,T,x){var C=t(h,function(I){return I(b)});return{criteria:C,index:++_,value:b}});return i(S,function(b,T){return s(b,T,g)})}return WP=c,WP}var YP,ej;function nBe(){if(ej)return YP;ej=1;var t=HL(),e=tBe(),n=HT(),r=GT(),i=n(function(o,s){if(o==null)return[];var a=s.length;return a>1&&r(o,s[0],s[1])?s=[]:a>2&&r(s[0],s[1],s[2])&&(s=[s[0]]),e(o,t(s,1),[])});return YP=i,YP}var JP,tj;function rBe(){if(tj)return JP;tj=1;var t=Nie(),e=0;function n(r){var i=++e;return t(r)+i}return JP=n,JP}var XP,nj;function iBe(){if(nj)return XP;nj=1;function t(e,n,r){for(var i=-1,o=e.length,s=n.length,a={};++i<o;){var u=i<s?n[i]:void 0;r(a,e[i],u)}return a}return XP=t,XP}var QP,rj;function oBe(){if(rj)return QP;rj=1;var t=OT(),e=iBe();function n(r,i){return e(r||[],i||[],t)}return QP=n,QP}var ZP,ij;function dn(){if(ij)return ZP;ij=1;var t;if(typeof RL=="function")try{t={cloneDeep:bFe(),constant:qL(),defaults:TFe(),each:Sie(),filter:Oie(),find:RFe(),flatten:Qie(),forEach:Eie(),forIn:PFe(),has:Lie(),isUndefined:Vie(),last:NFe(),map:qie(),mapValues:MFe(),max:kFe(),merge:FFe(),min:BFe(),minBy:$Fe(),now:zFe(),pick:WFe(),range:XFe(),reduce:Fie(),sortBy:nBe(),uniqueId:rBe(),values:Gie(),zipObject:oBe()}}catch{}return t||(t=window._),ZP=t,ZP}var eN,oj;function sBe(){if(oj)return eN;oj=1,eN=t;function t(){var r={};r._next=r._prev=r,this._sentinel=r}t.prototype.dequeue=function(){var r=this._sentinel,i=r._prev;if(i!==r)return e(i),i},t.prototype.enqueue=function(r){var i=this._sentinel;r._prev&&r._next&&e(r),r._next=i._next,i._next._prev=r,i._next=r,r._prev=i},t.prototype.toString=function(){for(var r=[],i=this._sentinel,o=i._prev;o!==i;)r.push(JSON.stringify(o,n)),o=o._prev;return"["+r.join(", ")+"]"};function e(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,i){if(r!=="_next"&&r!=="_prev")return i}return eN}var tN,sj;function aBe(){if(sj)return tN;sj=1;var t=dn(),e=Qo().Graph,n=sBe();tN=i;var r=t.constant(1);function i(c,d){if(c.nodeCount()<=1)return[];var h=a(c,d||r),g=o(h.graph,h.buckets,h.zeroIdx);return t.flatten(t.map(g,function(_){return c.outEdges(_.v,_.w)}),!0)}function o(c,d,h){for(var g=[],_=d[d.length-1],S=d[0],b;c.nodeCount();){for(;b=S.dequeue();)s(c,d,h,b);for(;b=_.dequeue();)s(c,d,h,b);if(c.nodeCount()){for(var T=d.length-2;T>0;--T)if(b=d[T].dequeue(),b){g=g.concat(s(c,d,h,b,!0));break}}}return g}function s(c,d,h,g,_){var S=_?[]:void 0;return t.forEach(c.inEdges(g.v),function(b){var T=c.edge(b),x=c.node(b.v);_&&S.push({v:b.v,w:b.w}),x.out-=T,u(d,h,x)}),t.forEach(c.outEdges(g.v),function(b){var T=c.edge(b),x=b.w,C=c.node(x);C.in-=T,u(d,h,C)}),c.removeNode(g.v),S}function a(c,d){var h=new e,g=0,_=0;t.forEach(c.nodes(),function(T){h.setNode(T,{v:T,in:0,out:0})}),t.forEach(c.edges(),function(T){var x=h.edge(T.v,T.w)||0,C=d(T),I=x+C;h.setEdge(T.v,T.w,I),_=Math.max(_,h.node(T.v).out+=C),g=Math.max(g,h.node(T.w).in+=C)});var S=t.range(_+g+3).map(function(){return new n}),b=g+1;return t.forEach(h.nodes(),function(T){u(S,b,h.node(T))}),{graph:h,buckets:S,zeroIdx:b}}function u(c,d,h){h.out?h.in?c[h.out-h.in+d].enqueue(h):c[c.length-1].enqueue(h):c[0].enqueue(h)}return tN}var nN,aj;function lBe(){if(aj)return nN;aj=1;var t=dn(),e=aBe();nN={run:n,undo:i};function n(o){var s=o.graph().acyclicer==="greedy"?e(o,a(o)):r(o);t.forEach(s,function(u){var c=o.edge(u);o.removeEdge(u),c.forwardName=u.name,c.reversed=!0,o.setEdge(u.w,u.v,c,t.uniqueId("rev"))});function a(u){return function(c){return u.edge(c).weight}}}function r(o){var s=[],a={},u={};function c(d){t.has(u,d)||(u[d]=!0,a[d]=!0,t.forEach(o.outEdges(d),function(h){t.has(a,h.w)?s.push(h):c(h.w)}),delete a[d])}return t.forEach(o.nodes(),c),s}function i(o){t.forEach(o.edges(),function(s){var a=o.edge(s);if(a.reversed){o.removeEdge(s);var u=a.forwardName;delete a.reversed,delete a.forwardName,o.setEdge(s.w,s.v,a,u)}})}return nN}var rN,lj;function gi(){if(lj)return rN;lj=1;var t=dn(),e=Qo().Graph;rN={addDummyNode:n,simplify:r,asNonCompoundGraph:i,successorWeights:o,predecessorWeights:s,intersectRect:a,buildLayerMatrix:u,normalizeRanks:c,removeEmptyRanks:d,addBorderNode:h,maxRank:g,partition:_,time:S,notime:b};function n(T,x,C,I){var N;do N=t.uniqueId(I);while(T.hasNode(N));return C.dummy=x,T.setNode(N,C),N}function r(T){var x=new e().setGraph(T.graph());return t.forEach(T.nodes(),function(C){x.setNode(C,T.node(C))}),t.forEach(T.edges(),function(C){var I=x.edge(C.v,C.w)||{weight:0,minlen:1},N=T.edge(C);x.setEdge(C.v,C.w,{weight:I.weight+N.weight,minlen:Math.max(I.minlen,N.minlen)})}),x}function i(T){var x=new e({multigraph:T.isMultigraph()}).setGraph(T.graph());return t.forEach(T.nodes(),function(C){T.children(C).length||x.setNode(C,T.node(C))}),t.forEach(T.edges(),function(C){x.setEdge(C,T.edge(C))}),x}function o(T){var x=t.map(T.nodes(),function(C){var I={};return t.forEach(T.outEdges(C),function(N){I[N.w]=(I[N.w]||0)+T.edge(N).weight}),I});return t.zipObject(T.nodes(),x)}function s(T){var x=t.map(T.nodes(),function(C){var I={};return t.forEach(T.inEdges(C),function(N){I[N.v]=(I[N.v]||0)+T.edge(N).weight}),I});return t.zipObject(T.nodes(),x)}function a(T,x){var C=T.x,I=T.y,N=x.x-C,V=x.y-I,q=T.width/2,P=T.height/2;if(!N&&!V)throw new Error("Not possible to find intersection inside of the rectangle");var O,R;return Math.abs(V)*q>Math.abs(N)*P?(V<0&&(P=-P),O=P*N/V,R=P):(N<0&&(q=-q),O=q,R=q*V/N),{x:C+O,y:I+R}}function u(T){var x=t.map(t.range(g(T)+1),function(){return[]});return t.forEach(T.nodes(),function(C){var I=T.node(C),N=I.rank;t.isUndefined(N)||(x[N][I.order]=C)}),x}function c(T){var x=t.min(t.map(T.nodes(),function(C){return T.node(C).rank}));t.forEach(T.nodes(),function(C){var I=T.node(C);t.has(I,"rank")&&(I.rank-=x)})}function d(T){var x=t.min(t.map(T.nodes(),function(V){return T.node(V).rank})),C=[];t.forEach(T.nodes(),function(V){var q=T.node(V).rank-x;C[q]||(C[q]=[]),C[q].push(V)});var I=0,N=T.graph().nodeRankFactor;t.forEach(C,function(V,q){t.isUndefined(V)&&q%N!==0?--I:I&&t.forEach(V,function(P){T.node(P).rank+=I})})}function h(T,x,C,I){var N={width:0,height:0};return arguments.length>=4&&(N.rank=C,N.order=I),n(T,"border",N,x)}function g(T){return t.max(t.map(T.nodes(),function(x){var C=T.node(x).rank;if(!t.isUndefined(C))return C}))}function _(T,x){var C={lhs:[],rhs:[]};return t.forEach(T,function(I){x(I)?C.lhs.push(I):C.rhs.push(I)}),C}function S(T,x){var C=t.now();try{return x()}finally{console.log(T+" time: "+(t.now()-C)+"ms")}}function b(T,x){return x()}return rN}var iN,uj;function uBe(){if(uj)return iN;uj=1;var t=dn(),e=gi();iN={run:n,undo:i};function n(o){o.graph().dummyChains=[],t.forEach(o.edges(),function(s){r(o,s)})}function r(o,s){var a=s.v,u=o.node(a).rank,c=s.w,d=o.node(c).rank,h=s.name,g=o.edge(s),_=g.labelRank;if(d!==u+1){o.removeEdge(s);var S,b,T;for(T=0,++u;u<d;++T,++u)g.points=[],b={width:0,height:0,edgeLabel:g,edgeObj:s,rank:u},S=e.addDummyNode(o,"edge",b,"_d"),u===_&&(b.width=g.width,b.height=g.height,b.dummy="edge-label",b.labelpos=g.labelpos),o.setEdge(a,S,{weight:g.weight},h),T===0&&o.graph().dummyChains.push(S),a=S;o.setEdge(a,c,{weight:g.weight},h)}}function i(o){t.forEach(o.graph().dummyChains,function(s){var a=o.node(s),u=a.edgeLabel,c;for(o.setEdge(a.edgeObj,u);a.dummy;)c=o.successors(s)[0],o.removeNode(s),u.points.push({x:a.x,y:a.y}),a.dummy==="edge-label"&&(u.x=a.x,u.y=a.y,u.width=a.width,u.height=a.height),s=c,a=o.node(s)})}return iN}var oN,cj;function Gw(){if(cj)return oN;cj=1;var t=dn();oN={longestPath:e,slack:n};function e(r){var i={};function o(s){var a=r.node(s);if(t.has(i,s))return a.rank;i[s]=!0;var u=t.min(t.map(r.outEdges(s),function(c){return o(c.w)-r.edge(c).minlen}));return(u===Number.POSITIVE_INFINITY||u===void 0||u===null)&&(u=0),a.rank=u}t.forEach(r.sources(),o)}function n(r,i){return r.node(i.w).rank-r.node(i.v).rank-r.edge(i).minlen}return oN}var sN,fj;function noe(){if(fj)return sN;fj=1;var t=dn(),e=Qo().Graph,n=Gw().slack;sN=r;function r(a){var u=new e({directed:!1}),c=a.nodes()[0],d=a.nodeCount();u.setNode(c,{});for(var h,g;i(u,a)<d;)h=o(u,a),g=u.hasNode(h.v)?n(a,h):-n(a,h),s(u,a,g);return u}function i(a,u){function c(d){t.forEach(u.nodeEdges(d),function(h){var g=h.v,_=d===g?h.w:g;!a.hasNode(_)&&!n(u,h)&&(a.setNode(_,{}),a.setEdge(d,_,{}),c(_))})}return t.forEach(a.nodes(),c),a.nodeCount()}function o(a,u){return t.minBy(u.edges(),function(c){if(a.hasNode(c.v)!==a.hasNode(c.w))return n(u,c)})}function s(a,u,c){t.forEach(a.nodes(),function(d){u.node(d).rank+=c})}return sN}var aN,dj;function cBe(){if(dj)return aN;dj=1;var t=dn(),e=noe(),n=Gw().slack,r=Gw().longestPath,i=Qo().alg.preorder,o=Qo().alg.postorder,s=gi().simplify;aN=a,a.initLowLimValues=h,a.initCutValues=u,a.calcCutValue=d,a.leaveEdge=_,a.enterEdge=S,a.exchangeEdges=b;function a(I){I=s(I),r(I);var N=e(I);h(N),u(N,I);for(var V,q;V=_(N);)q=S(N,I,V),b(N,I,V,q)}function u(I,N){var V=o(I,I.nodes());V=V.slice(0,V.length-1),t.forEach(V,function(q){c(I,N,q)})}function c(I,N,V){var q=I.node(V),P=q.parent;I.edge(V,P).cutvalue=d(I,N,V)}function d(I,N,V){var q=I.node(V),P=q.parent,O=!0,R=N.edge(V,P),U=0;return R||(O=!1,R=N.edge(P,V)),U=R.weight,t.forEach(N.nodeEdges(V),function(L){var F=L.v===V,$=F?L.w:L.v;if($!==P){var H=F===O,Y=N.edge(L).weight;if(U+=H?Y:-Y,x(I,V,$)){var K=I.edge(V,$).cutvalue;U+=H?-K:K}}}),U}function h(I,N){arguments.length<2&&(N=I.nodes()[0]),g(I,{},1,N)}function g(I,N,V,q,P){var O=V,R=I.node(q);return N[q]=!0,t.forEach(I.neighbors(q),function(U){t.has(N,U)||(V=g(I,N,V,U,q))}),R.low=O,R.lim=V++,P?R.parent=P:delete R.parent,V}function _(I){return t.find(I.edges(),function(N){return I.edge(N).cutvalue<0})}function S(I,N,V){var q=V.v,P=V.w;N.hasEdge(q,P)||(q=V.w,P=V.v);var O=I.node(q),R=I.node(P),U=O,L=!1;O.lim>R.lim&&(U=R,L=!0);var F=t.filter(N.edges(),function($){return L===C(I,I.node($.v),U)&&L!==C(I,I.node($.w),U)});return t.minBy(F,function($){return n(N,$)})}function b(I,N,V,q){var P=V.v,O=V.w;I.removeEdge(P,O),I.setEdge(q.v,q.w,{}),h(I),u(I,N),T(I,N)}function T(I,N){var V=t.find(I.nodes(),function(P){return!N.node(P).parent}),q=i(I,V);q=q.slice(1),t.forEach(q,function(P){var O=I.node(P).parent,R=N.edge(P,O),U=!1;R||(R=N.edge(O,P),U=!0),N.node(P).rank=N.node(O).rank+(U?R.minlen:-R.minlen)})}function x(I,N,V){return I.hasEdge(N,V)}function C(I,N,V){return V.low<=N.lim&&N.lim<=V.lim}return aN}var lN,hj;function fBe(){if(hj)return lN;hj=1;var t=Gw(),e=t.longestPath,n=noe(),r=cBe();lN=i;function i(u){switch(u.graph().ranker){case"network-simplex":a(u);break;case"tight-tree":s(u);break;case"longest-path":o(u);break;default:a(u)}}var o=e;function s(u){e(u),n(u)}function a(u){r(u)}return lN}var uN,pj;function dBe(){if(pj)return uN;pj=1;var t=dn();uN=e;function e(i){var o=r(i);t.forEach(i.graph().dummyChains,function(s){for(var a=i.node(s),u=a.edgeObj,c=n(i,o,u.v,u.w),d=c.path,h=c.lca,g=0,_=d[g],S=!0;s!==u.w;){if(a=i.node(s),S){for(;(_=d[g])!==h&&i.node(_).maxRank<a.rank;)g++;_===h&&(S=!1)}if(!S){for(;g<d.length-1&&i.node(_=d[g+1]).minRank<=a.rank;)g++;_=d[g]}i.setParent(s,_),s=i.successors(s)[0]}})}function n(i,o,s,a){var u=[],c=[],d=Math.min(o[s].low,o[a].low),h=Math.max(o[s].lim,o[a].lim),g,_;g=s;do g=i.parent(g),u.push(g);while(g&&(o[g].low>d||h>o[g].lim));for(_=g,g=a;(g=i.parent(g))!==_;)c.push(g);return{path:u.concat(c.reverse()),lca:_}}function r(i){var o={},s=0;function a(u){var c=s;t.forEach(i.children(u),a),o[u]={low:c,lim:s++}}return t.forEach(i.children(),a),o}return uN}var cN,mj;function hBe(){if(mj)return cN;mj=1;var t=dn(),e=gi();cN={run:n,cleanup:s};function n(a){var u=e.addDummyNode(a,"root",{},"_root"),c=i(a),d=t.max(t.values(c))-1,h=2*d+1;a.graph().nestingRoot=u,t.forEach(a.edges(),function(_){a.edge(_).minlen*=h});var g=o(a)+1;t.forEach(a.children(),function(_){r(a,u,h,g,d,c,_)}),a.graph().nodeRankFactor=h}function r(a,u,c,d,h,g,_){var S=a.children(_);if(!S.length){_!==u&&a.setEdge(u,_,{weight:0,minlen:c});return}var b=e.addBorderNode(a,"_bt"),T=e.addBorderNode(a,"_bb"),x=a.node(_);a.setParent(b,_),x.borderTop=b,a.setParent(T,_),x.borderBottom=T,t.forEach(S,function(C){r(a,u,c,d,h,g,C);var I=a.node(C),N=I.borderTop?I.borderTop:C,V=I.borderBottom?I.borderBottom:C,q=I.borderTop?d:2*d,P=N!==V?1:h-g[_]+1;a.setEdge(b,N,{weight:q,minlen:P,nestingEdge:!0}),a.setEdge(V,T,{weight:q,minlen:P,nestingEdge:!0})}),a.parent(_)||a.setEdge(u,b,{weight:0,minlen:h+g[_]})}function i(a){var u={};function c(d,h){var g=a.children(d);g&&g.length&&t.forEach(g,function(_){c(_,h+1)}),u[d]=h}return t.forEach(a.children(),function(d){c(d,1)}),u}function o(a){return t.reduce(a.edges(),function(u,c){return u+a.edge(c).weight},0)}function s(a){var u=a.graph();a.removeNode(u.nestingRoot),delete u.nestingRoot,t.forEach(a.edges(),function(c){var d=a.edge(c);d.nestingEdge&&a.removeEdge(c)})}return cN}var fN,gj;function pBe(){if(gj)return fN;gj=1;var t=dn(),e=gi();fN=n;function n(i){function o(s){var a=i.children(s),u=i.node(s);if(a.length&&t.forEach(a,o),t.has(u,"minRank")){u.borderLeft=[],u.borderRight=[];for(var c=u.minRank,d=u.maxRank+1;c<d;++c)r(i,"borderLeft","_bl",s,u,c),r(i,"borderRight","_br",s,u,c)}}t.forEach(i.children(),o)}function r(i,o,s,a,u,c){var d={width:0,height:0,rank:c,borderType:o},h=u[o][c-1],g=e.addDummyNode(i,"border",d,s);u[o][c]=g,i.setParent(g,a),h&&i.setEdge(h,g,{weight:1})}return fN}var dN,yj;function mBe(){if(yj)return dN;yj=1;var t=dn();dN={adjust:e,undo:n};function e(c){var d=c.graph().rankdir.toLowerCase();(d==="lr"||d==="rl")&&r(c)}function n(c){var d=c.graph().rankdir.toLowerCase();(d==="bt"||d==="rl")&&o(c),(d==="lr"||d==="rl")&&(a(c),r(c))}function r(c){t.forEach(c.nodes(),function(d){i(c.node(d))}),t.forEach(c.edges(),function(d){i(c.edge(d))})}function i(c){var d=c.width;c.width=c.height,c.height=d}function o(c){t.forEach(c.nodes(),function(d){s(c.node(d))}),t.forEach(c.edges(),function(d){var h=c.edge(d);t.forEach(h.points,s),t.has(h,"y")&&s(h)})}function s(c){c.y=-c.y}function a(c){t.forEach(c.nodes(),function(d){u(c.node(d))}),t.forEach(c.edges(),function(d){var h=c.edge(d);t.forEach(h.points,u),t.has(h,"x")&&u(h)})}function u(c){var d=c.x;c.x=c.y,c.y=d}return dN}var hN,vj;function gBe(){if(vj)return hN;vj=1;var t=dn();hN=e;function e(n){var r={},i=t.filter(n.nodes(),function(c){return!n.children(c).length}),o=t.max(t.map(i,function(c){return n.node(c).rank})),s=t.map(t.range(o+1),function(){return[]});function a(c){if(!t.has(r,c)){r[c]=!0;var d=n.node(c);s[d.rank].push(c),t.forEach(n.successors(c),a)}}var u=t.sortBy(i,function(c){return n.node(c).rank});return t.forEach(u,a),s}return hN}var pN,_j;function yBe(){if(_j)return pN;_j=1;var t=dn();pN=e;function e(r,i){for(var o=0,s=1;s<i.length;++s)o+=n(r,i[s-1],i[s]);return o}function n(r,i,o){for(var s=t.zipObject(o,t.map(o,function(g,_){return _})),a=t.flatten(t.map(i,function(g){return t.sortBy(t.map(r.outEdges(g),function(_){return{pos:s[_.w],weight:r.edge(_).weight}}),"pos")}),!0),u=1;u<o.length;)u<<=1;var c=2*u-1;u-=1;var d=t.map(new Array(c),function(){return 0}),h=0;return t.forEach(a.forEach(function(g){var _=g.pos+u;d[_]+=g.weight;for(var S=0;_>0;)_%2&&(S+=d[_+1]),_=_-1>>1,d[_]+=g.weight;h+=g.weight*S})),h}return pN}var mN,wj;function vBe(){if(wj)return mN;wj=1;var t=dn();mN=e;function e(n,r){return t.map(r,function(i){var o=n.inEdges(i);if(o.length){var s=t.reduce(o,function(a,u){var c=n.edge(u),d=n.node(u.v);return{sum:a.sum+c.weight*d.order,weight:a.weight+c.weight}},{sum:0,weight:0});return{v:i,barycenter:s.sum/s.weight,weight:s.weight}}else return{v:i}})}return mN}var gN,bj;function _Be(){if(bj)return gN;bj=1;var t=dn();gN=e;function e(i,o){var s={};t.forEach(i,function(u,c){var d=s[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:c};t.isUndefined(u.barycenter)||(d.barycenter=u.barycenter,d.weight=u.weight)}),t.forEach(o.edges(),function(u){var c=s[u.v],d=s[u.w];!t.isUndefined(c)&&!t.isUndefined(d)&&(d.indegree++,c.out.push(s[u.w]))});var a=t.filter(s,function(u){return!u.indegree});return n(a)}function n(i){var o=[];function s(c){return function(d){d.merged||(t.isUndefined(d.barycenter)||t.isUndefined(c.barycenter)||d.barycenter>=c.barycenter)&&r(c,d)}}function a(c){return function(d){d.in.push(c),--d.indegree===0&&i.push(d)}}for(;i.length;){var u=i.pop();o.push(u),t.forEach(u.in.reverse(),s(u)),t.forEach(u.out,a(u))}return t.map(t.filter(o,function(c){return!c.merged}),function(c){return t.pick(c,["vs","i","barycenter","weight"])})}function r(i,o){var s=0,a=0;i.weight&&(s+=i.barycenter*i.weight,a+=i.weight),o.weight&&(s+=o.barycenter*o.weight,a+=o.weight),i.vs=o.vs.concat(i.vs),i.barycenter=s/a,i.weight=a,i.i=Math.min(o.i,i.i),o.merged=!0}return gN}var yN,Tj;function wBe(){if(Tj)return yN;Tj=1;var t=dn(),e=gi();yN=n;function n(o,s){var a=e.partition(o,function(b){return t.has(b,"barycenter")}),u=a.lhs,c=t.sortBy(a.rhs,function(b){return-b.i}),d=[],h=0,g=0,_=0;u.sort(i(!!s)),_=r(d,c,_),t.forEach(u,function(b){_+=b.vs.length,d.push(b.vs),h+=b.barycenter*b.weight,g+=b.weight,_=r(d,c,_)});var S={vs:t.flatten(d,!0)};return g&&(S.barycenter=h/g,S.weight=g),S}function r(o,s,a){for(var u;s.length&&(u=t.last(s)).i<=a;)s.pop(),o.push(u.vs),a++;return a}function i(o){return function(s,a){return s.barycenter<a.barycenter?-1:s.barycenter>a.barycenter?1:o?a.i-s.i:s.i-a.i}}return yN}var vN,Ej;function bBe(){if(Ej)return vN;Ej=1;var t=dn(),e=vBe(),n=_Be(),r=wBe();vN=i;function i(a,u,c,d){var h=a.children(u),g=a.node(u),_=g?g.borderLeft:void 0,S=g?g.borderRight:void 0,b={};_&&(h=t.filter(h,function(V){return V!==_&&V!==S}));var T=e(a,h);t.forEach(T,function(V){if(a.children(V.v).length){var q=i(a,V.v,c,d);b[V.v]=q,t.has(q,"barycenter")&&s(V,q)}});var x=n(T,c);o(x,b);var C=r(x,d);if(_&&(C.vs=t.flatten([_,C.vs,S],!0),a.predecessors(_).length)){var I=a.node(a.predecessors(_)[0]),N=a.node(a.predecessors(S)[0]);t.has(C,"barycenter")||(C.barycenter=0,C.weight=0),C.barycenter=(C.barycenter*C.weight+I.order+N.order)/(C.weight+2),C.weight+=2}return C}function o(a,u){t.forEach(a,function(c){c.vs=t.flatten(c.vs.map(function(d){return u[d]?u[d].vs:d}),!0)})}function s(a,u){t.isUndefined(a.barycenter)?(a.barycenter=u.barycenter,a.weight=u.weight):(a.barycenter=(a.barycenter*a.weight+u.barycenter*u.weight)/(a.weight+u.weight),a.weight+=u.weight)}return vN}var _N,Sj;function TBe(){if(Sj)return _N;Sj=1;var t=dn(),e=Qo().Graph;_N=n;function n(i,o,s){var a=r(i),u=new e({compound:!0}).setGraph({root:a}).setDefaultNodeLabel(function(c){return i.node(c)});return t.forEach(i.nodes(),function(c){var d=i.node(c),h=i.parent(c);(d.rank===o||d.minRank<=o&&o<=d.maxRank)&&(u.setNode(c),u.setParent(c,h||a),t.forEach(i[s](c),function(g){var _=g.v===c?g.w:g.v,S=u.edge(_,c),b=t.isUndefined(S)?0:S.weight;u.setEdge(_,c,{weight:i.edge(g).weight+b})}),t.has(d,"minRank")&&u.setNode(c,{borderLeft:d.borderLeft[o],borderRight:d.borderRight[o]}))}),u}function r(i){for(var o;i.hasNode(o=t.uniqueId("_root")););return o}return _N}var wN,xj;function EBe(){if(xj)return wN;xj=1;var t=dn();wN=e;function e(n,r,i){var o={},s;t.forEach(i,function(a){for(var u=n.parent(a),c,d;u;){if(c=n.parent(u),c?(d=o[c],o[c]=u):(d=s,s=u),d&&d!==u){r.setEdge(d,u);return}u=c}})}return wN}var bN,Aj;function SBe(){if(Aj)return bN;Aj=1;var t=dn(),e=gBe(),n=yBe(),r=bBe(),i=TBe(),o=EBe(),s=Qo().Graph,a=gi();bN=u;function u(g){var _=a.maxRank(g),S=c(g,t.range(1,_+1),"inEdges"),b=c(g,t.range(_-1,-1,-1),"outEdges"),T=e(g);h(g,T);for(var x=Number.POSITIVE_INFINITY,C,I=0,N=0;N<4;++I,++N){d(I%2?S:b,I%4>=2),T=a.buildLayerMatrix(g);var V=n(g,T);V<x&&(N=0,C=t.cloneDeep(T),x=V)}h(g,C)}function c(g,_,S){return t.map(_,function(b){return i(g,b,S)})}function d(g,_){var S=new s;t.forEach(g,function(b){var T=b.graph().root,x=r(b,T,S,_);t.forEach(x.vs,function(C,I){b.node(C).order=I}),o(b,S,x.vs)})}function h(g,_){t.forEach(_,function(S){t.forEach(S,function(b,T){g.node(b).order=T})})}return bN}var TN,Cj;function xBe(){if(Cj)return TN;Cj=1;var t=dn(),e=Qo().Graph,n=gi();TN={positionX:S,findType1Conflicts:r,findType2Conflicts:i,addConflict:s,hasConflict:a,verticalAlignment:u,horizontalCompaction:c,alignCoordinates:g,findSmallestWidthAlignment:h,balance:_};function r(x,C){var I={};function N(V,q){var P=0,O=0,R=V.length,U=t.last(q);return t.forEach(q,function(L,F){var $=o(x,L),H=$?x.node($).order:R;($||L===U)&&(t.forEach(q.slice(O,F+1),function(Y){t.forEach(x.predecessors(Y),function(K){var Q=x.node(K),re=Q.order;(re<P||H<re)&&!(Q.dummy&&x.node(Y).dummy)&&s(I,K,Y)})}),O=F+1,P=H)}),q}return t.reduce(C,N),I}function i(x,C){var I={};function N(q,P,O,R,U){var L;t.forEach(t.range(P,O),function(F){L=q[F],x.node(L).dummy&&t.forEach(x.predecessors(L),function($){var H=x.node($);H.dummy&&(H.order<R||H.order>U)&&s(I,$,L)})})}function V(q,P){var O=-1,R,U=0;return t.forEach(P,function(L,F){if(x.node(L).dummy==="border"){var $=x.predecessors(L);$.length&&(R=x.node($[0]).order,N(P,U,F,O,R),U=F,O=R)}N(P,U,P.length,R,q.length)}),P}return t.reduce(C,V),I}function o(x,C){if(x.node(C).dummy)return t.find(x.predecessors(C),function(I){return x.node(I).dummy})}function s(x,C,I){if(C>I){var N=C;C=I,I=N}var V=x[C];V||(x[C]=V={}),V[I]=!0}function a(x,C,I){if(C>I){var N=C;C=I,I=N}return t.has(x[C],I)}function u(x,C,I,N){var V={},q={},P={};return t.forEach(C,function(O){t.forEach(O,function(R,U){V[R]=R,q[R]=R,P[R]=U})}),t.forEach(C,function(O){var R=-1;t.forEach(O,function(U){var L=N(U);if(L.length){L=t.sortBy(L,function(K){return P[K]});for(var F=(L.length-1)/2,$=Math.floor(F),H=Math.ceil(F);$<=H;++$){var Y=L[$];q[U]===U&&R<P[Y]&&!a(I,U,Y)&&(q[Y]=U,q[U]=V[U]=V[Y],R=P[Y])}}})}),{root:V,align:q}}function c(x,C,I,N,V){var q={},P=d(x,C,I,V),O=V?"borderLeft":"borderRight";function R(F,$){for(var H=P.nodes(),Y=H.pop(),K={};Y;)K[Y]?F(Y):(K[Y]=!0,H.push(Y),H=H.concat($(Y))),Y=H.pop()}function U(F){q[F]=P.inEdges(F).reduce(function($,H){return Math.max($,q[H.v]+P.edge(H))},0)}function L(F){var $=P.outEdges(F).reduce(function(Y,K){return Math.min(Y,q[K.w]-P.edge(K))},Number.POSITIVE_INFINITY),H=x.node(F);$!==Number.POSITIVE_INFINITY&&H.borderType!==O&&(q[F]=Math.max(q[F],$))}return R(U,P.predecessors.bind(P)),R(L,P.successors.bind(P)),t.forEach(N,function(F){q[F]=q[I[F]]}),q}function d(x,C,I,N){var V=new e,q=x.graph(),P=b(q.nodesep,q.edgesep,N);return t.forEach(C,function(O){var R;t.forEach(O,function(U){var L=I[U];if(V.setNode(L),R){var F=I[R],$=V.edge(F,L);V.setEdge(F,L,Math.max(P(x,U,R),$||0))}R=U})}),V}function h(x,C){return t.minBy(t.values(C),function(I){var N=Number.NEGATIVE_INFINITY,V=Number.POSITIVE_INFINITY;return t.forIn(I,function(q,P){var O=T(x,P)/2;N=Math.max(q+O,N),V=Math.min(q-O,V)}),N-V})}function g(x,C){var I=t.values(C),N=t.min(I),V=t.max(I);t.forEach(["u","d"],function(q){t.forEach(["l","r"],function(P){var O=q+P,R=x[O],U;if(R!==C){var L=t.values(R);U=P==="l"?N-t.min(L):V-t.max(L),U&&(x[O]=t.mapValues(R,function(F){return F+U}))}})})}function _(x,C){return t.mapValues(x.ul,function(I,N){if(C)return x[C.toLowerCase()][N];var V=t.sortBy(t.map(x,N));return(V[1]+V[2])/2})}function S(x){var C=n.buildLayerMatrix(x),I=t.merge(r(x,C),i(x,C)),N={},V;t.forEach(["u","d"],function(P){V=P==="u"?C:t.values(C).reverse(),t.forEach(["l","r"],function(O){O==="r"&&(V=t.map(V,function(F){return t.values(F).reverse()}));var R=(P==="u"?x.predecessors:x.successors).bind(x),U=u(x,V,I,R),L=c(x,V,U.root,U.align,O==="r");O==="r"&&(L=t.mapValues(L,function(F){return-F})),N[P+O]=L})});var q=h(x,N);return g(N,q),_(N,x.graph().align)}function b(x,C,I){return function(N,V,q){var P=N.node(V),O=N.node(q),R=0,U;if(R+=P.width/2,t.has(P,"labelpos"))switch(P.labelpos.toLowerCase()){case"l":U=-P.width/2;break;case"r":U=P.width/2;break}if(U&&(R+=I?U:-U),U=0,R+=(P.dummy?C:x)/2,R+=(O.dummy?C:x)/2,R+=O.width/2,t.has(O,"labelpos"))switch(O.labelpos.toLowerCase()){case"l":U=O.width/2;break;case"r":U=-O.width/2;break}return U&&(R+=I?U:-U),U=0,R}}function T(x,C){return x.node(C).width}return TN}var EN,Ij;function ABe(){if(Ij)return EN;Ij=1;var t=dn(),e=gi(),n=xBe().positionX;EN=r;function r(o){o=e.asNonCompoundGraph(o),i(o),t.forEach(n(o),function(s,a){o.node(a).x=s})}function i(o){var s=e.buildLayerMatrix(o),a=o.graph().ranksep,u=0;t.forEach(s,function(c){var d=t.max(t.map(c,function(h){return o.node(h).height}));t.forEach(c,function(h){o.node(h).y=u+d/2}),u+=d+a})}return EN}var SN,Rj;function CBe(){if(Rj)return SN;Rj=1;var t=dn(),e=lBe(),n=uBe(),r=fBe(),i=gi().normalizeRanks,o=dBe(),s=gi().removeEmptyRanks,a=hBe(),u=pBe(),c=mBe(),d=SBe(),h=ABe(),g=gi(),_=Qo().Graph;SN=S;function S(J,ne){var oe=ne&&ne.debugTiming?g.time:g.notime;oe("layout",function(){var we=oe("  buildLayoutGraph",function(){return R(J)});oe("  runLayout",function(){b(we,oe)}),oe("  updateInputGraph",function(){T(J,we)})})}function b(J,ne){ne("    makeSpaceForEdgeLabels",function(){U(J)}),ne("    removeSelfEdges",function(){X(J)}),ne("    acyclic",function(){e.run(J)}),ne("    nestingGraph.run",function(){a.run(J)}),ne("    rank",function(){r(g.asNonCompoundGraph(J))}),ne("    injectEdgeLabelProxies",function(){L(J)}),ne("    removeEmptyRanks",function(){s(J)}),ne("    nestingGraph.cleanup",function(){a.cleanup(J)}),ne("    normalizeRanks",function(){i(J)}),ne("    assignRankMinMax",function(){F(J)}),ne("    removeEdgeLabelProxies",function(){$(J)}),ne("    normalize.run",function(){n.run(J)}),ne("    parentDummyChains",function(){o(J)}),ne("    addBorderSegments",function(){u(J)}),ne("    order",function(){d(J)}),ne("    insertSelfEdges",function(){G(J)}),ne("    adjustCoordinateSystem",function(){c.adjust(J)}),ne("    position",function(){h(J)}),ne("    positionSelfEdges",function(){te(J)}),ne("    removeBorderNodes",function(){re(J)}),ne("    normalize.undo",function(){n.undo(J)}),ne("    fixupEdgeLabelCoords",function(){K(J)}),ne("    undoCoordinateSystem",function(){c.undo(J)}),ne("    translateGraph",function(){H(J)}),ne("    assignNodeIntersects",function(){Y(J)}),ne("    reversePoints",function(){Q(J)}),ne("    acyclic.undo",function(){e.undo(J)})}function T(J,ne){t.forEach(J.nodes(),function(oe){var we=J.node(oe),Ie=ne.node(oe);we&&(we.x=Ie.x,we.y=Ie.y,ne.children(oe).length&&(we.width=Ie.width,we.height=Ie.height))}),t.forEach(J.edges(),function(oe){var we=J.edge(oe),Ie=ne.edge(oe);we.points=Ie.points,t.has(Ie,"x")&&(we.x=Ie.x,we.y=Ie.y)}),J.graph().width=ne.graph().width,J.graph().height=ne.graph().height}var x=["nodesep","edgesep","ranksep","marginx","marginy"],C={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},I=["acyclicer","ranker","rankdir","align"],N=["width","height"],V={width:0,height:0},q=["minlen","weight","width","height","labeloffset"],P={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},O=["labelpos"];function R(J){var ne=new _({multigraph:!0,compound:!0}),oe=ae(J.graph());return ne.setGraph(t.merge({},C,ee(oe,x),t.pick(oe,I))),t.forEach(J.nodes(),function(we){var Ie=ae(J.node(we));ne.setNode(we,t.defaults(ee(Ie,N),V)),ne.setParent(we,J.parent(we))}),t.forEach(J.edges(),function(we){var Ie=ae(J.edge(we));ne.setEdge(we,t.merge({},P,ee(Ie,q),t.pick(Ie,O)))}),ne}function U(J){var ne=J.graph();ne.ranksep/=2,t.forEach(J.edges(),function(oe){var we=J.edge(oe);we.minlen*=2,we.labelpos.toLowerCase()!=="c"&&(ne.rankdir==="TB"||ne.rankdir==="BT"?we.width+=we.labeloffset:we.height+=we.labeloffset)})}function L(J){t.forEach(J.edges(),function(ne){var oe=J.edge(ne);if(oe.width&&oe.height){var we=J.node(ne.v),Ie=J.node(ne.w),ye={rank:(Ie.rank-we.rank)/2+we.rank,e:ne};g.addDummyNode(J,"edge-proxy",ye,"_ep")}})}function F(J){var ne=0;t.forEach(J.nodes(),function(oe){var we=J.node(oe);we.borderTop&&(we.minRank=J.node(we.borderTop).rank,we.maxRank=J.node(we.borderBottom).rank,ne=t.max(ne,we.maxRank))}),J.graph().maxRank=ne}function $(J){t.forEach(J.nodes(),function(ne){var oe=J.node(ne);oe.dummy==="edge-proxy"&&(J.edge(oe.e).labelRank=oe.rank,J.removeNode(ne))})}function H(J){var ne=Number.POSITIVE_INFINITY,oe=0,we=Number.POSITIVE_INFINITY,Ie=0,ye=J.graph(),Ce=ye.marginx||0,ke=ye.marginy||0;function _e(Ze){var Ue=Ze.x,Le=Ze.y,st=Ze.width,Pe=Ze.height;ne=Math.min(ne,Ue-st/2),oe=Math.max(oe,Ue+st/2),we=Math.min(we,Le-Pe/2),Ie=Math.max(Ie,Le+Pe/2)}t.forEach(J.nodes(),function(Ze){_e(J.node(Ze))}),t.forEach(J.edges(),function(Ze){var Ue=J.edge(Ze);t.has(Ue,"x")&&_e(Ue)}),ne-=Ce,we-=ke,t.forEach(J.nodes(),function(Ze){var Ue=J.node(Ze);Ue.x-=ne,Ue.y-=we}),t.forEach(J.edges(),function(Ze){var Ue=J.edge(Ze);t.forEach(Ue.points,function(Le){Le.x-=ne,Le.y-=we}),t.has(Ue,"x")&&(Ue.x-=ne),t.has(Ue,"y")&&(Ue.y-=we)}),ye.width=oe-ne+Ce,ye.height=Ie-we+ke}function Y(J){t.forEach(J.edges(),function(ne){var oe=J.edge(ne),we=J.node(ne.v),Ie=J.node(ne.w),ye,Ce;oe.points?(ye=oe.points[0],Ce=oe.points[oe.points.length-1]):(oe.points=[],ye=Ie,Ce=we),oe.points.unshift(g.intersectRect(we,ye)),oe.points.push(g.intersectRect(Ie,Ce))})}function K(J){t.forEach(J.edges(),function(ne){var oe=J.edge(ne);if(t.has(oe,"x"))switch((oe.labelpos==="l"||oe.labelpos==="r")&&(oe.width-=oe.labeloffset),oe.labelpos){case"l":oe.x-=oe.width/2+oe.labeloffset;break;case"r":oe.x+=oe.width/2+oe.labeloffset;break}})}function Q(J){t.forEach(J.edges(),function(ne){var oe=J.edge(ne);oe.reversed&&oe.points.reverse()})}function re(J){t.forEach(J.nodes(),function(ne){if(J.children(ne).length){var oe=J.node(ne),we=J.node(oe.borderTop),Ie=J.node(oe.borderBottom),ye=J.node(t.last(oe.borderLeft)),Ce=J.node(t.last(oe.borderRight));oe.width=Math.abs(Ce.x-ye.x),oe.height=Math.abs(Ie.y-we.y),oe.x=ye.x+oe.width/2,oe.y=we.y+oe.height/2}}),t.forEach(J.nodes(),function(ne){J.node(ne).dummy==="border"&&J.removeNode(ne)})}function X(J){t.forEach(J.edges(),function(ne){if(ne.v===ne.w){var oe=J.node(ne.v);oe.selfEdges||(oe.selfEdges=[]),oe.selfEdges.push({e:ne,label:J.edge(ne)}),J.removeEdge(ne)}})}function G(J){var ne=g.buildLayerMatrix(J);t.forEach(ne,function(oe){var we=0;t.forEach(oe,function(Ie,ye){var Ce=J.node(Ie);Ce.order=ye+we,t.forEach(Ce.selfEdges,function(ke){g.addDummyNode(J,"selfedge",{width:ke.label.width,height:ke.label.height,rank:Ce.rank,order:ye+ ++we,e:ke.e,label:ke.label},"_se")}),delete Ce.selfEdges})})}function te(J){t.forEach(J.nodes(),function(ne){var oe=J.node(ne);if(oe.dummy==="selfedge"){var we=J.node(oe.e.v),Ie=we.x+we.width/2,ye=we.y,Ce=oe.x-Ie,ke=we.height/2;J.setEdge(oe.e,oe.label),J.removeNode(ne),oe.label.points=[{x:Ie+2*Ce/3,y:ye-ke},{x:Ie+5*Ce/6,y:ye-ke},{x:Ie+Ce,y:ye},{x:Ie+5*Ce/6,y:ye+ke},{x:Ie+2*Ce/3,y:ye+ke}],oe.label.x=oe.x,oe.label.y=oe.y}})}function ee(J,ne){return t.mapValues(t.pick(J,ne),Number)}function ae(J){var ne={};return t.forEach(J,function(oe,we){ne[we.toLowerCase()]=oe}),ne}return SN}var xN,Pj;function IBe(){if(Pj)return xN;Pj=1;var t=dn(),e=gi(),n=Qo().Graph;xN={debugOrdering:r};function r(i){var o=e.buildLayerMatrix(i),s=new n({compound:!0,multigraph:!0}).setGraph({});return t.forEach(i.nodes(),function(a){s.setNode(a,{label:a}),s.setParent(a,"layer"+i.node(a).rank)}),t.forEach(i.edges(),function(a){s.setEdge(a.v,a.w,{},a.name)}),t.forEach(o,function(a,u){var c="layer"+u;s.setNode(c,{rank:"same"}),t.reduce(a,function(d,h){return s.setEdge(d,h,{style:"invis"}),h})}),s}return xN}var AN,Nj;function RBe(){return Nj||(Nj=1,AN="0.8.5"),AN}var CN,Mj;function PBe(){return Mj||(Mj=1,CN={graphlib:Qo(),layout:CBe(),debug:IBe(),util:{time:gi().time,notime:gi().notime},version:RBe()}),CN}var NBe=PBe();const Dj=Co(NBe),MBe=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-stone-400 hover:text-red-500 transition-colors",viewBox:"0 0 20 20",fill:"currentColor",children:M.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})}),DBe=()=>M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-stone-400 hover:text-amber-400 transition-colors",viewBox:"0 0 20 20",fill:"currentColor",children:[M.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),M.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]}),kBe=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:M.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),C2=({nodeId:t,dsl:e,selectedNodeId:n,renamingNodeId:r,renamingValue:i,setRenamingValue:o,onSelectNode:s,onStartRename:a,onFinishRename:u,onDeleteNode:c,level:d=0,visited:h})=>{const g=e.nodes[t];if(!g||h.has(t))return null;h.add(t);const _=()=>{u(t,i)},S=(g.choices||[]).map(b=>b.to).concat((g.branch||[]).map(b=>b.to)).concat(g.fallback?[g.fallback]:[]).filter((b,T,x)=>b&&e.nodes[b]&&x.indexOf(b)===T);return M.jsxs("div",{className:"relative",children:[d>0&&M.jsx("div",{className:"absolute top-0 left-[-11px] h-full w-px bg-stone-600"}),d>0&&M.jsx("div",{className:"absolute top-4 left-[-11px] w-3 h-px bg-stone-600"}),M.jsx("div",{style:{paddingLeft:`${d*1}rem`},children:M.jsxs("div",{className:`flex items-center justify-between p-2 rounded-md transition-colors group ${n===t?"bg-amber-500":"bg-stone-700 hover:bg-stone-600"}`,children:[r===t?M.jsx("input",{type:"text",value:i,onChange:b=>o(b.target.value),onBlur:_,onKeyDown:b=>b.key==="Enter"&&_(),className:"bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-2 py-1 text-sm w-full",autoFocus:!0}):M.jsx("button",{onClick:()=>s(t),className:`w-full text-left font-mono text-sm ${n===t?"text-stone-900 font-bold":""}`,children:t}),t!=="start"&&r!==t&&M.jsxs("div",{className:"flex items-center opacity-0 group-hover:opacity-100 transition-opacity",children:[M.jsx("button",{onClick:()=>a(t),className:"p-1",children:M.jsx(DBe,{})}),M.jsx("button",{onClick:()=>{window.confirm(`Вы уверены, что хотите удалить узел "${t}"? Это действие необратимо.`)&&c(t)},className:"p-1",children:M.jsx(MBe,{})})]})]})}),M.jsx("div",{className:"mt-1",children:S.map(b=>M.jsx(C2,{nodeId:b,dsl:e,selectedNodeId:n,renamingNodeId:r,renamingValue:i,setRenamingValue:o,onSelectNode:s,onStartRename:a,onFinishRename:u,onDeleteNode:c,level:d+1,visited:h},b))})]})},OBe=({dsl:t,selectedNodeId:e,onSelectNode:n,onCreateNode:r,onRenameNode:i,onDeleteNode:o})=>{const[s,a]=D.useState(null),[u,c]=D.useState(""),d=Object.keys(t.nodes),h=new Set,g=d.includes("start")?"start":d[0]||null,_=()=>{const T=prompt("Введите ID нового узла (латиницей, без пробелов):");if(T&&/^[a-zA-Z0-9_]+$/.test(T)){if(t.nodes[T]){alert("Узел с таким ID уже существует.");return}r(T)}else T&&alert("Неверный формат ID. Используйте только латинские буквы, цифры и подчеркивание.")},S=T=>{a(T),c(T)},b=(T,x)=>{x.trim()&&x.trim()!==T&&(/^[a-zA-Z0-9_]+$/.test(x)?t.nodes[x]?alert("Узел с таким ID уже существует."):i(T,x.trim()):alert("Неверный формат ID. Используйте только латинские буквы, цифры и подчеркивание.")),a(null),c("")};return M.jsxs("div",{className:"flex flex-col h-full",children:[M.jsx("h3",{className:"font-display text-2xl text-amber-400 mb-4 flex-shrink-0",children:"Узлы Сценария"}),M.jsxs("div",{className:"flex-grow overflow-y-auto space-y-1 pr-2",children:[g&&t.nodes[g]&&M.jsx(C2,{nodeId:g,dsl:t,selectedNodeId:e,onSelectNode:n,onStartRename:S,onFinishRename:b,onDeleteNode:o,renamingNodeId:s,renamingValue:u,setRenamingValue:c,visited:h}),d.filter(T=>!h.has(T)).map(T=>M.jsx(C2,{nodeId:T,dsl:t,selectedNodeId:e,onSelectNode:n,onStartRename:S,onFinishRename:b,onDeleteNode:o,renamingNodeId:s,renamingValue:u,setRenamingValue:c,visited:h},T))]}),M.jsxs("button",{onClick:_,className:"mt-4 w-full flex items-center justify-center bg-stone-600 hover:bg-stone-500 text-stone-200 font-semibold py-2 px-4 rounded-md transition-colors flex-shrink-0",children:[M.jsx(kBe,{})," Создать узел"]})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let LBe,VBe;function UBe(){return{geminiUrl:LBe,vertexUrl:VBe}}function qBe(t,e,n,r){var i,o;if(!(t!=null&&t.baseUrl)){const s=UBe();return e?(i=s.vertexUrl)!==null&&i!==void 0?i:n:(o=s.geminiUrl)!==null&&o!==void 0?o:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vf{}function Ge(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function y(t,e,n){for(let o=0;o<e.length-1;o++){const s=e[o];if(s.endsWith("[]")){const a=s.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[a])){const u=t[a];if(Array.isArray(n))for(let c=0;c<u.length;c++){const d=u[c];y(d,e.slice(o+1),n[c])}else for(const c of u)y(c,e.slice(o+1),n)}return}else if(s.endsWith("[0]")){const a=s.slice(0,-3);a in t||(t[a]=[{}]);const u=t[a];y(u[0],e.slice(o+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function m(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const r=e[n];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in t){const o=t[i];return Array.isArray(o)?o.map(s=>m(s,e.slice(n+1))):void 0}else return}else t=t[r]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KL(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FBe(t){const e={},n=m(t,["operationName"]);n!=null&&y(e,["_url","operationName"],n);const r=m(t,["config"]);return r!=null&&y(e,["config"],r),e}function BBe(t){const e={},n=m(t,["operationName"]);n!=null&&y(e,["operationName"],n);const r=m(t,["resourceName"]);r!=null&&y(e,["_url","resourceName"],r);const i=m(t,["config"]);return i!=null&&y(e,["config"],i),e}function $Be(t){const e={},n=m(t,["operationName"]);n!=null&&y(e,["_url","operationName"],n);const r=m(t,["config"]);return r!=null&&y(e,["config"],r),e}function zBe(t){const e={},n=m(t,["video","uri"]);n!=null&&y(e,["uri"],n);const r=m(t,["video","encodedVideo"]);r!=null&&y(e,["videoBytes"],KL(r));const i=m(t,["encoding"]);return i!=null&&y(e,["mimeType"],i),e}function HBe(t){const e={},n=m(t,["_self"]);return n!=null&&y(e,["video"],zBe(n)),e}function GBe(t){const e={},n=m(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>HBe(s))),y(e,["generatedVideos"],o)}const r=m(t,["raiMediaFilteredCount"]);r!=null&&y(e,["raiMediaFilteredCount"],r);const i=m(t,["raiMediaFilteredReasons"]);return i!=null&&y(e,["raiMediaFilteredReasons"],i),e}function jBe(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const r=m(t,["metadata"]);r!=null&&y(e,["metadata"],r);const i=m(t,["done"]);i!=null&&y(e,["done"],i);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const s=m(t,["response","generateVideoResponse"]);return s!=null&&y(e,["response"],GBe(s)),e}function KBe(t){const e={},n=m(t,["gcsUri"]);n!=null&&y(e,["uri"],n);const r=m(t,["bytesBase64Encoded"]);r!=null&&y(e,["videoBytes"],KL(r));const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function WBe(t){const e={},n=m(t,["_self"]);return n!=null&&y(e,["video"],KBe(n)),e}function YBe(t){const e={},n=m(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>WBe(s))),y(e,["generatedVideos"],o)}const r=m(t,["raiMediaFilteredCount"]);r!=null&&y(e,["raiMediaFilteredCount"],r);const i=m(t,["raiMediaFilteredReasons"]);return i!=null&&y(e,["raiMediaFilteredReasons"],i),e}function JBe(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const r=m(t,["metadata"]);r!=null&&y(e,["metadata"],r);const i=m(t,["done"]);i!=null&&y(e,["done"],i);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const s=m(t,["response"]);return s!=null&&y(e,["response"],YBe(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var kj;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(kj||(kj={}));var Oj;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Oj||(Oj={}));var Xe;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Xe||(Xe={}));var Lj;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(Lj||(Lj={}));var Vj;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Vj||(Vj={}));var Uj;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Uj||(Uj={}));var qj;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(qj||(qj={}));var Fj;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Fj||(Fj={}));var Bj;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Bj||(Bj={}));var $j;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})($j||($j={}));var zj;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(zj||(zj={}));var Hj;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Hj||(Hj={}));var Gj;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Gj||(Gj={}));var jj;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(jj||(jj={}));var Kj;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Kj||(Kj={}));var jw;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(jw||(jw={}));var Wj;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Wj||(Wj={}));var I2;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(I2||(I2={}));var Yj;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Yj||(Yj={}));var Jj;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Jj||(Jj={}));var Xj;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Xj||(Xj={}));var Qj;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Qj||(Qj={}));var Zj;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Zj||(Zj={}));var e7;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(e7||(e7={}));var t7;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(t7||(t7={}));var n7;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(n7||(n7={}));var r7;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(r7||(r7={}));var i7;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(i7||(i7={}));var o7;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(o7||(o7={}));var s7;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(s7||(s7={}));var a7;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(a7||(a7={}));var l7;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(l7||(l7={}));var u7;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(u7||(u7={}));var c7;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(c7||(c7={}));var f7;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(f7||(f7={}));var d7;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(d7||(d7={}));var h7;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(h7||(h7={}));var p7;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(p7||(p7={}));var m7;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(m7||(m7={}));var g7;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(g7||(g7={}));var y7;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(y7||(y7={}));var v7;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(v7||(v7={}));var _7;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(_7||(_7={}));var w7;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(w7||(w7={}));var b7;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(b7||(b7={}));var Dd;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Dd||(Dd={}));class R2{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Fm{get text(){var e,n,r,i,o,s,a,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",d=!1;const h=[];for(const g of(u=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&u!==void 0?u:[]){for(const[_,S]of Object.entries(g))_!=="text"&&_!=="thought"&&(S!==null||S!==void 0)&&h.push(_);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;d=!0,c+=g.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?c:void 0}get data(){var e,n,r,i,o,s,a,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const d=[];for(const h of(u=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&u!==void 0?u:[]){for(const[g,_]of Object.entries(h))g!=="inlineData"&&(_!==null||_!==void 0)&&d.push(g);h.inlineData&&typeof h.inlineData.data=="string"&&(c+=atob(h.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,r,i,o,s,a,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(u=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||u===void 0?void 0:u.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,r,i,o,s,a,u,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(u=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||u===void 0?void 0:u.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return(c=d==null?void 0:d[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,r,i,o,s,a,u,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(u=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||u===void 0?void 0:u.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return(c=d==null?void 0:d[0])===null||c===void 0?void 0:c.output}}class T7{}class E7{}class XBe{}class QBe{}class ZBe{}class e3e{}class S7{}class x7{}class A7{}class t3e{}class Kw{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const r=new Kw;let i;const o=e;return n?i=JBe(o):i=jBe(o),Object.assign(r,i),r}}class C7{}class I7{}class R7{}class n3e{}class r3e{}class i3e{}class P7{}class o3e{get text(){var e,n,r;let i="",o=!1;const s=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[u,c]of Object.entries(a))u!=="text"&&u!=="thought"&&c!==null&&s.push(u);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;o=!0,i+=a.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var e,n,r;let i="";const o=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,u]of Object.entries(s))a!=="inlineData"&&u!==null&&o.push(a);s.inlineData&&typeof s.inlineData.data=="string"&&(i+=atob(s.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class s3e{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function At(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function roe(t,e){const n=At(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function ioe(t){return Array.isArray(t)?t.map(e=>Ww(e)):[Ww(t)]}function Ww(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function ooe(t){const e=Ww(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function soe(t){const e=Ww(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function N7(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function aoe(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>N7(e)):[N7(t)]}function P2(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function M7(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function D7(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function $r(t){if(t==null)throw new Error("ContentUnion is required");return P2(t)?t:{role:"user",parts:aoe(t)}}function WL(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=$r(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=$r(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>$r(n)):[$r(e)]}function wo(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(M7(t)||D7(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[$r(t)]}const e=[],n=[],r=P2(t[0]);for(const i of t){const o=P2(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(i);else{if(M7(i)||D7(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:aoe(n)}),e}function a3e(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(Xe).includes(n[0].toUpperCase())?n[0].toUpperCase():Xe.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(Xe).includes(r.toUpperCase())?r.toUpperCase():Xe.TYPE_UNSPECIFIED})}}function Gd(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&a3e(t.type,e);for(const[s,a]of Object.entries(t))if(a!=null)if(s=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(Xe).includes(a.toUpperCase())?a.toUpperCase():Xe.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=Gd(a);else if(r.includes(s)){const u=[];for(const c of a){if(c.type=="null"){e.nullable=!0;continue}u.push(Gd(c))}e[s]=u}else if(i.includes(s)){const u={};for(const[c,d]of Object.entries(a))u[c]=Gd(d);e[s]=u}else{if(s==="additionalProperties")continue;e[s]=a}return e}function YL(t){return Gd(t)}function JL(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function XL(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function cp(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Gd(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Gd(e.response));return t}function fp(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function l3e(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function sl(t,e){if(typeof e!="string")throw new Error("name must be a string");return l3e(t,e,"cachedContents")}function loe(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function _f(t){return KL(t)}function u3e(t){return t!=null&&typeof t=="object"&&"name"in t}function c3e(t){return t!=null&&typeof t=="object"&&"video"in t}function f3e(t){return t!=null&&typeof t=="object"&&"uri"in t}function uoe(t){var e;let n;if(u3e(t)&&(n=t.name),!(f3e(t)&&(n=t.uri,n===void 0))&&!(c3e(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function coe(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function foe(t){for(const e of["models","tunedModels","publisherModels"])if(d3e(t,e))return t[e];return[]}function d3e(t,e){return t!==null&&typeof t=="object"&&e in t}function h3e(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function p3e(t,e={}){const n=[],r=new Set;for(const i of t){const o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const s=h3e(i,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function doe(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function m3e(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function hoe(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let o=!1;for(const s of i){if(typeof s!="object"||s===null)continue;const u=s.response;if(typeof u!="object"||u===null)continue;if(u.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function dp(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function poe(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function g3e(t){const e={},n=m(t,["fps"]);n!=null&&y(e,["fps"],n);const r=m(t,["endOffset"]);r!=null&&y(e,["endOffset"],r);const i=m(t,["startOffset"]);return i!=null&&y(e,["startOffset"],i),e}function y3e(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["data"]);n!=null&&y(e,["data"],n);const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function v3e(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function _3e(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const r=m(t,["args"]);r!=null&&y(e,["args"],r);const i=m(t,["name"]);return i!=null&&y(e,["name"],i),e}function w3e(t){const e={},n=m(t,["videoMetadata"]);n!=null&&y(e,["videoMetadata"],g3e(n));const r=m(t,["thought"]);r!=null&&y(e,["thought"],r);const i=m(t,["inlineData"]);i!=null&&y(e,["inlineData"],y3e(i));const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],v3e(o));const s=m(t,["thoughtSignature"]);s!=null&&y(e,["thoughtSignature"],s);const a=m(t,["functionCall"]);a!=null&&y(e,["functionCall"],_3e(a));const u=m(t,["codeExecutionResult"]);u!=null&&y(e,["codeExecutionResult"],u);const c=m(t,["executableCode"]);c!=null&&y(e,["executableCode"],c);const d=m(t,["functionResponse"]);d!=null&&y(e,["functionResponse"],d);const h=m(t,["text"]);return h!=null&&y(e,["text"],h),e}function moe(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>w3e(o))),y(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&y(e,["role"],r),e}function b3e(t){const e={},n=m(t,["anyOf"]);n!=null&&y(e,["anyOf"],n);const r=m(t,["default"]);r!=null&&y(e,["default"],r);const i=m(t,["description"]);i!=null&&y(e,["description"],i);const o=m(t,["enum"]);o!=null&&y(e,["enum"],o);const s=m(t,["example"]);s!=null&&y(e,["example"],s);const a=m(t,["format"]);a!=null&&y(e,["format"],a);const u=m(t,["items"]);u!=null&&y(e,["items"],u);const c=m(t,["maxItems"]);c!=null&&y(e,["maxItems"],c);const d=m(t,["maxLength"]);d!=null&&y(e,["maxLength"],d);const h=m(t,["maxProperties"]);h!=null&&y(e,["maxProperties"],h);const g=m(t,["maximum"]);g!=null&&y(e,["maximum"],g);const _=m(t,["minItems"]);_!=null&&y(e,["minItems"],_);const S=m(t,["minLength"]);S!=null&&y(e,["minLength"],S);const b=m(t,["minProperties"]);b!=null&&y(e,["minProperties"],b);const T=m(t,["minimum"]);T!=null&&y(e,["minimum"],T);const x=m(t,["nullable"]);x!=null&&y(e,["nullable"],x);const C=m(t,["pattern"]);C!=null&&y(e,["pattern"],C);const I=m(t,["properties"]);I!=null&&y(e,["properties"],I);const N=m(t,["propertyOrdering"]);N!=null&&y(e,["propertyOrdering"],N);const V=m(t,["required"]);V!=null&&y(e,["required"],V);const q=m(t,["title"]);q!=null&&y(e,["title"],q);const P=m(t,["type"]);return P!=null&&y(e,["type"],P),e}function T3e(t){const e={};if(m(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=m(t,["category"]);n!=null&&y(e,["category"],n);const r=m(t,["threshold"]);return r!=null&&y(e,["threshold"],r),e}function E3e(t){const e={},n=m(t,["behavior"]);n!=null&&y(e,["behavior"],n);const r=m(t,["description"]);r!=null&&y(e,["description"],r);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const o=m(t,["parameters"]);o!=null&&y(e,["parameters"],o);const s=m(t,["parametersJsonSchema"]);s!=null&&y(e,["parametersJsonSchema"],s);const a=m(t,["response"]);a!=null&&y(e,["response"],a);const u=m(t,["responseJsonSchema"]);return u!=null&&y(e,["responseJsonSchema"],u),e}function S3e(t){const e={},n=m(t,["startTime"]);n!=null&&y(e,["startTime"],n);const r=m(t,["endTime"]);return r!=null&&y(e,["endTime"],r),e}function x3e(t){const e={},n=m(t,["timeRangeFilter"]);if(n!=null&&y(e,["timeRangeFilter"],S3e(n)),m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function A3e(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const r=m(t,["dynamicThreshold"]);return r!=null&&y(e,["dynamicThreshold"],r),e}function C3e(t){const e={},n=m(t,["dynamicRetrievalConfig"]);return n!=null&&y(e,["dynamicRetrievalConfig"],A3e(n)),e}function I3e(){return{}}function R3e(t){const e={},n=m(t,["environment"]);return n!=null&&y(e,["environment"],n),e}function P3e(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(c=>E3e(c))),y(e,["functionDeclarations"],u)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=m(t,["googleSearch"]);r!=null&&y(e,["googleSearch"],x3e(r));const i=m(t,["googleSearchRetrieval"]);if(i!=null&&y(e,["googleSearchRetrieval"],C3e(i)),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(m(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");m(t,["urlContext"])!=null&&y(e,["urlContext"],I3e());const s=m(t,["computerUse"]);s!=null&&y(e,["computerUse"],R3e(s));const a=m(t,["codeExecution"]);return a!=null&&y(e,["codeExecution"],a),e}function N3e(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const r=m(t,["allowedFunctionNames"]);return r!=null&&y(e,["allowedFunctionNames"],r),e}function M3e(t){const e={},n=m(t,["latitude"]);n!=null&&y(e,["latitude"],n);const r=m(t,["longitude"]);return r!=null&&y(e,["longitude"],r),e}function D3e(t){const e={},n=m(t,["latLng"]);n!=null&&y(e,["latLng"],M3e(n));const r=m(t,["languageCode"]);return r!=null&&y(e,["languageCode"],r),e}function k3e(t){const e={},n=m(t,["functionCallingConfig"]);n!=null&&y(e,["functionCallingConfig"],N3e(n));const r=m(t,["retrievalConfig"]);return r!=null&&y(e,["retrievalConfig"],D3e(r)),e}function O3e(t){const e={},n=m(t,["voiceName"]);return n!=null&&y(e,["voiceName"],n),e}function goe(t){const e={},n=m(t,["prebuiltVoiceConfig"]);return n!=null&&y(e,["prebuiltVoiceConfig"],O3e(n)),e}function L3e(t){const e={},n=m(t,["speaker"]);n!=null&&y(e,["speaker"],n);const r=m(t,["voiceConfig"]);return r!=null&&y(e,["voiceConfig"],goe(r)),e}function V3e(t){const e={},n=m(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>L3e(i))),y(e,["speakerVoiceConfigs"],r)}return e}function U3e(t){const e={},n=m(t,["voiceConfig"]);n!=null&&y(e,["voiceConfig"],goe(n));const r=m(t,["multiSpeakerVoiceConfig"]);r!=null&&y(e,["multiSpeakerVoiceConfig"],V3e(r));const i=m(t,["languageCode"]);return i!=null&&y(e,["languageCode"],i),e}function q3e(t){const e={},n=m(t,["includeThoughts"]);n!=null&&y(e,["includeThoughts"],n);const r=m(t,["thinkingBudget"]);return r!=null&&y(e,["thinkingBudget"],r),e}function F3e(t,e,n){const r={},i=m(e,["systemInstruction"]);n!==void 0&&i!=null&&y(n,["systemInstruction"],moe($r(i)));const o=m(e,["temperature"]);o!=null&&y(r,["temperature"],o);const s=m(e,["topP"]);s!=null&&y(r,["topP"],s);const a=m(e,["topK"]);a!=null&&y(r,["topK"],a);const u=m(e,["candidateCount"]);u!=null&&y(r,["candidateCount"],u);const c=m(e,["maxOutputTokens"]);c!=null&&y(r,["maxOutputTokens"],c);const d=m(e,["stopSequences"]);d!=null&&y(r,["stopSequences"],d);const h=m(e,["responseLogprobs"]);h!=null&&y(r,["responseLogprobs"],h);const g=m(e,["logprobs"]);g!=null&&y(r,["logprobs"],g);const _=m(e,["presencePenalty"]);_!=null&&y(r,["presencePenalty"],_);const S=m(e,["frequencyPenalty"]);S!=null&&y(r,["frequencyPenalty"],S);const b=m(e,["seed"]);b!=null&&y(r,["seed"],b);const T=m(e,["responseMimeType"]);T!=null&&y(r,["responseMimeType"],T);const x=m(e,["responseSchema"]);x!=null&&y(r,["responseSchema"],b3e(YL(x)));const C=m(e,["responseJsonSchema"]);if(C!=null&&y(r,["responseJsonSchema"],C),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=m(e,["safetySettings"]);if(n!==void 0&&I!=null){let L=I;Array.isArray(L)&&(L=L.map(F=>T3e(F))),y(n,["safetySettings"],L)}const N=m(e,["tools"]);if(n!==void 0&&N!=null){let L=fp(N);Array.isArray(L)&&(L=L.map(F=>P3e(cp(F)))),y(n,["tools"],L)}const V=m(e,["toolConfig"]);if(n!==void 0&&V!=null&&y(n,["toolConfig"],k3e(V)),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const q=m(e,["cachedContent"]);n!==void 0&&q!=null&&y(n,["cachedContent"],sl(t,q));const P=m(e,["responseModalities"]);P!=null&&y(r,["responseModalities"],P);const O=m(e,["mediaResolution"]);O!=null&&y(r,["mediaResolution"],O);const R=m(e,["speechConfig"]);if(R!=null&&y(r,["speechConfig"],U3e(JL(R))),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=m(e,["thinkingConfig"]);return U!=null&&y(r,["thinkingConfig"],q3e(U)),r}function B3e(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["request","model"],At(t,r));const i=m(e,["contents"]);if(i!=null){let s=wo(i);Array.isArray(s)&&(s=s.map(a=>moe(a))),y(n,["request","contents"],s)}const o=m(e,["config"]);return o!=null&&y(n,["request","generationConfig"],F3e(t,o,n)),n}function $3e(t,e){const n={};if(m(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(m(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=m(e,["fileName"]);r!=null&&y(n,["fileName"],r);const i=m(e,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>B3e(t,s))),y(n,["requests","requests"],o)}return n}function z3e(t,e){const n={},r=m(t,["displayName"]);if(e!==void 0&&r!=null&&y(e,["batch","displayName"],r),m(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function IN(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","model"],At(t,r));const i=m(e,["src"]);i!=null&&y(n,["batch","inputConfig"],$3e(t,doe(t,i)));const o=m(e,["config"]);return o!=null&&y(n,["config"],z3e(o,n)),n}function H3e(t,e){const n={},r=m(t,["taskType"]);e!==void 0&&r!=null&&y(e,["requests[]","taskType"],r);const i=m(t,["title"]);e!==void 0&&i!=null&&y(e,["requests[]","title"],i);const o=m(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&y(e,["requests[]","outputDimensionality"],o),m(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function G3e(t,e){const n={},r=m(e,["contents"]);r!=null&&y(n,["requests[]","request","content"],WL(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],H3e(i,n)),n}function j3e(t,e){const n={},r=m(e,["fileName"]);r!=null&&y(n,["file_name"],r);const i=m(e,["inlinedRequests"]);return i!=null&&y(n,["requests"],G3e(t,i)),n}function K3e(t,e){const n={},r=m(t,["displayName"]);return e!==void 0&&r!=null&&y(e,["batch","displayName"],r),n}function RN(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","model"],At(t,r));const i=m(e,["src"]);i!=null&&y(n,["batch","inputConfig"],j3e(t,i));const o=m(e,["config"]);return o!=null&&y(n,["config"],K3e(o,n)),n}function W3e(t,e){const n={},r=m(e,["name"]);r!=null&&y(n,["_url","name"],dp(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],i),n}function Y3e(t,e){const n={},r=m(e,["name"]);r!=null&&y(n,["_url","name"],dp(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],i),n}function J3e(t,e){const n={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const i=m(t,["pageToken"]);if(e!==void 0&&i!=null&&y(e,["_query","pageToken"],i),m(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function X3e(t){const e={},n=m(t,["config"]);return n!=null&&y(e,["config"],J3e(n,e)),e}function Q3e(t,e){const n={},r=m(e,["name"]);r!=null&&y(n,["_url","name"],dp(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],i),n}function Z3e(t){const e={},n=m(t,["format"]);n!=null&&y(e,["instancesFormat"],n);const r=m(t,["gcsUri"]);r!=null&&y(e,["gcsSource","uris"],r);const i=m(t,["bigqueryUri"]);if(i!=null&&y(e,["bigquerySource","inputUri"],i),m(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function e6e(t){const e={},n=m(t,["format"]);n!=null&&y(e,["predictionsFormat"],n);const r=m(t,["gcsUri"]);r!=null&&y(e,["gcsDestination","outputUriPrefix"],r);const i=m(t,["bigqueryUri"]);if(i!=null&&y(e,["bigqueryDestination","outputUri"],i),m(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(m(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function t6e(t,e){const n={},r=m(t,["displayName"]);e!==void 0&&r!=null&&y(e,["displayName"],r);const i=m(t,["dest"]);return e!==void 0&&i!=null&&y(e,["outputConfig"],e6e(m3e(i))),n}function n6e(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["model"],At(t,r));const i=m(e,["src"]);i!=null&&y(n,["inputConfig"],Z3e(doe(t,i)));const o=m(e,["config"]);return o!=null&&y(n,["config"],t6e(o,n)),n}function r6e(t,e){const n={},r=m(e,["name"]);r!=null&&y(n,["_url","name"],dp(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],i),n}function i6e(t,e){const n={},r=m(e,["name"]);r!=null&&y(n,["_url","name"],dp(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],i),n}function o6e(t,e){const n={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const i=m(t,["pageToken"]);e!==void 0&&i!=null&&y(e,["_query","pageToken"],i);const o=m(t,["filter"]);return e!==void 0&&o!=null&&y(e,["_query","filter"],o),n}function s6e(t){const e={},n=m(t,["config"]);return n!=null&&y(e,["config"],o6e(n,e)),e}function a6e(t,e){const n={},r=m(e,["name"]);r!=null&&y(n,["_url","name"],dp(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],i),n}function l6e(t){const e={},n=m(t,["fps"]);n!=null&&y(e,["fps"],n);const r=m(t,["endOffset"]);r!=null&&y(e,["endOffset"],r);const i=m(t,["startOffset"]);return i!=null&&y(e,["startOffset"],i),e}function u6e(t){const e={},n=m(t,["data"]);n!=null&&y(e,["data"],n);const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function c6e(t){const e={},n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function f6e(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const r=m(t,["args"]);r!=null&&y(e,["args"],r);const i=m(t,["name"]);return i!=null&&y(e,["name"],i),e}function d6e(t){const e={},n=m(t,["videoMetadata"]);n!=null&&y(e,["videoMetadata"],l6e(n));const r=m(t,["thought"]);r!=null&&y(e,["thought"],r);const i=m(t,["inlineData"]);i!=null&&y(e,["inlineData"],u6e(i));const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],c6e(o));const s=m(t,["thoughtSignature"]);s!=null&&y(e,["thoughtSignature"],s);const a=m(t,["functionCall"]);a!=null&&y(e,["functionCall"],f6e(a));const u=m(t,["codeExecutionResult"]);u!=null&&y(e,["codeExecutionResult"],u);const c=m(t,["executableCode"]);c!=null&&y(e,["executableCode"],c);const d=m(t,["functionResponse"]);d!=null&&y(e,["functionResponse"],d);const h=m(t,["text"]);return h!=null&&y(e,["text"],h),e}function h6e(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>d6e(o))),y(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&y(e,["role"],r),e}function p6e(t){const e={},n=m(t,["citationSources"]);return n!=null&&y(e,["citations"],n),e}function m6e(t){const e={},n=m(t,["retrievedUrl"]);n!=null&&y(e,["retrievedUrl"],n);const r=m(t,["urlRetrievalStatus"]);return r!=null&&y(e,["urlRetrievalStatus"],r),e}function g6e(t){const e={},n=m(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>m6e(i))),y(e,["urlMetadata"],r)}return e}function y6e(t){const e={},n=m(t,["content"]);n!=null&&y(e,["content"],h6e(n));const r=m(t,["citationMetadata"]);r!=null&&y(e,["citationMetadata"],p6e(r));const i=m(t,["tokenCount"]);i!=null&&y(e,["tokenCount"],i);const o=m(t,["finishReason"]);o!=null&&y(e,["finishReason"],o);const s=m(t,["urlContextMetadata"]);s!=null&&y(e,["urlContextMetadata"],g6e(s));const a=m(t,["avgLogprobs"]);a!=null&&y(e,["avgLogprobs"],a);const u=m(t,["groundingMetadata"]);u!=null&&y(e,["groundingMetadata"],u);const c=m(t,["index"]);c!=null&&y(e,["index"],c);const d=m(t,["logprobsResult"]);d!=null&&y(e,["logprobsResult"],d);const h=m(t,["safetyRatings"]);return h!=null&&y(e,["safetyRatings"],h),e}function v6e(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(c=>y6e(c))),y(e,["candidates"],u)}const i=m(t,["modelVersion"]);i!=null&&y(e,["modelVersion"],i);const o=m(t,["promptFeedback"]);o!=null&&y(e,["promptFeedback"],o);const s=m(t,["responseId"]);s!=null&&y(e,["responseId"],s);const a=m(t,["usageMetadata"]);return a!=null&&y(e,["usageMetadata"],a),e}function QL(t){const e={},n=m(t,["details"]);n!=null&&y(e,["details"],n);const r=m(t,["code"]);r!=null&&y(e,["code"],r);const i=m(t,["message"]);return i!=null&&y(e,["message"],i),e}function _6e(t){const e={},n=m(t,["response"]);n!=null&&y(e,["response"],v6e(n));const r=m(t,["error"]);return r!=null&&y(e,["error"],QL(r)),e}function w6e(t){const e={},n=m(t,["values"]);return n!=null&&y(e,["values"],n),e}function b6e(t){const e={},n=m(t,["embedding"]);n!=null&&y(e,["embedding"],w6e(n));const r=m(t,["tokenCount"]);return r!=null&&y(e,["tokenCount"],r),e}function T6e(t){const e={},n=m(t,["response"]);n!=null&&y(e,["response"],b6e(n));const r=m(t,["error"]);return r!=null&&y(e,["error"],QL(r)),e}function E6e(t){const e={},n=m(t,["responsesFile"]);n!=null&&y(e,["fileName"],n);const r=m(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>_6e(s))),y(e,["inlinedResponses"],o)}const i=m(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>T6e(s))),y(e,["inlinedEmbedContentResponses"],o)}return e}function Id(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const r=m(t,["metadata","displayName"]);r!=null&&y(e,["displayName"],r);const i=m(t,["metadata","state"]);i!=null&&y(e,["state"],poe(i));const o=m(t,["metadata","createTime"]);o!=null&&y(e,["createTime"],o);const s=m(t,["metadata","endTime"]);s!=null&&y(e,["endTime"],s);const a=m(t,["metadata","updateTime"]);a!=null&&y(e,["updateTime"],a);const u=m(t,["metadata","model"]);u!=null&&y(e,["model"],u);const c=m(t,["metadata","output"]);return c!=null&&y(e,["dest"],E6e(hoe(c))),e}function S6e(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const i=m(t,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Id(s))),y(e,["batchJobs"],o)}return e}function x6e(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["name"]);r!=null&&y(e,["name"],r);const i=m(t,["done"]);i!=null&&y(e,["done"],i);const o=m(t,["error"]);return o!=null&&y(e,["error"],QL(o)),e}function yoe(t){const e={},n=m(t,["details"]);n!=null&&y(e,["details"],n);const r=m(t,["code"]);r!=null&&y(e,["code"],r);const i=m(t,["message"]);return i!=null&&y(e,["message"],i),e}function A6e(t){const e={},n=m(t,["instancesFormat"]);n!=null&&y(e,["format"],n);const r=m(t,["gcsSource","uris"]);r!=null&&y(e,["gcsUri"],r);const i=m(t,["bigquerySource","inputUri"]);return i!=null&&y(e,["bigqueryUri"],i),e}function C6e(t){const e={},n=m(t,["predictionsFormat"]);n!=null&&y(e,["format"],n);const r=m(t,["gcsDestination","outputUriPrefix"]);r!=null&&y(e,["gcsUri"],r);const i=m(t,["bigqueryDestination","outputUri"]);return i!=null&&y(e,["bigqueryUri"],i),e}function N2(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const r=m(t,["displayName"]);r!=null&&y(e,["displayName"],r);const i=m(t,["state"]);i!=null&&y(e,["state"],poe(i));const o=m(t,["error"]);o!=null&&y(e,["error"],yoe(o));const s=m(t,["createTime"]);s!=null&&y(e,["createTime"],s);const a=m(t,["startTime"]);a!=null&&y(e,["startTime"],a);const u=m(t,["endTime"]);u!=null&&y(e,["endTime"],u);const c=m(t,["updateTime"]);c!=null&&y(e,["updateTime"],c);const d=m(t,["model"]);d!=null&&y(e,["model"],d);const h=m(t,["inputConfig"]);h!=null&&y(e,["src"],A6e(h));const g=m(t,["outputConfig"]);return g!=null&&y(e,["dest"],C6e(hoe(g))),e}function I6e(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const i=m(t,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>N2(s))),y(e,["batchJobs"],o)}return e}function R6e(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["name"]);r!=null&&y(e,["name"],r);const i=m(t,["done"]);i!=null&&y(e,["done"],i);const o=m(t,["error"]);return o!=null&&y(e,["error"],yoe(o)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ef;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(ef||(ef={}));class tv{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(i=s.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class P6e extends vf{constructor(e){super(),this.apiClient=e,this.create=async n=>{var r,i;if(this.apiClient.isVertexAI())return n.config=this.formatDestination(n.src,n.config),this.createInternal(n);const o=n.src;if(!(Array.isArray(n.src)||o.inlinedRequests!==void 0))return this.createInternal(n);const a=this.createInlinedGenerateContentRequest(n),u=a.path,c=a.body,d=IN(this.apiClient,n)._query||{};return this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()).then(g=>Id(g))},this.createEmbeddings=async n=>{var r,i;if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");if(!(n.src.inlinedRequests!==void 0))return this.createEmbeddingsInternal(n);const a=this.createInlinedEmbedContentRequest(n),u=a.path,c=a.body,d=RN(this.apiClient,n)._query||{};return this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()).then(g=>Id(g))},this.list=async(n={})=>new tv(ef.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=IN(this.apiClient,e),r=n._url,i=Ge("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,u=a.requests,c=[];for(const d of u){const h=Object.assign({},d);if(h.systemInstruction){const g=h.systemInstruction;delete h.systemInstruction;const _=h.request;_.systemInstruction=g,h.request=_}c.push(h)}return a.requests=c,delete n.config,delete n._url,delete n._query,{path:i,body:n}}createInlinedEmbedContentRequest(e){const n=RN(this.apiClient,e),r=n._url,i=Ge("{model}:asyncBatchEmbedContent",r),a=n.batch.inputConfig.requests,u=a.requests,c=[];delete a.config;for(const d of u){const h=Object.assign({},d),g=h.request;for(const _ in h)_!=="request"&&(g[_]=h[_],delete h[_]);c.push(h)}return a.requests=c,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const o=this.getGcsUri(e),s=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?r.dest=`${o.slice(0,-6)}/dest`:r.dest=`${o}_dest_${i}`;else if(s)r.dest=`${s}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=n6e(this.apiClient,e);return a=Ge("batchPredictionJobs",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>N2(d))}else{const c=IN(this.apiClient,e);return a=Ge("{model}:batchGenerateContent",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>Id(d))}}async createEmbeddingsInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=RN(this.apiClient,e);return o=Ge("{model}:asyncBatchEmbedContent",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>Id(u))}}async get(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=r6e(this.apiClient,e);return a=Ge("batchPredictionJobs/{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>N2(d))}else{const c=W3e(this.apiClient,e);return a=Ge("batches/{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>Id(d))}}async cancel(e){var n,r,i,o;let s="",a={};if(this.apiClient.isVertexAI()){const u=i6e(this.apiClient,e);s=Ge("batchPredictionJobs/{name}:cancel",u._url),a=u._query,delete u.config,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const u=Y3e(this.apiClient,e);s=Ge("batches/{name}:cancel",u._url),a=u._query,delete u.config,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=s6e(e);return a=Ge("batchPredictionJobs",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),s.then(d=>{const h=I6e(d),g=new P7;return Object.assign(g,h),g})}else{const c=X3e(e);return a=Ge("batches",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),s.then(d=>{const h=S6e(d),g=new P7;return Object.assign(g,h),g})}}async delete(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=a6e(this.apiClient,e);return a=Ge("batchPredictionJobs/{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),s.then(d=>R6e(d))}else{const c=Q3e(this.apiClient,e);return a=Ge("batches/{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),s.then(d=>x6e(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function N6e(t){const e={},n=m(t,["fps"]);n!=null&&y(e,["fps"],n);const r=m(t,["endOffset"]);r!=null&&y(e,["endOffset"],r);const i=m(t,["startOffset"]);return i!=null&&y(e,["startOffset"],i),e}function M6e(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["data"]);n!=null&&y(e,["data"],n);const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function D6e(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function k6e(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const r=m(t,["args"]);r!=null&&y(e,["args"],r);const i=m(t,["name"]);return i!=null&&y(e,["name"],i),e}function O6e(t){const e={},n=m(t,["videoMetadata"]);n!=null&&y(e,["videoMetadata"],N6e(n));const r=m(t,["thought"]);r!=null&&y(e,["thought"],r);const i=m(t,["inlineData"]);i!=null&&y(e,["inlineData"],M6e(i));const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],D6e(o));const s=m(t,["thoughtSignature"]);s!=null&&y(e,["thoughtSignature"],s);const a=m(t,["functionCall"]);a!=null&&y(e,["functionCall"],k6e(a));const u=m(t,["codeExecutionResult"]);u!=null&&y(e,["codeExecutionResult"],u);const c=m(t,["executableCode"]);c!=null&&y(e,["executableCode"],c);const d=m(t,["functionResponse"]);d!=null&&y(e,["functionResponse"],d);const h=m(t,["text"]);return h!=null&&y(e,["text"],h),e}function k7(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>O6e(o))),y(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&y(e,["role"],r),e}function L6e(t){const e={},n=m(t,["behavior"]);n!=null&&y(e,["behavior"],n);const r=m(t,["description"]);r!=null&&y(e,["description"],r);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const o=m(t,["parameters"]);o!=null&&y(e,["parameters"],o);const s=m(t,["parametersJsonSchema"]);s!=null&&y(e,["parametersJsonSchema"],s);const a=m(t,["response"]);a!=null&&y(e,["response"],a);const u=m(t,["responseJsonSchema"]);return u!=null&&y(e,["responseJsonSchema"],u),e}function V6e(t){const e={},n=m(t,["startTime"]);n!=null&&y(e,["startTime"],n);const r=m(t,["endTime"]);return r!=null&&y(e,["endTime"],r),e}function U6e(t){const e={},n=m(t,["timeRangeFilter"]);if(n!=null&&y(e,["timeRangeFilter"],V6e(n)),m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function q6e(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const r=m(t,["dynamicThreshold"]);return r!=null&&y(e,["dynamicThreshold"],r),e}function F6e(t){const e={},n=m(t,["dynamicRetrievalConfig"]);return n!=null&&y(e,["dynamicRetrievalConfig"],q6e(n)),e}function B6e(){return{}}function $6e(t){const e={},n=m(t,["environment"]);return n!=null&&y(e,["environment"],n),e}function z6e(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(c=>L6e(c))),y(e,["functionDeclarations"],u)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=m(t,["googleSearch"]);r!=null&&y(e,["googleSearch"],U6e(r));const i=m(t,["googleSearchRetrieval"]);if(i!=null&&y(e,["googleSearchRetrieval"],F6e(i)),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(m(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");m(t,["urlContext"])!=null&&y(e,["urlContext"],B6e());const s=m(t,["computerUse"]);s!=null&&y(e,["computerUse"],$6e(s));const a=m(t,["codeExecution"]);return a!=null&&y(e,["codeExecution"],a),e}function H6e(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const r=m(t,["allowedFunctionNames"]);return r!=null&&y(e,["allowedFunctionNames"],r),e}function G6e(t){const e={},n=m(t,["latitude"]);n!=null&&y(e,["latitude"],n);const r=m(t,["longitude"]);return r!=null&&y(e,["longitude"],r),e}function j6e(t){const e={},n=m(t,["latLng"]);n!=null&&y(e,["latLng"],G6e(n));const r=m(t,["languageCode"]);return r!=null&&y(e,["languageCode"],r),e}function K6e(t){const e={},n=m(t,["functionCallingConfig"]);n!=null&&y(e,["functionCallingConfig"],H6e(n));const r=m(t,["retrievalConfig"]);return r!=null&&y(e,["retrievalConfig"],j6e(r)),e}function W6e(t,e){const n={},r=m(t,["ttl"]);e!==void 0&&r!=null&&y(e,["ttl"],r);const i=m(t,["expireTime"]);e!==void 0&&i!=null&&y(e,["expireTime"],i);const o=m(t,["displayName"]);e!==void 0&&o!=null&&y(e,["displayName"],o);const s=m(t,["contents"]);if(e!==void 0&&s!=null){let d=wo(s);Array.isArray(d)&&(d=d.map(h=>k7(h))),y(e,["contents"],d)}const a=m(t,["systemInstruction"]);e!==void 0&&a!=null&&y(e,["systemInstruction"],k7($r(a)));const u=m(t,["tools"]);if(e!==void 0&&u!=null){let d=u;Array.isArray(d)&&(d=d.map(h=>z6e(h))),y(e,["tools"],d)}const c=m(t,["toolConfig"]);if(e!==void 0&&c!=null&&y(e,["toolConfig"],K6e(c)),m(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Y6e(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["model"],roe(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],W6e(i,n)),n}function J6e(t,e){const n={},r=m(e,["name"]);r!=null&&y(n,["_url","name"],sl(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],i),n}function X6e(t,e){const n={},r=m(e,["name"]);r!=null&&y(n,["_url","name"],sl(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],i),n}function Q6e(t,e){const n={},r=m(t,["ttl"]);e!==void 0&&r!=null&&y(e,["ttl"],r);const i=m(t,["expireTime"]);return e!==void 0&&i!=null&&y(e,["expireTime"],i),n}function Z6e(t,e){const n={},r=m(e,["name"]);r!=null&&y(n,["_url","name"],sl(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],Q6e(i,n)),n}function e$e(t,e){const n={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const i=m(t,["pageToken"]);return e!==void 0&&i!=null&&y(e,["_query","pageToken"],i),n}function t$e(t){const e={},n=m(t,["config"]);return n!=null&&y(e,["config"],e$e(n,e)),e}function n$e(t){const e={},n=m(t,["fps"]);n!=null&&y(e,["fps"],n);const r=m(t,["endOffset"]);r!=null&&y(e,["endOffset"],r);const i=m(t,["startOffset"]);return i!=null&&y(e,["startOffset"],i),e}function r$e(t){const e={},n=m(t,["displayName"]);n!=null&&y(e,["displayName"],n);const r=m(t,["data"]);r!=null&&y(e,["data"],r);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function i$e(t){const e={},n=m(t,["displayName"]);n!=null&&y(e,["displayName"],n);const r=m(t,["fileUri"]);r!=null&&y(e,["fileUri"],r);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function o$e(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const r=m(t,["args"]);r!=null&&y(e,["args"],r);const i=m(t,["name"]);return i!=null&&y(e,["name"],i),e}function s$e(t){const e={},n=m(t,["videoMetadata"]);n!=null&&y(e,["videoMetadata"],n$e(n));const r=m(t,["thought"]);r!=null&&y(e,["thought"],r);const i=m(t,["inlineData"]);i!=null&&y(e,["inlineData"],r$e(i));const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],i$e(o));const s=m(t,["thoughtSignature"]);s!=null&&y(e,["thoughtSignature"],s);const a=m(t,["functionCall"]);a!=null&&y(e,["functionCall"],o$e(a));const u=m(t,["codeExecutionResult"]);u!=null&&y(e,["codeExecutionResult"],u);const c=m(t,["executableCode"]);c!=null&&y(e,["executableCode"],c);const d=m(t,["functionResponse"]);d!=null&&y(e,["functionResponse"],d);const h=m(t,["text"]);return h!=null&&y(e,["text"],h),e}function O7(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>s$e(o))),y(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&y(e,["role"],r),e}function a$e(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&y(e,["description"],n);const r=m(t,["name"]);r!=null&&y(e,["name"],r);const i=m(t,["parameters"]);i!=null&&y(e,["parameters"],i);const o=m(t,["parametersJsonSchema"]);o!=null&&y(e,["parametersJsonSchema"],o);const s=m(t,["response"]);s!=null&&y(e,["response"],s);const a=m(t,["responseJsonSchema"]);return a!=null&&y(e,["responseJsonSchema"],a),e}function l$e(t){const e={},n=m(t,["startTime"]);n!=null&&y(e,["startTime"],n);const r=m(t,["endTime"]);return r!=null&&y(e,["endTime"],r),e}function u$e(t){const e={},n=m(t,["timeRangeFilter"]);n!=null&&y(e,["timeRangeFilter"],l$e(n));const r=m(t,["excludeDomains"]);return r!=null&&y(e,["excludeDomains"],r),e}function c$e(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const r=m(t,["dynamicThreshold"]);return r!=null&&y(e,["dynamicThreshold"],r),e}function f$e(t){const e={},n=m(t,["dynamicRetrievalConfig"]);return n!=null&&y(e,["dynamicRetrievalConfig"],c$e(n)),e}function d$e(t){const e={},n=m(t,["excludeDomains"]);return n!=null&&y(e,["excludeDomains"],n),e}function h$e(t){const e={},n=m(t,["apiKeyString"]);return n!=null&&y(e,["apiKeyString"],n),e}function p$e(t){const e={},n=m(t,["apiKeyConfig"]);n!=null&&y(e,["apiKeyConfig"],h$e(n));const r=m(t,["authType"]);r!=null&&y(e,["authType"],r);const i=m(t,["googleServiceAccountConfig"]);i!=null&&y(e,["googleServiceAccountConfig"],i);const o=m(t,["httpBasicAuthConfig"]);o!=null&&y(e,["httpBasicAuthConfig"],o);const s=m(t,["oauthConfig"]);s!=null&&y(e,["oauthConfig"],s);const a=m(t,["oidcConfig"]);return a!=null&&y(e,["oidcConfig"],a),e}function m$e(t){const e={},n=m(t,["authConfig"]);return n!=null&&y(e,["authConfig"],p$e(n)),e}function g$e(){return{}}function y$e(t){const e={},n=m(t,["environment"]);return n!=null&&y(e,["environment"],n),e}function v$e(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(g=>a$e(g))),y(e,["functionDeclarations"],h)}const r=m(t,["retrieval"]);r!=null&&y(e,["retrieval"],r);const i=m(t,["googleSearch"]);i!=null&&y(e,["googleSearch"],u$e(i));const o=m(t,["googleSearchRetrieval"]);o!=null&&y(e,["googleSearchRetrieval"],f$e(o));const s=m(t,["enterpriseWebSearch"]);s!=null&&y(e,["enterpriseWebSearch"],d$e(s));const a=m(t,["googleMaps"]);a!=null&&y(e,["googleMaps"],m$e(a)),m(t,["urlContext"])!=null&&y(e,["urlContext"],g$e());const c=m(t,["computerUse"]);c!=null&&y(e,["computerUse"],y$e(c));const d=m(t,["codeExecution"]);return d!=null&&y(e,["codeExecution"],d),e}function _$e(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const r=m(t,["allowedFunctionNames"]);return r!=null&&y(e,["allowedFunctionNames"],r),e}function w$e(t){const e={},n=m(t,["latitude"]);n!=null&&y(e,["latitude"],n);const r=m(t,["longitude"]);return r!=null&&y(e,["longitude"],r),e}function b$e(t){const e={},n=m(t,["latLng"]);n!=null&&y(e,["latLng"],w$e(n));const r=m(t,["languageCode"]);return r!=null&&y(e,["languageCode"],r),e}function T$e(t){const e={},n=m(t,["functionCallingConfig"]);n!=null&&y(e,["functionCallingConfig"],_$e(n));const r=m(t,["retrievalConfig"]);return r!=null&&y(e,["retrievalConfig"],b$e(r)),e}function E$e(t,e){const n={},r=m(t,["ttl"]);e!==void 0&&r!=null&&y(e,["ttl"],r);const i=m(t,["expireTime"]);e!==void 0&&i!=null&&y(e,["expireTime"],i);const o=m(t,["displayName"]);e!==void 0&&o!=null&&y(e,["displayName"],o);const s=m(t,["contents"]);if(e!==void 0&&s!=null){let h=wo(s);Array.isArray(h)&&(h=h.map(g=>O7(g))),y(e,["contents"],h)}const a=m(t,["systemInstruction"]);e!==void 0&&a!=null&&y(e,["systemInstruction"],O7($r(a)));const u=m(t,["tools"]);if(e!==void 0&&u!=null){let h=u;Array.isArray(h)&&(h=h.map(g=>v$e(g))),y(e,["tools"],h)}const c=m(t,["toolConfig"]);e!==void 0&&c!=null&&y(e,["toolConfig"],T$e(c));const d=m(t,["kmsKeyName"]);return e!==void 0&&d!=null&&y(e,["encryption_spec","kmsKeyName"],d),n}function S$e(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["model"],roe(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],E$e(i,n)),n}function x$e(t,e){const n={},r=m(e,["name"]);r!=null&&y(n,["_url","name"],sl(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],i),n}function A$e(t,e){const n={},r=m(e,["name"]);r!=null&&y(n,["_url","name"],sl(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],i),n}function C$e(t,e){const n={},r=m(t,["ttl"]);e!==void 0&&r!=null&&y(e,["ttl"],r);const i=m(t,["expireTime"]);return e!==void 0&&i!=null&&y(e,["expireTime"],i),n}function I$e(t,e){const n={},r=m(e,["name"]);r!=null&&y(n,["_url","name"],sl(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],C$e(i,n)),n}function R$e(t,e){const n={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const i=m(t,["pageToken"]);return e!==void 0&&i!=null&&y(e,["_query","pageToken"],i),n}function P$e(t){const e={},n=m(t,["config"]);return n!=null&&y(e,["config"],R$e(n,e)),e}function S0(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const r=m(t,["displayName"]);r!=null&&y(e,["displayName"],r);const i=m(t,["model"]);i!=null&&y(e,["model"],i);const o=m(t,["createTime"]);o!=null&&y(e,["createTime"],o);const s=m(t,["updateTime"]);s!=null&&y(e,["updateTime"],s);const a=m(t,["expireTime"]);a!=null&&y(e,["expireTime"],a);const u=m(t,["usageMetadata"]);return u!=null&&y(e,["usageMetadata"],u),e}function N$e(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function M$e(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const i=m(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>S0(s))),y(e,["cachedContents"],o)}return e}function x0(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const r=m(t,["displayName"]);r!=null&&y(e,["displayName"],r);const i=m(t,["model"]);i!=null&&y(e,["model"],i);const o=m(t,["createTime"]);o!=null&&y(e,["createTime"],o);const s=m(t,["updateTime"]);s!=null&&y(e,["updateTime"],s);const a=m(t,["expireTime"]);a!=null&&y(e,["expireTime"],a);const u=m(t,["usageMetadata"]);return u!=null&&y(e,["usageMetadata"],u),e}function D$e(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function k$e(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const i=m(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>x0(s))),y(e,["cachedContents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class O$e extends vf{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new tv(ef.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=S$e(this.apiClient,e);return a=Ge("cachedContents",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>x0(d))}else{const c=Y6e(this.apiClient,e);return a=Ge("cachedContents",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>S0(d))}}async get(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=x$e(this.apiClient,e);return a=Ge("{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>x0(d))}else{const c=J6e(this.apiClient,e);return a=Ge("{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>S0(d))}}async delete(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=A$e(this.apiClient,e);return a=Ge("{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),s.then(d=>{const h=D$e(d),g=new I7;return Object.assign(g,h),g})}else{const c=X6e(this.apiClient,e);return a=Ge("{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),s.then(d=>{const h=N$e(d),g=new I7;return Object.assign(g,h),g})}}async update(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=I$e(this.apiClient,e);return a=Ge("{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>x0(d))}else{const c=Z6e(this.apiClient,e);return a=Ge("{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>S0(d))}}async listInternal(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=P$e(e);return a=Ge("cachedContents",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),s.then(d=>{const h=k$e(d),g=new R7;return Object.assign(g,h),g})}else{const c=t$e(e);return a=Ge("cachedContents",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),s.then(d=>{const h=M$e(d),g=new R7;return Object.assign(g,h),g})}}}function L7(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Qt(t){return this instanceof Qt?(this.v=t,this):new Qt(t)}function jd(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(_){return function(S){return Promise.resolve(S).then(_,h)}}function a(_,S){r[_]&&(i[_]=function(b){return new Promise(function(T,x){o.push([_,b,T,x])>1||u(_,b)})},S&&(i[_]=S(i[_])))}function u(_,S){try{c(r[_](S))}catch(b){g(o[0][3],b)}}function c(_){_.value instanceof Qt?Promise.resolve(_.value.v).then(d,h):g(o[0][2],_)}function d(_){u("next",_)}function h(_){u("throw",_)}function g(_,S){_(S),o.shift(),o.length&&u(o[0][0],o[0][1])}}function bg(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof L7=="function"?L7(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(c){o({value:c,done:a})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function L$e(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:voe(n)}function voe(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function V$e(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function V7(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let o=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),o&&!voe(t[r])&&(o=!1),r++;o?e.push(...i):e.pop()}return e}class U$e{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new q$e(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class q$e{constructor(e,n,r,i={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),V$e(o)}async sendMessage(e){var n;await this.sendPromise;const r=$r(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,s,a;const u=await i,c=(s=(o=u.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,d=u.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let g=[];d!=null&&(g=(a=d.slice(h))!==null&&a!==void 0?a:[]);const _=c?[c]:[];this.recordHistory(r,_,g)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=$r(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){const n=e?V7(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,i;return jd(this,arguments,function*(){var s,a,u,c;const d=[];try{for(var h=!0,g=bg(e),_;_=yield Qt(g.next()),s=_.done,!s;h=!0){c=_.value,h=!1;const S=c;if(L$e(S)){const b=(i=(r=S.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;b!==void 0&&d.push(b)}yield yield Qt(S)}}catch(S){a={error:S}}finally{try{!h&&!s&&(u=g.return)&&(yield Qt(u.call(g)))}finally{if(a)throw a.error}}this.recordHistory(n,d)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(o=>o.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...V7(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jT extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,jT.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function F$e(t,e){const n={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const i=m(t,["pageToken"]);return e!==void 0&&i!=null&&y(e,["_query","pageToken"],i),n}function B$e(t){const e={},n=m(t,["config"]);return n!=null&&y(e,["config"],F$e(n,e)),e}function $$e(t){const e={},n=m(t,["details"]);n!=null&&y(e,["details"],n);const r=m(t,["message"]);r!=null&&y(e,["message"],r);const i=m(t,["code"]);return i!=null&&y(e,["code"],i),e}function z$e(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const r=m(t,["displayName"]);r!=null&&y(e,["displayName"],r);const i=m(t,["mimeType"]);i!=null&&y(e,["mimeType"],i);const o=m(t,["sizeBytes"]);o!=null&&y(e,["sizeBytes"],o);const s=m(t,["createTime"]);s!=null&&y(e,["createTime"],s);const a=m(t,["expirationTime"]);a!=null&&y(e,["expirationTime"],a);const u=m(t,["updateTime"]);u!=null&&y(e,["updateTime"],u);const c=m(t,["sha256Hash"]);c!=null&&y(e,["sha256Hash"],c);const d=m(t,["uri"]);d!=null&&y(e,["uri"],d);const h=m(t,["downloadUri"]);h!=null&&y(e,["downloadUri"],h);const g=m(t,["state"]);g!=null&&y(e,["state"],g);const _=m(t,["source"]);_!=null&&y(e,["source"],_);const S=m(t,["videoMetadata"]);S!=null&&y(e,["videoMetadata"],S);const b=m(t,["error"]);return b!=null&&y(e,["error"],$$e(b)),e}function H$e(t){const e={},n=m(t,["file"]);n!=null&&y(e,["file"],z$e(n));const r=m(t,["config"]);return r!=null&&y(e,["config"],r),e}function G$e(t){const e={},n=m(t,["name"]);n!=null&&y(e,["_url","file"],uoe(n));const r=m(t,["config"]);return r!=null&&y(e,["config"],r),e}function j$e(t){const e={},n=m(t,["name"]);n!=null&&y(e,["_url","file"],uoe(n));const r=m(t,["config"]);return r!=null&&y(e,["config"],r),e}function K$e(t){const e={},n=m(t,["details"]);n!=null&&y(e,["details"],n);const r=m(t,["message"]);r!=null&&y(e,["message"],r);const i=m(t,["code"]);return i!=null&&y(e,["code"],i),e}function M2(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const r=m(t,["displayName"]);r!=null&&y(e,["displayName"],r);const i=m(t,["mimeType"]);i!=null&&y(e,["mimeType"],i);const o=m(t,["sizeBytes"]);o!=null&&y(e,["sizeBytes"],o);const s=m(t,["createTime"]);s!=null&&y(e,["createTime"],s);const a=m(t,["expirationTime"]);a!=null&&y(e,["expirationTime"],a);const u=m(t,["updateTime"]);u!=null&&y(e,["updateTime"],u);const c=m(t,["sha256Hash"]);c!=null&&y(e,["sha256Hash"],c);const d=m(t,["uri"]);d!=null&&y(e,["uri"],d);const h=m(t,["downloadUri"]);h!=null&&y(e,["downloadUri"],h);const g=m(t,["state"]);g!=null&&y(e,["state"],g);const _=m(t,["source"]);_!=null&&y(e,["source"],_);const S=m(t,["videoMetadata"]);S!=null&&y(e,["videoMetadata"],S);const b=m(t,["error"]);return b!=null&&y(e,["error"],K$e(b)),e}function W$e(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const i=m(t,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>M2(s))),y(e,["files"],o)}return e}function Y$e(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function J$e(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class X$e extends vf{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new tv(ef.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>M2(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=B$e(e);return o=Ge("files",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:u.headers},d})),i.then(u=>{const c=W$e(u),d=new n3e;return Object.assign(d,c),d})}}async createInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=H$e(e);return o=Ge("upload/v1beta/files",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const c=Y$e(u),d=new r3e;return Object.assign(d,c),d})}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=G$e(e);return o=Ge("files/{file}",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>M2(u))}}async delete(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=j$e(e);return o=Ge("files/{file}",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:u.headers},d})),i.then(u=>{const c=J$e(u),d=new i3e;return Object.assign(d,c),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Q$e(t){const e={},n=m(t,["voiceName"]);return n!=null&&y(e,["voiceName"],n),e}function _oe(t){const e={},n=m(t,["prebuiltVoiceConfig"]);return n!=null&&y(e,["prebuiltVoiceConfig"],Q$e(n)),e}function Z$e(t){const e={},n=m(t,["speaker"]);n!=null&&y(e,["speaker"],n);const r=m(t,["voiceConfig"]);return r!=null&&y(e,["voiceConfig"],_oe(r)),e}function e5e(t){const e={},n=m(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Z$e(i))),y(e,["speakerVoiceConfigs"],r)}return e}function t5e(t){const e={},n=m(t,["voiceConfig"]);n!=null&&y(e,["voiceConfig"],_oe(n));const r=m(t,["multiSpeakerVoiceConfig"]);r!=null&&y(e,["multiSpeakerVoiceConfig"],e5e(r));const i=m(t,["languageCode"]);return i!=null&&y(e,["languageCode"],i),e}function n5e(t){const e={},n=m(t,["fps"]);n!=null&&y(e,["fps"],n);const r=m(t,["endOffset"]);r!=null&&y(e,["endOffset"],r);const i=m(t,["startOffset"]);return i!=null&&y(e,["startOffset"],i),e}function r5e(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["data"]);n!=null&&y(e,["data"],n);const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function i5e(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function o5e(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const r=m(t,["args"]);r!=null&&y(e,["args"],r);const i=m(t,["name"]);return i!=null&&y(e,["name"],i),e}function s5e(t){const e={},n=m(t,["videoMetadata"]);n!=null&&y(e,["videoMetadata"],n5e(n));const r=m(t,["thought"]);r!=null&&y(e,["thought"],r);const i=m(t,["inlineData"]);i!=null&&y(e,["inlineData"],r5e(i));const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],i5e(o));const s=m(t,["thoughtSignature"]);s!=null&&y(e,["thoughtSignature"],s);const a=m(t,["functionCall"]);a!=null&&y(e,["functionCall"],o5e(a));const u=m(t,["codeExecutionResult"]);u!=null&&y(e,["codeExecutionResult"],u);const c=m(t,["executableCode"]);c!=null&&y(e,["executableCode"],c);const d=m(t,["functionResponse"]);d!=null&&y(e,["functionResponse"],d);const h=m(t,["text"]);return h!=null&&y(e,["text"],h),e}function a5e(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>s5e(o))),y(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&y(e,["role"],r),e}function l5e(t){const e={},n=m(t,["behavior"]);n!=null&&y(e,["behavior"],n);const r=m(t,["description"]);r!=null&&y(e,["description"],r);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const o=m(t,["parameters"]);o!=null&&y(e,["parameters"],o);const s=m(t,["parametersJsonSchema"]);s!=null&&y(e,["parametersJsonSchema"],s);const a=m(t,["response"]);a!=null&&y(e,["response"],a);const u=m(t,["responseJsonSchema"]);return u!=null&&y(e,["responseJsonSchema"],u),e}function u5e(t){const e={},n=m(t,["startTime"]);n!=null&&y(e,["startTime"],n);const r=m(t,["endTime"]);return r!=null&&y(e,["endTime"],r),e}function c5e(t){const e={},n=m(t,["timeRangeFilter"]);if(n!=null&&y(e,["timeRangeFilter"],u5e(n)),m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function f5e(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const r=m(t,["dynamicThreshold"]);return r!=null&&y(e,["dynamicThreshold"],r),e}function d5e(t){const e={},n=m(t,["dynamicRetrievalConfig"]);return n!=null&&y(e,["dynamicRetrievalConfig"],f5e(n)),e}function h5e(){return{}}function p5e(t){const e={},n=m(t,["environment"]);return n!=null&&y(e,["environment"],n),e}function m5e(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(c=>l5e(c))),y(e,["functionDeclarations"],u)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=m(t,["googleSearch"]);r!=null&&y(e,["googleSearch"],c5e(r));const i=m(t,["googleSearchRetrieval"]);if(i!=null&&y(e,["googleSearchRetrieval"],d5e(i)),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(m(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");m(t,["urlContext"])!=null&&y(e,["urlContext"],h5e());const s=m(t,["computerUse"]);s!=null&&y(e,["computerUse"],p5e(s));const a=m(t,["codeExecution"]);return a!=null&&y(e,["codeExecution"],a),e}function g5e(t){const e={},n=m(t,["handle"]);if(n!=null&&y(e,["handle"],n),m(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function U7(){return{}}function y5e(t){const e={},n=m(t,["disabled"]);n!=null&&y(e,["disabled"],n);const r=m(t,["startOfSpeechSensitivity"]);r!=null&&y(e,["startOfSpeechSensitivity"],r);const i=m(t,["endOfSpeechSensitivity"]);i!=null&&y(e,["endOfSpeechSensitivity"],i);const o=m(t,["prefixPaddingMs"]);o!=null&&y(e,["prefixPaddingMs"],o);const s=m(t,["silenceDurationMs"]);return s!=null&&y(e,["silenceDurationMs"],s),e}function v5e(t){const e={},n=m(t,["automaticActivityDetection"]);n!=null&&y(e,["automaticActivityDetection"],y5e(n));const r=m(t,["activityHandling"]);r!=null&&y(e,["activityHandling"],r);const i=m(t,["turnCoverage"]);return i!=null&&y(e,["turnCoverage"],i),e}function _5e(t){const e={},n=m(t,["targetTokens"]);return n!=null&&y(e,["targetTokens"],n),e}function w5e(t){const e={},n=m(t,["triggerTokens"]);n!=null&&y(e,["triggerTokens"],n);const r=m(t,["slidingWindow"]);return r!=null&&y(e,["slidingWindow"],_5e(r)),e}function b5e(t){const e={},n=m(t,["proactiveAudio"]);return n!=null&&y(e,["proactiveAudio"],n),e}function T5e(t,e){const n={},r=m(t,["generationConfig"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig"],r);const i=m(t,["responseModalities"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig","responseModalities"],i);const o=m(t,["temperature"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","temperature"],o);const s=m(t,["topP"]);e!==void 0&&s!=null&&y(e,["setup","generationConfig","topP"],s);const a=m(t,["topK"]);e!==void 0&&a!=null&&y(e,["setup","generationConfig","topK"],a);const u=m(t,["maxOutputTokens"]);e!==void 0&&u!=null&&y(e,["setup","generationConfig","maxOutputTokens"],u);const c=m(t,["mediaResolution"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","mediaResolution"],c);const d=m(t,["seed"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","seed"],d);const h=m(t,["speechConfig"]);e!==void 0&&h!=null&&y(e,["setup","generationConfig","speechConfig"],t5e(XL(h)));const g=m(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],g);const _=m(t,["systemInstruction"]);e!==void 0&&_!=null&&y(e,["setup","systemInstruction"],a5e($r(_)));const S=m(t,["tools"]);if(e!==void 0&&S!=null){let V=fp(S);Array.isArray(V)&&(V=V.map(q=>m5e(cp(q)))),y(e,["setup","tools"],V)}const b=m(t,["sessionResumption"]);e!==void 0&&b!=null&&y(e,["setup","sessionResumption"],g5e(b));const T=m(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&y(e,["setup","inputAudioTranscription"],U7());const x=m(t,["outputAudioTranscription"]);e!==void 0&&x!=null&&y(e,["setup","outputAudioTranscription"],U7());const C=m(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&y(e,["setup","realtimeInputConfig"],v5e(C));const I=m(t,["contextWindowCompression"]);e!==void 0&&I!=null&&y(e,["setup","contextWindowCompression"],w5e(I));const N=m(t,["proactivity"]);return e!==void 0&&N!=null&&y(e,["setup","proactivity"],b5e(N)),n}function E5e(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["setup","model"],At(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],T5e(i,n)),n}function S5e(){return{}}function x5e(){return{}}function A5e(t){const e={},n=m(t,["media"]);n!=null&&y(e,["mediaChunks"],ioe(n));const r=m(t,["audio"]);r!=null&&y(e,["audio"],soe(r));const i=m(t,["audioStreamEnd"]);i!=null&&y(e,["audioStreamEnd"],i);const o=m(t,["video"]);o!=null&&y(e,["video"],ooe(o));const s=m(t,["text"]);return s!=null&&y(e,["text"],s),m(t,["activityStart"])!=null&&y(e,["activityStart"],S5e()),m(t,["activityEnd"])!=null&&y(e,["activityEnd"],x5e()),e}function woe(t){const e={},n=m(t,["text"]);n!=null&&y(e,["text"],n);const r=m(t,["weight"]);return r!=null&&y(e,["weight"],r),e}function C5e(t){const e={},n=m(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>woe(i))),y(e,["weightedPrompts"],r)}return e}function boe(t){const e={},n=m(t,["temperature"]);n!=null&&y(e,["temperature"],n);const r=m(t,["topK"]);r!=null&&y(e,["topK"],r);const i=m(t,["seed"]);i!=null&&y(e,["seed"],i);const o=m(t,["guidance"]);o!=null&&y(e,["guidance"],o);const s=m(t,["bpm"]);s!=null&&y(e,["bpm"],s);const a=m(t,["density"]);a!=null&&y(e,["density"],a);const u=m(t,["brightness"]);u!=null&&y(e,["brightness"],u);const c=m(t,["scale"]);c!=null&&y(e,["scale"],c);const d=m(t,["muteBass"]);d!=null&&y(e,["muteBass"],d);const h=m(t,["muteDrums"]);h!=null&&y(e,["muteDrums"],h);const g=m(t,["onlyBassAndDrums"]);g!=null&&y(e,["onlyBassAndDrums"],g);const _=m(t,["musicGenerationMode"]);return _!=null&&y(e,["musicGenerationMode"],_),e}function I5e(t){const e={},n=m(t,["musicGenerationConfig"]);return n!=null&&y(e,["musicGenerationConfig"],boe(n)),e}function Toe(t){const e={},n=m(t,["model"]);return n!=null&&y(e,["model"],n),e}function Eoe(t){const e={},n=m(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>woe(i))),y(e,["weightedPrompts"],r)}return e}function D2(t){const e={},n=m(t,["setup"]);n!=null&&y(e,["setup"],Toe(n));const r=m(t,["clientContent"]);r!=null&&y(e,["clientContent"],Eoe(r));const i=m(t,["musicGenerationConfig"]);i!=null&&y(e,["musicGenerationConfig"],boe(i));const o=m(t,["playbackControl"]);return o!=null&&y(e,["playbackControl"],o),e}function R5e(t){const e={},n=m(t,["voiceName"]);return n!=null&&y(e,["voiceName"],n),e}function P5e(t){const e={},n=m(t,["prebuiltVoiceConfig"]);return n!=null&&y(e,["prebuiltVoiceConfig"],R5e(n)),e}function N5e(t){const e={},n=m(t,["voiceConfig"]);if(n!=null&&y(e,["voiceConfig"],P5e(n)),m(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=m(t,["languageCode"]);return r!=null&&y(e,["languageCode"],r),e}function M5e(t){const e={},n=m(t,["fps"]);n!=null&&y(e,["fps"],n);const r=m(t,["endOffset"]);r!=null&&y(e,["endOffset"],r);const i=m(t,["startOffset"]);return i!=null&&y(e,["startOffset"],i),e}function D5e(t){const e={},n=m(t,["displayName"]);n!=null&&y(e,["displayName"],n);const r=m(t,["data"]);r!=null&&y(e,["data"],r);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function k5e(t){const e={},n=m(t,["displayName"]);n!=null&&y(e,["displayName"],n);const r=m(t,["fileUri"]);r!=null&&y(e,["fileUri"],r);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function O5e(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const r=m(t,["args"]);r!=null&&y(e,["args"],r);const i=m(t,["name"]);return i!=null&&y(e,["name"],i),e}function L5e(t){const e={},n=m(t,["videoMetadata"]);n!=null&&y(e,["videoMetadata"],M5e(n));const r=m(t,["thought"]);r!=null&&y(e,["thought"],r);const i=m(t,["inlineData"]);i!=null&&y(e,["inlineData"],D5e(i));const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],k5e(o));const s=m(t,["thoughtSignature"]);s!=null&&y(e,["thoughtSignature"],s);const a=m(t,["functionCall"]);a!=null&&y(e,["functionCall"],O5e(a));const u=m(t,["codeExecutionResult"]);u!=null&&y(e,["codeExecutionResult"],u);const c=m(t,["executableCode"]);c!=null&&y(e,["executableCode"],c);const d=m(t,["functionResponse"]);d!=null&&y(e,["functionResponse"],d);const h=m(t,["text"]);return h!=null&&y(e,["text"],h),e}function V5e(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>L5e(o))),y(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&y(e,["role"],r),e}function U5e(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&y(e,["description"],n);const r=m(t,["name"]);r!=null&&y(e,["name"],r);const i=m(t,["parameters"]);i!=null&&y(e,["parameters"],i);const o=m(t,["parametersJsonSchema"]);o!=null&&y(e,["parametersJsonSchema"],o);const s=m(t,["response"]);s!=null&&y(e,["response"],s);const a=m(t,["responseJsonSchema"]);return a!=null&&y(e,["responseJsonSchema"],a),e}function q5e(t){const e={},n=m(t,["startTime"]);n!=null&&y(e,["startTime"],n);const r=m(t,["endTime"]);return r!=null&&y(e,["endTime"],r),e}function F5e(t){const e={},n=m(t,["timeRangeFilter"]);n!=null&&y(e,["timeRangeFilter"],q5e(n));const r=m(t,["excludeDomains"]);return r!=null&&y(e,["excludeDomains"],r),e}function B5e(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const r=m(t,["dynamicThreshold"]);return r!=null&&y(e,["dynamicThreshold"],r),e}function $5e(t){const e={},n=m(t,["dynamicRetrievalConfig"]);return n!=null&&y(e,["dynamicRetrievalConfig"],B5e(n)),e}function z5e(t){const e={},n=m(t,["excludeDomains"]);return n!=null&&y(e,["excludeDomains"],n),e}function H5e(t){const e={},n=m(t,["apiKeyString"]);return n!=null&&y(e,["apiKeyString"],n),e}function G5e(t){const e={},n=m(t,["apiKeyConfig"]);n!=null&&y(e,["apiKeyConfig"],H5e(n));const r=m(t,["authType"]);r!=null&&y(e,["authType"],r);const i=m(t,["googleServiceAccountConfig"]);i!=null&&y(e,["googleServiceAccountConfig"],i);const o=m(t,["httpBasicAuthConfig"]);o!=null&&y(e,["httpBasicAuthConfig"],o);const s=m(t,["oauthConfig"]);s!=null&&y(e,["oauthConfig"],s);const a=m(t,["oidcConfig"]);return a!=null&&y(e,["oidcConfig"],a),e}function j5e(t){const e={},n=m(t,["authConfig"]);return n!=null&&y(e,["authConfig"],G5e(n)),e}function K5e(){return{}}function W5e(t){const e={},n=m(t,["environment"]);return n!=null&&y(e,["environment"],n),e}function Y5e(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(g=>U5e(g))),y(e,["functionDeclarations"],h)}const r=m(t,["retrieval"]);r!=null&&y(e,["retrieval"],r);const i=m(t,["googleSearch"]);i!=null&&y(e,["googleSearch"],F5e(i));const o=m(t,["googleSearchRetrieval"]);o!=null&&y(e,["googleSearchRetrieval"],$5e(o));const s=m(t,["enterpriseWebSearch"]);s!=null&&y(e,["enterpriseWebSearch"],z5e(s));const a=m(t,["googleMaps"]);a!=null&&y(e,["googleMaps"],j5e(a)),m(t,["urlContext"])!=null&&y(e,["urlContext"],K5e());const c=m(t,["computerUse"]);c!=null&&y(e,["computerUse"],W5e(c));const d=m(t,["codeExecution"]);return d!=null&&y(e,["codeExecution"],d),e}function J5e(t){const e={},n=m(t,["handle"]);n!=null&&y(e,["handle"],n);const r=m(t,["transparent"]);return r!=null&&y(e,["transparent"],r),e}function q7(){return{}}function X5e(t){const e={},n=m(t,["disabled"]);n!=null&&y(e,["disabled"],n);const r=m(t,["startOfSpeechSensitivity"]);r!=null&&y(e,["startOfSpeechSensitivity"],r);const i=m(t,["endOfSpeechSensitivity"]);i!=null&&y(e,["endOfSpeechSensitivity"],i);const o=m(t,["prefixPaddingMs"]);o!=null&&y(e,["prefixPaddingMs"],o);const s=m(t,["silenceDurationMs"]);return s!=null&&y(e,["silenceDurationMs"],s),e}function Q5e(t){const e={},n=m(t,["automaticActivityDetection"]);n!=null&&y(e,["automaticActivityDetection"],X5e(n));const r=m(t,["activityHandling"]);r!=null&&y(e,["activityHandling"],r);const i=m(t,["turnCoverage"]);return i!=null&&y(e,["turnCoverage"],i),e}function Z5e(t){const e={},n=m(t,["targetTokens"]);return n!=null&&y(e,["targetTokens"],n),e}function eze(t){const e={},n=m(t,["triggerTokens"]);n!=null&&y(e,["triggerTokens"],n);const r=m(t,["slidingWindow"]);return r!=null&&y(e,["slidingWindow"],Z5e(r)),e}function tze(t){const e={},n=m(t,["proactiveAudio"]);return n!=null&&y(e,["proactiveAudio"],n),e}function nze(t,e){const n={},r=m(t,["generationConfig"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig"],r);const i=m(t,["responseModalities"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig","responseModalities"],i);const o=m(t,["temperature"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","temperature"],o);const s=m(t,["topP"]);e!==void 0&&s!=null&&y(e,["setup","generationConfig","topP"],s);const a=m(t,["topK"]);e!==void 0&&a!=null&&y(e,["setup","generationConfig","topK"],a);const u=m(t,["maxOutputTokens"]);e!==void 0&&u!=null&&y(e,["setup","generationConfig","maxOutputTokens"],u);const c=m(t,["mediaResolution"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","mediaResolution"],c);const d=m(t,["seed"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","seed"],d);const h=m(t,["speechConfig"]);e!==void 0&&h!=null&&y(e,["setup","generationConfig","speechConfig"],N5e(XL(h)));const g=m(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],g);const _=m(t,["systemInstruction"]);e!==void 0&&_!=null&&y(e,["setup","systemInstruction"],V5e($r(_)));const S=m(t,["tools"]);if(e!==void 0&&S!=null){let V=fp(S);Array.isArray(V)&&(V=V.map(q=>Y5e(cp(q)))),y(e,["setup","tools"],V)}const b=m(t,["sessionResumption"]);e!==void 0&&b!=null&&y(e,["setup","sessionResumption"],J5e(b));const T=m(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&y(e,["setup","inputAudioTranscription"],q7());const x=m(t,["outputAudioTranscription"]);e!==void 0&&x!=null&&y(e,["setup","outputAudioTranscription"],q7());const C=m(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&y(e,["setup","realtimeInputConfig"],Q5e(C));const I=m(t,["contextWindowCompression"]);e!==void 0&&I!=null&&y(e,["setup","contextWindowCompression"],eze(I));const N=m(t,["proactivity"]);return e!==void 0&&N!=null&&y(e,["setup","proactivity"],tze(N)),n}function rze(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["setup","model"],At(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],nze(i,n)),n}function ize(){return{}}function oze(){return{}}function sze(t){const e={},n=m(t,["media"]);n!=null&&y(e,["mediaChunks"],ioe(n));const r=m(t,["audio"]);r!=null&&y(e,["audio"],soe(r));const i=m(t,["audioStreamEnd"]);i!=null&&y(e,["audioStreamEnd"],i);const o=m(t,["video"]);o!=null&&y(e,["video"],ooe(o));const s=m(t,["text"]);return s!=null&&y(e,["text"],s),m(t,["activityStart"])!=null&&y(e,["activityStart"],ize()),m(t,["activityEnd"])!=null&&y(e,["activityEnd"],oze()),e}function aze(){return{}}function lze(t){const e={},n=m(t,["fps"]);n!=null&&y(e,["fps"],n);const r=m(t,["endOffset"]);r!=null&&y(e,["endOffset"],r);const i=m(t,["startOffset"]);return i!=null&&y(e,["startOffset"],i),e}function uze(t){const e={},n=m(t,["data"]);n!=null&&y(e,["data"],n);const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function cze(t){const e={},n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function Soe(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const r=m(t,["args"]);r!=null&&y(e,["args"],r);const i=m(t,["name"]);return i!=null&&y(e,["name"],i),e}function fze(t){const e={},n=m(t,["videoMetadata"]);n!=null&&y(e,["videoMetadata"],lze(n));const r=m(t,["thought"]);r!=null&&y(e,["thought"],r);const i=m(t,["inlineData"]);i!=null&&y(e,["inlineData"],uze(i));const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],cze(o));const s=m(t,["thoughtSignature"]);s!=null&&y(e,["thoughtSignature"],s);const a=m(t,["functionCall"]);a!=null&&y(e,["functionCall"],Soe(a));const u=m(t,["codeExecutionResult"]);u!=null&&y(e,["codeExecutionResult"],u);const c=m(t,["executableCode"]);c!=null&&y(e,["executableCode"],c);const d=m(t,["functionResponse"]);d!=null&&y(e,["functionResponse"],d);const h=m(t,["text"]);return h!=null&&y(e,["text"],h),e}function dze(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>fze(o))),y(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&y(e,["role"],r),e}function F7(t){const e={},n=m(t,["text"]);n!=null&&y(e,["text"],n);const r=m(t,["finished"]);return r!=null&&y(e,["finished"],r),e}function hze(t){const e={},n=m(t,["retrievedUrl"]);n!=null&&y(e,["retrievedUrl"],n);const r=m(t,["urlRetrievalStatus"]);return r!=null&&y(e,["urlRetrievalStatus"],r),e}function pze(t){const e={},n=m(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>hze(i))),y(e,["urlMetadata"],r)}return e}function mze(t){const e={},n=m(t,["modelTurn"]);n!=null&&y(e,["modelTurn"],dze(n));const r=m(t,["turnComplete"]);r!=null&&y(e,["turnComplete"],r);const i=m(t,["interrupted"]);i!=null&&y(e,["interrupted"],i);const o=m(t,["groundingMetadata"]);o!=null&&y(e,["groundingMetadata"],o);const s=m(t,["generationComplete"]);s!=null&&y(e,["generationComplete"],s);const a=m(t,["inputTranscription"]);a!=null&&y(e,["inputTranscription"],F7(a));const u=m(t,["outputTranscription"]);u!=null&&y(e,["outputTranscription"],F7(u));const c=m(t,["urlContextMetadata"]);return c!=null&&y(e,["urlContextMetadata"],pze(c)),e}function gze(t){const e={},n=m(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Soe(i))),y(e,["functionCalls"],r)}return e}function yze(t){const e={},n=m(t,["ids"]);return n!=null&&y(e,["ids"],n),e}function Z_(t){const e={},n=m(t,["modality"]);n!=null&&y(e,["modality"],n);const r=m(t,["tokenCount"]);return r!=null&&y(e,["tokenCount"],r),e}function vze(t){const e={},n=m(t,["promptTokenCount"]);n!=null&&y(e,["promptTokenCount"],n);const r=m(t,["cachedContentTokenCount"]);r!=null&&y(e,["cachedContentTokenCount"],r);const i=m(t,["responseTokenCount"]);i!=null&&y(e,["responseTokenCount"],i);const o=m(t,["toolUsePromptTokenCount"]);o!=null&&y(e,["toolUsePromptTokenCount"],o);const s=m(t,["thoughtsTokenCount"]);s!=null&&y(e,["thoughtsTokenCount"],s);const a=m(t,["totalTokenCount"]);a!=null&&y(e,["totalTokenCount"],a);const u=m(t,["promptTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(_=>Z_(_))),y(e,["promptTokensDetails"],g)}const c=m(t,["cacheTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(_=>Z_(_))),y(e,["cacheTokensDetails"],g)}const d=m(t,["responseTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(_=>Z_(_))),y(e,["responseTokensDetails"],g)}const h=m(t,["toolUsePromptTokensDetails"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(_=>Z_(_))),y(e,["toolUsePromptTokensDetails"],g)}return e}function _ze(t){const e={},n=m(t,["timeLeft"]);return n!=null&&y(e,["timeLeft"],n),e}function wze(t){const e={},n=m(t,["newHandle"]);n!=null&&y(e,["newHandle"],n);const r=m(t,["resumable"]);r!=null&&y(e,["resumable"],r);const i=m(t,["lastConsumedClientMessageIndex"]);return i!=null&&y(e,["lastConsumedClientMessageIndex"],i),e}function bze(t){const e={};m(t,["setupComplete"])!=null&&y(e,["setupComplete"],aze());const r=m(t,["serverContent"]);r!=null&&y(e,["serverContent"],mze(r));const i=m(t,["toolCall"]);i!=null&&y(e,["toolCall"],gze(i));const o=m(t,["toolCallCancellation"]);o!=null&&y(e,["toolCallCancellation"],yze(o));const s=m(t,["usageMetadata"]);s!=null&&y(e,["usageMetadata"],vze(s));const a=m(t,["goAway"]);a!=null&&y(e,["goAway"],_ze(a));const u=m(t,["sessionResumptionUpdate"]);return u!=null&&y(e,["sessionResumptionUpdate"],wze(u)),e}function Tze(){return{}}function Eze(t){const e={},n=m(t,["text"]);n!=null&&y(e,["text"],n);const r=m(t,["weight"]);return r!=null&&y(e,["weight"],r),e}function Sze(t){const e={},n=m(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Eze(i))),y(e,["weightedPrompts"],r)}return e}function xze(t){const e={},n=m(t,["temperature"]);n!=null&&y(e,["temperature"],n);const r=m(t,["topK"]);r!=null&&y(e,["topK"],r);const i=m(t,["seed"]);i!=null&&y(e,["seed"],i);const o=m(t,["guidance"]);o!=null&&y(e,["guidance"],o);const s=m(t,["bpm"]);s!=null&&y(e,["bpm"],s);const a=m(t,["density"]);a!=null&&y(e,["density"],a);const u=m(t,["brightness"]);u!=null&&y(e,["brightness"],u);const c=m(t,["scale"]);c!=null&&y(e,["scale"],c);const d=m(t,["muteBass"]);d!=null&&y(e,["muteBass"],d);const h=m(t,["muteDrums"]);h!=null&&y(e,["muteDrums"],h);const g=m(t,["onlyBassAndDrums"]);g!=null&&y(e,["onlyBassAndDrums"],g);const _=m(t,["musicGenerationMode"]);return _!=null&&y(e,["musicGenerationMode"],_),e}function Aze(t){const e={},n=m(t,["clientContent"]);n!=null&&y(e,["clientContent"],Sze(n));const r=m(t,["musicGenerationConfig"]);return r!=null&&y(e,["musicGenerationConfig"],xze(r)),e}function Cze(t){const e={},n=m(t,["data"]);n!=null&&y(e,["data"],n);const r=m(t,["mimeType"]);r!=null&&y(e,["mimeType"],r);const i=m(t,["sourceMetadata"]);return i!=null&&y(e,["sourceMetadata"],Aze(i)),e}function Ize(t){const e={},n=m(t,["audioChunks"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Cze(i))),y(e,["audioChunks"],r)}return e}function Rze(t){const e={},n=m(t,["text"]);n!=null&&y(e,["text"],n);const r=m(t,["filteredReason"]);return r!=null&&y(e,["filteredReason"],r),e}function Pze(t){const e={};m(t,["setupComplete"])!=null&&y(e,["setupComplete"],Tze());const r=m(t,["serverContent"]);r!=null&&y(e,["serverContent"],Ize(r));const i=m(t,["filteredPrompt"]);return i!=null&&y(e,["filteredPrompt"],Rze(i)),e}function Nze(t){const e={},n=m(t,["sessionId"]);return n!=null&&y(e,["sessionId"],n),e}function Mze(t){const e={},n=m(t,["fps"]);n!=null&&y(e,["fps"],n);const r=m(t,["endOffset"]);r!=null&&y(e,["endOffset"],r);const i=m(t,["startOffset"]);return i!=null&&y(e,["startOffset"],i),e}function Dze(t){const e={},n=m(t,["displayName"]);n!=null&&y(e,["displayName"],n);const r=m(t,["data"]);r!=null&&y(e,["data"],r);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function kze(t){const e={},n=m(t,["displayName"]);n!=null&&y(e,["displayName"],n);const r=m(t,["fileUri"]);r!=null&&y(e,["fileUri"],r);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function xoe(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const r=m(t,["args"]);r!=null&&y(e,["args"],r);const i=m(t,["name"]);return i!=null&&y(e,["name"],i),e}function Oze(t){const e={},n=m(t,["videoMetadata"]);n!=null&&y(e,["videoMetadata"],Mze(n));const r=m(t,["thought"]);r!=null&&y(e,["thought"],r);const i=m(t,["inlineData"]);i!=null&&y(e,["inlineData"],Dze(i));const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],kze(o));const s=m(t,["thoughtSignature"]);s!=null&&y(e,["thoughtSignature"],s);const a=m(t,["functionCall"]);a!=null&&y(e,["functionCall"],xoe(a));const u=m(t,["codeExecutionResult"]);u!=null&&y(e,["codeExecutionResult"],u);const c=m(t,["executableCode"]);c!=null&&y(e,["executableCode"],c);const d=m(t,["functionResponse"]);d!=null&&y(e,["functionResponse"],d);const h=m(t,["text"]);return h!=null&&y(e,["text"],h),e}function Lze(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Oze(o))),y(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&y(e,["role"],r),e}function B7(t){const e={},n=m(t,["text"]);n!=null&&y(e,["text"],n);const r=m(t,["finished"]);return r!=null&&y(e,["finished"],r),e}function Vze(t){const e={},n=m(t,["modelTurn"]);n!=null&&y(e,["modelTurn"],Lze(n));const r=m(t,["turnComplete"]);r!=null&&y(e,["turnComplete"],r);const i=m(t,["interrupted"]);i!=null&&y(e,["interrupted"],i);const o=m(t,["groundingMetadata"]);o!=null&&y(e,["groundingMetadata"],o);const s=m(t,["generationComplete"]);s!=null&&y(e,["generationComplete"],s);const a=m(t,["inputTranscription"]);a!=null&&y(e,["inputTranscription"],B7(a));const u=m(t,["outputTranscription"]);return u!=null&&y(e,["outputTranscription"],B7(u)),e}function Uze(t){const e={},n=m(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>xoe(i))),y(e,["functionCalls"],r)}return e}function qze(t){const e={},n=m(t,["ids"]);return n!=null&&y(e,["ids"],n),e}function e0(t){const e={},n=m(t,["modality"]);n!=null&&y(e,["modality"],n);const r=m(t,["tokenCount"]);return r!=null&&y(e,["tokenCount"],r),e}function Fze(t){const e={},n=m(t,["promptTokenCount"]);n!=null&&y(e,["promptTokenCount"],n);const r=m(t,["cachedContentTokenCount"]);r!=null&&y(e,["cachedContentTokenCount"],r);const i=m(t,["candidatesTokenCount"]);i!=null&&y(e,["responseTokenCount"],i);const o=m(t,["toolUsePromptTokenCount"]);o!=null&&y(e,["toolUsePromptTokenCount"],o);const s=m(t,["thoughtsTokenCount"]);s!=null&&y(e,["thoughtsTokenCount"],s);const a=m(t,["totalTokenCount"]);a!=null&&y(e,["totalTokenCount"],a);const u=m(t,["promptTokensDetails"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(S=>e0(S))),y(e,["promptTokensDetails"],_)}const c=m(t,["cacheTokensDetails"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(S=>e0(S))),y(e,["cacheTokensDetails"],_)}const d=m(t,["candidatesTokensDetails"]);if(d!=null){let _=d;Array.isArray(_)&&(_=_.map(S=>e0(S))),y(e,["responseTokensDetails"],_)}const h=m(t,["toolUsePromptTokensDetails"]);if(h!=null){let _=h;Array.isArray(_)&&(_=_.map(S=>e0(S))),y(e,["toolUsePromptTokensDetails"],_)}const g=m(t,["trafficType"]);return g!=null&&y(e,["trafficType"],g),e}function Bze(t){const e={},n=m(t,["timeLeft"]);return n!=null&&y(e,["timeLeft"],n),e}function $ze(t){const e={},n=m(t,["newHandle"]);n!=null&&y(e,["newHandle"],n);const r=m(t,["resumable"]);r!=null&&y(e,["resumable"],r);const i=m(t,["lastConsumedClientMessageIndex"]);return i!=null&&y(e,["lastConsumedClientMessageIndex"],i),e}function zze(t){const e={},n=m(t,["setupComplete"]);n!=null&&y(e,["setupComplete"],Nze(n));const r=m(t,["serverContent"]);r!=null&&y(e,["serverContent"],Vze(r));const i=m(t,["toolCall"]);i!=null&&y(e,["toolCall"],Uze(i));const o=m(t,["toolCallCancellation"]);o!=null&&y(e,["toolCallCancellation"],qze(o));const s=m(t,["usageMetadata"]);s!=null&&y(e,["usageMetadata"],Fze(s));const a=m(t,["goAway"]);a!=null&&y(e,["goAway"],Bze(a));const u=m(t,["sessionResumptionUpdate"]);return u!=null&&y(e,["sessionResumptionUpdate"],$ze(u)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hze(t){const e={},n=m(t,["fps"]);n!=null&&y(e,["fps"],n);const r=m(t,["endOffset"]);r!=null&&y(e,["endOffset"],r);const i=m(t,["startOffset"]);return i!=null&&y(e,["startOffset"],i),e}function Gze(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["data"]);n!=null&&y(e,["data"],n);const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function jze(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function Kze(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const r=m(t,["args"]);r!=null&&y(e,["args"],r);const i=m(t,["name"]);return i!=null&&y(e,["name"],i),e}function Wze(t){const e={},n=m(t,["videoMetadata"]);n!=null&&y(e,["videoMetadata"],Hze(n));const r=m(t,["thought"]);r!=null&&y(e,["thought"],r);const i=m(t,["inlineData"]);i!=null&&y(e,["inlineData"],Gze(i));const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],jze(o));const s=m(t,["thoughtSignature"]);s!=null&&y(e,["thoughtSignature"],s);const a=m(t,["functionCall"]);a!=null&&y(e,["functionCall"],Kze(a));const u=m(t,["codeExecutionResult"]);u!=null&&y(e,["codeExecutionResult"],u);const c=m(t,["executableCode"]);c!=null&&y(e,["executableCode"],c);const d=m(t,["functionResponse"]);d!=null&&y(e,["functionResponse"],d);const h=m(t,["text"]);return h!=null&&y(e,["text"],h),e}function KT(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Wze(o))),y(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&y(e,["role"],r),e}function Yze(t){const e={},n=m(t,["anyOf"]);n!=null&&y(e,["anyOf"],n);const r=m(t,["default"]);r!=null&&y(e,["default"],r);const i=m(t,["description"]);i!=null&&y(e,["description"],i);const o=m(t,["enum"]);o!=null&&y(e,["enum"],o);const s=m(t,["example"]);s!=null&&y(e,["example"],s);const a=m(t,["format"]);a!=null&&y(e,["format"],a);const u=m(t,["items"]);u!=null&&y(e,["items"],u);const c=m(t,["maxItems"]);c!=null&&y(e,["maxItems"],c);const d=m(t,["maxLength"]);d!=null&&y(e,["maxLength"],d);const h=m(t,["maxProperties"]);h!=null&&y(e,["maxProperties"],h);const g=m(t,["maximum"]);g!=null&&y(e,["maximum"],g);const _=m(t,["minItems"]);_!=null&&y(e,["minItems"],_);const S=m(t,["minLength"]);S!=null&&y(e,["minLength"],S);const b=m(t,["minProperties"]);b!=null&&y(e,["minProperties"],b);const T=m(t,["minimum"]);T!=null&&y(e,["minimum"],T);const x=m(t,["nullable"]);x!=null&&y(e,["nullable"],x);const C=m(t,["pattern"]);C!=null&&y(e,["pattern"],C);const I=m(t,["properties"]);I!=null&&y(e,["properties"],I);const N=m(t,["propertyOrdering"]);N!=null&&y(e,["propertyOrdering"],N);const V=m(t,["required"]);V!=null&&y(e,["required"],V);const q=m(t,["title"]);q!=null&&y(e,["title"],q);const P=m(t,["type"]);return P!=null&&y(e,["type"],P),e}function Jze(t){const e={};if(m(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=m(t,["category"]);n!=null&&y(e,["category"],n);const r=m(t,["threshold"]);return r!=null&&y(e,["threshold"],r),e}function Xze(t){const e={},n=m(t,["behavior"]);n!=null&&y(e,["behavior"],n);const r=m(t,["description"]);r!=null&&y(e,["description"],r);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const o=m(t,["parameters"]);o!=null&&y(e,["parameters"],o);const s=m(t,["parametersJsonSchema"]);s!=null&&y(e,["parametersJsonSchema"],s);const a=m(t,["response"]);a!=null&&y(e,["response"],a);const u=m(t,["responseJsonSchema"]);return u!=null&&y(e,["responseJsonSchema"],u),e}function Qze(t){const e={},n=m(t,["startTime"]);n!=null&&y(e,["startTime"],n);const r=m(t,["endTime"]);return r!=null&&y(e,["endTime"],r),e}function Zze(t){const e={},n=m(t,["timeRangeFilter"]);if(n!=null&&y(e,["timeRangeFilter"],Qze(n)),m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function eHe(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const r=m(t,["dynamicThreshold"]);return r!=null&&y(e,["dynamicThreshold"],r),e}function tHe(t){const e={},n=m(t,["dynamicRetrievalConfig"]);return n!=null&&y(e,["dynamicRetrievalConfig"],eHe(n)),e}function nHe(){return{}}function rHe(t){const e={},n=m(t,["environment"]);return n!=null&&y(e,["environment"],n),e}function iHe(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(c=>Xze(c))),y(e,["functionDeclarations"],u)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=m(t,["googleSearch"]);r!=null&&y(e,["googleSearch"],Zze(r));const i=m(t,["googleSearchRetrieval"]);if(i!=null&&y(e,["googleSearchRetrieval"],tHe(i)),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(m(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");m(t,["urlContext"])!=null&&y(e,["urlContext"],nHe());const s=m(t,["computerUse"]);s!=null&&y(e,["computerUse"],rHe(s));const a=m(t,["codeExecution"]);return a!=null&&y(e,["codeExecution"],a),e}function oHe(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const r=m(t,["allowedFunctionNames"]);return r!=null&&y(e,["allowedFunctionNames"],r),e}function sHe(t){const e={},n=m(t,["latitude"]);n!=null&&y(e,["latitude"],n);const r=m(t,["longitude"]);return r!=null&&y(e,["longitude"],r),e}function aHe(t){const e={},n=m(t,["latLng"]);n!=null&&y(e,["latLng"],sHe(n));const r=m(t,["languageCode"]);return r!=null&&y(e,["languageCode"],r),e}function lHe(t){const e={},n=m(t,["functionCallingConfig"]);n!=null&&y(e,["functionCallingConfig"],oHe(n));const r=m(t,["retrievalConfig"]);return r!=null&&y(e,["retrievalConfig"],aHe(r)),e}function uHe(t){const e={},n=m(t,["voiceName"]);return n!=null&&y(e,["voiceName"],n),e}function Aoe(t){const e={},n=m(t,["prebuiltVoiceConfig"]);return n!=null&&y(e,["prebuiltVoiceConfig"],uHe(n)),e}function cHe(t){const e={},n=m(t,["speaker"]);n!=null&&y(e,["speaker"],n);const r=m(t,["voiceConfig"]);return r!=null&&y(e,["voiceConfig"],Aoe(r)),e}function fHe(t){const e={},n=m(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>cHe(i))),y(e,["speakerVoiceConfigs"],r)}return e}function dHe(t){const e={},n=m(t,["voiceConfig"]);n!=null&&y(e,["voiceConfig"],Aoe(n));const r=m(t,["multiSpeakerVoiceConfig"]);r!=null&&y(e,["multiSpeakerVoiceConfig"],fHe(r));const i=m(t,["languageCode"]);return i!=null&&y(e,["languageCode"],i),e}function hHe(t){const e={},n=m(t,["includeThoughts"]);n!=null&&y(e,["includeThoughts"],n);const r=m(t,["thinkingBudget"]);return r!=null&&y(e,["thinkingBudget"],r),e}function pHe(t,e,n){const r={},i=m(e,["systemInstruction"]);n!==void 0&&i!=null&&y(n,["systemInstruction"],KT($r(i)));const o=m(e,["temperature"]);o!=null&&y(r,["temperature"],o);const s=m(e,["topP"]);s!=null&&y(r,["topP"],s);const a=m(e,["topK"]);a!=null&&y(r,["topK"],a);const u=m(e,["candidateCount"]);u!=null&&y(r,["candidateCount"],u);const c=m(e,["maxOutputTokens"]);c!=null&&y(r,["maxOutputTokens"],c);const d=m(e,["stopSequences"]);d!=null&&y(r,["stopSequences"],d);const h=m(e,["responseLogprobs"]);h!=null&&y(r,["responseLogprobs"],h);const g=m(e,["logprobs"]);g!=null&&y(r,["logprobs"],g);const _=m(e,["presencePenalty"]);_!=null&&y(r,["presencePenalty"],_);const S=m(e,["frequencyPenalty"]);S!=null&&y(r,["frequencyPenalty"],S);const b=m(e,["seed"]);b!=null&&y(r,["seed"],b);const T=m(e,["responseMimeType"]);T!=null&&y(r,["responseMimeType"],T);const x=m(e,["responseSchema"]);x!=null&&y(r,["responseSchema"],Yze(YL(x)));const C=m(e,["responseJsonSchema"]);if(C!=null&&y(r,["responseJsonSchema"],C),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=m(e,["safetySettings"]);if(n!==void 0&&I!=null){let L=I;Array.isArray(L)&&(L=L.map(F=>Jze(F))),y(n,["safetySettings"],L)}const N=m(e,["tools"]);if(n!==void 0&&N!=null){let L=fp(N);Array.isArray(L)&&(L=L.map(F=>iHe(cp(F)))),y(n,["tools"],L)}const V=m(e,["toolConfig"]);if(n!==void 0&&V!=null&&y(n,["toolConfig"],lHe(V)),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const q=m(e,["cachedContent"]);n!==void 0&&q!=null&&y(n,["cachedContent"],sl(t,q));const P=m(e,["responseModalities"]);P!=null&&y(r,["responseModalities"],P);const O=m(e,["mediaResolution"]);O!=null&&y(r,["mediaResolution"],O);const R=m(e,["speechConfig"]);if(R!=null&&y(r,["speechConfig"],dHe(JL(R))),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=m(e,["thinkingConfig"]);return U!=null&&y(r,["thinkingConfig"],hHe(U)),r}function $7(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","model"],At(t,r));const i=m(e,["contents"]);if(i!=null){let s=wo(i);Array.isArray(s)&&(s=s.map(a=>KT(a))),y(n,["contents"],s)}const o=m(e,["config"]);return o!=null&&y(n,["generationConfig"],pHe(t,o,n)),n}function mHe(t,e){const n={},r=m(t,["taskType"]);e!==void 0&&r!=null&&y(e,["requests[]","taskType"],r);const i=m(t,["title"]);e!==void 0&&i!=null&&y(e,["requests[]","title"],i);const o=m(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&y(e,["requests[]","outputDimensionality"],o),m(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function gHe(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","model"],At(t,r));const i=m(e,["contents"]);i!=null&&y(n,["requests[]","content"],WL(t,i));const o=m(e,["config"]);o!=null&&y(n,["config"],mHe(o,n));const s=m(e,["model"]);return s!==void 0&&y(n,["requests[]","model"],At(t,s)),n}function yHe(t,e){const n={};if(m(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=m(t,["numberOfImages"]);e!==void 0&&r!=null&&y(e,["parameters","sampleCount"],r);const i=m(t,["aspectRatio"]);e!==void 0&&i!=null&&y(e,["parameters","aspectRatio"],i);const o=m(t,["guidanceScale"]);if(e!==void 0&&o!=null&&y(e,["parameters","guidanceScale"],o),m(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=m(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&y(e,["parameters","safetySetting"],s);const a=m(t,["personGeneration"]);e!==void 0&&a!=null&&y(e,["parameters","personGeneration"],a);const u=m(t,["includeSafetyAttributes"]);e!==void 0&&u!=null&&y(e,["parameters","includeSafetyAttributes"],u);const c=m(t,["includeRaiReason"]);e!==void 0&&c!=null&&y(e,["parameters","includeRaiReason"],c);const d=m(t,["language"]);e!==void 0&&d!=null&&y(e,["parameters","language"],d);const h=m(t,["outputMimeType"]);e!==void 0&&h!=null&&y(e,["parameters","outputOptions","mimeType"],h);const g=m(t,["outputCompressionQuality"]);if(e!==void 0&&g!=null&&y(e,["parameters","outputOptions","compressionQuality"],g),m(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const _=m(t,["imageSize"]);if(e!==void 0&&_!=null&&y(e,["parameters","sampleImageSize"],_),m(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function vHe(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","model"],At(t,r));const i=m(e,["prompt"]);i!=null&&y(n,["instances[0]","prompt"],i);const o=m(e,["config"]);return o!=null&&y(n,["config"],yHe(o,n)),n}function _He(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","name"],At(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],i),n}function wHe(t,e,n){const r={},i=m(e,["pageSize"]);n!==void 0&&i!=null&&y(n,["_query","pageSize"],i);const o=m(e,["pageToken"]);n!==void 0&&o!=null&&y(n,["_query","pageToken"],o);const s=m(e,["filter"]);n!==void 0&&s!=null&&y(n,["_query","filter"],s);const a=m(e,["queryBase"]);return n!==void 0&&a!=null&&y(n,["_url","models_url"],coe(t,a)),r}function bHe(t,e){const n={},r=m(e,["config"]);return r!=null&&y(n,["config"],wHe(t,r,n)),n}function THe(t,e){const n={},r=m(t,["displayName"]);e!==void 0&&r!=null&&y(e,["displayName"],r);const i=m(t,["description"]);e!==void 0&&i!=null&&y(e,["description"],i);const o=m(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&y(e,["defaultCheckpointId"],o),n}function EHe(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","name"],At(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],THe(i,n)),n}function SHe(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","name"],At(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],i),n}function xHe(t){const e={};if(m(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(m(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(m(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function AHe(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","model"],At(t,r));const i=m(e,["contents"]);if(i!=null){let s=wo(i);Array.isArray(s)&&(s=s.map(a=>KT(a))),y(n,["contents"],s)}const o=m(e,["config"]);return o!=null&&y(n,["config"],xHe(o)),n}function Coe(t){const e={};if(m(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=m(t,["imageBytes"]);n!=null&&y(e,["bytesBase64Encoded"],_f(n));const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function CHe(t,e){const n={},r=m(t,["prompt"]);e!==void 0&&r!=null&&y(e,["instances[0]","prompt"],r);const i=m(t,["image"]);if(e!==void 0&&i!=null&&y(e,["instances[0]","image"],Coe(i)),m(t,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");return n}function IHe(t,e){const n={},r=m(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&y(e,["parameters","sampleCount"],r),m(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=m(t,["durationSeconds"]);if(e!==void 0&&i!=null&&y(e,["parameters","durationSeconds"],i),m(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=m(t,["aspectRatio"]);e!==void 0&&o!=null&&y(e,["parameters","aspectRatio"],o);const s=m(t,["resolution"]);e!==void 0&&s!=null&&y(e,["parameters","resolution"],s);const a=m(t,["personGeneration"]);if(e!==void 0&&a!=null&&y(e,["parameters","personGeneration"],a),m(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const u=m(t,["negativePrompt"]);e!==void 0&&u!=null&&y(e,["parameters","negativePrompt"],u);const c=m(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&y(e,["parameters","enhancePrompt"],c),m(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(m(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(m(t,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(m(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(m(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function RHe(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","model"],At(t,r));const i=m(e,["prompt"]);i!=null&&y(n,["instances[0]","prompt"],i);const o=m(e,["image"]);if(o!=null&&y(n,["instances[0]","image"],Coe(o)),m(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const s=m(e,["source"]);s!=null&&y(n,["config"],CHe(s,n));const a=m(e,["config"]);return a!=null&&y(n,["config"],IHe(a,n)),n}function PHe(t){const e={},n=m(t,["fps"]);n!=null&&y(e,["fps"],n);const r=m(t,["endOffset"]);r!=null&&y(e,["endOffset"],r);const i=m(t,["startOffset"]);return i!=null&&y(e,["startOffset"],i),e}function NHe(t){const e={},n=m(t,["displayName"]);n!=null&&y(e,["displayName"],n);const r=m(t,["data"]);r!=null&&y(e,["data"],r);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function MHe(t){const e={},n=m(t,["displayName"]);n!=null&&y(e,["displayName"],n);const r=m(t,["fileUri"]);r!=null&&y(e,["fileUri"],r);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function DHe(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const r=m(t,["args"]);r!=null&&y(e,["args"],r);const i=m(t,["name"]);return i!=null&&y(e,["name"],i),e}function kHe(t){const e={},n=m(t,["videoMetadata"]);n!=null&&y(e,["videoMetadata"],PHe(n));const r=m(t,["thought"]);r!=null&&y(e,["thought"],r);const i=m(t,["inlineData"]);i!=null&&y(e,["inlineData"],NHe(i));const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],MHe(o));const s=m(t,["thoughtSignature"]);s!=null&&y(e,["thoughtSignature"],s);const a=m(t,["functionCall"]);a!=null&&y(e,["functionCall"],DHe(a));const u=m(t,["codeExecutionResult"]);u!=null&&y(e,["codeExecutionResult"],u);const c=m(t,["executableCode"]);c!=null&&y(e,["executableCode"],c);const d=m(t,["functionResponse"]);d!=null&&y(e,["functionResponse"],d);const h=m(t,["text"]);return h!=null&&y(e,["text"],h),e}function hp(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>kHe(o))),y(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&y(e,["role"],r),e}function OHe(t){const e={},n=m(t,["anyOf"]);n!=null&&y(e,["anyOf"],n);const r=m(t,["default"]);r!=null&&y(e,["default"],r);const i=m(t,["description"]);i!=null&&y(e,["description"],i);const o=m(t,["enum"]);o!=null&&y(e,["enum"],o);const s=m(t,["example"]);s!=null&&y(e,["example"],s);const a=m(t,["format"]);a!=null&&y(e,["format"],a);const u=m(t,["items"]);u!=null&&y(e,["items"],u);const c=m(t,["maxItems"]);c!=null&&y(e,["maxItems"],c);const d=m(t,["maxLength"]);d!=null&&y(e,["maxLength"],d);const h=m(t,["maxProperties"]);h!=null&&y(e,["maxProperties"],h);const g=m(t,["maximum"]);g!=null&&y(e,["maximum"],g);const _=m(t,["minItems"]);_!=null&&y(e,["minItems"],_);const S=m(t,["minLength"]);S!=null&&y(e,["minLength"],S);const b=m(t,["minProperties"]);b!=null&&y(e,["minProperties"],b);const T=m(t,["minimum"]);T!=null&&y(e,["minimum"],T);const x=m(t,["nullable"]);x!=null&&y(e,["nullable"],x);const C=m(t,["pattern"]);C!=null&&y(e,["pattern"],C);const I=m(t,["properties"]);I!=null&&y(e,["properties"],I);const N=m(t,["propertyOrdering"]);N!=null&&y(e,["propertyOrdering"],N);const V=m(t,["required"]);V!=null&&y(e,["required"],V);const q=m(t,["title"]);q!=null&&y(e,["title"],q);const P=m(t,["type"]);return P!=null&&y(e,["type"],P),e}function LHe(t){const e={},n=m(t,["featureSelectionPreference"]);return n!=null&&y(e,["featureSelectionPreference"],n),e}function VHe(t){const e={},n=m(t,["method"]);n!=null&&y(e,["method"],n);const r=m(t,["category"]);r!=null&&y(e,["category"],r);const i=m(t,["threshold"]);return i!=null&&y(e,["threshold"],i),e}function UHe(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&y(e,["description"],n);const r=m(t,["name"]);r!=null&&y(e,["name"],r);const i=m(t,["parameters"]);i!=null&&y(e,["parameters"],i);const o=m(t,["parametersJsonSchema"]);o!=null&&y(e,["parametersJsonSchema"],o);const s=m(t,["response"]);s!=null&&y(e,["response"],s);const a=m(t,["responseJsonSchema"]);return a!=null&&y(e,["responseJsonSchema"],a),e}function qHe(t){const e={},n=m(t,["startTime"]);n!=null&&y(e,["startTime"],n);const r=m(t,["endTime"]);return r!=null&&y(e,["endTime"],r),e}function FHe(t){const e={},n=m(t,["timeRangeFilter"]);n!=null&&y(e,["timeRangeFilter"],qHe(n));const r=m(t,["excludeDomains"]);return r!=null&&y(e,["excludeDomains"],r),e}function BHe(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const r=m(t,["dynamicThreshold"]);return r!=null&&y(e,["dynamicThreshold"],r),e}function $He(t){const e={},n=m(t,["dynamicRetrievalConfig"]);return n!=null&&y(e,["dynamicRetrievalConfig"],BHe(n)),e}function zHe(t){const e={},n=m(t,["excludeDomains"]);return n!=null&&y(e,["excludeDomains"],n),e}function HHe(t){const e={},n=m(t,["apiKeyString"]);return n!=null&&y(e,["apiKeyString"],n),e}function GHe(t){const e={},n=m(t,["apiKeyConfig"]);n!=null&&y(e,["apiKeyConfig"],HHe(n));const r=m(t,["authType"]);r!=null&&y(e,["authType"],r);const i=m(t,["googleServiceAccountConfig"]);i!=null&&y(e,["googleServiceAccountConfig"],i);const o=m(t,["httpBasicAuthConfig"]);o!=null&&y(e,["httpBasicAuthConfig"],o);const s=m(t,["oauthConfig"]);s!=null&&y(e,["oauthConfig"],s);const a=m(t,["oidcConfig"]);return a!=null&&y(e,["oidcConfig"],a),e}function jHe(t){const e={},n=m(t,["authConfig"]);return n!=null&&y(e,["authConfig"],GHe(n)),e}function KHe(){return{}}function WHe(t){const e={},n=m(t,["environment"]);return n!=null&&y(e,["environment"],n),e}function Ioe(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(g=>UHe(g))),y(e,["functionDeclarations"],h)}const r=m(t,["retrieval"]);r!=null&&y(e,["retrieval"],r);const i=m(t,["googleSearch"]);i!=null&&y(e,["googleSearch"],FHe(i));const o=m(t,["googleSearchRetrieval"]);o!=null&&y(e,["googleSearchRetrieval"],$He(o));const s=m(t,["enterpriseWebSearch"]);s!=null&&y(e,["enterpriseWebSearch"],zHe(s));const a=m(t,["googleMaps"]);a!=null&&y(e,["googleMaps"],jHe(a)),m(t,["urlContext"])!=null&&y(e,["urlContext"],KHe());const c=m(t,["computerUse"]);c!=null&&y(e,["computerUse"],WHe(c));const d=m(t,["codeExecution"]);return d!=null&&y(e,["codeExecution"],d),e}function YHe(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const r=m(t,["allowedFunctionNames"]);return r!=null&&y(e,["allowedFunctionNames"],r),e}function JHe(t){const e={},n=m(t,["latitude"]);n!=null&&y(e,["latitude"],n);const r=m(t,["longitude"]);return r!=null&&y(e,["longitude"],r),e}function XHe(t){const e={},n=m(t,["latLng"]);n!=null&&y(e,["latLng"],JHe(n));const r=m(t,["languageCode"]);return r!=null&&y(e,["languageCode"],r),e}function QHe(t){const e={},n=m(t,["functionCallingConfig"]);n!=null&&y(e,["functionCallingConfig"],YHe(n));const r=m(t,["retrievalConfig"]);return r!=null&&y(e,["retrievalConfig"],XHe(r)),e}function ZHe(t){const e={},n=m(t,["voiceName"]);return n!=null&&y(e,["voiceName"],n),e}function eGe(t){const e={},n=m(t,["prebuiltVoiceConfig"]);return n!=null&&y(e,["prebuiltVoiceConfig"],ZHe(n)),e}function tGe(t){const e={},n=m(t,["voiceConfig"]);if(n!=null&&y(e,["voiceConfig"],eGe(n)),m(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=m(t,["languageCode"]);return r!=null&&y(e,["languageCode"],r),e}function nGe(t){const e={},n=m(t,["includeThoughts"]);n!=null&&y(e,["includeThoughts"],n);const r=m(t,["thinkingBudget"]);return r!=null&&y(e,["thinkingBudget"],r),e}function rGe(t,e,n){const r={},i=m(e,["systemInstruction"]);n!==void 0&&i!=null&&y(n,["systemInstruction"],hp($r(i)));const o=m(e,["temperature"]);o!=null&&y(r,["temperature"],o);const s=m(e,["topP"]);s!=null&&y(r,["topP"],s);const a=m(e,["topK"]);a!=null&&y(r,["topK"],a);const u=m(e,["candidateCount"]);u!=null&&y(r,["candidateCount"],u);const c=m(e,["maxOutputTokens"]);c!=null&&y(r,["maxOutputTokens"],c);const d=m(e,["stopSequences"]);d!=null&&y(r,["stopSequences"],d);const h=m(e,["responseLogprobs"]);h!=null&&y(r,["responseLogprobs"],h);const g=m(e,["logprobs"]);g!=null&&y(r,["logprobs"],g);const _=m(e,["presencePenalty"]);_!=null&&y(r,["presencePenalty"],_);const S=m(e,["frequencyPenalty"]);S!=null&&y(r,["frequencyPenalty"],S);const b=m(e,["seed"]);b!=null&&y(r,["seed"],b);const T=m(e,["responseMimeType"]);T!=null&&y(r,["responseMimeType"],T);const x=m(e,["responseSchema"]);x!=null&&y(r,["responseSchema"],OHe(YL(x)));const C=m(e,["responseJsonSchema"]);C!=null&&y(r,["responseJsonSchema"],C);const I=m(e,["routingConfig"]);I!=null&&y(r,["routingConfig"],I);const N=m(e,["modelSelectionConfig"]);N!=null&&y(r,["modelConfig"],LHe(N));const V=m(e,["safetySettings"]);if(n!==void 0&&V!=null){let Y=V;Array.isArray(Y)&&(Y=Y.map(K=>VHe(K))),y(n,["safetySettings"],Y)}const q=m(e,["tools"]);if(n!==void 0&&q!=null){let Y=fp(q);Array.isArray(Y)&&(Y=Y.map(K=>Ioe(cp(K)))),y(n,["tools"],Y)}const P=m(e,["toolConfig"]);n!==void 0&&P!=null&&y(n,["toolConfig"],QHe(P));const O=m(e,["labels"]);n!==void 0&&O!=null&&y(n,["labels"],O);const R=m(e,["cachedContent"]);n!==void 0&&R!=null&&y(n,["cachedContent"],sl(t,R));const U=m(e,["responseModalities"]);U!=null&&y(r,["responseModalities"],U);const L=m(e,["mediaResolution"]);L!=null&&y(r,["mediaResolution"],L);const F=m(e,["speechConfig"]);F!=null&&y(r,["speechConfig"],tGe(JL(F)));const $=m(e,["audioTimestamp"]);$!=null&&y(r,["audioTimestamp"],$);const H=m(e,["thinkingConfig"]);return H!=null&&y(r,["thinkingConfig"],nGe(H)),r}function z7(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","model"],At(t,r));const i=m(e,["contents"]);if(i!=null){let s=wo(i);Array.isArray(s)&&(s=s.map(a=>hp(a))),y(n,["contents"],s)}const o=m(e,["config"]);return o!=null&&y(n,["generationConfig"],rGe(t,o,n)),n}function iGe(t,e){const n={},r=m(t,["taskType"]);e!==void 0&&r!=null&&y(e,["instances[]","task_type"],r);const i=m(t,["title"]);e!==void 0&&i!=null&&y(e,["instances[]","title"],i);const o=m(t,["outputDimensionality"]);e!==void 0&&o!=null&&y(e,["parameters","outputDimensionality"],o);const s=m(t,["mimeType"]);e!==void 0&&s!=null&&y(e,["instances[]","mimeType"],s);const a=m(t,["autoTruncate"]);return e!==void 0&&a!=null&&y(e,["parameters","autoTruncate"],a),n}function oGe(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","model"],At(t,r));const i=m(e,["contents"]);i!=null&&y(n,["instances[]","content"],WL(t,i));const o=m(e,["config"]);return o!=null&&y(n,["config"],iGe(o,n)),n}function sGe(t,e){const n={},r=m(t,["outputGcsUri"]);e!==void 0&&r!=null&&y(e,["parameters","storageUri"],r);const i=m(t,["negativePrompt"]);e!==void 0&&i!=null&&y(e,["parameters","negativePrompt"],i);const o=m(t,["numberOfImages"]);e!==void 0&&o!=null&&y(e,["parameters","sampleCount"],o);const s=m(t,["aspectRatio"]);e!==void 0&&s!=null&&y(e,["parameters","aspectRatio"],s);const a=m(t,["guidanceScale"]);e!==void 0&&a!=null&&y(e,["parameters","guidanceScale"],a);const u=m(t,["seed"]);e!==void 0&&u!=null&&y(e,["parameters","seed"],u);const c=m(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&y(e,["parameters","safetySetting"],c);const d=m(t,["personGeneration"]);e!==void 0&&d!=null&&y(e,["parameters","personGeneration"],d);const h=m(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&y(e,["parameters","includeSafetyAttributes"],h);const g=m(t,["includeRaiReason"]);e!==void 0&&g!=null&&y(e,["parameters","includeRaiReason"],g);const _=m(t,["language"]);e!==void 0&&_!=null&&y(e,["parameters","language"],_);const S=m(t,["outputMimeType"]);e!==void 0&&S!=null&&y(e,["parameters","outputOptions","mimeType"],S);const b=m(t,["outputCompressionQuality"]);e!==void 0&&b!=null&&y(e,["parameters","outputOptions","compressionQuality"],b);const T=m(t,["addWatermark"]);e!==void 0&&T!=null&&y(e,["parameters","addWatermark"],T);const x=m(t,["imageSize"]);e!==void 0&&x!=null&&y(e,["parameters","sampleImageSize"],x);const C=m(t,["enhancePrompt"]);return e!==void 0&&C!=null&&y(e,["parameters","enhancePrompt"],C),n}function aGe(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","model"],At(t,r));const i=m(e,["prompt"]);i!=null&&y(n,["instances[0]","prompt"],i);const o=m(e,["config"]);return o!=null&&y(n,["config"],sGe(o,n)),n}function os(t){const e={},n=m(t,["gcsUri"]);n!=null&&y(e,["gcsUri"],n);const r=m(t,["imageBytes"]);r!=null&&y(e,["bytesBase64Encoded"],_f(r));const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function lGe(t){const e={},n=m(t,["maskMode"]);n!=null&&y(e,["maskMode"],n);const r=m(t,["segmentationClasses"]);r!=null&&y(e,["maskClasses"],r);const i=m(t,["maskDilation"]);return i!=null&&y(e,["dilation"],i),e}function uGe(t){const e={},n=m(t,["controlType"]);n!=null&&y(e,["controlType"],n);const r=m(t,["enableControlImageComputation"]);return r!=null&&y(e,["computeControl"],r),e}function cGe(t){const e={},n=m(t,["styleDescription"]);return n!=null&&y(e,["styleDescription"],n),e}function fGe(t){const e={},n=m(t,["subjectType"]);n!=null&&y(e,["subjectType"],n);const r=m(t,["subjectDescription"]);return r!=null&&y(e,["subjectDescription"],r),e}function dGe(t){const e={},n=m(t,["referenceImage"]);n!=null&&y(e,["referenceImage"],os(n));const r=m(t,["referenceId"]);r!=null&&y(e,["referenceId"],r);const i=m(t,["referenceType"]);i!=null&&y(e,["referenceType"],i);const o=m(t,["maskImageConfig"]);o!=null&&y(e,["maskImageConfig"],lGe(o));const s=m(t,["controlImageConfig"]);s!=null&&y(e,["controlImageConfig"],uGe(s));const a=m(t,["styleImageConfig"]);a!=null&&y(e,["styleImageConfig"],cGe(a));const u=m(t,["subjectImageConfig"]);return u!=null&&y(e,["subjectImageConfig"],fGe(u)),e}function hGe(t,e){const n={},r=m(t,["outputGcsUri"]);e!==void 0&&r!=null&&y(e,["parameters","storageUri"],r);const i=m(t,["negativePrompt"]);e!==void 0&&i!=null&&y(e,["parameters","negativePrompt"],i);const o=m(t,["numberOfImages"]);e!==void 0&&o!=null&&y(e,["parameters","sampleCount"],o);const s=m(t,["aspectRatio"]);e!==void 0&&s!=null&&y(e,["parameters","aspectRatio"],s);const a=m(t,["guidanceScale"]);e!==void 0&&a!=null&&y(e,["parameters","guidanceScale"],a);const u=m(t,["seed"]);e!==void 0&&u!=null&&y(e,["parameters","seed"],u);const c=m(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&y(e,["parameters","safetySetting"],c);const d=m(t,["personGeneration"]);e!==void 0&&d!=null&&y(e,["parameters","personGeneration"],d);const h=m(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&y(e,["parameters","includeSafetyAttributes"],h);const g=m(t,["includeRaiReason"]);e!==void 0&&g!=null&&y(e,["parameters","includeRaiReason"],g);const _=m(t,["language"]);e!==void 0&&_!=null&&y(e,["parameters","language"],_);const S=m(t,["outputMimeType"]);e!==void 0&&S!=null&&y(e,["parameters","outputOptions","mimeType"],S);const b=m(t,["outputCompressionQuality"]);e!==void 0&&b!=null&&y(e,["parameters","outputOptions","compressionQuality"],b);const T=m(t,["addWatermark"]);e!==void 0&&T!=null&&y(e,["parameters","addWatermark"],T);const x=m(t,["editMode"]);e!==void 0&&x!=null&&y(e,["parameters","editMode"],x);const C=m(t,["baseSteps"]);return e!==void 0&&C!=null&&y(e,["parameters","editConfig","baseSteps"],C),n}function pGe(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","model"],At(t,r));const i=m(e,["prompt"]);i!=null&&y(n,["instances[0]","prompt"],i);const o=m(e,["referenceImages"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>dGe(u))),y(n,["instances[0]","referenceImages"],a)}const s=m(e,["config"]);return s!=null&&y(n,["config"],hGe(s,n)),n}function mGe(t,e){const n={},r=m(t,["outputGcsUri"]);e!==void 0&&r!=null&&y(e,["parameters","storageUri"],r);const i=m(t,["includeRaiReason"]);e!==void 0&&i!=null&&y(e,["parameters","includeRaiReason"],i);const o=m(t,["outputMimeType"]);e!==void 0&&o!=null&&y(e,["parameters","outputOptions","mimeType"],o);const s=m(t,["outputCompressionQuality"]);e!==void 0&&s!=null&&y(e,["parameters","outputOptions","compressionQuality"],s);const a=m(t,["enhanceInputImage"]);e!==void 0&&a!=null&&y(e,["parameters","upscaleConfig","enhanceInputImage"],a);const u=m(t,["imagePreservationFactor"]);e!==void 0&&u!=null&&y(e,["parameters","upscaleConfig","imagePreservationFactor"],u);const c=m(t,["numberOfImages"]);e!==void 0&&c!=null&&y(e,["parameters","sampleCount"],c);const d=m(t,["mode"]);return e!==void 0&&d!=null&&y(e,["parameters","mode"],d),n}function gGe(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","model"],At(t,r));const i=m(e,["image"]);i!=null&&y(n,["instances[0]","image"],os(i));const o=m(e,["upscaleFactor"]);o!=null&&y(n,["parameters","upscaleConfig","upscaleFactor"],o);const s=m(e,["config"]);return s!=null&&y(n,["config"],mGe(s,n)),n}function yGe(t){const e={},n=m(t,["productImage"]);return n!=null&&y(e,["image"],os(n)),e}function vGe(t,e){const n={},r=m(t,["prompt"]);e!==void 0&&r!=null&&y(e,["instances[0]","prompt"],r);const i=m(t,["personImage"]);e!==void 0&&i!=null&&y(e,["instances[0]","personImage","image"],os(i));const o=m(t,["productImages"]);if(e!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>yGe(a))),y(e,["instances[0]","productImages"],s)}return n}function _Ge(t,e){const n={},r=m(t,["numberOfImages"]);e!==void 0&&r!=null&&y(e,["parameters","sampleCount"],r);const i=m(t,["baseSteps"]);e!==void 0&&i!=null&&y(e,["parameters","editConfig","baseSteps"],i);const o=m(t,["outputGcsUri"]);e!==void 0&&o!=null&&y(e,["parameters","storageUri"],o);const s=m(t,["seed"]);e!==void 0&&s!=null&&y(e,["parameters","seed"],s);const a=m(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&y(e,["parameters","safetySetting"],a);const u=m(t,["personGeneration"]);e!==void 0&&u!=null&&y(e,["parameters","personGeneration"],u);const c=m(t,["addWatermark"]);e!==void 0&&c!=null&&y(e,["parameters","addWatermark"],c);const d=m(t,["outputMimeType"]);e!==void 0&&d!=null&&y(e,["parameters","outputOptions","mimeType"],d);const h=m(t,["outputCompressionQuality"]);e!==void 0&&h!=null&&y(e,["parameters","outputOptions","compressionQuality"],h);const g=m(t,["enhancePrompt"]);return e!==void 0&&g!=null&&y(e,["parameters","enhancePrompt"],g),n}function wGe(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","model"],At(t,r));const i=m(e,["source"]);i!=null&&y(n,["config"],vGe(i,n));const o=m(e,["config"]);return o!=null&&y(n,["config"],_Ge(o,n)),n}function bGe(t){const e={},n=m(t,["image"]);return n!=null&&y(e,["image"],os(n)),e}function TGe(t,e){const n={},r=m(t,["prompt"]);e!==void 0&&r!=null&&y(e,["instances[0]","prompt"],r);const i=m(t,["image"]);e!==void 0&&i!=null&&y(e,["instances[0]","image"],os(i));const o=m(t,["scribbleImage"]);return e!==void 0&&o!=null&&y(e,["instances[0]","scribble"],bGe(o)),n}function EGe(t,e){const n={},r=m(t,["mode"]);e!==void 0&&r!=null&&y(e,["parameters","mode"],r);const i=m(t,["maxPredictions"]);e!==void 0&&i!=null&&y(e,["parameters","maxPredictions"],i);const o=m(t,["confidenceThreshold"]);e!==void 0&&o!=null&&y(e,["parameters","confidenceThreshold"],o);const s=m(t,["maskDilation"]);e!==void 0&&s!=null&&y(e,["parameters","maskDilation"],s);const a=m(t,["binaryColorThreshold"]);return e!==void 0&&a!=null&&y(e,["parameters","binaryColorThreshold"],a),n}function SGe(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","model"],At(t,r));const i=m(e,["source"]);i!=null&&y(n,["config"],TGe(i,n));const o=m(e,["config"]);return o!=null&&y(n,["config"],EGe(o,n)),n}function xGe(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","name"],At(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],i),n}function AGe(t,e,n){const r={},i=m(e,["pageSize"]);n!==void 0&&i!=null&&y(n,["_query","pageSize"],i);const o=m(e,["pageToken"]);n!==void 0&&o!=null&&y(n,["_query","pageToken"],o);const s=m(e,["filter"]);n!==void 0&&s!=null&&y(n,["_query","filter"],s);const a=m(e,["queryBase"]);return n!==void 0&&a!=null&&y(n,["_url","models_url"],coe(t,a)),r}function CGe(t,e){const n={},r=m(e,["config"]);return r!=null&&y(n,["config"],AGe(t,r,n)),n}function IGe(t,e){const n={},r=m(t,["displayName"]);e!==void 0&&r!=null&&y(e,["displayName"],r);const i=m(t,["description"]);e!==void 0&&i!=null&&y(e,["description"],i);const o=m(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&y(e,["defaultCheckpointId"],o),n}function RGe(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","model"],At(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],IGe(i,n)),n}function PGe(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","name"],At(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],i),n}function NGe(t,e){const n={},r=m(t,["systemInstruction"]);e!==void 0&&r!=null&&y(e,["systemInstruction"],hp($r(r)));const i=m(t,["tools"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>Ioe(a))),y(e,["tools"],s)}const o=m(t,["generationConfig"]);return e!==void 0&&o!=null&&y(e,["generationConfig"],o),n}function MGe(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","model"],At(t,r));const i=m(e,["contents"]);if(i!=null){let s=wo(i);Array.isArray(s)&&(s=s.map(a=>hp(a))),y(n,["contents"],s)}const o=m(e,["config"]);return o!=null&&y(n,["config"],NGe(o,n)),n}function DGe(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","model"],At(t,r));const i=m(e,["contents"]);if(i!=null){let s=wo(i);Array.isArray(s)&&(s=s.map(a=>hp(a))),y(n,["contents"],s)}const o=m(e,["config"]);return o!=null&&y(n,["config"],o),n}function Roe(t){const e={},n=m(t,["uri"]);n!=null&&y(e,["gcsUri"],n);const r=m(t,["videoBytes"]);r!=null&&y(e,["bytesBase64Encoded"],_f(r));const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function kGe(t,e){const n={},r=m(t,["prompt"]);e!==void 0&&r!=null&&y(e,["instances[0]","prompt"],r);const i=m(t,["image"]);e!==void 0&&i!=null&&y(e,["instances[0]","image"],os(i));const o=m(t,["video"]);return e!==void 0&&o!=null&&y(e,["instances[0]","video"],Roe(o)),n}function OGe(t){const e={},n=m(t,["image"]);n!=null&&y(e,["image"],os(n));const r=m(t,["referenceType"]);return r!=null&&y(e,["referenceType"],r),e}function LGe(t){const e={},n=m(t,["image"]);n!=null&&y(e,["_self"],os(n));const r=m(t,["maskMode"]);return r!=null&&y(e,["maskMode"],r),e}function VGe(t,e){const n={},r=m(t,["numberOfVideos"]);e!==void 0&&r!=null&&y(e,["parameters","sampleCount"],r);const i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const o=m(t,["fps"]);e!==void 0&&o!=null&&y(e,["parameters","fps"],o);const s=m(t,["durationSeconds"]);e!==void 0&&s!=null&&y(e,["parameters","durationSeconds"],s);const a=m(t,["seed"]);e!==void 0&&a!=null&&y(e,["parameters","seed"],a);const u=m(t,["aspectRatio"]);e!==void 0&&u!=null&&y(e,["parameters","aspectRatio"],u);const c=m(t,["resolution"]);e!==void 0&&c!=null&&y(e,["parameters","resolution"],c);const d=m(t,["personGeneration"]);e!==void 0&&d!=null&&y(e,["parameters","personGeneration"],d);const h=m(t,["pubsubTopic"]);e!==void 0&&h!=null&&y(e,["parameters","pubsubTopic"],h);const g=m(t,["negativePrompt"]);e!==void 0&&g!=null&&y(e,["parameters","negativePrompt"],g);const _=m(t,["enhancePrompt"]);e!==void 0&&_!=null&&y(e,["parameters","enhancePrompt"],_);const S=m(t,["generateAudio"]);e!==void 0&&S!=null&&y(e,["parameters","generateAudio"],S);const b=m(t,["lastFrame"]);e!==void 0&&b!=null&&y(e,["instances[0]","lastFrame"],os(b));const T=m(t,["referenceImages"]);if(e!==void 0&&T!=null){let I=T;Array.isArray(I)&&(I=I.map(N=>OGe(N))),y(e,["instances[0]","referenceImages"],I)}const x=m(t,["mask"]);e!==void 0&&x!=null&&y(e,["instances[0]","mask"],LGe(x));const C=m(t,["compressionQuality"]);return e!==void 0&&C!=null&&y(e,["parameters","compressionQuality"],C),n}function UGe(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","model"],At(t,r));const i=m(e,["prompt"]);i!=null&&y(n,["instances[0]","prompt"],i);const o=m(e,["image"]);o!=null&&y(n,["instances[0]","image"],os(o));const s=m(e,["video"]);s!=null&&y(n,["instances[0]","video"],Roe(s));const a=m(e,["source"]);a!=null&&y(n,["config"],kGe(a,n));const u=m(e,["config"]);return u!=null&&y(n,["config"],VGe(u,n)),n}function qGe(t){const e={},n=m(t,["fps"]);n!=null&&y(e,["fps"],n);const r=m(t,["endOffset"]);r!=null&&y(e,["endOffset"],r);const i=m(t,["startOffset"]);return i!=null&&y(e,["startOffset"],i),e}function FGe(t){const e={},n=m(t,["data"]);n!=null&&y(e,["data"],n);const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function BGe(t){const e={},n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function $Ge(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const r=m(t,["args"]);r!=null&&y(e,["args"],r);const i=m(t,["name"]);return i!=null&&y(e,["name"],i),e}function zGe(t){const e={},n=m(t,["videoMetadata"]);n!=null&&y(e,["videoMetadata"],qGe(n));const r=m(t,["thought"]);r!=null&&y(e,["thought"],r);const i=m(t,["inlineData"]);i!=null&&y(e,["inlineData"],FGe(i));const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],BGe(o));const s=m(t,["thoughtSignature"]);s!=null&&y(e,["thoughtSignature"],s);const a=m(t,["functionCall"]);a!=null&&y(e,["functionCall"],$Ge(a));const u=m(t,["codeExecutionResult"]);u!=null&&y(e,["codeExecutionResult"],u);const c=m(t,["executableCode"]);c!=null&&y(e,["executableCode"],c);const d=m(t,["functionResponse"]);d!=null&&y(e,["functionResponse"],d);const h=m(t,["text"]);return h!=null&&y(e,["text"],h),e}function HGe(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>zGe(o))),y(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&y(e,["role"],r),e}function GGe(t){const e={},n=m(t,["citationSources"]);return n!=null&&y(e,["citations"],n),e}function jGe(t){const e={},n=m(t,["retrievedUrl"]);n!=null&&y(e,["retrievedUrl"],n);const r=m(t,["urlRetrievalStatus"]);return r!=null&&y(e,["urlRetrievalStatus"],r),e}function KGe(t){const e={},n=m(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>jGe(i))),y(e,["urlMetadata"],r)}return e}function WGe(t){const e={},n=m(t,["content"]);n!=null&&y(e,["content"],HGe(n));const r=m(t,["citationMetadata"]);r!=null&&y(e,["citationMetadata"],GGe(r));const i=m(t,["tokenCount"]);i!=null&&y(e,["tokenCount"],i);const o=m(t,["finishReason"]);o!=null&&y(e,["finishReason"],o);const s=m(t,["urlContextMetadata"]);s!=null&&y(e,["urlContextMetadata"],KGe(s));const a=m(t,["avgLogprobs"]);a!=null&&y(e,["avgLogprobs"],a);const u=m(t,["groundingMetadata"]);u!=null&&y(e,["groundingMetadata"],u);const c=m(t,["index"]);c!=null&&y(e,["index"],c);const d=m(t,["logprobsResult"]);d!=null&&y(e,["logprobsResult"],d);const h=m(t,["safetyRatings"]);return h!=null&&y(e,["safetyRatings"],h),e}function H7(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(c=>WGe(c))),y(e,["candidates"],u)}const i=m(t,["modelVersion"]);i!=null&&y(e,["modelVersion"],i);const o=m(t,["promptFeedback"]);o!=null&&y(e,["promptFeedback"],o);const s=m(t,["responseId"]);s!=null&&y(e,["responseId"],s);const a=m(t,["usageMetadata"]);return a!=null&&y(e,["usageMetadata"],a),e}function YGe(t){const e={},n=m(t,["values"]);return n!=null&&y(e,["values"],n),e}function JGe(){return{}}function XGe(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>YGe(s))),y(e,["embeddings"],o)}return m(t,["metadata"])!=null&&y(e,["metadata"],JGe()),e}function QGe(t){const e={},n=m(t,["bytesBase64Encoded"]);n!=null&&y(e,["imageBytes"],_f(n));const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function Poe(t){const e={},n=m(t,["safetyAttributes","categories"]);n!=null&&y(e,["categories"],n);const r=m(t,["safetyAttributes","scores"]);r!=null&&y(e,["scores"],r);const i=m(t,["contentType"]);return i!=null&&y(e,["contentType"],i),e}function ZGe(t){const e={},n=m(t,["_self"]);n!=null&&y(e,["image"],QGe(n));const r=m(t,["raiFilteredReason"]);r!=null&&y(e,["raiFilteredReason"],r);const i=m(t,["_self"]);return i!=null&&y(e,["safetyAttributes"],Poe(i)),e}function e9e(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>ZGe(s))),y(e,["generatedImages"],o)}const i=m(t,["positivePromptSafetyAttributes"]);return i!=null&&y(e,["positivePromptSafetyAttributes"],Poe(i)),e}function t9e(t){const e={},n=m(t,["baseModel"]);n!=null&&y(e,["baseModel"],n);const r=m(t,["createTime"]);r!=null&&y(e,["createTime"],r);const i=m(t,["updateTime"]);return i!=null&&y(e,["updateTime"],i),e}function k2(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const r=m(t,["displayName"]);r!=null&&y(e,["displayName"],r);const i=m(t,["description"]);i!=null&&y(e,["description"],i);const o=m(t,["version"]);o!=null&&y(e,["version"],o);const s=m(t,["_self"]);s!=null&&y(e,["tunedModelInfo"],t9e(s));const a=m(t,["inputTokenLimit"]);a!=null&&y(e,["inputTokenLimit"],a);const u=m(t,["outputTokenLimit"]);u!=null&&y(e,["outputTokenLimit"],u);const c=m(t,["supportedGenerationMethods"]);return c!=null&&y(e,["supportedActions"],c),e}function n9e(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const i=m(t,["_self"]);if(i!=null){let o=foe(i);Array.isArray(o)&&(o=o.map(s=>k2(s))),y(e,["models"],o)}return e}function r9e(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function i9e(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["totalTokens"]);r!=null&&y(e,["totalTokens"],r);const i=m(t,["cachedContentTokenCount"]);return i!=null&&y(e,["cachedContentTokenCount"],i),e}function o9e(t){const e={},n=m(t,["video","uri"]);n!=null&&y(e,["uri"],n);const r=m(t,["video","encodedVideo"]);r!=null&&y(e,["videoBytes"],_f(r));const i=m(t,["encoding"]);return i!=null&&y(e,["mimeType"],i),e}function s9e(t){const e={},n=m(t,["_self"]);return n!=null&&y(e,["video"],o9e(n)),e}function a9e(t){const e={},n=m(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>s9e(s))),y(e,["generatedVideos"],o)}const r=m(t,["raiMediaFilteredCount"]);r!=null&&y(e,["raiMediaFilteredCount"],r);const i=m(t,["raiMediaFilteredReasons"]);return i!=null&&y(e,["raiMediaFilteredReasons"],i),e}function l9e(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const r=m(t,["metadata"]);r!=null&&y(e,["metadata"],r);const i=m(t,["done"]);i!=null&&y(e,["done"],i);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const s=m(t,["response","generateVideoResponse"]);return s!=null&&y(e,["response"],a9e(s)),e}function u9e(t){const e={},n=m(t,["fps"]);n!=null&&y(e,["fps"],n);const r=m(t,["endOffset"]);r!=null&&y(e,["endOffset"],r);const i=m(t,["startOffset"]);return i!=null&&y(e,["startOffset"],i),e}function c9e(t){const e={},n=m(t,["displayName"]);n!=null&&y(e,["displayName"],n);const r=m(t,["data"]);r!=null&&y(e,["data"],r);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function f9e(t){const e={},n=m(t,["displayName"]);n!=null&&y(e,["displayName"],n);const r=m(t,["fileUri"]);r!=null&&y(e,["fileUri"],r);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function d9e(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const r=m(t,["args"]);r!=null&&y(e,["args"],r);const i=m(t,["name"]);return i!=null&&y(e,["name"],i),e}function h9e(t){const e={},n=m(t,["videoMetadata"]);n!=null&&y(e,["videoMetadata"],u9e(n));const r=m(t,["thought"]);r!=null&&y(e,["thought"],r);const i=m(t,["inlineData"]);i!=null&&y(e,["inlineData"],c9e(i));const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],f9e(o));const s=m(t,["thoughtSignature"]);s!=null&&y(e,["thoughtSignature"],s);const a=m(t,["functionCall"]);a!=null&&y(e,["functionCall"],d9e(a));const u=m(t,["codeExecutionResult"]);u!=null&&y(e,["codeExecutionResult"],u);const c=m(t,["executableCode"]);c!=null&&y(e,["executableCode"],c);const d=m(t,["functionResponse"]);d!=null&&y(e,["functionResponse"],d);const h=m(t,["text"]);return h!=null&&y(e,["text"],h),e}function p9e(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>h9e(o))),y(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&y(e,["role"],r),e}function m9e(t){const e={},n=m(t,["citations"]);return n!=null&&y(e,["citations"],n),e}function g9e(t){const e={},n=m(t,["retrievedUrl"]);n!=null&&y(e,["retrievedUrl"],n);const r=m(t,["urlRetrievalStatus"]);return r!=null&&y(e,["urlRetrievalStatus"],r),e}function y9e(t){const e={},n=m(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>g9e(i))),y(e,["urlMetadata"],r)}return e}function v9e(t){const e={},n=m(t,["content"]);n!=null&&y(e,["content"],p9e(n));const r=m(t,["citationMetadata"]);r!=null&&y(e,["citationMetadata"],m9e(r));const i=m(t,["finishMessage"]);i!=null&&y(e,["finishMessage"],i);const o=m(t,["finishReason"]);o!=null&&y(e,["finishReason"],o);const s=m(t,["urlContextMetadata"]);s!=null&&y(e,["urlContextMetadata"],y9e(s));const a=m(t,["avgLogprobs"]);a!=null&&y(e,["avgLogprobs"],a);const u=m(t,["groundingMetadata"]);u!=null&&y(e,["groundingMetadata"],u);const c=m(t,["index"]);c!=null&&y(e,["index"],c);const d=m(t,["logprobsResult"]);d!=null&&y(e,["logprobsResult"],d);const h=m(t,["safetyRatings"]);return h!=null&&y(e,["safetyRatings"],h),e}function G7(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>v9e(d))),y(e,["candidates"],c)}const i=m(t,["createTime"]);i!=null&&y(e,["createTime"],i);const o=m(t,["modelVersion"]);o!=null&&y(e,["modelVersion"],o);const s=m(t,["promptFeedback"]);s!=null&&y(e,["promptFeedback"],s);const a=m(t,["responseId"]);a!=null&&y(e,["responseId"],a);const u=m(t,["usageMetadata"]);return u!=null&&y(e,["usageMetadata"],u),e}function _9e(t){const e={},n=m(t,["truncated"]);n!=null&&y(e,["truncated"],n);const r=m(t,["token_count"]);return r!=null&&y(e,["tokenCount"],r),e}function w9e(t){const e={},n=m(t,["values"]);n!=null&&y(e,["values"],n);const r=m(t,["statistics"]);return r!=null&&y(e,["statistics"],_9e(r)),e}function b9e(t){const e={},n=m(t,["billableCharacterCount"]);return n!=null&&y(e,["billableCharacterCount"],n),e}function T9e(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>w9e(s))),y(e,["embeddings"],o)}const i=m(t,["metadata"]);return i!=null&&y(e,["metadata"],b9e(i)),e}function Noe(t){const e={},n=m(t,["gcsUri"]);n!=null&&y(e,["gcsUri"],n);const r=m(t,["bytesBase64Encoded"]);r!=null&&y(e,["imageBytes"],_f(r));const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function Moe(t){const e={},n=m(t,["safetyAttributes","categories"]);n!=null&&y(e,["categories"],n);const r=m(t,["safetyAttributes","scores"]);r!=null&&y(e,["scores"],r);const i=m(t,["contentType"]);return i!=null&&y(e,["contentType"],i),e}function WT(t){const e={},n=m(t,["_self"]);n!=null&&y(e,["image"],Noe(n));const r=m(t,["raiFilteredReason"]);r!=null&&y(e,["raiFilteredReason"],r);const i=m(t,["_self"]);i!=null&&y(e,["safetyAttributes"],Moe(i));const o=m(t,["prompt"]);return o!=null&&y(e,["enhancedPrompt"],o),e}function E9e(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>WT(s))),y(e,["generatedImages"],o)}const i=m(t,["positivePromptSafetyAttributes"]);return i!=null&&y(e,["positivePromptSafetyAttributes"],Moe(i)),e}function S9e(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>WT(o))),y(e,["generatedImages"],i)}return e}function x9e(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>WT(o))),y(e,["generatedImages"],i)}return e}function A9e(t){const e={},n=m(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>WT(i))),y(e,["generatedImages"],r)}return e}function C9e(t){const e={},n=m(t,["label"]);n!=null&&y(e,["label"],n);const r=m(t,["score"]);return r!=null&&y(e,["score"],r),e}function I9e(t){const e={},n=m(t,["_self"]);n!=null&&y(e,["mask"],Noe(n));const r=m(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>C9e(o))),y(e,["labels"],i)}return e}function R9e(t){const e={},n=m(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>I9e(i))),y(e,["generatedMasks"],r)}return e}function P9e(t){const e={},n=m(t,["endpoint"]);n!=null&&y(e,["name"],n);const r=m(t,["deployedModelId"]);return r!=null&&y(e,["deployedModelId"],r),e}function N9e(t){const e={},n=m(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&y(e,["baseModel"],n);const r=m(t,["createTime"]);r!=null&&y(e,["createTime"],r);const i=m(t,["updateTime"]);return i!=null&&y(e,["updateTime"],i),e}function M9e(t){const e={},n=m(t,["checkpointId"]);n!=null&&y(e,["checkpointId"],n);const r=m(t,["epoch"]);r!=null&&y(e,["epoch"],r);const i=m(t,["step"]);return i!=null&&y(e,["step"],i),e}function O2(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const r=m(t,["displayName"]);r!=null&&y(e,["displayName"],r);const i=m(t,["description"]);i!=null&&y(e,["description"],i);const o=m(t,["versionId"]);o!=null&&y(e,["version"],o);const s=m(t,["deployedModels"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(g=>P9e(g))),y(e,["endpoints"],h)}const a=m(t,["labels"]);a!=null&&y(e,["labels"],a);const u=m(t,["_self"]);u!=null&&y(e,["tunedModelInfo"],N9e(u));const c=m(t,["defaultCheckpointId"]);c!=null&&y(e,["defaultCheckpointId"],c);const d=m(t,["checkpoints"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(g=>M9e(g))),y(e,["checkpoints"],h)}return e}function D9e(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const i=m(t,["_self"]);if(i!=null){let o=foe(i);Array.isArray(o)&&(o=o.map(s=>O2(s))),y(e,["models"],o)}return e}function k9e(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function O9e(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["totalTokens"]);return r!=null&&y(e,["totalTokens"],r),e}function L9e(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["tokensInfo"]);return r!=null&&y(e,["tokensInfo"],r),e}function V9e(t){const e={},n=m(t,["gcsUri"]);n!=null&&y(e,["uri"],n);const r=m(t,["bytesBase64Encoded"]);r!=null&&y(e,["videoBytes"],_f(r));const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function U9e(t){const e={},n=m(t,["_self"]);return n!=null&&y(e,["video"],V9e(n)),e}function q9e(t){const e={},n=m(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>U9e(s))),y(e,["generatedVideos"],o)}const r=m(t,["raiMediaFilteredCount"]);r!=null&&y(e,["raiMediaFilteredCount"],r);const i=m(t,["raiMediaFilteredReasons"]);return i!=null&&y(e,["raiMediaFilteredReasons"],i),e}function F9e(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const r=m(t,["metadata"]);r!=null&&y(e,["metadata"],r);const i=m(t,["done"]);i!=null&&y(e,["done"],i);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const s=m(t,["response"]);return s!=null&&y(e,["response"],q9e(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const B9e="Content-Type",$9e="X-Server-Timeout",z9e="User-Agent",L2="x-goog-api-client",H9e="1.19.0",G9e=`google-genai-sdk/${H9e}`,j9e="v1beta1",K9e="v1beta",j7=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class W9e{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:j9e,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:K9e,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[s,a]of Object.entries(e.queryParams))i.searchParams.append(s,String(a));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(n))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r){if(n&&n.timeout||r){const i=new AbortController,o=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const s=setTimeout(()=>i.abort(),n.timeout);s&&typeof s.unref=="function"&&s.unref()}r&&r.addEventListener("abort",()=>{i.abort()}),e.signal=o}return n&&n.extraBody!==null&&Y9e(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await K7(i),new R2(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await K7(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var n;return jd(this,arguments,function*(){const i=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let s="";for(;;){const{done:a,value:u}=yield Qt(i.read());if(a){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=o.decode(u,{stream:!0});try{const h=JSON.parse(c);if("error"in h){const g=JSON.parse(JSON.stringify(h.error)),_=g.status,S=g.code,b=`got status: ${_}. ${JSON.stringify(h)}`;if(S>=400&&S<600)throw new jT({message:b,status:S})}}catch(h){if(h.name==="ApiError")throw h}s+=c;let d=s.match(j7);for(;d;){const h=d[1];try{const g=new Response(h,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Qt(new R2(g)),s=s.slice(d[0].length),d=s.match(j7)}catch(g){throw new Error(`exception parsing stream chunk ${h}. ${g}`)}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=G9e+" "+this.clientOptions.userAgentExtra;return e[z9e]=n,e[L2]=n,e[B9e]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[r,i]of Object.entries(e.headers))n.append(r,i);e.timeout&&e.timeout>0&&n.append($9e,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,s=await o.stat(e);i.sizeBytes=String(s.size);const a=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:s.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=a;const u=await this.fetchUploadUrl(i,n);return o.upload(e,u,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var r;let i={};n!=null&&n.httpOptions?i=n.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const o={file:e},s=await this.request({path:Ge("upload/v1beta/files",o._url),body:JSON.stringify(o),httpMethod:"POST",httpOptions:i});if(!s||!(s!=null&&s.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const a=(r=s==null?void 0:s.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(a===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return a}}async function K7(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new jT({message:i,status:n}):new Error(i)}}function Y9e(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,s){const a=Object.assign({},o);for(const u in s)if(Object.prototype.hasOwnProperty.call(s,u)){const c=s[u],d=a[u];c&&typeof c=="object"&&!Array.isArray(c)&&d&&typeof d=="object"&&!Array.isArray(d)?a[u]=r(d,c):(d&&c&&typeof d!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${u}". Original type: ${typeof d}, New type: ${typeof c}. Overwriting.`),a[u]=c)}return a}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const J9e="mcp_used/unknown";let X9e=!1;function Doe(t){for(const e of t)if(Q9e(e)||typeof e=="object"&&"inputSchema"in e)return!0;return X9e}function koe(t){var e;const n=(e=t[L2])!==null&&e!==void 0?e:"";t[L2]=(n+` ${J9e}`).trimStart()}function Q9e(t){return t!==null&&typeof t=="object"&&t instanceof ZL}function Z9e(t,e=100){return jd(this,arguments,function*(){let r,i=0;for(;i<e;){const o=yield Qt(t.listTools({cursor:r}));for(const s of o.tools)yield yield Qt(s),i++;if(!o.nextCursor)break;r=o.nextCursor}})}class ZL{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new ZL(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const o={},s=[];for(const d of this.mcpClients)try{for(var a=!0,u=(n=void 0,bg(Z9e(d))),c;c=await u.next(),e=c.done,!e;a=!0){i=c.value,a=!1;const h=i;s.push(h);const g=h.name;if(o[g])throw new Error(`Duplicate function name ${g} found in MCP tools. Please ensure function names are unique.`);o[g]=d}}catch(h){n={error:h}}finally{try{!a&&!e&&(r=u.return)&&await r.call(u)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),p3e(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const s=await i.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function e8e(t,e,n){const r=new s3e;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data);const o=Pze(i);Object.assign(r,o),e(r)}class t8e{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),s=i8e(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),u=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${a}`;let c=()=>{};const d=new Promise(I=>{c=I}),h=e.callbacks,g=function(){c({})},_=this.apiClient,S={onopen:g,onmessage:I=>{e8e(_,h.onmessage,I)},onerror:(n=h==null?void 0:h.onerror)!==null&&n!==void 0?n:function(I){},onclose:(r=h==null?void 0:h.onclose)!==null&&r!==void 0?r:function(I){}},b=this.webSocketFactory.create(u,r8e(s),S);b.connect(),await d;const T=At(this.apiClient,e.model),x=Toe({model:T}),C=D2({setup:x});return b.send(JSON.stringify(C)),new n8e(b,this.apiClient)}}class n8e{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=C5e(e),r=Eoe(n);this.conn.send(JSON.stringify({clientContent:r}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=I5e(e),r=D2(n);this.conn.send(JSON.stringify(r))}sendPlaybackControl(e){const n=D2({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Dd.PLAY)}pause(){this.sendPlaybackControl(Dd.PAUSE)}stop(){this.sendPlaybackControl(Dd.STOP)}resetContext(){this.sendPlaybackControl(Dd.RESET_CONTEXT)}close(){this.conn.close()}}function r8e(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function i8e(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const o8e="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function s8e(t,e,n){const r=new o3e;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const o=JSON.parse(i);if(t.isVertexAI()){const s=zze(o);Object.assign(r,s)}else{const s=bze(o);Object.assign(r,s)}e(r)}class a8e{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new t8e(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,o,s,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const u=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let d;const h=this.apiClient.getHeaders();e.config&&e.config.tools&&Doe(e.config.tools)&&koe(h);const g=f8e(h);if(this.apiClient.isVertexAI())d=`${u}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(g);else{const R=this.apiClient.getApiKey();let U="BidiGenerateContent",L="key";R!=null&&R.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),U="BidiGenerateContentConstrained",L="access_token"),d=`${u}/ws/google.ai.generativelanguage.${c}.GenerativeService.${U}?${L}=${R}`}let _=()=>{};const S=new Promise(R=>{_=R}),b=e.callbacks,T=function(){var R;(R=b==null?void 0:b.onopen)===null||R===void 0||R.call(b),_({})},x=this.apiClient,C={onopen:T,onmessage:R=>{s8e(x,b.onmessage,R)},onerror:(n=b==null?void 0:b.onerror)!==null&&n!==void 0?n:function(R){},onclose:(r=b==null?void 0:b.onclose)!==null&&r!==void 0?r:function(R){}},I=this.webSocketFactory.create(d,c8e(g),C);I.connect(),await S;let N=At(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&N.startsWith("publishers/")){const R=this.apiClient.getProject(),U=this.apiClient.getLocation();N=`projects/${R}/locations/${U}/`+N}let V={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[jw.AUDIO]}:e.config.responseModalities=[jw.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const q=(a=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[],P=[];for(const R of q)if(this.isCallableTool(R)){const U=R;P.push(await U.tool())}else P.push(R);P.length>0&&(e.config.tools=P);const O={model:N,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?V=rze(this.apiClient,O):V=E5e(this.apiClient,O),delete V.config,I.send(JSON.stringify(V)),new u8e(I,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const l8e={turnComplete:!0};class u8e{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=wo(n.turns),e.isVertexAI()?r=r.map(i=>hp(i)):r=r.map(i=>KT(i))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(o8e)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},l8e),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:sze(e)}:n={realtimeInput:A5e(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function c8e(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function f8e(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const W7=10;function Y7(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Kd(s)){i=!0;break}if(!i)return!0;const o=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function Kd(t){return"callTool"in t&&typeof t.callTool=="function"}function d8e(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>Kd(i)))!==null&&r!==void 0?r:!1}function h8e(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>!Kd(i)))!==null&&r!==void 0?r:!1}function J7(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class p8e extends vf{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,o,s,a;const u=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!d8e(n)||Y7(n.config))return await this.generateContentInternal(u);if(h8e(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let c,d;const h=wo(u.contents),g=(o=(i=(r=u.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:W7;let _=0;for(;_<g&&(c=await this.generateContentInternal(u),!(!c.functionCalls||c.functionCalls.length===0));){const S=c.candidates[0].content,b=[];for(const T of(a=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[])if(Kd(T)){const C=await T.callTool(c.functionCalls);b.push(...C)}_++,d={role:"user",parts:b},u.contents=wo(u.contents),u.contents.push(S),u.contents.push(d),J7(u.config)&&(h.push(S),h.push(d))}return J7(u.config)&&(c.automaticFunctionCallingHistory=h),c},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),Y7(n.config)){const r=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(r)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let o;const s=[];if(r!=null&&r.generatedImages)for(const u of r.generatedImages)u&&(u!=null&&u.safetyAttributes)&&((i=u==null?void 0:u.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=u==null?void 0:u.safetyAttributes:s.push(u);let a;return o?a={generatedImages:s,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new tv(ef.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(s),s)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const s=await Promise.all(o.map(async u=>Kd(u)?await u.tool():u)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(a.config.tools=s,e.config&&e.config.tools&&Doe(e.config.tools)){const u=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let c=Object.assign({},u);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),koe(c),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(e){var n,r,i;const o=new Map;for(const s of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Kd(s)){const a=s,u=await a.tool();for(const c of(i=u.functionDeclarations)!==null&&i!==void 0?i:[]){if(!c.name)throw new Error("Function declaration name is required.");if(o.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);o.set(c.name,a)}}return o}async processAfcStream(e){var n,r,i;const o=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:W7;let s=!1,a=0;const u=await this.initAfcToolsMap(e);return(function(c,d,h){var g,_;return jd(this,arguments,function*(){for(var S,b,T,x;a<o;){s&&(a++,s=!1);const V=yield Qt(c.processParamsMaybeAddMcpUsage(h)),q=yield Qt(c.generateContentStreamInternal(V)),P=[],O=[];try{for(var C=!0,I=(b=void 0,bg(q)),N;N=yield Qt(I.next()),S=N.done,!S;C=!0){x=N.value,C=!1;const R=x;if(yield yield Qt(R),R.candidates&&(!((g=R.candidates[0])===null||g===void 0)&&g.content)){O.push(R.candidates[0].content);for(const U of(_=R.candidates[0].content.parts)!==null&&_!==void 0?_:[])if(a<o&&U.functionCall){if(!U.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(U.functionCall.name)){const L=yield Qt(d.get(U.functionCall.name).callTool([U.functionCall]));P.push(...L)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${U.functionCall.name}`)}}}}catch(R){b={error:R}}finally{try{!C&&!S&&(T=I.return)&&(yield Qt(T.call(I)))}finally{if(b)throw b.error}}if(P.length>0){s=!0;const R=new Fm;R.candidates=[{content:{role:"user",parts:P}}],yield yield Qt(R);const U=[];U.push(...O),U.push({role:"user",parts:P});const L=wo(h.contents).concat(U);h.contents=L}else break}})})(this,u,e)}async generateContentInternal(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=z7(this.apiClient,e);return a=Ge("{model}:generateContent",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),s.then(d=>{const h=G7(d),g=new Fm;return Object.assign(g,h),g})}else{const c=$7(this.apiClient,e);return a=Ge("{model}:generateContent",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),s.then(d=>{const h=H7(d),g=new Fm;return Object.assign(g,h),g})}}async generateContentStreamInternal(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=z7(this.apiClient,e);return a=Ge("{model}:streamGenerateContent?alt=sse",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.requestStream({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(h){return jd(this,arguments,function*(){var g,_,S,b;try{for(var T=!0,x=bg(h),C;C=yield Qt(x.next()),g=C.done,!g;T=!0){b=C.value,T=!1;const I=b,N=G7(yield Qt(I.json()));N.sdkHttpResponse={headers:I.headers};const V=new Fm;Object.assign(V,N),yield yield Qt(V)}}catch(I){_={error:I}}finally{try{!T&&!g&&(S=x.return)&&(yield Qt(S.call(x)))}finally{if(_)throw _.error}}})})}else{const c=$7(this.apiClient,e);return a=Ge("{model}:streamGenerateContent?alt=sse",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.requestStream({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(h){return jd(this,arguments,function*(){var g,_,S,b;try{for(var T=!0,x=bg(h),C;C=yield Qt(x.next()),g=C.done,!g;T=!0){b=C.value,T=!1;const I=b,N=H7(yield Qt(I.json()));N.sdkHttpResponse={headers:I.headers};const V=new Fm;Object.assign(V,N),yield yield Qt(V)}}catch(I){_={error:I}}finally{try{!T&&!g&&(S=x.return)&&(yield Qt(S.call(x)))}finally{if(_)throw _.error}}})})}}async embedContent(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=oGe(this.apiClient,e);return a=Ge("{model}:predict",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),s.then(d=>{const h=T9e(d),g=new T7;return Object.assign(g,h),g})}else{const c=gHe(this.apiClient,e);return a=Ge("{model}:batchEmbedContents",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),s.then(d=>{const h=XGe(d),g=new T7;return Object.assign(g,h),g})}}async generateImagesInternal(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=aGe(this.apiClient,e);return a=Ge("{model}:predict",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),s.then(d=>{const h=E9e(d),g=new E7;return Object.assign(g,h),g})}else{const c=vHe(this.apiClient,e);return a=Ge("{model}:predict",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),s.then(d=>{const h=e9e(d),g=new E7;return Object.assign(g,h),g})}}async editImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=pGe(this.apiClient,e);return o=Ge("{model}:predict",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:u.headers},d})),i.then(u=>{const c=S9e(u),d=new XBe;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=gGe(this.apiClient,e);return o=Ge("{model}:predict",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:u.headers},d})),i.then(u=>{const c=x9e(u),d=new QBe;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=wGe(this.apiClient,e);return o=Ge("{model}:predict",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const c=A9e(u),d=new ZBe;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=SGe(this.apiClient,e);return o=Ge("{model}:predict",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const c=R9e(u),d=new e3e;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=xGe(this.apiClient,e);return a=Ge("{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>O2(d))}else{const c=_He(this.apiClient,e);return a=Ge("{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>k2(d))}}async listInternal(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=CGe(this.apiClient,e);return a=Ge("{models_url}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),s.then(d=>{const h=D9e(d),g=new S7;return Object.assign(g,h),g})}else{const c=bHe(this.apiClient,e);return a=Ge("{models_url}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),s.then(d=>{const h=n9e(d),g=new S7;return Object.assign(g,h),g})}}async update(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=RGe(this.apiClient,e);return a=Ge("{model}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>O2(d))}else{const c=EHe(this.apiClient,e);return a=Ge("{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>k2(d))}}async delete(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=PGe(this.apiClient,e);return a=Ge("{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),s.then(d=>{const h=k9e(d),g=new x7;return Object.assign(g,h),g})}else{const c=SHe(this.apiClient,e);return a=Ge("{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),s.then(d=>{const h=r9e(d),g=new x7;return Object.assign(g,h),g})}}async countTokens(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=MGe(this.apiClient,e);return a=Ge("{model}:countTokens",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),s.then(d=>{const h=O9e(d),g=new A7;return Object.assign(g,h),g})}else{const c=AHe(this.apiClient,e);return a=Ge("{model}:countTokens",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),s.then(d=>{const h=i9e(d),g=new A7;return Object.assign(g,h),g})}}async computeTokens(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=DGe(this.apiClient,e);return o=Ge("{model}:computeTokens",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:u.headers},d})),i.then(u=>{const c=L9e(u),d=new t3e;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=UGe(this.apiClient,e);return a=Ge("{model}:predictLongRunning",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>{const h=F9e(d),g=new Kw;return Object.assign(g,h),g})}else{const c=RHe(this.apiClient,e);return a=Ge("{model}:predictLongRunning",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const h=l9e(d),g=new Kw;return Object.assign(g,h),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class m8e extends vf{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=$Be(e);return a=Ge("{operationName}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s}else{const c=FBe(e);return a=Ge("{operationName}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s}}async fetchPredictVideosOperationInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=BBe(e);return o=Ge("{resourceName}:fetchPredictOperation",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function g8e(t){const e={},n=m(t,["voiceName"]);return n!=null&&y(e,["voiceName"],n),e}function Ooe(t){const e={},n=m(t,["prebuiltVoiceConfig"]);return n!=null&&y(e,["prebuiltVoiceConfig"],g8e(n)),e}function y8e(t){const e={},n=m(t,["speaker"]);n!=null&&y(e,["speaker"],n);const r=m(t,["voiceConfig"]);return r!=null&&y(e,["voiceConfig"],Ooe(r)),e}function v8e(t){const e={},n=m(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>y8e(i))),y(e,["speakerVoiceConfigs"],r)}return e}function _8e(t){const e={},n=m(t,["voiceConfig"]);n!=null&&y(e,["voiceConfig"],Ooe(n));const r=m(t,["multiSpeakerVoiceConfig"]);r!=null&&y(e,["multiSpeakerVoiceConfig"],v8e(r));const i=m(t,["languageCode"]);return i!=null&&y(e,["languageCode"],i),e}function w8e(t){const e={},n=m(t,["fps"]);n!=null&&y(e,["fps"],n);const r=m(t,["endOffset"]);r!=null&&y(e,["endOffset"],r);const i=m(t,["startOffset"]);return i!=null&&y(e,["startOffset"],i),e}function b8e(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["data"]);n!=null&&y(e,["data"],n);const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function T8e(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function E8e(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const r=m(t,["args"]);r!=null&&y(e,["args"],r);const i=m(t,["name"]);return i!=null&&y(e,["name"],i),e}function S8e(t){const e={},n=m(t,["videoMetadata"]);n!=null&&y(e,["videoMetadata"],w8e(n));const r=m(t,["thought"]);r!=null&&y(e,["thought"],r);const i=m(t,["inlineData"]);i!=null&&y(e,["inlineData"],b8e(i));const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],T8e(o));const s=m(t,["thoughtSignature"]);s!=null&&y(e,["thoughtSignature"],s);const a=m(t,["functionCall"]);a!=null&&y(e,["functionCall"],E8e(a));const u=m(t,["codeExecutionResult"]);u!=null&&y(e,["codeExecutionResult"],u);const c=m(t,["executableCode"]);c!=null&&y(e,["executableCode"],c);const d=m(t,["functionResponse"]);d!=null&&y(e,["functionResponse"],d);const h=m(t,["text"]);return h!=null&&y(e,["text"],h),e}function x8e(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>S8e(o))),y(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&y(e,["role"],r),e}function A8e(t){const e={},n=m(t,["behavior"]);n!=null&&y(e,["behavior"],n);const r=m(t,["description"]);r!=null&&y(e,["description"],r);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const o=m(t,["parameters"]);o!=null&&y(e,["parameters"],o);const s=m(t,["parametersJsonSchema"]);s!=null&&y(e,["parametersJsonSchema"],s);const a=m(t,["response"]);a!=null&&y(e,["response"],a);const u=m(t,["responseJsonSchema"]);return u!=null&&y(e,["responseJsonSchema"],u),e}function C8e(t){const e={},n=m(t,["startTime"]);n!=null&&y(e,["startTime"],n);const r=m(t,["endTime"]);return r!=null&&y(e,["endTime"],r),e}function I8e(t){const e={},n=m(t,["timeRangeFilter"]);if(n!=null&&y(e,["timeRangeFilter"],C8e(n)),m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function R8e(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const r=m(t,["dynamicThreshold"]);return r!=null&&y(e,["dynamicThreshold"],r),e}function P8e(t){const e={},n=m(t,["dynamicRetrievalConfig"]);return n!=null&&y(e,["dynamicRetrievalConfig"],R8e(n)),e}function N8e(){return{}}function M8e(t){const e={},n=m(t,["environment"]);return n!=null&&y(e,["environment"],n),e}function D8e(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(c=>A8e(c))),y(e,["functionDeclarations"],u)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=m(t,["googleSearch"]);r!=null&&y(e,["googleSearch"],I8e(r));const i=m(t,["googleSearchRetrieval"]);if(i!=null&&y(e,["googleSearchRetrieval"],P8e(i)),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(m(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");m(t,["urlContext"])!=null&&y(e,["urlContext"],N8e());const s=m(t,["computerUse"]);s!=null&&y(e,["computerUse"],M8e(s));const a=m(t,["codeExecution"]);return a!=null&&y(e,["codeExecution"],a),e}function k8e(t){const e={},n=m(t,["handle"]);if(n!=null&&y(e,["handle"],n),m(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function X7(){return{}}function O8e(t){const e={},n=m(t,["disabled"]);n!=null&&y(e,["disabled"],n);const r=m(t,["startOfSpeechSensitivity"]);r!=null&&y(e,["startOfSpeechSensitivity"],r);const i=m(t,["endOfSpeechSensitivity"]);i!=null&&y(e,["endOfSpeechSensitivity"],i);const o=m(t,["prefixPaddingMs"]);o!=null&&y(e,["prefixPaddingMs"],o);const s=m(t,["silenceDurationMs"]);return s!=null&&y(e,["silenceDurationMs"],s),e}function L8e(t){const e={},n=m(t,["automaticActivityDetection"]);n!=null&&y(e,["automaticActivityDetection"],O8e(n));const r=m(t,["activityHandling"]);r!=null&&y(e,["activityHandling"],r);const i=m(t,["turnCoverage"]);return i!=null&&y(e,["turnCoverage"],i),e}function V8e(t){const e={},n=m(t,["targetTokens"]);return n!=null&&y(e,["targetTokens"],n),e}function U8e(t){const e={},n=m(t,["triggerTokens"]);n!=null&&y(e,["triggerTokens"],n);const r=m(t,["slidingWindow"]);return r!=null&&y(e,["slidingWindow"],V8e(r)),e}function q8e(t){const e={},n=m(t,["proactiveAudio"]);return n!=null&&y(e,["proactiveAudio"],n),e}function F8e(t,e){const n={},r=m(t,["generationConfig"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig"],r);const i=m(t,["responseModalities"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig","responseModalities"],i);const o=m(t,["temperature"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","temperature"],o);const s=m(t,["topP"]);e!==void 0&&s!=null&&y(e,["setup","generationConfig","topP"],s);const a=m(t,["topK"]);e!==void 0&&a!=null&&y(e,["setup","generationConfig","topK"],a);const u=m(t,["maxOutputTokens"]);e!==void 0&&u!=null&&y(e,["setup","generationConfig","maxOutputTokens"],u);const c=m(t,["mediaResolution"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","mediaResolution"],c);const d=m(t,["seed"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","seed"],d);const h=m(t,["speechConfig"]);e!==void 0&&h!=null&&y(e,["setup","generationConfig","speechConfig"],_8e(XL(h)));const g=m(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],g);const _=m(t,["systemInstruction"]);e!==void 0&&_!=null&&y(e,["setup","systemInstruction"],x8e($r(_)));const S=m(t,["tools"]);if(e!==void 0&&S!=null){let V=fp(S);Array.isArray(V)&&(V=V.map(q=>D8e(cp(q)))),y(e,["setup","tools"],V)}const b=m(t,["sessionResumption"]);e!==void 0&&b!=null&&y(e,["setup","sessionResumption"],k8e(b));const T=m(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&y(e,["setup","inputAudioTranscription"],X7());const x=m(t,["outputAudioTranscription"]);e!==void 0&&x!=null&&y(e,["setup","outputAudioTranscription"],X7());const C=m(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&y(e,["setup","realtimeInputConfig"],L8e(C));const I=m(t,["contextWindowCompression"]);e!==void 0&&I!=null&&y(e,["setup","contextWindowCompression"],U8e(I));const N=m(t,["proactivity"]);return e!==void 0&&N!=null&&y(e,["setup","proactivity"],q8e(N)),n}function B8e(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["setup","model"],At(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],F8e(i,n)),n}function $8e(t,e,n){const r={},i=m(e,["expireTime"]);n!==void 0&&i!=null&&y(n,["expireTime"],i);const o=m(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&y(n,["newSessionExpireTime"],o);const s=m(e,["uses"]);n!==void 0&&s!=null&&y(n,["uses"],s);const a=m(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&y(n,["bidiGenerateContentSetup"],B8e(t,a));const u=m(e,["lockAdditionalFields"]);return n!==void 0&&u!=null&&y(n,["fieldMask"],u),r}function z8e(t,e){const n={},r=m(e,["config"]);return r!=null&&y(n,["config"],$8e(t,r,n)),n}function H8e(t){const e={},n=m(t,["name"]);return n!=null&&y(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function G8e(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(o=>`${n}.${o}`);e.push(...i)}else e.push(n)}return e.join(",")}function j8e(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const o=G8e(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];i.length>0&&(a=i.map(c=>s.includes(c)?`generationConfig.${c}`:c));const u=[];o&&u.push(o),a.length>0&&u.push(...a),u.length>0?t.fieldMask=u.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class K8e extends vf{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=z8e(this.apiClient,e);o=Ge("auth_tokens",a._url),s=a._query,delete a.config,delete a._url,delete a._query;const u=j8e(a,e.config);return i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>H8e(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function W8e(t){const e={},n=m(t,["name"]);n!=null&&y(e,["_url","name"],n);const r=m(t,["config"]);return r!=null&&y(e,["config"],r),e}function Y8e(t,e){const n={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const i=m(t,["pageToken"]);e!==void 0&&i!=null&&y(e,["_query","pageToken"],i);const o=m(t,["filter"]);return e!==void 0&&o!=null&&y(e,["_query","filter"],o),n}function J8e(t){const e={},n=m(t,["config"]);return n!=null&&y(e,["config"],Y8e(n,e)),e}function X8e(t){const e={},n=m(t,["name"]);n!=null&&y(e,["_url","name"],n);const r=m(t,["config"]);return r!=null&&y(e,["config"],r),e}function Q8e(t){const e={},n=m(t,["textInput"]);n!=null&&y(e,["textInput"],n);const r=m(t,["output"]);return r!=null&&y(e,["output"],r),e}function Z8e(t){const e={};if(m(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=m(t,["examples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Q8e(i))),y(e,["examples","examples"],r)}return e}function eje(t,e){const n={};if(m(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=m(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&y(e,["displayName"],r),m(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=m(t,["epochCount"]);e!==void 0&&i!=null&&y(e,["tuningTask","hyperparameters","epochCount"],i);const o=m(t,["learningRateMultiplier"]);if(o!=null&&y(n,["tuningTask","hyperparameters","learningRateMultiplier"],o),m(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(m(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(m(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const s=m(t,["batchSize"]);e!==void 0&&s!=null&&y(e,["tuningTask","hyperparameters","batchSize"],s);const a=m(t,["learningRate"]);if(e!==void 0&&a!=null&&y(e,["tuningTask","hyperparameters","learningRate"],a),m(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return n}function tje(t){const e={},n=m(t,["baseModel"]);n!=null&&y(e,["baseModel"],n);const r=m(t,["preTunedModel"]);r!=null&&y(e,["preTunedModel"],r);const i=m(t,["trainingDataset"]);i!=null&&y(e,["tuningTask","trainingData"],Z8e(i));const o=m(t,["config"]);return o!=null&&y(e,["config"],eje(o,e)),e}function nje(t){const e={},n=m(t,["name"]);n!=null&&y(e,["_url","name"],n);const r=m(t,["config"]);return r!=null&&y(e,["config"],r),e}function rje(t,e){const n={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const i=m(t,["pageToken"]);e!==void 0&&i!=null&&y(e,["_query","pageToken"],i);const o=m(t,["filter"]);return e!==void 0&&o!=null&&y(e,["_query","filter"],o),n}function ije(t){const e={},n=m(t,["config"]);return n!=null&&y(e,["config"],rje(n,e)),e}function oje(t){const e={},n=m(t,["name"]);n!=null&&y(e,["_url","name"],n);const r=m(t,["config"]);return r!=null&&y(e,["config"],r),e}function sje(t,e){const n={},r=m(t,["gcsUri"]);e!==void 0&&r!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],r);const i=m(t,["vertexDatasetResource"]);if(e!==void 0&&i!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],i),m(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function aje(t,e){const n={},r=m(t,["gcsUri"]);r!=null&&y(n,["validationDatasetUri"],r);const i=m(t,["vertexDatasetResource"]);return e!==void 0&&i!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],i),n}function lje(t,e){const n={},r=m(t,["validationDataset"]);e!==void 0&&r!=null&&y(e,["supervisedTuningSpec"],aje(r,n));const i=m(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&y(e,["tunedModelDisplayName"],i);const o=m(t,["description"]);e!==void 0&&o!=null&&y(e,["description"],o);const s=m(t,["epochCount"]);e!==void 0&&s!=null&&y(e,["supervisedTuningSpec","hyperParameters","epochCount"],s);const a=m(t,["learningRateMultiplier"]);e!==void 0&&a!=null&&y(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],a);const u=m(t,["exportLastCheckpointOnly"]);e!==void 0&&u!=null&&y(e,["supervisedTuningSpec","exportLastCheckpointOnly"],u);const c=m(t,["preTunedModelCheckpointId"]);c!=null&&y(n,["preTunedModel","checkpointId"],c);const d=m(t,["adapterSize"]);if(e!==void 0&&d!=null&&y(e,["supervisedTuningSpec","hyperParameters","adapterSize"],d),m(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(m(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const h=m(t,["labels"]);return e!==void 0&&h!=null&&y(e,["labels"],h),n}function uje(t){const e={},n=m(t,["baseModel"]);n!=null&&y(e,["baseModel"],n);const r=m(t,["preTunedModel"]);r!=null&&y(e,["preTunedModel"],r);const i=m(t,["trainingDataset"]);i!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],sje(i,e));const o=m(t,["config"]);return o!=null&&y(e,["config"],lje(o,e)),e}function cje(t){const e={},n=m(t,["name"]);n!=null&&y(e,["model"],n);const r=m(t,["name"]);return r!=null&&y(e,["endpoint"],r),e}function Loe(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["name"]);r!=null&&y(e,["name"],r);const i=m(t,["state"]);i!=null&&y(e,["state"],loe(i));const o=m(t,["createTime"]);o!=null&&y(e,["createTime"],o);const s=m(t,["tuningTask","startTime"]);s!=null&&y(e,["startTime"],s);const a=m(t,["tuningTask","completeTime"]);a!=null&&y(e,["endTime"],a);const u=m(t,["updateTime"]);u!=null&&y(e,["updateTime"],u);const c=m(t,["description"]);c!=null&&y(e,["description"],c);const d=m(t,["baseModel"]);d!=null&&y(e,["baseModel"],d);const h=m(t,["_self"]);h!=null&&y(e,["tunedModel"],cje(h));const g=m(t,["customBaseModel"]);g!=null&&y(e,["customBaseModel"],g);const _=m(t,["experiment"]);_!=null&&y(e,["experiment"],_);const S=m(t,["labels"]);S!=null&&y(e,["labels"],S);const b=m(t,["outputUri"]);b!=null&&y(e,["outputUri"],b);const T=m(t,["pipelineJob"]);T!=null&&y(e,["pipelineJob"],T);const x=m(t,["serviceAccount"]);x!=null&&y(e,["serviceAccount"],x);const C=m(t,["tunedModelDisplayName"]);return C!=null&&y(e,["tunedModelDisplayName"],C),e}function fje(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const i=m(t,["tunedModels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Loe(s))),y(e,["tuningJobs"],o)}return e}function dje(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["name"]);r!=null&&y(e,["name"],r);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const o=m(t,["done"]);o!=null&&y(e,["done"],o);const s=m(t,["error"]);return s!=null&&y(e,["error"],s),e}function hje(t){const e={},n=m(t,["checkpointId"]);n!=null&&y(e,["checkpointId"],n);const r=m(t,["epoch"]);r!=null&&y(e,["epoch"],r);const i=m(t,["step"]);i!=null&&y(e,["step"],i);const o=m(t,["endpoint"]);return o!=null&&y(e,["endpoint"],o),e}function pje(t){const e={},n=m(t,["model"]);n!=null&&y(e,["model"],n);const r=m(t,["endpoint"]);r!=null&&y(e,["endpoint"],r);const i=m(t,["checkpoints"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>hje(s))),y(e,["checkpoints"],o)}return e}function V2(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["name"]);r!=null&&y(e,["name"],r);const i=m(t,["state"]);i!=null&&y(e,["state"],loe(i));const o=m(t,["createTime"]);o!=null&&y(e,["createTime"],o);const s=m(t,["startTime"]);s!=null&&y(e,["startTime"],s);const a=m(t,["endTime"]);a!=null&&y(e,["endTime"],a);const u=m(t,["updateTime"]);u!=null&&y(e,["updateTime"],u);const c=m(t,["error"]);c!=null&&y(e,["error"],c);const d=m(t,["description"]);d!=null&&y(e,["description"],d);const h=m(t,["baseModel"]);h!=null&&y(e,["baseModel"],h);const g=m(t,["tunedModel"]);g!=null&&y(e,["tunedModel"],pje(g));const _=m(t,["preTunedModel"]);_!=null&&y(e,["preTunedModel"],_);const S=m(t,["supervisedTuningSpec"]);S!=null&&y(e,["supervisedTuningSpec"],S);const b=m(t,["tuningDataStats"]);b!=null&&y(e,["tuningDataStats"],b);const T=m(t,["encryptionSpec"]);T!=null&&y(e,["encryptionSpec"],T);const x=m(t,["partnerModelTuningSpec"]);x!=null&&y(e,["partnerModelTuningSpec"],x);const C=m(t,["customBaseModel"]);C!=null&&y(e,["customBaseModel"],C);const I=m(t,["experiment"]);I!=null&&y(e,["experiment"],I);const N=m(t,["labels"]);N!=null&&y(e,["labels"],N);const V=m(t,["outputUri"]);V!=null&&y(e,["outputUri"],V);const q=m(t,["pipelineJob"]);q!=null&&y(e,["pipelineJob"],q);const P=m(t,["serviceAccount"]);P!=null&&y(e,["serviceAccount"],P);const O=m(t,["tunedModelDisplayName"]);return O!=null&&y(e,["tunedModelDisplayName"],O),e}function mje(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const i=m(t,["tuningJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>V2(s))),y(e,["tuningJobs"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gje extends vf{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new tv(ef.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel},i=Object.assign(Object.assign({},n),{preTunedModel:r});return i.baseModel=void 0,await this.tuneInternal(i)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),i=await this.tuneMldevInternal(r);let o="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?o=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(o=i.name.split("/operations/")[0]),{name:o,state:I2.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=nje(e);return a=Ge("{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),s.then(d=>V2(d))}else{const c=W8e(e);return a=Ge("{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),s.then(d=>Loe(d))}}async listInternal(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=ije(e);return a=Ge("tuningJobs",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),s.then(d=>{const h=mje(d),g=new C7;return Object.assign(g,h),g})}else{const c=J8e(e);return a=Ge("tunedModels",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:d.headers},g})),s.then(d=>{const h=fje(d),g=new C7;return Object.assign(g,h),g})}}async cancel(e){var n,r,i,o;let s="",a={};if(this.apiClient.isVertexAI()){const u=oje(e);s=Ge("{name}:cancel",u._url),a=u._query,delete u.config,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const u=X8e(e);s=Ge("{name}:cancel",u._url),a=u._query,delete u.config,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async tuneInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=uje(e);return o=Ge("tuningJobs",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:u.headers},d})),i.then(u=>V2(u))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=tje(e);return o=Ge("tunedModels",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:u.headers},d})),i.then(u=>dje(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yje{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const vje=1024*1024*8,_je=3,wje=1e3,bje=2,PN="x-goog-upload-status";async function Tje(t,e,n){var r,i,o;let s=0,a=0,u=new R2(new Response),c="upload";for(s=t.size;a<s;){const h=Math.min(vje,s-a),g=t.slice(a,a+h);a+h>=s&&(c+=", finalize");let _=0,S=wje;for(;_<_je&&(u=await n.request({path:"",body:g,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(a),"Content-Length":String(h)}}}),!(!((r=u==null?void 0:u.headers)===null||r===void 0)&&r[PN]));)_++,await Sje(S),S=S*bje;if(a+=h,((i=u==null?void 0:u.headers)===null||i===void 0?void 0:i[PN])!=="active")break;if(s<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const d=await(u==null?void 0:u.json());if(((o=u==null?void 0:u.headers)===null||o===void 0?void 0:o[PN])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return d.file}async function Eje(t){return{size:t.size,type:t.type}}function Sje(t){return new Promise(e=>setTimeout(e,t))}class xje{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Tje(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Eje(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Aje{create(e,n,r){return new Cje(e,n,r)}}class Cje{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Q7="x-goog-api-key";class Ije{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(Q7)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Q7,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Rje="gl-node/";class Pje{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=qBe(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const i=new Ije(this.apiKey);this.apiClient=new W9e({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Rje+"web",uploader:new xje,downloader:new yje}),this.models=new p8e(this.apiClient),this.live=new a8e(this.apiClient,i,new Aje),this.batches=new P6e(this.apiClient),this.chats=new U$e(this.models,this.apiClient),this.caches=new O$e(this.apiClient),this.files=new X$e(this.apiClient),this.operations=new m8e(this.apiClient),this.authTokens=new K8e(this.apiClient),this.tunings=new gje(this.apiClient)}}const Nje="AIzaSyByOfSHfNNIwPKwNOkklamTuSy1-t3NOPI",pp=new Pje({apiKey:Nje}),Mje=t=>new Promise(e=>setTimeout(e,t)),Dje=async(t,e=3,n=2e3)=>{var o,s;let r=0,i=n;for(;r<e;)try{return await t()}catch(a){if((((o=a.message)==null?void 0:o.includes("503"))||((s=a.message)==null?void 0:s.toLowerCase().includes("overloaded")))&&r<e-1)console.warn(`Gemini API overloaded. Retrying in ${i}ms... (Attempt ${r+1}/${e})`),await Mje(i),r++,i*=2;else throw a}throw new Error("Max retries reached. Failed to call Gemini API.")},kje=async t=>{try{const e=`Проанализируй следующий текст игровой сцены на русском языке. Создай из него короткий, ёмкий и эффективный промпт на АНГЛИЙСКОМ языке для AI-генератора изображений, чтобы визуализировать эту сцену. Промпт должен фокусироваться на ключевых визуальных элементах, объектах и атмосфере.

        Текст сцены:
        "${t}"

        Твой ответ должен содержать ТОЛЬКО готовый промпт. Без комментариев, заголовков или кавычек.`,r=(await pp.models.generateContent({model:"gemini-2.5-flash",contents:e})).text;if(!r)throw new Error("API returned an empty response.");return r.trim()}catch(e){throw console.error("Error generating image prompt from text with Gemini API:",e),new Error(`Failed to generate image prompt: ${e.message}`)}},Oje={Киберпанк:"cyberpunk city, neon signs, rain-slicked streets, high-tech low-life, dystopian future, cinematic lighting","Темное фэнтези":"dark fantasy, gothic architecture, ominous atmosphere, mythical creatures, enchanted forest, epic, moody lighting",Фотореализм:"photorealistic, 8k, hyper-detailed, sharp focus, professional photography, natural lighting",Аниме:"anime style, vibrant colors, cel shading, dynamic composition, detailed background, style of Studio Ghibli","Пиксель-арт":"pixel art, 16-bit, retro gaming style, limited color palette, detailed sprites",Стимпанк:"steampunk, victorian era, gears and cogs, steam-powered machinery, brass and copper details, intricate designs"},Lje=async t=>{var s;const{mainPrompt:e,style:n,negativePrompt:r}=t;let o=`${Oje[n]||"Futuristic, dark, dystopian, gritty, mysterious, quest item."}, ${e}.`;r&&r.trim()!==""&&(o+=` Avoid the following: ${r.trim()}.`);try{const a=await pp.models.generateImages({model:"imagen-4.0-generate-001",prompt:o,config:{numberOfImages:1,outputMimeType:"image/jpeg",aspectRatio:"16:9"}});if(a.generatedImages&&a.generatedImages.length>0)return`data:image/jpeg;base64,${a.generatedImages[0].image.imageBytes}`;throw new Error("No image was generated by the API.")}catch(a){console.error("Error generating image with Gemini API:",a);let u="An unknown error occurred.";if(a instanceof Error){u=a.message;try{const c=a.message.includes("ApiError: ")?a.message.split("ApiError: ")[1]:a.message,d=JSON.parse(c);u=((s=d==null?void 0:d.error)==null?void 0:s.message)||u}catch{}}throw new Error(`Failed to generate image: ${u}`)}},Vje=async t=>{var e;try{const{prompt:n,tone:r,keywords:i,wordCount:o}=t,s=`Ты — талантливый сценарист для текстовых квестов в мрачном, загадочном сеттинге. Напиши художественное описание для одной игровой сцены на русском языке.

        Инструкции:
        - Тон/атмосфера: ${r}.
        - Обязательно упомяни следующие ключевые детали: ${i||"не указаны"}.
        - Объем текста: примерно ${o} слов.
        - Твой ответ должен содержать ТОЛЬКО готовый текст для сцены. Не добавляй заголовков, комментариев, цитат или приветствий.
        - Текст должен быть захватывающим и погружающим игрока в атмосферу.

        Основная идея от автора:
        "${n}"`,u=(await pp.models.generateContent({model:"gemini-2.5-flash",contents:s})).text;if(!u)throw new Error("API вернул пустой ответ.");return u.trim()}catch(n){console.error("Error generating text with Gemini API:",n);let r="Произошла неизвестная ошибка при генерации текста.";if(n instanceof Error){r=n.message;try{const i=n.message.includes("ApiError: ")?n.message.split("ApiError: ")[1]:n.message,o=JSON.parse(i);r=((e=o==null?void 0:o.error)==null?void 0:e.message)||r}catch{}}throw new Error(`Не удалось сгенерировать текст: ${r}`)}},Uje=async t=>{if(!t||t.trim().length<10)throw new Error("Текст узла слишком короткий для анализа.");try{const e=`Ты — гейм-дизайнер, создающий текстовый квест. Основываясь на описании игровой сцены ниже, предложи 3-4 интересных и логичных варианта выбора для игрока. Варианты должны быть краткими и ориентированными на действие.

        Описание сцены:
        "${t}"

        Инструкции:
        - Верни ТОЛЬКО JSON-массив строк.
        - Никаких лишних комментариев, пояснений или markdown-форматирования.
        - Пример ответа: ["Осмотреть стол", "Подойти к окну", "Проверить карманы"]`,r=(await pp.models.generateContent({model:"gemini-2.5-flash",contents:e,config:{responseMimeType:"application/json",responseSchema:{type:Xe.ARRAY,items:{type:Xe.STRING}}}})).text.trim();if(!r)throw new Error("API вернул пустой ответ.");const i=JSON.parse(r);if(!Array.isArray(i)||!i.every(o=>typeof o=="string"))throw new Error("API вернул некорректный формат данных.");return i}catch(e){console.error("Error generating choices with Gemini API:",e);let n="Произошла неизвестная ошибка при генерации выборов.";throw e instanceof Error&&(n=`Не удалось сгенерировать выборы: ${e.message}`),new Error(n)}},qje=async t=>{const{prompt:e,genre:n,keywords:r,nodesCount:i,addLogic:o,complexity:s}=t,a={type:Xe.OBJECT,properties:{key:{type:Xe.STRING,description:"The name of the variable or item."},value:{type:Xe.STRING,description:"The string value. For numbers, use a string like '1'."}},required:["key","value"]},u={type:Xe.OBJECT,properties:{key:{type:Xe.STRING,description:"The name of the numeric variable."},value:{type:Xe.NUMBER,description:"The number to add."}},required:["key","value"]},c={type:Xe.ARRAY,items:a},d={type:Xe.ARRAY,items:u},h={type:Xe.OBJECT,description:"Optional condition to show this choice.",properties:{has_item:{type:Xe.STRING},missing_item:{type:Xe.STRING},var_eq:c,var_neq:c},nullable:!0},g={type:Xe.OBJECT,description:"An effect to apply.",properties:{inv_add:{type:Xe.STRING},inv_remove:{type:Xe.STRING},set:c,add:d}},_={type:Xe.OBJECT,properties:{label:{type:Xe.STRING,description:"The text displayed to the player for this choice, in Russian."},to:{type:Xe.STRING,description:"The 'id' of the node this choice leads to. Must be one of the other generated node IDs."},when:h,effects:{type:Xe.ARRAY,items:g,nullable:!0}},required:["label","to"]},S={type:Xe.OBJECT,properties:{id:{type:Xe.STRING,description:"A unique, short, snake_case identifier for this node. The first node must have the id 'start'."},text:{type:Xe.STRING,description:"The main descriptive text for this scene, in Russian. Should be engaging and atmospheric."},choices:{type:Xe.ARRAY,description:"A list of 2-3 actions the player can take.",items:_,nullable:!0},when:{...h,nullable:!0},effects:{type:Xe.ARRAY,items:g,nullable:!0,description:"Optional effects that trigger upon entering this node."},end:{type:Xe.OBJECT,nullable:!0,properties:{type:{type:Xe.STRING,description:"'win' or 'lose'"},message:{type:Xe.STRING,description:"Final message to the player, in Russian."}}}},required:["id","text"]},b={type:Xe.OBJECT,properties:{nodes:{type:Xe.ARRAY,description:"An array of all the quest nodes.",items:S}},required:["nodes"]};let T="**ВАЖНОЕ ОГРАНИЧЕНИЕ:** НЕ ИСПОЛЬЗУЙ поля 'when' и 'effects'. Создай только простую повествовательную историю без игровой механики.";o&&(T=`
    **Игровая логика (Уровень сложности: ${s}):**
    Твоя главная задача — создать **РЕШАЕМУЮ** загадку по принципу "Решение -> Преграда".

    1.  **"Решение" (Ключ):** Сначала в одном или нескольких узлах размести предметы (через \`"effects": [{"inv_add": "название_предмета"}]\`) или установи переменные (через \`"effects": [{"set": [{"key": "переменная", "value": "1"}]}]\`).
    2.  **"Преграда" (Замок):** Затем, в узле, который находится *дальше по сюжету*, создай выбор, который требует это "Решение". Используй условие 'when' (например, \`"when": {"has_item": "название_предмета"}\` или \`"when": {"var_eq": [...]}\`).
    3.  **ГАРАНТИЯ ПРОХОДИМОСТИ:** Убедись, что игрок может добраться от "Решения" до "Преграды". Путь к победе НЕ ДОЛЖЕН быть заблокирован нерешаемой загадкой. Не создавай предметы, которые нигде не используются. Не создавай преграды, которые невозможно преодолеть.
    4.  **ПРАВИЛО ФОРМАТА:** Для всех переменных в эффектах 'set' и условиях 'var_eq'/'var_neq', используй МАССИВ ОБЪЕКТОВ с полями 'key' и 'value'. ВСЕГДА используй СТРОКИ в качестве 'value' (например, '1', 'true', 'активно').
        -   Пример для 'set': \`"effects": [{"set": [{"key": "power_on", "value": "1"}]}]\`
        -   Пример для 'var_eq': \`"when": {"var_eq": [{"key": "door_locked", "value": "true"}]}\`
    `);const x=`Ты — опытный сценарист и гейм-дизайнер текстовых квестов. Твоя задача — создать структуру для целого квеста на основе идеи автора.

    Инструкции:
    1.  Создай связную историю, состоящую примерно из ${i} узлов.
    2.  Первый узел ОБЯЗАТЕЛЬНО должен иметь id "start".
    3.  Все id узлов должны быть уникальными, короткими и в стиле snake_case (например: 'dark_corridor', 'captain_bridge').
    4.  Для каждого узла напиши атмосферный текст на русском языке.
    5.  Для каждого узла придумай 2-3 логичных варианта выбора ('choices').
    6.  Поле 'to' в каждом выборе должно ссылаться на id другого существующего узла, создавая связный граф истории. Убедись, что нет ссылок на несуществующие id.
    7.  Хотя бы один узел должен быть конечным, завершая историю (используй поле 'end', например: \`"end": {"type": "win", "message": "Вы победили!"}\`). У конечных узлов не должно быть поля 'choices'.
    ${T}
    8.  Верни результат в формате JSON, соответствующем предоставленной схеме. Не добавляй никаких комментариев или лишнего текста вне JSON.

    Параметры квеста от автора:
    -   Жанр/Сеттинг: ${n}
    -   Основная завязка сюжета: "${e}"
    -   Ключевые элементы, которые нужно включить: ${r||"не указаны"}
    `;try{const I=(await pp.models.generateContent({model:"gemini-2.5-flash",contents:x,config:{responseMimeType:"application/json",responseSchema:b}})).text.trim();if(!I)throw new Error("API вернул пустой ответ.");const N=JSON.parse(I);if(!N.nodes||!Array.isArray(N.nodes))throw new Error("API вернул некорректную структуру данных (отсутствует массив nodes).");const V={};for(const q of N.nodes)if(q.id){const{id:P,...O}=q;O.choices&&O.choices.length===0&&delete O.choices,O.effects&&O.effects.length===0&&delete O.effects,V[P]=O}if(!V.start)throw new Error("Сгенерированный сценарий не содержит обязательного узла 'start'.");return V}catch(C){console.error("Error generating quest DSL with Gemini API:",C);let I="Произошла неизвестная ошибка при генерации сценария.";throw C instanceof Error&&(I=`Не удалось сгенерировать сценарий: ${C.message}`),new Error(I)}},Fje=async t=>{const e={type:Xe.OBJECT,properties:{action:{type:Xe.STRING,description:"Action to perform: CREATE_NODE, DELETE_CHOICE, SET_CHOICE_TARGET, DELETE_NODE."},label:{type:Xe.STRING,description:"Human-readable label for the button, e.g., 'Create missing node'."},details:{type:Xe.OBJECT,properties:{targetNodeId:{type:Xe.STRING,nullable:!0},choiceIndex:{type:Xe.NUMBER,nullable:!0,description:"The index of the choice with the broken link within its node's 'choices' array."},newNodeId:{type:Xe.STRING,nullable:!0},generatedText:{type:Xe.STRING,nullable:!0,description:"Pre-generated Russian text for the new node if action is CREATE_NODE."}}}},required:["action","label","details"]},n={type:Xe.OBJECT,properties:{type:{type:Xe.STRING,description:"Error type: BROKEN_LINK, ORPHAN_NODE, DEAD_END, UNSOLVABLE_PUZZLE"},nodeId:{type:Xe.STRING,description:"ID of the node where the error occurs."},description:{type:Xe.STRING,description:"Human-readable description of the error."},suggestions:{type:Xe.ARRAY,items:e},details:{type:Xe.OBJECT,properties:{choiceLabel:{type:Xe.STRING,nullable:!0,description:"The 'label' text of the choice with the broken link."},targetNodeId:{type:Xe.STRING,nullable:!0}}}},required:["type","nodeId","description","suggestions"]},r={type:Xe.OBJECT,properties:{issues:{type:Xe.ARRAY,items:n}},required:["issues"]},i=`Ты — опытный гейм-дизайнер и QA-тестировщик текстовых квестов. Проанализируй предоставленный JSON-сценарий (QuestDSL) на наличие логических ошибок. Для каждой найденной ошибки "BROKEN_LINK" ты должен не только предложить создать узел, но и СРАЗУ ЖЕ сгенерировать для него подходящий по контексту текст.

    **Типы ошибок для поиска и правила генерации предложений:**

    1.  **BROKEN_LINK (Битые ссылки):**
        -   **Задача:** Найди выбор (\`choices\`), у которого поле \`to\` ссылается на ID узла, которого нет в сценарии. Ты ДОЛЖЕН определить: 1. Текст этого выбора (\`label\`). 2. Индекс этого выбора в массиве \`choices\` (число).
        -   **В \`details\` самой ошибки (\`AnalysisResult.details\`):** Укажи \`choiceLabel\` (текст выбора) и \`targetNodeId\` (несуществующий ID).
        -   **В \`suggestions\`:**
            -   **Для \`action: "CREATE_NODE"\`:** В \`details\` укажи \`choiceIndex\` (индекс), \`newNodeId\` (несуществующий ID) и сгенерируй \`generatedText\`. Текст должен логично продолжать историю, основываясь на тексте исходного узла и \`choiceLabel\`. Учти ID целевого узла (например, \`lose_taunted\` намекает на проигрыш).
            -   **Для \`action: "DELETE_CHOICE"\`:** В \`details\` укажи тот же самый \`choiceIndex\`.

    2.  **ORPHAN_NODE (Узлы-сироты):**
        -   **Задача:** Найди узел (кроме 'start'), на который нет ни одной ссылки из полей \`to\`.
        -   **Предложения:** Предложи удалить этот узел (\`action: "DELETE_NODE"\`).

    3.  **DEAD_END (Тупики):**
        -   **Задача:** Найди узел, который не является концом игры (\`end\`), но не имеет доступных для игрока выборов.
        -   **Предложения:** Предложи удалить этот узел.

    4.  **UNSOLVABLE_PUZZLE (Нерешаемые загадки):**
        -   **Задача:** Найди преграду (выбор с \`when\`), для которой нет решения в предыдущих узлах.
        -   **Предложения:** Опиши проблему в \`description\` и предложи удалить этот выбор.

    **Сценарий для анализа:**
    \`\`\`json
    ${JSON.stringify(t,null,2)}
    \`\`\`

    Верни ТОЛЬКО JSON-объект с полем "issues". Если ошибок нет, верни пустой массив.
    `,o=()=>pp.models.generateContent({model:"gemini-2.5-flash",contents:i,config:{responseMimeType:"application/json",responseSchema:r}});try{const a=(await Dje(o)).text.trim();return a?JSON.parse(a).issues||[]:[]}catch(s){console.error("Error analyzing quest DSL:",s);let a="Произошла неизвестная ошибка при анализе сценария.";throw s instanceof Error&&(a=`Не удалось проанализировать сценарий: ${s.message}`),new Error(a)}},Bje=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),$je=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:M.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})}),zje=({isOpen:t,onClose:e,assets:n,onSelect:r,onDelete:i})=>t?M.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",onClick:e,role:"dialog","aria-modal":"true","aria-labelledby":"asset-library-title",children:M.jsxs("div",{className:"bg-stone-800 border border-stone-700 rounded-lg w-full max-w-5xl max-h-[90vh] flex flex-col",onClick:o=>o.stopPropagation(),children:[M.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-stone-700 flex-shrink-0",children:[M.jsxs("h3",{id:"asset-library-title",className:"font-display text-2xl text-amber-400 flex items-center",children:[M.jsx(Bje,{})," Библиотека Ассетов"]}),M.jsx("button",{onClick:e,className:"text-stone-400 hover:text-white text-3xl leading-none","aria-label":"Close",children:"×"})]}),M.jsx("div",{className:"p-6 overflow-y-auto",children:Object.keys(n.images).length>0?M.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4",children:Object.entries(n.images).map(([o,s])=>M.jsxs("div",{className:"group relative",children:[M.jsx("button",{onClick:()=>r(o),className:"block w-full aspect-video bg-stone-900 rounded-md overflow-hidden border-2 border-transparent hover:border-amber-500 focus:border-amber-500 outline-none transition-all",children:M.jsx("img",{src:s,alt:o,className:"w-full h-full object-cover",loading:"lazy"})}),M.jsx("button",{onClick:()=>i(o),className:"absolute top-1 right-1 bg-black/60 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 hover:bg-red-600 transition-all",title:"Удалить из библиотеки (необратимо)",children:M.jsx($je,{})})]},o))}):M.jsx("p",{className:"text-stone-400 text-center py-12",children:"Библиотека пуста. Сгенерируйте изображения, чтобы они появились здесь."})})]})}):null,Z7=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),Hje=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),Gje=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:M.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),jje=({questId:t,nodeId:e,node:n,dsl:r,onDslChange:i,onNodeChange:o})=>{const[s,a]=D.useState({loading:!1,error:""}),[u,c]=D.useState({mainPrompt:"",style:"Киберпанк",negativePrompt:"text, words, letters, blurry, ugly, watermark"}),[d,h]=D.useState(!1),g=async()=>{if(!n.text||typeof n.text!="string"){alert("Текст узла пуст, чтобы генерировать промпт.");return}try{const T=await kje(n.text);c(x=>({...x,mainPrompt:T}))}catch(T){alert(`Не удалось сгенерировать промпт: ${T.message}`)}},_=async()=>{const{mainPrompt:T,style:x,negativePrompt:C}=u;if(!T){alert("Пожалуйста, введите описание для генерации изображения.");return}a({loading:!0,error:""});try{const I=await Lje({mainPrompt:T,style:x,negativePrompt:C}),N=`${e}_${Date.now()}`,V=EM(R0e,`quests/${t}/images/${N}.jpeg`),q=I.split(",")[1],P=await d0e(V,q,"base64",{contentType:"image/jpeg"}),O=await dQ(P.ref),R=JSON.parse(JSON.stringify(r));R.assets.images||(R.assets.images={}),R.assets.images[N]=O,R.nodes[e].bg=N,i(R),a({loading:!1,error:""})}catch(I){let N=I.message||"Ошибка генерации или загрузки";(I==null?void 0:I.code)==="storage/unauthorized"&&(N="Ошибка прав доступа. Проверьте правила безопасности Firebase Storage."),a({loading:!1,error:N})}},S=T=>{o("bg",T),h(!1)},b=T=>{const x=Object.entries(r.nodes).filter(([I,N])=>N.bg===T).map(([I,N])=>I);let C="Вы уверены, что хотите навсегда удалить это изображение из библиотеки?";if(x.length>0&&(C+=`

Оно используется в следующих узлах: ${x.join(", ")}. Фон в этих узлах будет сброшен.`),window.confirm(C)){const I=JSON.parse(JSON.stringify(r));delete I.assets.images[T],x.forEach(N=>{I.nodes[N]&&delete I.nodes[N].bg}),i(I)}};return M.jsxs("div",{className:"space-y-2",children:[M.jsx("label",{className:"text-sm font-bold text-stone-400 block",children:"Фоновое изображение:"}),M.jsxs("div",{className:"aspect-video bg-stone-900 rounded-md overflow-hidden relative flex items-center justify-center",children:[r.assets.images[n.bg||""]?M.jsx("img",{src:r.assets.images[n.bg||""],alt:"Generated background",className:"w-full h-full object-cover"}):M.jsx("span",{className:"text-stone-500",children:"Нет изображения"}),s.loading&&M.jsx("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center",children:M.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-500"})}),n.bg&&r.assets.images[n.bg]&&M.jsx("button",{onClick:()=>o("bg",void 0),className:"absolute top-2 right-2 bg-black/50 text-white rounded-full p-1.5 hover:bg-red-500 transition-colors",title:"Убрать фон с этого узла",children:M.jsx(Gje,{})})]}),M.jsx("div",{className:"flex gap-2",children:M.jsxs("button",{onClick:()=>h(!0),className:"w-full flex items-center justify-center font-display text-lg bg-stone-600 text-white py-2 px-4 rounded-md hover:bg-stone-500 transition-colors",children:[M.jsx(Hje,{}),"Выбрать из библиотеки"]})}),M.jsxs("div",{className:"mt-4 p-4 bg-stone-900/50 rounded-lg border border-stone-700 space-y-3",children:[M.jsx("h5",{className:"font-display text-lg text-amber-400",children:"AI-Студия Изображений"}),M.jsxs("div",{children:[M.jsx("label",{htmlFor:"ai-image-prompt",className:"text-sm font-bold text-stone-400 block mb-1",children:"Промпт (на английском):"}),M.jsxs("div",{className:"flex gap-2",children:[M.jsx("textarea",{id:"ai-image-prompt",value:u.mainPrompt,onChange:T=>c({...u,mainPrompt:T.target.value}),placeholder:"A lone detective standing in a neon-lit alley...",className:"flex-grow bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all h-20 resize-y"}),M.jsx("button",{onClick:g,title:"Сгенерировать промпт из текста узла",className:"flex items-center justify-center font-display text-lg bg-sky-600 text-white p-3 rounded-md hover:bg-sky-500 transition-colors",children:M.jsx(Z7,{})})]})]}),M.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[M.jsxs("div",{children:[M.jsx("label",{htmlFor:"ai-image-style",className:"text-sm font-bold text-stone-400 block mb-1",children:"Стиль:"}),M.jsxs("select",{id:"ai-image-style",value:u.style,onChange:T=>c({...u,style:T.target.value}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",children:[M.jsx("option",{children:"Киберпанк"}),M.jsx("option",{children:"Темное фэнтези"}),M.jsx("option",{children:"Фотореализм"}),M.jsx("option",{children:"Аниме"}),M.jsx("option",{children:"Пиксель-арт"}),M.jsx("option",{children:"Стимпанк"})]})]}),M.jsxs("div",{children:[M.jsx("label",{htmlFor:"ai-image-negative",className:"text-sm font-bold text-stone-400 block mb-1",children:"Негативный промпт:"}),M.jsx("input",{id:"ai-image-negative",type:"text",value:u.negativePrompt,onChange:T=>c({...u,negativePrompt:T.target.value}),placeholder:"text, words, ugly, blurry",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"})]})]}),M.jsxs("button",{onClick:_,disabled:s.loading,className:"w-full flex items-center justify-center font-display text-lg bg-amber-500 text-stone-900 py-2 px-4 rounded-md hover:bg-amber-400 transition-colors disabled:bg-stone-600",children:[M.jsx(Z7,{})," ",s.loading?"Генерация...":"Создать Изображение"]}),s.error&&M.jsx("p",{className:"text-red-500 text-sm mt-1 text-center",children:s.error})]}),M.jsx(zje,{isOpen:d,onClose:()=>h(!1),assets:r.assets,onSelect:S,onDelete:b})]})},Kje=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),Wje=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-stone-400 hover:text-red-500 transition-colors",viewBox:"0 0 20 20",fill:"currentColor",children:M.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})}),NN=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:M.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),Yje=()=>M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-stone-400 hover:text-amber-400 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924-1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066 2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Jje=({nodeId:t,node:e,dsl:n,onDslChange:r})=>{const[i,o]=D.useState(null),[s,a]=D.useState(!1),[u,c]=D.useState([]),[d,h]=D.useState(""),g=Object.keys(n.nodes);D.useEffect(()=>{o(null),c([]),h("")},[t]);const _=(R,U,L)=>{const F={...n,nodes:{...n.nodes}},$=[...F.nodes[t].choices||[]],H={...$[R]};L===void 0||Array.isArray(L)&&L.length===0||typeof L=="object"&&L!==null&&Object.keys(L).length===0?delete H[U]:H[U]=L,$[R]=H,F.nodes[t]={...F.nodes[t],choices:$},r(F)},S=(R,U)=>{if(U==="__CREATE_NEW__"){const L=prompt("Введите ID нового узла (латиницей, без пробелов):");if(L&&/^[a-zA-Z0-9_]+$/.test(L)){if(n.nodes[L]){alert("Узел с таким ID уже существует.");return}const F={...n,nodes:{...n.nodes}};F.nodes[L]={text:"Новый узел..."};const $=[...F.nodes[t].choices||[]];$[R]={...$[R],to:L},F.nodes[t]={...F.nodes[t],choices:$},r(F)}else L&&alert("Неверный формат ID. Используйте только латинские буквы, цифры и подчеркивание.")}else _(R,"to",U)},b=(R="",U="")=>{const L={...n,nodes:{...n.nodes}},F=[...L.nodes[t].choices||[]];F.push({label:R,to:U}),L.nodes[t]={...L.nodes[t],choices:F},r(L)},T=R=>{if(!window.confirm("Вы уверены, что хотите удалить этот выбор?"))return;const U={...n,nodes:{...n.nodes}},L=[...U.nodes[t].choices||[]];L.splice(R,1),U.nodes[t]={...U.nodes[t],choices:L},r(U)},x=async()=>{if(!(!e||typeof e.text!="string")){a(!0),c([]),h("");try{const R=await Uje(e.text);c(R)}catch(R){h(R.message)}finally{a(!1)}}},C=R=>{b(R),c(U=>U.filter(L=>L!==R))},I=(R,U)=>{var $;const L=($=e==null?void 0:e.choices)==null?void 0:$[R];if(!L)return;let F=L.when||{};{const H=F[U]||[];F={...F,[U]:[...H,{key:"",value:""}]}}_(R,"when",F)},N=(R,U,L,F)=>{var Y;const $=(Y=e==null?void 0:e.choices)==null?void 0:Y[R];if(!$||!$.when)return;const H={...$.when};if(F!==void 0){const K=[...H[U]||[]];K[F]=L,H[U]=K}_(R,"when",H)},V=(R,U,L)=>{var H;const F=(H=e==null?void 0:e.choices)==null?void 0:H[R];if(!F||!F.when)return;const $={...F.when};if(L!==void 0&&$[U]){const Y=[...$[U]||[]];Y.splice(L,1),Y.length===0?delete $[U]:$[U]=Y}_(R,"when",Object.keys($).length>0?$:void 0)},q=(R,U)=>{var H;const L=(H=e==null?void 0:e.choices)==null?void 0:H[R];if(!L)return;let F={};U==="set"?F={set:[{key:"",value:""}]}:U==="add"?F={add:[{key:"",value:0}]}:U==="inv_add"?F={inv_add:""}:U==="inv_remove"&&(F={inv_remove:""});const $=[...L.effects||[],F];_(R,"effects",$)},P=(R,U,L)=>{var H;const F=(H=e==null?void 0:e.choices)==null?void 0:H[R];if(!F||!F.effects)return;const $=[...F.effects];$[U]=L,_(R,"effects",$)},O=(R,U)=>{var $;if(!window.confirm("Удалить этот эффект?"))return;const L=($=e==null?void 0:e.choices)==null?void 0:$[R];if(!L||!L.effects)return;const F=[...L.effects];F.splice(U,1),_(R,"effects",F.length>0?F:void 0)};return M.jsxs("div",{children:[M.jsxs("div",{className:"flex justify-between items-center mt-6 mb-2",children:[M.jsx("h4",{className:"text-lg font-bold text-stone-300",children:"Выборы:"}),M.jsxs("button",{onClick:x,disabled:s,className:"flex items-center gap-1.5 text-sm bg-sky-600 hover:bg-sky-500 text-white font-semibold py-1 px-3 rounded-md transition-colors disabled:bg-stone-600 disabled:cursor-not-allowed",children:[M.jsx(Kje,{})," ",s?"Думаю...":"Предложить выборы"]})]}),d&&M.jsx("p",{className:"text-red-500 text-sm my-2",children:d}),u.length>0&&M.jsxs("div",{className:"p-2 bg-stone-900/50 rounded-md mb-2",children:[M.jsx("p",{className:"text-xs text-stone-400 mb-2",children:"Нажмите, чтобы добавить вариант:"}),M.jsx("div",{className:"flex flex-wrap gap-2",children:u.map((R,U)=>M.jsxs("button",{onClick:()=>C(R),className:"bg-sky-800 text-sky-200 text-sm px-3 py-1 rounded-full hover:bg-sky-700 transition-colors",children:['+ "',R,'"']},U))})]}),M.jsxs("div",{className:"space-y-2",children:[(e.choices||[]).map((R,U)=>{var L,F,$,H,Y,K,Q;return M.jsxs("div",{className:"bg-stone-900/50 p-3 rounded-md transition-all",children:[M.jsxs("div",{className:"flex gap-2 items-center",children:[M.jsx("input",{type:"text",value:R.label,onChange:re=>_(U,"label",re.target.value),placeholder:"Текст выбора",className:"flex-grow bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 focus:ring-1 focus:ring-amber-500 outline-none"}),M.jsx("span",{className:"text-stone-400",children:"→"}),M.jsxs("select",{value:R.to||"",onChange:re=>S(U,re.target.value),className:"w-48 bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 focus:ring-1 focus:ring-amber-500 outline-none",children:[M.jsx("option",{value:"",disabled:!0,children:"Выберите узел..."}),M.jsx("option",{value:"__CREATE_NEW__",className:"text-sky-400 font-semibold",children:"[ Создать новый узел... ]"}),g.map(re=>M.jsx("option",{value:re,children:re},re))]}),M.jsx("button",{onClick:()=>o(i===U?null:U),title:"Условия и эффекты",children:M.jsx(Yje,{})}),M.jsx("button",{onClick:()=>T(U),title:"Удалить выбор",children:M.jsx(Wje,{})})]}),i===U&&M.jsxs("div",{className:"mt-3 space-y-4 border-t border-stone-700 pt-3",children:[M.jsxs("div",{children:[M.jsx("h5",{className:"text-sm font-bold text-stone-400 mb-2",children:"Условия видимости"}),M.jsxs("div",{className:"space-y-2",children:[M.jsxs("div",{className:"flex items-center gap-2 bg-stone-800 p-2 rounded",children:[M.jsxs("select",{value:(L=R.when)!=null&&L.has_item?"has_item":(F=R.when)!=null&&F.missing_item?"missing_item":"none",onChange:re=>{const X=re.target.value,G={...R.when};delete G.has_item,delete G.missing_item,X!=="none"&&(G[X]=""),_(U,"when",G)},className:"bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm outline-none",children:[M.jsx("option",{value:"none",children:"Инвентарь: нет"}),M.jsx("option",{value:"has_item",children:"Инвентарь: Есть"}),M.jsx("option",{value:"missing_item",children:"Инвентарь: Нет"})]}),((($=R.when)==null?void 0:$.has_item)!==void 0||((H=R.when)==null?void 0:H.missing_item)!==void 0)&&M.jsx("input",{type:"text",value:((Y=R.when)==null?void 0:Y.has_item)||((K=R.when)==null?void 0:K.missing_item)||"",onChange:re=>{const X={...R.when};X.has_item!==void 0&&(X.has_item=re.target.value),X.missing_item!==void 0&&(X.missing_item=re.target.value),_(U,"when",X)},placeholder:"item_id",className:"flex-grow bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm outline-none"})]}),(((Q=R.when)==null?void 0:Q.var_eq)||[]).map((re,X)=>M.jsxs("div",{className:"flex items-center gap-2 bg-stone-800 p-2 rounded",children:[M.jsx("span",{className:"text-sm text-stone-300 font-semibold",children:"Переменная ="}),M.jsx("input",{type:"text",value:re.key,onChange:G=>N(U,"var_eq",{...re,key:G.target.value},X),placeholder:"variable",className:"w-24 bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm outline-none"}),M.jsx("input",{type:"text",value:re.value,onChange:G=>N(U,"var_eq",{...re,value:G.target.value},X),placeholder:"value",className:"w-24 bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm outline-none"}),M.jsx("button",{onClick:()=>V(U,"var_eq",X),className:"text-stone-500 hover:text-red-400",children:M.jsx(NN,{})})]},`var_eq_${X}`)),M.jsx("button",{onClick:()=>I(U,"var_eq"),className:"text-sky-400 hover:text-sky-300 text-sm font-semibold",children:"+ Добавить 'Переменная ='"})]})]}),M.jsxs("div",{children:[M.jsx("h5",{className:"text-sm font-bold text-stone-400 mb-2 mt-4",children:"Эффекты при выборе"}),M.jsx("div",{className:"space-y-2",children:(R.effects||[]).map((re,X)=>{const G=Object.keys(re)[0];if(G==="set"||G==="add"){const te=re[G]||[];return te.map((ee,ae)=>M.jsxs("div",{className:"flex items-center gap-2 bg-stone-800 p-2 rounded",children:[M.jsx("span",{className:"text-sm text-stone-300 font-semibold",children:G==="set"?"Установить":"Добавить к"}),M.jsx("input",{type:"text",value:ee.key,placeholder:"variable",className:"w-24 bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm",onChange:J=>{const ne=[...te];ne[ae]={...ee,key:J.target.value},P(U,X,{[G]:ne})}}),M.jsx("input",{type:G==="add"?"number":"text",value:ee.value,placeholder:"value",className:"w-24 bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm",onChange:J=>{const ne=[...te],oe=G==="add"?Number(J.target.value):J.target.value;ne[ae]={...ee,value:oe},P(U,X,{[G]:ne})}}),M.jsx("button",{onClick:()=>O(U,X),className:"text-stone-500 hover:text-red-400",children:M.jsx(NN,{})})]},`${G}_${ae}`))}return G==="inv_add"||G==="inv_remove"?M.jsxs("div",{className:"flex items-center gap-2 bg-stone-800 p-2 rounded",children:[M.jsx("span",{className:"text-sm text-stone-300 font-semibold",children:G==="inv_add"?"Добавить предмет":"Удалить предмет"}),M.jsx("input",{type:"text",value:re[G],placeholder:"item_id",className:"flex-grow bg-stone-70t00 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm",onChange:te=>P(U,X,{[G]:te.target.value})}),M.jsx("button",{onClick:()=>O(U,X),className:"text-stone-500 hover:text-red-400",children:M.jsx(NN,{})})]},G):null})}),M.jsxs("div",{className:"flex gap-4 mt-2",children:[M.jsx("button",{onClick:()=>q(U,"set"),className:"text-sky-400 hover:text-sky-300 text-sm font-semibold",children:"+ Установить переменную"}),M.jsx("button",{onClick:()=>q(U,"inv_add"),className:"text-sky-400 hover:text-sky-300 text-sm font-semibold",children:"+ Добавить предмет"})]})]})]})]},U)}),M.jsx("button",{onClick:()=>b(),className:"w-full text-stone-300 hover:bg-stone-700 p-2 rounded-md transition-colors text-sm font-semibold",children:"+ Добавить выбор"})]})]})},eK=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),Xje=({isOpen:t,onClose:e,aiForm:n,setAiForm:r,aiGenerationResult:i,onSubmit:o,onInsert:s})=>t?M.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",onClick:e,role:"dialog","aria-modal":"true",children:M.jsxs("div",{className:"bg-stone-800 border border-stone-700 rounded-lg w-full max-w-2xl max-h-[90vh] flex flex-col",onClick:a=>a.stopPropagation(),children:[M.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-stone-700",children:[M.jsxs("h3",{className:"font-display text-2xl text-amber-400 flex items-center gap-2",children:[M.jsx(eK,{})," AI-Ассистент Сценариста"]}),M.jsx("button",{onClick:e,className:"text-stone-400 hover:text-white text-3xl leading-none","aria-label":"Close",children:"×"})]}),M.jsxs("form",{onSubmit:o,className:"p-6 space-y-4 overflow-y-auto",children:[M.jsxs("div",{children:[M.jsx("label",{htmlFor:"ai-prompt",className:"text-sm font-bold text-stone-400 block mb-1",children:"Основная идея сцены:"}),M.jsx("textarea",{id:"ai-prompt",value:n.prompt,onChange:a=>r({...n,prompt:a.target.value}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all h-32 resize-y",placeholder:"Напр.: Герой входит в таверну, где за столом сидит загадочный незнакомец...",required:!0})]}),M.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[M.jsxs("div",{children:[M.jsx("label",{htmlFor:"ai-tone",className:"text-sm font-bold text-stone-400 block mb-1",children:"Тон / Атмосфера:"}),M.jsxs("select",{id:"ai-tone",value:n.tone,onChange:a=>r({...n,tone:a.target.value}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",children:[M.jsx("option",{children:"Таинственный"}),M.jsx("option",{children:"Напряженный"}),M.jsx("option",{children:"Юмористический"}),M.jsx("option",{children:"Эпический"}),M.jsx("option",{children:"Мрачный"}),M.jsx("option",{children:"Спокойный"})]})]}),M.jsxs("div",{children:[M.jsx("label",{htmlFor:"ai-keywords",className:"text-sm font-bold text-stone-400 block mb-1",children:"Ключевые детали (через запятую):"}),M.jsx("input",{id:"ai-keywords",type:"text",value:n.keywords,onChange:a=>r({...n,keywords:a.target.value}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",placeholder:"старая книга, свеча, кинжал"})]}),M.jsxs("div",{children:[M.jsx("label",{htmlFor:"ai-wordCount",className:"text-sm font-bold text-stone-400 block mb-1",children:"Примерный объем (слов):"}),M.jsx("input",{id:"ai-wordCount",type:"number",step:"10",value:n.wordCount,onChange:a=>r({...n,wordCount:Number(a.target.value)}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"})]})]}),M.jsxs("button",{type:"submit",disabled:i.loading,className:"w-full flex items-center justify-center font-display text-xl bg-sky-600 text-white py-2 px-6 rounded-md hover:bg-sky-500 transition-colors disabled:bg-stone-600",children:[M.jsx(eK,{})," ",i.loading?"ГЕНЕРАЦИЯ...":"СГЕНЕРИРОВАТЬ ТЕКСТ"]})]}),(i.text||i.error)&&M.jsxs("div",{className:"p-6 border-t border-stone-700 space-y-3",children:[M.jsx("h4",{className:"font-display text-xl text-stone-300",children:"Результат:"}),i.error&&M.jsx("p",{className:"text-red-500",children:i.error}),i.text&&M.jsxs(M.Fragment,{children:[M.jsx("div",{className:"bg-stone-900 p-4 rounded-md max-h-48 overflow-y-auto",children:M.jsx("p",{className:"whitespace-pre-wrap text-stone-300",children:i.text})}),M.jsx("button",{onClick:s,className:"w-full font-display text-lg bg-amber-500 text-stone-900 py-2 rounded-md hover:bg-amber-400 transition-colors",children:"Вставить текст в узел"})]})]})]})}):null,Qje=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),Zje=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),tK=({questId:t,dsl:e,selectedNodeId:n,onDslChange:r,onClose:i})=>{const o=e.nodes[n],[s,a]=D.useState(!1),[u,c]=D.useState({prompt:"",tone:"Таинственный",keywords:"",wordCount:100}),[d,h]=D.useState({loading:!1,error:"",text:""});if(!o)return M.jsx("div",{className:"bg-stone-800/50 border border-stone-700 p-6 rounded-md flex items-center justify-center h-full",children:M.jsx("p",{className:"text-stone-400",children:"Выберите узел для редактирования"})});const g=(T,x)=>{const C={...e,nodes:{...e.nodes}};x===void 0?delete C.nodes[n][T]:C.nodes[n]={...C.nodes[n],[T]:x},r(C)},_=()=>{h({loading:!1,error:"",text:""}),c(T=>({...T,prompt:o.text||""})),a(!0)},S=async T=>{T.preventDefault(),h({loading:!0,error:"",text:""});try{const x=await Vje(u);h({loading:!1,error:"",text:x})}catch(x){h({loading:!1,error:x.message,text:""})}},b=()=>{d.text&&(g("text",d.text),a(!1))};return M.jsxs("div",{className:"bg-stone-800/80 backdrop-blur-md border-l-2 border-stone-700/50 h-full flex flex-col",children:[M.jsxs("header",{className:"flex justify-between items-center p-4 border-b-2 border-amber-500 flex-shrink-0",children:[M.jsxs("h3",{className:"font-display text-3xl text-stone-100 truncate",children:["Узел: ",M.jsx("span",{className:"text-amber-400",children:n})]}),i&&M.jsx("button",{onClick:i,className:"p-2 text-stone-400 hover:text-white rounded-full hover:bg-stone-700 transition-colors","aria-label":"Close editor",children:M.jsx(Zje,{})})]}),M.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto flex-grow",children:[M.jsxs("div",{children:[M.jsxs("div",{className:"flex justify-between items-center mb-1",children:[M.jsx("label",{htmlFor:"nodeText",className:"text-sm font-bold text-stone-400 block",children:"Текст узла:"}),M.jsxs("button",{onClick:_,className:"flex items-center gap-1.5 text-sm bg-sky-600 hover:bg-sky-500 text-white font-semibold py-1 px-3 rounded-md transition-colors",children:[M.jsx(Qje,{})," Сгенерировать с AI"]})]}),M.jsx("textarea",{id:"nodeText",value:o.text,onChange:T=>g("text",T.target.value),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all h-40 resize-y"})]}),M.jsx(jje,{questId:t,nodeId:n,node:o,dsl:e,onDslChange:r,onNodeChange:g}),M.jsx(Jje,{nodeId:n,node:o,dsl:e,onDslChange:r})]}),M.jsx(Xje,{isOpen:s,onClose:()=>a(!1),aiForm:u,setAiForm:c,aiGenerationResult:d,onSubmit:S,onInsert:b})]})},e7e=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),t7e=({isOpen:t,onClose:e,analysisState:n,onApplySuggestion:r})=>t?M.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",onClick:e,children:M.jsxs("div",{className:"bg-stone-800 border border-stone-700 rounded-lg w-full max-w-3xl max-h-[90vh] flex flex-col",onClick:i=>i.stopPropagation(),children:[M.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-stone-700",children:[M.jsxs("h3",{className:"font-display text-2xl text-amber-400 flex items-center gap-2",children:[M.jsx(e7e,{})," Анализ Сценария"]}),M.jsx("button",{onClick:e,className:"text-stone-400 hover:text-white text-3xl leading-none",children:"×"})]}),M.jsxs("div",{className:"p-6 overflow-y-auto space-y-4",children:[n.loading&&M.jsx("p",{className:"animate-pulse text-center py-8 font-display text-xl text-stone-400",children:"АНАЛИЗ..."}),n.error&&M.jsx("p",{className:"text-red-500 text-center py-8",children:n.error}),!n.loading&&!n.error&&n.results.length===0&&M.jsx("p",{className:"text-green-400 text-center py-8 font-semibold",children:"Ошибок не найдено. Отличная работа!"}),n.results.map((i,o)=>M.jsxs("div",{className:"bg-stone-900/50 p-4 rounded-md border border-stone-700",children:[M.jsxs("h4",{className:"font-bold text-lg text-red-400 mb-1",children:[i.type," ",M.jsxs("span",{className:"text-stone-400 font-mono text-base",children:["(в узле: ",i.nodeId,")"]})]}),M.jsx("p",{className:"text-stone-300 mb-3",children:i.description}),M.jsx("div",{className:"flex gap-2",children:i.suggestions.map((s,a)=>M.jsx("button",{onClick:()=>r(i,s),className:"text-sm bg-sky-700 hover:bg-sky-600 text-white font-semibold py-1 px-3 rounded-md transition-colors",children:s.label},a))})]},o))]})]})}):null,Voe=ge.forwardRef(({id:t,data:e},n)=>{const r=Mt(D.useCallback(c=>{var d;return((d=c.nodeInternals.get(t))==null?void 0:d.selected)||!1},[t])),i=t==="start",o="w-48 bg-stone-800 rounded-md border-2 shadow-lg transition-all text-stone-200",s=r?"border-amber-400":e.isDeadEnd?"border-orange-600":e.isOrphan?"border-dashed border-stone-500":i?"border-green-600":e.isEnd&&e.endType==="win"?"border-yellow-500":e.isEnd&&e.endType==="lose"?"border-red-600":"border-stone-600",a=r?"scale-105":e.isNeighbor?"ring-2 ring-sky-500/80 ring-offset-2 ring-offset-stone-900":"",u=e.isFaded?"opacity-30":"opacity-100";return M.jsxs("div",{className:`${o} ${s} ${a} ${u}`,ref:n,children:[M.jsx(Nh,{type:"target",position:Qe.Top,className:"!bg-stone-500"}),M.jsxs("div",{className:`p-3 ${e.isOrphan||e.isDeadEnd?"opacity-60":""}`,children:[M.jsx("p",{className:"font-mono font-bold text-center break-words",children:e.label}),e.isOrphan&&M.jsx("p",{className:"text-xs text-stone-500 text-center mt-1",children:"(Сирота)"}),e.isDeadEnd&&M.jsx("p",{className:"text-xs text-orange-400 text-center mt-1",children:"(Тупик)"})]}),M.jsx(Nh,{type:"source",position:Qe.Bottom,className:"!bg-stone-500"})]})});Voe.displayName="CustomNode";const n7e=D.memo(Voe),Uoe=ge.forwardRef(({id:t,source:e,target:n,sourceX:r,sourceY:i,targetX:o,targetY:s,sourcePosition:a,targetPosition:u,style:c={},label:d,markerEnd:h,data:g},_)=>{const S=Mt(D.useCallback(q=>{var P;return!!((P=q.nodeInternals.get(e))!=null&&P.selected)},[e])),b=Mt(D.useCallback(q=>{var P;return!!((P=q.nodeInternals.get(n))!=null&&P.selected)},[n])),[T,x,C]=zw({sourceX:r,sourceY:i,sourcePosition:a,targetX:o,targetY:s,targetPosition:u}),I=S||b,N=g==null?void 0:g.isHighlighted,V=g==null?void 0:g.isFaded;return M.jsxs(M.Fragment,{children:[M.jsx("path",{id:t,ref:_,style:{...c,stroke:I||N?"#f59e0b":"#57534e",strokeWidth:I||N?2.5:1.5,opacity:V?.2:1,transition:"all 0.2s"},className:"react-flow__edge-path",d:T,markerEnd:h}),!V&&d&&M.jsx(HUe,{children:M.jsx("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${x}px,${C}px)`,pointerEvents:"all"},className:"nodrag nopan",children:M.jsx("div",{style:{background:I||N?"rgba(40, 30, 0, 0.9)":"rgba(28, 25, 23, 0.9)",padding:"4px 8px",borderRadius:"6px",fontSize:12,fontWeight:600,color:I||N?"#fde047":"#d6d3d1",border:`1px solid ${I||N?"#f59e0b":"#44403c"}`,maxWidth:"180px",textAlign:"center",lineHeight:1.2,boxShadow:"0 1px 3px rgba(0,0,0,0.5)",transition:"all 0.2s"},children:d})})})]})});Uoe.displayName="CustomEdge";const r7e=D.memo(Uoe),i7e={custom:n7e},o7e={custom:r7e},s7e=({nodeToFocus:t,onClearNodeToFocus:e})=>{const{getNode:n,setCenter:r}=IT();return D.useEffect(()=>{if(t){const i=n(t);if(i!=null&&i.width&&(i!=null&&i.height)){const o=i.position.x+i.width/2,s=i.position.y+i.height/2;r(o,s,{zoom:1.2,duration:600})}e()}},[t,n,r,e]),null},a7e=({nodes:t,edges:e,onNodesChange:n,onEdgesChange:r,onNodeDragStop:i,selectedNodeId:o,onSelectNode:s,onNodeToFocus:a,onClearNodeToFocus:u,onNodeMouseEnter:c,onNodeMouseLeave:d,onNodeContextMenu:h})=>{const g=D.useCallback(({nodes:S})=>{S.length>0&&S[0].id!==o&&s(S[0].id)},[s,o]),_=D.useCallback((S,b)=>{u(),S.target.closest(".react-flow")&&b.width&&b.height},[u]);return M.jsx("div",{className:"w-full h-full flex-grow bg-stone-900/50 rounded-md overflow-hidden",children:M.jsxs(Qre,{nodes:t,edges:e,onNodesChange:n,onEdgesChange:r,onNodeDragStop:i,onSelectionChange:g,onNodeDoubleClick:_,onNodeMouseEnter:c,onNodeMouseLeave:d,onNodeContextMenu:h,nodeTypes:i7e,edgeTypes:o7e,fitView:!0,fitViewOptions:{padding:.2},className:"bg-stone-900",minZoom:.2,maxZoom:2,children:[M.jsx(mqe,{color:"#44403c",gap:16}),M.jsx(uqe,{}),M.jsx(nqe,{nodeStrokeWidth:3,zoomable:!0,pannable:!0}),M.jsx(s7e,{nodeToFocus:a,onClearNodeToFocus:u})]})})},l7e=()=>M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:[M.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),M.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]}),u7e=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:M.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})}),c7e=()=>M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:[M.jsx("path",{d:"M11 3a1 1 0 10-2 0v1.586l-1.293-1.293a1 1 0 10-1.414 1.414L7.586 6H6a1 1 0 000 2h1.586l-1.293 1.293a1 1 0 101.414 1.414L9 8.414V10a1 1 0 102 0V8.414l1.293 1.293a1 1 0 101.414-1.414L12.414 7H14a1 1 0 100-2h-1.586l1.293-1.293a1 1 0 10-1.414-1.414L11 4.586V3z"}),M.jsx("path",{d:"M6 10a1 1 0 01-1 1H3a1 1 0 110-2h2a1 1 0 011 1zM14 10a1 1 0 01-1 1h-2a1 1 0 110-2h2a1 1 0 011 1zM3 15a1 1 0 100 2h8a1 1 0 100-2H3z"})]}),f7e=({x:t,y:e,nodeId:n,onClose:r,onRename:i,onDelete:o,onCreateConnected:s})=>{const a=D.useRef(null),[u,c]=D.useState({x:t,y:e});D.useEffect(()=>{const h=g=>{a.current&&!a.current.contains(g.target)&&r()};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[r]),D.useEffect(()=>{if(a.current){const{innerWidth:h,innerHeight:g}=window,_=a.current.offsetWidth,S=a.current.offsetHeight;let b=t,T=e;t+_>h&&(b=h-_-10),e+S>g&&(T=g-S-10),c({x:b,y:T})}},[t,e]);const d=({onClick:h,children:g,isDestructive:_})=>M.jsx("button",{onClick:h,className:`w-full text-left px-3 py-1.5 text-sm flex items-center rounded-sm transition-colors ${_?"text-red-400 hover:bg-red-800/50":"text-stone-200 hover:bg-stone-600"}`,children:g});return M.jsxs("div",{ref:a,style:{top:u.y,left:u.x},className:"absolute z-50 bg-stone-800/90 backdrop-blur-sm border border-stone-600 rounded-md shadow-2xl p-1 flex flex-col w-56 animate-fade-in",children:[M.jsxs("div",{className:"px-3 py-1 text-xs text-stone-400 border-b border-stone-600/50 mb-1 truncate font-mono",children:["Узел: ",n]}),M.jsxs(d,{onClick:()=>{i(n),r()},children:[M.jsx(l7e,{})," Переименовать"]}),M.jsxs(d,{onClick:()=>{s(n),r()},children:[M.jsx(c7e,{})," Создать связанный узел"]}),n!=="start"&&M.jsxs(d,{onClick:()=>{window.confirm(`Вы уверены, что хотите удалить узел "${n}"?`)&&o(n),r()},isDestructive:!0,children:[M.jsx(u7e,{})," Удалить"]})]})},d7e=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:M.jsx("path",{d:"M17 3H5a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2zm-3 12H8v-4h6v4zm2-6H5V5h12v4z"})}),h7e=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),p7e=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),m7e=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13V7m0 13a2 2 0 01-2 2H7a2 2 0 01-2-2V9a2 2 0 012-2h2a2 2 0 012 2v11zM15 20l5.447-2.724A1 1 0 0021 16.382V5.618a1 1 0 00-1.447-.894L15 7m0 13V7m0 13a2 2 0 002 2h2a2 2 0 002-2V9a2 2 0 00-2-2h-2a2 2 0 00-2 2v11z"})}),g7e=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),y7e=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-stone-400",viewBox:"0 0 20 20",fill:"currentColor",children:M.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})}),nK=200,rK=50,v7e=t=>{var o,s,a;const e=[],n=[],r=new Set,i=u=>typeof u=="string"?u:u[t.meta.defaultLocale||"ru"]||Object.values(u)[0]||"";for(const u in t.nodes){const c=t.nodes[u];c.choices&&c.choices.forEach(d=>{d.to&&r.add(d.to)}),c.branch&&c.branch.forEach(d=>{d.to&&r.add(d.to)}),c.fallback&&r.add(c.fallback)}for(const u in t.nodes){const c=t.nodes[u],d=u!=="start"&&!r.has(u),h=(((o=c.choices)==null?void 0:o.length)||0)>0||(((s=c.branch)==null?void 0:s.length)||0)>0||!!c.fallback,g=!!c.end,_=(r.has(u)||u==="start")&&!h&&!g;e.push({id:u,type:"custom",position:c.position||{x:0,y:0},data:{label:u,isEnd:g,endType:(a=c.end)==null?void 0:a.type,isOrphan:d,isDeadEnd:_}}),c.choices&&c.choices.forEach((S,b)=>{S.to&&t.nodes[S.to]&&n.push({id:`e-${u}-${S.to}-${b}`,source:u,target:S.to,label:i(S.label),type:"custom",markerEnd:{type:sy.ArrowClosed}})})}return{nodes:e,edges:n}},iK=t=>{const e=new Dj.graphlib.Graph;e.setGraph({rankdir:"TB",nodesep:100,ranksep:120}),e.setDefaultEdgeLabel(()=>({}));for(const r in t.nodes){e.setNode(r,{width:nK,height:rK});const i=t.nodes[r];i.choices&&i.choices.forEach(o=>{o.to&&t.nodes[o.to]&&e.setEdge(r,o.to)})}Dj.layout(e);const n=JSON.parse(JSON.stringify(t));return e.nodes().forEach(r=>{const i=e.node(r);n.nodes[r]&&(n.nodes[r].position={x:i.x-nK/2,y:i.y-rK/2})}),n},_7e=()=>{const{questId:t}=gK(),e=Jw(),[n,r]=D.useState(null),[i,o]=D.useState(null),[s,a]=D.useState("draft"),[u,c]=D.useState("start"),[d,h]=D.useState(!0),[g,_]=D.useState(!1),[S,b]=D.useState(""),[T,x]=D.useState(null),[C,I]=D.useState("map"),[N,V]=D.useState(!1),[q,P]=D.useState(null),[O,R]=D.useState(!1),[U,L]=D.useState(""),[F,$]=D.useState(null),[H,Y]=D.useState(null),[K,Q]=D.useState({loading:!1,error:"",results:[],isOpen:!1}),[re,X,G]=GUe([]),[te,ee,ae]=jUe([]),J=D.useCallback(xe=>{G(xe),xe.forEach(Me=>{Me.type==="position"&&!Me.dragging&&Me.position&&o($e=>{if(!$e)return null;const ze={...$e.nodes},He=ze[Me.id];return He?(ze[Me.id]={...He,position:Me.position},{...$e,nodes:ze}):$e})})},[G,o]);D.useEffect(()=>{if(!t){b("Квест не найден."),h(!1);return}(async()=>{h(!0);const Me=jo(Jr,"games",t);try{const $e=await qb(Me);if($e.exists()){const ze={id:$e.id,...$e.data()};r(ze);let He=JSON.parse(JSON.stringify(ze.dsl));Object.values(He.nodes).some(vt=>!vt.position)&&(He=iK(He)),a(ze.status||"draft"),o(He)}else b("Квест не найден.")}catch($e){console.error($e),b("Ошибка загрузки квеста.")}finally{h(!1)}})()},[t]);const ne=D.useMemo(()=>i?v7e(i):{nodes:[],edges:[]},[i]);D.useEffect(()=>{X(ne.nodes),ee(ne.edges)},[ne,X,ee]),D.useEffect(()=>{if(!i)return;const xe=new Set;q&&(xe.add(q),ne.edges.forEach($e=>{$e.source===q&&xe.add($e.target),$e.target===q&&xe.add($e.source)}));const Me=new Set;O&&u&&(Me.add(u),ne.edges.forEach($e=>{$e.source===u&&Me.add($e.target),$e.target===u&&Me.add($e.source)})),X($e=>$e.map(ze=>({...ze,hidden:O&&u?!Me.has(ze.id):!1,data:{...ze.data,isNeighbor:xe.has(ze.id),isFaded:q?!xe.has(ze.id):!1}}))),ee($e=>$e.map(ze=>{const He=q?ze.source===q||ze.target===q:!1;return{...ze,hidden:O&&u?!(Me.has(ze.source)&&Me.has(ze.target)):!1,data:{...ze.data,isHighlighted:He,isFaded:q?!He:!1}}}))},[i,u,q,O,X,ee,ne.edges]);const oe=D.useCallback(xe=>{o(xe)},[]),we=xe=>{a(xe)},Ie=async()=>{if(!(!t||!i)){_(!0);try{await zg(jo(Jr,"games",t),{title:i.meta.title,dsl:i,status:s,updatedAt:Ql()}),x(new Date)}catch(xe){console.error(xe),alert("Не удалось сохранить изменения.")}finally{_(!1)}}},ye=xe=>{o(Me=>{var He;if(!Me)return null;const $e={...Me,nodes:{...Me.nodes}},ze=((He=Me.nodes[u])==null?void 0:He.position)||{x:0,y:150};return $e.nodes[xe]={text:"Новый узел...",position:{x:ze.x,y:ze.y+120}},$e}),c(xe)},Ce=xe=>{const Me=`node_${Date.now()}`;o($e=>{var We;if(!$e)return null;const ze=JSON.parse(JSON.stringify($e)),He=((We=ze.nodes[xe])==null?void 0:We.position)||{x:0,y:0};return ze.nodes[Me]={text:"Новый связанный узел",position:{x:He.x,y:He.y+120}},ze.nodes[xe].choices||(ze.nodes[xe].choices=[]),ze.nodes[xe].choices.push({label:"Перейти к новому узлу",to:Me}),ze}),c(Me),$(Me)},ke=(xe,Me)=>{o($e=>{if(!$e)return null;const ze=JSON.parse(JSON.stringify($e));return ze.nodes[Me]=ze.nodes[xe],delete ze.nodes[xe],Object.values(ze.nodes).forEach(He=>{He.choices&&He.choices.forEach(We=>{We.to===xe&&(We.to=Me)}),He.branch&&He.branch.forEach(We=>{We.to===xe&&(We.to=Me)}),He.fallback===xe&&(He.fallback=Me)}),ze}),u===xe&&c(Me)},_e=xe=>{o(Me=>{if(!Me)return null;const $e=JSON.parse(JSON.stringify(Me));return delete $e.nodes[xe],Object.values($e.nodes).forEach(ze=>{ze.choices&&(ze.choices=ze.choices.map(He=>He.to===xe?{...He,to:""}:He)),ze.branch&&(ze.branch=ze.branch.filter(He=>He.to!==xe)),ze.fallback===xe&&(ze.fallback=void 0)}),$e}),u===xe&&c("start")},Ze=async()=>{if(i){Q({loading:!0,error:"",results:[],isOpen:!0});try{const xe=await Fje(i);Q({loading:!1,error:"",results:xe,isOpen:!0})}catch(xe){Q({loading:!1,error:xe.message,results:[],isOpen:!0})}}},Ue=(xe,Me)=>{o($e=>{var ze,He;if(!$e)return null;try{const We=JSON.parse(JSON.stringify($e));let vt=!1;const yt=We.nodes[xe.nodeId];if(!yt)throw new Error(`Node with id '${xe.nodeId}' not found.`);switch(Me.action){case"CREATE_NODE":if(Me.details.newNodeId&&!We.nodes[Me.details.newNodeId]&&Me.details.generatedText&&(We.nodes[Me.details.newNodeId]={text:Me.details.generatedText},yt.choices)){let Dt=Me.details.choiceIndex;if(Dt===void 0&&((ze=xe.details)!=null&&ze.choiceLabel)&&(Dt=yt.choices.findIndex(Ct=>Ct.label===xe.details.choiceLabel)),Dt!==void 0&&Dt>-1){const Ct=yt.choices[Dt];Ct&&(Ct.to=Me.details.newNodeId,vt=!0)}}break;case"DELETE_CHOICE":if(yt.choices){let Dt=Me.details.choiceIndex;Dt===void 0&&((He=xe.details)!=null&&He.choiceLabel)&&(Dt=yt.choices.findIndex(Ct=>Ct.label===xe.details.choiceLabel)),Dt!==void 0&&Dt>-1&&yt.choices[Dt]&&(yt.choices.splice(Dt,1),vt=!0)}break;case"DELETE_NODE":We.nodes[xe.nodeId]&&xe.nodeId!=="start"&&(delete We.nodes[xe.nodeId],vt=!0);break}return vt?(Q(Dt=>({...Dt,results:Dt.results.filter(Ct=>Ct!==xe)})),We):(alert("Не удалось применить исправление (возможно, данные устарели)."),$e)}catch(We){return alert(`Ошибка при применении исправления: ${We.message}`),$e}})},Le=xe=>{c(xe),V(!0)},st=xe=>{xe==="list"&&u&&(i!=null&&i.nodes[u])&&V(!1),I(xe)},Pe=()=>{o(xe=>xe?iK(xe):null)},qe=xe=>{c(xe),$(xe),L("")},Rt=D.useCallback((xe,Me)=>{xe.preventDefault(),Y({x:xe.clientX,y:xe.clientY,nodeId:Me.id})},[]),In=D.useMemo(()=>!U||!i?[]:Object.keys(i.nodes).filter(xe=>xe.toLowerCase().includes(U.toLowerCase())).slice(0,5),[U,i]);if(d)return M.jsx("div",{className:"text-center p-8 font-display text-2xl text-stone-400 animate-pulse",children:"ЗАГРУЗКА РЕДАКТОРА..."});if(S)return M.jsx("div",{className:"text-center p-8 text-2xl text-red-500",children:S});if(!n||!i)return null;const Rn=({mode:xe,label:Me,children:$e})=>M.jsxs("button",{onClick:()=>st(xe),className:`flex items-center justify-center w-full px-4 py-2 font-display text-lg rounded-t-md transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-500
            ${C===xe?"bg-stone-800 text-amber-400":"bg-stone-900/50 text-stone-400 hover:bg-stone-800/80"}`,children:[$e,Me]});return M.jsxs("div",{className:"container mx-auto py-8 px-4",children:[M.jsxs("header",{className:"flex justify-between items-center mb-6",children:[M.jsxs("div",{className:"flex items-center gap-4 flex-grow min-w-0",children:[M.jsx("button",{onClick:()=>e("/admin"),className:"bg-stone-700 hover:bg-stone-600 text-stone-200 font-semibold py-2 px-4 rounded-md transition-colors flex-shrink-0",children:"← Назад"}),M.jsx("input",{type:"text",value:i.meta.title,onChange:xe=>oe(Me=>Me?{...Me,meta:{...Me.meta,title:xe.target.value}}:null),className:"font-display text-4xl text-stone-200 bg-transparent border-0 focus:ring-2 focus:ring-amber-500 rounded-md p-1 truncate"}),M.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[M.jsx("label",{htmlFor:"quest-status",className:"text-sm font-bold text-stone-400 flex-shrink-0",children:"Статус:"}),M.jsxs("div",{className:"relative",children:[M.jsx("span",{className:`absolute left-2.5 top-1/2 -translate-y-1/2 h-2.5 w-2.5 rounded-full z-10 ${s==="published"?"bg-green-400":"bg-sky-400"}`}),M.jsxs("select",{id:"quest-status",value:s,onChange:xe=>we(xe.target.value),className:`w-full bg-stone-700 border border-stone-600 rounded-md pl-7 pr-4 py-1.5 focus:ring-2 focus:ring-amber-500 focus:outline-none font-semibold ${s==="published"?"text-green-300":"text-sky-300"}`,children:[M.jsx("option",{value:"draft",children:"Черновик"}),M.jsx("option",{value:"published",children:"Опубликован"})]})]})]})]}),M.jsxs("div",{className:"flex items-center gap-4 flex-shrink-0",children:[T&&M.jsxs("span",{className:"text-sm text-stone-400",children:["Сохранено: ",T.toLocaleTimeString()]}),M.jsxs("button",{onClick:Ze,disabled:K.loading,className:"flex items-center justify-center font-display text-xl bg-teal-600 text-white py-2 px-6 rounded-md hover:bg-teal-500 transition-colors disabled:bg-stone-600",children:[M.jsx(h7e,{})," ",K.loading?"АНАЛИЗ...":"Проверить сценарий"]}),M.jsxs("button",{onClick:Ie,disabled:g,className:"flex items-center justify-center font-display text-xl bg-amber-500 text-stone-900 py-2 px-6 rounded-md hover:bg-amber-400 transition-colors disabled:bg-stone-600 disabled:cursor-not-allowed",children:[M.jsx(d7e,{})," ",g?"СОХРАНЕНИЕ...":"СОХРАНИТЬ"]})]})]}),M.jsxs("main",{className:"relative",children:[M.jsxs("div",{className:`${C==="map"?"block":"grid grid-cols-1 md:grid-cols-4 gap-6"}`,children:[M.jsxs("div",{className:`${C==="map"?"h-[75vh]":"md:col-span-1 h-full max-h-[75vh]"} bg-stone-800/50 border border-stone-700 p-4 rounded-md flex flex-col`,children:[M.jsxs("div",{className:"flex mb-4 flex-shrink-0 items-center gap-4",children:[M.jsxs("div",{className:"flex-grow flex",children:[M.jsx(Rn,{mode:"list",label:"Список",children:M.jsx(p7e,{})}),M.jsx(Rn,{mode:"map",label:"Карта",children:M.jsx(m7e,{})})]}),C==="map"&&M.jsxs(M.Fragment,{children:[M.jsxs("div",{className:"relative",children:[M.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:M.jsx(y7e,{})}),M.jsx("input",{type:"text",value:U,onChange:xe=>L(xe.target.value),placeholder:"Поиск узла...",className:"bg-stone-900 text-stone-200 border border-stone-600 rounded-md py-2 pl-10 pr-4 focus:ring-2 focus:ring-amber-500 focus:outline-none"}),In.length>0&&M.jsx("div",{className:"absolute z-10 mt-1 w-full bg-stone-700 border border-stone-600 rounded-md shadow-lg",children:In.map(xe=>M.jsx("button",{onClick:()=>qe(xe),className:"block w-full text-left px-4 py-2 text-sm text-stone-200 hover:bg-stone-600",children:xe},xe))})]}),M.jsxs("label",{htmlFor:"focus-toggle",className:"flex items-center cursor-pointer",title:"Показать только выбранный узел и его соседей",children:[M.jsx("span",{className:"mr-2 text-sm font-semibold text-stone-300",children:"Фокус"}),M.jsxs("div",{className:"relative",children:[M.jsx("input",{type:"checkbox",id:"focus-toggle",className:"sr-only",checked:O,onChange:()=>R(!O)}),M.jsx("div",{className:`block ${O?"bg-amber-500":"bg-stone-600"} w-12 h-6 rounded-full transition-colors`}),M.jsx("div",{className:`dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform ${O?"transform translate-x-6":""}`})]})]}),M.jsx("button",{onClick:Pe,className:"p-2 bg-stone-700 text-stone-200 rounded-md hover:bg-stone-600 hover:text-amber-400 transition-colors",title:"Авто-сортировка",children:M.jsx(g7e,{})})]})]}),C==="list"&&M.jsx(OBe,{dsl:i,selectedNodeId:u,onSelectNode:c,onCreateNode:ye,onRenameNode:ke,onDeleteNode:_e}),C==="map"&&M.jsx(IL,{children:M.jsx(a7e,{nodes:re,edges:te,onNodesChange:J,onEdgesChange:ae,selectedNodeId:u,onSelectNode:Le,onNodeToFocus:F,onClearNodeToFocus:()=>$(null),onNodeMouseEnter:(xe,Me)=>P(Me.id),onNodeMouseLeave:()=>P(null),onNodeContextMenu:Rt})})]}),C==="list"&&M.jsx("div",{className:"md:col-span-3",children:M.jsx(tK,{questId:t,dsl:i,selectedNodeId:u,onDslChange:oe},u)})]}),M.jsx("div",{className:`fixed top-0 right-0 h-full w-full md:w-1/2 lg:w-[450px] z-30 transition-transform duration-300 ease-in-out transform ${N?"translate-x-0":"translate-x-full"}`,children:u&&i.nodes[u]&&M.jsx(tK,{questId:t,dsl:i,selectedNodeId:u,onDslChange:oe,onClose:()=>V(!1)},u)}),N&&M.jsx("div",{className:"fixed inset-0 bg-black/50 z-20 md:hidden",onClick:()=>V(!1)})]}),H&&M.jsx(f7e,{x:H.x,y:H.y,nodeId:H.nodeId,onClose:()=>Y(null),onRename:xe=>{c(xe),alert("Функция переименования из контекстного меню будет добавлена. Пока используйте список слева.")},onDelete:_e,onCreateConnected:Ce}),M.jsx(t7e,{isOpen:K.isOpen,onClose:()=>Q(xe=>({...xe,isOpen:!1})),analysisState:K,onApplySuggestion:Ue})]})},oK=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),w7e=()=>{const t=Jw(),[e,n]=D.useState({prompt:"",keywords:"",nodesCount:"5-7"}),[r,i]=D.useState("Киберпанк-нуар"),[o,s]=D.useState(""),[a,u]=D.useState(!1),[c,d]=D.useState("easy"),[h,g]=D.useState({loading:!1,error:""}),_=T=>{const{name:x,value:C}=T.target;n(I=>({...I,[x]:C}))},S=T=>{i(T.target.value)},b=async T=>{T.preventDefault();const x=r==="__CUSTOM__"?o:r;if(!x.trim()){g({loading:!1,error:"Пожалуйста, укажите жанр."});return}g({loading:!0,error:""});try{const C={...e,genre:x,addLogic:a,complexity:c},I=await qje(C),N=`AI: ${e.prompt.substring(0,30)}...`,q={format:"bk-quest@1",meta:{id:`quest_ai_${Date.now()}`,title:N,version:1,defaultLocale:"ru"},assets:{images:{},audio:{}},state:{vars:{},inventory:[]},nodes:I},P=await Hg(Ns(Jr,"games"),{title:N,status:"draft",createdAt:Ql(),updatedAt:Ql(),dsl:q});t(`/admin/quest/${P.id}`)}catch(C){g({loading:!1,error:C.message})}};return M.jsxs("div",{className:"container mx-auto py-8 px-4",children:[M.jsx("div",{className:"flex items-center mb-6",children:M.jsx("button",{onClick:()=>t("/admin"),className:"bg-stone-700 hover:bg-stone-600 text-stone-200 font-semibold py-2 px-4 rounded-md transition-colors flex-shrink-0",children:"← Назад"})}),M.jsxs("div",{className:"max-w-4xl mx-auto bg-stone-800/50 border border-stone-700 p-8 rounded-md",children:[M.jsxs("h2",{className:"font-display text-4xl text-amber-400 mb-2 flex items-center",children:[M.jsx(oK,{}),"AI-Архитектор Квестов"]}),M.jsx("p",{className:"text-stone-400 mb-6",children:"Опишите вашу идею, и AI создаст базовую структуру сценария, которую вы сможете доработать в редакторе."}),M.jsxs("form",{onSubmit:b,className:"space-y-6",children:[M.jsxs("div",{children:[M.jsx("label",{htmlFor:"prompt",className:"text-sm font-bold text-stone-300 block mb-2",children:"Основная завязка сюжета:"}),M.jsx("textarea",{id:"prompt",name:"prompt",value:e.prompt,onChange:_,className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all h-32 resize-y",placeholder:"Напр.: Детектив в киберпанк-городе расследует исчезновение ученого. Квест начинается в его мрачном офисе...",required:!0})]}),M.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[M.jsxs("div",{children:[M.jsx("label",{htmlFor:"genre",className:"text-sm font-bold text-stone-300 block mb-2",children:"Жанр / Сеттинг:"}),M.jsxs("select",{id:"genre",name:"genre",value:r,onChange:S,className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",children:[M.jsx("option",{children:"Киберпанк-нуар"}),M.jsx("option",{children:"Темное фэнтези"}),M.jsx("option",{children:"Научная фантастика"}),M.jsx("option",{children:"Космический хоррор"}),M.jsx("option",{children:"Мистический триллер"}),M.jsx("option",{children:"Детектив"}),M.jsx("option",{children:"Постапокалипсис"}),M.jsx("option",{children:"Выживание"}),M.jsx("option",{children:"Приключение"}),M.jsx("option",{value:"__CUSTOM__",children:"Свой вариант..."})]})]}),M.jsxs("div",{children:[M.jsx("label",{htmlFor:"keywords",className:"text-sm font-bold text-stone-300 block mb-2",children:"Ключевые элементы (через запятую):"}),M.jsx("input",{id:"keywords",name:"keywords",type:"text",value:e.keywords,onChange:_,className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",placeholder:"Напр.: импланты, корпорация, дождь"})]}),M.jsxs("div",{children:[M.jsx("label",{htmlFor:"nodesCount",className:"text-sm font-bold text-stone-300 block mb-2",children:"Примерное кол-во узлов:"}),M.jsx("input",{id:"nodesCount",name:"nodesCount",type:"text",value:e.nodesCount,onChange:_,className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",placeholder:"Напр.: 5-7"})]})]}),r==="__CUSTOM__"&&M.jsxs("div",{children:[M.jsx("label",{htmlFor:"customGenre",className:"text-sm font-bold text-stone-300 block mb-2",children:"Ваш собственный жанр:"}),M.jsx("input",{id:"customGenre",name:"customGenre",type:"text",value:o,onChange:T=>s(T.target.value),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",placeholder:"Напр.: Подводное стимпанк-королевство грибов",required:!0})]}),M.jsxs("div",{className:"space-y-4 pt-4 border-t border-stone-600",children:[M.jsxs("label",{htmlFor:"addLogic",className:"flex items-center cursor-pointer",children:[M.jsx("input",{type:"checkbox",id:"addLogic",checked:a,onChange:T=>u(T.target.checked),className:"h-5 w-5 rounded border-stone-500 bg-stone-700 text-sky-500 focus:ring-sky-600"}),M.jsx("span",{className:"ml-3 text-stone-300 font-semibold",children:"Добавить игровую логику (предметы, условия, эффекты)"})]}),a&&M.jsxs("div",{className:"pl-8",children:[M.jsx("label",{htmlFor:"complexity",className:"text-sm font-bold text-stone-300 block mb-2",children:"Сложность логики:"}),M.jsxs("select",{id:"complexity",name:"complexity",value:c,onChange:T=>d(T.target.value),className:"w-full md:w-1/2 bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",children:[M.jsx("option",{value:"easy",children:"Легко"}),M.jsx("option",{value:"medium",children:"Средне"}),M.jsx("option",{value:"hard",children:"Сложно"})]})]})]}),M.jsx("div",{className:"pt-4 border-t border-stone-700",children:M.jsxs("button",{type:"submit",disabled:h.loading,className:"w-full flex items-center justify-center font-display text-2xl bg-sky-600 text-white py-3 px-6 rounded-md hover:bg-sky-500 transition-colors disabled:bg-stone-600 disabled:cursor-not-allowed",children:[M.jsx(oK,{}),h.loading?"СОЗДАНИЕ СЦЕНАРИЯ...":"СГЕНЕРИРОВАТЬ КВЕСТ"]})}),h.error&&M.jsx("p",{className:"text-red-500 text-center text-sm",children:h.error})]})]})]})},b7e=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:M.jsx("path",{fillRule:"evenodd",d:"M10 2a4 4 0 00-4 4v4H4a2 2 0 00-2 2v6a2 2 0 002 2h12a2 2 0 002-2v-6a2 2 0 00-2-2h-2V6a4 4 0 00-4-4zm-2 6V6a2 2 0 114 0v4H8z",clipRule:"evenodd"})}),sK=()=>{const[t,e]=D.useState(""),[n,r]=D.useState(""),[i,o]=D.useState(""),s=async a=>{a.preventDefault(),o("");try{await AW(_g,t,n)}catch(u){o("Ошибка входа. Проверьте почту и пароль."),console.error(u)}};return M.jsx("div",{className:"flex flex-col items-center justify-center min-h-[60vh]",children:M.jsxs("div",{className:"w-full max-w-sm p-8 bg-stone-800/50 border border-stone-700 rounded-md shadow-lg",children:[M.jsx("h2",{className:"font-display text-3xl text-center text-stone-200 mb-6 tracking-wider",children:"ВХОД В ПАНЕЛЬ"}),M.jsxs("form",{onSubmit:s,className:"space-y-4",children:[M.jsx("input",{type:"email",value:t,onChange:a=>e(a.target.value),placeholder:"Email",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all","aria-label":"Email",required:!0}),M.jsx("input",{type:"password",value:n,onChange:a=>r(a.target.value),placeholder:"Пароль",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all","aria-label":"Password",required:!0}),M.jsxs("button",{type:"submit",className:"w-full flex items-center justify-center font-display text-xl bg-amber-500 text-stone-900 py-2 rounded-md hover:bg-amber-400 transition-colors",children:[M.jsx(b7e,{}),"ВОЙТИ"]}),i&&M.jsx("p",{className:"text-red-500 text-center text-sm mt-4",children:i})]})]})})},T7e=()=>M.jsx("header",{className:"bg-black/50 border-b-2 border-amber-500/50 p-4 sticky top-0 z-20 backdrop-blur-sm",children:M.jsxs("div",{className:"container mx-auto text-center",children:[M.jsx("a",{href:"/#",className:"font-display text-4xl md:text-5xl text-amber-400 tracking-widest no-underline",children:"B_KOMHATE"}),M.jsx("p",{className:"text-stone-400 text-sm tracking-wider",children:"QUEST & CODEWORD PLATFORM"})]})}),aK=()=>M.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] text-center p-4",children:[M.jsx("h2",{className:"font-display text-6xl text-red-500",children:"404"}),M.jsx("p",{className:"text-stone-300 text-xl mt-2",children:"Страница не найдена."}),M.jsx("a",{href:"/#/admin",className:"text-amber-400 hover:text-amber-300 mt-4",children:"Перейти в панель управления"})]}),E7e=()=>{const{currentUser:t,loading:e}=P0e(),n=Ks();if(e)return M.jsx("div",{className:"flex items-center justify-center min-h-[80vh]",children:M.jsx("p",{className:"font-display text-2xl text-stone-400 animate-pulse",children:"ИНИЦИАЛИЗАЦИЯ СИСТЕМЫ..."})});if(t)return M.jsxs(x4,{children:[M.jsx(ui,{path:"/admin",element:M.jsx(BDe,{})}),M.jsx(ui,{path:"/admin/quest/:questId",element:M.jsx(_7e,{})}),M.jsx(ui,{path:"/admin/architect",element:M.jsx(w7e,{})})," ",M.jsx(ui,{path:"/",element:M.jsx(S4,{to:"/admin",replace:!0})}),M.jsx(ui,{path:"/view",element:M.jsx(k5,{})}),M.jsx(ui,{path:"/play/:questId",element:M.jsx(p2,{})}),M.jsx(ui,{path:"*",element:M.jsx(aK,{})})]});const r=n.pathname.startsWith("/admin");return M.jsxs(x4,{children:[M.jsx(ui,{path:"/view",element:M.jsx(k5,{})}),M.jsx(ui,{path:"/play/:questId",element:M.jsx(p2,{})}),r&&M.jsx(ui,{path:"/admin/*",element:M.jsx(sK,{})}),M.jsx(ui,{path:"/admin",element:M.jsx(sK,{})}),M.jsx(ui,{path:"/",element:M.jsx(S4,{to:"/admin",replace:!0})}),M.jsx(ui,{path:"*",element:M.jsx(aK,{})})]})},S7e=()=>M.jsx("div",{className:"min-h-screen",children:M.jsx(N0e,{children:M.jsxs(Ole,{children:[M.jsx(T7e,{}),M.jsx("main",{children:M.jsx(E7e,{})})]})})}),qoe=document.getElementById("root");if(!qoe)throw new Error("Could not find root element to mount to");const x7e=Eae.createRoot(qoe);x7e.render(M.jsx(ge.StrictMode,{children:M.jsx(S7e,{})}));
