(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();function d0(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Rd={exports:{}},pl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b_;function fS(){if(b_)return pl;b_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,l,c){var f=null;if(c!==void 0&&(f=""+c),l.key!==void 0&&(f=""+l.key),"key"in l){c={};for(var g in l)g!=="key"&&(c[g]=l[g])}else c=l;return l=c.ref,{$$typeof:r,type:s,key:f,ref:l!==void 0?l:null,props:c}}return pl.Fragment=t,pl.jsx=n,pl.jsxs=n,pl}var R_;function dS(){return R_||(R_=1,Rd.exports=fS()),Rd.exports}var Z=dS(),Id={exports:{}},St={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I_;function mS(){if(I_)return St;I_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),w=Symbol.iterator;function R(D){return D===null||typeof D!="object"?null:(D=w&&D[w]||D["@@iterator"],typeof D=="function"?D:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y=Object.assign,et={};function $(D,W,it){this.props=D,this.context=W,this.refs=et,this.updater=it||q}$.prototype.isReactComponent={},$.prototype.setState=function(D,W){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,W,"setState")},$.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function _t(){}_t.prototype=$.prototype;function mt(D,W,it){this.props=D,this.context=W,this.refs=et,this.updater=it||q}var ft=mt.prototype=new _t;ft.constructor=mt,Y(ft,$.prototype),ft.isPureReactComponent=!0;var Ut=Array.isArray,At={H:null,A:null,T:null,S:null,V:null},Lt=Object.prototype.hasOwnProperty;function V(D,W,it,J,ct,bt){return it=bt.ref,{$$typeof:r,type:D,key:W,ref:it!==void 0?it:null,props:bt}}function S(D,W){return V(D.type,W,void 0,void 0,void 0,D.props)}function C(D){return typeof D=="object"&&D!==null&&D.$$typeof===r}function O(D){var W={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(it){return W[it]})}var M=/\/+/g;function P(D,W){return typeof D=="object"&&D!==null&&D.key!=null?O(""+D.key):W.toString(36)}function I(){}function Ue(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(I,I):(D.status="pending",D.then(function(W){D.status==="pending"&&(D.status="fulfilled",D.value=W)},function(W){D.status==="pending"&&(D.status="rejected",D.reason=W)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function se(D,W,it,J,ct){var bt=typeof D;(bt==="undefined"||bt==="boolean")&&(D=null);var vt=!1;if(D===null)vt=!0;else switch(bt){case"bigint":case"string":case"number":vt=!0;break;case"object":switch(D.$$typeof){case r:case t:vt=!0;break;case T:return vt=D._init,se(vt(D._payload),W,it,J,ct)}}if(vt)return ct=ct(D),vt=J===""?"."+P(D,0):J,Ut(ct)?(it="",vt!=null&&(it=vt.replace(M,"$&/")+"/"),se(ct,W,it,"",function(Hn){return Hn})):ct!=null&&(C(ct)&&(ct=S(ct,it+(ct.key==null||D&&D.key===ct.key?"":(""+ct.key).replace(M,"$&/")+"/")+vt)),W.push(ct)),1;vt=0;var De=J===""?".":J+":";if(Ut(D))for(var Zt=0;Zt<D.length;Zt++)J=D[Zt],bt=De+P(J,Zt),vt+=se(J,W,it,bt,ct);else if(Zt=R(D),typeof Zt=="function")for(D=Zt.call(D),Zt=0;!(J=D.next()).done;)J=J.value,bt=De+P(J,Zt++),vt+=se(J,W,it,bt,ct);else if(bt==="object"){if(typeof D.then=="function")return se(Ue(D),W,it,J,ct);throw W=String(D),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return vt}function H(D,W,it){if(D==null)return D;var J=[],ct=0;return se(D,J,"","",function(bt){return W.call(it,bt,ct++)}),J}function nt(D){if(D._status===-1){var W=D._result;W=W(),W.then(function(it){(D._status===0||D._status===-1)&&(D._status=1,D._result=it)},function(it){(D._status===0||D._status===-1)&&(D._status=2,D._result=it)}),D._status===-1&&(D._status=0,D._result=W)}if(D._status===1)return D._result.default;throw D._result}var lt=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function zt(){}return St.Children={map:H,forEach:function(D,W,it){H(D,function(){W.apply(this,arguments)},it)},count:function(D){var W=0;return H(D,function(){W++}),W},toArray:function(D){return H(D,function(W){return W})||[]},only:function(D){if(!C(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},St.Component=$,St.Fragment=n,St.Profiler=l,St.PureComponent=mt,St.StrictMode=s,St.Suspense=p,St.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=At,St.__COMPILER_RUNTIME={__proto__:null,c:function(D){return At.H.useMemoCache(D)}},St.cache=function(D){return function(){return D.apply(null,arguments)}},St.cloneElement=function(D,W,it){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var J=Y({},D.props),ct=D.key,bt=void 0;if(W!=null)for(vt in W.ref!==void 0&&(bt=void 0),W.key!==void 0&&(ct=""+W.key),W)!Lt.call(W,vt)||vt==="key"||vt==="__self"||vt==="__source"||vt==="ref"&&W.ref===void 0||(J[vt]=W[vt]);var vt=arguments.length-2;if(vt===1)J.children=it;else if(1<vt){for(var De=Array(vt),Zt=0;Zt<vt;Zt++)De[Zt]=arguments[Zt+2];J.children=De}return V(D.type,ct,void 0,void 0,bt,J)},St.createContext=function(D){return D={$$typeof:f,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:c,_context:D},D},St.createElement=function(D,W,it){var J,ct={},bt=null;if(W!=null)for(J in W.key!==void 0&&(bt=""+W.key),W)Lt.call(W,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(ct[J]=W[J]);var vt=arguments.length-2;if(vt===1)ct.children=it;else if(1<vt){for(var De=Array(vt),Zt=0;Zt<vt;Zt++)De[Zt]=arguments[Zt+2];ct.children=De}if(D&&D.defaultProps)for(J in vt=D.defaultProps,vt)ct[J]===void 0&&(ct[J]=vt[J]);return V(D,bt,void 0,void 0,null,ct)},St.createRef=function(){return{current:null}},St.forwardRef=function(D){return{$$typeof:g,render:D}},St.isValidElement=C,St.lazy=function(D){return{$$typeof:T,_payload:{_status:-1,_result:D},_init:nt}},St.memo=function(D,W){return{$$typeof:y,type:D,compare:W===void 0?null:W}},St.startTransition=function(D){var W=At.T,it={};At.T=it;try{var J=D(),ct=At.S;ct!==null&&ct(it,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(zt,lt)}catch(bt){lt(bt)}finally{At.T=W}},St.unstable_useCacheRefresh=function(){return At.H.useCacheRefresh()},St.use=function(D){return At.H.use(D)},St.useActionState=function(D,W,it){return At.H.useActionState(D,W,it)},St.useCallback=function(D,W){return At.H.useCallback(D,W)},St.useContext=function(D){return At.H.useContext(D)},St.useDebugValue=function(){},St.useDeferredValue=function(D,W){return At.H.useDeferredValue(D,W)},St.useEffect=function(D,W,it){var J=At.H;if(typeof it=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return J.useEffect(D,W)},St.useId=function(){return At.H.useId()},St.useImperativeHandle=function(D,W,it){return At.H.useImperativeHandle(D,W,it)},St.useInsertionEffect=function(D,W){return At.H.useInsertionEffect(D,W)},St.useLayoutEffect=function(D,W){return At.H.useLayoutEffect(D,W)},St.useMemo=function(D,W){return At.H.useMemo(D,W)},St.useOptimistic=function(D,W){return At.H.useOptimistic(D,W)},St.useReducer=function(D,W,it){return At.H.useReducer(D,W,it)},St.useRef=function(D){return At.H.useRef(D)},St.useState=function(D){return At.H.useState(D)},St.useSyncExternalStore=function(D,W,it){return At.H.useSyncExternalStore(D,W,it)},St.useTransition=function(){return At.H.useTransition()},St.version="19.1.1",St}var C_;function vm(){return C_||(C_=1,Id.exports=mS()),Id.exports}var ue=vm();const gS=d0(ue);var Cd={exports:{}},yl={},Dd={exports:{}},Nd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D_;function pS(){return D_||(D_=1,(function(r){function t(H,nt){var lt=H.length;H.push(nt);t:for(;0<lt;){var zt=lt-1>>>1,D=H[zt];if(0<l(D,nt))H[zt]=nt,H[lt]=D,lt=zt;else break t}}function n(H){return H.length===0?null:H[0]}function s(H){if(H.length===0)return null;var nt=H[0],lt=H.pop();if(lt!==nt){H[0]=lt;t:for(var zt=0,D=H.length,W=D>>>1;zt<W;){var it=2*(zt+1)-1,J=H[it],ct=it+1,bt=H[ct];if(0>l(J,lt))ct<D&&0>l(bt,J)?(H[zt]=bt,H[ct]=lt,zt=ct):(H[zt]=J,H[it]=lt,zt=it);else if(ct<D&&0>l(bt,lt))H[zt]=bt,H[ct]=lt,zt=ct;else break t}}return nt}function l(H,nt){var lt=H.sortIndex-nt.sortIndex;return lt!==0?lt:H.id-nt.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var f=Date,g=f.now();r.unstable_now=function(){return f.now()-g}}var p=[],y=[],T=1,w=null,R=3,q=!1,Y=!1,et=!1,$=!1,_t=typeof setTimeout=="function"?setTimeout:null,mt=typeof clearTimeout=="function"?clearTimeout:null,ft=typeof setImmediate<"u"?setImmediate:null;function Ut(H){for(var nt=n(y);nt!==null;){if(nt.callback===null)s(y);else if(nt.startTime<=H)s(y),nt.sortIndex=nt.expirationTime,t(p,nt);else break;nt=n(y)}}function At(H){if(et=!1,Ut(H),!Y)if(n(p)!==null)Y=!0,Lt||(Lt=!0,P());else{var nt=n(y);nt!==null&&se(At,nt.startTime-H)}}var Lt=!1,V=-1,S=5,C=-1;function O(){return $?!0:!(r.unstable_now()-C<S)}function M(){if($=!1,Lt){var H=r.unstable_now();C=H;var nt=!0;try{t:{Y=!1,et&&(et=!1,mt(V),V=-1),q=!0;var lt=R;try{e:{for(Ut(H),w=n(p);w!==null&&!(w.expirationTime>H&&O());){var zt=w.callback;if(typeof zt=="function"){w.callback=null,R=w.priorityLevel;var D=zt(w.expirationTime<=H);if(H=r.unstable_now(),typeof D=="function"){w.callback=D,Ut(H),nt=!0;break e}w===n(p)&&s(p),Ut(H)}else s(p);w=n(p)}if(w!==null)nt=!0;else{var W=n(y);W!==null&&se(At,W.startTime-H),nt=!1}}break t}finally{w=null,R=lt,q=!1}nt=void 0}}finally{nt?P():Lt=!1}}}var P;if(typeof ft=="function")P=function(){ft(M)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,Ue=I.port2;I.port1.onmessage=M,P=function(){Ue.postMessage(null)}}else P=function(){_t(M,0)};function se(H,nt){V=_t(function(){H(r.unstable_now())},nt)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(H){H.callback=null},r.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<H?Math.floor(1e3/H):5},r.unstable_getCurrentPriorityLevel=function(){return R},r.unstable_next=function(H){switch(R){case 1:case 2:case 3:var nt=3;break;default:nt=R}var lt=R;R=nt;try{return H()}finally{R=lt}},r.unstable_requestPaint=function(){$=!0},r.unstable_runWithPriority=function(H,nt){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var lt=R;R=H;try{return nt()}finally{R=lt}},r.unstable_scheduleCallback=function(H,nt,lt){var zt=r.unstable_now();switch(typeof lt=="object"&&lt!==null?(lt=lt.delay,lt=typeof lt=="number"&&0<lt?zt+lt:zt):lt=zt,H){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=lt+D,H={id:T++,callback:nt,priorityLevel:H,startTime:lt,expirationTime:D,sortIndex:-1},lt>zt?(H.sortIndex=lt,t(y,H),n(p)===null&&H===n(y)&&(et?(mt(V),V=-1):et=!0,se(At,lt-zt))):(H.sortIndex=D,t(p,H),Y||q||(Y=!0,Lt||(Lt=!0,P()))),H},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(H){var nt=R;return function(){var lt=R;R=nt;try{return H.apply(this,arguments)}finally{R=lt}}}})(Nd)),Nd}var N_;function yS(){return N_||(N_=1,Dd.exports=pS()),Dd.exports}var Od={exports:{}},Ke={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O_;function _S(){if(O_)return Ke;O_=1;var r=vm();function t(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)y+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(p,y,T){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:w==null?null:""+w,children:p,containerInfo:y,implementation:T}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Ke.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ke.createPortal=function(p,y){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(t(299));return c(p,y,null,T)},Ke.flushSync=function(p){var y=f.T,T=s.p;try{if(f.T=null,s.p=2,p)return p()}finally{f.T=y,s.p=T,s.d.f()}},Ke.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(p,y))},Ke.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Ke.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var T=y.as,w=g(T,y.crossOrigin),R=typeof y.integrity=="string"?y.integrity:void 0,q=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;T==="style"?s.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:w,integrity:R,fetchPriority:q}):T==="script"&&s.d.X(p,{crossOrigin:w,integrity:R,fetchPriority:q,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Ke.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var T=g(y.as,y.crossOrigin);s.d.M(p,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(p)},Ke.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var T=y.as,w=g(T,y.crossOrigin);s.d.L(p,T,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Ke.preloadModule=function(p,y){if(typeof p=="string")if(y){var T=g(y.as,y.crossOrigin);s.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(p)},Ke.requestFormReset=function(p){s.d.r(p)},Ke.unstable_batchedUpdates=function(p,y){return p(y)},Ke.useFormState=function(p,y,T){return f.H.useFormState(p,y,T)},Ke.useFormStatus=function(){return f.H.useHostTransitionStatus()},Ke.version="19.1.1",Ke}var V_;function vS(){if(V_)return Od.exports;V_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Od.exports=_S(),Od.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M_;function ES(){if(M_)return yl;M_=1;var r=yS(),t=vm(),n=vS();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function f(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function g(e){if(c(e)!==e)throw Error(s(188))}function p(e){var i=e.alternate;if(!i){if(i=c(e),i===null)throw Error(s(188));return i!==e?null:e}for(var a=e,o=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return g(h),e;if(d===o)return g(h),i;d=d.sibling}throw Error(s(188))}if(a.return!==o.return)a=h,o=d;else{for(var v=!1,E=h.child;E;){if(E===a){v=!0,a=h,o=d;break}if(E===o){v=!0,o=h,a=d;break}E=E.sibling}if(!v){for(E=d.child;E;){if(E===a){v=!0,a=d,o=h;break}if(E===o){v=!0,o=d,a=h;break}E=E.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==o)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:i}function y(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=y(e),i!==null)return i;e=e.sibling}return null}var T=Object.assign,w=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),q=Symbol.for("react.portal"),Y=Symbol.for("react.fragment"),et=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),_t=Symbol.for("react.provider"),mt=Symbol.for("react.consumer"),ft=Symbol.for("react.context"),Ut=Symbol.for("react.forward_ref"),At=Symbol.for("react.suspense"),Lt=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function P(e){return e===null||typeof e!="object"?null:(e=M&&e[M]||e["@@iterator"],typeof e=="function"?e:null)}var I=Symbol.for("react.client.reference");function Ue(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===I?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Y:return"Fragment";case $:return"Profiler";case et:return"StrictMode";case At:return"Suspense";case Lt:return"SuspenseList";case C:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case q:return"Portal";case ft:return(e.displayName||"Context")+".Provider";case mt:return(e._context.displayName||"Context")+".Consumer";case Ut:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case V:return i=e.displayName||null,i!==null?i:Ue(e.type)||"Memo";case S:i=e._payload,e=e._init;try{return Ue(e(i))}catch{}}return null}var se=Array.isArray,H=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,nt=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,lt={pending:!1,data:null,method:null,action:null},zt=[],D=-1;function W(e){return{current:e}}function it(e){0>D||(e.current=zt[D],zt[D]=null,D--)}function J(e,i){D++,zt[D]=e.current,e.current=i}var ct=W(null),bt=W(null),vt=W(null),De=W(null);function Zt(e,i){switch(J(vt,i),J(bt,e),J(ct,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?Jy(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=Jy(i),e=t_(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}it(ct),J(ct,e)}function Hn(){it(ct),it(bt),it(vt)}function Xi(e){e.memoizedState!==null&&J(De,e);var i=ct.current,a=t_(i,e.type);i!==a&&(J(bt,e),J(ct,a))}function gi(e){bt.current===e&&(it(ct),it(bt)),De.current===e&&(it(De),hl._currentValue=lt)}var Fr=Object.prototype.hasOwnProperty,Qr=r.unstable_scheduleCallback,Kr=r.unstable_cancelCallback,oo=r.unstable_shouldYield,Zl=r.unstable_requestPaint,_n=r.unstable_now,bh=r.unstable_getCurrentPriorityLevel,lo=r.unstable_ImmediatePriority,js=r.unstable_UserBlockingPriority,Yr=r.unstable_NormalPriority,Rh=r.unstable_LowPriority,qs=r.unstable_IdlePriority,uo=r.log,Wl=r.unstable_setDisableYieldValue,ae=null,Ht=null;function ln(e){if(typeof uo=="function"&&Wl(e),Ht&&typeof Ht.setStrictMode=="function")try{Ht.setStrictMode(ae,e)}catch{}}var Fe=Math.clz32?Math.clz32:Xr,Jl=Math.log,Ih=Math.LN2;function Xr(e){return e>>>=0,e===0?32:31-(Jl(e)/Ih|0)|0}var $r=256,Zr=4194304;function Vn(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Hs(e,i,a){var o=e.pendingLanes;if(o===0)return 0;var h=0,d=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var E=o&134217727;return E!==0?(o=E&~d,o!==0?h=Vn(o):(v&=E,v!==0?h=Vn(v):a||(a=E&~e,a!==0&&(h=Vn(a))))):(E=o&~d,E!==0?h=Vn(E):v!==0?h=Vn(v):a||(a=o&~e,a!==0&&(h=Vn(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function Wr(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function co(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ho(){var e=$r;return $r<<=1,($r&4194048)===0&&($r=256),e}function fo(){var e=Zr;return Zr<<=1,(Zr&62914560)===0&&(Zr=4194304),e}function pi(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function yi(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function mo(e,i,a,o,h,d){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var E=e.entanglements,b=e.expirationTimes,L=e.hiddenUpdates;for(a=v&~a;0<a;){var G=31-Fe(a),K=1<<G;E[G]=0,b[G]=-1;var z=L[G];if(z!==null)for(L[G]=null,G=0;G<z.length;G++){var B=z[G];B!==null&&(B.lane&=-536870913)}a&=~K}o!==0&&Gn(e,o,0),d!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=d&~(v&~i))}function Gn(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var o=31-Fe(i);e.entangledLanes|=i,e.entanglements[o]=e.entanglements[o]|1073741824|a&4194090}function go(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var o=31-Fe(a),h=1<<o;h&i|e[o]&i&&(e[o]|=i),a&=~h}}function $i(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Gs(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Zi(){var e=nt.p;return e!==0?e:(e=window.event,e===void 0?32:v_(e.type))}function tu(e,i){var a=nt.p;try{return nt.p=e,i()}finally{nt.p=a}}var ee=Math.random().toString(36).slice(2),Se="__reactFiber$"+ee,ge="__reactProps$"+ee,vn="__reactContainer$"+ee,po="__reactEvents$"+ee,Ch="__reactListeners$"+ee,Wi="__reactHandles$"+ee,eu="__reactResources$"+ee,Jr="__reactMarker$"+ee;function Ji(e){delete e[Se],delete e[ge],delete e[po],delete e[Ch],delete e[Wi]}function _i(e){var i=e[Se];if(i)return i;for(var a=e.parentNode;a;){if(i=a[vn]||a[Se]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=r_(e);e!==null;){if(a=e[Se])return a;e=r_(e)}return i}e=a,a=e.parentNode}return null}function Fn(e){if(e=e[Se]||e[vn]){var i=e.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return e}return null}function Qn(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function We(e){var i=e[eu];return i||(i=e[eu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function ce(e){e[Jr]=!0}var yo=new Set,Fs={};function Mn(e,i){vi(e,i),vi(e+"Capture",i)}function vi(e,i){for(Fs[e]=i,e=0;e<i.length;e++)yo.add(i[e])}var nu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),iu={},ts={};function ru(e){return Fr.call(ts,e)?!0:Fr.call(iu,e)?!1:nu.test(e)?ts[e]=!0:(iu[e]=!0,!1)}function tr(e,i,a){if(ru(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function Kn(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function ke(e,i,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+o)}}var es,su;function Ei(e){if(es===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);es=i&&i[1]||"",su=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+es+e+su}var Qs=!1;function Ks(e,i){if(!e||Qs)return"";Qs=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(B){var z=B}Reflect.construct(e,[],K)}else{try{K.call()}catch(B){z=B}e.call(K.prototype)}}else{try{throw Error()}catch(B){z=B}(K=e())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(B){if(B&&z&&typeof B.stack=="string")return[B.stack,z.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=o.DetermineComponentFrameRoot(),v=d[0],E=d[1];if(v&&E){var b=v.split(`
`),L=E.split(`
`);for(h=o=0;o<b.length&&!b[o].includes("DetermineComponentFrameRoot");)o++;for(;h<L.length&&!L[h].includes("DetermineComponentFrameRoot");)h++;if(o===b.length||h===L.length)for(o=b.length-1,h=L.length-1;1<=o&&0<=h&&b[o]!==L[h];)h--;for(;1<=o&&0<=h;o--,h--)if(b[o]!==L[h]){if(o!==1||h!==1)do if(o--,h--,0>h||b[o]!==L[h]){var G=`
`+b[o].replace(" at new "," at ");return e.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",e.displayName)),G}while(1<=o&&0<=h);break}}}finally{Qs=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ei(a):""}function _o(e){switch(e.tag){case 26:case 27:case 5:return Ei(e.type);case 16:return Ei("Lazy");case 13:return Ei("Suspense");case 19:return Ei("SuspenseList");case 0:case 15:return Ks(e.type,!1);case 11:return Ks(e.type.render,!1);case 1:return Ks(e.type,!0);case 31:return Ei("Activity");default:return""}}function Ys(e){try{var i="";do i+=_o(e),e=e.return;while(e);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Je(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function vo(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Dh(e){var i=vo(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),o=""+e[i];if(!e.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){o=""+v,d.call(this,v)}}),Object.defineProperty(e,i,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Xs(e){e._valueTracker||(e._valueTracker=Dh(e))}function Eo(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return e&&(o=vo(e)?e.checked?"true":"false":e.value),e=o,e!==a?(i.setValue(e),!0):!1}function ns(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Nh=/[\n"\\]/g;function pe(e){return e.replace(Nh,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function un(e,i,a,o,h,d,v,E){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),i!=null?v==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+Je(i)):e.value!==""+Je(i)&&(e.value=""+Je(i)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),i!=null?er(e,v,Je(i)):a!=null?er(e,v,Je(a)):o!=null&&e.removeAttribute("value"),h==null&&d!=null&&(e.defaultChecked=!!d),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+Je(E):e.removeAttribute("name")}function is(e,i,a,o,h,d,v,E){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null))return;a=a!=null?""+Je(a):"",i=i!=null?""+Je(i):a,E||i===e.value||(e.value=i),e.defaultValue=i}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=E?e.checked:!!o,e.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v)}function er(e,i,a){i==="number"&&ns(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Ti(e,i,a,o){if(e=e.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=i.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&o&&(e[a].defaultSelected=!0)}else{for(a=""+Je(a),i=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,o&&(e[h].defaultSelected=!0);return}i!==null||e[h].disabled||(i=e[h])}i!==null&&(i.selected=!0)}}function Qt(e,i,a){if(i!=null&&(i=""+Je(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+Je(a):""}function rs(e,i,a,o){if(i==null){if(o!=null){if(a!=null)throw Error(s(92));if(se(o)){if(1<o.length)throw Error(s(93));o=o[0]}a=o}a==null&&(a=""),i=a}a=Je(i),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o)}function En(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var ss=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function au(e,i,a){var o=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":o?e.setProperty(i,a):typeof a!="number"||a===0||ss.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function To(e,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var h in i)o=i[h],i.hasOwnProperty(h)&&a[h]!==o&&au(e,h,o)}else for(var d in i)i.hasOwnProperty(d)&&au(e,d,i[d])}function Ao(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Vh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $s(e){return Vh.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Ai=null;function Tn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Si=null,wi=null;function So(e){var i=Fn(e);if(i&&(e=i.stateNode)){var a=e[ge]||null;t:switch(e=i.stateNode,i.type){case"input":if(un(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+pe(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==e&&o.form===e.form){var h=o[ge]||null;if(!h)throw Error(s(90));un(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)o=a[i],o.form===e.form&&Eo(o)}break t;case"textarea":Qt(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&Ti(e,!!a.multiple,i,!1)}}}var Yn=!1;function ou(e,i,a){if(Yn)return e(i,a);Yn=!0;try{var o=e(i);return o}finally{if(Yn=!1,(Si!==null||wi!==null)&&(tc(),Si&&(i=Si,e=wi,wi=Si=null,So(i),e)))for(i=0;i<e.length;i++)So(e[i])}}function as(e,i){var a=e.stateNode;if(a===null)return null;var o=a[ge]||null;if(o===null)return null;a=o[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),An=!1;if(xn)try{var os={};Object.defineProperty(os,"passive",{get:function(){An=!0}}),window.addEventListener("test",os,os),window.removeEventListener("test",os,os)}catch{An=!1}var Xn=null,nr=null,bi=null;function wo(){if(bi)return bi;var e,i=nr,a=i.length,o,h="value"in Xn?Xn.value:Xn.textContent,d=h.length;for(e=0;e<a&&i[e]===h[e];e++);var v=a-e;for(o=1;o<=v&&i[a-o]===h[d-o];o++);return bi=h.slice(e,1<o?1-o:void 0)}function $n(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function Zn(){return!0}function bo(){return!1}function Ne(e){function i(a,o,h,d,v){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(a=e[E],this[E]=a?a(d):d[E]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Zn:bo,this.isPropagationStopped=bo,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Zn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Zn)},persist:function(){},isPersistent:Zn}),i}var jt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zs=Ne(jt),ls=T({},jt,{view:0,detail:0}),lu=Ne(ls),Ws,Js,Wn,us=T({},ls,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fs,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Wn&&(Wn&&e.type==="mousemove"?(Ws=e.screenX-Wn.screenX,Js=e.screenY-Wn.screenY):Js=Ws=0,Wn=e),Ws)},movementY:function(e){return"movementY"in e?e.movementY:Js}}),Sn=Ne(us),uu=T({},us,{dataTransfer:0}),Mh=Ne(uu),cs=T({},ls,{relatedTarget:0}),ta=Ne(cs),Ro=T({},jt,{animationName:0,elapsedTime:0,pseudoElement:0}),ea=Ne(Ro),cu=T({},jt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),na=Ne(cu),xh=T({},jt,{data:0}),Io=Ne(xh),hs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Co(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=fu[e])?!!i[e]:!1}function fs(){return Co}var du=T({},ls,{key:function(e){if(e.key){var i=hs[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=$n(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?hu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fs,charCode:function(e){return e.type==="keypress"?$n(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?$n(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ia=Ne(du),mu=T({},us,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Do=Ne(mu),Ri=T({},ls,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fs}),gu=Ne(Ri),pu=T({},jt,{propertyName:0,elapsedTime:0,pseudoElement:0}),yu=Ne(pu),_u=T({},us,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ra=Ne(_u),tn=T({},jt,{newState:0,oldState:0}),vu=Ne(tn),Eu=[9,13,27,32],Jn=xn&&"CompositionEvent"in window,u=null;xn&&"documentMode"in document&&(u=document.documentMode);var m=xn&&"TextEvent"in window&&!u,_=xn&&(!Jn||u&&8<u&&11>=u),A=" ",U=!1;function j(e,i){switch(e){case"keyup":return Eu.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tt(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Vt=!1;function we(e,i){switch(e){case"compositionend":return tt(i);case"keypress":return i.which!==32?null:(U=!0,A);case"textInput":return e=i.data,e===A&&U?null:e;default:return null}}function Mt(e,i){if(Vt)return e==="compositionend"||!Jn&&j(e,i)?(e=wo(),bi=nr=Xn=null,Vt=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return _&&i.locale!=="ko"?null:i.data;default:return null}}var Oe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function be(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!Oe[e.type]:i==="textarea"}function Ii(e,i,a,o){Si?wi?wi.push(o):wi=[o]:Si=o,i=ac(i,"onChange"),0<i.length&&(a=new Zs("onChange","change",null,a,o),e.push({event:a,listeners:i}))}var Le=null,ti=null;function No(e){Yy(e,0)}function Tu(e){var i=Qn(e);if(Eo(i))return e}function gg(e,i){if(e==="change")return i}var pg=!1;if(xn){var Ph;if(xn){var Uh="oninput"in document;if(!Uh){var yg=document.createElement("div");yg.setAttribute("oninput","return;"),Uh=typeof yg.oninput=="function"}Ph=Uh}else Ph=!1;pg=Ph&&(!document.documentMode||9<document.documentMode)}function _g(){Le&&(Le.detachEvent("onpropertychange",vg),ti=Le=null)}function vg(e){if(e.propertyName==="value"&&Tu(ti)){var i=[];Ii(i,ti,e,Tn(e)),ou(No,i)}}function qT(e,i,a){e==="focusin"?(_g(),Le=i,ti=a,Le.attachEvent("onpropertychange",vg)):e==="focusout"&&_g()}function HT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Tu(ti)}function GT(e,i){if(e==="click")return Tu(i)}function FT(e,i){if(e==="input"||e==="change")return Tu(i)}function QT(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var cn=typeof Object.is=="function"?Object.is:QT;function Oo(e,i){if(cn(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!Fr.call(i,h)||!cn(e[h],i[h]))return!1}return!0}function Eg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Tg(e,i){var a=Eg(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=i&&o>=i)return{node:a,offset:i-e};e=o}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Eg(a)}}function Ag(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?Ag(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Sg(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=ns(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=ns(e.document)}return i}function kh(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var KT=xn&&"documentMode"in document&&11>=document.documentMode,sa=null,Lh=null,Vo=null,zh=!1;function wg(e,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;zh||sa==null||sa!==ns(o)||(o=sa,"selectionStart"in o&&kh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Vo&&Oo(Vo,o)||(Vo=o,o=ac(Lh,"onSelect"),0<o.length&&(i=new Zs("onSelect","select",null,i,a),e.push({event:i,listeners:o}),i.target=sa)))}function ds(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var aa={animationend:ds("Animation","AnimationEnd"),animationiteration:ds("Animation","AnimationIteration"),animationstart:ds("Animation","AnimationStart"),transitionrun:ds("Transition","TransitionRun"),transitionstart:ds("Transition","TransitionStart"),transitioncancel:ds("Transition","TransitionCancel"),transitionend:ds("Transition","TransitionEnd")},Bh={},bg={};xn&&(bg=document.createElement("div").style,"AnimationEvent"in window||(delete aa.animationend.animation,delete aa.animationiteration.animation,delete aa.animationstart.animation),"TransitionEvent"in window||delete aa.transitionend.transition);function ms(e){if(Bh[e])return Bh[e];if(!aa[e])return e;var i=aa[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in bg)return Bh[e]=i[a];return e}var Rg=ms("animationend"),Ig=ms("animationiteration"),Cg=ms("animationstart"),YT=ms("transitionrun"),XT=ms("transitionstart"),$T=ms("transitioncancel"),Dg=ms("transitionend"),Ng=new Map,jh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");jh.push("scrollEnd");function Pn(e,i){Ng.set(e,i),Mn(i,[e])}var Og=new WeakMap;function wn(e,i){if(typeof e=="object"&&e!==null){var a=Og.get(e);return a!==void 0?a:(i={value:e,source:i,stack:Ys(i)},Og.set(e,i),i)}return{value:e,source:i,stack:Ys(i)}}var bn=[],oa=0,qh=0;function Au(){for(var e=oa,i=qh=oa=0;i<e;){var a=bn[i];bn[i++]=null;var o=bn[i];bn[i++]=null;var h=bn[i];bn[i++]=null;var d=bn[i];if(bn[i++]=null,o!==null&&h!==null){var v=o.pending;v===null?h.next=h:(h.next=v.next,v.next=h),o.pending=h}d!==0&&Vg(a,h,d)}}function Su(e,i,a,o){bn[oa++]=e,bn[oa++]=i,bn[oa++]=a,bn[oa++]=o,qh|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function Hh(e,i,a,o){return Su(e,i,a,o),wu(e)}function la(e,i){return Su(e,null,null,i),wu(e)}function Vg(e,i,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var h=!1,d=e.return;d!==null;)d.childLanes|=a,o=d.alternate,o!==null&&(o.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(h=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,h&&i!==null&&(h=31-Fe(a),e=d.hiddenUpdates,o=e[h],o===null?e[h]=[i]:o.push(i),i.lane=a|536870912),d):null}function wu(e){if(50<il)throw il=0,$f=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var ua={};function ZT(e,i,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hn(e,i,a,o){return new ZT(e,i,a,o)}function Gh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ci(e,i){var a=e.alternate;return a===null?(a=hn(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Mg(e,i){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function bu(e,i,a,o,h,d){var v=0;if(o=e,typeof e=="function")Gh(e)&&(v=1);else if(typeof e=="string")v=JA(e,a,ct.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case C:return e=hn(31,a,i,h),e.elementType=C,e.lanes=d,e;case Y:return gs(a.children,h,d,i);case et:v=8,h|=24;break;case $:return e=hn(12,a,i,h|2),e.elementType=$,e.lanes=d,e;case At:return e=hn(13,a,i,h),e.elementType=At,e.lanes=d,e;case Lt:return e=hn(19,a,i,h),e.elementType=Lt,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case _t:case ft:v=10;break t;case mt:v=9;break t;case Ut:v=11;break t;case V:v=14;break t;case S:v=16,o=null;break t}v=29,a=Error(s(130,e===null?"null":typeof e,"")),o=null}return i=hn(v,a,i,h),i.elementType=e,i.type=o,i.lanes=d,i}function gs(e,i,a,o){return e=hn(7,e,o,i),e.lanes=a,e}function Fh(e,i,a){return e=hn(6,e,null,i),e.lanes=a,e}function Qh(e,i,a){return i=hn(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var ca=[],ha=0,Ru=null,Iu=0,Rn=[],In=0,ps=null,Di=1,Ni="";function ys(e,i){ca[ha++]=Iu,ca[ha++]=Ru,Ru=e,Iu=i}function xg(e,i,a){Rn[In++]=Di,Rn[In++]=Ni,Rn[In++]=ps,ps=e;var o=Di;e=Ni;var h=32-Fe(o)-1;o&=~(1<<h),a+=1;var d=32-Fe(i)+h;if(30<d){var v=h-h%5;d=(o&(1<<v)-1).toString(32),o>>=v,h-=v,Di=1<<32-Fe(i)+h|a<<h|o,Ni=d+e}else Di=1<<d|a<<h|o,Ni=e}function Kh(e){e.return!==null&&(ys(e,1),xg(e,1,0))}function Yh(e){for(;e===Ru;)Ru=ca[--ha],ca[ha]=null,Iu=ca[--ha],ca[ha]=null;for(;e===ps;)ps=Rn[--In],Rn[In]=null,Ni=Rn[--In],Rn[In]=null,Di=Rn[--In],Rn[In]=null}var en=null,oe=null,Bt=!1,_s=null,ei=!1,Xh=Error(s(519));function vs(e){var i=Error(s(418,""));throw Po(wn(i,e)),Xh}function Pg(e){var i=e.stateNode,a=e.type,o=e.memoizedProps;switch(i[Se]=e,i[ge]=o,a){case"dialog":Ct("cancel",i),Ct("close",i);break;case"iframe":case"object":case"embed":Ct("load",i);break;case"video":case"audio":for(a=0;a<sl.length;a++)Ct(sl[a],i);break;case"source":Ct("error",i);break;case"img":case"image":case"link":Ct("error",i),Ct("load",i);break;case"details":Ct("toggle",i);break;case"input":Ct("invalid",i),is(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),Xs(i);break;case"select":Ct("invalid",i);break;case"textarea":Ct("invalid",i),rs(i,o.value,o.defaultValue,o.children),Xs(i)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||o.suppressHydrationWarning===!0||Wy(i.textContent,a)?(o.popover!=null&&(Ct("beforetoggle",i),Ct("toggle",i)),o.onScroll!=null&&Ct("scroll",i),o.onScrollEnd!=null&&Ct("scrollend",i),o.onClick!=null&&(i.onclick=oc),i=!0):i=!1,i||vs(e)}function Ug(e){for(en=e.return;en;)switch(en.tag){case 5:case 13:ei=!1;return;case 27:case 3:ei=!0;return;default:en=en.return}}function Mo(e){if(e!==en)return!1;if(!Bt)return Ug(e),Bt=!0,!1;var i=e.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||fd(e.type,e.memoizedProps)),a=!a),a&&oe&&vs(e),Ug(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));t:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(i===0){oe=kn(e.nextSibling);break t}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;e=e.nextSibling}oe=null}}else i===27?(i=oe,_r(e.type)?(e=pd,pd=null,oe=e):oe=i):oe=en?kn(e.stateNode.nextSibling):null;return!0}function xo(){oe=en=null,Bt=!1}function kg(){var e=_s;return e!==null&&(sn===null?sn=e:sn.push.apply(sn,e),_s=null),e}function Po(e){_s===null?_s=[e]:_s.push(e)}var $h=W(null),Es=null,Oi=null;function ir(e,i,a){J($h,i._currentValue),i._currentValue=a}function Vi(e){e._currentValue=$h.current,it($h)}function Zh(e,i,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),e===a)break;e=e.return}}function Wh(e,i,a,o){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var d=h.dependencies;if(d!==null){var v=h.child;d=d.firstContext;t:for(;d!==null;){var E=d;d=h;for(var b=0;b<i.length;b++)if(E.context===i[b]){d.lanes|=a,E=d.alternate,E!==null&&(E.lanes|=a),Zh(d.return,a,e),o||(v=null);break t}d=E.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),Zh(v,a,e),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===e){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function Uo(e,i,a,o){e=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var E=h.type;cn(h.pendingProps.value,v.value)||(e!==null?e.push(E):e=[E])}}else if(h===De.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(hl):e=[hl])}h=h.return}e!==null&&Wh(i,e,a,o),i.flags|=262144}function Cu(e){for(e=e.firstContext;e!==null;){if(!cn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ts(e){Es=e,Oi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Qe(e){return Lg(Es,e)}function Du(e,i){return Es===null&&Ts(e),Lg(e,i)}function Lg(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Oi===null){if(e===null)throw Error(s(308));Oi=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else Oi=Oi.next=i;return a}var WT=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},JT=r.unstable_scheduleCallback,tA=r.unstable_NormalPriority,Re={$$typeof:ft,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jh(){return{controller:new WT,data:new Map,refCount:0}}function ko(e){e.refCount--,e.refCount===0&&JT(tA,function(){e.controller.abort()})}var Lo=null,tf=0,fa=0,da=null;function eA(e,i){if(Lo===null){var a=Lo=[];tf=0,fa=id(),da={status:"pending",value:void 0,then:function(o){a.push(o)}}}return tf++,i.then(zg,zg),i}function zg(){if(--tf===0&&Lo!==null){da!==null&&(da.status="fulfilled");var e=Lo;Lo=null,fa=0,da=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function nA(e,i){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){o.status="fulfilled",o.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var Bg=H.S;H.S=function(e,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&eA(e,i),Bg!==null&&Bg(e,i)};var As=W(null);function ef(){var e=As.current;return e!==null?e:Wt.pooledCache}function Nu(e,i){i===null?J(As,As.current):J(As,i.pool)}function jg(){var e=ef();return e===null?null:{parent:Re._currentValue,pool:e}}var zo=Error(s(460)),qg=Error(s(474)),Ou=Error(s(542)),nf={then:function(){}};function Hg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Vu(){}function Gg(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(Vu,Vu),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Qg(e),e;default:if(typeof i.status=="string")i.then(Vu,Vu);else{if(e=Wt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(o){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=o}},function(o){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Qg(e),e}throw Bo=i,zo}}var Bo=null;function Fg(){if(Bo===null)throw Error(s(459));var e=Bo;return Bo=null,e}function Qg(e){if(e===zo||e===Ou)throw Error(s(483))}var rr=!1;function rf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function sf(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function sr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ar(e,i,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Gt&2)!==0){var h=o.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),o.pending=i,i=wu(e),Vg(e,null,a),i}return Su(e,o,i,a),wu(e)}function jo(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,go(e,a)}}function af(e,i){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var of=!1;function qo(){if(of){var e=da;if(e!==null)throw e}}function Ho(e,i,a,o){of=!1;var h=e.updateQueue;rr=!1;var d=h.firstBaseUpdate,v=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var b=E,L=b.next;b.next=null,v===null?d=L:v.next=L,v=b;var G=e.alternate;G!==null&&(G=G.updateQueue,E=G.lastBaseUpdate,E!==v&&(E===null?G.firstBaseUpdate=L:E.next=L,G.lastBaseUpdate=b))}if(d!==null){var K=h.baseState;v=0,G=L=b=null,E=d;do{var z=E.lane&-536870913,B=z!==E.lane;if(B?(xt&z)===z:(o&z)===z){z!==0&&z===fa&&(of=!0),G!==null&&(G=G.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var yt=e,ht=E;z=i;var Xt=a;switch(ht.tag){case 1:if(yt=ht.payload,typeof yt=="function"){K=yt.call(Xt,K,z);break t}K=yt;break t;case 3:yt.flags=yt.flags&-65537|128;case 0:if(yt=ht.payload,z=typeof yt=="function"?yt.call(Xt,K,z):yt,z==null)break t;K=T({},K,z);break t;case 2:rr=!0}}z=E.callback,z!==null&&(e.flags|=64,B&&(e.flags|=8192),B=h.callbacks,B===null?h.callbacks=[z]:B.push(z))}else B={lane:z,tag:E.tag,payload:E.payload,callback:E.callback,next:null},G===null?(L=G=B,b=K):G=G.next=B,v|=z;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;B=E,E=B.next,B.next=null,h.lastBaseUpdate=B,h.shared.pending=null}}while(!0);G===null&&(b=K),h.baseState=b,h.firstBaseUpdate=L,h.lastBaseUpdate=G,d===null&&(h.shared.lanes=0),mr|=v,e.lanes=v,e.memoizedState=K}}function Kg(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function Yg(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Kg(a[e],i)}var ma=W(null),Mu=W(0);function Xg(e,i){e=zi,J(Mu,e),J(ma,i),zi=e|i.baseLanes}function lf(){J(Mu,zi),J(ma,ma.current)}function uf(){zi=Mu.current,it(ma),it(Mu)}var or=0,wt=null,Kt=null,ye=null,xu=!1,ga=!1,Ss=!1,Pu=0,Go=0,pa=null,iA=0;function he(){throw Error(s(321))}function cf(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!cn(e[a],i[a]))return!1;return!0}function hf(e,i,a,o,h,d){return or=d,wt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,H.H=e===null||e.memoizedState===null?Vp:Mp,Ss=!1,d=a(o,h),Ss=!1,ga&&(d=Zg(i,a,o,h)),$g(e),d}function $g(e){H.H=ju;var i=Kt!==null&&Kt.next!==null;if(or=0,ye=Kt=wt=null,xu=!1,Go=0,pa=null,i)throw Error(s(300));e===null||Ve||(e=e.dependencies,e!==null&&Cu(e)&&(Ve=!0))}function Zg(e,i,a,o){wt=e;var h=0;do{if(ga&&(pa=null),Go=0,ga=!1,25<=h)throw Error(s(301));if(h+=1,ye=Kt=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}H.H=cA,d=i(a,o)}while(ga);return d}function rA(){var e=H.H,i=e.useState()[0];return i=typeof i.then=="function"?Fo(i):i,e=e.useState()[0],(Kt!==null?Kt.memoizedState:null)!==e&&(wt.flags|=1024),i}function ff(){var e=Pu!==0;return Pu=0,e}function df(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function mf(e){if(xu){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}xu=!1}or=0,ye=Kt=wt=null,ga=!1,Go=Pu=0,pa=null}function nn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ye===null?wt.memoizedState=ye=e:ye=ye.next=e,ye}function _e(){if(Kt===null){var e=wt.alternate;e=e!==null?e.memoizedState:null}else e=Kt.next;var i=ye===null?wt.memoizedState:ye.next;if(i!==null)ye=i,Kt=e;else{if(e===null)throw wt.alternate===null?Error(s(467)):Error(s(310));Kt=e,e={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},ye===null?wt.memoizedState=ye=e:ye=ye.next=e}return ye}function gf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Fo(e){var i=Go;return Go+=1,pa===null&&(pa=[]),e=Gg(pa,e,i),i=wt,(ye===null?i.memoizedState:ye.next)===null&&(i=i.alternate,H.H=i===null||i.memoizedState===null?Vp:Mp),e}function Uu(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Fo(e);if(e.$$typeof===ft)return Qe(e)}throw Error(s(438,String(e)))}function pf(e){var i=null,a=wt.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var o=wt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=gf(),wt.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),o=0;o<e;o++)a[o]=O;return i.index++,a}function Mi(e,i){return typeof i=="function"?i(e):i}function ku(e){var i=_e();return yf(i,Kt,e)}function yf(e,i,a){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var h=e.baseQueue,d=o.pending;if(d!==null){if(h!==null){var v=h.next;h.next=d.next,d.next=v}i.baseQueue=h=d,o.pending=null}if(d=e.baseState,h===null)e.memoizedState=d;else{i=h.next;var E=v=null,b=null,L=i,G=!1;do{var K=L.lane&-536870913;if(K!==L.lane?(xt&K)===K:(or&K)===K){var z=L.revertLane;if(z===0)b!==null&&(b=b.next={lane:0,revertLane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),K===fa&&(G=!0);else if((or&z)===z){L=L.next,z===fa&&(G=!0);continue}else K={lane:0,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},b===null?(E=b=K,v=d):b=b.next=K,wt.lanes|=z,mr|=z;K=L.action,Ss&&a(d,K),d=L.hasEagerState?L.eagerState:a(d,K)}else z={lane:K,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},b===null?(E=b=z,v=d):b=b.next=z,wt.lanes|=K,mr|=K;L=L.next}while(L!==null&&L!==i);if(b===null?v=d:b.next=E,!cn(d,e.memoizedState)&&(Ve=!0,G&&(a=da,a!==null)))throw a;e.memoizedState=d,e.baseState=v,e.baseQueue=b,o.lastRenderedState=d}return h===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function _f(e){var i=_e(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var o=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do d=e(d,v.action),v=v.next;while(v!==h);cn(d,i.memoizedState)||(Ve=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,o]}function Wg(e,i,a){var o=wt,h=_e(),d=Bt;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!cn((Kt||h).memoizedState,a);v&&(h.memoizedState=a,Ve=!0),h=h.queue;var E=ep.bind(null,o,h,e);if(Qo(2048,8,E,[e]),h.getSnapshot!==i||v||ye!==null&&ye.memoizedState.tag&1){if(o.flags|=2048,ya(9,Lu(),tp.bind(null,o,h,a,i),null),Wt===null)throw Error(s(349));d||(or&124)!==0||Jg(o,i,a)}return a}function Jg(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=wt.updateQueue,i===null?(i=gf(),wt.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function tp(e,i,a,o){i.value=a,i.getSnapshot=o,np(i)&&ip(e)}function ep(e,i,a){return a(function(){np(i)&&ip(e)})}function np(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!cn(e,a)}catch{return!0}}function ip(e){var i=la(e,2);i!==null&&pn(i,e,2)}function vf(e){var i=nn();if(typeof e=="function"){var a=e;if(e=a(),Ss){ln(!0);try{a()}finally{ln(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mi,lastRenderedState:e},i}function rp(e,i,a,o){return e.baseState=a,yf(e,Kt,typeof o=="function"?o:Mi)}function sA(e,i,a,o,h){if(Bu(e))throw Error(s(485));if(e=i.action,e!==null){var d={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};H.T!==null?a(!0):d.isTransition=!1,o(d),a=i.pending,a===null?(d.next=i.pending=d,sp(i,d)):(d.next=a.next,i.pending=a.next=d)}}function sp(e,i){var a=i.action,o=i.payload,h=e.state;if(i.isTransition){var d=H.T,v={};H.T=v;try{var E=a(h,o),b=H.S;b!==null&&b(v,E),ap(e,i,E)}catch(L){Ef(e,i,L)}finally{H.T=d}}else try{d=a(h,o),ap(e,i,d)}catch(L){Ef(e,i,L)}}function ap(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){op(e,i,o)},function(o){return Ef(e,i,o)}):op(e,i,a)}function op(e,i,a){i.status="fulfilled",i.value=a,lp(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,sp(e,a)))}function Ef(e,i,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=a,lp(i),i=i.next;while(i!==o)}e.action=null}function lp(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function up(e,i){return i}function cp(e,i){if(Bt){var a=Wt.formState;if(a!==null){t:{var o=wt;if(Bt){if(oe){e:{for(var h=oe,d=ei;h.nodeType!==8;){if(!d){h=null;break e}if(h=kn(h.nextSibling),h===null){h=null;break e}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){oe=kn(h.nextSibling),o=h.data==="F!";break t}}vs(o)}o=!1}o&&(i=a[0])}}return a=nn(),a.memoizedState=a.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:up,lastRenderedState:i},a.queue=o,a=Dp.bind(null,wt,o),o.dispatch=a,o=vf(!1),d=bf.bind(null,wt,!1,o.queue),o=nn(),h={state:i,dispatch:null,action:e,pending:null},o.queue=h,a=sA.bind(null,wt,h,d,a),h.dispatch=a,o.memoizedState=e,[i,a,!1]}function hp(e){var i=_e();return fp(i,Kt,e)}function fp(e,i,a){if(i=yf(e,i,up)[0],e=ku(Mi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=Fo(i)}catch(v){throw v===zo?Ou:v}else o=i;i=_e();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(wt.flags|=2048,ya(9,Lu(),aA.bind(null,h,a),null)),[o,d,e]}function aA(e,i){e.action=i}function dp(e){var i=_e(),a=Kt;if(a!==null)return fp(i,a,e);_e(),i=i.memoizedState,a=_e();var o=a.queue.dispatch;return a.memoizedState=e,[i,o,!1]}function ya(e,i,a,o){return e={tag:e,create:a,deps:o,inst:i,next:null},i=wt.updateQueue,i===null&&(i=gf(),wt.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,i.lastEffect=e),e}function Lu(){return{destroy:void 0,resource:void 0}}function mp(){return _e().memoizedState}function zu(e,i,a,o){var h=nn();o=o===void 0?null:o,wt.flags|=e,h.memoizedState=ya(1|i,Lu(),a,o)}function Qo(e,i,a,o){var h=_e();o=o===void 0?null:o;var d=h.memoizedState.inst;Kt!==null&&o!==null&&cf(o,Kt.memoizedState.deps)?h.memoizedState=ya(i,d,a,o):(wt.flags|=e,h.memoizedState=ya(1|i,d,a,o))}function gp(e,i){zu(8390656,8,e,i)}function pp(e,i){Qo(2048,8,e,i)}function yp(e,i){return Qo(4,2,e,i)}function _p(e,i){return Qo(4,4,e,i)}function vp(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function Ep(e,i,a){a=a!=null?a.concat([e]):null,Qo(4,4,vp.bind(null,i,e),a)}function Tf(){}function Tp(e,i){var a=_e();i=i===void 0?null:i;var o=a.memoizedState;return i!==null&&cf(i,o[1])?o[0]:(a.memoizedState=[e,i],e)}function Ap(e,i){var a=_e();i=i===void 0?null:i;var o=a.memoizedState;if(i!==null&&cf(i,o[1]))return o[0];if(o=e(),Ss){ln(!0);try{e()}finally{ln(!1)}}return a.memoizedState=[o,i],o}function Af(e,i,a){return a===void 0||(or&1073741824)!==0?e.memoizedState=i:(e.memoizedState=a,e=by(),wt.lanes|=e,mr|=e,a)}function Sp(e,i,a,o){return cn(a,i)?a:ma.current!==null?(e=Af(e,a,o),cn(e,i)||(Ve=!0),e):(or&42)===0?(Ve=!0,e.memoizedState=a):(e=by(),wt.lanes|=e,mr|=e,i)}function wp(e,i,a,o,h){var d=nt.p;nt.p=d!==0&&8>d?d:8;var v=H.T,E={};H.T=E,bf(e,!1,i,a);try{var b=h(),L=H.S;if(L!==null&&L(E,b),b!==null&&typeof b=="object"&&typeof b.then=="function"){var G=nA(b,o);Ko(e,i,G,gn(e))}else Ko(e,i,o,gn(e))}catch(K){Ko(e,i,{then:function(){},status:"rejected",reason:K},gn())}finally{nt.p=d,H.T=v}}function oA(){}function Sf(e,i,a,o){if(e.tag!==5)throw Error(s(476));var h=bp(e).queue;wp(e,h,i,lt,a===null?oA:function(){return Rp(e),a(o)})}function bp(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:lt,baseState:lt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mi,lastRenderedState:lt},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mi,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function Rp(e){var i=bp(e).next.queue;Ko(e,i,{},gn())}function wf(){return Qe(hl)}function Ip(){return _e().memoizedState}function Cp(){return _e().memoizedState}function lA(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=gn();e=sr(a);var o=ar(i,e,a);o!==null&&(pn(o,i,a),jo(o,i,a)),i={cache:Jh()},e.payload=i;return}i=i.return}}function uA(e,i,a){var o=gn();a={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Bu(e)?Np(i,a):(a=Hh(e,i,a,o),a!==null&&(pn(a,e,o),Op(a,i,o)))}function Dp(e,i,a){var o=gn();Ko(e,i,a,o)}function Ko(e,i,a,o){var h={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Bu(e))Np(i,h);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var v=i.lastRenderedState,E=d(v,a);if(h.hasEagerState=!0,h.eagerState=E,cn(E,v))return Su(e,i,h,0),Wt===null&&Au(),!1}catch{}finally{}if(a=Hh(e,i,h,o),a!==null)return pn(a,e,o),Op(a,i,o),!0}return!1}function bf(e,i,a,o){if(o={lane:2,revertLane:id(),action:o,hasEagerState:!1,eagerState:null,next:null},Bu(e)){if(i)throw Error(s(479))}else i=Hh(e,a,o,2),i!==null&&pn(i,e,2)}function Bu(e){var i=e.alternate;return e===wt||i!==null&&i===wt}function Np(e,i){ga=xu=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function Op(e,i,a){if((a&4194048)!==0){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,go(e,a)}}var ju={readContext:Qe,use:Uu,useCallback:he,useContext:he,useEffect:he,useImperativeHandle:he,useLayoutEffect:he,useInsertionEffect:he,useMemo:he,useReducer:he,useRef:he,useState:he,useDebugValue:he,useDeferredValue:he,useTransition:he,useSyncExternalStore:he,useId:he,useHostTransitionStatus:he,useFormState:he,useActionState:he,useOptimistic:he,useMemoCache:he,useCacheRefresh:he},Vp={readContext:Qe,use:Uu,useCallback:function(e,i){return nn().memoizedState=[e,i===void 0?null:i],e},useContext:Qe,useEffect:gp,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,zu(4194308,4,vp.bind(null,i,e),a)},useLayoutEffect:function(e,i){return zu(4194308,4,e,i)},useInsertionEffect:function(e,i){zu(4,2,e,i)},useMemo:function(e,i){var a=nn();i=i===void 0?null:i;var o=e();if(Ss){ln(!0);try{e()}finally{ln(!1)}}return a.memoizedState=[o,i],o},useReducer:function(e,i,a){var o=nn();if(a!==void 0){var h=a(i);if(Ss){ln(!0);try{a(i)}finally{ln(!1)}}}else h=i;return o.memoizedState=o.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},o.queue=e,e=e.dispatch=uA.bind(null,wt,e),[o.memoizedState,e]},useRef:function(e){var i=nn();return e={current:e},i.memoizedState=e},useState:function(e){e=vf(e);var i=e.queue,a=Dp.bind(null,wt,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:Tf,useDeferredValue:function(e,i){var a=nn();return Af(a,e,i)},useTransition:function(){var e=vf(!1);return e=wp.bind(null,wt,e.queue,!0,!1),nn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var o=wt,h=nn();if(Bt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),Wt===null)throw Error(s(349));(xt&124)!==0||Jg(o,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,gp(ep.bind(null,o,d,e),[e]),o.flags|=2048,ya(9,Lu(),tp.bind(null,o,d,a,i),null),a},useId:function(){var e=nn(),i=Wt.identifierPrefix;if(Bt){var a=Ni,o=Di;a=(o&~(1<<32-Fe(o)-1)).toString(32)+a,i="«"+i+"R"+a,a=Pu++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=iA++,i="«"+i+"r"+a.toString(32)+"»";return e.memoizedState=i},useHostTransitionStatus:wf,useFormState:cp,useActionState:cp,useOptimistic:function(e){var i=nn();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=bf.bind(null,wt,!0,a),a.dispatch=i,[e,i]},useMemoCache:pf,useCacheRefresh:function(){return nn().memoizedState=lA.bind(null,wt)}},Mp={readContext:Qe,use:Uu,useCallback:Tp,useContext:Qe,useEffect:pp,useImperativeHandle:Ep,useInsertionEffect:yp,useLayoutEffect:_p,useMemo:Ap,useReducer:ku,useRef:mp,useState:function(){return ku(Mi)},useDebugValue:Tf,useDeferredValue:function(e,i){var a=_e();return Sp(a,Kt.memoizedState,e,i)},useTransition:function(){var e=ku(Mi)[0],i=_e().memoizedState;return[typeof e=="boolean"?e:Fo(e),i]},useSyncExternalStore:Wg,useId:Ip,useHostTransitionStatus:wf,useFormState:hp,useActionState:hp,useOptimistic:function(e,i){var a=_e();return rp(a,Kt,e,i)},useMemoCache:pf,useCacheRefresh:Cp},cA={readContext:Qe,use:Uu,useCallback:Tp,useContext:Qe,useEffect:pp,useImperativeHandle:Ep,useInsertionEffect:yp,useLayoutEffect:_p,useMemo:Ap,useReducer:_f,useRef:mp,useState:function(){return _f(Mi)},useDebugValue:Tf,useDeferredValue:function(e,i){var a=_e();return Kt===null?Af(a,e,i):Sp(a,Kt.memoizedState,e,i)},useTransition:function(){var e=_f(Mi)[0],i=_e().memoizedState;return[typeof e=="boolean"?e:Fo(e),i]},useSyncExternalStore:Wg,useId:Ip,useHostTransitionStatus:wf,useFormState:dp,useActionState:dp,useOptimistic:function(e,i){var a=_e();return Kt!==null?rp(a,Kt,e,i):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:pf,useCacheRefresh:Cp},_a=null,Yo=0;function qu(e){var i=Yo;return Yo+=1,_a===null&&(_a=[]),Gg(_a,e,i)}function Xo(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function Hu(e,i){throw i.$$typeof===w?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function xp(e){var i=e._init;return i(e._payload)}function Pp(e){function i(x,N){if(e){var k=x.deletions;k===null?(x.deletions=[N],x.flags|=16):k.push(N)}}function a(x,N){if(!e)return null;for(;N!==null;)i(x,N),N=N.sibling;return null}function o(x){for(var N=new Map;x!==null;)x.key!==null?N.set(x.key,x):N.set(x.index,x),x=x.sibling;return N}function h(x,N){return x=Ci(x,N),x.index=0,x.sibling=null,x}function d(x,N,k){return x.index=k,e?(k=x.alternate,k!==null?(k=k.index,k<N?(x.flags|=67108866,N):k):(x.flags|=67108866,N)):(x.flags|=1048576,N)}function v(x){return e&&x.alternate===null&&(x.flags|=67108866),x}function E(x,N,k,F){return N===null||N.tag!==6?(N=Fh(k,x.mode,F),N.return=x,N):(N=h(N,k),N.return=x,N)}function b(x,N,k,F){var at=k.type;return at===Y?G(x,N,k.props.children,F,k.key):N!==null&&(N.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===S&&xp(at)===N.type)?(N=h(N,k.props),Xo(N,k),N.return=x,N):(N=bu(k.type,k.key,k.props,null,x.mode,F),Xo(N,k),N.return=x,N)}function L(x,N,k,F){return N===null||N.tag!==4||N.stateNode.containerInfo!==k.containerInfo||N.stateNode.implementation!==k.implementation?(N=Qh(k,x.mode,F),N.return=x,N):(N=h(N,k.children||[]),N.return=x,N)}function G(x,N,k,F,at){return N===null||N.tag!==7?(N=gs(k,x.mode,F,at),N.return=x,N):(N=h(N,k),N.return=x,N)}function K(x,N,k){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=Fh(""+N,x.mode,k),N.return=x,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case R:return k=bu(N.type,N.key,N.props,null,x.mode,k),Xo(k,N),k.return=x,k;case q:return N=Qh(N,x.mode,k),N.return=x,N;case S:var F=N._init;return N=F(N._payload),K(x,N,k)}if(se(N)||P(N))return N=gs(N,x.mode,k,null),N.return=x,N;if(typeof N.then=="function")return K(x,qu(N),k);if(N.$$typeof===ft)return K(x,Du(x,N),k);Hu(x,N)}return null}function z(x,N,k,F){var at=N!==null?N.key:null;if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return at!==null?null:E(x,N,""+k,F);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case R:return k.key===at?b(x,N,k,F):null;case q:return k.key===at?L(x,N,k,F):null;case S:return at=k._init,k=at(k._payload),z(x,N,k,F)}if(se(k)||P(k))return at!==null?null:G(x,N,k,F,null);if(typeof k.then=="function")return z(x,N,qu(k),F);if(k.$$typeof===ft)return z(x,N,Du(x,k),F);Hu(x,k)}return null}function B(x,N,k,F,at){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return x=x.get(k)||null,E(N,x,""+F,at);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case R:return x=x.get(F.key===null?k:F.key)||null,b(N,x,F,at);case q:return x=x.get(F.key===null?k:F.key)||null,L(N,x,F,at);case S:var Rt=F._init;return F=Rt(F._payload),B(x,N,k,F,at)}if(se(F)||P(F))return x=x.get(k)||null,G(N,x,F,at,null);if(typeof F.then=="function")return B(x,N,k,qu(F),at);if(F.$$typeof===ft)return B(x,N,k,Du(N,F),at);Hu(N,F)}return null}function yt(x,N,k,F){for(var at=null,Rt=null,ot=N,dt=N=0,xe=null;ot!==null&&dt<k.length;dt++){ot.index>dt?(xe=ot,ot=null):xe=ot.sibling;var kt=z(x,ot,k[dt],F);if(kt===null){ot===null&&(ot=xe);break}e&&ot&&kt.alternate===null&&i(x,ot),N=d(kt,N,dt),Rt===null?at=kt:Rt.sibling=kt,Rt=kt,ot=xe}if(dt===k.length)return a(x,ot),Bt&&ys(x,dt),at;if(ot===null){for(;dt<k.length;dt++)ot=K(x,k[dt],F),ot!==null&&(N=d(ot,N,dt),Rt===null?at=ot:Rt.sibling=ot,Rt=ot);return Bt&&ys(x,dt),at}for(ot=o(ot);dt<k.length;dt++)xe=B(ot,x,dt,k[dt],F),xe!==null&&(e&&xe.alternate!==null&&ot.delete(xe.key===null?dt:xe.key),N=d(xe,N,dt),Rt===null?at=xe:Rt.sibling=xe,Rt=xe);return e&&ot.forEach(function(Sr){return i(x,Sr)}),Bt&&ys(x,dt),at}function ht(x,N,k,F){if(k==null)throw Error(s(151));for(var at=null,Rt=null,ot=N,dt=N=0,xe=null,kt=k.next();ot!==null&&!kt.done;dt++,kt=k.next()){ot.index>dt?(xe=ot,ot=null):xe=ot.sibling;var Sr=z(x,ot,kt.value,F);if(Sr===null){ot===null&&(ot=xe);break}e&&ot&&Sr.alternate===null&&i(x,ot),N=d(Sr,N,dt),Rt===null?at=Sr:Rt.sibling=Sr,Rt=Sr,ot=xe}if(kt.done)return a(x,ot),Bt&&ys(x,dt),at;if(ot===null){for(;!kt.done;dt++,kt=k.next())kt=K(x,kt.value,F),kt!==null&&(N=d(kt,N,dt),Rt===null?at=kt:Rt.sibling=kt,Rt=kt);return Bt&&ys(x,dt),at}for(ot=o(ot);!kt.done;dt++,kt=k.next())kt=B(ot,x,dt,kt.value,F),kt!==null&&(e&&kt.alternate!==null&&ot.delete(kt.key===null?dt:kt.key),N=d(kt,N,dt),Rt===null?at=kt:Rt.sibling=kt,Rt=kt);return e&&ot.forEach(function(hS){return i(x,hS)}),Bt&&ys(x,dt),at}function Xt(x,N,k,F){if(typeof k=="object"&&k!==null&&k.type===Y&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case R:t:{for(var at=k.key;N!==null;){if(N.key===at){if(at=k.type,at===Y){if(N.tag===7){a(x,N.sibling),F=h(N,k.props.children),F.return=x,x=F;break t}}else if(N.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===S&&xp(at)===N.type){a(x,N.sibling),F=h(N,k.props),Xo(F,k),F.return=x,x=F;break t}a(x,N);break}else i(x,N);N=N.sibling}k.type===Y?(F=gs(k.props.children,x.mode,F,k.key),F.return=x,x=F):(F=bu(k.type,k.key,k.props,null,x.mode,F),Xo(F,k),F.return=x,x=F)}return v(x);case q:t:{for(at=k.key;N!==null;){if(N.key===at)if(N.tag===4&&N.stateNode.containerInfo===k.containerInfo&&N.stateNode.implementation===k.implementation){a(x,N.sibling),F=h(N,k.children||[]),F.return=x,x=F;break t}else{a(x,N);break}else i(x,N);N=N.sibling}F=Qh(k,x.mode,F),F.return=x,x=F}return v(x);case S:return at=k._init,k=at(k._payload),Xt(x,N,k,F)}if(se(k))return yt(x,N,k,F);if(P(k)){if(at=P(k),typeof at!="function")throw Error(s(150));return k=at.call(k),ht(x,N,k,F)}if(typeof k.then=="function")return Xt(x,N,qu(k),F);if(k.$$typeof===ft)return Xt(x,N,Du(x,k),F);Hu(x,k)}return typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint"?(k=""+k,N!==null&&N.tag===6?(a(x,N.sibling),F=h(N,k),F.return=x,x=F):(a(x,N),F=Fh(k,x.mode,F),F.return=x,x=F),v(x)):a(x,N)}return function(x,N,k,F){try{Yo=0;var at=Xt(x,N,k,F);return _a=null,at}catch(ot){if(ot===zo||ot===Ou)throw ot;var Rt=hn(29,ot,null,x.mode);return Rt.lanes=F,Rt.return=x,Rt}finally{}}}var va=Pp(!0),Up=Pp(!1),Cn=W(null),ni=null;function lr(e){var i=e.alternate;J(Ie,Ie.current&1),J(Cn,e),ni===null&&(i===null||ma.current!==null||i.memoizedState!==null)&&(ni=e)}function kp(e){if(e.tag===22){if(J(Ie,Ie.current),J(Cn,e),ni===null){var i=e.alternate;i!==null&&i.memoizedState!==null&&(ni=e)}}else ur()}function ur(){J(Ie,Ie.current),J(Cn,Cn.current)}function xi(e){it(Cn),ni===e&&(ni=null),it(Ie)}var Ie=W(0);function Gu(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||gd(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Rf(e,i,a,o){i=e.memoizedState,a=a(o,i),a=a==null?i:T({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var If={enqueueSetState:function(e,i,a){e=e._reactInternals;var o=gn(),h=sr(o);h.payload=i,a!=null&&(h.callback=a),i=ar(e,h,o),i!==null&&(pn(i,e,o),jo(i,e,o))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var o=gn(),h=sr(o);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=ar(e,h,o),i!==null&&(pn(i,e,o),jo(i,e,o))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=gn(),o=sr(a);o.tag=2,i!=null&&(o.callback=i),i=ar(e,o,a),i!==null&&(pn(i,e,a),jo(i,e,a))}};function Lp(e,i,a,o,h,d,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,d,v):i.prototype&&i.prototype.isPureReactComponent?!Oo(a,o)||!Oo(h,d):!0}function zp(e,i,a,o){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==e&&If.enqueueReplaceState(i,i.state,null)}function ws(e,i){var a=i;if("ref"in i){a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}if(e=e.defaultProps){a===i&&(a=T({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}var Fu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Bp(e){Fu(e)}function jp(e){console.error(e)}function qp(e){Fu(e)}function Qu(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function Hp(e,i,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Cf(e,i,a){return a=sr(a),a.tag=3,a.payload={element:null},a.callback=function(){Qu(e,i)},a}function Gp(e){return e=sr(e),e.tag=3,e}function Fp(e,i,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=o.value;e.payload=function(){return h(d)},e.callback=function(){Hp(i,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){Hp(i,a,o),typeof h!="function"&&(gr===null?gr=new Set([this]):gr.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function hA(e,i,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=a.alternate,i!==null&&Uo(i,a,h,!0),a=Cn.current,a!==null){switch(a.tag){case 13:return ni===null?Wf():a.alternate===null&&le===0&&(le=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===nf?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([o]):i.add(o),td(e,o,h)),!1;case 22:return a.flags|=65536,o===nf?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([o]):a.add(o)),td(e,o,h)),!1}throw Error(s(435,a.tag))}return td(e,o,h),Wf(),!1}if(Bt)return i=Cn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,o!==Xh&&(e=Error(s(422),{cause:o}),Po(wn(e,a)))):(o!==Xh&&(i=Error(s(423),{cause:o}),Po(wn(i,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,o=wn(o,a),h=Cf(e.stateNode,o,h),af(e,h),le!==4&&(le=2)),!1;var d=Error(s(520),{cause:o});if(d=wn(d,a),nl===null?nl=[d]:nl.push(d),le!==4&&(le=2),i===null)return!0;o=wn(o,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=Cf(a.stateNode,o,e),af(a,e),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(gr===null||!gr.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Gp(h),Fp(h,e,a,o),af(a,h),!1}a=a.return}while(a!==null);return!1}var Qp=Error(s(461)),Ve=!1;function ze(e,i,a,o){i.child=e===null?Up(i,null,a,o):va(i,e.child,a,o)}function Kp(e,i,a,o,h){a=a.render;var d=i.ref;if("ref"in o){var v={};for(var E in o)E!=="ref"&&(v[E]=o[E])}else v=o;return Ts(i),o=hf(e,i,a,v,d,h),E=ff(),e!==null&&!Ve?(df(e,i,h),Pi(e,i,h)):(Bt&&E&&Kh(i),i.flags|=1,ze(e,i,o,h),i.child)}function Yp(e,i,a,o,h){if(e===null){var d=a.type;return typeof d=="function"&&!Gh(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,Xp(e,i,d,o,h)):(e=bu(a.type,null,o,i,i.mode,h),e.ref=i.ref,e.return=i,i.child=e)}if(d=e.child,!Uf(e,h)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:Oo,a(v,o)&&e.ref===i.ref)return Pi(e,i,h)}return i.flags|=1,e=Ci(d,o),e.ref=i.ref,e.return=i,i.child=e}function Xp(e,i,a,o,h){if(e!==null){var d=e.memoizedProps;if(Oo(d,o)&&e.ref===i.ref)if(Ve=!1,i.pendingProps=o=d,Uf(e,h))(e.flags&131072)!==0&&(Ve=!0);else return i.lanes=e.lanes,Pi(e,i,h)}return Df(e,i,a,o,h)}function $p(e,i,a){var o=i.pendingProps,h=o.children,d=e!==null?e.memoizedState:null;if(o.mode==="hidden"){if((i.flags&128)!==0){if(o=d!==null?d.baseLanes|a:a,e!==null){for(h=i.child=e.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;i.childLanes=d&~o}else i.childLanes=0,i.child=null;return Zp(e,i,o,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&Nu(i,d!==null?d.cachePool:null),d!==null?Xg(i,d):lf(),kp(i);else return i.lanes=i.childLanes=536870912,Zp(e,i,d!==null?d.baseLanes|a:a,a)}else d!==null?(Nu(i,d.cachePool),Xg(i,d),ur(),i.memoizedState=null):(e!==null&&Nu(i,null),lf(),ur());return ze(e,i,h,a),i.child}function Zp(e,i,a,o){var h=ef();return h=h===null?null:{parent:Re._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},e!==null&&Nu(i,null),lf(),kp(i),e!==null&&Uo(e,i,o,!0),null}function Ku(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(i.flags|=4194816)}}function Df(e,i,a,o,h){return Ts(i),a=hf(e,i,a,o,void 0,h),o=ff(),e!==null&&!Ve?(df(e,i,h),Pi(e,i,h)):(Bt&&o&&Kh(i),i.flags|=1,ze(e,i,a,h),i.child)}function Wp(e,i,a,o,h,d){return Ts(i),i.updateQueue=null,a=Zg(i,o,a,h),$g(e),o=ff(),e!==null&&!Ve?(df(e,i,d),Pi(e,i,d)):(Bt&&o&&Kh(i),i.flags|=1,ze(e,i,a,d),i.child)}function Jp(e,i,a,o,h){if(Ts(i),i.stateNode===null){var d=ua,v=a.contextType;typeof v=="object"&&v!==null&&(d=Qe(v)),d=new a(o,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=If,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=o,d.state=i.memoizedState,d.refs={},rf(i),v=a.contextType,d.context=typeof v=="object"&&v!==null?Qe(v):ua,d.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Rf(i,a,v,o),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&If.enqueueReplaceState(d,d.state,null),Ho(i,o,d,h),qo(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(e===null){d=i.stateNode;var E=i.memoizedProps,b=ws(a,E);d.props=b;var L=d.context,G=a.contextType;v=ua,typeof G=="object"&&G!==null&&(v=Qe(G));var K=a.getDerivedStateFromProps;G=typeof K=="function"||typeof d.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,G||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E||L!==v)&&zp(i,d,o,v),rr=!1;var z=i.memoizedState;d.state=z,Ho(i,o,d,h),qo(),L=i.memoizedState,E||z!==L||rr?(typeof K=="function"&&(Rf(i,a,K,o),L=i.memoizedState),(b=rr||Lp(i,a,b,o,z,L,v))?(G||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=L),d.props=o,d.state=L,d.context=v,o=b):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{d=i.stateNode,sf(e,i),v=i.memoizedProps,G=ws(a,v),d.props=G,K=i.pendingProps,z=d.context,L=a.contextType,b=ua,typeof L=="object"&&L!==null&&(b=Qe(L)),E=a.getDerivedStateFromProps,(L=typeof E=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==K||z!==b)&&zp(i,d,o,b),rr=!1,z=i.memoizedState,d.state=z,Ho(i,o,d,h),qo();var B=i.memoizedState;v!==K||z!==B||rr||e!==null&&e.dependencies!==null&&Cu(e.dependencies)?(typeof E=="function"&&(Rf(i,a,E,o),B=i.memoizedState),(G=rr||Lp(i,a,G,o,z,B,b)||e!==null&&e.dependencies!==null&&Cu(e.dependencies))?(L||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,B,b),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,B,b)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=B),d.props=o,d.state=B,d.context=b,o=G):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=1024),o=!1)}return d=o,Ku(e,i),o=(i.flags&128)!==0,d||o?(d=i.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,e!==null&&o?(i.child=va(i,e.child,null,h),i.child=va(i,null,a,h)):ze(e,i,a,h),i.memoizedState=d.state,e=i.child):e=Pi(e,i,h),e}function ty(e,i,a,o){return xo(),i.flags|=256,ze(e,i,a,o),i.child}var Nf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Of(e){return{baseLanes:e,cachePool:jg()}}function Vf(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=Dn),e}function ey(e,i,a){var o=i.pendingProps,h=!1,d=(i.flags&128)!==0,v;if((v=d)||(v=e!==null&&e.memoizedState===null?!1:(Ie.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,e===null){if(Bt){if(h?lr(i):ur(),Bt){var E=oe,b;if(b=E){t:{for(b=E,E=ei;b.nodeType!==8;){if(!E){E=null;break t}if(b=kn(b.nextSibling),b===null){E=null;break t}}E=b}E!==null?(i.memoizedState={dehydrated:E,treeContext:ps!==null?{id:Di,overflow:Ni}:null,retryLane:536870912,hydrationErrors:null},b=hn(18,null,null,0),b.stateNode=E,b.return=i,i.child=b,en=i,oe=null,b=!0):b=!1}b||vs(i)}if(E=i.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return gd(E)?i.lanes=32:i.lanes=536870912,null;xi(i)}return E=o.children,o=o.fallback,h?(ur(),h=i.mode,E=Yu({mode:"hidden",children:E},h),o=gs(o,h,a,null),E.return=i,o.return=i,E.sibling=o,i.child=E,h=i.child,h.memoizedState=Of(a),h.childLanes=Vf(e,v,a),i.memoizedState=Nf,o):(lr(i),Mf(i,E))}if(b=e.memoizedState,b!==null&&(E=b.dehydrated,E!==null)){if(d)i.flags&256?(lr(i),i.flags&=-257,i=xf(e,i,a)):i.memoizedState!==null?(ur(),i.child=e.child,i.flags|=128,i=null):(ur(),h=o.fallback,E=i.mode,o=Yu({mode:"visible",children:o.children},E),h=gs(h,E,a,null),h.flags|=2,o.return=i,h.return=i,o.sibling=h,i.child=o,va(i,e.child,null,a),o=i.child,o.memoizedState=Of(a),o.childLanes=Vf(e,v,a),i.memoizedState=Nf,i=h);else if(lr(i),gd(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var L=v.dgst;v=L,o=Error(s(419)),o.stack="",o.digest=v,Po({value:o,source:null,stack:null}),i=xf(e,i,a)}else if(Ve||Uo(e,i,a,!1),v=(a&e.childLanes)!==0,Ve||v){if(v=Wt,v!==null&&(o=a&-a,o=(o&42)!==0?1:$i(o),o=(o&(v.suspendedLanes|a))!==0?0:o,o!==0&&o!==b.retryLane))throw b.retryLane=o,la(e,o),pn(v,e,o),Qp;E.data==="$?"||Wf(),i=xf(e,i,a)}else E.data==="$?"?(i.flags|=192,i.child=e.child,i=null):(e=b.treeContext,oe=kn(E.nextSibling),en=i,Bt=!0,_s=null,ei=!1,e!==null&&(Rn[In++]=Di,Rn[In++]=Ni,Rn[In++]=ps,Di=e.id,Ni=e.overflow,ps=i),i=Mf(i,o.children),i.flags|=4096);return i}return h?(ur(),h=o.fallback,E=i.mode,b=e.child,L=b.sibling,o=Ci(b,{mode:"hidden",children:o.children}),o.subtreeFlags=b.subtreeFlags&65011712,L!==null?h=Ci(L,h):(h=gs(h,E,a,null),h.flags|=2),h.return=i,o.return=i,o.sibling=h,i.child=o,o=h,h=i.child,E=e.child.memoizedState,E===null?E=Of(a):(b=E.cachePool,b!==null?(L=Re._currentValue,b=b.parent!==L?{parent:L,pool:L}:b):b=jg(),E={baseLanes:E.baseLanes|a,cachePool:b}),h.memoizedState=E,h.childLanes=Vf(e,v,a),i.memoizedState=Nf,o):(lr(i),a=e.child,e=a.sibling,a=Ci(a,{mode:"visible",children:o.children}),a.return=i,a.sibling=null,e!==null&&(v=i.deletions,v===null?(i.deletions=[e],i.flags|=16):v.push(e)),i.child=a,i.memoizedState=null,a)}function Mf(e,i){return i=Yu({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function Yu(e,i){return e=hn(22,e,null,i),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function xf(e,i,a){return va(i,e.child,null,a),e=Mf(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function ny(e,i,a){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i),Zh(e.return,i,a)}function Pf(e,i,a,o,h){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h}:(d.isBackwards=i,d.rendering=null,d.renderingStartTime=0,d.last=o,d.tail=a,d.tailMode=h)}function iy(e,i,a){var o=i.pendingProps,h=o.revealOrder,d=o.tail;if(ze(e,i,o.children,a),o=Ie.current,(o&2)!==0)o=o&1|2,i.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ny(e,a,i);else if(e.tag===19)ny(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}switch(J(Ie,o),h){case"forwards":for(a=i.child,h=null;a!==null;)e=a.alternate,e!==null&&Gu(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),Pf(i,!1,h,a,d);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(e=h.alternate,e!==null&&Gu(e)===null){i.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}Pf(i,!0,a,null,d);break;case"together":Pf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Pi(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),mr|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(Uo(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,a=Ci(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=Ci(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function Uf(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&Cu(e)))}function fA(e,i,a){switch(i.tag){case 3:Zt(i,i.stateNode.containerInfo),ir(i,Re,e.memoizedState.cache),xo();break;case 27:case 5:Xi(i);break;case 4:Zt(i,i.stateNode.containerInfo);break;case 10:ir(i,i.type,i.memoizedProps.value);break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(lr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?ey(e,i,a):(lr(i),e=Pi(e,i,a),e!==null?e.sibling:null);lr(i);break;case 19:var h=(e.flags&128)!==0;if(o=(a&i.childLanes)!==0,o||(Uo(e,i,a,!1),o=(a&i.childLanes)!==0),h){if(o)return iy(e,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),J(Ie,Ie.current),o)break;return null;case 22:case 23:return i.lanes=0,$p(e,i,a);case 24:ir(i,Re,e.memoizedState.cache)}return Pi(e,i,a)}function ry(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)Ve=!0;else{if(!Uf(e,a)&&(i.flags&128)===0)return Ve=!1,fA(e,i,a);Ve=(e.flags&131072)!==0}else Ve=!1,Bt&&(i.flags&1048576)!==0&&xg(i,Iu,i.index);switch(i.lanes=0,i.tag){case 16:t:{e=i.pendingProps;var o=i.elementType,h=o._init;if(o=h(o._payload),i.type=o,typeof o=="function")Gh(o)?(e=ws(o,e),i.tag=1,i=Jp(null,i,o,e,a)):(i.tag=0,i=Df(null,i,o,e,a));else{if(o!=null){if(h=o.$$typeof,h===Ut){i.tag=11,i=Kp(null,i,o,e,a);break t}else if(h===V){i.tag=14,i=Yp(null,i,o,e,a);break t}}throw i=Ue(o)||o,Error(s(306,i,""))}}return i;case 0:return Df(e,i,i.type,i.pendingProps,a);case 1:return o=i.type,h=ws(o,i.pendingProps),Jp(e,i,o,h,a);case 3:t:{if(Zt(i,i.stateNode.containerInfo),e===null)throw Error(s(387));o=i.pendingProps;var d=i.memoizedState;h=d.element,sf(e,i),Ho(i,o,null,a);var v=i.memoizedState;if(o=v.cache,ir(i,Re,o),o!==d.cache&&Wh(i,[Re],a,!0),qo(),o=v.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=ty(e,i,o,a);break t}else if(o!==h){h=wn(Error(s(424)),i),Po(h),i=ty(e,i,o,a);break t}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(oe=kn(e.firstChild),en=i,Bt=!0,_s=null,ei=!0,a=Up(i,null,o,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(xo(),o===h){i=Pi(e,i,a);break t}ze(e,i,o,a)}i=i.child}return i;case 26:return Ku(e,i),e===null?(a=l_(i.type,null,i.pendingProps,null))?i.memoizedState=a:Bt||(a=i.type,e=i.pendingProps,o=lc(vt.current).createElement(a),o[Se]=i,o[ge]=e,je(o,a,e),ce(o),i.stateNode=o):i.memoizedState=l_(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return Xi(i),e===null&&Bt&&(o=i.stateNode=s_(i.type,i.pendingProps,vt.current),en=i,ei=!0,h=oe,_r(i.type)?(pd=h,oe=kn(o.firstChild)):oe=h),ze(e,i,i.pendingProps.children,a),Ku(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Bt&&((h=o=oe)&&(o=BA(o,i.type,i.pendingProps,ei),o!==null?(i.stateNode=o,en=i,oe=kn(o.firstChild),ei=!1,h=!0):h=!1),h||vs(i)),Xi(i),h=i.type,d=i.pendingProps,v=e!==null?e.memoizedProps:null,o=d.children,fd(h,d)?o=null:v!==null&&fd(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=hf(e,i,rA,null,null,a),hl._currentValue=h),Ku(e,i),ze(e,i,o,a),i.child;case 6:return e===null&&Bt&&((e=a=oe)&&(a=jA(a,i.pendingProps,ei),a!==null?(i.stateNode=a,en=i,oe=null,e=!0):e=!1),e||vs(i)),null;case 13:return ey(e,i,a);case 4:return Zt(i,i.stateNode.containerInfo),o=i.pendingProps,e===null?i.child=va(i,null,o,a):ze(e,i,o,a),i.child;case 11:return Kp(e,i,i.type,i.pendingProps,a);case 7:return ze(e,i,i.pendingProps,a),i.child;case 8:return ze(e,i,i.pendingProps.children,a),i.child;case 12:return ze(e,i,i.pendingProps.children,a),i.child;case 10:return o=i.pendingProps,ir(i,i.type,o.value),ze(e,i,o.children,a),i.child;case 9:return h=i.type._context,o=i.pendingProps.children,Ts(i),h=Qe(h),o=o(h),i.flags|=1,ze(e,i,o,a),i.child;case 14:return Yp(e,i,i.type,i.pendingProps,a);case 15:return Xp(e,i,i.type,i.pendingProps,a);case 19:return iy(e,i,a);case 31:return o=i.pendingProps,a=i.mode,o={mode:o.mode,children:o.children},e===null?(a=Yu(o,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Ci(e.child,o),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return $p(e,i,a);case 24:return Ts(i),o=Qe(Re),e===null?(h=ef(),h===null&&(h=Wt,d=Jh(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:o,cache:h},rf(i),ir(i,Re,h)):((e.lanes&a)!==0&&(sf(e,i),Ho(i,null,null,a),qo()),h=e.memoizedState,d=i.memoizedState,h.parent!==o?(h={parent:o,cache:o},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),ir(i,Re,o)):(o=d.cache,ir(i,Re,o),o!==h.cache&&Wh(i,[Re],a,!0))),ze(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Ui(e){e.flags|=4}function sy(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!d_(i)){if(i=Cn.current,i!==null&&((xt&4194048)===xt?ni!==null:(xt&62914560)!==xt&&(xt&536870912)===0||i!==ni))throw Bo=nf,qg;e.flags|=8192}}function Xu(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?fo():536870912,e.lanes|=i,Sa|=i)}function $o(e,i){if(!Bt)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function ie(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(i)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=o,e.childLanes=a,i}function dA(e,i,a){var o=i.pendingProps;switch(Yh(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ie(i),null;case 1:return ie(i),null;case 3:return a=i.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Vi(Re),Hn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Mo(i)?Ui(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,kg())),ie(i),null;case 26:return a=i.memoizedState,e===null?(Ui(i),a!==null?(ie(i),sy(i,a)):(ie(i),i.flags&=-16777217)):a?a!==e.memoizedState?(Ui(i),ie(i),sy(i,a)):(ie(i),i.flags&=-16777217):(e.memoizedProps!==o&&Ui(i),ie(i),i.flags&=-16777217),null;case 27:gi(i),a=vt.current;var h=i.type;if(e!==null&&i.stateNode!=null)e.memoizedProps!==o&&Ui(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return ie(i),null}e=ct.current,Mo(i)?Pg(i):(e=s_(h,o,a),i.stateNode=e,Ui(i))}return ie(i),null;case 5:if(gi(i),a=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==o&&Ui(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return ie(i),null}if(e=ct.current,Mo(i))Pg(i);else{switch(h=lc(vt.current),e){case 1:e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof o.is=="string"?h.createElement("select",{is:o.is}):h.createElement("select"),o.multiple?e.multiple=!0:o.size&&(e.size=o.size);break;default:e=typeof o.is=="string"?h.createElement(a,{is:o.is}):h.createElement(a)}}e[Se]=i,e[ge]=o;t:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)e.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break t;for(;h.sibling===null;){if(h.return===null||h.return===i)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=e;t:switch(je(e,a,o),a){case"button":case"input":case"select":case"textarea":e=!!o.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Ui(i)}}return ie(i),i.flags&=-16777217,null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==o&&Ui(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(s(166));if(e=vt.current,Mo(i)){if(e=i.stateNode,a=i.memoizedProps,o=null,h=en,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}e[Se]=i,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||Wy(e.nodeValue,a)),e||vs(i)}else e=lc(e).createTextNode(o),e[Se]=i,i.stateNode=e}return ie(i),null;case 13:if(o=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=Mo(i),o!==null&&o.dehydrated!==null){if(e===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Se]=i}else xo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ie(i),h=!1}else h=kg(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(xi(i),i):(xi(i),null)}if(xi(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=o!==null,e=e!==null&&e.memoizedState!==null,a){o=i.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool);var d=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==h&&(o.flags|=2048)}return a!==e&&a&&(i.child.flags|=8192),Xu(i,i.updateQueue),ie(i),null;case 4:return Hn(),e===null&&od(i.stateNode.containerInfo),ie(i),null;case 10:return Vi(i.type),ie(i),null;case 19:if(it(Ie),h=i.memoizedState,h===null)return ie(i),null;if(o=(i.flags&128)!==0,d=h.rendering,d===null)if(o)$o(h,!1);else{if(le!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(d=Gu(e),d!==null){for(i.flags|=128,$o(h,!1),e=d.updateQueue,i.updateQueue=e,Xu(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)Mg(a,e),a=a.sibling;return J(Ie,Ie.current&1|2),i.child}e=e.sibling}h.tail!==null&&_n()>Wu&&(i.flags|=128,o=!0,$o(h,!1),i.lanes=4194304)}else{if(!o)if(e=Gu(d),e!==null){if(i.flags|=128,o=!0,e=e.updateQueue,i.updateQueue=e,Xu(i,e),$o(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!Bt)return ie(i),null}else 2*_n()-h.renderingStartTime>Wu&&a!==536870912&&(i.flags|=128,o=!0,$o(h,!1),i.lanes=4194304);h.isBackwards?(d.sibling=i.child,i.child=d):(e=h.last,e!==null?e.sibling=d:i.child=d,h.last=d)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=_n(),i.sibling=null,e=Ie.current,J(Ie,o?e&1|2:e&1),i):(ie(i),null);case 22:case 23:return xi(i),uf(),o=i.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(a&536870912)!==0&&(i.flags&128)===0&&(ie(i),i.subtreeFlags&6&&(i.flags|=8192)):ie(i),a=i.updateQueue,a!==null&&Xu(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048),e!==null&&it(As),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Vi(Re),ie(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function mA(e,i){switch(Yh(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Vi(Re),Hn(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return gi(i),null;case 13:if(xi(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));xo()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return it(Ie),null;case 4:return Hn(),null;case 10:return Vi(i.type),null;case 22:case 23:return xi(i),uf(),e!==null&&it(As),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Vi(Re),null;case 25:return null;default:return null}}function ay(e,i){switch(Yh(i),i.tag){case 3:Vi(Re),Hn();break;case 26:case 27:case 5:gi(i);break;case 4:Hn();break;case 13:xi(i);break;case 19:it(Ie);break;case 10:Vi(i.type);break;case 22:case 23:xi(i),uf(),e!==null&&it(As);break;case 24:Vi(Re)}}function Zo(e,i){try{var a=i.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&e)===e){o=void 0;var d=a.create,v=a.inst;o=d(),v.destroy=o}a=a.next}while(a!==h)}}catch(E){$t(i,i.return,E)}}function cr(e,i,a){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var d=h.next;o=d;do{if((o.tag&e)===e){var v=o.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,h=i;var b=a,L=E;try{L()}catch(G){$t(h,b,G)}}}o=o.next}while(o!==d)}}catch(G){$t(i,i.return,G)}}function oy(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{Yg(i,a)}catch(o){$t(e,e.return,o)}}}function ly(e,i,a){a.props=ws(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){$t(e,i,o)}}function Wo(e,i){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(h){$t(e,i,h)}}function ii(e,i){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){$t(e,i,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){$t(e,i,h)}else a.current=null}function uy(e){var i=e.type,a=e.memoizedProps,o=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break t;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){$t(e,e.return,h)}}function kf(e,i,a){try{var o=e.stateNode;PA(o,e.type,a,i),o[ge]=i}catch(h){$t(e,e.return,h)}}function cy(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&_r(e.type)||e.tag===4}function Lf(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||cy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&_r(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function zf(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(e),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=oc));else if(o!==4&&(o===27&&_r(e.type)&&(a=e.stateNode,i=null),e=e.child,e!==null))for(zf(e,i,a),e=e.sibling;e!==null;)zf(e,i,a),e=e.sibling}function $u(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(o!==4&&(o===27&&_r(e.type)&&(a=e.stateNode),e=e.child,e!==null))for($u(e,i,a),e=e.sibling;e!==null;)$u(e,i,a),e=e.sibling}function hy(e){var i=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);je(i,o,a),i[Se]=e,i[ge]=a}catch(d){$t(e,e.return,d)}}var ki=!1,fe=!1,Bf=!1,fy=typeof WeakSet=="function"?WeakSet:Set,Me=null;function gA(e,i){if(e=e.containerInfo,cd=mc,e=Sg(e),kh(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var v=0,E=-1,b=-1,L=0,G=0,K=e,z=null;e:for(;;){for(var B;K!==a||h!==0&&K.nodeType!==3||(E=v+h),K!==d||o!==0&&K.nodeType!==3||(b=v+o),K.nodeType===3&&(v+=K.nodeValue.length),(B=K.firstChild)!==null;)z=K,K=B;for(;;){if(K===e)break e;if(z===a&&++L===h&&(E=v),z===d&&++G===o&&(b=v),(B=K.nextSibling)!==null)break;K=z,z=K.parentNode}K=B}a=E===-1||b===-1?null:{start:E,end:b}}else a=null}a=a||{start:0,end:0}}else a=null;for(hd={focusedElem:e,selectionRange:a},mc=!1,Me=i;Me!==null;)if(i=Me,e=i.child,(i.subtreeFlags&1024)!==0&&e!==null)e.return=i,Me=e;else for(;Me!==null;){switch(i=Me,d=i.alternate,e=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,o=a.stateNode;try{var yt=ws(a.type,h,a.elementType===a.type);e=o.getSnapshotBeforeUpdate(yt,d),o.__reactInternalSnapshotBeforeUpdate=e}catch(ht){$t(a,a.return,ht)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)md(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":md(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,Me=e;break}Me=i.return}}function dy(e,i,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:hr(e,a),o&4&&Zo(5,a);break;case 1:if(hr(e,a),o&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(v){$t(a,a.return,v)}else{var h=ws(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(h,i,e.__reactInternalSnapshotBeforeUpdate)}catch(v){$t(a,a.return,v)}}o&64&&oy(a),o&512&&Wo(a,a.return);break;case 3:if(hr(e,a),o&64&&(e=a.updateQueue,e!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Yg(e,i)}catch(v){$t(a,a.return,v)}}break;case 27:i===null&&o&4&&hy(a);case 26:case 5:hr(e,a),i===null&&o&4&&uy(a),o&512&&Wo(a,a.return);break;case 12:hr(e,a);break;case 13:hr(e,a),o&4&&py(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=wA.bind(null,a),qA(e,a))));break;case 22:if(o=a.memoizedState!==null||ki,!o){i=i!==null&&i.memoizedState!==null||fe,h=ki;var d=fe;ki=o,(fe=i)&&!d?fr(e,a,(a.subtreeFlags&8772)!==0):hr(e,a),ki=h,fe=d}break;case 30:break;default:hr(e,a)}}function my(e){var i=e.alternate;i!==null&&(e.alternate=null,my(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&Ji(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ne=null,rn=!1;function Li(e,i,a){for(a=a.child;a!==null;)gy(e,i,a),a=a.sibling}function gy(e,i,a){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(ae,a)}catch{}switch(a.tag){case 26:fe||ii(a,i),Li(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:fe||ii(a,i);var o=ne,h=rn;_r(a.type)&&(ne=a.stateNode,rn=!1),Li(e,i,a),ol(a.stateNode),ne=o,rn=h;break;case 5:fe||ii(a,i);case 6:if(o=ne,h=rn,ne=null,Li(e,i,a),ne=o,rn=h,ne!==null)if(rn)try{(ne.nodeType===9?ne.body:ne.nodeName==="HTML"?ne.ownerDocument.body:ne).removeChild(a.stateNode)}catch(d){$t(a,i,d)}else try{ne.removeChild(a.stateNode)}catch(d){$t(a,i,d)}break;case 18:ne!==null&&(rn?(e=ne,i_(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),gl(e)):i_(ne,a.stateNode));break;case 4:o=ne,h=rn,ne=a.stateNode.containerInfo,rn=!0,Li(e,i,a),ne=o,rn=h;break;case 0:case 11:case 14:case 15:fe||cr(2,a,i),fe||cr(4,a,i),Li(e,i,a);break;case 1:fe||(ii(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"&&ly(a,i,o)),Li(e,i,a);break;case 21:Li(e,i,a);break;case 22:fe=(o=fe)||a.memoizedState!==null,Li(e,i,a),fe=o;break;default:Li(e,i,a)}}function py(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{gl(e)}catch(a){$t(i,i.return,a)}}function pA(e){switch(e.tag){case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new fy),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new fy),i;default:throw Error(s(435,e.tag))}}function jf(e,i){var a=pA(e);i.forEach(function(o){var h=bA.bind(null,e,o);a.has(o)||(a.add(o),o.then(h,h))})}function fn(e,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],d=e,v=i,E=v;t:for(;E!==null;){switch(E.tag){case 27:if(_r(E.type)){ne=E.stateNode,rn=!1;break t}break;case 5:ne=E.stateNode,rn=!1;break t;case 3:case 4:ne=E.stateNode.containerInfo,rn=!0;break t}E=E.return}if(ne===null)throw Error(s(160));gy(d,v,h),ne=null,rn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)yy(i,e),i=i.sibling}var Un=null;function yy(e,i){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:fn(i,e),dn(e),o&4&&(cr(3,e,e.return),Zo(3,e),cr(5,e,e.return));break;case 1:fn(i,e),dn(e),o&512&&(fe||a===null||ii(a,a.return)),o&64&&ki&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=Un;if(fn(i,e),dn(e),o&512&&(fe||a===null||ii(a,a.return)),o&4){var d=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){t:{o=e.type,a=e.memoizedProps,h=h.ownerDocument||h;e:switch(o){case"title":d=h.getElementsByTagName("title")[0],(!d||d[Jr]||d[Se]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(o),h.head.insertBefore(d,h.querySelector("head > title"))),je(d,o,a),d[Se]=e,ce(d),o=d;break t;case"link":var v=h_("link","href",h).get(o+(a.href||""));if(v){for(var E=0;E<v.length;E++)if(d=v[E],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(E,1);break e}}d=h.createElement(o),je(d,o,a),h.head.appendChild(d);break;case"meta":if(v=h_("meta","content",h).get(o+(a.content||""))){for(E=0;E<v.length;E++)if(d=v[E],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(E,1);break e}}d=h.createElement(o),je(d,o,a),h.head.appendChild(d);break;default:throw Error(s(468,o))}d[Se]=e,ce(d),o=d}e.stateNode=o}else f_(h,e.type,e.stateNode);else e.stateNode=c_(h,o,e.memoizedProps);else d!==o?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,o===null?f_(h,e.type,e.stateNode):c_(h,o,e.memoizedProps)):o===null&&e.stateNode!==null&&kf(e,e.memoizedProps,a.memoizedProps)}break;case 27:fn(i,e),dn(e),o&512&&(fe||a===null||ii(a,a.return)),a!==null&&o&4&&kf(e,e.memoizedProps,a.memoizedProps);break;case 5:if(fn(i,e),dn(e),o&512&&(fe||a===null||ii(a,a.return)),e.flags&32){h=e.stateNode;try{En(h,"")}catch(B){$t(e,e.return,B)}}o&4&&e.stateNode!=null&&(h=e.memoizedProps,kf(e,h,a!==null?a.memoizedProps:h)),o&1024&&(Bf=!0);break;case 6:if(fn(i,e),dn(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(B){$t(e,e.return,B)}}break;case 3:if(hc=null,h=Un,Un=uc(i.containerInfo),fn(i,e),Un=h,dn(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{gl(i.containerInfo)}catch(B){$t(e,e.return,B)}Bf&&(Bf=!1,_y(e));break;case 4:o=Un,Un=uc(e.stateNode.containerInfo),fn(i,e),dn(e),Un=o;break;case 12:fn(i,e),dn(e);break;case 13:fn(i,e),dn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Kf=_n()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,jf(e,o)));break;case 22:h=e.memoizedState!==null;var b=a!==null&&a.memoizedState!==null,L=ki,G=fe;if(ki=L||h,fe=G||b,fn(i,e),fe=G,ki=L,dn(e),o&8192)t:for(i=e.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||b||ki||fe||bs(e)),a=null,i=e;;){if(i.tag===5||i.tag===26){if(a===null){b=a=i;try{if(d=b.stateNode,h)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=b.stateNode;var K=b.memoizedProps.style,z=K!=null&&K.hasOwnProperty("display")?K.display:null;E.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(B){$t(b,b.return,B)}}}else if(i.tag===6){if(a===null){b=i;try{b.stateNode.nodeValue=h?"":b.memoizedProps}catch(B){$t(b,b.return,B)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,jf(e,a))));break;case 19:fn(i,e),dn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,jf(e,o)));break;case 30:break;case 21:break;default:fn(i,e),dn(e)}}function dn(e){var i=e.flags;if(i&2){try{for(var a,o=e.return;o!==null;){if(cy(o)){a=o;break}o=o.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=Lf(e);$u(e,d,h);break;case 5:var v=a.stateNode;a.flags&32&&(En(v,""),a.flags&=-33);var E=Lf(e);$u(e,E,v);break;case 3:case 4:var b=a.stateNode.containerInfo,L=Lf(e);zf(e,L,b);break;default:throw Error(s(161))}}catch(G){$t(e,e.return,G)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function _y(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;_y(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function hr(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)dy(e,i.alternate,i),i=i.sibling}function bs(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:cr(4,i,i.return),bs(i);break;case 1:ii(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&ly(i,i.return,a),bs(i);break;case 27:ol(i.stateNode);case 26:case 5:ii(i,i.return),bs(i);break;case 22:i.memoizedState===null&&bs(i);break;case 30:bs(i);break;default:bs(i)}e=e.sibling}}function fr(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,h=e,d=i,v=d.flags;switch(d.tag){case 0:case 11:case 15:fr(h,d,a),Zo(4,d);break;case 1:if(fr(h,d,a),o=d,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(L){$t(o,o.return,L)}if(o=d,h=o.updateQueue,h!==null){var E=o.stateNode;try{var b=h.shared.hiddenCallbacks;if(b!==null)for(h.shared.hiddenCallbacks=null,h=0;h<b.length;h++)Kg(b[h],E)}catch(L){$t(o,o.return,L)}}a&&v&64&&oy(d),Wo(d,d.return);break;case 27:hy(d);case 26:case 5:fr(h,d,a),a&&o===null&&v&4&&uy(d),Wo(d,d.return);break;case 12:fr(h,d,a);break;case 13:fr(h,d,a),a&&v&4&&py(h,d);break;case 22:d.memoizedState===null&&fr(h,d,a),Wo(d,d.return);break;case 30:break;default:fr(h,d,a)}i=i.sibling}}function qf(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&ko(a))}function Hf(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&ko(e))}function ri(e,i,a,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)vy(e,i,a,o),i=i.sibling}function vy(e,i,a,o){var h=i.flags;switch(i.tag){case 0:case 11:case 15:ri(e,i,a,o),h&2048&&Zo(9,i);break;case 1:ri(e,i,a,o);break;case 3:ri(e,i,a,o),h&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&ko(e)));break;case 12:if(h&2048){ri(e,i,a,o),e=i.stateNode;try{var d=i.memoizedProps,v=d.id,E=d.onPostCommit;typeof E=="function"&&E(v,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(b){$t(i,i.return,b)}}else ri(e,i,a,o);break;case 13:ri(e,i,a,o);break;case 23:break;case 22:d=i.stateNode,v=i.alternate,i.memoizedState!==null?d._visibility&2?ri(e,i,a,o):Jo(e,i):d._visibility&2?ri(e,i,a,o):(d._visibility|=2,Ea(e,i,a,o,(i.subtreeFlags&10256)!==0)),h&2048&&qf(v,i);break;case 24:ri(e,i,a,o),h&2048&&Hf(i.alternate,i);break;default:ri(e,i,a,o)}}function Ea(e,i,a,o,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var d=e,v=i,E=a,b=o,L=v.flags;switch(v.tag){case 0:case 11:case 15:Ea(d,v,E,b,h),Zo(8,v);break;case 23:break;case 22:var G=v.stateNode;v.memoizedState!==null?G._visibility&2?Ea(d,v,E,b,h):Jo(d,v):(G._visibility|=2,Ea(d,v,E,b,h)),h&&L&2048&&qf(v.alternate,v);break;case 24:Ea(d,v,E,b,h),h&&L&2048&&Hf(v.alternate,v);break;default:Ea(d,v,E,b,h)}i=i.sibling}}function Jo(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,o=i,h=o.flags;switch(o.tag){case 22:Jo(a,o),h&2048&&qf(o.alternate,o);break;case 24:Jo(a,o),h&2048&&Hf(o.alternate,o);break;default:Jo(a,o)}i=i.sibling}}var tl=8192;function Ta(e){if(e.subtreeFlags&tl)for(e=e.child;e!==null;)Ey(e),e=e.sibling}function Ey(e){switch(e.tag){case 26:Ta(e),e.flags&tl&&e.memoizedState!==null&&eS(Un,e.memoizedState,e.memoizedProps);break;case 5:Ta(e);break;case 3:case 4:var i=Un;Un=uc(e.stateNode.containerInfo),Ta(e),Un=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=tl,tl=16777216,Ta(e),tl=i):Ta(e));break;default:Ta(e)}}function Ty(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function el(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Me=o,Sy(o,e)}Ty(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ay(e),e=e.sibling}function Ay(e){switch(e.tag){case 0:case 11:case 15:el(e),e.flags&2048&&cr(9,e,e.return);break;case 3:el(e);break;case 12:el(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,Zu(e)):el(e);break;default:el(e)}}function Zu(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Me=o,Sy(o,e)}Ty(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:cr(8,i,i.return),Zu(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Zu(i));break;default:Zu(i)}e=e.sibling}}function Sy(e,i){for(;Me!==null;){var a=Me;switch(a.tag){case 0:case 11:case 15:cr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:ko(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,Me=o;else t:for(a=e;Me!==null;){o=Me;var h=o.sibling,d=o.return;if(my(o),o===a){Me=null;break t}if(h!==null){h.return=d,Me=h;break t}Me=d}}}var yA={getCacheForType:function(e){var i=Qe(Re),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a}},_A=typeof WeakMap=="function"?WeakMap:Map,Gt=0,Wt=null,It=null,xt=0,Ft=0,mn=null,dr=!1,Aa=!1,Gf=!1,zi=0,le=0,mr=0,Rs=0,Ff=0,Dn=0,Sa=0,nl=null,sn=null,Qf=!1,Kf=0,Wu=1/0,Ju=null,gr=null,Be=0,pr=null,wa=null,ba=0,Yf=0,Xf=null,wy=null,il=0,$f=null;function gn(){if((Gt&2)!==0&&xt!==0)return xt&-xt;if(H.T!==null){var e=fa;return e!==0?e:id()}return Zi()}function by(){Dn===0&&(Dn=(xt&536870912)===0||Bt?ho():536870912);var e=Cn.current;return e!==null&&(e.flags|=32),Dn}function pn(e,i,a){(e===Wt&&(Ft===2||Ft===9)||e.cancelPendingCommit!==null)&&(Ra(e,0),yr(e,xt,Dn,!1)),yi(e,a),((Gt&2)===0||e!==Wt)&&(e===Wt&&((Gt&2)===0&&(Rs|=a),le===4&&yr(e,xt,Dn,!1)),si(e))}function Ry(e,i,a){if((Gt&6)!==0)throw Error(s(327));var o=!a&&(i&124)===0&&(i&e.expiredLanes)===0||Wr(e,i),h=o?TA(e,i):Jf(e,i,!0),d=o;do{if(h===0){Aa&&!o&&yr(e,i,0,!1);break}else{if(a=e.current.alternate,d&&!vA(a)){h=Jf(e,i,!1),d=!1;continue}if(h===2){if(d=i,e.errorRecoveryDisabledLanes&d)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;t:{var E=e;h=nl;var b=E.current.memoizedState.isDehydrated;if(b&&(Ra(E,v).flags|=256),v=Jf(E,v,!1),v!==2){if(Gf&&!b){E.errorRecoveryDisabledLanes|=d,Rs|=d,h=4;break t}d=sn,sn=h,d!==null&&(sn===null?sn=d:sn.push.apply(sn,d))}h=v}if(d=!1,h!==2)continue}}if(h===1){Ra(e,0),yr(e,i,0,!0);break}t:{switch(o=e,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:yr(o,i,Dn,!dr);break t;case 2:sn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=Kf+300-_n(),10<h)){if(yr(o,i,Dn,!dr),Hs(o,0,!0)!==0)break t;o.timeoutHandle=e_(Iy.bind(null,o,a,sn,Ju,Qf,i,Dn,Rs,Sa,dr,d,2,-0,0),h);break t}Iy(o,a,sn,Ju,Qf,i,Dn,Rs,Sa,dr,d,0,-0,0)}}break}while(!0);si(e)}function Iy(e,i,a,o,h,d,v,E,b,L,G,K,z,B){if(e.timeoutHandle=-1,K=i.subtreeFlags,(K&8192||(K&16785408)===16785408)&&(cl={stylesheets:null,count:0,unsuspend:tS},Ey(i),K=nS(),K!==null)){e.cancelPendingCommit=K(xy.bind(null,e,i,d,a,o,h,v,E,b,G,1,z,B)),yr(e,d,v,!L);return}xy(e,i,d,a,o,h,v,E,b)}function vA(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],d=h.getSnapshot;h=h.value;try{if(!cn(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function yr(e,i,a,o){i&=~Ff,i&=~Rs,e.suspendedLanes|=i,e.pingedLanes&=~i,o&&(e.warmLanes|=i),o=e.expirationTimes;for(var h=i;0<h;){var d=31-Fe(h),v=1<<d;o[d]=-1,h&=~v}a!==0&&Gn(e,a,i)}function tc(){return(Gt&6)===0?(rl(0),!1):!0}function Zf(){if(It!==null){if(Ft===0)var e=It.return;else e=It,Oi=Es=null,mf(e),_a=null,Yo=0,e=It;for(;e!==null;)ay(e.alternate,e),e=e.return;It=null}}function Ra(e,i){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,kA(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Zf(),Wt=e,It=a=Ci(e.current,null),xt=i,Ft=0,mn=null,dr=!1,Aa=Wr(e,i),Gf=!1,Sa=Dn=Ff=Rs=mr=le=0,sn=nl=null,Qf=!1,(i&8)!==0&&(i|=i&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=i;0<o;){var h=31-Fe(o),d=1<<h;i|=e[h],o&=~d}return zi=i,Au(),a}function Cy(e,i){wt=null,H.H=ju,i===zo||i===Ou?(i=Fg(),Ft=3):i===qg?(i=Fg(),Ft=4):Ft=i===Qp?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,mn=i,It===null&&(le=1,Qu(e,wn(i,e.current)))}function Dy(){var e=H.H;return H.H=ju,e===null?ju:e}function Ny(){var e=H.A;return H.A=yA,e}function Wf(){le=4,dr||(xt&4194048)!==xt&&Cn.current!==null||(Aa=!0),(mr&134217727)===0&&(Rs&134217727)===0||Wt===null||yr(Wt,xt,Dn,!1)}function Jf(e,i,a){var o=Gt;Gt|=2;var h=Dy(),d=Ny();(Wt!==e||xt!==i)&&(Ju=null,Ra(e,i)),i=!1;var v=le;t:do try{if(Ft!==0&&It!==null){var E=It,b=mn;switch(Ft){case 8:Zf(),v=6;break t;case 3:case 2:case 9:case 6:Cn.current===null&&(i=!0);var L=Ft;if(Ft=0,mn=null,Ia(e,E,b,L),a&&Aa){v=0;break t}break;default:L=Ft,Ft=0,mn=null,Ia(e,E,b,L)}}EA(),v=le;break}catch(G){Cy(e,G)}while(!0);return i&&e.shellSuspendCounter++,Oi=Es=null,Gt=o,H.H=h,H.A=d,It===null&&(Wt=null,xt=0,Au()),v}function EA(){for(;It!==null;)Oy(It)}function TA(e,i){var a=Gt;Gt|=2;var o=Dy(),h=Ny();Wt!==e||xt!==i?(Ju=null,Wu=_n()+500,Ra(e,i)):Aa=Wr(e,i);t:do try{if(Ft!==0&&It!==null){i=It;var d=mn;e:switch(Ft){case 1:Ft=0,mn=null,Ia(e,i,d,1);break;case 2:case 9:if(Hg(d)){Ft=0,mn=null,Vy(i);break}i=function(){Ft!==2&&Ft!==9||Wt!==e||(Ft=7),si(e)},d.then(i,i);break t;case 3:Ft=7;break t;case 4:Ft=5;break t;case 7:Hg(d)?(Ft=0,mn=null,Vy(i)):(Ft=0,mn=null,Ia(e,i,d,7));break;case 5:var v=null;switch(It.tag){case 26:v=It.memoizedState;case 5:case 27:var E=It;if(!v||d_(v)){Ft=0,mn=null;var b=E.sibling;if(b!==null)It=b;else{var L=E.return;L!==null?(It=L,ec(L)):It=null}break e}}Ft=0,mn=null,Ia(e,i,d,5);break;case 6:Ft=0,mn=null,Ia(e,i,d,6);break;case 8:Zf(),le=6;break t;default:throw Error(s(462))}}AA();break}catch(G){Cy(e,G)}while(!0);return Oi=Es=null,H.H=o,H.A=h,Gt=a,It!==null?0:(Wt=null,xt=0,Au(),le)}function AA(){for(;It!==null&&!oo();)Oy(It)}function Oy(e){var i=ry(e.alternate,e,zi);e.memoizedProps=e.pendingProps,i===null?ec(e):It=i}function Vy(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=Wp(a,i,i.pendingProps,i.type,void 0,xt);break;case 11:i=Wp(a,i,i.pendingProps,i.type.render,i.ref,xt);break;case 5:mf(i);default:ay(a,i),i=It=Mg(i,zi),i=ry(a,i,zi)}e.memoizedProps=e.pendingProps,i===null?ec(e):It=i}function Ia(e,i,a,o){Oi=Es=null,mf(i),_a=null,Yo=0;var h=i.return;try{if(hA(e,h,i,a,xt)){le=1,Qu(e,wn(a,e.current)),It=null;return}}catch(d){if(h!==null)throw It=h,d;le=1,Qu(e,wn(a,e.current)),It=null;return}i.flags&32768?(Bt||o===1?e=!0:Aa||(xt&536870912)!==0?e=!1:(dr=e=!0,(o===2||o===9||o===3||o===6)&&(o=Cn.current,o!==null&&o.tag===13&&(o.flags|=16384))),My(i,e)):ec(i)}function ec(e){var i=e;do{if((i.flags&32768)!==0){My(i,dr);return}e=i.return;var a=dA(i.alternate,i,zi);if(a!==null){It=a;return}if(i=i.sibling,i!==null){It=i;return}It=i=e}while(i!==null);le===0&&(le=5)}function My(e,i){do{var a=mA(e.alternate,e);if(a!==null){a.flags&=32767,It=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){It=e;return}It=e=a}while(e!==null);le=6,It=null}function xy(e,i,a,o,h,d,v,E,b){e.cancelPendingCommit=null;do nc();while(Be!==0);if((Gt&6)!==0)throw Error(s(327));if(i!==null){if(i===e.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=qh,mo(e,a,d,v,E,b),e===Wt&&(It=Wt=null,xt=0),wa=i,pr=e,ba=a,Yf=d,Xf=h,wy=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,RA(Yr,function(){return zy(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=H.T,H.T=null,h=nt.p,nt.p=2,v=Gt,Gt|=4;try{gA(e,i,a)}finally{Gt=v,nt.p=h,H.T=o}}Be=1,Py(),Uy(),ky()}}function Py(){if(Be===1){Be=0;var e=pr,i=wa,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=H.T,H.T=null;var o=nt.p;nt.p=2;var h=Gt;Gt|=4;try{yy(i,e);var d=hd,v=Sg(e.containerInfo),E=d.focusedElem,b=d.selectionRange;if(v!==E&&E&&E.ownerDocument&&Ag(E.ownerDocument.documentElement,E)){if(b!==null&&kh(E)){var L=b.start,G=b.end;if(G===void 0&&(G=L),"selectionStart"in E)E.selectionStart=L,E.selectionEnd=Math.min(G,E.value.length);else{var K=E.ownerDocument||document,z=K&&K.defaultView||window;if(z.getSelection){var B=z.getSelection(),yt=E.textContent.length,ht=Math.min(b.start,yt),Xt=b.end===void 0?ht:Math.min(b.end,yt);!B.extend&&ht>Xt&&(v=Xt,Xt=ht,ht=v);var x=Tg(E,ht),N=Tg(E,Xt);if(x&&N&&(B.rangeCount!==1||B.anchorNode!==x.node||B.anchorOffset!==x.offset||B.focusNode!==N.node||B.focusOffset!==N.offset)){var k=K.createRange();k.setStart(x.node,x.offset),B.removeAllRanges(),ht>Xt?(B.addRange(k),B.extend(N.node,N.offset)):(k.setEnd(N.node,N.offset),B.addRange(k))}}}}for(K=[],B=E;B=B.parentNode;)B.nodeType===1&&K.push({element:B,left:B.scrollLeft,top:B.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<K.length;E++){var F=K[E];F.element.scrollLeft=F.left,F.element.scrollTop=F.top}}mc=!!cd,hd=cd=null}finally{Gt=h,nt.p=o,H.T=a}}e.current=i,Be=2}}function Uy(){if(Be===2){Be=0;var e=pr,i=wa,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=H.T,H.T=null;var o=nt.p;nt.p=2;var h=Gt;Gt|=4;try{dy(e,i.alternate,i)}finally{Gt=h,nt.p=o,H.T=a}}Be=3}}function ky(){if(Be===4||Be===3){Be=0,Zl();var e=pr,i=wa,a=ba,o=wy;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Be=5:(Be=0,wa=pr=null,Ly(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(gr=null),Gs(a),i=i.stateNode,Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(ae,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=H.T,h=nt.p,nt.p=2,H.T=null;try{for(var d=e.onRecoverableError,v=0;v<o.length;v++){var E=o[v];d(E.value,{componentStack:E.stack})}}finally{H.T=i,nt.p=h}}(ba&3)!==0&&nc(),si(e),h=e.pendingLanes,(a&4194090)!==0&&(h&42)!==0?e===$f?il++:(il=0,$f=e):il=0,rl(0)}}function Ly(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,ko(i)))}function nc(e){return Py(),Uy(),ky(),zy()}function zy(){if(Be!==5)return!1;var e=pr,i=Yf;Yf=0;var a=Gs(ba),o=H.T,h=nt.p;try{nt.p=32>a?32:a,H.T=null,a=Xf,Xf=null;var d=pr,v=ba;if(Be=0,wa=pr=null,ba=0,(Gt&6)!==0)throw Error(s(331));var E=Gt;if(Gt|=4,Ay(d.current),vy(d,d.current,v,a),Gt=E,rl(0,!1),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(ae,d)}catch{}return!0}finally{nt.p=h,H.T=o,Ly(e,i)}}function By(e,i,a){i=wn(a,i),i=Cf(e.stateNode,i,2),e=ar(e,i,2),e!==null&&(yi(e,2),si(e))}function $t(e,i,a){if(e.tag===3)By(e,e,a);else for(;i!==null;){if(i.tag===3){By(i,e,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(gr===null||!gr.has(o))){e=wn(a,e),a=Gp(2),o=ar(i,a,2),o!==null&&(Fp(a,o,i,e),yi(o,2),si(o));break}}i=i.return}}function td(e,i,a){var o=e.pingCache;if(o===null){o=e.pingCache=new _A;var h=new Set;o.set(i,h)}else h=o.get(i),h===void 0&&(h=new Set,o.set(i,h));h.has(a)||(Gf=!0,h.add(a),e=SA.bind(null,e,i,a),i.then(e,e))}function SA(e,i,a){var o=e.pingCache;o!==null&&o.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Wt===e&&(xt&a)===a&&(le===4||le===3&&(xt&62914560)===xt&&300>_n()-Kf?(Gt&2)===0&&Ra(e,0):Ff|=a,Sa===xt&&(Sa=0)),si(e)}function jy(e,i){i===0&&(i=fo()),e=la(e,i),e!==null&&(yi(e,i),si(e))}function wA(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),jy(e,a)}function bA(e,i){var a=0;switch(e.tag){case 13:var o=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(i),jy(e,a)}function RA(e,i){return Qr(e,i)}var ic=null,Ca=null,ed=!1,rc=!1,nd=!1,Is=0;function si(e){e!==Ca&&e.next===null&&(Ca===null?ic=Ca=e:Ca=Ca.next=e),rc=!0,ed||(ed=!0,CA())}function rl(e,i){if(!nd&&rc){nd=!0;do for(var a=!1,o=ic;o!==null;){if(e!==0){var h=o.pendingLanes;if(h===0)var d=0;else{var v=o.suspendedLanes,E=o.pingedLanes;d=(1<<31-Fe(42|e)+1)-1,d&=h&~(v&~E),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,Fy(o,d))}else d=xt,d=Hs(o,o===Wt?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(d&3)===0||Wr(o,d)||(a=!0,Fy(o,d));o=o.next}while(a);nd=!1}}function IA(){qy()}function qy(){rc=ed=!1;var e=0;Is!==0&&(UA()&&(e=Is),Is=0);for(var i=_n(),a=null,o=ic;o!==null;){var h=o.next,d=Hy(o,i);d===0?(o.next=null,a===null?ic=h:a.next=h,h===null&&(Ca=a)):(a=o,(e!==0||(d&3)!==0)&&(rc=!0)),o=h}rl(e)}function Hy(e,i){for(var a=e.suspendedLanes,o=e.pingedLanes,h=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var v=31-Fe(d),E=1<<v,b=h[v];b===-1?((E&a)===0||(E&o)!==0)&&(h[v]=co(E,i)):b<=i&&(e.expiredLanes|=E),d&=~E}if(i=Wt,a=xt,a=Hs(e,e===i?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===i&&(Ft===2||Ft===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&Kr(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Wr(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(o!==null&&Kr(o),Gs(a)){case 2:case 8:a=js;break;case 32:a=Yr;break;case 268435456:a=qs;break;default:a=Yr}return o=Gy.bind(null,e),a=Qr(a,o),e.callbackPriority=i,e.callbackNode=a,i}return o!==null&&o!==null&&Kr(o),e.callbackPriority=2,e.callbackNode=null,2}function Gy(e,i){if(Be!==0&&Be!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(nc()&&e.callbackNode!==a)return null;var o=xt;return o=Hs(e,e===Wt?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(Ry(e,o,i),Hy(e,_n()),e.callbackNode!=null&&e.callbackNode===a?Gy.bind(null,e):null)}function Fy(e,i){if(nc())return null;Ry(e,i,!0)}function CA(){LA(function(){(Gt&6)!==0?Qr(lo,IA):qy()})}function id(){return Is===0&&(Is=ho()),Is}function Qy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:$s(""+e)}function Ky(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function DA(e,i,a,o,h){if(i==="submit"&&a&&a.stateNode===h){var d=Qy((h[ge]||null).action),v=o.submitter;v&&(i=(i=v[ge]||null)?Qy(i.formAction):v.getAttribute("formAction"),i!==null&&(d=i,v=null));var E=new Zs("action","action",null,o,h);e.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Is!==0){var b=v?Ky(h,v):new FormData(h);Sf(a,{pending:!0,data:b,method:h.method,action:d},null,b)}}else typeof d=="function"&&(E.preventDefault(),b=v?Ky(h,v):new FormData(h),Sf(a,{pending:!0,data:b,method:h.method,action:d},d,b))},currentTarget:h}]})}}for(var rd=0;rd<jh.length;rd++){var sd=jh[rd],NA=sd.toLowerCase(),OA=sd[0].toUpperCase()+sd.slice(1);Pn(NA,"on"+OA)}Pn(Rg,"onAnimationEnd"),Pn(Ig,"onAnimationIteration"),Pn(Cg,"onAnimationStart"),Pn("dblclick","onDoubleClick"),Pn("focusin","onFocus"),Pn("focusout","onBlur"),Pn(YT,"onTransitionRun"),Pn(XT,"onTransitionStart"),Pn($T,"onTransitionCancel"),Pn(Dg,"onTransitionEnd"),vi("onMouseEnter",["mouseout","mouseover"]),vi("onMouseLeave",["mouseout","mouseover"]),vi("onPointerEnter",["pointerout","pointerover"]),vi("onPointerLeave",["pointerout","pointerover"]),Mn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Mn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Mn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Mn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Mn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Mn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(sl));function Yy(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],h=o.event;o=o.listeners;t:{var d=void 0;if(i)for(var v=o.length-1;0<=v;v--){var E=o[v],b=E.instance,L=E.currentTarget;if(E=E.listener,b!==d&&h.isPropagationStopped())break t;d=E,h.currentTarget=L;try{d(h)}catch(G){Fu(G)}h.currentTarget=null,d=b}else for(v=0;v<o.length;v++){if(E=o[v],b=E.instance,L=E.currentTarget,E=E.listener,b!==d&&h.isPropagationStopped())break t;d=E,h.currentTarget=L;try{d(h)}catch(G){Fu(G)}h.currentTarget=null,d=b}}}}function Ct(e,i){var a=i[po];a===void 0&&(a=i[po]=new Set);var o=e+"__bubble";a.has(o)||(Xy(i,e,2,!1),a.add(o))}function ad(e,i,a){var o=0;i&&(o|=4),Xy(a,e,o,i)}var sc="_reactListening"+Math.random().toString(36).slice(2);function od(e){if(!e[sc]){e[sc]=!0,yo.forEach(function(a){a!=="selectionchange"&&(VA.has(a)||ad(a,!1,e),ad(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[sc]||(i[sc]=!0,ad("selectionchange",!1,i))}}function Xy(e,i,a,o){switch(v_(i)){case 2:var h=sS;break;case 8:h=aS;break;default:h=Td}a=h.bind(null,i,a,e),h=void 0,!An||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),o?h!==void 0?e.addEventListener(i,a,{capture:!0,passive:h}):e.addEventListener(i,a,!0):h!==void 0?e.addEventListener(i,a,{passive:h}):e.addEventListener(i,a,!1)}function ld(e,i,a,o,h){var d=o;if((i&1)===0&&(i&2)===0&&o!==null)t:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var E=o.stateNode.containerInfo;if(E===h)break;if(v===4)for(v=o.return;v!==null;){var b=v.tag;if((b===3||b===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;E!==null;){if(v=_i(E),v===null)return;if(b=v.tag,b===5||b===6||b===26||b===27){o=d=v;continue t}E=E.parentNode}}o=o.return}ou(function(){var L=d,G=Tn(a),K=[];t:{var z=Ng.get(e);if(z!==void 0){var B=Zs,yt=e;switch(e){case"keypress":if($n(a)===0)break t;case"keydown":case"keyup":B=ia;break;case"focusin":yt="focus",B=ta;break;case"focusout":yt="blur",B=ta;break;case"beforeblur":case"afterblur":B=ta;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=Sn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=Mh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=gu;break;case Rg:case Ig:case Cg:B=ea;break;case Dg:B=yu;break;case"scroll":case"scrollend":B=lu;break;case"wheel":B=ra;break;case"copy":case"cut":case"paste":B=na;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=Do;break;case"toggle":case"beforetoggle":B=vu}var ht=(i&4)!==0,Xt=!ht&&(e==="scroll"||e==="scrollend"),x=ht?z!==null?z+"Capture":null:z;ht=[];for(var N=L,k;N!==null;){var F=N;if(k=F.stateNode,F=F.tag,F!==5&&F!==26&&F!==27||k===null||x===null||(F=as(N,x),F!=null&&ht.push(al(N,F,k))),Xt)break;N=N.return}0<ht.length&&(z=new B(z,yt,null,a,G),K.push({event:z,listeners:ht}))}}if((i&7)===0){t:{if(z=e==="mouseover"||e==="pointerover",B=e==="mouseout"||e==="pointerout",z&&a!==Ai&&(yt=a.relatedTarget||a.fromElement)&&(_i(yt)||yt[vn]))break t;if((B||z)&&(z=G.window===G?G:(z=G.ownerDocument)?z.defaultView||z.parentWindow:window,B?(yt=a.relatedTarget||a.toElement,B=L,yt=yt?_i(yt):null,yt!==null&&(Xt=c(yt),ht=yt.tag,yt!==Xt||ht!==5&&ht!==27&&ht!==6)&&(yt=null)):(B=null,yt=L),B!==yt)){if(ht=Sn,F="onMouseLeave",x="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(ht=Do,F="onPointerLeave",x="onPointerEnter",N="pointer"),Xt=B==null?z:Qn(B),k=yt==null?z:Qn(yt),z=new ht(F,N+"leave",B,a,G),z.target=Xt,z.relatedTarget=k,F=null,_i(G)===L&&(ht=new ht(x,N+"enter",yt,a,G),ht.target=k,ht.relatedTarget=Xt,F=ht),Xt=F,B&&yt)e:{for(ht=B,x=yt,N=0,k=ht;k;k=Da(k))N++;for(k=0,F=x;F;F=Da(F))k++;for(;0<N-k;)ht=Da(ht),N--;for(;0<k-N;)x=Da(x),k--;for(;N--;){if(ht===x||x!==null&&ht===x.alternate)break e;ht=Da(ht),x=Da(x)}ht=null}else ht=null;B!==null&&$y(K,z,B,ht,!1),yt!==null&&Xt!==null&&$y(K,Xt,yt,ht,!0)}}t:{if(z=L?Qn(L):window,B=z.nodeName&&z.nodeName.toLowerCase(),B==="select"||B==="input"&&z.type==="file")var at=gg;else if(be(z))if(pg)at=FT;else{at=HT;var Rt=qT}else B=z.nodeName,!B||B.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?L&&Ao(L.elementType)&&(at=gg):at=GT;if(at&&(at=at(e,L))){Ii(K,at,a,G);break t}Rt&&Rt(e,z,L),e==="focusout"&&L&&z.type==="number"&&L.memoizedProps.value!=null&&er(z,"number",z.value)}switch(Rt=L?Qn(L):window,e){case"focusin":(be(Rt)||Rt.contentEditable==="true")&&(sa=Rt,Lh=L,Vo=null);break;case"focusout":Vo=Lh=sa=null;break;case"mousedown":zh=!0;break;case"contextmenu":case"mouseup":case"dragend":zh=!1,wg(K,a,G);break;case"selectionchange":if(KT)break;case"keydown":case"keyup":wg(K,a,G)}var ot;if(Jn)t:{switch(e){case"compositionstart":var dt="onCompositionStart";break t;case"compositionend":dt="onCompositionEnd";break t;case"compositionupdate":dt="onCompositionUpdate";break t}dt=void 0}else Vt?j(e,a)&&(dt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(dt="onCompositionStart");dt&&(_&&a.locale!=="ko"&&(Vt||dt!=="onCompositionStart"?dt==="onCompositionEnd"&&Vt&&(ot=wo()):(Xn=G,nr="value"in Xn?Xn.value:Xn.textContent,Vt=!0)),Rt=ac(L,dt),0<Rt.length&&(dt=new Io(dt,e,null,a,G),K.push({event:dt,listeners:Rt}),ot?dt.data=ot:(ot=tt(a),ot!==null&&(dt.data=ot)))),(ot=m?we(e,a):Mt(e,a))&&(dt=ac(L,"onBeforeInput"),0<dt.length&&(Rt=new Io("onBeforeInput","beforeinput",null,a,G),K.push({event:Rt,listeners:dt}),Rt.data=ot)),DA(K,e,L,a,G)}Yy(K,i)})}function al(e,i,a){return{instance:e,listener:i,currentTarget:a}}function ac(e,i){for(var a=i+"Capture",o=[];e!==null;){var h=e,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=as(e,a),h!=null&&o.unshift(al(e,h,d)),h=as(e,i),h!=null&&o.push(al(e,h,d))),e.tag===3)return o;e=e.return}return[]}function Da(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function $y(e,i,a,o,h){for(var d=i._reactName,v=[];a!==null&&a!==o;){var E=a,b=E.alternate,L=E.stateNode;if(E=E.tag,b!==null&&b===o)break;E!==5&&E!==26&&E!==27||L===null||(b=L,h?(L=as(a,d),L!=null&&v.unshift(al(a,L,b))):h||(L=as(a,d),L!=null&&v.push(al(a,L,b)))),a=a.return}v.length!==0&&e.push({event:i,listeners:v})}var MA=/\r\n?/g,xA=/\u0000|\uFFFD/g;function Zy(e){return(typeof e=="string"?e:""+e).replace(MA,`
`).replace(xA,"")}function Wy(e,i){return i=Zy(i),Zy(e)===i}function oc(){}function Yt(e,i,a,o,h,d){switch(a){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||En(e,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&En(e,""+o);break;case"className":Kn(e,"class",o);break;case"tabIndex":Kn(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Kn(e,a,o);break;case"style":To(e,o,d);break;case"data":if(i!=="object"){Kn(e,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=$s(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&Yt(e,i,"name",h.name,h,null),Yt(e,i,"formEncType",h.formEncType,h,null),Yt(e,i,"formMethod",h.formMethod,h,null),Yt(e,i,"formTarget",h.formTarget,h,null)):(Yt(e,i,"encType",h.encType,h,null),Yt(e,i,"method",h.method,h,null),Yt(e,i,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=$s(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=oc);break;case"onScroll":o!=null&&Ct("scroll",e);break;case"onScrollEnd":o!=null&&Ct("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=$s(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":Ct("beforetoggle",e),Ct("toggle",e),tr(e,"popover",o);break;case"xlinkActuate":ke(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":ke(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":ke(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":ke(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":ke(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":ke(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":ke(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":ke(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":ke(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":tr(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Oh.get(a)||a,tr(e,a,o))}}function ud(e,i,a,o,h,d){switch(a){case"style":To(e,o,d);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof o=="string"?En(e,o):(typeof o=="number"||typeof o=="bigint")&&En(e,""+o);break;case"onScroll":o!=null&&Ct("scroll",e);break;case"onScrollEnd":o!=null&&Ct("scrollend",e);break;case"onClick":o!=null&&(e.onclick=oc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fs.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=e[ge]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(i,d,h),typeof o=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,o,h);break t}a in e?e[a]=o:o===!0?e.setAttribute(a,""):tr(e,a,o)}}}function je(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ct("error",e),Ct("load",e);var o=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Yt(e,i,d,v,a,null)}}h&&Yt(e,i,"srcSet",a.srcSet,a,null),o&&Yt(e,i,"src",a.src,a,null);return;case"input":Ct("invalid",e);var E=d=v=h=null,b=null,L=null;for(o in a)if(a.hasOwnProperty(o)){var G=a[o];if(G!=null)switch(o){case"name":h=G;break;case"type":v=G;break;case"checked":b=G;break;case"defaultChecked":L=G;break;case"value":d=G;break;case"defaultValue":E=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,i));break;default:Yt(e,i,o,G,a,null)}}is(e,d,E,b,L,v,h,!1),Xs(e);return;case"select":Ct("invalid",e),o=v=d=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":d=E;break;case"defaultValue":v=E;break;case"multiple":o=E;default:Yt(e,i,h,E,a,null)}i=d,a=v,e.multiple=!!o,i!=null?Ti(e,!!o,i,!1):a!=null&&Ti(e,!!o,a,!0);return;case"textarea":Ct("invalid",e),d=h=o=null;for(v in a)if(a.hasOwnProperty(v)&&(E=a[v],E!=null))switch(v){case"value":o=E;break;case"defaultValue":h=E;break;case"children":d=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:Yt(e,i,v,E,a,null)}rs(e,o,h,d),Xs(e);return;case"option":for(b in a)if(a.hasOwnProperty(b)&&(o=a[b],o!=null))switch(b){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Yt(e,i,b,o,a,null)}return;case"dialog":Ct("beforetoggle",e),Ct("toggle",e),Ct("cancel",e),Ct("close",e);break;case"iframe":case"object":Ct("load",e);break;case"video":case"audio":for(o=0;o<sl.length;o++)Ct(sl[o],e);break;case"image":Ct("error",e),Ct("load",e);break;case"details":Ct("toggle",e);break;case"embed":case"source":case"link":Ct("error",e),Ct("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in a)if(a.hasOwnProperty(L)&&(o=a[L],o!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Yt(e,i,L,o,a,null)}return;default:if(Ao(i)){for(G in a)a.hasOwnProperty(G)&&(o=a[G],o!==void 0&&ud(e,i,G,o,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(o=a[E],o!=null&&Yt(e,i,E,o,a,null))}function PA(e,i,a,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,v=null,E=null,b=null,L=null,G=null;for(B in a){var K=a[B];if(a.hasOwnProperty(B)&&K!=null)switch(B){case"checked":break;case"value":break;case"defaultValue":b=K;default:o.hasOwnProperty(B)||Yt(e,i,B,null,o,K)}}for(var z in o){var B=o[z];if(K=a[z],o.hasOwnProperty(z)&&(B!=null||K!=null))switch(z){case"type":d=B;break;case"name":h=B;break;case"checked":L=B;break;case"defaultChecked":G=B;break;case"value":v=B;break;case"defaultValue":E=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(137,i));break;default:B!==K&&Yt(e,i,z,B,o,K)}}un(e,v,E,b,L,G,d,h);return;case"select":B=v=E=z=null;for(d in a)if(b=a[d],a.hasOwnProperty(d)&&b!=null)switch(d){case"value":break;case"multiple":B=b;default:o.hasOwnProperty(d)||Yt(e,i,d,null,o,b)}for(h in o)if(d=o[h],b=a[h],o.hasOwnProperty(h)&&(d!=null||b!=null))switch(h){case"value":z=d;break;case"defaultValue":E=d;break;case"multiple":v=d;default:d!==b&&Yt(e,i,h,d,o,b)}i=E,a=v,o=B,z!=null?Ti(e,!!a,z,!1):!!o!=!!a&&(i!=null?Ti(e,!!a,i,!0):Ti(e,!!a,a?[]:"",!1));return;case"textarea":B=z=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Yt(e,i,E,null,o,h)}for(v in o)if(h=o[v],d=a[v],o.hasOwnProperty(v)&&(h!=null||d!=null))switch(v){case"value":z=h;break;case"defaultValue":B=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&Yt(e,i,v,h,o,d)}Qt(e,z,B);return;case"option":for(var yt in a)if(z=a[yt],a.hasOwnProperty(yt)&&z!=null&&!o.hasOwnProperty(yt))switch(yt){case"selected":e.selected=!1;break;default:Yt(e,i,yt,null,o,z)}for(b in o)if(z=o[b],B=a[b],o.hasOwnProperty(b)&&z!==B&&(z!=null||B!=null))switch(b){case"selected":e.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:Yt(e,i,b,z,o,B)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ht in a)z=a[ht],a.hasOwnProperty(ht)&&z!=null&&!o.hasOwnProperty(ht)&&Yt(e,i,ht,null,o,z);for(L in o)if(z=o[L],B=a[L],o.hasOwnProperty(L)&&z!==B&&(z!=null||B!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(s(137,i));break;default:Yt(e,i,L,z,o,B)}return;default:if(Ao(i)){for(var Xt in a)z=a[Xt],a.hasOwnProperty(Xt)&&z!==void 0&&!o.hasOwnProperty(Xt)&&ud(e,i,Xt,void 0,o,z);for(G in o)z=o[G],B=a[G],!o.hasOwnProperty(G)||z===B||z===void 0&&B===void 0||ud(e,i,G,z,o,B);return}}for(var x in a)z=a[x],a.hasOwnProperty(x)&&z!=null&&!o.hasOwnProperty(x)&&Yt(e,i,x,null,o,z);for(K in o)z=o[K],B=a[K],!o.hasOwnProperty(K)||z===B||z==null&&B==null||Yt(e,i,K,z,o,B)}var cd=null,hd=null;function lc(e){return e.nodeType===9?e:e.ownerDocument}function Jy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function t_(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function fd(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var dd=null;function UA(){var e=window.event;return e&&e.type==="popstate"?e===dd?!1:(dd=e,!0):(dd=null,!1)}var e_=typeof setTimeout=="function"?setTimeout:void 0,kA=typeof clearTimeout=="function"?clearTimeout:void 0,n_=typeof Promise=="function"?Promise:void 0,LA=typeof queueMicrotask=="function"?queueMicrotask:typeof n_<"u"?function(e){return n_.resolve(null).then(e).catch(zA)}:e_;function zA(e){setTimeout(function(){throw e})}function _r(e){return e==="head"}function i_(e,i){var a=i,o=0,h=0;do{var d=a.nextSibling;if(e.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<o&&8>o){a=o;var v=e.ownerDocument;if(a&1&&ol(v.documentElement),a&2&&ol(v.body),a&4)for(a=v.head,ol(a),v=a.firstChild;v;){var E=v.nextSibling,b=v.nodeName;v[Jr]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=E}}if(h===0){e.removeChild(d),gl(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:o=a.charCodeAt(0)-48;else o=0;a=d}while(a);gl(i)}function md(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":md(a),Ji(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function BA(e,i,a,o){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[Jr])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=kn(e.nextSibling),e===null)break}return null}function jA(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=kn(e.nextSibling),e===null))return null;return e}function gd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function qA(e,i){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")i();else{var o=function(){i(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function kn(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return e}var pd=null;function r_(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return e;i--}else a==="/$"&&i++}e=e.previousSibling}return null}function s_(e,i,a){switch(i=lc(a),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function ol(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);Ji(e)}var Nn=new Map,a_=new Set;function uc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Bi=nt.d;nt.d={f:HA,r:GA,D:FA,C:QA,L:KA,m:YA,X:$A,S:XA,M:ZA};function HA(){var e=Bi.f(),i=tc();return e||i}function GA(e){var i=Fn(e);i!==null&&i.tag===5&&i.type==="form"?Rp(i):Bi.r(e)}var Na=typeof document>"u"?null:document;function o_(e,i,a){var o=Na;if(o&&typeof i=="string"&&i){var h=pe(i);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),a_.has(h)||(a_.add(h),e={rel:e,crossOrigin:a,href:i},o.querySelector(h)===null&&(i=o.createElement("link"),je(i,"link",e),ce(i),o.head.appendChild(i)))}}function FA(e){Bi.D(e),o_("dns-prefetch",e,null)}function QA(e,i){Bi.C(e,i),o_("preconnect",e,i)}function KA(e,i,a){Bi.L(e,i,a);var o=Na;if(o&&e&&i){var h='link[rel="preload"][as="'+pe(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+pe(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+pe(a.imageSizes)+'"]')):h+='[href="'+pe(e)+'"]';var d=h;switch(i){case"style":d=Oa(e);break;case"script":d=Va(e)}Nn.has(d)||(e=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),Nn.set(d,e),o.querySelector(h)!==null||i==="style"&&o.querySelector(ll(d))||i==="script"&&o.querySelector(ul(d))||(i=o.createElement("link"),je(i,"link",e),ce(i),o.head.appendChild(i)))}}function YA(e,i){Bi.m(e,i);var a=Na;if(a&&e){var o=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+pe(o)+'"][href="'+pe(e)+'"]',d=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Va(e)}if(!Nn.has(d)&&(e=T({rel:"modulepreload",href:e},i),Nn.set(d,e),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ul(d)))return}o=a.createElement("link"),je(o,"link",e),ce(o),a.head.appendChild(o)}}}function XA(e,i,a){Bi.S(e,i,a);var o=Na;if(o&&e){var h=We(o).hoistableStyles,d=Oa(e);i=i||"default";var v=h.get(d);if(!v){var E={loading:0,preload:null};if(v=o.querySelector(ll(d)))E.loading=5;else{e=T({rel:"stylesheet",href:e,"data-precedence":i},a),(a=Nn.get(d))&&yd(e,a);var b=v=o.createElement("link");ce(b),je(b,"link",e),b._p=new Promise(function(L,G){b.onload=L,b.onerror=G}),b.addEventListener("load",function(){E.loading|=1}),b.addEventListener("error",function(){E.loading|=2}),E.loading|=4,cc(v,i,o)}v={type:"stylesheet",instance:v,count:1,state:E},h.set(d,v)}}}function $A(e,i){Bi.X(e,i);var a=Na;if(a&&e){var o=We(a).hoistableScripts,h=Va(e),d=o.get(h);d||(d=a.querySelector(ul(h)),d||(e=T({src:e,async:!0},i),(i=Nn.get(h))&&_d(e,i),d=a.createElement("script"),ce(d),je(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function ZA(e,i){Bi.M(e,i);var a=Na;if(a&&e){var o=We(a).hoistableScripts,h=Va(e),d=o.get(h);d||(d=a.querySelector(ul(h)),d||(e=T({src:e,async:!0,type:"module"},i),(i=Nn.get(h))&&_d(e,i),d=a.createElement("script"),ce(d),je(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function l_(e,i,a,o){var h=(h=vt.current)?uc(h):null;if(!h)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Oa(a.href),a=We(h).hoistableStyles,o=a.get(i),o||(o={type:"style",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Oa(a.href);var d=We(h).hoistableStyles,v=d.get(e);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,v),(d=h.querySelector(ll(e)))&&!d._p&&(v.instance=d,v.state.loading=5),Nn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Nn.set(e,a),d||WA(h,e,a,v.state))),i&&o===null)throw Error(s(528,""));return v}if(i&&o!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Va(a),a=We(h).hoistableScripts,o=a.get(i),o||(o={type:"script",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Oa(e){return'href="'+pe(e)+'"'}function ll(e){return'link[rel="stylesheet"]['+e+"]"}function u_(e){return T({},e,{"data-precedence":e.precedence,precedence:null})}function WA(e,i,a,o){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=e.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),je(i,"link",a),ce(i),e.head.appendChild(i))}function Va(e){return'[src="'+pe(e)+'"]'}function ul(e){return"script[async]"+e}function c_(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var o=e.querySelector('style[data-href~="'+pe(a.href)+'"]');if(o)return i.instance=o,ce(o),o;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),ce(o),je(o,"style",h),cc(o,a.precedence,e),i.instance=o;case"stylesheet":h=Oa(a.href);var d=e.querySelector(ll(h));if(d)return i.state.loading|=4,i.instance=d,ce(d),d;o=u_(a),(h=Nn.get(h))&&yd(o,h),d=(e.ownerDocument||e).createElement("link"),ce(d);var v=d;return v._p=new Promise(function(E,b){v.onload=E,v.onerror=b}),je(d,"link",o),i.state.loading|=4,cc(d,a.precedence,e),i.instance=d;case"script":return d=Va(a.src),(h=e.querySelector(ul(d)))?(i.instance=h,ce(h),h):(o=a,(h=Nn.get(d))&&(o=T({},a),_d(o,h)),e=e.ownerDocument||e,h=e.createElement("script"),ce(h),je(h,"link",o),e.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,cc(o,a.precedence,e));return i.instance}function cc(e,i,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,d=h,v=0;v<o.length;v++){var E=o[v];if(E.dataset.precedence===i)d=E;else if(d!==h)break}d?d.parentNode.insertBefore(e,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function yd(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function _d(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var hc=null;function h_(e,i,a){if(hc===null){var o=new Map,h=hc=new Map;h.set(a,o)}else h=hc,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var d=a[h];if(!(d[Jr]||d[Se]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(i)||"";v=e+v;var E=o.get(v);E?E.push(d):o.set(v,[d])}}return o}function f_(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function JA(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function d_(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var cl=null;function tS(){}function eS(e,i,a){if(cl===null)throw Error(s(475));var o=cl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=Oa(a.href),d=e.querySelector(ll(h));if(d){e=d._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(o.count++,o=fc.bind(o),e.then(o,o)),i.state.loading|=4,i.instance=d,ce(d);return}d=e.ownerDocument||e,a=u_(a),(h=Nn.get(h))&&yd(a,h),d=d.createElement("link"),ce(d);var v=d;v._p=new Promise(function(E,b){v.onload=E,v.onerror=b}),je(d,"link",a),i.instance=d}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(i,e),(e=i.state.preload)&&(i.state.loading&3)===0&&(o.count++,i=fc.bind(o),e.addEventListener("load",i),e.addEventListener("error",i))}}function nS(){if(cl===null)throw Error(s(475));var e=cl;return e.stylesheets&&e.count===0&&vd(e,e.stylesheets),0<e.count?function(i){var a=setTimeout(function(){if(e.stylesheets&&vd(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(a)}}:null}function fc(){if(this.count--,this.count===0){if(this.stylesheets)vd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var dc=null;function vd(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,dc=new Map,i.forEach(iS,e),dc=null,fc.call(e))}function iS(e,i){if(!(i.state.loading&4)){var a=dc.get(e);if(a)var o=a.get(null);else{a=new Map,dc.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var v=h[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}h=i.instance,v=h.getAttribute("data-precedence"),d=a.get(v)||o,d===o&&a.set(null,h),a.set(v,h),this.count++,o=fc.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),d?d.parentNode.insertBefore(h,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),i.state.loading|=4}}var hl={$$typeof:ft,Provider:null,Consumer:null,_currentValue:lt,_currentValue2:lt,_threadCount:0};function rS(e,i,a,o,h,d,v,E){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=pi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pi(0),this.hiddenUpdates=pi(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function m_(e,i,a,o,h,d,v,E,b,L,G,K){return e=new rS(e,i,a,v,E,b,L,K),i=1,d===!0&&(i|=24),d=hn(3,null,null,i),e.current=d,d.stateNode=e,i=Jh(),i.refCount++,e.pooledCache=i,i.refCount++,d.memoizedState={element:o,isDehydrated:a,cache:i},rf(d),e}function g_(e){return e?(e=ua,e):ua}function p_(e,i,a,o,h,d){h=g_(h),o.context===null?o.context=h:o.pendingContext=h,o=sr(i),o.payload={element:a},d=d===void 0?null:d,d!==null&&(o.callback=d),a=ar(e,o,i),a!==null&&(pn(a,e,i),jo(a,e,i))}function y_(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function Ed(e,i){y_(e,i),(e=e.alternate)&&y_(e,i)}function __(e){if(e.tag===13){var i=la(e,67108864);i!==null&&pn(i,e,67108864),Ed(e,67108864)}}var mc=!0;function sS(e,i,a,o){var h=H.T;H.T=null;var d=nt.p;try{nt.p=2,Td(e,i,a,o)}finally{nt.p=d,H.T=h}}function aS(e,i,a,o){var h=H.T;H.T=null;var d=nt.p;try{nt.p=8,Td(e,i,a,o)}finally{nt.p=d,H.T=h}}function Td(e,i,a,o){if(mc){var h=Ad(o);if(h===null)ld(e,i,o,gc,a),E_(e,o);else if(lS(h,e,i,a,o))o.stopPropagation();else if(E_(e,o),i&4&&-1<oS.indexOf(e)){for(;h!==null;){var d=Fn(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=Vn(d.pendingLanes);if(v!==0){var E=d;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var b=1<<31-Fe(v);E.entanglements[1]|=b,v&=~b}si(d),(Gt&6)===0&&(Wu=_n()+500,rl(0))}}break;case 13:E=la(d,2),E!==null&&pn(E,d,2),tc(),Ed(d,2)}if(d=Ad(o),d===null&&ld(e,i,o,gc,a),d===h)break;h=d}h!==null&&o.stopPropagation()}else ld(e,i,o,null,a)}}function Ad(e){return e=Tn(e),Sd(e)}var gc=null;function Sd(e){if(gc=null,e=_i(e),e!==null){var i=c(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=f(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return gc=e,null}function v_(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(bh()){case lo:return 2;case js:return 8;case Yr:case Rh:return 32;case qs:return 268435456;default:return 32}default:return 32}}var wd=!1,vr=null,Er=null,Tr=null,fl=new Map,dl=new Map,Ar=[],oS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function E_(e,i){switch(e){case"focusin":case"focusout":vr=null;break;case"dragenter":case"dragleave":Er=null;break;case"mouseover":case"mouseout":Tr=null;break;case"pointerover":case"pointerout":fl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":dl.delete(i.pointerId)}}function ml(e,i,a,o,h,d){return e===null||e.nativeEvent!==d?(e={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:d,targetContainers:[h]},i!==null&&(i=Fn(i),i!==null&&__(i)),e):(e.eventSystemFlags|=o,i=e.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),e)}function lS(e,i,a,o,h){switch(i){case"focusin":return vr=ml(vr,e,i,a,o,h),!0;case"dragenter":return Er=ml(Er,e,i,a,o,h),!0;case"mouseover":return Tr=ml(Tr,e,i,a,o,h),!0;case"pointerover":var d=h.pointerId;return fl.set(d,ml(fl.get(d)||null,e,i,a,o,h)),!0;case"gotpointercapture":return d=h.pointerId,dl.set(d,ml(dl.get(d)||null,e,i,a,o,h)),!0}return!1}function T_(e){var i=_i(e.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){e.blockedOn=i,tu(e.priority,function(){if(a.tag===13){var o=gn();o=$i(o);var h=la(a,o);h!==null&&pn(h,a,o),Ed(a,o)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function pc(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=Ad(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);Ai=o,a.target.dispatchEvent(o),Ai=null}else return i=Fn(a),i!==null&&__(i),e.blockedOn=a,!1;i.shift()}return!0}function A_(e,i,a){pc(e)&&a.delete(i)}function uS(){wd=!1,vr!==null&&pc(vr)&&(vr=null),Er!==null&&pc(Er)&&(Er=null),Tr!==null&&pc(Tr)&&(Tr=null),fl.forEach(A_),dl.forEach(A_)}function yc(e,i){e.blockedOn===i&&(e.blockedOn=null,wd||(wd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,uS)))}var _c=null;function S_(e){_c!==e&&(_c=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){_c===e&&(_c=null);for(var i=0;i<e.length;i+=3){var a=e[i],o=e[i+1],h=e[i+2];if(typeof o!="function"){if(Sd(o||a)===null)continue;break}var d=Fn(a);d!==null&&(e.splice(i,3),i-=3,Sf(d,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function gl(e){function i(b){return yc(b,e)}vr!==null&&yc(vr,e),Er!==null&&yc(Er,e),Tr!==null&&yc(Tr,e),fl.forEach(i),dl.forEach(i);for(var a=0;a<Ar.length;a++){var o=Ar[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Ar.length&&(a=Ar[0],a.blockedOn===null);)T_(a),a.blockedOn===null&&Ar.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],d=a[o+1],v=h[ge]||null;if(typeof d=="function")v||S_(a);else if(v){var E=null;if(d&&d.hasAttribute("formAction")){if(h=d,v=d[ge]||null)E=v.formAction;else if(Sd(h)!==null)continue}else E=v.action;typeof E=="function"?a[o+1]=E:(a.splice(o,3),o-=3),S_(a)}}}function bd(e){this._internalRoot=e}vc.prototype.render=bd.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,o=gn();p_(a,o,e,i,null,null)},vc.prototype.unmount=bd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;p_(e.current,2,null,e,null,null),tc(),i[vn]=null}};function vc(e){this._internalRoot=e}vc.prototype.unstable_scheduleHydration=function(e){if(e){var i=Zi();e={blockedOn:null,target:e,priority:i};for(var a=0;a<Ar.length&&i!==0&&i<Ar[a].priority;a++);Ar.splice(a,0,e),a===0&&T_(e)}};var w_=t.version;if(w_!=="19.1.1")throw Error(s(527,w_,"19.1.1"));nt.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=p(i),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var cS={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ec=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ec.isDisabled&&Ec.supportsFiber)try{ae=Ec.inject(cS),Ht=Ec}catch{}}return yl.createRoot=function(e,i){if(!l(e))throw Error(s(299));var a=!1,o="",h=Bp,d=jp,v=qp,E=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(E=i.unstable_transitionCallbacks)),i=m_(e,1,!1,null,null,a,o,h,d,v,E,null),e[vn]=i.current,od(e),new bd(i)},yl.hydrateRoot=function(e,i,a){if(!l(e))throw Error(s(299));var o=!1,h="",d=Bp,v=jp,E=qp,b=null,L=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(b=a.unstable_transitionCallbacks),a.formState!==void 0&&(L=a.formState)),i=m_(e,1,!0,i,a??null,o,h,d,v,E,b,L),i.context=g_(null),a=i.current,o=gn(),o=$i(o),h=sr(o),h.callback=null,ar(a,h,o),a=o,i.current.lanes=a,yi(i,a),si(i),e[vn]=i.current,od(e),new vc(i)},yl.version="19.1.1",yl}var x_;function TS(){if(x_)return Cd.exports;x_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Cd.exports=ES(),Cd.exports}var AS=TS();const SS=d0(AS),wS=()=>{};var P_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0=function(r){const t=[];let n=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?t[n++]=l:l<2048?(t[n++]=l>>6|192,t[n++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),t[n++]=l>>18|240,t[n++]=l>>12&63|128,t[n++]=l>>6&63|128,t[n++]=l&63|128):(t[n++]=l>>12|224,t[n++]=l>>6&63|128,t[n++]=l&63|128)}return t},bS=function(r){const t=[];let n=0,s=0;for(;n<r.length;){const l=r[n++];if(l<128)t[s++]=String.fromCharCode(l);else if(l>191&&l<224){const c=r[n++];t[s++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=r[n++],f=r[n++],g=r[n++],p=((l&7)<<18|(c&63)<<12|(f&63)<<6|g&63)-65536;t[s++]=String.fromCharCode(55296+(p>>10)),t[s++]=String.fromCharCode(56320+(p&1023))}else{const c=r[n++],f=r[n++];t[s++]=String.fromCharCode((l&15)<<12|(c&63)<<6|f&63)}}return t.join("")},g0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const c=r[l],f=l+1<r.length,g=f?r[l+1]:0,p=l+2<r.length,y=p?r[l+2]:0,T=c>>2,w=(c&3)<<4|g>>4;let R=(g&15)<<2|y>>6,q=y&63;p||(q=64,f||(R=64)),s.push(n[T],n[w],n[R],n[q])}return s.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(m0(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):bS(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const c=n[r.charAt(l++)],g=l<r.length?n[r.charAt(l)]:0;++l;const y=l<r.length?n[r.charAt(l)]:64;++l;const w=l<r.length?n[r.charAt(l)]:64;if(++l,c==null||g==null||y==null||w==null)throw new RS;const R=c<<2|g>>4;if(s.push(R),y!==64){const q=g<<4&240|y>>2;if(s.push(q),w!==64){const Y=y<<6&192|w;s.push(Y)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class RS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const IS=function(r){const t=m0(r);return g0.encodeByteArray(t,!0)},kc=function(r){return IS(r).replace(/\./g,"")},p0=function(r){try{return g0.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS=()=>CS().__FIREBASE_DEFAULTS__,NS=()=>{if(typeof process>"u"||typeof P_>"u")return;const r=P_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},OS=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&p0(r[1]);return t&&JSON.parse(t)},ih=()=>{try{return wS()||DS()||NS()||OS()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},y0=r=>{var t,n;return(n=(t=ih())==null?void 0:t.emulatorHosts)==null?void 0:n[r]},VS=r=>{const t=y0(r);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},_0=()=>{var r;return(r=ih())==null?void 0:r.config},v0=r=>{var t;return(t=ih())==null?void 0:t[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function E0(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",l=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[kc(JSON.stringify(n)),kc(JSON.stringify(f)),""].join(".")}const wl={};function PS(){const r={prod:[],emulator:[]};for(const t of Object.keys(wl))wl[t]?r.emulator.push(t):r.prod.push(t);return r}function US(r){let t=document.getElementById(r),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),n=!0),{created:n,element:t}}let U_=!1;function T0(r,t){if(typeof window>"u"||typeof document>"u"||!Wa(window.location.host)||wl[r]===t||wl[r]||U_)return;wl[r]=t;function n(R){return`__firebase__banner__${R}`}const s="__firebase__banner",c=PS().prod.length>0;function f(){const R=document.getElementById(s);R&&R.remove()}function g(R){R.style.display="flex",R.style.background="#7faaf0",R.style.position="fixed",R.style.bottom="5px",R.style.left="5px",R.style.padding=".5em",R.style.borderRadius="5px",R.style.alignItems="center"}function p(R,q){R.setAttribute("width","24"),R.setAttribute("id",q),R.setAttribute("height","24"),R.setAttribute("viewBox","0 0 24 24"),R.setAttribute("fill","none"),R.style.marginLeft="-6px"}function y(){const R=document.createElement("span");return R.style.cursor="pointer",R.style.marginLeft="16px",R.style.fontSize="24px",R.innerHTML=" &times;",R.onclick=()=>{U_=!0,f()},R}function T(R,q){R.setAttribute("id",q),R.innerText="Learn more",R.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",R.setAttribute("target","__blank"),R.style.paddingLeft="5px",R.style.textDecoration="underline"}function w(){const R=US(s),q=n("text"),Y=document.getElementById(q)||document.createElement("span"),et=n("learnmore"),$=document.getElementById(et)||document.createElement("a"),_t=n("preprendIcon"),mt=document.getElementById(_t)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(R.created){const ft=R.element;g(ft),T($,et);const Ut=y();p(mt,_t),ft.append(mt,Y,$,Ut),document.body.appendChild(ft)}c?(Y.innerText="Preview backend disconnected.",mt.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(mt.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Y.innerText="Preview backend running in this workspace."),Y.setAttribute("id",q)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ze(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ze())}function LS(){var t;const r=(t=ih())==null?void 0:t.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function zS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function BS(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function jS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qS(){const r=Ze();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function HS(){return!LS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function GS(){try{return typeof indexedDB=="object"}catch{return!1}}function FS(){return new Promise((r,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{var c;t(((c=l.error)==null?void 0:c.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS="FirebaseError";class Ki extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=QS,Object.setPrototypeOf(this,Ki.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bl.prototype.create)}}class Bl{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},l=`${this.service}/${t}`,c=this.errors[t],f=c?KS(c,s):"Error",g=`${this.serviceName}: ${f} (${l}).`;return new Ki(l,g,s)}}function KS(r,t){return r.replace(YS,(n,s)=>{const l=t[s];return l!=null?String(l):`<${s}?>`})}const YS=/\{\$([^}]+)}/g;function XS(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function Os(r,t){if(r===t)return!0;const n=Object.keys(r),s=Object.keys(t);for(const l of n){if(!s.includes(l))return!1;const c=r[l],f=t[l];if(k_(c)&&k_(f)){if(!Os(c,f))return!1}else if(c!==f)return!1}for(const l of s)if(!n.includes(l))return!1;return!0}function k_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jl(r){const t=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function _l(r){const t={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[l,c]=s.split("=");t[decodeURIComponent(l)]=decodeURIComponent(c)}}),t}function vl(r){const t=r.indexOf("?");if(!t)return"";const n=r.indexOf("#",t);return r.substring(t,n>0?n:void 0)}function $S(r,t){const n=new ZS(r,t);return n.subscribe.bind(n)}class ZS{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,s){let l;if(t===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");WS(t,["next","error","complete"])?l=t:l={next:t,error:n,complete:s},l.next===void 0&&(l.next=Vd),l.error===void 0&&(l.error=Vd),l.complete===void 0&&(l.complete=Vd);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function WS(r,t){if(typeof r!="object"||r===null)return!1;for(const n of t)if(n in r&&typeof r[n]=="function")return!0;return!1}function Vd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(r){return r&&r._delegate?r._delegate:r}class Vs{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new MS;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(t==null?void 0:t.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(e1(t))try{this.getOrInitializeService({instanceIdentifier:Cs})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:l});s.resolve(c)}catch{}}}}clearInstance(t=Cs){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Cs){return this.instances.has(t)}getOptions(t=Cs){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,f]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);s===g&&f.resolve(l)}return l}onInit(t,n){const s=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(s)??new Set;l.add(t),this.onInitCallbacks.set(s,l);const c=this.instances.get(s);return c&&t(c,s),()=>{l.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const l of s)try{l(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:t1(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Cs){return this.component?this.component.multipleInstances?t:Cs:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function t1(r){return r===Cs?void 0:r}function e1(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new JS(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Dt||(Dt={}));const i1={debug:Dt.DEBUG,verbose:Dt.VERBOSE,info:Dt.INFO,warn:Dt.WARN,error:Dt.ERROR,silent:Dt.SILENT},r1=Dt.INFO,s1={[Dt.DEBUG]:"log",[Dt.VERBOSE]:"log",[Dt.INFO]:"info",[Dt.WARN]:"warn",[Dt.ERROR]:"error"},a1=(r,t,...n)=>{if(t<r.logLevel)return;const s=new Date().toISOString(),l=s1[t];if(l)console[l](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Em{constructor(t){this.name=t,this._logLevel=r1,this._logHandler=a1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Dt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?i1[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Dt.DEBUG,...t),this._logHandler(this,Dt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Dt.VERBOSE,...t),this._logHandler(this,Dt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Dt.INFO,...t),this._logHandler(this,Dt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Dt.WARN,...t),this._logHandler(this,Dt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Dt.ERROR,...t),this._logHandler(this,Dt.ERROR,...t)}}const o1=(r,t)=>t.some(n=>r instanceof n);let L_,z_;function l1(){return L_||(L_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function u1(){return z_||(z_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const A0=new WeakMap,Qd=new WeakMap,S0=new WeakMap,Md=new WeakMap,Tm=new WeakMap;function c1(r){const t=new Promise((n,s)=>{const l=()=>{r.removeEventListener("success",c),r.removeEventListener("error",f)},c=()=>{n(Nr(r.result)),l()},f=()=>{s(r.error),l()};r.addEventListener("success",c),r.addEventListener("error",f)});return t.then(n=>{n instanceof IDBCursor&&A0.set(n,r)}).catch(()=>{}),Tm.set(t,r),t}function h1(r){if(Qd.has(r))return;const t=new Promise((n,s)=>{const l=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",f),r.removeEventListener("abort",f)},c=()=>{n(),l()},f=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",c),r.addEventListener("error",f),r.addEventListener("abort",f)});Qd.set(r,t)}let Kd={get(r,t,n){if(r instanceof IDBTransaction){if(t==="done")return Qd.get(r);if(t==="objectStoreNames")return r.objectStoreNames||S0.get(r);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Nr(r[t])},set(r,t,n){return r[t]=n,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function f1(r){Kd=r(Kd)}function d1(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=r.call(xd(this),t,...n);return S0.set(s,t.sort?t.sort():[t]),Nr(s)}:u1().includes(r)?function(...t){return r.apply(xd(this),t),Nr(A0.get(this))}:function(...t){return Nr(r.apply(xd(this),t))}}function m1(r){return typeof r=="function"?d1(r):(r instanceof IDBTransaction&&h1(r),o1(r,l1())?new Proxy(r,Kd):r)}function Nr(r){if(r instanceof IDBRequest)return c1(r);if(Md.has(r))return Md.get(r);const t=m1(r);return t!==r&&(Md.set(r,t),Tm.set(t,r)),t}const xd=r=>Tm.get(r);function g1(r,t,{blocked:n,upgrade:s,blocking:l,terminated:c}={}){const f=indexedDB.open(r,t),g=Nr(f);return s&&f.addEventListener("upgradeneeded",p=>{s(Nr(f.result),p.oldVersion,p.newVersion,Nr(f.transaction),p)}),n&&f.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),g.then(p=>{c&&p.addEventListener("close",()=>c()),l&&p.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),g}const p1=["get","getKey","getAll","getAllKeys","count"],y1=["put","add","delete","clear"],Pd=new Map;function B_(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(Pd.get(t))return Pd.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,l=y1.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||p1.includes(n)))return;const c=async function(f,...g){const p=this.transaction(f,l?"readwrite":"readonly");let y=p.store;return s&&(y=y.index(g.shift())),(await Promise.all([y[n](...g),l&&p.done]))[0]};return Pd.set(t,c),c}f1(r=>({...r,get:(t,n,s)=>B_(t,n)||r.get(t,n,s),has:(t,n)=>!!B_(t,n)||r.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(v1(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function v1(r){const t=r.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Yd="@firebase/app",j_="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hi=new Em("@firebase/app"),E1="@firebase/app-compat",T1="@firebase/analytics-compat",A1="@firebase/analytics",S1="@firebase/app-check-compat",w1="@firebase/app-check",b1="@firebase/auth",R1="@firebase/auth-compat",I1="@firebase/database",C1="@firebase/data-connect",D1="@firebase/database-compat",N1="@firebase/functions",O1="@firebase/functions-compat",V1="@firebase/installations",M1="@firebase/installations-compat",x1="@firebase/messaging",P1="@firebase/messaging-compat",U1="@firebase/performance",k1="@firebase/performance-compat",L1="@firebase/remote-config",z1="@firebase/remote-config-compat",B1="@firebase/storage",j1="@firebase/storage-compat",q1="@firebase/firestore",H1="@firebase/ai",G1="@firebase/firestore-compat",F1="firebase",Q1="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xd="[DEFAULT]",K1={[Yd]:"fire-core",[E1]:"fire-core-compat",[A1]:"fire-analytics",[T1]:"fire-analytics-compat",[w1]:"fire-app-check",[S1]:"fire-app-check-compat",[b1]:"fire-auth",[R1]:"fire-auth-compat",[I1]:"fire-rtdb",[C1]:"fire-data-connect",[D1]:"fire-rtdb-compat",[N1]:"fire-fn",[O1]:"fire-fn-compat",[V1]:"fire-iid",[M1]:"fire-iid-compat",[x1]:"fire-fcm",[P1]:"fire-fcm-compat",[U1]:"fire-perf",[k1]:"fire-perf-compat",[L1]:"fire-rc",[z1]:"fire-rc-compat",[B1]:"fire-gcs",[j1]:"fire-gcs-compat",[q1]:"fire-fst",[G1]:"fire-fst-compat",[H1]:"fire-vertex","fire-js":"fire-js",[F1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc=new Map,Y1=new Map,$d=new Map;function q_(r,t){try{r.container.addComponent(t)}catch(n){Hi.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,n)}}function Ha(r){const t=r.name;if($d.has(t))return Hi.debug(`There were multiple attempts to register component ${t}.`),!1;$d.set(t,r);for(const n of Lc.values())q_(n,r);for(const n of Y1.values())q_(n,r);return!0}function Am(r,t){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(t)}function Ln(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Or=new Bl("app","Firebase",X1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(t,n,s){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Vs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Or.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ja=Q1;function w0(r,t={}){let n=r;typeof t!="object"&&(t={name:t});const s={name:Xd,automaticDataCollectionEnabled:!0,...t},l=s.name;if(typeof l!="string"||!l)throw Or.create("bad-app-name",{appName:String(l)});if(n||(n=_0()),!n)throw Or.create("no-options");const c=Lc.get(l);if(c){if(Os(n,c.options)&&Os(s,c.config))return c;throw Or.create("duplicate-app",{appName:l})}const f=new n1(l);for(const p of $d.values())f.addComponent(p);const g=new $1(n,s,f);return Lc.set(l,g),g}function b0(r=Xd){const t=Lc.get(r);if(!t&&r===Xd&&_0())return w0();if(!t)throw Or.create("no-app",{appName:r});return t}function Vr(r,t,n){let s=K1[r]??r;n&&(s+=`-${n}`);const l=s.match(/\s|\//),c=t.match(/\s|\//);if(l||c){const f=[`Unable to register library "${s}" with version "${t}":`];l&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&c&&f.push("and"),c&&f.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Hi.warn(f.join(" "));return}Ha(new Vs(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1="firebase-heartbeat-database",W1=1,Nl="firebase-heartbeat-store";let Ud=null;function R0(){return Ud||(Ud=g1(Z1,W1,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(Nl)}catch(n){console.warn(n)}}}}).catch(r=>{throw Or.create("idb-open",{originalErrorMessage:r.message})})),Ud}async function J1(r){try{const n=(await R0()).transaction(Nl),s=await n.objectStore(Nl).get(I0(r));return await n.done,s}catch(t){if(t instanceof Ki)Hi.warn(t.message);else{const n=Or.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Hi.warn(n.message)}}}async function H_(r,t){try{const s=(await R0()).transaction(Nl,"readwrite");await s.objectStore(Nl).put(t,I0(r)),await s.done}catch(n){if(n instanceof Ki)Hi.warn(n.message);else{const s=Or.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Hi.warn(s.message)}}}function I0(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw=1024,ew=30;class nw{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new rw(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var t,n;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=G_();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(f=>f.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:l}),this._heartbeatsCache.heartbeats.length>ew){const f=sw(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Hi.warn(s)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=G_(),{heartbeatsToSend:s,unsentEntries:l}=iw(this._heartbeatsCache.heartbeats),c=kc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return Hi.warn(n),""}}}function G_(){return new Date().toISOString().substring(0,10)}function iw(r,t=tw){const n=[];let s=r.slice();for(const l of r){const c=n.find(f=>f.agent===l.agent);if(c){if(c.dates.push(l.date),F_(n)>t){c.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),F_(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class rw{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return GS()?FS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await J1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return H_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return H_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function F_(r){return kc(JSON.stringify({version:2,heartbeats:r})).length}function sw(r){if(r.length===0)return-1;let t=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(r){Ha(new Vs("platform-logger",t=>new _1(t),"PRIVATE")),Ha(new Vs("heartbeat",t=>new nw(t),"PRIVATE")),Vr(Yd,j_,r),Vr(Yd,j_,"esm2020"),Vr("fire-js","")}aw("");var ow="firebase",lw="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vr(ow,lw,"app");function C0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const uw=C0,D0=new Bl("auth","Firebase",C0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zc=new Em("@firebase/auth");function cw(r,...t){zc.logLevel<=Dt.WARN&&zc.warn(`Auth (${Ja}): ${r}`,...t)}function Ic(r,...t){zc.logLevel<=Dt.ERROR&&zc.error(`Auth (${Ja}): ${r}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(r,...t){throw Sm(r,...t)}function oi(r,...t){return Sm(r,...t)}function N0(r,t,n){const s={...uw(),[t]:n};return new Bl("auth","Firebase",s).create(t,{appName:r.name})}function Mr(r){return N0(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Sm(r,...t){if(typeof r!="string"){const n=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return D0.create(r,...t)}function gt(r,t,...n){if(!r)throw Sm(t,...n)}function ji(r){const t="INTERNAL ASSERTION FAILED: "+r;throw Ic(t),new Error(t)}function Gi(r,t){r||ji(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zd(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function hw(){return Q_()==="http:"||Q_()==="https:"}function Q_(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hw()||BS()||"connection"in navigator)?navigator.onLine:!0}function dw(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(t,n){this.shortDelay=t,this.longDelay=n,Gi(n>t,"Short delay should be less than long delay!"),this.isMobile=kS()||jS()}get(){return fw()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(r,t){Gi(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{static initialize(t,n,s){this.fetchImpl=t,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ji("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ji("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ji("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mw={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],pw=new ql(3e4,6e4);function ks(r,t){return r.tenantId&&!t.tenantId?{...t,tenantId:r.tenantId}:t}async function Yi(r,t,n,s,l={}){return V0(r,l,async()=>{let c={},f={};s&&(t==="GET"?f=s:c={body:JSON.stringify(s)});const g=jl({key:r.config.apiKey,...f}).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const y={method:t,headers:p,...c};return zS()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&Wa(r.emulatorConfig.host)&&(y.credentials="include"),O0.fetch()(await M0(r,r.config.apiHost,n,g),y)})}async function V0(r,t,n){r._canInitEmulator=!1;const s={...mw,...t};try{const l=new _w(r),c=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const f=await c.json();if("needConfirmation"in f)throw Tc(r,"account-exists-with-different-credential",f);if(c.ok&&!("errorMessage"in f))return f;{const g=c.ok?f.errorMessage:f.error.message,[p,y]=g.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tc(r,"credential-already-in-use",f);if(p==="EMAIL_EXISTS")throw Tc(r,"email-already-in-use",f);if(p==="USER_DISABLED")throw Tc(r,"user-disabled",f);const T=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw N0(r,T,y);jn(r,T)}}catch(l){if(l instanceof Ki)throw l;jn(r,"network-request-failed",{message:String(l)})}}async function rh(r,t,n,s,l={}){const c=await Yi(r,t,n,s,l);return"mfaPendingCredential"in c&&jn(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function M0(r,t,n,s){const l=`${t}${n}?${s}`,c=r,f=c.config.emulator?wm(r.config,l):`${r.config.apiScheme}://${l}`;return gw.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(f).toString():f}function yw(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _w{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(oi(this.auth,"network-request-failed")),pw.get())})}}function Tc(r,t,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const l=oi(r,t,s);return l.customData._tokenResponse=n,l}function K_(r){return r!==void 0&&r.enterprise!==void 0}class vw{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return yw(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Ew(r,t){return Yi(r,"GET","/v2/recaptchaConfig",ks(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tw(r,t){return Yi(r,"POST","/v1/accounts:delete",t)}async function Bc(r,t){return Yi(r,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bl(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Aw(r,t=!1){const n=Ae(r),s=await n.getIdToken(t),l=bm(s);gt(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,f=c==null?void 0:c.sign_in_provider;return{claims:l,token:s,authTime:bl(kd(l.auth_time)),issuedAtTime:bl(kd(l.iat)),expirationTime:bl(kd(l.exp)),signInProvider:f||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function kd(r){return Number(r)*1e3}function bm(r){const[t,n,s]=r.split(".");if(t===void 0||n===void 0||s===void 0)return Ic("JWT malformed, contained fewer than 3 sections"),null;try{const l=p0(n);return l?JSON.parse(l):(Ic("Failed to decode base64 JWT payload"),null)}catch(l){return Ic("Caught error parsing JWT payload as JSON",l==null?void 0:l.toString()),null}}function Y_(r){const t=bm(r);return gt(t,"internal-error"),gt(typeof t.exp<"u","internal-error"),gt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ga(r,t,n=!1){if(n)return t;try{return await t}catch(s){throw s instanceof Ki&&Sw(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function Sw({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=bl(this.lastLoginAt),this.creationTime=bl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jc(r){var w;const t=r.auth,n=await r.getIdToken(),s=await Ga(r,Bc(t,{idToken:n}));gt(s==null?void 0:s.users.length,t,"internal-error");const l=s.users[0];r._notifyReloadListener(l);const c=(w=l.providerUserInfo)!=null&&w.length?x0(l.providerUserInfo):[],f=Rw(r.providerData,c),g=r.isAnonymous,p=!(r.email&&l.passwordHash)&&!(f!=null&&f.length),y=g?p:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new Wd(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(r,T)}async function bw(r){const t=Ae(r);await jc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Rw(r,t){return[...r.filter(s=>!t.some(l=>l.providerId===s.providerId)),...t]}function x0(r){return r.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iw(r,t){const n=await V0(r,{},async()=>{const s=jl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:l,apiKey:c}=r.config,f=await M0(r,l,"/v1/token",`key=${c}`),g=await r._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:g,body:s};return r.emulatorConfig&&Wa(r.emulatorConfig.host)&&(p.credentials="include"),O0.fetch()(f,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Cw(r,t){return Yi(r,"POST","/v2/accounts:revokeToken",ks(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){gt(t.idToken,"internal-error"),gt(typeof t.idToken<"u","internal-error"),gt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Y_(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){gt(t.length!==0,"internal-error");const n=Y_(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(gt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:s,refreshToken:l,expiresIn:c}=await Iw(t,n);this.updateTokensAndExpiration(s,l,Number(c))}updateTokensAndExpiration(t,n,s){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,n){const{refreshToken:s,accessToken:l,expirationTime:c}=n,f=new La;return s&&(gt(typeof s=="string","internal-error",{appName:t}),f.refreshToken=s),l&&(gt(typeof l=="string","internal-error",{appName:t}),f.accessToken=l),c&&(gt(typeof c=="number","internal-error",{appName:t}),f.expirationTime=c),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new La,this.toJSON())}_performRefresh(){return ji("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(r,t){gt(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class zn{constructor({uid:t,auth:n,stsTokenManager:s,...l}){this.providerId="firebase",this.proactiveRefresh=new ww(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Wd(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const n=await Ga(this,this.stsTokenManager.getToken(this.auth,t));return gt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return Aw(this,t)}reload(){return bw(this)}_assign(t){this!==t&&(gt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new zn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){gt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),n&&await jc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ln(this.auth.app))return Promise.reject(Mr(this.auth));const t=await this.getIdToken();return await Ga(this,Tw(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const s=n.displayName??void 0,l=n.email??void 0,c=n.phoneNumber??void 0,f=n.photoURL??void 0,g=n.tenantId??void 0,p=n._redirectEventId??void 0,y=n.createdAt??void 0,T=n.lastLoginAt??void 0,{uid:w,emailVerified:R,isAnonymous:q,providerData:Y,stsTokenManager:et}=n;gt(w&&et,t,"internal-error");const $=La.fromJSON(this.name,et);gt(typeof w=="string",t,"internal-error"),wr(s,t.name),wr(l,t.name),gt(typeof R=="boolean",t,"internal-error"),gt(typeof q=="boolean",t,"internal-error"),wr(c,t.name),wr(f,t.name),wr(g,t.name),wr(p,t.name),wr(y,t.name),wr(T,t.name);const _t=new zn({uid:w,auth:t,email:l,emailVerified:R,displayName:s,isAnonymous:q,photoURL:f,phoneNumber:c,tenantId:g,stsTokenManager:$,createdAt:y,lastLoginAt:T});return Y&&Array.isArray(Y)&&(_t.providerData=Y.map(mt=>({...mt}))),p&&(_t._redirectEventId=p),_t}static async _fromIdTokenResponse(t,n,s=!1){const l=new La;l.updateFromServerResponse(n);const c=new zn({uid:n.localId,auth:t,stsTokenManager:l,isAnonymous:s});return await jc(c),c}static async _fromGetAccountInfoResponse(t,n,s){const l=n.users[0];gt(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?x0(l.providerUserInfo):[],f=!(l.email&&l.passwordHash)&&!(c!=null&&c.length),g=new La;g.updateFromIdToken(s);const p=new zn({uid:l.localId,auth:t,stsTokenManager:g,isAnonymous:f}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new Wd(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!(c!=null&&c.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_=new Map;function qi(r){Gi(r instanceof Function,"Expected a class definition");let t=X_.get(r);return t?(Gi(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,X_.set(r,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}P0.type="NONE";const $_=P0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cc(r,t,n){return`firebase:${r}:${t}:${n}`}class za{constructor(t,n,s){this.persistence=t,this.auth=n,this.userKey=s;const{config:l,name:c}=this.auth;this.fullUserKey=Cc(this.userKey,l.apiKey,c),this.fullPersistenceKey=Cc("persistence",l.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await Bc(this.auth,{idToken:t}).catch(()=>{});return n?zn._fromGetAccountInfoResponse(this.auth,n,t):null}return zn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,s="authUser"){if(!n.length)return new za(qi($_),t,s);const l=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=l[0]||qi($_);const f=Cc(s,t.config.apiKey,t.name);let g=null;for(const y of n)try{const T=await y._get(f);if(T){let w;if(typeof T=="string"){const R=await Bc(t,{idToken:T}).catch(()=>{});if(!R)break;w=await zn._fromGetAccountInfoResponse(t,R,T)}else w=zn._fromJSON(t,T);y!==c&&(g=w),c=y;break}}catch{}const p=l.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!p.length?new za(c,t,s):(c=p[0],g&&await c._set(f,g.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(f)}catch{}})),new za(c,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(z0(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(U0(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(j0(t))return"Blackberry";if(q0(t))return"Webos";if(k0(t))return"Safari";if((t.includes("chrome/")||L0(t))&&!t.includes("edge/"))return"Chrome";if(B0(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function U0(r=Ze()){return/firefox\//i.test(r)}function k0(r=Ze()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function L0(r=Ze()){return/crios\//i.test(r)}function z0(r=Ze()){return/iemobile/i.test(r)}function B0(r=Ze()){return/android/i.test(r)}function j0(r=Ze()){return/blackberry/i.test(r)}function q0(r=Ze()){return/webos/i.test(r)}function Rm(r=Ze()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function Dw(r=Ze()){var t;return Rm(r)&&!!((t=window.navigator)!=null&&t.standalone)}function Nw(){return qS()&&document.documentMode===10}function H0(r=Ze()){return Rm(r)||B0(r)||q0(r)||j0(r)||/windows phone/i.test(r)||z0(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(r,t=[]){let n;switch(r){case"Browser":n=Z_(Ze());break;case"Worker":n=`${Z_(Ze())}-${r}`;break;default:n=r}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ja}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const s=c=>new Promise((f,g)=>{try{const p=t(c);f(p)}catch(p){g(p)}});s.onAbort=n,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const s of this.queue)await s(t),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vw(r,t={}){return Yi(r,"GET","/v2/passwordPolicy",ks(r,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw=6;class xw{constructor(t){var s;const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Mw,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=t.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=t.length>=s),l&&(n.meetsMaxPasswordLength=t.length<=l)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let l=0;l<t.length;l++)s=t.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,n,s,l,c){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(t,n,s,l){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new W_(this),this.idTokenSubscription=new W_(this),this.beforeStateQueue=new Ow(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=D0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=qi(n)),this._initializationPromise=this.queue(async()=>{var s,l,c;if(!this._deleted&&(this.persistenceManager=await za.create(this,t),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((l=this._popupRedirectResolver)!=null&&l._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Bc(this,{idToken:t}),s=await zn._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var c;if(Ln(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(g,g))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(c=this.redirectUser)==null?void 0:c._redirectEventId,g=s==null?void 0:s._redirectEventId,p=await this.tryRedirectSignIn(t);(!f||f===g)&&(p!=null&&p.user)&&(s=p.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(f){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return gt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await jc(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=dw()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Ln(this.app))return Promise.reject(Mr(this));const n=t?Ae(t):null;return n&&gt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&gt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Ln(this.app)?Promise.reject(Mr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Ln(this.app)?Promise.reject(Mr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qi(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Vw(this),n=new xw(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Bl("auth","Firebase",t())}onAuthStateChanged(t,n,s){return this.registerStateListener(this.authStateSubscription,t,n,s)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,s){return this.registerStateListener(this.idTokenSubscription,t,n,s)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await Cw(this,s)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,n){const s=await this.getOrInitRedirectPersistenceManager(n);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&qi(t)||this._popupRedirectResolver;gt(n,this,"argument-error"),this.redirectPersistenceManager=await za.create(this,[qi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===t?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,s,l){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let f=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(gt(g,this,"internal-error"),g.then(()=>{f||c(this.currentUser)}),typeof n=="function"){const p=t.addObserver(n,s,l);return()=>{f=!0,p()}}else{const p=t.addObserver(n);return()=>{f=!0,p()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return gt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=G0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var l;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((l=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:l.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var n;if(Ln(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return t!=null&&t.error&&cw(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function to(r){return Ae(r)}class W_{constructor(t){this.auth=t,this.observer=null,this.addObserver=$S(n=>this.observer=n)}get next(){return gt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Uw(r){sh=r}function F0(r){return sh.loadJS(r)}function kw(){return sh.recaptchaEnterpriseScript}function Lw(){return sh.gapiScript}function zw(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class Bw{constructor(){this.enterprise=new jw}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class jw{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const qw="recaptcha-enterprise",Q0="NO_RECAPTCHA";class Hw{constructor(t){this.type=qw,this.auth=to(t)}async verify(t="verify",n=!1){async function s(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(f,g)=>{Ew(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const y=new vw(p);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,f(y.siteKey)}}).catch(p=>{g(p)})})}function l(c,f,g){const p=window.grecaptcha;K_(p)?p.enterprise.ready(()=>{p.enterprise.execute(c,{action:t}).then(y=>{f(y)}).catch(()=>{f(Q0)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Bw().execute("siteKey",{action:"verify"}):new Promise((c,f)=>{s(this.auth).then(g=>{if(!n&&K_(window.grecaptcha))l(g,c,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let p=kw();p.length!==0&&(p+=g),F0(p).then(()=>{l(g,c,f)}).catch(y=>{f(y)})}}).catch(g=>{f(g)})})}}async function J_(r,t,n,s=!1,l=!1){const c=new Hw(r);let f;if(l)f=Q0;else try{f=await c.verify(n)}catch{f=await c.verify(n,!0)}const g={...t};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const p=g.phoneEnrollmentInfo.phoneNumber,y=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const p=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return s?Object.assign(g,{captchaResp:f}):Object.assign(g,{captchaResponse:f}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function tv(r,t,n,s,l){var c;if((c=r._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await J_(r,t,n,n==="getOobCode");return s(r,f)}else return s(r,t).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const g=await J_(r,t,n,n==="getOobCode");return s(r,g)}else return Promise.reject(f)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(r,t){const n=Am(r,"auth");if(n.isInitialized()){const l=n.getImmediate(),c=n.getOptions();if(Os(c,t??{}))return l;jn(l,"already-initialized")}return n.initialize({options:t})}function Fw(r,t){const n=(t==null?void 0:t.persistence)||[],s=(Array.isArray(n)?n:[n]).map(qi);t!=null&&t.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(s,t==null?void 0:t.popupRedirectResolver)}function Qw(r,t,n){const s=to(r);gt(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const l=!1,c=K0(t),{host:f,port:g}=Kw(t),p=g===null?"":`:${g}`,y={url:`${c}//${f}${p}/`},T=Object.freeze({host:f,port:g,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){gt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),gt(Os(y,s.config.emulator)&&Os(T,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=T,s.settings.appVerificationDisabledForTesting=!0,Wa(f)?(E0(`${c}//${f}${p}`),T0("Auth",!0)):Yw()}function K0(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function Kw(r){const t=K0(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const c=l[1];return{host:c,port:ev(s.substr(c.length+1))}}else{const[c,f]=s.split(":");return{host:c,port:ev(f)}}}function ev(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function Yw(){function r(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return ji("not implemented")}_getIdTokenResponse(t){return ji("not implemented")}_linkToIdToken(t,n){return ji("not implemented")}_getReauthenticationResolver(t){return ji("not implemented")}}async function Xw(r,t){return Yi(r,"POST","/v1/accounts:update",t)}async function $w(r,t){return Yi(r,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zw(r,t){return rh(r,"POST","/v1/accounts:signInWithPassword",ks(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ww(r,t){return rh(r,"POST","/v1/accounts:signInWithEmailLink",ks(r,t))}async function Jw(r,t){return rh(r,"POST","/v1/accounts:signInWithEmailLink",ks(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol extends Im{constructor(t,n,s,l=null){super("password",s),this._email=t,this._password=n,this._tenantId=l}static _fromEmailAndPassword(t,n){return new Ol(t,n,"password")}static _fromEmailAndCode(t,n,s=null){return new Ol(t,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tv(t,n,"signInWithPassword",Zw);case"emailLink":return Ww(t,{email:this._email,oobCode:this._password});default:jn(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tv(t,s,"signUpPassword",$w);case"emailLink":return Jw(t,{idToken:n,email:this._email,oobCode:this._password});default:jn(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ba(r,t){return rh(r,"POST","/v1/accounts:signInWithIdp",ks(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb="http://localhost";class Ms extends Im{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Ms(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):jn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:l,...c}=n;if(!s||!l)return null;const f=new Ms(s,l);return f.idToken=c.idToken||void 0,f.accessToken=c.accessToken||void 0,f.secret=c.secret,f.nonce=c.nonce,f.pendingToken=c.pendingToken||null,f}_getIdTokenResponse(t){const n=this.buildRequest();return Ba(t,n)}_linkToIdToken(t,n){const s=this.buildRequest();return s.idToken=n,Ba(t,s)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Ba(t,n)}buildRequest(){const t={requestUri:tb,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=jl(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function nb(r){const t=_l(vl(r)).link,n=t?_l(vl(t)).deep_link_id:null,s=_l(vl(r)).deep_link_id;return(s?_l(vl(s)).link:null)||s||n||t||r}class Cm{constructor(t){const n=_l(vl(t)),s=n.apiKey??null,l=n.oobCode??null,c=eb(n.mode??null);gt(s&&l&&c,"argument-error"),this.apiKey=s,this.operation=c,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(t){const n=nb(t);try{return new Cm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(){this.providerId=eo.PROVIDER_ID}static credential(t,n){return Ol._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const s=Cm.parseLink(n);return gt(s,"argument-error"),Ol._fromEmailAndCode(t,s.code,s.tenantId)}}eo.PROVIDER_ID="password";eo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";eo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl extends Y0{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends Hl{constructor(){super("facebook.com")}static credential(t){return Ms._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return br.credentialFromTaggedObject(t)}static credentialFromError(t){return br.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return br.credential(t.oauthAccessToken)}catch{return null}}}br.FACEBOOK_SIGN_IN_METHOD="facebook.com";br.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends Hl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Ms._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Rr.credentialFromTaggedObject(t)}static credentialFromError(t){return Rr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:s}=t;if(!n&&!s)return null;try{return Rr.credential(n,s)}catch{return null}}}Rr.GOOGLE_SIGN_IN_METHOD="google.com";Rr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir extends Hl{constructor(){super("github.com")}static credential(t){return Ms._fromParams({providerId:Ir.PROVIDER_ID,signInMethod:Ir.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ir.credentialFromTaggedObject(t)}static credentialFromError(t){return Ir.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ir.credential(t.oauthAccessToken)}catch{return null}}}Ir.GITHUB_SIGN_IN_METHOD="github.com";Ir.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr extends Hl{constructor(){super("twitter.com")}static credential(t,n){return Ms._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Cr.credentialFromTaggedObject(t)}static credentialFromError(t){return Cr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=t;if(!n||!s)return null;try{return Cr.credential(n,s)}catch{return null}}}Cr.TWITTER_SIGN_IN_METHOD="twitter.com";Cr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,s,l=!1){const c=await zn._fromIdTokenResponse(t,s,l),f=nv(s);return new Fa({user:c,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(t,n,s){await t._updateTokensIfNecessary(s,!0);const l=nv(s);return new Fa({user:t,providerId:l,_tokenResponse:s,operationType:n})}}function nv(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc extends Ki{constructor(t,n,s,l){super(n.code,n.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,qc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,n,s,l){return new qc(t,n,s,l)}}function X0(r,t,n,s){return(t==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?qc._fromErrorAndOperation(r,c,t,s):c})}async function ib(r,t,n=!1){const s=await Ga(r,t._linkToIdToken(r.auth,await r.getIdToken()),n);return Fa._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rb(r,t,n=!1){const{auth:s}=r;if(Ln(s.app))return Promise.reject(Mr(s));const l="reauthenticate";try{const c=await Ga(r,X0(s,l,t,r),n);gt(c.idToken,s,"internal-error");const f=bm(c.idToken);gt(f,s,"internal-error");const{sub:g}=f;return gt(r.uid===g,s,"user-mismatch"),Fa._forOperation(r,l,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&jn(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $0(r,t,n=!1){if(Ln(r.app))return Promise.reject(Mr(r));const s="signIn",l=await X0(r,s,t),c=await Fa._fromIdTokenResponse(r,s,l);return n||await r._updateCurrentUser(c.user),c}async function sb(r,t){return $0(to(r),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ab(r){const t=to(r);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function ob(r,t,n){return Ln(r.app)?Promise.reject(Mr(r)):sb(Ae(r),eo.credential(t,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&ab(r),s})}function lb(r,t){return ub(Ae(r),null,t)}async function ub(r,t,n){const{auth:s}=r,c={idToken:await r.getIdToken(),returnSecureToken:!0};n&&(c.password=n);const f=await Ga(r,Xw(s,c));await r._updateTokensIfNecessary(f,!0)}function cb(r,t,n,s){return Ae(r).onIdTokenChanged(t,n,s)}function hb(r,t,n){return Ae(r).beforeAuthStateChanged(t,n)}function fb(r,t,n,s){return Ae(r).onAuthStateChanged(t,n,s)}function db(r){return Ae(r).signOut()}const Hc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Hc,"1"),this.storage.removeItem(Hc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb=1e3,gb=10;class W0 extends Z0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=H0(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),l=this.localCache[n];s!==l&&t(n,l,s)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((f,g,p)=>{this.notifyListeners(f,p)});return}const s=t.key;n?this.detachListener():this.stopPolling();const l=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},c=this.storage.getItem(s);Nw()&&c!==t.newValue&&t.newValue!==t.oldValue?setTimeout(l,gb):l()}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:s}),!0)})},mb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}W0.type="LOCAL";const pb=W0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0 extends Z0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}J0.type="SESSION";const tE=J0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yb(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(l=>l.isListeningto(t));if(n)return n;const s=new ah(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:s,eventType:l,data:c}=n.data,f=this.handlersMap[l];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const g=Array.from(f).map(async y=>y(n.origin,c)),p=await yb(g);n.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:p})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ah.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(r="",t=10){let n="";for(let s=0;s<t;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,f;return new Promise((g,p)=>{const y=Dm("",20);l.port1.start();const T=setTimeout(()=>{p(new Error("unsupported_event"))},s);f={messageChannel:l,onMessage(w){const R=w;if(R.data.eventId===y)switch(R.data.status){case"ack":clearTimeout(T),c=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),g(R.data.response);break;default:clearTimeout(T),clearTimeout(c),p(new Error("invalid_response"));break}}},this.handlers.add(f),l.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:t,eventId:y,data:n},[l.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(){return window}function vb(r){li().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(){return typeof li().WorkerGlobalScope<"u"&&typeof li().importScripts=="function"}async function Eb(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Tb(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function Ab(){return eE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE="firebaseLocalStorageDb",Sb=1,Gc="firebaseLocalStorage",iE="fbase_key";class Gl{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function oh(r,t){return r.transaction([Gc],t?"readwrite":"readonly").objectStore(Gc)}function wb(){const r=indexedDB.deleteDatabase(nE);return new Gl(r).toPromise()}function Jd(){const r=indexedDB.open(nE,Sb);return new Promise((t,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Gc,{keyPath:iE})}catch(l){n(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Gc)?t(s):(s.close(),await wb(),t(await Jd()))})})}async function iv(r,t,n){const s=oh(r,!0).put({[iE]:t,value:n});return new Gl(s).toPromise()}async function bb(r,t){const n=oh(r,!1).get(t),s=await new Gl(n).toPromise();return s===void 0?null:s.value}function rv(r,t){const n=oh(r,!0).delete(t);return new Gl(n).toPromise()}const Rb=800,Ib=3;class rE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Jd(),this.db)}async _withRetries(t){let n=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(n++>Ib)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return eE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ah._getInstance(Ab()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var n,s;if(this.activeServiceWorker=await Eb(),!this.activeServiceWorker)return;this.sender=new _b(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(n=t[0])!=null&&n.fulfilled&&(s=t[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Tb()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Jd();return await iv(t,Hc,"1"),await rv(t,Hc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>iv(s,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(s=>bb(s,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>rv(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(l=>{const c=oh(l,!1).getAll();return new Gl(c).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(t.length!==0)for(const{fbase_key:l,value:c}of t)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Rb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}rE.type="LOCAL";const Cb=rE;new ql(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(r,t){return t?qi(t):(gt(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm extends Im{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ba(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Ba(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Ba(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function Nb(r){return $0(r.auth,new Nm(r),r.bypassAuthState)}function Ob(r){const{auth:t,user:n}=r;return gt(n,t,"internal-error"),rb(n,new Nm(r),r.bypassAuthState)}async function Vb(r){const{auth:t,user:n}=r;return gt(n,t,"internal-error"),ib(n,new Nm(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(t,n,s,l,c=!1){this.auth=t,this.resolver=s,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:s,postBody:l,tenantId:c,error:f,type:g}=t;if(f){this.reject(f);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(p))}catch(y){this.reject(y)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Nb;case"linkViaPopup":case"linkViaRedirect":return Vb;case"reauthViaPopup":case"reauthViaRedirect":return Ob;default:jn(this.auth,"internal-error")}}resolve(t){Gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb=new ql(2e3,1e4);class ka extends sE{constructor(t,n,s,l,c){super(t,n,l,c),this.provider=s,this.authWindow=null,this.pollId=null,ka.currentPopupAction&&ka.currentPopupAction.cancel(),ka.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return gt(t,this.auth,"internal-error"),t}async onExecution(){Gi(this.filter.length===1,"Popup operations only handle one event");const t=Dm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(oi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(oi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ka.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,s;if((s=(n=this.authWindow)==null?void 0:n.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(oi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Mb.get())};t()}}ka.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="pendingRedirect",Dc=new Map;class Pb extends sE{constructor(t,n,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let t=Dc.get(this.auth._key());if(!t){try{const s=await Ub(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(n){t=()=>Promise.reject(n)}Dc.set(this.auth._key(),t)}return this.bypassAuthState||Dc.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Ub(r,t){const n=zb(t),s=Lb(r);if(!await s._isAvailable())return!1;const l=await s._get(n)==="true";return await s._remove(n),l}function kb(r,t){Dc.set(r._key(),t)}function Lb(r){return qi(r._redirectPersistence)}function zb(r){return Cc(xb,r.config.apiKey,r.name)}async function Bb(r,t,n=!1){if(Ln(r.app))return Promise.reject(Mr(r));const s=to(r),l=Db(s,t),f=await new Pb(s,l,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,t)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb=600*1e3;class qb{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(n=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Hb(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var s;if(t.error&&!aE(t)){const l=((s=t.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";n.onError(oi(this.auth,l))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const s=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=jb&&this.cachedEventUids.clear(),this.cachedEventUids.has(sv(t))}saveEventToCache(t){this.cachedEventUids.add(sv(t)),this.lastProcessedEventTime=Date.now()}}function sv(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function aE({type:r,error:t}){return r==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function Hb(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aE(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gb(r,t={}){return Yi(r,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Qb=/^https?/;async function Kb(r){if(r.config.emulator)return;const{authorizedDomains:t}=await Gb(r);for(const n of t)try{if(Yb(n))return}catch{}jn(r,"unauthorized-domain")}function Yb(r){const t=Zd(),{protocol:n,hostname:s}=new URL(t);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!Qb.test(n))return!1;if(Fb.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb=new ql(3e4,6e4);function av(){const r=li().___jsl;if(r!=null&&r.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function $b(r){return new Promise((t,n)=>{var l,c,f;function s(){av(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{av(),n(oi(r,"network-request-failed"))},timeout:Xb.get()})}if((c=(l=li().gapi)==null?void 0:l.iframes)!=null&&c.Iframe)t(gapi.iframes.getContext());else if((f=li().gapi)!=null&&f.load)s();else{const g=zw("iframefcb");return li()[g]=()=>{gapi.load?s():n(oi(r,"network-request-failed"))},F0(`${Lw()}?onload=${g}`).catch(p=>n(p))}}).catch(t=>{throw Nc=null,t})}let Nc=null;function Zb(r){return Nc=Nc||$b(r),Nc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb=new ql(5e3,15e3),Jb="__/auth/iframe",tR="emulator/auth/iframe",eR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function iR(r){const t=r.config;gt(t.authDomain,r,"auth-domain-config-required");const n=t.emulator?wm(t,tR):`https://${r.config.authDomain}/${Jb}`,s={apiKey:t.apiKey,appName:r.name,v:Ja},l=nR.get(r.config.apiHost);l&&(s.eid=l);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${jl(s).slice(1)}`}async function rR(r){const t=await Zb(r),n=li().gapi;return gt(n,r,"internal-error"),t.open({where:document.body,url:iR(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eR,dontclear:!0},s=>new Promise(async(l,c)=>{await s.restyle({setHideOnLeave:!1});const f=oi(r,"network-request-failed"),g=li().setTimeout(()=>{c(f)},Wb.get());function p(){li().clearTimeout(g),l(s)}s.ping(p).then(p,()=>{c(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},aR=500,oR=600,lR="_blank",uR="http://localhost";class ov{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function cR(r,t,n,s=aR,l=oR){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let g="";const p={...sR,width:s.toString(),height:l.toString(),top:c,left:f},y=Ze().toLowerCase();n&&(g=L0(y)?lR:n),U0(y)&&(t=t||uR,p.scrollbars="yes");const T=Object.entries(p).reduce((R,[q,Y])=>`${R}${q}=${Y},`,"");if(Dw(y)&&g!=="_self")return hR(t||"",g),new ov(null);const w=window.open(t||"",g,T);gt(w,r,"popup-blocked");try{w.focus()}catch{}return new ov(w)}function hR(r,t){const n=document.createElement("a");n.href=r,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR="__/auth/handler",dR="emulator/auth/handler",mR=encodeURIComponent("fac");async function lv(r,t,n,s,l,c){gt(r.config.authDomain,r,"auth-domain-config-required"),gt(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:Ja,eventId:l};if(t instanceof Y0){t.setDefaultLanguage(r.languageCode),f.providerId=t.providerId||"",XS(t.getCustomParameters())||(f.customParameters=JSON.stringify(t.getCustomParameters()));for(const[T,w]of Object.entries({}))f[T]=w}if(t instanceof Hl){const T=t.getScopes().filter(w=>w!=="");T.length>0&&(f.scopes=T.join(","))}r.tenantId&&(f.tid=r.tenantId);const g=f;for(const T of Object.keys(g))g[T]===void 0&&delete g[T];const p=await r._getAppCheckToken(),y=p?`#${mR}=${encodeURIComponent(p)}`:"";return`${gR(r)}?${jl(g).slice(1)}${y}`}function gR({config:r}){return r.emulator?wm(r,dR):`https://${r.authDomain}/${fR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ld="webStorageSupport";class pR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tE,this._completeRedirectFn=Bb,this._overrideRedirectResult=kb}async _openPopup(t,n,s,l){var f;Gi((f=this.eventManagers[t._key()])==null?void 0:f.manager,"_initialize() not called before _openPopup()");const c=await lv(t,n,s,Zd(),l);return cR(t,c,Dm())}async _openRedirect(t,n,s,l){await this._originValidation(t);const c=await lv(t,n,s,Zd(),l);return vb(c),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:l,promise:c}=this.eventManagers[n];return l?Promise.resolve(l):(Gi(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(t);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(t){const n=await rR(t),s=new qb(t);return n.register("authEvent",l=>(gt(l==null?void 0:l.authEvent,t,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=n,s}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Ld,{type:Ld},l=>{var f;const c=(f=l==null?void 0:l[0])==null?void 0:f[Ld];c!==void 0&&n(!!c),jn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Kb(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return H0()||k0()||Rm()}}const yR=pR;var uv="@firebase/auth",cv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(s=>{t((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){gt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ER(r){Ha(new Vs("auth",(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),l=t.getProvider("heartbeat"),c=t.getProvider("app-check-internal"),{apiKey:f,authDomain:g}=s.options;gt(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:f,authDomain:g,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:G0(r)},y=new Pw(s,l,c,p);return Fw(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,s)=>{t.getProvider("auth-internal").initialize()})),Ha(new Vs("auth-internal",t=>{const n=to(t.getProvider("auth").getImmediate());return(s=>new _R(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vr(uv,cv,vR(r)),Vr(uv,cv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR=300,AR=v0("authIdTokenMaxAge")||TR;let hv=null;const SR=r=>async t=>{const n=t&&await t.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>AR)return;const l=n==null?void 0:n.token;hv!==l&&(hv=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function wR(r=b0()){const t=Am(r,"auth");if(t.isInitialized())return t.getImmediate();const n=Gw(r,{popupRedirectResolver:yR,persistence:[Cb,pb,tE]}),s=v0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const f=SR(c.toString());hb(n,f,()=>f(n.currentUser)),cb(n,g=>f(g))}}const l=y0("auth");return l&&Qw(n,`http://${l}`),n}function bR(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}Uw({loadJS(r){return new Promise((t,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=t,s.onerror=l=>{const c=oi("internal-error");c.customData=l,n(c)},s.type="text/javascript",s.charset="UTF-8",bR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ER("Browser");var fv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xr,oE;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(V,S){function C(){}C.prototype=S.prototype,V.D=S.prototype,V.prototype=new C,V.prototype.constructor=V,V.C=function(O,M,P){for(var I=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)I[Ue-2]=arguments[Ue];return S.prototype[M].apply(O,I)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(V,S,C){C||(C=0);var O=Array(16);if(typeof S=="string")for(var M=0;16>M;++M)O[M]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(M=0;16>M;++M)O[M]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=V.g[0],C=V.g[1],M=V.g[2];var P=V.g[3],I=S+(P^C&(M^P))+O[0]+3614090360&4294967295;S=C+(I<<7&4294967295|I>>>25),I=P+(M^S&(C^M))+O[1]+3905402710&4294967295,P=S+(I<<12&4294967295|I>>>20),I=M+(C^P&(S^C))+O[2]+606105819&4294967295,M=P+(I<<17&4294967295|I>>>15),I=C+(S^M&(P^S))+O[3]+3250441966&4294967295,C=M+(I<<22&4294967295|I>>>10),I=S+(P^C&(M^P))+O[4]+4118548399&4294967295,S=C+(I<<7&4294967295|I>>>25),I=P+(M^S&(C^M))+O[5]+1200080426&4294967295,P=S+(I<<12&4294967295|I>>>20),I=M+(C^P&(S^C))+O[6]+2821735955&4294967295,M=P+(I<<17&4294967295|I>>>15),I=C+(S^M&(P^S))+O[7]+4249261313&4294967295,C=M+(I<<22&4294967295|I>>>10),I=S+(P^C&(M^P))+O[8]+1770035416&4294967295,S=C+(I<<7&4294967295|I>>>25),I=P+(M^S&(C^M))+O[9]+2336552879&4294967295,P=S+(I<<12&4294967295|I>>>20),I=M+(C^P&(S^C))+O[10]+4294925233&4294967295,M=P+(I<<17&4294967295|I>>>15),I=C+(S^M&(P^S))+O[11]+2304563134&4294967295,C=M+(I<<22&4294967295|I>>>10),I=S+(P^C&(M^P))+O[12]+1804603682&4294967295,S=C+(I<<7&4294967295|I>>>25),I=P+(M^S&(C^M))+O[13]+4254626195&4294967295,P=S+(I<<12&4294967295|I>>>20),I=M+(C^P&(S^C))+O[14]+2792965006&4294967295,M=P+(I<<17&4294967295|I>>>15),I=C+(S^M&(P^S))+O[15]+1236535329&4294967295,C=M+(I<<22&4294967295|I>>>10),I=S+(M^P&(C^M))+O[1]+4129170786&4294967295,S=C+(I<<5&4294967295|I>>>27),I=P+(C^M&(S^C))+O[6]+3225465664&4294967295,P=S+(I<<9&4294967295|I>>>23),I=M+(S^C&(P^S))+O[11]+643717713&4294967295,M=P+(I<<14&4294967295|I>>>18),I=C+(P^S&(M^P))+O[0]+3921069994&4294967295,C=M+(I<<20&4294967295|I>>>12),I=S+(M^P&(C^M))+O[5]+3593408605&4294967295,S=C+(I<<5&4294967295|I>>>27),I=P+(C^M&(S^C))+O[10]+38016083&4294967295,P=S+(I<<9&4294967295|I>>>23),I=M+(S^C&(P^S))+O[15]+3634488961&4294967295,M=P+(I<<14&4294967295|I>>>18),I=C+(P^S&(M^P))+O[4]+3889429448&4294967295,C=M+(I<<20&4294967295|I>>>12),I=S+(M^P&(C^M))+O[9]+568446438&4294967295,S=C+(I<<5&4294967295|I>>>27),I=P+(C^M&(S^C))+O[14]+3275163606&4294967295,P=S+(I<<9&4294967295|I>>>23),I=M+(S^C&(P^S))+O[3]+4107603335&4294967295,M=P+(I<<14&4294967295|I>>>18),I=C+(P^S&(M^P))+O[8]+1163531501&4294967295,C=M+(I<<20&4294967295|I>>>12),I=S+(M^P&(C^M))+O[13]+2850285829&4294967295,S=C+(I<<5&4294967295|I>>>27),I=P+(C^M&(S^C))+O[2]+4243563512&4294967295,P=S+(I<<9&4294967295|I>>>23),I=M+(S^C&(P^S))+O[7]+1735328473&4294967295,M=P+(I<<14&4294967295|I>>>18),I=C+(P^S&(M^P))+O[12]+2368359562&4294967295,C=M+(I<<20&4294967295|I>>>12),I=S+(C^M^P)+O[5]+4294588738&4294967295,S=C+(I<<4&4294967295|I>>>28),I=P+(S^C^M)+O[8]+2272392833&4294967295,P=S+(I<<11&4294967295|I>>>21),I=M+(P^S^C)+O[11]+1839030562&4294967295,M=P+(I<<16&4294967295|I>>>16),I=C+(M^P^S)+O[14]+4259657740&4294967295,C=M+(I<<23&4294967295|I>>>9),I=S+(C^M^P)+O[1]+2763975236&4294967295,S=C+(I<<4&4294967295|I>>>28),I=P+(S^C^M)+O[4]+1272893353&4294967295,P=S+(I<<11&4294967295|I>>>21),I=M+(P^S^C)+O[7]+4139469664&4294967295,M=P+(I<<16&4294967295|I>>>16),I=C+(M^P^S)+O[10]+3200236656&4294967295,C=M+(I<<23&4294967295|I>>>9),I=S+(C^M^P)+O[13]+681279174&4294967295,S=C+(I<<4&4294967295|I>>>28),I=P+(S^C^M)+O[0]+3936430074&4294967295,P=S+(I<<11&4294967295|I>>>21),I=M+(P^S^C)+O[3]+3572445317&4294967295,M=P+(I<<16&4294967295|I>>>16),I=C+(M^P^S)+O[6]+76029189&4294967295,C=M+(I<<23&4294967295|I>>>9),I=S+(C^M^P)+O[9]+3654602809&4294967295,S=C+(I<<4&4294967295|I>>>28),I=P+(S^C^M)+O[12]+3873151461&4294967295,P=S+(I<<11&4294967295|I>>>21),I=M+(P^S^C)+O[15]+530742520&4294967295,M=P+(I<<16&4294967295|I>>>16),I=C+(M^P^S)+O[2]+3299628645&4294967295,C=M+(I<<23&4294967295|I>>>9),I=S+(M^(C|~P))+O[0]+4096336452&4294967295,S=C+(I<<6&4294967295|I>>>26),I=P+(C^(S|~M))+O[7]+1126891415&4294967295,P=S+(I<<10&4294967295|I>>>22),I=M+(S^(P|~C))+O[14]+2878612391&4294967295,M=P+(I<<15&4294967295|I>>>17),I=C+(P^(M|~S))+O[5]+4237533241&4294967295,C=M+(I<<21&4294967295|I>>>11),I=S+(M^(C|~P))+O[12]+1700485571&4294967295,S=C+(I<<6&4294967295|I>>>26),I=P+(C^(S|~M))+O[3]+2399980690&4294967295,P=S+(I<<10&4294967295|I>>>22),I=M+(S^(P|~C))+O[10]+4293915773&4294967295,M=P+(I<<15&4294967295|I>>>17),I=C+(P^(M|~S))+O[1]+2240044497&4294967295,C=M+(I<<21&4294967295|I>>>11),I=S+(M^(C|~P))+O[8]+1873313359&4294967295,S=C+(I<<6&4294967295|I>>>26),I=P+(C^(S|~M))+O[15]+4264355552&4294967295,P=S+(I<<10&4294967295|I>>>22),I=M+(S^(P|~C))+O[6]+2734768916&4294967295,M=P+(I<<15&4294967295|I>>>17),I=C+(P^(M|~S))+O[13]+1309151649&4294967295,C=M+(I<<21&4294967295|I>>>11),I=S+(M^(C|~P))+O[4]+4149444226&4294967295,S=C+(I<<6&4294967295|I>>>26),I=P+(C^(S|~M))+O[11]+3174756917&4294967295,P=S+(I<<10&4294967295|I>>>22),I=M+(S^(P|~C))+O[2]+718787259&4294967295,M=P+(I<<15&4294967295|I>>>17),I=C+(P^(M|~S))+O[9]+3951481745&4294967295,V.g[0]=V.g[0]+S&4294967295,V.g[1]=V.g[1]+(M+(I<<21&4294967295|I>>>11))&4294967295,V.g[2]=V.g[2]+M&4294967295,V.g[3]=V.g[3]+P&4294967295}s.prototype.u=function(V,S){S===void 0&&(S=V.length);for(var C=S-this.blockSize,O=this.B,M=this.h,P=0;P<S;){if(M==0)for(;P<=C;)l(this,V,P),P+=this.blockSize;if(typeof V=="string"){for(;P<S;)if(O[M++]=V.charCodeAt(P++),M==this.blockSize){l(this,O),M=0;break}}else for(;P<S;)if(O[M++]=V[P++],M==this.blockSize){l(this,O),M=0;break}}this.h=M,this.o+=S},s.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var S=1;S<V.length-8;++S)V[S]=0;var C=8*this.o;for(S=V.length-8;S<V.length;++S)V[S]=C&255,C/=256;for(this.u(V),V=Array(16),S=C=0;4>S;++S)for(var O=0;32>O;O+=8)V[C++]=this.g[S]>>>O&255;return V};function c(V,S){var C=g;return Object.prototype.hasOwnProperty.call(C,V)?C[V]:C[V]=S(V)}function f(V,S){this.h=S;for(var C=[],O=!0,M=V.length-1;0<=M;M--){var P=V[M]|0;O&&P==S||(C[M]=P,O=!1)}this.g=C}var g={};function p(V){return-128<=V&&128>V?c(V,function(S){return new f([S|0],0>S?-1:0)}):new f([V|0],0>V?-1:0)}function y(V){if(isNaN(V)||!isFinite(V))return w;if(0>V)return $(y(-V));for(var S=[],C=1,O=0;V>=C;O++)S[O]=V/C|0,C*=4294967296;return new f(S,0)}function T(V,S){if(V.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(V.charAt(0)=="-")return $(T(V.substring(1),S));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=y(Math.pow(S,8)),O=w,M=0;M<V.length;M+=8){var P=Math.min(8,V.length-M),I=parseInt(V.substring(M,M+P),S);8>P?(P=y(Math.pow(S,P)),O=O.j(P).add(y(I))):(O=O.j(C),O=O.add(y(I)))}return O}var w=p(0),R=p(1),q=p(16777216);r=f.prototype,r.m=function(){if(et(this))return-$(this).m();for(var V=0,S=1,C=0;C<this.g.length;C++){var O=this.i(C);V+=(0<=O?O:4294967296+O)*S,S*=4294967296}return V},r.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(Y(this))return"0";if(et(this))return"-"+$(this).toString(V);for(var S=y(Math.pow(V,6)),C=this,O="";;){var M=Ut(C,S).g;C=_t(C,M.j(S));var P=((0<C.g.length?C.g[0]:C.h)>>>0).toString(V);if(C=M,Y(C))return P+O;for(;6>P.length;)P="0"+P;O=P+O}},r.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function Y(V){if(V.h!=0)return!1;for(var S=0;S<V.g.length;S++)if(V.g[S]!=0)return!1;return!0}function et(V){return V.h==-1}r.l=function(V){return V=_t(this,V),et(V)?-1:Y(V)?0:1};function $(V){for(var S=V.g.length,C=[],O=0;O<S;O++)C[O]=~V.g[O];return new f(C,~V.h).add(R)}r.abs=function(){return et(this)?$(this):this},r.add=function(V){for(var S=Math.max(this.g.length,V.g.length),C=[],O=0,M=0;M<=S;M++){var P=O+(this.i(M)&65535)+(V.i(M)&65535),I=(P>>>16)+(this.i(M)>>>16)+(V.i(M)>>>16);O=I>>>16,P&=65535,I&=65535,C[M]=I<<16|P}return new f(C,C[C.length-1]&-2147483648?-1:0)};function _t(V,S){return V.add($(S))}r.j=function(V){if(Y(this)||Y(V))return w;if(et(this))return et(V)?$(this).j($(V)):$($(this).j(V));if(et(V))return $(this.j($(V)));if(0>this.l(q)&&0>V.l(q))return y(this.m()*V.m());for(var S=this.g.length+V.g.length,C=[],O=0;O<2*S;O++)C[O]=0;for(O=0;O<this.g.length;O++)for(var M=0;M<V.g.length;M++){var P=this.i(O)>>>16,I=this.i(O)&65535,Ue=V.i(M)>>>16,se=V.i(M)&65535;C[2*O+2*M]+=I*se,mt(C,2*O+2*M),C[2*O+2*M+1]+=P*se,mt(C,2*O+2*M+1),C[2*O+2*M+1]+=I*Ue,mt(C,2*O+2*M+1),C[2*O+2*M+2]+=P*Ue,mt(C,2*O+2*M+2)}for(O=0;O<S;O++)C[O]=C[2*O+1]<<16|C[2*O];for(O=S;O<2*S;O++)C[O]=0;return new f(C,0)};function mt(V,S){for(;(V[S]&65535)!=V[S];)V[S+1]+=V[S]>>>16,V[S]&=65535,S++}function ft(V,S){this.g=V,this.h=S}function Ut(V,S){if(Y(S))throw Error("division by zero");if(Y(V))return new ft(w,w);if(et(V))return S=Ut($(V),S),new ft($(S.g),$(S.h));if(et(S))return S=Ut(V,$(S)),new ft($(S.g),S.h);if(30<V.g.length){if(et(V)||et(S))throw Error("slowDivide_ only works with positive integers.");for(var C=R,O=S;0>=O.l(V);)C=At(C),O=At(O);var M=Lt(C,1),P=Lt(O,1);for(O=Lt(O,2),C=Lt(C,2);!Y(O);){var I=P.add(O);0>=I.l(V)&&(M=M.add(C),P=I),O=Lt(O,1),C=Lt(C,1)}return S=_t(V,M.j(S)),new ft(M,S)}for(M=w;0<=V.l(S);){for(C=Math.max(1,Math.floor(V.m()/S.m())),O=Math.ceil(Math.log(C)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),P=y(C),I=P.j(S);et(I)||0<I.l(V);)C-=O,P=y(C),I=P.j(S);Y(P)&&(P=R),M=M.add(P),V=_t(V,I)}return new ft(M,V)}r.A=function(V){return Ut(this,V).h},r.and=function(V){for(var S=Math.max(this.g.length,V.g.length),C=[],O=0;O<S;O++)C[O]=this.i(O)&V.i(O);return new f(C,this.h&V.h)},r.or=function(V){for(var S=Math.max(this.g.length,V.g.length),C=[],O=0;O<S;O++)C[O]=this.i(O)|V.i(O);return new f(C,this.h|V.h)},r.xor=function(V){for(var S=Math.max(this.g.length,V.g.length),C=[],O=0;O<S;O++)C[O]=this.i(O)^V.i(O);return new f(C,this.h^V.h)};function At(V){for(var S=V.g.length+1,C=[],O=0;O<S;O++)C[O]=V.i(O)<<1|V.i(O-1)>>>31;return new f(C,V.h)}function Lt(V,S){var C=S>>5;S%=32;for(var O=V.g.length-C,M=[],P=0;P<O;P++)M[P]=0<S?V.i(P+C)>>>S|V.i(P+C+1)<<32-S:V.i(P+C);return new f(M,V.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,oE=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=y,f.fromString=T,xr=f}).apply(typeof fv<"u"?fv:typeof self<"u"?self:typeof window<"u"?window:{});var Ac=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lE,El,uE,Oc,tm,cE,hE,fE;(function(){var r,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,_){return u==Array.prototype||u==Object.prototype||(u[m]=_.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ac=="object"&&Ac];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function l(u,m){if(m)t:{var _=s;u=u.split(".");for(var A=0;A<u.length-1;A++){var U=u[A];if(!(U in _))break t;_=_[U]}u=u[u.length-1],A=_[u],m=m(A),m!=A&&m!=null&&t(_,u,{configurable:!0,writable:!0,value:m})}}function c(u,m){u instanceof String&&(u+="");var _=0,A=!1,U={next:function(){if(!A&&_<u.length){var j=_++;return{value:m(j,u[j]),done:!1}}return A=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}l("Array.prototype.values",function(u){return u||function(){return c(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},g=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function T(u,m,_){return u.call.apply(u.bind,arguments)}function w(u,m,_){if(!u)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,A),u.apply(m,U)}}return function(){return u.apply(m,arguments)}}function R(u,m,_){return R=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:w,R.apply(null,arguments)}function q(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function Y(u,m){function _(){}_.prototype=m.prototype,u.aa=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(A,U,j){for(var tt=Array(arguments.length-2),Vt=2;Vt<arguments.length;Vt++)tt[Vt-2]=arguments[Vt];return m.prototype[U].apply(A,tt)}}function et(u){const m=u.length;if(0<m){const _=Array(m);for(let A=0;A<m;A++)_[A]=u[A];return _}return[]}function $(u,m){for(let _=1;_<arguments.length;_++){const A=arguments[_];if(p(A)){const U=u.length||0,j=A.length||0;u.length=U+j;for(let tt=0;tt<j;tt++)u[U+tt]=A[tt]}else u.push(A)}}class _t{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function mt(u){return/^[\s\xa0]*$/.test(u)}function ft(){var u=g.navigator;return u&&(u=u.userAgent)?u:""}function Ut(u){return Ut[" "](u),u}Ut[" "]=function(){};var At=ft().indexOf("Gecko")!=-1&&!(ft().toLowerCase().indexOf("webkit")!=-1&&ft().indexOf("Edge")==-1)&&!(ft().indexOf("Trident")!=-1||ft().indexOf("MSIE")!=-1)&&ft().indexOf("Edge")==-1;function Lt(u,m,_){for(const A in u)m.call(_,u[A],A,u)}function V(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function S(u){const m={};for(const _ in u)m[_]=u[_];return m}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(u,m){let _,A;for(let U=1;U<arguments.length;U++){A=arguments[U];for(_ in A)u[_]=A[_];for(let j=0;j<C.length;j++)_=C[j],Object.prototype.hasOwnProperty.call(A,_)&&(u[_]=A[_])}}function M(u){var m=1;u=u.split(":");const _=[];for(;0<m&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function P(u){g.setTimeout(()=>{throw u},0)}function I(){var u=zt;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Ue{constructor(){this.h=this.g=null}add(m,_){const A=se.get();A.set(m,_),this.h?this.h.next=A:this.g=A,this.h=A}}var se=new _t(()=>new H,u=>u.reset());class H{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let nt,lt=!1,zt=new Ue,D=()=>{const u=g.Promise.resolve(void 0);nt=()=>{u.then(W)}};var W=()=>{for(var u;u=I();){try{u.h.call(u.g)}catch(_){P(_)}var m=se;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}lt=!1};function it(){this.s=this.s,this.C=this.C}it.prototype.s=!1,it.prototype.ma=function(){this.s||(this.s=!0,this.N())},it.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function J(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}J.prototype.h=function(){this.defaultPrevented=!0};var ct=(function(){if(!g.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};g.addEventListener("test",_,m),g.removeEventListener("test",_,m)}catch{}return u})();function bt(u,m){if(J.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(At){t:{try{Ut(m.nodeName);var U=!0;break t}catch{}U=!1}U||(m=null)}}else _=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement);this.relatedTarget=m,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:vt[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&bt.aa.h.call(this)}}Y(bt,J);var vt={2:"touch",3:"pen",4:"mouse"};bt.prototype.h=function(){bt.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var De="closure_listenable_"+(1e6*Math.random()|0),Zt=0;function Hn(u,m,_,A,U){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!A,this.ha=U,this.key=++Zt,this.da=this.fa=!1}function Xi(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function gi(u){this.src=u,this.g={},this.h=0}gi.prototype.add=function(u,m,_,A,U){var j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);var tt=Qr(u,m,A,U);return-1<tt?(m=u[tt],_||(m.fa=!1)):(m=new Hn(m,this.src,j,!!A,U),m.fa=_,u.push(m)),m};function Fr(u,m){var _=m.type;if(_ in u.g){var A=u.g[_],U=Array.prototype.indexOf.call(A,m,void 0),j;(j=0<=U)&&Array.prototype.splice.call(A,U,1),j&&(Xi(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Qr(u,m,_,A){for(var U=0;U<u.length;++U){var j=u[U];if(!j.da&&j.listener==m&&j.capture==!!_&&j.ha==A)return U}return-1}var Kr="closure_lm_"+(1e6*Math.random()|0),oo={};function Zl(u,m,_,A,U){if(Array.isArray(m)){for(var j=0;j<m.length;j++)Zl(u,m[j],_,A,U);return null}return _=Wl(_),u&&u[De]?u.K(m,_,y(A)?!!A.capture:!1,U):_n(u,m,_,!1,A,U)}function _n(u,m,_,A,U,j){if(!m)throw Error("Invalid event type");var tt=y(U)?!!U.capture:!!U,Vt=qs(u);if(Vt||(u[Kr]=Vt=new gi(u)),_=Vt.add(m,_,A,tt,j),_.proxy)return _;if(A=bh(),_.proxy=A,A.src=u,A.listener=_,u.addEventListener)ct||(U=tt),U===void 0&&(U=!1),u.addEventListener(m.toString(),A,U);else if(u.attachEvent)u.attachEvent(Yr(m.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function bh(){function u(_){return m.call(u.src,u.listener,_)}const m=Rh;return u}function lo(u,m,_,A,U){if(Array.isArray(m))for(var j=0;j<m.length;j++)lo(u,m[j],_,A,U);else A=y(A)?!!A.capture:!!A,_=Wl(_),u&&u[De]?(u=u.i,m=String(m).toString(),m in u.g&&(j=u.g[m],_=Qr(j,_,A,U),-1<_&&(Xi(j[_]),Array.prototype.splice.call(j,_,1),j.length==0&&(delete u.g[m],u.h--)))):u&&(u=qs(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Qr(m,_,A,U)),(_=-1<u?m[u]:null)&&js(_))}function js(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[De])Fr(m.i,u);else{var _=u.type,A=u.proxy;m.removeEventListener?m.removeEventListener(_,A,u.capture):m.detachEvent?m.detachEvent(Yr(_),A):m.addListener&&m.removeListener&&m.removeListener(A),(_=qs(m))?(Fr(_,u),_.h==0&&(_.src=null,m[Kr]=null)):Xi(u)}}}function Yr(u){return u in oo?oo[u]:oo[u]="on"+u}function Rh(u,m){if(u.da)u=!0;else{m=new bt(m,this);var _=u.listener,A=u.ha||u.src;u.fa&&js(u),u=_.call(A,m)}return u}function qs(u){return u=u[Kr],u instanceof gi?u:null}var uo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wl(u){return typeof u=="function"?u:(u[uo]||(u[uo]=function(m){return u.handleEvent(m)}),u[uo])}function ae(){it.call(this),this.i=new gi(this),this.M=this,this.F=null}Y(ae,it),ae.prototype[De]=!0,ae.prototype.removeEventListener=function(u,m,_,A){lo(this,u,m,_,A)};function Ht(u,m){var _,A=u.F;if(A)for(_=[];A;A=A.F)_.push(A);if(u=u.M,A=m.type||m,typeof m=="string")m=new J(m,u);else if(m instanceof J)m.target=m.target||u;else{var U=m;m=new J(A,u),O(m,U)}if(U=!0,_)for(var j=_.length-1;0<=j;j--){var tt=m.g=_[j];U=ln(tt,A,!0,m)&&U}if(tt=m.g=u,U=ln(tt,A,!0,m)&&U,U=ln(tt,A,!1,m)&&U,_)for(j=0;j<_.length;j++)tt=m.g=_[j],U=ln(tt,A,!1,m)&&U}ae.prototype.N=function(){if(ae.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var _=u.g[m],A=0;A<_.length;A++)Xi(_[A]);delete u.g[m],u.h--}}this.F=null},ae.prototype.K=function(u,m,_,A){return this.i.add(String(u),m,!1,_,A)},ae.prototype.L=function(u,m,_,A){return this.i.add(String(u),m,!0,_,A)};function ln(u,m,_,A){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var U=!0,j=0;j<m.length;++j){var tt=m[j];if(tt&&!tt.da&&tt.capture==_){var Vt=tt.listener,we=tt.ha||tt.src;tt.fa&&Fr(u.i,tt),U=Vt.call(we,A)!==!1&&U}}return U&&!A.defaultPrevented}function Fe(u,m,_){if(typeof u=="function")_&&(u=R(u,_));else if(u&&typeof u.handleEvent=="function")u=R(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:g.setTimeout(u,m||0)}function Jl(u){u.g=Fe(()=>{u.g=null,u.i&&(u.i=!1,Jl(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Ih extends it{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Jl(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xr(u){it.call(this),this.h=u,this.g={}}Y(Xr,it);var $r=[];function Zr(u){Lt(u.g,function(m,_){this.g.hasOwnProperty(_)&&js(m)},u),u.g={}}Xr.prototype.N=function(){Xr.aa.N.call(this),Zr(this)},Xr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vn=g.JSON.stringify,Hs=g.JSON.parse,Wr=class{stringify(u){return g.JSON.stringify(u,void 0)}parse(u){return g.JSON.parse(u,void 0)}};function co(){}co.prototype.h=null;function ho(u){return u.h||(u.h=u.i())}function fo(){}var pi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function yi(){J.call(this,"d")}Y(yi,J);function mo(){J.call(this,"c")}Y(mo,J);var Gn={},go=null;function $i(){return go=go||new ae}Gn.La="serverreachability";function Gs(u){J.call(this,Gn.La,u)}Y(Gs,J);function Zi(u){const m=$i();Ht(m,new Gs(m))}Gn.STAT_EVENT="statevent";function tu(u,m){J.call(this,Gn.STAT_EVENT,u),this.stat=m}Y(tu,J);function ee(u){const m=$i();Ht(m,new tu(m,u))}Gn.Ma="timingevent";function Se(u,m){J.call(this,Gn.Ma,u),this.size=m}Y(Se,J);function ge(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){u()},m)}function vn(){this.g=!0}vn.prototype.xa=function(){this.g=!1};function po(u,m,_,A,U,j){u.info(function(){if(u.g)if(j)for(var tt="",Vt=j.split("&"),we=0;we<Vt.length;we++){var Mt=Vt[we].split("=");if(1<Mt.length){var Oe=Mt[0];Mt=Mt[1];var be=Oe.split("_");tt=2<=be.length&&be[1]=="type"?tt+(Oe+"="+Mt+"&"):tt+(Oe+"=redacted&")}}else tt=null;else tt=j;return"XMLHTTP REQ ("+A+") [attempt "+U+"]: "+m+`
`+_+`
`+tt})}function Ch(u,m,_,A,U,j,tt){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+U+"]: "+m+`
`+_+`
`+j+" "+tt})}function Wi(u,m,_,A){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Jr(u,_)+(A?" "+A:"")})}function eu(u,m){u.info(function(){return"TIMEOUT: "+m})}vn.prototype.info=function(){};function Jr(u,m){if(!u.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var A=_[u];if(!(2>A.length)){var U=A[1];if(Array.isArray(U)&&!(1>U.length)){var j=U[0];if(j!="noop"&&j!="stop"&&j!="close")for(var tt=1;tt<U.length;tt++)U[tt]=""}}}}return Vn(_)}catch{return m}}var Ji={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},_i={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Fn;function Qn(){}Y(Qn,co),Qn.prototype.g=function(){return new XMLHttpRequest},Qn.prototype.i=function(){return{}},Fn=new Qn;function We(u,m,_,A){this.j=u,this.i=m,this.l=_,this.R=A||1,this.U=new Xr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ce}function ce(){this.i=null,this.g="",this.h=!1}var yo={},Fs={};function Mn(u,m,_){u.L=1,u.v=rs(un(m)),u.m=_,u.P=!0,vi(u,null)}function vi(u,m){u.F=Date.now(),ts(u),u.A=un(u.v);var _=u.A,A=u.R;Array.isArray(A)||(A=[String(A)]),So(_.i,"t",A),u.C=0,_=u.j.J,u.h=new ce,u.g=yu(u.j,_?m:null,!u.m),0<u.O&&(u.M=new Ih(R(u.Y,u,u.g),u.O)),m=u.U,_=u.g,A=u.ca;var U="readystatechange";Array.isArray(U)||(U&&($r[0]=U.toString()),U=$r);for(var j=0;j<U.length;j++){var tt=Zl(_,U[j],A||m.handleEvent,!1,m.h||m);if(!tt)break;m.g[tt.key]=tt}m=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),Zi(),po(u.i,u.u,u.A,u.l,u.R,u.m)}We.prototype.ca=function(u){u=u.target;const m=this.M;m&&Sn(u)==3?m.j():this.Y(u)},We.prototype.Y=function(u){try{if(u==this.g)t:{const be=Sn(this.g);var m=this.g.Ba();const Ii=this.g.Z();if(!(3>be)&&(be!=3||this.g&&(this.h.h||this.g.oa()||uu(this.g)))){this.J||be!=4||m==7||(m==8||0>=Ii?Zi(3):Zi(2)),tr(this);var _=this.g.Z();this.X=_;e:if(nu(this)){var A=uu(this.g);u="";var U=A.length,j=Sn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ke(this),Kn(this);var tt="";break e}this.h.i=new g.TextDecoder}for(m=0;m<U;m++)this.h.h=!0,u+=this.h.i.decode(A[m],{stream:!(j&&m==U-1)});A.length=0,this.h.g+=u,this.C=0,tt=this.h.g}else tt=this.g.oa();if(this.o=_==200,Ch(this.i,this.u,this.A,this.l,this.R,be,_),this.o){if(this.T&&!this.K){e:{if(this.g){var Vt,we=this.g;if((Vt=we.g?we.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!mt(Vt)){var Mt=Vt;break e}}Mt=null}if(_=Mt)Wi(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,es(this,_);else{this.o=!1,this.s=3,ee(12),ke(this),Kn(this);break t}}if(this.P){_=!0;let Le;for(;!this.J&&this.C<tt.length;)if(Le=iu(this,tt),Le==Fs){be==4&&(this.s=4,ee(14),_=!1),Wi(this.i,this.l,null,"[Incomplete Response]");break}else if(Le==yo){this.s=4,ee(15),Wi(this.i,this.l,tt,"[Invalid Chunk]"),_=!1;break}else Wi(this.i,this.l,Le,null),es(this,Le);if(nu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),be!=4||tt.length!=0||this.h.h||(this.s=1,ee(16),_=!1),this.o=this.o&&_,!_)Wi(this.i,this.l,tt,"[Invalid Chunked Response]"),ke(this),Kn(this);else if(0<tt.length&&!this.W){this.W=!0;var Oe=this.j;Oe.g==this&&Oe.ba&&!Oe.M&&(Oe.j.info("Great, no buffering proxy detected. Bytes received: "+tt.length),fs(Oe),Oe.M=!0,ee(11))}}else Wi(this.i,this.l,tt,null),es(this,tt);be==4&&ke(this),this.o&&!this.J&&(be==4?mu(this.j,this):(this.o=!1,ts(this)))}else Mh(this.g),_==400&&0<tt.indexOf("Unknown SID")?(this.s=3,ee(12)):(this.s=0,ee(13)),ke(this),Kn(this)}}}catch{}finally{}};function nu(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function iu(u,m){var _=u.C,A=m.indexOf(`
`,_);return A==-1?Fs:(_=Number(m.substring(_,A)),isNaN(_)?yo:(A+=1,A+_>m.length?Fs:(m=m.slice(A,A+_),u.C=A+_,m)))}We.prototype.cancel=function(){this.J=!0,ke(this)};function ts(u){u.S=Date.now()+u.I,ru(u,u.I)}function ru(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=ge(R(u.ba,u),m)}function tr(u){u.B&&(g.clearTimeout(u.B),u.B=null)}We.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(eu(this.i,this.A),this.L!=2&&(Zi(),ee(17)),ke(this),this.s=2,Kn(this)):ru(this,this.S-u)};function Kn(u){u.j.G==0||u.J||mu(u.j,u)}function ke(u){tr(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,Zr(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function es(u,m){try{var _=u.j;if(_.G!=0&&(_.g==u||_o(_.h,u))){if(!u.K&&_o(_.h,u)&&_.G==3){try{var A=_.Da.g.parse(m)}catch{A=null}if(Array.isArray(A)&&A.length==3){var U=A;if(U[0]==0){t:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)ia(_),ea(_);else break t;Co(_),ee(18)}}else _.za=U[1],0<_.za-_.T&&37500>U[2]&&_.F&&_.v==0&&!_.C&&(_.C=ge(R(_.Za,_),6e3));if(1>=Ks(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Ri(_,11)}else if((u.K||_.g==u)&&ia(_),!mt(m))for(U=_.Da.g.parse(m),m=0;m<U.length;m++){let Mt=U[m];if(_.T=Mt[0],Mt=Mt[1],_.G==2)if(Mt[0]=="c"){_.K=Mt[1],_.ia=Mt[2];const Oe=Mt[3];Oe!=null&&(_.la=Oe,_.j.info("VER="+_.la));const be=Mt[4];be!=null&&(_.Aa=be,_.j.info("SVER="+_.Aa));const Ii=Mt[5];Ii!=null&&typeof Ii=="number"&&0<Ii&&(A=1.5*Ii,_.L=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const Le=u.g;if(Le){const ti=Le.g?Le.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ti){var j=A.h;j.g||ti.indexOf("spdy")==-1&&ti.indexOf("quic")==-1&&ti.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Ys(j,j.h),j.h=null))}if(A.D){const No=Le.g?Le.g.getResponseHeader("X-HTTP-Session-Id"):null;No&&(A.ya=No,Qt(A.I,A.D,No))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),A=_;var tt=u;if(A.qa=pu(A,A.J?A.ia:null,A.W),tt.K){Je(A.h,tt);var Vt=tt,we=A.L;we&&(Vt.I=we),Vt.B&&(tr(Vt),ts(Vt)),A.g=tt}else fu(A);0<_.i.length&&na(_)}else Mt[0]!="stop"&&Mt[0]!="close"||Ri(_,7);else _.G==3&&(Mt[0]=="stop"||Mt[0]=="close"?Mt[0]=="stop"?Ri(_,7):Ro(_):Mt[0]!="noop"&&_.l&&_.l.ta(Mt),_.v=0)}}Zi(4)}catch{}}var su=class{constructor(u,m){this.g=u,this.map=m}};function Ei(u){this.l=u||10,g.PerformanceNavigationTiming?(u=g.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qs(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ks(u){return u.h?1:u.g?u.g.size:0}function _o(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Ys(u,m){u.g?u.g.add(m):u.h=m}function Je(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Ei.prototype.cancel=function(){if(this.i=vo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function vo(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.D);return m}return et(u.i)}function Dh(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],_=u.length,A=0;A<_;A++)m.push(u[A]);return m}m=[],_=0;for(A in u)m[_++]=u[A];return m}function Xs(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var _=0;_<u;_++)m.push(_);return m}m=[],_=0;for(const A in u)m[_++]=A;return m}}}function Eo(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var _=Xs(u),A=Dh(u),U=A.length,j=0;j<U;j++)m.call(void 0,A[j],_&&_[j],u)}var ns=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Nh(u,m){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var A=u[_].indexOf("="),U=null;if(0<=A){var j=u[_].substring(0,A);U=u[_].substring(A+1)}else j=u[_];m(j,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function pe(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof pe){this.h=u.h,is(this,u.j),this.o=u.o,this.g=u.g,er(this,u.s),this.l=u.l;var m=u.i,_=new Ai;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),Ti(this,_),this.m=u.m}else u&&(m=String(u).match(ns))?(this.h=!1,is(this,m[1]||"",!0),this.o=En(m[2]||""),this.g=En(m[3]||"",!0),er(this,m[4]),this.l=En(m[5]||"",!0),Ti(this,m[6]||"",!0),this.m=En(m[7]||"")):(this.h=!1,this.i=new Ai(null,this.h))}pe.prototype.toString=function(){var u=[],m=this.j;m&&u.push(ss(m,To,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(ss(m,To,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(ss(_,_.charAt(0)=="/"?Oh:Ao,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",ss(_,$s)),u.join("")};function un(u){return new pe(u)}function is(u,m,_){u.j=_?En(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function er(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Ti(u,m,_){m instanceof Ai?(u.i=m,ou(u.i,u.h)):(_||(m=ss(m,Vh)),u.i=new Ai(m,u.h))}function Qt(u,m,_){u.i.set(m,_)}function rs(u){return Qt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function En(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ss(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,au),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function au(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var To=/[#\/\?@]/g,Ao=/[#\?:]/g,Oh=/[#\?]/g,Vh=/[#\?@]/g,$s=/#/g;function Ai(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Tn(u){u.g||(u.g=new Map,u.h=0,u.i&&Nh(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=Ai.prototype,r.add=function(u,m){Tn(this),this.i=null,u=Yn(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function Si(u,m){Tn(u),m=Yn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function wi(u,m){return Tn(u),m=Yn(u,m),u.g.has(m)}r.forEach=function(u,m){Tn(this),this.g.forEach(function(_,A){_.forEach(function(U){u.call(m,U,A,this)},this)},this)},r.na=function(){Tn(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let A=0;A<m.length;A++){const U=u[A];for(let j=0;j<U.length;j++)_.push(m[A])}return _},r.V=function(u){Tn(this);let m=[];if(typeof u=="string")wi(this,u)&&(m=m.concat(this.g.get(Yn(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)m=m.concat(u[_])}return m},r.set=function(u,m){return Tn(this),this.i=null,u=Yn(this,u),wi(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function So(u,m,_){Si(u,m),0<_.length&&(u.i=null,u.g.set(Yn(u,m),et(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var A=m[_];const j=encodeURIComponent(String(A)),tt=this.V(A);for(A=0;A<tt.length;A++){var U=j;tt[A]!==""&&(U+="="+encodeURIComponent(String(tt[A]))),u.push(U)}}return this.i=u.join("&")};function Yn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function ou(u,m){m&&!u.j&&(Tn(u),u.i=null,u.g.forEach(function(_,A){var U=A.toLowerCase();A!=U&&(Si(this,A),So(this,U,_))},u)),u.j=m}function as(u,m){const _=new vn;if(g.Image){const A=new Image;A.onload=q(An,_,"TestLoadImage: loaded",!0,m,A),A.onerror=q(An,_,"TestLoadImage: error",!1,m,A),A.onabort=q(An,_,"TestLoadImage: abort",!1,m,A),A.ontimeout=q(An,_,"TestLoadImage: timeout",!1,m,A),g.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else m(!1)}function xn(u,m){const _=new vn,A=new AbortController,U=setTimeout(()=>{A.abort(),An(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:A.signal}).then(j=>{clearTimeout(U),j.ok?An(_,"TestPingServer: ok",!0,m):An(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(U),An(_,"TestPingServer: error",!1,m)})}function An(u,m,_,A,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),A(_)}catch{}}function os(){this.g=new Wr}function Xn(u,m,_){const A=_||"";try{Eo(u,function(U,j){let tt=U;y(U)&&(tt=Vn(U)),m.push(A+j+"="+encodeURIComponent(tt))})}catch(U){throw m.push(A+"type="+encodeURIComponent("_badmap")),U}}function nr(u){this.l=u.Ub||null,this.j=u.eb||!1}Y(nr,co),nr.prototype.g=function(){return new bi(this.l,this.j)},nr.prototype.i=(function(u){return function(){return u}})({});function bi(u,m){ae.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}Y(bi,ae),r=bi.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Zn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||g).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$n(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Zn(this)),this.g&&(this.readyState=3,Zn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;wo(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function wo(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?$n(this):Zn(this),this.readyState==3&&wo(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,$n(this))},r.Qa=function(u){this.g&&(this.response=u,$n(this))},r.ga=function(){this.g&&$n(this)};function $n(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Zn(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function Zn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(bi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function bo(u){let m="";return Lt(u,function(_,A){m+=A,m+=":",m+=_,m+=`\r
`}),m}function Ne(u,m,_){t:{for(A in _){var A=!1;break t}A=!0}A||(_=bo(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):Qt(u,m,_))}function jt(u){ae.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}Y(jt,ae);var Zs=/^https?$/i,ls=["POST","PUT"];r=jt.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Fn.g(),this.v=this.o?ho(this.o):ho(Fn),this.g.onreadystatechange=R(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(j){lu(this,j);return}if(u=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var U in A)_.set(U,A[U]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const j of A.keys())_.set(j,A.get(j));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find(j=>j.toLowerCase()=="content-type"),U=g.FormData&&u instanceof g.FormData,!(0<=Array.prototype.indexOf.call(ls,m,void 0))||A||U||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,tt]of _)this.g.setRequestHeader(j,tt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{us(this),this.u=!0,this.g.send(u),this.u=!1}catch(j){lu(this,j)}};function lu(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,Ws(u),Wn(u)}function Ws(u){u.A||(u.A=!0,Ht(u,"complete"),Ht(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ht(this,"complete"),Ht(this,"abort"),Wn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wn(this,!0)),jt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Js(this):this.bb())},r.bb=function(){Js(this)};function Js(u){if(u.h&&typeof f<"u"&&(!u.v[1]||Sn(u)!=4||u.Z()!=2)){if(u.u&&Sn(u)==4)Fe(u.Ea,0,u);else if(Ht(u,"readystatechange"),Sn(u)==4){u.h=!1;try{const tt=u.Z();t:switch(tt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break t;default:m=!1}var _;if(!(_=m)){var A;if(A=tt===0){var U=String(u.D).match(ns)[1]||null;!U&&g.self&&g.self.location&&(U=g.self.location.protocol.slice(0,-1)),A=!Zs.test(U?U.toLowerCase():"")}_=A}if(_)Ht(u,"complete"),Ht(u,"success");else{u.m=6;try{var j=2<Sn(u)?u.g.statusText:""}catch{j=""}u.l=j+" ["+u.Z()+"]",Ws(u)}}finally{Wn(u)}}}}function Wn(u,m){if(u.g){us(u);const _=u.g,A=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||Ht(u,"ready");try{_.onreadystatechange=A}catch{}}}function us(u){u.I&&(g.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Sn(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Sn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Hs(m)}};function uu(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Mh(u){const m={};u=(u.g&&2<=Sn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(mt(u[A]))continue;var _=M(u[A]);const U=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const j=m[U]||[];m[U]=j,j.push(_)}V(m,function(A){return A.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function cs(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function ta(u){this.Aa=0,this.i=[],this.j=new vn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=cs("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=cs("baseRetryDelayMs",5e3,u),this.cb=cs("retryDelaySeedMs",1e4,u),this.Wa=cs("forwardChannelMaxRetries",2,u),this.wa=cs("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ei(u&&u.concurrentRequestLimit),this.Da=new os,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=ta.prototype,r.la=8,r.G=1,r.connect=function(u,m,_,A){ee(0),this.W=u,this.H=m||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.I=pu(this,null,this.W),na(this)};function Ro(u){if(cu(u),u.G==3){var m=u.U++,_=un(u.I);if(Qt(_,"SID",u.K),Qt(_,"RID",m),Qt(_,"TYPE","terminate"),hs(u,_),m=new We(u,u.j,m),m.L=2,m.v=rs(un(_)),_=!1,g.navigator&&g.navigator.sendBeacon)try{_=g.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&g.Image&&(new Image().src=m.v,_=!0),_||(m.g=yu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),ts(m)}gu(u)}function ea(u){u.g&&(fs(u),u.g.cancel(),u.g=null)}function cu(u){ea(u),u.u&&(g.clearTimeout(u.u),u.u=null),ia(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&g.clearTimeout(u.s),u.s=null)}function na(u){if(!Qs(u.h)&&!u.s){u.s=!0;var m=u.Ga;nt||D(),lt||(nt(),lt=!0),zt.add(m,u),u.B=0}}function xh(u,m){return Ks(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=ge(R(u.Ga,u,m),Do(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const U=new We(this,this.j,u);let j=this.o;if(this.S&&(j?(j=S(j),O(j,this.S)):j=this.S),this.m!==null||this.O||(U.H=j,j=null),this.P)t:{for(var m=0,_=0;_<this.i.length;_++){e:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break e}A=void 0}if(A===void 0)break;if(m+=A,4096<m){m=_;break t}if(m===4096||_===this.i.length-1){m=_+1;break t}}m=1e3}else m=1e3;m=hu(this,U,m),_=un(this.I),Qt(_,"RID",u),Qt(_,"CVER",22),this.D&&Qt(_,"X-HTTP-Session-Id",this.D),hs(this,_),j&&(this.O?m="headers="+encodeURIComponent(String(bo(j)))+"&"+m:this.m&&Ne(_,this.m,j)),Ys(this.h,U),this.Ua&&Qt(_,"TYPE","init"),this.P?(Qt(_,"$req",m),Qt(_,"SID","null"),U.T=!0,Mn(U,_,null)):Mn(U,_,m),this.G=2}}else this.G==3&&(u?Io(this,u):this.i.length==0||Qs(this.h)||Io(this))};function Io(u,m){var _;m?_=m.l:_=u.U++;const A=un(u.I);Qt(A,"SID",u.K),Qt(A,"RID",_),Qt(A,"AID",u.T),hs(u,A),u.m&&u.o&&Ne(A,u.m,u.o),_=new We(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),m&&(u.i=m.D.concat(u.i)),m=hu(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Ys(u.h,_),Mn(_,A,m)}function hs(u,m){u.H&&Lt(u.H,function(_,A){Qt(m,A,_)}),u.l&&Eo({},function(_,A){Qt(m,A,_)})}function hu(u,m,_){_=Math.min(u.i.length,_);var A=u.l?R(u.l.Na,u.l,u):null;t:{var U=u.i;let j=-1;for(;;){const tt=["count="+_];j==-1?0<_?(j=U[0].g,tt.push("ofs="+j)):j=0:tt.push("ofs="+j);let Vt=!0;for(let we=0;we<_;we++){let Mt=U[we].g;const Oe=U[we].map;if(Mt-=j,0>Mt)j=Math.max(0,U[we].g-100),Vt=!1;else try{Xn(Oe,tt,"req"+Mt+"_")}catch{A&&A(Oe)}}if(Vt){A=tt.join("&");break t}}}return u=u.i.splice(0,_),m.D=u,A}function fu(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;nt||D(),lt||(nt(),lt=!0),zt.add(m,u),u.v=0}}function Co(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=ge(R(u.Fa,u),Do(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,du(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=ge(R(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ee(10),ea(this),du(this))};function fs(u){u.A!=null&&(g.clearTimeout(u.A),u.A=null)}function du(u){u.g=new We(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=un(u.qa);Qt(m,"RID","rpc"),Qt(m,"SID",u.K),Qt(m,"AID",u.T),Qt(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Qt(m,"TO",u.ja),Qt(m,"TYPE","xmlhttp"),hs(u,m),u.m&&u.o&&Ne(m,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=rs(un(m)),_.m=null,_.P=!0,vi(_,u)}r.Za=function(){this.C!=null&&(this.C=null,ea(this),Co(this),ee(19))};function ia(u){u.C!=null&&(g.clearTimeout(u.C),u.C=null)}function mu(u,m){var _=null;if(u.g==m){ia(u),fs(u),u.g=null;var A=2}else if(_o(u.h,m))_=m.D,Je(u.h,m),A=1;else return;if(u.G!=0){if(m.o)if(A==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var U=u.B;A=$i(),Ht(A,new Se(A,_)),na(u)}else fu(u);else if(U=m.s,U==3||U==0&&0<m.X||!(A==1&&xh(u,m)||A==2&&Co(u)))switch(_&&0<_.length&&(m=u.h,m.i=m.i.concat(_)),U){case 1:Ri(u,5);break;case 4:Ri(u,10);break;case 3:Ri(u,6);break;default:Ri(u,2)}}}function Do(u,m){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*m}function Ri(u,m){if(u.j.info("Error code "+m),m==2){var _=R(u.fb,u),A=u.Xa;const U=!A;A=new pe(A||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||is(A,"https"),rs(A),U?as(A.toString(),_):xn(A.toString(),_)}else ee(2);u.G=0,u.l&&u.l.sa(m),gu(u),cu(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ee(2)):(this.j.info("Failed to ping google.com"),ee(1))};function gu(u){if(u.G=0,u.ka=[],u.l){const m=vo(u.h);(m.length!=0||u.i.length!=0)&&($(u.ka,m),$(u.ka,u.i),u.h.i.length=0,et(u.i),u.i.length=0),u.l.ra()}}function pu(u,m,_){var A=_ instanceof pe?un(_):new pe(_);if(A.g!="")m&&(A.g=m+"."+A.g),er(A,A.s);else{var U=g.location;A=U.protocol,m=m?m+"."+U.hostname:U.hostname,U=+U.port;var j=new pe(null);A&&is(j,A),m&&(j.g=m),U&&er(j,U),_&&(j.l=_),A=j}return _=u.D,m=u.ya,_&&m&&Qt(A,_,m),Qt(A,"VER",u.la),hs(u,A),A}function yu(u,m,_){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new jt(new nr({eb:_})):new jt(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function _u(){}r=_u.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function ra(){}ra.prototype.g=function(u,m){return new tn(u,m)};function tn(u,m){ae.call(this),this.g=new ta(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!mt(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!mt(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Jn(this)}Y(tn,ae),tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){Ro(this.g)},tn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=Vn(u),u=_);m.i.push(new su(m.Ya++,u)),m.G==3&&na(m)},tn.prototype.N=function(){this.g.l=null,delete this.j,Ro(this.g),delete this.g,tn.aa.N.call(this)};function vu(u){yi.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){t:{for(const _ in m){u=_;break t}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}Y(vu,yi);function Eu(){mo.call(this),this.status=1}Y(Eu,mo);function Jn(u){this.g=u}Y(Jn,_u),Jn.prototype.ua=function(){Ht(this.g,"a")},Jn.prototype.ta=function(u){Ht(this.g,new vu(u))},Jn.prototype.sa=function(u){Ht(this.g,new Eu)},Jn.prototype.ra=function(){Ht(this.g,"b")},ra.prototype.createWebChannel=ra.prototype.g,tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,fE=function(){return new ra},hE=function(){return $i()},cE=Gn,tm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ji.NO_ERROR=0,Ji.TIMEOUT=8,Ji.HTTP_ERROR=6,Oc=Ji,_i.COMPLETE="complete",uE=_i,fo.EventType=pi,pi.OPEN="a",pi.CLOSE="b",pi.ERROR="c",pi.MESSAGE="d",ae.prototype.listen=ae.prototype.K,El=fo,jt.prototype.listenOnce=jt.prototype.L,jt.prototype.getLastError=jt.prototype.Ka,jt.prototype.getLastErrorCode=jt.prototype.Ba,jt.prototype.getStatus=jt.prototype.Z,jt.prototype.getResponseJson=jt.prototype.Oa,jt.prototype.getResponseText=jt.prototype.oa,jt.prototype.send=jt.prototype.ea,jt.prototype.setWithCredentials=jt.prototype.Ha,lE=jt}).apply(typeof Ac<"u"?Ac:typeof self<"u"?self:typeof window<"u"?window:{});const dv="@firebase/firestore",mv="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Xe.UNAUTHENTICATED=new Xe(null),Xe.GOOGLE_CREDENTIALS=new Xe("google-credentials-uid"),Xe.FIRST_PARTY=new Xe("first-party-uid"),Xe.MOCK_USER=new Xe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let no="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs=new Em("@firebase/firestore");function Ma(){return xs.logLevel}function st(r,...t){if(xs.logLevel<=Dt.DEBUG){const n=t.map(Om);xs.debug(`Firestore (${no}): ${r}`,...n)}}function Fi(r,...t){if(xs.logLevel<=Dt.ERROR){const n=t.map(Om);xs.error(`Firestore (${no}): ${r}`,...n)}}function Qa(r,...t){if(xs.logLevel<=Dt.WARN){const n=t.map(Om);xs.warn(`Firestore (${no}): ${r}`,...n)}}function Om(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(r,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,dE(r,s,n)}function dE(r,t,n){let s=`FIRESTORE (${no}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Fi(s),new Error(s)}function qt(r,t,n,s){let l="Unexpected state";typeof n=="string"?l=n:s=n,r||dE(t,l,s)}function Tt(r,t){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class rt extends Ki{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class RR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(Xe.UNAUTHENTICATED)))}shutdown(){}}class IR{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class CR{constructor(t){this.t=t,this.currentUser=Xe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){qt(this.o===void 0,42304);let s=this.i;const l=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let c=new Pr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Pr,t.enqueueRetryable((()=>l(this.currentUser)))};const f=()=>{const p=c;t.enqueueRetryable((async()=>{await p.promise,await l(this.currentUser)}))},g=p=>{st("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((p=>g(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?g(p):(st("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Pr)}}),0),f()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==t?(st("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(qt(typeof s.accessToken=="string",31837,{l:s}),new mE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return qt(t===null||typeof t=="string",2055,{h:t}),new Xe(t)}}class DR{constructor(t,n,s){this.P=t,this.T=n,this.I=s,this.type="FirstParty",this.user=Xe.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class NR{constructor(t,n,s){this.P=t,this.T=n,this.I=s}getToken(){return Promise.resolve(new DR(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(Xe.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class gv{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class OR{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ln(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){qt(this.o===void 0,3512);const s=c=>{c.error!=null&&st("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,st("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(c.token):Promise.resolve()};this.o=c=>{t.enqueueRetryable((()=>s(c)))};const l=c=>{st("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):st("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new gv(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(qt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new gv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=VR(40);for(let c=0;c<l.length;++c)s.length<20&&l[c]<n&&(s+=t.charAt(l[c]%62))}return s}}function Nt(r,t){return r<t?-1:r>t?1:0}function em(r,t){const n=Math.min(r.length,t.length);for(let s=0;s<n;s++){const l=r.charAt(s),c=t.charAt(s);if(l!==c)return zd(l)===zd(c)?Nt(l,c):zd(l)?1:-1}return Nt(r.length,t.length)}const MR=55296,xR=57343;function zd(r){const t=r.charCodeAt(0);return t>=MR&&t<=xR}function Ka(r,t,n){return r.length===t.length&&r.every(((s,l)=>n(s,t[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv="__name__";class ai{constructor(t,n,s){n===void 0?n=0:n>t.length&&pt(637,{offset:n,range:t.length}),s===void 0?s=t.length-n:s>t.length-n&&pt(1746,{length:s,range:t.length-n}),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return ai.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof ai?t.forEach((s=>{n.push(s)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let l=0;l<s;l++){const c=ai.compareSegments(t.get(l),n.get(l));if(c!==0)return c}return Nt(t.length,n.length)}static compareSegments(t,n){const s=ai.isNumericId(t),l=ai.isNumericId(n);return s&&!l?-1:!s&&l?1:s&&l?ai.extractNumericId(t).compare(ai.extractNumericId(n)):em(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return xr.fromString(t.substring(4,t.length-2))}}class Jt extends ai{construct(t,n,s){return new Jt(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new rt(Q.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((l=>l.length>0)))}return new Jt(n)}static emptyPath(){return new Jt([])}}const PR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class He extends ai{construct(t,n,s){return new He(t,n,s)}static isValidIdentifier(t){return PR.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),He.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===pv}static keyField(){return new He([pv])}static fromServerFormat(t){const n=[];let s="",l=0;const c=()=>{if(s.length===0)throw new rt(Q.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;l<t.length;){const g=t[l];if(g==="\\"){if(l+1===t.length)throw new rt(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[l+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new rt(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=p,l+=2}else g==="`"?(f=!f,l++):g!=="."||f?(s+=g,l++):(c(),l++)}if(c(),f)throw new rt(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new He(n)}static emptyPath(){return new He([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(t){this.path=t}static fromPath(t){return new ut(Jt.fromString(t))}static fromName(t){return new ut(Jt.fromString(t).popFirst(5))}static empty(){return new ut(Jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Jt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Jt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ut(new Jt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gE(r,t,n){if(!n)throw new rt(Q.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function UR(r,t,n,s){if(t===!0&&s===!0)throw new rt(Q.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function yv(r){if(!ut.isDocumentKey(r))throw new rt(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function _v(r){if(ut.isDocumentKey(r))throw new rt(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function pE(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function lh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=(function(s){return s.constructor?s.constructor.name:null})(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":pt(12329,{type:typeof r})}function ui(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new rt(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=lh(r);throw new rt(Q.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(r,t){const n={typeString:r};return t&&(n.value=t),n}function Fl(r,t){if(!pE(r))throw new rt(Q.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in t)if(t[s]){const l=t[s].typeString,c="value"in t[s]?{value:t[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const f=r[s];if(l&&typeof f!==l){n=`JSON field '${s}' must be a ${l}.`;break}if(c!==void 0&&f!==c.value){n=`Expected '${s}' field to equal '${c.value}'`;break}}if(n)throw new rt(Q.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv=-62135596800,Ev=1e6;class te{static now(){return te.fromMillis(Date.now())}static fromDate(t){return te.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*Ev);return new te(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new rt(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new rt(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<vv)throw new rt(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new rt(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ev}_compareTo(t){return this.seconds===t.seconds?Nt(this.nanoseconds,t.nanoseconds):Nt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:te._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Fl(t,te._jsonSchema))return new te(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-vv;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}te._jsonSchemaVersion="firestore/timestamp/1.0",te._jsonSchema={type:Te("string",te._jsonSchemaVersion),seconds:Te("number"),nanoseconds:Te("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{static fromTimestamp(t){return new Et(t)}static min(){return new Et(new te(0,0))}static max(){return new Et(new te(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vl=-1;function kR(r,t){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=Et.fromTimestamp(s===1e9?new te(n+1,0):new te(n,s));return new kr(l,ut.empty(),t)}function LR(r){return new kr(r.readTime,r.key,Vl)}class kr{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new kr(Et.min(),ut.empty(),Vl)}static max(){return new kr(Et.max(),ut.empty(),Vl)}}function zR(r,t){let n=r.readTime.compareTo(t.readTime);return n!==0?n:(n=ut.comparator(r.documentKey,t.documentKey),n!==0?n:Nt(r.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function io(r){if(r.code!==Q.FAILED_PRECONDITION||r.message!==BR)throw r;st("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&pt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new X(((s,l)=>{this.nextCallback=c=>{this.wrapSuccess(t,c).next(s,l)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,l)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof X?n:X.resolve(n)}catch(n){return X.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):X.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):X.reject(n)}static resolve(t){return new X(((n,s)=>{n(t)}))}static reject(t){return new X(((n,s)=>{s(t)}))}static waitFor(t){return new X(((n,s)=>{let l=0,c=0,f=!1;t.forEach((g=>{++l,g.next((()=>{++c,f&&c===l&&n()}),(p=>s(p)))})),f=!0,c===l&&n()}))}static or(t){let n=X.resolve(!1);for(const s of t)n=n.next((l=>l?X.resolve(l):s()));return n}static forEach(t,n){const s=[];return t.forEach(((l,c)=>{s.push(n.call(this,l,c))})),this.waitFor(s)}static mapArray(t,n){return new X(((s,l)=>{const c=t.length,f=new Array(c);let g=0;for(let p=0;p<c;p++){const y=p;n(t[y]).next((T=>{f[y]=T,++g,g===c&&s(f)}),(T=>l(T)))}}))}static doWhile(t,n){return new X(((s,l)=>{const c=()=>{t()===!0?n().next((()=>{c()}),l):s()};c()}))}}function qR(r){const t=r.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ro(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}uh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm=-1;function ch(r){return r==null}function Fc(r){return r===0&&1/r==-1/0}function HR(r){return typeof r=="number"&&Number.isInteger(r)&&!Fc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE="";function GR(r){let t="";for(let n=0;n<r.length;n++)t.length>0&&(t=Tv(t)),t=FR(r.get(n),t);return Tv(t)}function FR(r,t){let n=t;const s=r.length;for(let l=0;l<s;l++){const c=r.charAt(l);switch(c){case"\0":n+="";break;case yE:n+="";break;default:n+=c}}return n}function Tv(r){return r+yE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(r){let t=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t++;return t}function Hr(r,t){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t(n,r[n])}function _E(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(t,n){this.comparator=t,this.root=n||qe.EMPTY}insert(t,n){return new re(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,qe.BLACK,null,null))}remove(t){return new re(this.comparator,this.root.remove(t,this.comparator).copy(null,null,qe.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(t,s.key);if(l===0)return n+s.left.size;l<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,s)=>(t(n,s),!1)))}toString(){const t=[];return this.inorderTraversal(((n,s)=>(t.push(`${n}:${s}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Sc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Sc(this.root,t,this.comparator,!1)}getReverseIterator(){return new Sc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Sc(this.root,t,this.comparator,!0)}}class Sc{constructor(t,n,s,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!t.isEmpty();)if(c=n?s(t.key,n):1,n&&l&&(c*=-1),c<0)t=this.isReverse?t.left:t.right;else{if(c===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class qe{constructor(t,n,s,l,c){this.key=t,this.value=n,this.color=s??qe.RED,this.left=l??qe.EMPTY,this.right=c??qe.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,l,c){return new qe(t??this.key,n??this.value,s??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let l=this;const c=s(t,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(t,n,s),null):c===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(t,n,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return qe.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,l=this;if(n(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(t,l.key)===0){if(l.right.isEmpty())return qe.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,qe.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,qe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw pt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw pt(27949);return t+(this.isRed()?0:1)}}qe.EMPTY=null,qe.RED=!0,qe.BLACK=!1;qe.EMPTY=new class{constructor(){this.size=0}get key(){throw pt(57766)}get value(){throw pt(16141)}get color(){throw pt(16727)}get left(){throw pt(29726)}get right(){throw pt(36894)}copy(t,n,s,l,c){return this}insert(t,n,s){return new qe(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(t){this.comparator=t,this.data=new re(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,s)=>(t(n),!1)))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,t[1])>=0)return;n(l.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Sv(this.data.getIterator())}getIteratorFrom(t){return new Sv(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((s=>{n=n.add(s)})),n}isEqual(t){if(!(t instanceof Ce)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new Ce(this.comparator);return n.data=t,n}}class Sv{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(t){this.fields=t,t.sort(He.comparator)}static empty(){return new yn([])}unionWith(t){let n=new Ce(He.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new yn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Ka(this.fields,t.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new vE("Invalid base64 string: "+c):c}})(t);return new Ge(n)}static fromUint8Array(t){const n=(function(l){let c="";for(let f=0;f<l.length;++f)c+=String.fromCharCode(l[f]);return c})(t);return new Ge(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let l=0;l<n.length;l++)s[l]=n.charCodeAt(l);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Nt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ge.EMPTY_BYTE_STRING=new Ge("");const QR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lr(r){if(qt(!!r,39018),typeof r=="string"){let t=0;const n=QR.exec(r);if(qt(!!n,46558,{timestamp:r}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),t=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:de(r.seconds),nanos:de(r.nanos)}}function de(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function zr(r){return typeof r=="string"?Ge.fromBase64String(r):Ge.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="server_timestamp",TE="__type__",AE="__previous_value__",SE="__local_write_time__";function xm(r){var n,s;return((s=(((n=r==null?void 0:r.mapValue)==null?void 0:n.fields)||{})[TE])==null?void 0:s.stringValue)===EE}function hh(r){const t=r.mapValue.fields[AE];return xm(t)?hh(t):t}function Ml(r){const t=Lr(r.mapValue.fields[SE].timestampValue);return new te(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(t,n,s,l,c,f,g,p,y,T){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=l,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=g,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=T}}const Qc="(default)";class xl{constructor(t,n){this.projectId=t,this.database=n||Qc}static empty(){return new xl("","")}get isDefaultDatabase(){return this.database===Qc}isEqual(t){return t instanceof xl&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE="__type__",YR="__max__",wc={mapValue:{}},bE="__vector__",Kc="value";function Br(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?xm(r)?4:$R(r)?9007199254740991:XR(r)?10:11:pt(28295,{value:r})}function mi(r,t){if(r===t)return!0;const n=Br(r);if(n!==Br(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return Ml(r).isEqual(Ml(t));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const f=Lr(l.timestampValue),g=Lr(c.timestampValue);return f.seconds===g.seconds&&f.nanos===g.nanos})(r,t);case 5:return r.stringValue===t.stringValue;case 6:return(function(l,c){return zr(l.bytesValue).isEqual(zr(c.bytesValue))})(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return(function(l,c){return de(l.geoPointValue.latitude)===de(c.geoPointValue.latitude)&&de(l.geoPointValue.longitude)===de(c.geoPointValue.longitude)})(r,t);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return de(l.integerValue)===de(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const f=de(l.doubleValue),g=de(c.doubleValue);return f===g?Fc(f)===Fc(g):isNaN(f)&&isNaN(g)}return!1})(r,t);case 9:return Ka(r.arrayValue.values||[],t.arrayValue.values||[],mi);case 10:case 11:return(function(l,c){const f=l.mapValue.fields||{},g=c.mapValue.fields||{};if(Av(f)!==Av(g))return!1;for(const p in f)if(f.hasOwnProperty(p)&&(g[p]===void 0||!mi(f[p],g[p])))return!1;return!0})(r,t);default:return pt(52216,{left:r})}}function Pl(r,t){return(r.values||[]).find((n=>mi(n,t)))!==void 0}function Ya(r,t){if(r===t)return 0;const n=Br(r),s=Br(t);if(n!==s)return Nt(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Nt(r.booleanValue,t.booleanValue);case 2:return(function(c,f){const g=de(c.integerValue||c.doubleValue),p=de(f.integerValue||f.doubleValue);return g<p?-1:g>p?1:g===p?0:isNaN(g)?isNaN(p)?0:-1:1})(r,t);case 3:return wv(r.timestampValue,t.timestampValue);case 4:return wv(Ml(r),Ml(t));case 5:return em(r.stringValue,t.stringValue);case 6:return(function(c,f){const g=zr(c),p=zr(f);return g.compareTo(p)})(r.bytesValue,t.bytesValue);case 7:return(function(c,f){const g=c.split("/"),p=f.split("/");for(let y=0;y<g.length&&y<p.length;y++){const T=Nt(g[y],p[y]);if(T!==0)return T}return Nt(g.length,p.length)})(r.referenceValue,t.referenceValue);case 8:return(function(c,f){const g=Nt(de(c.latitude),de(f.latitude));return g!==0?g:Nt(de(c.longitude),de(f.longitude))})(r.geoPointValue,t.geoPointValue);case 9:return bv(r.arrayValue,t.arrayValue);case 10:return(function(c,f){var R,q,Y,et;const g=c.fields||{},p=f.fields||{},y=(R=g[Kc])==null?void 0:R.arrayValue,T=(q=p[Kc])==null?void 0:q.arrayValue,w=Nt(((Y=y==null?void 0:y.values)==null?void 0:Y.length)||0,((et=T==null?void 0:T.values)==null?void 0:et.length)||0);return w!==0?w:bv(y,T)})(r.mapValue,t.mapValue);case 11:return(function(c,f){if(c===wc.mapValue&&f===wc.mapValue)return 0;if(c===wc.mapValue)return 1;if(f===wc.mapValue)return-1;const g=c.fields||{},p=Object.keys(g),y=f.fields||{},T=Object.keys(y);p.sort(),T.sort();for(let w=0;w<p.length&&w<T.length;++w){const R=em(p[w],T[w]);if(R!==0)return R;const q=Ya(g[p[w]],y[T[w]]);if(q!==0)return q}return Nt(p.length,T.length)})(r.mapValue,t.mapValue);default:throw pt(23264,{he:n})}}function wv(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return Nt(r,t);const n=Lr(r),s=Lr(t),l=Nt(n.seconds,s.seconds);return l!==0?l:Nt(n.nanos,s.nanos)}function bv(r,t){const n=r.values||[],s=t.values||[];for(let l=0;l<n.length&&l<s.length;++l){const c=Ya(n[l],s[l]);if(c)return c}return Nt(n.length,s.length)}function Xa(r){return nm(r)}function nm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=Lr(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return zr(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return ut.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",l=!0;for(const c of n.values||[])l?l=!1:s+=",",s+=nm(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let l="{",c=!0;for(const f of s)c?c=!1:l+=",",l+=`${f}:${nm(n.fields[f])}`;return l+"}"})(r.mapValue):pt(61005,{value:r})}function Vc(r){switch(Br(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=hh(r);return t?16+Vc(t):16;case 5:return 2*r.stringValue.length;case 6:return zr(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((l,c)=>l+Vc(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let l=0;return Hr(s.fields,((c,f)=>{l+=c.length+Vc(f)})),l})(r.mapValue);default:throw pt(13486,{value:r})}}function Rv(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function im(r){return!!r&&"integerValue"in r}function Pm(r){return!!r&&"arrayValue"in r}function Iv(r){return!!r&&"nullValue"in r}function Cv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Mc(r){return!!r&&"mapValue"in r}function XR(r){var n,s;return((s=(((n=r==null?void 0:r.mapValue)==null?void 0:n.fields)||{})[wE])==null?void 0:s.stringValue)===bE}function Rl(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const t={mapValue:{fields:{}}};return Hr(r.mapValue.fields,((n,s)=>t.mapValue.fields[n]=Rl(s))),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Rl(r.arrayValue.values[n]);return t}return{...r}}function $R(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===YR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(t){this.value=t}static empty(){return new on({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!Mc(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Rl(n)}setAll(t){let n=He.emptyPath(),s={},l=[];t.forEach(((f,g)=>{if(!n.isImmediateParentOf(g)){const p=this.getFieldsMap(n);this.applyChanges(p,s,l),s={},l=[],n=g.popLast()}f?s[g.lastSegment()]=Rl(f):l.push(g.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,s,l)}delete(t){const n=this.field(t.popLast());Mc(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return mi(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let l=n.mapValue.fields[t.get(s)];Mc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=l),n=l}return n.mapValue.fields}applyChanges(t,n,s){Hr(n,((l,c)=>t[l]=c));for(const l of s)delete t[l]}clone(){return new on(Rl(this.value))}}function RE(r){const t=[];return Hr(r.fields,((n,s)=>{const l=new He([n]);if(Mc(s)){const c=RE(s.mapValue).fields;if(c.length===0)t.push(l);else for(const f of c)t.push(l.child(f))}else t.push(l)})),new yn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(t,n,s,l,c,f,g){this.key=t,this.documentType=n,this.version=s,this.readTime=l,this.createTime=c,this.data=f,this.documentState=g}static newInvalidDocument(t){return new $e(t,0,Et.min(),Et.min(),Et.min(),on.empty(),0)}static newFoundDocument(t,n,s,l){return new $e(t,1,n,Et.min(),s,l,0)}static newNoDocument(t,n){return new $e(t,2,n,Et.min(),Et.min(),on.empty(),0)}static newUnknownDocument(t,n){return new $e(t,3,n,Et.min(),Et.min(),on.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=on.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=on.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Et.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof $e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new $e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(t,n){this.position=t,this.inclusive=n}}function Dv(r,t,n){let s=0;for(let l=0;l<r.position.length;l++){const c=t[l],f=r.position[l];if(c.field.isKeyField()?s=ut.comparator(ut.fromName(f.referenceValue),n.key):s=Ya(f,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function Nv(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!mi(r.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(t,n="asc"){this.field=t,this.dir=n}}function ZR(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{}class Ee extends IE{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new JR(t,n,s):n==="array-contains"?new n2(t,s):n==="in"?new i2(t,s):n==="not-in"?new r2(t,s):n==="array-contains-any"?new s2(t,s):new Ee(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new t2(t,s):new e2(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ya(n,this.value)):n!==null&&Br(this.value)===Br(n)&&this.matchesComparison(Ya(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return pt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qn extends IE{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new qn(t,n)}matches(t){return CE(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function CE(r){return r.op==="and"}function DE(r){return WR(r)&&CE(r)}function WR(r){for(const t of r.filters)if(t instanceof qn)return!1;return!0}function rm(r){if(r instanceof Ee)return r.field.canonicalString()+r.op.toString()+Xa(r.value);if(DE(r))return r.filters.map((t=>rm(t))).join(",");{const t=r.filters.map((n=>rm(n))).join(",");return`${r.op}(${t})`}}function NE(r,t){return r instanceof Ee?(function(s,l){return l instanceof Ee&&s.op===l.op&&s.field.isEqual(l.field)&&mi(s.value,l.value)})(r,t):r instanceof qn?(function(s,l){return l instanceof qn&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce(((c,f,g)=>c&&NE(f,l.filters[g])),!0):!1})(r,t):void pt(19439)}function OE(r){return r instanceof Ee?(function(n){return`${n.field.canonicalString()} ${n.op} ${Xa(n.value)}`})(r):r instanceof qn?(function(n){return n.op.toString()+" {"+n.getFilters().map(OE).join(" ,")+"}"})(r):"Filter"}class JR extends Ee{constructor(t,n,s){super(t,n,s),this.key=ut.fromName(s.referenceValue)}matches(t){const n=ut.comparator(t.key,this.key);return this.matchesComparison(n)}}class t2 extends Ee{constructor(t,n){super(t,"in",n),this.keys=VE("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class e2 extends Ee{constructor(t,n){super(t,"not-in",n),this.keys=VE("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function VE(r,t){var n;return(((n=t.arrayValue)==null?void 0:n.values)||[]).map((s=>ut.fromName(s.referenceValue)))}class n2 extends Ee{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Pm(n)&&Pl(n.arrayValue,this.value)}}class i2 extends Ee{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Pl(this.value.arrayValue,n)}}class r2 extends Ee{constructor(t,n){super(t,"not-in",n)}matches(t){if(Pl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Pl(this.value.arrayValue,n)}}class s2 extends Ee{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Pm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Pl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(t,n=null,s=[],l=[],c=null,f=null,g=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=l,this.limit=c,this.startAt=f,this.endAt=g,this.Te=null}}function Ov(r,t=null,n=[],s=[],l=null,c=null,f=null){return new a2(r,t,n,s,l,c,f)}function Um(r){const t=Tt(r);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((s=>rm(s))).join(","),n+="|ob:",n+=t.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),ch(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((s=>Xa(s))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((s=>Xa(s))).join(",")),t.Te=n}return t.Te}function km(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!ZR(r.orderBy[n],t.orderBy[n]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!NE(r.filters[n],t.filters[n]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!Nv(r.startAt,t.startAt)&&Nv(r.endAt,t.endAt)}function sm(r){return ut.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(t,n=null,s=[],l=[],c=null,f="F",g=null,p=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=l,this.limit=c,this.limitType=f,this.startAt=g,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function o2(r,t,n,s,l,c,f,g){return new so(r,t,n,s,l,c,f,g)}function fh(r){return new so(r)}function Vv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function ME(r){return r.collectionGroup!==null}function Il(r){const t=Tt(r);if(t.Ie===null){t.Ie=[];const n=new Set;for(const c of t.explicitOrderBy)t.Ie.push(c),n.add(c.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(f){let g=new Ce(He.comparator);return f.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(g=g.add(y.field))}))})),g})(t).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||t.Ie.push(new Ul(c,s))})),n.has(He.keyField().canonicalString())||t.Ie.push(new Ul(He.keyField(),s))}return t.Ie}function ci(r){const t=Tt(r);return t.Ee||(t.Ee=l2(t,Il(r))),t.Ee}function l2(r,t){if(r.limitType==="F")return Ov(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new Ul(l.field,c)}));const n=r.endAt?new Yc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Yc(r.startAt.position,r.startAt.inclusive):null;return Ov(r.path,r.collectionGroup,t,r.filters,r.limit,n,s)}}function am(r,t){const n=r.filters.concat([t]);return new so(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function om(r,t,n){return new so(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,n,r.startAt,r.endAt)}function dh(r,t){return km(ci(r),ci(t))&&r.limitType===t.limitType}function xE(r){return`${Um(ci(r))}|lt:${r.limitType}`}function xa(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((l=>OE(l))).join(", ")}]`),ch(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((l=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(l))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((l=>Xa(l))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((l=>Xa(l))).join(",")),`Target(${s})`})(ci(r))}; limitType=${r.limitType})`}function mh(r,t){return t.isFoundDocument()&&(function(s,l){const c=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):ut.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,t)&&(function(s,l){for(const c of Il(s))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(r,t)&&(function(s,l){for(const c of s.filters)if(!c.matches(l))return!1;return!0})(r,t)&&(function(s,l){return!(s.startAt&&!(function(f,g,p){const y=Dv(f,g,p);return f.inclusive?y<=0:y<0})(s.startAt,Il(s),l)||s.endAt&&!(function(f,g,p){const y=Dv(f,g,p);return f.inclusive?y>=0:y>0})(s.endAt,Il(s),l))})(r,t)}function u2(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function PE(r){return(t,n)=>{let s=!1;for(const l of Il(r)){const c=c2(l,t,n);if(c!==0)return c;s=s||l.field.isKeyField()}return 0}}function c2(r,t,n){const s=r.field.isKeyField()?ut.comparator(t.key,n.key):(function(c,f,g){const p=f.data.field(c),y=g.data.field(c);return p!==null&&y!==null?Ya(p,y):pt(42886)})(r.field,t,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return pt(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[l,c]of s)if(this.equalsFn(l,t))return c}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),l=this.inner[s];if(l===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],t))return void(l[c]=[t,n]);l.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],t))return s.length===1?delete this.inner[n]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(t){Hr(this.inner,((n,s)=>{for(const[l,c]of s)t(l,c)}))}isEmpty(){return _E(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2=new re(ut.comparator);function Qi(){return h2}const UE=new re(ut.comparator);function Tl(...r){let t=UE;for(const n of r)t=t.insert(n.key,n);return t}function kE(r){let t=UE;return r.forEach(((n,s)=>t=t.insert(n,s.overlayedDocument))),t}function Ds(){return Cl()}function LE(){return Cl()}function Cl(){return new Ls((r=>r.toString()),((r,t)=>r.isEqual(t)))}const f2=new re(ut.comparator),d2=new Ce(ut.comparator);function Ot(...r){let t=d2;for(const n of r)t=t.add(n);return t}const m2=new Ce(Nt);function g2(){return m2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fc(t)?"-0":t}}function zE(r){return{integerValue:""+r}}function p2(r,t){return HR(t)?zE(t):Lm(r,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(){this._=void 0}}function y2(r,t,n){return r instanceof kl?(function(l,c){const f={fields:{[TE]:{stringValue:EE},[SE]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&xm(c)&&(c=hh(c)),c&&(f.fields[AE]=c),{mapValue:f}})(n,t):r instanceof Ll?jE(r,t):r instanceof zl?qE(r,t):(function(l,c){const f=BE(l,c),g=Mv(f)+Mv(l.Ae);return im(f)&&im(l.Ae)?zE(g):Lm(l.serializer,g)})(r,t)}function _2(r,t,n){return r instanceof Ll?jE(r,t):r instanceof zl?qE(r,t):n}function BE(r,t){return r instanceof Xc?(function(s){return im(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(t)?t:{integerValue:0}:null}class kl extends gh{}class Ll extends gh{constructor(t){super(),this.elements=t}}function jE(r,t){const n=HE(t);for(const s of r.elements)n.some((l=>mi(l,s)))||n.push(s);return{arrayValue:{values:n}}}class zl extends gh{constructor(t){super(),this.elements=t}}function qE(r,t){let n=HE(t);for(const s of r.elements)n=n.filter((l=>!mi(l,s)));return{arrayValue:{values:n}}}class Xc extends gh{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function Mv(r){return de(r.integerValue||r.doubleValue)}function HE(r){return Pm(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(t,n){this.field=t,this.transform=n}}function E2(r,t){return r.field.isEqual(t.field)&&(function(s,l){return s instanceof Ll&&l instanceof Ll||s instanceof zl&&l instanceof zl?Ka(s.elements,l.elements,mi):s instanceof Xc&&l instanceof Xc?mi(s.Ae,l.Ae):s instanceof kl&&l instanceof kl})(r.transform,t.transform)}class T2{constructor(t,n){this.version=t,this.transformResults=n}}class Bn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Bn}static exists(t){return new Bn(void 0,t)}static updateTime(t){return new Bn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function xc(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class ph{}function GE(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new zm(r.key,Bn.none()):new Ql(r.key,r.data,Bn.none());{const n=r.data,s=on.empty();let l=new Ce(He.comparator);for(let c of t.fields)if(!l.has(c)){let f=n.field(c);f===null&&c.length>1&&(c=c.popLast(),f=n.field(c)),f===null?s.delete(c):s.set(c,f),l=l.add(c)}return new Gr(r.key,s,new yn(l.toArray()),Bn.none())}}function A2(r,t,n){r instanceof Ql?(function(l,c,f){const g=l.value.clone(),p=Pv(l.fieldTransforms,c,f.transformResults);g.setAll(p),c.convertToFoundDocument(f.version,g).setHasCommittedMutations()})(r,t,n):r instanceof Gr?(function(l,c,f){if(!xc(l.precondition,c))return void c.convertToUnknownDocument(f.version);const g=Pv(l.fieldTransforms,c,f.transformResults),p=c.data;p.setAll(FE(l)),p.setAll(g),c.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(r,t,n):(function(l,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()})(0,t,n)}function Dl(r,t,n,s){return r instanceof Ql?(function(c,f,g,p){if(!xc(c.precondition,f))return g;const y=c.value.clone(),T=Uv(c.fieldTransforms,p,f);return y.setAll(T),f.convertToFoundDocument(f.version,y).setHasLocalMutations(),null})(r,t,n,s):r instanceof Gr?(function(c,f,g,p){if(!xc(c.precondition,f))return g;const y=Uv(c.fieldTransforms,p,f),T=f.data;return T.setAll(FE(c)),T.setAll(y),f.convertToFoundDocument(f.version,T).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((w=>w.field)))})(r,t,n,s):(function(c,f,g){return xc(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):g})(r,t,n)}function S2(r,t){let n=null;for(const s of r.fieldTransforms){const l=t.data.field(s.field),c=BE(s.transform,l||null);c!=null&&(n===null&&(n=on.empty()),n.set(s.field,c))}return n||null}function xv(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!(function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&Ka(s,l,((c,f)=>E2(c,f)))})(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class Ql extends ph{constructor(t,n,s,l=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Gr extends ph{constructor(t,n,s,l,c=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function FE(r){const t=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);t.set(n,s)}})),t}function Pv(r,t,n){const s=new Map;qt(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let l=0;l<n.length;l++){const c=r[l],f=c.transform,g=t.data.field(c.field);s.set(c.field,_2(f,g,n[l]))}return s}function Uv(r,t,n){const s=new Map;for(const l of r){const c=l.transform,f=n.data.field(l.field);s.set(l.field,y2(c,f,t))}return s}class zm extends ph{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class w2 extends ph{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(t,n,s,l){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(t.key)&&A2(c,t,s[l])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=Dl(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=Dl(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=LE();return this.mutations.forEach((l=>{const c=t.get(l.key),f=c.overlayedDocument;let g=this.applyToLocalView(f,c.mutatedFields);g=n.has(l.key)?null:g;const p=GE(f,g);p!==null&&s.set(l.key,p),f.isValidDocument()||f.convertToNoDocument(Et.min())})),s}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),Ot())}isEqual(t){return this.batchId===t.batchId&&Ka(this.mutations,t.mutations,((n,s)=>xv(n,s)))&&Ka(this.baseMutations,t.baseMutations,((n,s)=>xv(n,s)))}}class Bm{constructor(t,n,s,l){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=l}static from(t,n,s){qt(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let l=(function(){return f2})();const c=t.mutations;for(let f=0;f<c.length;f++)l=l.insert(c[f].key,s[f].version);return new Bm(t,n,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ve,Pt;function C2(r){switch(r){case Q.OK:return pt(64938);case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0;default:return pt(15467,{code:r})}}function QE(r){if(r===void 0)return Fi("GRPC error has no .code"),Q.UNKNOWN;switch(r){case ve.OK:return Q.OK;case ve.CANCELLED:return Q.CANCELLED;case ve.UNKNOWN:return Q.UNKNOWN;case ve.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case ve.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case ve.INTERNAL:return Q.INTERNAL;case ve.UNAVAILABLE:return Q.UNAVAILABLE;case ve.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case ve.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case ve.NOT_FOUND:return Q.NOT_FOUND;case ve.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case ve.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case ve.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case ve.ABORTED:return Q.ABORTED;case ve.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case ve.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case ve.DATA_LOSS:return Q.DATA_LOSS;default:return pt(39323,{code:r})}}(Pt=ve||(ve={}))[Pt.OK=0]="OK",Pt[Pt.CANCELLED=1]="CANCELLED",Pt[Pt.UNKNOWN=2]="UNKNOWN",Pt[Pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pt[Pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pt[Pt.NOT_FOUND=5]="NOT_FOUND",Pt[Pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pt[Pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pt[Pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pt[Pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pt[Pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pt[Pt.ABORTED=10]="ABORTED",Pt[Pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pt[Pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pt[Pt.INTERNAL=13]="INTERNAL",Pt[Pt.UNAVAILABLE=14]="UNAVAILABLE",Pt[Pt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2=new xr([4294967295,4294967295],0);function kv(r){const t=D2().encode(r),n=new oE;return n.update(t),new Uint8Array(n.digest())}function Lv(r){const t=new DataView(r.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),l=t.getUint32(8,!0),c=t.getUint32(12,!0);return[new xr([n,s],0),new xr([l,c],0)]}class jm{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Al(`Invalid padding: ${n}`);if(s<0)throw new Al(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new Al(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new Al(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=xr.fromNumber(this.ge)}ye(t,n,s){let l=t.add(n.multiply(xr.fromNumber(s)));return l.compare(N2)===1&&(l=new xr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=kv(t),[s,l]=Lv(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(s,l,c);if(!this.we(f))return!1}return!0}static create(t,n,s){const l=t%8==0?0:8-t%8,c=new Uint8Array(Math.ceil(t/8)),f=new jm(c,l,n);return s.forEach((g=>f.insert(g))),f}insert(t){if(this.ge===0)return;const n=kv(t),[s,l]=Lv(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(s,l,c);this.Se(f)}}Se(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class Al extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(t,n,s,l,c){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const l=new Map;return l.set(t,Kl.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new yh(Et.min(),l,new re(Nt),Qi(),Ot())}}class Kl{constructor(t,n,s,l,c){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new Kl(s,n,Ot(),Ot(),Ot())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(t,n,s,l){this.be=t,this.removedTargetIds=n,this.key=s,this.De=l}}class KE{constructor(t,n){this.targetId=t,this.Ce=n}}class YE{constructor(t,n,s=Ge.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=l}}class zv{constructor(){this.ve=0,this.Fe=Bv(),this.Me=Ge.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Ot(),n=Ot(),s=Ot();return this.Fe.forEach(((l,c)=>{switch(c){case 0:t=t.add(l);break;case 2:n=n.add(l);break;case 1:s=s.add(l);break;default:pt(38017,{changeType:c})}})),new Kl(this.Me,this.xe,t,n,s)}qe(){this.Oe=!1,this.Fe=Bv()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,qt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class O2{constructor(t){this.Ge=t,this.ze=new Map,this.je=Qi(),this.Je=bc(),this.He=bc(),this.Ye=new re(Nt)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const s=this.nt(n);switch(t.state){case 0:this.rt(n)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(t.resumeToken));break;default:pt(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((s,l)=>{this.rt(l)&&n(l)}))}st(t){const n=t.targetId,s=t.Ce.count,l=this.ot(n);if(l){const c=l.target;if(sm(c))if(s===0){const f=new ut(c.path);this.et(n,f,$e.newNoDocument(f,Et.min()))}else qt(s===1,20013,{expectedCount:s});else{const f=this._t(n);if(f!==s){const g=this.ut(t),p=g?this.ct(g,t,f):1;if(p!==0){this.it(n);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:c=0}=n;let f,g;try{f=zr(s).toUint8Array()}catch(p){if(p instanceof vE)return Qa("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{g=new jm(f,l,c)}catch(p){return Qa(p instanceof Al?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return g.ge===0?null:g}ct(t,n,s){return n.Ce.count===s-this.Pt(t,n.targetId)?0:2}Pt(t,n){const s=this.Ge.getRemoteKeysForTarget(n);let l=0;return s.forEach((c=>{const f=this.Ge.ht(),g=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;t.mightContain(g)||(this.et(n,c,null),l++)})),l}Tt(t){const n=new Map;this.ze.forEach(((c,f)=>{const g=this.ot(f);if(g){if(c.current&&sm(g.target)){const p=new ut(g.target.path);this.It(p).has(f)||this.Et(f,p)||this.et(f,p,$e.newNoDocument(p,t))}c.Be&&(n.set(f,c.ke()),c.qe())}}));let s=Ot();this.He.forEach(((c,f)=>{let g=!0;f.forEachWhile((p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(s=s.add(c))})),this.je.forEach(((c,f)=>f.setReadTime(t)));const l=new yh(t,n,this.Ye,this.je,s);return this.je=Qi(),this.Je=bc(),this.He=bc(),this.Ye=new re(Nt),l}Xe(t,n){if(!this.rt(t))return;const s=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,s){if(!this.rt(t))return;const l=this.nt(t);this.Et(t,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),s&&(this.je=this.je.insert(n,s))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new zv,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new Ce(Nt),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new Ce(Nt),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||st("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new zv),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function bc(){return new re(ut.comparator)}function Bv(){return new re(ut.comparator)}const V2={asc:"ASCENDING",desc:"DESCENDING"},M2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},x2={and:"AND",or:"OR"};class P2{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function lm(r,t){return r.useProto3Json||ch(t)?t:{value:t}}function $c(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function XE(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function U2(r,t){return $c(r,t.toTimestamp())}function hi(r){return qt(!!r,49232),Et.fromTimestamp((function(n){const s=Lr(n);return new te(s.seconds,s.nanos)})(r))}function qm(r,t){return um(r,t).canonicalString()}function um(r,t){const n=(function(l){return new Jt(["projects",l.projectId,"databases",l.database])})(r).child("documents");return t===void 0?n:n.child(t)}function $E(r){const t=Jt.fromString(r);return qt(eT(t),10190,{key:t.toString()}),t}function cm(r,t){return qm(r.databaseId,t.path)}function Bd(r,t){const n=$E(t);if(n.get(1)!==r.databaseId.projectId)throw new rt(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new rt(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new ut(WE(n))}function ZE(r,t){return qm(r.databaseId,t)}function k2(r){const t=$E(r);return t.length===4?Jt.emptyPath():WE(t)}function hm(r){return new Jt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function WE(r){return qt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function jv(r,t,n){return{name:cm(r,t),fields:n.value.mapValue.fields}}function L2(r,t){let n;if("targetChange"in t){t.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:pt(39313,{state:y})})(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],c=(function(y,T){return y.useProto3Json?(qt(T===void 0||typeof T=="string",58123),Ge.fromBase64String(T||"")):(qt(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Ge.fromUint8Array(T||new Uint8Array))})(r,t.targetChange.resumeToken),f=t.targetChange.cause,g=f&&(function(y){const T=y.code===void 0?Q.UNKNOWN:QE(y.code);return new rt(T,y.message||"")})(f);n=new YE(s,l,c,g||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const l=Bd(r,s.document.name),c=hi(s.document.updateTime),f=s.document.createTime?hi(s.document.createTime):Et.min(),g=new on({mapValue:{fields:s.document.fields}}),p=$e.newFoundDocument(l,c,f,g),y=s.targetIds||[],T=s.removedTargetIds||[];n=new Pc(y,T,p.key,p)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const l=Bd(r,s.document),c=s.readTime?hi(s.readTime):Et.min(),f=$e.newNoDocument(l,c),g=s.removedTargetIds||[];n=new Pc([],g,f.key,f)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const l=Bd(r,s.document),c=s.removedTargetIds||[];n=new Pc([],c,l,null)}else{if(!("filter"in t))return pt(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:l=0,unchangedNames:c}=s,f=new I2(l,c),g=s.targetId;n=new KE(g,f)}}return n}function z2(r,t){let n;if(t instanceof Ql)n={update:jv(r,t.key,t.value)};else if(t instanceof zm)n={delete:cm(r,t.key)};else if(t instanceof Gr)n={update:jv(r,t.key,t.data),updateMask:Y2(t.fieldMask)};else{if(!(t instanceof w2))return pt(16599,{Vt:t.type});n={verify:cm(r,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((s=>(function(c,f){const g=f.transform;if(g instanceof kl)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Ll)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof zl)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Xc)return{fieldPath:f.field.canonicalString(),increment:g.Ae};throw pt(20930,{transform:f.transform})})(0,s)))),t.precondition.isNone||(n.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:U2(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:pt(27497)})(r,t.precondition)),n}function B2(r,t){return r&&r.length>0?(qt(t!==void 0,14353),r.map((n=>(function(l,c){let f=l.updateTime?hi(l.updateTime):hi(c);return f.isEqual(Et.min())&&(f=hi(c)),new T2(f,l.transformResults||[])})(n,t)))):[]}function j2(r,t){return{documents:[ZE(r,t.path)]}}function q2(r,t){const n={structuredQuery:{}},s=t.path;let l;t.collectionGroup!==null?(l=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=ZE(r,l);const c=(function(y){if(y.length!==0)return tT(qn.create(y,"and"))})(t.filters);c&&(n.structuredQuery.where=c);const f=(function(y){if(y.length!==0)return y.map((T=>(function(R){return{field:Pa(R.field),direction:F2(R.dir)}})(T)))})(t.orderBy);f&&(n.structuredQuery.orderBy=f);const g=lm(r,t.limit);return g!==null&&(n.structuredQuery.limit=g),t.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(t.endAt)),{ft:n,parent:l}}function H2(r){let t=k2(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let l=null;if(s>0){qt(s===1,65062);const T=n.from[0];T.allDescendants?l=T.collectionId:t=t.child(T.collectionId)}let c=[];n.where&&(c=(function(w){const R=JE(w);return R instanceof qn&&DE(R)?R.getFilters():[R]})(n.where));let f=[];n.orderBy&&(f=(function(w){return w.map((R=>(function(Y){return new Ul(Ua(Y.field),(function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Y.direction))})(R)))})(n.orderBy));let g=null;n.limit&&(g=(function(w){let R;return R=typeof w=="object"?w.value:w,ch(R)?null:R})(n.limit));let p=null;n.startAt&&(p=(function(w){const R=!!w.before,q=w.values||[];return new Yc(q,R)})(n.startAt));let y=null;return n.endAt&&(y=(function(w){const R=!w.before,q=w.values||[];return new Yc(q,R)})(n.endAt)),o2(t,l,f,c,g,"F",p,y)}function G2(r,t){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pt(28987,{purpose:l})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function JE(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Ua(n.unaryFilter.field);return Ee.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=Ua(n.unaryFilter.field);return Ee.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Ua(n.unaryFilter.field);return Ee.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Ua(n.unaryFilter.field);return Ee.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return pt(61313);default:return pt(60726)}})(r):r.fieldFilter!==void 0?(function(n){return Ee.create(Ua(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return pt(58110);default:return pt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return qn.create(n.compositeFilter.filters.map((s=>JE(s))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return pt(1026)}})(n.compositeFilter.op))})(r):pt(30097,{filter:r})}function F2(r){return V2[r]}function Q2(r){return M2[r]}function K2(r){return x2[r]}function Pa(r){return{fieldPath:r.canonicalString()}}function Ua(r){return He.fromServerFormat(r.fieldPath)}function tT(r){return r instanceof Ee?(function(n){if(n.op==="=="){if(Cv(n.value))return{unaryFilter:{field:Pa(n.field),op:"IS_NAN"}};if(Iv(n.value))return{unaryFilter:{field:Pa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Cv(n.value))return{unaryFilter:{field:Pa(n.field),op:"IS_NOT_NAN"}};if(Iv(n.value))return{unaryFilter:{field:Pa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pa(n.field),op:Q2(n.op),value:n.value}}})(r):r instanceof qn?(function(n){const s=n.getFilters().map((l=>tT(l)));return s.length===1?s[0]:{compositeFilter:{op:K2(n.op),filters:s}}})(r):pt(54877,{filter:r})}function Y2(r){const t=[];return r.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function eT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(t,n,s,l,c=Et.min(),f=Et.min(),g=Ge.EMPTY_BYTE_STRING,p=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=g,this.expectedCount=p}withSequenceNumber(t){return new Dr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Dr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(t){this.yt=t}}function $2(r){const t=H2({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?om(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(){this.Cn=new W2}addToCollectionParentIndex(t,n){return this.Cn.add(n),X.resolve()}getCollectionParents(t,n){return X.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return X.resolve()}deleteFieldIndex(t,n){return X.resolve()}deleteAllFieldIndexes(t){return X.resolve()}createTargetIndexes(t,n){return X.resolve()}getDocumentsMatchingTarget(t,n){return X.resolve(null)}getIndexType(t,n){return X.resolve(0)}getFieldIndexes(t,n){return X.resolve([])}getNextCollectionGroupToUpdate(t){return X.resolve(null)}getMinOffset(t,n){return X.resolve(kr.min())}getMinOffsetFromCollectionGroup(t,n){return X.resolve(kr.min())}updateCollectionGroup(t,n,s){return X.resolve()}updateIndexEntries(t,n){return X.resolve()}}class W2{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),l=this.index[n]||new Ce(Jt.comparator),c=!l.has(s);return this.index[n]=l.add(s),c}has(t){const n=t.lastSegment(),s=t.popLast(),l=this.index[n];return l&&l.has(s)}getEntries(t){return(this.index[t]||new Ce(Jt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},nT=41943040;class an{static withCacheSize(t){return new an(t,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */an.DEFAULT_COLLECTION_PERCENTILE=10,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,an.DEFAULT=new an(nT,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),an.DISABLED=new an(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new $a(0)}static cr(){return new $a(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv="LruGarbageCollector",J2=1048576;function Gv([r,t],[n,s]){const l=Nt(r,n);return l===0?Nt(t,s):l}class tI{constructor(t){this.Ir=t,this.buffer=new Ce(Gv),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Gv(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class eI{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){st(Hv,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ro(n)?st(Hv,"Ignoring IndexedDB error during garbage collection: ",n):await io(n)}await this.Vr(3e5)}))}}class nI{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(t,n){if(n===0)return X.resolve(uh.ce);const s=new tI(n);return this.mr.forEachTarget(t,(l=>s.Ar(l.sequenceNumber))).next((()=>this.mr.pr(t,(l=>s.Ar(l))))).next((()=>s.maxValue))}removeTargets(t,n,s){return this.mr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(st("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(qv)):this.getCacheSize(t).next((s=>s<this.params.cacheSizeCollectionThreshold?(st("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qv):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let s,l,c,f,g,p,y;const T=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(st("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),l=this.params.maximumSequenceNumbersToCollect):l=w,f=Date.now(),this.nthSequenceNumber(t,l)))).next((w=>(s=w,g=Date.now(),this.removeTargets(t,s,n)))).next((w=>(c=w,p=Date.now(),this.removeOrphanedDocuments(t,s)))).next((w=>(y=Date.now(),Ma()<=Dt.DEBUG&&st("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-T}ms
	Determined least recently used ${l} in `+(g-f)+`ms
	Removed ${c} targets in `+(p-g)+`ms
	Removed ${w} documents in `+(y-p)+`ms
Total Duration: ${y-T}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:w}))))}}function iI(r,t){return new nI(r,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(){this.changes=new Ls((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,$e.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?X.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(t,n,s,l){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=l}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next((l=>(s=l,this.remoteDocumentCache.getEntry(t,n)))).next((l=>(s!==null&&Dl(s.mutation,l,yn.empty(),te.now()),l)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.getLocalViewOfDocuments(t,s,Ot()).next((()=>s))))}getLocalViewOfDocuments(t,n,s=Ot()){const l=Ds();return this.populateOverlays(t,l,n).next((()=>this.computeViews(t,n,l,s).next((c=>{let f=Tl();return c.forEach(((g,p)=>{f=f.insert(g,p.overlayedDocument)})),f}))))}getOverlayedDocuments(t,n){const s=Ds();return this.populateOverlays(t,s,n).next((()=>this.computeViews(t,n,s,Ot())))}populateOverlays(t,n,s){const l=[];return s.forEach((c=>{n.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(t,l).next((c=>{c.forEach(((f,g)=>{n.set(f,g)}))}))}computeViews(t,n,s,l){let c=Qi();const f=Cl(),g=(function(){return Cl()})();return n.forEach(((p,y)=>{const T=s.get(y.key);l.has(y.key)&&(T===void 0||T.mutation instanceof Gr)?c=c.insert(y.key,y):T!==void 0?(f.set(y.key,T.mutation.getFieldMask()),Dl(T.mutation,y,T.mutation.getFieldMask(),te.now())):f.set(y.key,yn.empty())})),this.recalculateAndSaveOverlays(t,c).next((p=>(p.forEach(((y,T)=>f.set(y,T))),n.forEach(((y,T)=>g.set(y,new sI(T,f.get(y)??null)))),g)))}recalculateAndSaveOverlays(t,n){const s=Cl();let l=new re(((f,g)=>f-g)),c=Ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((f=>{for(const g of f)g.keys().forEach((p=>{const y=n.get(p);if(y===null)return;let T=s.get(p)||yn.empty();T=g.applyToLocalView(y,T),s.set(p,T);const w=(l.get(g.batchId)||Ot()).add(p);l=l.insert(g.batchId,w)}))})).next((()=>{const f=[],g=l.getReverseIterator();for(;g.hasNext();){const p=g.getNext(),y=p.key,T=p.value,w=LE();T.forEach((R=>{if(!c.has(R)){const q=GE(n.get(R),s.get(R));q!==null&&w.set(R,q),c=c.add(R)}})),f.push(this.documentOverlayCache.saveOverlays(t,y,w))}return X.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.recalculateAndSaveOverlays(t,s)))}getDocumentsMatchingQuery(t,n,s,l){return(function(f){return ut.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):ME(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,l):this.getDocumentsMatchingCollectionQuery(t,n,s,l)}getNextDocuments(t,n,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,l).next((c=>{const f=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,l-c.size):X.resolve(Ds());let g=Vl,p=c;return f.next((y=>X.forEach(y,((T,w)=>(g<w.largestBatchId&&(g=w.largestBatchId),c.get(T)?X.resolve():this.remoteDocumentCache.getEntry(t,T).next((R=>{p=p.insert(T,R)}))))).next((()=>this.populateOverlays(t,y,c))).next((()=>this.computeViews(t,p,y,Ot()))).next((T=>({batchId:g,changes:kE(T)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new ut(n)).next((s=>{let l=Tl();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l}))}getDocumentsMatchingCollectionGroupQuery(t,n,s,l){const c=n.collectionGroup;let f=Tl();return this.indexManager.getCollectionParents(t,c).next((g=>X.forEach(g,(p=>{const y=(function(w,R){return new so(R,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(n,p.child(c));return this.getDocumentsMatchingCollectionQuery(t,y,s,l).next((T=>{T.forEach(((w,R)=>{f=f.insert(w,R)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(t,n,s,l){let c;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next((f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,c,l)))).next((f=>{c.forEach(((p,y)=>{const T=y.getKey();f.get(T)===null&&(f=f.insert(T,$e.newInvalidDocument(T)))}));let g=Tl();return f.forEach(((p,y)=>{const T=c.get(p);T!==void 0&&Dl(T.mutation,y,yn.empty(),te.now()),mh(n,y)&&(g=g.insert(p,y))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return X.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:hi(l.createTime)}})(n)),X.resolve()}getNamedQuery(t,n){return X.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:$2(l.bundledQuery),readTime:hi(l.readTime)}})(n)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(){this.overlays=new re(ut.comparator),this.qr=new Map}getOverlay(t,n){return X.resolve(this.overlays.get(n))}getOverlays(t,n){const s=Ds();return X.forEach(n,(l=>this.getOverlay(t,l).next((c=>{c!==null&&s.set(l,c)})))).next((()=>s))}saveOverlays(t,n,s){return s.forEach(((l,c)=>{this.St(t,n,c)})),X.resolve()}removeOverlaysForBatchId(t,n,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),X.resolve()}getOverlaysForCollection(t,n,s){const l=Ds(),c=n.length+1,f=new ut(n.child("")),g=this.overlays.getIteratorFrom(f);for(;g.hasNext();){const p=g.getNext().value,y=p.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&p.largestBatchId>s&&l.set(p.getKey(),p)}return X.resolve(l)}getOverlaysForCollectionGroup(t,n,s,l){let c=new re(((y,T)=>y-T));const f=this.overlays.getIterator();for(;f.hasNext();){const y=f.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let T=c.get(y.largestBatchId);T===null&&(T=Ds(),c=c.insert(y.largestBatchId,T)),T.set(y.getKey(),y)}}const g=Ds(),p=c.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,T)=>g.set(y,T))),!(g.size()>=l)););return X.resolve(g)}St(t,n,s){const l=this.overlays.get(s.key);if(l!==null){const f=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new R2(n,s));let c=this.qr.get(n);c===void 0&&(c=Ot(),this.qr.set(n,c)),this.qr.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(){this.sessionToken=Ge.EMPTY_BYTE_STRING}getSessionToken(t){return X.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(){this.Qr=new Ce(Pe.$r),this.Ur=new Ce(Pe.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const s=new Pe(t,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,n){t.forEach((s=>this.addReference(s,n)))}removeReference(t,n){this.Gr(new Pe(t,n))}zr(t,n){t.forEach((s=>this.removeReference(s,n)))}jr(t){const n=new ut(new Jt([])),s=new Pe(n,t),l=new Pe(n,t+1),c=[];return this.Ur.forEachInRange([s,l],(f=>{this.Gr(f),c.push(f.key)})),c}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new ut(new Jt([])),s=new Pe(n,t),l=new Pe(n,t+1);let c=Ot();return this.Ur.forEachInRange([s,l],(f=>{c=c.add(f.key)})),c}containsKey(t){const n=new Pe(t,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class Pe{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return ut.comparator(t.key,n.key)||Nt(t.Yr,n.Yr)}static Kr(t,n){return Nt(t.Yr,n.Yr)||ut.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ce(Pe.$r)}checkEmpty(t){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new b2(c,n,s,l);this.mutationQueue.push(f);for(const g of l)this.Zr=this.Zr.add(new Pe(g.key,c)),this.indexManager.addToCollectionParentIndex(t,g.key.path.popLast());return X.resolve(f)}lookupMutationBatch(t,n){return X.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,l=this.ei(s),c=l<0?0:l;return X.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?Mm:this.tr-1)}getAllMutationBatches(t){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new Pe(n,0),l=new Pe(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,l],(f=>{const g=this.Xr(f.Yr);c.push(g)})),X.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new Ce(Nt);return n.forEach((l=>{const c=new Pe(l,0),f=new Pe(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,f],(g=>{s=s.add(g.Yr)}))})),X.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,l=s.length+1;let c=s;ut.isDocumentKey(c)||(c=c.child(""));const f=new Pe(new ut(c),0);let g=new Ce(Nt);return this.Zr.forEachWhile((p=>{const y=p.key.path;return!!s.isPrefixOf(y)&&(y.length===l&&(g=g.add(p.Yr)),!0)}),f),X.resolve(this.ti(g))}ti(t){const n=[];return t.forEach((s=>{const l=this.Xr(s);l!==null&&n.push(l)})),n}removeMutationBatch(t,n){qt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return X.forEach(n.mutations,(l=>{const c=new Pe(l.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)})).next((()=>{this.Zr=s}))}ir(t){}containsKey(t,n){const s=new Pe(n,0),l=this.Zr.firstAfterOrEqual(s);return X.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,X.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(t){this.ri=t,this.docs=(function(){return new re(ut.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,l=this.docs.get(s),c=l?l.size:0,f=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return X.resolve(s?s.document.mutableCopy():$e.newInvalidDocument(n))}getEntries(t,n){let s=Qi();return n.forEach((l=>{const c=this.docs.get(l);s=s.insert(l,c?c.document.mutableCopy():$e.newInvalidDocument(l))})),X.resolve(s)}getDocumentsMatchingQuery(t,n,s,l){let c=Qi();const f=n.path,g=new ut(f.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(g);for(;p.hasNext();){const{key:y,value:{document:T}}=p.getNext();if(!f.isPrefixOf(y.path))break;y.path.length>f.length+1||zR(LR(T),s)<=0||(l.has(T.key)||mh(n,T))&&(c=c.insert(T.key,T.mutableCopy()))}return X.resolve(c)}getAllFromCollectionGroup(t,n,s,l){pt(9500)}ii(t,n){return X.forEach(this.docs,(s=>n(s)))}newChangeBuffer(t){return new fI(this)}getSize(t){return X.resolve(this.size)}}class fI extends rI{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((s,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(t,l)):this.Nr.removeEntry(s)})),X.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(t){this.persistence=t,this.si=new Ls((n=>Um(n)),km),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.oi=0,this._i=new Hm,this.targetCount=0,this.ai=$a.ur()}forEachTarget(t,n){return this.si.forEach(((s,l)=>n(l))),X.resolve()}getLastRemoteSnapshotVersion(t){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return X.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),X.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new $a(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,X.resolve()}updateTargetData(t,n){return this.Pr(n),X.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,X.resolve()}removeTargets(t,n,s){let l=0;const c=[];return this.si.forEach(((f,g)=>{g.sequenceNumber<=n&&s.get(g.targetId)===null&&(this.si.delete(f),c.push(this.removeMatchingKeysForTargetId(t,g.targetId)),l++)})),X.waitFor(c).next((()=>l))}getTargetCount(t){return X.resolve(this.targetCount)}getTargetData(t,n){const s=this.si.get(n)||null;return X.resolve(s)}addMatchingKeys(t,n,s){return this._i.Wr(n,s),X.resolve()}removeMatchingKeys(t,n,s){this._i.zr(n,s);const l=this.persistence.referenceDelegate,c=[];return l&&n.forEach((f=>{c.push(l.markPotentiallyOrphaned(t,f))})),X.waitFor(c)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),X.resolve()}getMatchingKeysForTargetId(t,n){const s=this._i.Hr(n);return X.resolve(s)}containsKey(t,n){return X.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(t,n){this.ui={},this.overlays={},this.ci=new uh(0),this.li=!1,this.li=!0,this.hi=new uI,this.referenceDelegate=t(this),this.Pi=new dI(this),this.indexManager=new Z2,this.remoteDocumentCache=(function(l){return new hI(l)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new X2(n),this.Ii=new oI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new lI,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.ui[t.toKey()];return s||(s=new cI(n,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,s){st("MemoryPersistence","Starting transaction:",t);const l=new mI(this.ci.next());return this.referenceDelegate.Ei(),s(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(t,n){return X.or(Object.values(this.ui).map((s=>()=>s.containsKey(t,n))))}}class mI extends jR{constructor(t){super(),this.currentSequenceNumber=t}}class Gm{constructor(t){this.persistence=t,this.Ri=new Hm,this.Vi=null}static mi(t){return new Gm(t)}get fi(){if(this.Vi)return this.Vi;throw pt(60996)}addReference(t,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),X.resolve()}removeReference(t,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),X.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),X.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.fi,(s=>{const l=ut.fromPath(s);return this.gi(t,l).next((c=>{c||n.removeEntry(l,Et.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return X.or([()=>X.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class Zc{constructor(t,n){this.persistence=t,this.pi=new Ls((s=>GR(s.path)),((s,l)=>s.isEqual(l))),this.garbageCollector=iI(this,n)}static mi(t,n){return new Zc(t,n)}Ei(){}di(t){return X.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((s=>n.next((l=>s+l))))}wr(t){let n=0;return this.pr(t,(s=>{n++})).next((()=>n))}pr(t,n){return X.forEach(this.pi,((s,l)=>this.br(t,s,l).next((c=>c?X.resolve():n(l)))))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(t,(f=>this.br(t,f,n).next((g=>{g||(s++,c.removeEntry(f,Et.min()))})))).next((()=>c.apply(t))).next((()=>s))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),X.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),X.resolve()}removeReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),X.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),X.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Vc(t.data.value)),n}br(t,n,s){return X.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const l=this.pi.get(n);return X.resolve(l!==void 0&&l>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(t,n,s,l){this.targetId=t,this.fromCache=n,this.Es=s,this.ds=l}static As(t,n){let s=Ot(),l=Ot();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new Fm(t,n.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return HS()?8:qR(Ze())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,s,l){const c={result:null};return this.ys(t,n).next((f=>{c.result=f})).next((()=>{if(!c.result)return this.ws(t,n,l,s).next((f=>{c.result=f}))})).next((()=>{if(c.result)return;const f=new gI;return this.Ss(t,n,f).next((g=>{if(c.result=g,this.Vs)return this.bs(t,n,f,g.size)}))})).next((()=>c.result))}bs(t,n,s,l){return s.documentReadCount<this.fs?(Ma()<=Dt.DEBUG&&st("QueryEngine","SDK will not create cache indexes for query:",xa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),X.resolve()):(Ma()<=Dt.DEBUG&&st("QueryEngine","Query:",xa(n),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?(Ma()<=Dt.DEBUG&&st("QueryEngine","The SDK decides to create cache indexes for query:",xa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ci(n))):X.resolve())}ys(t,n){if(Vv(n))return X.resolve(null);let s=ci(n);return this.indexManager.getIndexType(t,s).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=om(n,null,"F"),s=ci(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next((c=>{const f=Ot(...c);return this.ps.getDocuments(t,f).next((g=>this.indexManager.getMinOffset(t,s).next((p=>{const y=this.Ds(n,g);return this.Cs(n,y,f,p.readTime)?this.ys(t,om(n,null,"F")):this.vs(t,y,n,p)}))))})))))}ws(t,n,s,l){return Vv(n)||l.isEqual(Et.min())?X.resolve(null):this.ps.getDocuments(t,s).next((c=>{const f=this.Ds(n,c);return this.Cs(n,f,s,l)?X.resolve(null):(Ma()<=Dt.DEBUG&&st("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),xa(n)),this.vs(t,f,n,kR(l,Vl)).next((g=>g)))}))}Ds(t,n){let s=new Ce(PE(t));return n.forEach(((l,c)=>{mh(t,c)&&(s=s.add(c))})),s}Cs(t,n,s,l){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const c=t.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(t,n,s){return Ma()<=Dt.DEBUG&&st("QueryEngine","Using full collection scan to execute query:",xa(n)),this.ps.getDocumentsMatchingQuery(t,n,kr.min(),s)}vs(t,n,s,l){return this.ps.getDocumentsMatchingQuery(t,s,l).next((c=>(n.forEach((f=>{c=c.insert(f.key,f)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qm="LocalStore",yI=3e8;class _I{constructor(t,n,s,l){this.persistence=t,this.Fs=n,this.serializer=l,this.Ms=new re(Nt),this.xs=new Ls((c=>Um(c)),km),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new aI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function vI(r,t,n,s){return new _I(r,t,n,s)}async function rT(r,t){const n=Tt(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let l;return n.mutationQueue.getAllMutationBatches(s).next((c=>(l=c,n.Bs(t),n.mutationQueue.getAllMutationBatches(s)))).next((c=>{const f=[],g=[];let p=Ot();for(const y of l){f.push(y.batchId);for(const T of y.mutations)p=p.add(T.key)}for(const y of c){g.push(y.batchId);for(const T of y.mutations)p=p.add(T.key)}return n.localDocuments.getDocuments(s,p).next((y=>({Ls:y,removedBatchIds:f,addedBatchIds:g})))}))}))}function EI(r,t){const n=Tt(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const l=t.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,p,y,T){const w=y.batch,R=w.keys();let q=X.resolve();return R.forEach((Y=>{q=q.next((()=>T.getEntry(p,Y))).next((et=>{const $=y.docVersions.get(Y);qt($!==null,48541),et.version.compareTo($)<0&&(w.applyToRemoteDocument(et,y),et.isValidDocument()&&(et.setReadTime(y.commitVersion),T.addEntry(et)))}))})),q.next((()=>g.mutationQueue.removeMutationBatch(p,w)))})(n,s,t,c).next((()=>c.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,l,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(g){let p=Ot();for(let y=0;y<g.mutationResults.length;++y)g.mutationResults[y].transformResults.length>0&&(p=p.add(g.batch.mutations[y].key));return p})(t)))).next((()=>n.localDocuments.getDocuments(s,l)))}))}function sT(r){const t=Tt(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function TI(r,t){const n=Tt(r),s=t.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const g=[];t.targetChanges.forEach(((T,w)=>{const R=l.get(w);if(!R)return;g.push(n.Pi.removeMatchingKeys(c,T.removedDocuments,w).next((()=>n.Pi.addMatchingKeys(c,T.addedDocuments,w))));let q=R.withSequenceNumber(c.currentSequenceNumber);t.targetMismatches.get(w)!==null?q=q.withResumeToken(Ge.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):T.resumeToken.approximateByteSize()>0&&(q=q.withResumeToken(T.resumeToken,s)),l=l.insert(w,q),(function(et,$,_t){return et.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-et.snapshotVersion.toMicroseconds()>=yI?!0:_t.addedDocuments.size+_t.modifiedDocuments.size+_t.removedDocuments.size>0})(R,q,T)&&g.push(n.Pi.updateTargetData(c,q))}));let p=Qi(),y=Ot();if(t.documentUpdates.forEach((T=>{t.resolvedLimboDocuments.has(T)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(c,T))})),g.push(AI(c,f,t.documentUpdates).next((T=>{p=T.ks,y=T.qs}))),!s.isEqual(Et.min())){const T=n.Pi.getLastRemoteSnapshotVersion(c).next((w=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));g.push(T)}return X.waitFor(g).next((()=>f.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,p,y))).next((()=>p))})).then((c=>(n.Ms=l,c)))}function AI(r,t,n){let s=Ot(),l=Ot();return n.forEach((c=>s=s.add(c))),t.getEntries(r,s).next((c=>{let f=Qi();return n.forEach(((g,p)=>{const y=c.get(g);p.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(g)),p.isNoDocument()&&p.version.isEqual(Et.min())?(t.removeEntry(g,p.readTime),f=f.insert(g,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(t.addEntry(p),f=f.insert(g,p)):st(Qm,"Ignoring outdated watch update for ",g,". Current version:",y.version," Watch version:",p.version)})),{ks:f,qs:l}}))}function SI(r,t){const n=Tt(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(t===void 0&&(t=Mm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t))))}function wI(r,t){const n=Tt(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let l;return n.Pi.getTargetData(s,t).next((c=>c?(l=c,X.resolve(l)):n.Pi.allocateTargetId(s).next((f=>(l=new Dr(t,f,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,l).next((()=>l)))))))})).then((s=>{const l=n.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(t,s.targetId)),s}))}async function fm(r,t,n){const s=Tt(r),l=s.Ms.get(t),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,(f=>s.persistence.referenceDelegate.removeTarget(f,l)))}catch(f){if(!ro(f))throw f;st(Qm,`Failed to update sequence numbers for target ${t}: ${f}`)}s.Ms=s.Ms.remove(t),s.xs.delete(l.target)}function Fv(r,t,n){const s=Tt(r);let l=Et.min(),c=Ot();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(p,y,T){const w=Tt(p),R=w.xs.get(T);return R!==void 0?X.resolve(w.Ms.get(R)):w.Pi.getTargetData(y,T)})(s,f,ci(t)).next((g=>{if(g)return l=g.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(f,g.targetId).next((p=>{c=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(f,t,n?l:Et.min(),n?c:Ot()))).next((g=>(bI(s,u2(t),g),{documents:g,Qs:c})))))}function bI(r,t,n){let s=r.Os.get(t)||Et.min();n.forEach(((l,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.Os.set(t,s)}class Qv{constructor(){this.activeTargetIds=g2()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class RI{constructor(){this.Mo=new Qv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,s){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Qv,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv="ConnectivityMonitor";class Yv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){st(Kv,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){st(Kv,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rc=null;function dm(){return Rc===null?Rc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Rc++,"0x"+Rc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd="RestConnection",CI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class DI{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===Qc?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(t,n,s,l,c){const f=dm(),g=this.zo(t,n.toUriEncodedString());st(jd,`Sending RPC '${t}' ${f}:`,g,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,l,c);const{host:y}=new URL(g),T=Wa(y);return this.Jo(t,g,p,s,T).then((w=>(st(jd,`Received RPC '${t}' ${f}: `,w),w)),(w=>{throw Qa(jd,`RPC '${t}' ${f} failed with error: `,w,"url: ",g,"request:",s),w}))}Ho(t,n,s,l,c,f){return this.Go(t,n,s,l,c)}jo(t,n,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+no})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,c)=>t[c]=l)),s&&s.headers.forEach(((l,c)=>t[c]=l))}zo(t,n){const s=CI[t];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ye="WebChannelConnection";class OI extends DI{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,s,l,c){const f=dm();return new Promise(((g,p)=>{const y=new lE;y.setWithCredentials(!0),y.listenOnce(uE.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Oc.NO_ERROR:const w=y.getResponseJson();st(Ye,`XHR for RPC '${t}' ${f} received:`,JSON.stringify(w)),g(w);break;case Oc.TIMEOUT:st(Ye,`RPC '${t}' ${f} timed out`),p(new rt(Q.DEADLINE_EXCEEDED,"Request time out"));break;case Oc.HTTP_ERROR:const R=y.getStatus();if(st(Ye,`RPC '${t}' ${f} failed with status:`,R,"response text:",y.getResponseText()),R>0){let q=y.getResponseJson();Array.isArray(q)&&(q=q[0]);const Y=q==null?void 0:q.error;if(Y&&Y.status&&Y.message){const et=(function(_t){const mt=_t.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(mt)>=0?mt:Q.UNKNOWN})(Y.status);p(new rt(et,Y.message))}else p(new rt(Q.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new rt(Q.UNAVAILABLE,"Connection failed."));break;default:pt(9055,{l_:t,streamId:f,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{st(Ye,`RPC '${t}' ${f} completed.`)}}));const T=JSON.stringify(l);st(Ye,`RPC '${t}' ${f} sending request:`,l),y.send(n,"POST",T,s,15)}))}T_(t,n,s){const l=dm(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],f=fE(),g=hE(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const T=c.join("");st(Ye,`Creating RPC '${t}' stream ${l}: ${T}`,p);const w=f.createWebChannel(T,p);this.I_(w);let R=!1,q=!1;const Y=new NI({Yo:$=>{q?st(Ye,`Not sending because RPC '${t}' stream ${l} is closed:`,$):(R||(st(Ye,`Opening RPC '${t}' stream ${l} transport.`),w.open(),R=!0),st(Ye,`RPC '${t}' stream ${l} sending:`,$),w.send($))},Zo:()=>w.close()}),et=($,_t,mt)=>{$.listen(_t,(ft=>{try{mt(ft)}catch(Ut){setTimeout((()=>{throw Ut}),0)}}))};return et(w,El.EventType.OPEN,(()=>{q||(st(Ye,`RPC '${t}' stream ${l} transport opened.`),Y.o_())})),et(w,El.EventType.CLOSE,(()=>{q||(q=!0,st(Ye,`RPC '${t}' stream ${l} transport closed`),Y.a_(),this.E_(w))})),et(w,El.EventType.ERROR,($=>{q||(q=!0,Qa(Ye,`RPC '${t}' stream ${l} transport errored. Name:`,$.name,"Message:",$.message),Y.a_(new rt(Q.UNAVAILABLE,"The operation could not be completed")))})),et(w,El.EventType.MESSAGE,($=>{var _t;if(!q){const mt=$.data[0];qt(!!mt,16349);const ft=mt,Ut=(ft==null?void 0:ft.error)||((_t=ft[0])==null?void 0:_t.error);if(Ut){st(Ye,`RPC '${t}' stream ${l} received error:`,Ut);const At=Ut.status;let Lt=(function(C){const O=ve[C];if(O!==void 0)return QE(O)})(At),V=Ut.message;Lt===void 0&&(Lt=Q.INTERNAL,V="Unknown error status: "+At+" with message "+Ut.message),q=!0,Y.a_(new rt(Lt,V)),w.close()}else st(Ye,`RPC '${t}' stream ${l} received:`,mt),Y.u_(mt)}})),et(g,cE.STAT_EVENT,($=>{$.stat===tm.PROXY?st(Ye,`RPC '${t}' stream ${l} detected buffering proxy`):$.stat===tm.NOPROXY&&st(Ye,`RPC '${t}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{Y.__()}),0),Y}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function qd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _h(r){return new P2(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(t,n,s=1e3,l=1.5,c=6e4){this.Mi=t,this.timerId=n,this.d_=s,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-s);l>0&&st("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="PersistentStream";class oT{constructor(t,n,s,l,c,f,g,p){this.Mi=t,this.S_=s,this.b_=l,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=g,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new aT(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===Q.RESOURCE_EXHAUSTED?(Fi(n.toString()),Fi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,l])=>{this.D_===n&&this.G_(s,l)}),(s=>{t((()=>{const l=new rt(Q.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)}))}))}G_(t,n){const s=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{s((()=>this.z_(l)))})),this.stream.onMessage((l=>{s((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return st(Xv,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(st(Xv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class VI extends oT{constructor(t,n,s,l,c,f){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,l,f),this.serializer=c}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=L2(this.serializer,t),s=(function(c){if(!("targetChange"in c))return Et.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?Et.min():f.readTime?hi(f.readTime):Et.min()})(t);return this.listener.H_(n,s)}Y_(t){const n={};n.database=hm(this.serializer),n.addTarget=(function(c,f){let g;const p=f.target;if(g=sm(p)?{documents:j2(c,p)}:{query:q2(c,p).ft},g.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){g.resumeToken=XE(c,f.resumeToken);const y=lm(c,f.expectedCount);y!==null&&(g.expectedCount=y)}else if(f.snapshotVersion.compareTo(Et.min())>0){g.readTime=$c(c,f.snapshotVersion.toTimestamp());const y=lm(c,f.expectedCount);y!==null&&(g.expectedCount=y)}return g})(this.serializer,t);const s=G2(this.serializer,t);s&&(n.labels=s),this.q_(n)}Z_(t){const n={};n.database=hm(this.serializer),n.removeTarget=t,this.q_(n)}}class MI extends oT{constructor(t,n,s,l,c,f){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,l,f),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return qt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,qt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){qt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=B2(t.writeResults,t.commitTime),s=hi(t.commitTime);return this.listener.na(s,n)}ra(){const t={};t.database=hm(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((s=>z2(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{}class PI extends xI{constructor(t,n,s,l){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new rt(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Go(t,um(n,s),l,c,f))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new rt(Q.UNKNOWN,c.toString())}))}Ho(t,n,s,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,g])=>this.connection.Ho(t,um(n,s),l,f,g,c))).catch((f=>{throw f.name==="FirebaseError"?(f.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new rt(Q.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class UI{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Fi(n),this.aa=!1):st("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps="RemoteStore";class kI{constructor(t,n,s,l,c){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((f=>{s.enqueueAndForget((async()=>{zs(this)&&(st(Ps,"Restarting streams for network reachability change."),await(async function(p){const y=Tt(p);y.Ea.add(4),await Yl(y),y.Ra.set("Unknown"),y.Ea.delete(4),await vh(y)})(this))}))})),this.Ra=new UI(s,l)}}async function vh(r){if(zs(r))for(const t of r.da)await t(!0)}async function Yl(r){for(const t of r.da)await t(!1)}function lT(r,t){const n=Tt(r);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),$m(n)?Xm(n):ao(n).O_()&&Ym(n,t))}function Km(r,t){const n=Tt(r),s=ao(n);n.Ia.delete(t),s.O_()&&uT(n,t),n.Ia.size===0&&(s.O_()?s.L_():zs(n)&&n.Ra.set("Unknown"))}function Ym(r,t){if(r.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Et.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}ao(r).Y_(t)}function uT(r,t){r.Va.Ue(t),ao(r).Z_(t)}function Xm(r){r.Va=new O2({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),At:t=>r.Ia.get(t)||null,ht:()=>r.datastore.serializer.databaseId}),ao(r).start(),r.Ra.ua()}function $m(r){return zs(r)&&!ao(r).x_()&&r.Ia.size>0}function zs(r){return Tt(r).Ea.size===0}function cT(r){r.Va=void 0}async function LI(r){r.Ra.set("Online")}async function zI(r){r.Ia.forEach(((t,n)=>{Ym(r,t)}))}async function BI(r,t){cT(r),$m(r)?(r.Ra.ha(t),Xm(r)):r.Ra.set("Unknown")}async function jI(r,t,n){if(r.Ra.set("Online"),t instanceof YE&&t.state===2&&t.cause)try{await(async function(l,c){const f=c.cause;for(const g of c.targetIds)l.Ia.has(g)&&(await l.remoteSyncer.rejectListen(g,f),l.Ia.delete(g),l.Va.removeTarget(g))})(r,t)}catch(s){st(Ps,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Wc(r,s)}else if(t instanceof Pc?r.Va.Ze(t):t instanceof KE?r.Va.st(t):r.Va.tt(t),!n.isEqual(Et.min()))try{const s=await sT(r.localStore);n.compareTo(s)>=0&&await(function(c,f){const g=c.Va.Tt(f);return g.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const T=c.Ia.get(y);T&&c.Ia.set(y,T.withResumeToken(p.resumeToken,f))}})),g.targetMismatches.forEach(((p,y)=>{const T=c.Ia.get(p);if(!T)return;c.Ia.set(p,T.withResumeToken(Ge.EMPTY_BYTE_STRING,T.snapshotVersion)),uT(c,p);const w=new Dr(T.target,p,y,T.sequenceNumber);Ym(c,w)})),c.remoteSyncer.applyRemoteEvent(g)})(r,n)}catch(s){st(Ps,"Failed to raise snapshot:",s),await Wc(r,s)}}async function Wc(r,t,n){if(!ro(t))throw t;r.Ea.add(1),await Yl(r),r.Ra.set("Offline"),n||(n=()=>sT(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{st(Ps,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await vh(r)}))}function hT(r,t){return t().catch((n=>Wc(r,n,t)))}async function Eh(r){const t=Tt(r),n=jr(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Mm;for(;qI(t);)try{const l=await SI(t.localStore,s);if(l===null){t.Ta.length===0&&n.L_();break}s=l.batchId,HI(t,l)}catch(l){await Wc(t,l)}fT(t)&&dT(t)}function qI(r){return zs(r)&&r.Ta.length<10}function HI(r,t){r.Ta.push(t);const n=jr(r);n.O_()&&n.X_&&n.ea(t.mutations)}function fT(r){return zs(r)&&!jr(r).x_()&&r.Ta.length>0}function dT(r){jr(r).start()}async function GI(r){jr(r).ra()}async function FI(r){const t=jr(r);for(const n of r.Ta)t.ea(n.mutations)}async function QI(r,t,n){const s=r.Ta.shift(),l=Bm.from(s,t,n);await hT(r,(()=>r.remoteSyncer.applySuccessfulWrite(l))),await Eh(r)}async function KI(r,t){t&&jr(r).X_&&await(async function(s,l){if((function(f){return C2(f)&&f!==Q.ABORTED})(l.code)){const c=s.Ta.shift();jr(s).B_(),await hT(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,l))),await Eh(s)}})(r,t),fT(r)&&dT(r)}async function $v(r,t){const n=Tt(r);n.asyncQueue.verifyOperationInProgress(),st(Ps,"RemoteStore received new credentials");const s=zs(n);n.Ea.add(3),await Yl(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await vh(n)}async function YI(r,t){const n=Tt(r);t?(n.Ea.delete(2),await vh(n)):t||(n.Ea.add(2),await Yl(n),n.Ra.set("Unknown"))}function ao(r){return r.ma||(r.ma=(function(n,s,l){const c=Tt(n);return c.sa(),new VI(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:LI.bind(null,r),t_:zI.bind(null,r),r_:BI.bind(null,r),H_:jI.bind(null,r)}),r.da.push((async t=>{t?(r.ma.B_(),$m(r)?Xm(r):r.Ra.set("Unknown")):(await r.ma.stop(),cT(r))}))),r.ma}function jr(r){return r.fa||(r.fa=(function(n,s,l){const c=Tt(n);return c.sa(),new MI(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:GI.bind(null,r),r_:KI.bind(null,r),ta:FI.bind(null,r),na:QI.bind(null,r)}),r.da.push((async t=>{t?(r.fa.B_(),await Eh(r)):(await r.fa.stop(),r.Ta.length>0&&(st(Ps,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(t,n,s,l,c){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=l,this.removalCallback=c,this.deferred=new Pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,l,c){const f=Date.now()+s,g=new Zm(t,n,f,l,c);return g.start(s),g}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new rt(Q.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wm(r,t){if(Fi("AsyncQueue",`${t}: ${r}`),ro(r))return new rt(Q.UNAVAILABLE,`${t}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{static emptySet(t){return new ja(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||ut.comparator(n.key,s.key):(n,s)=>ut.comparator(n.key,s.key),this.keyedMap=Tl(),this.sortedSet=new re(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,s)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof ja)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new ja;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(){this.ga=new re(ut.comparator)}track(t){const n=t.doc.key,s=this.ga.get(n);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(n,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(n):t.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):pt(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,s)=>{t.push(s)})),t}}class Za{constructor(t,n,s,l,c,f,g,p,y){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=g,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(t,n,s,l,c){const f=[];return n.forEach((g=>{f.push({type:0,doc:g})})),new Za(t,n,ja.emptySet(n),f,s,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&dh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==s[l].type||!n[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class $I{constructor(){this.queries=Wv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const l=Tt(n),c=l.queries;l.queries=Wv(),c.forEach(((f,g)=>{for(const p of g.Sa)p.onError(s)}))})(this,new rt(Q.ABORTED,"Firestore shutting down"))}}function Wv(){return new Ls((r=>xE(r)),dh)}async function mT(r,t){const n=Tt(r);let s=3;const l=t.query;let c=n.queries.get(l);c?!c.ba()&&t.Da()&&(s=2):(c=new XI,s=t.Da()?0:1);try{switch(s){case 0:c.wa=await n.onListen(l,!0);break;case 1:c.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(f){const g=Wm(f,`Initialization of query '${xa(t.query)}' failed`);return void t.onError(g)}n.queries.set(l,c),c.Sa.push(t),t.va(n.onlineState),c.wa&&t.Fa(c.wa)&&Jm(n)}async function gT(r,t){const n=Tt(r),s=t.query;let l=3;const c=n.queries.get(s);if(c){const f=c.Sa.indexOf(t);f>=0&&(c.Sa.splice(f,1),c.Sa.length===0?l=t.Da()?0:1:!c.ba()&&t.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function ZI(r,t){const n=Tt(r);let s=!1;for(const l of t){const c=l.query,f=n.queries.get(c);if(f){for(const g of f.Sa)g.Fa(l)&&(s=!0);f.wa=l}}s&&Jm(n)}function WI(r,t,n){const s=Tt(r),l=s.queries.get(t);if(l)for(const c of l.Sa)c.onError(n);s.queries.delete(t)}function Jm(r){r.Ca.forEach((t=>{t.next()}))}var mm,Jv;(Jv=mm||(mm={})).Ma="default",Jv.Cache="cache";class pT{constructor(t,n,s){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const l of t.docChanges)l.type!==3&&s.push(l);t=new Za(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=Za.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==mm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(t){this.key=t}}class _T{constructor(t){this.key=t}}class JI{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ot(),this.mutatedKeys=Ot(),this.eu=PE(t),this.tu=new ja(this.eu)}get nu(){return this.Ya}ru(t,n){const s=n?n.iu:new Zv,l=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,f=l,g=!1;const p=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal(((T,w)=>{const R=l.get(T),q=mh(this.query,w)?w:null,Y=!!R&&this.mutatedKeys.has(R.key),et=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let $=!1;R&&q?R.data.isEqual(q.data)?Y!==et&&(s.track({type:3,doc:q}),$=!0):this.su(R,q)||(s.track({type:2,doc:q}),$=!0,(p&&this.eu(q,p)>0||y&&this.eu(q,y)<0)&&(g=!0)):!R&&q?(s.track({type:0,doc:q}),$=!0):R&&!q&&(s.track({type:1,doc:R}),$=!0,(p||y)&&(g=!0)),$&&(q?(f=f.add(q),c=et?c.add(T):c.delete(T)):(f=f.delete(T),c=c.delete(T)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const T=this.query.limitType==="F"?f.last():f.first();f=f.delete(T.key),c=c.delete(T.key),s.track({type:1,doc:T})}return{tu:f,iu:s,Cs:g,mutatedKeys:c}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,l){const c=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const f=t.iu.ya();f.sort(((T,w)=>(function(q,Y){const et=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pt(20277,{Rt:$})}};return et(q)-et(Y)})(T.type,w.type)||this.eu(T.doc,w.doc))),this.ou(s),l=l??!1;const g=n&&!l?this._u():[],p=this.Xa.size===0&&this.current&&!l?1:0,y=p!==this.Za;return this.Za=p,f.length!==0||y?{snapshot:new Za(this.query,t.tu,c,f,t.mutatedKeys,p===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Zv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Ot(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return t.forEach((s=>{this.Xa.has(s)||n.push(new _T(s))})),this.Xa.forEach((s=>{t.has(s)||n.push(new yT(s))})),n}cu(t){this.Ya=t.Qs,this.Xa=Ot();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return Za.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const tg="SyncEngine";class tC{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class eC{constructor(t){this.key=t,this.hu=!1}}class nC{constructor(t,n,s,l,c,f){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Ls((g=>xE(g)),dh),this.Iu=new Map,this.Eu=new Set,this.du=new re(ut.comparator),this.Au=new Map,this.Ru=new Hm,this.Vu={},this.mu=new Map,this.fu=$a.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function iC(r,t,n=!0){const s=wT(r);let l;const c=s.Tu.get(t);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await vT(s,t,n,!0),l}async function rC(r,t){const n=wT(r);await vT(n,t,!0,!1)}async function vT(r,t,n,s){const l=await wI(r.localStore,ci(t)),c=l.targetId,f=r.sharedClientState.addLocalQueryTarget(c,n);let g;return s&&(g=await sC(r,t,c,f==="current",l.resumeToken)),r.isPrimaryClient&&n&&lT(r.remoteStore,l),g}async function sC(r,t,n,s,l){r.pu=(w,R,q)=>(async function(et,$,_t,mt){let ft=$.view.ru(_t);ft.Cs&&(ft=await Fv(et.localStore,$.query,!1).then((({documents:V})=>$.view.ru(V,ft))));const Ut=mt&&mt.targetChanges.get($.targetId),At=mt&&mt.targetMismatches.get($.targetId)!=null,Lt=$.view.applyChanges(ft,et.isPrimaryClient,Ut,At);return e0(et,$.targetId,Lt.au),Lt.snapshot})(r,w,R,q);const c=await Fv(r.localStore,t,!0),f=new JI(t,c.Qs),g=f.ru(c.documents),p=Kl.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",l),y=f.applyChanges(g,r.isPrimaryClient,p);e0(r,n,y.au);const T=new tC(t,n,f);return r.Tu.set(t,T),r.Iu.has(n)?r.Iu.get(n).push(t):r.Iu.set(n,[t]),y.snapshot}async function aC(r,t,n){const s=Tt(r),l=s.Tu.get(t),c=s.Iu.get(l.targetId);if(c.length>1)return s.Iu.set(l.targetId,c.filter((f=>!dh(f,t)))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await fm(s.localStore,l.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(l.targetId),n&&Km(s.remoteStore,l.targetId),gm(s,l.targetId)})).catch(io)):(gm(s,l.targetId),await fm(s.localStore,l.targetId,!0))}async function oC(r,t){const n=Tt(r),s=n.Tu.get(t),l=n.Iu.get(s.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Km(n.remoteStore,s.targetId))}async function lC(r,t,n){const s=gC(r);try{const l=await(function(f,g){const p=Tt(f),y=te.now(),T=g.reduce(((q,Y)=>q.add(Y.key)),Ot());let w,R;return p.persistence.runTransaction("Locally write mutations","readwrite",(q=>{let Y=Qi(),et=Ot();return p.Ns.getEntries(q,T).next(($=>{Y=$,Y.forEach(((_t,mt)=>{mt.isValidDocument()||(et=et.add(_t))}))})).next((()=>p.localDocuments.getOverlayedDocuments(q,Y))).next(($=>{w=$;const _t=[];for(const mt of g){const ft=S2(mt,w.get(mt.key).overlayedDocument);ft!=null&&_t.push(new Gr(mt.key,ft,RE(ft.value.mapValue),Bn.exists(!0)))}return p.mutationQueue.addMutationBatch(q,y,_t,g)})).next(($=>{R=$;const _t=$.applyToLocalDocumentSet(w,et);return p.documentOverlayCache.saveOverlays(q,$.batchId,_t)}))})).then((()=>({batchId:R.batchId,changes:kE(w)})))})(s.localStore,t);s.sharedClientState.addPendingMutation(l.batchId),(function(f,g,p){let y=f.Vu[f.currentUser.toKey()];y||(y=new re(Nt)),y=y.insert(g,p),f.Vu[f.currentUser.toKey()]=y})(s,l.batchId,n),await Xl(s,l.changes),await Eh(s.remoteStore)}catch(l){const c=Wm(l,"Failed to persist write");n.reject(c)}}async function ET(r,t){const n=Tt(r);try{const s=await TI(n.localStore,t);t.targetChanges.forEach(((l,c)=>{const f=n.Au.get(c);f&&(qt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?f.hu=!0:l.modifiedDocuments.size>0?qt(f.hu,14607):l.removedDocuments.size>0&&(qt(f.hu,42227),f.hu=!1))})),await Xl(n,s,t)}catch(s){await io(s)}}function t0(r,t,n){const s=Tt(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const l=[];s.Tu.forEach(((c,f)=>{const g=f.view.va(t);g.snapshot&&l.push(g.snapshot)})),(function(f,g){const p=Tt(f);p.onlineState=g;let y=!1;p.queries.forEach(((T,w)=>{for(const R of w.Sa)R.va(g)&&(y=!0)})),y&&Jm(p)})(s.eventManager,t),l.length&&s.Pu.H_(l),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function uC(r,t,n){const s=Tt(r);s.sharedClientState.updateQueryState(t,"rejected",n);const l=s.Au.get(t),c=l&&l.key;if(c){let f=new re(ut.comparator);f=f.insert(c,$e.newNoDocument(c,Et.min()));const g=Ot().add(c),p=new yh(Et.min(),new Map,new re(Nt),f,g);await ET(s,p),s.du=s.du.remove(c),s.Au.delete(t),eg(s)}else await fm(s.localStore,t,!1).then((()=>gm(s,t,n))).catch(io)}async function cC(r,t){const n=Tt(r),s=t.batch.batchId;try{const l=await EI(n.localStore,t);AT(n,s,null),TT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Xl(n,l)}catch(l){await io(l)}}async function hC(r,t,n){const s=Tt(r);try{const l=await(function(f,g){const p=Tt(f);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let T;return p.mutationQueue.lookupMutationBatch(y,g).next((w=>(qt(w!==null,37113),T=w.keys(),p.mutationQueue.removeMutationBatch(y,w)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,T,g))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,T))).next((()=>p.localDocuments.getDocuments(y,T)))}))})(s.localStore,t);AT(s,t,n),TT(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await Xl(s,l)}catch(l){await io(l)}}function TT(r,t){(r.mu.get(t)||[]).forEach((n=>{n.resolve()})),r.mu.delete(t)}function AT(r,t,n){const s=Tt(r);let l=s.Vu[s.currentUser.toKey()];if(l){const c=l.get(t);c&&(n?c.reject(n):c.resolve(),l=l.remove(t)),s.Vu[s.currentUser.toKey()]=l}}function gm(r,t,n=null){r.sharedClientState.removeLocalQueryTarget(t);for(const s of r.Iu.get(t))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(t),r.isPrimaryClient&&r.Ru.jr(t).forEach((s=>{r.Ru.containsKey(s)||ST(r,s)}))}function ST(r,t){r.Eu.delete(t.path.canonicalString());const n=r.du.get(t);n!==null&&(Km(r.remoteStore,n),r.du=r.du.remove(t),r.Au.delete(n),eg(r))}function e0(r,t,n){for(const s of n)s instanceof yT?(r.Ru.addReference(s.key,t),fC(r,s)):s instanceof _T?(st(tg,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,t),r.Ru.containsKey(s.key)||ST(r,s.key)):pt(19791,{wu:s})}function fC(r,t){const n=t.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(st(tg,"New document in limbo: "+n),r.Eu.add(s),eg(r))}function eg(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const t=r.Eu.values().next().value;r.Eu.delete(t);const n=new ut(Jt.fromString(t)),s=r.fu.next();r.Au.set(s,new eC(n)),r.du=r.du.insert(n,s),lT(r.remoteStore,new Dr(ci(fh(n.path)),s,"TargetPurposeLimboResolution",uh.ce))}}async function Xl(r,t,n){const s=Tt(r),l=[],c=[],f=[];s.Tu.isEmpty()||(s.Tu.forEach(((g,p)=>{f.push(s.pu(p,t,n).then((y=>{var T;if((y||n)&&s.isPrimaryClient){const w=y?!y.fromCache:(T=n==null?void 0:n.targetChanges.get(p.targetId))==null?void 0:T.current;s.sharedClientState.updateQueryState(p.targetId,w?"current":"not-current")}if(y){l.push(y);const w=Fm.As(p.targetId,y);c.push(w)}})))})),await Promise.all(f),s.Pu.H_(l),await(async function(p,y){const T=Tt(p);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>X.forEach(y,(R=>X.forEach(R.Es,(q=>T.persistence.referenceDelegate.addReference(w,R.targetId,q))).next((()=>X.forEach(R.ds,(q=>T.persistence.referenceDelegate.removeReference(w,R.targetId,q)))))))))}catch(w){if(!ro(w))throw w;st(Qm,"Failed to update sequence numbers: "+w)}for(const w of y){const R=w.targetId;if(!w.fromCache){const q=T.Ms.get(R),Y=q.snapshotVersion,et=q.withLastLimboFreeSnapshotVersion(Y);T.Ms=T.Ms.insert(R,et)}}})(s.localStore,c))}async function dC(r,t){const n=Tt(r);if(!n.currentUser.isEqual(t)){st(tg,"User change. New user:",t.toKey());const s=await rT(n.localStore,t);n.currentUser=t,(function(c,f){c.mu.forEach((g=>{g.forEach((p=>{p.reject(new rt(Q.CANCELLED,f))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Xl(n,s.Ls)}}function mC(r,t){const n=Tt(r),s=n.Au.get(t);if(s&&s.hu)return Ot().add(s.key);{let l=Ot();const c=n.Iu.get(t);if(!c)return l;for(const f of c){const g=n.Tu.get(f);l=l.unionWith(g.view.nu)}return l}}function wT(r){const t=Tt(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=ET.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=mC.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=uC.bind(null,t),t.Pu.H_=ZI.bind(null,t.eventManager),t.Pu.yu=WI.bind(null,t.eventManager),t}function gC(r){const t=Tt(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=cC.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=hC.bind(null,t),t}class Jc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=_h(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return vI(this.persistence,new pI,t.initialUser,this.serializer)}Cu(t){return new iT(Gm.mi,this.serializer)}Du(t){return new RI}async terminate(){var t,n;(t=this.gcScheduler)==null||t.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Jc.provider={build:()=>new Jc};class pC extends Jc{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){qt(this.persistence.referenceDelegate instanceof Zc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new eI(s,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?an.withCacheSize(this.cacheSizeBytes):an.DEFAULT;return new iT((s=>Zc.mi(s,n)),this.serializer)}}class pm{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>t0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=dC.bind(null,this.syncEngine),await YI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new $I})()}createDatastore(t){const n=_h(t.databaseInfo.databaseId),s=(function(c){return new OI(c)})(t.databaseInfo);return(function(c,f,g,p){return new PI(c,f,g,p)})(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return(function(s,l,c,f,g){return new kI(s,l,c,f,g)})(this.localStore,this.datastore,t.asyncQueue,(n=>t0(this.syncEngine,n,0)),(function(){return Yv.v()?new Yv:new II})())}createSyncEngine(t,n){return(function(l,c,f,g,p,y,T){const w=new nC(l,c,f,g,p,y);return T&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await(async function(l){const c=Tt(l);st(Ps,"RemoteStore shutting down."),c.Ea.add(5),await Yl(c),c.Aa.shutdown(),c.Ra.set("Unknown")})(this.remoteStore),(t=this.datastore)==null||t.terminate(),(n=this.eventManager)==null||n.terminate()}}pm.provider={build:()=>new pm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Fi("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr="FirestoreClient";class yC{constructor(t,n,s,l,c){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=l,this.user=Xe.UNAUTHENTICATED,this.clientId=Vm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async f=>{st(qr,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(st(qr,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=Wm(n,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}async function Hd(r,t){r.asyncQueue.verifyOperationInProgress(),st(qr,"Initializing OfflineComponentProvider");const n=r.configuration;await t.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async l=>{s.isEqual(l)||(await rT(t.localStore,l),s=l)})),t.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=t}async function n0(r,t){r.asyncQueue.verifyOperationInProgress();const n=await _C(r);st(qr,"Initializing OnlineComponentProvider"),await t.initialize(n,r.configuration),r.setCredentialChangeListener((s=>$v(t.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,l)=>$v(t.remoteStore,l))),r._onlineComponents=t}async function _C(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){st(qr,"Using user provided OfflineComponentProvider");try{await Hd(r,r._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(l){return l.name==="FirebaseError"?l.code===Q.FAILED_PRECONDITION||l.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;Qa("Error using user provided cache. Falling back to memory cache: "+n),await Hd(r,new Jc)}}else st(qr,"Using default OfflineComponentProvider"),await Hd(r,new pC(void 0));return r._offlineComponents}async function RT(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(st(qr,"Using user provided OnlineComponentProvider"),await n0(r,r._uninitializedComponentsProvider._online)):(st(qr,"Using default OnlineComponentProvider"),await n0(r,new pm))),r._onlineComponents}function vC(r){return RT(r).then((t=>t.syncEngine))}async function ym(r){const t=await RT(r),n=t.eventManager;return n.onListen=iC.bind(null,t.syncEngine),n.onUnlisten=aC.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=rC.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=oC.bind(null,t.syncEngine),n}function EC(r,t,n={}){const s=new Pr;return r.asyncQueue.enqueueAndForget((async()=>(function(c,f,g,p,y){const T=new bT({next:R=>{T.Nu(),f.enqueueAndForget((()=>gT(c,w)));const q=R.docs.has(g);!q&&R.fromCache?y.reject(new rt(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):q&&R.fromCache&&p&&p.source==="server"?y.reject(new rt(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(R)},error:R=>y.reject(R)}),w=new pT(fh(g.path),T,{includeMetadataChanges:!0,qa:!0});return mT(c,w)})(await ym(r),r.asyncQueue,t,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT="firestore.googleapis.com",r0=!0;class s0{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new rt(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=CT,this.ssl=r0}else this.host=t.host,this.ssl=t.ssl??r0;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=nT;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<J2)throw new rt(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}UR("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=IT(t.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new rt(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new rt(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new rt(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(s,l){return s.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Th{constructor(t,n,s,l){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new s0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new rt(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new rt(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new s0(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new RR;switch(s.type){case"firstParty":return new NR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new rt(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=i0.get(n);s&&(st("ComponentProvider","Removing Datastore"),i0.delete(n),s.terminate())})(this),Promise.resolve()}}function TC(r,t,n,s={}){var y;r=ui(r,Th);const l=Wa(t),c=r._getSettings(),f={...c,emulatorOptions:r._getEmulatorOptions()},g=`${t}:${n}`;l&&(E0(`https://${g}`),T0("Firestore",!0)),c.host!==CT&&c.host!==g&&Qa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...c,host:g,ssl:l,emulatorOptions:s};if(!Os(p,f)&&(r._setSettings(p),s.mockUserToken)){let T,w;if(typeof s.mockUserToken=="string")T=s.mockUserToken,w=Xe.MOCK_USER;else{T=xS(s.mockUserToken,(y=r._app)==null?void 0:y.options.projectId);const R=s.mockUserToken.sub||s.mockUserToken.user_id;if(!R)throw new rt(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Xe(R)}r._authCredentials=new IR(new mE(T,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new Bs(this.firestore,t,this._query)}}class me{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ur(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new me(this.firestore,t,this._key)}toJSON(){return{type:me._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,s){if(Fl(n,me._jsonSchema))return new me(t,s||null,new ut(Jt.fromString(n.referencePath)))}}me._jsonSchemaVersion="firestore/documentReference/1.0",me._jsonSchema={type:Te("string",me._jsonSchemaVersion),referencePath:Te("string")};class Ur extends Bs{constructor(t,n,s){super(t,n,fh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new me(this.firestore,null,new ut(t))}withConverter(t){return new Ur(this.firestore,t,this._path)}}function AC(r,t,...n){if(r=Ae(r),gE("collection","path",t),r instanceof Th){const s=Jt.fromString(t,...n);return _v(s),new Ur(r,null,s)}{if(!(r instanceof me||r instanceof Ur))throw new rt(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Jt.fromString(t,...n));return _v(s),new Ur(r.firestore,null,s)}}function th(r,t,...n){if(r=Ae(r),arguments.length===1&&(t=Vm.newId()),gE("doc","path",t),r instanceof Th){const s=Jt.fromString(t,...n);return yv(s),new me(r,null,new ut(s))}{if(!(r instanceof me||r instanceof Ur))throw new rt(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Jt.fromString(t,...n));return yv(s),new me(r.firestore,r instanceof Ur?r.converter:null,new ut(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0="AsyncQueue";class o0{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new aT(this,"async_queue_retry"),this._c=()=>{const s=qd();s&&st(a0,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const n=qd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=qd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Pr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!ro(t))throw t;st(a0,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((s=>{throw this.nc=s,this.rc=!1,Fi("INTERNAL UNHANDLED ERROR: ",l0(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(t,n,s){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const l=Zm.createAndSchedule(this,t,n,s,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&pt(47125,{Pc:l0(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function l0(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(r){return(function(n,s){if(typeof n!="object"||n===null)return!1;const l=n;for(const c of s)if(c in l&&typeof l[c]=="function")return!0;return!1})(r,["next","error","complete"])}class Us extends Th{constructor(t,n,s,l){super(t,n,s,l),this.type="firestore",this._queue=new o0,this._persistenceKey=(l==null?void 0:l.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new o0(t),this._firestoreClient=void 0,await t}}}function SC(r,t){const n=typeof r=="object"?r:b0(),s=typeof r=="string"?r:Qc,l=Am(n,"firestore").getImmediate({identifier:s});if(!l._initialized){const c=VS("firestore");c&&TC(l,...c)}return l}function ng(r){if(r._terminated)throw new rt(Q.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||wC(r),r._firestoreClient}function wC(r){var s,l,c;const t=r._freezeSettings(),n=(function(g,p,y,T){return new KR(g,p,y,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,IT(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)})(r._databaseId,((s=r._app)==null?void 0:s.options.appId)||"",r._persistenceKey,t);r._componentsProvider||(l=t.localCache)!=null&&l._offlineComponentProvider&&((c=t.localCache)!=null&&c._onlineComponentProvider)&&(r._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),r._firestoreClient=new yC(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(g){const p=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(p),_online:p}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(t){this._byteString=t}static fromBase64String(t){try{return new On(Ge.fromBase64String(t))}catch(n){throw new rt(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new On(Ge.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:On._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Fl(t,On._jsonSchema))return On.fromBase64String(t.bytes)}}On._jsonSchemaVersion="firestore/bytes/1.0",On._jsonSchema={type:Te("string",On._jsonSchemaVersion),bytes:Te("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new rt(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new He(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new rt(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new rt(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Nt(this._lat,t._lat)||Nt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:fi._jsonSchemaVersion}}static fromJSON(t){if(Fl(t,fi._jsonSchema))return new fi(t.latitude,t.longitude)}}fi._jsonSchemaVersion="firestore/geoPoint/1.0",fi._jsonSchema={type:Te("string",fi._jsonSchemaVersion),latitude:Te("number"),longitude:Te("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(s,l){if(s.length!==l.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==l[c])return!1;return!0})(this._values,t._values)}toJSON(){return{type:di._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Fl(t,di._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new di(t.vectorValues);throw new rt(Q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}di._jsonSchemaVersion="firestore/vectorValue/1.0",di._jsonSchema={type:Te("string",di._jsonSchemaVersion),vectorValues:Te("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC=/^__.*__$/;class RC{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new Gr(t,this.data,this.fieldMask,n,this.fieldTransforms):new Ql(t,this.data,n,this.fieldTransforms)}}class DT{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return new Gr(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function NT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pt(40011,{Ac:r})}}class ig{constructor(t,n,s,l,c,f){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new ig({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var l;const n=(l=this.path)==null?void 0:l.child(t),s=this.Vc({path:n,fc:!1});return s.gc(t),s}yc(t){var l;const n=(l=this.path)==null?void 0:l.child(t),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return eh(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(NT(this.Ac)&&bC.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class IC{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||_h(t)}Cc(t,n,s,l=!1){return new ig({Ac:t,methodName:n,Dc:s,path:He.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rg(r){const t=r._freezeSettings(),n=_h(r._databaseId);return new IC(r._databaseId,!!t.ignoreUndefinedProperties,n)}function CC(r,t,n,s,l,c={}){const f=r.Cc(c.merge||c.mergeFields?2:0,t,n,l);ag("Data must be an object, but it was:",f,s);const g=OT(s,f);let p,y;if(c.merge)p=new yn(f.fieldMask),y=f.fieldTransforms;else if(c.mergeFields){const T=[];for(const w of c.mergeFields){const R=_m(t,w,n);if(!f.contains(R))throw new rt(Q.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);MT(T,R)||T.push(R)}p=new yn(T),y=f.fieldTransforms.filter((w=>p.covers(w.field)))}else p=null,y=f.fieldTransforms;return new RC(new on(g),p,y)}class wh extends Sh{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof wh}}class sg extends Sh{_toFieldTransform(t){return new v2(t.path,new kl)}isEqual(t){return t instanceof sg}}function DC(r,t,n,s){const l=r.Cc(1,t,n);ag("Data must be an object, but it was:",l,s);const c=[],f=on.empty();Hr(s,((p,y)=>{const T=og(t,p,n);y=Ae(y);const w=l.yc(T);if(y instanceof wh)c.push(T);else{const R=$l(y,w);R!=null&&(c.push(T),f.set(T,R))}}));const g=new yn(c);return new DT(f,g,l.fieldTransforms)}function NC(r,t,n,s,l,c){const f=r.Cc(1,t,n),g=[_m(t,s,n)],p=[l];if(c.length%2!=0)throw new rt(Q.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<c.length;R+=2)g.push(_m(t,c[R])),p.push(c[R+1]);const y=[],T=on.empty();for(let R=g.length-1;R>=0;--R)if(!MT(y,g[R])){const q=g[R];let Y=p[R];Y=Ae(Y);const et=f.yc(q);if(Y instanceof wh)y.push(q);else{const $=$l(Y,et);$!=null&&(y.push(q),T.set(q,$))}}const w=new yn(y);return new DT(T,w,f.fieldTransforms)}function OC(r,t,n,s=!1){return $l(n,r.Cc(s?4:3,t))}function $l(r,t){if(VT(r=Ae(r)))return ag("Unsupported field value:",t,r),OT(r,t);if(r instanceof Sh)return(function(s,l){if(!NT(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(s,l){const c=[];let f=0;for(const g of s){let p=$l(g,l.wc(f));p==null&&(p={nullValue:"NULL_VALUE"}),c.push(p),f++}return{arrayValue:{values:c}}})(r,t)}return(function(s,l){if((s=Ae(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return p2(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=te.fromDate(s);return{timestampValue:$c(l.serializer,c)}}if(s instanceof te){const c=new te(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:$c(l.serializer,c)}}if(s instanceof fi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof On)return{bytesValue:XE(l.serializer,s._byteString)};if(s instanceof me){const c=l.databaseId,f=s.firestore._databaseId;if(!f.isEqual(c))throw l.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:qm(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof di)return(function(f,g){return{mapValue:{fields:{[wE]:{stringValue:bE},[Kc]:{arrayValue:{values:f.toArray().map((y=>{if(typeof y!="number")throw g.Sc("VectorValues must only contain numeric values.");return Lm(g.serializer,y)}))}}}}}})(s,l);throw l.Sc(`Unsupported field value: ${lh(s)}`)})(r,t)}function OT(r,t){const n={};return _E(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Hr(r,((s,l)=>{const c=$l(l,t.mc(s));c!=null&&(n[s]=c)})),{mapValue:{fields:n}}}function VT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof te||r instanceof fi||r instanceof On||r instanceof me||r instanceof Sh||r instanceof di)}function ag(r,t,n){if(!VT(n)||!pE(n)){const s=lh(n);throw s==="an object"?t.Sc(r+" a custom object"):t.Sc(r+" "+s)}}function _m(r,t,n){if((t=Ae(t))instanceof Ah)return t._internalPath;if(typeof t=="string")return og(r,t);throw eh("Field path arguments must be of type string or ",r,!1,void 0,n)}const VC=new RegExp("[~\\*/\\[\\]]");function og(r,t,n){if(t.search(VC)>=0)throw eh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Ah(...t.split("."))._internalPath}catch{throw eh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function eh(r,t,n,s,l){const c=s&&!s.isEmpty(),f=l!==void 0;let g=`Function ${t}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let p="";return(c||f)&&(p+=" (found",c&&(p+=` in field ${s}`),f&&(p+=` in document ${l}`),p+=")"),new rt(Q.INVALID_ARGUMENT,g+r+p)}function MT(r,t){return r.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(t,n,s,l,c){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new me(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new MC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(lg("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class MC extends xT{data(){return super.data()}}function lg(r,t){return typeof t=="string"?og(r,t):t instanceof Ah?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new rt(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ug{}class PT extends ug{}function PC(r,t,...n){let s=[];t instanceof ug&&s.push(t),s=s.concat(n),(function(c){const f=c.filter((p=>p instanceof hg)).length,g=c.filter((p=>p instanceof cg)).length;if(f>1||f>0&&g>0)throw new rt(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const l of s)r=l._apply(r);return r}class cg extends PT{constructor(t,n,s){super(),this._field=t,this._op=n,this._value=s,this.type="where"}static _create(t,n,s){return new cg(t,n,s)}_apply(t){const n=this._parse(t);return UT(t._query,n),new Bs(t.firestore,t.converter,am(t._query,n))}_parse(t){const n=rg(t.firestore);return(function(c,f,g,p,y,T,w){let R;if(y.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new rt(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){h0(w,T);const Y=[];for(const et of w)Y.push(c0(p,c,et));R={arrayValue:{values:Y}}}else R=c0(p,c,w)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||h0(w,T),R=OC(g,f,w,T==="in"||T==="not-in");return Ee.create(y,T,R)})(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class hg extends ug{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new hg(t,n)}_parse(t){const n=this._queryConstraints.map((s=>s._parse(t))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:qn.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:((function(l,c){let f=l;const g=c.getFlattenedFilters();for(const p of g)UT(f,p),f=am(f,p)})(t._query,n),new Bs(t.firestore,t.converter,am(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class fg extends PT{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new fg(t,n)}_apply(t){const n=(function(l,c,f){if(l.startAt!==null)throw new rt(Q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new rt(Q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ul(c,f)})(t._query,this._field,this._direction);return new Bs(t.firestore,t.converter,(function(l,c){const f=l.explicitOrderBy.concat([c]);return new so(l.path,l.collectionGroup,f,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)})(t._query,n))}}function UC(r,t="asc"){const n=t,s=lg("orderBy",r);return fg._create(s,n)}function c0(r,t,n){if(typeof(n=Ae(n))=="string"){if(n==="")throw new rt(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ME(t)&&n.indexOf("/")!==-1)throw new rt(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=t.path.child(Jt.fromString(n));if(!ut.isDocumentKey(s))throw new rt(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Rv(r,new ut(s))}if(n instanceof me)return Rv(r,n._key);throw new rt(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lh(n)}.`)}function h0(r,t){if(!Array.isArray(r)||r.length===0)throw new rt(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function UT(r,t){const n=(function(l,c){for(const f of l)for(const g of f.getFlattenedFilters())if(c.indexOf(g.op)>=0)return g.op;return null})(r.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(n!==null)throw n===t.op?new rt(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new rt(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class kC{convertValue(t,n="none"){switch(Br(t)){case 0:return null;case 1:return t.booleanValue;case 2:return de(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(zr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw pt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return Hr(t,((l,c)=>{s[l]=this.convertValue(c,n)})),s}convertVectorValue(t){var s,l,c;const n=(c=(l=(s=t.fields)==null?void 0:s[Kc].arrayValue)==null?void 0:l.values)==null?void 0:c.map((f=>de(f.doubleValue)));return new di(n)}convertGeoPoint(t){return new fi(de(t.latitude),de(t.longitude))}convertArray(t,n){return(t.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const s=hh(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Ml(t));default:return null}}convertTimestamp(t){const n=Lr(t);return new te(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=Jt.fromString(t);qt(eT(s),9688,{name:t});const l=new xl(s.get(1),s.get(3)),c=new ut(s.popFirst(5));return l.isEqual(n)||Fi(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LC(r,t,n){let s;return s=r?r.toFirestore(t):t,s}class Sl{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Ns extends xT{constructor(t,n,s,l,c,f){super(t,n,s,l,f),this._firestore=t,this._firestoreImpl=t,this.metadata=c}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Uc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(lg("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new rt(Q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Ns._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ns._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ns._jsonSchema={type:Te("string",Ns._jsonSchemaVersion),bundleSource:Te("string","DocumentSnapshot"),bundleName:Te("string"),bundle:Te("string")};class Uc extends Ns{data(t={}){return super.data(t)}}class qa{constructor(t,n,s,l){this._firestore=t,this._userDataWriter=n,this._snapshot=l,this.metadata=new Sl(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((s=>{t.call(n,new Uc(this._firestore,this._userDataWriter,s.key,s,new Sl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new rt(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let f=0;return l._snapshot.docChanges.map((g=>{const p=new Uc(l._firestore,l._userDataWriter,g.doc.key,g.doc,new Sl(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);return g.doc,{type:"added",doc:p,oldIndex:-1,newIndex:f++}}))}{let f=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((g=>c||g.type!==3)).map((g=>{const p=new Uc(l._firestore,l._userDataWriter,g.doc.key,g.doc,new Sl(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,T=-1;return g.type!==0&&(y=f.indexOf(g.doc.key),f=f.delete(g.doc.key)),g.type!==1&&(f=f.add(g.doc),T=f.indexOf(g.doc.key)),{type:zC(g.type),doc:p,oldIndex:y,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new rt(Q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=qa._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Vm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function zC(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pt(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(r){r=ui(r,me);const t=ui(r.firestore,Us);return EC(ng(t),r._key).then((n=>LT(t,r,n)))}qa._jsonSchemaVersion="firestore/querySnapshot/1.0",qa._jsonSchema={type:Te("string",qa._jsonSchemaVersion),bundleSource:Te("string","QuerySnapshot"),bundleName:Te("string"),bundle:Te("string")};class kT extends kC{constructor(t){super(),this.firestore=t}convertBytes(t){return new On(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new me(this.firestore,null,n)}}function jC(r,t,n,...s){r=ui(r,me);const l=ui(r.firestore,Us),c=rg(l);let f;return f=typeof(t=Ae(t))=="string"||t instanceof Ah?NC(c,"updateDoc",r._key,t,n,s):DC(c,"updateDoc",r._key,t),dg(l,[f.toMutation(r._key,Bn.exists(!0))])}function qC(r){return dg(ui(r.firestore,Us),[new zm(r._key,Bn.none())])}function HC(r,t){const n=ui(r.firestore,Us),s=th(r),l=LC(r.converter,t);return dg(n,[CC(rg(r.firestore),"addDoc",s._key,l,r.converter!==null,{}).toMutation(s._key,Bn.exists(!1))]).then((()=>s))}function GC(r,...t){var p,y,T;r=Ae(r);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof t[s]!="object"||u0(t[s])||(n=t[s++]);const l={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(u0(t[s])){const w=t[s];t[s]=(p=w.next)==null?void 0:p.bind(w),t[s+1]=(y=w.error)==null?void 0:y.bind(w),t[s+2]=(T=w.complete)==null?void 0:T.bind(w)}let c,f,g;if(r instanceof me)f=ui(r.firestore,Us),g=fh(r._key.path),c={next:w=>{t[s]&&t[s](LT(f,r,w))},error:t[s+1],complete:t[s+2]};else{const w=ui(r,Bs);f=ui(w.firestore,Us),g=w._query;const R=new kT(f);c={next:q=>{t[s]&&t[s](new qa(f,R,w,q))},error:t[s+1],complete:t[s+2]},xC(r._query)}return(function(R,q,Y,et){const $=new bT(et),_t=new pT(q,$,Y);return R.asyncQueue.enqueueAndForget((async()=>mT(await ym(R),_t))),()=>{$.Nu(),R.asyncQueue.enqueueAndForget((async()=>gT(await ym(R),_t)))}})(ng(f),g,l,c)}function dg(r,t){return(function(s,l){const c=new Pr;return s.asyncQueue.enqueueAndForget((async()=>lC(await vC(s),l,c))),c.promise})(ng(r),t)}function LT(r,t,n){const s=n.docs.get(t._key),l=new kT(r);return new Ns(r,l,t._key,s,new Sl(n.hasPendingWrites,n.fromCache),t.converter)}function FC(){return new sg("serverTimestamp")}(function(t,n=!0){(function(l){no=l})(Ja),Ha(new Vs("firestore",((s,{instanceIdentifier:l,options:c})=>{const f=s.getProvider("app").getImmediate(),g=new Us(new CR(s.getProvider("auth-internal")),new OR(f,s.getProvider("app-check-internal")),(function(y,T){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new rt(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xl(y.options.projectId,T)})(f,l),f);return c={useFetchStreams:n,...c},g._setSettings(c),g}),"PUBLIC").setMultipleInstances(!0)),Vr(dv,mv,t),Vr(dv,mv,"esm2020")})();const QC={apiKey:"YOUR_API_KEY",authDomain:"YOUR_AUTH_DOMAIN",projectId:"YOUR_PROJECT_ID",storageBucket:"YOUR_STORAGE_BUCKET",messagingSenderId:"YOUR_MESSAGING_SENDER_ID",appId:"YOUR_APP_ID"},zT=w0(QC),Gd=wR(zT),nh=SC(zT),f0=AC(nh,"codewords"),KC=()=>{const[r,t]=ue.useState([]),[n,s]=ue.useState(!1);return ue.useEffect(()=>{const g=PC(f0,UC("createdAt","desc")),p=GC(g,y=>{const T=y.docs.map(w=>({...w.data(),id:w.id}));t(T),s(!0)},y=>{console.error("Error fetching codewords from Firestore:",y),alert("Не удалось загрузить данные. Проверьте настройки Firebase и подключение к сети."),s(!0)});return()=>p()},[]),{codewords:r,addCodeword:async(g,p,y)=>{try{await HC(f0,{word:g,isUsed:!1,usedMessage:p||"Этот код уже был использован.",introText:y||"ВАШЕ КОДОВОЕ СЛОВО:",createdAt:FC()})}catch(T){console.error("Error adding codeword to Firestore: ",T),alert("Ошибка при добавлении кода.")}},updateCodeword:async(g,p)=>{const y=th(nh,"codewords",g);try{await jC(y,p)}catch(T){console.error("Error updating codeword in Firestore: ",T),alert("Ошибка при обновлении кода.")}},deleteCodeword:async g=>{if(window.confirm("Вы уверены, что хотите удалить этот код? Это действие необратимо.")){const p=th(nh,"codewords",g);try{await qC(p)}catch(y){console.error("Error deleting codeword from Firestore: ",y),alert("Ошибка при удалении кода.")}}},isLoaded:n}},YC=()=>Z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:Z.jsx("path",{fillRule:"evenodd",d:"M10 2a4 4 0 00-4 4v4H4a2 2 0 00-2 2v6a2 2 0 002 2h12a2 2 0 002-2v-6a2 2 0 00-2-2h-2V6a4 4 0 00-4-4zm-2 6V6a2 2 0 114 0v4H8z",clipRule:"evenodd"})}),XC=()=>Z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:Z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),$C=()=>Z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:Z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),ZC=()=>Z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:Z.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})}),WC=()=>Z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:Z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),JC=()=>Z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:Z.jsx("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})}),BT=ue.createContext(null),tD=({children:r})=>{const[t,n]=ue.useState(null),[s,l]=ue.useState(!0);ue.useEffect(()=>fb(Gd,T=>{n(T),l(!1)}),[]);const p={currentUser:t,loading:s,login:(y,T)=>ob(Gd,y,T),logout:()=>db(Gd),changePassword:y=>t?!y||y.length<6?Promise.reject(new Error("Пароль должен содержать не менее 6 символов.")):lb(t,y):Promise.reject(new Error("Пользователь не авторизован."))};return Z.jsx(BT.Provider,{value:p,children:!s&&r})},mg=()=>{const r=ue.useContext(BT);if(!r)throw new Error("useAuth must be used within an AuthProvider");return r},Fd=()=>Z.jsx("header",{className:"bg-black/50 border-b-2 border-amber-500/50 p-4",children:Z.jsxs("div",{className:"container mx-auto text-center",children:[Z.jsx("h1",{className:"font-display text-4xl md:text-5xl text-amber-400 tracking-widest",children:"B_KOMHATE"}),Z.jsx("p",{className:"text-stone-400 text-sm tracking-wider",children:"ГЕНЕРАТОР КОДОВЫХ СЛОВ"})]})}),eD=()=>{const[r,t]=ue.useState(""),[n,s]=ue.useState(""),[l,c]=ue.useState(""),{login:f}=mg(),g=async p=>{p.preventDefault(),c("");try{await f(r,n)}catch(y){c("Ошибка входа. Проверьте почту и пароль."),console.error(y)}};return Z.jsx("div",{className:"flex flex-col items-center justify-center min-h-[60vh]",children:Z.jsxs("div",{className:"w-full max-w-sm p-8 bg-stone-800/50 border border-stone-700 rounded-md",children:[Z.jsx("h2",{className:"font-display text-3xl text-center text-stone-200 mb-6",children:"ВХОД В ПАНЕЛЬ"}),Z.jsxs("form",{onSubmit:g,className:"space-y-4",children:[Z.jsx("input",{type:"email",value:r,onChange:p=>t(p.target.value),placeholder:"Email",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all","aria-label":"Email"}),Z.jsx("input",{type:"password",value:n,onChange:p=>s(p.target.value),placeholder:"Пароль",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all","aria-label":"Password"}),Z.jsxs("button",{type:"submit",className:"w-full flex items-center justify-center font-display text-xl bg-amber-500 text-stone-900 py-2 rounded-md hover:bg-amber-400 transition-colors",children:[Z.jsx(YC,{}),"ВОЙТИ"]}),l&&Z.jsx("p",{className:"text-red-500 text-center mt-4",children:l})]})]})})},nD=({codeword:r,onUpdate:t,onDelete:n})=>{const[s,l]=ue.useState(r.usedMessage),[c,f]=ue.useState(r.introText||"ВАШЕ КОДОВОЕ СЛОВО:"),g=`${window.location.origin}${window.location.pathname}?c=${r.id}`,p=`https://api.qrserver.com/v1/create-qr-code/?size=256x256&data=${encodeURIComponent(g)}`,y=async()=>{var T;try{const w=await fetch(p);if(!w.ok)throw new Error("QR code fetch failed");const R=await w.blob(),q=window.URL.createObjectURL(R),Y=document.createElement("a");Y.href=q;const et=r.word.replace(/[^a-z0-9а-яё]/gi,"_").toLowerCase();Y.setAttribute("download",`qr_${et}.png`),document.body.appendChild(Y),Y.click(),(T=Y.parentNode)==null||T.removeChild(Y),window.URL.revokeObjectURL(q)}catch(w){console.error("Failed to download QR code",w),alert("Не удалось скачать QR-код.")}};return Z.jsxs("div",{className:"bg-stone-800/70 border border-stone-700 p-4 rounded-md grid grid-cols-1 md:grid-cols-3 gap-4 items-start",children:[Z.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2",children:[Z.jsx("img",{src:p,alt:"QR Code",className:"w-36 h-36 border-2 border-stone-600 rounded-md"}),Z.jsxs("button",{onClick:y,className:"flex items-center justify-center gap-2 w-full bg-stone-600 hover:bg-stone-500 text-stone-200 px-3 py-2 rounded-md text-sm transition-colors",children:[Z.jsx(WC,{}),"Скачать QR"]}),Z.jsx("a",{href:g,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-amber-400 hover:text-amber-300 break-all text-center pt-1",children:g})]}),Z.jsxs("div",{className:"md:col-span-2 space-y-3",children:[Z.jsxs("div",{children:[Z.jsx("label",{htmlFor:`introText_${r.id}`,className:"text-sm font-bold text-stone-400 block",children:"Вступительный текст:"}),Z.jsx("div",{className:"flex gap-2",children:Z.jsx("input",{id:`introText_${r.id}`,type:"text",value:c,onChange:T=>f(T.target.value),onBlur:()=>t(r.id,{introText:c}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-3 py-1 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"})})]}),Z.jsxs("div",{children:[Z.jsx("label",{className:"text-sm font-bold text-stone-400 block",children:"Кодовое слово:"}),Z.jsx("p",{className:"text-lg bg-stone-900 p-2 rounded-md font-bold text-stone-100 break-words",children:r.word})]}),Z.jsxs("div",{children:[Z.jsx("label",{htmlFor:`usedMsg_${r.id}`,className:"text-sm font-bold text-stone-400 block",children:"Сообщение (если использовано):"}),Z.jsx("div",{className:"flex gap-2",children:Z.jsx("input",{id:`usedMsg_${r.id}`,type:"text",value:s,onChange:T=>l(T.target.value),onBlur:()=>t(r.id,{usedMessage:s}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-3 py-1 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"})})]}),Z.jsxs("div",{className:"flex items-center justify-between pt-2",children:[Z.jsxs("label",{htmlFor:`toggle_${r.id}`,className:"flex items-center cursor-pointer",children:[Z.jsxs("div",{className:"relative",children:[Z.jsx("input",{type:"checkbox",id:`toggle_${r.id}`,className:"sr-only",checked:r.isUsed,onChange:()=>t(r.id,{isUsed:!r.isUsed})}),Z.jsx("div",{className:`block ${r.isUsed?"bg-amber-500":"bg-stone-600"} w-14 h-8 rounded-full transition-colors`}),Z.jsx("div",{className:`dot absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition-transform ${r.isUsed?"transform translate-x-6":""}`})]}),Z.jsx("div",{className:"ml-3 text-stone-300 font-semibold",children:r.isUsed?"ИСПОЛЬЗОВАНО":"АКТИВНО"})]}),Z.jsxs("button",{onClick:()=>n(r.id),className:"flex items-center gap-1 bg-red-800 hover:bg-red-700 text-stone-100 px-3 py-2 rounded-md text-sm transition-colors",children:[Z.jsx(ZC,{})," Удалить"]})]})]})]})},iD=()=>{const{logout:r,changePassword:t}=mg(),{codewords:n,addCodeword:s,updateCodeword:l,deleteCodeword:c}=KC(),[f,g]=ue.useState(""),[p,y]=ue.useState("Этот код уже был использован."),[T,w]=ue.useState("ВАШЕ КОДОВОЕ СЛОВО:"),[R,q]=ue.useState(""),Y=$=>{$.preventDefault(),f.trim()&&(s(f.trim(),p.trim(),T.trim()),g(""),w("ВАШЕ КОДОВОЕ СЛОВО:"),y("Этот код уже был использован."))},et=async $=>{if($.preventDefault(),window.confirm("Вы уверены, что хотите изменить пароль?"))try{await t(R),alert("Пароль успешно изменен!"),q("")}catch(_t){alert(`Ошибка изменения пароля: ${_t.message}`)}};return Z.jsxs("div",{className:"container mx-auto py-8 px-4",children:[Z.jsxs("div",{className:"flex justify-between items-center mb-6",children:[Z.jsx("h2",{className:"font-display text-4xl text-stone-200",children:"Панель управления"}),Z.jsx("button",{onClick:r,className:"bg-stone-700 hover:bg-stone-600 text-stone-200 font-semibold py-2 px-4 rounded-md transition-colors",children:"Выйти"})]}),Z.jsxs("div",{className:"bg-stone-800/50 border border-stone-700 p-6 rounded-md mb-8",children:[Z.jsx("h3",{className:"font-display text-2xl text-amber-400 mb-4",children:"Изменить пароль"}),Z.jsxs("form",{onSubmit:et,className:"space-y-4",children:[Z.jsx("input",{type:"password",value:R,onChange:$=>q($.target.value),placeholder:"Новый пароль (минимум 6 символов)",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),Z.jsxs("button",{type:"submit",className:"w-full flex items-center justify-center font-display text-xl bg-amber-500 text-stone-900 py-2 rounded-md hover:bg-amber-400 transition-colors",children:[Z.jsx(JC,{})," Сохранить пароль"]})]})]}),Z.jsxs("div",{className:"bg-stone-800/50 border border-stone-700 p-6 rounded-md mb-8",children:[Z.jsx("h3",{className:"font-display text-2xl text-amber-400 mb-4",children:"Добавить новый код"}),Z.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[Z.jsx("input",{type:"text",value:T,onChange:$=>w($.target.value),placeholder:"Вступительный текст (обращение)",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),Z.jsx("input",{type:"text",value:f,onChange:$=>g($.target.value),placeholder:"Новое кодовое слово",required:!0,className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),Z.jsx("input",{type:"text",value:p,onChange:$=>y($.target.value),placeholder:"Сообщение если код использован",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),Z.jsx("button",{type:"submit",className:"w-full font-display text-xl bg-amber-500 text-stone-900 py-2 rounded-md hover:bg-amber-400 transition-colors",children:"Создать QR-код"})]})]}),Z.jsx("div",{className:"space-y-4",children:n.map($=>Z.jsx(nD,{codeword:$,onUpdate:l,onDelete:c},$.id))})]})},rD=()=>{const{currentUser:r}=mg();return r?Z.jsx(iD,{}):Z.jsx(eD,{})},sD=({codeId:r})=>{const[t,n]=ue.useState(null),[s,l]=ue.useState("loading"),[c,f]=ue.useState(!1);ue.useEffect(()=>{r&&(async()=>{try{const y=th(nh,"codewords",r),T=await BC(y);T.exists()?(n({id:T.id,...T.data()}),l("found")):l("not-found")}catch(y){console.error("Failed to fetch codeword from Firestore:",y),l("error")}})()},[r]);const g=()=>{t&&!t.isUsed&&(navigator.clipboard.writeText(t.word),f(!0),setTimeout(()=>f(!1),2e3))};return s==="loading"?Z.jsx("div",{className:"flex items-center justify-center min-h-[80vh]",children:Z.jsx("p",{className:"font-display text-2xl text-stone-400 animate-pulse",children:"ПОИСК КОДА..."})}):s==="not-found"||s==="error"?Z.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] text-center p-4",children:[Z.jsx("h2",{className:"font-display text-6xl text-red-500",children:"404"}),Z.jsx("p",{className:"text-stone-300 text-xl mt-2",children:"Код не найден."}),Z.jsx("p",{className:"text-stone-500",children:"Возможно, ссылка неверна или код был удален."})]}):t&&t.isUsed?Z.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] text-center p-4",children:[Z.jsx("h2",{className:"font-display text-5xl text-amber-500",children:"КОД ИСПОЛЬЗОВАН"}),Z.jsx("p",{className:"text-stone-300 text-xl mt-4 max-w-lg",children:t.usedMessage})]}):Z.jsx("div",{className:"flex flex-col items-center justify-center min-h-[80vh] text-center p-4",children:Z.jsxs("div",{className:"w-full max-w-2xl bg-stone-800/50 border-2 border-stone-700 p-8 rounded-lg",children:[Z.jsx("p",{className:"text-stone-400 font-display text-2xl",children:(t==null?void 0:t.introText)||"ВАШЕ КОДОВОЕ СЛОВО:"}),Z.jsx("p",{className:"text-amber-400 font-bold text-3xl md:text-5xl my-4 break-words select-all",children:t==null?void 0:t.word}),Z.jsxs("button",{onClick:g,className:"w-full flex items-center justify-center gap-3 mt-6 bg-stone-700 hover:bg-amber-500 hover:text-stone-900 text-stone-200 font-display text-2xl py-3 rounded-md transition-all duration-300",children:[c?Z.jsx($C,{}):Z.jsx(XC,{}),c?"СКОПИРОВАНО!":"СКОПИРОВАТЬ КОД"]})]})})},aD=()=>{const t=new URLSearchParams(window.location.search).get("c");return t?Z.jsxs("div",{className:"min-h-screen bg-stone-900 bg-[url('data:image/svg+xml,%3Csvg%20width%3D%2240%22%20height%3D%2240%22%20viewBox%3D%220%200%2040%2040%22%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%3E%3Cg%20fill%3D%22%23292524%22%20fill-opacity%3D%220.4%22%20fill-rule%3D%22evenodd%22%3E%3Cpath%20d%3D%22M0%2040L40%200H20L0%2020M40%2040V20L20%2040%22/%3E%3C/g%3E%3C/svg%3E')]",children:[Z.jsx(Fd,{}),Z.jsx("main",{children:Z.jsx(sD,{codeId:t})})]}):(window.location.pathname.endsWith("/")&&!window.location.hash&&window.history.replaceState({},document.title,window.location.pathname+"#/admin"),window.location.hash!=="#/admin"?Z.jsxs("div",{className:"min-h-screen bg-stone-900 bg-[url('data:image/svg+xml,%3Csvg%20width%3D%2240%22%20height%3D%2240%22%20viewBox%3D%220%200%2040%2040%22%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%3E%3Cg%20fill%3D%22%23292524%22%20fill-opacity%3D%220.4%22%20fill-rule%3D%22evenodd%22%3E%3Cpath%20d%3D%22M0%2040L40%200H20L0%2020M40%2040V20L20%2040%22/%3E%3C/g%3E%3C/svg%3E')]",children:[Z.jsx(Fd,{}),Z.jsx("main",{children:Z.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] text-center p-4",children:[Z.jsx("h2",{className:"font-display text-6xl text-red-500",children:"404"}),Z.jsx("p",{className:"text-stone-300 text-xl mt-2",children:"Страница не найдена."}),Z.jsx("a",{href:"/#/admin",className:"text-amber-400 hover:text-amber-300 mt-4",children:"Перейти в панель управления"})]})})]}):Z.jsx(tD,{children:Z.jsxs("div",{className:"min-h-screen bg-stone-900 bg-[url('data:image/svg+xml,%3Csvg%20width%3D%2240%22%20height%3D%2240%22%20viewBox%3D%220%200%2040%2040%22%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%3E%3Cg%20fill%3D%22%23292524%22%20fill-opacity%3D%220.4%22%20fill-rule%3D%22evenodd%22%3E%3Cpath%20d%3D%22M0%2040L40%200H20L0%2020M40%2040V20L20%2040%22/%3E%3C/g%3E%3C/svg%3E')]",children:[Z.jsx(Fd,{}),Z.jsx("main",{children:Z.jsx(rD,{})})]})}))},jT=document.getElementById("root");if(!jT)throw new Error("Could not find root element to mount to");const oD=SS.createRoot(jT);oD.render(Z.jsx(gS.StrictMode,{children:Z.jsx(aD,{})}));
