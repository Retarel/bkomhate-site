var GG=Object.defineProperty;var KG=(t,e,n)=>e in t?GG(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ew=(t,e,n)=>KG(t,typeof e!="symbol"?e+"":e,n);function jG(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function ss(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ww={exports:{}},Qh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _D;function WG(){if(_D)return Qh;_D=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,o){var s=null;if(o!==void 0&&(s=""+o),i.key!==void 0&&(s=""+i.key),"key"in i){o={};for(var u in i)u!=="key"&&(o[u]=i[u])}else o=i;return i=o.ref,{$$typeof:t,type:r,key:s,ref:i!==void 0?i:null,props:o}}return Qh.Fragment=e,Qh.jsx=n,Qh.jsxs=n,Qh}var TD;function YG(){return TD||(TD=1,ww.exports=WG()),ww.exports}var O=YG(),bw={exports:{}},Xe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ED;function JG(){if(ED)return Xe;ED=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),s=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),y=Symbol.iterator;function v(j){return j===null||typeof j!="object"?null:(j=y&&j[y]||j["@@iterator"],typeof j=="function"?j:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,S={};function A(j,ce,le){this.props=j,this.context=ce,this.refs=S,this.updater=le||E}A.prototype.isReactComponent={},A.prototype.setState=function(j,ce){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,ce,"setState")},A.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function R(){}R.prototype=A.prototype;function D(j,ce,le){this.props=j,this.context=ce,this.refs=S,this.updater=le||E}var M=D.prototype=new R;M.constructor=D,b(M,A.prototype),M.isPureReactComponent=!0;var U=Array.isArray,q={H:null,A:null,T:null,S:null,V:null},z=Object.prototype.hasOwnProperty;function k(j,ce,le,ve,Oe,Fe){return le=Fe.ref,{$$typeof:t,type:j,key:ce,ref:le!==void 0?le:null,props:Fe}}function V(j,ce){return k(j.type,ce,void 0,void 0,void 0,j.props)}function N(j){return typeof j=="object"&&j!==null&&j.$$typeof===t}function $(j){var ce={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(le){return ce[le]})}var F=/\/+/g;function G(j,ce){return typeof j=="object"&&j!==null&&j.key!=null?$(""+j.key):ce.toString(36)}function H(){}function Ae(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(H,H):(j.status="pending",j.then(function(ce){j.status==="pending"&&(j.status="fulfilled",j.value=ce)},function(ce){j.status==="pending"&&(j.status="rejected",j.reason=ce)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function Se(j,ce,le,ve,Oe){var Fe=typeof j;(Fe==="undefined"||Fe==="boolean")&&(j=null);var Be=!1;if(j===null)Be=!0;else switch(Fe){case"bigint":case"string":case"number":Be=!0;break;case"object":switch(j.$$typeof){case t:case e:Be=!0;break;case h:return Be=j._init,Se(Be(j._payload),ce,le,ve,Oe)}}if(Be)return Oe=Oe(j),Be=ve===""?"."+G(j,0):ve,U(Oe)?(le="",Be!=null&&(le=Be.replace(F,"$&/")+"/"),Se(Oe,ce,le,"",function(we){return we})):Oe!=null&&(N(Oe)&&(Oe=V(Oe,le+(Oe.key==null||j&&j.key===Oe.key?"":(""+Oe.key).replace(F,"$&/")+"/")+Be)),ce.push(Oe)),1;Be=0;var an=ve===""?".":ve+":";if(U(j))for(var ft=0;ft<j.length;ft++)ve=j[ft],Fe=an+G(ve,ft),Be+=Se(ve,ce,le,Fe,Oe);else if(ft=v(j),typeof ft=="function")for(j=ft.call(j),ft=0;!(ve=j.next()).done;)ve=ve.value,Fe=an+G(ve,ft++),Be+=Se(ve,ce,le,Fe,Oe);else if(Fe==="object"){if(typeof j.then=="function")return Se(Ae(j),ce,le,ve,Oe);throw ce=String(j),Error("Objects are not valid as a React child (found: "+(ce==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":ce)+"). If you meant to render a collection of children, use an array instead.")}return Be}function ee(j,ce,le){if(j==null)return j;var ve=[],Oe=0;return Se(j,ve,"","",function(Fe){return ce.call(le,Fe,Oe++)}),ve}function he(j){if(j._status===-1){var ce=j._result;ce=ce(),ce.then(function(le){(j._status===0||j._status===-1)&&(j._status=1,j._result=le)},function(le){(j._status===0||j._status===-1)&&(j._status=2,j._result=le)}),j._status===-1&&(j._status=0,j._result=ce)}if(j._status===1)return j._result.default;throw j._result}var Te=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ce=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(ce))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)};function Ve(){}return Xe.Children={map:ee,forEach:function(j,ce,le){ee(j,function(){ce.apply(this,arguments)},le)},count:function(j){var ce=0;return ee(j,function(){ce++}),ce},toArray:function(j){return ee(j,function(ce){return ce})||[]},only:function(j){if(!N(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},Xe.Component=A,Xe.Fragment=n,Xe.Profiler=i,Xe.PureComponent=D,Xe.StrictMode=r,Xe.Suspense=c,Xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=q,Xe.__COMPILER_RUNTIME={__proto__:null,c:function(j){return q.H.useMemoCache(j)}},Xe.cache=function(j){return function(){return j.apply(null,arguments)}},Xe.cloneElement=function(j,ce,le){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var ve=b({},j.props),Oe=j.key,Fe=void 0;if(ce!=null)for(Be in ce.ref!==void 0&&(Fe=void 0),ce.key!==void 0&&(Oe=""+ce.key),ce)!z.call(ce,Be)||Be==="key"||Be==="__self"||Be==="__source"||Be==="ref"&&ce.ref===void 0||(ve[Be]=ce[Be]);var Be=arguments.length-2;if(Be===1)ve.children=le;else if(1<Be){for(var an=Array(Be),ft=0;ft<Be;ft++)an[ft]=arguments[ft+2];ve.children=an}return k(j.type,Oe,void 0,void 0,Fe,ve)},Xe.createContext=function(j){return j={$$typeof:s,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:o,_context:j},j},Xe.createElement=function(j,ce,le){var ve,Oe={},Fe=null;if(ce!=null)for(ve in ce.key!==void 0&&(Fe=""+ce.key),ce)z.call(ce,ve)&&ve!=="key"&&ve!=="__self"&&ve!=="__source"&&(Oe[ve]=ce[ve]);var Be=arguments.length-2;if(Be===1)Oe.children=le;else if(1<Be){for(var an=Array(Be),ft=0;ft<Be;ft++)an[ft]=arguments[ft+2];Oe.children=an}if(j&&j.defaultProps)for(ve in Be=j.defaultProps,Be)Oe[ve]===void 0&&(Oe[ve]=Be[ve]);return k(j,Fe,void 0,void 0,null,Oe)},Xe.createRef=function(){return{current:null}},Xe.forwardRef=function(j){return{$$typeof:u,render:j}},Xe.isValidElement=N,Xe.lazy=function(j){return{$$typeof:h,_payload:{_status:-1,_result:j},_init:he}},Xe.memo=function(j,ce){return{$$typeof:f,type:j,compare:ce===void 0?null:ce}},Xe.startTransition=function(j){var ce=q.T,le={};q.T=le;try{var ve=j(),Oe=q.S;Oe!==null&&Oe(le,ve),typeof ve=="object"&&ve!==null&&typeof ve.then=="function"&&ve.then(Ve,Te)}catch(Fe){Te(Fe)}finally{q.T=ce}},Xe.unstable_useCacheRefresh=function(){return q.H.useCacheRefresh()},Xe.use=function(j){return q.H.use(j)},Xe.useActionState=function(j,ce,le){return q.H.useActionState(j,ce,le)},Xe.useCallback=function(j,ce){return q.H.useCallback(j,ce)},Xe.useContext=function(j){return q.H.useContext(j)},Xe.useDebugValue=function(){},Xe.useDeferredValue=function(j,ce){return q.H.useDeferredValue(j,ce)},Xe.useEffect=function(j,ce,le){var ve=q.H;if(typeof le=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ve.useEffect(j,ce)},Xe.useId=function(){return q.H.useId()},Xe.useImperativeHandle=function(j,ce,le){return q.H.useImperativeHandle(j,ce,le)},Xe.useInsertionEffect=function(j,ce){return q.H.useInsertionEffect(j,ce)},Xe.useLayoutEffect=function(j,ce){return q.H.useLayoutEffect(j,ce)},Xe.useMemo=function(j,ce){return q.H.useMemo(j,ce)},Xe.useOptimistic=function(j,ce){return q.H.useOptimistic(j,ce)},Xe.useReducer=function(j,ce,le){return q.H.useReducer(j,ce,le)},Xe.useRef=function(j){return q.H.useRef(j)},Xe.useState=function(j){return q.H.useState(j)},Xe.useSyncExternalStore=function(j,ce,le){return q.H.useSyncExternalStore(j,ce,le)},Xe.useTransition=function(){return q.H.useTransition()},Xe.version="19.1.1",Xe}var wD;function _d(){return wD||(wD=1,bw.exports=JG()),bw.exports}var x=_d();const dF=ss(x),QG=jG({__proto__:null,default:dF},[x]);var Sw={exports:{}},Xh={},Aw={exports:{}},Cw={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bD;function XG(){return bD||(bD=1,(function(t){function e(ee,he){var Te=ee.length;ee.push(he);e:for(;0<Te;){var Ve=Te-1>>>1,j=ee[Ve];if(0<i(j,he))ee[Ve]=he,ee[Te]=j,Te=Ve;else break e}}function n(ee){return ee.length===0?null:ee[0]}function r(ee){if(ee.length===0)return null;var he=ee[0],Te=ee.pop();if(Te!==he){ee[0]=Te;e:for(var Ve=0,j=ee.length,ce=j>>>1;Ve<ce;){var le=2*(Ve+1)-1,ve=ee[le],Oe=le+1,Fe=ee[Oe];if(0>i(ve,Te))Oe<j&&0>i(Fe,ve)?(ee[Ve]=Fe,ee[Oe]=Te,Ve=Oe):(ee[Ve]=ve,ee[le]=Te,Ve=le);else if(Oe<j&&0>i(Fe,Te))ee[Ve]=Fe,ee[Oe]=Te,Ve=Oe;else break e}}return he}function i(ee,he){var Te=ee.sortIndex-he.sortIndex;return Te!==0?Te:ee.id-he.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],f=[],h=1,y=null,v=3,E=!1,b=!1,S=!1,A=!1,R=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function U(ee){for(var he=n(f);he!==null;){if(he.callback===null)r(f);else if(he.startTime<=ee)r(f),he.sortIndex=he.expirationTime,e(c,he);else break;he=n(f)}}function q(ee){if(S=!1,U(ee),!b)if(n(c)!==null)b=!0,z||(z=!0,G());else{var he=n(f);he!==null&&Se(q,he.startTime-ee)}}var z=!1,k=-1,V=5,N=-1;function $(){return A?!0:!(t.unstable_now()-N<V)}function F(){if(A=!1,z){var ee=t.unstable_now();N=ee;var he=!0;try{e:{b=!1,S&&(S=!1,D(k),k=-1),E=!0;var Te=v;try{t:{for(U(ee),y=n(c);y!==null&&!(y.expirationTime>ee&&$());){var Ve=y.callback;if(typeof Ve=="function"){y.callback=null,v=y.priorityLevel;var j=Ve(y.expirationTime<=ee);if(ee=t.unstable_now(),typeof j=="function"){y.callback=j,U(ee),he=!0;break t}y===n(c)&&r(c),U(ee)}else r(c);y=n(c)}if(y!==null)he=!0;else{var ce=n(f);ce!==null&&Se(q,ce.startTime-ee),he=!1}}break e}finally{y=null,v=Te,E=!1}he=void 0}}finally{he?G():z=!1}}}var G;if(typeof M=="function")G=function(){M(F)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,Ae=H.port2;H.port1.onmessage=F,G=function(){Ae.postMessage(null)}}else G=function(){R(F,0)};function Se(ee,he){k=R(function(){ee(t.unstable_now())},he)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ee){ee.callback=null},t.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<ee?Math.floor(1e3/ee):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(ee){switch(v){case 1:case 2:case 3:var he=3;break;default:he=v}var Te=v;v=he;try{return ee()}finally{v=Te}},t.unstable_requestPaint=function(){A=!0},t.unstable_runWithPriority=function(ee,he){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var Te=v;v=ee;try{return he()}finally{v=Te}},t.unstable_scheduleCallback=function(ee,he,Te){var Ve=t.unstable_now();switch(typeof Te=="object"&&Te!==null?(Te=Te.delay,Te=typeof Te=="number"&&0<Te?Ve+Te:Ve):Te=Ve,ee){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=Te+j,ee={id:h++,callback:he,priorityLevel:ee,startTime:Te,expirationTime:j,sortIndex:-1},Te>Ve?(ee.sortIndex=Te,e(f,ee),n(c)===null&&ee===n(f)&&(S?(D(k),k=-1):S=!0,Se(q,Te-Ve))):(ee.sortIndex=j,e(c,ee),b||E||(b=!0,z||(z=!0,G()))),ee},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(ee){var he=v;return function(){var Te=v;v=he;try{return ee.apply(this,arguments)}finally{v=Te}}}})(Cw)),Cw}var SD;function ZG(){return SD||(SD=1,Aw.exports=XG()),Aw.exports}var Iw={exports:{}},Tr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AD;function e8(){if(AD)return Tr;AD=1;var t=_d();function e(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)f+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(c,f,h){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:y==null?null:""+y,children:c,containerInfo:f,implementation:h}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(c,f){if(c==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Tr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Tr.createPortal=function(c,f){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(c,f,null,h)},Tr.flushSync=function(c){var f=s.T,h=r.p;try{if(s.T=null,r.p=2,c)return c()}finally{s.T=f,r.p=h,r.d.f()}},Tr.preconnect=function(c,f){typeof c=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(c,f))},Tr.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},Tr.preinit=function(c,f){if(typeof c=="string"&&f&&typeof f.as=="string"){var h=f.as,y=u(h,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,E=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;h==="style"?r.d.S(c,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:E}):h==="script"&&r.d.X(c,{crossOrigin:y,integrity:v,fetchPriority:E,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Tr.preinitModule=function(c,f){if(typeof c=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var h=u(f.as,f.crossOrigin);r.d.M(c,{crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(c)},Tr.preload=function(c,f){if(typeof c=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var h=f.as,y=u(h,f.crossOrigin);r.d.L(c,h,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Tr.preloadModule=function(c,f){if(typeof c=="string")if(f){var h=u(f.as,f.crossOrigin);r.d.m(c,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(c)},Tr.requestFormReset=function(c){r.d.r(c)},Tr.unstable_batchedUpdates=function(c,f){return c(f)},Tr.useFormState=function(c,f,h){return s.H.useFormState(c,f,h)},Tr.useFormStatus=function(){return s.H.useHostTransitionStatus()},Tr.version="19.1.1",Tr}var CD;function hF(){if(CD)return Iw.exports;CD=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Iw.exports=e8(),Iw.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ID;function t8(){if(ID)return Xh;ID=1;var t=ZG(),e=_d(),n=hF();function r(a){var l="https://react.dev/errors/"+a;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function o(a){var l=a,d=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(d=l.return),a=l.return;while(a)}return l.tag===3?d:null}function s(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function u(a){if(o(a)!==a)throw Error(r(188))}function c(a){var l=a.alternate;if(!l){if(l=o(a),l===null)throw Error(r(188));return l!==a?null:a}for(var d=a,g=l;;){var T=d.return;if(T===null)break;var w=T.alternate;if(w===null){if(g=T.return,g!==null){d=g;continue}break}if(T.child===w.child){for(w=T.child;w;){if(w===d)return u(T),a;if(w===g)return u(T),l;w=w.sibling}throw Error(r(188))}if(d.return!==g.return)d=T,g=w;else{for(var P=!1,L=T.child;L;){if(L===d){P=!0,d=T,g=w;break}if(L===g){P=!0,g=T,d=w;break}L=L.sibling}if(!P){for(L=w.child;L;){if(L===d){P=!0,d=w,g=T;break}if(L===g){P=!0,g=w,d=T;break}L=L.sibling}if(!P)throw Error(r(189))}}if(d.alternate!==g)throw Error(r(190))}if(d.tag!==3)throw Error(r(188));return d.stateNode.current===d?a:l}function f(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a;for(a=a.child;a!==null;){if(l=f(a),l!==null)return l;a=a.sibling}return null}var h=Object.assign,y=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),D=Symbol.for("react.consumer"),M=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function G(a){return a===null||typeof a!="object"?null:(a=F&&a[F]||a["@@iterator"],typeof a=="function"?a:null)}var H=Symbol.for("react.client.reference");function Ae(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===H?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case b:return"Fragment";case A:return"Profiler";case S:return"StrictMode";case q:return"Suspense";case z:return"SuspenseList";case N:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case E:return"Portal";case M:return(a.displayName||"Context")+".Provider";case D:return(a._context.displayName||"Context")+".Consumer";case U:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case k:return l=a.displayName||null,l!==null?l:Ae(a.type)||"Memo";case V:l=a._payload,a=a._init;try{return Ae(a(l))}catch{}}return null}var Se=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Te={pending:!1,data:null,method:null,action:null},Ve=[],j=-1;function ce(a){return{current:a}}function le(a){0>j||(a.current=Ve[j],Ve[j]=null,j--)}function ve(a,l){j++,Ve[j]=a.current,a.current=l}var Oe=ce(null),Fe=ce(null),Be=ce(null),an=ce(null);function ft(a,l){switch(ve(Be,l),ve(Fe,a),ve(Oe,null),l.nodeType){case 9:case 11:a=(a=l.documentElement)&&(a=a.namespaceURI)?jM(a):0;break;default:if(a=l.tagName,l=l.namespaceURI)l=jM(l),a=WM(l,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}le(Oe),ve(Oe,a)}function we(){le(Oe),le(Fe),le(Be)}function Ge(a){a.memoizedState!==null&&ve(an,a);var l=Oe.current,d=WM(l,a.type);l!==d&&(ve(Fe,a),ve(Oe,d))}function je(a){Fe.current===a&&(le(Oe),le(Fe)),an.current===a&&(le(an),Kh._currentValue=Te)}var ge=Object.prototype.hasOwnProperty,Wt=t.unstable_scheduleCallback,et=t.unstable_cancelCallback,mn=t.unstable_shouldYield,bn=t.unstable_requestPaint,ln=t.unstable_now,ma=t.unstable_getCurrentPriorityLevel,vt=t.unstable_ImmediatePriority,wo=t.unstable_UserBlockingPriority,Ci=t.unstable_NormalPriority,Ul=t.unstable_LowPriority,us=t.unstable_IdlePriority,ga=t.log,Fl=t.unstable_setDisableYieldValue,qt=null,ht=null;function ie(a){if(typeof ga=="function"&&Fl(a),ht&&typeof ht.setStrictMode=="function")try{ht.setStrictMode(qt,a)}catch{}}var pe=Math.clz32?Math.clz32:xe,Me=Math.log,Ce=Math.LN2;function xe(a){return a>>>=0,a===0?32:31-(Me(a)/Ce|0)|0}var Ke=256,pt=4194304;function Rt(a){var l=a&42;if(l!==0)return l;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Qe(a,l,d){var g=a.pendingLanes;if(g===0)return 0;var T=0,w=a.suspendedLanes,P=a.pingedLanes;a=a.warmLanes;var L=g&134217727;return L!==0?(g=L&~w,g!==0?T=Rt(g):(P&=L,P!==0?T=Rt(P):d||(d=L&~a,d!==0&&(T=Rt(d))))):(L=g&~w,L!==0?T=Rt(L):P!==0?T=Rt(P):d||(d=g&~a,d!==0&&(T=Rt(d)))),T===0?0:l!==0&&l!==T&&(l&w)===0&&(w=T&-T,d=l&-l,w>=d||w===32&&(d&4194048)!==0)?l:T}function mt(a,l){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&l)===0}function vr(a,l){switch(a){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ii(){var a=Ke;return Ke<<=1,(Ke&4194048)===0&&(Ke=256),a}function or(){var a=pt;return pt<<=1,(pt&62914560)===0&&(pt=4194304),a}function gn(a){for(var l=[],d=0;31>d;d++)l.push(a);return l}function ei(a,l){a.pendingLanes|=l,l!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function ya(a,l,d,g,T,w){var P=a.pendingLanes;a.pendingLanes=d,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=d,a.entangledLanes&=d,a.errorRecoveryDisabledLanes&=d,a.shellSuspendCounter=0;var L=a.entanglements,K=a.expirationTimes,Z=a.hiddenUpdates;for(d=P&~d;0<d;){var ae=31-pe(d),fe=1<<ae;L[ae]=0,K[ae]=-1;var te=Z[ae];if(te!==null)for(Z[ae]=null,ae=0;ae<te.length;ae++){var ne=te[ae];ne!==null&&(ne.lane&=-536870913)}d&=~fe}g!==0&&bo(a,g,0),w!==0&&T===0&&a.tag!==0&&(a.suspendedLanes|=w&~(P&~l))}function bo(a,l,d){a.pendingLanes|=l,a.suspendedLanes&=~l;var g=31-pe(l);a.entangledLanes|=l,a.entanglements[g]=a.entanglements[g]|1073741824|d&4194090}function Jd(a,l){var d=a.entangledLanes|=l;for(a=a.entanglements;d;){var g=31-pe(d),T=1<<g;T&l|a[g]&l&&(a[g]|=l),d&=~T}}function va(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function vc(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function _a(){var a=he.p;return a!==0?a:(a=window.event,a===void 0?32:hD(a.type))}function gg(a,l){var d=he.p;try{return he.p=a,l()}finally{he.p=d}}var Yt=Math.random().toString(36).slice(2),Nn="__reactFiber$"+Yt,Sn="__reactProps$"+Yt,xi="__reactContainer$"+Yt,Qd="__reactEvents$"+Yt,ST="__reactListeners$"+Yt,Ta="__reactHandles$"+Yt,yg="__reactResources$"+Yt,Bl="__reactMarker$"+Yt;function Ea(a){delete a[Nn],delete a[Sn],delete a[Qd],delete a[ST],delete a[Ta]}function cs(a){var l=a[Nn];if(l)return l;for(var d=a.parentNode;d;){if(l=d[xi]||d[Nn]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(a=XM(a);a!==null;){if(d=a[Nn])return d;a=XM(a)}return l}a=d,d=a.parentNode}return null}function So(a){if(a=a[Nn]||a[xi]){var l=a.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return a}return null}function Ao(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a.stateNode;throw Error(r(33))}function Rr(a){var l=a[yg];return l||(l=a[yg]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function yn(a){a[Bl]=!0}var Xd=new Set,_c={};function no(a,l){fs(a,l),fs(a+"Capture",l)}function fs(a,l){for(_c[a]=l,a=0;a<l.length;a++)Xd.add(l[a])}var vg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_g={},ql={};function Tg(a){return ge.call(ql,a)?!0:ge.call(_g,a)?!1:vg.test(a)?ql[a]=!0:(_g[a]=!0,!1)}function wa(a,l,d){if(Tg(l))if(d===null)a.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":a.removeAttribute(l);return;case"boolean":var g=l.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){a.removeAttribute(l);return}}a.setAttribute(l,""+d)}}function Co(a,l,d){if(d===null)a.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(l);return}a.setAttribute(l,""+d)}}function sr(a,l,d,g){if(g===null)a.removeAttribute(d);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(d);return}a.setAttributeNS(l,d,""+g)}}var $l,Eg;function ds(a){if($l===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);$l=l&&l[1]||"",Eg=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$l+a+Eg}var Tc=!1;function Ec(a,l){if(!a||Tc)return"";Tc=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(l){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(ne){var te=ne}Reflect.construct(a,[],fe)}else{try{fe.call()}catch(ne){te=ne}a.call(fe.prototype)}}else{try{throw Error()}catch(ne){te=ne}(fe=a())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(ne){if(ne&&te&&typeof ne.stack=="string")return[ne.stack,te.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var T=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");T&&T.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=g.DetermineComponentFrameRoot(),P=w[0],L=w[1];if(P&&L){var K=P.split(`
`),Z=L.split(`
`);for(T=g=0;g<K.length&&!K[g].includes("DetermineComponentFrameRoot");)g++;for(;T<Z.length&&!Z[T].includes("DetermineComponentFrameRoot");)T++;if(g===K.length||T===Z.length)for(g=K.length-1,T=Z.length-1;1<=g&&0<=T&&K[g]!==Z[T];)T--;for(;1<=g&&0<=T;g--,T--)if(K[g]!==Z[T]){if(g!==1||T!==1)do if(g--,T--,0>T||K[g]!==Z[T]){var ae=`
`+K[g].replace(" at new "," at ");return a.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",a.displayName)),ae}while(1<=g&&0<=T);break}}}finally{Tc=!1,Error.prepareStackTrace=d}return(d=a?a.displayName||a.name:"")?ds(d):""}function Zd(a){switch(a.tag){case 26:case 27:case 5:return ds(a.type);case 16:return ds("Lazy");case 13:return ds("Suspense");case 19:return ds("SuspenseList");case 0:case 15:return Ec(a.type,!1);case 11:return Ec(a.type.render,!1);case 1:return Ec(a.type,!0);case 31:return ds("Activity");default:return""}}function wc(a){try{var l="";do l+=Zd(a),a=a.return;while(a);return l}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function Pr(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function eh(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function AT(a){var l=eh(a)?"checked":"value",d=Object.getOwnPropertyDescriptor(a.constructor.prototype,l),g=""+a[l];if(!a.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var T=d.get,w=d.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return T.call(this)},set:function(P){g=""+P,w.call(this,P)}}),Object.defineProperty(a,l,{enumerable:d.enumerable}),{getValue:function(){return g},setValue:function(P){g=""+P},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function bc(a){a._valueTracker||(a._valueTracker=AT(a))}function th(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var d=l.getValue(),g="";return a&&(g=eh(a)?a.checked?"true":"false":a.value),a=g,a!==d?(l.setValue(a),!0):!1}function zl(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var CT=/[\n"\\]/g;function An(a){return a.replace(CT,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function ti(a,l,d,g,T,w,P,L){a.name="",P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?a.type=P:a.removeAttribute("type"),l!=null?P==="number"?(l===0&&a.value===""||a.value!=l)&&(a.value=""+Pr(l)):a.value!==""+Pr(l)&&(a.value=""+Pr(l)):P!=="submit"&&P!=="reset"||a.removeAttribute("value"),l!=null?ba(a,P,Pr(l)):d!=null?ba(a,P,Pr(d)):g!=null&&a.removeAttribute("value"),T==null&&w!=null&&(a.defaultChecked=!!w),T!=null&&(a.checked=T&&typeof T!="function"&&typeof T!="symbol"),L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?a.name=""+Pr(L):a.removeAttribute("name")}function Hl(a,l,d,g,T,w,P,L){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(a.type=w),l!=null||d!=null){if(!(w!=="submit"&&w!=="reset"||l!=null))return;d=d!=null?""+Pr(d):"",l=l!=null?""+Pr(l):d,L||l===a.value||(a.value=l),a.defaultValue=l}g=g??T,g=typeof g!="function"&&typeof g!="symbol"&&!!g,a.checked=L?a.checked:!!g,a.defaultChecked=!!g,P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(a.name=P)}function ba(a,l,d){l==="number"&&zl(a.ownerDocument)===a||a.defaultValue===""+d||(a.defaultValue=""+d)}function hs(a,l,d,g){if(a=a.options,l){l={};for(var T=0;T<d.length;T++)l["$"+d[T]]=!0;for(d=0;d<a.length;d++)T=l.hasOwnProperty("$"+a[d].value),a[d].selected!==T&&(a[d].selected=T),T&&g&&(a[d].defaultSelected=!0)}else{for(d=""+Pr(d),l=null,T=0;T<a.length;T++){if(a[T].value===d){a[T].selected=!0,g&&(a[T].defaultSelected=!0);return}l!==null||a[T].disabled||(l=a[T])}l!==null&&(l.selected=!0)}}function Pt(a,l,d){if(l!=null&&(l=""+Pr(l),l!==a.value&&(a.value=l),d==null)){a.defaultValue!==l&&(a.defaultValue=l);return}a.defaultValue=d!=null?""+Pr(d):""}function Gl(a,l,d,g){if(l==null){if(g!=null){if(d!=null)throw Error(r(92));if(Se(g)){if(1<g.length)throw Error(r(93));g=g[0]}d=g}d==null&&(d=""),l=d}d=Pr(l),a.defaultValue=d,g=a.textContent,g===d&&g!==""&&g!==null&&(a.value=g)}function Ri(a,l){if(l){var d=a.firstChild;if(d&&d===a.lastChild&&d.nodeType===3){d.nodeValue=l;return}}a.textContent=l}var Kl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function wg(a,l,d){var g=l.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?g?a.setProperty(l,""):l==="float"?a.cssFloat="":a[l]="":g?a.setProperty(l,d):typeof d!="number"||d===0||Kl.has(l)?l==="float"?a.cssFloat=d:a[l]=(""+d).trim():a[l]=d+"px"}function nh(a,l,d){if(l!=null&&typeof l!="object")throw Error(r(62));if(a=a.style,d!=null){for(var g in d)!d.hasOwnProperty(g)||l!=null&&l.hasOwnProperty(g)||(g.indexOf("--")===0?a.setProperty(g,""):g==="float"?a.cssFloat="":a[g]="");for(var T in l)g=l[T],l.hasOwnProperty(T)&&d[T]!==g&&wg(a,T,g)}else for(var w in l)l.hasOwnProperty(w)&&wg(a,w,l[w])}function rh(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var IT=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xT=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Sc(a){return xT.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var ps=null;function Pi(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var ms=null,gs=null;function ih(a){var l=So(a);if(l&&(a=l.stateNode)){var d=a[Sn]||null;e:switch(a=l.stateNode,l.type){case"input":if(ti(a,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),l=d.name,d.type==="radio"&&l!=null){for(d=a;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+An(""+l)+'"][type="radio"]'),l=0;l<d.length;l++){var g=d[l];if(g!==a&&g.form===a.form){var T=g[Sn]||null;if(!T)throw Error(r(90));ti(g,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name)}}for(l=0;l<d.length;l++)g=d[l],g.form===a.form&&th(g)}break e;case"textarea":Pt(a,d.value,d.defaultValue);break e;case"select":l=d.value,l!=null&&hs(a,!!d.multiple,l,!1)}}}var Io=!1;function bg(a,l,d){if(Io)return a(l,d);Io=!0;try{var g=a(l);return g}finally{if(Io=!1,(ms!==null||gs!==null)&&(gy(),ms&&(l=ms,a=gs,gs=ms=null,ih(l),a)))for(l=0;l<a.length;l++)ih(a[l])}}function jl(a,l){var d=a.stateNode;if(d===null)return null;var g=d[Sn]||null;if(g===null)return null;d=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(a=a.type,g=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!g;break e;default:a=!1}if(a)return null;if(d&&typeof d!="function")throw Error(r(231,l,typeof d));return d}var ro=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mi=!1;if(ro)try{var Wl={};Object.defineProperty(Wl,"passive",{get:function(){Mi=!0}}),window.addEventListener("test",Wl,Wl),window.removeEventListener("test",Wl,Wl)}catch{Mi=!1}var xo=null,Sa=null,ys=null;function oh(){if(ys)return ys;var a,l=Sa,d=l.length,g,T="value"in xo?xo.value:xo.textContent,w=T.length;for(a=0;a<d&&l[a]===T[a];a++);var P=d-a;for(g=1;g<=P&&l[d-g]===T[w-g];g++);return ys=T.slice(a,1<g?1-g:void 0)}function Ro(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function Po(){return!0}function sh(){return!1}function zn(a){function l(d,g,T,w,P){this._reactName=d,this._targetInst=T,this.type=g,this.nativeEvent=w,this.target=P,this.currentTarget=null;for(var L in a)a.hasOwnProperty(L)&&(d=a[L],this[L]=d?d(w):w[L]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Po:sh,this.isPropagationStopped=sh,this}return h(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Po)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Po)},persist:function(){},isPersistent:Po}),l}var Et={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ac=zn(Et),Yl=h({},Et,{view:0,detail:0}),Sg=zn(Yl),Cc,Ic,Mo,Jl=h({},Yl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zl,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Mo&&(Mo&&a.type==="mousemove"?(Cc=a.screenX-Mo.screenX,Ic=a.screenY-Mo.screenY):Ic=Cc=0,Mo=a),Cc)},movementY:function(a){return"movementY"in a?a.movementY:Ic}}),Di=zn(Jl),Ag=h({},Jl,{dataTransfer:0}),RT=zn(Ag),Ql=h({},Yl,{relatedTarget:0}),xc=zn(Ql),ah=h({},Et,{animationName:0,elapsedTime:0,pseudoElement:0}),Rc=zn(ah),Cg=h({},Et,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Pc=zn(Cg),PT=h({},Et,{data:0}),lh=zn(PT),Xl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ig={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uh(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=xg[a])?!!l[a]:!1}function Zl(){return uh}var Rg=h({},Yl,{key:function(a){if(a.key){var l=Xl[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=Ro(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Ig[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zl,charCode:function(a){return a.type==="keypress"?Ro(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Ro(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Mc=zn(Rg),Pg=h({},Jl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ch=zn(Pg),vs=h({},Yl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zl}),Mg=zn(vs),Dg=h({},Et,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ng=zn(Dg),kg=h({},Jl,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Dc=zn(kg),Mr=h({},Et,{newState:0,oldState:0}),Og=zn(Mr),Vg=[9,13,27,32],Do=ro&&"CompositionEvent"in window,_=null;ro&&"documentMode"in document&&(_=document.documentMode);var C=ro&&"TextEvent"in window&&!_,I=ro&&(!Do||_&&8<_&&11>=_),B=" ",J=!1;function oe(a,l){switch(a){case"keyup":return Vg.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _e(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var at=!1;function kn(a,l){switch(a){case"compositionend":return _e(l);case"keypress":return l.which!==32?null:(J=!0,B);case"textInput":return a=l.data,a===B&&J?null:a;default:return null}}function lt(a,l){if(at)return a==="compositionend"||!Do&&oe(a,l)?(a=oh(),ys=Sa=xo=null,at=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return I&&l.locale!=="ko"?null:l.data;default:return null}}var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function On(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!Hn[a.type]:l==="textarea"}function _s(a,l,d,g){ms?gs?gs.push(g):gs=[g]:ms=g,l=wy(l,"onChange"),0<l.length&&(d=new Ac("onChange","change",null,d,g),a.push({event:d,listeners:l}))}var ar=null,No=null;function fh(a){$M(a,0)}function Lg(a){var l=Ao(a);if(th(l))return a}function u1(a,l){if(a==="change")return l}var c1=!1;if(ro){var MT;if(ro){var DT="oninput"in document;if(!DT){var f1=document.createElement("div");f1.setAttribute("oninput","return;"),DT=typeof f1.oninput=="function"}MT=DT}else MT=!1;c1=MT&&(!document.documentMode||9<document.documentMode)}function d1(){ar&&(ar.detachEvent("onpropertychange",h1),No=ar=null)}function h1(a){if(a.propertyName==="value"&&Lg(No)){var l=[];_s(l,No,a,Pi(a)),bg(fh,l)}}function E9(a,l,d){a==="focusin"?(d1(),ar=l,No=d,ar.attachEvent("onpropertychange",h1)):a==="focusout"&&d1()}function w9(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Lg(No)}function b9(a,l){if(a==="click")return Lg(l)}function S9(a,l){if(a==="input"||a==="change")return Lg(l)}function A9(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var ni=typeof Object.is=="function"?Object.is:A9;function dh(a,l){if(ni(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var d=Object.keys(a),g=Object.keys(l);if(d.length!==g.length)return!1;for(g=0;g<d.length;g++){var T=d[g];if(!ge.call(l,T)||!ni(a[T],l[T]))return!1}return!0}function p1(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function m1(a,l){var d=p1(a);a=0;for(var g;d;){if(d.nodeType===3){if(g=a+d.textContent.length,a<=l&&g>=l)return{node:d,offset:l-a};a=g}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=p1(d)}}function g1(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?g1(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function y1(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var l=zl(a.document);l instanceof a.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)a=l.contentWindow;else break;l=zl(a.document)}return l}function NT(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}var C9=ro&&"documentMode"in document&&11>=document.documentMode,Nc=null,kT=null,hh=null,OT=!1;function v1(a,l,d){var g=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;OT||Nc==null||Nc!==zl(g)||(g=Nc,"selectionStart"in g&&NT(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),hh&&dh(hh,g)||(hh=g,g=wy(kT,"onSelect"),0<g.length&&(l=new Ac("onSelect","select",null,l,d),a.push({event:l,listeners:g}),l.target=Nc)))}function eu(a,l){var d={};return d[a.toLowerCase()]=l.toLowerCase(),d["Webkit"+a]="webkit"+l,d["Moz"+a]="moz"+l,d}var kc={animationend:eu("Animation","AnimationEnd"),animationiteration:eu("Animation","AnimationIteration"),animationstart:eu("Animation","AnimationStart"),transitionrun:eu("Transition","TransitionRun"),transitionstart:eu("Transition","TransitionStart"),transitioncancel:eu("Transition","TransitionCancel"),transitionend:eu("Transition","TransitionEnd")},VT={},_1={};ro&&(_1=document.createElement("div").style,"AnimationEvent"in window||(delete kc.animationend.animation,delete kc.animationiteration.animation,delete kc.animationstart.animation),"TransitionEvent"in window||delete kc.transitionend.transition);function tu(a){if(VT[a])return VT[a];if(!kc[a])return a;var l=kc[a],d;for(d in l)if(l.hasOwnProperty(d)&&d in _1)return VT[a]=l[d];return a}var T1=tu("animationend"),E1=tu("animationiteration"),w1=tu("animationstart"),I9=tu("transitionrun"),x9=tu("transitionstart"),R9=tu("transitioncancel"),b1=tu("transitionend"),S1=new Map,LT="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");LT.push("scrollEnd");function io(a,l){S1.set(a,l),no(l,[a])}var A1=new WeakMap;function Ni(a,l){if(typeof a=="object"&&a!==null){var d=A1.get(a);return d!==void 0?d:(l={value:a,source:l,stack:wc(l)},A1.set(a,l),l)}return{value:a,source:l,stack:wc(l)}}var ki=[],Oc=0,UT=0;function Ug(){for(var a=Oc,l=UT=Oc=0;l<a;){var d=ki[l];ki[l++]=null;var g=ki[l];ki[l++]=null;var T=ki[l];ki[l++]=null;var w=ki[l];if(ki[l++]=null,g!==null&&T!==null){var P=g.pending;P===null?T.next=T:(T.next=P.next,P.next=T),g.pending=T}w!==0&&C1(d,T,w)}}function Fg(a,l,d,g){ki[Oc++]=a,ki[Oc++]=l,ki[Oc++]=d,ki[Oc++]=g,UT|=g,a.lanes|=g,a=a.alternate,a!==null&&(a.lanes|=g)}function FT(a,l,d,g){return Fg(a,l,d,g),Bg(a)}function Vc(a,l){return Fg(a,null,null,l),Bg(a)}function C1(a,l,d){a.lanes|=d;var g=a.alternate;g!==null&&(g.lanes|=d);for(var T=!1,w=a.return;w!==null;)w.childLanes|=d,g=w.alternate,g!==null&&(g.childLanes|=d),w.tag===22&&(a=w.stateNode,a===null||a._visibility&1||(T=!0)),a=w,w=w.return;return a.tag===3?(w=a.stateNode,T&&l!==null&&(T=31-pe(d),a=w.hiddenUpdates,g=a[T],g===null?a[T]=[l]:g.push(l),l.lane=d|536870912),w):null}function Bg(a){if(50<Uh)throw Uh=0,GE=null,Error(r(185));for(var l=a.return;l!==null;)a=l,l=a.return;return a.tag===3?a.stateNode:null}var Lc={};function P9(a,l,d,g){this.tag=a,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ri(a,l,d,g){return new P9(a,l,d,g)}function BT(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Ts(a,l){var d=a.alternate;return d===null?(d=ri(a.tag,l,a.key,a.mode),d.elementType=a.elementType,d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=l,d.type=a.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=a.flags&65011712,d.childLanes=a.childLanes,d.lanes=a.lanes,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,l=a.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d.refCleanup=a.refCleanup,d}function I1(a,l){a.flags&=65011714;var d=a.alternate;return d===null?(a.childLanes=0,a.lanes=l,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=d.childLanes,a.lanes=d.lanes,a.child=d.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=d.memoizedProps,a.memoizedState=d.memoizedState,a.updateQueue=d.updateQueue,a.type=d.type,l=d.dependencies,a.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),a}function qg(a,l,d,g,T,w){var P=0;if(g=a,typeof a=="function")BT(a)&&(P=1);else if(typeof a=="string")P=DG(a,d,Oe.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case N:return a=ri(31,d,l,T),a.elementType=N,a.lanes=w,a;case b:return nu(d.children,T,w,l);case S:P=8,T|=24;break;case A:return a=ri(12,d,l,T|2),a.elementType=A,a.lanes=w,a;case q:return a=ri(13,d,l,T),a.elementType=q,a.lanes=w,a;case z:return a=ri(19,d,l,T),a.elementType=z,a.lanes=w,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case R:case M:P=10;break e;case D:P=9;break e;case U:P=11;break e;case k:P=14;break e;case V:P=16,g=null;break e}P=29,d=Error(r(130,a===null?"null":typeof a,"")),g=null}return l=ri(P,d,l,T),l.elementType=a,l.type=g,l.lanes=w,l}function nu(a,l,d,g){return a=ri(7,a,g,l),a.lanes=d,a}function qT(a,l,d){return a=ri(6,a,null,l),a.lanes=d,a}function $T(a,l,d){return l=ri(4,a.children!==null?a.children:[],a.key,l),l.lanes=d,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}var Uc=[],Fc=0,$g=null,zg=0,Oi=[],Vi=0,ru=null,Es=1,ws="";function iu(a,l){Uc[Fc++]=zg,Uc[Fc++]=$g,$g=a,zg=l}function x1(a,l,d){Oi[Vi++]=Es,Oi[Vi++]=ws,Oi[Vi++]=ru,ru=a;var g=Es;a=ws;var T=32-pe(g)-1;g&=~(1<<T),d+=1;var w=32-pe(l)+T;if(30<w){var P=T-T%5;w=(g&(1<<P)-1).toString(32),g>>=P,T-=P,Es=1<<32-pe(l)+T|d<<T|g,ws=w+a}else Es=1<<w|d<<T|g,ws=a}function zT(a){a.return!==null&&(iu(a,1),x1(a,1,0))}function HT(a){for(;a===$g;)$g=Uc[--Fc],Uc[Fc]=null,zg=Uc[--Fc],Uc[Fc]=null;for(;a===ru;)ru=Oi[--Vi],Oi[Vi]=null,ws=Oi[--Vi],Oi[Vi]=null,Es=Oi[--Vi],Oi[Vi]=null}var Dr=null,un=null,_t=!1,ou=null,ko=!1,GT=Error(r(519));function su(a){var l=Error(r(418,""));throw gh(Ni(l,a)),GT}function R1(a){var l=a.stateNode,d=a.type,g=a.memoizedProps;switch(l[Nn]=a,l[Sn]=g,d){case"dialog":rt("cancel",l),rt("close",l);break;case"iframe":case"object":case"embed":rt("load",l);break;case"video":case"audio":for(d=0;d<Bh.length;d++)rt(Bh[d],l);break;case"source":rt("error",l);break;case"img":case"image":case"link":rt("error",l),rt("load",l);break;case"details":rt("toggle",l);break;case"input":rt("invalid",l),Hl(l,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),bc(l);break;case"select":rt("invalid",l);break;case"textarea":rt("invalid",l),Gl(l,g.value,g.defaultValue,g.children),bc(l)}d=g.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||l.textContent===""+d||g.suppressHydrationWarning===!0||KM(l.textContent,d)?(g.popover!=null&&(rt("beforetoggle",l),rt("toggle",l)),g.onScroll!=null&&rt("scroll",l),g.onScrollEnd!=null&&rt("scrollend",l),g.onClick!=null&&(l.onclick=by),l=!0):l=!1,l||su(a)}function P1(a){for(Dr=a.return;Dr;)switch(Dr.tag){case 5:case 13:ko=!1;return;case 27:case 3:ko=!0;return;default:Dr=Dr.return}}function ph(a){if(a!==Dr)return!1;if(!_t)return P1(a),_t=!0,!1;var l=a.tag,d;if((d=l!==3&&l!==27)&&((d=l===5)&&(d=a.type,d=!(d!=="form"&&d!=="button")||aw(a.type,a.memoizedProps)),d=!d),d&&un&&su(a),P1(a),l===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,l=0;a;){if(a.nodeType===8)if(d=a.data,d==="/$"){if(l===0){un=so(a.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++;a=a.nextSibling}un=null}}else l===27?(l=un,Ba(a.type)?(a=fw,fw=null,un=a):un=l):un=Dr?so(a.stateNode.nextSibling):null;return!0}function mh(){un=Dr=null,_t=!1}function M1(){var a=ou;return a!==null&&(Gr===null?Gr=a:Gr.push.apply(Gr,a),ou=null),a}function gh(a){ou===null?ou=[a]:ou.push(a)}var KT=ce(null),au=null,bs=null;function Aa(a,l,d){ve(KT,l._currentValue),l._currentValue=d}function Ss(a){a._currentValue=KT.current,le(KT)}function jT(a,l,d){for(;a!==null;){var g=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),a===d)break;a=a.return}}function WT(a,l,d,g){var T=a.child;for(T!==null&&(T.return=a);T!==null;){var w=T.dependencies;if(w!==null){var P=T.child;w=w.firstContext;e:for(;w!==null;){var L=w;w=T;for(var K=0;K<l.length;K++)if(L.context===l[K]){w.lanes|=d,L=w.alternate,L!==null&&(L.lanes|=d),jT(w.return,d,a),g||(P=null);break e}w=L.next}}else if(T.tag===18){if(P=T.return,P===null)throw Error(r(341));P.lanes|=d,w=P.alternate,w!==null&&(w.lanes|=d),jT(P,d,a),P=null}else P=T.child;if(P!==null)P.return=T;else for(P=T;P!==null;){if(P===a){P=null;break}if(T=P.sibling,T!==null){T.return=P.return,P=T;break}P=P.return}T=P}}function yh(a,l,d,g){a=null;for(var T=l,w=!1;T!==null;){if(!w){if((T.flags&524288)!==0)w=!0;else if((T.flags&262144)!==0)break}if(T.tag===10){var P=T.alternate;if(P===null)throw Error(r(387));if(P=P.memoizedProps,P!==null){var L=T.type;ni(T.pendingProps.value,P.value)||(a!==null?a.push(L):a=[L])}}else if(T===an.current){if(P=T.alternate,P===null)throw Error(r(387));P.memoizedState.memoizedState!==T.memoizedState.memoizedState&&(a!==null?a.push(Kh):a=[Kh])}T=T.return}a!==null&&WT(l,a,d,g),l.flags|=262144}function Hg(a){for(a=a.firstContext;a!==null;){if(!ni(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function lu(a){au=a,bs=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function _r(a){return D1(au,a)}function Gg(a,l){return au===null&&lu(a),D1(a,l)}function D1(a,l){var d=l._currentValue;if(l={context:l,memoizedValue:d,next:null},bs===null){if(a===null)throw Error(r(308));bs=l,a.dependencies={lanes:0,firstContext:l},a.flags|=524288}else bs=bs.next=l;return d}var M9=typeof AbortController<"u"?AbortController:function(){var a=[],l=this.signal={aborted:!1,addEventListener:function(d,g){a.push(g)}};this.abort=function(){l.aborted=!0,a.forEach(function(d){return d()})}},D9=t.unstable_scheduleCallback,N9=t.unstable_NormalPriority,Vn={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function YT(){return{controller:new M9,data:new Map,refCount:0}}function vh(a){a.refCount--,a.refCount===0&&D9(N9,function(){a.controller.abort()})}var _h=null,JT=0,Bc=0,qc=null;function k9(a,l){if(_h===null){var d=_h=[];JT=0,Bc=XE(),qc={status:"pending",value:void 0,then:function(g){d.push(g)}}}return JT++,l.then(N1,N1),l}function N1(){if(--JT===0&&_h!==null){qc!==null&&(qc.status="fulfilled");var a=_h;_h=null,Bc=0,qc=null;for(var l=0;l<a.length;l++)(0,a[l])()}}function O9(a,l){var d=[],g={status:"pending",value:null,reason:null,then:function(T){d.push(T)}};return a.then(function(){g.status="fulfilled",g.value=l;for(var T=0;T<d.length;T++)(0,d[T])(l)},function(T){for(g.status="rejected",g.reason=T,T=0;T<d.length;T++)(0,d[T])(void 0)}),g}var k1=ee.S;ee.S=function(a,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&k9(a,l),k1!==null&&k1(a,l)};var uu=ce(null);function QT(){var a=uu.current;return a!==null?a:Lt.pooledCache}function Kg(a,l){l===null?ve(uu,uu.current):ve(uu,l.pool)}function O1(){var a=QT();return a===null?null:{parent:Vn._currentValue,pool:a}}var Th=Error(r(460)),V1=Error(r(474)),jg=Error(r(542)),XT={then:function(){}};function L1(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Wg(){}function U1(a,l,d){switch(d=a[d],d===void 0?a.push(l):d!==l&&(l.then(Wg,Wg),l=d),l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,B1(a),a;default:if(typeof l.status=="string")l.then(Wg,Wg);else{if(a=Lt,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=l,a.status="pending",a.then(function(g){if(l.status==="pending"){var T=l;T.status="fulfilled",T.value=g}},function(g){if(l.status==="pending"){var T=l;T.status="rejected",T.reason=g}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,B1(a),a}throw Eh=l,Th}}var Eh=null;function F1(){if(Eh===null)throw Error(r(459));var a=Eh;return Eh=null,a}function B1(a){if(a===Th||a===jg)throw Error(r(483))}var Ca=!1;function ZT(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function eE(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Ia(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function xa(a,l,d){var g=a.updateQueue;if(g===null)return null;if(g=g.shared,(bt&2)!==0){var T=g.pending;return T===null?l.next=l:(l.next=T.next,T.next=l),g.pending=l,l=Bg(a),C1(a,null,d),l}return Fg(a,g,l,d),Bg(a)}function wh(a,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194048)!==0)){var g=l.lanes;g&=a.pendingLanes,d|=g,l.lanes=d,Jd(a,d)}}function tE(a,l){var d=a.updateQueue,g=a.alternate;if(g!==null&&(g=g.updateQueue,d===g)){var T=null,w=null;if(d=d.firstBaseUpdate,d!==null){do{var P={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};w===null?T=w=P:w=w.next=P,d=d.next}while(d!==null);w===null?T=w=l:w=w.next=l}else T=w=l;d={baseState:g.baseState,firstBaseUpdate:T,lastBaseUpdate:w,shared:g.shared,callbacks:g.callbacks},a.updateQueue=d;return}a=d.lastBaseUpdate,a===null?d.firstBaseUpdate=l:a.next=l,d.lastBaseUpdate=l}var nE=!1;function bh(){if(nE){var a=qc;if(a!==null)throw a}}function Sh(a,l,d,g){nE=!1;var T=a.updateQueue;Ca=!1;var w=T.firstBaseUpdate,P=T.lastBaseUpdate,L=T.shared.pending;if(L!==null){T.shared.pending=null;var K=L,Z=K.next;K.next=null,P===null?w=Z:P.next=Z,P=K;var ae=a.alternate;ae!==null&&(ae=ae.updateQueue,L=ae.lastBaseUpdate,L!==P&&(L===null?ae.firstBaseUpdate=Z:L.next=Z,ae.lastBaseUpdate=K))}if(w!==null){var fe=T.baseState;P=0,ae=Z=K=null,L=w;do{var te=L.lane&-536870913,ne=te!==L.lane;if(ne?(ut&te)===te:(g&te)===te){te!==0&&te===Bc&&(nE=!0),ae!==null&&(ae=ae.next={lane:0,tag:L.tag,payload:L.payload,callback:null,next:null});e:{var He=a,qe=L;te=l;var Nt=d;switch(qe.tag){case 1:if(He=qe.payload,typeof He=="function"){fe=He.call(Nt,fe,te);break e}fe=He;break e;case 3:He.flags=He.flags&-65537|128;case 0:if(He=qe.payload,te=typeof He=="function"?He.call(Nt,fe,te):He,te==null)break e;fe=h({},fe,te);break e;case 2:Ca=!0}}te=L.callback,te!==null&&(a.flags|=64,ne&&(a.flags|=8192),ne=T.callbacks,ne===null?T.callbacks=[te]:ne.push(te))}else ne={lane:te,tag:L.tag,payload:L.payload,callback:L.callback,next:null},ae===null?(Z=ae=ne,K=fe):ae=ae.next=ne,P|=te;if(L=L.next,L===null){if(L=T.shared.pending,L===null)break;ne=L,L=ne.next,ne.next=null,T.lastBaseUpdate=ne,T.shared.pending=null}}while(!0);ae===null&&(K=fe),T.baseState=K,T.firstBaseUpdate=Z,T.lastBaseUpdate=ae,w===null&&(T.shared.lanes=0),Va|=P,a.lanes=P,a.memoizedState=fe}}function q1(a,l){if(typeof a!="function")throw Error(r(191,a));a.call(l)}function $1(a,l){var d=a.callbacks;if(d!==null)for(a.callbacks=null,a=0;a<d.length;a++)q1(d[a],l)}var $c=ce(null),Yg=ce(0);function z1(a,l){a=Ms,ve(Yg,a),ve($c,l),Ms=a|l.baseLanes}function rE(){ve(Yg,Ms),ve($c,$c.current)}function iE(){Ms=Yg.current,le($c),le(Yg)}var Ra=0,Ze=null,Mt=null,Cn=null,Jg=!1,zc=!1,cu=!1,Qg=0,Ah=0,Hc=null,V9=0;function vn(){throw Error(r(321))}function oE(a,l){if(l===null)return!1;for(var d=0;d<l.length&&d<a.length;d++)if(!ni(a[d],l[d]))return!1;return!0}function sE(a,l,d,g,T,w){return Ra=w,Ze=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,ee.H=a===null||a.memoizedState===null?CP:IP,cu=!1,w=d(g,T),cu=!1,zc&&(w=G1(l,d,g,T)),H1(a),w}function H1(a){ee.H=ry;var l=Mt!==null&&Mt.next!==null;if(Ra=0,Cn=Mt=Ze=null,Jg=!1,Ah=0,Hc=null,l)throw Error(r(300));a===null||Gn||(a=a.dependencies,a!==null&&Hg(a)&&(Gn=!0))}function G1(a,l,d,g){Ze=a;var T=0;do{if(zc&&(Hc=null),Ah=0,zc=!1,25<=T)throw Error(r(301));if(T+=1,Cn=Mt=null,a.updateQueue!=null){var w=a.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}ee.H=z9,w=l(d,g)}while(zc);return w}function L9(){var a=ee.H,l=a.useState()[0];return l=typeof l.then=="function"?Ch(l):l,a=a.useState()[0],(Mt!==null?Mt.memoizedState:null)!==a&&(Ze.flags|=1024),l}function aE(){var a=Qg!==0;return Qg=0,a}function lE(a,l,d){l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~d}function uE(a){if(Jg){for(a=a.memoizedState;a!==null;){var l=a.queue;l!==null&&(l.pending=null),a=a.next}Jg=!1}Ra=0,Cn=Mt=Ze=null,zc=!1,Ah=Qg=0,Hc=null}function zr(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cn===null?Ze.memoizedState=Cn=a:Cn=Cn.next=a,Cn}function In(){if(Mt===null){var a=Ze.alternate;a=a!==null?a.memoizedState:null}else a=Mt.next;var l=Cn===null?Ze.memoizedState:Cn.next;if(l!==null)Cn=l,Mt=a;else{if(a===null)throw Ze.alternate===null?Error(r(467)):Error(r(310));Mt=a,a={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},Cn===null?Ze.memoizedState=Cn=a:Cn=Cn.next=a}return Cn}function cE(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ch(a){var l=Ah;return Ah+=1,Hc===null&&(Hc=[]),a=U1(Hc,a,l),l=Ze,(Cn===null?l.memoizedState:Cn.next)===null&&(l=l.alternate,ee.H=l===null||l.memoizedState===null?CP:IP),a}function Xg(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Ch(a);if(a.$$typeof===M)return _r(a)}throw Error(r(438,String(a)))}function fE(a){var l=null,d=Ze.updateQueue;if(d!==null&&(l=d.memoCache),l==null){var g=Ze.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(l={data:g.data.map(function(T){return T.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),d===null&&(d=cE(),Ze.updateQueue=d),d.memoCache=l,d=l.data[l.index],d===void 0)for(d=l.data[l.index]=Array(a),g=0;g<a;g++)d[g]=$;return l.index++,d}function As(a,l){return typeof l=="function"?l(a):l}function Zg(a){var l=In();return dE(l,Mt,a)}function dE(a,l,d){var g=a.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=d;var T=a.baseQueue,w=g.pending;if(w!==null){if(T!==null){var P=T.next;T.next=w.next,w.next=P}l.baseQueue=T=w,g.pending=null}if(w=a.baseState,T===null)a.memoizedState=w;else{l=T.next;var L=P=null,K=null,Z=l,ae=!1;do{var fe=Z.lane&-536870913;if(fe!==Z.lane?(ut&fe)===fe:(Ra&fe)===fe){var te=Z.revertLane;if(te===0)K!==null&&(K=K.next={lane:0,revertLane:0,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),fe===Bc&&(ae=!0);else if((Ra&te)===te){Z=Z.next,te===Bc&&(ae=!0);continue}else fe={lane:0,revertLane:Z.revertLane,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},K===null?(L=K=fe,P=w):K=K.next=fe,Ze.lanes|=te,Va|=te;fe=Z.action,cu&&d(w,fe),w=Z.hasEagerState?Z.eagerState:d(w,fe)}else te={lane:fe,revertLane:Z.revertLane,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},K===null?(L=K=te,P=w):K=K.next=te,Ze.lanes|=fe,Va|=fe;Z=Z.next}while(Z!==null&&Z!==l);if(K===null?P=w:K.next=L,!ni(w,a.memoizedState)&&(Gn=!0,ae&&(d=qc,d!==null)))throw d;a.memoizedState=w,a.baseState=P,a.baseQueue=K,g.lastRenderedState=w}return T===null&&(g.lanes=0),[a.memoizedState,g.dispatch]}function hE(a){var l=In(),d=l.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=a;var g=d.dispatch,T=d.pending,w=l.memoizedState;if(T!==null){d.pending=null;var P=T=T.next;do w=a(w,P.action),P=P.next;while(P!==T);ni(w,l.memoizedState)||(Gn=!0),l.memoizedState=w,l.baseQueue===null&&(l.baseState=w),d.lastRenderedState=w}return[w,g]}function K1(a,l,d){var g=Ze,T=In(),w=_t;if(w){if(d===void 0)throw Error(r(407));d=d()}else d=l();var P=!ni((Mt||T).memoizedState,d);P&&(T.memoizedState=d,Gn=!0),T=T.queue;var L=Y1.bind(null,g,T,a);if(Ih(2048,8,L,[a]),T.getSnapshot!==l||P||Cn!==null&&Cn.memoizedState.tag&1){if(g.flags|=2048,Gc(9,ey(),W1.bind(null,g,T,d,l),null),Lt===null)throw Error(r(349));w||(Ra&124)!==0||j1(g,l,d)}return d}function j1(a,l,d){a.flags|=16384,a={getSnapshot:l,value:d},l=Ze.updateQueue,l===null?(l=cE(),Ze.updateQueue=l,l.stores=[a]):(d=l.stores,d===null?l.stores=[a]:d.push(a))}function W1(a,l,d,g){l.value=d,l.getSnapshot=g,J1(l)&&Q1(a)}function Y1(a,l,d){return d(function(){J1(l)&&Q1(a)})}function J1(a){var l=a.getSnapshot;a=a.value;try{var d=l();return!ni(a,d)}catch{return!0}}function Q1(a){var l=Vc(a,2);l!==null&&li(l,a,2)}function pE(a){var l=zr();if(typeof a=="function"){var d=a;if(a=d(),cu){ie(!0);try{d()}finally{ie(!1)}}}return l.memoizedState=l.baseState=a,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:As,lastRenderedState:a},l}function X1(a,l,d,g){return a.baseState=d,dE(a,Mt,typeof g=="function"?g:As)}function U9(a,l,d,g,T){if(ny(a))throw Error(r(485));if(a=l.action,a!==null){var w={payload:T,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(P){w.listeners.push(P)}};ee.T!==null?d(!0):w.isTransition=!1,g(w),d=l.pending,d===null?(w.next=l.pending=w,Z1(l,w)):(w.next=d.next,l.pending=d.next=w)}}function Z1(a,l){var d=l.action,g=l.payload,T=a.state;if(l.isTransition){var w=ee.T,P={};ee.T=P;try{var L=d(T,g),K=ee.S;K!==null&&K(P,L),eP(a,l,L)}catch(Z){mE(a,l,Z)}finally{ee.T=w}}else try{w=d(T,g),eP(a,l,w)}catch(Z){mE(a,l,Z)}}function eP(a,l,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(g){tP(a,l,g)},function(g){return mE(a,l,g)}):tP(a,l,d)}function tP(a,l,d){l.status="fulfilled",l.value=d,nP(l),a.state=d,l=a.pending,l!==null&&(d=l.next,d===l?a.pending=null:(d=d.next,l.next=d,Z1(a,d)))}function mE(a,l,d){var g=a.pending;if(a.pending=null,g!==null){g=g.next;do l.status="rejected",l.reason=d,nP(l),l=l.next;while(l!==g)}a.action=null}function nP(a){a=a.listeners;for(var l=0;l<a.length;l++)(0,a[l])()}function rP(a,l){return l}function iP(a,l){if(_t){var d=Lt.formState;if(d!==null){e:{var g=Ze;if(_t){if(un){t:{for(var T=un,w=ko;T.nodeType!==8;){if(!w){T=null;break t}if(T=so(T.nextSibling),T===null){T=null;break t}}w=T.data,T=w==="F!"||w==="F"?T:null}if(T){un=so(T.nextSibling),g=T.data==="F!";break e}}su(g)}g=!1}g&&(l=d[0])}}return d=zr(),d.memoizedState=d.baseState=l,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rP,lastRenderedState:l},d.queue=g,d=bP.bind(null,Ze,g),g.dispatch=d,g=pE(!1),w=TE.bind(null,Ze,!1,g.queue),g=zr(),T={state:l,dispatch:null,action:a,pending:null},g.queue=T,d=U9.bind(null,Ze,T,w,d),T.dispatch=d,g.memoizedState=a,[l,d,!1]}function oP(a){var l=In();return sP(l,Mt,a)}function sP(a,l,d){if(l=dE(a,l,rP)[0],a=Zg(As)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var g=Ch(l)}catch(P){throw P===Th?jg:P}else g=l;l=In();var T=l.queue,w=T.dispatch;return d!==l.memoizedState&&(Ze.flags|=2048,Gc(9,ey(),F9.bind(null,T,d),null)),[g,w,a]}function F9(a,l){a.action=l}function aP(a){var l=In(),d=Mt;if(d!==null)return sP(l,d,a);In(),l=l.memoizedState,d=In();var g=d.queue.dispatch;return d.memoizedState=a,[l,g,!1]}function Gc(a,l,d,g){return a={tag:a,create:d,deps:g,inst:l,next:null},l=Ze.updateQueue,l===null&&(l=cE(),Ze.updateQueue=l),d=l.lastEffect,d===null?l.lastEffect=a.next=a:(g=d.next,d.next=a,a.next=g,l.lastEffect=a),a}function ey(){return{destroy:void 0,resource:void 0}}function lP(){return In().memoizedState}function ty(a,l,d,g){var T=zr();g=g===void 0?null:g,Ze.flags|=a,T.memoizedState=Gc(1|l,ey(),d,g)}function Ih(a,l,d,g){var T=In();g=g===void 0?null:g;var w=T.memoizedState.inst;Mt!==null&&g!==null&&oE(g,Mt.memoizedState.deps)?T.memoizedState=Gc(l,w,d,g):(Ze.flags|=a,T.memoizedState=Gc(1|l,w,d,g))}function uP(a,l){ty(8390656,8,a,l)}function cP(a,l){Ih(2048,8,a,l)}function fP(a,l){return Ih(4,2,a,l)}function dP(a,l){return Ih(4,4,a,l)}function hP(a,l){if(typeof l=="function"){a=a();var d=l(a);return function(){typeof d=="function"?d():l(null)}}if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function pP(a,l,d){d=d!=null?d.concat([a]):null,Ih(4,4,hP.bind(null,l,a),d)}function gE(){}function mP(a,l){var d=In();l=l===void 0?null:l;var g=d.memoizedState;return l!==null&&oE(l,g[1])?g[0]:(d.memoizedState=[a,l],a)}function gP(a,l){var d=In();l=l===void 0?null:l;var g=d.memoizedState;if(l!==null&&oE(l,g[1]))return g[0];if(g=a(),cu){ie(!0);try{a()}finally{ie(!1)}}return d.memoizedState=[g,l],g}function yE(a,l,d){return d===void 0||(Ra&1073741824)!==0?a.memoizedState=l:(a.memoizedState=d,a=_M(),Ze.lanes|=a,Va|=a,d)}function yP(a,l,d,g){return ni(d,l)?d:$c.current!==null?(a=yE(a,d,g),ni(a,l)||(Gn=!0),a):(Ra&42)===0?(Gn=!0,a.memoizedState=d):(a=_M(),Ze.lanes|=a,Va|=a,l)}function vP(a,l,d,g,T){var w=he.p;he.p=w!==0&&8>w?w:8;var P=ee.T,L={};ee.T=L,TE(a,!1,l,d);try{var K=T(),Z=ee.S;if(Z!==null&&Z(L,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var ae=O9(K,g);xh(a,l,ae,ai(a))}else xh(a,l,g,ai(a))}catch(fe){xh(a,l,{then:function(){},status:"rejected",reason:fe},ai())}finally{he.p=w,ee.T=P}}function B9(){}function vE(a,l,d,g){if(a.tag!==5)throw Error(r(476));var T=_P(a).queue;vP(a,T,l,Te,d===null?B9:function(){return TP(a),d(g)})}function _P(a){var l=a.memoizedState;if(l!==null)return l;l={memoizedState:Te,baseState:Te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:As,lastRenderedState:Te},next:null};var d={};return l.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:As,lastRenderedState:d},next:null},a.memoizedState=l,a=a.alternate,a!==null&&(a.memoizedState=l),l}function TP(a){var l=_P(a).next.queue;xh(a,l,{},ai())}function _E(){return _r(Kh)}function EP(){return In().memoizedState}function wP(){return In().memoizedState}function q9(a){for(var l=a.return;l!==null;){switch(l.tag){case 24:case 3:var d=ai();a=Ia(d);var g=xa(l,a,d);g!==null&&(li(g,l,d),wh(g,l,d)),l={cache:YT()},a.payload=l;return}l=l.return}}function $9(a,l,d){var g=ai();d={lane:g,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},ny(a)?SP(l,d):(d=FT(a,l,d,g),d!==null&&(li(d,a,g),AP(d,l,g)))}function bP(a,l,d){var g=ai();xh(a,l,d,g)}function xh(a,l,d,g){var T={lane:g,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(ny(a))SP(l,T);else{var w=a.alternate;if(a.lanes===0&&(w===null||w.lanes===0)&&(w=l.lastRenderedReducer,w!==null))try{var P=l.lastRenderedState,L=w(P,d);if(T.hasEagerState=!0,T.eagerState=L,ni(L,P))return Fg(a,l,T,0),Lt===null&&Ug(),!1}catch{}finally{}if(d=FT(a,l,T,g),d!==null)return li(d,a,g),AP(d,l,g),!0}return!1}function TE(a,l,d,g){if(g={lane:2,revertLane:XE(),action:g,hasEagerState:!1,eagerState:null,next:null},ny(a)){if(l)throw Error(r(479))}else l=FT(a,d,g,2),l!==null&&li(l,a,2)}function ny(a){var l=a.alternate;return a===Ze||l!==null&&l===Ze}function SP(a,l){zc=Jg=!0;var d=a.pending;d===null?l.next=l:(l.next=d.next,d.next=l),a.pending=l}function AP(a,l,d){if((d&4194048)!==0){var g=l.lanes;g&=a.pendingLanes,d|=g,l.lanes=d,Jd(a,d)}}var ry={readContext:_r,use:Xg,useCallback:vn,useContext:vn,useEffect:vn,useImperativeHandle:vn,useLayoutEffect:vn,useInsertionEffect:vn,useMemo:vn,useReducer:vn,useRef:vn,useState:vn,useDebugValue:vn,useDeferredValue:vn,useTransition:vn,useSyncExternalStore:vn,useId:vn,useHostTransitionStatus:vn,useFormState:vn,useActionState:vn,useOptimistic:vn,useMemoCache:vn,useCacheRefresh:vn},CP={readContext:_r,use:Xg,useCallback:function(a,l){return zr().memoizedState=[a,l===void 0?null:l],a},useContext:_r,useEffect:uP,useImperativeHandle:function(a,l,d){d=d!=null?d.concat([a]):null,ty(4194308,4,hP.bind(null,l,a),d)},useLayoutEffect:function(a,l){return ty(4194308,4,a,l)},useInsertionEffect:function(a,l){ty(4,2,a,l)},useMemo:function(a,l){var d=zr();l=l===void 0?null:l;var g=a();if(cu){ie(!0);try{a()}finally{ie(!1)}}return d.memoizedState=[g,l],g},useReducer:function(a,l,d){var g=zr();if(d!==void 0){var T=d(l);if(cu){ie(!0);try{d(l)}finally{ie(!1)}}}else T=l;return g.memoizedState=g.baseState=T,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:T},g.queue=a,a=a.dispatch=$9.bind(null,Ze,a),[g.memoizedState,a]},useRef:function(a){var l=zr();return a={current:a},l.memoizedState=a},useState:function(a){a=pE(a);var l=a.queue,d=bP.bind(null,Ze,l);return l.dispatch=d,[a.memoizedState,d]},useDebugValue:gE,useDeferredValue:function(a,l){var d=zr();return yE(d,a,l)},useTransition:function(){var a=pE(!1);return a=vP.bind(null,Ze,a.queue,!0,!1),zr().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,l,d){var g=Ze,T=zr();if(_t){if(d===void 0)throw Error(r(407));d=d()}else{if(d=l(),Lt===null)throw Error(r(349));(ut&124)!==0||j1(g,l,d)}T.memoizedState=d;var w={value:d,getSnapshot:l};return T.queue=w,uP(Y1.bind(null,g,w,a),[a]),g.flags|=2048,Gc(9,ey(),W1.bind(null,g,w,d,l),null),d},useId:function(){var a=zr(),l=Lt.identifierPrefix;if(_t){var d=ws,g=Es;d=(g&~(1<<32-pe(g)-1)).toString(32)+d,l=""+l+"R"+d,d=Qg++,0<d&&(l+="H"+d.toString(32)),l+=""}else d=V9++,l=""+l+"r"+d.toString(32)+"";return a.memoizedState=l},useHostTransitionStatus:_E,useFormState:iP,useActionState:iP,useOptimistic:function(a){var l=zr();l.memoizedState=l.baseState=a;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=d,l=TE.bind(null,Ze,!0,d),d.dispatch=l,[a,l]},useMemoCache:fE,useCacheRefresh:function(){return zr().memoizedState=q9.bind(null,Ze)}},IP={readContext:_r,use:Xg,useCallback:mP,useContext:_r,useEffect:cP,useImperativeHandle:pP,useInsertionEffect:fP,useLayoutEffect:dP,useMemo:gP,useReducer:Zg,useRef:lP,useState:function(){return Zg(As)},useDebugValue:gE,useDeferredValue:function(a,l){var d=In();return yP(d,Mt.memoizedState,a,l)},useTransition:function(){var a=Zg(As)[0],l=In().memoizedState;return[typeof a=="boolean"?a:Ch(a),l]},useSyncExternalStore:K1,useId:EP,useHostTransitionStatus:_E,useFormState:oP,useActionState:oP,useOptimistic:function(a,l){var d=In();return X1(d,Mt,a,l)},useMemoCache:fE,useCacheRefresh:wP},z9={readContext:_r,use:Xg,useCallback:mP,useContext:_r,useEffect:cP,useImperativeHandle:pP,useInsertionEffect:fP,useLayoutEffect:dP,useMemo:gP,useReducer:hE,useRef:lP,useState:function(){return hE(As)},useDebugValue:gE,useDeferredValue:function(a,l){var d=In();return Mt===null?yE(d,a,l):yP(d,Mt.memoizedState,a,l)},useTransition:function(){var a=hE(As)[0],l=In().memoizedState;return[typeof a=="boolean"?a:Ch(a),l]},useSyncExternalStore:K1,useId:EP,useHostTransitionStatus:_E,useFormState:aP,useActionState:aP,useOptimistic:function(a,l){var d=In();return Mt!==null?X1(d,Mt,a,l):(d.baseState=a,[a,d.queue.dispatch])},useMemoCache:fE,useCacheRefresh:wP},Kc=null,Rh=0;function iy(a){var l=Rh;return Rh+=1,Kc===null&&(Kc=[]),U1(Kc,a,l)}function Ph(a,l){l=l.props.ref,a.ref=l!==void 0?l:null}function oy(a,l){throw l.$$typeof===y?Error(r(525)):(a=Object.prototype.toString.call(l),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a)))}function xP(a){var l=a._init;return l(a._payload)}function RP(a){function l(Y,W){if(a){var X=Y.deletions;X===null?(Y.deletions=[W],Y.flags|=16):X.push(W)}}function d(Y,W){if(!a)return null;for(;W!==null;)l(Y,W),W=W.sibling;return null}function g(Y){for(var W=new Map;Y!==null;)Y.key!==null?W.set(Y.key,Y):W.set(Y.index,Y),Y=Y.sibling;return W}function T(Y,W){return Y=Ts(Y,W),Y.index=0,Y.sibling=null,Y}function w(Y,W,X){return Y.index=X,a?(X=Y.alternate,X!==null?(X=X.index,X<W?(Y.flags|=67108866,W):X):(Y.flags|=67108866,W)):(Y.flags|=1048576,W)}function P(Y){return a&&Y.alternate===null&&(Y.flags|=67108866),Y}function L(Y,W,X,ue){return W===null||W.tag!==6?(W=qT(X,Y.mode,ue),W.return=Y,W):(W=T(W,X),W.return=Y,W)}function K(Y,W,X,ue){var De=X.type;return De===b?ae(Y,W,X.props.children,ue,X.key):W!==null&&(W.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===V&&xP(De)===W.type)?(W=T(W,X.props),Ph(W,X),W.return=Y,W):(W=qg(X.type,X.key,X.props,null,Y.mode,ue),Ph(W,X),W.return=Y,W)}function Z(Y,W,X,ue){return W===null||W.tag!==4||W.stateNode.containerInfo!==X.containerInfo||W.stateNode.implementation!==X.implementation?(W=$T(X,Y.mode,ue),W.return=Y,W):(W=T(W,X.children||[]),W.return=Y,W)}function ae(Y,W,X,ue,De){return W===null||W.tag!==7?(W=nu(X,Y.mode,ue,De),W.return=Y,W):(W=T(W,X),W.return=Y,W)}function fe(Y,W,X){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=qT(""+W,Y.mode,X),W.return=Y,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case v:return X=qg(W.type,W.key,W.props,null,Y.mode,X),Ph(X,W),X.return=Y,X;case E:return W=$T(W,Y.mode,X),W.return=Y,W;case V:var ue=W._init;return W=ue(W._payload),fe(Y,W,X)}if(Se(W)||G(W))return W=nu(W,Y.mode,X,null),W.return=Y,W;if(typeof W.then=="function")return fe(Y,iy(W),X);if(W.$$typeof===M)return fe(Y,Gg(Y,W),X);oy(Y,W)}return null}function te(Y,W,X,ue){var De=W!==null?W.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return De!==null?null:L(Y,W,""+X,ue);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case v:return X.key===De?K(Y,W,X,ue):null;case E:return X.key===De?Z(Y,W,X,ue):null;case V:return De=X._init,X=De(X._payload),te(Y,W,X,ue)}if(Se(X)||G(X))return De!==null?null:ae(Y,W,X,ue,null);if(typeof X.then=="function")return te(Y,W,iy(X),ue);if(X.$$typeof===M)return te(Y,W,Gg(Y,X),ue);oy(Y,X)}return null}function ne(Y,W,X,ue,De){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return Y=Y.get(X)||null,L(W,Y,""+ue,De);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case v:return Y=Y.get(ue.key===null?X:ue.key)||null,K(W,Y,ue,De);case E:return Y=Y.get(ue.key===null?X:ue.key)||null,Z(W,Y,ue,De);case V:var tt=ue._init;return ue=tt(ue._payload),ne(Y,W,X,ue,De)}if(Se(ue)||G(ue))return Y=Y.get(X)||null,ae(W,Y,ue,De,null);if(typeof ue.then=="function")return ne(Y,W,X,iy(ue),De);if(ue.$$typeof===M)return ne(Y,W,X,Gg(W,ue),De);oy(W,ue)}return null}function He(Y,W,X,ue){for(var De=null,tt=null,Ue=W,ze=W=0,jn=null;Ue!==null&&ze<X.length;ze++){Ue.index>ze?(jn=Ue,Ue=null):jn=Ue.sibling;var gt=te(Y,Ue,X[ze],ue);if(gt===null){Ue===null&&(Ue=jn);break}a&&Ue&&gt.alternate===null&&l(Y,Ue),W=w(gt,W,ze),tt===null?De=gt:tt.sibling=gt,tt=gt,Ue=jn}if(ze===X.length)return d(Y,Ue),_t&&iu(Y,ze),De;if(Ue===null){for(;ze<X.length;ze++)Ue=fe(Y,X[ze],ue),Ue!==null&&(W=w(Ue,W,ze),tt===null?De=Ue:tt.sibling=Ue,tt=Ue);return _t&&iu(Y,ze),De}for(Ue=g(Ue);ze<X.length;ze++)jn=ne(Ue,Y,ze,X[ze],ue),jn!==null&&(a&&jn.alternate!==null&&Ue.delete(jn.key===null?ze:jn.key),W=w(jn,W,ze),tt===null?De=jn:tt.sibling=jn,tt=jn);return a&&Ue.forEach(function(Ga){return l(Y,Ga)}),_t&&iu(Y,ze),De}function qe(Y,W,X,ue){if(X==null)throw Error(r(151));for(var De=null,tt=null,Ue=W,ze=W=0,jn=null,gt=X.next();Ue!==null&&!gt.done;ze++,gt=X.next()){Ue.index>ze?(jn=Ue,Ue=null):jn=Ue.sibling;var Ga=te(Y,Ue,gt.value,ue);if(Ga===null){Ue===null&&(Ue=jn);break}a&&Ue&&Ga.alternate===null&&l(Y,Ue),W=w(Ga,W,ze),tt===null?De=Ga:tt.sibling=Ga,tt=Ga,Ue=jn}if(gt.done)return d(Y,Ue),_t&&iu(Y,ze),De;if(Ue===null){for(;!gt.done;ze++,gt=X.next())gt=fe(Y,gt.value,ue),gt!==null&&(W=w(gt,W,ze),tt===null?De=gt:tt.sibling=gt,tt=gt);return _t&&iu(Y,ze),De}for(Ue=g(Ue);!gt.done;ze++,gt=X.next())gt=ne(Ue,Y,ze,gt.value,ue),gt!==null&&(a&&gt.alternate!==null&&Ue.delete(gt.key===null?ze:gt.key),W=w(gt,W,ze),tt===null?De=gt:tt.sibling=gt,tt=gt);return a&&Ue.forEach(function(HG){return l(Y,HG)}),_t&&iu(Y,ze),De}function Nt(Y,W,X,ue){if(typeof X=="object"&&X!==null&&X.type===b&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case v:e:{for(var De=X.key;W!==null;){if(W.key===De){if(De=X.type,De===b){if(W.tag===7){d(Y,W.sibling),ue=T(W,X.props.children),ue.return=Y,Y=ue;break e}}else if(W.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===V&&xP(De)===W.type){d(Y,W.sibling),ue=T(W,X.props),Ph(ue,X),ue.return=Y,Y=ue;break e}d(Y,W);break}else l(Y,W);W=W.sibling}X.type===b?(ue=nu(X.props.children,Y.mode,ue,X.key),ue.return=Y,Y=ue):(ue=qg(X.type,X.key,X.props,null,Y.mode,ue),Ph(ue,X),ue.return=Y,Y=ue)}return P(Y);case E:e:{for(De=X.key;W!==null;){if(W.key===De)if(W.tag===4&&W.stateNode.containerInfo===X.containerInfo&&W.stateNode.implementation===X.implementation){d(Y,W.sibling),ue=T(W,X.children||[]),ue.return=Y,Y=ue;break e}else{d(Y,W);break}else l(Y,W);W=W.sibling}ue=$T(X,Y.mode,ue),ue.return=Y,Y=ue}return P(Y);case V:return De=X._init,X=De(X._payload),Nt(Y,W,X,ue)}if(Se(X))return He(Y,W,X,ue);if(G(X)){if(De=G(X),typeof De!="function")throw Error(r(150));return X=De.call(X),qe(Y,W,X,ue)}if(typeof X.then=="function")return Nt(Y,W,iy(X),ue);if(X.$$typeof===M)return Nt(Y,W,Gg(Y,X),ue);oy(Y,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,W!==null&&W.tag===6?(d(Y,W.sibling),ue=T(W,X),ue.return=Y,Y=ue):(d(Y,W),ue=qT(X,Y.mode,ue),ue.return=Y,Y=ue),P(Y)):d(Y,W)}return function(Y,W,X,ue){try{Rh=0;var De=Nt(Y,W,X,ue);return Kc=null,De}catch(Ue){if(Ue===Th||Ue===jg)throw Ue;var tt=ri(29,Ue,null,Y.mode);return tt.lanes=ue,tt.return=Y,tt}finally{}}}var jc=RP(!0),PP=RP(!1),Li=ce(null),Oo=null;function Pa(a){var l=a.alternate;ve(Ln,Ln.current&1),ve(Li,a),Oo===null&&(l===null||$c.current!==null||l.memoizedState!==null)&&(Oo=a)}function MP(a){if(a.tag===22){if(ve(Ln,Ln.current),ve(Li,a),Oo===null){var l=a.alternate;l!==null&&l.memoizedState!==null&&(Oo=a)}}else Ma()}function Ma(){ve(Ln,Ln.current),ve(Li,Li.current)}function Cs(a){le(Li),Oo===a&&(Oo=null),le(Ln)}var Ln=ce(0);function sy(a){for(var l=a;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||cw(d)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function EE(a,l,d,g){l=a.memoizedState,d=d(g,l),d=d==null?l:h({},l,d),a.memoizedState=d,a.lanes===0&&(a.updateQueue.baseState=d)}var wE={enqueueSetState:function(a,l,d){a=a._reactInternals;var g=ai(),T=Ia(g);T.payload=l,d!=null&&(T.callback=d),l=xa(a,T,g),l!==null&&(li(l,a,g),wh(l,a,g))},enqueueReplaceState:function(a,l,d){a=a._reactInternals;var g=ai(),T=Ia(g);T.tag=1,T.payload=l,d!=null&&(T.callback=d),l=xa(a,T,g),l!==null&&(li(l,a,g),wh(l,a,g))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var d=ai(),g=Ia(d);g.tag=2,l!=null&&(g.callback=l),l=xa(a,g,d),l!==null&&(li(l,a,d),wh(l,a,d))}};function DP(a,l,d,g,T,w,P){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(g,w,P):l.prototype&&l.prototype.isPureReactComponent?!dh(d,g)||!dh(T,w):!0}function NP(a,l,d,g){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,g),l.state!==a&&wE.enqueueReplaceState(l,l.state,null)}function fu(a,l){var d=l;if("ref"in l){d={};for(var g in l)g!=="ref"&&(d[g]=l[g])}if(a=a.defaultProps){d===l&&(d=h({},d));for(var T in a)d[T]===void 0&&(d[T]=a[T])}return d}var ay=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function kP(a){ay(a)}function OP(a){console.error(a)}function VP(a){ay(a)}function ly(a,l){try{var d=a.onUncaughtError;d(l.value,{componentStack:l.stack})}catch(g){setTimeout(function(){throw g})}}function LP(a,l,d){try{var g=a.onCaughtError;g(d.value,{componentStack:d.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(T){setTimeout(function(){throw T})}}function bE(a,l,d){return d=Ia(d),d.tag=3,d.payload={element:null},d.callback=function(){ly(a,l)},d}function UP(a){return a=Ia(a),a.tag=3,a}function FP(a,l,d,g){var T=d.type.getDerivedStateFromError;if(typeof T=="function"){var w=g.value;a.payload=function(){return T(w)},a.callback=function(){LP(l,d,g)}}var P=d.stateNode;P!==null&&typeof P.componentDidCatch=="function"&&(a.callback=function(){LP(l,d,g),typeof T!="function"&&(La===null?La=new Set([this]):La.add(this));var L=g.stack;this.componentDidCatch(g.value,{componentStack:L!==null?L:""})})}function H9(a,l,d,g,T){if(d.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(l=d.alternate,l!==null&&yh(l,d,T,!0),d=Li.current,d!==null){switch(d.tag){case 13:return Oo===null?jE():d.alternate===null&&cn===0&&(cn=3),d.flags&=-257,d.flags|=65536,d.lanes=T,g===XT?d.flags|=16384:(l=d.updateQueue,l===null?d.updateQueue=new Set([g]):l.add(g),YE(a,g,T)),!1;case 22:return d.flags|=65536,g===XT?d.flags|=16384:(l=d.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([g])},d.updateQueue=l):(d=l.retryQueue,d===null?l.retryQueue=new Set([g]):d.add(g)),YE(a,g,T)),!1}throw Error(r(435,d.tag))}return YE(a,g,T),jE(),!1}if(_t)return l=Li.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=T,g!==GT&&(a=Error(r(422),{cause:g}),gh(Ni(a,d)))):(g!==GT&&(l=Error(r(423),{cause:g}),gh(Ni(l,d))),a=a.current.alternate,a.flags|=65536,T&=-T,a.lanes|=T,g=Ni(g,d),T=bE(a.stateNode,g,T),tE(a,T),cn!==4&&(cn=2)),!1;var w=Error(r(520),{cause:g});if(w=Ni(w,d),Lh===null?Lh=[w]:Lh.push(w),cn!==4&&(cn=2),l===null)return!0;g=Ni(g,d),d=l;do{switch(d.tag){case 3:return d.flags|=65536,a=T&-T,d.lanes|=a,a=bE(d.stateNode,g,a),tE(d,a),!1;case 1:if(l=d.type,w=d.stateNode,(d.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(La===null||!La.has(w))))return d.flags|=65536,T&=-T,d.lanes|=T,T=UP(T),FP(T,a,d,g),tE(d,T),!1}d=d.return}while(d!==null);return!1}var BP=Error(r(461)),Gn=!1;function lr(a,l,d,g){l.child=a===null?PP(l,null,d,g):jc(l,a.child,d,g)}function qP(a,l,d,g,T){d=d.render;var w=l.ref;if("ref"in g){var P={};for(var L in g)L!=="ref"&&(P[L]=g[L])}else P=g;return lu(l),g=sE(a,l,d,P,w,T),L=aE(),a!==null&&!Gn?(lE(a,l,T),Is(a,l,T)):(_t&&L&&zT(l),l.flags|=1,lr(a,l,g,T),l.child)}function $P(a,l,d,g,T){if(a===null){var w=d.type;return typeof w=="function"&&!BT(w)&&w.defaultProps===void 0&&d.compare===null?(l.tag=15,l.type=w,zP(a,l,w,g,T)):(a=qg(d.type,null,g,l,l.mode,T),a.ref=l.ref,a.return=l,l.child=a)}if(w=a.child,!ME(a,T)){var P=w.memoizedProps;if(d=d.compare,d=d!==null?d:dh,d(P,g)&&a.ref===l.ref)return Is(a,l,T)}return l.flags|=1,a=Ts(w,g),a.ref=l.ref,a.return=l,l.child=a}function zP(a,l,d,g,T){if(a!==null){var w=a.memoizedProps;if(dh(w,g)&&a.ref===l.ref)if(Gn=!1,l.pendingProps=g=w,ME(a,T))(a.flags&131072)!==0&&(Gn=!0);else return l.lanes=a.lanes,Is(a,l,T)}return SE(a,l,d,g,T)}function HP(a,l,d){var g=l.pendingProps,T=g.children,w=a!==null?a.memoizedState:null;if(g.mode==="hidden"){if((l.flags&128)!==0){if(g=w!==null?w.baseLanes|d:d,a!==null){for(T=l.child=a.child,w=0;T!==null;)w=w|T.lanes|T.childLanes,T=T.sibling;l.childLanes=w&~g}else l.childLanes=0,l.child=null;return GP(a,l,g,d)}if((d&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},a!==null&&Kg(l,w!==null?w.cachePool:null),w!==null?z1(l,w):rE(),MP(l);else return l.lanes=l.childLanes=536870912,GP(a,l,w!==null?w.baseLanes|d:d,d)}else w!==null?(Kg(l,w.cachePool),z1(l,w),Ma(),l.memoizedState=null):(a!==null&&Kg(l,null),rE(),Ma());return lr(a,l,T,d),l.child}function GP(a,l,d,g){var T=QT();return T=T===null?null:{parent:Vn._currentValue,pool:T},l.memoizedState={baseLanes:d,cachePool:T},a!==null&&Kg(l,null),rE(),MP(l),a!==null&&yh(a,l,g,!0),null}function uy(a,l){var d=l.ref;if(d===null)a!==null&&a.ref!==null&&(l.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(r(284));(a===null||a.ref!==d)&&(l.flags|=4194816)}}function SE(a,l,d,g,T){return lu(l),d=sE(a,l,d,g,void 0,T),g=aE(),a!==null&&!Gn?(lE(a,l,T),Is(a,l,T)):(_t&&g&&zT(l),l.flags|=1,lr(a,l,d,T),l.child)}function KP(a,l,d,g,T,w){return lu(l),l.updateQueue=null,d=G1(l,g,d,T),H1(a),g=aE(),a!==null&&!Gn?(lE(a,l,w),Is(a,l,w)):(_t&&g&&zT(l),l.flags|=1,lr(a,l,d,w),l.child)}function jP(a,l,d,g,T){if(lu(l),l.stateNode===null){var w=Lc,P=d.contextType;typeof P=="object"&&P!==null&&(w=_r(P)),w=new d(g,w),l.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=wE,l.stateNode=w,w._reactInternals=l,w=l.stateNode,w.props=g,w.state=l.memoizedState,w.refs={},ZT(l),P=d.contextType,w.context=typeof P=="object"&&P!==null?_r(P):Lc,w.state=l.memoizedState,P=d.getDerivedStateFromProps,typeof P=="function"&&(EE(l,d,P,g),w.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(P=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),P!==w.state&&wE.enqueueReplaceState(w,w.state,null),Sh(l,g,w,T),bh(),w.state=l.memoizedState),typeof w.componentDidMount=="function"&&(l.flags|=4194308),g=!0}else if(a===null){w=l.stateNode;var L=l.memoizedProps,K=fu(d,L);w.props=K;var Z=w.context,ae=d.contextType;P=Lc,typeof ae=="object"&&ae!==null&&(P=_r(ae));var fe=d.getDerivedStateFromProps;ae=typeof fe=="function"||typeof w.getSnapshotBeforeUpdate=="function",L=l.pendingProps!==L,ae||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(L||Z!==P)&&NP(l,w,g,P),Ca=!1;var te=l.memoizedState;w.state=te,Sh(l,g,w,T),bh(),Z=l.memoizedState,L||te!==Z||Ca?(typeof fe=="function"&&(EE(l,d,fe,g),Z=l.memoizedState),(K=Ca||DP(l,d,K,g,te,Z,P))?(ae||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(l.flags|=4194308)):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=Z),w.props=g,w.state=Z,w.context=P,g=K):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{w=l.stateNode,eE(a,l),P=l.memoizedProps,ae=fu(d,P),w.props=ae,fe=l.pendingProps,te=w.context,Z=d.contextType,K=Lc,typeof Z=="object"&&Z!==null&&(K=_r(Z)),L=d.getDerivedStateFromProps,(Z=typeof L=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(P!==fe||te!==K)&&NP(l,w,g,K),Ca=!1,te=l.memoizedState,w.state=te,Sh(l,g,w,T),bh();var ne=l.memoizedState;P!==fe||te!==ne||Ca||a!==null&&a.dependencies!==null&&Hg(a.dependencies)?(typeof L=="function"&&(EE(l,d,L,g),ne=l.memoizedState),(ae=Ca||DP(l,d,ae,g,te,ne,K)||a!==null&&a.dependencies!==null&&Hg(a.dependencies))?(Z||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(g,ne,K),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(g,ne,K)),typeof w.componentDidUpdate=="function"&&(l.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof w.componentDidUpdate!="function"||P===a.memoizedProps&&te===a.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||P===a.memoizedProps&&te===a.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=ne),w.props=g,w.state=ne,w.context=K,g=ae):(typeof w.componentDidUpdate!="function"||P===a.memoizedProps&&te===a.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||P===a.memoizedProps&&te===a.memoizedState||(l.flags|=1024),g=!1)}return w=g,uy(a,l),g=(l.flags&128)!==0,w||g?(w=l.stateNode,d=g&&typeof d.getDerivedStateFromError!="function"?null:w.render(),l.flags|=1,a!==null&&g?(l.child=jc(l,a.child,null,T),l.child=jc(l,null,d,T)):lr(a,l,d,T),l.memoizedState=w.state,a=l.child):a=Is(a,l,T),a}function WP(a,l,d,g){return mh(),l.flags|=256,lr(a,l,d,g),l.child}var AE={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function CE(a){return{baseLanes:a,cachePool:O1()}}function IE(a,l,d){return a=a!==null?a.childLanes&~d:0,l&&(a|=Ui),a}function YP(a,l,d){var g=l.pendingProps,T=!1,w=(l.flags&128)!==0,P;if((P=w)||(P=a!==null&&a.memoizedState===null?!1:(Ln.current&2)!==0),P&&(T=!0,l.flags&=-129),P=(l.flags&32)!==0,l.flags&=-33,a===null){if(_t){if(T?Pa(l):Ma(),_t){var L=un,K;if(K=L){e:{for(K=L,L=ko;K.nodeType!==8;){if(!L){L=null;break e}if(K=so(K.nextSibling),K===null){L=null;break e}}L=K}L!==null?(l.memoizedState={dehydrated:L,treeContext:ru!==null?{id:Es,overflow:ws}:null,retryLane:536870912,hydrationErrors:null},K=ri(18,null,null,0),K.stateNode=L,K.return=l,l.child=K,Dr=l,un=null,K=!0):K=!1}K||su(l)}if(L=l.memoizedState,L!==null&&(L=L.dehydrated,L!==null))return cw(L)?l.lanes=32:l.lanes=536870912,null;Cs(l)}return L=g.children,g=g.fallback,T?(Ma(),T=l.mode,L=cy({mode:"hidden",children:L},T),g=nu(g,T,d,null),L.return=l,g.return=l,L.sibling=g,l.child=L,T=l.child,T.memoizedState=CE(d),T.childLanes=IE(a,P,d),l.memoizedState=AE,g):(Pa(l),xE(l,L))}if(K=a.memoizedState,K!==null&&(L=K.dehydrated,L!==null)){if(w)l.flags&256?(Pa(l),l.flags&=-257,l=RE(a,l,d)):l.memoizedState!==null?(Ma(),l.child=a.child,l.flags|=128,l=null):(Ma(),T=g.fallback,L=l.mode,g=cy({mode:"visible",children:g.children},L),T=nu(T,L,d,null),T.flags|=2,g.return=l,T.return=l,g.sibling=T,l.child=g,jc(l,a.child,null,d),g=l.child,g.memoizedState=CE(d),g.childLanes=IE(a,P,d),l.memoizedState=AE,l=T);else if(Pa(l),cw(L)){if(P=L.nextSibling&&L.nextSibling.dataset,P)var Z=P.dgst;P=Z,g=Error(r(419)),g.stack="",g.digest=P,gh({value:g,source:null,stack:null}),l=RE(a,l,d)}else if(Gn||yh(a,l,d,!1),P=(d&a.childLanes)!==0,Gn||P){if(P=Lt,P!==null&&(g=d&-d,g=(g&42)!==0?1:va(g),g=(g&(P.suspendedLanes|d))!==0?0:g,g!==0&&g!==K.retryLane))throw K.retryLane=g,Vc(a,g),li(P,a,g),BP;L.data==="$?"||jE(),l=RE(a,l,d)}else L.data==="$?"?(l.flags|=192,l.child=a.child,l=null):(a=K.treeContext,un=so(L.nextSibling),Dr=l,_t=!0,ou=null,ko=!1,a!==null&&(Oi[Vi++]=Es,Oi[Vi++]=ws,Oi[Vi++]=ru,Es=a.id,ws=a.overflow,ru=l),l=xE(l,g.children),l.flags|=4096);return l}return T?(Ma(),T=g.fallback,L=l.mode,K=a.child,Z=K.sibling,g=Ts(K,{mode:"hidden",children:g.children}),g.subtreeFlags=K.subtreeFlags&65011712,Z!==null?T=Ts(Z,T):(T=nu(T,L,d,null),T.flags|=2),T.return=l,g.return=l,g.sibling=T,l.child=g,g=T,T=l.child,L=a.child.memoizedState,L===null?L=CE(d):(K=L.cachePool,K!==null?(Z=Vn._currentValue,K=K.parent!==Z?{parent:Z,pool:Z}:K):K=O1(),L={baseLanes:L.baseLanes|d,cachePool:K}),T.memoizedState=L,T.childLanes=IE(a,P,d),l.memoizedState=AE,g):(Pa(l),d=a.child,a=d.sibling,d=Ts(d,{mode:"visible",children:g.children}),d.return=l,d.sibling=null,a!==null&&(P=l.deletions,P===null?(l.deletions=[a],l.flags|=16):P.push(a)),l.child=d,l.memoizedState=null,d)}function xE(a,l){return l=cy({mode:"visible",children:l},a.mode),l.return=a,a.child=l}function cy(a,l){return a=ri(22,a,null,l),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function RE(a,l,d){return jc(l,a.child,null,d),a=xE(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function JP(a,l,d){a.lanes|=l;var g=a.alternate;g!==null&&(g.lanes|=l),jT(a.return,l,d)}function PE(a,l,d,g,T){var w=a.memoizedState;w===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:d,tailMode:T}:(w.isBackwards=l,w.rendering=null,w.renderingStartTime=0,w.last=g,w.tail=d,w.tailMode=T)}function QP(a,l,d){var g=l.pendingProps,T=g.revealOrder,w=g.tail;if(lr(a,l,g.children,d),g=Ln.current,(g&2)!==0)g=g&1|2,l.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&JP(a,d,l);else if(a.tag===19)JP(a,d,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}g&=1}switch(ve(Ln,g),T){case"forwards":for(d=l.child,T=null;d!==null;)a=d.alternate,a!==null&&sy(a)===null&&(T=d),d=d.sibling;d=T,d===null?(T=l.child,l.child=null):(T=d.sibling,d.sibling=null),PE(l,!1,T,d,w);break;case"backwards":for(d=null,T=l.child,l.child=null;T!==null;){if(a=T.alternate,a!==null&&sy(a)===null){l.child=T;break}a=T.sibling,T.sibling=d,d=T,T=a}PE(l,!0,d,null,w);break;case"together":PE(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Is(a,l,d){if(a!==null&&(l.dependencies=a.dependencies),Va|=l.lanes,(d&l.childLanes)===0)if(a!==null){if(yh(a,l,d,!1),(d&l.childLanes)===0)return null}else return null;if(a!==null&&l.child!==a.child)throw Error(r(153));if(l.child!==null){for(a=l.child,d=Ts(a,a.pendingProps),l.child=d,d.return=l;a.sibling!==null;)a=a.sibling,d=d.sibling=Ts(a,a.pendingProps),d.return=l;d.sibling=null}return l.child}function ME(a,l){return(a.lanes&l)!==0?!0:(a=a.dependencies,!!(a!==null&&Hg(a)))}function G9(a,l,d){switch(l.tag){case 3:ft(l,l.stateNode.containerInfo),Aa(l,Vn,a.memoizedState.cache),mh();break;case 27:case 5:Ge(l);break;case 4:ft(l,l.stateNode.containerInfo);break;case 10:Aa(l,l.type,l.memoizedProps.value);break;case 13:var g=l.memoizedState;if(g!==null)return g.dehydrated!==null?(Pa(l),l.flags|=128,null):(d&l.child.childLanes)!==0?YP(a,l,d):(Pa(l),a=Is(a,l,d),a!==null?a.sibling:null);Pa(l);break;case 19:var T=(a.flags&128)!==0;if(g=(d&l.childLanes)!==0,g||(yh(a,l,d,!1),g=(d&l.childLanes)!==0),T){if(g)return QP(a,l,d);l.flags|=128}if(T=l.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),ve(Ln,Ln.current),g)break;return null;case 22:case 23:return l.lanes=0,HP(a,l,d);case 24:Aa(l,Vn,a.memoizedState.cache)}return Is(a,l,d)}function XP(a,l,d){if(a!==null)if(a.memoizedProps!==l.pendingProps)Gn=!0;else{if(!ME(a,d)&&(l.flags&128)===0)return Gn=!1,G9(a,l,d);Gn=(a.flags&131072)!==0}else Gn=!1,_t&&(l.flags&1048576)!==0&&x1(l,zg,l.index);switch(l.lanes=0,l.tag){case 16:e:{a=l.pendingProps;var g=l.elementType,T=g._init;if(g=T(g._payload),l.type=g,typeof g=="function")BT(g)?(a=fu(g,a),l.tag=1,l=jP(null,l,g,a,d)):(l.tag=0,l=SE(null,l,g,a,d));else{if(g!=null){if(T=g.$$typeof,T===U){l.tag=11,l=qP(null,l,g,a,d);break e}else if(T===k){l.tag=14,l=$P(null,l,g,a,d);break e}}throw l=Ae(g)||g,Error(r(306,l,""))}}return l;case 0:return SE(a,l,l.type,l.pendingProps,d);case 1:return g=l.type,T=fu(g,l.pendingProps),jP(a,l,g,T,d);case 3:e:{if(ft(l,l.stateNode.containerInfo),a===null)throw Error(r(387));g=l.pendingProps;var w=l.memoizedState;T=w.element,eE(a,l),Sh(l,g,null,d);var P=l.memoizedState;if(g=P.cache,Aa(l,Vn,g),g!==w.cache&&WT(l,[Vn],d,!0),bh(),g=P.element,w.isDehydrated)if(w={element:g,isDehydrated:!1,cache:P.cache},l.updateQueue.baseState=w,l.memoizedState=w,l.flags&256){l=WP(a,l,g,d);break e}else if(g!==T){T=Ni(Error(r(424)),l),gh(T),l=WP(a,l,g,d);break e}else{switch(a=l.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(un=so(a.firstChild),Dr=l,_t=!0,ou=null,ko=!0,d=PP(l,null,g,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(mh(),g===T){l=Is(a,l,d);break e}lr(a,l,g,d)}l=l.child}return l;case 26:return uy(a,l),a===null?(d=nD(l.type,null,l.pendingProps,null))?l.memoizedState=d:_t||(d=l.type,a=l.pendingProps,g=Sy(Be.current).createElement(d),g[Nn]=l,g[Sn]=a,cr(g,d,a),yn(g),l.stateNode=g):l.memoizedState=nD(l.type,a.memoizedProps,l.pendingProps,a.memoizedState),null;case 27:return Ge(l),a===null&&_t&&(g=l.stateNode=ZM(l.type,l.pendingProps,Be.current),Dr=l,ko=!0,T=un,Ba(l.type)?(fw=T,un=so(g.firstChild)):un=T),lr(a,l,l.pendingProps.children,d),uy(a,l),a===null&&(l.flags|=4194304),l.child;case 5:return a===null&&_t&&((T=g=un)&&(g=_G(g,l.type,l.pendingProps,ko),g!==null?(l.stateNode=g,Dr=l,un=so(g.firstChild),ko=!1,T=!0):T=!1),T||su(l)),Ge(l),T=l.type,w=l.pendingProps,P=a!==null?a.memoizedProps:null,g=w.children,aw(T,w)?g=null:P!==null&&aw(T,P)&&(l.flags|=32),l.memoizedState!==null&&(T=sE(a,l,L9,null,null,d),Kh._currentValue=T),uy(a,l),lr(a,l,g,d),l.child;case 6:return a===null&&_t&&((a=d=un)&&(d=TG(d,l.pendingProps,ko),d!==null?(l.stateNode=d,Dr=l,un=null,a=!0):a=!1),a||su(l)),null;case 13:return YP(a,l,d);case 4:return ft(l,l.stateNode.containerInfo),g=l.pendingProps,a===null?l.child=jc(l,null,g,d):lr(a,l,g,d),l.child;case 11:return qP(a,l,l.type,l.pendingProps,d);case 7:return lr(a,l,l.pendingProps,d),l.child;case 8:return lr(a,l,l.pendingProps.children,d),l.child;case 12:return lr(a,l,l.pendingProps.children,d),l.child;case 10:return g=l.pendingProps,Aa(l,l.type,g.value),lr(a,l,g.children,d),l.child;case 9:return T=l.type._context,g=l.pendingProps.children,lu(l),T=_r(T),g=g(T),l.flags|=1,lr(a,l,g,d),l.child;case 14:return $P(a,l,l.type,l.pendingProps,d);case 15:return zP(a,l,l.type,l.pendingProps,d);case 19:return QP(a,l,d);case 31:return g=l.pendingProps,d=l.mode,g={mode:g.mode,children:g.children},a===null?(d=cy(g,d),d.ref=l.ref,l.child=d,d.return=l,l=d):(d=Ts(a.child,g),d.ref=l.ref,l.child=d,d.return=l,l=d),l;case 22:return HP(a,l,d);case 24:return lu(l),g=_r(Vn),a===null?(T=QT(),T===null&&(T=Lt,w=YT(),T.pooledCache=w,w.refCount++,w!==null&&(T.pooledCacheLanes|=d),T=w),l.memoizedState={parent:g,cache:T},ZT(l),Aa(l,Vn,T)):((a.lanes&d)!==0&&(eE(a,l),Sh(l,null,null,d),bh()),T=a.memoizedState,w=l.memoizedState,T.parent!==g?(T={parent:g,cache:g},l.memoizedState=T,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=T),Aa(l,Vn,g)):(g=w.cache,Aa(l,Vn,g),g!==T.cache&&WT(l,[Vn],d,!0))),lr(a,l,l.pendingProps.children,d),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function xs(a){a.flags|=4}function ZP(a,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!aD(l)){if(l=Li.current,l!==null&&((ut&4194048)===ut?Oo!==null:(ut&62914560)!==ut&&(ut&536870912)===0||l!==Oo))throw Eh=XT,V1;a.flags|=8192}}function fy(a,l){l!==null&&(a.flags|=4),a.flags&16384&&(l=a.tag!==22?or():536870912,a.lanes|=l,Qc|=l)}function Mh(a,l){if(!_t)switch(a.tailMode){case"hidden":l=a.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?a.tail=null:d.sibling=null;break;case"collapsed":d=a.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:g.sibling=null}}function nn(a){var l=a.alternate!==null&&a.alternate.child===a.child,d=0,g=0;if(l)for(var T=a.child;T!==null;)d|=T.lanes|T.childLanes,g|=T.subtreeFlags&65011712,g|=T.flags&65011712,T.return=a,T=T.sibling;else for(T=a.child;T!==null;)d|=T.lanes|T.childLanes,g|=T.subtreeFlags,g|=T.flags,T.return=a,T=T.sibling;return a.subtreeFlags|=g,a.childLanes=d,l}function K9(a,l,d){var g=l.pendingProps;switch(HT(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nn(l),null;case 1:return nn(l),null;case 3:return d=l.stateNode,g=null,a!==null&&(g=a.memoizedState.cache),l.memoizedState.cache!==g&&(l.flags|=2048),Ss(Vn),we(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(a===null||a.child===null)&&(ph(l)?xs(l):a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,M1())),nn(l),null;case 26:return d=l.memoizedState,a===null?(xs(l),d!==null?(nn(l),ZP(l,d)):(nn(l),l.flags&=-16777217)):d?d!==a.memoizedState?(xs(l),nn(l),ZP(l,d)):(nn(l),l.flags&=-16777217):(a.memoizedProps!==g&&xs(l),nn(l),l.flags&=-16777217),null;case 27:je(l),d=Be.current;var T=l.type;if(a!==null&&l.stateNode!=null)a.memoizedProps!==g&&xs(l);else{if(!g){if(l.stateNode===null)throw Error(r(166));return nn(l),null}a=Oe.current,ph(l)?R1(l):(a=ZM(T,g,d),l.stateNode=a,xs(l))}return nn(l),null;case 5:if(je(l),d=l.type,a!==null&&l.stateNode!=null)a.memoizedProps!==g&&xs(l);else{if(!g){if(l.stateNode===null)throw Error(r(166));return nn(l),null}if(a=Oe.current,ph(l))R1(l);else{switch(T=Sy(Be.current),a){case 1:a=T.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:a=T.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":a=T.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":a=T.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":a=T.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof g.is=="string"?T.createElement("select",{is:g.is}):T.createElement("select"),g.multiple?a.multiple=!0:g.size&&(a.size=g.size);break;default:a=typeof g.is=="string"?T.createElement(d,{is:g.is}):T.createElement(d)}}a[Nn]=l,a[Sn]=g;e:for(T=l.child;T!==null;){if(T.tag===5||T.tag===6)a.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===l)break e;for(;T.sibling===null;){if(T.return===null||T.return===l)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}l.stateNode=a;e:switch(cr(a,d,g),d){case"button":case"input":case"select":case"textarea":a=!!g.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&xs(l)}}return nn(l),l.flags&=-16777217,null;case 6:if(a&&l.stateNode!=null)a.memoizedProps!==g&&xs(l);else{if(typeof g!="string"&&l.stateNode===null)throw Error(r(166));if(a=Be.current,ph(l)){if(a=l.stateNode,d=l.memoizedProps,g=null,T=Dr,T!==null)switch(T.tag){case 27:case 5:g=T.memoizedProps}a[Nn]=l,a=!!(a.nodeValue===d||g!==null&&g.suppressHydrationWarning===!0||KM(a.nodeValue,d)),a||su(l)}else a=Sy(a).createTextNode(g),a[Nn]=l,l.stateNode=a}return nn(l),null;case 13:if(g=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(T=ph(l),g!==null&&g.dehydrated!==null){if(a===null){if(!T)throw Error(r(318));if(T=l.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(r(317));T[Nn]=l}else mh(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;nn(l),T=!1}else T=M1(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=T),T=!0;if(!T)return l.flags&256?(Cs(l),l):(Cs(l),null)}if(Cs(l),(l.flags&128)!==0)return l.lanes=d,l;if(d=g!==null,a=a!==null&&a.memoizedState!==null,d){g=l.child,T=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(T=g.alternate.memoizedState.cachePool.pool);var w=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(w=g.memoizedState.cachePool.pool),w!==T&&(g.flags|=2048)}return d!==a&&d&&(l.child.flags|=8192),fy(l,l.updateQueue),nn(l),null;case 4:return we(),a===null&&nw(l.stateNode.containerInfo),nn(l),null;case 10:return Ss(l.type),nn(l),null;case 19:if(le(Ln),T=l.memoizedState,T===null)return nn(l),null;if(g=(l.flags&128)!==0,w=T.rendering,w===null)if(g)Mh(T,!1);else{if(cn!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(w=sy(a),w!==null){for(l.flags|=128,Mh(T,!1),a=w.updateQueue,l.updateQueue=a,fy(l,a),l.subtreeFlags=0,a=d,d=l.child;d!==null;)I1(d,a),d=d.sibling;return ve(Ln,Ln.current&1|2),l.child}a=a.sibling}T.tail!==null&&ln()>py&&(l.flags|=128,g=!0,Mh(T,!1),l.lanes=4194304)}else{if(!g)if(a=sy(w),a!==null){if(l.flags|=128,g=!0,a=a.updateQueue,l.updateQueue=a,fy(l,a),Mh(T,!0),T.tail===null&&T.tailMode==="hidden"&&!w.alternate&&!_t)return nn(l),null}else 2*ln()-T.renderingStartTime>py&&d!==536870912&&(l.flags|=128,g=!0,Mh(T,!1),l.lanes=4194304);T.isBackwards?(w.sibling=l.child,l.child=w):(a=T.last,a!==null?a.sibling=w:l.child=w,T.last=w)}return T.tail!==null?(l=T.tail,T.rendering=l,T.tail=l.sibling,T.renderingStartTime=ln(),l.sibling=null,a=Ln.current,ve(Ln,g?a&1|2:a&1),l):(nn(l),null);case 22:case 23:return Cs(l),iE(),g=l.memoizedState!==null,a!==null?a.memoizedState!==null!==g&&(l.flags|=8192):g&&(l.flags|=8192),g?(d&536870912)!==0&&(l.flags&128)===0&&(nn(l),l.subtreeFlags&6&&(l.flags|=8192)):nn(l),d=l.updateQueue,d!==null&&fy(l,d.retryQueue),d=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),g=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),g!==d&&(l.flags|=2048),a!==null&&le(uu),null;case 24:return d=null,a!==null&&(d=a.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),Ss(Vn),nn(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function j9(a,l){switch(HT(l),l.tag){case 1:return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return Ss(Vn),we(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 26:case 27:case 5:return je(l),null;case 13:if(Cs(l),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(r(340));mh()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return le(Ln),null;case 4:return we(),null;case 10:return Ss(l.type),null;case 22:case 23:return Cs(l),iE(),a!==null&&le(uu),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 24:return Ss(Vn),null;case 25:return null;default:return null}}function eM(a,l){switch(HT(l),l.tag){case 3:Ss(Vn),we();break;case 26:case 27:case 5:je(l);break;case 4:we();break;case 13:Cs(l);break;case 19:le(Ln);break;case 10:Ss(l.type);break;case 22:case 23:Cs(l),iE(),a!==null&&le(uu);break;case 24:Ss(Vn)}}function Dh(a,l){try{var d=l.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var T=g.next;d=T;do{if((d.tag&a)===a){g=void 0;var w=d.create,P=d.inst;g=w(),P.destroy=g}d=d.next}while(d!==T)}}catch(L){Ot(l,l.return,L)}}function Da(a,l,d){try{var g=l.updateQueue,T=g!==null?g.lastEffect:null;if(T!==null){var w=T.next;g=w;do{if((g.tag&a)===a){var P=g.inst,L=P.destroy;if(L!==void 0){P.destroy=void 0,T=l;var K=d,Z=L;try{Z()}catch(ae){Ot(T,K,ae)}}}g=g.next}while(g!==w)}}catch(ae){Ot(l,l.return,ae)}}function tM(a){var l=a.updateQueue;if(l!==null){var d=a.stateNode;try{$1(l,d)}catch(g){Ot(a,a.return,g)}}}function nM(a,l,d){d.props=fu(a.type,a.memoizedProps),d.state=a.memoizedState;try{d.componentWillUnmount()}catch(g){Ot(a,l,g)}}function Nh(a,l){try{var d=a.ref;if(d!==null){switch(a.tag){case 26:case 27:case 5:var g=a.stateNode;break;case 30:g=a.stateNode;break;default:g=a.stateNode}typeof d=="function"?a.refCleanup=d(g):d.current=g}}catch(T){Ot(a,l,T)}}function Vo(a,l){var d=a.ref,g=a.refCleanup;if(d!==null)if(typeof g=="function")try{g()}catch(T){Ot(a,l,T)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(T){Ot(a,l,T)}else d.current=null}function rM(a){var l=a.type,d=a.memoizedProps,g=a.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":d.autoFocus&&g.focus();break e;case"img":d.src?g.src=d.src:d.srcSet&&(g.srcset=d.srcSet)}}catch(T){Ot(a,a.return,T)}}function DE(a,l,d){try{var g=a.stateNode;pG(g,a.type,d,l),g[Sn]=l}catch(T){Ot(a,a.return,T)}}function iM(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Ba(a.type)||a.tag===4}function NE(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||iM(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Ba(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function kE(a,l,d){var g=a.tag;if(g===5||g===6)a=a.stateNode,l?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(a,l):(l=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,l.appendChild(a),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=by));else if(g!==4&&(g===27&&Ba(a.type)&&(d=a.stateNode,l=null),a=a.child,a!==null))for(kE(a,l,d),a=a.sibling;a!==null;)kE(a,l,d),a=a.sibling}function dy(a,l,d){var g=a.tag;if(g===5||g===6)a=a.stateNode,l?d.insertBefore(a,l):d.appendChild(a);else if(g!==4&&(g===27&&Ba(a.type)&&(d=a.stateNode),a=a.child,a!==null))for(dy(a,l,d),a=a.sibling;a!==null;)dy(a,l,d),a=a.sibling}function oM(a){var l=a.stateNode,d=a.memoizedProps;try{for(var g=a.type,T=l.attributes;T.length;)l.removeAttributeNode(T[0]);cr(l,g,d),l[Nn]=a,l[Sn]=d}catch(w){Ot(a,a.return,w)}}var Rs=!1,_n=!1,OE=!1,sM=typeof WeakSet=="function"?WeakSet:Set,Kn=null;function W9(a,l){if(a=a.containerInfo,ow=Py,a=y1(a),NT(a)){if("selectionStart"in a)var d={start:a.selectionStart,end:a.selectionEnd};else e:{d=(d=a.ownerDocument)&&d.defaultView||window;var g=d.getSelection&&d.getSelection();if(g&&g.rangeCount!==0){d=g.anchorNode;var T=g.anchorOffset,w=g.focusNode;g=g.focusOffset;try{d.nodeType,w.nodeType}catch{d=null;break e}var P=0,L=-1,K=-1,Z=0,ae=0,fe=a,te=null;t:for(;;){for(var ne;fe!==d||T!==0&&fe.nodeType!==3||(L=P+T),fe!==w||g!==0&&fe.nodeType!==3||(K=P+g),fe.nodeType===3&&(P+=fe.nodeValue.length),(ne=fe.firstChild)!==null;)te=fe,fe=ne;for(;;){if(fe===a)break t;if(te===d&&++Z===T&&(L=P),te===w&&++ae===g&&(K=P),(ne=fe.nextSibling)!==null)break;fe=te,te=fe.parentNode}fe=ne}d=L===-1||K===-1?null:{start:L,end:K}}else d=null}d=d||{start:0,end:0}}else d=null;for(sw={focusedElem:a,selectionRange:d},Py=!1,Kn=l;Kn!==null;)if(l=Kn,a=l.child,(l.subtreeFlags&1024)!==0&&a!==null)a.return=l,Kn=a;else for(;Kn!==null;){switch(l=Kn,w=l.alternate,a=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&w!==null){a=void 0,d=l,T=w.memoizedProps,w=w.memoizedState,g=d.stateNode;try{var He=fu(d.type,T,d.elementType===d.type);a=g.getSnapshotBeforeUpdate(He,w),g.__reactInternalSnapshotBeforeUpdate=a}catch(qe){Ot(d,d.return,qe)}}break;case 3:if((a&1024)!==0){if(a=l.stateNode.containerInfo,d=a.nodeType,d===9)uw(a);else if(d===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":uw(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=l.sibling,a!==null){a.return=l.return,Kn=a;break}Kn=l.return}}function aM(a,l,d){var g=d.flags;switch(d.tag){case 0:case 11:case 15:Na(a,d),g&4&&Dh(5,d);break;case 1:if(Na(a,d),g&4)if(a=d.stateNode,l===null)try{a.componentDidMount()}catch(P){Ot(d,d.return,P)}else{var T=fu(d.type,l.memoizedProps);l=l.memoizedState;try{a.componentDidUpdate(T,l,a.__reactInternalSnapshotBeforeUpdate)}catch(P){Ot(d,d.return,P)}}g&64&&tM(d),g&512&&Nh(d,d.return);break;case 3:if(Na(a,d),g&64&&(a=d.updateQueue,a!==null)){if(l=null,d.child!==null)switch(d.child.tag){case 27:case 5:l=d.child.stateNode;break;case 1:l=d.child.stateNode}try{$1(a,l)}catch(P){Ot(d,d.return,P)}}break;case 27:l===null&&g&4&&oM(d);case 26:case 5:Na(a,d),l===null&&g&4&&rM(d),g&512&&Nh(d,d.return);break;case 12:Na(a,d);break;case 13:Na(a,d),g&4&&cM(a,d),g&64&&(a=d.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(d=rG.bind(null,d),EG(a,d))));break;case 22:if(g=d.memoizedState!==null||Rs,!g){l=l!==null&&l.memoizedState!==null||_n,T=Rs;var w=_n;Rs=g,(_n=l)&&!w?ka(a,d,(d.subtreeFlags&8772)!==0):Na(a,d),Rs=T,_n=w}break;case 30:break;default:Na(a,d)}}function lM(a){var l=a.alternate;l!==null&&(a.alternate=null,lM(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&Ea(l)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Jt=null,Hr=!1;function Ps(a,l,d){for(d=d.child;d!==null;)uM(a,l,d),d=d.sibling}function uM(a,l,d){if(ht&&typeof ht.onCommitFiberUnmount=="function")try{ht.onCommitFiberUnmount(qt,d)}catch{}switch(d.tag){case 26:_n||Vo(d,l),Ps(a,l,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:_n||Vo(d,l);var g=Jt,T=Hr;Ba(d.type)&&(Jt=d.stateNode,Hr=!1),Ps(a,l,d),$h(d.stateNode),Jt=g,Hr=T;break;case 5:_n||Vo(d,l);case 6:if(g=Jt,T=Hr,Jt=null,Ps(a,l,d),Jt=g,Hr=T,Jt!==null)if(Hr)try{(Jt.nodeType===9?Jt.body:Jt.nodeName==="HTML"?Jt.ownerDocument.body:Jt).removeChild(d.stateNode)}catch(w){Ot(d,l,w)}else try{Jt.removeChild(d.stateNode)}catch(w){Ot(d,l,w)}break;case 18:Jt!==null&&(Hr?(a=Jt,QM(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,d.stateNode),Jh(a)):QM(Jt,d.stateNode));break;case 4:g=Jt,T=Hr,Jt=d.stateNode.containerInfo,Hr=!0,Ps(a,l,d),Jt=g,Hr=T;break;case 0:case 11:case 14:case 15:_n||Da(2,d,l),_n||Da(4,d,l),Ps(a,l,d);break;case 1:_n||(Vo(d,l),g=d.stateNode,typeof g.componentWillUnmount=="function"&&nM(d,l,g)),Ps(a,l,d);break;case 21:Ps(a,l,d);break;case 22:_n=(g=_n)||d.memoizedState!==null,Ps(a,l,d),_n=g;break;default:Ps(a,l,d)}}function cM(a,l){if(l.memoizedState===null&&(a=l.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Jh(a)}catch(d){Ot(l,l.return,d)}}function Y9(a){switch(a.tag){case 13:case 19:var l=a.stateNode;return l===null&&(l=a.stateNode=new sM),l;case 22:return a=a.stateNode,l=a._retryCache,l===null&&(l=a._retryCache=new sM),l;default:throw Error(r(435,a.tag))}}function VE(a,l){var d=Y9(a);l.forEach(function(g){var T=iG.bind(null,a,g);d.has(g)||(d.add(g),g.then(T,T))})}function ii(a,l){var d=l.deletions;if(d!==null)for(var g=0;g<d.length;g++){var T=d[g],w=a,P=l,L=P;e:for(;L!==null;){switch(L.tag){case 27:if(Ba(L.type)){Jt=L.stateNode,Hr=!1;break e}break;case 5:Jt=L.stateNode,Hr=!1;break e;case 3:case 4:Jt=L.stateNode.containerInfo,Hr=!0;break e}L=L.return}if(Jt===null)throw Error(r(160));uM(w,P,T),Jt=null,Hr=!1,w=T.alternate,w!==null&&(w.return=null),T.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)fM(l,a),l=l.sibling}var oo=null;function fM(a,l){var d=a.alternate,g=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:ii(l,a),oi(a),g&4&&(Da(3,a,a.return),Dh(3,a),Da(5,a,a.return));break;case 1:ii(l,a),oi(a),g&512&&(_n||d===null||Vo(d,d.return)),g&64&&Rs&&(a=a.updateQueue,a!==null&&(g=a.callbacks,g!==null&&(d=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=d===null?g:d.concat(g))));break;case 26:var T=oo;if(ii(l,a),oi(a),g&512&&(_n||d===null||Vo(d,d.return)),g&4){var w=d!==null?d.memoizedState:null;if(g=a.memoizedState,d===null)if(g===null)if(a.stateNode===null){e:{g=a.type,d=a.memoizedProps,T=T.ownerDocument||T;t:switch(g){case"title":w=T.getElementsByTagName("title")[0],(!w||w[Bl]||w[Nn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=T.createElement(g),T.head.insertBefore(w,T.querySelector("head > title"))),cr(w,g,d),w[Nn]=a,yn(w),g=w;break e;case"link":var P=oD("link","href",T).get(g+(d.href||""));if(P){for(var L=0;L<P.length;L++)if(w=P[L],w.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&w.getAttribute("rel")===(d.rel==null?null:d.rel)&&w.getAttribute("title")===(d.title==null?null:d.title)&&w.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){P.splice(L,1);break t}}w=T.createElement(g),cr(w,g,d),T.head.appendChild(w);break;case"meta":if(P=oD("meta","content",T).get(g+(d.content||""))){for(L=0;L<P.length;L++)if(w=P[L],w.getAttribute("content")===(d.content==null?null:""+d.content)&&w.getAttribute("name")===(d.name==null?null:d.name)&&w.getAttribute("property")===(d.property==null?null:d.property)&&w.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&w.getAttribute("charset")===(d.charSet==null?null:d.charSet)){P.splice(L,1);break t}}w=T.createElement(g),cr(w,g,d),T.head.appendChild(w);break;default:throw Error(r(468,g))}w[Nn]=a,yn(w),g=w}a.stateNode=g}else sD(T,a.type,a.stateNode);else a.stateNode=iD(T,g,a.memoizedProps);else w!==g?(w===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):w.count--,g===null?sD(T,a.type,a.stateNode):iD(T,g,a.memoizedProps)):g===null&&a.stateNode!==null&&DE(a,a.memoizedProps,d.memoizedProps)}break;case 27:ii(l,a),oi(a),g&512&&(_n||d===null||Vo(d,d.return)),d!==null&&g&4&&DE(a,a.memoizedProps,d.memoizedProps);break;case 5:if(ii(l,a),oi(a),g&512&&(_n||d===null||Vo(d,d.return)),a.flags&32){T=a.stateNode;try{Ri(T,"")}catch(ne){Ot(a,a.return,ne)}}g&4&&a.stateNode!=null&&(T=a.memoizedProps,DE(a,T,d!==null?d.memoizedProps:T)),g&1024&&(OE=!0);break;case 6:if(ii(l,a),oi(a),g&4){if(a.stateNode===null)throw Error(r(162));g=a.memoizedProps,d=a.stateNode;try{d.nodeValue=g}catch(ne){Ot(a,a.return,ne)}}break;case 3:if(Iy=null,T=oo,oo=Ay(l.containerInfo),ii(l,a),oo=T,oi(a),g&4&&d!==null&&d.memoizedState.isDehydrated)try{Jh(l.containerInfo)}catch(ne){Ot(a,a.return,ne)}OE&&(OE=!1,dM(a));break;case 4:g=oo,oo=Ay(a.stateNode.containerInfo),ii(l,a),oi(a),oo=g;break;case 12:ii(l,a),oi(a);break;case 13:ii(l,a),oi(a),a.child.flags&8192&&a.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&($E=ln()),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,VE(a,g)));break;case 22:T=a.memoizedState!==null;var K=d!==null&&d.memoizedState!==null,Z=Rs,ae=_n;if(Rs=Z||T,_n=ae||K,ii(l,a),_n=ae,Rs=Z,oi(a),g&8192)e:for(l=a.stateNode,l._visibility=T?l._visibility&-2:l._visibility|1,T&&(d===null||K||Rs||_n||du(a)),d=null,l=a;;){if(l.tag===5||l.tag===26){if(d===null){K=d=l;try{if(w=K.stateNode,T)P=w.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none";else{L=K.stateNode;var fe=K.memoizedProps.style,te=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;L.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(ne){Ot(K,K.return,ne)}}}else if(l.tag===6){if(d===null){K=l;try{K.stateNode.nodeValue=T?"":K.memoizedProps}catch(ne){Ot(K,K.return,ne)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===a)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break e;for(;l.sibling===null;){if(l.return===null||l.return===a)break e;d===l&&(d=null),l=l.return}d===l&&(d=null),l.sibling.return=l.return,l=l.sibling}g&4&&(g=a.updateQueue,g!==null&&(d=g.retryQueue,d!==null&&(g.retryQueue=null,VE(a,d))));break;case 19:ii(l,a),oi(a),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,VE(a,g)));break;case 30:break;case 21:break;default:ii(l,a),oi(a)}}function oi(a){var l=a.flags;if(l&2){try{for(var d,g=a.return;g!==null;){if(iM(g)){d=g;break}g=g.return}if(d==null)throw Error(r(160));switch(d.tag){case 27:var T=d.stateNode,w=NE(a);dy(a,w,T);break;case 5:var P=d.stateNode;d.flags&32&&(Ri(P,""),d.flags&=-33);var L=NE(a);dy(a,L,P);break;case 3:case 4:var K=d.stateNode.containerInfo,Z=NE(a);kE(a,Z,K);break;default:throw Error(r(161))}}catch(ae){Ot(a,a.return,ae)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function dM(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var l=a;dM(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),a=a.sibling}}function Na(a,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)aM(a,l.alternate,l),l=l.sibling}function du(a){for(a=a.child;a!==null;){var l=a;switch(l.tag){case 0:case 11:case 14:case 15:Da(4,l,l.return),du(l);break;case 1:Vo(l,l.return);var d=l.stateNode;typeof d.componentWillUnmount=="function"&&nM(l,l.return,d),du(l);break;case 27:$h(l.stateNode);case 26:case 5:Vo(l,l.return),du(l);break;case 22:l.memoizedState===null&&du(l);break;case 30:du(l);break;default:du(l)}a=a.sibling}}function ka(a,l,d){for(d=d&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var g=l.alternate,T=a,w=l,P=w.flags;switch(w.tag){case 0:case 11:case 15:ka(T,w,d),Dh(4,w);break;case 1:if(ka(T,w,d),g=w,T=g.stateNode,typeof T.componentDidMount=="function")try{T.componentDidMount()}catch(Z){Ot(g,g.return,Z)}if(g=w,T=g.updateQueue,T!==null){var L=g.stateNode;try{var K=T.shared.hiddenCallbacks;if(K!==null)for(T.shared.hiddenCallbacks=null,T=0;T<K.length;T++)q1(K[T],L)}catch(Z){Ot(g,g.return,Z)}}d&&P&64&&tM(w),Nh(w,w.return);break;case 27:oM(w);case 26:case 5:ka(T,w,d),d&&g===null&&P&4&&rM(w),Nh(w,w.return);break;case 12:ka(T,w,d);break;case 13:ka(T,w,d),d&&P&4&&cM(T,w);break;case 22:w.memoizedState===null&&ka(T,w,d),Nh(w,w.return);break;case 30:break;default:ka(T,w,d)}l=l.sibling}}function LE(a,l){var d=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),a=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(a=l.memoizedState.cachePool.pool),a!==d&&(a!=null&&a.refCount++,d!=null&&vh(d))}function UE(a,l){a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&vh(a))}function Lo(a,l,d,g){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)hM(a,l,d,g),l=l.sibling}function hM(a,l,d,g){var T=l.flags;switch(l.tag){case 0:case 11:case 15:Lo(a,l,d,g),T&2048&&Dh(9,l);break;case 1:Lo(a,l,d,g);break;case 3:Lo(a,l,d,g),T&2048&&(a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&vh(a)));break;case 12:if(T&2048){Lo(a,l,d,g),a=l.stateNode;try{var w=l.memoizedProps,P=w.id,L=w.onPostCommit;typeof L=="function"&&L(P,l.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(K){Ot(l,l.return,K)}}else Lo(a,l,d,g);break;case 13:Lo(a,l,d,g);break;case 23:break;case 22:w=l.stateNode,P=l.alternate,l.memoizedState!==null?w._visibility&2?Lo(a,l,d,g):kh(a,l):w._visibility&2?Lo(a,l,d,g):(w._visibility|=2,Wc(a,l,d,g,(l.subtreeFlags&10256)!==0)),T&2048&&LE(P,l);break;case 24:Lo(a,l,d,g),T&2048&&UE(l.alternate,l);break;default:Lo(a,l,d,g)}}function Wc(a,l,d,g,T){for(T=T&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var w=a,P=l,L=d,K=g,Z=P.flags;switch(P.tag){case 0:case 11:case 15:Wc(w,P,L,K,T),Dh(8,P);break;case 23:break;case 22:var ae=P.stateNode;P.memoizedState!==null?ae._visibility&2?Wc(w,P,L,K,T):kh(w,P):(ae._visibility|=2,Wc(w,P,L,K,T)),T&&Z&2048&&LE(P.alternate,P);break;case 24:Wc(w,P,L,K,T),T&&Z&2048&&UE(P.alternate,P);break;default:Wc(w,P,L,K,T)}l=l.sibling}}function kh(a,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var d=a,g=l,T=g.flags;switch(g.tag){case 22:kh(d,g),T&2048&&LE(g.alternate,g);break;case 24:kh(d,g),T&2048&&UE(g.alternate,g);break;default:kh(d,g)}l=l.sibling}}var Oh=8192;function Yc(a){if(a.subtreeFlags&Oh)for(a=a.child;a!==null;)pM(a),a=a.sibling}function pM(a){switch(a.tag){case 26:Yc(a),a.flags&Oh&&a.memoizedState!==null&&kG(oo,a.memoizedState,a.memoizedProps);break;case 5:Yc(a);break;case 3:case 4:var l=oo;oo=Ay(a.stateNode.containerInfo),Yc(a),oo=l;break;case 22:a.memoizedState===null&&(l=a.alternate,l!==null&&l.memoizedState!==null?(l=Oh,Oh=16777216,Yc(a),Oh=l):Yc(a));break;default:Yc(a)}}function mM(a){var l=a.alternate;if(l!==null&&(a=l.child,a!==null)){l.child=null;do l=a.sibling,a.sibling=null,a=l;while(a!==null)}}function Vh(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var g=l[d];Kn=g,yM(g,a)}mM(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)gM(a),a=a.sibling}function gM(a){switch(a.tag){case 0:case 11:case 15:Vh(a),a.flags&2048&&Da(9,a,a.return);break;case 3:Vh(a);break;case 12:Vh(a);break;case 22:var l=a.stateNode;a.memoizedState!==null&&l._visibility&2&&(a.return===null||a.return.tag!==13)?(l._visibility&=-3,hy(a)):Vh(a);break;default:Vh(a)}}function hy(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var g=l[d];Kn=g,yM(g,a)}mM(a)}for(a=a.child;a!==null;){switch(l=a,l.tag){case 0:case 11:case 15:Da(8,l,l.return),hy(l);break;case 22:d=l.stateNode,d._visibility&2&&(d._visibility&=-3,hy(l));break;default:hy(l)}a=a.sibling}}function yM(a,l){for(;Kn!==null;){var d=Kn;switch(d.tag){case 0:case 11:case 15:Da(8,d,l);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var g=d.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:vh(d.memoizedState.cache)}if(g=d.child,g!==null)g.return=d,Kn=g;else e:for(d=a;Kn!==null;){g=Kn;var T=g.sibling,w=g.return;if(lM(g),g===d){Kn=null;break e}if(T!==null){T.return=w,Kn=T;break e}Kn=w}}}var J9={getCacheForType:function(a){var l=_r(Vn),d=l.data.get(a);return d===void 0&&(d=a(),l.data.set(a,d)),d}},Q9=typeof WeakMap=="function"?WeakMap:Map,bt=0,Lt=null,nt=null,ut=0,St=0,si=null,Oa=!1,Jc=!1,FE=!1,Ms=0,cn=0,Va=0,hu=0,BE=0,Ui=0,Qc=0,Lh=null,Gr=null,qE=!1,$E=0,py=1/0,my=null,La=null,ur=0,Ua=null,Xc=null,Zc=0,zE=0,HE=null,vM=null,Uh=0,GE=null;function ai(){if((bt&2)!==0&&ut!==0)return ut&-ut;if(ee.T!==null){var a=Bc;return a!==0?a:XE()}return _a()}function _M(){Ui===0&&(Ui=(ut&536870912)===0||_t?Ii():536870912);var a=Li.current;return a!==null&&(a.flags|=32),Ui}function li(a,l,d){(a===Lt&&(St===2||St===9)||a.cancelPendingCommit!==null)&&(ef(a,0),Fa(a,ut,Ui,!1)),ei(a,d),((bt&2)===0||a!==Lt)&&(a===Lt&&((bt&2)===0&&(hu|=d),cn===4&&Fa(a,ut,Ui,!1)),Uo(a))}function TM(a,l,d){if((bt&6)!==0)throw Error(r(327));var g=!d&&(l&124)===0&&(l&a.expiredLanes)===0||mt(a,l),T=g?eG(a,l):WE(a,l,!0),w=g;do{if(T===0){Jc&&!g&&Fa(a,l,0,!1);break}else{if(d=a.current.alternate,w&&!X9(d)){T=WE(a,l,!1),w=!1;continue}if(T===2){if(w=l,a.errorRecoveryDisabledLanes&w)var P=0;else P=a.pendingLanes&-536870913,P=P!==0?P:P&536870912?536870912:0;if(P!==0){l=P;e:{var L=a;T=Lh;var K=L.current.memoizedState.isDehydrated;if(K&&(ef(L,P).flags|=256),P=WE(L,P,!1),P!==2){if(FE&&!K){L.errorRecoveryDisabledLanes|=w,hu|=w,T=4;break e}w=Gr,Gr=T,w!==null&&(Gr===null?Gr=w:Gr.push.apply(Gr,w))}T=P}if(w=!1,T!==2)continue}}if(T===1){ef(a,0),Fa(a,l,0,!0);break}e:{switch(g=a,w=T,w){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:Fa(g,l,Ui,!Oa);break e;case 2:Gr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(T=$E+300-ln(),10<T)){if(Fa(g,l,Ui,!Oa),Qe(g,0,!0)!==0)break e;g.timeoutHandle=YM(EM.bind(null,g,d,Gr,my,qE,l,Ui,hu,Qc,Oa,w,2,-0,0),T);break e}EM(g,d,Gr,my,qE,l,Ui,hu,Qc,Oa,w,0,-0,0)}}break}while(!0);Uo(a)}function EM(a,l,d,g,T,w,P,L,K,Z,ae,fe,te,ne){if(a.timeoutHandle=-1,fe=l.subtreeFlags,(fe&8192||(fe&16785408)===16785408)&&(Gh={stylesheets:null,count:0,unsuspend:NG},pM(l),fe=OG(),fe!==null)){a.cancelPendingCommit=fe(xM.bind(null,a,l,w,d,g,T,P,L,K,ae,1,te,ne)),Fa(a,w,P,!Z);return}xM(a,l,w,d,g,T,P,L,K)}function X9(a){for(var l=a;;){var d=l.tag;if((d===0||d===11||d===15)&&l.flags&16384&&(d=l.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var g=0;g<d.length;g++){var T=d[g],w=T.getSnapshot;T=T.value;try{if(!ni(w(),T))return!1}catch{return!1}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Fa(a,l,d,g){l&=~BE,l&=~hu,a.suspendedLanes|=l,a.pingedLanes&=~l,g&&(a.warmLanes|=l),g=a.expirationTimes;for(var T=l;0<T;){var w=31-pe(T),P=1<<w;g[w]=-1,T&=~P}d!==0&&bo(a,d,l)}function gy(){return(bt&6)===0?(Fh(0),!1):!0}function KE(){if(nt!==null){if(St===0)var a=nt.return;else a=nt,bs=au=null,uE(a),Kc=null,Rh=0,a=nt;for(;a!==null;)eM(a.alternate,a),a=a.return;nt=null}}function ef(a,l){var d=a.timeoutHandle;d!==-1&&(a.timeoutHandle=-1,gG(d)),d=a.cancelPendingCommit,d!==null&&(a.cancelPendingCommit=null,d()),KE(),Lt=a,nt=d=Ts(a.current,null),ut=l,St=0,si=null,Oa=!1,Jc=mt(a,l),FE=!1,Qc=Ui=BE=hu=Va=cn=0,Gr=Lh=null,qE=!1,(l&8)!==0&&(l|=l&32);var g=a.entangledLanes;if(g!==0)for(a=a.entanglements,g&=l;0<g;){var T=31-pe(g),w=1<<T;l|=a[T],g&=~w}return Ms=l,Ug(),d}function wM(a,l){Ze=null,ee.H=ry,l===Th||l===jg?(l=F1(),St=3):l===V1?(l=F1(),St=4):St=l===BP?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,si=l,nt===null&&(cn=1,ly(a,Ni(l,a.current)))}function bM(){var a=ee.H;return ee.H=ry,a===null?ry:a}function SM(){var a=ee.A;return ee.A=J9,a}function jE(){cn=4,Oa||(ut&4194048)!==ut&&Li.current!==null||(Jc=!0),(Va&134217727)===0&&(hu&134217727)===0||Lt===null||Fa(Lt,ut,Ui,!1)}function WE(a,l,d){var g=bt;bt|=2;var T=bM(),w=SM();(Lt!==a||ut!==l)&&(my=null,ef(a,l)),l=!1;var P=cn;e:do try{if(St!==0&&nt!==null){var L=nt,K=si;switch(St){case 8:KE(),P=6;break e;case 3:case 2:case 9:case 6:Li.current===null&&(l=!0);var Z=St;if(St=0,si=null,tf(a,L,K,Z),d&&Jc){P=0;break e}break;default:Z=St,St=0,si=null,tf(a,L,K,Z)}}Z9(),P=cn;break}catch(ae){wM(a,ae)}while(!0);return l&&a.shellSuspendCounter++,bs=au=null,bt=g,ee.H=T,ee.A=w,nt===null&&(Lt=null,ut=0,Ug()),P}function Z9(){for(;nt!==null;)AM(nt)}function eG(a,l){var d=bt;bt|=2;var g=bM(),T=SM();Lt!==a||ut!==l?(my=null,py=ln()+500,ef(a,l)):Jc=mt(a,l);e:do try{if(St!==0&&nt!==null){l=nt;var w=si;t:switch(St){case 1:St=0,si=null,tf(a,l,w,1);break;case 2:case 9:if(L1(w)){St=0,si=null,CM(l);break}l=function(){St!==2&&St!==9||Lt!==a||(St=7),Uo(a)},w.then(l,l);break e;case 3:St=7;break e;case 4:St=5;break e;case 7:L1(w)?(St=0,si=null,CM(l)):(St=0,si=null,tf(a,l,w,7));break;case 5:var P=null;switch(nt.tag){case 26:P=nt.memoizedState;case 5:case 27:var L=nt;if(!P||aD(P)){St=0,si=null;var K=L.sibling;if(K!==null)nt=K;else{var Z=L.return;Z!==null?(nt=Z,yy(Z)):nt=null}break t}}St=0,si=null,tf(a,l,w,5);break;case 6:St=0,si=null,tf(a,l,w,6);break;case 8:KE(),cn=6;break e;default:throw Error(r(462))}}tG();break}catch(ae){wM(a,ae)}while(!0);return bs=au=null,ee.H=g,ee.A=T,bt=d,nt!==null?0:(Lt=null,ut=0,Ug(),cn)}function tG(){for(;nt!==null&&!mn();)AM(nt)}function AM(a){var l=XP(a.alternate,a,Ms);a.memoizedProps=a.pendingProps,l===null?yy(a):nt=l}function CM(a){var l=a,d=l.alternate;switch(l.tag){case 15:case 0:l=KP(d,l,l.pendingProps,l.type,void 0,ut);break;case 11:l=KP(d,l,l.pendingProps,l.type.render,l.ref,ut);break;case 5:uE(l);default:eM(d,l),l=nt=I1(l,Ms),l=XP(d,l,Ms)}a.memoizedProps=a.pendingProps,l===null?yy(a):nt=l}function tf(a,l,d,g){bs=au=null,uE(l),Kc=null,Rh=0;var T=l.return;try{if(H9(a,T,l,d,ut)){cn=1,ly(a,Ni(d,a.current)),nt=null;return}}catch(w){if(T!==null)throw nt=T,w;cn=1,ly(a,Ni(d,a.current)),nt=null;return}l.flags&32768?(_t||g===1?a=!0:Jc||(ut&536870912)!==0?a=!1:(Oa=a=!0,(g===2||g===9||g===3||g===6)&&(g=Li.current,g!==null&&g.tag===13&&(g.flags|=16384))),IM(l,a)):yy(l)}function yy(a){var l=a;do{if((l.flags&32768)!==0){IM(l,Oa);return}a=l.return;var d=K9(l.alternate,l,Ms);if(d!==null){nt=d;return}if(l=l.sibling,l!==null){nt=l;return}nt=l=a}while(l!==null);cn===0&&(cn=5)}function IM(a,l){do{var d=j9(a.alternate,a);if(d!==null){d.flags&=32767,nt=d;return}if(d=a.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!l&&(a=a.sibling,a!==null)){nt=a;return}nt=a=d}while(a!==null);cn=6,nt=null}function xM(a,l,d,g,T,w,P,L,K){a.cancelPendingCommit=null;do vy();while(ur!==0);if((bt&6)!==0)throw Error(r(327));if(l!==null){if(l===a.current)throw Error(r(177));if(w=l.lanes|l.childLanes,w|=UT,ya(a,d,w,P,L,K),a===Lt&&(nt=Lt=null,ut=0),Xc=l,Ua=a,Zc=d,zE=w,HE=T,vM=g,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,oG(Ci,function(){return NM(),null})):(a.callbackNode=null,a.callbackPriority=0),g=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||g){g=ee.T,ee.T=null,T=he.p,he.p=2,P=bt,bt|=4;try{W9(a,l,d)}finally{bt=P,he.p=T,ee.T=g}}ur=1,RM(),PM(),MM()}}function RM(){if(ur===1){ur=0;var a=Ua,l=Xc,d=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||d){d=ee.T,ee.T=null;var g=he.p;he.p=2;var T=bt;bt|=4;try{fM(l,a);var w=sw,P=y1(a.containerInfo),L=w.focusedElem,K=w.selectionRange;if(P!==L&&L&&L.ownerDocument&&g1(L.ownerDocument.documentElement,L)){if(K!==null&&NT(L)){var Z=K.start,ae=K.end;if(ae===void 0&&(ae=Z),"selectionStart"in L)L.selectionStart=Z,L.selectionEnd=Math.min(ae,L.value.length);else{var fe=L.ownerDocument||document,te=fe&&fe.defaultView||window;if(te.getSelection){var ne=te.getSelection(),He=L.textContent.length,qe=Math.min(K.start,He),Nt=K.end===void 0?qe:Math.min(K.end,He);!ne.extend&&qe>Nt&&(P=Nt,Nt=qe,qe=P);var Y=m1(L,qe),W=m1(L,Nt);if(Y&&W&&(ne.rangeCount!==1||ne.anchorNode!==Y.node||ne.anchorOffset!==Y.offset||ne.focusNode!==W.node||ne.focusOffset!==W.offset)){var X=fe.createRange();X.setStart(Y.node,Y.offset),ne.removeAllRanges(),qe>Nt?(ne.addRange(X),ne.extend(W.node,W.offset)):(X.setEnd(W.node,W.offset),ne.addRange(X))}}}}for(fe=[],ne=L;ne=ne.parentNode;)ne.nodeType===1&&fe.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<fe.length;L++){var ue=fe[L];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}Py=!!ow,sw=ow=null}finally{bt=T,he.p=g,ee.T=d}}a.current=l,ur=2}}function PM(){if(ur===2){ur=0;var a=Ua,l=Xc,d=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||d){d=ee.T,ee.T=null;var g=he.p;he.p=2;var T=bt;bt|=4;try{aM(a,l.alternate,l)}finally{bt=T,he.p=g,ee.T=d}}ur=3}}function MM(){if(ur===4||ur===3){ur=0,bn();var a=Ua,l=Xc,d=Zc,g=vM;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?ur=5:(ur=0,Xc=Ua=null,DM(a,a.pendingLanes));var T=a.pendingLanes;if(T===0&&(La=null),vc(d),l=l.stateNode,ht&&typeof ht.onCommitFiberRoot=="function")try{ht.onCommitFiberRoot(qt,l,void 0,(l.current.flags&128)===128)}catch{}if(g!==null){l=ee.T,T=he.p,he.p=2,ee.T=null;try{for(var w=a.onRecoverableError,P=0;P<g.length;P++){var L=g[P];w(L.value,{componentStack:L.stack})}}finally{ee.T=l,he.p=T}}(Zc&3)!==0&&vy(),Uo(a),T=a.pendingLanes,(d&4194090)!==0&&(T&42)!==0?a===GE?Uh++:(Uh=0,GE=a):Uh=0,Fh(0)}}function DM(a,l){(a.pooledCacheLanes&=l)===0&&(l=a.pooledCache,l!=null&&(a.pooledCache=null,vh(l)))}function vy(a){return RM(),PM(),MM(),NM()}function NM(){if(ur!==5)return!1;var a=Ua,l=zE;zE=0;var d=vc(Zc),g=ee.T,T=he.p;try{he.p=32>d?32:d,ee.T=null,d=HE,HE=null;var w=Ua,P=Zc;if(ur=0,Xc=Ua=null,Zc=0,(bt&6)!==0)throw Error(r(331));var L=bt;if(bt|=4,gM(w.current),hM(w,w.current,P,d),bt=L,Fh(0,!1),ht&&typeof ht.onPostCommitFiberRoot=="function")try{ht.onPostCommitFiberRoot(qt,w)}catch{}return!0}finally{he.p=T,ee.T=g,DM(a,l)}}function kM(a,l,d){l=Ni(d,l),l=bE(a.stateNode,l,2),a=xa(a,l,2),a!==null&&(ei(a,2),Uo(a))}function Ot(a,l,d){if(a.tag===3)kM(a,a,d);else for(;l!==null;){if(l.tag===3){kM(l,a,d);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(La===null||!La.has(g))){a=Ni(d,a),d=UP(2),g=xa(l,d,2),g!==null&&(FP(d,g,l,a),ei(g,2),Uo(g));break}}l=l.return}}function YE(a,l,d){var g=a.pingCache;if(g===null){g=a.pingCache=new Q9;var T=new Set;g.set(l,T)}else T=g.get(l),T===void 0&&(T=new Set,g.set(l,T));T.has(d)||(FE=!0,T.add(d),a=nG.bind(null,a,l,d),l.then(a,a))}function nG(a,l,d){var g=a.pingCache;g!==null&&g.delete(l),a.pingedLanes|=a.suspendedLanes&d,a.warmLanes&=~d,Lt===a&&(ut&d)===d&&(cn===4||cn===3&&(ut&62914560)===ut&&300>ln()-$E?(bt&2)===0&&ef(a,0):BE|=d,Qc===ut&&(Qc=0)),Uo(a)}function OM(a,l){l===0&&(l=or()),a=Vc(a,l),a!==null&&(ei(a,l),Uo(a))}function rG(a){var l=a.memoizedState,d=0;l!==null&&(d=l.retryLane),OM(a,d)}function iG(a,l){var d=0;switch(a.tag){case 13:var g=a.stateNode,T=a.memoizedState;T!==null&&(d=T.retryLane);break;case 19:g=a.stateNode;break;case 22:g=a.stateNode._retryCache;break;default:throw Error(r(314))}g!==null&&g.delete(l),OM(a,d)}function oG(a,l){return Wt(a,l)}var _y=null,nf=null,JE=!1,Ty=!1,QE=!1,pu=0;function Uo(a){a!==nf&&a.next===null&&(nf===null?_y=nf=a:nf=nf.next=a),Ty=!0,JE||(JE=!0,aG())}function Fh(a,l){if(!QE&&Ty){QE=!0;do for(var d=!1,g=_y;g!==null;){if(a!==0){var T=g.pendingLanes;if(T===0)var w=0;else{var P=g.suspendedLanes,L=g.pingedLanes;w=(1<<31-pe(42|a)+1)-1,w&=T&~(P&~L),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(d=!0,FM(g,w))}else w=ut,w=Qe(g,g===Lt?w:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(w&3)===0||mt(g,w)||(d=!0,FM(g,w));g=g.next}while(d);QE=!1}}function sG(){VM()}function VM(){Ty=JE=!1;var a=0;pu!==0&&(mG()&&(a=pu),pu=0);for(var l=ln(),d=null,g=_y;g!==null;){var T=g.next,w=LM(g,l);w===0?(g.next=null,d===null?_y=T:d.next=T,T===null&&(nf=d)):(d=g,(a!==0||(w&3)!==0)&&(Ty=!0)),g=T}Fh(a)}function LM(a,l){for(var d=a.suspendedLanes,g=a.pingedLanes,T=a.expirationTimes,w=a.pendingLanes&-62914561;0<w;){var P=31-pe(w),L=1<<P,K=T[P];K===-1?((L&d)===0||(L&g)!==0)&&(T[P]=vr(L,l)):K<=l&&(a.expiredLanes|=L),w&=~L}if(l=Lt,d=ut,d=Qe(a,a===l?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),g=a.callbackNode,d===0||a===l&&(St===2||St===9)||a.cancelPendingCommit!==null)return g!==null&&g!==null&&et(g),a.callbackNode=null,a.callbackPriority=0;if((d&3)===0||mt(a,d)){if(l=d&-d,l===a.callbackPriority)return l;switch(g!==null&&et(g),vc(d)){case 2:case 8:d=wo;break;case 32:d=Ci;break;case 268435456:d=us;break;default:d=Ci}return g=UM.bind(null,a),d=Wt(d,g),a.callbackPriority=l,a.callbackNode=d,l}return g!==null&&g!==null&&et(g),a.callbackPriority=2,a.callbackNode=null,2}function UM(a,l){if(ur!==0&&ur!==5)return a.callbackNode=null,a.callbackPriority=0,null;var d=a.callbackNode;if(vy()&&a.callbackNode!==d)return null;var g=ut;return g=Qe(a,a===Lt?g:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),g===0?null:(TM(a,g,l),LM(a,ln()),a.callbackNode!=null&&a.callbackNode===d?UM.bind(null,a):null)}function FM(a,l){if(vy())return null;TM(a,l,!0)}function aG(){yG(function(){(bt&6)!==0?Wt(vt,sG):VM()})}function XE(){return pu===0&&(pu=Ii()),pu}function BM(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Sc(""+a)}function qM(a,l){var d=l.ownerDocument.createElement("input");return d.name=l.name,d.value=l.value,a.id&&d.setAttribute("form",a.id),l.parentNode.insertBefore(d,l),a=new FormData(a),d.parentNode.removeChild(d),a}function lG(a,l,d,g,T){if(l==="submit"&&d&&d.stateNode===T){var w=BM((T[Sn]||null).action),P=g.submitter;P&&(l=(l=P[Sn]||null)?BM(l.formAction):P.getAttribute("formAction"),l!==null&&(w=l,P=null));var L=new Ac("action","action",null,g,T);a.push({event:L,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(pu!==0){var K=P?qM(T,P):new FormData(T);vE(d,{pending:!0,data:K,method:T.method,action:w},null,K)}}else typeof w=="function"&&(L.preventDefault(),K=P?qM(T,P):new FormData(T),vE(d,{pending:!0,data:K,method:T.method,action:w},w,K))},currentTarget:T}]})}}for(var ZE=0;ZE<LT.length;ZE++){var ew=LT[ZE],uG=ew.toLowerCase(),cG=ew[0].toUpperCase()+ew.slice(1);io(uG,"on"+cG)}io(T1,"onAnimationEnd"),io(E1,"onAnimationIteration"),io(w1,"onAnimationStart"),io("dblclick","onDoubleClick"),io("focusin","onFocus"),io("focusout","onBlur"),io(I9,"onTransitionRun"),io(x9,"onTransitionStart"),io(R9,"onTransitionCancel"),io(b1,"onTransitionEnd"),fs("onMouseEnter",["mouseout","mouseover"]),fs("onMouseLeave",["mouseout","mouseover"]),fs("onPointerEnter",["pointerout","pointerover"]),fs("onPointerLeave",["pointerout","pointerover"]),no("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),no("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),no("onBeforeInput",["compositionend","keypress","textInput","paste"]),no("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),no("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),no("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fG=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bh));function $M(a,l){l=(l&4)!==0;for(var d=0;d<a.length;d++){var g=a[d],T=g.event;g=g.listeners;e:{var w=void 0;if(l)for(var P=g.length-1;0<=P;P--){var L=g[P],K=L.instance,Z=L.currentTarget;if(L=L.listener,K!==w&&T.isPropagationStopped())break e;w=L,T.currentTarget=Z;try{w(T)}catch(ae){ay(ae)}T.currentTarget=null,w=K}else for(P=0;P<g.length;P++){if(L=g[P],K=L.instance,Z=L.currentTarget,L=L.listener,K!==w&&T.isPropagationStopped())break e;w=L,T.currentTarget=Z;try{w(T)}catch(ae){ay(ae)}T.currentTarget=null,w=K}}}}function rt(a,l){var d=l[Qd];d===void 0&&(d=l[Qd]=new Set);var g=a+"__bubble";d.has(g)||(zM(l,a,2,!1),d.add(g))}function tw(a,l,d){var g=0;l&&(g|=4),zM(d,a,g,l)}var Ey="_reactListening"+Math.random().toString(36).slice(2);function nw(a){if(!a[Ey]){a[Ey]=!0,Xd.forEach(function(d){d!=="selectionchange"&&(fG.has(d)||tw(d,!1,a),tw(d,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[Ey]||(l[Ey]=!0,tw("selectionchange",!1,l))}}function zM(a,l,d,g){switch(hD(l)){case 2:var T=UG;break;case 8:T=FG;break;default:T=gw}d=T.bind(null,l,d,a),T=void 0,!Mi||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(T=!0),g?T!==void 0?a.addEventListener(l,d,{capture:!0,passive:T}):a.addEventListener(l,d,!0):T!==void 0?a.addEventListener(l,d,{passive:T}):a.addEventListener(l,d,!1)}function rw(a,l,d,g,T){var w=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var P=g.tag;if(P===3||P===4){var L=g.stateNode.containerInfo;if(L===T)break;if(P===4)for(P=g.return;P!==null;){var K=P.tag;if((K===3||K===4)&&P.stateNode.containerInfo===T)return;P=P.return}for(;L!==null;){if(P=cs(L),P===null)return;if(K=P.tag,K===5||K===6||K===26||K===27){g=w=P;continue e}L=L.parentNode}}g=g.return}bg(function(){var Z=w,ae=Pi(d),fe=[];e:{var te=S1.get(a);if(te!==void 0){var ne=Ac,He=a;switch(a){case"keypress":if(Ro(d)===0)break e;case"keydown":case"keyup":ne=Mc;break;case"focusin":He="focus",ne=xc;break;case"focusout":He="blur",ne=xc;break;case"beforeblur":case"afterblur":ne=xc;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=Di;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=RT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=Mg;break;case T1:case E1:case w1:ne=Rc;break;case b1:ne=Ng;break;case"scroll":case"scrollend":ne=Sg;break;case"wheel":ne=Dc;break;case"copy":case"cut":case"paste":ne=Pc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=ch;break;case"toggle":case"beforetoggle":ne=Og}var qe=(l&4)!==0,Nt=!qe&&(a==="scroll"||a==="scrollend"),Y=qe?te!==null?te+"Capture":null:te;qe=[];for(var W=Z,X;W!==null;){var ue=W;if(X=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||X===null||Y===null||(ue=jl(W,Y),ue!=null&&qe.push(qh(W,ue,X))),Nt)break;W=W.return}0<qe.length&&(te=new ne(te,He,null,d,ae),fe.push({event:te,listeners:qe}))}}if((l&7)===0){e:{if(te=a==="mouseover"||a==="pointerover",ne=a==="mouseout"||a==="pointerout",te&&d!==ps&&(He=d.relatedTarget||d.fromElement)&&(cs(He)||He[xi]))break e;if((ne||te)&&(te=ae.window===ae?ae:(te=ae.ownerDocument)?te.defaultView||te.parentWindow:window,ne?(He=d.relatedTarget||d.toElement,ne=Z,He=He?cs(He):null,He!==null&&(Nt=o(He),qe=He.tag,He!==Nt||qe!==5&&qe!==27&&qe!==6)&&(He=null)):(ne=null,He=Z),ne!==He)){if(qe=Di,ue="onMouseLeave",Y="onMouseEnter",W="mouse",(a==="pointerout"||a==="pointerover")&&(qe=ch,ue="onPointerLeave",Y="onPointerEnter",W="pointer"),Nt=ne==null?te:Ao(ne),X=He==null?te:Ao(He),te=new qe(ue,W+"leave",ne,d,ae),te.target=Nt,te.relatedTarget=X,ue=null,cs(ae)===Z&&(qe=new qe(Y,W+"enter",He,d,ae),qe.target=X,qe.relatedTarget=Nt,ue=qe),Nt=ue,ne&&He)t:{for(qe=ne,Y=He,W=0,X=qe;X;X=rf(X))W++;for(X=0,ue=Y;ue;ue=rf(ue))X++;for(;0<W-X;)qe=rf(qe),W--;for(;0<X-W;)Y=rf(Y),X--;for(;W--;){if(qe===Y||Y!==null&&qe===Y.alternate)break t;qe=rf(qe),Y=rf(Y)}qe=null}else qe=null;ne!==null&&HM(fe,te,ne,qe,!1),He!==null&&Nt!==null&&HM(fe,Nt,He,qe,!0)}}e:{if(te=Z?Ao(Z):window,ne=te.nodeName&&te.nodeName.toLowerCase(),ne==="select"||ne==="input"&&te.type==="file")var De=u1;else if(On(te))if(c1)De=S9;else{De=w9;var tt=E9}else ne=te.nodeName,!ne||ne.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?Z&&rh(Z.elementType)&&(De=u1):De=b9;if(De&&(De=De(a,Z))){_s(fe,De,d,ae);break e}tt&&tt(a,te,Z),a==="focusout"&&Z&&te.type==="number"&&Z.memoizedProps.value!=null&&ba(te,"number",te.value)}switch(tt=Z?Ao(Z):window,a){case"focusin":(On(tt)||tt.contentEditable==="true")&&(Nc=tt,kT=Z,hh=null);break;case"focusout":hh=kT=Nc=null;break;case"mousedown":OT=!0;break;case"contextmenu":case"mouseup":case"dragend":OT=!1,v1(fe,d,ae);break;case"selectionchange":if(C9)break;case"keydown":case"keyup":v1(fe,d,ae)}var Ue;if(Do)e:{switch(a){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else at?oe(a,d)&&(ze="onCompositionEnd"):a==="keydown"&&d.keyCode===229&&(ze="onCompositionStart");ze&&(I&&d.locale!=="ko"&&(at||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&at&&(Ue=oh()):(xo=ae,Sa="value"in xo?xo.value:xo.textContent,at=!0)),tt=wy(Z,ze),0<tt.length&&(ze=new lh(ze,a,null,d,ae),fe.push({event:ze,listeners:tt}),Ue?ze.data=Ue:(Ue=_e(d),Ue!==null&&(ze.data=Ue)))),(Ue=C?kn(a,d):lt(a,d))&&(ze=wy(Z,"onBeforeInput"),0<ze.length&&(tt=new lh("onBeforeInput","beforeinput",null,d,ae),fe.push({event:tt,listeners:ze}),tt.data=Ue)),lG(fe,a,Z,d,ae)}$M(fe,l)})}function qh(a,l,d){return{instance:a,listener:l,currentTarget:d}}function wy(a,l){for(var d=l+"Capture",g=[];a!==null;){var T=a,w=T.stateNode;if(T=T.tag,T!==5&&T!==26&&T!==27||w===null||(T=jl(a,d),T!=null&&g.unshift(qh(a,T,w)),T=jl(a,l),T!=null&&g.push(qh(a,T,w))),a.tag===3)return g;a=a.return}return[]}function rf(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function HM(a,l,d,g,T){for(var w=l._reactName,P=[];d!==null&&d!==g;){var L=d,K=L.alternate,Z=L.stateNode;if(L=L.tag,K!==null&&K===g)break;L!==5&&L!==26&&L!==27||Z===null||(K=Z,T?(Z=jl(d,w),Z!=null&&P.unshift(qh(d,Z,K))):T||(Z=jl(d,w),Z!=null&&P.push(qh(d,Z,K)))),d=d.return}P.length!==0&&a.push({event:l,listeners:P})}var dG=/\r\n?/g,hG=/\u0000|\uFFFD/g;function GM(a){return(typeof a=="string"?a:""+a).replace(dG,`
`).replace(hG,"")}function KM(a,l){return l=GM(l),GM(a)===l}function by(){}function Dt(a,l,d,g,T,w){switch(d){case"children":typeof g=="string"?l==="body"||l==="textarea"&&g===""||Ri(a,g):(typeof g=="number"||typeof g=="bigint")&&l!=="body"&&Ri(a,""+g);break;case"className":Co(a,"class",g);break;case"tabIndex":Co(a,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Co(a,d,g);break;case"style":nh(a,g,w);break;case"data":if(l!=="object"){Co(a,"data",g);break}case"src":case"href":if(g===""&&(l!=="a"||d!=="href")){a.removeAttribute(d);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){a.removeAttribute(d);break}g=Sc(""+g),a.setAttribute(d,g);break;case"action":case"formAction":if(typeof g=="function"){a.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(d==="formAction"?(l!=="input"&&Dt(a,l,"name",T.name,T,null),Dt(a,l,"formEncType",T.formEncType,T,null),Dt(a,l,"formMethod",T.formMethod,T,null),Dt(a,l,"formTarget",T.formTarget,T,null)):(Dt(a,l,"encType",T.encType,T,null),Dt(a,l,"method",T.method,T,null),Dt(a,l,"target",T.target,T,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){a.removeAttribute(d);break}g=Sc(""+g),a.setAttribute(d,g);break;case"onClick":g!=null&&(a.onclick=by);break;case"onScroll":g!=null&&rt("scroll",a);break;case"onScrollEnd":g!=null&&rt("scrollend",a);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(d=g.__html,d!=null){if(T.children!=null)throw Error(r(60));a.innerHTML=d}}break;case"multiple":a.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":a.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){a.removeAttribute("xlink:href");break}d=Sc(""+g),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(d,""+g):a.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(d,""):a.removeAttribute(d);break;case"capture":case"download":g===!0?a.setAttribute(d,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(d,g):a.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?a.setAttribute(d,g):a.removeAttribute(d);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?a.removeAttribute(d):a.setAttribute(d,g);break;case"popover":rt("beforetoggle",a),rt("toggle",a),wa(a,"popover",g);break;case"xlinkActuate":sr(a,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":sr(a,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":sr(a,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":sr(a,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":sr(a,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":sr(a,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":sr(a,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":sr(a,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":sr(a,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":wa(a,"is",g);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=IT.get(d)||d,wa(a,d,g))}}function iw(a,l,d,g,T,w){switch(d){case"style":nh(a,g,w);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(d=g.__html,d!=null){if(T.children!=null)throw Error(r(60));a.innerHTML=d}}break;case"children":typeof g=="string"?Ri(a,g):(typeof g=="number"||typeof g=="bigint")&&Ri(a,""+g);break;case"onScroll":g!=null&&rt("scroll",a);break;case"onScrollEnd":g!=null&&rt("scrollend",a);break;case"onClick":g!=null&&(a.onclick=by);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!_c.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(T=d.endsWith("Capture"),l=d.slice(2,T?d.length-7:void 0),w=a[Sn]||null,w=w!=null?w[d]:null,typeof w=="function"&&a.removeEventListener(l,w,T),typeof g=="function")){typeof w!="function"&&w!==null&&(d in a?a[d]=null:a.hasAttribute(d)&&a.removeAttribute(d)),a.addEventListener(l,g,T);break e}d in a?a[d]=g:g===!0?a.setAttribute(d,""):wa(a,d,g)}}}function cr(a,l,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":rt("error",a),rt("load",a);var g=!1,T=!1,w;for(w in d)if(d.hasOwnProperty(w)){var P=d[w];if(P!=null)switch(w){case"src":g=!0;break;case"srcSet":T=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Dt(a,l,w,P,d,null)}}T&&Dt(a,l,"srcSet",d.srcSet,d,null),g&&Dt(a,l,"src",d.src,d,null);return;case"input":rt("invalid",a);var L=w=P=T=null,K=null,Z=null;for(g in d)if(d.hasOwnProperty(g)){var ae=d[g];if(ae!=null)switch(g){case"name":T=ae;break;case"type":P=ae;break;case"checked":K=ae;break;case"defaultChecked":Z=ae;break;case"value":w=ae;break;case"defaultValue":L=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,l));break;default:Dt(a,l,g,ae,d,null)}}Hl(a,w,L,K,Z,P,T,!1),bc(a);return;case"select":rt("invalid",a),g=P=w=null;for(T in d)if(d.hasOwnProperty(T)&&(L=d[T],L!=null))switch(T){case"value":w=L;break;case"defaultValue":P=L;break;case"multiple":g=L;default:Dt(a,l,T,L,d,null)}l=w,d=P,a.multiple=!!g,l!=null?hs(a,!!g,l,!1):d!=null&&hs(a,!!g,d,!0);return;case"textarea":rt("invalid",a),w=T=g=null;for(P in d)if(d.hasOwnProperty(P)&&(L=d[P],L!=null))switch(P){case"value":g=L;break;case"defaultValue":T=L;break;case"children":w=L;break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(r(91));break;default:Dt(a,l,P,L,d,null)}Gl(a,g,T,w),bc(a);return;case"option":for(K in d)if(d.hasOwnProperty(K)&&(g=d[K],g!=null))switch(K){case"selected":a.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:Dt(a,l,K,g,d,null)}return;case"dialog":rt("beforetoggle",a),rt("toggle",a),rt("cancel",a),rt("close",a);break;case"iframe":case"object":rt("load",a);break;case"video":case"audio":for(g=0;g<Bh.length;g++)rt(Bh[g],a);break;case"image":rt("error",a),rt("load",a);break;case"details":rt("toggle",a);break;case"embed":case"source":case"link":rt("error",a),rt("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in d)if(d.hasOwnProperty(Z)&&(g=d[Z],g!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Dt(a,l,Z,g,d,null)}return;default:if(rh(l)){for(ae in d)d.hasOwnProperty(ae)&&(g=d[ae],g!==void 0&&iw(a,l,ae,g,d,void 0));return}}for(L in d)d.hasOwnProperty(L)&&(g=d[L],g!=null&&Dt(a,l,L,g,d,null))}function pG(a,l,d,g){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var T=null,w=null,P=null,L=null,K=null,Z=null,ae=null;for(ne in d){var fe=d[ne];if(d.hasOwnProperty(ne)&&fe!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":K=fe;default:g.hasOwnProperty(ne)||Dt(a,l,ne,null,g,fe)}}for(var te in g){var ne=g[te];if(fe=d[te],g.hasOwnProperty(te)&&(ne!=null||fe!=null))switch(te){case"type":w=ne;break;case"name":T=ne;break;case"checked":Z=ne;break;case"defaultChecked":ae=ne;break;case"value":P=ne;break;case"defaultValue":L=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,l));break;default:ne!==fe&&Dt(a,l,te,ne,g,fe)}}ti(a,P,L,K,Z,ae,w,T);return;case"select":ne=P=L=te=null;for(w in d)if(K=d[w],d.hasOwnProperty(w)&&K!=null)switch(w){case"value":break;case"multiple":ne=K;default:g.hasOwnProperty(w)||Dt(a,l,w,null,g,K)}for(T in g)if(w=g[T],K=d[T],g.hasOwnProperty(T)&&(w!=null||K!=null))switch(T){case"value":te=w;break;case"defaultValue":L=w;break;case"multiple":P=w;default:w!==K&&Dt(a,l,T,w,g,K)}l=L,d=P,g=ne,te!=null?hs(a,!!d,te,!1):!!g!=!!d&&(l!=null?hs(a,!!d,l,!0):hs(a,!!d,d?[]:"",!1));return;case"textarea":ne=te=null;for(L in d)if(T=d[L],d.hasOwnProperty(L)&&T!=null&&!g.hasOwnProperty(L))switch(L){case"value":break;case"children":break;default:Dt(a,l,L,null,g,T)}for(P in g)if(T=g[P],w=d[P],g.hasOwnProperty(P)&&(T!=null||w!=null))switch(P){case"value":te=T;break;case"defaultValue":ne=T;break;case"children":break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:T!==w&&Dt(a,l,P,T,g,w)}Pt(a,te,ne);return;case"option":for(var He in d)if(te=d[He],d.hasOwnProperty(He)&&te!=null&&!g.hasOwnProperty(He))switch(He){case"selected":a.selected=!1;break;default:Dt(a,l,He,null,g,te)}for(K in g)if(te=g[K],ne=d[K],g.hasOwnProperty(K)&&te!==ne&&(te!=null||ne!=null))switch(K){case"selected":a.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:Dt(a,l,K,te,g,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var qe in d)te=d[qe],d.hasOwnProperty(qe)&&te!=null&&!g.hasOwnProperty(qe)&&Dt(a,l,qe,null,g,te);for(Z in g)if(te=g[Z],ne=d[Z],g.hasOwnProperty(Z)&&te!==ne&&(te!=null||ne!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,l));break;default:Dt(a,l,Z,te,g,ne)}return;default:if(rh(l)){for(var Nt in d)te=d[Nt],d.hasOwnProperty(Nt)&&te!==void 0&&!g.hasOwnProperty(Nt)&&iw(a,l,Nt,void 0,g,te);for(ae in g)te=g[ae],ne=d[ae],!g.hasOwnProperty(ae)||te===ne||te===void 0&&ne===void 0||iw(a,l,ae,te,g,ne);return}}for(var Y in d)te=d[Y],d.hasOwnProperty(Y)&&te!=null&&!g.hasOwnProperty(Y)&&Dt(a,l,Y,null,g,te);for(fe in g)te=g[fe],ne=d[fe],!g.hasOwnProperty(fe)||te===ne||te==null&&ne==null||Dt(a,l,fe,te,g,ne)}var ow=null,sw=null;function Sy(a){return a.nodeType===9?a:a.ownerDocument}function jM(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function WM(a,l){if(a===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&l==="foreignObject"?0:a}function aw(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var lw=null;function mG(){var a=window.event;return a&&a.type==="popstate"?a===lw?!1:(lw=a,!0):(lw=null,!1)}var YM=typeof setTimeout=="function"?setTimeout:void 0,gG=typeof clearTimeout=="function"?clearTimeout:void 0,JM=typeof Promise=="function"?Promise:void 0,yG=typeof queueMicrotask=="function"?queueMicrotask:typeof JM<"u"?function(a){return JM.resolve(null).then(a).catch(vG)}:YM;function vG(a){setTimeout(function(){throw a})}function Ba(a){return a==="head"}function QM(a,l){var d=l,g=0,T=0;do{var w=d.nextSibling;if(a.removeChild(d),w&&w.nodeType===8)if(d=w.data,d==="/$"){if(0<g&&8>g){d=g;var P=a.ownerDocument;if(d&1&&$h(P.documentElement),d&2&&$h(P.body),d&4)for(d=P.head,$h(d),P=d.firstChild;P;){var L=P.nextSibling,K=P.nodeName;P[Bl]||K==="SCRIPT"||K==="STYLE"||K==="LINK"&&P.rel.toLowerCase()==="stylesheet"||d.removeChild(P),P=L}}if(T===0){a.removeChild(w),Jh(l);return}T--}else d==="$"||d==="$?"||d==="$!"?T++:g=d.charCodeAt(0)-48;else g=0;d=w}while(d);Jh(l)}function uw(a){var l=a.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var d=l;switch(l=l.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":uw(d),Ea(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}a.removeChild(d)}}function _G(a,l,d,g){for(;a.nodeType===1;){var T=d;if(a.nodeName.toLowerCase()!==l.toLowerCase()){if(!g&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(g){if(!a[Bl])switch(l){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(w=a.getAttribute("rel"),w==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(w!==T.rel||a.getAttribute("href")!==(T.href==null||T.href===""?null:T.href)||a.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin)||a.getAttribute("title")!==(T.title==null?null:T.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(w=a.getAttribute("src"),(w!==(T.src==null?null:T.src)||a.getAttribute("type")!==(T.type==null?null:T.type)||a.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin))&&w&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(l==="input"&&a.type==="hidden"){var w=T.name==null?null:""+T.name;if(T.type==="hidden"&&a.getAttribute("name")===w)return a}else return a;if(a=so(a.nextSibling),a===null)break}return null}function TG(a,l,d){if(l==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!d||(a=so(a.nextSibling),a===null))return null;return a}function cw(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function EG(a,l){var d=a.ownerDocument;if(a.data!=="$?"||d.readyState==="complete")l();else{var g=function(){l(),d.removeEventListener("DOMContentLoaded",g)};d.addEventListener("DOMContentLoaded",g),a._reactRetry=g}}function so(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return a}var fw=null;function XM(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var d=a.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return a;l--}else d==="/$"&&l++}a=a.previousSibling}return null}function ZM(a,l,d){switch(l=Sy(d),a){case"html":if(a=l.documentElement,!a)throw Error(r(452));return a;case"head":if(a=l.head,!a)throw Error(r(453));return a;case"body":if(a=l.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function $h(a){for(var l=a.attributes;l.length;)a.removeAttributeNode(l[0]);Ea(a)}var Fi=new Map,eD=new Set;function Ay(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Ds=he.d;he.d={f:wG,r:bG,D:SG,C:AG,L:CG,m:IG,X:RG,S:xG,M:PG};function wG(){var a=Ds.f(),l=gy();return a||l}function bG(a){var l=So(a);l!==null&&l.tag===5&&l.type==="form"?TP(l):Ds.r(a)}var of=typeof document>"u"?null:document;function tD(a,l,d){var g=of;if(g&&typeof l=="string"&&l){var T=An(l);T='link[rel="'+a+'"][href="'+T+'"]',typeof d=="string"&&(T+='[crossorigin="'+d+'"]'),eD.has(T)||(eD.add(T),a={rel:a,crossOrigin:d,href:l},g.querySelector(T)===null&&(l=g.createElement("link"),cr(l,"link",a),yn(l),g.head.appendChild(l)))}}function SG(a){Ds.D(a),tD("dns-prefetch",a,null)}function AG(a,l){Ds.C(a,l),tD("preconnect",a,l)}function CG(a,l,d){Ds.L(a,l,d);var g=of;if(g&&a&&l){var T='link[rel="preload"][as="'+An(l)+'"]';l==="image"&&d&&d.imageSrcSet?(T+='[imagesrcset="'+An(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(T+='[imagesizes="'+An(d.imageSizes)+'"]')):T+='[href="'+An(a)+'"]';var w=T;switch(l){case"style":w=sf(a);break;case"script":w=af(a)}Fi.has(w)||(a=h({rel:"preload",href:l==="image"&&d&&d.imageSrcSet?void 0:a,as:l},d),Fi.set(w,a),g.querySelector(T)!==null||l==="style"&&g.querySelector(zh(w))||l==="script"&&g.querySelector(Hh(w))||(l=g.createElement("link"),cr(l,"link",a),yn(l),g.head.appendChild(l)))}}function IG(a,l){Ds.m(a,l);var d=of;if(d&&a){var g=l&&typeof l.as=="string"?l.as:"script",T='link[rel="modulepreload"][as="'+An(g)+'"][href="'+An(a)+'"]',w=T;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=af(a)}if(!Fi.has(w)&&(a=h({rel:"modulepreload",href:a},l),Fi.set(w,a),d.querySelector(T)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(Hh(w)))return}g=d.createElement("link"),cr(g,"link",a),yn(g),d.head.appendChild(g)}}}function xG(a,l,d){Ds.S(a,l,d);var g=of;if(g&&a){var T=Rr(g).hoistableStyles,w=sf(a);l=l||"default";var P=T.get(w);if(!P){var L={loading:0,preload:null};if(P=g.querySelector(zh(w)))L.loading=5;else{a=h({rel:"stylesheet",href:a,"data-precedence":l},d),(d=Fi.get(w))&&dw(a,d);var K=P=g.createElement("link");yn(K),cr(K,"link",a),K._p=new Promise(function(Z,ae){K.onload=Z,K.onerror=ae}),K.addEventListener("load",function(){L.loading|=1}),K.addEventListener("error",function(){L.loading|=2}),L.loading|=4,Cy(P,l,g)}P={type:"stylesheet",instance:P,count:1,state:L},T.set(w,P)}}}function RG(a,l){Ds.X(a,l);var d=of;if(d&&a){var g=Rr(d).hoistableScripts,T=af(a),w=g.get(T);w||(w=d.querySelector(Hh(T)),w||(a=h({src:a,async:!0},l),(l=Fi.get(T))&&hw(a,l),w=d.createElement("script"),yn(w),cr(w,"link",a),d.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},g.set(T,w))}}function PG(a,l){Ds.M(a,l);var d=of;if(d&&a){var g=Rr(d).hoistableScripts,T=af(a),w=g.get(T);w||(w=d.querySelector(Hh(T)),w||(a=h({src:a,async:!0,type:"module"},l),(l=Fi.get(T))&&hw(a,l),w=d.createElement("script"),yn(w),cr(w,"link",a),d.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},g.set(T,w))}}function nD(a,l,d,g){var T=(T=Be.current)?Ay(T):null;if(!T)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(l=sf(d.href),d=Rr(T).hoistableStyles,g=d.get(l),g||(g={type:"style",instance:null,count:0,state:null},d.set(l,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){a=sf(d.href);var w=Rr(T).hoistableStyles,P=w.get(a);if(P||(T=T.ownerDocument||T,P={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(a,P),(w=T.querySelector(zh(a)))&&!w._p&&(P.instance=w,P.state.loading=5),Fi.has(a)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},Fi.set(a,d),w||MG(T,a,d,P.state))),l&&g===null)throw Error(r(528,""));return P}if(l&&g!==null)throw Error(r(529,""));return null;case"script":return l=d.async,d=d.src,typeof d=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=af(d),d=Rr(T).hoistableScripts,g=d.get(l),g||(g={type:"script",instance:null,count:0,state:null},d.set(l,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function sf(a){return'href="'+An(a)+'"'}function zh(a){return'link[rel="stylesheet"]['+a+"]"}function rD(a){return h({},a,{"data-precedence":a.precedence,precedence:null})}function MG(a,l,d,g){a.querySelector('link[rel="preload"][as="style"]['+l+"]")?g.loading=1:(l=a.createElement("link"),g.preload=l,l.addEventListener("load",function(){return g.loading|=1}),l.addEventListener("error",function(){return g.loading|=2}),cr(l,"link",d),yn(l),a.head.appendChild(l))}function af(a){return'[src="'+An(a)+'"]'}function Hh(a){return"script[async]"+a}function iD(a,l,d){if(l.count++,l.instance===null)switch(l.type){case"style":var g=a.querySelector('style[data-href~="'+An(d.href)+'"]');if(g)return l.instance=g,yn(g),g;var T=h({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return g=(a.ownerDocument||a).createElement("style"),yn(g),cr(g,"style",T),Cy(g,d.precedence,a),l.instance=g;case"stylesheet":T=sf(d.href);var w=a.querySelector(zh(T));if(w)return l.state.loading|=4,l.instance=w,yn(w),w;g=rD(d),(T=Fi.get(T))&&dw(g,T),w=(a.ownerDocument||a).createElement("link"),yn(w);var P=w;return P._p=new Promise(function(L,K){P.onload=L,P.onerror=K}),cr(w,"link",g),l.state.loading|=4,Cy(w,d.precedence,a),l.instance=w;case"script":return w=af(d.src),(T=a.querySelector(Hh(w)))?(l.instance=T,yn(T),T):(g=d,(T=Fi.get(w))&&(g=h({},d),hw(g,T)),a=a.ownerDocument||a,T=a.createElement("script"),yn(T),cr(T,"link",g),a.head.appendChild(T),l.instance=T);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(g=l.instance,l.state.loading|=4,Cy(g,d.precedence,a));return l.instance}function Cy(a,l,d){for(var g=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),T=g.length?g[g.length-1]:null,w=T,P=0;P<g.length;P++){var L=g[P];if(L.dataset.precedence===l)w=L;else if(w!==T)break}w?w.parentNode.insertBefore(a,w.nextSibling):(l=d.nodeType===9?d.head:d,l.insertBefore(a,l.firstChild))}function dw(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.title==null&&(a.title=l.title)}function hw(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.integrity==null&&(a.integrity=l.integrity)}var Iy=null;function oD(a,l,d){if(Iy===null){var g=new Map,T=Iy=new Map;T.set(d,g)}else T=Iy,g=T.get(d),g||(g=new Map,T.set(d,g));if(g.has(a))return g;for(g.set(a,null),d=d.getElementsByTagName(a),T=0;T<d.length;T++){var w=d[T];if(!(w[Bl]||w[Nn]||a==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var P=w.getAttribute(l)||"";P=a+P;var L=g.get(P);L?L.push(w):g.set(P,[w])}}return g}function sD(a,l,d){a=a.ownerDocument||a,a.head.insertBefore(d,l==="title"?a.querySelector("head > title"):null)}function DG(a,l,d){if(d===1||l.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return a=l.disabled,typeof l.precedence=="string"&&a==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function aD(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var Gh=null;function NG(){}function kG(a,l,d){if(Gh===null)throw Error(r(475));var g=Gh;if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var T=sf(d.href),w=a.querySelector(zh(T));if(w){a=w._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(g.count++,g=xy.bind(g),a.then(g,g)),l.state.loading|=4,l.instance=w,yn(w);return}w=a.ownerDocument||a,d=rD(d),(T=Fi.get(T))&&dw(d,T),w=w.createElement("link"),yn(w);var P=w;P._p=new Promise(function(L,K){P.onload=L,P.onerror=K}),cr(w,"link",d),l.instance=w}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(g.count++,l=xy.bind(g),a.addEventListener("load",l),a.addEventListener("error",l))}}function OG(){if(Gh===null)throw Error(r(475));var a=Gh;return a.stylesheets&&a.count===0&&pw(a,a.stylesheets),0<a.count?function(l){var d=setTimeout(function(){if(a.stylesheets&&pw(a,a.stylesheets),a.unsuspend){var g=a.unsuspend;a.unsuspend=null,g()}},6e4);return a.unsuspend=l,function(){a.unsuspend=null,clearTimeout(d)}}:null}function xy(){if(this.count--,this.count===0){if(this.stylesheets)pw(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Ry=null;function pw(a,l){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Ry=new Map,l.forEach(VG,a),Ry=null,xy.call(a))}function VG(a,l){if(!(l.state.loading&4)){var d=Ry.get(a);if(d)var g=d.get(null);else{d=new Map,Ry.set(a,d);for(var T=a.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<T.length;w++){var P=T[w];(P.nodeName==="LINK"||P.getAttribute("media")!=="not all")&&(d.set(P.dataset.precedence,P),g=P)}g&&d.set(null,g)}T=l.instance,P=T.getAttribute("data-precedence"),w=d.get(P)||g,w===g&&d.set(null,T),d.set(P,T),this.count++,g=xy.bind(this),T.addEventListener("load",g),T.addEventListener("error",g),w?w.parentNode.insertBefore(T,w.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(T,a.firstChild)),l.state.loading|=4}}var Kh={$$typeof:M,Provider:null,Consumer:null,_currentValue:Te,_currentValue2:Te,_threadCount:0};function LG(a,l,d,g,T,w,P,L){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gn(0),this.hiddenUpdates=gn(null),this.identifierPrefix=g,this.onUncaughtError=T,this.onCaughtError=w,this.onRecoverableError=P,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function lD(a,l,d,g,T,w,P,L,K,Z,ae,fe){return a=new LG(a,l,d,P,L,K,Z,fe),l=1,w===!0&&(l|=24),w=ri(3,null,null,l),a.current=w,w.stateNode=a,l=YT(),l.refCount++,a.pooledCache=l,l.refCount++,w.memoizedState={element:g,isDehydrated:d,cache:l},ZT(w),a}function uD(a){return a?(a=Lc,a):Lc}function cD(a,l,d,g,T,w){T=uD(T),g.context===null?g.context=T:g.pendingContext=T,g=Ia(l),g.payload={element:d},w=w===void 0?null:w,w!==null&&(g.callback=w),d=xa(a,g,l),d!==null&&(li(d,a,l),wh(d,a,l))}function fD(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var d=a.retryLane;a.retryLane=d!==0&&d<l?d:l}}function mw(a,l){fD(a,l),(a=a.alternate)&&fD(a,l)}function dD(a){if(a.tag===13){var l=Vc(a,67108864);l!==null&&li(l,a,67108864),mw(a,67108864)}}var Py=!0;function UG(a,l,d,g){var T=ee.T;ee.T=null;var w=he.p;try{he.p=2,gw(a,l,d,g)}finally{he.p=w,ee.T=T}}function FG(a,l,d,g){var T=ee.T;ee.T=null;var w=he.p;try{he.p=8,gw(a,l,d,g)}finally{he.p=w,ee.T=T}}function gw(a,l,d,g){if(Py){var T=yw(g);if(T===null)rw(a,l,g,My,d),pD(a,g);else if(qG(T,a,l,d,g))g.stopPropagation();else if(pD(a,g),l&4&&-1<BG.indexOf(a)){for(;T!==null;){var w=So(T);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var P=Rt(w.pendingLanes);if(P!==0){var L=w;for(L.pendingLanes|=2,L.entangledLanes|=2;P;){var K=1<<31-pe(P);L.entanglements[1]|=K,P&=~K}Uo(w),(bt&6)===0&&(py=ln()+500,Fh(0))}}break;case 13:L=Vc(w,2),L!==null&&li(L,w,2),gy(),mw(w,2)}if(w=yw(g),w===null&&rw(a,l,g,My,d),w===T)break;T=w}T!==null&&g.stopPropagation()}else rw(a,l,g,null,d)}}function yw(a){return a=Pi(a),vw(a)}var My=null;function vw(a){if(My=null,a=cs(a),a!==null){var l=o(a);if(l===null)a=null;else{var d=l.tag;if(d===13){if(a=s(l),a!==null)return a;a=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null)}}return My=a,null}function hD(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ma()){case vt:return 2;case wo:return 8;case Ci:case Ul:return 32;case us:return 268435456;default:return 32}default:return 32}}var _w=!1,qa=null,$a=null,za=null,jh=new Map,Wh=new Map,Ha=[],BG="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function pD(a,l){switch(a){case"focusin":case"focusout":qa=null;break;case"dragenter":case"dragleave":$a=null;break;case"mouseover":case"mouseout":za=null;break;case"pointerover":case"pointerout":jh.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wh.delete(l.pointerId)}}function Yh(a,l,d,g,T,w){return a===null||a.nativeEvent!==w?(a={blockedOn:l,domEventName:d,eventSystemFlags:g,nativeEvent:w,targetContainers:[T]},l!==null&&(l=So(l),l!==null&&dD(l)),a):(a.eventSystemFlags|=g,l=a.targetContainers,T!==null&&l.indexOf(T)===-1&&l.push(T),a)}function qG(a,l,d,g,T){switch(l){case"focusin":return qa=Yh(qa,a,l,d,g,T),!0;case"dragenter":return $a=Yh($a,a,l,d,g,T),!0;case"mouseover":return za=Yh(za,a,l,d,g,T),!0;case"pointerover":var w=T.pointerId;return jh.set(w,Yh(jh.get(w)||null,a,l,d,g,T)),!0;case"gotpointercapture":return w=T.pointerId,Wh.set(w,Yh(Wh.get(w)||null,a,l,d,g,T)),!0}return!1}function mD(a){var l=cs(a.target);if(l!==null){var d=o(l);if(d!==null){if(l=d.tag,l===13){if(l=s(d),l!==null){a.blockedOn=l,gg(a.priority,function(){if(d.tag===13){var g=ai();g=va(g);var T=Vc(d,g);T!==null&&li(T,d,g),mw(d,g)}});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){a.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Dy(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var d=yw(a.nativeEvent);if(d===null){d=a.nativeEvent;var g=new d.constructor(d.type,d);ps=g,d.target.dispatchEvent(g),ps=null}else return l=So(d),l!==null&&dD(l),a.blockedOn=d,!1;l.shift()}return!0}function gD(a,l,d){Dy(a)&&d.delete(l)}function $G(){_w=!1,qa!==null&&Dy(qa)&&(qa=null),$a!==null&&Dy($a)&&($a=null),za!==null&&Dy(za)&&(za=null),jh.forEach(gD),Wh.forEach(gD)}function Ny(a,l){a.blockedOn===l&&(a.blockedOn=null,_w||(_w=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,$G)))}var ky=null;function yD(a){ky!==a&&(ky=a,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){ky===a&&(ky=null);for(var l=0;l<a.length;l+=3){var d=a[l],g=a[l+1],T=a[l+2];if(typeof g!="function"){if(vw(g||d)===null)continue;break}var w=So(d);w!==null&&(a.splice(l,3),l-=3,vE(w,{pending:!0,data:T,method:d.method,action:g},g,T))}}))}function Jh(a){function l(K){return Ny(K,a)}qa!==null&&Ny(qa,a),$a!==null&&Ny($a,a),za!==null&&Ny(za,a),jh.forEach(l),Wh.forEach(l);for(var d=0;d<Ha.length;d++){var g=Ha[d];g.blockedOn===a&&(g.blockedOn=null)}for(;0<Ha.length&&(d=Ha[0],d.blockedOn===null);)mD(d),d.blockedOn===null&&Ha.shift();if(d=(a.ownerDocument||a).$$reactFormReplay,d!=null)for(g=0;g<d.length;g+=3){var T=d[g],w=d[g+1],P=T[Sn]||null;if(typeof w=="function")P||yD(d);else if(P){var L=null;if(w&&w.hasAttribute("formAction")){if(T=w,P=w[Sn]||null)L=P.formAction;else if(vw(T)!==null)continue}else L=P.action;typeof L=="function"?d[g+1]=L:(d.splice(g,3),g-=3),yD(d)}}}function Tw(a){this._internalRoot=a}Oy.prototype.render=Tw.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(r(409));var d=l.current,g=ai();cD(d,g,a,l,null,null)},Oy.prototype.unmount=Tw.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;cD(a.current,2,null,a,null,null),gy(),l[xi]=null}};function Oy(a){this._internalRoot=a}Oy.prototype.unstable_scheduleHydration=function(a){if(a){var l=_a();a={blockedOn:null,target:a,priority:l};for(var d=0;d<Ha.length&&l!==0&&l<Ha[d].priority;d++);Ha.splice(d,0,a),d===0&&mD(a)}};var vD=e.version;if(vD!=="19.1.1")throw Error(r(527,vD,"19.1.1"));he.findDOMNode=function(a){var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=c(l),a=a!==null?f(a):null,a=a===null?null:a.stateNode,a};var zG={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vy.isDisabled&&Vy.supportsFiber)try{qt=Vy.inject(zG),ht=Vy}catch{}}return Xh.createRoot=function(a,l){if(!i(a))throw Error(r(299));var d=!1,g="",T=kP,w=OP,P=VP,L=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(T=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(P=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(L=l.unstable_transitionCallbacks)),l=lD(a,1,!1,null,null,d,g,T,w,P,L,null),a[xi]=l.current,nw(a),new Tw(l)},Xh.hydrateRoot=function(a,l,d){if(!i(a))throw Error(r(299));var g=!1,T="",w=kP,P=OP,L=VP,K=null,Z=null;return d!=null&&(d.unstable_strictMode===!0&&(g=!0),d.identifierPrefix!==void 0&&(T=d.identifierPrefix),d.onUncaughtError!==void 0&&(w=d.onUncaughtError),d.onCaughtError!==void 0&&(P=d.onCaughtError),d.onRecoverableError!==void 0&&(L=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(K=d.unstable_transitionCallbacks),d.formState!==void 0&&(Z=d.formState)),l=lD(a,1,!0,l,d??null,g,T,w,P,L,K,Z),l.context=uD(null),d=l.current,g=ai(),g=va(g),T=Ia(g),T.callback=null,xa(d,T,g),d=g,l.current.lanes=d,ei(l,d),Uo(l),a[xi]=l.current,nw(a),new Oy(l)},Xh.version="19.1.1",Xh}var xD;function n8(){if(xD)return Sw.exports;xD=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Sw.exports=t8(),Sw.exports}var r8=n8();const i8=ss(r8);/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var RD="popstate";function o8(t={}){function e(i,o){let{pathname:s="/",search:u="",hash:c=""}=oc(i.location.hash.substring(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),OS("",{pathname:s,search:u,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){let s=i.document.querySelector("base"),u="";if(s&&s.getAttribute("href")){let c=i.location.href,f=c.indexOf("#");u=f===-1?c:c.slice(0,f)}return u+"#"+(typeof o=="string"?o:Wp(o))}function r(i,o){Yi(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return a8(e,n,r,t)}function tn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Yi(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function s8(){return Math.random().toString(36).substring(2,10)}function PD(t,e){return{usr:t.state,key:t.key,idx:e}}function OS(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?oc(e):e,state:n,key:e&&e.key||r||s8()}}function Wp({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function oc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function a8(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,u="POP",c=null,f=h();f==null&&(f=0,s.replaceState({...s.state,idx:f},""));function h(){return(s.state||{idx:null}).idx}function y(){u="POP";let A=h(),R=A==null?null:A-f;f=A,c&&c({action:u,location:S.location,delta:R})}function v(A,R){u="PUSH";let D=OS(S.location,A,R);n&&n(D,A),f=h()+1;let M=PD(D,f),U=S.createHref(D);try{s.pushState(M,"",U)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;i.location.assign(U)}o&&c&&c({action:u,location:S.location,delta:1})}function E(A,R){u="REPLACE";let D=OS(S.location,A,R);n&&n(D,A),f=h();let M=PD(D,f),U=S.createHref(D);s.replaceState(M,"",U),o&&c&&c({action:u,location:S.location,delta:0})}function b(A){return l8(A)}let S={get action(){return u},get location(){return t(i,s)},listen(A){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(RD,y),c=A,()=>{i.removeEventListener(RD,y),c=null}},createHref(A){return e(i,A)},createURL:b,encodeLocation(A){let R=b(A);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:v,replace:E,go(A){return s.go(A)}};return S}function l8(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),tn(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Wp(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function pF(t,e,n="/"){return u8(t,e,n,!1)}function u8(t,e,n,r){let i=typeof e=="string"?oc(e):e,o=Gs(i.pathname||"/",n);if(o==null)return null;let s=mF(t);c8(s);let u=null;for(let c=0;u==null&&c<s.length;++c){let f=E8(o);u=_8(s[c],f,r)}return u}function mF(t,e=[],n=[],r="",i=!1){let o=(s,u,c=i,f)=>{let h={relativePath:f===void 0?s.path||"":f,caseSensitive:s.caseSensitive===!0,childrenIndex:u,route:s};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&c)return;tn(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let y=Bs([r,h.relativePath]),v=n.concat(h);s.children&&s.children.length>0&&(tn(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),mF(s.children,e,v,y,c)),!(s.path==null&&!s.index)&&e.push({path:y,score:y8(y,s.index),routesMeta:v})};return t.forEach((s,u)=>{var c;if(s.path===""||!((c=s.path)!=null&&c.includes("?")))o(s,u);else for(let f of gF(s.path))o(s,u,!0,f)}),e}function gF(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=gF(r.join("/")),u=[];return u.push(...s.map(c=>c===""?o:[o,c].join("/"))),i&&u.push(...s),u.map(c=>t.startsWith("/")&&c===""?"/":c)}function c8(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:v8(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var f8=/^:[\w-]+$/,d8=3,h8=2,p8=1,m8=10,g8=-2,MD=t=>t==="*";function y8(t,e){let n=t.split("/"),r=n.length;return n.some(MD)&&(r+=g8),e&&(r+=h8),n.filter(i=>!MD(i)).reduce((i,o)=>i+(f8.test(o)?d8:o===""?p8:m8),r)}function v8(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function _8(t,e,n=!1){let{routesMeta:r}=t,i={},o="/",s=[];for(let u=0;u<r.length;++u){let c=r[u],f=u===r.length-1,h=o==="/"?e:e.slice(o.length)||"/",y=Vv({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},h),v=c.route;if(!y&&f&&n&&!r[r.length-1].route.index&&(y=Vv({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!y)return null;Object.assign(i,y.params),s.push({params:i,pathname:Bs([o,y.pathname]),pathnameBase:A8(Bs([o,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(o=Bs([o,y.pathnameBase]))}return s}function Vv(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=T8(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((f,{paramName:h,isOptional:y},v)=>{if(h==="*"){let b=u[v]||"";s=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const E=u[v];return y&&!E?f[h]=void 0:f[h]=(E||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:s,pattern:t}}function T8(t,e=!1,n=!0){Yi(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,u,c)=>(r.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function E8(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Yi(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Gs(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function w8(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?oc(t):t;return{pathname:n?n.startsWith("/")?n:b8(n,e):e,search:C8(r),hash:I8(i)}}function b8(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function xw(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function S8(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function xC(t){let e=S8(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function RC(t,e,n,r=!1){let i;typeof t=="string"?i=oc(t):(i={...t},tn(!i.pathname||!i.pathname.includes("?"),xw("?","pathname","search",i)),tn(!i.pathname||!i.pathname.includes("#"),xw("#","pathname","hash",i)),tn(!i.search||!i.search.includes("#"),xw("#","search","hash",i)));let o=t===""||i.pathname==="",s=o?"/":i.pathname,u;if(s==null)u=n;else{let y=e.length-1;if(!r&&s.startsWith("..")){let v=s.split("/");for(;v[0]==="..";)v.shift(),y-=1;i.pathname=v.join("/")}u=y>=0?e[y]:"/"}let c=w8(i,u),f=s&&s!=="/"&&s.endsWith("/"),h=(o||s===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(f||h)&&(c.pathname+="/"),c}var Bs=t=>t.join("/").replace(/\/\/+/g,"/"),A8=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),C8=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,I8=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function x8(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var yF=["POST","PUT","PATCH","DELETE"];new Set(yF);var R8=["GET",...yF];new Set(R8);var Td=x.createContext(null);Td.displayName="DataRouter";var Q_=x.createContext(null);Q_.displayName="DataRouterState";x.createContext(!1);var vF=x.createContext({isTransitioning:!1});vF.displayName="ViewTransition";var P8=x.createContext(new Map);P8.displayName="Fetchers";var M8=x.createContext(null);M8.displayName="Await";var vo=x.createContext(null);vo.displayName="Navigation";var Rm=x.createContext(null);Rm.displayName="Location";var _o=x.createContext({outlet:null,matches:[],isDataRoute:!1});_o.displayName="Route";var PC=x.createContext(null);PC.displayName="RouteError";function D8(t,{relative:e}={}){tn(Ed(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=x.useContext(vo),{hash:i,pathname:o,search:s}=Pm(t,{relative:e}),u=o;return n!=="/"&&(u=o==="/"?n:Bs([n,o])),r.createHref({pathname:u,search:s,hash:i})}function Ed(){return x.useContext(Rm)!=null}function as(){return tn(Ed(),"useLocation() may be used only in the context of a <Router> component."),x.useContext(Rm).location}var _F="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function TF(t){x.useContext(vo).static||x.useLayoutEffect(t)}function MC(){let{isDataRoute:t}=x.useContext(_o);return t?G8():N8()}function N8(){tn(Ed(),"useNavigate() may be used only in the context of a <Router> component.");let t=x.useContext(Td),{basename:e,navigator:n}=x.useContext(vo),{matches:r}=x.useContext(_o),{pathname:i}=as(),o=JSON.stringify(xC(r)),s=x.useRef(!1);return TF(()=>{s.current=!0}),x.useCallback((c,f={})=>{if(Yi(s.current,_F),!s.current)return;if(typeof c=="number"){n.go(c);return}let h=RC(c,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Bs([e,h.pathname])),(f.replace?n.replace:n.push)(h,f.state,f)},[e,n,o,i,t])}x.createContext(null);function EF(){let{matches:t}=x.useContext(_o),e=t[t.length-1];return e?e.params:{}}function Pm(t,{relative:e}={}){let{matches:n}=x.useContext(_o),{pathname:r}=as(),i=JSON.stringify(xC(n));return x.useMemo(()=>RC(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function k8(t,e){return wF(t,e)}function wF(t,e,n,r,i){var D;tn(Ed(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=x.useContext(vo),{matches:s}=x.useContext(_o),u=s[s.length-1],c=u?u.params:{},f=u?u.pathname:"/",h=u?u.pathnameBase:"/",y=u&&u.route;{let M=y&&y.path||"";bF(f,!y||M.endsWith("*")||M.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${M}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${M}"> to <Route path="${M==="/"?"*":`${M}/*`}">.`)}let v=as(),E;if(e){let M=typeof e=="string"?oc(e):e;tn(h==="/"||((D=M.pathname)==null?void 0:D.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${M.pathname}" was given in the \`location\` prop.`),E=M}else E=v;let b=E.pathname||"/",S=b;if(h!=="/"){let M=h.replace(/^\//,"").split("/");S="/"+b.replace(/^\//,"").split("/").slice(M.length).join("/")}let A=pF(t,{pathname:S});Yi(y||A!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),Yi(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let R=F8(A&&A.map(M=>Object.assign({},M,{params:Object.assign({},c,M.params),pathname:Bs([h,o.encodeLocation?o.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?h:Bs([h,o.encodeLocation?o.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),s,n,r,i);return e&&R?x.createElement(Rm.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},R):R}function O8(){let t=H8(),e=x8(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=x.createElement(x.Fragment,null,x.createElement("p",null," Hey developer "),x.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",x.createElement("code",{style:o},"ErrorBoundary")," or"," ",x.createElement("code",{style:o},"errorElement")," prop on your route.")),x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),n?x.createElement("pre",{style:i},n):null,s)}var V8=x.createElement(O8,null),L8=class extends x.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?x.createElement(_o.Provider,{value:this.props.routeContext},x.createElement(PC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function U8({routeContext:t,match:e,children:n}){let r=x.useContext(Td);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),x.createElement(_o.Provider,{value:t},n)}function F8(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,s=n==null?void 0:n.errors;if(s!=null){let f=o.findIndex(h=>h.route.id&&(s==null?void 0:s[h.route.id])!==void 0);tn(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,c=-1;if(n)for(let f=0;f<o.length;f++){let h=o[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=f),h.route.id){let{loaderData:y,errors:v}=n,E=h.route.loader&&!y.hasOwnProperty(h.route.id)&&(!v||v[h.route.id]===void 0);if(h.route.lazy||E){u=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((f,h,y)=>{let v,E=!1,b=null,S=null;n&&(v=s&&h.route.id?s[h.route.id]:void 0,b=h.route.errorElement||V8,u&&(c<0&&y===0?(bF("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,S=null):c===y&&(E=!0,S=h.route.hydrateFallbackElement||null)));let A=e.concat(o.slice(0,y+1)),R=()=>{let D;return v?D=b:E?D=S:h.route.Component?D=x.createElement(h.route.Component,null):h.route.element?D=h.route.element:D=f,x.createElement(U8,{match:h,routeContext:{outlet:f,matches:A,isDataRoute:n!=null},children:D})};return n&&(h.route.ErrorBoundary||h.route.errorElement||y===0)?x.createElement(L8,{location:n.location,revalidation:n.revalidation,component:b,error:v,children:R(),routeContext:{outlet:null,matches:A,isDataRoute:!0},unstable_onError:r}):R()},null)}function DC(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function B8(t){let e=x.useContext(Td);return tn(e,DC(t)),e}function q8(t){let e=x.useContext(Q_);return tn(e,DC(t)),e}function $8(t){let e=x.useContext(_o);return tn(e,DC(t)),e}function NC(t){let e=$8(t),n=e.matches[e.matches.length-1];return tn(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function z8(){return NC("useRouteId")}function H8(){var r;let t=x.useContext(PC),e=q8("useRouteError"),n=NC("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function G8(){let{router:t}=B8("useNavigate"),e=NC("useNavigate"),n=x.useRef(!1);return TF(()=>{n.current=!0}),x.useCallback(async(i,o={})=>{Yi(n.current,_F),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...o}))},[t,e])}var DD={};function bF(t,e,n){!e&&!DD[t]&&(DD[t]=!0,Yi(!1,n))}x.memo(K8);function K8({routes:t,future:e,state:n,unstable_onError:r}){return wF(t,void 0,n,r,e)}function j8({to:t,replace:e,state:n,relative:r}){tn(Ed(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=x.useContext(vo);Yi(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=x.useContext(_o),{pathname:s}=as(),u=MC(),c=RC(t,xC(o),s,r==="path"),f=JSON.stringify(c);return x.useEffect(()=>{u(JSON.parse(f),{replace:e,state:n,relative:r})},[u,f,r,e,n]),null}function ui(t){tn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function W8({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:o=!1}){tn(!Ed(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=t.replace(/^\/*/,"/"),u=x.useMemo(()=>({basename:s,navigator:i,static:o,future:{}}),[s,i,o]);typeof n=="string"&&(n=oc(n));let{pathname:c="/",search:f="",hash:h="",state:y=null,key:v="default"}=n,E=x.useMemo(()=>{let b=Gs(c,s);return b==null?null:{location:{pathname:b,search:f,hash:h,state:y,key:v},navigationType:r}},[s,c,f,h,y,v,r]);return Yi(E!=null,`<Router basename="${s}"> is not able to match the URL "${c}${f}${h}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:x.createElement(vo.Provider,{value:u},x.createElement(Rm.Provider,{children:e,value:E}))}function ND({children:t,location:e}){return k8(VS(t),e)}function VS(t,e=[]){let n=[];return x.Children.forEach(t,(r,i)=>{if(!x.isValidElement(r))return;let o=[...e,i];if(r.type===x.Fragment){n.push.apply(n,VS(r.props.children,o));return}tn(r.type===ui,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),tn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=VS(r.props.children,o)),n.push(s)}),n}var pv="get",mv="application/x-www-form-urlencoded";function X_(t){return t!=null&&typeof t.tagName=="string"}function Y8(t){return X_(t)&&t.tagName.toLowerCase()==="button"}function J8(t){return X_(t)&&t.tagName.toLowerCase()==="form"}function Q8(t){return X_(t)&&t.tagName.toLowerCase()==="input"}function X8(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Z8(t,e){return t.button===0&&(!e||e==="_self")&&!X8(t)}var Ly=null;function e7(){if(Ly===null)try{new FormData(document.createElement("form"),0),Ly=!1}catch{Ly=!0}return Ly}var t7=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Rw(t){return t!=null&&!t7.has(t)?(Yi(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${mv}"`),null):t}function n7(t,e){let n,r,i,o,s;if(J8(t)){let u=t.getAttribute("action");r=u?Gs(u,e):null,n=t.getAttribute("method")||pv,i=Rw(t.getAttribute("enctype"))||mv,o=new FormData(t)}else if(Y8(t)||Q8(t)&&(t.type==="submit"||t.type==="image")){let u=t.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||u.getAttribute("action");if(r=c?Gs(c,e):null,n=t.getAttribute("formmethod")||u.getAttribute("method")||pv,i=Rw(t.getAttribute("formenctype"))||Rw(u.getAttribute("enctype"))||mv,o=new FormData(u,t),!e7()){let{name:f,type:h,value:y}=t;if(h==="image"){let v=f?`${f}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else f&&o.append(f,y)}}else{if(X_(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=pv,r=null,i=mv,s=t}return o&&i==="text/plain"&&(s=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function kC(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function r7(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Gs(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function i7(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function o7(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function s7(t,e,n){let r=await Promise.all(t.map(async i=>{let o=e.routes[i.route.id];if(o){let s=await i7(o,n);return s.links?s.links():[]}return[]}));return c7(r.flat(1).filter(o7).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function kD(t,e,n,r,i,o){let s=(c,f)=>n[f]?c.route.id!==n[f].route.id:!0,u=(c,f)=>{var h;return n[f].pathname!==c.pathname||((h=n[f].route.path)==null?void 0:h.endsWith("*"))&&n[f].params["*"]!==c.params["*"]};return o==="assets"?e.filter((c,f)=>s(c,f)||u(c,f)):o==="data"?e.filter((c,f)=>{var y;let h=r.routes[c.route.id];if(!h||!h.hasLoader)return!1;if(s(c,f)||u(c,f))return!0;if(c.route.shouldRevalidate){let v=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((y=n[0])==null?void 0:y.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function a7(t,e,{includeHydrateFallback:n}={}){return l7(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function l7(t){return[...new Set(t)]}function u7(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function c7(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let o=JSON.stringify(u7(i));return n.has(o)||(n.add(o),r.push({key:o,link:i})),r},[])}function SF(){let t=x.useContext(Td);return kC(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function f7(){let t=x.useContext(Q_);return kC(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var OC=x.createContext(void 0);OC.displayName="FrameworkContext";function AF(){let t=x.useContext(OC);return kC(t,"You must render this element inside a <HydratedRouter> element"),t}function d7(t,e){let n=x.useContext(OC),[r,i]=x.useState(!1),[o,s]=x.useState(!1),{onFocus:u,onBlur:c,onMouseEnter:f,onMouseLeave:h,onTouchStart:y}=e,v=x.useRef(null);x.useEffect(()=>{if(t==="render"&&s(!0),t==="viewport"){let S=R=>{R.forEach(D=>{s(D.isIntersecting)})},A=new IntersectionObserver(S,{threshold:.5});return v.current&&A.observe(v.current),()=>{A.disconnect()}}},[t]),x.useEffect(()=>{if(r){let S=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(S)}}},[r]);let E=()=>{i(!0)},b=()=>{i(!1),s(!1)};return n?t!=="intent"?[o,v,{}]:[o,v,{onFocus:Zh(u,E),onBlur:Zh(c,b),onMouseEnter:Zh(f,E),onMouseLeave:Zh(h,b),onTouchStart:Zh(y,E)}]:[!1,v,{}]}function Zh(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function h7({page:t,...e}){let{router:n}=SF(),r=x.useMemo(()=>pF(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?x.createElement(m7,{page:t,matches:r,...e}):null}function p7(t){let{manifest:e,routeModules:n}=AF(),[r,i]=x.useState([]);return x.useEffect(()=>{let o=!1;return s7(t,e,n).then(s=>{o||i(s)}),()=>{o=!0}},[t,e,n]),r}function m7({page:t,matches:e,...n}){let r=as(),{manifest:i,routeModules:o}=AF(),{basename:s}=SF(),{loaderData:u,matches:c}=f7(),f=x.useMemo(()=>kD(t,e,c,i,r,"data"),[t,e,c,i,r]),h=x.useMemo(()=>kD(t,e,c,i,r,"assets"),[t,e,c,i,r]),y=x.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let b=new Set,S=!1;if(e.forEach(R=>{var M;let D=i.routes[R.route.id];!D||!D.hasLoader||(!f.some(U=>U.route.id===R.route.id)&&R.route.id in u&&((M=o[R.route.id])!=null&&M.shouldRevalidate)||D.hasClientLoader?S=!0:b.add(R.route.id))}),b.size===0)return[];let A=r7(t,s,"data");return S&&b.size>0&&A.searchParams.set("_routes",e.filter(R=>b.has(R.route.id)).map(R=>R.route.id).join(",")),[A.pathname+A.search]},[s,u,r,i,f,e,t,o]),v=x.useMemo(()=>a7(h,i),[h,i]),E=p7(h);return x.createElement(x.Fragment,null,y.map(b=>x.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...n})),v.map(b=>x.createElement("link",{key:b,rel:"modulepreload",href:b,...n})),E.map(({key:b,link:S})=>x.createElement("link",{key:b,nonce:n.nonce,...S})))}function g7(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var CF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{CF&&(window.__reactRouterVersion="7.8.2")}catch{}function y7({basename:t,children:e,window:n}){let r=x.useRef();r.current==null&&(r.current=o8({window:n,v5Compat:!0}));let i=r.current,[o,s]=x.useState({action:i.action,location:i.location}),u=x.useCallback(c=>{x.startTransition(()=>s(c))},[s]);return x.useLayoutEffect(()=>i.listen(u),[i,u]),x.createElement(W8,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:i})}var IF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xF=x.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:s,state:u,target:c,to:f,preventScrollReset:h,viewTransition:y,...v},E){let{basename:b}=x.useContext(vo),S=typeof f=="string"&&IF.test(f),A,R=!1;if(typeof f=="string"&&S&&(A=f,CF))try{let N=new URL(window.location.href),$=f.startsWith("//")?new URL(N.protocol+f):new URL(f),F=Gs($.pathname,b);$.origin===N.origin&&F!=null?f=F+$.search+$.hash:R=!0}catch{Yi(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let D=D8(f,{relative:i}),[M,U,q]=d7(r,v),z=E7(f,{replace:s,state:u,target:c,preventScrollReset:h,relative:i,viewTransition:y});function k(N){e&&e(N),N.defaultPrevented||z(N)}let V=x.createElement("a",{...v,...q,href:A||D,onClick:R||o?e:k,ref:g7(E,U),target:c,"data-discover":!S&&n==="render"?"true":void 0});return M&&!S?x.createElement(x.Fragment,null,V,x.createElement(h7,{page:D})):V});xF.displayName="Link";var v7=x.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:s,viewTransition:u,children:c,...f},h){let y=Pm(s,{relative:f.relative}),v=as(),E=x.useContext(Q_),{navigator:b,basename:S}=x.useContext(vo),A=E!=null&&C7(y)&&u===!0,R=b.encodeLocation?b.encodeLocation(y).pathname:y.pathname,D=v.pathname,M=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;n||(D=D.toLowerCase(),M=M?M.toLowerCase():null,R=R.toLowerCase()),M&&S&&(M=Gs(M,S)||M);const U=R!=="/"&&R.endsWith("/")?R.length-1:R.length;let q=D===R||!i&&D.startsWith(R)&&D.charAt(U)==="/",z=M!=null&&(M===R||!i&&M.startsWith(R)&&M.charAt(R.length)==="/"),k={isActive:q,isPending:z,isTransitioning:A},V=q?e:void 0,N;typeof r=="function"?N=r(k):N=[r,q?"active":null,z?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let $=typeof o=="function"?o(k):o;return x.createElement(xF,{...f,"aria-current":V,className:N,ref:h,style:$,to:s,viewTransition:u},typeof c=="function"?c(k):c)});v7.displayName="NavLink";var _7=x.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:o,method:s=pv,action:u,onSubmit:c,relative:f,preventScrollReset:h,viewTransition:y,...v},E)=>{let b=S7(),S=A7(u,{relative:f}),A=s.toLowerCase()==="get"?"get":"post",R=typeof u=="string"&&IF.test(u),D=M=>{if(c&&c(M),M.defaultPrevented)return;M.preventDefault();let U=M.nativeEvent.submitter,q=(U==null?void 0:U.getAttribute("formmethod"))||s;b(U||M.currentTarget,{fetcherKey:e,method:q,navigate:n,replace:i,state:o,relative:f,preventScrollReset:h,viewTransition:y})};return x.createElement("form",{ref:E,method:A,action:S,onSubmit:r?c:D,...v,"data-discover":!R&&t==="render"?"true":void 0})});_7.displayName="Form";function T7(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function RF(t){let e=x.useContext(Td);return tn(e,T7(t)),e}function E7(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:s}={}){let u=MC(),c=as(),f=Pm(t,{relative:o});return x.useCallback(h=>{if(Z8(h,e)){h.preventDefault();let y=n!==void 0?n:Wp(c)===Wp(f);u(t,{replace:y,state:r,preventScrollReset:i,relative:o,viewTransition:s})}},[c,u,f,n,r,e,t,i,o,s])}var w7=0,b7=()=>`__${String(++w7)}__`;function S7(){let{router:t}=RF("useSubmit"),{basename:e}=x.useContext(vo),n=z8();return x.useCallback(async(r,i={})=>{let{action:o,method:s,encType:u,formData:c,body:f}=n7(r,e);if(i.navigate===!1){let h=i.fetcherKey||b7();await t.fetch(h,n,i.action||o,{preventScrollReset:i.preventScrollReset,formData:c,body:f,formMethod:i.method||s,formEncType:i.encType||u,flushSync:i.flushSync})}else await t.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:c,body:f,formMethod:i.method||s,formEncType:i.encType||u,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function A7(t,{relative:e}={}){let{basename:n}=x.useContext(vo),r=x.useContext(_o);tn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...Pm(t||".",{relative:e})},s=as();if(t==null){o.search=s.search;let u=new URLSearchParams(o.search),c=u.getAll("index");if(c.some(h=>h==="")){u.delete("index"),c.filter(y=>y).forEach(y=>u.append("index",y));let h=u.toString();o.search=h?`?${h}`:""}}return(!t||t===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Bs([n,o.pathname])),Wp(o)}function C7(t,{relative:e}={}){let n=x.useContext(vF);tn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=RF("useViewTransitionState"),i=Pm(t,{relative:e});if(!n.isTransitioning)return!1;let o=Gs(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=Gs(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Vv(i.pathname,s)!=null||Vv(i.pathname,o)!=null}var I7=hF();const x7=()=>{};var OD={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PF=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},R7=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],s=t[n++],u=t[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},MF={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,u=s?t[i+1]:0,c=i+2<t.length,f=c?t[i+2]:0,h=o>>2,y=(o&3)<<4|u>>4;let v=(u&15)<<2|f>>6,E=f&63;c||(E=64,s||(v=64)),r.push(n[h],n[y],n[v],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(PF(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):R7(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],u=i<t.length?n[t.charAt(i)]:0;++i;const f=i<t.length?n[t.charAt(i)]:64;++i;const y=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||u==null||f==null||y==null)throw new P7;const v=o<<2|u>>4;if(r.push(v),f!==64){const E=u<<4&240|f>>2;if(r.push(E),y!==64){const b=f<<6&192|y;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class P7 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const M7=function(t){const e=PF(t);return MF.encodeByteArray(e,!0)},Lv=function(t){return M7(t).replace(/\./g,"")},VC=function(t){try{return MF.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Uv(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!D7(n)||(t[n]=Uv(t[n],e[n]));return t}function D7(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N7=()=>LC().__FIREBASE_DEFAULTS__,k7=()=>{if(typeof process>"u"||typeof OD>"u")return;const t=OD.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},O7=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&VC(t[1]);return e&&JSON.parse(e)},Z_=()=>{try{return x7()||N7()||k7()||O7()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},DF=t=>{var e,n;return(n=(e=Z_())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},NF=t=>{const e=DF(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},UC=()=>{var t;return(t=Z_())==null?void 0:t.config},kF=t=>{var e;return(e=Z_())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V7{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function FC(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OF(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Lv(JSON.stringify(n)),Lv(JSON.stringify(s)),""].join(".")}const Rp={};function L7(){const t={prod:[],emulator:[]};for(const e of Object.keys(Rp))Rp[e]?t.emulator.push(e):t.prod.push(e);return t}function U7(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let VD=!1;function BC(t,e){if(typeof window>"u"||typeof document>"u"||!bl(window.location.host)||Rp[t]===e||Rp[t]||VD)return;Rp[t]=e;function n(v){return`__firebase__banner__${v}`}const r="__firebase__banner",o=L7().prod.length>0;function s(){const v=document.getElementById(r);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function c(v,E){v.setAttribute("width","24"),v.setAttribute("id",E),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{VD=!0,s()},v}function h(v,E){v.setAttribute("id",E),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function y(){const v=U7(r),E=n("text"),b=document.getElementById(E)||document.createElement("span"),S=n("learnmore"),A=document.getElementById(S)||document.createElement("a"),R=n("preprendIcon"),D=document.getElementById(R)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const M=v.element;u(M),h(A,S);const U=f();c(D,R),M.append(D,b,A,U),document.body.appendChild(M)}o?(b.innerText="Preview backend disconnected.",D.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(D.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function F7(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rn())}function e0(){var e;const t=(e=Z_())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function B7(){return typeof window<"u"||VF()}function VF(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function q7(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function LF(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function qC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function UF(){const t=rn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function FF(){return!e0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function BF(){return!e0()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Yp(){try{return typeof indexedDB=="object"}catch{return!1}}function $7(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z7="FirebaseError";class Ir extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=z7,Object.setPrototypeOf(this,Ir.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sc.prototype.create)}}class sc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?H7(o,r):"Error",u=`${this.serviceName}: ${s} (${i}).`;return new Ir(i,u,r)}}function H7(t,e){return t.replace(G7,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const G7=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function K7(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ks(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(UD(o)&&UD(s)){if(!Ks(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function UD(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function wf(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function _p(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function qF(t,e){const n=new j7(t,e);return n.subscribe.bind(n)}class j7{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");W7(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Pw),i.error===void 0&&(i.error=Pw),i.complete===void 0&&(i.complete=Pw);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function W7(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Pw(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(t){return t&&t._delegate?t._delegate:t}class Ji{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Y7=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new V7;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Q7(e))try{this.getOrInitializeService({instanceIdentifier:yu})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=yu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=yu){return this.instances.has(e)}getOptions(e=yu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&s.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:J7(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=yu){return this.component?this.component.multipleInstances?e:yu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function J7(t){return t===yu?void 0:t}function Q7(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $F{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Y7(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C=[];var it;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(it||(it={}));const zF={debug:it.DEBUG,verbose:it.VERBOSE,info:it.INFO,warn:it.WARN,error:it.ERROR,silent:it.SILENT},X7=it.INFO,Z7={[it.DEBUG]:"log",[it.VERBOSE]:"log",[it.INFO]:"info",[it.WARN]:"warn",[it.ERROR]:"error"},eK=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Z7[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class t0{constructor(e){this.name=e,this._logLevel=X7,this._logHandler=eK,this._userLogHandler=null,$C.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in it))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,it.DEBUG,...e),this._logHandler(this,it.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,it.VERBOSE,...e),this._logHandler(this,it.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,it.INFO,...e),this._logHandler(this,it.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,it.WARN,...e),this._logHandler(this,it.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,it.ERROR,...e),this._logHandler(this,it.ERROR,...e)}}function tK(t){$C.forEach(e=>{e.setLogLevel(t)})}function nK(t,e){for(const n of $C){let r=null;e&&e.level&&(r=zF[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,o,...s)=>{const u=s.map(c=>{if(c==null)return null;if(typeof c=="string")return c;if(typeof c=="number"||typeof c=="boolean")return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch{return null}}).filter(c=>c).join(" ");o>=(r??i.logLevel)&&t({level:it[o].toLowerCase(),message:u,args:s,type:i.name})}}}const rK=(t,e)=>e.some(n=>t instanceof n);let FD,BD;function iK(){return FD||(FD=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oK(){return BD||(BD=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const HF=new WeakMap,LS=new WeakMap,GF=new WeakMap,Mw=new WeakMap,zC=new WeakMap;function sK(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(il(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&HF.set(n,t)}).catch(()=>{}),zC.set(e,t),e}function aK(t){if(LS.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});LS.set(t,e)}let US={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return LS.get(t);if(e==="objectStoreNames")return t.objectStoreNames||GF.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return il(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function lK(t){US=t(US)}function uK(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Dw(this),e,...n);return GF.set(r,e.sort?e.sort():[e]),il(r)}:oK().includes(t)?function(...e){return t.apply(Dw(this),e),il(HF.get(this))}:function(...e){return il(t.apply(Dw(this),e))}}function cK(t){return typeof t=="function"?uK(t):(t instanceof IDBTransaction&&aK(t),rK(t,iK())?new Proxy(t,US):t)}function il(t){if(t instanceof IDBRequest)return sK(t);if(Mw.has(t))return Mw.get(t);const e=cK(t);return e!==t&&(Mw.set(t,e),zC.set(e,t)),e}const Dw=t=>zC.get(t);function fK(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),u=il(s);return r&&s.addEventListener("upgradeneeded",c=>{r(il(s.result),c.oldVersion,c.newVersion,il(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const dK=["get","getKey","getAll","getAllKeys","count"],hK=["put","add","delete","clear"],Nw=new Map;function qD(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Nw.get(e))return Nw.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=hK.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||dK.includes(n)))return;const o=async function(s,...u){const c=this.transaction(s,i?"readwrite":"readonly");let f=c.store;return r&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),i&&c.done]))[0]};return Nw.set(e,o),o}lK(t=>({...t,get:(e,n,r)=>qD(e,n)||t.get(e,n,r),has:(e,n)=>!!qD(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pK{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(mK(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function mK(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Fv="@firebase/app",FS="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=new t0("@firebase/app"),gK="@firebase/app-compat",yK="@firebase/analytics-compat",vK="@firebase/analytics",_K="@firebase/app-check-compat",TK="@firebase/app-check",EK="@firebase/auth",wK="@firebase/auth-compat",bK="@firebase/database",SK="@firebase/data-connect",AK="@firebase/database-compat",CK="@firebase/functions",IK="@firebase/functions-compat",xK="@firebase/installations",RK="@firebase/installations-compat",PK="@firebase/messaging",MK="@firebase/messaging-compat",DK="@firebase/performance",NK="@firebase/performance-compat",kK="@firebase/remote-config",OK="@firebase/remote-config-compat",VK="@firebase/storage",LK="@firebase/storage-compat",UK="@firebase/firestore",FK="@firebase/ai",BK="@firebase/firestore-compat",qK="firebase",$K="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cl="[DEFAULT]",zK={[Fv]:"fire-core",[gK]:"fire-core-compat",[vK]:"fire-analytics",[yK]:"fire-analytics-compat",[TK]:"fire-app-check",[_K]:"fire-app-check-compat",[EK]:"fire-auth",[wK]:"fire-auth-compat",[bK]:"fire-rtdb",[SK]:"fire-data-connect",[AK]:"fire-rtdb-compat",[CK]:"fire-fn",[IK]:"fire-fn-compat",[xK]:"fire-iid",[RK]:"fire-iid-compat",[PK]:"fire-fcm",[MK]:"fire-fcm-compat",[DK]:"fire-perf",[NK]:"fire-perf-compat",[kK]:"fire-rc",[OK]:"fire-rc-compat",[VK]:"fire-gcs",[LK]:"fire-gcs-compat",[UK]:"fire-fst",[BK]:"fire-fst-compat",[FK]:"fire-vertex","fire-js":"fire-js",[qK]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fl=new Map,Ff=new Map,Bf=new Map;function Jp(t,e){try{t.container.addComponent(e)}catch(n){js.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function KF(t,e){t.container.addOrOverwriteComponent(e)}function Ws(t){const e=t.name;if(Bf.has(e))return js.debug(`There were multiple attempts to register component ${e}.`),!1;Bf.set(e,t);for(const n of fl.values())Jp(n,t);for(const n of Ff.values())Jp(n,t);return!0}function bd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function HK(t,e,n=cl){bd(t,e).clearInstance(n)}function HC(t){return t.options!==void 0}function jF(t){return HC(t)?!1:"authIdToken"in t||"appCheckToken"in t||"releaseOnDeref"in t||"automaticDataCollectionEnabled"in t}function Gt(t){return t==null?!1:t.settings!==void 0}function GK(){Bf.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KK={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_i=new sc("app","Firebase",KK);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let WF=class{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ji("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _i.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(t,e){const n=VC(t.split(".")[1]);if(n===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(n).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const i=JSON.parse(n).exp*1e3,o=new Date().getTime();i-o<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class jK extends WF{constructor(e,n,r,i){const o=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!0,s={name:r,automaticDataCollectionEnabled:o};if(e.apiKey!==void 0)super(e,s,i);else{const u=e;super(u.options,s,i)}this._serverConfig={automaticDataCollectionEnabled:o,...n},this._serverConfig.authIdToken&&$D(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&$D(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,Ti(Fv,FS,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){KC(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw _i.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na=$K;function GC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:cl,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw _i.create("bad-app-name",{appName:String(i)});if(n||(n=UC()),!n)throw _i.create("no-options");const o=fl.get(i);if(o){if(Ks(n,o.options)&&Ks(r,o.config))return o;throw _i.create("duplicate-app",{appName:i})}const s=new $F(i);for(const c of Bf.values())s.addComponent(c);const u=new WF(n,r,s);return fl.set(i,u),u}function WK(t,e={}){if(B7()&&!VF())throw _i.create("invalid-server-app-environment");let n,r=e||{};if(t&&(HC(t)?n=t.options:jF(t)?r=t:n=t),r.automaticDataCollectionEnabled===void 0&&(r.automaticDataCollectionEnabled=!0),n||(n=UC()),!n)throw _i.create("no-options");const i={...r,...n};i.releaseOnDeref!==void 0&&delete i.releaseOnDeref;const o=h=>[...h].reduce((y,v)=>Math.imul(31,y)+v.charCodeAt(0)|0,0);if(r.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw _i.create("finalization-registry-not-supported",{});const s=""+o(JSON.stringify(i)),u=Ff.get(s);if(u)return u.incRefCount(r.releaseOnDeref),u;const c=new $F(s);for(const h of Bf.values())c.addComponent(h);const f=new jK(n,r,s,c);return Ff.set(s,f),f}function n0(t=cl){const e=fl.get(t);if(!e&&t===cl&&UC())return GC();if(!e)throw _i.create("no-app",{appName:t});return e}function YK(){return Array.from(fl.values())}async function KC(t){let e=!1;const n=t.name;fl.has(n)?(e=!0,fl.delete(n)):Ff.has(n)&&t.decRefCount()<=0&&(Ff.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function Ti(t,e,n){let r=zK[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),js.warn(s.join(" "));return}Ws(new Ji(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function YF(t,e){if(t!==null&&typeof t!="function")throw _i.create("invalid-log-argument");nK(t,e)}function JF(t){tK(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JK="firebase-heartbeat-database",QK=1,Qp="firebase-heartbeat-store";let kw=null;function QF(){return kw||(kw=fK(JK,QK,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Qp)}catch(n){console.warn(n)}}}}).catch(t=>{throw _i.create("idb-open",{originalErrorMessage:t.message})})),kw}async function XK(t){try{const n=(await QF()).transaction(Qp),r=await n.objectStore(Qp).get(XF(t));return await n.done,r}catch(e){if(e instanceof Ir)js.warn(e.message);else{const n=_i.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});js.warn(n.message)}}}async function zD(t,e){try{const r=(await QF()).transaction(Qp,"readwrite");await r.objectStore(Qp).put(e,XF(t)),await r.done}catch(n){if(n instanceof Ir)js.warn(n.message);else{const r=_i.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});js.warn(r.message)}}}function XF(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZK=1024,ej=30;class tj{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new rj(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=HD();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>ej){const s=ij(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){js.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=HD(),{heartbeatsToSend:r,unsentEntries:i}=nj(this._heartbeatsCache.heartbeats),o=Lv(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return js.warn(n),""}}}function HD(){return new Date().toISOString().substring(0,10)}function nj(t,e=ZK){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),GD(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),GD(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class rj{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Yp()?$7().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await XK(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return zD(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return zD(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function GD(t){return Lv(JSON.stringify({version:2,heartbeats:t})).length}function ij(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oj(t){Ws(new Ji("platform-logger",e=>new pK(e),"PRIVATE")),Ws(new Ji("heartbeat",e=>new tj(e),"PRIVATE")),Ti(Fv,FS,t),Ti(Fv,FS,"esm2020"),Ti("fire-js","")}oj("");const sj=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Ir,SDK_VERSION:na,_DEFAULT_ENTRY_NAME:cl,_addComponent:Jp,_addOrOverwriteComponent:KF,_apps:fl,_clearComponents:GK,_components:Bf,_getProvider:bd,_isFirebaseApp:HC,_isFirebaseServerApp:Gt,_isFirebaseServerAppSettings:jF,_registerComponent:Ws,_removeServiceInstance:HK,_serverApps:Ff,deleteApp:KC,getApp:n0,getApps:YK,initializeApp:GC,initializeServerApp:WK,onLog:YF,registerVersion:Ti,setLogLevel:JF},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(e,n){this._delegate=e,this.firebase=n,Jp(e,new Ji("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),KC(this._delegate)))}_getService(e,n=cl){var i;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&((i=r.getComponent())==null?void 0:i.instantiationMode)==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:n})}_removeServiceInstance(e,n=cl){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Jp(this._delegate,e)}_addOrOverwriteComponent(e){KF(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lj={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},KD=new sc("app-compat","Firebase",lj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uj(t){const e={},n={__esModule:!0,initializeApp:o,app:i,registerVersion:Ti,setLogLevel:JF,onLog:YF,apps:null,SDK_VERSION:na,INTERNAL:{registerComponent:u,removeApp:r,useAsService:c,modularAPIs:sj}};n.default=n,Object.defineProperty(n,"apps",{get:s});function r(f){delete e[f]}function i(f){if(f=f||cl,!LD(e,f))throw KD.create("no-app",{appName:f});return e[f]}i.App=t;function o(f,h={}){const y=GC(f,h);if(LD(e,y.name))return e[y.name];const v=new t(y,n);return e[y.name]=v,v}function s(){return Object.keys(e).map(f=>e[f])}function u(f){const h=f.name,y=h.replace("-compat","");if(Ws(f)&&f.type==="PUBLIC"){const v=(E=i())=>{if(typeof E[y]!="function")throw KD.create("invalid-app-argument",{appName:h});return E[y]()};f.serviceProps!==void 0&&Uv(v,f.serviceProps),n[y]=v,t.prototype[y]=function(...E){return this._getService.bind(this,h).apply(this,f.multipleInstances?E:[])}}return f.type==="PUBLIC"?n[y]:null}function c(f,h){return h==="serverAuth"?null:h}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZF(){const t=uj(aj);t.INTERNAL={...t.INTERNAL,createFirebaseNamespace:ZF,extendNamespace:e,createSubscribe:qF,ErrorFactory:sc,deepExtend:Uv};function e(n){Uv(t,n)}return t}const cj=ZF();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD=new t0("@firebase/app-compat"),fj="@firebase/app-compat",dj="0.5.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hj(t){Ti(fj,dj,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=LC();if(t.firebase!==void 0){jD.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&jD.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Sl=cj;hj();var pj="firebase",mj="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sl.registerVersion(pj,mj,"app-compat");const ep={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},lf={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gj(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function e4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const yj=gj,vj=e4,t4=new sc("auth","Firebase",e4());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv=new t0("@firebase/auth");function _j(t,...e){Bv.logLevel<=it.WARN&&Bv.warn(`Auth (${na}): ${t}`,...e)}function gv(t,...e){Bv.logLevel<=it.ERROR&&Bv.error(`Auth (${na}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(t,...e){throw WC(t,...e)}function Fn(t,...e){return WC(t,...e)}function jC(t,e,n){const r={...vj(),[e]:n};return new sc("auth","Firebase",r).create(e,{appName:t.name})}function Xn(t){return jC(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Sd(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Zn(t,"argument-error"),jC(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function WC(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return t4.create(t,...e)}function ye(t,e,...n){if(!t)throw WC(e,...n)}function Ko(t){const e="INTERNAL ASSERTION FAILED: "+t;throw gv(e),new Error(e)}function go(t,e){t||Ko(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function YC(){return WD()==="http:"||WD()==="https:"}function WD(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(YC()||LF()||"connection"in navigator)?navigator.onLine:!0}function Ej(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,n){this.shortDelay=e,this.longDelay=n,go(n>e,"Short delay should be less than long delay!"),this.isMobile=F7()||qC()}get(){return Tj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JC(t,e){go(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ko("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ko("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ko("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Sj=new Mm(3e4,6e4);function hn(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function pn(t,e,n,r,i={}){return r4(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});const u=wd({key:t.config.apiKey,...s}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:c,...o};return q7()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&bl(t.emulatorConfig.host)&&(f.credentials="include"),n4.fetch()(await i4(t,t.config.apiHost,n,u),f)})}async function r4(t,e,n){t._canInitEmulator=!1;const r={...wj,...e};try{const i=new Cj(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw Tp(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const u=o.ok?s.errorMessage:s.error.message,[c,f]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tp(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Tp(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw Tp(t,"user-disabled",s);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw jC(t,h,f);Zn(t,h)}}catch(i){if(i instanceof Ir)throw i;Zn(t,"network-request-failed",{message:String(i)})}}async function ra(t,e,n,r,i={}){const o=await pn(t,e,n,r,i);return"mfaPendingCredential"in o&&Zn(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function i4(t,e,n,r){const i=`${e}${n}?${r}`,o=t,s=o.config.emulator?JC(t.config,i):`${t.config.apiScheme}://${i}`;return bj.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}function Aj(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Cj{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Fn(this.auth,"network-request-failed")),Sj.get())})}}function Tp(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Fn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YD(t){return t!==void 0&&t.getResponse!==void 0}function JD(t){return t!==void 0&&t.enterprise!==void 0}class o4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Aj(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ij(t){return(await pn(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function s4(t,e){return pn(t,"GET","/v2/recaptchaConfig",hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xj(t,e){return pn(t,"POST","/v1/accounts:delete",e)}async function Rj(t,e){return pn(t,"POST","/v1/accounts:update",e)}async function qv(t,e){return pn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Pj(t,e=!1){const n=Pe(t),r=await n.getIdToken(e),i=r0(r);ye(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Pp(Ow(i.auth_time)),issuedAtTime:Pp(Ow(i.iat)),expirationTime:Pp(Ow(i.exp)),signInProvider:s||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Ow(t){return Number(t)*1e3}function r0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return gv("JWT malformed, contained fewer than 3 sections"),null;try{const i=VC(n);return i?JSON.parse(i):(gv("Failed to decode base64 JWT payload"),null)}catch(i){return gv("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function QD(t){const e=r0(t);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ys(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ir&&Mj(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Mj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pp(this.lastLoginAt),this.creationTime=Pp(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zp(t){var y;const e=t.auth,n=await t.getIdToken(),r=await Ys(t,qv(e,{idToken:n}));ye(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const o=(y=i.providerUserInfo)!=null&&y.length?a4(i.providerUserInfo):[],s=kj(t.providerData,o),u=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(s!=null&&s.length),f=u?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new BS(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,h)}async function Nj(t){const e=Pe(t);await Zp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function kj(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function a4(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oj(t,e){const n=await r4(t,{},async()=>{const r=wd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=await i4(t,i,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:u,body:r};return t.emulatorConfig&&bl(t.emulatorConfig.host)&&(c.credentials="include"),n4.fetch()(s,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Vj(t,e){return pn(t,"POST","/v2/accounts:revokeToken",hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):QD(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const n=QD(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await Oj(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new Cf;return r&&(ye(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ye(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(ye(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Cf,this.toJSON())}_performRefresh(){return Ko("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ka(t,e){ye(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class fo{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new Dj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new BS(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ys(this,this.stsTokenManager.getToken(this.auth,e));return ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Pj(this,e)}reload(){return Nj(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new fo({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Zp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gt(this.auth.app))return Promise.reject(Xn(this.auth));const e=await this.getIdToken();return await Ys(this,xj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,o=n.phoneNumber??void 0,s=n.photoURL??void 0,u=n.tenantId??void 0,c=n._redirectEventId??void 0,f=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:y,emailVerified:v,isAnonymous:E,providerData:b,stsTokenManager:S}=n;ye(y&&S,e,"internal-error");const A=Cf.fromJSON(this.name,S);ye(typeof y=="string",e,"internal-error"),Ka(r,e.name),Ka(i,e.name),ye(typeof v=="boolean",e,"internal-error"),ye(typeof E=="boolean",e,"internal-error"),Ka(o,e.name),Ka(s,e.name),Ka(u,e.name),Ka(c,e.name),Ka(f,e.name),Ka(h,e.name);const R=new fo({uid:y,auth:e,email:i,emailVerified:v,displayName:r,isAnonymous:E,photoURL:s,phoneNumber:o,tenantId:u,stsTokenManager:A,createdAt:f,lastLoginAt:h});return b&&Array.isArray(b)&&(R.providerData=b.map(D=>({...D}))),c&&(R._redirectEventId=c),R}static async _fromIdTokenResponse(e,n,r=!1){const i=new Cf;i.updateFromServerResponse(n);const o=new fo({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Zp(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ye(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?a4(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),u=new Cf;u.updateFromIdToken(r);const c=new fo({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:s}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new BS(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(c,f),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD=new Map;function gi(t){go(t instanceof Function,"Expected a class definition");let e=XD.get(t);return e?(go(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,XD.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}l4.type="NONE";const qf=l4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ou(t,e,n){return`firebase:${t}:${e}:${n}`}class If{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Ou(this.userKey,i.apiKey,o),this.fullPersistenceKey=Ou("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await qv(this.auth,{idToken:e}).catch(()=>{});return n?fo._fromGetAccountInfoResponse(this.auth,n,e):null}return fo._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new If(gi(qf),e,r);const i=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=i[0]||gi(qf);const s=Ou(r,e.config.apiKey,e.name);let u=null;for(const f of n)try{const h=await f._get(s);if(h){let y;if(typeof h=="string"){const v=await qv(e,{idToken:h}).catch(()=>{});if(!v)break;y=await fo._fromGetAccountInfoResponse(e,v,h)}else y=fo._fromJSON(e,h);f!==o&&(u=y),o=f;break}}catch{}const c=i.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new If(o,e,r):(o=c[0],u&&await o._set(s,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(s)}catch{}})),new If(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZD(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(d4(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(u4(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(h4(e))return"Blackberry";if(p4(e))return"Webos";if(c4(e))return"Safari";if((e.includes("chrome/")||f4(e))&&!e.includes("edge/"))return"Chrome";if(Dm(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function u4(t=rn()){return/firefox\//i.test(t)}function c4(t=rn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function f4(t=rn()){return/crios\//i.test(t)}function d4(t=rn()){return/iemobile/i.test(t)}function Dm(t=rn()){return/android/i.test(t)}function h4(t=rn()){return/blackberry/i.test(t)}function p4(t=rn()){return/webos/i.test(t)}function Nm(t=rn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Lj(t=rn()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function Uj(t=rn()){var e;return Nm(t)&&!!((e=window.navigator)!=null&&e.standalone)}function Fj(){return UF()&&document.documentMode===10}function m4(t=rn()){return Nm(t)||Dm(t)||p4(t)||h4(t)||/windows phone/i.test(t)||d4(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g4(t,e=[]){let n;switch(t){case"Browser":n=ZD(rn());break;case"Worker":n=`${ZD(rn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${na}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,u)=>{try{const c=e(o);s(c)}catch(c){u(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qj(t,e={}){return pn(t,"GET","/v2/passwordPolicy",hn(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j=6;class zj{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??$j,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new eN(this),this.idTokenSubscription=new eN(this),this.beforeStateQueue=new Bj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=t4,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=gi(n)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await If.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await qv(this,{idToken:e}),r=await fo._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(Gt(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(o=this.redirectUser)==null?void 0:o._redirectEventId,u=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!s||s===u)&&(c!=null&&c.user)&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Zp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Ej()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Gt(this.app))return Promise.reject(Xn(this));const n=e?Pe(e):null;return n&&ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Gt(this.app)?Promise.reject(Xn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Gt(this.app)?Promise.reject(Xn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await qj(this),n=new zj(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new sc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Vj(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&gi(e)||this._popupRedirectResolver;ye(n,this,"argument-error"),this.redirectPersistenceManager=await If.create(this,[gi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let s=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(u,this,"internal-error"),u.then(()=>{s||o(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{const c=e.addObserver(n);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=g4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Gt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&_j(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function on(t){return Pe(t)}class eN{constructor(e){this.auth=e,this.observer=null,this.addObserver=qF(n=>this.observer=n)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let km={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Gj(t){km=t}function QC(t){return km.loadJS(t)}function Kj(){return km.recaptchaV2Script}function jj(){return km.recaptchaEnterpriseScript}function Wj(){return km.gapiScript}function y4(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yj=500,Jj=6e4,Uy=1e12;class Qj{constructor(e){this.auth=e,this.counter=Uy,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new eW(e,this.auth.name,n||{})),this.counter++,r}reset(e){var r;const n=e||Uy;(r=this._widgets.get(n))==null||r.delete(),this._widgets.delete(n)}getResponse(e){var r;const n=e||Uy;return((r=this._widgets.get(n))==null?void 0:r.getResponse())||""}async execute(e){var r;const n=e||Uy;return(r=this._widgets.get(n))==null||r.execute(),""}}class Xj{constructor(){this.enterprise=new Zj}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Zj{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class eW{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;ye(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=tW(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},Jj)},Yj))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function tW(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const nW="recaptcha-enterprise",Mp="NO_RECAPTCHA";class v4{constructor(e){this.type=nW,this.auth=on(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(s,u)=>{s4(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new o4(c);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,s(f.siteKey)}}).catch(c=>{u(c)})})}function i(o,s,u){const c=window.grecaptcha;JD(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(f=>{s(f)}).catch(()=>{s(Mp)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Xj().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(u=>{if(!n&&JD(window.grecaptcha))i(u,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=jj();c.length!==0&&(c+=u),QC(c).then(()=>{i(u,o,s)}).catch(f=>{s(f)})}}).catch(u=>{s(u)})})}}async function tp(t,e,n,r=!1,i=!1){const o=new v4(t);let s;if(i)s=Mp;else try{s=await o.verify(n)}catch{s=await o.verify(n,!0)}const u={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const c=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:f,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const c=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:s}):Object.assign(u,{captchaResponse:s}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function ol(t,e,n,r,i){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await tp(t,e,n,n==="getOobCode");return r(t,u)}else return r(t,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await tp(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(u)});else if(i==="PHONE_PROVIDER")if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("PHONE_PROVIDER")){const u=await tp(t,e,n);return r(t,u).catch(async c=>{var f;if(((f=t._getRecaptchaConfig())==null?void 0:f.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const h=await tp(t,e,n,!1,!0);return r(t,h)}return Promise.reject(c)})}else{const u=await tp(t,e,n,!1,!0);return r(t,u)}else return Promise.reject(i+" provider is not supported.")}async function rW(t){const e=on(t),n=await s4(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new o4(n);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new v4(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iW(t,e){const n=bd(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(Ks(o,e??{}))return i;Zn(i,"already-initialized")}return n.initialize({options:e})}function oW(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(gi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function _4(t,e,n){const r=on(t);ye(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),o=T4(e),{host:s,port:u}=sW(e),c=u===null?"":`:${u}`,f={url:`${o}//${s}${c}/`},h=Object.freeze({host:s,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ye(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ye(Ks(f,r.config.emulator)&&Ks(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,bl(s)?(FC(`${o}//${s}${c}`),BC("Auth",!0)):i||aW()}function T4(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function sW(t){const e=T4(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:tN(r.substr(o.length+1))}}else{const[o,s]=r.split(":");return{host:o,port:tN(s)}}}function tN(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function aW(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ko("not implemented")}_getIdTokenResponse(e){return Ko("not implemented")}_linkToIdToken(e,n){return Ko("not implemented")}_getReauthenticationResolver(e){return Ko("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E4(t,e){return pn(t,"POST","/v1/accounts:resetPassword",hn(t,e))}async function lW(t,e){return pn(t,"POST","/v1/accounts:update",e)}async function uW(t,e){return pn(t,"POST","/v1/accounts:signUp",e)}async function cW(t,e){return pn(t,"POST","/v1/accounts:update",hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fW(t,e){return ra(t,"POST","/v1/accounts:signInWithPassword",hn(t,e))}async function i0(t,e){return pn(t,"POST","/v1/accounts:sendOobCode",hn(t,e))}async function dW(t,e){return i0(t,e)}async function hW(t,e){return i0(t,e)}async function pW(t,e){return i0(t,e)}async function mW(t,e){return i0(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gW(t,e){return ra(t,"POST","/v1/accounts:signInWithEmailLink",hn(t,e))}async function yW(t,e){return ra(t,"POST","/v1/accounts:signInWithEmailLink",hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em extends Ad{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new em(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new em(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ol(e,n,"signInWithPassword",fW,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return gW(e,{email:this._email,oobCode:this._password});default:Zn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ol(e,r,"signUpPassword",uW,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return yW(e,{idToken:n,email:this._email,oobCode:this._password});default:Zn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qs(t,e){return ra(t,"POST","/v1/accounts:signInWithIdp",hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vW="http://localhost";class ts extends Ad{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ts(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Zn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=n;if(!r||!i)return null;const s=new ts(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return qs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,qs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,qs(e,n)}buildRequest(){const e={requestUri:vW,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=wd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nN(t,e){return pn(t,"POST","/v1/accounts:sendVerificationCode",hn(t,e))}async function _W(t,e){return ra(t,"POST","/v1/accounts:signInWithPhoneNumber",hn(t,e))}async function TW(t,e){const n=await ra(t,"POST","/v1/accounts:signInWithPhoneNumber",hn(t,e));if(n.temporaryProof)throw Tp(t,"account-exists-with-different-credential",n);return n}const EW={USER_NOT_FOUND:"user-not-found"};async function wW(t,e){const n={...e,operation:"REAUTH"};return ra(t,"POST","/v1/accounts:signInWithPhoneNumber",hn(t,n),EW)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu extends Ad{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Vu({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Vu({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return _W(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return TW(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return wW(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:o}=e;return!r&&!n&&!i&&!o?null:new Vu({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bW(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function SW(t){const e=wf(_p(t)).link,n=e?wf(_p(e)).deep_link_id:null,r=wf(_p(t)).deep_link_id;return(r?wf(_p(r)).link:null)||r||n||e||t}class o0{constructor(e){const n=wf(_p(e)),r=n.apiKey??null,i=n.oobCode??null,o=bW(n.mode??null);ye(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=SW(e);try{return new o0(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(){this.providerId=Al.PROVIDER_ID}static credential(e,n){return em._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=o0.parseLink(n);return ye(r,"argument-error"),em._fromEmailAndCode(e,r.code,r.tenantId)}}Al.PROVIDER_ID="password";Al.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Al.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd extends ia{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class xf extends Cd{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return ye("providerId"in n&&"signInMethod"in n,"argument-error"),ts._fromParams(n)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return ye(e.idToken||e.accessToken,"argument-error"),ts._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return xf.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return xf.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:o,nonce:s,providerId:u}=e;if(!r&&!i&&!n&&!o||!u)return null;try{return new xf(u)._credential({idToken:n,accessToken:r,nonce:s,pendingToken:o})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo extends Cd{constructor(){super("facebook.com")}static credential(e){return ts._fromParams({providerId:qo.PROVIDER_ID,signInMethod:qo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qo.credentialFromTaggedObject(e)}static credentialFromError(e){return qo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qo.credential(e.oauthAccessToken)}catch{return null}}}qo.FACEBOOK_SIGN_IN_METHOD="facebook.com";qo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o extends Cd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ts._fromParams({providerId:$o.PROVIDER_ID,signInMethod:$o.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return $o.credentialFromTaggedObject(e)}static credentialFromError(e){return $o.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return $o.credential(n,r)}catch{return null}}}$o.GOOGLE_SIGN_IN_METHOD="google.com";$o.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo extends Cd{constructor(){super("github.com")}static credential(e){return ts._fromParams({providerId:zo.PROVIDER_ID,signInMethod:zo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zo.credentialFromTaggedObject(e)}static credentialFromError(e){return zo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zo.credential(e.oauthAccessToken)}catch{return null}}}zo.GITHUB_SIGN_IN_METHOD="github.com";zo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AW="http://localhost";class $f extends Ad{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return qs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,qs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,qs(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:o}=n;return!r||!i||!o||r!==i?null:new $f(r,o)}static _create(e,n){return new $f(e,n)}buildRequest(){return{requestUri:AW,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CW="saml.";class $v extends ia{constructor(e){ye(e.startsWith(CW),"argument-error"),super(e)}static credentialFromResult(e){return $v.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return $v.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=$f.fromJSON(e);return ye(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return $f._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho extends Cd{constructor(){super("twitter.com")}static credential(e,n){return ts._fromParams({providerId:Ho.PROVIDER_ID,signInMethod:Ho.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ho.credentialFromTaggedObject(e)}static credentialFromError(e){return Ho.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ho.credential(n,r)}catch{return null}}}Ho.TWITTER_SIGN_IN_METHOD="twitter.com";Ho.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w4(t,e){return ra(t,"POST","/v1/accounts:signUp",hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await fo._fromIdTokenResponse(e,r,i),s=rN(r);return new Qi({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=rN(r);return new Qi({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function rN(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IW(t){var i;if(Gt(t.app))return Promise.reject(Xn(t));const e=on(t);if(await e._initializationPromise,(i=e.currentUser)!=null&&i.isAnonymous)return new Qi({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await w4(e,{returnSecureToken:!0}),r=await Qi._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv extends Ir{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,zv.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new zv(e,n,r,i)}}function b4(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?zv._fromErrorAndOperation(t,o,e,r):o})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S4(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xW(t,e){const n=Pe(t);await s0(!0,n,e);const{providerUserInfo:r}=await Rj(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=S4(r||[]);return n.providerData=n.providerData.filter(o=>i.has(o.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function XC(t,e,n=!1){const r=await Ys(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Qi._forOperation(t,"link",r)}async function s0(t,e,n){await Zp(e);const r=S4(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";ye(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A4(t,e,n=!1){const{auth:r}=t;if(Gt(r.app))return Promise.reject(Xn(r));const i="reauthenticate";try{const o=await Ys(t,b4(r,i,e,t),n);ye(o.idToken,r,"internal-error");const s=r0(o.idToken);ye(s,r,"internal-error");const{sub:u}=s;return ye(t.uid===u,r,"user-mismatch"),Qi._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Zn(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C4(t,e,n=!1){if(Gt(t.app))return Promise.reject(Xn(t));const r="signIn",i=await b4(t,r,e),o=await Qi._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function a0(t,e){return C4(on(t),e)}async function I4(t,e){const n=Pe(t);return await s0(!1,n,e.providerId),XC(n,e)}async function x4(t,e){return A4(Pe(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RW(t,e){return ra(t,"POST","/v1/accounts:signInWithCustomToken",hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PW(t,e){if(Gt(t.app))return Promise.reject(Xn(t));const n=on(t),r=await RW(n,{token:e,returnSecureToken:!0}),i=await Qi._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?ZC._fromServerResponse(e,n):"totpInfo"in n?eI._fromServerResponse(e,n):Zn(e,"internal-error")}}class ZC extends Om{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new ZC(n)}}class eI extends Om{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new eI(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(t,e,n){var r;ye(((r=n.url)==null?void 0:r.length)>0,t,"invalid-continue-uri"),ye(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),ye(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ye(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(ye(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tI(t){const e=on(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function MW(t,e,n){const r=on(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&l0(r,i,n),await ol(r,i,"getOobCode",hW,"EMAIL_PASSWORD_PROVIDER")}async function DW(t,e,n){await E4(Pe(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&tI(t),r})}async function NW(t,e){await cW(Pe(t),{oobCode:e})}async function R4(t,e){const n=Pe(t),r=await E4(n,{oobCode:e}),i=r.requestType;switch(ye(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ye(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ye(r.mfaInfo,n,"internal-error");default:ye(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=Om._fromServerResponse(on(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:o},operation:i}}async function kW(t,e){const{data:n}=await R4(Pe(t),e);return n.email}async function OW(t,e,n){if(Gt(t.app))return Promise.reject(Xn(t));const r=on(t),s=await ol(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",w4,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&tI(t),c}),u=await Qi._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(u.user),u}function P4(t,e,n){return Gt(t.app)?Promise.reject(Xn(t)):a0(Pe(t),Al.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&tI(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VW(t,e,n){const r=on(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function o(s,u){ye(u.handleCodeInApp,r,"argument-error"),u&&l0(r,s,u)}o(i,n),await ol(r,i,"getOobCode",pW,"EMAIL_PASSWORD_PROVIDER")}function LW(t,e){const n=o0.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function UW(t,e,n){if(Gt(t.app))return Promise.reject(Xn(t));const r=Pe(t),i=Al.credentialWithLink(e,n||Xp());return ye(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),a0(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FW(t,e){return pn(t,"POST","/v1/accounts:createAuthUri",hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BW(t,e){const n=YC()?Xp():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await FW(Pe(t),r);return i||[]}async function qW(t,e){const n=Pe(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&l0(n.auth,i,e);const{email:o}=await dW(n.auth,i);o!==t.email&&await t.reload()}async function $W(t,e,n){const r=Pe(t),o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&l0(r.auth,o,n);const{email:s}=await mW(r.auth,o);s!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zW(t,e){return pn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HW(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Pe(t),o={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},s=await Ys(r,zW(r.auth,o));r.displayName=s.displayName||null,r.photoURL=s.photoUrl||null;const u=r.providerData.find(({providerId:c})=>c==="password");u&&(u.displayName=r.displayName,u.photoURL=r.photoURL),await r._updateTokensIfNecessary(s)}function GW(t,e){const n=Pe(t);return Gt(n.auth.app)?Promise.reject(Xn(n.auth)):D4(n,e,null)}function M4(t,e){return D4(Pe(t),null,e)}async function D4(t,e,n){const{auth:r}=t,o={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(o.email=e),n&&(o.password=n);const s=await Ys(t,lW(r,o));await t._updateTokensIfNecessary(s,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KW(t){var i,o;if(!t)return null;const{providerId:e}=t,n=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},r=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(t!=null&&t.idToken)){const s=(o=(i=r0(t.idToken))==null?void 0:i.firebase)==null?void 0:o.sign_in_provider;if(s){const u=s!=="anonymous"&&s!=="custom"?s:null;return new Rf(r,u)}}if(!e)return null;switch(e){case"facebook.com":return new jW(r,n);case"github.com":return new WW(r,n);case"google.com":return new YW(r,n);case"twitter.com":return new JW(r,n,t.screenName||null);case"custom":case"anonymous":return new Rf(r,null);default:return new Rf(r,e,n)}}class Rf{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class N4 extends Rf{constructor(e,n,r,i){super(e,n,r),this.username=i}}class jW extends Rf{constructor(e,n){super(e,"facebook.com",n)}}class WW extends N4{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class YW extends Rf{constructor(e,n){super(e,"google.com",n)}}class JW extends N4{constructor(e,n,r){super(e,"twitter.com",n,r)}}function QW(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:KW(n)}function XW(t,e,n,r){return Pe(t).onIdTokenChanged(e,n,r)}function ZW(t,e,n){return Pe(t).beforeAuthStateChanged(e,n)}function eY(t,e,n,r){return Pe(t).onAuthStateChanged(e,n,r)}function tY(t){return Pe(t).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new xu("enroll",e,n)}static _fromMfaPendingCredential(e){return new xu("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if((n=e.multiFactorSession)!=null&&n.pendingCredential)return xu._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if((r=e.multiFactorSession)!=null&&r.idToken)return xu._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=on(e),i=n.customData._serverResponse,o=(i.mfaInfo||[]).map(u=>Om._fromServerResponse(r,u));ye(i.mfaPendingCredential,r,"internal-error");const s=xu._fromMfaPendingCredential(i.mfaPendingCredential);return new nI(s,o,async u=>{const c=await u._process(r,s);delete i.mfaInfo,delete i.mfaPendingCredential;const f={...i,idToken:c.idToken,refreshToken:c.refreshToken};switch(n.operationType){case"signIn":const h=await Qi._fromIdTokenResponse(r,n.operationType,f);return await r._updateCurrentUser(h.user),h;case"reauthenticate":return ye(n.user,r,"internal-error"),Qi._forOperation(n.user,n.operationType,f);default:Zn(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function nY(t,e){var i;const n=Pe(t),r=e;return ye(e.customData.operationType,n,"argument-error"),ye((i=r.customData._serverResponse)==null?void 0:i.mfaPendingCredential,n,"argument-error"),nI._fromError(n,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iN(t,e){return pn(t,"POST","/v2/accounts/mfaEnrollment:start",hn(t,e))}function rY(t,e){return pn(t,"POST","/v2/accounts/mfaEnrollment:finalize",hn(t,e))}function iY(t,e){return pn(t,"POST","/v2/accounts/mfaEnrollment:withdraw",hn(t,e))}class rI{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>Om._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new rI(e)}async getSession(){return xu._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,i=await this.getSession(),o=await Ys(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(o),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await Ys(this.user,iY(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:o})=>o!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const Vw=new WeakMap;function oY(t){const e=Pe(t);return Vw.has(e)||Vw.set(e,rI._fromUser(e)),Vw.get(e)}const Hv="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Hv,"1"),this.storage.removeItem(Hv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sY=1e3,aY=10;class O4 extends k4{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=m4(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,u,c)=>{this.notifyListeners(s,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},o=this.storage.getItem(r);Fj()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,aY):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},sY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}O4.type="LOCAL";const u0=O4;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4 extends k4{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}V4.type="SESSION";const dl=V4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lY(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new c0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(s).map(async f=>f(n.origin,o)),c=await lY(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}c0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uY{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((u,c)=>{const f=Vm("",20);i.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(y){const v=y;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(v.data.response);break;default:clearTimeout(h),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(){return window}function cY(t){Rn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iI(){return typeof Rn().WorkerGlobalScope<"u"&&typeof Rn().importScripts=="function"}async function fY(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function dY(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function hY(){return iI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4="firebaseLocalStorageDb",pY=1,Gv="firebaseLocalStorage",U4="fbase_key";class Lm{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function f0(t,e){return t.transaction([Gv],e?"readwrite":"readonly").objectStore(Gv)}function mY(){const t=indexedDB.deleteDatabase(L4);return new Lm(t).toPromise()}function qS(){const t=indexedDB.open(L4,pY);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Gv,{keyPath:U4})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Gv)?e(r):(r.close(),await mY(),e(await qS()))})})}async function oN(t,e,n){const r=f0(t,!0).put({[U4]:e,value:n});return new Lm(r).toPromise()}async function gY(t,e){const n=f0(t,!1).get(e),r=await new Lm(n).toPromise();return r===void 0?null:r.value}function sN(t,e){const n=f0(t,!0).delete(e);return new Lm(n).toPromise()}const yY=800,vY=3;class F4{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qS(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>vY)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return iI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=c0._getInstance(hY()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await fY(),!this.activeServiceWorker)return;this.sender=new uY(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||dY()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qS();return await oN(e,Hv,"1"),await sN(e,Hv),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>oN(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>gY(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>sN(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=f0(i,!1).getAll();return new Lm(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}F4.type="LOCAL";const zf=F4;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aN(t,e){return pn(t,"POST","/v2/accounts/mfaSignIn:start",hn(t,e))}function _Y(t,e){return pn(t,"POST","/v2/accounts/mfaSignIn:finalize",hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw=y4("rcb"),TY=new Mm(3e4,6e4);class EY{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=Rn().grecaptcha)!=null&&e.render)}load(e,n=""){return ye(wY(n),e,"argument-error"),this.shouldResolveImmediately(n)&&YD(Rn().grecaptcha)?Promise.resolve(Rn().grecaptcha):new Promise((r,i)=>{const o=Rn().setTimeout(()=>{i(Fn(e,"network-request-failed"))},TY.get());Rn()[Lw]=()=>{Rn().clearTimeout(o),delete Rn()[Lw];const u=Rn().grecaptcha;if(!u||!YD(u)){i(Fn(e,"internal-error"));return}const c=u.render;u.render=(f,h)=>{const y=c(f,h);return this.counter++,y},this.hostLanguage=n,r(u)};const s=`${Kj()}?${wd({onload:Lw,render:"explicit",hl:n})}`;QC(s).catch(()=>{clearTimeout(o),i(Fn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!((n=Rn().grecaptcha)!=null&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function wY(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class bY{async load(e){return new Qj(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dp="recaptcha",SY={theme:"light",type:"image"};let AY=class{constructor(e,n,r={...SY}){this.parameters=r,this.type=Dp,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=on(e),this.isInvisible=this.parameters.size==="invisible",ye(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;ye(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new bY:new EY,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const o=s=>{s&&(this.tokenChangeListeners.delete(o),i(s))};this.tokenChangeListeners.add(o),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){ye(!this.parameters.sitekey,this.auth,"argument-error"),ye(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ye(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=Rn()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){ye(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ye(YC()&&!iI(),this.auth,"internal-error"),await CY(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await Ij(this.auth);ye(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ye(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function CY(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Vu._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function IY(t,e,n){if(Gt(t.app))return Promise.reject(Xn(t));const r=on(t),i=await d0(r,e,Pe(n));return new oI(i,o=>a0(r,o))}async function xY(t,e,n){const r=Pe(t);await s0(!1,r,"phone");const i=await d0(r.auth,e,Pe(n));return new oI(i,o=>I4(r,o))}async function RY(t,e,n){const r=Pe(t);if(Gt(r.auth.app))return Promise.reject(Xn(r.auth));const i=await d0(r.auth,e,Pe(n));return new oI(i,o=>x4(r,o))}async function d0(t,e,n){var r;if(!t._getRecaptchaConfig())try{await rW(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const o=i.session;if("phoneNumber"in i){ye(o.type==="enroll",t,"internal-error");const s={idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await ol(t,s,"mfaSmsEnrollment",async(h,y)=>{if(y.phoneEnrollmentInfo.captchaResponse===Mp){ye((n==null?void 0:n.type)===Dp,h,"argument-error");const v=await Uw(h,y,n);return iN(h,v)}return iN(h,y)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneSessionInfo.sessionInfo}else{ye(o.type==="signin",t,"internal-error");const s=((r=i.multiFactorHint)==null?void 0:r.uid)||i.multiFactorUid;ye(s,t,"missing-multi-factor-info");const u={mfaPendingCredential:o.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await ol(t,u,"mfaSmsSignIn",async(y,v)=>{if(v.phoneSignInInfo.captchaResponse===Mp){ye((n==null?void 0:n.type)===Dp,y,"argument-error");const E=await Uw(y,v,n);return aN(y,E)}return aN(y,v)},"PHONE_PROVIDER").catch(y=>Promise.reject(y))).phoneResponseInfo.sessionInfo}}else{const o={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await ol(t,o,"sendVerificationCode",async(f,h)=>{if(h.captchaResponse===Mp){ye((n==null?void 0:n.type)===Dp,f,"argument-error");const y=await Uw(f,h,n);return nN(f,y)}return nN(f,h)},"PHONE_PROVIDER").catch(f=>Promise.reject(f))).sessionInfo}}finally{n==null||n._reset()}}async function PY(t,e){const n=Pe(t);if(Gt(n.auth.app))return Promise.reject(Xn(n.auth));await XC(n,e)}async function Uw(t,e,n){ye(n.type===Dp,t,"argument-error");const r=await n.verify();ye(typeof r=="string",t,"argument-error");const i={...e};if("phoneEnrollmentInfo"in i){const o=i.phoneEnrollmentInfo.phoneNumber,s=i.phoneEnrollmentInfo.captchaResponse,u=i.phoneEnrollmentInfo.clientType,c=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r,captchaResponse:s,clientType:u,recaptchaVersion:c}}),i}else if("phoneSignInInfo"in i){const o=i.phoneSignInInfo.captchaResponse,s=i.phoneSignInInfo.clientType,u=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:o,clientType:s,recaptchaVersion:u}}),i}else return Object.assign(i,{recaptchaToken:r}),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zu=class yv{constructor(e){this.providerId=yv.PROVIDER_ID,this.auth=on(e)}verifyPhoneNumber(e,n){return d0(this.auth,e,Pe(n))}static credential(e,n){return Vu._fromVerification(e,n)}static credentialFromResult(e){const n=e;return yv.credentialFromTaggedObject(n)}static credentialFromError(e){return yv.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Vu._fromTokenResponse(n,r):null}};zu.PROVIDER_ID="phone";zu.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ac(t,e){return e?gi(e):(ye(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI extends Ad{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return qs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return qs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function MY(t){return C4(t.auth,new sI(t),t.bypassAuthState)}function DY(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),A4(n,new sI(t),t.bypassAuthState)}async function NY(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),XC(n,new sI(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:u}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return MY;case"linkViaPopup":case"linkViaRedirect":return NY;case"reauthViaPopup":case"reauthViaRedirect":return DY;default:Zn(this.auth,"internal-error")}}resolve(e){go(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){go(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kY=new Mm(2e3,1e4);async function OY(t,e,n){if(Gt(t.app))return Promise.reject(Fn(t,"operation-not-supported-in-this-environment"));const r=on(t);Sd(t,e,ia);const i=ac(r,n);return new Vs(r,"signInViaPopup",e,i).executeNotNull()}async function VY(t,e,n){const r=Pe(t);if(Gt(r.auth.app))return Promise.reject(Fn(r.auth,"operation-not-supported-in-this-environment"));Sd(r.auth,e,ia);const i=ac(r.auth,n);return new Vs(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function LY(t,e,n){const r=Pe(t);Sd(r.auth,e,ia);const i=ac(r.auth,n);return new Vs(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Vs extends B4{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Vs.currentPopupAction&&Vs.currentPopupAction.cancel(),Vs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){go(this.filter.length===1,"Popup operations only handle one event");const e=Vm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Fn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Fn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,kY.get())};e()}}Vs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UY="pendingRedirect",Np=new Map;class FY extends B4{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Np.get(this.auth._key());if(!e){try{const r=await BY(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Np.set(this.auth._key(),e)}return this.bypassAuthState||Np.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function BY(t,e){const n=$4(e),r=q4(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function aI(t,e){return q4(t)._set($4(e),"true")}function qY(){Np.clear()}function lI(t,e){Np.set(t._key(),e)}function q4(t){return gi(t._redirectPersistence)}function $4(t){return Ou(UY,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $Y(t,e,n){return zY(t,e,n)}async function zY(t,e,n){if(Gt(t.app))return Promise.reject(Xn(t));const r=on(t);Sd(t,e,ia),await r._initializationPromise;const i=ac(r,n);return await aI(i,r),i._openRedirect(r,e,"signInViaRedirect")}function HY(t,e,n){return GY(t,e,n)}async function GY(t,e,n){const r=Pe(t);if(Sd(r.auth,e,ia),Gt(r.auth.app))return Promise.reject(Xn(r.auth));await r.auth._initializationPromise;const i=ac(r.auth,n);await aI(i,r.auth);const o=await z4(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",o)}function KY(t,e,n){return jY(t,e,n)}async function jY(t,e,n){const r=Pe(t);Sd(r.auth,e,ia),await r.auth._initializationPromise;const i=ac(r.auth,n);await s0(!1,r,e.providerId),await aI(i,r.auth);const o=await z4(r);return i._openRedirect(r.auth,e,"linkViaRedirect",o)}async function WY(t,e){return await on(t)._initializationPromise,h0(t,e,!1)}async function h0(t,e,n=!1){if(Gt(t.app))return Promise.reject(Xn(t));const r=on(t),i=ac(r,e),s=await new FY(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}async function z4(t){const e=Vm(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YY=600*1e3;class H4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!JY(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!G4(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Fn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=YY&&this.cachedEventUids.clear(),this.cachedEventUids.has(lN(e))}saveEventToCache(e){this.cachedEventUids.add(lN(e)),this.lastProcessedEventTime=Date.now()}}function lN(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function G4({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function JY(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return G4(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K4(t,e={}){return pn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QY=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,XY=/^https?/;async function ZY(t){if(t.config.emulator)return;const{authorizedDomains:e}=await K4(t);for(const n of e)try{if(eJ(n))return}catch{}Zn(t,"unauthorized-domain")}function eJ(t){const e=Xp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!XY.test(n))return!1;if(QY.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tJ=new Mm(3e4,6e4);function uN(){const t=Rn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function nJ(t){return new Promise((e,n)=>{var i,o,s;function r(){uN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{uN(),n(Fn(t,"network-request-failed"))},timeout:tJ.get()})}if((o=(i=Rn().gapi)==null?void 0:i.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((s=Rn().gapi)!=null&&s.load)r();else{const u=y4("iframefcb");return Rn()[u]=()=>{gapi.load?r():n(Fn(t,"network-request-failed"))},QC(`${Wj()}?onload=${u}`).catch(c=>n(c))}}).catch(e=>{throw vv=null,e})}let vv=null;function rJ(t){return vv=vv||nJ(t),vv}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iJ=new Mm(5e3,15e3),oJ="__/auth/iframe",sJ="emulator/auth/iframe",aJ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lJ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uJ(t){const e=t.config;ye(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?JC(e,sJ):`https://${t.config.authDomain}/${oJ}`,r={apiKey:e.apiKey,appName:t.name,v:na},i=lJ.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${wd(r).slice(1)}`}async function cJ(t){const e=await rJ(t),n=Rn().gapi;return ye(n,t,"internal-error"),e.open({where:document.body,url:uJ(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aJ,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const s=Fn(t,"network-request-failed"),u=Rn().setTimeout(()=>{o(s)},iJ.get());function c(){Rn().clearTimeout(u),i(r)}r.ping(c).then(c,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fJ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dJ=500,hJ=600,pJ="_blank",mJ="http://localhost";class cN{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gJ(t,e,n,r=dJ,i=hJ){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c={...fJ,width:r.toString(),height:i.toString(),top:o,left:s},f=rn().toLowerCase();n&&(u=f4(f)?pJ:n),u4(f)&&(e=e||mJ,c.scrollbars="yes");const h=Object.entries(c).reduce((v,[E,b])=>`${v}${E}=${b},`,"");if(Uj(f)&&u!=="_self")return yJ(e||"",u),new cN(null);const y=window.open(e||"",u,h);ye(y,t,"popup-blocked");try{y.focus()}catch{}return new cN(y)}function yJ(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vJ="__/auth/handler",_J="emulator/auth/handler",TJ=encodeURIComponent("fac");async function $S(t,e,n,r,i,o){ye(t.config.authDomain,t,"auth-domain-config-required"),ye(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:na,eventId:i};if(e instanceof ia){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",K7(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,y]of Object.entries(o||{}))s[h]=y}if(e instanceof Cd){const h=e.getScopes().filter(y=>y!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);const u=s;for(const h of Object.keys(u))u[h]===void 0&&delete u[h];const c=await t._getAppCheckToken(),f=c?`#${TJ}=${encodeURIComponent(c)}`:"";return`${EJ(t)}?${wd(u).slice(1)}${f}`}function EJ({config:t}){return t.emulator?JC(t,_J):`https://${t.authDomain}/${vJ}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw="webStorageSupport";class wJ{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dl,this._completeRedirectFn=h0,this._overrideRedirectResult=lI}async _openPopup(e,n,r,i){var s;go((s=this.eventManagers[e._key()])==null?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await $S(e,n,r,Xp(),i);return gJ(e,o,Vm())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await $S(e,n,r,Xp(),i);return cY(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(go(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await cJ(e),r=new H4(e);return n.register("authEvent",i=>(ye(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Fw,{type:Fw},i=>{var s;const o=(s=i==null?void 0:i[0])==null?void 0:s[Fw];o!==void 0&&n(!!o),Zn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ZY(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return m4()||c4()||Nm()}}const j4=wJ;class bJ{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return Ko("unexpected MultiFactorSessionType")}}}class uI extends bJ{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new uI(e)}_finalizeEnroll(e,n,r){return rY(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return _Y(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class W4{constructor(){}static assertion(e){return uI._fromCredential(e)}}W4.FACTOR_ID="phone";var fN="@firebase/auth",dN="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SJ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AJ(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function CJ(t){Ws(new Ji("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:u}=r.options;ye(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:g4(t)},f=new Hj(r,i,o,c);return oW(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ws(new Ji("auth-internal",e=>{const n=on(e.getProvider("auth").getImmediate());return(r=>new SJ(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ti(fN,dN,AJ(t)),Ti(fN,dN,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IJ=300,xJ=kF("authIdTokenMaxAge")||IJ;let hN=null;const RJ=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>xJ)return;const i=n==null?void 0:n.token;hN!==i&&(hN=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function PJ(t=n0()){const e=bd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=iW(t,{popupRedirectResolver:j4,persistence:[zf,u0,dl]}),r=kF("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=RJ(o.toString());ZW(n,s,()=>s(n.currentUser)),XW(n,u=>s(u))}}const i=DF("auth");return i&&_4(n,`http://${i}`),n}function MJ(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}Gj({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=Fn("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",MJ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});CJ("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hu(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DJ=2e3;async function NJ(t,e,n){const{BuildInfo:r}=Hu();go(e.sessionId,"AuthEvent did not contain a session ID");const i=await UJ(e.sessionId),o={};return Nm()?o.ibi=r.packageName:Dm()?o.apn=r.packageName:Zn(t,"operation-not-supported-in-this-environment"),r.displayName&&(o.appDisplayName=r.displayName),o.sessionId=i,$S(t,n,e.type,void 0,e.eventId??void 0,o)}async function kJ(t){const{BuildInfo:e}=Hu(),n={};Nm()?n.iosBundleId=e.packageName:Dm()?n.androidPackageName=e.packageName:Zn(t,"operation-not-supported-in-this-environment"),await K4(t,n)}function OJ(t){const{cordova:e}=Hu();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,Lj()?"_blank":"_system","location=yes"),n(i)})})}async function VJ(t,e,n){const{cordova:r}=Hu();let i=()=>{};try{await new Promise((o,s)=>{let u=null;function c(){var v;o();const y=(v=r.plugins.browsertab)==null?void 0:v.close;typeof y=="function"&&y(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function f(){u||(u=window.setTimeout(()=>{s(Fn(t,"redirect-cancelled-by-user"))},DJ))}function h(){(document==null?void 0:document.visibilityState)==="visible"&&f()}e.addPassiveListener(c),document.addEventListener("resume",f,!1),Dm()&&document.addEventListener("visibilitychange",h,!1),i=()=>{e.removePassiveListener(c),document.removeEventListener("resume",f,!1),document.removeEventListener("visibilitychange",h,!1),u&&window.clearTimeout(u)}})}finally{i()}}function LJ(t){var n,r,i,o,s,u,c,f,h,y;const e=Hu();ye(typeof((n=e==null?void 0:e.universalLinks)==null?void 0:n.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ye(typeof((r=e==null?void 0:e.BuildInfo)==null?void 0:r.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ye(typeof((s=(o=(i=e==null?void 0:e.cordova)==null?void 0:i.plugins)==null?void 0:o.browsertab)==null?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ye(typeof((f=(c=(u=e==null?void 0:e.cordova)==null?void 0:u.plugins)==null?void 0:c.browsertab)==null?void 0:f.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ye(typeof((y=(h=e==null?void 0:e.cordova)==null?void 0:h.InAppBrowser)==null?void 0:y.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function UJ(t){const e=FJ(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function FJ(t){if(go(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BJ=20;class qJ extends H4{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function $J(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:GJ(),postBody:null,tenantId:t.tenantId,error:Fn(t,"no-auth-event")}}function zJ(t,e){return zS()._set(HS(t),e)}async function pN(t){const e=await zS()._get(HS(t));return e&&await zS()._remove(HS(t)),e}function HJ(t,e){var r,i;const n=jJ(e);if(n.includes("/__/auth/callback")){const o=_v(n),s=o.firebaseError?KJ(decodeURIComponent(o.firebaseError)):null,u=(i=(r=s==null?void 0:s.code)==null?void 0:r.split("auth/"))==null?void 0:i[1],c=u?Fn(u):null;return c?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:c,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:n,postBody:null}}return null}function GJ(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<BJ;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function zS(){return gi(u0)}function HS(t){return Ou("authEvent",t.config.apiKey,t.name)}function KJ(t){try{return JSON.parse(t)}catch{return null}}function jJ(t){const e=_v(t),n=e.link?decodeURIComponent(e.link):void 0,r=_v(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return _v(i).link||i||r||n||t}function _v(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return wf(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WJ=500;class YJ{constructor(){this._redirectPersistence=dl,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=h0,this._overrideRedirectResult=lI}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new qJ(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){Zn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){LJ(e);const o=await this._initialize(e);await o.initialized(),o.resetRedirect(),qY(),await this._originValidation(e);const s=$J(e,r,i);await zJ(e,s);const u=await NJ(e,s,n),c=await OJ(u);return VJ(e,o,c)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=kJ(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:o}=Hu(),s=setTimeout(async()=>{await pN(e),n.onEvent(mN())},WJ),u=async h=>{clearTimeout(s);const y=await pN(e);let v=null;y&&(h!=null&&h.url)&&(v=HJ(y,h.url)),n.onEvent(v||mN())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,u);const c=i,f=`${o.packageName.toLowerCase()}://`;Hu().handleOpenURL=async h=>{if(h.toLowerCase().startsWith(f)&&u({url:h}),typeof c=="function")try{c(h)}catch(y){console.error(y)}}}}const JJ=YJ;function mN(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Fn("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QJ(t,e){on(t)._logFramework(e)}var XJ="@firebase/auth-compat",ZJ="0.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eQ=1e3;function kp(){var t;return((t=self==null?void 0:self.location)==null?void 0:t.protocol)||null}function tQ(){return kp()==="http:"||kp()==="https:"}function Y4(t=rn()){return!!((kp()==="file:"||kp()==="ionic:"||kp()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function nQ(){return qC()||e0()}function rQ(){return UF()&&(document==null?void 0:document.documentMode)===11}function iQ(t=rn()){return/Edge\/\d+/.test(t)}function oQ(t=rn()){return rQ()||iQ(t)}function J4(){try{const t=self.localStorage,e=Vm();if(t)return t.setItem(e,"1"),t.removeItem(e),oQ()?Yp():!0}catch{return cI()&&Yp()}return!1}function cI(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Bw(){return(tQ()||LF()||Y4())&&!nQ()&&J4()&&!cI()}function Q4(){return Y4()&&typeof document<"u"}async function sQ(){return Q4()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},eQ);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function aQ(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi={LOCAL:"local",NONE:"none",SESSION:"session"},np=ye,X4="persistence";function lQ(t,e){if(np(Object.values(pi).includes(e),t,"invalid-persistence-type"),qC()){np(e!==pi.SESSION,t,"unsupported-persistence-type");return}if(e0()){np(e===pi.NONE,t,"unsupported-persistence-type");return}if(cI()){np(e===pi.NONE||e===pi.LOCAL&&Yp(),t,"unsupported-persistence-type");return}np(e===pi.NONE||J4(),t,"unsupported-persistence-type")}async function GS(t){await t._initializationPromise;const e=Z4(),n=Ou(X4,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistenceType())}function uQ(t,e){const n=Z4();if(!n)return[];const r=Ou(X4,t,e);switch(n.getItem(r)){case pi.NONE:return[qf];case pi.LOCAL:return[zf,dl];case pi.SESSION:return[dl];default:return[]}}function Z4(){var t;try{return((t=aQ())==null?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cQ=ye;class el{constructor(){this.browserResolver=gi(j4),this.cordovaResolver=gi(JJ),this.underlyingResolver=null,this._redirectPersistence=dl,this._completeRedirectFn=h0,this._overrideRedirectResult=lI}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Q4()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return cQ(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await sQ();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eB(t){return t.unwrap()}function fQ(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dQ(t){return tB(t)}function hQ(t,e){var r;const n=(r=e.customData)==null?void 0:r._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new pQ(t,nY(t,e))}else if(n){const i=tB(e),o=e;i&&(o.credential=i,o.tenantId=n.tenantId||void 0,o.email=n.email||void 0,o.phoneNumber=n.phoneNumber||void 0)}}function tB(t){const{_tokenResponse:e}=t instanceof Ir?t.customData:t;if(!e)return null;if(!(t instanceof Ir)&&"temporaryProof"in e&&"phoneNumber"in e)return zu.credentialFromResult(t);const n=e.providerId;if(!n||n===ep.PASSWORD)return null;let r;switch(n){case ep.GOOGLE:r=$o;break;case ep.FACEBOOK:r=qo;break;case ep.GITHUB:r=zo;break;case ep.TWITTER:r=Ho;break;default:const{oauthIdToken:i,oauthAccessToken:o,oauthTokenSecret:s,pendingToken:u,nonce:c}=e;return!o&&!s&&!i&&!u?null:u?n.startsWith("saml.")?$f._create(n,u):ts._fromParams({providerId:n,signInMethod:n,pendingToken:u,idToken:i,accessToken:o}):new xf(n).credential({idToken:i,accessToken:o,rawNonce:c})}return t instanceof Ir?r.credentialFromError(t):r.credentialFromResult(t)}function Wr(t,e){return e.catch(n=>{throw n instanceof Ir&&hQ(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:dQ(n),additionalUserInfo:QW(n),user:p0.getOrCreate(i)}})}async function KS(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>Wr(t,n.confirm(r))}}class pQ{constructor(e,n){this.resolver=n,this.auth=fQ(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Wr(eB(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let p0=class Ep{constructor(e){this._delegate=e,this.multiFactor=oY(e)}static getOrCreate(e){return Ep.USER_MAP.has(e)||Ep.USER_MAP.set(e,new Ep(e)),Ep.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Wr(this.auth,I4(this._delegate,e))}async linkWithPhoneNumber(e,n){return KS(this.auth,xY(this._delegate,e,n))}async linkWithPopup(e){return Wr(this.auth,LY(this._delegate,e,el))}async linkWithRedirect(e){return await GS(on(this.auth)),KY(this._delegate,e,el)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Wr(this.auth,x4(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return KS(this.auth,RY(this._delegate,e,n))}reauthenticateWithPopup(e){return Wr(this.auth,VY(this._delegate,e,el))}async reauthenticateWithRedirect(e){return await GS(on(this.auth)),HY(this._delegate,e,el)}sendEmailVerification(e){return qW(this._delegate,e)}async unlink(e){return await xW(this._delegate,e),this}updateEmail(e){return GW(this._delegate,e)}updatePassword(e){return M4(this._delegate,e)}updatePhoneNumber(e){return PY(this._delegate,e)}updateProfile(e){return HW(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return $W(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};p0.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp=ye;class jS{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;rp(r,"invalid-api-key",{appName:e.name}),rp(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?el:void 0;this._delegate=n.initialize({options:{persistence:mQ(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(yj),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?p0.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){_4(this._delegate,e,n)}applyActionCode(e){return NW(this._delegate,e)}checkActionCode(e){return R4(this._delegate,e)}confirmPasswordReset(e,n){return DW(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return Wr(this._delegate,OW(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return BW(this._delegate,e)}isSignInWithEmailLink(e){return LW(this._delegate,e)}async getRedirectResult(){rp(Bw(),this._delegate,"operation-not-supported-in-this-environment");const e=await WY(this._delegate,el);return e?Wr(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){QJ(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:o,complete:s}=gN(e,n,r);return this._delegate.onAuthStateChanged(i,o,s)}onIdTokenChanged(e,n,r){const{next:i,error:o,complete:s}=gN(e,n,r);return this._delegate.onIdTokenChanged(i,o,s)}sendSignInLinkToEmail(e,n){return VW(this._delegate,e,n)}sendPasswordResetEmail(e,n){return MW(this._delegate,e,n||void 0)}async setPersistence(e){lQ(this._delegate,e);let n;switch(e){case pi.SESSION:n=dl;break;case pi.LOCAL:n=await gi(zf)._isAvailable()?zf:u0;break;case pi.NONE:n=qf;break;default:return Zn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Wr(this._delegate,IW(this._delegate))}signInWithCredential(e){return Wr(this._delegate,a0(this._delegate,e))}signInWithCustomToken(e){return Wr(this._delegate,PW(this._delegate,e))}signInWithEmailAndPassword(e,n){return Wr(this._delegate,P4(this._delegate,e,n))}signInWithEmailLink(e,n){return Wr(this._delegate,UW(this._delegate,e,n))}signInWithPhoneNumber(e,n){return KS(this._delegate,IY(this._delegate,e,n))}async signInWithPopup(e){return rp(Bw(),this._delegate,"operation-not-supported-in-this-environment"),Wr(this._delegate,OY(this._delegate,e,el))}async signInWithRedirect(e){return rp(Bw(),this._delegate,"operation-not-supported-in-this-environment"),await GS(this._delegate),$Y(this._delegate,e,el)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return kW(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}jS.Persistence=pi;function gN(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:s=>i(s&&p0.getOrCreate(s)),error:e,complete:n}}function mQ(t,e){const n=uQ(t,e);if(typeof self<"u"&&!n.includes(zf)&&n.push(zf),typeof window<"u")for(const r of[u0,dl])n.includes(r)||n.push(r);return n.includes(qf)||n.push(qf),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{static credential(e,n){return zu.credential(e,n)}constructor(){this.providerId="phone",this._delegate=new zu(eB(Sl.auth()))}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}fI.PHONE_SIGN_IN_METHOD=zu.PHONE_SIGN_IN_METHOD;fI.PROVIDER_ID=zu.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gQ=ye;class yQ{constructor(e,n,r=Sl.app()){var i;gQ((i=r.options)==null?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new AY(r.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vQ="auth-compat";function _Q(t){t.INTERNAL.registerComponent(new Ji(vQ,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new jS(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:lf.EMAIL_SIGNIN,PASSWORD_RESET:lf.PASSWORD_RESET,RECOVER_EMAIL:lf.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:lf.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:lf.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:lf.VERIFY_EMAIL}},EmailAuthProvider:Al,FacebookAuthProvider:qo,GithubAuthProvider:zo,GoogleAuthProvider:$o,OAuthProvider:xf,SAMLAuthProvider:$v,PhoneAuthProvider:fI,PhoneMultiFactorGenerator:W4,RecaptchaVerifier:yQ,TwitterAuthProvider:Ho,Auth:jS,AuthCredential:Ad,Error:Ir}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(XJ,ZJ)}_Q(Sl);var yN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sl,nB;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,V){function N(){}N.prototype=V.prototype,k.D=V.prototype,k.prototype=new N,k.prototype.constructor=k,k.C=function($,F,G){for(var H=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)H[Ae-2]=arguments[Ae];return V.prototype[F].apply($,H)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(k,V,N){N||(N=0);var $=Array(16);if(typeof V=="string")for(var F=0;16>F;++F)$[F]=V.charCodeAt(N++)|V.charCodeAt(N++)<<8|V.charCodeAt(N++)<<16|V.charCodeAt(N++)<<24;else for(F=0;16>F;++F)$[F]=V[N++]|V[N++]<<8|V[N++]<<16|V[N++]<<24;V=k.g[0],N=k.g[1],F=k.g[2];var G=k.g[3],H=V+(G^N&(F^G))+$[0]+3614090360&4294967295;V=N+(H<<7&4294967295|H>>>25),H=G+(F^V&(N^F))+$[1]+3905402710&4294967295,G=V+(H<<12&4294967295|H>>>20),H=F+(N^G&(V^N))+$[2]+606105819&4294967295,F=G+(H<<17&4294967295|H>>>15),H=N+(V^F&(G^V))+$[3]+3250441966&4294967295,N=F+(H<<22&4294967295|H>>>10),H=V+(G^N&(F^G))+$[4]+4118548399&4294967295,V=N+(H<<7&4294967295|H>>>25),H=G+(F^V&(N^F))+$[5]+1200080426&4294967295,G=V+(H<<12&4294967295|H>>>20),H=F+(N^G&(V^N))+$[6]+2821735955&4294967295,F=G+(H<<17&4294967295|H>>>15),H=N+(V^F&(G^V))+$[7]+4249261313&4294967295,N=F+(H<<22&4294967295|H>>>10),H=V+(G^N&(F^G))+$[8]+1770035416&4294967295,V=N+(H<<7&4294967295|H>>>25),H=G+(F^V&(N^F))+$[9]+2336552879&4294967295,G=V+(H<<12&4294967295|H>>>20),H=F+(N^G&(V^N))+$[10]+4294925233&4294967295,F=G+(H<<17&4294967295|H>>>15),H=N+(V^F&(G^V))+$[11]+2304563134&4294967295,N=F+(H<<22&4294967295|H>>>10),H=V+(G^N&(F^G))+$[12]+1804603682&4294967295,V=N+(H<<7&4294967295|H>>>25),H=G+(F^V&(N^F))+$[13]+4254626195&4294967295,G=V+(H<<12&4294967295|H>>>20),H=F+(N^G&(V^N))+$[14]+2792965006&4294967295,F=G+(H<<17&4294967295|H>>>15),H=N+(V^F&(G^V))+$[15]+1236535329&4294967295,N=F+(H<<22&4294967295|H>>>10),H=V+(F^G&(N^F))+$[1]+4129170786&4294967295,V=N+(H<<5&4294967295|H>>>27),H=G+(N^F&(V^N))+$[6]+3225465664&4294967295,G=V+(H<<9&4294967295|H>>>23),H=F+(V^N&(G^V))+$[11]+643717713&4294967295,F=G+(H<<14&4294967295|H>>>18),H=N+(G^V&(F^G))+$[0]+3921069994&4294967295,N=F+(H<<20&4294967295|H>>>12),H=V+(F^G&(N^F))+$[5]+3593408605&4294967295,V=N+(H<<5&4294967295|H>>>27),H=G+(N^F&(V^N))+$[10]+38016083&4294967295,G=V+(H<<9&4294967295|H>>>23),H=F+(V^N&(G^V))+$[15]+3634488961&4294967295,F=G+(H<<14&4294967295|H>>>18),H=N+(G^V&(F^G))+$[4]+3889429448&4294967295,N=F+(H<<20&4294967295|H>>>12),H=V+(F^G&(N^F))+$[9]+568446438&4294967295,V=N+(H<<5&4294967295|H>>>27),H=G+(N^F&(V^N))+$[14]+3275163606&4294967295,G=V+(H<<9&4294967295|H>>>23),H=F+(V^N&(G^V))+$[3]+4107603335&4294967295,F=G+(H<<14&4294967295|H>>>18),H=N+(G^V&(F^G))+$[8]+1163531501&4294967295,N=F+(H<<20&4294967295|H>>>12),H=V+(F^G&(N^F))+$[13]+2850285829&4294967295,V=N+(H<<5&4294967295|H>>>27),H=G+(N^F&(V^N))+$[2]+4243563512&4294967295,G=V+(H<<9&4294967295|H>>>23),H=F+(V^N&(G^V))+$[7]+1735328473&4294967295,F=G+(H<<14&4294967295|H>>>18),H=N+(G^V&(F^G))+$[12]+2368359562&4294967295,N=F+(H<<20&4294967295|H>>>12),H=V+(N^F^G)+$[5]+4294588738&4294967295,V=N+(H<<4&4294967295|H>>>28),H=G+(V^N^F)+$[8]+2272392833&4294967295,G=V+(H<<11&4294967295|H>>>21),H=F+(G^V^N)+$[11]+1839030562&4294967295,F=G+(H<<16&4294967295|H>>>16),H=N+(F^G^V)+$[14]+4259657740&4294967295,N=F+(H<<23&4294967295|H>>>9),H=V+(N^F^G)+$[1]+2763975236&4294967295,V=N+(H<<4&4294967295|H>>>28),H=G+(V^N^F)+$[4]+1272893353&4294967295,G=V+(H<<11&4294967295|H>>>21),H=F+(G^V^N)+$[7]+4139469664&4294967295,F=G+(H<<16&4294967295|H>>>16),H=N+(F^G^V)+$[10]+3200236656&4294967295,N=F+(H<<23&4294967295|H>>>9),H=V+(N^F^G)+$[13]+681279174&4294967295,V=N+(H<<4&4294967295|H>>>28),H=G+(V^N^F)+$[0]+3936430074&4294967295,G=V+(H<<11&4294967295|H>>>21),H=F+(G^V^N)+$[3]+3572445317&4294967295,F=G+(H<<16&4294967295|H>>>16),H=N+(F^G^V)+$[6]+76029189&4294967295,N=F+(H<<23&4294967295|H>>>9),H=V+(N^F^G)+$[9]+3654602809&4294967295,V=N+(H<<4&4294967295|H>>>28),H=G+(V^N^F)+$[12]+3873151461&4294967295,G=V+(H<<11&4294967295|H>>>21),H=F+(G^V^N)+$[15]+530742520&4294967295,F=G+(H<<16&4294967295|H>>>16),H=N+(F^G^V)+$[2]+3299628645&4294967295,N=F+(H<<23&4294967295|H>>>9),H=V+(F^(N|~G))+$[0]+4096336452&4294967295,V=N+(H<<6&4294967295|H>>>26),H=G+(N^(V|~F))+$[7]+1126891415&4294967295,G=V+(H<<10&4294967295|H>>>22),H=F+(V^(G|~N))+$[14]+2878612391&4294967295,F=G+(H<<15&4294967295|H>>>17),H=N+(G^(F|~V))+$[5]+4237533241&4294967295,N=F+(H<<21&4294967295|H>>>11),H=V+(F^(N|~G))+$[12]+1700485571&4294967295,V=N+(H<<6&4294967295|H>>>26),H=G+(N^(V|~F))+$[3]+2399980690&4294967295,G=V+(H<<10&4294967295|H>>>22),H=F+(V^(G|~N))+$[10]+4293915773&4294967295,F=G+(H<<15&4294967295|H>>>17),H=N+(G^(F|~V))+$[1]+2240044497&4294967295,N=F+(H<<21&4294967295|H>>>11),H=V+(F^(N|~G))+$[8]+1873313359&4294967295,V=N+(H<<6&4294967295|H>>>26),H=G+(N^(V|~F))+$[15]+4264355552&4294967295,G=V+(H<<10&4294967295|H>>>22),H=F+(V^(G|~N))+$[6]+2734768916&4294967295,F=G+(H<<15&4294967295|H>>>17),H=N+(G^(F|~V))+$[13]+1309151649&4294967295,N=F+(H<<21&4294967295|H>>>11),H=V+(F^(N|~G))+$[4]+4149444226&4294967295,V=N+(H<<6&4294967295|H>>>26),H=G+(N^(V|~F))+$[11]+3174756917&4294967295,G=V+(H<<10&4294967295|H>>>22),H=F+(V^(G|~N))+$[2]+718787259&4294967295,F=G+(H<<15&4294967295|H>>>17),H=N+(G^(F|~V))+$[9]+3951481745&4294967295,k.g[0]=k.g[0]+V&4294967295,k.g[1]=k.g[1]+(F+(H<<21&4294967295|H>>>11))&4294967295,k.g[2]=k.g[2]+F&4294967295,k.g[3]=k.g[3]+G&4294967295}r.prototype.u=function(k,V){V===void 0&&(V=k.length);for(var N=V-this.blockSize,$=this.B,F=this.h,G=0;G<V;){if(F==0)for(;G<=N;)i(this,k,G),G+=this.blockSize;if(typeof k=="string"){for(;G<V;)if($[F++]=k.charCodeAt(G++),F==this.blockSize){i(this,$),F=0;break}}else for(;G<V;)if($[F++]=k[G++],F==this.blockSize){i(this,$),F=0;break}}this.h=F,this.o+=V},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var V=1;V<k.length-8;++V)k[V]=0;var N=8*this.o;for(V=k.length-8;V<k.length;++V)k[V]=N&255,N/=256;for(this.u(k),k=Array(16),V=N=0;4>V;++V)for(var $=0;32>$;$+=8)k[N++]=this.g[V]>>>$&255;return k};function o(k,V){var N=u;return Object.prototype.hasOwnProperty.call(N,k)?N[k]:N[k]=V(k)}function s(k,V){this.h=V;for(var N=[],$=!0,F=k.length-1;0<=F;F--){var G=k[F]|0;$&&G==V||(N[F]=G,$=!1)}this.g=N}var u={};function c(k){return-128<=k&&128>k?o(k,function(V){return new s([V|0],0>V?-1:0)}):new s([k|0],0>k?-1:0)}function f(k){if(isNaN(k)||!isFinite(k))return y;if(0>k)return A(f(-k));for(var V=[],N=1,$=0;k>=N;$++)V[$]=k/N|0,N*=4294967296;return new s(V,0)}function h(k,V){if(k.length==0)throw Error("number format error: empty string");if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(k.charAt(0)=="-")return A(h(k.substring(1),V));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=f(Math.pow(V,8)),$=y,F=0;F<k.length;F+=8){var G=Math.min(8,k.length-F),H=parseInt(k.substring(F,F+G),V);8>G?(G=f(Math.pow(V,G)),$=$.j(G).add(f(H))):($=$.j(N),$=$.add(f(H)))}return $}var y=c(0),v=c(1),E=c(16777216);t=s.prototype,t.m=function(){if(S(this))return-A(this).m();for(var k=0,V=1,N=0;N<this.g.length;N++){var $=this.i(N);k+=(0<=$?$:4294967296+$)*V,V*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(b(this))return"0";if(S(this))return"-"+A(this).toString(k);for(var V=f(Math.pow(k,6)),N=this,$="";;){var F=U(N,V).g;N=R(N,F.j(V));var G=((0<N.g.length?N.g[0]:N.h)>>>0).toString(k);if(N=F,b(N))return G+$;for(;6>G.length;)G="0"+G;$=G+$}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function b(k){if(k.h!=0)return!1;for(var V=0;V<k.g.length;V++)if(k.g[V]!=0)return!1;return!0}function S(k){return k.h==-1}t.l=function(k){return k=R(this,k),S(k)?-1:b(k)?0:1};function A(k){for(var V=k.g.length,N=[],$=0;$<V;$++)N[$]=~k.g[$];return new s(N,~k.h).add(v)}t.abs=function(){return S(this)?A(this):this},t.add=function(k){for(var V=Math.max(this.g.length,k.g.length),N=[],$=0,F=0;F<=V;F++){var G=$+(this.i(F)&65535)+(k.i(F)&65535),H=(G>>>16)+(this.i(F)>>>16)+(k.i(F)>>>16);$=H>>>16,G&=65535,H&=65535,N[F]=H<<16|G}return new s(N,N[N.length-1]&-2147483648?-1:0)};function R(k,V){return k.add(A(V))}t.j=function(k){if(b(this)||b(k))return y;if(S(this))return S(k)?A(this).j(A(k)):A(A(this).j(k));if(S(k))return A(this.j(A(k)));if(0>this.l(E)&&0>k.l(E))return f(this.m()*k.m());for(var V=this.g.length+k.g.length,N=[],$=0;$<2*V;$++)N[$]=0;for($=0;$<this.g.length;$++)for(var F=0;F<k.g.length;F++){var G=this.i($)>>>16,H=this.i($)&65535,Ae=k.i(F)>>>16,Se=k.i(F)&65535;N[2*$+2*F]+=H*Se,D(N,2*$+2*F),N[2*$+2*F+1]+=G*Se,D(N,2*$+2*F+1),N[2*$+2*F+1]+=H*Ae,D(N,2*$+2*F+1),N[2*$+2*F+2]+=G*Ae,D(N,2*$+2*F+2)}for($=0;$<V;$++)N[$]=N[2*$+1]<<16|N[2*$];for($=V;$<2*V;$++)N[$]=0;return new s(N,0)};function D(k,V){for(;(k[V]&65535)!=k[V];)k[V+1]+=k[V]>>>16,k[V]&=65535,V++}function M(k,V){this.g=k,this.h=V}function U(k,V){if(b(V))throw Error("division by zero");if(b(k))return new M(y,y);if(S(k))return V=U(A(k),V),new M(A(V.g),A(V.h));if(S(V))return V=U(k,A(V)),new M(A(V.g),V.h);if(30<k.g.length){if(S(k)||S(V))throw Error("slowDivide_ only works with positive integers.");for(var N=v,$=V;0>=$.l(k);)N=q(N),$=q($);var F=z(N,1),G=z($,1);for($=z($,2),N=z(N,2);!b($);){var H=G.add($);0>=H.l(k)&&(F=F.add(N),G=H),$=z($,1),N=z(N,1)}return V=R(k,F.j(V)),new M(F,V)}for(F=y;0<=k.l(V);){for(N=Math.max(1,Math.floor(k.m()/V.m())),$=Math.ceil(Math.log(N)/Math.LN2),$=48>=$?1:Math.pow(2,$-48),G=f(N),H=G.j(V);S(H)||0<H.l(k);)N-=$,G=f(N),H=G.j(V);b(G)&&(G=v),F=F.add(G),k=R(k,H)}return new M(F,k)}t.A=function(k){return U(this,k).h},t.and=function(k){for(var V=Math.max(this.g.length,k.g.length),N=[],$=0;$<V;$++)N[$]=this.i($)&k.i($);return new s(N,this.h&k.h)},t.or=function(k){for(var V=Math.max(this.g.length,k.g.length),N=[],$=0;$<V;$++)N[$]=this.i($)|k.i($);return new s(N,this.h|k.h)},t.xor=function(k){for(var V=Math.max(this.g.length,k.g.length),N=[],$=0;$<V;$++)N[$]=this.i($)^k.i($);return new s(N,this.h^k.h)};function q(k){for(var V=k.g.length+1,N=[],$=0;$<V;$++)N[$]=k.i($)<<1|k.i($-1)>>>31;return new s(N,k.h)}function z(k,V){var N=V>>5;V%=32;for(var $=k.g.length-N,F=[],G=0;G<$;G++)F[G]=0<V?k.i(G+N)>>>V|k.i(G+N+1)<<32-V:k.i(G+N);return new s(F,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,nB=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=f,s.fromString=h,sl=s}).apply(typeof yN<"u"?yN:typeof self<"u"?self:typeof window<"u"?window:{});var Fy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rB,wp,iB,Tv,WS,oB,sB,aB;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(_,C,I){return _==Array.prototype||_==Object.prototype||(_[C]=I.value),_};function n(_){_=[typeof globalThis=="object"&&globalThis,_,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fy=="object"&&Fy];for(var C=0;C<_.length;++C){var I=_[C];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var r=n(this);function i(_,C){if(C)e:{var I=r;_=_.split(".");for(var B=0;B<_.length-1;B++){var J=_[B];if(!(J in I))break e;I=I[J]}_=_[_.length-1],B=I[_],C=C(B),C!=B&&C!=null&&e(I,_,{configurable:!0,writable:!0,value:C})}}function o(_,C){_ instanceof String&&(_+="");var I=0,B=!1,J={next:function(){if(!B&&I<_.length){var oe=I++;return{value:C(oe,_[oe]),done:!1}}return B=!0,{done:!0,value:void 0}}};return J[Symbol.iterator]=function(){return J},J}i("Array.prototype.values",function(_){return _||function(){return o(this,function(C,I){return I})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},u=this||self;function c(_){var C=typeof _;return C=C!="object"?C:_?Array.isArray(_)?"array":C:"null",C=="array"||C=="object"&&typeof _.length=="number"}function f(_){var C=typeof _;return C=="object"&&_!=null||C=="function"}function h(_,C,I){return _.call.apply(_.bind,arguments)}function y(_,C,I){if(!_)throw Error();if(2<arguments.length){var B=Array.prototype.slice.call(arguments,2);return function(){var J=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(J,B),_.apply(C,J)}}return function(){return _.apply(C,arguments)}}function v(_,C,I){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:y,v.apply(null,arguments)}function E(_,C){var I=Array.prototype.slice.call(arguments,1);return function(){var B=I.slice();return B.push.apply(B,arguments),_.apply(this,B)}}function b(_,C){function I(){}I.prototype=C.prototype,_.aa=C.prototype,_.prototype=new I,_.prototype.constructor=_,_.Qb=function(B,J,oe){for(var _e=Array(arguments.length-2),at=2;at<arguments.length;at++)_e[at-2]=arguments[at];return C.prototype[J].apply(B,_e)}}function S(_){const C=_.length;if(0<C){const I=Array(C);for(let B=0;B<C;B++)I[B]=_[B];return I}return[]}function A(_,C){for(let I=1;I<arguments.length;I++){const B=arguments[I];if(c(B)){const J=_.length||0,oe=B.length||0;_.length=J+oe;for(let _e=0;_e<oe;_e++)_[J+_e]=B[_e]}else _.push(B)}}class R{constructor(C,I){this.i=C,this.j=I,this.h=0,this.g=null}get(){let C;return 0<this.h?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function D(_){return/^[\s\xa0]*$/.test(_)}function M(){var _=u.navigator;return _&&(_=_.userAgent)?_:""}function U(_){return U[" "](_),_}U[" "]=function(){};var q=M().indexOf("Gecko")!=-1&&!(M().toLowerCase().indexOf("webkit")!=-1&&M().indexOf("Edge")==-1)&&!(M().indexOf("Trident")!=-1||M().indexOf("MSIE")!=-1)&&M().indexOf("Edge")==-1;function z(_,C,I){for(const B in _)C.call(I,_[B],B,_)}function k(_,C){for(const I in _)C.call(void 0,_[I],I,_)}function V(_){const C={};for(const I in _)C[I]=_[I];return C}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $(_,C){let I,B;for(let J=1;J<arguments.length;J++){B=arguments[J];for(I in B)_[I]=B[I];for(let oe=0;oe<N.length;oe++)I=N[oe],Object.prototype.hasOwnProperty.call(B,I)&&(_[I]=B[I])}}function F(_){var C=1;_=_.split(":");const I=[];for(;0<C&&_.length;)I.push(_.shift()),C--;return _.length&&I.push(_.join(":")),I}function G(_){u.setTimeout(()=>{throw _},0)}function H(){var _=Ve;let C=null;return _.g&&(C=_.g,_.g=_.g.next,_.g||(_.h=null),C.next=null),C}class Ae{constructor(){this.h=this.g=null}add(C,I){const B=Se.get();B.set(C,I),this.h?this.h.next=B:this.g=B,this.h=B}}var Se=new R(()=>new ee,_=>_.reset());class ee{constructor(){this.next=this.g=this.h=null}set(C,I){this.h=C,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let he,Te=!1,Ve=new Ae,j=()=>{const _=u.Promise.resolve(void 0);he=()=>{_.then(ce)}};var ce=()=>{for(var _;_=H();){try{_.h.call(_.g)}catch(I){G(I)}var C=Se;C.j(_),100>C.h&&(C.h++,_.next=C.g,C.g=_)}Te=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ve(_,C){this.type=_,this.g=this.target=C,this.defaultPrevented=!1}ve.prototype.h=function(){this.defaultPrevented=!0};var Oe=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var _=!1,C=Object.defineProperty({},"passive",{get:function(){_=!0}});try{const I=()=>{};u.addEventListener("test",I,C),u.removeEventListener("test",I,C)}catch{}return _})();function Fe(_,C){if(ve.call(this,_?_.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_){var I=this.type=_.type,B=_.changedTouches&&_.changedTouches.length?_.changedTouches[0]:null;if(this.target=_.target||_.srcElement,this.g=C,C=_.relatedTarget){if(q){e:{try{U(C.nodeName);var J=!0;break e}catch{}J=!1}J||(C=null)}}else I=="mouseover"?C=_.fromElement:I=="mouseout"&&(C=_.toElement);this.relatedTarget=C,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0),this.button=_.button,this.key=_.key||"",this.ctrlKey=_.ctrlKey,this.altKey=_.altKey,this.shiftKey=_.shiftKey,this.metaKey=_.metaKey,this.pointerId=_.pointerId||0,this.pointerType=typeof _.pointerType=="string"?_.pointerType:Be[_.pointerType]||"",this.state=_.state,this.i=_,_.defaultPrevented&&Fe.aa.h.call(this)}}b(Fe,ve);var Be={2:"touch",3:"pen",4:"mouse"};Fe.prototype.h=function(){Fe.aa.h.call(this);var _=this.i;_.preventDefault?_.preventDefault():_.returnValue=!1};var an="closure_listenable_"+(1e6*Math.random()|0),ft=0;function we(_,C,I,B,J){this.listener=_,this.proxy=null,this.src=C,this.type=I,this.capture=!!B,this.ha=J,this.key=++ft,this.da=this.fa=!1}function Ge(_){_.da=!0,_.listener=null,_.proxy=null,_.src=null,_.ha=null}function je(_){this.src=_,this.g={},this.h=0}je.prototype.add=function(_,C,I,B,J){var oe=_.toString();_=this.g[oe],_||(_=this.g[oe]=[],this.h++);var _e=Wt(_,C,B,J);return-1<_e?(C=_[_e],I||(C.fa=!1)):(C=new we(C,this.src,oe,!!B,J),C.fa=I,_.push(C)),C};function ge(_,C){var I=C.type;if(I in _.g){var B=_.g[I],J=Array.prototype.indexOf.call(B,C,void 0),oe;(oe=0<=J)&&Array.prototype.splice.call(B,J,1),oe&&(Ge(C),_.g[I].length==0&&(delete _.g[I],_.h--))}}function Wt(_,C,I,B){for(var J=0;J<_.length;++J){var oe=_[J];if(!oe.da&&oe.listener==C&&oe.capture==!!I&&oe.ha==B)return J}return-1}var et="closure_lm_"+(1e6*Math.random()|0),mn={};function bn(_,C,I,B,J){if(Array.isArray(C)){for(var oe=0;oe<C.length;oe++)bn(_,C[oe],I,B,J);return null}return I=Fl(I),_&&_[an]?_.K(C,I,f(B)?!!B.capture:!1,J):ln(_,C,I,!1,B,J)}function ln(_,C,I,B,J,oe){if(!C)throw Error("Invalid event type");var _e=f(J)?!!J.capture:!!J,at=us(_);if(at||(_[et]=at=new je(_)),I=at.add(C,I,B,_e,oe),I.proxy)return I;if(B=ma(),I.proxy=B,B.src=_,B.listener=I,_.addEventListener)Oe||(J=_e),J===void 0&&(J=!1),_.addEventListener(C.toString(),B,J);else if(_.attachEvent)_.attachEvent(Ci(C.toString()),B);else if(_.addListener&&_.removeListener)_.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return I}function ma(){function _(I){return C.call(_.src,_.listener,I)}const C=Ul;return _}function vt(_,C,I,B,J){if(Array.isArray(C))for(var oe=0;oe<C.length;oe++)vt(_,C[oe],I,B,J);else B=f(B)?!!B.capture:!!B,I=Fl(I),_&&_[an]?(_=_.i,C=String(C).toString(),C in _.g&&(oe=_.g[C],I=Wt(oe,I,B,J),-1<I&&(Ge(oe[I]),Array.prototype.splice.call(oe,I,1),oe.length==0&&(delete _.g[C],_.h--)))):_&&(_=us(_))&&(C=_.g[C.toString()],_=-1,C&&(_=Wt(C,I,B,J)),(I=-1<_?C[_]:null)&&wo(I))}function wo(_){if(typeof _!="number"&&_&&!_.da){var C=_.src;if(C&&C[an])ge(C.i,_);else{var I=_.type,B=_.proxy;C.removeEventListener?C.removeEventListener(I,B,_.capture):C.detachEvent?C.detachEvent(Ci(I),B):C.addListener&&C.removeListener&&C.removeListener(B),(I=us(C))?(ge(I,_),I.h==0&&(I.src=null,C[et]=null)):Ge(_)}}}function Ci(_){return _ in mn?mn[_]:mn[_]="on"+_}function Ul(_,C){if(_.da)_=!0;else{C=new Fe(C,this);var I=_.listener,B=_.ha||_.src;_.fa&&wo(_),_=I.call(B,C)}return _}function us(_){return _=_[et],_ instanceof je?_:null}var ga="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fl(_){return typeof _=="function"?_:(_[ga]||(_[ga]=function(C){return _.handleEvent(C)}),_[ga])}function qt(){le.call(this),this.i=new je(this),this.M=this,this.F=null}b(qt,le),qt.prototype[an]=!0,qt.prototype.removeEventListener=function(_,C,I,B){vt(this,_,C,I,B)};function ht(_,C){var I,B=_.F;if(B)for(I=[];B;B=B.F)I.push(B);if(_=_.M,B=C.type||C,typeof C=="string")C=new ve(C,_);else if(C instanceof ve)C.target=C.target||_;else{var J=C;C=new ve(B,_),$(C,J)}if(J=!0,I)for(var oe=I.length-1;0<=oe;oe--){var _e=C.g=I[oe];J=ie(_e,B,!0,C)&&J}if(_e=C.g=_,J=ie(_e,B,!0,C)&&J,J=ie(_e,B,!1,C)&&J,I)for(oe=0;oe<I.length;oe++)_e=C.g=I[oe],J=ie(_e,B,!1,C)&&J}qt.prototype.N=function(){if(qt.aa.N.call(this),this.i){var _=this.i,C;for(C in _.g){for(var I=_.g[C],B=0;B<I.length;B++)Ge(I[B]);delete _.g[C],_.h--}}this.F=null},qt.prototype.K=function(_,C,I,B){return this.i.add(String(_),C,!1,I,B)},qt.prototype.L=function(_,C,I,B){return this.i.add(String(_),C,!0,I,B)};function ie(_,C,I,B){if(C=_.i.g[String(C)],!C)return!0;C=C.concat();for(var J=!0,oe=0;oe<C.length;++oe){var _e=C[oe];if(_e&&!_e.da&&_e.capture==I){var at=_e.listener,kn=_e.ha||_e.src;_e.fa&&ge(_.i,_e),J=at.call(kn,B)!==!1&&J}}return J&&!B.defaultPrevented}function pe(_,C,I){if(typeof _=="function")I&&(_=v(_,I));else if(_&&typeof _.handleEvent=="function")_=v(_.handleEvent,_);else throw Error("Invalid listener argument");return 2147483647<Number(C)?-1:u.setTimeout(_,C||0)}function Me(_){_.g=pe(()=>{_.g=null,_.i&&(_.i=!1,Me(_))},_.l);const C=_.h;_.h=null,_.m.apply(null,C)}class Ce extends le{constructor(C,I){super(),this.m=C,this.l=I,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:Me(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xe(_){le.call(this),this.h=_,this.g={}}b(xe,le);var Ke=[];function pt(_){z(_.g,function(C,I){this.g.hasOwnProperty(I)&&wo(C)},_),_.g={}}xe.prototype.N=function(){xe.aa.N.call(this),pt(this)},xe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Rt=u.JSON.stringify,Qe=u.JSON.parse,mt=class{stringify(_){return u.JSON.stringify(_,void 0)}parse(_){return u.JSON.parse(_,void 0)}};function vr(){}vr.prototype.h=null;function Ii(_){return _.h||(_.h=_.i())}function or(){}var gn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ei(){ve.call(this,"d")}b(ei,ve);function ya(){ve.call(this,"c")}b(ya,ve);var bo={},Jd=null;function va(){return Jd=Jd||new qt}bo.La="serverreachability";function vc(_){ve.call(this,bo.La,_)}b(vc,ve);function _a(_){const C=va();ht(C,new vc(C))}bo.STAT_EVENT="statevent";function gg(_,C){ve.call(this,bo.STAT_EVENT,_),this.stat=C}b(gg,ve);function Yt(_){const C=va();ht(C,new gg(C,_))}bo.Ma="timingevent";function Nn(_,C){ve.call(this,bo.Ma,_),this.size=C}b(Nn,ve);function Sn(_,C){if(typeof _!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){_()},C)}function xi(){this.g=!0}xi.prototype.xa=function(){this.g=!1};function Qd(_,C,I,B,J,oe){_.info(function(){if(_.g)if(oe)for(var _e="",at=oe.split("&"),kn=0;kn<at.length;kn++){var lt=at[kn].split("=");if(1<lt.length){var Hn=lt[0];lt=lt[1];var On=Hn.split("_");_e=2<=On.length&&On[1]=="type"?_e+(Hn+"="+lt+"&"):_e+(Hn+"=redacted&")}}else _e=null;else _e=oe;return"XMLHTTP REQ ("+B+") [attempt "+J+"]: "+C+`
`+I+`
`+_e})}function ST(_,C,I,B,J,oe,_e){_.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+J+"]: "+C+`
`+I+`
`+oe+" "+_e})}function Ta(_,C,I,B){_.info(function(){return"XMLHTTP TEXT ("+C+"): "+Bl(_,I)+(B?" "+B:"")})}function yg(_,C){_.info(function(){return"TIMEOUT: "+C})}xi.prototype.info=function(){};function Bl(_,C){if(!_.g)return C;if(!C)return null;try{var I=JSON.parse(C);if(I){for(_=0;_<I.length;_++)if(Array.isArray(I[_])){var B=I[_];if(!(2>B.length)){var J=B[1];if(Array.isArray(J)&&!(1>J.length)){var oe=J[0];if(oe!="noop"&&oe!="stop"&&oe!="close")for(var _e=1;_e<J.length;_e++)J[_e]=""}}}}return Rt(I)}catch{return C}}var Ea={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},cs={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},So;function Ao(){}b(Ao,vr),Ao.prototype.g=function(){return new XMLHttpRequest},Ao.prototype.i=function(){return{}},So=new Ao;function Rr(_,C,I,B){this.j=_,this.i=C,this.l=I,this.R=B||1,this.U=new xe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new yn}function yn(){this.i=null,this.g="",this.h=!1}var Xd={},_c={};function no(_,C,I){_.L=1,_.v=Gl(ti(C)),_.m=I,_.P=!0,fs(_,null)}function fs(_,C){_.F=Date.now(),ql(_),_.A=ti(_.v);var I=_.A,B=_.R;Array.isArray(B)||(B=[String(B)]),ih(I.i,"t",B),_.C=0,I=_.j.J,_.h=new yn,_.g=Ng(_.j,I?C:null,!_.m),0<_.O&&(_.M=new Ce(v(_.Y,_,_.g),_.O)),C=_.U,I=_.g,B=_.ca;var J="readystatechange";Array.isArray(J)||(J&&(Ke[0]=J.toString()),J=Ke);for(var oe=0;oe<J.length;oe++){var _e=bn(I,J[oe],B||C.handleEvent,!1,C.h||C);if(!_e)break;C.g[_e.key]=_e}C=_.H?V(_.H):{},_.m?(_.u||(_.u="POST"),C["Content-Type"]="application/x-www-form-urlencoded",_.g.ea(_.A,_.u,_.m,C)):(_.u="GET",_.g.ea(_.A,_.u,null,C)),_a(),Qd(_.i,_.u,_.A,_.l,_.R,_.m)}Rr.prototype.ca=function(_){_=_.target;const C=this.M;C&&Di(_)==3?C.j():this.Y(_)},Rr.prototype.Y=function(_){try{if(_==this.g)e:{const On=Di(this.g);var C=this.g.Ba();const _s=this.g.Z();if(!(3>On)&&(On!=3||this.g&&(this.h.h||this.g.oa()||Ag(this.g)))){this.J||On!=4||C==7||(C==8||0>=_s?_a(3):_a(2)),wa(this);var I=this.g.Z();this.X=I;t:if(vg(this)){var B=Ag(this.g);_="";var J=B.length,oe=Di(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){sr(this),Co(this);var _e="";break t}this.h.i=new u.TextDecoder}for(C=0;C<J;C++)this.h.h=!0,_+=this.h.i.decode(B[C],{stream:!(oe&&C==J-1)});B.length=0,this.h.g+=_,this.C=0,_e=this.h.g}else _e=this.g.oa();if(this.o=I==200,ST(this.i,this.u,this.A,this.l,this.R,On,I),this.o){if(this.T&&!this.K){t:{if(this.g){var at,kn=this.g;if((at=kn.g?kn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(at)){var lt=at;break t}}lt=null}if(I=lt)Ta(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,$l(this,I);else{this.o=!1,this.s=3,Yt(12),sr(this),Co(this);break e}}if(this.P){I=!0;let ar;for(;!this.J&&this.C<_e.length;)if(ar=_g(this,_e),ar==_c){On==4&&(this.s=4,Yt(14),I=!1),Ta(this.i,this.l,null,"[Incomplete Response]");break}else if(ar==Xd){this.s=4,Yt(15),Ta(this.i,this.l,_e,"[Invalid Chunk]"),I=!1;break}else Ta(this.i,this.l,ar,null),$l(this,ar);if(vg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),On!=4||_e.length!=0||this.h.h||(this.s=1,Yt(16),I=!1),this.o=this.o&&I,!I)Ta(this.i,this.l,_e,"[Invalid Chunked Response]"),sr(this),Co(this);else if(0<_e.length&&!this.W){this.W=!0;var Hn=this.j;Hn.g==this&&Hn.ba&&!Hn.M&&(Hn.j.info("Great, no buffering proxy detected. Bytes received: "+_e.length),Zl(Hn),Hn.M=!0,Yt(11))}}else Ta(this.i,this.l,_e,null),$l(this,_e);On==4&&sr(this),this.o&&!this.J&&(On==4?Pg(this.j,this):(this.o=!1,ql(this)))}else RT(this.g),I==400&&0<_e.indexOf("Unknown SID")?(this.s=3,Yt(12)):(this.s=0,Yt(13)),sr(this),Co(this)}}}catch{}finally{}};function vg(_){return _.g?_.u=="GET"&&_.L!=2&&_.j.Ca:!1}function _g(_,C){var I=_.C,B=C.indexOf(`
`,I);return B==-1?_c:(I=Number(C.substring(I,B)),isNaN(I)?Xd:(B+=1,B+I>C.length?_c:(C=C.slice(B,B+I),_.C=B+I,C)))}Rr.prototype.cancel=function(){this.J=!0,sr(this)};function ql(_){_.S=Date.now()+_.I,Tg(_,_.I)}function Tg(_,C){if(_.B!=null)throw Error("WatchDog timer not null");_.B=Sn(v(_.ba,_),C)}function wa(_){_.B&&(u.clearTimeout(_.B),_.B=null)}Rr.prototype.ba=function(){this.B=null;const _=Date.now();0<=_-this.S?(yg(this.i,this.A),this.L!=2&&(_a(),Yt(17)),sr(this),this.s=2,Co(this)):Tg(this,this.S-_)};function Co(_){_.j.G==0||_.J||Pg(_.j,_)}function sr(_){wa(_);var C=_.M;C&&typeof C.ma=="function"&&C.ma(),_.M=null,pt(_.U),_.g&&(C=_.g,_.g=null,C.abort(),C.ma())}function $l(_,C){try{var I=_.j;if(I.G!=0&&(I.g==_||Zd(I.h,_))){if(!_.K&&Zd(I.h,_)&&I.G==3){try{var B=I.Da.g.parse(C)}catch{B=null}if(Array.isArray(B)&&B.length==3){var J=B;if(J[0]==0){e:if(!I.u){if(I.g)if(I.g.F+3e3<_.F)Mc(I),Rc(I);else break e;uh(I),Yt(18)}}else I.za=J[1],0<I.za-I.T&&37500>J[2]&&I.F&&I.v==0&&!I.C&&(I.C=Sn(v(I.Za,I),6e3));if(1>=Ec(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else vs(I,11)}else if((_.K||I.g==_)&&Mc(I),!D(C))for(J=I.Da.g.parse(C),C=0;C<J.length;C++){let lt=J[C];if(I.T=lt[0],lt=lt[1],I.G==2)if(lt[0]=="c"){I.K=lt[1],I.ia=lt[2];const Hn=lt[3];Hn!=null&&(I.la=Hn,I.j.info("VER="+I.la));const On=lt[4];On!=null&&(I.Aa=On,I.j.info("SVER="+I.Aa));const _s=lt[5];_s!=null&&typeof _s=="number"&&0<_s&&(B=1.5*_s,I.L=B,I.j.info("backChannelRequestTimeoutMs_="+B)),B=I;const ar=_.g;if(ar){const No=ar.g?ar.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(No){var oe=B.h;oe.g||No.indexOf("spdy")==-1&&No.indexOf("quic")==-1&&No.indexOf("h2")==-1||(oe.j=oe.l,oe.g=new Set,oe.h&&(wc(oe,oe.h),oe.h=null))}if(B.D){const fh=ar.g?ar.g.getResponseHeader("X-HTTP-Session-Id"):null;fh&&(B.ya=fh,Pt(B.I,B.D,fh))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-_.F,I.j.info("Handshake RTT: "+I.R+"ms")),B=I;var _e=_;if(B.qa=Dg(B,B.J?B.ia:null,B.W),_e.K){Pr(B.h,_e);var at=_e,kn=B.L;kn&&(at.I=kn),at.B&&(wa(at),ql(at)),B.g=_e}else xg(B);0<I.i.length&&Pc(I)}else lt[0]!="stop"&&lt[0]!="close"||vs(I,7);else I.G==3&&(lt[0]=="stop"||lt[0]=="close"?lt[0]=="stop"?vs(I,7):ah(I):lt[0]!="noop"&&I.l&&I.l.ta(lt),I.v=0)}}_a(4)}catch{}}var Eg=class{constructor(_,C){this.g=_,this.map=C}};function ds(_){this.l=_||10,u.PerformanceNavigationTiming?(_=u.performance.getEntriesByType("navigation"),_=0<_.length&&(_[0].nextHopProtocol=="hq"||_[0].nextHopProtocol=="h2")):_=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=_?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Tc(_){return _.h?!0:_.g?_.g.size>=_.j:!1}function Ec(_){return _.h?1:_.g?_.g.size:0}function Zd(_,C){return _.h?_.h==C:_.g?_.g.has(C):!1}function wc(_,C){_.g?_.g.add(C):_.h=C}function Pr(_,C){_.h&&_.h==C?_.h=null:_.g&&_.g.has(C)&&_.g.delete(C)}ds.prototype.cancel=function(){if(this.i=eh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const _ of this.g.values())_.cancel();this.g.clear()}};function eh(_){if(_.h!=null)return _.i.concat(_.h.D);if(_.g!=null&&_.g.size!==0){let C=_.i;for(const I of _.g.values())C=C.concat(I.D);return C}return S(_.i)}function AT(_){if(_.V&&typeof _.V=="function")return _.V();if(typeof Map<"u"&&_ instanceof Map||typeof Set<"u"&&_ instanceof Set)return Array.from(_.values());if(typeof _=="string")return _.split("");if(c(_)){for(var C=[],I=_.length,B=0;B<I;B++)C.push(_[B]);return C}C=[],I=0;for(B in _)C[I++]=_[B];return C}function bc(_){if(_.na&&typeof _.na=="function")return _.na();if(!_.V||typeof _.V!="function"){if(typeof Map<"u"&&_ instanceof Map)return Array.from(_.keys());if(!(typeof Set<"u"&&_ instanceof Set)){if(c(_)||typeof _=="string"){var C=[];_=_.length;for(var I=0;I<_;I++)C.push(I);return C}C=[],I=0;for(const B in _)C[I++]=B;return C}}}function th(_,C){if(_.forEach&&typeof _.forEach=="function")_.forEach(C,void 0);else if(c(_)||typeof _=="string")Array.prototype.forEach.call(_,C,void 0);else for(var I=bc(_),B=AT(_),J=B.length,oe=0;oe<J;oe++)C.call(void 0,B[oe],I&&I[oe],_)}var zl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function CT(_,C){if(_){_=_.split("&");for(var I=0;I<_.length;I++){var B=_[I].indexOf("="),J=null;if(0<=B){var oe=_[I].substring(0,B);J=_[I].substring(B+1)}else oe=_[I];C(oe,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function An(_){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,_ instanceof An){this.h=_.h,Hl(this,_.j),this.o=_.o,this.g=_.g,ba(this,_.s),this.l=_.l;var C=_.i,I=new ps;I.i=C.i,C.g&&(I.g=new Map(C.g),I.h=C.h),hs(this,I),this.m=_.m}else _&&(C=String(_).match(zl))?(this.h=!1,Hl(this,C[1]||"",!0),this.o=Ri(C[2]||""),this.g=Ri(C[3]||"",!0),ba(this,C[4]),this.l=Ri(C[5]||"",!0),hs(this,C[6]||"",!0),this.m=Ri(C[7]||"")):(this.h=!1,this.i=new ps(null,this.h))}An.prototype.toString=function(){var _=[],C=this.j;C&&_.push(Kl(C,nh,!0),":");var I=this.g;return(I||C=="file")&&(_.push("//"),(C=this.o)&&_.push(Kl(C,nh,!0),"@"),_.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.s,I!=null&&_.push(":",String(I))),(I=this.l)&&(this.g&&I.charAt(0)!="/"&&_.push("/"),_.push(Kl(I,I.charAt(0)=="/"?IT:rh,!0))),(I=this.i.toString())&&_.push("?",I),(I=this.m)&&_.push("#",Kl(I,Sc)),_.join("")};function ti(_){return new An(_)}function Hl(_,C,I){_.j=I?Ri(C,!0):C,_.j&&(_.j=_.j.replace(/:$/,""))}function ba(_,C){if(C){if(C=Number(C),isNaN(C)||0>C)throw Error("Bad port number "+C);_.s=C}else _.s=null}function hs(_,C,I){C instanceof ps?(_.i=C,bg(_.i,_.h)):(I||(C=Kl(C,xT)),_.i=new ps(C,_.h))}function Pt(_,C,I){_.i.set(C,I)}function Gl(_){return Pt(_,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),_}function Ri(_,C){return _?C?decodeURI(_.replace(/%25/g,"%2525")):decodeURIComponent(_):""}function Kl(_,C,I){return typeof _=="string"?(_=encodeURI(_).replace(C,wg),I&&(_=_.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_):null}function wg(_){return _=_.charCodeAt(0),"%"+(_>>4&15).toString(16)+(_&15).toString(16)}var nh=/[#\/\?@]/g,rh=/[#\?:]/g,IT=/[#\?]/g,xT=/[#\?@]/g,Sc=/#/g;function ps(_,C){this.h=this.g=null,this.i=_||null,this.j=!!C}function Pi(_){_.g||(_.g=new Map,_.h=0,_.i&&CT(_.i,function(C,I){_.add(decodeURIComponent(C.replace(/\+/g," ")),I)}))}t=ps.prototype,t.add=function(_,C){Pi(this),this.i=null,_=Io(this,_);var I=this.g.get(_);return I||this.g.set(_,I=[]),I.push(C),this.h+=1,this};function ms(_,C){Pi(_),C=Io(_,C),_.g.has(C)&&(_.i=null,_.h-=_.g.get(C).length,_.g.delete(C))}function gs(_,C){return Pi(_),C=Io(_,C),_.g.has(C)}t.forEach=function(_,C){Pi(this),this.g.forEach(function(I,B){I.forEach(function(J){_.call(C,J,B,this)},this)},this)},t.na=function(){Pi(this);const _=Array.from(this.g.values()),C=Array.from(this.g.keys()),I=[];for(let B=0;B<C.length;B++){const J=_[B];for(let oe=0;oe<J.length;oe++)I.push(C[B])}return I},t.V=function(_){Pi(this);let C=[];if(typeof _=="string")gs(this,_)&&(C=C.concat(this.g.get(Io(this,_))));else{_=Array.from(this.g.values());for(let I=0;I<_.length;I++)C=C.concat(_[I])}return C},t.set=function(_,C){return Pi(this),this.i=null,_=Io(this,_),gs(this,_)&&(this.h-=this.g.get(_).length),this.g.set(_,[C]),this.h+=1,this},t.get=function(_,C){return _?(_=this.V(_),0<_.length?String(_[0]):C):C};function ih(_,C,I){ms(_,C),0<I.length&&(_.i=null,_.g.set(Io(_,C),S(I)),_.h+=I.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _=[],C=Array.from(this.g.keys());for(var I=0;I<C.length;I++){var B=C[I];const oe=encodeURIComponent(String(B)),_e=this.V(B);for(B=0;B<_e.length;B++){var J=oe;_e[B]!==""&&(J+="="+encodeURIComponent(String(_e[B]))),_.push(J)}}return this.i=_.join("&")};function Io(_,C){return C=String(C),_.j&&(C=C.toLowerCase()),C}function bg(_,C){C&&!_.j&&(Pi(_),_.i=null,_.g.forEach(function(I,B){var J=B.toLowerCase();B!=J&&(ms(this,B),ih(this,J,I))},_)),_.j=C}function jl(_,C){const I=new xi;if(u.Image){const B=new Image;B.onload=E(Mi,I,"TestLoadImage: loaded",!0,C,B),B.onerror=E(Mi,I,"TestLoadImage: error",!1,C,B),B.onabort=E(Mi,I,"TestLoadImage: abort",!1,C,B),B.ontimeout=E(Mi,I,"TestLoadImage: timeout",!1,C,B),u.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=_}else C(!1)}function ro(_,C){const I=new xi,B=new AbortController,J=setTimeout(()=>{B.abort(),Mi(I,"TestPingServer: timeout",!1,C)},1e4);fetch(_,{signal:B.signal}).then(oe=>{clearTimeout(J),oe.ok?Mi(I,"TestPingServer: ok",!0,C):Mi(I,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(J),Mi(I,"TestPingServer: error",!1,C)})}function Mi(_,C,I,B,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),B(I)}catch{}}function Wl(){this.g=new mt}function xo(_,C,I){const B=I||"";try{th(_,function(J,oe){let _e=J;f(J)&&(_e=Rt(J)),C.push(B+oe+"="+encodeURIComponent(_e))})}catch(J){throw C.push(B+"type="+encodeURIComponent("_badmap")),J}}function Sa(_){this.l=_.Ub||null,this.j=_.eb||!1}b(Sa,vr),Sa.prototype.g=function(){return new ys(this.l,this.j)},Sa.prototype.i=(function(_){return function(){return _}})({});function ys(_,C){qt.call(this),this.D=_,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(ys,qt),t=ys.prototype,t.open=function(_,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=_,this.A=C,this.readyState=1,Po(this)},t.send=function(_){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const C={headers:this.u,method:this.B,credentials:this.m,cache:void 0};_&&(C.body=_),(this.D||u).fetch(new Request(this.A,C)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ro(this)),this.readyState=0},t.Sa=function(_){if(this.g&&(this.l=_,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_.headers,this.readyState=2,Po(this)),this.g&&(this.readyState=3,Po(this),this.g)))if(this.responseType==="arraybuffer")_.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in _){if(this.j=_.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;oh(this)}else _.text().then(this.Ra.bind(this),this.ga.bind(this))};function oh(_){_.j.read().then(_.Pa.bind(_)).catch(_.ga.bind(_))}t.Pa=function(_){if(this.g){if(this.o&&_.value)this.response.push(_.value);else if(!this.o){var C=_.value?_.value:new Uint8Array(0);(C=this.v.decode(C,{stream:!_.done}))&&(this.response=this.responseText+=C)}_.done?Ro(this):Po(this),this.readyState==3&&oh(this)}},t.Ra=function(_){this.g&&(this.response=this.responseText=_,Ro(this))},t.Qa=function(_){this.g&&(this.response=_,Ro(this))},t.ga=function(){this.g&&Ro(this)};function Ro(_){_.readyState=4,_.l=null,_.j=null,_.v=null,Po(_)}t.setRequestHeader=function(_,C){this.u.append(_,C)},t.getResponseHeader=function(_){return this.h&&this.h.get(_.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const _=[],C=this.h.entries();for(var I=C.next();!I.done;)I=I.value,_.push(I[0]+": "+I[1]),I=C.next();return _.join(`\r
`)};function Po(_){_.onreadystatechange&&_.onreadystatechange.call(_)}Object.defineProperty(ys.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(_){this.m=_?"include":"same-origin"}});function sh(_){let C="";return z(_,function(I,B){C+=B,C+=":",C+=I,C+=`\r
`}),C}function zn(_,C,I){e:{for(B in I){var B=!1;break e}B=!0}B||(I=sh(I),typeof _=="string"?I!=null&&encodeURIComponent(String(I)):Pt(_,C,I))}function Et(_){qt.call(this),this.headers=new Map,this.o=_||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Et,qt);var Ac=/^https?$/i,Yl=["POST","PUT"];t=Et.prototype,t.Ha=function(_){this.J=_},t.ea=function(_,C,I,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+_);C=C?C.toUpperCase():"GET",this.D=_,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():So.g(),this.v=this.o?Ii(this.o):Ii(So),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(C,String(_),!0),this.B=!1}catch(oe){Sg(this,oe);return}if(_=I||"",I=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var J in B)I.set(J,B[J]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(const oe of B.keys())I.set(oe,B.get(oe));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from(I.keys()).find(oe=>oe.toLowerCase()=="content-type"),J=u.FormData&&_ instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Yl,C,void 0))||B||J||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[oe,_e]of I)this.g.setRequestHeader(oe,_e);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Jl(this),this.u=!0,this.g.send(_),this.u=!1}catch(oe){Sg(this,oe)}};function Sg(_,C){_.h=!1,_.g&&(_.j=!0,_.g.abort(),_.j=!1),_.l=C,_.m=5,Cc(_),Mo(_)}function Cc(_){_.A||(_.A=!0,ht(_,"complete"),ht(_,"error"))}t.abort=function(_){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=_||7,ht(this,"complete"),ht(this,"abort"),Mo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mo(this,!0)),Et.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ic(this):this.bb())},t.bb=function(){Ic(this)};function Ic(_){if(_.h&&typeof s<"u"&&(!_.v[1]||Di(_)!=4||_.Z()!=2)){if(_.u&&Di(_)==4)pe(_.Ea,0,_);else if(ht(_,"readystatechange"),Di(_)==4){_.h=!1;try{const _e=_.Z();e:switch(_e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var I;if(!(I=C)){var B;if(B=_e===0){var J=String(_.D).match(zl)[1]||null;!J&&u.self&&u.self.location&&(J=u.self.location.protocol.slice(0,-1)),B=!Ac.test(J?J.toLowerCase():"")}I=B}if(I)ht(_,"complete"),ht(_,"success");else{_.m=6;try{var oe=2<Di(_)?_.g.statusText:""}catch{oe=""}_.l=oe+" ["+_.Z()+"]",Cc(_)}}finally{Mo(_)}}}}function Mo(_,C){if(_.g){Jl(_);const I=_.g,B=_.v[0]?()=>{}:null;_.g=null,_.v=null,C||ht(_,"ready");try{I.onreadystatechange=B}catch{}}}function Jl(_){_.I&&(u.clearTimeout(_.I),_.I=null)}t.isActive=function(){return!!this.g};function Di(_){return _.g?_.g.readyState:0}t.Z=function(){try{return 2<Di(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(_){if(this.g){var C=this.g.responseText;return _&&C.indexOf(_)==0&&(C=C.substring(_.length)),Qe(C)}};function Ag(_){try{if(!_.g)return null;if("response"in _.g)return _.g.response;switch(_.H){case"":case"text":return _.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _.g)return _.g.mozResponseArrayBuffer}return null}catch{return null}}function RT(_){const C={};_=(_.g&&2<=Di(_)&&_.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<_.length;B++){if(D(_[B]))continue;var I=F(_[B]);const J=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const oe=C[J]||[];C[J]=oe,oe.push(I)}k(C,function(B){return B.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ql(_,C,I){return I&&I.internalChannelParams&&I.internalChannelParams[_]||C}function xc(_){this.Aa=0,this.i=[],this.j=new xi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ql("failFast",!1,_),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ql("baseRetryDelayMs",5e3,_),this.cb=Ql("retryDelaySeedMs",1e4,_),this.Wa=Ql("forwardChannelMaxRetries",2,_),this.wa=Ql("forwardChannelRequestTimeoutMs",2e4,_),this.pa=_&&_.xmlHttpFactory||void 0,this.Xa=_&&_.Tb||void 0,this.Ca=_&&_.useFetchStreams||!1,this.L=void 0,this.J=_&&_.supportsCrossDomainXhr||!1,this.K="",this.h=new ds(_&&_.concurrentRequestLimit),this.Da=new Wl,this.P=_&&_.fastHandshake||!1,this.O=_&&_.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=_&&_.Rb||!1,_&&_.xa&&this.j.xa(),_&&_.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&_&&_.detectBufferingProxy||!1,this.ja=void 0,_&&_.longPollingTimeout&&0<_.longPollingTimeout&&(this.ja=_.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=xc.prototype,t.la=8,t.G=1,t.connect=function(_,C,I,B){Yt(0),this.W=_,this.H=C||{},I&&B!==void 0&&(this.H.OSID=I,this.H.OAID=B),this.F=this.X,this.I=Dg(this,null,this.W),Pc(this)};function ah(_){if(Cg(_),_.G==3){var C=_.U++,I=ti(_.I);if(Pt(I,"SID",_.K),Pt(I,"RID",C),Pt(I,"TYPE","terminate"),Xl(_,I),C=new Rr(_,_.j,C),C.L=2,C.v=Gl(ti(I)),I=!1,u.navigator&&u.navigator.sendBeacon)try{I=u.navigator.sendBeacon(C.v.toString(),"")}catch{}!I&&u.Image&&(new Image().src=C.v,I=!0),I||(C.g=Ng(C.j,null),C.g.ea(C.v)),C.F=Date.now(),ql(C)}Mg(_)}function Rc(_){_.g&&(Zl(_),_.g.cancel(),_.g=null)}function Cg(_){Rc(_),_.u&&(u.clearTimeout(_.u),_.u=null),Mc(_),_.h.cancel(),_.s&&(typeof _.s=="number"&&u.clearTimeout(_.s),_.s=null)}function Pc(_){if(!Tc(_.h)&&!_.s){_.s=!0;var C=_.Ga;he||j(),Te||(he(),Te=!0),Ve.add(C,_),_.B=0}}function PT(_,C){return Ec(_.h)>=_.h.j-(_.s?1:0)?!1:_.s?(_.i=C.D.concat(_.i),!0):_.G==1||_.G==2||_.B>=(_.Va?0:_.Wa)?!1:(_.s=Sn(v(_.Ga,_,C),ch(_,_.B)),_.B++,!0)}t.Ga=function(_){if(this.s)if(this.s=null,this.G==1){if(!_){this.U=Math.floor(1e5*Math.random()),_=this.U++;const J=new Rr(this,this.j,_);let oe=this.o;if(this.S&&(oe?(oe=V(oe),$(oe,this.S)):oe=this.S),this.m!==null||this.O||(J.H=oe,oe=null),this.P)e:{for(var C=0,I=0;I<this.i.length;I++){t:{var B=this.i[I];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break t}B=void 0}if(B===void 0)break;if(C+=B,4096<C){C=I;break e}if(C===4096||I===this.i.length-1){C=I+1;break e}}C=1e3}else C=1e3;C=Ig(this,J,C),I=ti(this.I),Pt(I,"RID",_),Pt(I,"CVER",22),this.D&&Pt(I,"X-HTTP-Session-Id",this.D),Xl(this,I),oe&&(this.O?C="headers="+encodeURIComponent(String(sh(oe)))+"&"+C:this.m&&zn(I,this.m,oe)),wc(this.h,J),this.Ua&&Pt(I,"TYPE","init"),this.P?(Pt(I,"$req",C),Pt(I,"SID","null"),J.T=!0,no(J,I,null)):no(J,I,C),this.G=2}}else this.G==3&&(_?lh(this,_):this.i.length==0||Tc(this.h)||lh(this))};function lh(_,C){var I;C?I=C.l:I=_.U++;const B=ti(_.I);Pt(B,"SID",_.K),Pt(B,"RID",I),Pt(B,"AID",_.T),Xl(_,B),_.m&&_.o&&zn(B,_.m,_.o),I=new Rr(_,_.j,I,_.B+1),_.m===null&&(I.H=_.o),C&&(_.i=C.D.concat(_.i)),C=Ig(_,I,1e3),I.I=Math.round(.5*_.wa)+Math.round(.5*_.wa*Math.random()),wc(_.h,I),no(I,B,C)}function Xl(_,C){_.H&&z(_.H,function(I,B){Pt(C,B,I)}),_.l&&th({},function(I,B){Pt(C,B,I)})}function Ig(_,C,I){I=Math.min(_.i.length,I);var B=_.l?v(_.l.Na,_.l,_):null;e:{var J=_.i;let oe=-1;for(;;){const _e=["count="+I];oe==-1?0<I?(oe=J[0].g,_e.push("ofs="+oe)):oe=0:_e.push("ofs="+oe);let at=!0;for(let kn=0;kn<I;kn++){let lt=J[kn].g;const Hn=J[kn].map;if(lt-=oe,0>lt)oe=Math.max(0,J[kn].g-100),at=!1;else try{xo(Hn,_e,"req"+lt+"_")}catch{B&&B(Hn)}}if(at){B=_e.join("&");break e}}}return _=_.i.splice(0,I),C.D=_,B}function xg(_){if(!_.g&&!_.u){_.Y=1;var C=_.Fa;he||j(),Te||(he(),Te=!0),Ve.add(C,_),_.v=0}}function uh(_){return _.g||_.u||3<=_.v?!1:(_.Y++,_.u=Sn(v(_.Fa,_),ch(_,_.v)),_.v++,!0)}t.Fa=function(){if(this.u=null,Rg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var _=2*this.R;this.j.info("BP detection timer enabled: "+_),this.A=Sn(v(this.ab,this),_)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Yt(10),Rc(this),Rg(this))};function Zl(_){_.A!=null&&(u.clearTimeout(_.A),_.A=null)}function Rg(_){_.g=new Rr(_,_.j,"rpc",_.Y),_.m===null&&(_.g.H=_.o),_.g.O=0;var C=ti(_.qa);Pt(C,"RID","rpc"),Pt(C,"SID",_.K),Pt(C,"AID",_.T),Pt(C,"CI",_.F?"0":"1"),!_.F&&_.ja&&Pt(C,"TO",_.ja),Pt(C,"TYPE","xmlhttp"),Xl(_,C),_.m&&_.o&&zn(C,_.m,_.o),_.L&&(_.g.I=_.L);var I=_.g;_=_.ia,I.L=1,I.v=Gl(ti(C)),I.m=null,I.P=!0,fs(I,_)}t.Za=function(){this.C!=null&&(this.C=null,Rc(this),uh(this),Yt(19))};function Mc(_){_.C!=null&&(u.clearTimeout(_.C),_.C=null)}function Pg(_,C){var I=null;if(_.g==C){Mc(_),Zl(_),_.g=null;var B=2}else if(Zd(_.h,C))I=C.D,Pr(_.h,C),B=1;else return;if(_.G!=0){if(C.o)if(B==1){I=C.m?C.m.length:0,C=Date.now()-C.F;var J=_.B;B=va(),ht(B,new Nn(B,I)),Pc(_)}else xg(_);else if(J=C.s,J==3||J==0&&0<C.X||!(B==1&&PT(_,C)||B==2&&uh(_)))switch(I&&0<I.length&&(C=_.h,C.i=C.i.concat(I)),J){case 1:vs(_,5);break;case 4:vs(_,10);break;case 3:vs(_,6);break;default:vs(_,2)}}}function ch(_,C){let I=_.Ta+Math.floor(Math.random()*_.cb);return _.isActive()||(I*=2),I*C}function vs(_,C){if(_.j.info("Error code "+C),C==2){var I=v(_.fb,_),B=_.Xa;const J=!B;B=new An(B||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Hl(B,"https"),Gl(B),J?jl(B.toString(),I):ro(B.toString(),I)}else Yt(2);_.G=0,_.l&&_.l.sa(C),Mg(_),Cg(_)}t.fb=function(_){_?(this.j.info("Successfully pinged google.com"),Yt(2)):(this.j.info("Failed to ping google.com"),Yt(1))};function Mg(_){if(_.G=0,_.ka=[],_.l){const C=eh(_.h);(C.length!=0||_.i.length!=0)&&(A(_.ka,C),A(_.ka,_.i),_.h.i.length=0,S(_.i),_.i.length=0),_.l.ra()}}function Dg(_,C,I){var B=I instanceof An?ti(I):new An(I);if(B.g!="")C&&(B.g=C+"."+B.g),ba(B,B.s);else{var J=u.location;B=J.protocol,C=C?C+"."+J.hostname:J.hostname,J=+J.port;var oe=new An(null);B&&Hl(oe,B),C&&(oe.g=C),J&&ba(oe,J),I&&(oe.l=I),B=oe}return I=_.D,C=_.ya,I&&C&&Pt(B,I,C),Pt(B,"VER",_.la),Xl(_,B),B}function Ng(_,C,I){if(C&&!_.J)throw Error("Can't create secondary domain capable XhrIo object.");return C=_.Ca&&!_.pa?new Et(new Sa({eb:I})):new Et(_.pa),C.Ha(_.J),C}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function kg(){}t=kg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Dc(){}Dc.prototype.g=function(_,C){return new Mr(_,C)};function Mr(_,C){qt.call(this),this.g=new xc(C),this.l=_,this.h=C&&C.messageUrlParams||null,_=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(_?_["X-Client-Protocol"]="webchannel":_={"X-Client-Protocol":"webchannel"}),this.g.o=_,_=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(_?_["X-WebChannel-Content-Type"]=C.messageContentType:_={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.va&&(_?_["X-WebChannel-Client-Profile"]=C.va:_={"X-WebChannel-Client-Profile":C.va}),this.g.S=_,(_=C&&C.Sb)&&!D(_)&&(this.g.m=_),this.v=C&&C.supportsCrossDomainXhr||!1,this.u=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!D(C)&&(this.g.D=C,_=this.h,_!==null&&C in _&&(_=this.h,C in _&&delete _[C])),this.j=new Do(this)}b(Mr,qt),Mr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Mr.prototype.close=function(){ah(this.g)},Mr.prototype.o=function(_){var C=this.g;if(typeof _=="string"){var I={};I.__data__=_,_=I}else this.u&&(I={},I.__data__=Rt(_),_=I);C.i.push(new Eg(C.Ya++,_)),C.G==3&&Pc(C)},Mr.prototype.N=function(){this.g.l=null,delete this.j,ah(this.g),delete this.g,Mr.aa.N.call(this)};function Og(_){ei.call(this),_.__headers__&&(this.headers=_.__headers__,this.statusCode=_.__status__,delete _.__headers__,delete _.__status__);var C=_.__sm__;if(C){e:{for(const I in C){_=I;break e}_=void 0}(this.i=_)&&(_=this.i,C=C!==null&&_ in C?C[_]:void 0),this.data=C}else this.data=_}b(Og,ei);function Vg(){ya.call(this),this.status=1}b(Vg,ya);function Do(_){this.g=_}b(Do,kg),Do.prototype.ua=function(){ht(this.g,"a")},Do.prototype.ta=function(_){ht(this.g,new Og(_))},Do.prototype.sa=function(_){ht(this.g,new Vg)},Do.prototype.ra=function(){ht(this.g,"b")},Dc.prototype.createWebChannel=Dc.prototype.g,Mr.prototype.send=Mr.prototype.o,Mr.prototype.open=Mr.prototype.m,Mr.prototype.close=Mr.prototype.close,aB=function(){return new Dc},sB=function(){return va()},oB=bo,WS={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ea.NO_ERROR=0,Ea.TIMEOUT=8,Ea.HTTP_ERROR=6,Tv=Ea,cs.COMPLETE="complete",iB=cs,or.EventType=gn,gn.OPEN="a",gn.CLOSE="b",gn.ERROR="c",gn.MESSAGE="d",qt.prototype.listen=qt.prototype.K,wp=or,Et.prototype.listenOnce=Et.prototype.L,Et.prototype.getLastError=Et.prototype.Ka,Et.prototype.getLastErrorCode=Et.prototype.Ba,Et.prototype.getStatus=Et.prototype.Z,Et.prototype.getResponseJson=Et.prototype.Oa,Et.prototype.getResponseText=Et.prototype.oa,Et.prototype.send=Et.prototype.ea,Et.prototype.setWithCredentials=Et.prototype.Ha,rB=Et}).apply(typeof Fy<"u"?Fy:typeof self<"u"?self:typeof window<"u"?window:{});const vN="@firebase/firestore",_N="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jn.UNAUTHENTICATED=new Jn(null),Jn.GOOGLE_CREDENTIALS=new Jn("google-credentials-uid"),Jn.FIRST_PARTY=new Jn("first-party-uid"),Jn.MOCK_USER=new Jn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Id="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl=new t0("@firebase/firestore");function yf(){return hl.logLevel}function TQ(t){hl.setLogLevel(t)}function me(t,...e){if(hl.logLevel<=it.DEBUG){const n=e.map(dI);hl.debug(`Firestore (${Id}): ${t}`,...n)}}function En(t,...e){if(hl.logLevel<=it.ERROR){const n=e.map(dI);hl.error(`Firestore (${Id}): ${t}`,...n)}}function ns(t,...e){if(hl.logLevel<=it.WARN){const n=e.map(dI);hl.warn(`Firestore (${Id}): ${t}`,...n)}}function dI(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,lB(t,r,n)}function lB(t,e,n){let r=`FIRESTORE (${Id}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw En(r),new Error(r)}function ke(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||lB(e,i,r)}function EQ(t,e){t||Ie(57014,e)}function be(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends Ir{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uB{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wQ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Jn.UNAUTHENTICATED)))}shutdown(){}}class bQ{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class SQ{constructor(e){this.t=e,this.currentUser=Jn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ke(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let o=new gr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new gr,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const c=o;e.enqueueRetryable((async()=>{await c.promise,await i(this.currentUser)}))},u=c=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((c=>u(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new gr)}}),0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ke(typeof r.accessToken=="string",31837,{l:r}),new uB(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ke(e===null||typeof e=="string",2055,{h:e}),new Jn(e)}}class AQ{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Jn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class CQ{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new AQ(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Jn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class TN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class IQ{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Gt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ke(this.o===void 0,3512);const r=o=>{o.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.m;return this.m=o.token,me("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const i=o=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>i(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new TN(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(ke(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new TN(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xQ(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=xQ(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}}function We(t,e){return t<e?-1:t>e?1:0}function YS(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),o=e.charAt(r);if(i!==o)return qw(i)===qw(o)?We(i,o):qw(i)?1:-1}return We(t.length,e.length)}const RQ=55296,PQ=57343;function qw(t){const e=t.charCodeAt(0);return e>=RQ&&e<=PQ}function Hf(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}function cB(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN="__name__";class Fo{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ie(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ie(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Fo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Fo?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=Fo.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return We(e.length,n.length)}static compareSegments(e,n){const r=Fo.isNumericId(e),i=Fo.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Fo.extractNumericId(e).compare(Fo.extractNumericId(n)):YS(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return sl.fromString(e.substring(4,e.length-2))}}class ot extends Fo{construct(e,n,r){return new ot(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new de(re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new ot(n)}static emptyPath(){return new ot([])}}const MQ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xt extends Fo{construct(e,n,r){return new Xt(e,n,r)}static isValidIdentifier(e){return MQ.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===EN}static keyField(){return new Xt([EN])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new de(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new de(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new de(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else u==="`"?(s=!s,i++):u!=="."||s?(r+=u,i++):(o(),i++)}if(o(),s)throw new de(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xt(n)}static emptyPath(){return new Xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(ot.fromString(e))}static fromName(e){return new Ee(ot.fromString(e).popFirst(5))}static empty(){return new Ee(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ot.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new ot(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(t,e,n){if(!n)throw new de(re.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function fB(t,e,n,r){if(e===!0&&r===!0)throw new de(re.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function wN(t){if(!Ee.isDocumentKey(t))throw new de(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function bN(t){if(Ee.isDocumentKey(t))throw new de(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function dB(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function m0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ie(12329,{type:typeof t})}function dt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new de(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=m0(t);throw new de(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function hB(t,e){if(e<=0)throw new de(re.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(t,e){const n={typeString:t};return e&&(n.value=e),n}function Um(t,e){if(!dB(t))throw new de(re.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new de(re.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=-62135596800,AN=1e6;class wt{static now(){return wt.fromMillis(Date.now())}static fromDate(e){return wt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*AN);return new wt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new de(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new de(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<SN)throw new de(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/AN}_compareTo(e){return this.seconds===e.seconds?We(this.nanoseconds,e.nanoseconds):We(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:wt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Um(e,wt._jsonSchema))return new wt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-SN;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}wt._jsonSchemaVersion="firestore/timestamp/1.0",wt._jsonSchema={type:Pn("string",wt._jsonSchemaVersion),seconds:Pn("number"),nanoseconds:Pn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{static fromTimestamp(e){return new Le(e)}static min(){return new Le(new wt(0,0))}static max(){return new Le(new wt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf=-1;class Kv{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function JS(t){return t.fields.find((e=>e.kind===2))}function vu(t){return t.fields.filter((e=>e.kind!==2))}Kv.UNKNOWN_ID=-1;class Ev{constructor(e,n){this.fieldPath=e,this.kind=n}}class tm{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new tm(0,wi.min())}}function pB(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Le.fromTimestamp(r===1e9?new wt(n+1,0):new wt(n,r));return new wi(i,Ee.empty(),e)}function mB(t){return new wi(t.readTime,t.key,Gf)}class wi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new wi(Le.min(),Ee.empty(),Gf)}static max(){return new wi(Le.max(),Ee.empty(),Gf)}}function mI(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ee.comparator(t.documentKey,e.documentKey),n!==0?n:We(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cl(t){if(t.code!==re.FAILED_PRECONDITION||t.message!==gB)throw t;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Q(((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Q?n:Q.resolve(n)}catch(n){return Q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Q.reject(n)}static resolve(e){return new Q(((n,r)=>{n(e)}))}static reject(e){return new Q(((n,r)=>{r(e)}))}static waitFor(e){return new Q(((n,r)=>{let i=0,o=0,s=!1;e.forEach((u=>{++i,u.next((()=>{++o,s&&o===i&&n()}),(c=>r(c)))})),s=!0,o===i&&n()}))}static or(e){let n=Q.resolve(!1);for(const r of e)n=n.next((i=>i?Q.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,o)=>{r.push(n.call(this,i,o))})),this.waitFor(r)}static mapArray(e,n){return new Q(((r,i)=>{const o=e.length,s=new Array(o);let u=0;for(let c=0;c<o;c++){const f=c;n(e[f]).next((h=>{s[f]=h,++u,u===o&&r(s)}),(h=>i(h)))}}))}static doWhile(e,n){return new Q(((r,i)=>{const o=()=>{e()===!0?n().next((()=>{o()}),i):r()};o()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const di="SimpleDb";class g0{static open(e,n,r,i){try{return new g0(n,e.transaction(i,r))}catch(o){throw new Op(n,o)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new gr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Op(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=gI(r.target.error);this.S.reject(new Op(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(me(di,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new NQ(n)}}class Jo{static delete(e){return me(di,"Removing database:",e),bu(LC().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Yp())return!1;if(Jo.F())return!0;const e=rn(),n=Jo.M(e),r=0<n&&n<10,i=vB(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,Jo.M(rn())===12.2&&En("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(me(di,"Opening database:",this.name),this.db=await new Promise(((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{const s=o.target.result;n(s)},i.onblocked=()=>{r(new Op(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{const s=o.target.error;s.name==="VersionError"?r(new de(re.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new de(re.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Op(e,s))},i.onupgradeneeded=o=>{me(di,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const s=o.target.result;this.N.k(s,i.transaction,o.oldVersion,this.version).next((()=>{me(di,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const o=n==="readonly";let s=0;for(;;){++s;try{this.db=await this.L(e);const u=g0.open(this.db,e,o?"readonly":"readwrite",r),c=i(u).next((f=>(u.C(),f))).catch((f=>(u.abort(f),Q.reject(f)))).toPromise();return c.catch((()=>{})),await u.D,c}catch(u){const c=u,f=c.name!=="FirebaseError"&&s<3;if(me(di,"Transaction failed with error:",c.message,"Retrying:",f),this.close(),!f)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function vB(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class DQ{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return bu(this.U.delete())}}class Op extends de{constructor(e,n){super(re.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Il(t){return t.name==="IndexedDbTransactionError"}class NQ{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(me(di,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(me(di,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),bu(r)}add(e){return me(di,"ADD",this.store.name,e,e),bu(this.store.add(e))}get(e){return bu(this.store.get(e)).next((n=>(n===void 0&&(n=null),me(di,"GET",this.store.name,e,n),n)))}delete(e){return me(di,"DELETE",this.store.name,e),bu(this.store.delete(e))}count(){return me(di,"COUNT",this.store.name),bu(this.store.count())}J(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const o=i.getAll(r.range);return new Q(((s,u)=>{o.onerror=c=>{u(c.target.error)},o.onsuccess=c=>{s(c.target.result)}}))}{const o=this.cursor(r),s=[];return this.H(o,((u,c)=>{s.push(c)})).next((()=>s))}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new Q(((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}}))}Z(e,n){me(di,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const i=this.cursor(r);return this.H(i,((o,s,u)=>u.delete()))}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}te(e){const n=this.cursor({});return new Q(((r,i)=>{n.onerror=o=>{const s=gI(o.target.error);i(s)},n.onsuccess=o=>{const s=o.target.result;s?e(s.primaryKey,s.value).next((u=>{u?s.continue():r()})):r()}}))}H(e,n){const r=[];return new Q(((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{const u=s.target.result;if(!u)return void i();const c=new DQ(u),f=n(u.primaryKey,u.value,c);if(f instanceof Q){const h=f.catch((y=>(c.done(),Q.reject(y))));r.push(h)}c.isDone?i():c.G===null?u.continue():u.continue(c.G)}})).next((()=>Q.waitFor(r)))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function bu(t){return new Q(((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=gI(r.target.error);n(i)}}))}let CN=!1;function gI(t){const e=Jo.M(rn());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new de("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return CN||(CN=!0,setTimeout((()=>{throw r}),0)),r}}return t}const Vp="IndexBackfiller";class kQ{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){me(Vp,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const n=await this.ne.ie();me(Vp,`Documents written: ${n}`)}catch(n){Il(n)?me(Vp,"Ignoring IndexedDB error during index backfill: ",n):await Cl(n)}await this.re(6e4)}))}}class OQ{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.se(n,e)))}se(e,n){const r=new Set;let i=n,o=!0;return Q.doWhile((()=>o===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((s=>{if(s!==null&&!r.has(s))return me(Vp,`Processing collection: ${s}`),this.oe(e,s,i).next((u=>{i-=u,r.add(s)}));o=!1})))).next((()=>n-i))}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next((i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next((o=>{const s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next((()=>this._e(i,o))).next((u=>(me(Vp,`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,n,u)))).next((()=>s.size))}))))}_e(e,n){let r=e;return n.changes.forEach(((i,o)=>{const s=mB(o);mI(s,r)>0&&(r=s)})),new wi(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Yr.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const al=-1;function Fm(t){return t==null}function nm(t){return t===0&&1/t==-1/0}function _B(t){return typeof t=="number"&&Number.isInteger(t)&&!nm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv="";function xr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=IN(e)),e=VQ(t.get(n),e);return IN(e)}function VQ(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case jv:n+="";break;default:n+=o}}return n}function IN(t){return t+jv+""}function jo(t){const e=t.length;if(ke(e>=2,64408,{path:t}),e===2)return ke(t.charAt(0)===jv&&t.charAt(1)==="",56145,{path:t}),ot.emptyPath();const n=e-2,r=[];let i="";for(let o=0;o<e;){const s=t.indexOf(jv,o);switch((s<0||s>n)&&Ie(50515,{path:t}),t.charAt(s+1)){case"":const u=t.substring(o,s);let c;i.length===0?c=u:(i+=u,c=i,i=""),r.push(c);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:Ie(61167,{path:t})}o=s+2}return new ot(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u="remoteDocuments",Bm="owner",uf="owner",rm="mutationQueues",LQ="userId",ao="mutations",xN="batchId",Ru="userMutationsIndex",RN=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wv(t,e){return[t,xr(e)]}function TB(t,e,n){return[t,xr(e),n]}const UQ={},Kf="documentMutations",Wv="remoteDocumentsV14",FQ=["prefixPath","collectionGroup","readTime","documentId"],bv="documentKeyIndex",BQ=["prefixPath","collectionGroup","documentId"],EB="collectionGroupIndex",qQ=["collectionGroup","readTime","prefixPath","documentId"],im="remoteDocumentGlobal",QS="remoteDocumentGlobalKey",jf="targets",wB="queryTargetsIndex",$Q=["canonicalId","targetId"],Wf="targetDocuments",zQ=["targetId","path"],yI="documentTargetsIndex",HQ=["path","targetId"],Yv="targetGlobalKey",Lu="targetGlobal",om="collectionParents",GQ=["collectionId","parent"],Yf="clientMetadata",KQ="clientId",y0="bundles",jQ="bundleId",v0="namedQueries",WQ="name",vI="indexConfiguration",YQ="indexId",XS="collectionGroupIndex",JQ="collectionGroup",Lp="indexState",QQ=["indexId","uid"],bB="sequenceNumberIndex",XQ=["uid","sequenceNumber"],Up="indexEntries",ZQ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],SB="documentKeyIndex",eX=["indexId","uid","orderedDocumentKey"],_0="documentOverlays",tX=["userId","collectionPath","documentId"],ZS="collectionPathOverlayIndex",nX=["userId","collectionPath","largestBatchId"],AB="collectionGroupOverlayIndex",rX=["userId","collectionGroup","largestBatchId"],_I="globals",iX="name",CB=[rm,ao,Kf,_u,jf,Bm,Lu,Wf,Yf,im,om,y0,v0],oX=[...CB,_0],IB=[rm,ao,Kf,Wv,jf,Bm,Lu,Wf,Yf,im,om,y0,v0,_0],xB=IB,TI=[...xB,vI,Lp,Up],sX=TI,RB=[...TI,_I],aX=RB;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA extends yB{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Bn(t,e){const n=be(t);return Jo.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function xl(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function PB(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,n){this.comparator=e,this.root=n||dr.EMPTY}insert(e,n){return new Bt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,dr.BLACK,null,null))}remove(e){return new Bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new By(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new By(this.root,e,this.comparator,!1)}getReverseIterator(){return new By(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new By(this.root,e,this.comparator,!0)}}class By{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dr{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??dr.RED,this.left=i??dr.EMPTY,this.right=o??dr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new dr(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return dr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return dr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}dr.EMPTY=null,dr.RED=!0,dr.BLACK=!1;dr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new dr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.comparator=e,this.data=new Bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new MN(this.data.getIterator())}getIteratorFrom(e){return new MN(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof It)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new It(this.comparator);return n.data=e,n}}class MN{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function cf(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e){this.fields=e,e.sort(Xt.comparator)}static empty(){return new Jr([])}unionWith(e){let n=new It(Xt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Jr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Hf(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MB extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lX(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new MB("Invalid base64 string: "+o):o}})(e);return new fn(n)}static fromUint8Array(e){const n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new fn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return We(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fn.EMPTY_BYTE_STRING=new fn("");const uX=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Js(t){if(ke(!!t,39018),typeof t=="string"){let e=0;const n=uX.exec(t);if(ke(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Qt(t.seconds),nanos:Qt(t.nanos)}}function Qt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Qs(t){return typeof t=="string"?fn.fromBase64String(t):fn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB="server_timestamp",NB="__type__",kB="__previous_value__",OB="__local_write_time__";function T0(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[NB])==null?void 0:r.stringValue)===DB}function E0(t){const e=t.mapValue.fields[kB];return T0(e)?E0(e):e}function sm(t){const e=Js(t.mapValue.fields[OB].timestampValue);return new wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cX{constructor(e,n,r,i,o,s,u,c,f,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=f,this.isUsingEmulator=h}}const Jv="(default)";class pl{constructor(e,n){this.projectId=e,this.database=n||Jv}static empty(){return new pl("","")}get isDefaultDatabase(){return this.database===Jv}isEqual(e){return e instanceof pl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI="__type__",VB="__max__",tl={mapValue:{fields:{__type__:{stringValue:VB}}}},wI="__vector__",Jf="value",Sv={nullValue:"NULL_VALUE"};function ml(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?T0(t)?4:LB(t)?9007199254740991:w0(t)?10:11:Ie(28295,{value:t})}function rs(t,e){if(t===e)return!0;const n=ml(t);if(n!==ml(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return sm(t).isEqual(sm(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Js(i.timestampValue),u=Js(o.timestampValue);return s.seconds===u.seconds&&s.nanos===u.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return Qs(i.bytesValue).isEqual(Qs(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return Qt(i.geoPointValue.latitude)===Qt(o.geoPointValue.latitude)&&Qt(i.geoPointValue.longitude)===Qt(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Qt(i.integerValue)===Qt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=Qt(i.doubleValue),u=Qt(o.doubleValue);return s===u?nm(s)===nm(u):isNaN(s)&&isNaN(u)}return!1})(t,e);case 9:return Hf(t.arrayValue.values||[],e.arrayValue.values||[],rs);case 10:case 11:return(function(i,o){const s=i.mapValue.fields||{},u=o.mapValue.fields||{};if(PN(s)!==PN(u))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(u[c]===void 0||!rs(s[c],u[c])))return!1;return!0})(t,e);default:return Ie(52216,{left:t})}}function am(t,e){return(t.values||[]).find((n=>rs(n,e)))!==void 0}function gl(t,e){if(t===e)return 0;const n=ml(t),r=ml(e);if(n!==r)return We(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return We(t.booleanValue,e.booleanValue);case 2:return(function(o,s){const u=Qt(o.integerValue||o.doubleValue),c=Qt(s.integerValue||s.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1})(t,e);case 3:return DN(t.timestampValue,e.timestampValue);case 4:return DN(sm(t),sm(e));case 5:return YS(t.stringValue,e.stringValue);case 6:return(function(o,s){const u=Qs(o),c=Qs(s);return u.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){const u=o.split("/"),c=s.split("/");for(let f=0;f<u.length&&f<c.length;f++){const h=We(u[f],c[f]);if(h!==0)return h}return We(u.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){const u=We(Qt(o.latitude),Qt(s.latitude));return u!==0?u:We(Qt(o.longitude),Qt(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return NN(t.arrayValue,e.arrayValue);case 10:return(function(o,s){var v,E,b,S;const u=o.fields||{},c=s.fields||{},f=(v=u[Jf])==null?void 0:v.arrayValue,h=(E=c[Jf])==null?void 0:E.arrayValue,y=We(((b=f==null?void 0:f.values)==null?void 0:b.length)||0,((S=h==null?void 0:h.values)==null?void 0:S.length)||0);return y!==0?y:NN(f,h)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===tl.mapValue&&s===tl.mapValue)return 0;if(o===tl.mapValue)return 1;if(s===tl.mapValue)return-1;const u=o.fields||{},c=Object.keys(u),f=s.fields||{},h=Object.keys(f);c.sort(),h.sort();for(let y=0;y<c.length&&y<h.length;++y){const v=YS(c[y],h[y]);if(v!==0)return v;const E=gl(u[c[y]],f[h[y]]);if(E!==0)return E}return We(c.length,h.length)})(t.mapValue,e.mapValue);default:throw Ie(23264,{he:n})}}function DN(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return We(t,e);const n=Js(t),r=Js(e),i=We(n.seconds,r.seconds);return i!==0?i:We(n.nanos,r.nanos)}function NN(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=gl(n[i],r[i]);if(o)return o}return We(n.length,r.length)}function Qf(t){return tA(t)}function tA(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Js(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Qs(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Ee.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=tA(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${tA(n.fields[s])}`;return i+"}"})(t.mapValue):Ie(61005,{value:t})}function Av(t){switch(ml(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=E0(t);return e?16+Av(e):16;case 5:return 2*t.stringValue.length;case 6:return Qs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,o)=>i+Av(o)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return xl(r.fields,((o,s)=>{i+=o.length+Av(s)})),i})(t.mapValue);default:throw Ie(13486,{value:t})}}function Gu(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function nA(t){return!!t&&"integerValue"in t}function lm(t){return!!t&&"arrayValue"in t}function kN(t){return!!t&&"nullValue"in t}function ON(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Cv(t){return!!t&&"mapValue"in t}function w0(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[EI])==null?void 0:r.stringValue)===wI}function Fp(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return xl(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Fp(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Fp(t.arrayValue.values[n]);return e}return{...t}}function LB(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===VB}const UB={mapValue:{fields:{[EI]:{stringValue:wI},[Jf]:{arrayValue:{}}}}};function fX(t){return"nullValue"in t?Sv:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Gu(pl.empty(),Ee.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?w0(t)?UB:{mapValue:{}}:Ie(35942,{value:t})}function dX(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Gu(pl.empty(),Ee.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?UB:"mapValue"in t?w0(t)?{mapValue:{}}:tl:Ie(61959,{value:t})}function VN(t,e){const n=gl(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function LN(t,e){const n=gl(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this.value=e}static empty(){return new pr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Cv(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fp(n)}setAll(e){let n=Xt.emptyPath(),r={},i=[];e.forEach(((s,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=u.popLast()}s?r[u.lastSegment()]=Fp(s):i.push(u.lastSegment())}));const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());Cv(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return rs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Cv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){xl(n,((i,o)=>e[i]=o));for(const i of r)delete e[i]}clone(){return new pr(Fp(this.value))}}function FB(t){const e=[];return xl(t.fields,((n,r)=>{const i=new Xt([n]);if(Cv(r)){const o=FB(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)})),new Jr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e,n,r,i,o,s,u){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=u}static newInvalidDocument(e){return new Ht(e,0,Le.min(),Le.min(),Le.min(),pr.empty(),0)}static newFoundDocument(e,n,r,i){return new Ht(e,1,n,Le.min(),r,i,0)}static newNoDocument(e,n){return new Ht(e,2,n,Le.min(),Le.min(),pr.empty(),0)}static newUnknownDocument(e,n){return new Ht(e,3,n,Le.min(),Le.min(),pr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,n){this.position=e,this.inclusive=n}}function UN(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?r=Ee.comparator(Ee.fromName(s.referenceValue),n.key):r=gl(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function FN(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!rs(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,n="asc"){this.field=e,this.dir=n}}function hX(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BB{}class st extends BB{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new pX(e,n,r):n==="array-contains"?new yX(e,r):n==="in"?new KB(e,r):n==="not-in"?new vX(e,r):n==="array-contains-any"?new _X(e,r):new st(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new mX(e,r):new gX(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(gl(n,this.value)):n!==null&&ml(this.value)===ml(n)&&this.matchesComparison(gl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ct extends BB{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ct(e,n)}matches(e){return Xf(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Xf(t){return t.op==="and"}function rA(t){return t.op==="or"}function bI(t){return qB(t)&&Xf(t)}function qB(t){for(const e of t.filters)if(e instanceof Ct)return!1;return!0}function iA(t){if(t instanceof st)return t.field.canonicalString()+t.op.toString()+Qf(t.value);if(bI(t))return t.filters.map((e=>iA(e))).join(",");{const e=t.filters.map((n=>iA(n))).join(",");return`${t.op}(${e})`}}function $B(t,e){return t instanceof st?(function(r,i){return i instanceof st&&r.op===i.op&&r.field.isEqual(i.field)&&rs(r.value,i.value)})(t,e):t instanceof Ct?(function(r,i){return i instanceof Ct&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((o,s,u)=>o&&$B(s,i.filters[u])),!0):!1})(t,e):void Ie(19439)}function zB(t,e){const n=t.filters.concat(e);return Ct.create(n,t.op)}function HB(t){return t instanceof st?(function(n){return`${n.field.canonicalString()} ${n.op} ${Qf(n.value)}`})(t):t instanceof Ct?(function(n){return n.op.toString()+" {"+n.getFilters().map(HB).join(" ,")+"}"})(t):"Filter"}class pX extends st{constructor(e,n,r){super(e,n,r),this.key=Ee.fromName(r.referenceValue)}matches(e){const n=Ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class mX extends st{constructor(e,n){super(e,"in",n),this.keys=GB("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class gX extends st{constructor(e,n){super(e,"not-in",n),this.keys=GB("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function GB(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((r=>Ee.fromName(r.referenceValue)))}class yX extends st{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return lm(n)&&am(n.arrayValue,this.value)}}class KB extends st{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&am(this.value.arrayValue,n)}}class vX extends st{constructor(e,n){super(e,"not-in",n)}matches(e){if(am(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!am(this.value.arrayValue,n)}}class _X extends st{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!lm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>am(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TX{constructor(e,n=null,r=[],i=[],o=null,s=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=u,this.Te=null}}function oA(t,e=null,n=[],r=[],i=null,o=null,s=null){return new TX(t,e,n,r,i,o,s)}function Ku(t){const e=be(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>iA(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),Fm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Qf(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Qf(r))).join(",")),e.Te=n}return e.Te}function qm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!hX(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!$B(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!FN(t.startAt,e.startAt)&&FN(t.endAt,e.endAt)}function Qv(t){return Ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Xv(t,e){return t.filters.filter((n=>n instanceof st&&n.field.isEqual(e)))}function BN(t,e,n){let r=Sv,i=!0;for(const o of Xv(t,e)){let s=Sv,u=!0;switch(o.op){case"<":case"<=":s=fX(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,u=!1;break;case"!=":case"not-in":s=Sv}VN({value:r,inclusive:i},{value:s,inclusive:u})<0&&(r=s,i=u)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const s=n.position[o];VN({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function qN(t,e,n){let r=tl,i=!0;for(const o of Xv(t,e)){let s=tl,u=!0;switch(o.op){case">=":case">":s=dX(o.value),u=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,u=!1;break;case"!=":case"not-in":s=tl}LN({value:r,inclusive:i},{value:s,inclusive:u})>0&&(r=s,i=u)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const s=n.position[o];LN({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,n=null,r=[],i=[],o=null,s="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=u,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function jB(t,e,n,r,i,o,s,u){return new oa(t,e,n,r,i,o,s,u)}function xd(t){return new oa(t)}function $N(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function SI(t){return t.collectionGroup!==null}function Pf(t){const e=be(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let u=new It(Xt.comparator);return s.filters.forEach((c=>{c.getFlattenedFilters().forEach((f=>{f.isInequality()&&(u=u.add(f.field))}))})),u})(e).forEach((o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new um(o,r))})),n.has(Xt.keyField().canonicalString())||e.Ie.push(new um(Xt.keyField(),r))}return e.Ie}function Br(t){const e=be(t);return e.Ee||(e.Ee=EX(e,Pf(t))),e.Ee}function EX(t,e){if(t.limitType==="F")return oA(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const o=i.dir==="desc"?"asc":"desc";return new um(i.field,o)}));const n=t.endAt?new yl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new yl(t.startAt.position,t.startAt.inclusive):null;return oA(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function sA(t,e){const n=t.filters.concat([e]);return new oa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Zv(t,e,n){return new oa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $m(t,e){return qm(Br(t),Br(e))&&t.limitType===e.limitType}function WB(t){return`${Ku(Br(t))}|lt:${t.limitType}`}function vf(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>HB(i))).join(", ")}]`),Fm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>Qf(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>Qf(i))).join(",")),`Target(${r})`})(Br(t))}; limitType=${t.limitType})`}function zm(t,e){return e.isFoundDocument()&&(function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Ee.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(const o of Pf(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,u,c){const f=UN(s,u,c);return s.inclusive?f<=0:f<0})(r.startAt,Pf(r),i)||r.endAt&&!(function(s,u,c){const f=UN(s,u,c);return s.inclusive?f>=0:f>0})(r.endAt,Pf(r),i))})(t,e)}function YB(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function JB(t){return(e,n)=>{let r=!1;for(const i of Pf(t)){const o=wX(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function wX(t,e,n){const r=t.field.isKeyField()?Ee.comparator(e.key,n.key):(function(o,s,u){const c=s.data.field(o),f=u.data.field(o);return c!==null&&f!==null?gl(c,f):Ie(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ie(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){xl(this.inner,((n,r)=>{for(const[i,o]of r)e(i,o)}))}isEmpty(){return PB(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bX=new Bt(Ee.comparator);function Qr(){return bX}const QB=new Bt(Ee.comparator);function bp(...t){let e=QB;for(const n of t)e=e.insert(n.key,n);return e}function XB(t){let e=QB;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Wo(){return Bp()}function ZB(){return Bp()}function Bp(){return new sa((t=>t.toString()),((t,e)=>t.isEqual(e)))}const SX=new Bt(Ee.comparator),AX=new It(Ee.comparator);function Je(...t){let e=AX;for(const n of t)e=e.add(n);return e}const CX=new It(We);function AI(){return CX}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nm(e)?"-0":e}}function eq(t){return{integerValue:""+t}}function tq(t,e){return _B(e)?eq(e):CI(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(){this._=void 0}}function IX(t,e,n){return t instanceof Zf?(function(i,o){const s={fields:{[NB]:{stringValue:DB},[OB]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&T0(o)&&(o=E0(o)),o&&(s.fields[kB]=o),{mapValue:s}})(n,e):t instanceof ju?rq(t,e):t instanceof Wu?iq(t,e):(function(i,o){const s=nq(i,o),u=zN(s)+zN(i.Ae);return nA(s)&&nA(i.Ae)?eq(u):CI(i.serializer,u)})(t,e)}function xX(t,e,n){return t instanceof ju?rq(t,e):t instanceof Wu?iq(t,e):n}function nq(t,e){return t instanceof ed?(function(r){return nA(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class Zf extends b0{}class ju extends b0{constructor(e){super(),this.elements=e}}function rq(t,e){const n=oq(e);for(const r of t.elements)n.some((i=>rs(i,r)))||n.push(r);return{arrayValue:{values:n}}}class Wu extends b0{constructor(e){super(),this.elements=e}}function iq(t,e){let n=oq(e);for(const r of t.elements)n=n.filter((i=>!rs(i,r)));return{arrayValue:{values:n}}}class ed extends b0{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function zN(t){return Qt(t.integerValue||t.doubleValue)}function oq(t){return lm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,n){this.field=e,this.transform=n}}function RX(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof ju&&i instanceof ju||r instanceof Wu&&i instanceof Wu?Hf(r.elements,i.elements,rs):r instanceof ed&&i instanceof ed?rs(r.Ae,i.Ae):r instanceof Zf&&i instanceof Zf})(t.transform,e.transform)}class PX{constructor(e,n){this.version=e,this.transformResults=n}}class Zt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Zt}static exists(e){return new Zt(void 0,e)}static updateTime(e){return new Zt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Iv(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class S0{}function sq(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Pd(t.key,Zt.none()):new Rd(t.key,t.data,Zt.none());{const n=t.data,r=pr.empty();let i=new It(Xt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new aa(t.key,r,new Jr(i.toArray()),Zt.none())}}function MX(t,e,n){t instanceof Rd?(function(i,o,s){const u=i.value.clone(),c=GN(i.fieldTransforms,o,s.transformResults);u.setAll(c),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(t,e,n):t instanceof aa?(function(i,o,s){if(!Iv(i.precondition,o))return void o.convertToUnknownDocument(s.version);const u=GN(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(aq(i)),c.setAll(u),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function qp(t,e,n,r){return t instanceof Rd?(function(o,s,u,c){if(!Iv(o.precondition,s))return u;const f=o.value.clone(),h=KN(o.fieldTransforms,c,s);return f.setAll(h),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null})(t,e,n,r):t instanceof aa?(function(o,s,u,c){if(!Iv(o.precondition,s))return u;const f=KN(o.fieldTransforms,c,s),h=s.data;return h.setAll(aq(o)),h.setAll(f),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((y=>y.field)))})(t,e,n,r):(function(o,s,u){return Iv(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):u})(t,e,n)}function DX(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=nq(r.transform,i||null);o!=null&&(n===null&&(n=pr.empty()),n.set(r.field,o))}return n||null}function HN(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Hf(r,i,((o,s)=>RX(o,s)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Rd extends S0{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class aa extends S0{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function aq(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function GN(t,e,n){const r=new Map;ke(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,u=e.data.field(o.field);r.set(o.field,xX(s,u,n[i]))}return r}function KN(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,IX(o,s,e))}return r}class Pd extends S0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class II extends S0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&MX(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=qp(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=qp(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=ZB();return this.mutations.forEach((i=>{const o=e.get(i.key),s=o.overlayedDocument;let u=this.applyToLocalView(s,o.mutatedFields);u=n.has(i.key)?null:u;const c=sq(s,u);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Le.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Je())}isEqual(e){return this.batchId===e.batchId&&Hf(this.mutations,e.mutations,((n,r)=>HN(n,r)))&&Hf(this.baseMutations,e.baseMutations,((n,r)=>HN(n,r)))}}class RI{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ke(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return SX})();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new RI(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NX{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xn,ct;function lq(t){switch(t){case re.OK:return Ie(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Ie(15467,{code:t})}}function uq(t){if(t===void 0)return En("GRPC error has no .code"),re.UNKNOWN;switch(t){case xn.OK:return re.OK;case xn.CANCELLED:return re.CANCELLED;case xn.UNKNOWN:return re.UNKNOWN;case xn.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case xn.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case xn.INTERNAL:return re.INTERNAL;case xn.UNAVAILABLE:return re.UNAVAILABLE;case xn.UNAUTHENTICATED:return re.UNAUTHENTICATED;case xn.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case xn.NOT_FOUND:return re.NOT_FOUND;case xn.ALREADY_EXISTS:return re.ALREADY_EXISTS;case xn.PERMISSION_DENIED:return re.PERMISSION_DENIED;case xn.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case xn.ABORTED:return re.ABORTED;case xn.OUT_OF_RANGE:return re.OUT_OF_RANGE;case xn.UNIMPLEMENTED:return re.UNIMPLEMENTED;case xn.DATA_LOSS:return re.DATA_LOSS;default:return Ie(39323,{code:t})}}(ct=xn||(xn={}))[ct.OK=0]="OK",ct[ct.CANCELLED=1]="CANCELLED",ct[ct.UNKNOWN=2]="UNKNOWN",ct[ct.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ct[ct.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ct[ct.NOT_FOUND=5]="NOT_FOUND",ct[ct.ALREADY_EXISTS=6]="ALREADY_EXISTS",ct[ct.PERMISSION_DENIED=7]="PERMISSION_DENIED",ct[ct.UNAUTHENTICATED=16]="UNAUTHENTICATED",ct[ct.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ct[ct.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ct[ct.ABORTED=10]="ABORTED",ct[ct.OUT_OF_RANGE=11]="OUT_OF_RANGE",ct[ct.UNIMPLEMENTED=12]="UNIMPLEMENTED",ct[ct.INTERNAL=13]="INTERNAL",ct[ct.UNAVAILABLE=14]="UNAVAILABLE",ct[ct.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cq(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kX=new sl([4294967295,4294967295],0);function jN(t){const e=cq().encode(t),n=new nB;return n.update(e),new Uint8Array(n.digest())}function WN(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new sl([n,r],0),new sl([i,o],0)]}class MI{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Sp(`Invalid padding: ${n}`);if(r<0)throw new Sp(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Sp(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Sp(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=sl.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(sl.fromNumber(r)));return i.compare(kX)===1&&(i=new sl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=jN(e),[r,i]=WN(n);for(let o=0;o<this.hashCount;o++){const s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new MI(o,i,n);return r.forEach((u=>s.insert(u))),s}insert(e){if(this.ge===0)return;const n=jN(e),[r,i]=WN(n);for(let o=0;o<this.hashCount;o++){const s=this.ye(r,i,o);this.Se(s)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Sp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Km.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Gm(Le.min(),i,new Bt(We),Qr(),Je())}}class Km{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Km(r,n,Je(),Je(),Je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class fq{constructor(e,n){this.targetId=e,this.Ce=n}}class dq{constructor(e,n,r=fn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class YN{constructor(){this.ve=0,this.Fe=JN(),this.Me=fn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Je(),n=Je(),r=Je();return this.Fe.forEach(((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ie(38017,{changeType:o})}})),new Km(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=JN()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ke(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class OX{constructor(e){this.Ge=e,this.ze=new Map,this.je=Qr(),this.Je=qy(),this.He=qy(),this.Ye=new Bt(We)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Ie(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const o=i.target;if(Qv(o))if(r===0){const s=new Ee(o.path);this.et(n,s,Ht.newNoDocument(s,Le.min()))}else ke(r===1,20013,{expectedCount:r});else{const s=this._t(n);if(s!==r){const u=this.ut(e),c=u?this.ct(u,e,s):1;if(c!==0){this.it(n);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,u;try{s=Qs(r).toUint8Array()}catch(c){if(c instanceof MB)return ns("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new MI(s,i,o)}catch(c){return ns(c instanceof Sp?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.ge===0?null:u}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((o=>{const s=this.Ge.ht(),u=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(n,o,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((o,s)=>{const u=this.ot(s);if(u){if(o.current&&Qv(u.target)){const c=new Ee(u.target.path);this.It(c).has(s)||this.Et(s,c)||this.et(s,c,Ht.newNoDocument(c,e))}o.Be&&(n.set(s,o.ke()),o.qe())}}));let r=Je();this.He.forEach(((o,s)=>{let u=!0;s.forEachWhile((c=>{const f=this.ot(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(r=r.add(o))})),this.je.forEach(((o,s)=>s.setReadTime(e)));const i=new Gm(e,n,this.Ye,this.je,r);return this.je=Qr(),this.Je=qy(),this.He=qy(),this.Ye=new Bt(We),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new YN,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new It(We),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new It(We),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||me("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new YN),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function qy(){return new Bt(Ee.comparator)}function JN(){return new Bt(Ee.comparator)}const VX={asc:"ASCENDING",desc:"DESCENDING"},LX={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},UX={and:"AND",or:"OR"};class FX{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function aA(t,e){return t.useProto3Json||Fm(e)?e:{value:e}}function td(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hq(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function BX(t,e){return td(t,e.toTimestamp())}function wn(t){return ke(!!t,49232),Le.fromTimestamp((function(n){const r=Js(n);return new wt(r.seconds,r.nanos)})(t))}function DI(t,e){return lA(t,e).canonicalString()}function lA(t,e){const n=(function(i){return new ot(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function pq(t){const e=ot.fromString(t);return ke(Sq(e),10190,{key:e.toString()}),e}function cm(t,e){return DI(t.databaseId,e.path)}function Qo(t,e){const n=pq(e);if(n.get(1)!==t.databaseId.projectId)throw new de(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new de(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ee(yq(n))}function mq(t,e){return DI(t.databaseId,e)}function gq(t){const e=pq(t);return e.length===4?ot.emptyPath():yq(e)}function uA(t){return new ot(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yq(t){return ke(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function QN(t,e,n){return{name:cm(t,e),fields:n.value.mapValue.fields}}function vq(t,e,n){const r=Qo(t,e.name),i=wn(e.updateTime),o=e.createTime?wn(e.createTime):Le.min(),s=new pr({mapValue:{fields:e.fields}}),u=Ht.newFoundDocument(r,i,o,s);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function qX(t,e){return"found"in e?(function(r,i){ke(!!i.found,43571),i.found.name,i.found.updateTime;const o=Qo(r,i.found.name),s=wn(i.found.updateTime),u=i.found.createTime?wn(i.found.createTime):Le.min(),c=new pr({mapValue:{fields:i.found.fields}});return Ht.newFoundDocument(o,s,u,c)})(t,e):"missing"in e?(function(r,i){ke(!!i.missing,3894),ke(!!i.readTime,22933);const o=Qo(r,i.missing),s=wn(i.readTime);return Ht.newNoDocument(o,s)})(t,e):Ie(7234,{result:e})}function $X(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Ie(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(f,h){return f.useProto3Json?(ke(h===void 0||typeof h=="string",58123),fn.fromBase64String(h||"")):(ke(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),fn.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,u=s&&(function(f){const h=f.code===void 0?re.UNKNOWN:uq(f.code);return new de(h,f.message||"")})(s);n=new dq(r,i,o,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Qo(t,r.document.name),o=wn(r.document.updateTime),s=r.document.createTime?wn(r.document.createTime):Le.min(),u=new pr({mapValue:{fields:r.document.fields}}),c=Ht.newFoundDocument(i,o,s,u),f=r.targetIds||[],h=r.removedTargetIds||[];n=new xv(f,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Qo(t,r.document),o=r.readTime?wn(r.readTime):Le.min(),s=Ht.newNoDocument(i,o),u=r.removedTargetIds||[];n=new xv([],u,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Qo(t,r.document),o=r.removedTargetIds||[];n=new xv([],o,i,null)}else{if(!("filter"in e))return Ie(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new NX(i,o),u=r.targetId;n=new fq(u,s)}}return n}function fm(t,e){let n;if(e instanceof Rd)n={update:QN(t,e.key,e.value)};else if(e instanceof Pd)n={delete:cm(t,e.key)};else if(e instanceof aa)n={update:QN(t,e.key,e.data),updateMask:WX(e.fieldMask)};else{if(!(e instanceof II))return Ie(16599,{Vt:e.type});n={verify:cm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(o,s){const u=s.transform;if(u instanceof Zf)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof ju)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Wu)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof ed)return{fieldPath:s.field.canonicalString(),increment:u.Ae};throw Ie(20930,{transform:s.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:BX(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ie(27497)})(t,e.precondition)),n}function cA(t,e){const n=e.currentDocument?(function(o){return o.updateTime!==void 0?Zt.updateTime(wn(o.updateTime)):o.exists!==void 0?Zt.exists(o.exists):Zt.none()})(e.currentDocument):Zt.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(s,u){let c=null;if("setToServerValue"in u)ke(u.setToServerValue==="REQUEST_TIME",16630,{proto:u}),c=new Zf;else if("appendMissingElements"in u){const h=u.appendMissingElements.values||[];c=new ju(h)}else if("removeAllFromArray"in u){const h=u.removeAllFromArray.values||[];c=new Wu(h)}else"increment"in u?c=new ed(s,u.increment):Ie(16584,{proto:u});const f=Xt.fromServerFormat(u.fieldPath);return new Hm(f,c)})(t,i))):[];if(e.update){e.update.name;const i=Qo(t,e.update.name),o=new pr({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=(function(c){const f=c.fieldPaths||[];return new Jr(f.map((h=>Xt.fromServerFormat(h))))})(e.updateMask);return new aa(i,o,s,n,r)}return new Rd(i,o,n,r)}if(e.delete){const i=Qo(t,e.delete);return new Pd(i,n)}if(e.verify){const i=Qo(t,e.verify);return new II(i,n)}return Ie(1463,{proto:e})}function zX(t,e){return t&&t.length>0?(ke(e!==void 0,14353),t.map((n=>(function(i,o){let s=i.updateTime?wn(i.updateTime):wn(o);return s.isEqual(Le.min())&&(s=wn(o)),new PX(s,i.transformResults||[])})(n,e)))):[]}function _q(t,e){return{documents:[mq(t,e.path)]}}function Tq(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=mq(t,i);const o=(function(f){if(f.length!==0)return bq(Ct.create(f,"and"))})(e.filters);o&&(n.structuredQuery.where=o);const s=(function(f){if(f.length!==0)return f.map((h=>(function(v){return{field:_f(v.field),direction:GX(v.dir)}})(h)))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);const u=aA(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:n,parent:i}}function Eq(t){let e=gq(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ke(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=(function(y){const v=wq(y);return v instanceof Ct&&bI(v)?v.getFilters():[v]})(n.where));let s=[];n.orderBy&&(s=(function(y){return y.map((v=>(function(b){return new um(Tf(b.field),(function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(v)))})(n.orderBy));let u=null;n.limit&&(u=(function(y){let v;return v=typeof y=="object"?y.value:y,Fm(v)?null:v})(n.limit));let c=null;n.startAt&&(c=(function(y){const v=!!y.before,E=y.values||[];return new yl(E,v)})(n.startAt));let f=null;return n.endAt&&(f=(function(y){const v=!y.before,E=y.values||[];return new yl(E,v)})(n.endAt)),jB(e,i,s,o,u,"F",c,f)}function HX(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function wq(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Tf(n.unaryFilter.field);return st.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Tf(n.unaryFilter.field);return st.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Tf(n.unaryFilter.field);return st.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Tf(n.unaryFilter.field);return st.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}})(t):t.fieldFilter!==void 0?(function(n){return st.create(Tf(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Ct.create(n.compositeFilter.filters.map((r=>wq(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}})(n.compositeFilter.op))})(t):Ie(30097,{filter:t})}function GX(t){return VX[t]}function KX(t){return LX[t]}function jX(t){return UX[t]}function _f(t){return{fieldPath:t.canonicalString()}}function Tf(t){return Xt.fromServerFormat(t.fieldPath)}function bq(t){return t instanceof st?(function(n){if(n.op==="=="){if(ON(n.value))return{unaryFilter:{field:_f(n.field),op:"IS_NAN"}};if(kN(n.value))return{unaryFilter:{field:_f(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ON(n.value))return{unaryFilter:{field:_f(n.field),op:"IS_NOT_NAN"}};if(kN(n.value))return{unaryFilter:{field:_f(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_f(n.field),op:KX(n.op),value:n.value}}})(t):t instanceof Ct?(function(n){const r=n.getFilters().map((i=>bq(i)));return r.length===1?r[0]:{compositeFilter:{op:jX(n.op),filters:r}}})(t):Ie(54877,{filter:t})}function WX(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Sq(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,n,r,i,o=Le.min(),s=Le.min(),u=fn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new Ls(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ls(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ls(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ls(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aq{constructor(e){this.yt=e}}function YX(t,e){let n;if(e.document)n=vq(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ee.fromSegments(e.noDocument.path),i=Ju(e.noDocument.readTime);n=Ht.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ie(56709);{const r=Ee.fromSegments(e.unknownDocument.path),i=Ju(e.unknownDocument.version);n=Ht.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime((function(i){const o=new wt(i[0],i[1]);return Le.fromTimestamp(o)})(e.readTime)),n}function XN(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:e_(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(o,s){return{name:cm(o,s.key),fields:s.data.value.mapValue.fields,updateTime:td(o,s.version.toTimestamp()),createTime:td(o,s.createTime.toTimestamp())}})(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Yu(e.version)};else{if(!e.isUnknownDocument())return Ie(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Yu(e.version)}}return r}function e_(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Yu(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ju(t){const e=new wt(t.seconds,t.nanoseconds);return Le.fromTimestamp(e)}function Su(t,e){const n=(e.baseMutations||[]).map((o=>cA(t.yt,o)));for(let o=0;o<e.mutations.length-1;++o){const s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const u=e.mutations[o+1];s.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const r=e.mutations.map((o=>cA(t.yt,o))),i=wt.fromMillis(e.localWriteTimeMs);return new xI(e.batchId,i,n,r)}function Ap(t){const e=Ju(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Ju(t.lastLimboFreeSnapshotVersion):Le.min();let r;return r=(function(o){return o.documents!==void 0})(t.query)?(function(o){const s=o.documents.length;return ke(s===1,1966,{count:s}),Br(xd(gq(o.documents[0])))})(t.query):(function(o){return Br(Eq(o))})(t.query),new Ls(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,fn.fromBase64String(t.resumeToken))}function Cq(t,e){const n=Yu(e.snapshotVersion),r=Yu(e.lastLimboFreeSnapshotVersion);let i;i=Qv(e.target)?_q(t.yt,e.target):Tq(t.yt,e.target).ft;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ku(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function NI(t){const e=Eq({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Zv(e,e.limit,"L"):e}function $w(t,e){return new PI(e.largestBatchId,cA(t.yt,e.overlayMutation))}function ZN(t,e){const n=e.path.lastSegment();return[t,xr(e.path.popLast()),n]}function ek(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Yu(r.readTime),documentKey:xr(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JX{getBundleMetadata(e,n){return tk(e).get(n).next((r=>{if(r)return(function(o){return{id:o.bundleId,createTime:Ju(o.createTime),version:o.version}})(r)}))}saveBundleMetadata(e,n){return tk(e).put((function(i){return{bundleId:i.id,createTime:Yu(wn(i.createTime)),version:i.version}})(n))}getNamedQuery(e,n){return nk(e).get(n).next((r=>{if(r)return(function(o){return{name:o.name,query:NI(o.bundledQuery),readTime:Ju(o.readTime)}})(r)}))}saveNamedQuery(e,n){return nk(e).put((function(i){return{name:i.name,readTime:Yu(wn(i.readTime)),bundledQuery:i.bundledQuery}})(n))}}function tk(t){return Bn(t,y0)}function nk(t){return Bn(t,v0)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new A0(e,r)}getOverlay(e,n){return ip(e).get(ZN(this.userId,n)).next((r=>r?$w(this.serializer,r):null))}getOverlays(e,n){const r=Wo();return Q.forEach(n,(i=>this.getOverlay(e,i).next((o=>{o!==null&&r.set(i,o)})))).next((()=>r))}saveOverlays(e,n,r){const i=[];return r.forEach(((o,s)=>{const u=new PI(n,s);i.push(this.St(e,u))})),Q.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach((s=>i.add(xr(s.getCollectionPath()))));const o=[];return i.forEach((s=>{const u=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(ip(e).Z(ZS,u))})),Q.waitFor(o)}getOverlaysForCollection(e,n,r){const i=Wo(),o=xr(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return ip(e).J(ZS,s).next((u=>{for(const c of u){const f=$w(this.serializer,c);i.set(f.getKey(),f)}return i}))}getOverlaysForCollectionGroup(e,n,r,i){const o=Wo();let s;const u=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return ip(e).ee({index:AB,range:u},((c,f,h)=>{const y=$w(this.serializer,f);o.size()<i||y.largestBatchId===s?(o.set(y.getKey(),y),s=y.largestBatchId):h.done()})).next((()=>o))}St(e,n){return ip(e).put((function(i,o,s){const[u,c,f]=ZN(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:f,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:fm(i.yt,s.mutation)}})(this.serializer,this.userId,n))}}function ip(t){return Bn(t,_0)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QX{bt(e){return Bn(e,_I)}getSessionToken(e){return this.bt(e).get("sessionToken").next((n=>{const r=n==null?void 0:n.value;return r?fn.fromUint8Array(r):fn.EMPTY_BYTE_STRING}))}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Qt(e.integerValue));else if("doubleValue"in e){const r=Qt(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),nm(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Js(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Qs(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?LB(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):w0(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):Ie(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){var s,u;const r=e.fields||{};this.Ft(n,53);const i=Jf,o=((u=(s=r[i].arrayValue)==null?void 0:s.values)==null?void 0:u.length)||0;this.Ft(n,15),n.Mt(Qt(o)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),Ee.fromName(e).path.forEach((r=>{this.Ft(n,60),this.Ut(r,n)}))}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}Au.Kt=new Au;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff=255;function XX(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function rk(t){const e=64-(function(r){let i=0;for(let o=0;o<8;++o){const s=XX(255&r[o]);if(i+=s,s!==8)break}return i})(t);return Math.ceil(e/8)}class ZX{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=n.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const n=this.en(e),r=rk(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=rk(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(ff),this.sn(255)}_n(){this.an(ff),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=(function(o){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)})(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===ff?(this.sn(ff),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===ff?(this.an(ff),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class eZ{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class tZ{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class op{constructor(){this.cn=new ZX,this.ln=new eZ(this.cn),this.hn=new tZ(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e,n,r,i){this.Tn=e,this.In=n,this.En=r,this.dn=i}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new Cu(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:Rv(this.En),directionalValue:Rv(this.dn),orderedDocumentKey:Rv(n),documentKey:r.path.toArray()}}Vn(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function ja(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=ik(t.En,e.En),n!==0?n:(n=ik(t.dn,e.dn),n!==0?n:Ee.comparator(t.In,e.In)))}function ik(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function Rv(t){return BF()?(function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r})(t):t}function ok(t){return typeof t!="string"?t:(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(t)}class sk{constructor(e){this.mn=new It(((n,r)=>Xt.comparator(n.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(ke(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=JS(e);if(n!==void 0&&!this.wn(n))return!1;const r=vu(e);let i=new Set,o=0,s=0;for(;o<r.length&&this.wn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.mn.size>0){const u=this.mn.getIterator().getNext();if(!i.has(u.field.canonicalString())){const c=r[o];if(!this.Sn(u,c)||!this.bn(this.fn[s++],c))return!1}++o}for(;o<r.length;++o){const u=r[o];if(s>=this.fn.length||!this.bn(this.fn[s++],u))return!1}return!0}Dn(){if(this.pn)return null;let e=new It(Xt.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Ev(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Ev(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Ev(r.field,r.dir==="asc"?0:1)));return new Kv(Kv.UNKNOWN_ID,this.collectionId,n,tm.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iq(t){var n,r;if(ke(t instanceof st||t instanceof Ct,20012),t instanceof st){if(t instanceof KB){const i=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map((o=>st.create(t.field,"==",o))))||[];return Ct.create(i,"or")}return t}const e=t.filters.map((i=>Iq(i)));return Ct.create(e,t.op)}function nZ(t){if(t.getFilters().length===0)return[];const e=hA(Iq(t));return ke(xq(e),7391),fA(e)||dA(e)?[e]:e.getFilters()}function fA(t){return t instanceof st}function dA(t){return t instanceof Ct&&bI(t)}function xq(t){return fA(t)||dA(t)||(function(n){if(n instanceof Ct&&rA(n)){for(const r of n.getFilters())if(!fA(r)&&!dA(r))return!1;return!0}return!1})(t)}function hA(t){if(ke(t instanceof st||t instanceof Ct,34018),t instanceof st)return t;if(t.filters.length===1)return hA(t.filters[0]);const e=t.filters.map((r=>hA(r)));let n=Ct.create(e,t.op);return n=t_(n),xq(n)?n:(ke(n instanceof Ct,64498),ke(Xf(n),40251),ke(n.filters.length>1,57927),n.filters.reduce(((r,i)=>kI(r,i))))}function kI(t,e){let n;return ke(t instanceof st||t instanceof Ct,38388),ke(e instanceof st||e instanceof Ct,25473),n=t instanceof st?e instanceof st?(function(i,o){return Ct.create([i,o],"and")})(t,e):ak(t,e):e instanceof st?ak(e,t):(function(i,o){if(ke(i.filters.length>0&&o.filters.length>0,48005),Xf(i)&&Xf(o))return zB(i,o.getFilters());const s=rA(i)?i:o,u=rA(i)?o:i,c=s.filters.map((f=>kI(f,u)));return Ct.create(c,"or")})(t,e),t_(n)}function ak(t,e){if(Xf(e))return zB(e,t.getFilters());{const n=e.filters.map((r=>kI(t,r)));return Ct.create(n,"or")}}function t_(t){if(ke(t instanceof st||t instanceof Ct,11850),t instanceof st)return t;const e=t.getFilters();if(e.length===1)return t_(e[0]);if(qB(t))return t;const n=e.map((i=>t_(i))),r=[];return n.forEach((i=>{i instanceof st?r.push(i):i instanceof Ct&&(i.op===t.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:Ct.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rZ{constructor(){this.Cn=new OI}addToCollectionParentIndex(e,n){return this.Cn.add(n),Q.resolve()}getCollectionParents(e,n){return Q.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Q.resolve()}deleteFieldIndex(e,n){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,n){return Q.resolve()}getDocumentsMatchingTarget(e,n){return Q.resolve(null)}getIndexType(e,n){return Q.resolve(0)}getFieldIndexes(e,n){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,n){return Q.resolve(wi.min())}getMinOffsetFromCollectionGroup(e,n){return Q.resolve(wi.min())}updateCollectionGroup(e,n,r){return Q.resolve()}updateIndexEntries(e,n){return Q.resolve()}}class OI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new It(ot.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new It(ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk="IndexedDbIndexManager",$y=new Uint8Array(0);class iZ{constructor(e,n){this.databaseId=n,this.vn=new OI,this.Fn=new sa((r=>Ku(r)),((r,i)=>qm(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener((()=>{this.vn.add(n)}));const o={collectionId:r,parent:xr(i)};return uk(e).put(o)}return Q.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[cB(n),""],!1,!0);return uk(e).J(i).next((o=>{for(const s of o){if(s.collectionId!==n)break;r.push(jo(s.parent))}return r}))}addFieldIndex(e,n){const r=sp(e),i=(function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map((c=>[c.fieldPath.canonicalString(),c.kind]))}})(n);delete i.indexId;const o=r.add(i);if(n.indexState){const s=hf(e);return o.next((u=>{s.put(ek(u,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return o.next()}deleteFieldIndex(e,n){const r=sp(e),i=hf(e),o=df(e);return r.delete(n.indexId).next((()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const n=sp(e),r=df(e),i=hf(e);return n.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,n){return Q.forEach(this.Mn(n),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const o=new sk(r).Dn();if(o!=null)return this.addFieldIndex(e,o)}}))))}getDocumentsMatchingTarget(e,n){const r=df(e);let i=!0;const o=new Map;return Q.forEach(this.Mn(n),(s=>this.xn(e,s).next((u=>{i&&(i=!!u),o.set(s,u)})))).next((()=>{if(i){let s=Je();const u=[];return Q.forEach(o,((c,f)=>{me(lk,`Using index ${(function(M){return`id=${M.indexId}|cg=${M.collectionGroup}|f=${M.fields.map((U=>`${U.fieldPath}:${U.kind}`)).join(",")}`})(c)} to execute ${Ku(n)}`);const h=(function(M,U){const q=JS(U);if(q===void 0)return null;for(const z of Xv(M,q.fieldPath))switch(z.op){case"array-contains-any":return z.value.arrayValue.values||[];case"array-contains":return[z.value]}return null})(f,c),y=(function(M,U){const q=new Map;for(const z of vu(U))for(const k of Xv(M,z.fieldPath))switch(k.op){case"==":case"in":q.set(z.fieldPath.canonicalString(),k.value);break;case"not-in":case"!=":return q.set(z.fieldPath.canonicalString(),k.value),Array.from(q.values())}return null})(f,c),v=(function(M,U){const q=[];let z=!0;for(const k of vu(U)){const V=k.kind===0?BN(M,k.fieldPath,M.startAt):qN(M,k.fieldPath,M.startAt);q.push(V.value),z&&(z=V.inclusive)}return new yl(q,z)})(f,c),E=(function(M,U){const q=[];let z=!0;for(const k of vu(U)){const V=k.kind===0?qN(M,k.fieldPath,M.endAt):BN(M,k.fieldPath,M.endAt);q.push(V.value),z&&(z=V.inclusive)}return new yl(q,z)})(f,c),b=this.On(c,f,v),S=this.On(c,f,E),A=this.Nn(c,f,y),R=this.Bn(c.indexId,h,b,v.inclusive,S,E.inclusive,A);return Q.forEach(R,(D=>r.Y(D,n.limit).next((M=>{M.forEach((U=>{const q=Ee.fromSegments(U.documentKey);s.has(q)||(s=s.add(q),u.push(q))}))}))))})).next((()=>u))}return Q.resolve(null)}))}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=nZ(Ct.create(e.filters,"and")).map((r=>oA(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,n),n)}Bn(e,n,r,i,o,s,u){const c=(n!=null?n.length:1)*Math.max(r.length,o.length),f=c/(n!=null?n.length:1),h=[];for(let y=0;y<c;++y){const v=n?this.Ln(n[y/f]):$y,E=this.kn(e,v,r[y%f],i),b=this.qn(e,v,o[y%f],s),S=u.map((A=>this.kn(e,v,A,!0)));h.push(...this.createRange(E,b,S))}return h}kn(e,n,r,i){const o=new Cu(e,Ee.empty(),n,r);return i?o:o.An()}qn(e,n,r,i){const o=new Cu(e,Ee.empty(),n,r);return i?o.An():o}xn(e,n){const r=new sk(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next((o=>{let s=null;for(const u of o)r.yn(u)&&(!s||u.fields.length>s.fields.length)&&(s=u);return s}))}getIndexType(e,n){let r=2;const i=this.Mn(n);return Q.forEach(i,(o=>this.xn(e,o).next((s=>{s?r!==0&&s.fields.length<(function(c){let f=new It(Xt.comparator),h=!1;for(const y of c.filters)for(const v of y.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?h=!0:f=f.add(v.field));for(const y of c.orderBy)y.field.isKeyField()||(f=f.add(y.field));return f.size+(h?1:0)})(o)&&(r=1):r=0})))).next((()=>(function(s){return s.limit!==null})(n)&&i.length>1&&r===2?1:r))}Qn(e,n){const r=new op;for(const i of vu(e)){const o=n.data.field(i.fieldPath);if(o==null)return null;const s=r.Pn(i.kind);Au.Kt.Dt(o,s)}return r.un()}Ln(e){const n=new op;return Au.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new op;return Au.Kt.Dt(Gu(this.databaseId,n),r.Pn((function(o){const s=vu(o);return s.length===0?0:s[s.length-1].kind})(e))),r.un()}Nn(e,n,r){if(r===null)return[];let i=[];i.push(new op);let o=0;for(const s of vu(e)){const u=r[o++];for(const c of i)if(this.Un(n,s.fieldPath)&&lm(u))i=this.Kn(i,s,u);else{const f=c.Pn(s.kind);Au.Kt.Dt(u,f)}}return this.Wn(i)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const i=[...e],o=[];for(const s of r.arrayValue.values||[])for(const u of i){const c=new op;c.seed(u.un()),Au.Kt.Dt(s,c.Pn(n.kind)),o.push(c)}return o}Un(e,n){return!!e.filters.find((r=>r instanceof st&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,n){const r=sp(e),i=hf(e);return(n?r.J(XS,IDBKeyRange.bound(n,n)):r.J()).next((o=>{const s=[];return Q.forEach(o,(u=>i.get([u.indexId,this.uid]).next((c=>{s.push((function(h,y){const v=y?new tm(y.sequenceNumber,new wi(Ju(y.readTime),new Ee(jo(y.documentKey)),y.largestBatchId)):tm.empty(),E=h.fields.map((([b,S])=>new Ev(Xt.fromServerFormat(b),S)));return new Kv(h.indexId,h.collectionGroup,E,v)})(u,c))})))).next((()=>s))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((n=>n.length===0?null:(n.sort(((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:We(r.collectionGroup,i.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(e,n,r){const i=sp(e),o=hf(e);return this.Gn(e).next((s=>i.J(XS,IDBKeyRange.bound(n,n)).next((u=>Q.forEach(u,(c=>o.put(ek(c.indexId,this.uid,s,r))))))))}updateIndexEntries(e,n){const r=new Map;return Q.forEach(n,((i,o)=>{const s=r.get(i.collectionGroup);return(s?Q.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next((u=>(r.set(i.collectionGroup,u),Q.forEach(u,(c=>this.zn(e,i,c).next((f=>{const h=this.jn(o,c);return f.isEqual(h)?Q.resolve():this.Jn(e,o,c,f,h)})))))))}))}Hn(e,n,r,i){return df(e).put(i.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,i){return df(e).delete(i.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const i=df(e);let o=new It(ja);return i.ee({index:SB,range:IDBKeyRange.only([r.indexId,this.uid,Rv(this.$n(r,n))])},((s,u)=>{o=o.add(new Cu(r.indexId,n,ok(u.arrayValue),ok(u.directionalValue)))})).next((()=>o))}jn(e,n){let r=new It(ja);const i=this.Qn(n,e);if(i==null)return r;const o=JS(n);if(o!=null){const s=e.data.field(o.fieldPath);if(lm(s))for(const u of s.arrayValue.values||[])r=r.add(new Cu(n.indexId,e.key,this.Ln(u),i))}else r=r.add(new Cu(n.indexId,e.key,$y,i));return r}Jn(e,n,r,i,o){me(lk,"Updating index entries for document '%s'",n.key);const s=[];return(function(c,f,h,y,v){const E=c.getIterator(),b=f.getIterator();let S=cf(E),A=cf(b);for(;S||A;){let R=!1,D=!1;if(S&&A){const M=h(S,A);M<0?D=!0:M>0&&(R=!0)}else S!=null?D=!0:R=!0;R?(y(A),A=cf(b)):D?(v(S),S=cf(E)):(S=cf(E),A=cf(b))}})(i,o,ja,(u=>{s.push(this.Hn(e,n,r,u))}),(u=>{s.push(this.Yn(e,n,r,u))})),Q.waitFor(s)}Gn(e){let n=1;return hf(e).ee({index:bB,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,o)=>{o.done(),n=i.sequenceNumber+1})).next((()=>n))}createRange(e,n,r){r=r.sort(((s,u)=>ja(s,u))).filter(((s,u,c)=>!u||ja(s,c[u-1])!==0));const i=[];i.push(e);for(const s of r){const u=ja(s,e),c=ja(s,n);if(u===0)i[0]=e.An();else if(u>0&&c<0)i.push(s),i.push(s.An());else if(c>0)break}i.push(n);const o=[];for(let s=0;s<i.length;s+=2){if(this.Zn(i[s],i[s+1]))return[];const u=i[s].Vn(this.uid,$y,Ee.empty()),c=i[s+1].Vn(this.uid,$y,Ee.empty());o.push(IDBKeyRange.bound(u,c))}return o}Zn(e,n){return ja(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(ck)}getMinOffset(e,n){return Q.mapArray(this.Mn(n),(r=>this.xn(e,r).next((i=>i||Ie(44426))))).next(ck)}}function uk(t){return Bn(t,om)}function df(t){return Bn(t,Up)}function sp(t){return Bn(t,vI)}function hf(t){return Bn(t,Lp)}function ck(t){ke(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;mI(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new wi(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Rq=41943040;class br{static withCacheSize(e){return new br(e,br.DEFAULT_COLLECTION_PERCENTILE,br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pq(t,e,n){const r=t.store(ao),i=t.store(Kf),o=[],s=IDBKeyRange.only(n.batchId);let u=0;const c=r.ee({range:s},((h,y,v)=>(u++,v.delete())));o.push(c.next((()=>{ke(u===1,47070,{batchId:n.batchId})})));const f=[];for(const h of n.mutations){const y=TB(e,h.key.path,n.batchId);o.push(i.delete(y)),f.push(h.key)}return Q.waitFor(o).next((()=>f))}function n_(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ie(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */br.DEFAULT_COLLECTION_PERCENTILE=10,br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,br.DEFAULT=new br(Rq,br.DEFAULT_COLLECTION_PERCENTILE,br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),br.DISABLED=new br(-1,0,0);class C0{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,n,r,i){ke(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new C0(o,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Wa(e).ee({index:Ru,range:r},((i,o,s)=>{n=!1,s.done()})).next((()=>n))}addMutationBatch(e,n,r,i){const o=Ef(e),s=Wa(e);return s.add({}).next((u=>{ke(typeof u=="number",49019);const c=new xI(u,n,r,i),f=(function(E,b,S){const A=S.baseMutations.map((D=>fm(E.yt,D))),R=S.mutations.map((D=>fm(E.yt,D)));return{userId:b,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:A,mutations:R}})(this.serializer,this.userId,c),h=[];let y=new It(((v,E)=>We(v.canonicalString(),E.canonicalString())));for(const v of i){const E=TB(this.userId,v.key.path,u);y=y.add(v.key.path.popLast()),h.push(s.put(f)),h.push(o.put(E,UQ))}return y.forEach((v=>{h.push(this.indexManager.addToCollectionParentIndex(e,v))})),e.addOnCommittedListener((()=>{this.Xn[u]=c.keys()})),Q.waitFor(h).next((()=>c))}))}lookupMutationBatch(e,n){return Wa(e).get(n).next((r=>r?(ke(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),Su(this.serializer,r)):null))}er(e,n){return this.Xn[n]?Q.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next((r=>{if(r){const i=r.keys();return this.Xn[n]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return Wa(e).ee({index:Ru,range:i},((s,u,c)=>{u.userId===this.userId&&(ke(u.batchId>=r,47524,{tr:r}),o=Su(this.serializer,u)),c.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=al;return Wa(e).ee({index:Ru,range:n,reverse:!0},((i,o,s)=>{r=o.batchId,s.done()})).next((()=>r))}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,al],[this.userId,Number.POSITIVE_INFINITY]);return Wa(e).J(Ru,n).next((r=>r.map((i=>Su(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=wv(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return Ef(e).ee({range:i},((s,u,c)=>{const[f,h,y]=s,v=jo(h);if(f===this.userId&&n.path.isEqual(v))return Wa(e).get(y).next((E=>{if(!E)throw Ie(61480,{nr:s,batchId:y});ke(E.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:E.userId,batchId:y}),o.push(Su(this.serializer,E))}));c.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new It(We);const i=[];return n.forEach((o=>{const s=wv(this.userId,o.path),u=IDBKeyRange.lowerBound(s),c=Ef(e).ee({range:u},((f,h,y)=>{const[v,E,b]=f,S=jo(E);v===this.userId&&o.path.isEqual(S)?r=r.add(b):y.done()}));i.push(c)})),Q.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,o=wv(this.userId,r),s=IDBKeyRange.lowerBound(o);let u=new It(We);return Ef(e).ee({range:s},((c,f,h)=>{const[y,v,E]=c,b=jo(v);y===this.userId&&r.isPrefixOf(b)?b.length===i&&(u=u.add(E)):h.done()})).next((()=>this.rr(e,u)))}rr(e,n){const r=[],i=[];return n.forEach((o=>{i.push(Wa(e).get(o).next((s=>{if(s===null)throw Ie(35274,{batchId:o});ke(s.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:s.userId,batchId:o}),r.push(Su(this.serializer,s))})))})),Q.waitFor(i).next((()=>r))}removeMutationBatch(e,n){return Pq(e.le,this.userId,n).next((r=>(e.addOnCommittedListener((()=>{this.ir(n.batchId)})),Q.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((n=>{if(!n)return Q.resolve();const r=IDBKeyRange.lowerBound((function(s){return[s]})(this.userId)),i=[];return Ef(e).ee({range:r},((o,s,u)=>{if(o[0]===this.userId){const c=jo(o[1]);i.push(c)}else u.done()})).next((()=>{ke(i.length===0,56720,{sr:i.map((o=>o.canonicalString()))})}))}))}containsKey(e,n){return Mq(e,this.userId,n)}_r(e){return Dq(e).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:al,lastStreamToken:""}))}}function Mq(t,e,n){const r=wv(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return Ef(t).ee({range:o,X:!0},((u,c,f)=>{const[h,y,v]=u;h===e&&y===i&&(s=!0),f.done()})).next((()=>s))}function Wa(t){return Bn(t,ao)}function Ef(t){return Bn(t,Kf)}function Dq(t){return Bn(t,rm)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Qu(0)}static cr(){return new Qu(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oZ{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next((n=>{const r=new Qu(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((n=>Le.fromTimestamp(new wt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(e,n,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.hr(e,i))))}addTargetData(e,n){return this.Pr(e,n).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next((()=>pf(e).delete(n.targetId))).next((()=>this.lr(e))).next((r=>(ke(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,n,r){let i=0;const o=[];return pf(e).ee(((s,u)=>{const c=Ap(u);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))})).next((()=>Q.waitFor(o))).next((()=>i))}forEachTarget(e,n){return pf(e).ee(((r,i)=>{const o=Ap(i);n(o)}))}lr(e){return dk(e).get(Yv).next((n=>(ke(n!==null,2888),n)))}hr(e,n){return dk(e).put(Yv,n)}Pr(e,n){return pf(e).put(Cq(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((n=>n.targetCount))}getTargetData(e,n){const r=Ku(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return pf(e).ee({range:i,index:wB},((s,u,c)=>{const f=Ap(u);qm(n,f.target)&&(o=f,c.done())})).next((()=>o))}addMatchingKeys(e,n,r){const i=[],o=Xa(e);return n.forEach((s=>{const u=xr(s.path);i.push(o.put({targetId:r,path:u})),i.push(this.referenceDelegate.addReference(e,r,s))})),Q.waitFor(i)}removeMatchingKeys(e,n,r){const i=Xa(e);return Q.forEach(n,(o=>{const s=xr(o.path);return Q.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])}))}removeMatchingKeysForTargetId(e,n){const r=Xa(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Xa(e);let o=Je();return i.ee({range:r,X:!0},((s,u,c)=>{const f=jo(s[1]),h=new Ee(f);o=o.add(h)})).next((()=>o))}containsKey(e,n){const r=xr(n.path),i=IDBKeyRange.bound([r],[cB(r)],!1,!0);let o=0;return Xa(e).ee({index:yI,X:!0,range:i},(([s,u],c,f)=>{s!==0&&(o++,f.done())})).next((()=>o>0))}At(e,n){return pf(e).get(n).next((r=>r?Ap(r):null))}}function pf(t){return Bn(t,jf)}function dk(t){return Bn(t,Lu)}function Xa(t){return Bn(t,Wf)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk="LruGarbageCollector",sZ=1048576;function pk([t,e],[n,r]){const i=We(t,n);return i===0?We(e,r):i}class aZ{constructor(e){this.Ir=e,this.buffer=new It(pk),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();pk(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Nq{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){me(hk,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Il(n)?me(hk,"Ignoring IndexedDB error during garbage collection: ",n):await Cl(n)}await this.Vr(3e5)}))}}class lZ{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return Q.resolve(Yr.ce);const r=new aZ(n);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(fk)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fk):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,o,s,u,c,f;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),i=this.params.maximumSequenceNumbersToCollect):i=y,s=Date.now(),this.nthSequenceNumber(e,i)))).next((y=>(r=y,u=Date.now(),this.removeTargets(e,r,n)))).next((y=>(o=y,c=Date.now(),this.removeOrphanedDocuments(e,r)))).next((y=>(f=Date.now(),yf()<=it.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(u-s)+`ms
	Removed ${o} targets in `+(c-u)+`ms
	Removed ${y} documents in `+(f-c)+`ms
Total Duration: ${f-h}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:y}))))}}function kq(t,e){return new lZ(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uZ{constructor(e,n){this.db=e,this.garbageCollector=kq(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,((r,i)=>n(i)))}addReference(e,n,r){return zy(e,r)}removeReference(e,n,r){return zy(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return zy(e,n)}br(e,n){return(function(i,o){let s=!1;return Dq(i).te((u=>Mq(i,u,o).next((c=>(c&&(s=!0),Q.resolve(!c)))))).next((()=>s))})(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Sr(e,((s,u)=>{if(u<=n){const c=this.br(e,s).next((f=>{if(!f)return o++,r.getEntry(e,s).next((()=>(r.removeEntry(s,Le.min()),Xa(e).delete((function(y){return[0,xr(y.path)]})(s)))))}));i.push(c)}})).next((()=>Q.waitFor(i))).next((()=>r.apply(e))).next((()=>o))}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return zy(e,n)}Sr(e,n){const r=Xa(e);let i,o=Yr.ce;return r.ee({index:yI},(([s,u],{path:c,sequenceNumber:f})=>{s===0?(o!==Yr.ce&&n(new Ee(jo(i)),o),o=f,i=c):o=Yr.ce})).next((()=>{o!==Yr.ce&&n(new Ee(jo(i)),o)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function zy(t,e){return Xa(t).put((function(r,i){return{targetId:0,path:xr(r.path),sequenceNumber:i}})(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oq{constructor(){this.changes=new sa((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ht.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cZ{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return mu(e).put(r)}removeEntry(e,n,r){return mu(e).delete((function(o,s){const u=o.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],e_(s),u[u.length-1]]})(n,r))}updateMetadata(e,n){return this.getMetadata(e).next((r=>(r.byteSize+=n,this.Dr(e,r))))}getEntry(e,n){let r=Ht.newInvalidDocument(n);return mu(e).ee({index:bv,range:IDBKeyRange.only(ap(n))},((i,o)=>{r=this.Cr(n,o)})).next((()=>r))}vr(e,n){let r={size:0,document:Ht.newInvalidDocument(n)};return mu(e).ee({index:bv,range:IDBKeyRange.only(ap(n))},((i,o)=>{r={document:this.Cr(n,o),size:n_(o)}})).next((()=>r))}getEntries(e,n){let r=Qr();return this.Fr(e,n,((i,o)=>{const s=this.Cr(i,o);r=r.insert(i,s)})).next((()=>r))}Mr(e,n){let r=Qr(),i=new Bt(Ee.comparator);return this.Fr(e,n,((o,s)=>{const u=this.Cr(o,s);r=r.insert(o,u),i=i.insert(o,n_(s))})).next((()=>({documents:r,Or:i})))}Fr(e,n,r){if(n.isEmpty())return Q.resolve();let i=new It(yk);n.forEach((c=>i=i.add(c)));const o=IDBKeyRange.bound(ap(i.first()),ap(i.last())),s=i.getIterator();let u=s.getNext();return mu(e).ee({index:bv,range:o},((c,f,h)=>{const y=Ee.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;u&&yk(u,y)<0;)r(u,null),u=s.getNext();u&&u.isEqual(y)&&(r(u,f),u=s.hasNext()?s.getNext():null),u?h.j(ap(u)):h.done()})).next((()=>{for(;u;)r(u,null),u=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,n,r,i,o){const s=n.path,u=[s.popLast().toArray(),s.lastSegment(),e_(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return mu(e).J(IDBKeyRange.bound(u,c,!0)).next((f=>{o==null||o.incrementDocumentReadCount(f.length);let h=Qr();for(const y of f){const v=this.Cr(Ee.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);v.isFoundDocument()&&(zm(n,v)||i.has(v.key))&&(h=h.insert(v.key,v))}return h}))}getAllFromCollectionGroup(e,n,r,i){let o=Qr();const s=gk(n,r),u=gk(n,wi.max());return mu(e).ee({index:EB,range:IDBKeyRange.bound(s,u,!0)},((c,f,h)=>{const y=this.Cr(Ee.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);o=o.insert(y.key,y),o.size===i&&h.done()})).next((()=>o))}newChangeBuffer(e){return new fZ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((n=>n.byteSize))}getMetadata(e){return mk(e).get(QS).next((n=>(ke(!!n,20021),n)))}Dr(e,n){return mk(e).put(QS,n)}Cr(e,n){if(n){const r=YX(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Le.min())))return r}return Ht.newInvalidDocument(e)}}function Vq(t){return new cZ(t)}class fZ extends Oq{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new sa((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const n=[];let r=0,i=new It(((o,s)=>We(o.canonicalString(),s.canonicalString())));return this.changes.forEach(((o,s)=>{const u=this.Br.get(o);if(n.push(this.Nr.removeEntry(e,o,u.readTime)),s.isValidDocument()){const c=XN(this.Nr.serializer,s);i=i.add(o.path.popLast());const f=n_(c);r+=f-u.size,n.push(this.Nr.addEntry(e,o,c))}else if(r-=u.size,this.trackRemovals){const c=XN(this.Nr.serializer,s.convertToNoDocument(Le.min()));n.push(this.Nr.addEntry(e,o,c))}})),i.forEach((o=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,o))})),n.push(this.Nr.updateMetadata(e,r)),Q.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next((r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next((({documents:r,Or:i})=>(i.forEach(((o,s)=>{this.Br.set(o,{size:s,readTime:r.get(o).readTime})})),r)))}}function mk(t){return Bn(t,im)}function mu(t){return Bn(t,Wv)}function ap(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function gk(t,e){const n=e.documentKey.path.toArray();return[t,e_(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function yk(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=We(n[o],r[o]),i)return i;return i=We(n.length,r.length),i||(i=We(n[n.length-2],r[r.length-2]),i||We(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dZ{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lq{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&qp(r.mutation,i,Jr.empty(),wt.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Je()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Je()){const i=Wo();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((o=>{let s=bp();return o.forEach(((u,c)=>{s=s.insert(u,c.overlayedDocument)})),s}))))}getOverlayedDocuments(e,n){const r=Wo();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Je())))}populateOverlays(e,n,r){const i=[];return r.forEach((o=>{n.has(o)||i.push(o)})),this.documentOverlayCache.getOverlays(e,i).next((o=>{o.forEach(((s,u)=>{n.set(s,u)}))}))}computeViews(e,n,r,i){let o=Qr();const s=Bp(),u=(function(){return Bp()})();return n.forEach(((c,f)=>{const h=r.get(f.key);i.has(f.key)&&(h===void 0||h.mutation instanceof aa)?o=o.insert(f.key,f):h!==void 0?(s.set(f.key,h.mutation.getFieldMask()),qp(h.mutation,f,h.mutation.getFieldMask(),wt.now())):s.set(f.key,Jr.empty())})),this.recalculateAndSaveOverlays(e,o).next((c=>(c.forEach(((f,h)=>s.set(f,h))),n.forEach(((f,h)=>u.set(f,new dZ(h,s.get(f)??null)))),u)))}recalculateAndSaveOverlays(e,n){const r=Bp();let i=new Bt(((s,u)=>s-u)),o=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((s=>{for(const u of s)u.keys().forEach((c=>{const f=n.get(c);if(f===null)return;let h=r.get(c)||Jr.empty();h=u.applyToLocalView(f,h),r.set(c,h);const y=(i.get(u.batchId)||Je()).add(c);i=i.insert(u.batchId,y)}))})).next((()=>{const s=[],u=i.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),f=c.key,h=c.value,y=ZB();h.forEach((v=>{if(!o.has(v)){const E=sq(n.get(v),r.get(v));E!==null&&y.set(v,E),o=o.add(v)}})),s.push(this.documentOverlayCache.saveOverlays(e,f,y))}return Q.waitFor(s)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return Ee.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):SI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):Q.resolve(Wo());let u=Gf,c=o;return s.next((f=>Q.forEach(f,((h,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),o.get(h)?Q.resolve():this.remoteDocumentCache.getEntry(e,h).next((v=>{c=c.insert(h,v)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,c,f,Je()))).next((h=>({batchId:u,changes:XB(h)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ee(n)).next((r=>{let i=bp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=bp();return this.indexManager.getCollectionParents(e,o).next((u=>Q.forEach(u,(c=>{const f=(function(y,v){return new oa(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next((h=>{h.forEach(((y,v)=>{s=s.insert(y,v)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i)))).next((s=>{o.forEach(((c,f)=>{const h=f.getKey();s.get(h)===null&&(s=s.insert(h,Ht.newInvalidDocument(h)))}));let u=bp();return s.forEach(((c,f)=>{const h=o.get(c);h!==void 0&&qp(h.mutation,f,Jr.empty(),wt.now()),zm(n,f)&&(u=u.insert(c,f))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hZ{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Q.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:wn(i.createTime)}})(n)),Q.resolve()}getNamedQuery(e,n){return Q.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:NI(i.bundledQuery),readTime:wn(i.readTime)}})(n)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pZ{constructor(){this.overlays=new Bt(Ee.comparator),this.qr=new Map}getOverlay(e,n){return Q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Wo();return Q.forEach(n,(i=>this.getOverlay(e,i).next((o=>{o!==null&&r.set(i,o)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,o)=>{this.St(e,n,o)})),Q.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(r)),Q.resolve()}getOverlaysForCollection(e,n,r){const i=Wo(),o=n.length+1,s=new Ee(n.child("")),u=this.overlays.getIteratorFrom(s);for(;u.hasNext();){const c=u.getNext().value,f=c.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return Q.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Bt(((f,h)=>f-h));const s=this.overlays.getIterator();for(;s.hasNext();){const f=s.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let h=o.get(f.largestBatchId);h===null&&(h=Wo(),o=o.insert(f.largestBatchId,h)),h.set(f.getKey(),f)}}const u=Wo(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((f,h)=>u.set(f,h))),!(u.size()>=i)););return Q.resolve(u)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new PI(n,r));let o=this.qr.get(n);o===void 0&&(o=Je(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mZ{constructor(){this.sessionToken=fn.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(){this.Qr=new It(Wn.$r),this.Ur=new It(Wn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Wn(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Wn(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new Ee(new ot([])),r=new Wn(n,e),i=new Wn(n,e+1),o=[];return this.Ur.forEachInRange([r,i],(s=>{this.Gr(s),o.push(s.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ee(new ot([])),r=new Wn(n,e),i=new Wn(n,e+1);let o=Je();return this.Ur.forEachInRange([r,i],(s=>{o=o.add(s.key)})),o}containsKey(e){const n=new Wn(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Wn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ee.comparator(e.key,n.key)||We(e.Yr,n.Yr)}static Kr(e,n){return We(e.Yr,n.Yr)||Ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gZ{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new It(Wn.$r)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new xI(o,n,r,i);this.mutationQueue.push(s);for(const u of i)this.Zr=this.Zr.add(new Wn(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return Q.resolve(s)}lookupMutationBatch(e,n){return Q.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),o=i<0?0:i;return Q.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?al:this.tr-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Wn(n,0),i=new Wn(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],(s=>{const u=this.Xr(s.Yr);o.push(u)})),Q.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new It(We);return n.forEach((i=>{const o=new Wn(i,0),s=new Wn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],(u=>{r=r.add(u.Yr)}))})),Q.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;Ee.isDocumentKey(o)||(o=o.child(""));const s=new Wn(new Ee(o),0);let u=new It(We);return this.Zr.forEachWhile((c=>{const f=c.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(u=u.add(c.Yr)),!0)}),s),Q.resolve(this.ti(u))}ti(e){const n=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){ke(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Q.forEach(n.mutations,(i=>{const o=new Wn(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Wn(n,0),i=this.Zr.firstAfterOrEqual(r);return Q.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yZ{constructor(e){this.ri=e,this.docs=(function(){return new Bt(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Q.resolve(r?r.document.mutableCopy():Ht.newInvalidDocument(n))}getEntries(e,n){let r=Qr();return n.forEach((i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Ht.newInvalidDocument(i))})),Q.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Qr();const s=n.path,u=new Ee(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:f,value:{document:h}}=c.getNext();if(!s.isPrefixOf(f.path))break;f.path.length>s.length+1||mI(mB(h),r)<=0||(i.has(h.key)||zm(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return Q.resolve(o)}getAllFromCollectionGroup(e,n,r,i){Ie(9500)}ii(e,n){return Q.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new vZ(this)}getSize(e){return Q.resolve(this.size)}}class vZ extends Oq{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),Q.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Z{constructor(e){this.persistence=e,this.si=new sa((n=>Ku(n)),qm),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this.oi=0,this._i=new VI,this.targetCount=0,this.ai=Qu.ur()}forEachTarget(e,n){return this.si.forEach(((r,i)=>n(i))),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),Q.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Qu(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Q.resolve()}updateTargetData(e,n){return this.Pr(n),Q.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.si.forEach(((s,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Q.waitFor(o).next((()=>i))}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return Q.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),Q.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach((s=>{o.push(i.markPotentiallyOrphaned(e,s))})),Q.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Q.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return Q.resolve(r)}containsKey(e,n){return Q.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e,n){this.ui={},this.overlays={},this.ci=new Yr(0),this.li=!1,this.li=!0,this.hi=new mZ,this.referenceDelegate=e(this),this.Pi=new _Z(this),this.indexManager=new rZ,this.remoteDocumentCache=(function(i){return new yZ(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new Aq(n),this.Ii=new hZ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new pZ,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new gZ(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){me("MemoryPersistence","Starting transaction:",e);const i=new TZ(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((o=>this.referenceDelegate.di(i).next((()=>o)))).toPromise().then((o=>(i.raiseOnCommittedEvent(),o)))}Ai(e,n){return Q.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class TZ extends yB{constructor(e){super(),this.currentSequenceNumber=e}}class I0{constructor(e){this.persistence=e,this.Ri=new VI,this.Vi=null}static mi(e){return new I0(e)}get fi(){if(this.Vi)return this.Vi;throw Ie(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),Q.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),Q.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Q.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((o=>this.fi.add(o.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.fi,(r=>{const i=Ee.fromPath(r);return this.gi(e,i).next((o=>{o||n.removeEntry(i,Le.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return Q.or([()=>Q.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class r_{constructor(e,n){this.persistence=e,this.pi=new sa((r=>xr(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=kq(this,n)}static mi(e,n){return new r_(e,n)}Ei(){}di(e){return Q.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return Q.forEach(this.pi,((r,i)=>this.br(e,r,i).next((o=>o?Q.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,(s=>this.br(e,s,n).next((u=>{u||(r++,o.removeEntry(s,Le.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Q.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Q.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Q.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Q.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Av(e.data.value)),n}br(e,n,r){return Q.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return Q.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EZ{constructor(e){this.serializer=e}k(e,n,r,i){const o=new g0("createOrUpgrade",n);r<1&&i>=1&&((function(c){c.createObjectStore(Bm)})(e),(function(c){c.createObjectStore(rm,{keyPath:LQ}),c.createObjectStore(ao,{keyPath:xN,autoIncrement:!0}).createIndex(Ru,RN,{unique:!0}),c.createObjectStore(Kf)})(e),vk(e),(function(c){c.createObjectStore(_u)})(e));let s=Q.resolve();return r<3&&i>=3&&(r!==0&&((function(c){c.deleteObjectStore(Wf),c.deleteObjectStore(jf),c.deleteObjectStore(Lu)})(e),vk(e)),s=s.next((()=>(function(c){const f=c.store(Lu),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Le.min().toTimestamp(),targetCount:0};return f.put(Yv,h)})(o)))),r<4&&i>=4&&(r!==0&&(s=s.next((()=>(function(c,f){return f.store(ao).J().next((y=>{c.deleteObjectStore(ao),c.createObjectStore(ao,{keyPath:xN,autoIncrement:!0}).createIndex(Ru,RN,{unique:!0});const v=f.store(ao),E=y.map((b=>v.put(b)));return Q.waitFor(E)}))})(e,o)))),s=s.next((()=>{(function(c){c.createObjectStore(Yf,{keyPath:KQ})})(e)}))),r<5&&i>=5&&(s=s.next((()=>this.yi(o)))),r<6&&i>=6&&(s=s.next((()=>((function(c){c.createObjectStore(im)})(e),this.wi(o))))),r<7&&i>=7&&(s=s.next((()=>this.Si(o)))),r<8&&i>=8&&(s=s.next((()=>this.bi(e,o)))),r<9&&i>=9&&(s=s.next((()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(s=s.next((()=>this.Di(o)))),r<11&&i>=11&&(s=s.next((()=>{(function(c){c.createObjectStore(y0,{keyPath:jQ})})(e),(function(c){c.createObjectStore(v0,{keyPath:WQ})})(e)}))),r<12&&i>=12&&(s=s.next((()=>{(function(c){const f=c.createObjectStore(_0,{keyPath:tX});f.createIndex(ZS,nX,{unique:!1}),f.createIndex(AB,rX,{unique:!1})})(e)}))),r<13&&i>=13&&(s=s.next((()=>(function(c){const f=c.createObjectStore(Wv,{keyPath:FQ});f.createIndex(bv,BQ),f.createIndex(EB,qQ)})(e))).next((()=>this.Ci(e,o))).next((()=>e.deleteObjectStore(_u)))),r<14&&i>=14&&(s=s.next((()=>this.Fi(e,o)))),r<15&&i>=15&&(s=s.next((()=>(function(c){c.createObjectStore(vI,{keyPath:YQ,autoIncrement:!0}).createIndex(XS,JQ,{unique:!1}),c.createObjectStore(Lp,{keyPath:QQ}).createIndex(bB,XQ,{unique:!1}),c.createObjectStore(Up,{keyPath:ZQ}).createIndex(SB,eX,{unique:!1})})(e)))),r<16&&i>=16&&(s=s.next((()=>{n.objectStore(Lp).clear()})).next((()=>{n.objectStore(Up).clear()}))),r<17&&i>=17&&(s=s.next((()=>{(function(c){c.createObjectStore(_I,{keyPath:iX})})(e)}))),r<18&&i>=18&&BF()&&(s=s.next((()=>{n.objectStore(Lp).clear()})).next((()=>{n.objectStore(Up).clear()}))),s}wi(e){let n=0;return e.store(_u).ee(((r,i)=>{n+=n_(i)})).next((()=>{const r={byteSize:n};return e.store(im).put(QS,r)}))}yi(e){const n=e.store(rm),r=e.store(ao);return n.J().next((i=>Q.forEach(i,(o=>{const s=IDBKeyRange.bound([o.userId,al],[o.userId,o.lastAcknowledgedBatchId]);return r.J(Ru,s).next((u=>Q.forEach(u,(c=>{ke(c.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const f=Su(this.serializer,c);return Pq(e,o.userId,f).next((()=>{}))}))))}))))}Si(e){const n=e.store(Wf),r=e.store(_u);return e.store(Lu).get(Yv).next((i=>{const o=[];return r.ee(((s,u)=>{const c=new ot(s),f=(function(y){return[0,xr(y)]})(c);o.push(n.get(f).next((h=>h?Q.resolve():(y=>n.put({targetId:0,path:xr(y),sequenceNumber:i.highestListenSequenceNumber}))(c))))})).next((()=>Q.waitFor(o)))}))}bi(e,n){e.createObjectStore(om,{keyPath:GQ});const r=n.store(om),i=new OI,o=s=>{if(i.add(s)){const u=s.lastSegment(),c=s.popLast();return r.put({collectionId:u,parent:xr(c)})}};return n.store(_u).ee({X:!0},((s,u)=>{const c=new ot(s);return o(c.popLast())})).next((()=>n.store(Kf).ee({X:!0},(([s,u,c],f)=>{const h=jo(u);return o(h.popLast())}))))}Di(e){const n=e.store(jf);return n.ee(((r,i)=>{const o=Ap(i),s=Cq(this.serializer,o);return n.put(s)}))}Ci(e,n){const r=n.store(_u),i=[];return r.ee(((o,s)=>{const u=n.store(Wv),c=(function(y){return y.document?new Ee(ot.fromString(y.document.name).popFirst(5)):y.noDocument?Ee.fromSegments(y.noDocument.path):y.unknownDocument?Ee.fromSegments(y.unknownDocument.path):Ie(36783)})(s).path.toArray(),f={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(u.put(f))})).next((()=>Q.waitFor(i)))}Fi(e,n){const r=n.store(ao),i=Vq(this.serializer),o=new LI(I0.mi,this.serializer.yt);return r.J().next((s=>{const u=new Map;return s.forEach((c=>{let f=u.get(c.userId)??Je();Su(this.serializer,c).keys().forEach((h=>f=f.add(h))),u.set(c.userId,f)})),Q.forEach(u,((c,f)=>{const h=new Jn(f),y=A0.wt(this.serializer,h),v=o.getIndexManager(h),E=C0.wt(h,this.serializer,v,o.referenceDelegate);return new Lq(i,E,y,v).recalculateAndSaveOverlaysForDocumentKeys(new eA(n,Yr.ce),c).next()}))}))}}function vk(t){t.createObjectStore(Wf,{keyPath:zQ}).createIndex(yI,HQ,{unique:!0}),t.createObjectStore(jf,{keyPath:"targetId"}).createIndex(wB,$Q,{unique:!0}),t.createObjectStore(Lu)}const Ya="IndexedDbPersistence",zw=18e5,Hw=5e3,Gw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Uq="main";class UI{constructor(e,n,r,i,o,s,u,c,f,h,y=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=o,this.window=s,this.document=u,this.xi=f,this.Oi=h,this.Ni=y,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=v=>Promise.resolve(),!UI.v())throw new de(re.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new uZ(this,i),this.$i=n+Uq,this.serializer=new Aq(c),this.Ui=new Jo(this.$i,this.Ni,new EZ(this.serializer)),this.hi=new QX,this.Pi=new oZ(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Vq(this.serializer),this.Ii=new JX,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,h===!1&&En(Ya,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new de(re.FAILED_PRECONDITION,Gw);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Yr(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async n=>{n.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Hy(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((n=>this.isPrimary&&!n?this.Zi(e).next((()=>!1)):!!n&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Il(e))return me(Ya,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return me(Ya,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return lp(e).get(uf).next((n=>Q.resolve(this.es(n))))}ts(e){return Hy(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,zw)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const r=Bn(n,Yf);return r.J().next((i=>{const o=this.ss(i,zw),s=i.filter((u=>o.indexOf(u)===-1));return Q.forEach(s,(u=>r.delete(u.clientId))).next((()=>s))}))})).catch((()=>[]));if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?Q.resolve(!0):lp(e).get(uf).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Hw)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new de(re.FAILED_PRECONDITION,Gw);return!1}}return!(!this.networkEnabled||!this.inForeground)||Hy(e).J().next((r=>this.ss(r,Hw).find((i=>{if(this.clientId!==i.clientId){const o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,u=this.networkEnabled===i.networkEnabled;if(o||s&&u)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&me(Ya,`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Bm,Yf],(e=>{const n=new eA(e,Yr.ce);return this.Zi(n).next((()=>this.ts(n)))})),this.Ui.close(),this.Ps()}ss(e,n){return e.filter((r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Hy(e).J().next((n=>this.ss(n,zw).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return C0.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new iZ(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return A0.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){me(Ya,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",o=(function(c){return c===18?aX:c===17?RB:c===16?sX:c===15?TI:c===14?xB:c===13?IB:c===12?oX:c===11?CB:void Ie(60245)})(this.Ni);let s;return this.Ui.runTransaction(e,i,o,(u=>(s=new eA(u,this.ci?this.ci.next():Yr.ce),n==="readwrite-primary"?this.Hi(s).next((c=>!!c||this.Yi(s))).next((c=>{if(!c)throw En(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new de(re.FAILED_PRECONDITION,gB);return r(s)})).next((c=>this.Xi(s).next((()=>c)))):this.Is(s).next((()=>r(s)))))).then((u=>(s.raiseOnCommittedEvent(),u)))}Is(e){return lp(e).get(uf).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Hw)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new de(re.FAILED_PRECONDITION,Gw)}))}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return lp(e).put(uf,n)}static v(){return Jo.v()}Zi(e){const n=lp(e);return n.get(uf).next((r=>this.es(r)?(me(Ya,"Releasing primary lease."),n.delete(uf)):Q.resolve()))}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(En(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;FF()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return me(Ya,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return En(Ya,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){En("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function lp(t){return Bn(t,Bm)}function Hy(t){return Bn(t,Yf)}function FI(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=Je(),i=Je();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new BI(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wZ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fq{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return FF()?8:vB(rn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.ys(e,n).next((s=>{o.result=s})).next((()=>{if(!o.result)return this.ws(e,n,i,r).next((s=>{o.result=s}))})).next((()=>{if(o.result)return;const s=new wZ;return this.Ss(e,n,s).next((u=>{if(o.result=u,this.Vs)return this.bs(e,n,s,u.size)}))})).next((()=>o.result))}bs(e,n,r,i){return r.documentReadCount<this.fs?(yf()<=it.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",vf(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Q.resolve()):(yf()<=it.DEBUG&&me("QueryEngine","Query:",vf(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(yf()<=it.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",vf(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Br(n))):Q.resolve())}ys(e,n){if($N(n))return Q.resolve(null);let r=Br(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=Zv(n,null,"F"),r=Br(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const s=Je(...o);return this.ps.getDocuments(e,s).next((u=>this.indexManager.getMinOffset(e,r).next((c=>{const f=this.Ds(n,u);return this.Cs(n,f,s,c.readTime)?this.ys(e,Zv(n,null,"F")):this.vs(e,f,n,c)}))))})))))}ws(e,n,r,i){return $N(n)||i.isEqual(Le.min())?Q.resolve(null):this.ps.getDocuments(e,r).next((o=>{const s=this.Ds(n,o);return this.Cs(n,s,r,i)?Q.resolve(null):(yf()<=it.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),vf(n)),this.vs(e,s,n,pB(i,Gf)).next((u=>u)))}))}Ds(e,n){let r=new It(JB(e));return n.forEach(((i,o)=>{zm(e,o)&&(r=r.add(o))})),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,r){return yf()<=it.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",vf(n)),this.ps.getDocumentsMatchingQuery(e,n,wi.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((o=>(n.forEach((s=>{o=o.insert(s.key,s)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI="LocalStore",bZ=3e8;class SZ{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Bt(We),this.xs=new sa((o=>Ku(o)),qm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Lq(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function Bq(t,e,n,r){return new SZ(t,e,n,r)}async function qq(t,e){const n=be(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((o=>(i=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((o=>{const s=[],u=[];let c=Je();for(const f of i){s.push(f.batchId);for(const h of f.mutations)c=c.add(h.key)}for(const f of o){u.push(f.batchId);for(const h of f.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next((f=>({Ls:f,removedBatchIds:s,addedBatchIds:u})))}))}))}function AZ(t,e){const n=be(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,c,f,h){const y=f.batch,v=y.keys();let E=Q.resolve();return v.forEach((b=>{E=E.next((()=>h.getEntry(c,b))).next((S=>{const A=f.docVersions.get(b);ke(A!==null,48541),S.version.compareTo(A)<0&&(y.applyToRemoteDocument(S,f),S.isValidDocument()&&(S.setReadTime(f.commitVersion),h.addEntry(S)))}))})),E.next((()=>u.mutationQueue.removeMutationBatch(c,y)))})(n,r,e,o).next((()=>o.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let c=Je();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(c=c.add(u.batch.mutations[f].key));return c})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function $q(t){const e=be(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function CZ(t,e){const n=be(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const u=[];e.targetChanges.forEach(((h,y)=>{const v=i.get(y);if(!v)return;u.push(n.Pi.removeMatchingKeys(o,h.removedDocuments,y).next((()=>n.Pi.addMatchingKeys(o,h.addedDocuments,y))));let E=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?E=E.withResumeToken(fn.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):h.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(h.resumeToken,r)),i=i.insert(y,E),(function(S,A,R){return S.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=bZ?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0})(v,E,h)&&u.push(n.Pi.updateTargetData(o,E))}));let c=Qr(),f=Je();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))})),u.push(zq(o,s,e.documentUpdates).next((h=>{c=h.ks,f=h.qs}))),!r.isEqual(Le.min())){const h=n.Pi.getLastRemoteSnapshotVersion(o).next((y=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r)));u.push(h)}return Q.waitFor(u).next((()=>s.apply(o))).next((()=>n.localDocuments.getLocalViewOfDocuments(o,c,f))).next((()=>c))})).then((o=>(n.Ms=i,o)))}function zq(t,e,n){let r=Je(),i=Je();return n.forEach((o=>r=r.add(o))),e.getEntries(t,r).next((o=>{let s=Qr();return n.forEach(((u,c)=>{const f=o.get(u);c.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(u)),c.isNoDocument()&&c.version.isEqual(Le.min())?(e.removeEntry(u,c.readTime),s=s.insert(u,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(c),s=s.insert(u,c)):me(qI,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",c.version)})),{ks:s,qs:i}}))}function IZ(t,e){const n=be(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=al),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function nd(t,e){const n=be(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Pi.getTargetData(r,e).next((o=>o?(i=o,Q.resolve(i)):n.Pi.allocateTargetId(r).next((s=>(i=new Ls(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function rd(t,e,n){const r=be(t),i=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Il(s))throw s;me(qI,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function i_(t,e,n){const r=be(t);let i=Le.min(),o=Je();return r.persistence.runTransaction("Execute query","readwrite",(s=>(function(c,f,h){const y=be(c),v=y.xs.get(h);return v!==void 0?Q.resolve(y.Ms.get(v)):y.Pi.getTargetData(f,h)})(r,s,Br(e)).next((u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,u.targetId).next((c=>{o=c}))})).next((()=>r.Fs.getDocumentsMatchingQuery(s,e,n?i:Le.min(),n?o:Je()))).next((u=>(Kq(r,YB(e),u),{documents:u,Qs:o})))))}function Hq(t,e){const n=be(t),r=be(n.Pi),i=n.Ms.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(o=>r.At(o,e).next((s=>s?s.target:null))))}function Gq(t,e){const n=be(t),r=n.Os.get(e)||Le.min();return n.persistence.runTransaction("Get new document changes","readonly",(i=>n.Ns.getAllFromCollectionGroup(i,e,pB(r,Gf),Number.MAX_SAFE_INTEGER))).then((i=>(Kq(n,e,i),i)))}function Kq(t,e,n){let r=t.Os.get(e)||Le.min();n.forEach(((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),t.Os.set(e,r)}async function xZ(t,e,n,r){const i=be(t);let o=Je(),s=Qr();for(const f of n){const h=e.$s(f.metadata.name);f.document&&(o=o.add(h));const y=e.Us(f);y.setReadTime(e.Ks(f.metadata.readTime)),s=s.insert(h,y)}const u=i.Ns.newChangeBuffer({trackRemovals:!0}),c=await nd(i,(function(h){return Br(xd(ot.fromString(`__bundle__/docs/${h}`)))})(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(f=>zq(f,u,s).next((h=>(u.apply(f),h))).next((h=>i.Pi.removeMatchingKeysForTargetId(f,c.targetId).next((()=>i.Pi.addMatchingKeys(f,o,c.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(f,h.ks,h.qs))).next((()=>h.ks))))))}async function RZ(t,e,n=Je()){const r=await nd(t,Br(NI(e.bundledQuery))),i=be(t);return i.persistence.runTransaction("Save named query","readwrite",(o=>{const s=wn(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Ii.saveNamedQuery(o,e);const u=r.withResumeToken(fn.EMPTY_BYTE_STRING,s);return i.Ms=i.Ms.insert(u.targetId,u),i.Pi.updateTargetData(o,u).next((()=>i.Pi.removeMatchingKeysForTargetId(o,r.targetId))).next((()=>i.Pi.addMatchingKeys(o,n,r.targetId))).next((()=>i.Ii.saveNamedQuery(o,e)))}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jq="firestore_clients";function _k(t,e){return`${jq}_${t}_${e}`}const Wq="firestore_mutations";function Tk(t,e,n){let r=`${Wq}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const Yq="firestore_targets";function Kw(t,e){return`${Yq}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo="SharedClientState";class o_{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ws(e,n,r){const i=JSON.parse(r);let o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new de(i.error.code,i.error.message))),s?new o_(e,n,i.state,o):(En(Bo,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $p{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new de(r.error.code,r.error.message))),o?new $p(e,r.state,i):(En(Bo,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class s_{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=AI();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=_B(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new s_(e,o):(En(Bo,`Failed to parse client data for instance '${e}': ${n}`),null)}}class $I{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new $I(n.clientId,n.onlineState):(En(Bo,`Failed to parse online state: ${e}`),null)}}class pA{constructor(){this.activeTargetIds=AI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jw{constructor(e,n,r,i,o){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Bt(We),this.started=!1,this.Xs=[];const s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.eo=_k(this.persistenceKey,this.Js),this.no=(function(c){return`firestore_sequence_number_${c}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new pA),this.ro=new RegExp(`^${jq}_${s}_([^_]*)$`),this.io=new RegExp(`^${Wq}_${s}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${Yq}_${s}_(\\d+)$`),this.oo=(function(c){return`firestore_online_state_${c}`})(this.persistenceKey),this._o=(function(c){return`firestore_bundle_loaded_v2_${c}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(_k(this.persistenceKey,r));if(i){const o=s_.Ws(r,i);o&&(this.Zs=this.Zs.insert(o.clientId,o))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach(((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)})),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Kw(this.persistenceKey,e));if(i){const o=$p.Ws(e,i);o&&(r=o.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Kw(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach((i=>{this.Po(i)})),this.currentUser=e,r.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return me(Bo,"READ",e,n),n}setItem(e,n){me(Bo,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){me(Bo,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(me(Bo,"EVENT",n.key,n.newValue),n.key===this.eo)return void En("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=(function(o){let s=Yr.ce;if(o!=null)try{const u=JSON.parse(o);ke(typeof u=="number",30636,{So:o}),s=u}catch(u){En(Bo,"Failed to read sequence number from WebStorage",u)}return s})(n.newValue);r!==Yr.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map((i=>this.syncEngine.Do(i))))}}}else this.Xs.push(n)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const i=new o_(this.currentUser,e,n,r),o=Tk(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Gs())}Po(e){const n=Tk(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const i=Kw(this.persistenceKey,e),o=new $p(e,n,r);this.setItem(i,o.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return s_.Ws(r,n)}fo(e,n){const r=this.io.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return o_.Ws(new Jn(o),i,n)}yo(e,n){const r=this.so.exec(e),i=Number(r[1]);return $p.Ws(i,n)}uo(e){return $I.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);me(Bo,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),i=this.lo(this.Zs),o=this.lo(r),s=[],u=[];return o.forEach((c=>{i.has(c)||s.push(c)})),i.forEach((c=>{o.has(c)||u.push(c)})),this.syncEngine.Fo(s,u).then((()=>{this.Zs=r}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=AI();return e.forEach(((r,i)=>{n=n.unionWith(i.activeTargetIds)})),n}}class Jq{constructor(){this.Mo=new pA,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new pA,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PZ{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek="ConnectivityMonitor";class wk{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){me(Ek,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){me(Ek,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gy=null;function mA(){return Gy===null?Gy=(function(){return 268435456+Math.round(2147483648*Math.random())})():Gy++,"0x"+Gy.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww="RestConnection",MZ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class DZ{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Jv?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,o){const s=mA(),u=this.zo(e,n.toUriEncodedString());me(Ww,`Sending RPC '${e}' ${s}:`,u,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,o);const{host:f}=new URL(u),h=bl(f);return this.Jo(e,u,c,r,h).then((y=>(me(Ww,`Received RPC '${e}' ${s}: `,y),y)),(y=>{throw ns(Ww,`RPC '${e}' ${s} failed with error: `,y,"url: ",u,"request:",r),y}))}Ho(e,n,r,i,o,s){return this.Go(e,n,r,i,o)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Id})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,o)=>e[o]=i)),r&&r.headers.forEach(((i,o)=>e[o]=i))}zo(e,n){const r=MZ[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NZ{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er="WebChannelConnection";class kZ extends DZ{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,o){const s=mA();return new Promise(((u,c)=>{const f=new rB;f.setWithCredentials(!0),f.listenOnce(iB.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Tv.NO_ERROR:const y=f.getResponseJson();me(Er,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(y)),u(y);break;case Tv.TIMEOUT:me(Er,`RPC '${e}' ${s} timed out`),c(new de(re.DEADLINE_EXCEEDED,"Request time out"));break;case Tv.HTTP_ERROR:const v=f.getStatus();if(me(Er,`RPC '${e}' ${s} failed with status:`,v,"response text:",f.getResponseText()),v>0){let E=f.getResponseJson();Array.isArray(E)&&(E=E[0]);const b=E==null?void 0:E.error;if(b&&b.status&&b.message){const S=(function(R){const D=R.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(D)>=0?D:re.UNKNOWN})(b.status);c(new de(S,b.message))}else c(new de(re.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new de(re.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{l_:e,streamId:s,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{me(Er,`RPC '${e}' ${s} completed.`)}}));const h=JSON.stringify(i);me(Er,`RPC '${e}' ${s} sending request:`,i),f.send(n,"POST",h,r,15)}))}T_(e,n,r){const i=mA(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=aB(),u=sB(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=o.join("");me(Er,`Creating RPC '${e}' stream ${i}: ${h}`,c);const y=s.createWebChannel(h,c);this.I_(y);let v=!1,E=!1;const b=new NZ({Yo:A=>{E?me(Er,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(v||(me(Er,`Opening RPC '${e}' stream ${i} transport.`),y.open(),v=!0),me(Er,`RPC '${e}' stream ${i} sending:`,A),y.send(A))},Zo:()=>y.close()}),S=(A,R,D)=>{A.listen(R,(M=>{try{D(M)}catch(U){setTimeout((()=>{throw U}),0)}}))};return S(y,wp.EventType.OPEN,(()=>{E||(me(Er,`RPC '${e}' stream ${i} transport opened.`),b.o_())})),S(y,wp.EventType.CLOSE,(()=>{E||(E=!0,me(Er,`RPC '${e}' stream ${i} transport closed`),b.a_(),this.E_(y))})),S(y,wp.EventType.ERROR,(A=>{E||(E=!0,ns(Er,`RPC '${e}' stream ${i} transport errored. Name:`,A.name,"Message:",A.message),b.a_(new de(re.UNAVAILABLE,"The operation could not be completed")))})),S(y,wp.EventType.MESSAGE,(A=>{var R;if(!E){const D=A.data[0];ke(!!D,16349);const M=D,U=(M==null?void 0:M.error)||((R=M[0])==null?void 0:R.error);if(U){me(Er,`RPC '${e}' stream ${i} received error:`,U);const q=U.status;let z=(function(N){const $=xn[N];if($!==void 0)return uq($)})(q),k=U.message;z===void 0&&(z=re.INTERNAL,k="Unknown error status: "+q+" with message "+U.message),E=!0,b.a_(new de(z,k)),y.close()}else me(Er,`RPC '${e}' stream ${i} received:`,D),b.u_(D)}})),S(u,oB.STAT_EVENT,(A=>{A.stat===WS.PROXY?me(Er,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===WS.NOPROXY&&me(Er,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{b.__()}),0),b}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qq(){return typeof window<"u"?window:null}function Pv(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm(t){return new FX(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&me("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk="PersistentStream";class Xq{constructor(e,n,r,i,o,s,u,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new zI(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===re.RESOURCE_EXHAUSTED?(En(n.toString()),En("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new de(re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return me(bk,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(me(bk,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class OZ extends Xq{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=$X(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Le.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?Le.min():s.readTime?wn(s.readTime):Le.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=uA(this.serializer),n.addTarget=(function(o,s){let u;const c=s.target;if(u=Qv(c)?{documents:_q(o,c)}:{query:Tq(o,c).ft},u.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){u.resumeToken=hq(o,s.resumeToken);const f=aA(o,s.expectedCount);f!==null&&(u.expectedCount=f)}else if(s.snapshotVersion.compareTo(Le.min())>0){u.readTime=td(o,s.snapshotVersion.toTimestamp());const f=aA(o,s.expectedCount);f!==null&&(u.expectedCount=f)}return u})(this.serializer,e);const r=HX(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=uA(this.serializer),n.removeTarget=e,this.q_(n)}}class VZ extends Xq{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=zX(e.writeResults,e.commitTime),r=wn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=uA(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>fm(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LZ{}class UZ extends LZ{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new de(re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,s])=>this.connection.Go(e,lA(n,r),i,o,s))).catch((o=>{throw o.name==="FirebaseError"?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new de(re.UNKNOWN,o.toString())}))}Ho(e,n,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,u])=>this.connection.Ho(e,lA(n,r),i,s,u,o))).catch((s=>{throw s.name==="FirebaseError"?(s.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new de(re.UNKNOWN,s.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class FZ{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(En(n),this.aa=!1):me("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xu="RemoteStore";class BZ{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((s=>{r.enqueueAndForget((async()=>{Rl(this)&&(me(Xu,"Restarting streams for network reachability change."),await(async function(c){const f=be(c);f.Ea.add(4),await Md(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Wm(f)})(this))}))})),this.Ra=new FZ(r,i)}}async function Wm(t){if(Rl(t))for(const e of t.da)await e(!0)}async function Md(t){for(const e of t.da)await e(!1)}function x0(t,e){const n=be(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),KI(n)?GI(n):Nd(n).O_()&&HI(n,e))}function id(t,e){const n=be(t),r=Nd(n);n.Ia.delete(e),r.O_()&&Zq(n,e),n.Ia.size===0&&(r.O_()?r.L_():Rl(n)&&n.Ra.set("Unknown"))}function HI(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Nd(t).Y_(e)}function Zq(t,e){t.Va.Ue(e),Nd(t).Z_(e)}function GI(t){t.Va=new OX({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Nd(t).start(),t.Ra.ua()}function KI(t){return Rl(t)&&!Nd(t).x_()&&t.Ia.size>0}function Rl(t){return be(t).Ea.size===0}function e6(t){t.Va=void 0}async function qZ(t){t.Ra.set("Online")}async function $Z(t){t.Ia.forEach(((e,n)=>{HI(t,e)}))}async function zZ(t,e){e6(t),KI(t)?(t.Ra.ha(e),GI(t)):t.Ra.set("Unknown")}async function HZ(t,e,n){if(t.Ra.set("Online"),e instanceof dq&&e.state===2&&e.cause)try{await(async function(i,o){const s=o.cause;for(const u of o.targetIds)i.Ia.has(u)&&(await i.remoteSyncer.rejectListen(u,s),i.Ia.delete(u),i.Va.removeTarget(u))})(t,e)}catch(r){me(Xu,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await a_(t,r)}else if(e instanceof xv?t.Va.Ze(e):e instanceof fq?t.Va.st(e):t.Va.tt(e),!n.isEqual(Le.min()))try{const r=await $q(t.localStore);n.compareTo(r)>=0&&await(function(o,s){const u=o.Va.Tt(s);return u.targetChanges.forEach(((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const h=o.Ia.get(f);h&&o.Ia.set(f,h.withResumeToken(c.resumeToken,s))}})),u.targetMismatches.forEach(((c,f)=>{const h=o.Ia.get(c);if(!h)return;o.Ia.set(c,h.withResumeToken(fn.EMPTY_BYTE_STRING,h.snapshotVersion)),Zq(o,c);const y=new Ls(h.target,c,f,h.sequenceNumber);HI(o,y)})),o.remoteSyncer.applyRemoteEvent(u)})(t,n)}catch(r){me(Xu,"Failed to raise snapshot:",r),await a_(t,r)}}async function a_(t,e,n){if(!Il(e))throw e;t.Ea.add(1),await Md(t),t.Ra.set("Offline"),n||(n=()=>$q(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{me(Xu,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Wm(t)}))}function t6(t,e){return e().catch((n=>a_(t,n,e)))}async function Dd(t){const e=be(t),n=vl(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:al;for(;GZ(e);)try{const i=await IZ(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,KZ(e,i)}catch(i){await a_(e,i)}n6(e)&&r6(e)}function GZ(t){return Rl(t)&&t.Ta.length<10}function KZ(t,e){t.Ta.push(e);const n=vl(t);n.O_()&&n.X_&&n.ea(e.mutations)}function n6(t){return Rl(t)&&!vl(t).x_()&&t.Ta.length>0}function r6(t){vl(t).start()}async function jZ(t){vl(t).ra()}async function WZ(t){const e=vl(t);for(const n of t.Ta)e.ea(n.mutations)}async function YZ(t,e,n){const r=t.Ta.shift(),i=RI.from(r,e,n);await t6(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await Dd(t)}async function JZ(t,e){e&&vl(t).X_&&await(async function(r,i){if((function(s){return lq(s)&&s!==re.ABORTED})(i.code)){const o=r.Ta.shift();vl(r).B_(),await t6(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i))),await Dd(r)}})(t,e),n6(t)&&r6(t)}async function Sk(t,e){const n=be(t);n.asyncQueue.verifyOperationInProgress(),me(Xu,"RemoteStore received new credentials");const r=Rl(n);n.Ea.add(3),await Md(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Wm(n)}async function gA(t,e){const n=be(t);e?(n.Ea.delete(2),await Wm(n)):e||(n.Ea.add(2),await Md(n),n.Ra.set("Unknown"))}function Nd(t){return t.ma||(t.ma=(function(n,r,i){const o=be(n);return o.sa(),new OZ(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:qZ.bind(null,t),t_:$Z.bind(null,t),r_:zZ.bind(null,t),H_:HZ.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),KI(t)?GI(t):t.Ra.set("Unknown")):(await t.ma.stop(),e6(t))}))),t.ma}function vl(t){return t.fa||(t.fa=(function(n,r,i){const o=be(n);return o.sa(),new VZ(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:jZ.bind(null,t),r_:JZ.bind(null,t),ta:WZ.bind(null,t),na:YZ.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Dd(t)):(await t.fa.stop(),t.Ta.length>0&&(me(Xu,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new gr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((s=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,u=new jI(e,n,s,i,o);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kd(t,e){if(En("AsyncQueue",`${e}: ${t}`),Il(t))return new de(re.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{static emptySet(e){return new Mf(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ee.comparator(n.key,r.key):(n,r)=>Ee.comparator(n.key,r.key),this.keyedMap=bp(),this.sortedSet=new Bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Mf)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Mf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(){this.ga=new Bt(Ee.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ie(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class od{constructor(e,n,r,i,o,s,u,c,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach((u=>{s.push({type:0,doc:u})})),new od(e,n,Mf.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$m(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QZ{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class XZ{constructor(){this.queries=Ck(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=be(n),o=i.queries;i.queries=Ck(),o.forEach(((s,u)=>{for(const c of u.Sa)c.onError(r)}))})(this,new de(re.ABORTED,"Firestore shutting down"))}}function Ck(){return new sa((t=>WB(t)),$m)}async function WI(t,e){const n=be(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new QZ,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const u=kd(s,`Initialization of query '${vf(e.query)}' failed`);return void e.onError(u)}n.queries.set(i,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&JI(n)}async function YI(t,e){const n=be(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ZZ(t,e){const n=be(t);let r=!1;for(const i of e){const o=i.query,s=n.queries.get(o);if(s){for(const u of s.Sa)u.Fa(i)&&(r=!0);s.wa=i}}r&&JI(n)}function eee(t,e,n){const r=be(t),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(n);r.queries.delete(e)}function JI(t){t.Ca.forEach((e=>{e.next()}))}var yA,Ik;(Ik=yA||(yA={})).Ma="default",Ik.Cache="cache";class QI{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new od(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=od.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==yA.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tee{constructor(e,n){this.Qa=e,this.byteLength=n}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e){this.serializer=e}$s(e){return Qo(this.serializer,e)}Us(e){return e.metadata.exists?vq(this.serializer,e.document,!1):Ht.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return wn(e)}}class nee{constructor(e,n){this.Ua=e,this.serializer=n,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=i6(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++n;const r=ot.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,{...this.progress}):null}za(e){const n=new Map,r=new xk(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.$s(i.metadata.name);for(const s of i.metadata.queries){const u=(n.get(s)||Je()).add(o);n.set(s,u)}}return n}async ja(e){const n=await xZ(e,new xk(this.serializer),this.Wa,this.Ua.id),r=this.za(this.documents);for(const i of this.Ka)await RZ(e,i,r.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:n}}}function i6(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(e){this.key=e}}class s6{constructor(e){this.key=e}}class a6{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Je(),this.mutatedKeys=Je(),this.eu=JB(e),this.tu=new Mf(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Ak,i=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,u=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((h,y)=>{const v=i.get(h),E=zm(this.query,y)?y:null,b=!!v&&this.mutatedKeys.has(v.key),S=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let A=!1;v&&E?v.data.isEqual(E.data)?b!==S&&(r.track({type:3,doc:E}),A=!0):this.su(v,E)||(r.track({type:2,doc:E}),A=!0,(c&&this.eu(E,c)>0||f&&this.eu(E,f)<0)&&(u=!0)):!v&&E?(r.track({type:0,doc:E}),A=!0):v&&!E&&(r.track({type:1,doc:v}),A=!0,(c||f)&&(u=!0)),A&&(E?(s=s.add(E),o=S?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))})),this.query.limit!==null)for(;s.size>this.query.limit;){const h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{tu:s,iu:r,Cs:u,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort(((h,y)=>(function(E,b){const S=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{Rt:A})}};return S(E)-S(b)})(h.type,y.type)||this.eu(h.doc,y.doc))),this.ou(r),i=i??!1;const u=n&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,f=c!==this.Za;return this.Za=c,s.length!==0||f?{snapshot:new od(this.query,e.tu,o,s,e.mutatedKeys,c===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ak,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Je(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new s6(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new o6(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Je();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return od.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Pl="SyncEngine";class ree{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class iee{constructor(e){this.key=e,this.hu=!1}}class oee{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new sa((u=>WB(u)),$m),this.Iu=new Map,this.Eu=new Set,this.du=new Bt(Ee.comparator),this.Au=new Map,this.Ru=new VI,this.Vu={},this.mu=new Map,this.fu=Qu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function see(t,e,n=!0){const r=R0(t);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await l6(r,e,n,!0),i}async function aee(t,e){const n=R0(t);await l6(n,e,!0,!1)}async function l6(t,e,n,r){const i=await nd(t.localStore,Br(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let u;return r&&(u=await XI(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&x0(t.remoteStore,i),u}async function XI(t,e,n,r,i){t.pu=(y,v,E)=>(async function(S,A,R,D){let M=A.view.ru(R);M.Cs&&(M=await i_(S.localStore,A.query,!1).then((({documents:k})=>A.view.ru(k,M))));const U=D&&D.targetChanges.get(A.targetId),q=D&&D.targetMismatches.get(A.targetId)!=null,z=A.view.applyChanges(M,S.isPrimaryClient,U,q);return vA(S,A.targetId,z.au),z.snapshot})(t,y,v,E);const o=await i_(t.localStore,e,!0),s=new a6(e,o.Qs),u=s.ru(o.documents),c=Km.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),f=s.applyChanges(u,t.isPrimaryClient,c);vA(t,n,f.au);const h=new ree(e,n,s);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function lee(t,e,n){const r=be(t),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter((s=>!$m(s,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await rd(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&id(r.remoteStore,i.targetId),sd(r,i.targetId)})).catch(Cl)):(sd(r,i.targetId),await rd(r.localStore,i.targetId,!0))}async function uee(t,e){const n=be(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),id(n.remoteStore,r.targetId))}async function cee(t,e,n){const r=nx(t);try{const i=await(function(s,u){const c=be(s),f=wt.now(),h=u.reduce(((E,b)=>E.add(b.key)),Je());let y,v;return c.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let b=Qr(),S=Je();return c.Ns.getEntries(E,h).next((A=>{b=A,b.forEach(((R,D)=>{D.isValidDocument()||(S=S.add(R))}))})).next((()=>c.localDocuments.getOverlayedDocuments(E,b))).next((A=>{y=A;const R=[];for(const D of u){const M=DX(D,y.get(D.key).overlayedDocument);M!=null&&R.push(new aa(D.key,M,FB(M.value.mapValue),Zt.exists(!0)))}return c.mutationQueue.addMutationBatch(E,f,R,u)})).next((A=>{v=A;const R=A.applyToLocalDocumentSet(y,S);return c.documentOverlayCache.saveOverlays(E,A.batchId,R)}))})).then((()=>({batchId:v.batchId,changes:XB(y)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,u,c){let f=s.Vu[s.currentUser.toKey()];f||(f=new Bt(We)),f=f.insert(u,c),s.Vu[s.currentUser.toKey()]=f})(r,i.batchId,n),await la(r,i.changes),await Dd(r.remoteStore)}catch(i){const o=kd(i,"Failed to persist write");n.reject(o)}}async function u6(t,e){const n=be(t);try{const r=await CZ(n.localStore,e);e.targetChanges.forEach(((i,o)=>{const s=n.Au.get(o);s&&(ke(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?ke(s.hu,14607):i.removedDocuments.size>0&&(ke(s.hu,42227),s.hu=!1))})),await la(n,r,e)}catch(r){await Cl(r)}}function Rk(t,e,n){const r=be(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((o,s)=>{const u=s.view.va(e);u.snapshot&&i.push(u.snapshot)})),(function(s,u){const c=be(s);c.onlineState=u;let f=!1;c.queries.forEach(((h,y)=>{for(const v of y.Sa)v.va(u)&&(f=!0)})),f&&JI(c)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function fee(t,e,n){const r=be(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),o=i&&i.key;if(o){let s=new Bt(Ee.comparator);s=s.insert(o,Ht.newNoDocument(o,Le.min()));const u=Je().add(o),c=new Gm(Le.min(),new Map,new Bt(We),s,u);await u6(r,c),r.du=r.du.remove(o),r.Au.delete(e),tx(r)}else await rd(r.localStore,e,!1).then((()=>sd(r,e,n))).catch(Cl)}async function dee(t,e){const n=be(t),r=e.batch.batchId;try{const i=await AZ(n.localStore,e);ex(n,r,null),ZI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await la(n,i)}catch(i){await Cl(i)}}async function hee(t,e,n){const r=be(t);try{const i=await(function(s,u){const c=be(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let h;return c.mutationQueue.lookupMutationBatch(f,u).next((y=>(ke(y!==null,37113),h=y.keys(),c.mutationQueue.removeMutationBatch(f,y)))).next((()=>c.mutationQueue.performConsistencyCheck(f))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(f,h,u))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,h))).next((()=>c.localDocuments.getDocuments(f,h)))}))})(r.localStore,e);ex(r,e,n),ZI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await la(r,i)}catch(i){await Cl(i)}}async function pee(t,e){const n=be(t);Rl(n.remoteStore)||me(Pl,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await(function(s){const u=be(s);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(c=>u.mutationQueue.getHighestUnacknowledgedBatchId(c)))})(n.localStore);if(r===al)return void e.resolve();const i=n.mu.get(r)||[];i.push(e),n.mu.set(r,i)}catch(r){const i=kd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function ZI(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function ex(t,e,n){const r=be(t);let i=r.Vu[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function sd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||c6(t,r)}))}function c6(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(id(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),tx(t))}function vA(t,e,n){for(const r of n)r instanceof o6?(t.Ru.addReference(r.key,e),mee(t,r)):r instanceof s6?(me(Pl,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||c6(t,r.key)):Ie(19791,{wu:r})}function mee(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(me(Pl,"New document in limbo: "+n),t.Eu.add(r),tx(t))}function tx(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Ee(ot.fromString(e)),r=t.fu.next();t.Au.set(r,new iee(n)),t.du=t.du.insert(n,r),x0(t.remoteStore,new Ls(Br(xd(n.path)),r,"TargetPurposeLimboResolution",Yr.ce))}}async function la(t,e,n){const r=be(t),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach(((u,c)=>{s.push(r.pu(c,e,n).then((f=>{var h;if((f||n)&&r.isPrimaryClient){const y=f?!f.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,y?"current":"not-current")}if(f){i.push(f);const y=BI.As(c.targetId,f);o.push(y)}})))})),await Promise.all(s),r.Pu.H_(i),await(async function(c,f){const h=be(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>Q.forEach(f,(v=>Q.forEach(v.Es,(E=>h.persistence.referenceDelegate.addReference(y,v.targetId,E))).next((()=>Q.forEach(v.ds,(E=>h.persistence.referenceDelegate.removeReference(y,v.targetId,E)))))))))}catch(y){if(!Il(y))throw y;me(qI,"Failed to update sequence numbers: "+y)}for(const y of f){const v=y.targetId;if(!y.fromCache){const E=h.Ms.get(v),b=E.snapshotVersion,S=E.withLastLimboFreeSnapshotVersion(b);h.Ms=h.Ms.insert(v,S)}}})(r.localStore,o))}async function gee(t,e){const n=be(t);if(!n.currentUser.isEqual(e)){me(Pl,"User change. New user:",e.toKey());const r=await qq(n.localStore,e);n.currentUser=e,(function(o,s){o.mu.forEach((u=>{u.forEach((c=>{c.reject(new de(re.CANCELLED,s))}))})),o.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await la(n,r.Ls)}}function yee(t,e){const n=be(t),r=n.Au.get(e);if(r&&r.hu)return Je().add(r.key);{let i=Je();const o=n.Iu.get(e);if(!o)return i;for(const s of o){const u=n.Tu.get(s);i=i.unionWith(u.view.nu)}return i}}async function vee(t,e){const n=be(t),r=await i_(n.localStore,e.query,!0),i=e.view.cu(r);return n.isPrimaryClient&&vA(n,e.targetId,i.au),i}async function _ee(t,e){const n=be(t);return Gq(n.localStore,e).then((r=>la(n,r)))}async function Tee(t,e,n,r){const i=be(t),o=await(function(u,c){const f=be(u),h=be(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",(y=>h.er(y,c).next((v=>v?f.localDocuments.getDocuments(y,v):Q.resolve(null)))))})(i.localStore,e);o!==null?(n==="pending"?await Dd(i.remoteStore):n==="acknowledged"||n==="rejected"?(ex(i,e,r||null),ZI(i,e),(function(u,c){be(be(u).mutationQueue).ir(c)})(i.localStore,e)):Ie(6720,"Unknown batchState",{Su:n}),await la(i,o)):me(Pl,"Cannot apply mutation batch with id: "+e)}async function Eee(t,e){const n=be(t);if(R0(n),nx(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await Pk(n,r.toArray());n.gu=!0,await gA(n.remoteStore,!0);for(const o of i)x0(n.remoteStore,o)}else if(e===!1&&n.gu!==!1){const r=[];let i=Promise.resolve();n.Iu.forEach(((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then((()=>(sd(n,s),rd(n.localStore,s,!0)))),id(n.remoteStore,s)})),await i,await Pk(n,r),(function(s){const u=be(s);u.Au.forEach(((c,f)=>{id(u.remoteStore,f)})),u.Ru.Jr(),u.Au=new Map,u.du=new Bt(Ee.comparator)})(n),n.gu=!1,await gA(n.remoteStore,!1)}}async function Pk(t,e,n){const r=be(t),i=[],o=[];for(const s of e){let u;const c=r.Iu.get(s);if(c&&c.length!==0){u=await nd(r.localStore,Br(c[0]));for(const f of c){const h=r.Tu.get(f),y=await vee(r,h);y.snapshot&&o.push(y.snapshot)}}else{const f=await Hq(r.localStore,s);u=await nd(r.localStore,f),await XI(r,f6(f),s,!1,u.resumeToken)}i.push(u)}return r.Pu.H_(o),i}function f6(t){return jB(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function wee(t){return(function(n){return be(be(n).persistence).Ts()})(be(t).localStore)}async function bee(t,e,n,r){const i=be(t);if(i.gu)return void me(Pl,"Ignoring unexpected query state notification.");const o=i.Iu.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{const s=await Gq(i.localStore,YB(o[0])),u=Gm.createSynthesizedRemoteEventForCurrentChange(e,n==="current",fn.EMPTY_BYTE_STRING);await la(i,s,u);break}case"rejected":await rd(i.localStore,e,!0),sd(i,e,r);break;default:Ie(64155,n)}}async function See(t,e,n){const r=R0(t);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){me(Pl,"Adding an already active target "+i);continue}const o=await Hq(r.localStore,i),s=await nd(r.localStore,o);await XI(r,f6(o),s.targetId,!1,s.resumeToken),x0(r.remoteStore,s)}for(const i of n)r.Iu.has(i)&&await rd(r.localStore,i,!1).then((()=>{id(r.remoteStore,i),sd(r,i)})).catch(Cl)}}function R0(t){const e=be(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=u6.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yee.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fee.bind(null,e),e.Pu.H_=ZZ.bind(null,e.eventManager),e.Pu.yu=eee.bind(null,e.eventManager),e}function nx(t){const e=be(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dee.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hee.bind(null,e),e}function Aee(t,e,n){const r=be(t);(async function(o,s,u){try{const c=await s.getMetadata();if(await(function(E,b){const S=be(E),A=wn(b.createTime);return S.persistence.runTransaction("hasNewerBundle","readonly",(R=>S.Ii.getBundleMetadata(R,b.id))).then((R=>!!R&&R.createTime.compareTo(A)>=0))})(o.localStore,c))return await s.close(),u._completeWith((function(E){return{taskState:"Success",documentsLoaded:E.totalDocuments,bytesLoaded:E.totalBytes,totalDocuments:E.totalDocuments,totalBytes:E.totalBytes}})(c)),Promise.resolve(new Set);u._updateProgress(i6(c));const f=new nee(c,s.serializer);let h=await s.bu();for(;h;){const v=await f.Ga(h);v&&u._updateProgress(v),h=await s.bu()}const y=await f.ja(o.localStore);return await la(o,y.Ha,void 0),await(function(E,b){const S=be(E);return S.persistence.runTransaction("Save bundle","readwrite",(A=>S.Ii.saveBundleMetadata(A,b)))})(o.localStore,c),u._completeWith(y.progress),Promise.resolve(y.Ja)}catch(c){return ns(Pl,`Loading bundle failed with ${c}`),u._failWith(c),Promise.resolve(new Set)}})(r,e,n).then((i=>{r.sharedClientState.notifyBundleLoaded(i)}))}class dm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Bq(this.persistence,new Fq,e.initialUser,this.serializer)}Cu(e){return new LI(I0.mi,this.serializer)}Du(e){return new Jq}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}dm.provider={build:()=>new dm};class Cee extends dm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ke(this.persistence.referenceDelegate instanceof r_,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Nq(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?br.withCacheSize(this.cacheSizeBytes):br.DEFAULT;return new LI((r=>r_.mi(r,n)),this.serializer)}}class d6 extends dm{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await nx(this.xu.syncEngine),await Dd(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return Bq(this.persistence,new Fq,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new Nq(r,e.asyncQueue,n)}Mu(e,n){const r=new OQ(n,this.persistence);return new kQ(e.asyncQueue,r)}Cu(e){const n=FI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?br.withCacheSize(this.cacheSizeBytes):br.DEFAULT;return new UI(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,Qq(),Pv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new Jq}}class Iee extends d6{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof jw&&(this.sharedClientState.syncEngine={Co:Tee.bind(null,n),vo:bee.bind(null,n),Fo:See.bind(null,n),Ts:wee.bind(null,n),Do:_ee.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await Eee(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const n=Qq();if(!jw.v(n))throw new de(re.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=FI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new jw(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class hm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Rk(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=gee.bind(null,this.syncEngine),await gA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new XZ})()}createDatastore(e){const n=jm(e.databaseInfo.databaseId),r=(function(o){return new kZ(o)})(e.databaseInfo);return(function(o,s,u,c){return new UZ(o,s,u,c)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,o,s,u){return new BZ(r,i,o,s,u)})(this.localStore,this.datastore,e.asyncQueue,(n=>Rk(this.syncEngine,n,0)),(function(){return wk.v()?new wk:new PZ})())}createSyncEngine(e,n){return(function(i,o,s,u,c,f,h){const y=new oee(i,o,s,u,c,f);return h&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(i){const o=be(i);me(Xu,"RemoteStore shutting down."),o.Ea.add(5),await Md(o),o.Aa.shutdown(),o.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}hm.provider={build:()=>new hm};function Mk(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):En("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xee{constructor(e,n){this.Bu=e,this.serializer=n,this.metadata=new gr,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((r=>{r&&r.$a()?this.metadata.resolve(r.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Qa)}`))}),(r=>this.metadata.reject(r)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const n=this.Lu.decode(e),r=Number(n);isNaN(r)&&this.Qu(`length string (${n}) is not valid number`);const i=await this.$u(r);return new tee(JSON.parse(i),e.length+r)}Uu(){return this.buffer.findIndex((e=>e===123))}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const n=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ree{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new de(re.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(i,o){const s=be(i),u={documents:o.map((y=>cm(s.serializer,y)))},c=await s.Ho("BatchGetDocuments",s.serializer.databaseId,ot.emptyPath(),u,o.length),f=new Map;c.forEach((y=>{const v=qX(s.serializer,y);f.set(v.key.toString(),v)}));const h=[];return o.forEach((y=>{const v=f.get(y.toString());ke(!!v,55234,{key:y}),h.push(v)})),h})(this.datastore,e);return n.forEach((r=>this.recordVersion(r))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Pd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,r)=>{const i=Ee.fromPath(r);this.mutations.push(new II(i,this.precondition(i)))})),await(async function(r,i){const o=be(r),s={writes:i.map((u=>fm(o.serializer,u)))};await o.Go("Commit",o.serializer.databaseId,ot.emptyPath(),s)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Ie(50498,{Gu:e.constructor.name});n=Le.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new de(re.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Le.min())?Zt.exists(!1):Zt.updateTime(n):Zt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Le.min()))throw new de(re.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zt.updateTime(n)}return Zt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pee{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.zu=r.maxAttempts,this.M_=new zI(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new Ree(this.datastore),n=this.Hu(e);n&&n.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((i=>{this.Yu(i)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const n=this.updateFunction(e);return!Fm(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!lq(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _l="FirestoreClient";class Mee{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Jn.UNAUTHENTICATED,this.clientId=hI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async s=>{me(_l,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,(s=>(me(_l,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new gr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=kd(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Yw(t,e){t.asyncQueue.verifyOperationInProgress(),me(_l,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await qq(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Dk(t,e){t.asyncQueue.verifyOperationInProgress();const n=await rx(t);me(_l,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>Sk(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>Sk(e.remoteStore,i))),t._onlineComponents=e}async function rx(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){me(_l,"Using user provided OfflineComponentProvider");try{await Yw(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===re.FAILED_PRECONDITION||i.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;ns("Error using user provided cache. Falling back to memory cache: "+n),await Yw(t,new dm)}}else me(_l,"Using default OfflineComponentProvider"),await Yw(t,new Cee(void 0));return t._offlineComponents}async function M0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(me(_l,"Using user provided OnlineComponentProvider"),await Dk(t,t._uninitializedComponentsProvider._online)):(me(_l,"Using default OnlineComponentProvider"),await Dk(t,new hm))),t._onlineComponents}function h6(t){return rx(t).then((e=>e.persistence))}function ix(t){return rx(t).then((e=>e.localStore))}function p6(t){return M0(t).then((e=>e.remoteStore))}function ox(t){return M0(t).then((e=>e.syncEngine))}function Dee(t){return M0(t).then((e=>e.datastore))}async function ad(t){const e=await M0(t),n=e.eventManager;return n.onListen=see.bind(null,e.syncEngine),n.onUnlisten=lee.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=aee.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=uee.bind(null,e.syncEngine),n}function Nee(t){return t.asyncQueue.enqueue((async()=>{const e=await h6(t),n=await p6(t);return e.setNetworkEnabled(!0),(function(i){const o=be(i);return o.Ea.delete(0),Wm(o)})(n)}))}function kee(t){return t.asyncQueue.enqueue((async()=>{const e=await h6(t),n=await p6(t);return e.setNetworkEnabled(!1),(async function(i){const o=be(i);o.Ea.add(0),await Md(o),o.Ra.set("Offline")})(n)}))}function Oee(t,e){const n=new gr;return t.asyncQueue.enqueueAndForget((async()=>(async function(i,o,s){try{const u=await(function(f,h){const y=be(f);return y.persistence.runTransaction("read document","readonly",(v=>y.localDocuments.getDocument(v,h)))})(i,o);u.isFoundDocument()?s.resolve(u):u.isNoDocument()?s.resolve(null):s.reject(new de(re.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const c=kd(u,`Failed to get document '${o} from cache`);s.reject(c)}})(await ix(t),e,n))),n.promise}function m6(t,e,n={}){const r=new gr;return t.asyncQueue.enqueueAndForget((async()=>(function(o,s,u,c,f){const h=new P0({next:v=>{h.Nu(),s.enqueueAndForget((()=>YI(o,y)));const E=v.docs.has(u);!E&&v.fromCache?f.reject(new de(re.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&v.fromCache&&c&&c.source==="server"?f.reject(new de(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),y=new QI(xd(u.path),h,{includeMetadataChanges:!0,qa:!0});return WI(o,y)})(await ad(t),t.asyncQueue,e,n,r))),r.promise}function Vee(t,e){const n=new gr;return t.asyncQueue.enqueueAndForget((async()=>(async function(i,o,s){try{const u=await i_(i,o,!0),c=new a6(o,u.Qs),f=c.ru(u.documents),h=c.applyChanges(f,!1);s.resolve(h.snapshot)}catch(u){const c=kd(u,`Failed to execute query '${o} against cache`);s.reject(c)}})(await ix(t),e,n))),n.promise}function g6(t,e,n={}){const r=new gr;return t.asyncQueue.enqueueAndForget((async()=>(function(o,s,u,c,f){const h=new P0({next:v=>{h.Nu(),s.enqueueAndForget((()=>YI(o,y))),v.fromCache&&c.source==="server"?f.reject(new de(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(v)},error:v=>f.reject(v)}),y=new QI(u,h,{includeMetadataChanges:!0,qa:!0});return WI(o,y)})(await ad(t),t.asyncQueue,e,n,r))),r.promise}function Lee(t,e){const n=new P0(e);return t.asyncQueue.enqueueAndForget((async()=>(function(i,o){be(i).Ca.add(o),o.next()})(await ad(t),n))),()=>{n.Nu(),t.asyncQueue.enqueueAndForget((async()=>(function(i,o){be(i).Ca.delete(o)})(await ad(t),n)))}}function Uee(t,e,n,r){const i=(function(s,u){let c;return c=typeof s=="string"?cq().encode(s):s,(function(h,y){return new xee(h,y)})((function(h,y){if(h instanceof Uint8Array)return Mk(h,y);if(h instanceof ArrayBuffer)return Mk(new Uint8Array(h),y);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(c),u)})(n,jm(e));t.asyncQueue.enqueueAndForget((async()=>{Aee(await ox(t),i,r)}))}function Fee(t,e){return t.asyncQueue.enqueue((async()=>(function(r,i){const o=be(r);return o.persistence.runTransaction("Get named query","readonly",(s=>o.Ii.getNamedQuery(s,i)))})(await ix(t),e)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y6(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v6="firestore.googleapis.com",kk=!0;class Ok{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=v6,this.ssl=kk}else this.host=e.host,this.ssl=e.ssl??kk;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Rq;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<sZ)throw new de(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=y6(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new de(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new de(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new de(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ym{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ok({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ok(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new wQ;switch(r.type){case"firstParty":return new CQ(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new de(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=Nk.get(n);r&&(me("ComponentProvider","Removing Datastore"),Nk.delete(n),r.terminate())})(this),Promise.resolve()}}function _6(t,e,n,r={}){var f;t=dt(t,Ym);const i=bl(e),o=t._getSettings(),s={...o,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;i&&(FC(`https://${u}`),BC("Firestore",!0)),o.host!==v6&&o.host!==u&&ns("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...o,host:u,ssl:i,emulatorOptions:r};if(!Ks(c,s)&&(t._setSettings(c),r.mockUserToken)){let h,y;if(typeof r.mockUserToken=="string")h=r.mockUserToken,y=Jn.MOCK_USER;else{h=OF(r.mockUserToken,(f=t._app)==null?void 0:f.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new de(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Jn(v)}t._authCredentials=new bQ(new uB(h,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $r=class T6{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new T6(this.firestore,e,this._query)}},Ft=class Cp{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ll(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Cp(this.firestore,e,this._key)}toJSON(){return{type:Cp._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Um(n,Cp._jsonSchema))return new Cp(e,r||null,new Ee(ot.fromString(n.referencePath)))}};Ft._jsonSchemaVersion="firestore/documentReference/1.0",Ft._jsonSchema={type:Pn("string",Ft._jsonSchemaVersion),referencePath:Pn("string")};let ll=class E6 extends $r{constructor(e,n,r){super(e,n,xd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ft(this.firestore,null,new Ee(e))}withConverter(e){return new E6(this.firestore,e,this._path)}};function Ns(t,e,...n){if(t=Pe(t),pI("collection","path",e),t instanceof Ym){const r=ot.fromString(e,...n);return bN(r),new ll(t,null,r)}{if(!(t instanceof Ft||t instanceof ll))throw new de(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ot.fromString(e,...n));return bN(r),new ll(t.firestore,null,r)}}function Bee(t,e){if(t=dt(t,Ym),pI("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new de(re.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new $r(t,null,(function(r){return new oa(ot.emptyPath(),r)})(e))}function ho(t,e,...n){if(t=Pe(t),arguments.length===1&&(e=hI.newId()),pI("doc","path",e),t instanceof Ym){const r=ot.fromString(e,...n);return wN(r),new Ft(t,null,new Ee(r))}{if(!(t instanceof Ft||t instanceof ll))throw new de(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ot.fromString(e,...n));return wN(r),new Ft(t.firestore,t instanceof ll?t.converter:null,new Ee(r))}}function w6(t,e){return t=Pe(t),e=Pe(e),(t instanceof Ft||t instanceof ll)&&(e instanceof Ft||e instanceof ll)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function b6(t,e){return t=Pe(t),e=Pe(e),t instanceof $r&&e instanceof $r&&t.firestore===e.firestore&&$m(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk="AsyncQueue";class Lk{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new zI(this,"async_queue_retry"),this._c=()=>{const r=Pv();r&&me(Vk,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Pv();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Pv();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new gr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Il(e))throw e;me(Vk,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,En("INTERNAL UNHANDLED ERROR: ",Uk(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=jI.createAndSchedule(this,e,n,r,(o=>this.hc(o)));return this.tc.push(i),i}uc(){this.nc&&Ie(47125,{Pc:Uk(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Uk(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(t,["next","error","complete"])}class qee{constructor(){this._progressObserver={},this._taskCompletionResolver=new gr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $ee=-1;let dn=class extends Ym{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Lk,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Lk(e),this._firestoreClient=void 0,await e}}};function zee(t,e){const n=typeof t=="object"?t:n0(),r=typeof t=="string"?t:Jv,i=bd(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=NF("firestore");o&&_6(i,...o)}return i}function yr(t){if(t._terminated)throw new de(re.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||S6(t),t._firestoreClient}function S6(t){var r,i,o;const e=t._freezeSettings(),n=(function(u,c,f,h){return new cX(u,c,f,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,y6(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Mee(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}})(t._componentsProvider))}function Hee(t,e){ns("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return A6(t,hm.provider,{build:r=>new d6(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function Gee(t){ns("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();A6(t,hm.provider,{build:n=>new Iee(n,e.cacheSizeBytes)})}function A6(t,e,n){if((t=dt(t,dn))._firestoreClient||t._terminated)throw new de(re.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new de(re.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},S6(t)}function Kee(t){if(t._initialized&&!t._terminated)throw new de(re.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new gr;return t._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(r){if(!Jo.v())return Promise.resolve();const i=r+Uq;await Jo.delete(i)})(FI(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function jee(t){return(function(n){const r=new gr;return n.asyncQueue.enqueueAndForget((async()=>pee(await ox(n),r))),r.promise})(yr(t=dt(t,dn)))}function Wee(t){return Nee(yr(t=dt(t,dn)))}function Yee(t){return kee(yr(t=dt(t,dn)))}function Jee(t,e){const n=yr(t=dt(t,dn)),r=new qee;return Uee(n,t._databaseId,e,r),r}function Qee(t,e){return Fee(yr(t=dt(t,dn)),e).then((n=>n?new $r(t,null,n.query):null))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Sr(fn.fromBase64String(e))}catch(n){throw new de(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Sr(fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Sr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Um(e,Sr._jsonSchema))return Sr.fromBase64String(e.bytes)}}Sr._jsonSchemaVersion="firestore/bytes/1.0",Sr._jsonSchema={type:Pn("string",Sr._jsonSchemaVersion),bytes:Pn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tl=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new de(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lc=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new de(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new de(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return We(this._lat,e._lat)||We(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:po._jsonSchemaVersion}}static fromJSON(e){if(Um(e,po._jsonSchema))return new po(e.latitude,e.longitude)}}po._jsonSchemaVersion="firestore/geoPoint/1.0",po._jsonSchema={type:Pn("string",po._jsonSchemaVersion),latitude:Pn("number"),longitude:Pn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Xo._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Um(e,Xo._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Xo(e.vectorValues);throw new de(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Xo._jsonSchemaVersion="firestore/vectorValue/1.0",Xo._jsonSchema={type:Pn("string",Xo._jsonSchemaVersion),vectorValues:Pn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xee=/^__.*__$/;class Zee{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new aa(e,this.data,this.fieldMask,n,this.fieldTransforms):new Rd(e,this.data,n,this.fieldTransforms)}}class C6{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new aa(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function I6(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{Ac:t})}}class D0{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new D0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return l_(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(I6(this.Ac)&&Xee.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class ete{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||jm(e)}Cc(e,n,r,i=!1){return new D0({Ac:e,methodName:n,Dc:r,path:Xt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function uc(t){const e=t._freezeSettings(),n=jm(t._databaseId);return new ete(t._databaseId,!!e.ignoreUndefinedProperties,n)}function N0(t,e,n,r,i,o={}){const s=t.Cc(o.merge||o.mergeFields?2:0,e,n,i);dx("Data must be an object, but it was:",s,r);const u=P6(r,s);let c,f;if(o.merge)c=new Jr(s.fieldMask),f=s.fieldTransforms;else if(o.mergeFields){const h=[];for(const y of o.mergeFields){const v=TA(e,y,n);if(!s.contains(v))throw new de(re.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);D6(h,v)||h.push(v)}c=new Jr(h),f=s.fieldTransforms.filter((y=>c.covers(y.field)))}else c=null,f=s.fieldTransforms;return new Zee(new pr(u),c,f)}class Jm extends lc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Jm}}function x6(t,e,n){return new D0({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class sx extends lc{_toFieldTransform(e){return new Hm(e.path,new Zf)}isEqual(e){return e instanceof sx}}class ax extends lc{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=x6(this,e,!0),r=this.vc.map((o=>cc(o,n))),i=new ju(r);return new Hm(e.path,i)}isEqual(e){return e instanceof ax&&Ks(this.vc,e.vc)}}class lx extends lc{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=x6(this,e,!0),r=this.vc.map((o=>cc(o,n))),i=new Wu(r);return new Hm(e.path,i)}isEqual(e){return e instanceof lx&&Ks(this.vc,e.vc)}}class ux extends lc{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new ed(e.serializer,tq(e.serializer,this.Fc));return new Hm(e.path,n)}isEqual(e){return e instanceof ux&&this.Fc===e.Fc}}function cx(t,e,n,r){const i=t.Cc(1,e,n);dx("Data must be an object, but it was:",i,r);const o=[],s=pr.empty();xl(r,((c,f)=>{const h=hx(e,c,n);f=Pe(f);const y=i.yc(h);if(f instanceof Jm)o.push(h);else{const v=cc(f,y);v!=null&&(o.push(h),s.set(h,v))}}));const u=new Jr(o);return new C6(s,u,i.fieldTransforms)}function fx(t,e,n,r,i,o){const s=t.Cc(1,e,n),u=[TA(e,r,n)],c=[i];if(o.length%2!=0)throw new de(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)u.push(TA(e,o[v])),c.push(o[v+1]);const f=[],h=pr.empty();for(let v=u.length-1;v>=0;--v)if(!D6(f,u[v])){const E=u[v];let b=c[v];b=Pe(b);const S=s.yc(E);if(b instanceof Jm)f.push(E);else{const A=cc(b,S);A!=null&&(f.push(E),h.set(E,A))}}const y=new Jr(f);return new C6(h,y,s.fieldTransforms)}function R6(t,e,n,r=!1){return cc(n,t.Cc(r?4:3,e))}function cc(t,e){if(M6(t=Pe(t)))return dx("Unsupported field value:",e,t),P6(t,e);if(t instanceof lc)return(function(r,i){if(!I6(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const o=[];let s=0;for(const u of r){let c=cc(u,i.wc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=Pe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return tq(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=wt.fromDate(r);return{timestampValue:td(i.serializer,o)}}if(r instanceof wt){const o=new wt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:td(i.serializer,o)}}if(r instanceof po)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Sr)return{bytesValue:hq(i.serializer,r._byteString)};if(r instanceof Ft){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:DI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Xo)return(function(s,u){return{mapValue:{fields:{[EI]:{stringValue:wI},[Jf]:{arrayValue:{values:s.toArray().map((f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return CI(u.serializer,f)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${m0(r)}`)})(t,e)}function P6(t,e){const n={};return PB(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xl(t,((r,i)=>{const o=cc(i,e.mc(r));o!=null&&(n[r]=o)})),{mapValue:{fields:n}}}function M6(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof wt||t instanceof po||t instanceof Sr||t instanceof Ft||t instanceof lc||t instanceof Xo)}function dx(t,e,n){if(!M6(n)||!dB(n)){const r=m0(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function TA(t,e,n){if((e=Pe(e))instanceof Tl)return e._internalPath;if(typeof e=="string")return hx(t,e);throw l_("Field path arguments must be of type string or ",t,!1,void 0,n)}const tte=new RegExp("[~\\*/\\[\\]]");function hx(t,e,n){if(e.search(tte)>=0)throw l_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Tl(...e.split("."))._internalPath}catch{throw l_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function l_(t,e,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new de(re.INVALID_ARGUMENT,u+t+c)}function D6(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new nte(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(k0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class nte extends pm{data(){return super.data()}}function k0(t,e){return typeof e=="string"?hx(t,e):e instanceof Tl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N6(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new de(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class px{}class Qm extends px{}function zi(t,e,...n){let r=[];e instanceof px&&r.push(e),r=r.concat(n),(function(o){const s=o.filter((c=>c instanceof mx)).length,u=o.filter((c=>c instanceof O0)).length;if(s>1||s>0&&u>0)throw new de(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class O0 extends Qm{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new O0(e,n,r)}_apply(e){const n=this._parse(e);return O6(e._query,n),new $r(e.firestore,e.converter,sA(e._query,n))}_parse(e){const n=uc(e.firestore);return(function(o,s,u,c,f,h,y){let v;if(f.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new de(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Bk(y,h);const b=[];for(const S of y)b.push(Fk(c,o,S));v={arrayValue:{values:b}}}else v=Fk(c,o,y)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Bk(y,h),v=R6(u,s,y,h==="in"||h==="not-in");return st.create(f,h,v)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function rte(t,e,n){const r=e,i=k0("where",t);return O0._create(i,r,n)}class mx extends px{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new mx(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Ct.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,o){let s=i;const u=o.getFlattenedFilters();for(const c of u)O6(s,c),s=sA(s,c)})(e._query,n),new $r(e.firestore,e.converter,sA(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class gx extends Qm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new gx(e,n)}_apply(e){const n=(function(i,o,s){if(i.startAt!==null)throw new de(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new de(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new um(o,s)})(e._query,this._field,this._direction);return new $r(e.firestore,e.converter,(function(i,o){const s=i.explicitOrderBy.concat([o]);return new oa(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}}function u_(t,e="asc"){const n=e,r=k0("orderBy",t);return gx._create(r,n)}class V0 extends Qm{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new V0(e,n,r)}_apply(e){return new $r(e.firestore,e.converter,Zv(e._query,this._limit,this._limitType))}}function ite(t){return hB("limit",t),V0._create("limit",t,"F")}function ote(t){return hB("limitToLast",t),V0._create("limitToLast",t,"L")}class L0 extends Qm{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new L0(e,n,r)}_apply(e){const n=k6(e,this.type,this._docOrFields,this._inclusive);return new $r(e.firestore,e.converter,(function(i,o){return new oa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)})(e._query,n))}}function ste(...t){return L0._create("startAt",t,!0)}function ate(...t){return L0._create("startAfter",t,!1)}class U0 extends Qm{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new U0(e,n,r)}_apply(e){const n=k6(e,this.type,this._docOrFields,this._inclusive);return new $r(e.firestore,e.converter,(function(i,o){return new oa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)})(e._query,n))}}function lte(...t){return U0._create("endBefore",t,!1)}function ute(...t){return U0._create("endAt",t,!0)}function k6(t,e,n,r){if(n[0]=Pe(n[0]),n[0]instanceof pm)return(function(o,s,u,c,f){if(!c)throw new de(re.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const h=[];for(const y of Pf(o))if(y.field.isKeyField())h.push(Gu(s,c.key));else{const v=c.data.field(y.field);if(T0(v))throw new de(re.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+y.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(v===null){const E=y.field.canonicalString();throw new de(re.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${E}' (used as the orderBy) does not exist.`)}h.push(v)}return new yl(h,f)})(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=uc(t.firestore);return(function(s,u,c,f,h,y){const v=s.explicitOrderBy;if(h.length>v.length)throw new de(re.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const E=[];for(let b=0;b<h.length;b++){const S=h[b];if(v[b].field.isKeyField()){if(typeof S!="string")throw new de(re.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof S}`);if(!SI(s)&&S.indexOf("/")!==-1)throw new de(re.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${S}' contains a slash.`);const A=s.path.child(ot.fromString(S));if(!Ee.isDocumentKey(A))throw new de(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${A}' is not because it contains an odd number of segments.`);const R=new Ee(A);E.push(Gu(u,R))}else{const A=R6(c,f,S);E.push(A)}}return new yl(E,y)})(t._query,t.firestore._databaseId,i,e,n,r)}}function Fk(t,e,n){if(typeof(n=Pe(n))=="string"){if(n==="")throw new de(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!SI(e)&&n.indexOf("/")!==-1)throw new de(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ot.fromString(n));if(!Ee.isDocumentKey(r))throw new de(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Gu(t,new Ee(r))}if(n instanceof Ft)return Gu(t,n._key);throw new de(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${m0(n)}.`)}function Bk(t,e){if(!Array.isArray(t)||t.length===0)throw new de(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function O6(t,e){const n=(function(i,o){for(const s of i)for(const u of s.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new de(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class yx{convertValue(e,n="none"){switch(ml(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Qs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return xl(e,((i,o)=>{r[i]=this.convertValue(o,n)})),r}convertVectorValue(e){var r,i,o;const n=(o=(i=(r=e.fields)==null?void 0:r[Jf].arrayValue)==null?void 0:i.values)==null?void 0:o.map((s=>Qt(s.doubleValue)));return new Xo(n)}convertGeoPoint(e){return new po(Qt(e.latitude),Qt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=E0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(sm(e));default:return null}}convertTimestamp(e){const n=Js(e);return new wt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ot.fromString(e);ke(Sq(r),9688,{name:e});const i=new pl(r.get(1),r.get(3)),o=new Ee(r.popFirst(5));return i.isEqual(n)||En(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F0(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class cte extends yx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ft(this.firestore,null,n)}}class Pu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let ji=class V6 extends pm{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new zp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(k0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=V6._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};ji._jsonSchemaVersion="firestore/documentSnapshot/1.0",ji._jsonSchema={type:Pn("string",ji._jsonSchemaVersion),bundleSource:Pn("string","DocumentSnapshot"),bundleName:Pn("string"),bundle:Pn("string")};let zp=class extends ji{data(e={}){return super.data(e)}},mo=class L6{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Pu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new zp(this._firestore,this._userDataWriter,r.key,r,new Pu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new de(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map((u=>{const c=new zp(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Pu(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const c=new zp(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Pu(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,h=-1;return u.type!==0&&(f=s.indexOf(u.doc.key),s=s.delete(u.doc.key)),u.type!==1&&(s=s.add(u.doc),h=s.indexOf(u.doc.key)),{type:fte(u.type),doc:c,oldIndex:f,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=L6._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=hI.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function fte(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:t})}}function U6(t,e){return t instanceof ji&&e instanceof ji?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof mo&&e instanceof mo&&t._firestore===e._firestore&&b6(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(t){t=dt(t,Ft);const e=dt(t.firestore,dn);return m6(yr(e),t._key).then((n=>Tx(e,t,n)))}mo._jsonSchemaVersion="firestore/querySnapshot/1.0",mo._jsonSchema={type:Pn("string",mo._jsonSchemaVersion),bundleSource:Pn("string","QuerySnapshot"),bundleName:Pn("string"),bundle:Pn("string")};class fc extends yx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ft(this.firestore,null,n)}}function dte(t){t=dt(t,Ft);const e=dt(t.firestore,dn),n=yr(e),r=new fc(e);return Oee(n,t._key).then((i=>new ji(e,r,t._key,i,new Pu(i!==null&&i.hasLocalMutations,!0),t.converter)))}function hte(t){t=dt(t,Ft);const e=dt(t.firestore,dn);return m6(yr(e),t._key,{source:"server"}).then((n=>Tx(e,t,n)))}function _x(t){t=dt(t,$r);const e=dt(t.firestore,dn),n=yr(e),r=new fc(e);return N6(t._query),g6(n,t._query).then((i=>new mo(e,r,t,i)))}function pte(t){t=dt(t,$r);const e=dt(t.firestore,dn),n=yr(e),r=new fc(e);return Vee(n,t._query).then((i=>new mo(e,r,t,i)))}function mte(t){t=dt(t,$r);const e=dt(t.firestore,dn),n=yr(e),r=new fc(e);return g6(n,t._query,{source:"server"}).then((i=>new mo(e,r,t,i)))}function qk(t,e,n){t=dt(t,Ft);const r=dt(t.firestore,dn),i=F0(t.converter,e,n);return Od(r,[N0(uc(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Zt.none())])}function mm(t,e,n,...r){t=dt(t,Ft);const i=dt(t.firestore,dn),o=uc(i);let s;return s=typeof(e=Pe(e))=="string"||e instanceof Tl?fx(o,"updateDoc",t._key,e,n,r):cx(o,"updateDoc",t._key,e),Od(i,[s.toMutation(t._key,Zt.exists(!0))])}function EA(t){return Od(dt(t.firestore,dn),[new Pd(t._key,Zt.none())])}function c_(t,e){const n=dt(t.firestore,dn),r=ho(t),i=F0(t.converter,e);return Od(n,[N0(uc(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Zt.exists(!1))]).then((()=>r))}function gm(t,...e){var c,f,h;t=Pe(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||_A(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(_A(e[r])){const y=e[r];e[r]=(c=y.next)==null?void 0:c.bind(y),e[r+1]=(f=y.error)==null?void 0:f.bind(y),e[r+2]=(h=y.complete)==null?void 0:h.bind(y)}let o,s,u;if(t instanceof Ft)s=dt(t.firestore,dn),u=xd(t._key.path),o={next:y=>{e[r]&&e[r](Tx(s,t,y))},error:e[r+1],complete:e[r+2]};else{const y=dt(t,$r);s=dt(y.firestore,dn),u=y._query;const v=new fc(s);o={next:E=>{e[r]&&e[r](new mo(s,v,y,E))},error:e[r+1],complete:e[r+2]},N6(t._query)}return(function(v,E,b,S){const A=new P0(S),R=new QI(E,A,b);return v.asyncQueue.enqueueAndForget((async()=>WI(await ad(v),R))),()=>{A.Nu(),v.asyncQueue.enqueueAndForget((async()=>YI(await ad(v),R)))}})(yr(s),u,i,o)}function gte(t,e){return Lee(yr(t=dt(t,dn)),_A(e)?e:{next:e})}function Od(t,e){return(function(r,i){const o=new gr;return r.asyncQueue.enqueueAndForget((async()=>cee(await ox(r),i,o))),o.promise})(yr(t),e)}function Tx(t,e,n){const r=n.docs.get(e._key),i=new fc(t);return new ji(t,i,e._key,r,new Pu(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yte={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let F6=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=uc(e)}set(e,n,r){this._verifyNotCommitted();const i=nl(e,this._firestore),o=F0(i.converter,n,r),s=N0(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Zt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const o=nl(e,this._firestore);let s;return s=typeof(n=Pe(n))=="string"||n instanceof Tl?fx(this._dataReader,"WriteBatch.update",o._key,n,r,i):cx(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,Zt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=nl(e,this._firestore);return this._mutations=this._mutations.concat(new Pd(n._key,Zt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new de(re.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function nl(t,e){if((t=Pe(t)).firestore!==e)throw new de(re.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vte{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=uc(e)}get(e){const n=nl(e,this._firestore),r=new cte(this._firestore);return this._transaction.lookup([n._key]).then((i=>{if(!i||i.length!==1)return Ie(24041);const o=i[0];if(o.isFoundDocument())return new pm(this._firestore,r,o.key,o,n.converter);if(o.isNoDocument())return new pm(this._firestore,r,n._key,null,n.converter);throw Ie(18433,{doc:o})}))}set(e,n,r){const i=nl(e,this._firestore),o=F0(i.converter,n,r),s=N0(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this}update(e,n,r,...i){const o=nl(e,this._firestore);let s;return s=typeof(n=Pe(n))=="string"||n instanceof Tl?fx(this._dataReader,"Transaction.update",o._key,n,r,i):cx(this._dataReader,"Transaction.update",o._key,n),this._transaction.update(o._key,s),this}delete(e){const n=nl(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _te=class extends vte{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=nl(e,this._firestore),r=new fc(this._firestore);return super.get(e).then((i=>new ji(this._firestore,r,n._key,i._document,new Pu(!1,!1),n.converter)))}};function Tte(t,e,n){t=dt(t,dn);const r={...yte,...n};return(function(o){if(o.maxAttempts<1)throw new de(re.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(o,s,u){const c=new gr;return o.asyncQueue.enqueueAndForget((async()=>{const f=await Dee(o);new Pee(o.asyncQueue,f,u,s,c).ju()})),c.promise})(yr(t),(i=>e(new _te(t,i))),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ete(){return new Jm("deleteField")}function Df(){return new sx("serverTimestamp")}function wte(...t){return new ax("arrayUnion",t)}function bte(...t){return new lx("arrayRemove",t)}function B6(t){return new ux("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ste(t){return yr(t=dt(t,dn)),new F6(t,(e=>Od(t,e)))}(function(e,n=!0){(function(i){Id=i})(na),Ws(new Ji("firestore",((r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),u=new dn(new SQ(r.getProvider("auth-internal")),new IQ(s,r.getProvider("app-check-internal")),(function(f,h){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new de(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pl(f.options.projectId,h)})(s,i),s);return o={useFetchStreams:n,...o},u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),Ti(vN,_N,e),Ti(vN,_N,"esm2020")})();const Ate="@firebase/firestore-compat",Cte="0.4.1";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new de("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $k(){if(typeof Uint8Array>"u")throw new de("unimplemented","Uint8Arrays are not available in this environment.")}function zk(){if(!lX())throw new de("unimplemented","Blobs are unavailable in Firestore in this environment.")}let q6=class wA{constructor(e){this._delegate=e}static fromBase64String(e){return zk(),new wA(Sr.fromBase64String(e))}static fromUint8Array(e){return $k(),new wA(Sr.fromUint8Array(e))}toBase64(){return zk(),this._delegate.toBase64()}toUint8Array(){return $k(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(t){return Ite(t,["next","error","complete"])}function Ite(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xte{enableIndexedDbPersistence(e,n){return Hee(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return Gee(e._delegate)}clearIndexedDbPersistence(e){return Kee(e._delegate)}}class $6{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof pl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&ns("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...n,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){_6(this._delegate,e,n,r)}enableNetwork(){return Wee(this._delegate)}disableNetwork(){return Yee(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,fB("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return jee(this._delegate)}onSnapshotsInSync(e){return gte(this._delegate,e)}get app(){if(!this._appCompat)throw new de("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ld(this,Ns(this._delegate,e))}catch(n){throw Or(n,"collection()","Firestore.collection()")}}doc(e){try{return new Gi(this,ho(this._delegate,e))}catch(n){throw Or(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new kr(this,Bee(this._delegate,e))}catch(n){throw Or(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return Tte(this._delegate,n=>e(new z6(this,n)))}batch(){return yr(this._delegate),new H6(new F6(this._delegate,e=>Od(this._delegate,e)))}loadBundle(e){return Jee(this._delegate,e)}namedQuery(e){return Qee(this._delegate,e).then(n=>n?new kr(this,n):null)}}class B0 extends yx{constructor(e){super(),this.firestore=e}convertBytes(e){return new q6(new Sr(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Gi.forKey(n,this.firestore,null)}}function Rte(t){TQ(t)}class z6{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new B0(e)}get(e){const n=Mu(e);return this._delegate.get(n).then(r=>new ym(this._firestore,new ji(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Mu(e);return r?(Ex("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=Mu(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=Mu(e);return this._delegate.delete(n),this}}class H6{constructor(e){this._delegate=e}set(e,n,r){const i=Mu(e);return r?(Ex("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=Mu(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=Mu(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Zu{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new zp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new vm(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=Zu.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new Zu(e,new B0(e),n),i.set(n,o)),o}}Zu.INSTANCES=new WeakMap;class Gi{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new B0(e)}static forPath(e,n,r){if(e.length%2!==0)throw new de("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Gi(n,new Ft(n._delegate,r,new Ee(e)))}static forKey(e,n,r){return new Gi(n,new Ft(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ld(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ld(this.firestore,Ns(this._delegate,e))}catch(n){throw Or(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Pe(e),e instanceof Ft?w6(this._delegate,e):!1}set(e,n){n=Ex("DocumentReference.set",n);try{return n?qk(this._delegate,e,n):qk(this._delegate,e)}catch(r){throw Or(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?mm(this._delegate,e):mm(this._delegate,e,n,...r)}catch(i){throw Or(i,"updateDoc()","DocumentReference.update()")}}delete(){return EA(this._delegate)}onSnapshot(...e){const n=G6(e),r=K6(e,i=>new ym(this.firestore,new ji(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return gm(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=dte(this._delegate):(e==null?void 0:e.source)==="server"?n=hte(this._delegate):n=vx(this._delegate),n.then(r=>new ym(this.firestore,new ji(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Gi(this.firestore,e?this._delegate.withConverter(Zu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Or(t,e,n){return t.message=t.message.replace(e,n),t}function G6(t){for(const e of t)if(typeof e=="object"&&!bA(e))return e;return{}}function K6(t,e){var r,i;let n;return bA(t[0])?n=t[0]:bA(t[1])?n=t[1]:typeof t[0]=="function"?n={next:t[0],error:t[1],complete:t[2]}:n={next:t[1],error:t[2],complete:t[3]},{next:o=>{n.next&&n.next(e(o))},error:(r=n.error)==null?void 0:r.bind(n),complete:(i=n.complete)==null?void 0:i.bind(n)}}class ym{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Gi(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return U6(this._delegate,e._delegate)}}class vm extends ym{data(e){const n=this._delegate.data(e);return this._delegate._converter||EQ(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}}class kr{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new B0(e)}where(e,n,r){try{return new kr(this.firestore,zi(this._delegate,rte(e,n,r)))}catch(i){throw Or(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new kr(this.firestore,zi(this._delegate,u_(e,n)))}catch(r){throw Or(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new kr(this.firestore,zi(this._delegate,ite(e)))}catch(n){throw Or(n,"limit()","Query.limit()")}}limitToLast(e){try{return new kr(this.firestore,zi(this._delegate,ote(e)))}catch(n){throw Or(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new kr(this.firestore,zi(this._delegate,ste(...e)))}catch(n){throw Or(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new kr(this.firestore,zi(this._delegate,ate(...e)))}catch(n){throw Or(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new kr(this.firestore,zi(this._delegate,lte(...e)))}catch(n){throw Or(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new kr(this.firestore,zi(this._delegate,ute(...e)))}catch(n){throw Or(n,"endAt()","Query.endAt()")}}isEqual(e){return b6(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=pte(this._delegate):(e==null?void 0:e.source)==="server"?n=mte(this._delegate):n=_x(this._delegate),n.then(r=>new SA(this.firestore,new mo(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=G6(e),r=K6(e,i=>new SA(this.firestore,new mo(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return gm(this._delegate,n,r)}withConverter(e){return new kr(this.firestore,e?this._delegate.withConverter(Zu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class Pte{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new vm(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class SA{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new kr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new vm(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new Pte(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new vm(this._firestore,r))})}isEqual(e){return U6(this._delegate,e._delegate)}}class ld extends kr{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Gi(this.firestore,e):null}doc(e){try{return e===void 0?new Gi(this.firestore,ho(this._delegate)):new Gi(this.firestore,ho(this._delegate,e))}catch(n){throw Or(n,"doc()","CollectionReference.doc()")}}add(e){return c_(this._delegate,e).then(n=>new Gi(this.firestore,n))}isEqual(e){return w6(this._delegate,e._delegate)}withConverter(e){return new ld(this.firestore,e?this._delegate.withConverter(Zu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Mu(t){return dt(t,Ft)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(...e){this._delegate=new Tl(...e)}static documentId(){return new wx(Xt.keyField().canonicalString())}isEqual(e){return e=Pe(e),e instanceof Tl?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{static serverTimestamp(){const e=Df();return e._methodName="FieldValue.serverTimestamp",new Iu(e)}static delete(){const e=Ete();return e._methodName="FieldValue.delete",new Iu(e)}static arrayUnion(...e){const n=wte(...e);return n._methodName="FieldValue.arrayUnion",new Iu(n)}static arrayRemove(...e){const n=bte(...e);return n._methodName="FieldValue.arrayRemove",new Iu(n)}static increment(e){const n=B6(e);return n._methodName="FieldValue.increment",new Iu(n)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mte={Firestore:$6,GeoPoint:po,Timestamp:wt,Blob:q6,Transaction:z6,WriteBatch:H6,DocumentReference:Gi,DocumentSnapshot:ym,Query:kr,QueryDocumentSnapshot:vm,QuerySnapshot:SA,CollectionReference:ld,FieldPath:wx,FieldValue:Iu,setLogLevel:Rte,CACHE_SIZE_UNLIMITED:$ee};function Dte(t,e){t.INTERNAL.registerComponent(new Ji("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps({...Mte}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nte(t){Dte(t,(e,n)=>new $6(e,n,new xte)),t.registerVersion(Ate,Cte)}Nte(Sl);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j6="firebasestorage.googleapis.com",W6="storageBucket",kte=120*1e3,Ote=600*1e3,Vte=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn extends Ir{constructor(e,n,r=0){super(Jw(e),`Firebase Storage: ${n} (${Jw(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,sn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Jw(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var jt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(jt||(jt={}));function Jw(t){return"storage/"+t}function bx(){const t="An unknown error occurred, please check the error payload for server response.";return new sn(jt.UNKNOWN,t)}function Lte(t){return new sn(jt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Ute(t){return new sn(jt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Fte(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new sn(jt.UNAUTHENTICATED,t)}function Bte(){return new sn(jt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function qte(t){return new sn(jt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Y6(){return new sn(jt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function J6(){return new sn(jt.CANCELED,"User canceled the upload/download.")}function $te(t){return new sn(jt.INVALID_URL,"Invalid URL '"+t+"'.")}function zte(t){return new sn(jt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Hte(){return new sn(jt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+W6+"' property when initializing the app?")}function Q6(){return new sn(jt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Gte(){return new sn(jt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function Kte(){return new sn(jt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function jte(t){return new sn(jt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Nf(t){return new sn(jt.INVALID_ARGUMENT,t)}function X6(){return new sn(jt.APP_DELETED,"The Firebase app was deleted.")}function Z6(t){return new sn(jt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Hp(t,e){return new sn(jt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function up(t){throw new sn(jt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Ar.makeFromUrl(e,n)}catch{return new Ar(e,"")}if(r.path==="")return r;throw zte(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(U){U.path.charAt(U.path.length-1)==="/"&&(U.path_=U.path_.slice(0,-1))}const s="(/(.*))?$",u=new RegExp("^gs://"+i+s,"i"),c={bucket:1,path:3};function f(U){U.path_=decodeURIComponent(U.path)}const h="v[A-Za-z0-9_]+",y=n.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",E=new RegExp(`^https?://${y}/${h}/b/${i}/o${v}`,"i"),b={bucket:1,path:3},S=n===j6?"(?:storage.googleapis.com|storage.cloud.google.com)":n,A="([^?#]*)",R=new RegExp(`^https?://${S}/${i}/${A}`,"i"),M=[{regex:u,indices:c,postModify:o},{regex:E,indices:b,postModify:f},{regex:R,indices:{bucket:1,path:2},postModify:f}];for(let U=0;U<M.length;U++){const q=M[U],z=q.regex.exec(e);if(z){const k=z[q.indices.bucket];let V=z[q.indices.path];V||(V=""),r=new Ar(k,V),q.postModify(r);break}}if(r==null)throw $te(e);return r}}class Wte{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yte(t,e,n){let r=1,i=null,o=null,s=!1,u=0;function c(){return u===2}let f=!1;function h(...A){f||(f=!0,e.apply(null,A))}function y(A){i=setTimeout(()=>{i=null,t(E,c())},A)}function v(){o&&clearTimeout(o)}function E(A,...R){if(f){v();return}if(A){v(),h.call(null,A,...R);return}if(c()||s){v(),h.call(null,A,...R);return}r<64&&(r*=2);let M;u===1?(u=2,M=0):M=(r+Math.random())*1e3,y(M)}let b=!1;function S(A){b||(b=!0,v(),!f&&(i!==null?(A||(u=2),clearTimeout(i),y(0)):A||(u=1)))}return y(0),o=setTimeout(()=>{s=!0,S(!0)},n),S}function Jte(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qte(t){return t!==void 0}function Xte(t){return typeof t=="function"}function Zte(t){return typeof t=="object"&&!Array.isArray(t)}function q0(t){return typeof t=="string"||t instanceof String}function Hk(t){return Sx()&&t instanceof Blob}function Sx(){return typeof Blob<"u"}function AA(t,e,n,r){if(r<e)throw Nf(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Nf(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function e3(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Uu;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Uu||(Uu={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t3(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ene{constructor(e,n,r,i,o,s,u,c,f,h,y,v=!0,E=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=u,this.errorCallback_=c,this.timeout_=f,this.progressCallback_=h,this.connectionFactory_=y,this.retry=v,this.isUsingEmulator=E,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,S)=>{this.resolve_=b,this.reject_=S,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Ky(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const s=u=>{const c=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,f)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const u=o.getErrorCode()===Uu.NO_ERROR,c=o.getStatus();if(!u||t3(c,this.additionalRetryCodes_)&&this.retry){const h=o.getErrorCode()===Uu.ABORT;r(!1,new Ky(!1,null,h));return}const f=this.successCodes_.indexOf(c)!==-1;r(!0,new Ky(f,o))})},n=(r,i)=>{const o=this.resolve_,s=this.reject_,u=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(u,u.getResponse());Qte(c)?o(c):o()}catch(c){s(c)}else if(u!==null){const c=bx();c.serverResponse=u.getErrorText(),this.errorCallback_?s(this.errorCallback_(u,c)):s(c)}else if(i.canceled){const c=this.appDelete_?X6():J6();s(c)}else{const c=Y6();s(c)}};this.canceled_?n(!1,new Ky(!1,null,!0)):this.backoffId_=Yte(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Jte(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ky{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function tne(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function nne(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function rne(t,e){e&&(t["X-Firebase-GMPID"]=e)}function ine(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function one(t,e,n,r,i,o,s=!0,u=!1){const c=e3(t.urlParams),f=t.url+c,h=Object.assign({},t.headers);return rne(h,e),tne(h,n),nne(h,o),ine(h,r),new ene(f,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sne(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function ane(...t){const e=sne();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Sx())return new Blob(t);throw new sn(jt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function lne(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function une(t){if(typeof atob>"u")throw jte("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Qw{constructor(e,n){this.data=e,this.contentType=n||null}}function Ax(t,e){switch(t){case yi.RAW:return new Qw(n3(e));case yi.BASE64:case yi.BASE64URL:return new Qw(r3(t,e));case yi.DATA_URL:return new Qw(fne(e),dne(e))}throw bx()}function n3(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=r,s=t.charCodeAt(++n);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function cne(t){let e;try{e=decodeURIComponent(t)}catch{throw Hp(yi.DATA_URL,"Malformed data URL.")}return n3(e)}function r3(t,e){switch(t){case yi.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw Hp(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case yi.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw Hp(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=une(e)}catch(i){throw i.message.includes("polyfill")?i:Hp(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class i3{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Hp(yi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=hne(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function fne(t){const e=new i3(t);return e.base64?r3(yi.BASE64,e.rest):cne(e.rest)}function dne(t){return new i3(t).contentType}function hne(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,n){let r=0,i="";Hk(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(Hk(this.data_)){const r=this.data_,i=lne(r,e,n);return i===null?null:new Go(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Go(r,!0)}}static getBlob(...e){if(Sx()){const n=e.map(r=>r instanceof Go?r.data_:r);return new Go(ane.apply(null,n))}else{const n=e.map(s=>q0(s)?Ax(yi.RAW,s).data:s.data_);let r=0;n.forEach(s=>{r+=s.byteLength});const i=new Uint8Array(r);let o=0;return n.forEach(s=>{for(let u=0;u<s.length;u++)i[o++]=s[u]}),new Go(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(t){let e;try{e=JSON.parse(t)}catch{return null}return Zte(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pne(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function mne(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function o3(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gne(t,e){return e}class Nr{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||gne}}let jy=null;function yne(t){return!q0(t)||t.length<2?t:o3(t)}function Xm(){if(jy)return jy;const t=[];t.push(new Nr("bucket")),t.push(new Nr("generation")),t.push(new Nr("metageneration")),t.push(new Nr("name","fullPath",!0));function e(o,s){return yne(s)}const n=new Nr("name");n.xform=e,t.push(n);function r(o,s){return s!==void 0?Number(s):s}const i=new Nr("size");return i.xform=r,t.push(i),t.push(new Nr("timeCreated")),t.push(new Nr("updated")),t.push(new Nr("md5Hash",null,!0)),t.push(new Nr("cacheControl",null,!0)),t.push(new Nr("contentDisposition",null,!0)),t.push(new Nr("contentEncoding",null,!0)),t.push(new Nr("contentLanguage",null,!0)),t.push(new Nr("contentType",null,!0)),t.push(new Nr("metadata","customMetadata",!0)),jy=t,jy}function vne(t,e){function n(){const r=t.bucket,i=t.fullPath,o=new Ar(r,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function _ne(t,e,n){const r={};r.type="file";const i=n.length;for(let o=0;o<i;o++){const s=n[o];r[s.local]=s.xform(r,e[s.server])}return vne(r,t),r}function s3(t,e,n){const r=Cx(e);return r===null?null:_ne(t,r,n)}function Tne(t,e,n,r){const i=Cx(e);if(i===null||!q0(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const s=encodeURIComponent;return o.split(",").map(f=>{const h=t.bucket,y=t.fullPath,v="/b/"+s(h)+"/o/"+s(y),E=Ml(v,n,r),b=e3({alt:"media",token:f});return E+b})[0]}function Ix(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk="prefixes",Kk="items";function Ene(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Gk])for(const i of n[Gk]){const o=i.replace(/\/$/,""),s=t._makeStorageReference(new Ar(e,o));r.prefixes.push(s)}if(n[Kk])for(const i of n[Kk]){const o=t._makeStorageReference(new Ar(e,i.name));r.items.push(o)}return r}function wne(t,e,n){const r=Cx(n);return r===null?null:Ene(t,e,r)}class ua{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zo(t){if(!t)throw bx()}function $0(t,e){function n(r,i){const o=s3(t,i,e);return Zo(o!==null),o}return n}function bne(t,e){function n(r,i){const o=wne(t,e,i);return Zo(o!==null),o}return n}function Sne(t,e){function n(r,i){const o=s3(t,i,e);return Zo(o!==null),Tne(o,i,t.host,t._protocol)}return n}function Vd(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=Bte():i=Fte():n.getStatus()===402?i=Ute(t.bucket):n.getStatus()===403?i=qte(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function z0(t){const e=Vd(t);function n(r,i){let o=e(r,i);return r.getStatus()===404&&(o=Lte(t.path)),o.serverResponse=i.serverResponse,o}return n}function a3(t,e,n){const r=e.fullServerUrl(),i=Ml(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,u=new ua(i,o,$0(t,n),s);return u.errorHandler=z0(e),u}function Ane(t,e,n,r,i){const o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);const s=e.bucketOnlyServerUrl(),u=Ml(s,t.host,t._protocol),c="GET",f=t.maxOperationRetryTime,h=new ua(u,c,bne(t,e.bucket),f);return h.urlParams=o,h.errorHandler=Vd(e),h}function Cne(t,e,n){const r=e.fullServerUrl(),i=Ml(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,u=new ua(i,o,Sne(t,n),s);return u.errorHandler=z0(e),u}function Ine(t,e,n,r){const i=e.fullServerUrl(),o=Ml(i,t.host,t._protocol),s="PATCH",u=Ix(n,r),c={"Content-Type":"application/json; charset=utf-8"},f=t.maxOperationRetryTime,h=new ua(o,s,$0(t,r),f);return h.headers=c,h.body=u,h.errorHandler=z0(e),h}function xne(t,e){const n=e.fullServerUrl(),r=Ml(n,t.host,t._protocol),i="DELETE",o=t.maxOperationRetryTime;function s(c,f){}const u=new ua(r,i,s,o);return u.successCodes=[200,204],u.errorHandler=z0(e),u}function Rne(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function l3(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=Rne(null,e)),r}function u3(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function u(){let M="";for(let U=0;U<2;U++)M=M+Math.random().toString().slice(2);return M}const c=u();s["Content-Type"]="multipart/related; boundary="+c;const f=l3(e,r,i),h=Ix(f,n),y="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+f.contentType+`\r
\r
`,v=`\r
--`+c+"--",E=Go.getBlob(y,r,v);if(E===null)throw Q6();const b={name:f.fullPath},S=Ml(o,t.host,t._protocol),A="POST",R=t.maxUploadRetryTime,D=new ua(S,A,$0(t,n),R);return D.urlParams=b,D.headers=s,D.body=E.uploadData(),D.errorHandler=Vd(e),D}class f_{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function xx(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Zo(!1)}return Zo(!!n&&(e||["active"]).indexOf(n)!==-1),n}function Pne(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),s=l3(e,r,i),u={name:s.fullPath},c=Ml(o,t.host,t._protocol),f="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},y=Ix(s,n),v=t.maxUploadRetryTime;function E(S){xx(S);let A;try{A=S.getResponseHeader("X-Goog-Upload-URL")}catch{Zo(!1)}return Zo(q0(A)),A}const b=new ua(c,f,E,v);return b.urlParams=u,b.headers=h,b.body=y,b.errorHandler=Vd(e),b}function Mne(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function o(f){const h=xx(f,["active","final"]);let y=null;try{y=f.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Zo(!1)}y||Zo(!1);const v=Number(y);return Zo(!isNaN(v)),new f_(v,r.size(),h==="final")}const s="POST",u=t.maxUploadRetryTime,c=new ua(n,s,o,u);return c.headers=i,c.errorHandler=Vd(e),c}const jk=256*1024;function Dne(t,e,n,r,i,o,s,u){const c=new f_(0,0);if(s?(c.current=s.current,c.total=s.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw Gte();const f=c.total-c.current;let h=f;i>0&&(h=Math.min(h,i));const y=c.current,v=y+h;let E="";h===0?E="finalize":f===h?E="upload, finalize":E="upload";const b={"X-Goog-Upload-Command":E,"X-Goog-Upload-Offset":`${c.current}`},S=r.slice(y,v);if(S===null)throw Q6();function A(U,q){const z=xx(U,["active","final"]),k=c.current+h,V=r.size();let N;return z==="final"?N=$0(e,o)(U,q):N=null,new f_(k,V,z==="final",N)}const R="POST",D=e.maxUploadRetryTime,M=new ua(n,R,A,D);return M.headers=b,M.body=S.uploadData(),M.progressCallback=u||null,M.errorHandler=Vd(t),M}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nne={STATE_CHANGED:"state_changed"},Vr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Xw(t){switch(t){case"running":case"pausing":case"canceling":return Vr.RUNNING;case"paused":return Vr.PAUSED;case"success":return Vr.SUCCESS;case"canceled":return Vr.CANCELED;case"error":return Vr.ERROR;default:return Vr.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kne{constructor(e,n,r){if(Xte(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class One{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Uu.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Uu.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Uu.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,o){if(this.sent_)throw up("cannot .send() more than once");if(bl(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const s in o)o.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,o[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw up("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw up("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw up("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw up("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Vne extends One{initXhr(){this.xhr_.responseType="text"}}function lo(){return new Vne}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=Xm(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(jt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(t3(i.status,[]))if(o)i=Y6();else{this.sleepTime=Math.max(this.sleepTime*2,Vte),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(jt.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=Pne(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,lo,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=Mne(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,lo,n,r);this._request=o,o.getPromise().then(s=>{s=s,this._request=void 0,this._updateProgress(s.current),this._needToFetchStatus=!1,s.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=jk*this._chunkMultiplier,n=new f_(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let s;try{s=Dne(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}const u=this._ref.storage._makeRequest(s,lo,i,o,!1);this._request=u,u.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){jk*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=a3(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,lo,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=u3(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,lo,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=J6(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Xw(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const o=new kne(n||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Xw(this._state)){case Vr.SUCCESS:mf(this._resolve.bind(null,this.snapshot))();break;case Vr.CANCELED:case Vr.ERROR:const n=this._reject;mf(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Xw(this._state)){case Vr.RUNNING:case Vr.PAUSED:e.next&&mf(e.next.bind(e,this.snapshot))();break;case Vr.SUCCESS:e.complete&&mf(e.complete.bind(e))();break;case Vr.CANCELED:case Vr.ERROR:e.error&&mf(e.error.bind(e,this._error))();break;default:e.error&&mf(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,n){this._service=e,n instanceof Ar?this._location=n:this._location=Ar.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ec(e,n)}get root(){const e=new Ar(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return o3(this._location.path)}get storage(){return this._service}get parent(){const e=pne(this._location.path);if(e===null)return null;const n=new Ar(this._location.bucket,e);return new ec(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Z6(e)}}function Lne(t,e,n){t._throwIfRoot("uploadBytes");const r=u3(t.storage,t._location,Xm(),new Go(e,!0),n);return t.storage.makeRequestWithTokens(r,lo).then(i=>({metadata:i,ref:t}))}function Une(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new c3(t,new Go(e),n)}function Fne(t,e,n=yi.RAW,r){t._throwIfRoot("uploadString");const i=Ax(n,e),o={...r};return o.contentType==null&&i.contentType!=null&&(o.contentType=i.contentType),Lne(t,i.data,o)}function Bne(t){const e={prefixes:[],items:[]};return f3(t,e).then(()=>e)}async function f3(t,e,n){const i=await d3(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&await f3(t,e,i.nextPageToken)}function d3(t,e){e!=null&&typeof e.maxResults=="number"&&AA("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=Ane(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,lo)}function qne(t){t._throwIfRoot("getMetadata");const e=a3(t.storage,t._location,Xm());return t.storage.makeRequestWithTokens(e,lo)}function $ne(t,e){t._throwIfRoot("updateMetadata");const n=Ine(t.storage,t._location,e,Xm());return t.storage.makeRequestWithTokens(n,lo)}function zne(t){t._throwIfRoot("getDownloadURL");const e=Cne(t.storage,t._location,Xm());return t.storage.makeRequestWithTokens(e,lo).then(n=>{if(n===null)throw Kte();return n})}function Hne(t){t._throwIfRoot("deleteObject");const e=xne(t.storage,t._location);return t.storage.makeRequestWithTokens(e,lo)}function h3(t,e){const n=mne(t._location.path,e),r=new Ar(t._location.bucket,n);return new ec(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gne(t){return/^[A-Za-z]+:\/\//.test(t)}function Kne(t,e){return new ec(t,e)}function p3(t,e){if(t instanceof Rx){const n=t;if(n._bucket==null)throw Hte();const r=new ec(n,n._bucket);return e!=null?p3(r,e):r}else return e!==void 0?h3(t,e):t}function jne(t,e){if(e&&Gne(e)){if(t instanceof Rx)return Kne(t,e);throw Nf("To use ref(service, url), the first argument must be a Storage instance.")}else return p3(t,e)}function Wk(t,e){const n=e==null?void 0:e[W6];return n==null?null:Ar.makeFromBucketSpec(n,t)}function Wne(t,e,n,r={}){t.host=`${e}:${n}`;const i=bl(e);i&&(FC(`https://${t.host}/b`),BC("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:o}=r;o&&(t._overrideAuthToken=typeof o=="string"?o:OF(o,t.app.options.projectId))}class Rx{constructor(e,n,r,i,o,s=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=s,this._bucket=null,this._host=j6,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=kte,this._maxUploadRetryTime=Ote,this._requests=new Set,i!=null?this._bucket=Ar.makeFromBucketSpec(i,this._host):this._bucket=Wk(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ar.makeFromBucketSpec(this._url,e):this._bucket=Wk(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){AA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){AA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Gt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ec(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new Wte(X6());{const s=one(e,this._appId,r,i,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const Yk="@firebase/storage",Jk="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m3="storage";function Yne(t,e,n,r){return t=Pe(t),Fne(t,e,n,r)}function Jne(t,e,n){return t=Pe(t),Une(t,e,n)}function Qne(t){return t=Pe(t),qne(t)}function Xne(t,e){return t=Pe(t),$ne(t,e)}function Zne(t,e){return t=Pe(t),d3(t,e)}function ere(t){return t=Pe(t),Bne(t)}function g3(t){return t=Pe(t),zne(t)}function tre(t){return t=Pe(t),Hne(t)}function CA(t,e){return t=Pe(t),jne(t,e)}function nre(t,e){return h3(t,e)}function rre(t=n0(),e){t=Pe(t);const r=bd(t,m3).getImmediate({identifier:e}),i=NF("storage");return i&&y3(r,...i),r}function y3(t,e,n,r={}){Wne(t,e,n,r)}function ire(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Rx(n,r,i,e,na)}function ore(){Ws(new Ji(m3,ire,"PUBLIC").setMultipleInstances(!0)),Ti(Yk,Jk,""),Ti(Yk,Jk,"esm2020")}ore();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Wy(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new Wy(r,this,this._ref))},n)}on(e,n,r,i){let o;return n&&(typeof n=="function"?o=s=>n(new Wy(s,this,this._ref)):o={next:n.next?s=>n.next(new Wy(s,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,o,r||void 0,i||void 0)}}class Xk{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new $s(e,this._service))}get items(){return this._delegate.items.map(e=>new $s(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=nre(this._delegate,e);return new $s(n,this.storage)}get root(){return new $s(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new $s(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new Qk(Jne(this._delegate,e,n),this)}putString(e,n=yi.RAW,r){this._throwIfRoot("putString");const i=Ax(n,e),o={...r};return o.contentType==null&&i.contentType!=null&&(o.contentType=i.contentType),new Qk(new c3(this._delegate,new Go(i.data,!0),o),this)}listAll(){return ere(this._delegate).then(e=>new Xk(e,this.storage))}list(e){return Zne(this._delegate,e||void 0).then(n=>new Xk(n,this.storage))}getMetadata(){return Qne(this._delegate)}updateMetadata(e){return Xne(this._delegate,e)}getDownloadURL(){return g3(this._delegate)}delete(){return this._throwIfRoot("delete"),tre(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw Z6(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(Zk(e))throw Nf("ref() expected a child path but got a URL, use refFromURL instead.");return new $s(CA(this._delegate,e),this)}refFromURL(e){if(!Zk(e))throw Nf("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ar.makeFromUrl(e,this._delegate.host)}catch{throw Nf("refFromUrl() expected a valid full URL but got an invalid one.")}return new $s(CA(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){y3(this._delegate,e,n,r)}}function Zk(t){return/^[A-Za-z]+:\/\//.test(t)}const sre="@firebase/storage-compat",are="0.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lre="storage-compat";function ure(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new v3(n,r)}function cre(t){const e={TaskState:Vr,TaskEvent:Nne,StringFormat:yi,Storage:v3,Reference:$s};t.INTERNAL.registerComponent(new Ji(lre,ure,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(sre,are)}cre(Sl);const fre={apiKey:"AIzaSyCZh_PwX7LZfXujZiHGH9T-8uA17hNQGBY",authDomain:"bkomhate-site.firebaseapp.com",projectId:"bkomhate-site",storageBucket:"bkomhate-site.firebasestorage.app",messagingSenderId:"37549082348",appId:"1:37549082348:web:cf0c6c4f504b40192887c9"},Px=Sl.initializeApp(fre),Gp=PJ(Px),Kr=zee(Px),dre=rre(Px),_3=x.createContext({currentUser:null,loading:!0}),hre=()=>x.useContext(_3),pre=({children:t})=>{const[e,n]=x.useState(null),[r,i]=x.useState(!0);x.useEffect(()=>eY(Gp,u=>{n(u),i(!1)}),[]);const o={currentUser:e,loading:r};return O.jsx(_3.Provider,{value:o,children:t})};function T3(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=T3(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Kt(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=T3(t))&&(r&&(r+=" "),r+=e);return r}var Zw={},eb={},eO;function mre(){return eO||(eO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(eb)),eb}var tb={},tO;function E3(){return tO||(tO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(tb)),tb}var nb={},nO;function w3(){return nO||(nO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}t.toKey=e})(nb)),nb}var rb={},rO;function Mx(){return rO||(rO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){const r=[],i=n.length;if(i===0)return r;let o=0,s="",u="",c=!1;for(n.charCodeAt(0)===46&&(r.push(""),o++);o<i;){const f=n[o];u?f==="\\"&&o+1<i?(o++,s+=n[o]):f===u?u="":s+=f:c?f==='"'||f==="'"?u=f:f==="]"?(c=!1,r.push(s),s=""):s+=f:f==="["?(c=!0,s&&(r.push(s),s="")):f==="."?s&&(r.push(s),s=""):s+=f,o++}return s&&r.push(s),r}t.toPath=e})(rb)),rb}var iO;function Dx(){return iO||(iO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=mre(),n=E3(),r=w3(),i=Mx();function o(u,c,f){if(u==null)return f;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return f;const h=u[c];return h===void 0?n.isDeepKey(c)?o(u,i.toPath(c),f):f:h}case"number":case"symbol":{typeof c=="number"&&(c=r.toKey(c));const h=u[c];return h===void 0?f:h}default:{if(Array.isArray(c))return s(u,c,f);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return f;const h=u[c];return h===void 0?f:h}}}function s(u,c,f){if(c.length===0)return f;let h=u;for(let y=0;y<c.length;y++){if(h==null||e.isUnsafeProperty(c[y]))return f;h=h[c[y]]}return h===void 0?f:h}t.get=o})(Zw)),Zw}var ib,oO;function gre(){return oO||(oO=1,ib=Dx().get),ib}var yre=gre();const ud=ss(yre);var ob={exports:{}},kt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sO;function vre(){if(sO)return kt;sO=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),s=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.for("react.view_transition"),E=Symbol.for("react.client.reference");function b(S){if(typeof S=="object"&&S!==null){var A=S.$$typeof;switch(A){case t:switch(S=S.type,S){case n:case i:case r:case c:case f:case v:return S;default:switch(S=S&&S.$$typeof,S){case s:case u:case y:case h:return S;case o:return S;default:return A}}case e:return A}}}return kt.ContextConsumer=o,kt.ContextProvider=s,kt.Element=t,kt.ForwardRef=u,kt.Fragment=n,kt.Lazy=y,kt.Memo=h,kt.Portal=e,kt.Profiler=i,kt.StrictMode=r,kt.Suspense=c,kt.SuspenseList=f,kt.isContextConsumer=function(S){return b(S)===o},kt.isContextProvider=function(S){return b(S)===s},kt.isElement=function(S){return typeof S=="object"&&S!==null&&S.$$typeof===t},kt.isForwardRef=function(S){return b(S)===u},kt.isFragment=function(S){return b(S)===n},kt.isLazy=function(S){return b(S)===y},kt.isMemo=function(S){return b(S)===h},kt.isPortal=function(S){return b(S)===e},kt.isProfiler=function(S){return b(S)===i},kt.isStrictMode=function(S){return b(S)===r},kt.isSuspense=function(S){return b(S)===c},kt.isSuspenseList=function(S){return b(S)===f},kt.isValidElementType=function(S){return typeof S=="string"||typeof S=="function"||S===n||S===i||S===r||S===c||S===f||typeof S=="object"&&S!==null&&(S.$$typeof===y||S.$$typeof===h||S.$$typeof===s||S.$$typeof===o||S.$$typeof===u||S.$$typeof===E||S.getModuleId!==void 0)},kt.typeOf=b,kt}var aO;function _re(){return aO||(aO=1,ob.exports=vre()),ob.exports}var Tre=_re(),vi=t=>t===0?0:t>0?1:-1,Xi=t=>typeof t=="number"&&t!=+t,Du=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,Ye=t=>(typeof t=="number"||t instanceof Number)&&!Xi(t),is=t=>Ye(t)||typeof t=="string",Ere=0,_m=t=>{var e=++Ere;return"".concat(t||"").concat(e)},yo=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ye(e)&&typeof e!="string")return r;var o;if(Du(e)){if(n==null)return r;var s=e.indexOf("%");o=n*parseFloat(e.slice(0,s))/100}else o=+e;return Xi(o)&&(o=r),i&&n!=null&&o>n&&(o=n),o},b3=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[t[r]])n[t[r]]=!0;else return!0;return!1};function Lr(t,e,n){return Ye(t)&&Ye(e)?t+n*(e-t):e}function wre(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):ud(r,e))===n)}var er=t=>t===null||typeof t>"u",Zm=t=>er(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1)),bre=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Nx(t){if(typeof t!="string")return!1;var e=bre;return e.includes(t)}var Sre=["viewBox","children"],lO=["points","pathLength"],sb={svg:Sre,polygon:lO,polyline:lO},Are=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(x.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{Nx(i)&&(r[i]=(o=>n[i](n,o)))}),r},Cre=(t,e,n)=>r=>(t(e,n,r),null),kx=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var o=t[i];Nx(i)&&typeof o=="function"&&(r||(r={}),r[i]=Cre(o,e,n))}),r},Ire=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function S3(t){if(typeof t!="string")return!1;var e=Ire;return e.includes(t)}function H0(t){var e=Object.entries(t).filter(n=>{var[r]=n;return S3(r)});return Object.fromEntries(e)}var uO=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",cO=null,ab=null,A3=t=>{if(t===cO&&Array.isArray(ab))return ab;var e=[];return x.Children.forEach(t,n=>{er(n)||(Tre.isFragment(n)?e=e.concat(A3(n.props.children)):e.push(n))}),ab=e,cO=t,e};function xre(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>uO(i)):r=[uO(e)],A3(t).forEach(i=>{var o=ud(i,"type.displayName")||ud(i,"type.name");r.indexOf(o)!==-1&&n.push(i)}),n}var Rre=(t,e,n,r)=>{var i;if(typeof e=="symbol"||typeof e=="number")return!0;var o=(i=r&&(sb==null?void 0:sb[r]))!==null&&i!==void 0?i:[],s=e.startsWith("data-"),u=typeof t!="function"&&(!!r&&o.includes(e)||S3(e)),c=!!n&&Nx(e);return s||u||c},Qn=(t,e,n)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(x.isValidElement(t)&&(r=t.props),typeof r!="object"&&typeof r!="function")return null;var i={};return Object.keys(r).forEach(o=>{var s;Rre((s=r)===null||s===void 0?void 0:s[o],o,e,n)&&(i[o]=r[o])}),i},Pre=["children","width","height","viewBox","className","style","title","desc"];function IA(){return IA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},IA.apply(null,arguments)}function Mre(t,e){if(t==null)return{};var n,r,i=Dre(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Dre(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var C3=x.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:o,className:s,style:u,title:c,desc:f}=t,h=Mre(t,Pre),y=o||{width:r,height:i,x:0,y:0},v=Kt("recharts-surface",s);return x.createElement("svg",IA({},Qn(h,!0,"svg"),{className:v,width:r,height:i,style:u,viewBox:"".concat(y.x," ").concat(y.y," ").concat(y.width," ").concat(y.height),ref:e}),x.createElement("title",null,c),x.createElement("desc",null,f),n)}),Nre=["children","className"];function xA(){return xA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xA.apply(null,arguments)}function kre(t,e){if(t==null)return{};var n,r,i=Ore(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Ore(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var El=x.forwardRef((t,e)=>{var{children:n,className:r}=t,i=kre(t,Nre),o=Kt("recharts-layer",r);return x.createElement("g",xA({className:o},Qn(i,!0),{ref:e}),n)}),Vre=x.createContext(null);function Ut(t){return function(){return t}}const I3=Math.cos,d_=Math.sin,To=Math.sqrt,h_=Math.PI,G0=2*h_,RA=Math.PI,PA=2*RA,Tu=1e-6,Lre=PA-Tu;function x3(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Ure(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return x3;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Fre{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?x3:Ure(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,u=this._y1,c=r-e,f=i-n,h=s-e,y=u-n,v=h*h+y*y;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(v>Tu)if(!(Math.abs(y*c-f*h)>Tu)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let E=r-s,b=i-u,S=c*c+f*f,A=E*E+b*b,R=Math.sqrt(S),D=Math.sqrt(v),M=o*Math.tan((RA-Math.acos((S+v-A)/(2*R*D)))/2),U=M/D,q=M/R;Math.abs(U-1)>Tu&&this._append`L${e+U*h},${n+U*y}`,this._append`A${o},${o},0,0,${+(y*E>h*b)},${this._x1=e+q*c},${this._y1=n+q*f}`}}arc(e,n,r,i,o,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),c=r*Math.sin(i),f=e+u,h=n+c,y=1^s,v=s?i-o:o-i;this._x1===null?this._append`M${f},${h}`:(Math.abs(this._x1-f)>Tu||Math.abs(this._y1-h)>Tu)&&this._append`L${f},${h}`,r&&(v<0&&(v=v%PA+PA),v>Lre?this._append`A${r},${r},0,1,${y},${e-u},${n-c}A${r},${r},0,1,${y},${this._x1=f},${this._y1=h}`:v>Tu&&this._append`A${r},${r},0,${+(v>=RA)},${y},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Ox(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Fre(e)}function Vx(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function R3(t){this._context=t}R3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function K0(t){return new R3(t)}function P3(t){return t[0]}function M3(t){return t[1]}function D3(t,e){var n=Ut(!0),r=null,i=K0,o=null,s=Ox(u);t=typeof t=="function"?t:t===void 0?P3:Ut(t),e=typeof e=="function"?e:e===void 0?M3:Ut(e);function u(c){var f,h=(c=Vx(c)).length,y,v=!1,E;for(r==null&&(o=i(E=s())),f=0;f<=h;++f)!(f<h&&n(y=c[f],f,c))===v&&((v=!v)?o.lineStart():o.lineEnd()),v&&o.point(+t(y,f,c),+e(y,f,c));if(E)return o=null,E+""||null}return u.x=function(c){return arguments.length?(t=typeof c=="function"?c:Ut(+c),u):t},u.y=function(c){return arguments.length?(e=typeof c=="function"?c:Ut(+c),u):e},u.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Ut(!!c),u):n},u.curve=function(c){return arguments.length?(i=c,r!=null&&(o=i(r)),u):i},u.context=function(c){return arguments.length?(c==null?r=o=null:o=i(r=c),u):r},u}function Yy(t,e,n){var r=null,i=Ut(!0),o=null,s=K0,u=null,c=Ox(f);t=typeof t=="function"?t:t===void 0?P3:Ut(+t),e=typeof e=="function"?e:Ut(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?M3:Ut(+n);function f(y){var v,E,b,S=(y=Vx(y)).length,A,R=!1,D,M=new Array(S),U=new Array(S);for(o==null&&(u=s(D=c())),v=0;v<=S;++v){if(!(v<S&&i(A=y[v],v,y))===R)if(R=!R)E=v,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),b=v-1;b>=E;--b)u.point(M[b],U[b]);u.lineEnd(),u.areaEnd()}R&&(M[v]=+t(A,v,y),U[v]=+e(A,v,y),u.point(r?+r(A,v,y):M[v],n?+n(A,v,y):U[v]))}if(D)return u=null,D+""||null}function h(){return D3().defined(i).curve(s).context(o)}return f.x=function(y){return arguments.length?(t=typeof y=="function"?y:Ut(+y),r=null,f):t},f.x0=function(y){return arguments.length?(t=typeof y=="function"?y:Ut(+y),f):t},f.x1=function(y){return arguments.length?(r=y==null?null:typeof y=="function"?y:Ut(+y),f):r},f.y=function(y){return arguments.length?(e=typeof y=="function"?y:Ut(+y),n=null,f):e},f.y0=function(y){return arguments.length?(e=typeof y=="function"?y:Ut(+y),f):e},f.y1=function(y){return arguments.length?(n=y==null?null:typeof y=="function"?y:Ut(+y),f):n},f.lineX0=f.lineY0=function(){return h().x(t).y(e)},f.lineY1=function(){return h().x(t).y(n)},f.lineX1=function(){return h().x(r).y(e)},f.defined=function(y){return arguments.length?(i=typeof y=="function"?y:Ut(!!y),f):i},f.curve=function(y){return arguments.length?(s=y,o!=null&&(u=s(o)),f):s},f.context=function(y){return arguments.length?(y==null?o=u=null:u=s(o=y),f):o},f}class N3{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function Bre(t){return new N3(t,!0)}function qre(t){return new N3(t,!1)}const Lx={draw(t,e){const n=To(e/h_);t.moveTo(n,0),t.arc(0,0,n,0,G0)}},$re={draw(t,e){const n=To(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},k3=To(1/3),zre=k3*2,Hre={draw(t,e){const n=To(e/zre),r=n*k3;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},Gre={draw(t,e){const n=To(e),r=-n/2;t.rect(r,r,n,n)}},Kre=.8908130915292852,O3=d_(h_/10)/d_(7*h_/10),jre=d_(G0/10)*O3,Wre=-I3(G0/10)*O3,Yre={draw(t,e){const n=To(e*Kre),r=jre*n,i=Wre*n;t.moveTo(0,-n),t.lineTo(r,i);for(let o=1;o<5;++o){const s=G0*o/5,u=I3(s),c=d_(s);t.lineTo(c*n,-u*n),t.lineTo(u*r-c*i,c*r+u*i)}t.closePath()}},lb=To(3),Jre={draw(t,e){const n=-To(e/(lb*3));t.moveTo(0,n*2),t.lineTo(-lb*n,-n),t.lineTo(lb*n,-n),t.closePath()}},Bi=-.5,qi=To(3)/2,MA=1/To(12),Qre=(MA/2+1)*3,Xre={draw(t,e){const n=To(e/Qre),r=n/2,i=n*MA,o=r,s=n*MA+n,u=-o,c=s;t.moveTo(r,i),t.lineTo(o,s),t.lineTo(u,c),t.lineTo(Bi*r-qi*i,qi*r+Bi*i),t.lineTo(Bi*o-qi*s,qi*o+Bi*s),t.lineTo(Bi*u-qi*c,qi*u+Bi*c),t.lineTo(Bi*r+qi*i,Bi*i-qi*r),t.lineTo(Bi*o+qi*s,Bi*s-qi*o),t.lineTo(Bi*u+qi*c,Bi*c-qi*u),t.closePath()}};function Zre(t,e){let n=null,r=Ox(i);t=typeof t=="function"?t:Ut(t||Lx),e=typeof e=="function"?e:Ut(e===void 0?64:+e);function i(){let o;if(n||(n=o=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(t=typeof o=="function"?o:Ut(o),i):t},i.size=function(o){return arguments.length?(e=typeof o=="function"?o:Ut(+o),i):e},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function p_(){}function m_(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function V3(t){this._context=t}V3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:m_(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:m_(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function eie(t){return new V3(t)}function L3(t){this._context=t}L3.prototype={areaStart:p_,areaEnd:p_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:m_(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function tie(t){return new L3(t)}function U3(t){this._context=t}U3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:m_(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function nie(t){return new U3(t)}function F3(t){this._context=t}F3.prototype={areaStart:p_,areaEnd:p_,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function rie(t){return new F3(t)}function fO(t){return t<0?-1:1}function dO(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),u=(o*i+s*r)/(r+i);return(fO(o)+fO(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(u))||0}function hO(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function ub(t,e,n){var r=t._x0,i=t._y0,o=t._x1,s=t._y1,u=(o-r)/3;t._context.bezierCurveTo(r+u,i+u*e,o-u,s-u*n,o,s)}function g_(t){this._context=t}g_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ub(this,this._t0,hO(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,ub(this,hO(this,n=dO(this,t,e)),n);break;default:ub(this,this._t0,n=dO(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function B3(t){this._context=new q3(t)}(B3.prototype=Object.create(g_.prototype)).point=function(t,e){g_.prototype.point.call(this,e,t)};function q3(t){this._context=t}q3.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}};function iie(t){return new g_(t)}function oie(t){return new B3(t)}function $3(t){this._context=t}$3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=pO(t),i=pO(e),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function pO(t){var e,n=t.length-1,r,i=new Array(n),o=new Array(n),s=new Array(n);for(i[0]=0,o[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,o[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,o[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/o[e-1],o[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/o[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/o[e];for(o[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function sie(t){return new $3(t)}function j0(t,e){this._context=t,this._t=e}j0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function aie(t){return new j0(t,.5)}function lie(t){return new j0(t,0)}function uie(t){return new j0(t,1)}function cd(t,e){if((s=t.length)>1)for(var n=1,r,i,o=t[e[0]],s,u=o.length;n<s;++n)for(i=o,o=t[e[n]],r=0;r<u;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function DA(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function cie(t,e){return t[e]}function fie(t){const e=[];return e.key=t,e}function die(){var t=Ut([]),e=DA,n=cd,r=cie;function i(o){var s=Array.from(t.apply(this,arguments),fie),u,c=s.length,f=-1,h;for(const y of o)for(u=0,++f;u<c;++u)(s[u][f]=[0,+r(y,s[u].key,f,o)]).data=y;for(u=0,h=Vx(e(s));u<c;++u)s[h[u]].index=u;return n(s,h),s}return i.keys=function(o){return arguments.length?(t=typeof o=="function"?o:Ut(Array.from(o)),i):t},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:Ut(+o),i):r},i.order=function(o){return arguments.length?(e=o==null?DA:typeof o=="function"?o:Ut(Array.from(o)),i):e},i.offset=function(o){return arguments.length?(n=o??cd,i):n},i}function hie(t,e){if((r=t.length)>0){for(var n,r,i=0,o=t[0].length,s;i<o;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}cd(t,e)}}function pie(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,o=r.length;n<o;++n){for(var s=0,u=0;s<i;++s)u+=t[s][n][1]||0;r[n][1]+=r[n][0]=-u/2}cd(t,e)}}function mie(t,e){if(!(!((s=t.length)>0)||!((o=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,o,s;r<o;++r){for(var u=0,c=0,f=0;u<s;++u){for(var h=t[e[u]],y=h[r][1]||0,v=h[r-1][1]||0,E=(y-v)/2,b=0;b<u;++b){var S=t[e[b]],A=S[r][1]||0,R=S[r-1][1]||0;E+=A-R}c+=y,f+=E*y}i[r-1][1]+=i[r-1][0]=n,c&&(n-=f/c)}i[r-1][1]+=i[r-1][0]=n,cd(t,e)}}var gie=["type","size","sizeType"];function NA(){return NA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NA.apply(null,arguments)}function mO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mO(Object(n),!0).forEach(function(r){yie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yie(t,e,n){return(e=vie(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vie(t){var e=_ie(t,"string");return typeof e=="symbol"?e:e+""}function _ie(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Tie(t,e){if(t==null)return{};var n,r,i=Eie(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Eie(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var z3={symbolCircle:Lx,symbolCross:$re,symbolDiamond:Hre,symbolSquare:Gre,symbolStar:Yre,symbolTriangle:Jre,symbolWye:Xre},wie=Math.PI/180,bie=t=>{var e="symbol".concat(Zm(t));return z3[e]||Lx},Sie=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*wie;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Aie=(t,e)=>{z3["symbol".concat(Zm(t))]=e},H3=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=Tie(t,gie),o=gO(gO({},i),{},{type:e,size:n,sizeType:r}),s="circle";typeof e=="string"&&(s=e);var u=()=>{var v=bie(s),E=Zre().type(v).size(Sie(n,r,s));return E()},{className:c,cx:f,cy:h}=o,y=Qn(o,!0);return f===+f&&h===+h&&n===+n?x.createElement("path",NA({},y,{className:Kt("recharts-symbols",c),transform:"translate(".concat(f,", ").concat(h,")"),d:u()})):null};H3.registerSymbol=Aie;var cb={},fb={},yO;function Cie(){return yO||(yO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let o=0;o<n.length;o++){const s=n[o],u=r(s);i.has(u)||i.set(u,s)}return Array.from(i.values())}t.uniqBy=e})(fb)),fb}var db={},vO;function G3(){return vO||(vO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(db)),db}var hb={},pb={},mb={},_O;function Iie(){return _O||(_O=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(mb)),mb}var TO;function Ux(){return TO||(TO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Iie();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(pb)),pb}var gb={},EO;function xie(){return EO||(EO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(gb)),gb}var wO;function Rie(){return wO||(wO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Ux(),n=xie();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(hb)),hb}var yb={},vb={},bO;function Pie(){return bO||(bO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Dx();function n(r){return function(i){return e.get(i,r)}}t.property=n})(vb)),vb}var _b={},Tb={},Eb={},wb={},SO;function K3(){return SO||(SO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(wb)),wb}var bb={},AO;function j3(){return AO||(AO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(bb)),bb}var Sb={},CO;function W3(){return CO||(CO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.eq=e})(Sb)),Sb}var IO;function Mie(){return IO||(IO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Fx(),n=K3(),r=j3(),i=W3();function o(y,v,E){return typeof E!="function"?e.isMatch(y,v):s(y,v,function b(S,A,R,D,M,U){const q=E(S,A,R,D,M,U);return q!==void 0?!!q:s(S,A,b,U)},new Map)}function s(y,v,E,b){if(v===y)return!0;switch(typeof v){case"object":return u(y,v,E,b);case"function":return Object.keys(v).length>0?s(y,{...v},E,b):i.eq(y,v);default:return n.isObject(y)?typeof v=="string"?v==="":!0:i.eq(y,v)}}function u(y,v,E,b){if(v==null)return!0;if(Array.isArray(v))return f(y,v,E,b);if(v instanceof Map)return c(y,v,E,b);if(v instanceof Set)return h(y,v,E,b);const S=Object.keys(v);if(y==null)return S.length===0;if(S.length===0)return!0;if(b&&b.has(v))return b.get(v)===y;b&&b.set(v,y);try{for(let A=0;A<S.length;A++){const R=S[A];if(!r.isPrimitive(y)&&!(R in y)||v[R]===void 0&&y[R]!==void 0||v[R]===null&&y[R]!==null||!E(y[R],v[R],R,y,v,b))return!1}return!0}finally{b&&b.delete(v)}}function c(y,v,E,b){if(v.size===0)return!0;if(!(y instanceof Map))return!1;for(const[S,A]of v.entries()){const R=y.get(S);if(E(R,A,S,y,v,b)===!1)return!1}return!0}function f(y,v,E,b){if(v.length===0)return!0;if(!Array.isArray(y))return!1;const S=new Set;for(let A=0;A<v.length;A++){const R=v[A];let D=!1;for(let M=0;M<y.length;M++){if(S.has(M))continue;const U=y[M];let q=!1;if(E(U,R,A,y,v,b)&&(q=!0),q){S.add(M),D=!0;break}}if(!D)return!1}return!0}function h(y,v,E,b){return v.size===0?!0:y instanceof Set?f([...y],[...v],E,b):!1}t.isMatchWith=o,t.isSetMatch=h})(Eb)),Eb}var xO;function Fx(){return xO||(xO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Mie();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(Tb)),Tb}var Ab={},Cb={},Ib={},RO;function Die(){return RO||(RO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(Ib)),Ib}var xb={},PO;function Y3(){return PO||(PO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(xb)),xb}var Rb={},MO;function J3(){return MO||(MO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",o="[object Arguments]",s="[object Symbol]",u="[object Date]",c="[object Map]",f="[object Set]",h="[object Array]",y="[object Function]",v="[object ArrayBuffer]",E="[object Object]",b="[object Error]",S="[object DataView]",A="[object Uint8Array]",R="[object Uint8ClampedArray]",D="[object Uint16Array]",M="[object Uint32Array]",U="[object BigUint64Array]",q="[object Int8Array]",z="[object Int16Array]",k="[object Int32Array]",V="[object BigInt64Array]",N="[object Float32Array]",$="[object Float64Array]";t.argumentsTag=o,t.arrayBufferTag=v,t.arrayTag=h,t.bigInt64ArrayTag=V,t.bigUint64ArrayTag=U,t.booleanTag=i,t.dataViewTag=S,t.dateTag=u,t.errorTag=b,t.float32ArrayTag=N,t.float64ArrayTag=$,t.functionTag=y,t.int16ArrayTag=z,t.int32ArrayTag=k,t.int8ArrayTag=q,t.mapTag=c,t.numberTag=r,t.objectTag=E,t.regexpTag=e,t.setTag=f,t.stringTag=n,t.symbolTag=s,t.uint16ArrayTag=D,t.uint32ArrayTag=M,t.uint8ArrayTag=A,t.uint8ClampedArrayTag=R})(Rb)),Rb}var Pb={},DO;function Nie(){return DO||(DO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(Pb)),Pb}var NO;function Q3(){return NO||(NO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Die(),n=Y3(),r=J3(),i=j3(),o=Nie();function s(h,y){return u(h,void 0,h,new Map,y)}function u(h,y,v,E=new Map,b=void 0){const S=b==null?void 0:b(h,y,v,E);if(S!==void 0)return S;if(i.isPrimitive(h))return h;if(E.has(h))return E.get(h);if(Array.isArray(h)){const A=new Array(h.length);E.set(h,A);for(let R=0;R<h.length;R++)A[R]=u(h[R],R,v,E,b);return Object.hasOwn(h,"index")&&(A.index=h.index),Object.hasOwn(h,"input")&&(A.input=h.input),A}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const A=new RegExp(h.source,h.flags);return A.lastIndex=h.lastIndex,A}if(h instanceof Map){const A=new Map;E.set(h,A);for(const[R,D]of h)A.set(R,u(D,R,v,E,b));return A}if(h instanceof Set){const A=new Set;E.set(h,A);for(const R of h)A.add(u(R,void 0,v,E,b));return A}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(o.isTypedArray(h)){const A=new(Object.getPrototypeOf(h)).constructor(h.length);E.set(h,A);for(let R=0;R<h.length;R++)A[R]=u(h[R],R,v,E,b);return A}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const A=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return E.set(h,A),c(A,h,v,E,b),A}if(typeof File<"u"&&h instanceof File){const A=new File([h],h.name,{type:h.type});return E.set(h,A),c(A,h,v,E,b),A}if(h instanceof Blob){const A=new Blob([h],{type:h.type});return E.set(h,A),c(A,h,v,E,b),A}if(h instanceof Error){const A=new h.constructor;return E.set(h,A),A.message=h.message,A.name=h.name,A.stack=h.stack,A.cause=h.cause,c(A,h,v,E,b),A}if(typeof h=="object"&&f(h)){const A=Object.create(Object.getPrototypeOf(h));return E.set(h,A),c(A,h,v,E,b),A}return h}function c(h,y,v=h,E,b){const S=[...Object.keys(y),...e.getSymbols(y)];for(let A=0;A<S.length;A++){const R=S[A],D=Object.getOwnPropertyDescriptor(h,R);(D==null||D.writable)&&(h[R]=u(y[R],R,v,E,b))}}function f(h){switch(n.getTag(h)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=s,t.cloneDeepWithImpl=u,t.copyProperties=c})(Cb)),Cb}var kO;function kie(){return kO||(kO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Q3();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(Ab)),Ab}var OO;function Oie(){return OO||(OO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Fx(),n=kie();function r(i){return i=n.cloneDeep(i),o=>e.isMatch(o,i)}t.matches=r})(_b)),_b}var Mb={},Db={},Nb={},VO;function Vie(){return VO||(VO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Q3(),n=J3();function r(i,o){return e.cloneDeepWith(i,(s,u,c,f)=>{const h=o==null?void 0:o(s,u,c,f);if(h!==void 0)return h;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const y=new i.constructor(i==null?void 0:i.valueOf());return e.copyProperties(y,i),y}case n.argumentsTag:{const y={};return e.copyProperties(y,i),y.length=i.length,y[Symbol.iterator]=i[Symbol.iterator],y}default:return}})}t.cloneDeepWith=r})(Nb)),Nb}var LO;function Lie(){return LO||(LO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Vie();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(Db)),Db}var kb={},Ob={},UO;function X3(){return UO||(UO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(Ob)),Ob}var Vb={},FO;function Uie(){return FO||(FO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Y3();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(Vb)),Vb}var BO;function Fie(){return BO||(BO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=E3(),n=X3(),r=Uie(),i=Mx();function o(s,u){let c;if(Array.isArray(u)?c=u:typeof u=="string"&&e.isDeepKey(u)&&(s==null?void 0:s[u])==null?c=i.toPath(u):c=[u],c.length===0)return!1;let f=s;for(let h=0;h<c.length;h++){const y=c[h];if((f==null||!Object.hasOwn(f,y))&&!((Array.isArray(f)||r.isArguments(f))&&n.isIndex(y)&&y<f.length))return!1;f=f[y]}return!0}t.has=o})(kb)),kb}var qO;function Bie(){return qO||(qO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Fx(),n=w3(),r=Lie(),i=Dx(),o=Fie();function s(u,c){switch(typeof u){case"object":{Object.is(u==null?void 0:u.valueOf(),-0)&&(u="-0");break}case"number":{u=n.toKey(u);break}}return c=r.cloneDeep(c),function(f){const h=i.get(f,u);return h===void 0?o.has(f,u):c===void 0?h===void 0:e.isMatch(h,c)}}t.matchesProperty=s})(Mb)),Mb}var $O;function qie(){return $O||($O=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=G3(),n=Pie(),r=Oie(),i=Bie();function o(s){if(s==null)return e.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?i.matchesProperty(s[0],s[1]):r.matches(s);case"string":case"symbol":case"number":return n.property(s)}}t.iteratee=o})(yb)),yb}var zO;function $ie(){return zO||(zO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Cie(),n=G3(),r=Rie(),i=qie();function o(s,u=n.identity){return r.isArrayLikeObject(s)?e.uniqBy(Array.from(s),i.iteratee(u)):[]}t.uniqBy=o})(cb)),cb}var Lb,HO;function zie(){return HO||(HO=1,Lb=$ie().uniqBy),Lb}var Hie=zie();const GO=ss(Hie);function Gie(t,e,n){return e===!0?GO(t,n):typeof e=="function"?GO(t,e):t}var Ub={exports:{}},Fb={},Bb={exports:{}},qb={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KO;function Kie(){if(KO)return qb;KO=1;var t=_d();function e(y,v){return y===v&&(y!==0||1/y===1/v)||y!==y&&v!==v}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,o=t.useLayoutEffect,s=t.useDebugValue;function u(y,v){var E=v(),b=r({inst:{value:E,getSnapshot:v}}),S=b[0].inst,A=b[1];return o(function(){S.value=E,S.getSnapshot=v,c(S)&&A({inst:S})},[y,E,v]),i(function(){return c(S)&&A({inst:S}),y(function(){c(S)&&A({inst:S})})},[y]),s(E),E}function c(y){var v=y.getSnapshot;y=y.value;try{var E=v();return!n(y,E)}catch{return!0}}function f(y,v){return v()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return qb.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:h,qb}var jO;function jie(){return jO||(jO=1,Bb.exports=Kie()),Bb.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WO;function Wie(){if(WO)return Fb;WO=1;var t=_d(),e=jie();function n(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,o=t.useRef,s=t.useEffect,u=t.useMemo,c=t.useDebugValue;return Fb.useSyncExternalStoreWithSelector=function(f,h,y,v,E){var b=o(null);if(b.current===null){var S={hasValue:!1,value:null};b.current=S}else S=b.current;b=u(function(){function R(z){if(!D){if(D=!0,M=z,z=v(z),E!==void 0&&S.hasValue){var k=S.value;if(E(k,z))return U=k}return U=z}if(k=U,r(M,z))return k;var V=v(z);return E!==void 0&&E(k,V)?(M=z,k):(M=z,U=V)}var D=!1,M,U,q=y===void 0?null:y;return[function(){return R(h())},q===null?void 0:function(){return R(q())}]},[h,y,v,E]);var A=i(f,b[0],b[1]);return s(function(){S.hasValue=!0,S.value=A},[A]),c(A),A},Fb}var YO;function Yie(){return YO||(YO=1,Ub.exports=Wie()),Ub.exports}var Jie=Yie(),Bx=x.createContext(null),Qie=t=>t,tr=()=>{var t=x.useContext(Bx);return t?t.store.dispatch:Qie},Mv=()=>{},Xie=()=>Mv,Zie=(t,e)=>t===e;function $e(t){var e=x.useContext(Bx);return Jie.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:Xie,e?e.store.getState:Mv,e?e.store.getState:Mv,e?t:Mv,Zie)}function eoe(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function toe(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function noe(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var JO=t=>Array.isArray(t)?t:[t];function roe(t){const e=Array.isArray(t[0])?t[0]:t;return noe(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function ioe(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var ooe=class{constructor(t){this.value=t}deref(){return this.value}},soe=typeof WeakRef<"u"?WeakRef:ooe,aoe=0,QO=1;function Jy(){return{s:aoe,v:void 0,o:null,p:null}}function Z3(t,e={}){let n=Jy();const{resultEqualityCheck:r}=e;let i,o=0;function s(){var y;let u=n;const{length:c}=arguments;for(let v=0,E=c;v<E;v++){const b=arguments[v];if(typeof b=="function"||typeof b=="object"&&b!==null){let S=u.o;S===null&&(u.o=S=new WeakMap);const A=S.get(b);A===void 0?(u=Jy(),S.set(b,u)):u=A}else{let S=u.p;S===null&&(u.p=S=new Map);const A=S.get(b);A===void 0?(u=Jy(),S.set(b,u)):u=A}}const f=u;let h;if(u.s===QO)h=u.v;else if(h=t.apply(null,arguments),o++,r){const v=((y=i==null?void 0:i.deref)==null?void 0:y.call(i))??i;v!=null&&r(v,h)&&(h=v,o!==0&&o--),i=typeof h=="object"&&h!==null||typeof h=="function"?new soe(h):h}return f.s=QO,f.v=h,h}return s.clearCache=()=>{n=Jy(),s.resetResultsCount()},s.resultsCount=()=>o,s.resetResultsCount=()=>{o=0},s}function loe(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let o=0,s=0,u,c={},f=i.pop();typeof f=="object"&&(c=f,f=i.pop()),eoe(f,`createSelector expects an output function after the inputs, but received: [${typeof f}]`);const h={...n,...c},{memoize:y,memoizeOptions:v=[],argsMemoize:E=Z3,argsMemoizeOptions:b=[]}=h,S=JO(v),A=JO(b),R=roe(i),D=y(function(){return o++,f.apply(null,arguments)},...S),M=E(function(){s++;const q=ioe(R,arguments);return u=D.apply(null,q),u},...A);return Object.assign(M,{resultFunc:f,memoizedResultFunc:D,dependencies:R,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>u,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:y,argsMemoize:E})};return Object.assign(r,{withTypes:()=>r}),r}var se=loe(Z3),uoe=Object.assign((t,e=se)=>{toe(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(o=>t[o]);return e(r,(...o)=>o.reduce((s,u,c)=>(s[n[c]]=u,s),{}))},{withTypes:()=>uoe}),$b={},zb={},Hb={},XO;function coe(){return XO||(XO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,o)=>{if(r!==i){const s=e(r),u=e(i);if(s===u&&s===0){if(r<i)return o==="desc"?1:-1;if(r>i)return o==="desc"?-1:1}return o==="desc"?u-s:s-u}return 0};t.compareValues=n})(Hb)),Hb}var Gb={},Kb={},ZO;function e$(){return ZO||(ZO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(Kb)),Kb}var e2;function foe(){return e2||(e2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=e$(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(o,s){return Array.isArray(o)?!1:typeof o=="number"||typeof o=="boolean"||o==null||e.isSymbol(o)?!0:typeof o=="string"&&(r.test(o)||!n.test(o))||s!=null&&Object.hasOwn(s,o)}t.isKey=i})(Gb)),Gb}var t2;function doe(){return t2||(t2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=coe(),n=foe(),r=Mx();function i(o,s,u,c){if(o==null)return[];u=c?void 0:u,Array.isArray(o)||(o=Object.values(o)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(E=>String(E));const f=(E,b)=>{let S=E;for(let A=0;A<b.length&&S!=null;++A)S=S[b[A]];return S},h=(E,b)=>b==null||E==null?b:typeof E=="object"&&"key"in E?Object.hasOwn(b,E.key)?b[E.key]:f(b,E.path):typeof E=="function"?E(b):Array.isArray(E)?f(b,E):typeof b=="object"?b[E]:b,y=s.map(E=>(Array.isArray(E)&&E.length===1&&(E=E[0]),E==null||typeof E=="function"||Array.isArray(E)||n.isKey(E)?E:{key:E,path:r.toPath(E)}));return o.map(E=>({original:E,criteria:y.map(b=>h(b,E))})).slice().sort((E,b)=>{for(let S=0;S<y.length;S++){const A=e.compareValues(E.criteria[S],b.criteria[S],u[S]);if(A!==0)return A}return 0}).map(E=>E.original)}t.orderBy=i})(zb)),zb}var jb={},n2;function hoe(){return n2||(n2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],o=Math.floor(r),s=(u,c)=>{for(let f=0;f<u.length;f++){const h=u[f];Array.isArray(h)&&c<o?s(h,c+1):i.push(h)}};return s(n,0),i}t.flatten=e})(jb)),jb}var Wb={},r2;function t$(){return r2||(r2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=X3(),n=Ux(),r=K3(),i=W3();function o(s,u,c){return r.isObject(c)&&(typeof u=="number"&&n.isArrayLike(c)&&e.isIndex(u)&&u<c.length||typeof u=="string"&&u in c)?i.eq(c[u],s):!1}t.isIterateeCall=o})(Wb)),Wb}var i2;function poe(){return i2||(i2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=doe(),n=hoe(),r=t$();function i(o,...s){const u=s.length;return u>1&&r.isIterateeCall(o,s[0],s[1])?s=[]:u>2&&r.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),e.orderBy(o,n.flatten(s),["asc"])}t.sortBy=i})($b)),$b}var Yb,o2;function moe(){return o2||(o2=1,Yb=poe().sortBy),Yb}var goe=moe();const W0=ss(goe);var n$=t=>t.legend.settings,yoe=t=>t.legend.size,voe=t=>t.legend.payload;se([voe,n$],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?W0(r,n):r});var Qy=1;function _oe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=x.useState({height:0,left:0,top:0,width:0}),r=x.useCallback(i=>{if(i!=null){var o=i.getBoundingClientRect(),s={height:o.height,left:o.left,top:o.top,width:o.width};(Math.abs(s.height-e.height)>Qy||Math.abs(s.left-e.left)>Qy||Math.abs(s.top-e.top)>Qy||Math.abs(s.width-e.width)>Qy)&&n({height:s.height,left:s.left,top:s.top,width:s.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function fr(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Toe=typeof Symbol=="function"&&Symbol.observable||"@@observable",s2=Toe,Jb=()=>Math.random().toString(36).substring(7).split("").join("."),Eoe={INIT:`@@redux/INIT${Jb()}`,REPLACE:`@@redux/REPLACE${Jb()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Jb()}`},y_=Eoe;function qx(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function r$(t,e,n){if(typeof t!="function")throw new Error(fr(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(fr(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(fr(1));return n(r$)(t,e)}let r=t,i=e,o=new Map,s=o,u=0,c=!1;function f(){s===o&&(s=new Map,o.forEach((A,R)=>{s.set(R,A)}))}function h(){if(c)throw new Error(fr(3));return i}function y(A){if(typeof A!="function")throw new Error(fr(4));if(c)throw new Error(fr(5));let R=!0;f();const D=u++;return s.set(D,A),function(){if(R){if(c)throw new Error(fr(6));R=!1,f(),s.delete(D),o=null}}}function v(A){if(!qx(A))throw new Error(fr(7));if(typeof A.type>"u")throw new Error(fr(8));if(typeof A.type!="string")throw new Error(fr(17));if(c)throw new Error(fr(9));try{c=!0,i=r(i,A)}finally{c=!1}return(o=s).forEach(D=>{D()}),A}function E(A){if(typeof A!="function")throw new Error(fr(10));r=A,v({type:y_.REPLACE})}function b(){const A=y;return{subscribe(R){if(typeof R!="object"||R===null)throw new Error(fr(11));function D(){const U=R;U.next&&U.next(h())}return D(),{unsubscribe:A(D)}},[s2](){return this}}}return v({type:y_.INIT}),{dispatch:v,subscribe:y,getState:h,replaceReducer:E,[s2]:b}}function woe(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:y_.INIT})>"u")throw new Error(fr(12));if(typeof n(void 0,{type:y_.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(fr(13))})}function i$(t){const e=Object.keys(t),n={};for(let o=0;o<e.length;o++){const s=e[o];typeof t[s]=="function"&&(n[s]=t[s])}const r=Object.keys(n);let i;try{woe(n)}catch(o){i=o}return function(s={},u){if(i)throw i;let c=!1;const f={};for(let h=0;h<r.length;h++){const y=r[h],v=n[y],E=s[y],b=v(E,u);if(typeof b>"u")throw u&&u.type,new Error(fr(14));f[y]=b,c=c||b!==E}return c=c||r.length!==Object.keys(s).length,c?f:s}}function v_(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function boe(...t){return e=>(n,r)=>{const i=e(n,r);let o=()=>{throw new Error(fr(15))};const s={getState:i.getState,dispatch:(c,...f)=>o(c,...f)},u=t.map(c=>c(s));return o=v_(...u)(i.dispatch),{...i,dispatch:o}}}function o$(t){return qx(t)&&"type"in t&&typeof t.type=="string"}var s$=Symbol.for("immer-nothing"),a2=Symbol.for("immer-draftable"),bi=Symbol.for("immer-state");function uo(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var fd=Object.getPrototypeOf;function tc(t){return!!t&&!!t[bi]}function Xs(t){var e;return t?a$(t)||Array.isArray(t)||!!t[a2]||!!((e=t.constructor)!=null&&e[a2])||eg(t)||J0(t):!1}var Soe=Object.prototype.constructor.toString();function a$(t){if(!t||typeof t!="object")return!1;const e=fd(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Soe}function __(t,e){Y0(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function Y0(t){const e=t[bi];return e?e.type_:Array.isArray(t)?1:eg(t)?2:J0(t)?3:0}function kA(t,e){return Y0(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function l$(t,e,n){const r=Y0(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function Aoe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function eg(t){return t instanceof Map}function J0(t){return t instanceof Set}function Eu(t){return t.copy_||t.base_}function OA(t,e){if(eg(t))return new Map(t);if(J0(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=a$(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[bi];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const s=i[o],u=r[s];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(r[s]={configurable:!0,writable:!0,enumerable:u.enumerable,value:t[s]})}return Object.create(fd(t),r)}else{const r=fd(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function $x(t,e=!1){return Q0(t)||tc(t)||!Xs(t)||(Y0(t)>1&&Object.defineProperties(t,{set:{value:Xy},add:{value:Xy},clear:{value:Xy},delete:{value:Xy}}),Object.freeze(t),e&&Object.values(t).forEach(n=>$x(n,!0))),t}function Xy(){uo(2)}function Q0(t){return Object.isFrozen(t)}var Coe={};function nc(t){const e=Coe[t];return e||uo(0,t),e}var Tm;function u$(){return Tm}function Ioe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function l2(t,e){e&&(nc("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function VA(t){LA(t),t.drafts_.forEach(xoe),t.drafts_=null}function LA(t){t===Tm&&(Tm=t.parent_)}function u2(t){return Tm=Ioe(Tm,t)}function xoe(t){const e=t[bi];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function c2(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[bi].modified_&&(VA(e),uo(4)),Xs(t)&&(t=T_(e,t),e.parent_||E_(e,t)),e.patches_&&nc("Patches").generateReplacementPatches_(n[bi].base_,t,e.patches_,e.inversePatches_)):t=T_(e,n,[]),VA(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==s$?t:void 0}function T_(t,e,n){if(Q0(e))return e;const r=e[bi];if(!r)return __(e,(i,o)=>f2(t,r,e,i,o,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return E_(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,s=!1;r.type_===3&&(o=new Set(i),i.clear(),s=!0),__(o,(u,c)=>f2(t,r,i,u,c,n,s)),E_(t,i,!1),n&&t.patches_&&nc("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function f2(t,e,n,r,i,o,s){if(tc(i)){const u=o&&e&&e.type_!==3&&!kA(e.assigned_,r)?o.concat(r):void 0,c=T_(t,i,u);if(l$(n,r,c),tc(c))t.canAutoFreeze_=!1;else return}else s&&n.add(i);if(Xs(i)&&!Q0(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;T_(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(eg(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&E_(t,i)}}function E_(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&$x(e,n)}function Roe(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:u$(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=zx;n&&(i=[r],o=Em);const{revoke:s,proxy:u}=Proxy.revocable(i,o);return r.draft_=u,r.revoke_=s,u}var zx={get(t,e){if(e===bi)return t;const n=Eu(t);if(!kA(n,e))return Poe(t,n,e);const r=n[e];return t.finalized_||!Xs(r)?r:r===Qb(t.base_,e)?(Xb(t),t.copy_[e]=FA(r,t)):r},has(t,e){return e in Eu(t)},ownKeys(t){return Reflect.ownKeys(Eu(t))},set(t,e,n){const r=c$(Eu(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=Qb(Eu(t),e),o=i==null?void 0:i[bi];if(o&&o.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(Aoe(n,i)&&(n!==void 0||kA(t.base_,e)))return!0;Xb(t),UA(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return Qb(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,Xb(t),UA(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Eu(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){uo(11)},getPrototypeOf(t){return fd(t.base_)},setPrototypeOf(){uo(12)}},Em={};__(zx,(t,e)=>{Em[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Em.deleteProperty=function(t,e){return Em.set.call(this,t,e,void 0)};Em.set=function(t,e,n){return zx.set.call(this,t[0],e,n,t[0])};function Qb(t,e){const n=t[bi];return(n?Eu(n):t)[e]}function Poe(t,e,n){var i;const r=c$(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function c$(t,e){if(!(e in t))return;let n=fd(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=fd(n)}}function UA(t){t.modified_||(t.modified_=!0,t.parent_&&UA(t.parent_))}function Xb(t){t.copy_||(t.copy_=OA(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Moe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const o=n;n=e;const s=this;return function(c=o,...f){return s.produce(c,h=>n.call(this,h,...f))}}typeof n!="function"&&uo(6),r!==void 0&&typeof r!="function"&&uo(7);let i;if(Xs(e)){const o=u2(this),s=FA(e,void 0);let u=!0;try{i=n(s),u=!1}finally{u?VA(o):LA(o)}return l2(o,r),c2(i,o)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===s$&&(i=void 0),this.autoFreeze_&&$x(i,!0),r){const o=[],s=[];nc("Patches").generateReplacementPatches_(e,i,o,s),r(o,s)}return i}else uo(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(s,...u)=>this.produceWithPatches(s,c=>e(c,...u));let r,i;return[this.produce(e,n,(s,u)=>{r=s,i=u}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Xs(t)||uo(8),tc(t)&&(t=zs(t));const e=u2(this),n=FA(t,void 0);return n[bi].isManual_=!0,LA(e),n}finishDraft(t,e){const n=t&&t[bi];(!n||!n.isManual_)&&uo(9);const{scope_:r}=n;return l2(r,e),c2(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=nc("Patches").applyPatches_;return tc(t)?r(t,e):this.produce(t,i=>r(i,e))}};function FA(t,e){const n=eg(t)?nc("MapSet").proxyMap_(t,e):J0(t)?nc("MapSet").proxySet_(t,e):Roe(t,e);return(e?e.scope_:u$()).drafts_.push(n),n}function zs(t){return tc(t)||uo(10,t),f$(t)}function f$(t){if(!Xs(t)||Q0(t))return t;const e=t[bi];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=OA(t,e.scope_.immer_.useStrictShallowCopy_)}else n=OA(t,!0);return __(n,(r,i)=>{l$(n,r,f$(i))}),e&&(e.finalized_=!1),n}var Doe=new Moe,d$=Doe.produce;function h$(t){return({dispatch:n,getState:r})=>i=>o=>typeof o=="function"?o(n,r,t):i(o)}var Noe=h$(),koe=h$,Ooe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?v_:v_.apply(null,arguments)};function Zi(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(Ei(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>o$(r)&&r.type===t,n}var p$=class Ip extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Ip.prototype)}static get[Symbol.species](){return Ip}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Ip(...e[0].concat(this)):new Ip(...e.concat(this))}};function d2(t){return Xs(t)?d$(t,()=>{}):t}function Zy(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function Voe(t){return typeof t=="boolean"}var Loe=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=e??{};let s=new p$;return n&&(Voe(n)?s.push(Noe):s.push(koe(n.extraArgument))),s},Uoe="RTK_autoBatch",h2=t=>e=>{setTimeout(e,t)},Foe=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,o=!1,s=!1;const u=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:h2(10):t.type==="callback"?t.queueNotification:h2(t.timeout),f=()=>{s=!1,o&&(o=!1,u.forEach(h=>h()))};return Object.assign({},r,{subscribe(h){const y=()=>i&&h(),v=r.subscribe(y);return u.add(h),()=>{v(),u.delete(h)}},dispatch(h){var y;try{return i=!((y=h==null?void 0:h.meta)!=null&&y[Uoe]),o=!i,o&&(s||(s=!0,c(f))),r.dispatch(h)}finally{i=!0}}})},Boe=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new p$(t);return r&&i.push(Foe(typeof r=="object"?r:void 0)),i};function qoe(t){const e=Loe(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:o=void 0,enhancers:s=void 0}=t||{};let u;if(typeof n=="function")u=n;else if(qx(n))u=i$(n);else throw new Error(Ei(1));let c;typeof r=="function"?c=r(e):c=e();let f=v_;i&&(f=Ooe({trace:!1,...typeof i=="object"&&i}));const h=boe(...c),y=Boe(h);let v=typeof s=="function"?s(y):y();const E=f(...v);return r$(u,o,E)}function m$(t){const e={},n=[];let r;const i={addCase(o,s){const u=typeof o=="string"?o:o.type;if(!u)throw new Error(Ei(28));if(u in e)throw new Error(Ei(29));return e[u]=s,i},addAsyncThunk(o,s){return s.pending&&(e[o.pending.type]=s.pending),s.rejected&&(e[o.rejected.type]=s.rejected),s.fulfilled&&(e[o.fulfilled.type]=s.fulfilled),s.settled&&n.push({matcher:o.settled,reducer:s.settled}),i},addMatcher(o,s){return n.push({matcher:o,reducer:s}),i},addDefaultCase(o){return r=o,i}};return t(i),[e,n,r]}function $oe(t){return typeof t=="function"}function zoe(t,e){let[n,r,i]=m$(e),o;if($oe(t))o=()=>d2(t());else{const u=d2(t);o=()=>u}function s(u=o(),c){let f=[n[c.type],...r.filter(({matcher:h})=>h(c)).map(({reducer:h})=>h)];return f.filter(h=>!!h).length===0&&(f=[i]),f.reduce((h,y)=>{if(y)if(tc(h)){const E=y(h,c);return E===void 0?h:E}else{if(Xs(h))return d$(h,v=>y(v,c));{const v=y(h,c);if(v===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return h},u)}return s.getInitialState=o,s}var Hoe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Goe=(t=21)=>{let e="",n=t;for(;n--;)e+=Hoe[Math.random()*64|0];return e},Koe=Symbol.for("rtk-slice-createasyncthunk");function joe(t,e){return`${t}/${e}`}function Woe({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[Koe];return function(i){const{name:o,reducerPath:s=o}=i;if(!o)throw new Error(Ei(11));const u=(typeof i.reducers=="function"?i.reducers(Joe()):i.reducers)||{},c=Object.keys(u),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(U,q){const z=typeof U=="string"?U:U.type;if(!z)throw new Error(Ei(12));if(z in f.sliceCaseReducersByType)throw new Error(Ei(13));return f.sliceCaseReducersByType[z]=q,h},addMatcher(U,q){return f.sliceMatchers.push({matcher:U,reducer:q}),h},exposeAction(U,q){return f.actionCreators[U]=q,h},exposeCaseReducer(U,q){return f.sliceCaseReducersByName[U]=q,h}};c.forEach(U=>{const q=u[U],z={reducerName:U,type:joe(o,U),createNotation:typeof i.reducers=="function"};Xoe(q)?ese(z,q,h,e):Qoe(z,q,h)});function y(){const[U={},q=[],z=void 0]=typeof i.extraReducers=="function"?m$(i.extraReducers):[i.extraReducers],k={...U,...f.sliceCaseReducersByType};return zoe(i.initialState,V=>{for(let N in k)V.addCase(N,k[N]);for(let N of f.sliceMatchers)V.addMatcher(N.matcher,N.reducer);for(let N of q)V.addMatcher(N.matcher,N.reducer);z&&V.addDefaultCase(z)})}const v=U=>U,E=new Map,b=new WeakMap;let S;function A(U,q){return S||(S=y()),S(U,q)}function R(){return S||(S=y()),S.getInitialState()}function D(U,q=!1){function z(V){let N=V[U];return typeof N>"u"&&q&&(N=Zy(b,z,R)),N}function k(V=v){const N=Zy(E,q,()=>new WeakMap);return Zy(N,V,()=>{const $={};for(const[F,G]of Object.entries(i.selectors??{}))$[F]=Yoe(G,V,()=>Zy(b,V,R),q);return $})}return{reducerPath:U,getSelectors:k,get selectors(){return k(z)},selectSlice:z}}const M={name:o,reducer:A,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:R,...D(s),injectInto(U,{reducerPath:q,...z}={}){const k=q??s;return U.inject({reducerPath:k,reducer:A},z),{...M,...D(k,!0)}}};return M}}function Yoe(t,e,n,r){function i(o,...s){let u=e(o);return typeof u>"u"&&r&&(u=n()),t(u,...s)}return i.unwrapped=t,i}var Ai=Woe();function Joe(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function Qoe({type:t,reducerName:e,createNotation:n},r,i){let o,s;if("reducer"in r){if(n&&!Zoe(r))throw new Error(Ei(17));o=r.reducer,s=r.prepare}else o=r;i.addCase(t,o).exposeCaseReducer(e,o).exposeAction(e,s?Zi(t,s):Zi(t))}function Xoe(t){return t._reducerDefinitionType==="asyncThunk"}function Zoe(t){return t._reducerDefinitionType==="reducerWithPrepare"}function ese({type:t,reducerName:e},n,r,i){if(!i)throw new Error(Ei(18));const{payloadCreator:o,fulfilled:s,pending:u,rejected:c,settled:f,options:h}=n,y=i(t,o,h);r.exposeAction(e,y),s&&r.addCase(y.fulfilled,s),u&&r.addCase(y.pending,u),c&&r.addCase(y.rejected,c),f&&r.addMatcher(y.settled,f),r.exposeCaseReducer(e,{fulfilled:s||ev,pending:u||ev,rejected:c||ev,settled:f||ev})}function ev(){}var tse="task",g$="listener",y$="completed",Hx="cancelled",nse=`task-${Hx}`,rse=`task-${y$}`,BA=`${g$}-${Hx}`,ise=`${g$}-${y$}`,X0=class{constructor(t){Ew(this,"name","TaskAbortError");Ew(this,"message");this.code=t,this.message=`${tse} ${Hx} (reason: ${t})`}},Gx=(t,e)=>{if(typeof t!="function")throw new TypeError(Ei(32))},w_=()=>{},v$=(t,e=w_)=>(t.catch(e),t),_$=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Fu=(t,e)=>{const n=t.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},Bu=t=>{if(t.aborted){const{reason:e}=t;throw new X0(e)}};function T$(t,e){let n=w_;return new Promise((r,i)=>{const o=()=>i(new X0(t.reason));if(t.aborted){o();return}n=_$(t,o),e.finally(()=>n()).then(r,i)}).finally(()=>{n=w_})}var ose=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof X0?"cancelled":"rejected",error:n}}finally{e==null||e()}},b_=t=>e=>v$(T$(t,e).then(n=>(Bu(t),n))),E$=t=>{const e=b_(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:kf}=Object,p2={},Z0="listenerMiddleware",sse=(t,e)=>{const n=r=>_$(t,()=>Fu(r,t.reason));return(r,i)=>{Gx(r);const o=new AbortController;n(o);const s=ose(async()=>{Bu(t),Bu(o.signal);const u=await r({pause:b_(o.signal),delay:E$(o.signal),signal:o.signal});return Bu(o.signal),u},()=>Fu(o,rse));return i!=null&&i.autoJoin&&e.push(s.catch(w_)),{result:b_(t)(s),cancel(){Fu(o,nse)}}}},ase=(t,e)=>{const n=async(r,i)=>{Bu(e);let o=()=>{};const u=[new Promise((c,f)=>{let h=t({predicate:r,effect:(y,v)=>{v.unsubscribe(),c([y,v.getState(),v.getOriginalState()])}});o=()=>{h(),f()}})];i!=null&&u.push(new Promise(c=>setTimeout(c,i,null)));try{const c=await T$(e,Promise.race(u));return Bu(e),c}finally{o()}};return(r,i)=>v$(n(r,i))},w$=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:o}=t;if(e)i=Zi(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Ei(21));return Gx(o),{predicate:i,type:e,effect:o}},b$=kf(t=>{const{type:e,predicate:n,effect:r}=w$(t);return{id:Goe(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Ei(22))}}},{withTypes:()=>b$}),m2=(t,e)=>{const{type:n,effect:r,predicate:i}=w$(e);return Array.from(t.values()).find(o=>(typeof n=="string"?o.type===n:o.predicate===i)&&o.effect===r)},qA=t=>{t.pending.forEach(e=>{Fu(e,BA)})},lse=t=>()=>{t.forEach(qA),t.clear()},g2=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},S$=kf(Zi(`${Z0}/add`),{withTypes:()=>S$}),use=Zi(`${Z0}/removeAll`),A$=kf(Zi(`${Z0}/remove`),{withTypes:()=>A$}),cse=(...t)=>{console.error(`${Z0}/error`,...t)},tg=(t={})=>{const e=new Map,{extra:n,onError:r=cse}=t;Gx(r);const i=h=>(h.unsubscribe=()=>e.delete(h.id),e.set(h.id,h),y=>{h.unsubscribe(),y!=null&&y.cancelActive&&qA(h)}),o=h=>{const y=m2(e,h)??b$(h);return i(y)};kf(o,{withTypes:()=>o});const s=h=>{const y=m2(e,h);return y&&(y.unsubscribe(),h.cancelActive&&qA(y)),!!y};kf(s,{withTypes:()=>s});const u=async(h,y,v,E)=>{const b=new AbortController,S=ase(o,b.signal),A=[];try{h.pending.add(b),await Promise.resolve(h.effect(y,kf({},v,{getOriginalState:E,condition:(R,D)=>S(R,D).then(Boolean),take:S,delay:E$(b.signal),pause:b_(b.signal),extra:n,signal:b.signal,fork:sse(b.signal,A),unsubscribe:h.unsubscribe,subscribe:()=>{e.set(h.id,h)},cancelActiveListeners:()=>{h.pending.forEach((R,D,M)=>{R!==b&&(Fu(R,BA),M.delete(R))})},cancel:()=>{Fu(b,BA),h.pending.delete(b)},throwIfCancelled:()=>{Bu(b.signal)}})))}catch(R){R instanceof X0||g2(r,R,{raisedBy:"effect"})}finally{await Promise.all(A),Fu(b,ise),h.pending.delete(b)}},c=lse(e);return{middleware:h=>y=>v=>{if(!o$(v))return y(v);if(S$.match(v))return o(v.payload);if(use.match(v)){c();return}if(A$.match(v))return s(v.payload);let E=h.getState();const b=()=>{if(E===p2)throw new Error(Ei(23));return E};let S;try{if(S=y(v),e.size>0){const A=h.getState(),R=Array.from(e.values());for(const D of R){let M=!1;try{M=D.predicate(v,A,E)}catch(U){M=!1,g2(r,U,{raisedBy:"predicate"})}M&&u(D,v,h,b)}}}finally{E=p2}return S},startListening:o,stopListening:s,clearListeners:c}};function Ei(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var fse={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},C$=Ai({name:"chartLayout",initialState:fse,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,o;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(o=e.payload.left)!==null&&o!==void 0?o:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:dse,setLayout:hse,setChartSize:pse,setScale:mse}=C$.actions,gse=C$.reducer;function y2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function v2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y2(Object(n),!0).forEach(function(r){yse(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yse(t,e,n){return(e=vse(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vse(t){var e=_se(t,"string");return typeof e=="symbol"?e:e+""}function _se(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var S_=Math.PI/180,Tse=t=>t*180/Math.PI,mr=(t,e,n,r)=>({x:t+Math.cos(-S_*r)*n,y:e+Math.sin(-S_*r)*n}),Ese=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},wse=(t,e)=>{var{x:n,y:r}=t,{x:i,y:o}=e;return Math.sqrt((n-i)**2+(r-o)**2)},bse=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:o}=e,s=wse({x:n,y:r},{x:i,y:o});if(s<=0)return{radius:s,angle:0};var u=(n-i)/s,c=Math.acos(u);return r>o&&(c=2*Math.PI-c),{radius:s,angle:Tse(c),angleInRadian:c}},Sse=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),o=Math.min(r,i);return{startAngle:e-o*360,endAngle:n-o*360}},Ase=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),o=Math.floor(r/360),s=Math.min(i,o);return t+s*360},Cse=(t,e)=>{var{x:n,y:r}=t,{radius:i,angle:o}=bse({x:n,y:r},e),{innerRadius:s,outerRadius:u}=e;if(i<s||i>u||i===0)return null;var{startAngle:c,endAngle:f}=Sse(e),h=o,y;if(c<=f){for(;h>f;)h-=360;for(;h<c;)h+=360;y=h>=c&&h<=f}else{for(;h>c;)h-=360;for(;h<f;)h+=360;y=h>=f&&h<=c}return y?v2(v2({},e),{},{radius:i,angle:Ase(h,e)}):null};function I$(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function _2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Hi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_2(Object(n),!0).forEach(function(r){Ise(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ise(t,e,n){return(e=xse(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xse(t){var e=Rse(t,"string");return typeof e=="symbol"?e:e+""}function Rse(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qr(t,e,n){return er(t)||er(e)?n:is(e)?ud(t,e,n):typeof e=="function"?e(t):n}var Pse=(t,e,n,r,i)=>{var o,s=-1,u=(o=e==null?void 0:e.length)!==null&&o!==void 0?o:0;if(u<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var c=0;c<u;c++){var f=c>0?n[c-1].coordinate:n[u-1].coordinate,h=n[c].coordinate,y=c>=u-1?n[0].coordinate:n[c+1].coordinate,v=void 0;if(vi(h-f)!==vi(y-h)){var E=[];if(vi(y-h)===vi(i[1]-i[0])){v=y;var b=h+i[1]-i[0];E[0]=Math.min(b,(b+f)/2),E[1]=Math.max(b,(b+f)/2)}else{v=f;var S=y+i[1]-i[0];E[0]=Math.min(h,(S+h)/2),E[1]=Math.max(h,(S+h)/2)}var A=[Math.min(h,(v+h)/2),Math.max(h,(v+h)/2)];if(t>A[0]&&t<=A[1]||t>=E[0]&&t<=E[1]){({index:s}=n[c]);break}}else{var R=Math.min(f,y),D=Math.max(f,y);if(t>(R+h)/2&&t<=(D+h)/2){({index:s}=n[c]);break}}}else if(e){for(var M=0;M<u;M++)if(M===0&&t<=(e[M].coordinate+e[M+1].coordinate)/2||M>0&&M<u-1&&t>(e[M].coordinate+e[M-1].coordinate)/2&&t<=(e[M].coordinate+e[M+1].coordinate)/2||M===u-1&&t>(e[M].coordinate+e[M-1].coordinate)/2){({index:s}=e[M]);break}}return s},Mse=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:o,verticalAlign:s,layout:u}=e;if((u==="vertical"||u==="horizontal"&&s==="middle")&&o!=="center"&&Ye(t[o]))return Hi(Hi({},t),{},{[o]:t[o]+(r||0)});if((u==="horizontal"||u==="vertical"&&o==="center")&&s!=="middle"&&Ye(t[s]))return Hi(Hi({},t),{},{[s]:t[s]+(i||0)})}return t},dc=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",T2=1e-4,Dse=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),i=Math.min(r[0],r[1])-T2,o=Math.max(r[0],r[1])+T2,s=t(e[0]),u=t(e[n-1]);(s<i||s>o||u<i||u>o)&&t.domain([e[0],e[n-1]])}},Nse=(t,e)=>{if(!e||e.length!==2||!Ye(e[0])||!Ye(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!Ye(t[0])||t[0]<n)&&(i[0]=n),(!Ye(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},kse=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,o=0,s=0;s<e;++s){var u=Xi(t[s][n][1])?t[s][n][0]:t[s][n][1];u>=0?(t[s][n][0]=i,t[s][n][1]=i+u,i=t[s][n][1]):(t[s][n][0]=o,t[s][n][1]=o+u,o=t[s][n][1])}},Ose=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,o=0;o<e;++o){var s=Xi(t[o][n][1])?t[o][n][0]:t[o][n][1];s>=0?(t[o][n][0]=i,t[o][n][1]=i+s,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},Vse={sign:kse,expand:hie,none:cd,silhouette:pie,wiggle:mie,positive:Ose},Lse=(t,e,n)=>{var r=Vse[n],i=die().keys(e).value((o,s)=>+qr(o,s,0)).order(DA).offset(r);return i(t)};function Use(t){return t==null?void 0:String(t)}var E2=t=>{var{axis:e,ticks:n,offset:r,bandSize:i,entry:o,index:s}=t;if(e.type==="category")return n[s]?n[s].coordinate+r:null;var u=qr(o,e.dataKey,e.scale.domain()[s]);return er(u)?null:e.scale(u)-i/2+r},Fse=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},Bse=t=>{var e=t.flat(2).filter(Ye);return[Math.min(...e),Math.max(...e)]},qse=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],$se=(t,e,n)=>{if(t!=null)return qse(Object.keys(t).reduce((r,i)=>{var o=t[i],{stackedData:s}=o,u=s.reduce((c,f)=>{var h=I$(f,e,n),y=Bse(h);return[Math.min(c[0],y[0]),Math.max(c[1],y[1])]},[1/0,-1/0]);return[Math.min(u[0],r[0]),Math.max(u[1],r[1])]},[1/0,-1/0]))},w2=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,b2=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Kx=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=W0(e,h=>h.coordinate),o=1/0,s=1,u=i.length;s<u;s++){var c=i[s],f=i[s-1];o=Math.min((c.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0};function S2(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:o}=t;return Hi(Hi({},e),{},{dataKey:n,payload:r,value:i,name:o})}function x$(t,e){if(t)return String(t);if(typeof e=="string")return e}function zse(t,e,n,r,i){if(n==="horizontal"||n==="vertical"){var o=t>=i.left&&t<=i.left+i.width&&e>=i.top&&e<=i.top+i.height;return o?{x:t,y:e}:null}return r?Cse({x:t,y:e},r):null}var Hse=(t,e,n,r)=>{var i=e.find(f=>f&&f.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.y};if(t==="vertical")return{x:r.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,{radius:s}=r;return Hi(Hi(Hi({},r),mr(r.cx,r.cy,s,o)),{},{angle:o,radius:s})}var u=i.coordinate,{angle:c}=r;return Hi(Hi(Hi({},r),mr(r.cx,r.cy,u,c)),{},{angle:c,radius:u})}return{x:0,y:0}},Gse=(t,e)=>e==="horizontal"?t.x:e==="vertical"?t.y:e==="centric"?t.angle:t.radius,ca=t=>t.layout.width,fa=t=>t.layout.height,Kse=t=>t.layout.scale,R$=t=>t.layout.margin,eT=se(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),tT=se(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),jse="data-recharts-item-index",Wse="data-recharts-item-data-key",ng=60;function A2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?A2(Object(n),!0).forEach(function(r){Yse(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Yse(t,e,n){return(e=Jse(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jse(t){var e=Qse(t,"string");return typeof e=="symbol"?e:e+""}function Qse(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Xse=t=>t.brush.height;function Zse(t){var e=tT(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:ng;return n+i}return n},0)}function eae(t){var e=tT(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:ng;return n+i}return n},0)}function tae(t){var e=eT(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function nae(t){var e=eT(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var nr=se([ca,fa,R$,Xse,Zse,eae,tae,nae,n$,yoe],(t,e,n,r,i,o,s,u,c,f)=>{var h={left:(n.left||0)+i,right:(n.right||0)+o},y={top:(n.top||0)+s,bottom:(n.bottom||0)+u},v=tv(tv({},y),h),E=v.bottom;v.bottom+=r,v=Mse(v,c,f);var b=t-v.left-v.right,S=e-v.top-v.bottom;return tv(tv({brushBottom:E},v),{},{width:Math.max(b,0),height:Math.max(S,0)})}),rae=se(nr,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),jx=se(ca,fa,(t,e)=>({x:0,y:0,width:t,height:e})),iae=x.createContext(null),Eo=()=>x.useContext(iae)!=null,nT=t=>t.brush,rT=se([nT,nr,R$],(t,e,n)=>({height:t.height,x:Ye(t.x)?t.x:e.left,y:Ye(t.y)?t.y:e.top+e.height+e.brushBottom-((n==null?void 0:n.bottom)||0),width:Ye(t.width)?t.width:e.width})),Wx=()=>{var t,e=Eo(),n=$e(rae),r=$e(rT),i=(t=$e(nT))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},oae={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},sae=()=>{var t;return(t=$e(nr))!==null&&t!==void 0?t:oae},aae=()=>$e(ca),lae=()=>$e(fa),xt=t=>t.layout.layoutType,Yx=()=>$e(xt),uae={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},P$=Ai({name:"legend",initialState:uae,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload(t,e){t.payload.push(e.payload)},removeLegendPayload(t,e){var n=zs(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)}}}),{setLegendSize:dxe,setLegendSettings:hxe,addLegendPayload:cae,removeLegendPayload:fae}=P$.actions,dae=P$.reducer;function $A(){return $A=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$A.apply(null,arguments)}function C2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?C2(Object(n),!0).forEach(function(r){hae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hae(t,e,n){return(e=pae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pae(t){var e=mae(t,"string");return typeof e=="symbol"?e:e+""}function mae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gae(t){return Array.isArray(t)&&is(t[0])&&is(t[1])?t.join(" ~ "):t}var yae=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:o,formatter:s,itemSorter:u,wrapperClassName:c,labelClassName:f,label:h,labelFormatter:y,accessibilityLayer:v=!1}=t,E=()=>{if(o&&o.length){var q={padding:0,margin:0},z=(u?W0(o,u):o).map((k,V)=>{if(k.type==="none")return null;var N=k.formatter||s||gae,{value:$,name:F}=k,G=$,H=F;if(N){var Ae=N($,F,k,V,o);if(Array.isArray(Ae))[G,H]=Ae;else if(Ae!=null)G=Ae;else return null}var Se=Zb({display:"block",paddingTop:4,paddingBottom:4,color:k.color||"#000"},r);return x.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(V),style:Se},is(H)?x.createElement("span",{className:"recharts-tooltip-item-name"},H):null,is(H)?x.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,x.createElement("span",{className:"recharts-tooltip-item-value"},G),x.createElement("span",{className:"recharts-tooltip-item-unit"},k.unit||""))});return x.createElement("ul",{className:"recharts-tooltip-item-list",style:q},z)}return null},b=Zb({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),S=Zb({margin:0},i),A=!er(h),R=A?h:"",D=Kt("recharts-default-tooltip",c),M=Kt("recharts-tooltip-label",f);A&&y&&o!==void 0&&o!==null&&(R=y(h,o));var U=v?{role:"status","aria-live":"assertive"}:{};return x.createElement("div",$A({className:D,style:b},U),x.createElement("p",{className:M,style:S},x.isValidElement(R)?R:"".concat(R)),E())},cp="recharts-tooltip-wrapper",vae={visibility:"hidden"};function _ae(t){var{coordinate:e,translateX:n,translateY:r}=t;return Kt(cp,{["".concat(cp,"-right")]:Ye(n)&&e&&Ye(e.x)&&n>=e.x,["".concat(cp,"-left")]:Ye(n)&&e&&Ye(e.x)&&n<e.x,["".concat(cp,"-bottom")]:Ye(r)&&e&&Ye(e.y)&&r>=e.y,["".concat(cp,"-top")]:Ye(r)&&e&&Ye(e.y)&&r<e.y})}function I2(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:i,position:o,reverseDirection:s,tooltipDimension:u,viewBox:c,viewBoxDimension:f}=t;if(o&&Ye(o[r]))return o[r];var h=n[r]-u-(i>0?i:0),y=n[r]+i;if(e[r])return s[r]?h:y;var v=c[r];if(v==null)return 0;if(s[r]){var E=h,b=v;return E<b?Math.max(y,v):Math.max(h,v)}if(f==null)return 0;var S=y+u,A=v+f;return S>A?Math.max(h,v):Math.max(y,v)}function Tae(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function Eae(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:o,tooltipBox:s,useTranslate3d:u,viewBox:c}=t,f,h,y;return s.height>0&&s.width>0&&n?(h=I2({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:s.width,viewBox:c,viewBoxDimension:c.width}),y=I2({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:s.height,viewBox:c,viewBoxDimension:c.height}),f=Tae({translateX:h,translateY:y,useTranslate3d:u})):f=vae,{cssProperties:f,cssClasses:_ae({translateX:h,translateY:y,coordinate:n})}}function x2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?x2(Object(n),!0).forEach(function(r){zA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zA(t,e,n){return(e=wae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wae(t){var e=bae(t,"string");return typeof e=="symbol"?e:e+""}function bae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class Sae extends x.PureComponent{constructor(){super(...arguments),zA(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),zA(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,o;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:o,coordinate:s,hasPayload:u,isAnimationActive:c,offset:f,position:h,reverseDirection:y,useTranslate3d:v,viewBox:E,wrapperStyle:b,lastBoundingBox:S,innerRef:A,hasPortalFromProps:R}=this.props,{cssClasses:D,cssProperties:M}=Eae({allowEscapeViewBox:n,coordinate:s,offsetTopLeft:f,position:h,reverseDirection:y,tooltipBox:{height:S.height,width:S.width},useTranslate3d:v,viewBox:E}),U=R?{}:nv(nv({transition:c&&e?"transform ".concat(r,"ms ").concat(i):void 0},M),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&u?"visible":"hidden",position:"absolute",top:0,left:0}),q=nv(nv({},U),{},{visibility:!this.state.dismissed&&e&&u?"visible":"hidden"},b);return x.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:D,style:q,ref:A},o)}}var Aae=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),rg={isSsr:Aae()},M$=()=>$e(t=>t.rootProps.accessibilityLayer);function Si(t){return Number.isFinite(t)}function A_(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function HA(){return HA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},HA.apply(null,arguments)}function R2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function P2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R2(Object(n),!0).forEach(function(r){Cae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Cae(t,e,n){return(e=Iae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Iae(t){var e=xae(t,"string");return typeof e=="symbol"?e:e+""}function xae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var M2={curveBasisClosed:tie,curveBasisOpen:nie,curveBasis:eie,curveBumpX:Bre,curveBumpY:qre,curveLinearClosed:rie,curveLinear:K0,curveMonotoneX:iie,curveMonotoneY:oie,curveNatural:sie,curveStep:aie,curveStepAfter:uie,curveStepBefore:lie},rv=t=>Si(t.x)&&Si(t.y),fp=t=>t.x,dp=t=>t.y,Rae=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(Zm(t));return(n==="curveMonotone"||n==="curveBump")&&e?M2["".concat(n).concat(e==="vertical"?"Y":"X")]:M2[n]||K0},Pae=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:i,connectNulls:o=!1}=t,s=Rae(e,i),u=o?n.filter(rv):n,c;if(Array.isArray(r)){var f=o?r.filter(y=>rv(y)):r,h=u.map((y,v)=>P2(P2({},y),{},{base:f[v]}));return i==="vertical"?c=Yy().y(dp).x1(fp).x0(y=>y.base.x):c=Yy().x(fp).y1(dp).y0(y=>y.base.y),c.defined(rv).curve(s),c(h)}return i==="vertical"&&Ye(r)?c=Yy().y(dp).x1(fp).x0(r):Ye(r)?c=Yy().x(fp).y1(dp).y0(r):c=D3().x(fp).y(dp),c.defined(rv).curve(s),c(u)},Mae=t=>{var{className:e,points:n,path:r,pathRef:i}=t;if((!n||!n.length)&&!r)return null;var o=n&&n.length?Pae(t):r;return x.createElement("path",HA({},H0(t),Are(t),{className:Kt("recharts-curve",e),d:o===null?void 0:o,ref:i}))},Dae=["x","y","top","left","width","height","className"];function GA(){return GA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},GA.apply(null,arguments)}function D2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Nae(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D2(Object(n),!0).forEach(function(r){kae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kae(t,e,n){return(e=Oae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Oae(t){var e=Vae(t,"string");return typeof e=="symbol"?e:e+""}function Vae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Lae(t,e){if(t==null)return{};var n,r,i=Uae(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Uae(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Fae=(t,e,n,r,i,o)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(o,",").concat(e,"h").concat(n),Bae=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:o=0,height:s=0,className:u}=t,c=Lae(t,Dae),f=Nae({x:e,y:n,top:r,left:i,width:o,height:s},c);return!Ye(e)||!Ye(n)||!Ye(o)||!Ye(s)||!Ye(r)||!Ye(i)?null:x.createElement("path",GA({},Qn(f,!0),{className:Kt("recharts-cross",u),d:Fae(e,n,o,s,r,i)}))};function qae(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function N2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $ae(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?N2(Object(n),!0).forEach(function(r){zae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zae(t,e,n){return(e=Hae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hae(t){var e=Gae(t,"string");return typeof e=="symbol"?e:e+""}function Gae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Dl(t,e){var n=$ae({},t),r=e,i=Object.keys(e),o=i.reduce((s,u)=>(s[u]===void 0&&r[u]!==void 0&&(s[u]=r[u]),s),n);return o}function Kae(){}function k2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function O2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?k2(Object(n),!0).forEach(function(r){jae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jae(t,e,n){return(e=Wae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wae(t){var e=Yae(t,"string");return typeof e=="symbol"?e:e+""}function Yae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Jae=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),D$=(t,e,n)=>t.map(r=>"".concat(Jae(r)," ").concat(e,"ms ").concat(n)).join(","),Qae=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),wm=(t,e)=>Object.keys(e).reduce((n,r)=>O2(O2({},n),{},{[r]:t(r,e[r])}),{});function V2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V2(Object(n),!0).forEach(function(r){Xae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xae(t,e,n){return(e=Zae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zae(t){var e=ele(t,"string");return typeof e=="symbol"?e:e+""}function ele(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var C_=(t,e,n)=>t+(e-t)*n,KA=t=>{var{from:e,to:n}=t;return e!==n},N$=(t,e,n)=>{var r=wm((i,o)=>{if(KA(o)){var[s,u]=t(o.from,o.to,o.velocity);return hr(hr({},o),{},{from:s,velocity:u})}return o},e);return n<1?wm((i,o)=>KA(o)?hr(hr({},o),{},{velocity:C_(o.velocity,r[i].velocity,n),from:C_(o.from,r[i].from,n)}):o,e):N$(t,r,n-1)};function tle(t,e,n,r,i,o){var s,u=r.reduce((v,E)=>hr(hr({},v),{},{[E]:{from:t[E],velocity:0,to:e[E]}}),{}),c=()=>wm((v,E)=>E.from,u),f=()=>!Object.values(u).filter(KA).length,h=null,y=v=>{s||(s=v);var E=v-s,b=E/n.dt;u=N$(n,u,b),i(hr(hr(hr({},t),e),c())),s=v,f()||(h=o.setTimeout(y))};return()=>(h=o.setTimeout(y),()=>{h()})}function nle(t,e,n,r,i,o,s){var u=null,c=i.reduce((y,v)=>hr(hr({},y),{},{[v]:[t[v],e[v]]}),{}),f,h=y=>{f||(f=y);var v=(y-f)/r,E=wm((S,A)=>C_(...A,n(v)),c);if(o(hr(hr(hr({},t),e),E)),v<1)u=s.setTimeout(h);else{var b=wm((S,A)=>C_(...A,n(1)),c);o(hr(hr(hr({},t),e),b))}};return()=>(u=s.setTimeout(h),()=>{u()})}const rle=(t,e,n,r,i,o)=>{var s=Qae(t,e);return n.isStepper===!0?tle(t,e,n,s,i,o):nle(t,e,n,r,s,i,o)};var I_=1e-4,k$=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],O$=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),L2=(t,e)=>n=>{var r=k$(t,e);return O$(r,n)},ile=(t,e)=>n=>{var r=k$(t,e),i=[...r.map((o,s)=>o*s).slice(1),0];return O$(i,n)},U2=function(){for(var e,n,r,i,o=arguments.length,s=new Array(o),u=0;u<o;u++)s[u]=arguments[u];if(s.length===1)switch(s[0]){case"linear":[e,r,n,i]=[0,0,1,1];break;case"ease":[e,r,n,i]=[.25,.1,.25,1];break;case"ease-in":[e,r,n,i]=[.42,0,1,1];break;case"ease-out":[e,r,n,i]=[.42,0,.58,1];break;case"ease-in-out":[e,r,n,i]=[0,0,.58,1];break;default:{var c=s[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([e,r,n,i]=c[1].split(")")[0].split(",").map(b=>parseFloat(b)))}}else s.length===4&&([e,r,n,i]=s);var f=L2(e,n),h=L2(r,i),y=ile(e,n),v=b=>b>1?1:b<0?0:b,E=b=>{for(var S=b>1?1:b,A=S,R=0;R<8;++R){var D=f(A)-S,M=y(A);if(Math.abs(D-S)<I_||M<I_)return h(A);A=v(A-D/M)}return h(A)};return E.isStepper=!1,E},ole=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,o=(s,u,c)=>{var f=-(s-u)*n,h=c*r,y=c+(f-h)*i/1e3,v=c*i/1e3+s;return Math.abs(v-u)<I_&&Math.abs(y)<I_?[u,0]:[v,y]};return o.isStepper=!0,o.dt=i,o},sle=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return U2(t);case"spring":return ole();default:if(t.split("(")[0]==="cubic-bezier")return U2(t)}return typeof t=="function"?t:null};function ale(t){var e,n=()=>null,r=!1,i=null,o=s=>{if(!r){if(Array.isArray(s)){if(!s.length)return;var u=s,[c,...f]=u;if(typeof c=="number"){i=t.setTimeout(o.bind(null,f),c);return}o(c),i=t.setTimeout(o.bind(null,f));return}typeof s=="string"&&(e=s,n(e)),typeof s=="object"&&(e=s,n(e)),typeof s=="function"&&s()}};return{stop:()=>{r=!0},start:s=>{r=!1,i&&(i(),i=null),o(s)},subscribe:s=>(n=s,()=>{n=()=>null}),getTimeoutController:()=>t}}class lle{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,o=s=>{s-r>=n?e(s):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(o))};return i=requestAnimationFrame(o),()=>{cancelAnimationFrame(i)}}}function ule(){return ale(new lle)}var cle=x.createContext(ule);function fle(t,e){var n=x.useContext(cle);return x.useMemo(()=>e??n(t),[t,e,n])}var dle={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},F2={t:0},eS={t:1};function Jx(t){var e=Dl(t,dle),{isActive:n,canBegin:r,duration:i,easing:o,begin:s,onAnimationEnd:u,onAnimationStart:c,children:f}=e,h=fle(e.animationId,e.animationManager),[y,v]=x.useState(n?F2:eS),E=x.useRef(null);return x.useEffect(()=>{n||v(eS)},[n]),x.useEffect(()=>{if(!n||!r)return Kae;var b=rle(F2,eS,sle(o),i,v,h.getTimeoutController()),S=()=>{E.current=b()};return h.start([c,s,S,i,u]),()=>{h.stop(),E.current&&E.current(),u()}},[n,r,i,o,s,c,u,h]),f(y.t)}function Qx(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=x.useRef(_m(e)),r=x.useRef(t);return r.current!==t&&(n.current=_m(e),r.current=t),n.current}function B2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function q2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B2(Object(n),!0).forEach(function(r){hle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hle(t,e,n){return(e=ple(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ple(t){var e=mle(t,"string");return typeof e=="symbol"?e:e+""}function mle(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function x_(){return x_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},x_.apply(null,arguments)}var $2=(t,e,n,r,i)=>{var o=Math.min(Math.abs(n)/2,Math.abs(r)/2),s=r>=0?1:-1,u=n>=0?1:-1,c=r>=0&&n>=0||r<0&&n<0?1:0,f;if(o>0&&i instanceof Array){for(var h=[0,0,0,0],y=0,v=4;y<v;y++)h[y]=i[y]>o?o:i[y];f="M".concat(t,",").concat(e+s*h[0]),h[0]>0&&(f+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(c,",").concat(t+u*h[0],",").concat(e)),f+="L ".concat(t+n-u*h[1],",").concat(e),h[1]>0&&(f+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(c,`,
        `).concat(t+n,",").concat(e+s*h[1])),f+="L ".concat(t+n,",").concat(e+r-s*h[2]),h[2]>0&&(f+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(c,`,
        `).concat(t+n-u*h[2],",").concat(e+r)),f+="L ".concat(t+u*h[3],",").concat(e+r),h[3]>0&&(f+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(c,`,
        `).concat(t,",").concat(e+r-s*h[3])),f+="Z"}else if(o>0&&i===+i&&i>0){var E=Math.min(o,i);f="M ".concat(t,",").concat(e+s*E,`
            A `).concat(E,",").concat(E,",0,0,").concat(c,",").concat(t+u*E,",").concat(e,`
            L `).concat(t+n-u*E,",").concat(e,`
            A `).concat(E,",").concat(E,",0,0,").concat(c,",").concat(t+n,",").concat(e+s*E,`
            L `).concat(t+n,",").concat(e+r-s*E,`
            A `).concat(E,",").concat(E,",0,0,").concat(c,",").concat(t+n-u*E,",").concat(e+r,`
            L `).concat(t+u*E,",").concat(e+r,`
            A `).concat(E,",").concat(E,",0,0,").concat(c,",").concat(t,",").concat(e+r-s*E," Z")}else f="M ".concat(t,",").concat(e," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return f},gle={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},V$=t=>{var e=Dl(t,gle),n=x.useRef(null),[r,i]=x.useState(-1);x.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var Ae=n.current.getTotalLength();Ae&&i(Ae)}catch{}},[]);var{x:o,y:s,width:u,height:c,radius:f,className:h}=e,{animationEasing:y,animationDuration:v,animationBegin:E,isAnimationActive:b,isUpdateAnimationActive:S}=e,A=x.useRef(u),R=x.useRef(c),D=x.useRef(o),M=x.useRef(s),U=x.useMemo(()=>({x:o,y:s,width:u,height:c,radius:f}),[o,s,u,c,f]),q=Qx(U,"rectangle-");if(o!==+o||s!==+s||u!==+u||c!==+c||u===0||c===0)return null;var z=Kt("recharts-rectangle",h);if(!S)return x.createElement("path",x_({},Qn(e,!0),{className:z,d:$2(o,s,u,c,f)}));var k=A.current,V=R.current,N=D.current,$=M.current,F="0px ".concat(r===-1?1:r,"px"),G="".concat(r,"px 0px"),H=D$(["strokeDasharray"],v,typeof y=="string"?y:void 0);return x.createElement(Jx,{animationId:q,key:q,canBegin:r>0,duration:v,easing:y,isActive:S,begin:E},Ae=>{var Se=Lr(k,u,Ae),ee=Lr(V,c,Ae),he=Lr(N,o,Ae),Te=Lr($,s,Ae);n.current&&(A.current=Se,R.current=ee,D.current=he,M.current=Te);var Ve;return b?Ae>0?Ve={transition:H,strokeDasharray:G}:Ve={strokeDasharray:F}:Ve={strokeDasharray:G},x.createElement("path",x_({},Qn(e,!0),{className:z,d:$2(he,Te,Se,ee,f),ref:n,style:q2(q2({},Ve),e.style)}))})};function L$(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:o}=t,s=mr(e,n,r,i),u=mr(e,n,r,o);return{points:[s,u],cx:e,cy:n,radius:r,startAngle:i,endAngle:o}}function jA(){return jA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jA.apply(null,arguments)}var yle=(t,e)=>{var n=vi(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},iv=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:o,isExternal:s,cornerRadius:u,cornerIsExternal:c}=t,f=u*(s?1:-1)+r,h=Math.asin(u/f)/S_,y=c?i:i+o*h,v=mr(e,n,f,y),E=mr(e,n,r,y),b=c?i-o*h:i,S=mr(e,n,f*Math.cos(h*S_),b);return{center:v,circleTangency:E,lineTangency:S,theta:h}},U$=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:o,endAngle:s}=t,u=yle(o,s),c=o+u,f=mr(e,n,i,o),h=mr(e,n,i,c),y="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(o>c),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(r>0){var v=mr(e,n,r,o),E=mr(e,n,r,c);y+="L ".concat(E.x,",").concat(E.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(o<=c),`,
            `).concat(v.x,",").concat(v.y," Z")}else y+="L ".concat(e,",").concat(n," Z");return y},vle=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:o,forceCornerRadius:s,cornerIsExternal:u,startAngle:c,endAngle:f}=t,h=vi(f-c),{circleTangency:y,lineTangency:v,theta:E}=iv({cx:e,cy:n,radius:i,angle:c,sign:h,cornerRadius:o,cornerIsExternal:u}),{circleTangency:b,lineTangency:S,theta:A}=iv({cx:e,cy:n,radius:i,angle:f,sign:-h,cornerRadius:o,cornerIsExternal:u}),R=u?Math.abs(c-f):Math.abs(c-f)-E-A;if(R<0)return s?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):U$({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:c,endAngle:f});var D="M ".concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(R>180),",").concat(+(h<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(S.x,",").concat(S.y,`
  `);if(r>0){var{circleTangency:M,lineTangency:U,theta:q}=iv({cx:e,cy:n,radius:r,angle:c,sign:h,isExternal:!0,cornerRadius:o,cornerIsExternal:u}),{circleTangency:z,lineTangency:k,theta:V}=iv({cx:e,cy:n,radius:r,angle:f,sign:-h,isExternal:!0,cornerRadius:o,cornerIsExternal:u}),N=u?Math.abs(c-f):Math.abs(c-f)-q-V;if(N<0&&o===0)return"".concat(D,"L").concat(e,",").concat(n,"Z");D+="L".concat(k.x,",").concat(k.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(z.x,",").concat(z.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(N>180),",").concat(+(h>0),",").concat(M.x,",").concat(M.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(U.x,",").concat(U.y,"Z")}else D+="L".concat(e,",").concat(n,"Z");return D},_le={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},F$=t=>{var e=Dl(t,_le),{cx:n,cy:r,innerRadius:i,outerRadius:o,cornerRadius:s,forceCornerRadius:u,cornerIsExternal:c,startAngle:f,endAngle:h,className:y}=e;if(o<i||f===h)return null;var v=Kt("recharts-sector",y),E=o-i,b=yo(s,E,0,!0),S;return b>0&&Math.abs(f-h)<360?S=vle({cx:n,cy:r,innerRadius:i,outerRadius:o,cornerRadius:Math.min(b,E/2),forceCornerRadius:u,cornerIsExternal:c,startAngle:f,endAngle:h}):S=U$({cx:n,cy:r,innerRadius:i,outerRadius:o,startAngle:f,endAngle:h}),x.createElement("path",jA({},Qn(e,!0),{className:v,d:S}))};function Tle(t,e,n){var r,i,o,s;if(t==="horizontal")r=e.x,o=r,i=n.top,s=n.top+n.height;else if(t==="vertical")i=e.y,s=i,r=n.left,o=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var{cx:u,cy:c,innerRadius:f,outerRadius:h,angle:y}=e,v=mr(u,c,f,y),E=mr(u,c,h,y);r=v.x,i=v.y,o=E.x,s=E.y}else return L$(e);return[{x:r,y:i},{x:o,y:s}]}var tS={},nS={},rS={},z2;function Ele(){return z2||(z2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=e$();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(rS)),rS}var H2;function wle(){return H2||(H2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Ele();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(nS)),nS}var G2;function ble(){return G2||(G2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=t$(),n=wle();function r(i,o,s){s&&typeof s!="number"&&e.isIterateeCall(i,o,s)&&(o=s=void 0),i=n.toFinite(i),o===void 0?(o=i,i=0):o=n.toFinite(o),s=s===void 0?i<o?1:-1:n.toFinite(s);const u=Math.max(Math.ceil((o-i)/(s||1)),0),c=new Array(u);for(let f=0;f<u;f++)c[f]=i,i+=s;return c}t.range=r})(tS)),tS}var iS,K2;function Sle(){return K2||(K2=1,iS=ble().range),iS}var Ale=Sle();const B$=ss(Ale);function ul(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Cle(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Xx(t){let e,n,r;t.length!==2?(e=ul,n=(u,c)=>ul(t(u),c),r=(u,c)=>t(u)-c):(e=t===ul||t===Cle?t:Ile,n=t,r=t);function i(u,c,f=0,h=u.length){if(f<h){if(e(c,c)!==0)return h;do{const y=f+h>>>1;n(u[y],c)<0?f=y+1:h=y}while(f<h)}return f}function o(u,c,f=0,h=u.length){if(f<h){if(e(c,c)!==0)return h;do{const y=f+h>>>1;n(u[y],c)<=0?f=y+1:h=y}while(f<h)}return f}function s(u,c,f=0,h=u.length){const y=i(u,c,f,h-1);return y>f&&r(u[y-1],c)>-r(u[y],c)?y-1:y}return{left:i,center:s,right:o}}function Ile(){return 0}function q$(t){return t===null?NaN:+t}function*xle(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const Rle=Xx(ul),ig=Rle.right;Xx(q$).center;class j2 extends Map{constructor(e,n=Dle){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(W2(this,e))}has(e){return super.has(W2(this,e))}set(e,n){return super.set(Ple(this,e),n)}delete(e){return super.delete(Mle(this,e))}}function W2({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Ple({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Mle({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Dle(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Nle(t=ul){if(t===ul)return $$;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function $$(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const kle=Math.sqrt(50),Ole=Math.sqrt(10),Vle=Math.sqrt(2);function R_(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=kle?10:o>=Ole?5:o>=Vle?2:1;let u,c,f;return i<0?(f=Math.pow(10,-i)/s,u=Math.round(t*f),c=Math.round(e*f),u/f<t&&++u,c/f>e&&--c,f=-f):(f=Math.pow(10,i)*s,u=Math.round(t/f),c=Math.round(e/f),u*f<t&&++u,c*f>e&&--c),c<u&&.5<=n&&n<2?R_(t,e,n*2):[u,c,f]}function WA(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,s]=r?R_(e,t,n):R_(t,e,n);if(!(o>=i))return[];const u=o-i+1,c=new Array(u);if(r)if(s<0)for(let f=0;f<u;++f)c[f]=(o-f)/-s;else for(let f=0;f<u;++f)c[f]=(o-f)*s;else if(s<0)for(let f=0;f<u;++f)c[f]=(i+f)/-s;else for(let f=0;f<u;++f)c[f]=(i+f)*s;return c}function YA(t,e,n){return e=+e,t=+t,n=+n,R_(t,e,n)[2]}function JA(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?YA(e,t,n):YA(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function Y2(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function J2(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function z$(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?$$:Nle(i);r>n;){if(r-n>600){const c=r-n+1,f=e-n+1,h=Math.log(c),y=.5*Math.exp(2*h/3),v=.5*Math.sqrt(h*y*(c-y)/c)*(f-c/2<0?-1:1),E=Math.max(n,Math.floor(e-f*y/c+v)),b=Math.min(r,Math.floor(e+(c-f)*y/c+v));z$(t,e,E,b,i)}const o=t[e];let s=n,u=r;for(hp(t,n,e),i(t[r],o)>0&&hp(t,n,r);s<u;){for(hp(t,s,u),++s,--u;i(t[s],o)<0;)++s;for(;i(t[u],o)>0;)--u}i(t[n],o)===0?hp(t,n,u):(++u,hp(t,u,r)),u<=e&&(n=u+1),e<=u&&(r=u-1)}return t}function hp(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Lle(t,e,n){if(t=Float64Array.from(xle(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return J2(t);if(e>=1)return Y2(t);var r,i=(r-1)*e,o=Math.floor(i),s=Y2(z$(t,o).subarray(0,o+1)),u=J2(t.subarray(o+1));return s+(u-s)*(i-o)}}function Ule(t,e,n=q$){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),s=+n(t[o],o,t),u=+n(t[o+1],o+1,t);return s+(u-s)*(i-o)}}function Fle(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function to(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function da(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const QA=Symbol("implicit");function Zx(){var t=new j2,e=[],n=[],r=QA;function i(o){let s=t.get(o);if(s===void 0){if(r!==QA)return r;t.set(o,s=e.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new j2;for(const s of o)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return Zx(e,n).unknown(r)},to.apply(i,arguments),i}function eR(){var t=Zx().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,o,s,u=!1,c=0,f=0,h=.5;delete t.unknown;function y(){var v=e().length,E=i<r,b=E?i:r,S=E?r:i;o=(S-b)/Math.max(1,v-c+f*2),u&&(o=Math.floor(o)),b+=(S-b-o*(v-c))*h,s=o*(1-c),u&&(b=Math.round(b),s=Math.round(s));var A=Fle(v).map(function(R){return b+o*R});return n(E?A.reverse():A)}return t.domain=function(v){return arguments.length?(e(v),y()):e()},t.range=function(v){return arguments.length?([r,i]=v,r=+r,i=+i,y()):[r,i]},t.rangeRound=function(v){return[r,i]=v,r=+r,i=+i,u=!0,y()},t.bandwidth=function(){return s},t.step=function(){return o},t.round=function(v){return arguments.length?(u=!!v,y()):u},t.padding=function(v){return arguments.length?(c=Math.min(1,f=+v),y()):c},t.paddingInner=function(v){return arguments.length?(c=Math.min(1,v),y()):c},t.paddingOuter=function(v){return arguments.length?(f=+v,y()):f},t.align=function(v){return arguments.length?(h=Math.max(0,Math.min(1,v)),y()):h},t.copy=function(){return eR(e(),[r,i]).round(u).paddingInner(c).paddingOuter(f).align(h)},to.apply(y(),arguments)}function H$(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return H$(e())},t}function Ble(){return H$(eR.apply(null,arguments).paddingInner(1))}function tR(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function G$(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function og(){}var bm=.7,P_=1/bm,Of="\\s*([+-]?\\d+)\\s*",Sm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",es="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",qle=/^#([0-9a-f]{3,8})$/,$le=new RegExp(`^rgb\\(${Of},${Of},${Of}\\)$`),zle=new RegExp(`^rgb\\(${es},${es},${es}\\)$`),Hle=new RegExp(`^rgba\\(${Of},${Of},${Of},${Sm}\\)$`),Gle=new RegExp(`^rgba\\(${es},${es},${es},${Sm}\\)$`),Kle=new RegExp(`^hsl\\(${Sm},${es},${es}\\)$`),jle=new RegExp(`^hsla\\(${Sm},${es},${es},${Sm}\\)$`),Q2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};tR(og,Am,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:X2,formatHex:X2,formatHex8:Wle,formatHsl:Yle,formatRgb:Z2,toString:Z2});function X2(){return this.rgb().formatHex()}function Wle(){return this.rgb().formatHex8()}function Yle(){return K$(this).formatHsl()}function Z2(){return this.rgb().formatRgb()}function Am(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=qle.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?eV(e):n===3?new Xr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?ov(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?ov(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=$le.exec(t))?new Xr(e[1],e[2],e[3],1):(e=zle.exec(t))?new Xr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Hle.exec(t))?ov(e[1],e[2],e[3],e[4]):(e=Gle.exec(t))?ov(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Kle.exec(t))?rV(e[1],e[2]/100,e[3]/100,1):(e=jle.exec(t))?rV(e[1],e[2]/100,e[3]/100,e[4]):Q2.hasOwnProperty(t)?eV(Q2[t]):t==="transparent"?new Xr(NaN,NaN,NaN,0):null}function eV(t){return new Xr(t>>16&255,t>>8&255,t&255,1)}function ov(t,e,n,r){return r<=0&&(t=e=n=NaN),new Xr(t,e,n,r)}function Jle(t){return t instanceof og||(t=Am(t)),t?(t=t.rgb(),new Xr(t.r,t.g,t.b,t.opacity)):new Xr}function XA(t,e,n,r){return arguments.length===1?Jle(t):new Xr(t,e,n,r??1)}function Xr(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}tR(Xr,XA,G$(og,{brighter(t){return t=t==null?P_:Math.pow(P_,t),new Xr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?bm:Math.pow(bm,t),new Xr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Xr(qu(this.r),qu(this.g),qu(this.b),M_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:tV,formatHex:tV,formatHex8:Qle,formatRgb:nV,toString:nV}));function tV(){return`#${Nu(this.r)}${Nu(this.g)}${Nu(this.b)}`}function Qle(){return`#${Nu(this.r)}${Nu(this.g)}${Nu(this.b)}${Nu((isNaN(this.opacity)?1:this.opacity)*255)}`}function nV(){const t=M_(this.opacity);return`${t===1?"rgb(":"rgba("}${qu(this.r)}, ${qu(this.g)}, ${qu(this.b)}${t===1?")":`, ${t})`}`}function M_(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function qu(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Nu(t){return t=qu(t),(t<16?"0":"")+t.toString(16)}function rV(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new co(t,e,n,r)}function K$(t){if(t instanceof co)return new co(t.h,t.s,t.l,t.opacity);if(t instanceof og||(t=Am(t)),!t)return new co;if(t instanceof co)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,u=o-i,c=(o+i)/2;return u?(e===o?s=(n-r)/u+(n<r)*6:n===o?s=(r-e)/u+2:s=(e-n)/u+4,u/=c<.5?o+i:2-o-i,s*=60):u=c>0&&c<1?0:s,new co(s,u,c,t.opacity)}function Xle(t,e,n,r){return arguments.length===1?K$(t):new co(t,e,n,r??1)}function co(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}tR(co,Xle,G$(og,{brighter(t){return t=t==null?P_:Math.pow(P_,t),new co(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?bm:Math.pow(bm,t),new co(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Xr(oS(t>=240?t-240:t+120,i,r),oS(t,i,r),oS(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new co(iV(this.h),sv(this.s),sv(this.l),M_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=M_(this.opacity);return`${t===1?"hsl(":"hsla("}${iV(this.h)}, ${sv(this.s)*100}%, ${sv(this.l)*100}%${t===1?")":`, ${t})`}`}}));function iV(t){return t=(t||0)%360,t<0?t+360:t}function sv(t){return Math.max(0,Math.min(1,t||0))}function oS(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const nR=t=>()=>t;function Zle(t,e){return function(n){return t+n*e}}function eue(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function tue(t){return(t=+t)==1?j$:function(e,n){return n-e?eue(e,n,t):nR(isNaN(e)?n:e)}}function j$(t,e){var n=e-t;return n?Zle(t,n):nR(isNaN(t)?e:t)}const oV=(function t(e){var n=tue(e);function r(i,o){var s=n((i=XA(i)).r,(o=XA(o)).r),u=n(i.g,o.g),c=n(i.b,o.b),f=j$(i.opacity,o.opacity);return function(h){return i.r=s(h),i.g=u(h),i.b=c(h),i.opacity=f(h),i+""}}return r.gamma=t,r})(1);function nue(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function rue(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function iue(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=Ld(t[s],e[s]);for(;s<n;++s)o[s]=e[s];return function(u){for(s=0;s<r;++s)o[s]=i[s](u);return o}}function oue(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function D_(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function sue(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Ld(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var ZA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sS=new RegExp(ZA.source,"g");function aue(t){return function(){return t}}function lue(t){return function(e){return t(e)+""}}function uue(t,e){var n=ZA.lastIndex=sS.lastIndex=0,r,i,o,s=-1,u=[],c=[];for(t=t+"",e=e+"";(r=ZA.exec(t))&&(i=sS.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),u[s]?u[s]+=o:u[++s]=o),(r=r[0])===(i=i[0])?u[s]?u[s]+=i:u[++s]=i:(u[++s]=null,c.push({i:s,x:D_(r,i)})),n=sS.lastIndex;return n<e.length&&(o=e.slice(n),u[s]?u[s]+=o:u[++s]=o),u.length<2?c[0]?lue(c[0].x):aue(e):(e=c.length,function(f){for(var h=0,y;h<e;++h)u[(y=c[h]).i]=y.x(f);return u.join("")})}function Ld(t,e){var n=typeof e,r;return e==null||n==="boolean"?nR(e):(n==="number"?D_:n==="string"?(r=Am(e))?(e=r,oV):uue:e instanceof Am?oV:e instanceof Date?oue:rue(e)?nue:Array.isArray(e)?iue:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?sue:D_)(t,e)}function rR(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function cue(t,e){e===void 0&&(e=t,t=Ld);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(s){var u=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return o[u](s-u)}}function fue(t){return function(){return t}}function N_(t){return+t}var sV=[0,1];function Fr(t){return t}function eC(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:fue(isNaN(e)?NaN:.5)}function due(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function hue(t,e,n){var r=t[0],i=t[1],o=e[0],s=e[1];return i<r?(r=eC(i,r),o=n(s,o)):(r=eC(r,i),o=n(o,s)),function(u){return o(r(u))}}function pue(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=eC(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(u){var c=ig(t,u,1,r)-1;return o[c](i[c](u))}}function sg(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function iT(){var t=sV,e=sV,n=Ld,r,i,o,s=Fr,u,c,f;function h(){var v=Math.min(t.length,e.length);return s!==Fr&&(s=due(t[0],t[v-1])),u=v>2?pue:hue,c=f=null,y}function y(v){return v==null||isNaN(v=+v)?o:(c||(c=u(t.map(r),e,n)))(r(s(v)))}return y.invert=function(v){return s(i((f||(f=u(e,t.map(r),D_)))(v)))},y.domain=function(v){return arguments.length?(t=Array.from(v,N_),h()):t.slice()},y.range=function(v){return arguments.length?(e=Array.from(v),h()):e.slice()},y.rangeRound=function(v){return e=Array.from(v),n=rR,h()},y.clamp=function(v){return arguments.length?(s=v?!0:Fr,h()):s!==Fr},y.interpolate=function(v){return arguments.length?(n=v,h()):n},y.unknown=function(v){return arguments.length?(o=v,y):o},function(v,E){return r=v,i=E,h()}}function iR(){return iT()(Fr,Fr)}function mue(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function k_(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function dd(t){return t=k_(Math.abs(t)),t?t[1]:NaN}function gue(t,e){return function(n,r){for(var i=n.length,o=[],s=0,u=t[0],c=0;i>0&&u>0&&(c+u+1>r&&(u=Math.max(1,r-c)),o.push(n.substring(i-=u,i+u)),!((c+=u+1)>r));)u=t[s=(s+1)%t.length];return o.reverse().join(e)}}function yue(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var vue=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Cm(t){if(!(e=vue.exec(t)))throw new Error("invalid format: "+t);var e;return new oR({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Cm.prototype=oR.prototype;function oR(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}oR.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function _ue(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var W$;function Tue(t,e){var n=k_(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(W$=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+k_(t,Math.max(0,e+o-1))[0]}function aV(t,e){var n=k_(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const lV={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:mue,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>aV(t*100,e),r:aV,s:Tue,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function uV(t){return t}var cV=Array.prototype.map,fV=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Eue(t){var e=t.grouping===void 0||t.thousands===void 0?uV:gue(cV.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?uV:yue(cV.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",u=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function f(y){y=Cm(y);var v=y.fill,E=y.align,b=y.sign,S=y.symbol,A=y.zero,R=y.width,D=y.comma,M=y.precision,U=y.trim,q=y.type;q==="n"?(D=!0,q="g"):lV[q]||(M===void 0&&(M=12),U=!0,q="g"),(A||v==="0"&&E==="=")&&(A=!0,v="0",E="=");var z=S==="$"?n:S==="#"&&/[boxX]/.test(q)?"0"+q.toLowerCase():"",k=S==="$"?r:/[%p]/.test(q)?s:"",V=lV[q],N=/[defgprs%]/.test(q);M=M===void 0?6:/[gprs]/.test(q)?Math.max(1,Math.min(21,M)):Math.max(0,Math.min(20,M));function $(F){var G=z,H=k,Ae,Se,ee;if(q==="c")H=V(F)+H,F="";else{F=+F;var he=F<0||1/F<0;if(F=isNaN(F)?c:V(Math.abs(F),M),U&&(F=_ue(F)),he&&+F==0&&b!=="+"&&(he=!1),G=(he?b==="("?b:u:b==="-"||b==="("?"":b)+G,H=(q==="s"?fV[8+W$/3]:"")+H+(he&&b==="("?")":""),N){for(Ae=-1,Se=F.length;++Ae<Se;)if(ee=F.charCodeAt(Ae),48>ee||ee>57){H=(ee===46?i+F.slice(Ae+1):F.slice(Ae))+H,F=F.slice(0,Ae);break}}}D&&!A&&(F=e(F,1/0));var Te=G.length+F.length+H.length,Ve=Te<R?new Array(R-Te+1).join(v):"";switch(D&&A&&(F=e(Ve+F,Ve.length?R-H.length:1/0),Ve=""),E){case"<":F=G+F+H+Ve;break;case"=":F=G+Ve+F+H;break;case"^":F=Ve.slice(0,Te=Ve.length>>1)+G+F+H+Ve.slice(Te);break;default:F=Ve+G+F+H;break}return o(F)}return $.toString=function(){return y+""},$}function h(y,v){var E=f((y=Cm(y),y.type="f",y)),b=Math.max(-8,Math.min(8,Math.floor(dd(v)/3)))*3,S=Math.pow(10,-b),A=fV[8+b/3];return function(R){return E(S*R)+A}}return{format:f,formatPrefix:h}}var av,sR,Y$;wue({thousands:",",grouping:[3],currency:["$",""]});function wue(t){return av=Eue(t),sR=av.format,Y$=av.formatPrefix,av}function bue(t){return Math.max(0,-dd(Math.abs(t)))}function Sue(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(dd(e)/3)))*3-dd(Math.abs(t)))}function Aue(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,dd(e)-dd(t))+1}function J$(t,e,n,r){var i=JA(t,e,n),o;switch(r=Cm(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=Sue(i,s))&&(r.precision=o),Y$(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=Aue(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=bue(i))&&(r.precision=o-(r.type==="%")*2);break}}return sR(r)}function Nl(t){var e=t.domain;return t.ticks=function(n){var r=e();return WA(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return J$(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,s=r[i],u=r[o],c,f,h=10;for(u<s&&(f=s,s=u,u=f,f=i,i=o,o=f);h-- >0;){if(f=YA(s,u,n),f===c)return r[i]=s,r[o]=u,e(r);if(f>0)s=Math.floor(s/f)*f,u=Math.ceil(u/f)*f;else if(f<0)s=Math.ceil(s*f)/f,u=Math.floor(u*f)/f;else break;c=f}return t},t}function Q$(){var t=iR();return t.copy=function(){return sg(t,Q$())},to.apply(t,arguments),Nl(t)}function X$(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,N_),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return X$(t).unknown(e)},t=arguments.length?Array.from(t,N_):[0,1],Nl(n)}function Z$(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],o=t[r],s;return o<i&&(s=n,n=r,r=s,s=i,i=o,o=s),t[n]=e.floor(i),t[r]=e.ceil(o),t}function dV(t){return Math.log(t)}function hV(t){return Math.exp(t)}function Cue(t){return-Math.log(-t)}function Iue(t){return-Math.exp(-t)}function xue(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Rue(t){return t===10?xue:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Pue(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function pV(t){return(e,n)=>-t(-e,n)}function aR(t){const e=t(dV,hV),n=e.domain;let r=10,i,o;function s(){return i=Pue(r),o=Rue(r),n()[0]<0?(i=pV(i),o=pV(o),t(Cue,Iue)):t(dV,hV),e}return e.base=function(u){return arguments.length?(r=+u,s()):r},e.domain=function(u){return arguments.length?(n(u),s()):n()},e.ticks=u=>{const c=n();let f=c[0],h=c[c.length-1];const y=h<f;y&&([f,h]=[h,f]);let v=i(f),E=i(h),b,S;const A=u==null?10:+u;let R=[];if(!(r%1)&&E-v<A){if(v=Math.floor(v),E=Math.ceil(E),f>0){for(;v<=E;++v)for(b=1;b<r;++b)if(S=v<0?b/o(-v):b*o(v),!(S<f)){if(S>h)break;R.push(S)}}else for(;v<=E;++v)for(b=r-1;b>=1;--b)if(S=v>0?b/o(-v):b*o(v),!(S<f)){if(S>h)break;R.push(S)}R.length*2<A&&(R=WA(f,h,A))}else R=WA(v,E,Math.min(E-v,A)).map(o);return y?R.reverse():R},e.tickFormat=(u,c)=>{if(u==null&&(u=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=Cm(c)).precision==null&&(c.trim=!0),c=sR(c)),u===1/0)return c;const f=Math.max(1,r*u/e.ticks().length);return h=>{let y=h/o(Math.round(i(h)));return y*r<r-.5&&(y*=r),y<=f?c(h):""}},e.nice=()=>n(Z$(n(),{floor:u=>o(Math.floor(i(u))),ceil:u=>o(Math.ceil(i(u)))})),e}function e5(){const t=aR(iT()).domain([1,10]);return t.copy=()=>sg(t,e5()).base(t.base()),to.apply(t,arguments),t}function mV(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function gV(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function lR(t){var e=1,n=t(mV(e),gV(e));return n.constant=function(r){return arguments.length?t(mV(e=+r),gV(e)):e},Nl(n)}function t5(){var t=lR(iT());return t.copy=function(){return sg(t,t5()).constant(t.constant())},to.apply(t,arguments)}function yV(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Mue(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Due(t){return t<0?-t*t:t*t}function uR(t){var e=t(Fr,Fr),n=1;function r(){return n===1?t(Fr,Fr):n===.5?t(Mue,Due):t(yV(n),yV(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Nl(e)}function cR(){var t=uR(iT());return t.copy=function(){return sg(t,cR()).exponent(t.exponent())},to.apply(t,arguments),t}function Nue(){return cR.apply(null,arguments).exponent(.5)}function vV(t){return Math.sign(t)*t*t}function kue(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function n5(){var t=iR(),e=[0,1],n=!1,r;function i(o){var s=kue(t(o));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(o){return t.invert(vV(o))},i.domain=function(o){return arguments.length?(t.domain(o),i):t.domain()},i.range=function(o){return arguments.length?(t.range((e=Array.from(o,N_)).map(vV)),i):e.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(n=!!o,i):n},i.clamp=function(o){return arguments.length?(t.clamp(o),i):t.clamp()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return n5(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},to.apply(i,arguments),Nl(i)}function r5(){var t=[],e=[],n=[],r;function i(){var s=0,u=Math.max(1,e.length);for(n=new Array(u-1);++s<u;)n[s-1]=Ule(t,s/u);return o}function o(s){return s==null||isNaN(s=+s)?r:e[ig(n,s)]}return o.invertExtent=function(s){var u=e.indexOf(s);return u<0?[NaN,NaN]:[u>0?n[u-1]:t[0],u<n.length?n[u]:t[t.length-1]]},o.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let u of s)u!=null&&!isNaN(u=+u)&&t.push(u);return t.sort(ul),i()},o.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return r5().domain(t).range(e).unknown(r)},to.apply(o,arguments)}function i5(){var t=0,e=1,n=1,r=[.5],i=[0,1],o;function s(c){return c!=null&&c<=c?i[ig(r,c,0,n)]:o}function u(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return s}return s.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,u()):[t,e]},s.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,u()):i.slice()},s.invertExtent=function(c){var f=i.indexOf(c);return f<0?[NaN,NaN]:f<1?[t,r[0]]:f>=n?[r[n-1],e]:[r[f-1],r[f]]},s.unknown=function(c){return arguments.length&&(o=c),s},s.thresholds=function(){return r.slice()},s.copy=function(){return i5().domain([t,e]).range(i).unknown(o)},to.apply(Nl(s),arguments)}function o5(){var t=[.5],e=[0,1],n,r=1;function i(o){return o!=null&&o<=o?e[ig(t,o,0,r)]:n}return i.domain=function(o){return arguments.length?(t=Array.from(o),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(o){return arguments.length?(e=Array.from(o),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(o){var s=e.indexOf(o);return[t[s-1],t[s]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return o5().domain(t).range(e).unknown(n)},to.apply(i,arguments)}const aS=new Date,lS=new Date;function qn(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const s=i(o),u=i.ceil(o);return o-s<u-o?s:u},i.offset=(o,s)=>(e(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,u)=>{const c=[];if(o=i.ceil(o),u=u==null?1:Math.floor(u),!(o<s)||!(u>0))return c;let f;do c.push(f=new Date(+o)),e(o,u),t(o);while(f<o&&o<s);return c},i.filter=o=>qn(s=>{if(s>=s)for(;t(s),!o(s);)s.setTime(s-1)},(s,u)=>{if(s>=s)if(u<0)for(;++u<=0;)for(;e(s,-1),!o(s););else for(;--u>=0;)for(;e(s,1),!o(s););}),n&&(i.count=(o,s)=>(aS.setTime(+o),lS.setTime(+s),t(aS),t(lS),Math.floor(n(aS,lS))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?s=>r(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const O_=qn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);O_.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?qn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):O_);O_.range;const Us=1e3,Ki=Us*60,Fs=Ki*60,Zs=Fs*24,fR=Zs*7,_V=Zs*30,uS=Zs*365,ku=qn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Us)},(t,e)=>(e-t)/Us,t=>t.getUTCSeconds());ku.range;const dR=qn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Us)},(t,e)=>{t.setTime(+t+e*Ki)},(t,e)=>(e-t)/Ki,t=>t.getMinutes());dR.range;const hR=qn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Ki)},(t,e)=>(e-t)/Ki,t=>t.getUTCMinutes());hR.range;const pR=qn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Us-t.getMinutes()*Ki)},(t,e)=>{t.setTime(+t+e*Fs)},(t,e)=>(e-t)/Fs,t=>t.getHours());pR.range;const mR=qn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Fs)},(t,e)=>(e-t)/Fs,t=>t.getUTCHours());mR.range;const ag=qn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ki)/Zs,t=>t.getDate()-1);ag.range;const oT=qn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Zs,t=>t.getUTCDate()-1);oT.range;const s5=qn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Zs,t=>Math.floor(t/Zs));s5.range;function hc(t){return qn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Ki)/fR)}const sT=hc(0),V_=hc(1),Oue=hc(2),Vue=hc(3),hd=hc(4),Lue=hc(5),Uue=hc(6);sT.range;V_.range;Oue.range;Vue.range;hd.range;Lue.range;Uue.range;function pc(t){return qn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/fR)}const aT=pc(0),L_=pc(1),Fue=pc(2),Bue=pc(3),pd=pc(4),que=pc(5),$ue=pc(6);aT.range;L_.range;Fue.range;Bue.range;pd.range;que.range;$ue.range;const gR=qn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());gR.range;const yR=qn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());yR.range;const ea=qn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());ea.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:qn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});ea.range;const ta=qn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());ta.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:qn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});ta.range;function a5(t,e,n,r,i,o){const s=[[ku,1,Us],[ku,5,5*Us],[ku,15,15*Us],[ku,30,30*Us],[o,1,Ki],[o,5,5*Ki],[o,15,15*Ki],[o,30,30*Ki],[i,1,Fs],[i,3,3*Fs],[i,6,6*Fs],[i,12,12*Fs],[r,1,Zs],[r,2,2*Zs],[n,1,fR],[e,1,_V],[e,3,3*_V],[t,1,uS]];function u(f,h,y){const v=h<f;v&&([f,h]=[h,f]);const E=y&&typeof y.range=="function"?y:c(f,h,y),b=E?E.range(f,+h+1):[];return v?b.reverse():b}function c(f,h,y){const v=Math.abs(h-f)/y,E=Xx(([,,A])=>A).right(s,v);if(E===s.length)return t.every(JA(f/uS,h/uS,y));if(E===0)return O_.every(Math.max(JA(f,h,y),1));const[b,S]=s[v/s[E-1][2]<s[E][2]/v?E-1:E];return b.every(S)}return[u,c]}const[zue,Hue]=a5(ta,yR,aT,s5,mR,hR),[Gue,Kue]=a5(ea,gR,sT,ag,pR,dR);function cS(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function fS(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function pp(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function jue(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,s=t.shortDays,u=t.months,c=t.shortMonths,f=mp(i),h=gp(i),y=mp(o),v=gp(o),E=mp(s),b=gp(s),S=mp(u),A=gp(u),R=mp(c),D=gp(c),M={a:he,A:Te,b:Ve,B:j,c:null,d:AV,e:AV,f:gce,g:Cce,G:xce,H:hce,I:pce,j:mce,L:l5,m:yce,M:vce,p:ce,q:le,Q:xV,s:RV,S:_ce,u:Tce,U:Ece,V:wce,w:bce,W:Sce,x:null,X:null,y:Ace,Y:Ice,Z:Rce,"%":IV},U={a:ve,A:Oe,b:Fe,B:Be,c:null,d:CV,e:CV,f:Nce,g:zce,G:Gce,H:Pce,I:Mce,j:Dce,L:c5,m:kce,M:Oce,p:an,q:ft,Q:xV,s:RV,S:Vce,u:Lce,U:Uce,V:Fce,w:Bce,W:qce,x:null,X:null,y:$ce,Y:Hce,Z:Kce,"%":IV},q={a:$,A:F,b:G,B:H,c:Ae,d:bV,e:bV,f:uce,g:wV,G:EV,H:SV,I:SV,j:oce,L:lce,m:ice,M:sce,p:N,q:rce,Q:fce,s:dce,S:ace,u:Xue,U:Zue,V:ece,w:Que,W:tce,x:Se,X:ee,y:wV,Y:EV,Z:nce,"%":cce};M.x=z(n,M),M.X=z(r,M),M.c=z(e,M),U.x=z(n,U),U.X=z(r,U),U.c=z(e,U);function z(we,Ge){return function(je){var ge=[],Wt=-1,et=0,mn=we.length,bn,ln,ma;for(je instanceof Date||(je=new Date(+je));++Wt<mn;)we.charCodeAt(Wt)===37&&(ge.push(we.slice(et,Wt)),(ln=TV[bn=we.charAt(++Wt)])!=null?bn=we.charAt(++Wt):ln=bn==="e"?" ":"0",(ma=Ge[bn])&&(bn=ma(je,ln)),ge.push(bn),et=Wt+1);return ge.push(we.slice(et,Wt)),ge.join("")}}function k(we,Ge){return function(je){var ge=pp(1900,void 0,1),Wt=V(ge,we,je+="",0),et,mn;if(Wt!=je.length)return null;if("Q"in ge)return new Date(ge.Q);if("s"in ge)return new Date(ge.s*1e3+("L"in ge?ge.L:0));if(Ge&&!("Z"in ge)&&(ge.Z=0),"p"in ge&&(ge.H=ge.H%12+ge.p*12),ge.m===void 0&&(ge.m="q"in ge?ge.q:0),"V"in ge){if(ge.V<1||ge.V>53)return null;"w"in ge||(ge.w=1),"Z"in ge?(et=fS(pp(ge.y,0,1)),mn=et.getUTCDay(),et=mn>4||mn===0?L_.ceil(et):L_(et),et=oT.offset(et,(ge.V-1)*7),ge.y=et.getUTCFullYear(),ge.m=et.getUTCMonth(),ge.d=et.getUTCDate()+(ge.w+6)%7):(et=cS(pp(ge.y,0,1)),mn=et.getDay(),et=mn>4||mn===0?V_.ceil(et):V_(et),et=ag.offset(et,(ge.V-1)*7),ge.y=et.getFullYear(),ge.m=et.getMonth(),ge.d=et.getDate()+(ge.w+6)%7)}else("W"in ge||"U"in ge)&&("w"in ge||(ge.w="u"in ge?ge.u%7:"W"in ge?1:0),mn="Z"in ge?fS(pp(ge.y,0,1)).getUTCDay():cS(pp(ge.y,0,1)).getDay(),ge.m=0,ge.d="W"in ge?(ge.w+6)%7+ge.W*7-(mn+5)%7:ge.w+ge.U*7-(mn+6)%7);return"Z"in ge?(ge.H+=ge.Z/100|0,ge.M+=ge.Z%100,fS(ge)):cS(ge)}}function V(we,Ge,je,ge){for(var Wt=0,et=Ge.length,mn=je.length,bn,ln;Wt<et;){if(ge>=mn)return-1;if(bn=Ge.charCodeAt(Wt++),bn===37){if(bn=Ge.charAt(Wt++),ln=q[bn in TV?Ge.charAt(Wt++):bn],!ln||(ge=ln(we,je,ge))<0)return-1}else if(bn!=je.charCodeAt(ge++))return-1}return ge}function N(we,Ge,je){var ge=f.exec(Ge.slice(je));return ge?(we.p=h.get(ge[0].toLowerCase()),je+ge[0].length):-1}function $(we,Ge,je){var ge=E.exec(Ge.slice(je));return ge?(we.w=b.get(ge[0].toLowerCase()),je+ge[0].length):-1}function F(we,Ge,je){var ge=y.exec(Ge.slice(je));return ge?(we.w=v.get(ge[0].toLowerCase()),je+ge[0].length):-1}function G(we,Ge,je){var ge=R.exec(Ge.slice(je));return ge?(we.m=D.get(ge[0].toLowerCase()),je+ge[0].length):-1}function H(we,Ge,je){var ge=S.exec(Ge.slice(je));return ge?(we.m=A.get(ge[0].toLowerCase()),je+ge[0].length):-1}function Ae(we,Ge,je){return V(we,e,Ge,je)}function Se(we,Ge,je){return V(we,n,Ge,je)}function ee(we,Ge,je){return V(we,r,Ge,je)}function he(we){return s[we.getDay()]}function Te(we){return o[we.getDay()]}function Ve(we){return c[we.getMonth()]}function j(we){return u[we.getMonth()]}function ce(we){return i[+(we.getHours()>=12)]}function le(we){return 1+~~(we.getMonth()/3)}function ve(we){return s[we.getUTCDay()]}function Oe(we){return o[we.getUTCDay()]}function Fe(we){return c[we.getUTCMonth()]}function Be(we){return u[we.getUTCMonth()]}function an(we){return i[+(we.getUTCHours()>=12)]}function ft(we){return 1+~~(we.getUTCMonth()/3)}return{format:function(we){var Ge=z(we+="",M);return Ge.toString=function(){return we},Ge},parse:function(we){var Ge=k(we+="",!1);return Ge.toString=function(){return we},Ge},utcFormat:function(we){var Ge=z(we+="",U);return Ge.toString=function(){return we},Ge},utcParse:function(we){var Ge=k(we+="",!0);return Ge.toString=function(){return we},Ge}}}var TV={"-":"",_:" ",0:"0"},rr=/^\s*\d+/,Wue=/^%/,Yue=/[\\^$*+?|[\]().{}]/g;function yt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Jue(t){return t.replace(Yue,"\\$&")}function mp(t){return new RegExp("^(?:"+t.map(Jue).join("|")+")","i")}function gp(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Que(t,e,n){var r=rr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Xue(t,e,n){var r=rr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Zue(t,e,n){var r=rr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function ece(t,e,n){var r=rr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function tce(t,e,n){var r=rr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function EV(t,e,n){var r=rr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function wV(t,e,n){var r=rr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function nce(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function rce(t,e,n){var r=rr.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function ice(t,e,n){var r=rr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function bV(t,e,n){var r=rr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function oce(t,e,n){var r=rr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function SV(t,e,n){var r=rr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function sce(t,e,n){var r=rr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function ace(t,e,n){var r=rr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function lce(t,e,n){var r=rr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function uce(t,e,n){var r=rr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function cce(t,e,n){var r=Wue.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function fce(t,e,n){var r=rr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function dce(t,e,n){var r=rr.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function AV(t,e){return yt(t.getDate(),e,2)}function hce(t,e){return yt(t.getHours(),e,2)}function pce(t,e){return yt(t.getHours()%12||12,e,2)}function mce(t,e){return yt(1+ag.count(ea(t),t),e,3)}function l5(t,e){return yt(t.getMilliseconds(),e,3)}function gce(t,e){return l5(t,e)+"000"}function yce(t,e){return yt(t.getMonth()+1,e,2)}function vce(t,e){return yt(t.getMinutes(),e,2)}function _ce(t,e){return yt(t.getSeconds(),e,2)}function Tce(t){var e=t.getDay();return e===0?7:e}function Ece(t,e){return yt(sT.count(ea(t)-1,t),e,2)}function u5(t){var e=t.getDay();return e>=4||e===0?hd(t):hd.ceil(t)}function wce(t,e){return t=u5(t),yt(hd.count(ea(t),t)+(ea(t).getDay()===4),e,2)}function bce(t){return t.getDay()}function Sce(t,e){return yt(V_.count(ea(t)-1,t),e,2)}function Ace(t,e){return yt(t.getFullYear()%100,e,2)}function Cce(t,e){return t=u5(t),yt(t.getFullYear()%100,e,2)}function Ice(t,e){return yt(t.getFullYear()%1e4,e,4)}function xce(t,e){var n=t.getDay();return t=n>=4||n===0?hd(t):hd.ceil(t),yt(t.getFullYear()%1e4,e,4)}function Rce(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+yt(e/60|0,"0",2)+yt(e%60,"0",2)}function CV(t,e){return yt(t.getUTCDate(),e,2)}function Pce(t,e){return yt(t.getUTCHours(),e,2)}function Mce(t,e){return yt(t.getUTCHours()%12||12,e,2)}function Dce(t,e){return yt(1+oT.count(ta(t),t),e,3)}function c5(t,e){return yt(t.getUTCMilliseconds(),e,3)}function Nce(t,e){return c5(t,e)+"000"}function kce(t,e){return yt(t.getUTCMonth()+1,e,2)}function Oce(t,e){return yt(t.getUTCMinutes(),e,2)}function Vce(t,e){return yt(t.getUTCSeconds(),e,2)}function Lce(t){var e=t.getUTCDay();return e===0?7:e}function Uce(t,e){return yt(aT.count(ta(t)-1,t),e,2)}function f5(t){var e=t.getUTCDay();return e>=4||e===0?pd(t):pd.ceil(t)}function Fce(t,e){return t=f5(t),yt(pd.count(ta(t),t)+(ta(t).getUTCDay()===4),e,2)}function Bce(t){return t.getUTCDay()}function qce(t,e){return yt(L_.count(ta(t)-1,t),e,2)}function $ce(t,e){return yt(t.getUTCFullYear()%100,e,2)}function zce(t,e){return t=f5(t),yt(t.getUTCFullYear()%100,e,2)}function Hce(t,e){return yt(t.getUTCFullYear()%1e4,e,4)}function Gce(t,e){var n=t.getUTCDay();return t=n>=4||n===0?pd(t):pd.ceil(t),yt(t.getUTCFullYear()%1e4,e,4)}function Kce(){return"+0000"}function IV(){return"%"}function xV(t){return+t}function RV(t){return Math.floor(+t/1e3)}var gf,d5,h5;jce({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function jce(t){return gf=jue(t),d5=gf.format,gf.parse,h5=gf.utcFormat,gf.utcParse,gf}function Wce(t){return new Date(t)}function Yce(t){return t instanceof Date?+t:+new Date(+t)}function vR(t,e,n,r,i,o,s,u,c,f){var h=iR(),y=h.invert,v=h.domain,E=f(".%L"),b=f(":%S"),S=f("%I:%M"),A=f("%I %p"),R=f("%a %d"),D=f("%b %d"),M=f("%B"),U=f("%Y");function q(z){return(c(z)<z?E:u(z)<z?b:s(z)<z?S:o(z)<z?A:r(z)<z?i(z)<z?R:D:n(z)<z?M:U)(z)}return h.invert=function(z){return new Date(y(z))},h.domain=function(z){return arguments.length?v(Array.from(z,Yce)):v().map(Wce)},h.ticks=function(z){var k=v();return t(k[0],k[k.length-1],z??10)},h.tickFormat=function(z,k){return k==null?q:f(k)},h.nice=function(z){var k=v();return(!z||typeof z.range!="function")&&(z=e(k[0],k[k.length-1],z??10)),z?v(Z$(k,z)):h},h.copy=function(){return sg(h,vR(t,e,n,r,i,o,s,u,c,f))},h}function Jce(){return to.apply(vR(Gue,Kue,ea,gR,sT,ag,pR,dR,ku,d5).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Qce(){return to.apply(vR(zue,Hue,ta,yR,aT,oT,mR,hR,ku,h5).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function lT(){var t=0,e=1,n,r,i,o,s=Fr,u=!1,c;function f(y){return y==null||isNaN(y=+y)?c:s(i===0?.5:(y=(o(y)-n)*i,u?Math.max(0,Math.min(1,y)):y))}f.domain=function(y){return arguments.length?([t,e]=y,n=o(t=+t),r=o(e=+e),i=n===r?0:1/(r-n),f):[t,e]},f.clamp=function(y){return arguments.length?(u=!!y,f):u},f.interpolator=function(y){return arguments.length?(s=y,f):s};function h(y){return function(v){var E,b;return arguments.length?([E,b]=v,s=y(E,b),f):[s(0),s(1)]}}return f.range=h(Ld),f.rangeRound=h(rR),f.unknown=function(y){return arguments.length?(c=y,f):c},function(y){return o=y,n=y(t),r=y(e),i=n===r?0:1/(r-n),f}}function kl(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function p5(){var t=Nl(lT()(Fr));return t.copy=function(){return kl(t,p5())},da.apply(t,arguments)}function m5(){var t=aR(lT()).domain([1,10]);return t.copy=function(){return kl(t,m5()).base(t.base())},da.apply(t,arguments)}function g5(){var t=lR(lT());return t.copy=function(){return kl(t,g5()).constant(t.constant())},da.apply(t,arguments)}function _R(){var t=uR(lT());return t.copy=function(){return kl(t,_R()).exponent(t.exponent())},da.apply(t,arguments)}function Xce(){return _R.apply(null,arguments).exponent(.5)}function y5(){var t=[],e=Fr;function n(r){if(r!=null&&!isNaN(r=+r))return e((ig(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(ul),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,o)=>Lle(t,o/r))},n.copy=function(){return y5(e).domain(t)},da.apply(n,arguments)}function uT(){var t=0,e=.5,n=1,r=1,i,o,s,u,c,f=Fr,h,y=!1,v;function E(S){return isNaN(S=+S)?v:(S=.5+((S=+h(S))-o)*(r*S<r*o?u:c),f(y?Math.max(0,Math.min(1,S)):S))}E.domain=function(S){return arguments.length?([t,e,n]=S,i=h(t=+t),o=h(e=+e),s=h(n=+n),u=i===o?0:.5/(o-i),c=o===s?0:.5/(s-o),r=o<i?-1:1,E):[t,e,n]},E.clamp=function(S){return arguments.length?(y=!!S,E):y},E.interpolator=function(S){return arguments.length?(f=S,E):f};function b(S){return function(A){var R,D,M;return arguments.length?([R,D,M]=A,f=cue(S,[R,D,M]),E):[f(0),f(.5),f(1)]}}return E.range=b(Ld),E.rangeRound=b(rR),E.unknown=function(S){return arguments.length?(v=S,E):v},function(S){return h=S,i=S(t),o=S(e),s=S(n),u=i===o?0:.5/(o-i),c=o===s?0:.5/(s-o),r=o<i?-1:1,E}}function v5(){var t=Nl(uT()(Fr));return t.copy=function(){return kl(t,v5())},da.apply(t,arguments)}function _5(){var t=aR(uT()).domain([.1,1,10]);return t.copy=function(){return kl(t,_5()).base(t.base())},da.apply(t,arguments)}function T5(){var t=lR(uT());return t.copy=function(){return kl(t,T5()).constant(t.constant())},da.apply(t,arguments)}function TR(){var t=uR(uT());return t.copy=function(){return kl(t,TR()).exponent(t.exponent())},da.apply(t,arguments)}function Zce(){return TR.apply(null,arguments).exponent(.5)}const xp=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:eR,scaleDiverging:v5,scaleDivergingLog:_5,scaleDivergingPow:TR,scaleDivergingSqrt:Zce,scaleDivergingSymlog:T5,scaleIdentity:X$,scaleImplicit:QA,scaleLinear:Q$,scaleLog:e5,scaleOrdinal:Zx,scalePoint:Ble,scalePow:cR,scaleQuantile:r5,scaleQuantize:i5,scaleRadial:n5,scaleSequential:p5,scaleSequentialLog:m5,scaleSequentialPow:_R,scaleSequentialQuantile:y5,scaleSequentialSqrt:Xce,scaleSequentialSymlog:g5,scaleSqrt:Nue,scaleSymlog:t5,scaleThreshold:o5,scaleTime:Jce,scaleUtc:Qce,tickFormat:J$},Symbol.toStringTag,{value:"Module"}));var Ol=t=>t.chartData,efe=se([Ol],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),ER=(t,e,n,r)=>r?efe(t):Ol(t);function md(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(Si(e)&&Si(n))return!0}return!1}function PV(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function tfe(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,o;if(Si(n))i=n;else if(typeof n=="function")return;if(Si(r))o=r;else if(typeof r=="function")return;var s=[i,o];if(md(s))return s}}function nfe(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(md(r))return PV(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,o]=t,s,u;if(i==="auto")e!=null&&(s=Math.min(...e));else if(Ye(i))s=i;else if(typeof i=="function")try{e!=null&&(s=i(e==null?void 0:e[0]))}catch{}else if(typeof i=="string"&&w2.test(i)){var c=w2.exec(i);if(c==null||e==null)s=void 0;else{var f=+c[1];s=e[0]-f}}else s=e==null?void 0:e[0];if(o==="auto")e!=null&&(u=Math.max(...e));else if(Ye(o))u=o;else if(typeof o=="function")try{e!=null&&(u=o(e==null?void 0:e[1]))}catch{}else if(typeof o=="string"&&b2.test(o)){var h=b2.exec(o);if(h==null||e==null)u=void 0;else{var y=+h[1];u=e[1]+y}}else u=e==null?void 0:e[1];var v=[s,u];if(md(v))return e==null?v:PV(v,e,n)}}}var Ud=1e9,rfe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},bR,en=!0,eo="[DecimalError] ",$u=eo+"Invalid argument: ",wR=eo+"Exponent out of range: ",Fd=Math.floor,wu=Math.pow,ife=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,mi,Yn=1e7,zt=7,E5=9007199254740991,U_=Fd(E5/zt),Re={};Re.absoluteValue=Re.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Re.comparedTo=Re.cmp=function(t){var e,n,r,i,o=this;if(t=new o.constructor(t),o.s!==t.s)return o.s||-t.s;if(o.e!==t.e)return o.e>t.e^o.s<0?1:-1;for(r=o.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(o.d[e]!==t.d[e])return o.d[e]>t.d[e]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1};Re.decimalPlaces=Re.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*zt;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Re.dividedBy=Re.div=function(t){return Hs(this,new this.constructor(t))};Re.dividedToIntegerBy=Re.idiv=function(t){var e=this,n=e.constructor;return Vt(Hs(e,new n(t),0,1),n.precision)};Re.equals=Re.eq=function(t){return!this.cmp(t)};Re.exponent=function(){return Mn(this)};Re.greaterThan=Re.gt=function(t){return this.cmp(t)>0};Re.greaterThanOrEqualTo=Re.gte=function(t){return this.cmp(t)>=0};Re.isInteger=Re.isint=function(){return this.e>this.d.length-2};Re.isNegative=Re.isneg=function(){return this.s<0};Re.isPositive=Re.ispos=function(){return this.s>0};Re.isZero=function(){return this.s===0};Re.lessThan=Re.lt=function(t){return this.cmp(t)<0};Re.lessThanOrEqualTo=Re.lte=function(t){return this.cmp(t)<1};Re.logarithm=Re.log=function(t){var e,n=this,r=n.constructor,i=r.precision,o=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(mi))throw Error(eo+"NaN");if(n.s<1)throw Error(eo+(n.s?"NaN":"-Infinity"));return n.eq(mi)?new r(0):(en=!1,e=Hs(Im(n,o),Im(t,o),o),en=!0,Vt(e,i))};Re.minus=Re.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?S5(e,t):w5(e,(t.s=-t.s,t))};Re.modulo=Re.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(eo+"NaN");return n.s?(en=!1,e=Hs(n,t,0,1).times(t),en=!0,n.minus(e)):Vt(new r(n),i)};Re.naturalExponential=Re.exp=function(){return b5(this)};Re.naturalLogarithm=Re.ln=function(){return Im(this)};Re.negated=Re.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Re.plus=Re.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?w5(e,t):S5(e,(t.s=-t.s,t))};Re.precision=Re.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error($u+t);if(e=Mn(i)+1,r=i.d.length-1,n=r*zt+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Re.squareRoot=Re.sqrt=function(){var t,e,n,r,i,o,s,u=this,c=u.constructor;if(u.s<1){if(!u.s)return new c(0);throw Error(eo+"NaN")}for(t=Mn(u),en=!1,i=Math.sqrt(+u),i==0||i==1/0?(e=Yo(u.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Fd((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new c(e)):r=new c(i.toString()),n=c.precision,i=s=n+3;;)if(o=r,r=o.plus(Hs(u,o,s+2)).times(.5),Yo(o.d).slice(0,s)===(e=Yo(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(Vt(o,n+1,0),o.times(o).eq(u)){r=o;break}}else if(e!="9999")break;s+=4}return en=!0,Vt(r,n)};Re.times=Re.mul=function(t){var e,n,r,i,o,s,u,c,f,h=this,y=h.constructor,v=h.d,E=(t=new y(t)).d;if(!h.s||!t.s)return new y(0);for(t.s*=h.s,n=h.e+t.e,c=v.length,f=E.length,c<f&&(o=v,v=E,E=o,s=c,c=f,f=s),o=[],s=c+f,r=s;r--;)o.push(0);for(r=f;--r>=0;){for(e=0,i=c+r;i>r;)u=o[i]+E[r]*v[i-r-1]+e,o[i--]=u%Yn|0,e=u/Yn|0;o[i]=(o[i]+e)%Yn|0}for(;!o[--s];)o.pop();return e?++n:o.shift(),t.d=o,t.e=n,en?Vt(t,y.precision):t};Re.toDecimalPlaces=Re.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(os(t,0,Ud),e===void 0?e=r.rounding:os(e,0,8),Vt(n,t+Mn(n)+1,e))};Re.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=rc(r,!0):(os(t,0,Ud),e===void 0?e=i.rounding:os(e,0,8),r=Vt(new i(r),t+1,e),n=rc(r,!0,t+1)),n};Re.toFixed=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?rc(i):(os(t,0,Ud),e===void 0?e=o.rounding:os(e,0,8),r=Vt(new o(i),t+Mn(i)+1,e),n=rc(r.abs(),!1,t+Mn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Re.toInteger=Re.toint=function(){var t=this,e=t.constructor;return Vt(new e(t),Mn(t)+1,e.rounding)};Re.toNumber=function(){return+this};Re.toPower=Re.pow=function(t){var e,n,r,i,o,s,u=this,c=u.constructor,f=12,h=+(t=new c(t));if(!t.s)return new c(mi);if(u=new c(u),!u.s){if(t.s<1)throw Error(eo+"Infinity");return u}if(u.eq(mi))return u;if(r=c.precision,t.eq(mi))return Vt(u,r);if(e=t.e,n=t.d.length-1,s=e>=n,o=u.s,s){if((n=h<0?-h:h)<=E5){for(i=new c(mi),e=Math.ceil(r/zt+4),en=!1;n%2&&(i=i.times(u),DV(i.d,e)),n=Fd(n/2),n!==0;)u=u.times(u),DV(u.d,e);return en=!0,t.s<0?new c(mi).div(i):Vt(i,r)}}else if(o<0)throw Error(eo+"NaN");return o=o<0&&t.d[Math.max(e,n)]&1?-1:1,u.s=1,en=!1,i=t.times(Im(u,r+f)),en=!0,i=b5(i),i.s=o,i};Re.toPrecision=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?(n=Mn(i),r=rc(i,n<=o.toExpNeg||n>=o.toExpPos)):(os(t,1,Ud),e===void 0?e=o.rounding:os(e,0,8),i=Vt(new o(i),t,e),n=Mn(i),r=rc(i,t<=n||n<=o.toExpNeg,t)),r};Re.toSignificantDigits=Re.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(os(t,1,Ud),e===void 0?e=r.rounding:os(e,0,8)),Vt(new r(n),t,e)};Re.toString=Re.valueOf=Re.val=Re.toJSON=Re[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Mn(t),n=t.constructor;return rc(t,e<=n.toExpNeg||e>=n.toExpPos)};function w5(t,e){var n,r,i,o,s,u,c,f,h=t.constructor,y=h.precision;if(!t.s||!e.s)return e.s||(e=new h(t)),en?Vt(e,y):e;if(c=t.d,f=e.d,s=t.e,i=e.e,c=c.slice(),o=s-i,o){for(o<0?(r=c,o=-o,u=f.length):(r=f,i=s,u=c.length),s=Math.ceil(y/zt),u=s>u?s+1:u+1,o>u&&(o=u,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for(u=c.length,o=f.length,u-o<0&&(o=u,r=f,f=c,c=r),n=0;o;)n=(c[--o]=c[o]+f[o]+n)/Yn|0,c[o]%=Yn;for(n&&(c.unshift(n),++i),u=c.length;c[--u]==0;)c.pop();return e.d=c,e.e=i,en?Vt(e,y):e}function os(t,e,n){if(t!==~~t||t<e||t>n)throw Error($u+t)}function Yo(t){var e,n,r,i=t.length-1,o="",s=t[0];if(i>0){for(o+=s,e=1;e<i;e++)r=t[e]+"",n=zt-r.length,n&&(o+=Ja(n)),o+=r;s=t[e],r=s+"",n=zt-r.length,n&&(o+=Ja(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return o+s}var Hs=(function(){function t(r,i){var o,s=0,u=r.length;for(r=r.slice();u--;)o=r[u]*i+s,r[u]=o%Yn|0,s=o/Yn|0;return s&&r.unshift(s),r}function e(r,i,o,s){var u,c;if(o!=s)c=o>s?1:-1;else for(u=c=0;u<o;u++)if(r[u]!=i[u]){c=r[u]>i[u]?1:-1;break}return c}function n(r,i,o){for(var s=0;o--;)r[o]-=s,s=r[o]<i[o]?1:0,r[o]=s*Yn+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,s){var u,c,f,h,y,v,E,b,S,A,R,D,M,U,q,z,k,V,N=r.constructor,$=r.s==i.s?1:-1,F=r.d,G=i.d;if(!r.s)return new N(r);if(!i.s)throw Error(eo+"Division by zero");for(c=r.e-i.e,k=G.length,q=F.length,E=new N($),b=E.d=[],f=0;G[f]==(F[f]||0);)++f;if(G[f]>(F[f]||0)&&--c,o==null?D=o=N.precision:s?D=o+(Mn(r)-Mn(i))+1:D=o,D<0)return new N(0);if(D=D/zt+2|0,f=0,k==1)for(h=0,G=G[0],D++;(f<q||h)&&D--;f++)M=h*Yn+(F[f]||0),b[f]=M/G|0,h=M%G|0;else{for(h=Yn/(G[0]+1)|0,h>1&&(G=t(G,h),F=t(F,h),k=G.length,q=F.length),U=k,S=F.slice(0,k),A=S.length;A<k;)S[A++]=0;V=G.slice(),V.unshift(0),z=G[0],G[1]>=Yn/2&&++z;do h=0,u=e(G,S,k,A),u<0?(R=S[0],k!=A&&(R=R*Yn+(S[1]||0)),h=R/z|0,h>1?(h>=Yn&&(h=Yn-1),y=t(G,h),v=y.length,A=S.length,u=e(y,S,v,A),u==1&&(h--,n(y,k<v?V:G,v))):(h==0&&(u=h=1),y=G.slice()),v=y.length,v<A&&y.unshift(0),n(S,y,A),u==-1&&(A=S.length,u=e(G,S,k,A),u<1&&(h++,n(S,k<A?V:G,A))),A=S.length):u===0&&(h++,S=[0]),b[f++]=h,u&&S[0]?S[A++]=F[U]||0:(S=[F[U]],A=1);while((U++<q||S[0]!==void 0)&&D--)}return b[0]||b.shift(),E.e=c,Vt(E,s?o+Mn(E)+1:o)}})();function b5(t,e){var n,r,i,o,s,u,c=0,f=0,h=t.constructor,y=h.precision;if(Mn(t)>16)throw Error(wR+Mn(t));if(!t.s)return new h(mi);for(en=!1,u=y,s=new h(.03125);t.abs().gte(.1);)t=t.times(s),f+=5;for(r=Math.log(wu(2,f))/Math.LN10*2+5|0,u+=r,n=i=o=new h(mi),h.precision=u;;){if(i=Vt(i.times(t),u),n=n.times(++c),s=o.plus(Hs(i,n,u)),Yo(s.d).slice(0,u)===Yo(o.d).slice(0,u)){for(;f--;)o=Vt(o.times(o),u);return h.precision=y,e==null?(en=!0,Vt(o,y)):o}o=s}}function Mn(t){for(var e=t.e*zt,n=t.d[0];n>=10;n/=10)e++;return e}function dS(t,e,n){if(e>t.LN10.sd())throw en=!0,n&&(t.precision=n),Error(eo+"LN10 precision limit exceeded");return Vt(new t(t.LN10),e)}function Ja(t){for(var e="";t--;)e+="0";return e}function Im(t,e){var n,r,i,o,s,u,c,f,h,y=1,v=10,E=t,b=E.d,S=E.constructor,A=S.precision;if(E.s<1)throw Error(eo+(E.s?"NaN":"-Infinity"));if(E.eq(mi))return new S(0);if(e==null?(en=!1,f=A):f=e,E.eq(10))return e==null&&(en=!0),dS(S,f);if(f+=v,S.precision=f,n=Yo(b),r=n.charAt(0),o=Mn(E),Math.abs(o)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)E=E.times(t),n=Yo(E.d),r=n.charAt(0),y++;o=Mn(E),r>1?(E=new S("0."+n),o++):E=new S(r+"."+n.slice(1))}else return c=dS(S,f+2,A).times(o+""),E=Im(new S(r+"."+n.slice(1)),f-v).plus(c),S.precision=A,e==null?(en=!0,Vt(E,A)):E;for(u=s=E=Hs(E.minus(mi),E.plus(mi),f),h=Vt(E.times(E),f),i=3;;){if(s=Vt(s.times(h),f),c=u.plus(Hs(s,new S(i),f)),Yo(c.d).slice(0,f)===Yo(u.d).slice(0,f))return u=u.times(2),o!==0&&(u=u.plus(dS(S,f+2,A).times(o+""))),u=Hs(u,new S(y),f),S.precision=A,e==null?(en=!0,Vt(u,A)):u;u=c,i+=2}}function MV(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Fd(n/zt),t.d=[],r=(n+1)%zt,n<0&&(r+=zt),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=zt;r<i;)t.d.push(+e.slice(r,r+=zt));e=e.slice(r),r=zt-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),en&&(t.e>U_||t.e<-U_))throw Error(wR+n)}else t.s=0,t.e=0,t.d=[0];return t}function Vt(t,e,n){var r,i,o,s,u,c,f,h,y=t.d;for(s=1,o=y[0];o>=10;o/=10)s++;if(r=e-s,r<0)r+=zt,i=e,f=y[h=0];else{if(h=Math.ceil((r+1)/zt),o=y.length,h>=o)return t;for(f=o=y[h],s=1;o>=10;o/=10)s++;r%=zt,i=r-zt+s}if(n!==void 0&&(o=wu(10,s-i-1),u=f/o%10|0,c=e<0||y[h+1]!==void 0||f%o,c=n<4?(u||c)&&(n==0||n==(t.s<0?3:2)):u>5||u==5&&(n==4||c||n==6&&(r>0?i>0?f/wu(10,s-i):0:y[h-1])%10&1||n==(t.s<0?8:7))),e<1||!y[0])return c?(o=Mn(t),y.length=1,e=e-o-1,y[0]=wu(10,(zt-e%zt)%zt),t.e=Fd(-e/zt)||0):(y.length=1,y[0]=t.e=t.s=0),t;if(r==0?(y.length=h,o=1,h--):(y.length=h+1,o=wu(10,zt-r),y[h]=i>0?(f/wu(10,s-i)%wu(10,i)|0)*o:0),c)for(;;)if(h==0){(y[0]+=o)==Yn&&(y[0]=1,++t.e);break}else{if(y[h]+=o,y[h]!=Yn)break;y[h--]=0,o=1}for(r=y.length;y[--r]===0;)y.pop();if(en&&(t.e>U_||t.e<-U_))throw Error(wR+Mn(t));return t}function S5(t,e){var n,r,i,o,s,u,c,f,h,y,v=t.constructor,E=v.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new v(t),en?Vt(e,E):e;if(c=t.d,y=e.d,r=e.e,f=t.e,c=c.slice(),s=f-r,s){for(h=s<0,h?(n=c,s=-s,u=y.length):(n=y,r=f,u=c.length),i=Math.max(Math.ceil(E/zt),u)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=c.length,u=y.length,h=i<u,h&&(u=i),i=0;i<u;i++)if(c[i]!=y[i]){h=c[i]<y[i];break}s=0}for(h&&(n=c,c=y,y=n,e.s=-e.s),u=c.length,i=y.length-u;i>0;--i)c[u++]=0;for(i=y.length;i>s;){if(c[--i]<y[i]){for(o=i;o&&c[--o]===0;)c[o]=Yn-1;--c[o],c[i]+=Yn}c[i]-=y[i]}for(;c[--u]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,en?Vt(e,E):e):new v(0)}function rc(t,e,n){var r,i=Mn(t),o=Yo(t.d),s=o.length;return e?(n&&(r=n-s)>0?o=o.charAt(0)+"."+o.slice(1)+Ja(r):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+Ja(-i-1)+o,n&&(r=n-s)>0&&(o+=Ja(r))):i>=s?(o+=Ja(i+1-s),n&&(r=n-i-1)>0&&(o=o+"."+Ja(r))):((r=i+1)<s&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(o+="."),o+=Ja(r))),t.s<0?"-"+o:o}function DV(t,e){if(t.length>e)return t.length=e,!0}function A5(t){var e,n,r;function i(o){var s=this;if(!(s instanceof i))return new i(o);if(s.constructor=i,o instanceof i){s.s=o.s,s.e=o.e,s.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error($u+o);if(o>0)s.s=1;else if(o<0)o=-o,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(o===~~o&&o<1e7){s.e=0,s.d=[o];return}return MV(s,o.toString())}else if(typeof o!="string")throw Error($u+o);if(o.charCodeAt(0)===45?(o=o.slice(1),s.s=-1):s.s=1,ife.test(o))MV(s,o);else throw Error($u+o)}if(i.prototype=Re,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=A5,i.config=i.set=ofe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function ofe(t){if(!t||typeof t!="object")throw Error(eo+"Object expected");var e,n,r,i=["precision",1,Ud,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Fd(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error($u+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error($u+n+": "+r);return this}var bR=A5(rfe);mi=new bR(1);const At=bR;var sfe=t=>t,C5={},I5=t=>t===C5,NV=t=>function e(){return arguments.length===0||arguments.length===1&&I5(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},x5=(t,e)=>t===1?e:NV(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=r.filter(s=>s!==C5).length;return o>=t?e(...r):x5(t-o,NV(function(){for(var s=arguments.length,u=new Array(s),c=0;c<s;c++)u[c]=arguments[c];var f=r.map(h=>I5(h)?u.shift():h);return e(...f,...u)}))}),cT=t=>x5(t.length,t),tC=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},afe=cT((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),lfe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return sfe;var i=n.reverse(),o=i[0],s=i.slice(1);return function(){return s.reduce((u,c)=>c(u),o(...arguments))}},nC=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join(""),R5=t=>{var e=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e&&i.every((s,u)=>{var c;return s===((c=e)===null||c===void 0?void 0:c[u])})||(e=i,n=t(...i)),n}};function P5(t){var e;return t===0?e=1:e=Math.floor(new At(t).abs().log(10).toNumber())+1,e}function M5(t,e,n){for(var r=new At(t),i=0,o=[];r.lt(e)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o}cT((t,e,n)=>{var r=+t,i=+e;return r+n*(i-r)});cT((t,e,n)=>{var r=e-+t;return r=r||1/0,(n-t)/r});cT((t,e,n)=>{var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});var D5=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},N5=(t,e,n)=>{if(t.lte(0))return new At(0);var r=P5(t.toNumber()),i=new At(10).pow(r),o=t.div(i),s=r!==1?.05:.1,u=new At(Math.ceil(o.div(s).toNumber())).add(n).mul(s),c=u.mul(i);return e?new At(c.toNumber()):new At(Math.ceil(c.toNumber()))},ufe=(t,e,n)=>{var r=new At(1),i=new At(t);if(!i.isint()&&n){var o=Math.abs(t);o<1?(r=new At(10).pow(P5(t)-1),i=new At(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new At(Math.floor(t)))}else t===0?i=new At(Math.floor((e-1)/2)):n||(i=new At(Math.floor(t)));var s=Math.floor((e-1)/2),u=lfe(afe(c=>i.add(new At(c-s).mul(r)).toNumber()),tC);return u(0,e)},k5=function(e,n,r,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new At(0),tickMin:new At(0),tickMax:new At(0)};var s=N5(new At(n).sub(e).div(r-1),i,o),u;e<=0&&n>=0?u=new At(0):(u=new At(e).add(n).div(2),u=u.sub(new At(u).mod(s)));var c=Math.ceil(u.sub(e).div(s).toNumber()),f=Math.ceil(new At(n).sub(u).div(s).toNumber()),h=c+f+1;return h>r?k5(e,n,r,i,o+1):(h<r&&(f=n>0?f+(r-h):f,c=n>0?c:c+(r-h)),{step:s,tickMin:u.sub(new At(c).mul(s)),tickMax:u.add(new At(f).mul(s))})};function cfe(t){var[e,n]=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(r,2),[s,u]=D5([e,n]);if(s===-1/0||u===1/0){var c=u===1/0?[s,...tC(0,r-1).map(()=>1/0)]:[...tC(0,r-1).map(()=>-1/0),u];return e>n?nC(c):c}if(s===u)return ufe(s,r,i);var{step:f,tickMin:h,tickMax:y}=k5(s,u,o,i,0),v=M5(h,y.add(new At(.1).mul(f)),f);return e>n?nC(v):v}function ffe(t,e){var[n,r]=t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,s]=D5([n,r]);if(o===-1/0||s===1/0)return[n,r];if(o===s)return[o];var u=Math.max(e,2),c=N5(new At(s).sub(o).div(u-1),i,0),f=[...M5(new At(o),new At(s),c),s];return i===!1&&(f=f.map(h=>Math.round(h))),n>r?nC(f):f}var dfe=R5(cfe),hfe=R5(ffe),O5=t=>t.rootProps.maxBarSize,pfe=t=>t.rootProps.barGap,V5=t=>t.rootProps.barCategoryGap,mfe=t=>t.rootProps.barSize,fT=t=>t.rootProps.stackOffset,SR=t=>t.options.chartName,AR=t=>t.rootProps.syncId,L5=t=>t.rootProps.syncMethod,CR=t=>t.options.eventEmitter,ks={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},hi={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},dT=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},gfe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:ks.angleAxisId,includeHidden:!1,name:void 0,reversed:ks.reversed,scale:ks.scale,tick:ks.tick,tickCount:void 0,ticks:void 0,type:ks.type,unit:void 0},yfe={allowDataOverflow:hi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:hi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:hi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:hi.scale,tick:hi.tick,tickCount:hi.tickCount,ticks:void 0,type:hi.type,unit:void 0},vfe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:ks.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ks.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ks.scale,tick:ks.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},_fe={allowDataOverflow:hi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:hi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:hi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:hi.scale,tick:hi.tick,tickCount:hi.tickCount,ticks:void 0,type:"category",unit:void 0},IR=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?vfe:gfe,xR=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?_fe:yfe,hT=t=>t.polarOptions,RR=se([ca,fa,nr],Ese),U5=se([hT,RR],(t,e)=>{if(t!=null)return yo(t.innerRadius,e,0)}),F5=se([hT,RR],(t,e)=>{if(t!=null)return yo(t.outerRadius,e,e*.8)}),Tfe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},B5=se([hT],Tfe);se([IR,B5],dT);var q5=se([RR,U5,F5],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});se([xR,q5],dT);var $5=se([xt,hT,U5,F5,ca,fa],(t,e,n,r,i,o)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:s,cy:u,startAngle:c,endAngle:f}=e;return{cx:yo(s,i,i/2),cy:yo(u,o,o/2),innerRadius:n,outerRadius:r,startAngle:c,endAngle:f,clockWise:!1}}}),Dn=(t,e)=>e,pT=(t,e,n)=>n;function PR(t){return t==null?void 0:t.id}var $n=t=>{var e=xt(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Bd=t=>t.tooltip.settings.axisId,ir=t=>{var e=$n(t),n=Bd(t);return lg(t,e,n)},z5=se([ir],t=>t==null?void 0:t.dataKey);function H5(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:o}=n,s=new Map;return t.forEach(u=>{var c,f=(c=u.data)!==null&&c!==void 0?c:r;if(!(f==null||f.length===0)){var h=PR(u);f.forEach((y,v)=>{var E=o==null||i?v:String(qr(y,o,null)),b=qr(y,u.dataKey,0),S;s.has(E)?S=s.get(E):S={},Object.assign(S,{[h]:b}),s.set(E,S)})}}),Array.from(s.values())}function mT(t){return t.stackId!=null&&t.dataKey!=null}function kV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function F_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kV(Object(n),!0).forEach(function(r){Efe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Efe(t,e,n){return(e=wfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wfe(t){var e=bfe(t,"string");return typeof e=="symbol"?e:e+""}function bfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var rC=[0,"auto"],ci={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},G5=(t,e)=>t.cartesianAxis.xAxis[e],Vl=(t,e)=>{var n=G5(t,e);return n??ci},fi={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:rC,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:ng},K5=(t,e)=>t.cartesianAxis.yAxis[e],Ll=(t,e)=>{var n=K5(t,e);return n??fi},Sfe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},MR=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??Sfe},Zr=(t,e,n)=>{switch(e){case"xAxis":return Vl(t,n);case"yAxis":return Ll(t,n);case"zAxis":return MR(t,n);case"angleAxis":return IR(t,n);case"radiusAxis":return xR(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Afe=(t,e,n)=>{switch(e){case"xAxis":return Vl(t,n);case"yAxis":return Ll(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},lg=(t,e,n)=>{switch(e){case"xAxis":return Vl(t,n);case"yAxis":return Ll(t,n);case"angleAxis":return IR(t,n);case"radiusAxis":return xR(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},j5=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function W5(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var DR=t=>t.graphicalItems.cartesianItems,Cfe=se([Dn,pT],W5),Y5=(t,e,n)=>t.filter(n).filter(r=>(e==null?void 0:e.includeHidden)===!0?!0:!r.hide),ug=se([DR,Zr,Cfe],Y5),J5=se([ug],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(mT)),Q5=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),X5=se([ug],Q5),Z5=t=>t.map(e=>e.data).filter(Boolean).flat(1),Ife=se([ug],Z5),ez=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},NR=se([Ife,ER],ez),tz=(t,e,n)=>(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:qr(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:qr(i,r)}))):t.map(r=>({value:r})),gT=se([NR,Zr,ug],tz);function nz(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function mc(t){return t.filter(e=>is(e)||e instanceof Date).map(Number).filter(e=>Xi(e)===!1)}function xfe(t,e,n){return!n||typeof e!="number"||Xi(e)?[]:n.length?mc(n.flatMap(r=>{var i=qr(t,r.dataKey),o,s;if(Array.isArray(i)?[o,s]=i:o=s=i,!(!Si(o)||!Si(s)))return[e-o,e+s]})):[]}var Rfe=se([J5,ER,ir],H5),rz=(t,e,n)=>{var r={},i=e.reduce((o,s)=>(s.stackId==null||(o[s.stackId]==null&&(o[s.stackId]=[]),o[s.stackId].push(s)),o),r);return Object.fromEntries(Object.entries(i).map(o=>{var[s,u]=o,c=u.map(PR);return[s,{stackedData:Lse(t,c,n),graphicalItems:u}]}))},iC=se([Rfe,J5,fT],rz),iz=(t,e,n)=>{var{dataStartIndex:r,dataEndIndex:i}=e;if(n!=="zAxis"){var o=$se(t,r,i);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},Pfe=se([iC,Ol,Dn],iz),oz=(t,e,n,r,i)=>n.length>0?t.flatMap(o=>n.flatMap(s=>{var u,c,f=(u=r[s.id])===null||u===void 0?void 0:u.filter(y=>nz(i,y)),h=qr(o,(c=e.dataKey)!==null&&c!==void 0?c:s.dataKey);return{value:h,errorDomain:xfe(o,h,f)}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(o=>({value:qr(o,e.dataKey),errorDomain:[]})):t.map(o=>({value:o,errorDomain:[]})),yT=t=>t.errorBars,sz=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>nz(n,r));se([X5,yT,Dn],sz);var Mfe=se([NR,Zr,X5,yT,Dn],oz);function Dfe(t){var{value:e}=t;if(is(e)||e instanceof Date)return e}var OV=t=>{var e=t.flatMap(r=>[r.value,r.errorDomain]).flat(1),n=mc(e);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Nfe=(t,e,n)=>{var r=t.map(Dfe).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&b3(r))?B$(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},kR=t=>{var e;if(t==null||!("domain"in t))return rC;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var n=mc(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:rC},B_=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var o=i.flat(),s=Math.min(...o),u=Math.max(...o);return[s,u]}},az=t=>t.referenceElements.dots,qd=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),kfe=se([az,Dn,pT],qd),lz=t=>t.referenceElements.areas,Ofe=se([lz,Dn,pT],qd),uz=t=>t.referenceElements.lines,Vfe=se([uz,Dn,pT],qd),cz=(t,e)=>{var n=mc(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Lfe=se(kfe,Dn,cz),fz=(t,e)=>{var n=mc(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Ufe=se([Ofe,Dn],fz),dz=(t,e)=>{var n=mc(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Ffe=se(Vfe,Dn,dz),Bfe=se(Lfe,Ffe,Ufe,(t,e,n)=>B_(t,n,e)),qfe=se([Zr],kR),hz=(t,e,n,r,i,o,s)=>{var u=tfe(e,t.allowDataOverflow);if(u!=null)return u;var c=o==="vertical"&&s==="xAxis"||o==="horizontal"&&s==="yAxis",f=c?B_(n,i,OV(r)):B_(i,OV(r));return nfe(e,f,t.allowDataOverflow)},$fe=se([Zr,qfe,Pfe,Mfe,Bfe,xt,Dn],hz),zfe=[0,1],pz=(t,e,n,r,i,o,s)=>{if(!((t==null||n==null||n.length===0)&&s===void 0)){var{dataKey:u,type:c}=t,f=dc(e,o);return f&&u==null?B$(0,n.length):c==="category"?Nfe(r,t,f):i==="expand"?zfe:s}},OR=se([Zr,xt,NR,gT,fT,Dn,$fe],pz),mz=(t,e,n,r,i)=>{if(t!=null){var{scale:o,type:s}=t;if(o==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":s==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":s==="category"?"band":"linear";if(typeof o=="string"){var u="scale".concat(Zm(o));return u in xp?u:"point"}}},cg=se([Zr,xt,j5,SR,Dn],mz);function Hfe(t){if(t!=null){if(t in xp)return xp[t]();var e="scale".concat(Zm(t));if(e in xp)return xp[e]()}}function VR(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var i=Hfe(e);if(i!=null){var o=i.domain(n).range(r);return Dse(o),o}}}var gz=(t,e,n)=>{var r=kR(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&md(t))return dfe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&md(t))return hfe(t,e.tickCount,e.allowDecimals)}},LR=se([OR,lg,cg],gz),yz=(t,e,n,r)=>{if(r!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&md(e)&&Array.isArray(n)&&n.length>0){var i=e[0],o=n[0],s=e[1],u=n[n.length-1];return[Math.min(i,o),Math.max(s,u)]}return e},Gfe=se([Zr,OR,LR,Dn],yz),Kfe=se(gT,Zr,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(mc(t.map(u=>u.value))).sort((u,c)=>u-c);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var o=0;o<r.length-1;o++){var s=r[o+1]-r[o];n=Math.min(n,s)}return n/i}}),vz=se(Kfe,xt,V5,nr,(t,e,n,r)=>r,(t,e,n,r,i)=>{if(!Si(t))return 0;var o=e==="vertical"?r.height:r.width;if(i==="gap")return t*o/2;if(i==="no-gap"){var s=yo(n,t*o),u=t*o/2;return u-s-(u-s)/o*s}return 0}),jfe=(t,e)=>{var n=Vl(t,e);return n==null||typeof n.padding!="string"?0:vz(t,"xAxis",e,n.padding)},Wfe=(t,e)=>{var n=Ll(t,e);return n==null||typeof n.padding!="string"?0:vz(t,"yAxis",e,n.padding)},Yfe=se(Vl,jfe,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),Jfe=se(Ll,Wfe,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),Qfe=se([nr,Yfe,rT,nT,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:o}=r;return i?[o.left,n.width-o.right]:[t.left+e.left,t.left+t.width-e.right]}),Xfe=se([nr,xt,Jfe,rT,nT,(t,e,n)=>n],(t,e,n,r,i,o)=>{var{padding:s}=i;return o?[r.height-s.bottom,s.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),fg=(t,e,n,r)=>{var i;switch(e){case"xAxis":return Qfe(t,n,r);case"yAxis":return Xfe(t,n,r);case"zAxis":return(i=MR(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return B5(t);case"radiusAxis":return q5(t,n);default:return}},_z=se([Zr,fg],dT),$d=se([Zr,cg,Gfe,_z],VR);se([ug,yT,Dn],sz);function Tz(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var vT=(t,e)=>e,_T=(t,e,n)=>n,Zfe=se(eT,vT,_T,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(Tz)),ede=se(tT,vT,_T,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(Tz)),Ez=(t,e)=>({width:t.width,height:e.height}),tde=(t,e)=>{var n=typeof e.width=="number"?e.width:ng;return{width:n,height:t.height}},wz=se(nr,Vl,Ez),nde=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},rde=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},ide=se(fa,nr,Zfe,vT,_T,(t,e,n,r,i)=>{var o={},s;return n.forEach(u=>{var c=Ez(e,u);s==null&&(s=nde(e,r,t));var f=r==="top"&&!i||r==="bottom"&&i;o[u.id]=s-Number(f)*c.height,s+=(f?-1:1)*c.height}),o}),ode=se(ca,nr,ede,vT,_T,(t,e,n,r,i)=>{var o={},s;return n.forEach(u=>{var c=tde(e,u);s==null&&(s=rde(e,r,t));var f=r==="left"&&!i||r==="right"&&i;o[u.id]=s-Number(f)*c.width,s+=(f?-1:1)*c.width}),o}),sde=(t,e)=>{var n=nr(t),r=Vl(t,e);if(r!=null){var i=ide(t,r.orientation,r.mirror),o=i[e];return o==null?{x:n.left,y:0}:{x:n.left,y:o}}},ade=(t,e)=>{var n=nr(t),r=Ll(t,e);if(r!=null){var i=ode(t,r.orientation,r.mirror),o=i[e];return o==null?{x:0,y:n.top}:{x:o,y:n.top}}},bz=se(nr,Ll,(t,e)=>{var n=typeof e.width=="number"?e.width:ng;return{width:n,height:t.height}}),VV=(t,e,n)=>{switch(e){case"xAxis":return wz(t,n).width;case"yAxis":return bz(t,n).height;default:return}},Sz=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:o,dataKey:s}=n,u=dc(t,r),c=e.map(f=>f.value);if(s&&u&&o==="category"&&i&&b3(c))return c}},UR=se([xt,gT,Zr,Dn],Sz),Az=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:o}=n,s=dc(t,r);if(s&&(i==="number"||o!=="auto"))return e.map(u=>u.value)}},FR=se([xt,gT,lg,Dn],Az);se([xt,Afe,cg,$d,UR,FR,fg,LR,Dn],(t,e,n,r,i,o,s,u,c)=>{if(e==null)return null;var f=dc(t,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:o,duplicateDomain:i,isCategorical:f,niceTicks:u,range:s,realScaleType:n,scale:r}});var lde=(t,e,n,r,i,o,s,u,c)=>{if(!(e==null||r==null)){var f=dc(t,c),{type:h,ticks:y,tickCount:v}=e,E=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,b=h==="category"&&r.bandwidth?r.bandwidth()/E:0;b=c==="angleAxis"&&o!=null&&o.length>=2?vi(o[0]-o[1])*2*b:b;var S=y||i;if(S){var A=S.map((R,D)=>{var M=s?s.indexOf(R):R;return{index:D,coordinate:r(M)+b,value:R,offset:b}});return A.filter(R=>!Xi(R.coordinate))}return f&&u?u.map((R,D)=>({coordinate:r(R)+b,value:R,index:D,offset:b})):r.ticks?r.ticks(v).map(R=>({coordinate:r(R)+b,value:R,offset:b})):r.domain().map((R,D)=>({coordinate:r(R)+b,value:s?s[R]:R,index:D,offset:b}))}},Cz=se([xt,lg,cg,$d,LR,fg,UR,FR,Dn],lde),ude=(t,e,n,r,i,o,s)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var u=dc(t,s),{tickCount:c}=e,f=0;return f=s==="angleAxis"&&(r==null?void 0:r.length)>=2?vi(r[0]-r[1])*2*f:f,u&&o?o.map((h,y)=>({coordinate:n(h)+f,value:h,index:y,offset:f})):n.ticks?n.ticks(c).map(h=>({coordinate:n(h)+f,value:h,offset:f})):n.domain().map((h,y)=>({coordinate:n(h)+f,value:i?i[h]:h,index:y,offset:f}))}},gd=se([xt,lg,$d,fg,UR,FR,Dn],ude),yd=se(Zr,$d,(t,e)=>{if(!(t==null||e==null))return F_(F_({},t),{},{scale:e})}),cde=se([Zr,cg,OR,_z],VR);se((t,e,n)=>MR(t,n),cde,(t,e)=>{if(!(t==null||e==null))return F_(F_({},t),{},{scale:e})});var fde=se([xt,eT,tT],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Iz=t=>t.options.defaultTooltipEventType,xz=t=>t.options.validateTooltipEventTypes;function Rz(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function BR(t,e){var n=Iz(t),r=xz(t);return Rz(e,n,r)}function dde(t){return $e(e=>BR(e,t))}var Pz=(t,e)=>{var n,r=Number(e);if(!(Xi(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},hde=t=>t.tooltip.settings,Za={active:!1,index:null,dataKey:void 0,coordinate:void 0},pde={itemInteraction:{click:Za,hover:Za},axisInteraction:{click:Za,hover:Za},keyboardInteraction:Za,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Mz=Ai({name:"tooltip",initialState:pde,reducers:{addTooltipEntrySettings(t,e){t.tooltipItemPayloads.push(e.payload)},removeTooltipEntrySettings(t,e){var n=zs(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:mde,removeTooltipEntrySettings:gde,setTooltipSettingsState:yde,setActiveMouseOverItemIndex:Dz,mouseLeaveItem:vde,mouseLeaveChart:Nz,setActiveClickItemIndex:_de,setMouseOverAxisIndex:kz,setMouseClickAxisIndex:Tde,setSyncInteraction:oC,setKeyboardInteraction:sC}=Mz.actions,Ede=Mz.reducer;function LV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LV(Object(n),!0).forEach(function(r){wde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wde(t,e,n){return(e=bde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bde(t){var e=Sde(t,"string");return typeof e=="symbol"?e:e+""}function Sde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ade(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function Cde(t){return t.index!=null}var Oz=(t,e,n,r)=>{if(e==null)return Za;var i=Ade(t,e,n);if(i==null)return Za;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var o=t.settings.active===!0;if(Cde(i)){if(o)return lv(lv({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return lv(lv({},Za),{},{coordinate:i.coordinate})},qR=(t,e)=>{var n=t==null?void 0:t.index;if(n==null)return null;var r=Number(n);if(!Si(r))return n;var i=0,o=1/0;return e.length>0&&(o=e.length-1),String(Math.max(i,Math.min(r,o)))},Vz=(t,e,n,r,i,o,s,u)=>{if(!(o==null||u==null)){var c=s[0],f=c==null?void 0:u(c.positions,o);if(f!=null)return f;var h=i==null?void 0:i[Number(o)];if(h)switch(n){case"horizontal":return{x:h.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:h.coordinate}}}},Lz=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=t.itemInteraction.hover.dataKey:i=t.itemInteraction.click.dataKey,i==null&&r!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(o=>{var s;return((s=o.settings)===null||s===void 0?void 0:s.dataKey)===i})},dg=t=>t.options.tooltipPayloadSearcher,zd=t=>t.tooltip;function UV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function FV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UV(Object(n),!0).forEach(function(r){Ide(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ide(t,e,n){return(e=xde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xde(t){var e=Rde(t,"string");return typeof e=="symbol"?e:e+""}function Rde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Pde(t,e){return t??e}var Uz=(t,e,n,r,i,o,s)=>{if(!(e==null||o==null)){var{chartData:u,computedData:c,dataStartIndex:f,dataEndIndex:h}=n,y=[];return t.reduce((v,E)=>{var b,{dataDefinedOnItem:S,settings:A}=E,R=Pde(S,u),D=Array.isArray(R)?I$(R,f,h):R,M=(b=A==null?void 0:A.dataKey)!==null&&b!==void 0?b:r,U=A==null?void 0:A.nameKey,q;if(r&&Array.isArray(D)&&!Array.isArray(D[0])&&s==="axis"?q=wre(D,r,i):q=o(D,e,c,U),Array.isArray(q))q.forEach(k=>{var V=FV(FV({},A),{},{name:k.name,unit:k.unit,color:void 0,fill:void 0});v.push(S2({tooltipEntrySettings:V,dataKey:k.dataKey,payload:k.payload,value:qr(k.payload,k.dataKey),name:k.name}))});else{var z;v.push(S2({tooltipEntrySettings:A,dataKey:M,payload:q,value:qr(q,M),name:(z=qr(q,U))!==null&&z!==void 0?z:A==null?void 0:A.name}))}return v},y)}},$R=se([ir,xt,j5,SR,$n],mz),Mde=se([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),Dde=se([$n,Bd],W5),hg=se([Mde,ir,Dde],Y5),Nde=se([hg],t=>t.filter(mT)),kde=se([hg],Z5),Hd=se([kde,Ol],ez),Ode=se([Nde,Ol,ir],H5),zR=se([Hd,ir,hg],tz),Vde=se([ir],kR),Lde=se([hg],t=>t.filter(mT)),Ude=se([Ode,Lde,fT],rz),Fde=se([Ude,Ol,$n],iz),Bde=se([hg],Q5),qde=se([Hd,ir,Bde,yT,$n],oz),$de=se([az,$n,Bd],qd),zde=se([$de,$n],cz),Hde=se([lz,$n,Bd],qd),Gde=se([Hde,$n],fz),Kde=se([uz,$n,Bd],qd),jde=se([Kde,$n],dz),Wde=se([zde,jde,Gde],B_),Yde=se([ir,Vde,Fde,qde,Wde,xt,$n],hz),Fz=se([ir,xt,Hd,zR,fT,$n,Yde],pz),Jde=se([Fz,ir,$R],gz),Qde=se([ir,Fz,Jde,$n],yz),Bz=t=>{var e=$n(t),n=Bd(t),r=!1;return fg(t,e,n,r)},qz=se([ir,Bz],dT),$z=se([ir,$R,Qde,qz],VR),Xde=se([xt,zR,ir,$n],Sz),Zde=se([xt,zR,ir,$n],Az),ehe=(t,e,n,r,i,o,s,u)=>{if(e){var{type:c}=e,f=dc(t,u);if(r){var h=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,y=c==="category"&&r.bandwidth?r.bandwidth()/h:0;return y=u==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?vi(i[0]-i[1])*2*y:y,f&&s?s.map((v,E)=>({coordinate:r(v)+y,value:v,index:E,offset:y})):r.domain().map((v,E)=>({coordinate:r(v)+y,value:o?o[v]:v,index:E,offset:y}))}}},ha=se([xt,ir,$R,$z,Bz,Xde,Zde,$n],ehe),HR=se([Iz,xz,hde],(t,e,n)=>Rz(n.shared,t,e)),zz=t=>t.tooltip.settings.trigger,GR=t=>t.tooltip.settings.defaultIndex,TT=se([zd,HR,zz,GR],Oz),vd=se([TT,Hd],qR),Hz=se([ha,vd],Pz),Gz=se([TT],t=>{if(t)return t.dataKey}),Kz=se([zd,HR,zz,GR],Lz),the=se([ca,fa,xt,nr,ha,GR,Kz,dg],Vz),nhe=se([TT,the],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),rhe=se([TT],t=>t.active),ihe=se([Kz,vd,Ol,z5,Hz,dg,HR],Uz);se([ihe],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function BV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BV(Object(n),!0).forEach(function(r){ohe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ohe(t,e,n){return(e=she(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function she(t){var e=ahe(t,"string");return typeof e=="symbol"?e:e+""}function ahe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lhe=()=>$e(ir),uhe=()=>{var t=lhe(),e=$e(ha),n=$e($z);return Kx(qV(qV({},t),{},{scale:n}),e)},che=()=>$e(SR),KR=(t,e)=>e,jz=(t,e,n)=>n,jR=(t,e,n,r)=>r,fhe=se(ha,t=>W0(t,e=>e.coordinate)),WR=se([zd,KR,jz,jR],Oz),Wz=se([WR,Hd],qR),dhe=(t,e,n)=>{if(e!=null){var r=zd(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},Yz=se([zd,KR,jz,jR],Lz),q_=se([ca,fa,xt,nr,ha,jR,Yz,dg],Vz),hhe=se([WR,q_],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),Jz=se(ha,Wz,Pz),phe=se([Yz,Wz,Ol,z5,Jz,dg,KR],Uz),mhe=se([WR],t=>({isActive:t.active,activeIndex:t.index})),ghe=(t,e,n,r,i,o,s,u)=>{if(!(!t||!e||!r||!i||!o)){var c=zse(t.chartX,t.chartY,e,n,u);if(c){var f=Gse(c,e),h=Pse(f,s,o,r,i),y=Hse(e,o,h,c);return{activeIndex:String(h),activeCoordinate:y}}}};function aC(){return aC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aC.apply(null,arguments)}function $V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function uv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$V(Object(n),!0).forEach(function(r){yhe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$V(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yhe(t,e,n){return(e=vhe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vhe(t){var e=_he(t,"string");return typeof e=="symbol"?e:e+""}function _he(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function The(t){var{coordinate:e,payload:n,index:r,offset:i,tooltipAxisBandSize:o,layout:s,cursor:u,tooltipEventType:c,chartName:f}=t,h=e,y=n,v=r;if(!u||!h||f!=="ScatterChart"&&c!=="axis")return null;var E,b;if(f==="ScatterChart")E=h,b=Bae;else if(f==="BarChart")E=qae(s,h,i,o),b=V$;else if(s==="radial"){var{cx:S,cy:A,radius:R,startAngle:D,endAngle:M}=L$(h);E={cx:S,cy:A,startAngle:D,endAngle:M,innerRadius:R,outerRadius:R},b=F$}else E={points:Tle(s,h,i)},b=Mae;var U=typeof u=="object"&&"className"in u?u.className:void 0,q=uv(uv(uv(uv({stroke:"#ccc",pointerEvents:"none"},i),E),Qn(u,!1)),{},{payload:y,payloadIndex:v,className:Kt("recharts-tooltip-cursor",U)});return x.isValidElement(u)?x.cloneElement(u,q):x.createElement(b,q)}function Ehe(t){var e=uhe(),n=sae(),r=Yx(),i=che();return x.createElement(The,aC({},t,{coordinate:t.coordinate,index:t.index,payload:t.payload,offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var Qz=x.createContext(null),whe=()=>x.useContext(Qz),hS={exports:{}},zV;function bhe(){return zV||(zV=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,f,h){this.fn=c,this.context=f,this.once=h||!1}function o(c,f,h,y,v){if(typeof h!="function")throw new TypeError("The listener must be a function");var E=new i(h,y||c,v),b=n?n+f:f;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],E]:c._events[b].push(E):(c._events[b]=E,c._eventsCount++),c}function s(c,f){--c._eventsCount===0?c._events=new r:delete c._events[f]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var f=[],h,y;if(this._eventsCount===0)return f;for(y in h=this._events)e.call(h,y)&&f.push(n?y.slice(1):y);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(h)):f},u.prototype.listeners=function(f){var h=n?n+f:f,y=this._events[h];if(!y)return[];if(y.fn)return[y.fn];for(var v=0,E=y.length,b=new Array(E);v<E;v++)b[v]=y[v].fn;return b},u.prototype.listenerCount=function(f){var h=n?n+f:f,y=this._events[h];return y?y.fn?1:y.length:0},u.prototype.emit=function(f,h,y,v,E,b){var S=n?n+f:f;if(!this._events[S])return!1;var A=this._events[S],R=arguments.length,D,M;if(A.fn){switch(A.once&&this.removeListener(f,A.fn,void 0,!0),R){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,h),!0;case 3:return A.fn.call(A.context,h,y),!0;case 4:return A.fn.call(A.context,h,y,v),!0;case 5:return A.fn.call(A.context,h,y,v,E),!0;case 6:return A.fn.call(A.context,h,y,v,E,b),!0}for(M=1,D=new Array(R-1);M<R;M++)D[M-1]=arguments[M];A.fn.apply(A.context,D)}else{var U=A.length,q;for(M=0;M<U;M++)switch(A[M].once&&this.removeListener(f,A[M].fn,void 0,!0),R){case 1:A[M].fn.call(A[M].context);break;case 2:A[M].fn.call(A[M].context,h);break;case 3:A[M].fn.call(A[M].context,h,y);break;case 4:A[M].fn.call(A[M].context,h,y,v);break;default:if(!D)for(q=1,D=new Array(R-1);q<R;q++)D[q-1]=arguments[q];A[M].fn.apply(A[M].context,D)}}return!0},u.prototype.on=function(f,h,y){return o(this,f,h,y,!1)},u.prototype.once=function(f,h,y){return o(this,f,h,y,!0)},u.prototype.removeListener=function(f,h,y,v){var E=n?n+f:f;if(!this._events[E])return this;if(!h)return s(this,E),this;var b=this._events[E];if(b.fn)b.fn===h&&(!v||b.once)&&(!y||b.context===y)&&s(this,E);else{for(var S=0,A=[],R=b.length;S<R;S++)(b[S].fn!==h||v&&!b[S].once||y&&b[S].context!==y)&&A.push(b[S]);A.length?this._events[E]=A.length===1?A[0]:A:s(this,E)}return this},u.prototype.removeAllListeners=function(f){var h;return f?(h=n?n+f:f,this._events[h]&&s(this,h)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,t.exports=u})(hS)),hS.exports}var She=bhe();const Ahe=ss(She);var xm=new Ahe,lC="recharts.syncEvent.tooltip",HV="recharts.syncEvent.brush";function Che(t,e){if(e){var n=Number.parseInt(e,10);if(!Xi(n))return t==null?void 0:t[n]}}var Ihe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},Xz=Ai({name:"options",initialState:Ihe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),xhe=Xz.reducer,{createEventEmitter:Rhe}=Xz.actions;function Phe(t){return t.tooltip.syncInteraction}var Mhe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},Zz=Ai({name:"chartData",initialState:Mhe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:GV,setDataStartEndIndexes:Dhe,setComputedData:pxe}=Zz.actions,Nhe=Zz.reducer,khe=["x","y"];function KV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KV(Object(n),!0).forEach(function(r){Ohe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ohe(t,e,n){return(e=Vhe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vhe(t){var e=Lhe(t,"string");return typeof e=="symbol"?e:e+""}function Lhe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Uhe(t,e){if(t==null)return{};var n,r,i=Fhe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Fhe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var eH=()=>{};function Bhe(){var t=$e(AR),e=$e(CR),n=tr(),r=$e(L5),i=$e(ha),o=Yx(),s=Wx(),u=$e(c=>c.rootProps.className);x.useEffect(()=>{if(t==null)return eH;var c=(f,h,y)=>{if(e!==y&&t===f){if(r==="index"){var v;if(s&&h!==null&&h!==void 0&&(v=h.payload)!==null&&v!==void 0&&v.coordinate){var E=h.payload.coordinate,{x:b,y:S}=E,A=Uhe(E,khe),R=gu(gu(gu({},A),typeof b=="number"&&{x:Math.max(s.x,Math.min(b,s.x+s.width))}),typeof S=="number"&&{y:Math.max(s.y,Math.min(S,s.y+s.height))}),D=gu(gu({},h),{},{payload:gu(gu({},h.payload),{},{coordinate:R})});n(D)}else n(h);return}if(i!=null){var M;if(typeof r=="function"){var U={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},q=r(i,U);M=i[q]}else r==="value"&&(M=i.find(H=>String(H.value)===h.payload.label));var{coordinate:z}=h.payload;if(M==null||h.payload.active===!1||z==null||s==null){n(oC({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:k,y:V}=z,N=Math.min(k,s.x+s.width),$=Math.min(V,s.y+s.height),F={x:o==="horizontal"?M.coordinate:N,y:o==="horizontal"?$:M.coordinate},G=oC({active:h.payload.active,coordinate:F,dataKey:h.payload.dataKey,index:String(M.index),label:h.payload.label});n(G)}}};return xm.on(lC,c),()=>{xm.off(lC,c)}},[u,n,e,t,r,i,o,s])}function qhe(){var t=$e(AR),e=$e(CR),n=tr();x.useEffect(()=>{if(t==null)return eH;var r=(i,o,s)=>{e!==s&&t===i&&n(Dhe(o))};return xm.on(HV,r),()=>{xm.off(HV,r)}},[n,e,t])}function $he(){var t=tr();x.useEffect(()=>{t(Rhe())},[t]),Bhe(),qhe()}function zhe(t,e,n,r,i,o){var s=$e(v=>dhe(v,t,e)),u=$e(CR),c=$e(AR),f=$e(L5),h=$e(Phe),y=h==null?void 0:h.active;x.useEffect(()=>{if(!y&&c!=null&&u!=null){var v=oC({active:o,coordinate:n,dataKey:s,index:i,label:typeof r=="number"?String(r):r});xm.emit(lC,c,v,u)}},[y,n,s,i,r,u,c,f,o])}function jV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function WV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jV(Object(n),!0).forEach(function(r){Hhe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hhe(t,e,n){return(e=Ghe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ghe(t){var e=Khe(t,"string");return typeof e=="symbol"?e:e+""}function Khe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jhe(t){return t.dataKey}function Whe(t,e){return x.isValidElement(t)?x.cloneElement(t,e):typeof t=="function"?x.createElement(t,e):x.createElement(yae,e)}var YV=[],Yhe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!rg.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Jhe(t){var e=Dl(t,Yhe),{active:n,allowEscapeViewBox:r,animationDuration:i,animationEasing:o,content:s,filterNull:u,isAnimationActive:c,offset:f,payloadUniqBy:h,position:y,reverseDirection:v,useTranslate3d:E,wrapperStyle:b,cursor:S,shared:A,trigger:R,defaultIndex:D,portal:M,axisId:U}=e,q=tr(),z=typeof D=="number"?String(D):D;x.useEffect(()=>{q(yde({shared:A,trigger:R,axisId:U,active:n,defaultIndex:z}))},[q,A,R,U,n,z]);var k=Wx(),V=M$(),N=dde(A),{activeIndex:$,isActive:F}=$e(Fe=>mhe(Fe,N,R,z)),G=$e(Fe=>phe(Fe,N,R,z)),H=$e(Fe=>Jz(Fe,N,R,z)),Ae=$e(Fe=>hhe(Fe,N,R,z)),Se=G,ee=whe(),he=n??F,[Te,Ve]=_oe([Se,he]),j=N==="axis"?H:void 0;zhe(N,R,Ae,j,$,he);var ce=M??ee;if(ce==null)return null;var le=Se??YV;he||(le=YV),u&&le.length&&(le=Gie(Se.filter(Fe=>Fe.value!=null&&(Fe.hide!==!0||e.includeHidden)),h,jhe));var ve=le.length>0,Oe=x.createElement(Sae,{allowEscapeViewBox:r,animationDuration:i,animationEasing:o,isAnimationActive:c,active:he,coordinate:Ae,hasPayload:ve,offset:f,position:y,reverseDirection:v,useTranslate3d:E,viewBox:k,wrapperStyle:b,lastBoundingBox:Te,innerRef:Ve,hasPortalFromProps:!!M},Whe(s,WV(WV({},e),{},{payload:le,label:j,active:he,coordinate:Ae,accessibilityLayer:V})));return x.createElement(x.Fragment,null,I7.createPortal(Oe,ce),he&&x.createElement(Ehe,{cursor:S,tooltipEventType:N,coordinate:Ae,payload:Se,index:$}))}var pS={},mS={},gS={},JV;function Qhe(){return JV||(JV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:o}={}){let s,u=null;const c=o!=null&&o.includes("leading"),f=o==null||o.includes("trailing"),h=()=>{u!==null&&(n.apply(s,u),s=void 0,u=null)},y=()=>{f&&h(),S()};let v=null;const E=()=>{v!=null&&clearTimeout(v),v=setTimeout(()=>{v=null,y()},r)},b=()=>{v!==null&&(clearTimeout(v),v=null)},S=()=>{b(),s=void 0,u=null},A=()=>{h()},R=function(...D){if(i!=null&&i.aborted)return;s=this,u=D;const M=v==null;E(),c&&M&&h()};return R.schedule=E,R.cancel=S,R.flush=A,i==null||i.addEventListener("abort",S,{once:!0}),R}t.debounce=e})(gS)),gS}var QV;function Xhe(){return QV||(QV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Qhe();function n(r,i=0,o={}){typeof o!="object"&&(o={});const{leading:s=!1,trailing:u=!0,maxWait:c}=o,f=Array(2);s&&(f[0]="leading"),u&&(f[1]="trailing");let h,y=null;const v=e.debounce(function(...S){h=r.apply(this,S),y=null},i,{edges:f}),E=function(...S){return c!=null&&(y===null&&(y=Date.now()),Date.now()-y>=c)?(h=r.apply(this,S),y=Date.now(),v.cancel(),v.schedule(),h):(v.apply(this,S),h)},b=()=>(v.flush(),h);return E.cancel=v.cancel,E.flush=b,E}t.debounce=n})(mS)),mS}var XV;function Zhe(){return XV||(XV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Xhe();function n(r,i=0,o={}){const{leading:s=!0,trailing:u=!0}=o;return e.debounce(r,i,{leading:s,maxWait:i,trailing:u})}t.throttle=n})(pS)),pS}var yS,ZV;function epe(){return ZV||(ZV=1,yS=Zhe().throttle),yS}var tpe=epe();const npe=ss(tpe);var vS=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o]};function eL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _S(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eL(Object(n),!0).forEach(function(r){rpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rpe(t,e,n){return(e=ipe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ipe(t){var e=ope(t,"string");return typeof e=="symbol"?e:e+""}function ope(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var spe=x.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i="100%",height:o="100%",minWidth:s=0,minHeight:u,maxHeight:c,children:f,debounce:h=0,id:y,className:v,onResize:E,style:b={}}=t,S=x.useRef(null),A=x.useRef();A.current=E,x.useImperativeHandle(e,()=>S.current);var[R,D]=x.useState({containerWidth:r.width,containerHeight:r.height}),M=x.useCallback((q,z)=>{D(k=>{var V=Math.round(q),N=Math.round(z);return k.containerWidth===V&&k.containerHeight===N?k:{containerWidth:V,containerHeight:N}})},[]);x.useEffect(()=>{var q=N=>{var $,{width:F,height:G}=N[0].contentRect;M(F,G),($=A.current)===null||$===void 0||$.call(A,F,G)};h>0&&(q=npe(q,h,{trailing:!0,leading:!1}));var z=new ResizeObserver(q),{width:k,height:V}=S.current.getBoundingClientRect();return M(k,V),z.observe(S.current),()=>{z.disconnect()}},[M,h]);var U=x.useMemo(()=>{var{containerWidth:q,containerHeight:z}=R;if(q<0||z<0)return null;vS(Du(i)||Du(o),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,o),vS(!n||n>0,"The aspect(%s) must be greater than zero.",n);var k=Du(i)?q:i,V=Du(o)?z:o;return n&&n>0&&(k?V=k/n:V&&(k=V*n),c&&V>c&&(V=c)),vS(k>0||V>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,k,V,i,o,s,u,n),x.Children.map(f,N=>x.cloneElement(N,{width:k,height:V,style:_S({width:k,height:V},N.props.style)}))},[n,f,o,c,u,s,R,i]);return x.createElement("div",{id:y?"".concat(y):void 0,className:Kt("recharts-responsive-container",v),style:_S(_S({},b),{},{width:i,height:o,minWidth:s,minHeight:u,maxHeight:c}),ref:S},x.createElement("div",{style:{width:0,height:0,overflow:"visible"}},U))}),tH=t=>null;tH.displayName="Cell";function ape(t,e,n){return(e=lpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lpe(t){var e=upe(t,"string");return typeof e=="symbol"?e:e+""}function upe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class cpe{constructor(e){ape(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function tL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fpe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tL(Object(n),!0).forEach(function(r){dpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dpe(t,e,n){return(e=hpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hpe(t){var e=ppe(t,"string");return typeof e=="symbol"?e:e+""}function ppe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mpe={cacheSize:2e3,enableCache:!0},nH=fpe({},mpe),nL=new cpe(nH.cacheSize),gpe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},rL="recharts_measurement_span";function ype(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",o=e.fontStyle||"",s=e.letterSpacing||"",u=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(o,"|").concat(s,"|").concat(u)}var iL=(t,e)=>{try{var n=document.getElementById(rL);n||(n=document.createElement("span"),n.setAttribute("id",rL),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,gpe,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},Kp=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||rg.isSsr)return{width:0,height:0};if(!nH.enableCache)return iL(e,n);var r=ype(e,n),i=nL.get(r);if(i)return i;var o=iL(e,n);return nL.set(r,o),o},oL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,sL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,vpe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,_pe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,rH={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Tpe=Object.keys(rH),bf="NaN";function Epe(t,e){return t*rH[e]}class jr{static parse(e){var n,[,r,i]=(n=_pe.exec(e))!==null&&n!==void 0?n:[];return new jr(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,Xi(e)&&(this.unit=""),n!==""&&!vpe.test(n)&&(this.num=NaN,this.unit=""),Tpe.includes(n)&&(this.num=Epe(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new jr(NaN,""):new jr(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new jr(NaN,""):new jr(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new jr(NaN,""):new jr(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new jr(NaN,""):new jr(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Xi(this.num)}}function iH(t){if(t.includes(bf))return bf;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,o]=(n=oL.exec(e))!==null&&n!==void 0?n:[],s=jr.parse(r??""),u=jr.parse(o??""),c=i==="*"?s.multiply(u):s.divide(u);if(c.isNaN())return bf;e=e.replace(oL,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,[,h,y,v]=(f=sL.exec(e))!==null&&f!==void 0?f:[],E=jr.parse(h??""),b=jr.parse(v??""),S=y==="+"?E.add(b):E.subtract(b);if(S.isNaN())return bf;e=e.replace(sL,S.toString())}return e}var aL=/\(([^()]*)\)/;function wpe(t){for(var e=t,n;(n=aL.exec(e))!=null;){var[,r]=n;e=e.replace(aL,iH(r))}return e}function bpe(t){var e=t.replace(/\s+/g,"");return e=wpe(e),e=iH(e),e}function Spe(t){try{return bpe(t)}catch{return bf}}function TS(t){var e=Spe(t.slice(5,-1));return e===bf?"":e}var Ape=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Cpe=["dx","dy","angle","className","breakAll"];function uC(){return uC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uC.apply(null,arguments)}function lL(t,e){if(t==null)return{};var n,r,i=Ipe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Ipe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var oH=/[ \f\n\r\t\v\u2028\u2029]+/,sH=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];er(e)||(n?i=e.toString().split(""):i=e.toString().split(oH));var o=i.map(u=>({word:u,width:Kp(u,r).width})),s=n?0:Kp("",r).width;return{wordsWithComputedWidth:o,spaceWidth:s}}catch{return null}},xpe=(t,e,n,r,i)=>{var{maxLines:o,children:s,style:u,breakAll:c}=t,f=Ye(o),h=s,y=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return F.reduce((G,H)=>{var{word:Ae,width:Se}=H,ee=G[G.length-1];if(ee&&(r==null||i||ee.width+Se+n<Number(r)))ee.words.push(Ae),ee.width+=Se+n;else{var he={words:[Ae],width:Se};G.push(he)}return G},[])},v=y(e),E=$=>$.reduce((F,G)=>F.width>G.width?F:G);if(!f||i)return v;var b=v.length>o||E(v).width>Number(r);if(!b)return v;for(var S="",A=$=>{var F=h.slice(0,$),G=sH({breakAll:c,style:u,children:F+S}).wordsWithComputedWidth,H=y(G),Ae=H.length>o||E(H).width>Number(r);return[Ae,H]},R=0,D=h.length-1,M=0,U;R<=D&&M<=h.length-1;){var q=Math.floor((R+D)/2),z=q-1,[k,V]=A(z),[N]=A(q);if(!k&&!N&&(R=q+1),k&&N&&(D=q-1),!k&&N){U=V;break}M++}return U||v},uL=t=>{var e=er(t)?[]:t.toString().split(oH);return[{words:e}]},Rpe=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:o,maxLines:s}=t;if((e||n)&&!rg.isSsr){var u,c,f=sH({breakAll:o,children:r,style:i});if(f){var{wordsWithComputedWidth:h,spaceWidth:y}=f;u=h,c=y}else return uL(r);return xpe({breakAll:o,children:r,maxLines:s,style:i},u,c,e,n)}return uL(r)},cL="#808080",YR=x.forwardRef((t,e)=>{var{x:n=0,y:r=0,lineHeight:i="1em",capHeight:o="0.71em",scaleToFit:s=!1,textAnchor:u="start",verticalAnchor:c="end",fill:f=cL}=t,h=lL(t,Ape),y=x.useMemo(()=>Rpe({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:s,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,s,h.style,h.width]),{dx:v,dy:E,angle:b,className:S,breakAll:A}=h,R=lL(h,Cpe);if(!is(n)||!is(r)||y.length===0)return null;var D=n+(Ye(v)?v:0),M=r+(Ye(E)?E:0),U;switch(c){case"start":U=TS("calc(".concat(o,")"));break;case"middle":U=TS("calc(".concat((y.length-1)/2," * -").concat(i," + (").concat(o," / 2))"));break;default:U=TS("calc(".concat(y.length-1," * -").concat(i,")"));break}var q=[];if(s){var z=y[0].width,{width:k}=h;q.push("scale(".concat(Ye(k)?k/z:1,")"))}return b&&q.push("rotate(".concat(b,", ").concat(D,", ").concat(M,")")),q.length&&(R.transform=q.join(" ")),x.createElement("text",uC({},Qn(R,!0),{ref:e,x:D,y:M,className:Kt("recharts-text",S),textAnchor:u,fill:f.includes("url")?cL:f}),y.map((V,N)=>{var $=V.words.join(A?"":" ");return x.createElement("tspan",{x:D,dy:N===0?U:i,key:"".concat($,"-").concat(N)},$)}))});YR.displayName="Text";var Ppe=["labelRef"];function Mpe(t,e){if(t==null)return{};var n,r,i=Dpe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Dpe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function fL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Tn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fL(Object(n),!0).forEach(function(r){Npe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Npe(t,e,n){return(e=kpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kpe(t){var e=Ope(t,"string");return typeof e=="symbol"?e:e+""}function Ope(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Os(){return Os=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Os.apply(null,arguments)}var aH=x.createContext(null),Vpe=t=>{var{x:e,y:n,width:r,height:i,children:o}=t,s=x.useMemo(()=>({x:e,y:n,width:r,height:i}),[e,n,r,i]);return x.createElement(aH.Provider,{value:s},o)},lH=()=>{var t=x.useContext(aH),e=Wx();return t||e},Lpe=x.createContext(null),Upe=()=>{var t=x.useContext(Lpe),e=$e($5);return t||e},Fpe=t=>{var{value:e,formatter:n}=t,r=er(t.children)?e:t.children;return typeof n=="function"?n(r):r},JR=t=>t!=null&&typeof t=="function",Bpe=(t,e)=>{var n=vi(e-t),r=Math.min(Math.abs(e-t),360);return n*r},qpe=(t,e,n,r,i)=>{var{offset:o,className:s}=t,{cx:u,cy:c,innerRadius:f,outerRadius:h,startAngle:y,endAngle:v,clockWise:E}=i,b=(f+h)/2,S=Bpe(y,v),A=S>=0?1:-1,R,D;switch(e){case"insideStart":R=y+A*o,D=E;break;case"insideEnd":R=v-A*o,D=!E;break;case"end":R=v+A*o,D=E;break;default:throw new Error("Unsupported position ".concat(e))}D=S<=0?D:!D;var M=mr(u,c,b,R),U=mr(u,c,b,R+(D?1:-1)*359),q="M".concat(M.x,",").concat(M.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(D?0:1,`,
    `).concat(U.x,",").concat(U.y),z=er(t.id)?_m("recharts-radial-line-"):t.id;return x.createElement("text",Os({},r,{dominantBaseline:"central",className:Kt("recharts-radial-bar-label",s)}),x.createElement("defs",null,x.createElement("path",{id:z,d:q})),x.createElement("textPath",{xlinkHref:"#".concat(z)},n))},$pe=(t,e,n)=>{var{cx:r,cy:i,innerRadius:o,outerRadius:s,startAngle:u,endAngle:c}=t,f=(u+c)/2;if(n==="outside"){var{x:h,y}=mr(r,i,s+e,f);return{x:h,y,textAnchor:h>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var v=(o+s)/2,{x:E,y:b}=mr(r,i,v,f);return{x:E,y:b,textAnchor:"middle",verticalAnchor:"middle"}},uH=t=>"cx"in t&&Ye(t.cx),zpe=(t,e)=>{var{parentViewBox:n,offset:r,position:i}=t,o;n!=null&&!uH(n)&&(o=n);var{x:s,y:u,width:c,height:f}=e,h=f>=0?1:-1,y=h*r,v=h>0?"end":"start",E=h>0?"start":"end",b=c>=0?1:-1,S=b*r,A=b>0?"end":"start",R=b>0?"start":"end";if(i==="top"){var D={x:s+c/2,y:u-h*r,textAnchor:"middle",verticalAnchor:v};return Tn(Tn({},D),o?{height:Math.max(u-o.y,0),width:c}:{})}if(i==="bottom"){var M={x:s+c/2,y:u+f+y,textAnchor:"middle",verticalAnchor:E};return Tn(Tn({},M),o?{height:Math.max(o.y+o.height-(u+f),0),width:c}:{})}if(i==="left"){var U={x:s-S,y:u+f/2,textAnchor:A,verticalAnchor:"middle"};return Tn(Tn({},U),o?{width:Math.max(U.x-o.x,0),height:f}:{})}if(i==="right"){var q={x:s+c+S,y:u+f/2,textAnchor:R,verticalAnchor:"middle"};return Tn(Tn({},q),o?{width:Math.max(o.x+o.width-q.x,0),height:f}:{})}var z=o?{width:c,height:f}:{};return i==="insideLeft"?Tn({x:s+S,y:u+f/2,textAnchor:R,verticalAnchor:"middle"},z):i==="insideRight"?Tn({x:s+c-S,y:u+f/2,textAnchor:A,verticalAnchor:"middle"},z):i==="insideTop"?Tn({x:s+c/2,y:u+y,textAnchor:"middle",verticalAnchor:E},z):i==="insideBottom"?Tn({x:s+c/2,y:u+f-y,textAnchor:"middle",verticalAnchor:v},z):i==="insideTopLeft"?Tn({x:s+S,y:u+y,textAnchor:R,verticalAnchor:E},z):i==="insideTopRight"?Tn({x:s+c-S,y:u+y,textAnchor:A,verticalAnchor:E},z):i==="insideBottomLeft"?Tn({x:s+S,y:u+f-y,textAnchor:R,verticalAnchor:v},z):i==="insideBottomRight"?Tn({x:s+c-S,y:u+f-y,textAnchor:A,verticalAnchor:v},z):i&&typeof i=="object"&&(Ye(i.x)||Du(i.x))&&(Ye(i.y)||Du(i.y))?Tn({x:s+yo(i.x,c),y:u+yo(i.y,f),textAnchor:"end",verticalAnchor:"end"},z):Tn({x:s+c/2,y:u+f/2,textAnchor:"middle",verticalAnchor:"middle"},z)},Hpe={offset:5};function Qa(t){var e=Dl(t,Hpe),{viewBox:n,position:r,value:i,children:o,content:s,className:u="",textBreakAll:c,labelRef:f}=e,h=Upe(),y=lH(),v=r==="center"?y:h??y,E=n||v;if(!E||er(i)&&er(o)&&!x.isValidElement(s)&&typeof s!="function")return null;var b=Tn(Tn({},e),{},{viewBox:E});if(x.isValidElement(s)){var{labelRef:S}=b,A=Mpe(b,Ppe);return x.cloneElement(s,A)}var R;if(typeof s=="function"){if(R=x.createElement(s,b),x.isValidElement(R))return R}else R=Fpe(e);var D=uH(E),M=Qn(e,!0);if(D&&(r==="insideStart"||r==="insideEnd"||r==="end"))return qpe(e,r,R,M,E);var U=D?$pe(E,e.offset,e.position):zpe(e,E);return x.createElement(YR,Os({ref:f,className:Kt("recharts-label",u)},M,U,{breakAll:c}),R)}Qa.displayName="Label";var Gpe=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?x.createElement(Qa,Os({key:"label-implicit"},r)):is(t)?x.createElement(Qa,Os({key:"label-implicit",value:t},r)):x.isValidElement(t)?t.type===Qa?x.cloneElement(t,Tn({key:"label-implicit"},r)):x.createElement(Qa,Os({key:"label-implicit",content:t},r)):JR(t)?x.createElement(Qa,Os({key:"label-implicit",content:t},r)):t&&typeof t=="object"?x.createElement(Qa,Os({},t,{key:"label-implicit"},r)):null};function Kpe(t){var{label:e}=t,n=lH();return Gpe(e,n)||null}var ES={},wS={},dL;function jpe(){return dL||(dL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(wS)),wS}var bS={},hL;function Wpe(){return hL||(hL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(bS)),bS}var pL;function Ype(){return pL||(pL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=jpe(),n=Wpe(),r=Ux();function i(o){if(r.isArrayLike(o))return e.last(n.toArray(o))}t.last=i})(ES)),ES}var SS,mL;function Jpe(){return mL||(mL=1,SS=Ype().last),SS}var Qpe=Jpe();const Xpe=ss(Qpe);var Zpe=["valueAccessor"],eme=["dataKey","clockWise","id","textBreakAll"];function $_(){return $_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$_.apply(null,arguments)}function gL(t,e){if(t==null)return{};var n,r,i=tme(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function tme(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var nme=t=>Array.isArray(t.value)?Xpe(t.value):t.value,cH=x.createContext(void 0),rme=cH.Provider,fH=x.createContext(void 0);fH.Provider;function ime(){return x.useContext(cH)}function ome(){return x.useContext(fH)}function Dv(t){var{valueAccessor:e=nme}=t,n=gL(t,Zpe),{dataKey:r,clockWise:i,id:o,textBreakAll:s}=n,u=gL(n,eme),c=ime(),f=ome(),h=c||f;return!h||!h.length?null:x.createElement(El,{className:"recharts-label-list"},h.map((y,v)=>{var E,b=er(r)?e(y,v):qr(y&&y.payload,r),S=er(o)?{}:{id:"".concat(o,"-").concat(v)};return x.createElement(Qa,$_({},Qn(y,!0),u,S,{fill:(E=n.fill)!==null&&E!==void 0?E:y.fill,parentViewBox:y.parentViewBox,value:b,textBreakAll:s,viewBox:y.viewBox,key:"label-".concat(v),index:v}))}))}Dv.displayName="LabelList";function sme(t){var{label:e}=t;return e?e===!0?x.createElement(Dv,{key:"labelList-implicit"}):x.isValidElement(e)||JR(e)?x.createElement(Dv,{key:"labelList-implicit",content:e}):typeof e=="object"?x.createElement(Dv,$_({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}var ame={radiusAxis:{},angleAxis:{}},dH=Ai({name:"polarAxis",initialState:ame,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:mxe,removeRadiusAxis:gxe,addAngleAxis:yxe,removeAngleAxis:vxe}=dH.actions,lme=dH.reducer,AS={},yL;function ume(){return yL||(yL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var i;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const o=n[Symbol.toStringTag];return o==null||!((i=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&i.writable)?!1:n.toString()===`[object ${o}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(AS)),AS}var CS,vL;function cme(){return vL||(vL=1,CS=ume().isPlainObject),CS}var fme=cme();const dme=ss(fme);function _L(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function TL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_L(Object(n),!0).forEach(function(r){hme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_L(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hme(t,e,n){return(e=pme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pme(t){var e=mme(t,"string");return typeof e=="symbol"?e:e+""}function mme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function z_(){return z_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},z_.apply(null,arguments)}var EL=(t,e,n,r,i)=>{var o=n-r,s;return s="M ".concat(t,",").concat(e),s+="L ".concat(t+n,",").concat(e),s+="L ".concat(t+n-o/2,",").concat(e+i),s+="L ".concat(t+n-o/2-r,",").concat(e+i),s+="L ".concat(t,",").concat(e," Z"),s},gme={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},yme=t=>{var e=Dl(t,gme),{x:n,y:r,upperWidth:i,lowerWidth:o,height:s,className:u}=e,{animationEasing:c,animationDuration:f,animationBegin:h,isUpdateAnimationActive:y}=e,v=x.useRef(),[E,b]=x.useState(-1),S=x.useRef(i),A=x.useRef(o),R=x.useRef(s),D=x.useRef(n),M=x.useRef(r),U=Qx(t,"trapezoid-");if(x.useEffect(()=>{if(v.current&&v.current.getTotalLength)try{var Ae=v.current.getTotalLength();Ae&&b(Ae)}catch{}},[]),n!==+n||r!==+r||i!==+i||o!==+o||s!==+s||i===0&&o===0||s===0)return null;var q=Kt("recharts-trapezoid",u);if(!y)return x.createElement("g",null,x.createElement("path",z_({},Qn(e,!0),{className:q,d:EL(n,r,i,o,s)})));var z=S.current,k=A.current,V=R.current,N=D.current,$=M.current,F="0px ".concat(E===-1?1:E,"px"),G="".concat(E,"px 0px"),H=D$(["strokeDasharray"],f,c);return x.createElement(Jx,{animationId:U,key:U,canBegin:E>0,duration:f,easing:c,isActive:y,begin:h},Ae=>{var Se=Lr(z,i,Ae),ee=Lr(k,o,Ae),he=Lr(V,s,Ae),Te=Lr(N,n,Ae),Ve=Lr($,r,Ae);v.current&&(S.current=Se,A.current=ee,R.current=he,D.current=Te,M.current=Ve);var j=Ae>0?{transition:H,strokeDasharray:G}:{strokeDasharray:F};return x.createElement("path",z_({},Qn(e,!0),{className:q,d:EL(Te,Ve,Se,ee,he),ref:v,style:TL(TL({},j),e.style)}))})},vme=["option","shapeType","propTransformer","activeClassName","isActive"];function _me(t,e){if(t==null)return{};var n,r,i=Tme(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Tme(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function wL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function H_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wL(Object(n),!0).forEach(function(r){Eme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Eme(t,e,n){return(e=wme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wme(t){var e=bme(t,"string");return typeof e=="symbol"?e:e+""}function bme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Sme(t,e){return H_(H_({},e),t)}function Ame(t,e){return t==="symbols"}function bL(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return x.createElement(V$,n);case"trapezoid":return x.createElement(yme,n);case"sector":return x.createElement(F$,n);case"symbols":if(Ame(e))return x.createElement(H3,n);break;default:return null}}function Cme(t){return x.isValidElement(t)?t.props:t}function Ime(t){var{option:e,shapeType:n,propTransformer:r=Sme,activeClassName:i="recharts-active-shape",isActive:o}=t,s=_me(t,vme),u;if(x.isValidElement(e))u=x.cloneElement(e,H_(H_({},s),Cme(e)));else if(typeof e=="function")u=e(s);else if(dme(e)&&typeof e!="boolean"){var c=r(e,s);u=x.createElement(bL,{shapeType:n,elementProps:c})}else{var f=s;u=x.createElement(bL,{shapeType:n,elementProps:f})}return o?x.createElement(El,{className:i},u):u}var hH=(t,e)=>{var n=tr();return(r,i)=>o=>{t==null||t(r,i,o),n(Dz({activeIndex:String(i),activeDataKey:e,activeCoordinate:r.tooltipPosition}))}},pH=t=>{var e=tr();return(n,r)=>i=>{t==null||t(n,r,i),e(vde())}},mH=(t,e)=>{var n=tr();return(r,i)=>o=>{t==null||t(r,i,o),n(_de({activeIndex:String(i),activeDataKey:e,activeCoordinate:r.tooltipPosition}))}};function xme(t){var{fn:e,args:n}=t,r=tr(),i=Eo();return x.useEffect(()=>{if(!i){var o=e(n);return r(mde(o)),()=>{r(gde(o))}}},[e,n,r,i]),null}var Rme=()=>{};function Pme(t){var{legendPayload:e}=t,n=tr(),r=Eo();return x.useEffect(()=>r?Rme:(n(cae(e)),()=>{n(fae(e))}),[n,r,e]),null}var IS,Mme=()=>{var[t]=x.useState(()=>_m("uid-"));return t},Dme=(IS=QG.useId)!==null&&IS!==void 0?IS:Mme;function Nme(t,e){var n=Dme();return e||(t?"".concat(t,"-").concat(n):n)}var kme=x.createContext(void 0),Ome=t=>{var{id:e,type:n,children:r}=t,i=Nme("recharts-".concat(n),e);return x.createElement(kme.Provider,{value:i},r(i))},Vme={cartesianItems:[],polarItems:[]},gH=Ai({name:"graphicalItems",initialState:Vme,reducers:{addCartesianGraphicalItem(t,e){t.cartesianItems.push(e.payload)},replaceCartesianGraphicalItem(t,e){var{prev:n,next:r}=e.payload,i=zs(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},removeCartesianGraphicalItem(t,e){var n=zs(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},addPolarGraphicalItem(t,e){t.polarItems.push(e.payload)},removePolarGraphicalItem(t,e){var n=zs(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)}}}),{addCartesianGraphicalItem:Lme,replaceCartesianGraphicalItem:Ume,removeCartesianGraphicalItem:Fme,addPolarGraphicalItem:_xe,removePolarGraphicalItem:Txe}=gH.actions,Bme=gH.reducer;function qme(t){var e=tr(),n=x.useRef(null);return x.useEffect(()=>{n.current===null?e(Lme(t)):n.current!==t&&e(Ume({prev:n.current,next:t})),n.current=t},[e,t]),x.useEffect(()=>()=>{n.current&&(e(Fme(n.current)),n.current=null)},[e]),null}function SL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function AL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SL(Object(n),!0).forEach(function(r){$me(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $me(t,e,n){return(e=zme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zme(t){var e=Hme(t,"string");return typeof e=="symbol"?e:e+""}function Hme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Gme={xAxis:{},yAxis:{},zAxis:{}},yH=Ai({name:"cartesianAxis",initialState:Gme,reducers:{addXAxis(t,e){t.xAxis[e.payload.id]=e.payload},removeXAxis(t,e){delete t.xAxis[e.payload.id]},addYAxis(t,e){t.yAxis[e.payload.id]=e.payload},removeYAxis(t,e){delete t.yAxis[e.payload.id]},addZAxis(t,e){t.zAxis[e.payload.id]=e.payload},removeZAxis(t,e){delete t.zAxis[e.payload.id]},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload;t.yAxis[n]&&(t.yAxis[n]=AL(AL({},t.yAxis[n]),{},{width:r}))}}}),{addXAxis:Kme,removeXAxis:jme,addYAxis:Wme,removeYAxis:Yme,addZAxis:Exe,removeZAxis:wxe,updateYAxisWidth:Jme}=yH.actions,Qme=yH.reducer,Xme=se([nr],t=>{if(t)return{top:t.top,bottom:t.bottom,left:t.left,right:t.right}}),Zme=se([Xme,ca,fa],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),vH=()=>$e(Zme),ege="Invariant failed";function tge(t,e){throw new Error(ege)}var nge=["x","y"];function cC(){return cC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cC.apply(null,arguments)}function CL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CL(Object(n),!0).forEach(function(r){rge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rge(t,e,n){return(e=ige(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ige(t){var e=oge(t,"string");return typeof e=="symbol"?e:e+""}function oge(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sge(t,e){if(t==null)return{};var n,r,i=age(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function age(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function lge(t,e){var{x:n,y:r}=t,i=sge(t,nge),o="".concat(n),s=parseInt(o,10),u="".concat(r),c=parseInt(u,10),f="".concat(e.height||i.height),h=parseInt(f,10),y="".concat(e.width||i.width),v=parseInt(y,10);return yp(yp(yp(yp(yp({},e),i),s?{x:s}:{}),c?{y:c}:{}),{},{height:h,width:v,name:e.name,radius:e.radius})}function QR(t){return x.createElement(Ime,cC({shapeType:"rectangle",propTransformer:lge,activeClassName:"recharts-active-bar"},t))}var uge=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(Ye(e))return e;var o=Ye(r)||er(r);return o?e(r,i):(o||tge(),n)}},cge={},_H=Ai({name:"errorBars",initialState:cge,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(o=>o.dataKey===r.dataKey&&o.direction===r.direction?i:o))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:bxe,replaceErrorBar:Sxe,removeErrorBar:Axe}=_H.actions,fge=_H.reducer,dge=["children"];function hge(t,e){if(t==null)return{};var n,r,i=pge(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function pge(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var mge={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},gge=x.createContext(mge);function yge(t){var{children:e}=t,n=hge(t,dge);return x.createElement(gge.Provider,{value:n},e)}function TH(t,e){var n,r,i=$e(f=>Vl(f,t)),o=$e(f=>Ll(f,e)),s=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:ci.allowDataOverflow,u=(r=o==null?void 0:o.allowDataOverflow)!==null&&r!==void 0?r:fi.allowDataOverflow,c=s||u;return{needClip:c,needClipX:s,needClipY:u}}function vge(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=vH(),{needClipX:o,needClipY:s,needClip:u}=TH(e,n);if(!u)return null;var{x:c,y:f,width:h,height:y}=i;return x.createElement("clipPath",{id:"clipPath-".concat(r)},x.createElement("rect",{x:o?c:c-h/2,y:s?f:f-y/2,width:o?h:h*2,height:s?y:y*2}))}var _ge=["onMouseEnter","onMouseLeave","onClick"],Tge=["value","background","tooltipPosition"],Ege=["id"],wge=["onMouseEnter","onClick","onMouseLeave"];function wl(){return wl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wl.apply(null,arguments)}function IL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ur(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IL(Object(n),!0).forEach(function(r){bge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bge(t,e,n){return(e=Sge(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sge(t){var e=Age(t,"string");return typeof e=="symbol"?e:e+""}function Age(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function G_(t,e){if(t==null)return{};var n,r,i=Cge(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Cge(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Ige=t=>{var{dataKey:e,name:n,fill:r,legendType:i,hide:o}=t;return[{inactive:o,dataKey:e,type:i,color:r,value:x$(n,e),payload:t}]};function xge(t){var{dataKey:e,stroke:n,strokeWidth:r,fill:i,name:o,hide:s,unit:u}=t;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:e,nameKey:void 0,name:x$(o,e),hide:s,type:t.tooltipType,color:t.fill,unit:u}}}function Rge(t){var e=$e(vd),{data:n,dataKey:r,background:i,allOtherBarProps:o}=t,{onMouseEnter:s,onMouseLeave:u,onClick:c}=o,f=G_(o,_ge),h=hH(s,r),y=pH(u),v=mH(c,r);if(!i||n==null)return null;var E=Qn(i,!1);return x.createElement(x.Fragment,null,n.map((b,S)=>{var{value:A,background:R,tooltipPosition:D}=b,M=G_(b,Tge);if(!R)return null;var U=h(b,S),q=y(b,S),z=v(b,S),k=Ur(Ur(Ur(Ur(Ur({option:i,isActive:String(S)===e},M),{},{fill:"#eee"},R),E),kx(f,b,S)),{},{onMouseEnter:U,onMouseLeave:q,onClick:z,dataKey:r,index:S,className:"recharts-bar-background-rectangle"});return x.createElement(QR,wl({key:"background-bar-".concat(S)},k))}))}function Pge(t){var{showLabels:e,children:n,rects:r}=t,i=r==null?void 0:r.map(o=>{var s={x:o.x,y:o.y,width:o.width,height:o.height};return Ur(Ur({},s),{},{value:o.value,payload:o.payload,parentViewBox:o.parentViewBox,viewBox:s,fill:o.fill})});return x.createElement(rme,{value:e?i:void 0},n)}function Mge(t){var{shape:e,activeBar:n,baseProps:r,entry:i,index:o,dataKey:s}=t,u=$e(vd),c=$e(Gz),f=n&&String(o)===u&&(c==null||s===c),h=f?n:e;return x.createElement(QR,wl({},r,i,{isActive:f,option:h,index:o,dataKey:s}))}function Dge(t){var{shape:e,baseProps:n,entry:r,index:i,dataKey:o}=t;return x.createElement(QR,wl({},n,r,{isActive:!1,option:e,index:i,dataKey:o}))}function Nge(t){var{data:e,props:n}=t,r=H0(n),{id:i}=r,o=G_(r,Ege),{shape:s,dataKey:u,activeBar:c}=n,{onMouseEnter:f,onClick:h,onMouseLeave:y}=n,v=G_(n,wge),E=hH(f,u),b=pH(y),S=mH(h,u);return e?x.createElement(x.Fragment,null,e.map((A,R)=>x.createElement(El,wl({className:"recharts-bar-rectangle"},kx(v,A,R),{onMouseEnter:E(A,R),onMouseLeave:b(A,R),onClick:S(A,R),key:"rectangle-".concat(A==null?void 0:A.x,"-").concat(A==null?void 0:A.y,"-").concat(A==null?void 0:A.value,"-").concat(R)}),c?x.createElement(Mge,{shape:s,activeBar:c,baseProps:o,entry:A,index:R,dataKey:u}):x.createElement(Dge,{shape:s,baseProps:o,entry:A,index:R,dataKey:u})))):null}function kge(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:i,isAnimationActive:o,animationBegin:s,animationDuration:u,animationEasing:c,onAnimationEnd:f,onAnimationStart:h}=e,y=n.current,v=Qx(e,"recharts-bar-"),[E,b]=x.useState(!1),S=!E,A=x.useCallback(()=>{typeof f=="function"&&f(),b(!1)},[f]),R=x.useCallback(()=>{typeof h=="function"&&h(),b(!0)},[h]);return x.createElement(Pge,{showLabels:S,rects:r},x.createElement(Jx,{animationId:v,begin:s,duration:u,isActive:o,easing:c,onAnimationEnd:A,onAnimationStart:R,key:v},D=>{var M=D===1?r:r==null?void 0:r.map((U,q)=>{var z=y&&y[q];if(z)return Ur(Ur({},U),{},{x:Lr(z.x,U.x,D),y:Lr(z.y,U.y,D),width:Lr(z.width,U.width,D),height:Lr(z.height,U.height,D)});if(i==="horizontal"){var k=Lr(0,U.height,D);return Ur(Ur({},U),{},{y:U.y+U.height-k,height:k})}var V=Lr(0,U.width,D);return Ur(Ur({},U),{},{width:V})});return D>0&&(n.current=M??null),M==null?null:x.createElement(El,null,x.createElement(Nge,{props:e,data:M}))}),x.createElement(sme,{label:e.label}),e.children)}function Oge(t){var e=x.useRef(null);return x.createElement(kge,{previousRectanglesRef:e,props:t})}var EH=0,Vge=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:qr(t,e)}};class Lge extends x.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:i,xAxisId:o,yAxisId:s,needClip:u,background:c,id:f}=this.props;if(e||n==null)return null;var h=Kt("recharts-bar",i),y=f;return x.createElement(El,{className:h,id:f},u&&x.createElement("defs",null,x.createElement(vge,{clipPathId:y,xAxisId:o,yAxisId:s})),x.createElement(El,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(y,")"):void 0},x.createElement(Rge,{data:n,dataKey:r,background:c,allOtherBarProps:this.props}),x.createElement(Oge,this.props)))}}var Uge={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!rg.isSsr,legendType:"rect",minPointSize:EH,xAxisId:0,yAxisId:0};function Fge(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:o,activeBar:s,animationBegin:u,animationDuration:c,animationEasing:f,isAnimationActive:h}=t,{needClip:y}=TH(e,n),v=Yx(),E=Eo(),b=xre(t.children,tH),S=$e(D=>dye(D,e,n,E,t.id,b));if(v!=="vertical"&&v!=="horizontal")return null;var A,R=S==null?void 0:S[0];return R==null||R.height==null||R.width==null?A=0:A=v==="vertical"?R.height/2:R.width/2,x.createElement(yge,{xAxisId:e,yAxisId:n,data:S,dataPointFormatter:Vge,errorBarOffset:A},x.createElement(Lge,wl({},t,{layout:v,needClip:y,data:S,xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:o,activeBar:s,animationBegin:u,animationDuration:c,animationEasing:f,isAnimationActive:h})))}function Bge(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:o,xAxis:s,yAxis:u,xAxisTicks:c,yAxisTicks:f,stackedData:h,displayedData:y,offset:v,cells:E,parentViewBox:b}=t,S=e==="horizontal"?u:s,A=h?S.scale.domain():null,R=Fse({numericAxis:S});return y.map((D,M)=>{var U,q,z,k,V,N;h?U=Nse(h[M],A):(U=qr(D,n),Array.isArray(U)||(U=[R,U]));var $=uge(r,EH)(U[1],M);if(e==="horizontal"){var F,[G,H]=[u.scale(U[0]),u.scale(U[1])];q=E2({axis:s,ticks:c,bandSize:o,offset:i.offset,entry:D,index:M}),z=(F=H??G)!==null&&F!==void 0?F:void 0,k=i.size;var Ae=G-H;if(V=Xi(Ae)?0:Ae,N={x:q,y:v.top,width:k,height:v.height},Math.abs($)>0&&Math.abs(V)<Math.abs($)){var Se=vi(V||$)*(Math.abs($)-Math.abs(V));z-=Se,V+=Se}}else{var[ee,he]=[s.scale(U[0]),s.scale(U[1])];if(q=ee,z=E2({axis:u,ticks:f,bandSize:o,offset:i.offset,entry:D,index:M}),k=he-ee,V=i.size,N={x:v.left,y:z,width:v.width,height:V},Math.abs($)>0&&Math.abs(k)<Math.abs($)){var Te=vi(k||$)*(Math.abs($)-Math.abs(k));k+=Te}}if(q==null||z==null||k==null||V==null)return null;var Ve=Ur(Ur({},D),{},{x:q,y:z,width:k,height:V,value:h?U:U[1],payload:D,background:N,tooltipPosition:{x:q+k/2,y:z+V/2},parentViewBox:b},E&&E[M]&&E[M].props);return Ve}).filter(Boolean)}function wH(t){var e=Dl(t,Uge),n=Eo();return x.createElement(Ome,{id:e.id,type:"bar"},r=>x.createElement(x.Fragment,null,x.createElement(Pme,{legendPayload:Ige(e)}),x.createElement(xme,{fn:xge,args:e}),x.createElement(qme,{type:"bar",id:r,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:Use(e.stackId),hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:n}),x.createElement(Fge,wl({},e,{id:r}))))}wH.displayName="Bar";function xL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xL(Object(n),!0).forEach(function(r){qge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qge(t,e,n){return(e=$ge(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $ge(t){var e=zge(t,"string");return typeof e=="symbol"?e:e+""}function zge(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Hge=(t,e)=>e,Gge=(t,e,n)=>n,Kge=(t,e,n,r)=>r,jge=(t,e,n,r,i)=>i,pg=se([DR,jge],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),Wge=se([pg],t=>t==null?void 0:t.maxBarSize),Yge=(t,e,n,r,i,o)=>o,RL=(t,e,n)=>{var r=n??t;if(!er(r))return yo(r,e,0)},Jge=se([xt,DR,Hge,Gge,Kge],(t,e,n,r,i)=>e.filter(o=>t==="horizontal"?o.xAxisId===n:o.yAxisId===r).filter(o=>o.isPanorama===i).filter(o=>o.hide===!1).filter(o=>o.type==="bar")),Qge=(t,e,n,r)=>{var i=xt(t);return i==="horizontal"?iC(t,"yAxis",n,r):iC(t,"xAxis",e,r)},Xge=(t,e,n)=>{var r=xt(t);return r==="horizontal"?VV(t,"xAxis",e):VV(t,"yAxis",n)},Zge=(t,e,n)=>{var r={},i=t.filter(mT),o=t.filter(f=>f.stackId==null),s=i.reduce((f,h)=>(f[h.stackId]||(f[h.stackId]=[]),f[h.stackId].push(h),f),r),u=Object.entries(s).map(f=>{var[h,y]=f,v=y.map(b=>b.dataKey),E=RL(e,n,y[0].barSize);return{stackId:h,dataKeys:v,barSize:E}}),c=o.map(f=>{var h=[f.dataKey].filter(v=>v!=null),y=RL(e,n,f.barSize);return{stackId:void 0,dataKeys:h,barSize:y}});return[...u,...c]},eye=se([Jge,mfe,Xge],Zge),tye=(t,e,n,r,i)=>{var o,s,u=pg(t,e,n,r,i);if(u!=null){var c=xt(t),f=O5(t),{maxBarSize:h}=u,y=er(h)?f:h,v,E;return c==="horizontal"?(v=yd(t,"xAxis",e,r),E=gd(t,"xAxis",e,r)):(v=yd(t,"yAxis",n,r),E=gd(t,"yAxis",n,r)),(o=(s=Kx(v,E,!0))!==null&&s!==void 0?s:y)!==null&&o!==void 0?o:0}},bH=(t,e,n,r)=>{var i=xt(t),o,s;return i==="horizontal"?(o=yd(t,"xAxis",e,r),s=gd(t,"xAxis",e,r)):(o=yd(t,"yAxis",n,r),s=gd(t,"yAxis",n,r)),Kx(o,s)};function nye(t,e,n,r,i){var o=r.length;if(!(o<1)){var s=yo(t,n,0,!0),u,c=[];if(Si(r[0].barSize)){var f=!1,h=n/o,y=r.reduce((R,D)=>R+(D.barSize||0),0);y+=(o-1)*s,y>=n&&(y-=(o-1)*s,s=0),y>=n&&h>0&&(f=!0,h*=.9,y=o*h);var v=(n-y)/2>>0,E={offset:v-s,size:0};u=r.reduce((R,D)=>{var M,U={stackId:D.stackId,dataKeys:D.dataKeys,position:{offset:E.offset+E.size+s,size:f?h:(M=D.barSize)!==null&&M!==void 0?M:0}},q=[...R,U];return E=q[q.length-1].position,q},c)}else{var b=yo(e,n,0,!0);n-2*b-(o-1)*s<=0&&(s=0);var S=(n-2*b-(o-1)*s)/o;S>1&&(S>>=0);var A=Si(i)?Math.min(S,i):S;u=r.reduce((R,D,M)=>[...R,{stackId:D.stackId,dataKeys:D.dataKeys,position:{offset:b+(S+s)*M+(S-A)/2,size:A}}],c)}return u}}var rye=(t,e,n,r,i,o,s)=>{var u=er(s)?e:s,c=nye(n,r,i!==o?i:o,t,u);return i!==o&&c!=null&&(c=c.map(f=>cv(cv({},f),{},{position:cv(cv({},f.position),{},{offset:f.position.offset-i/2})}))),c},iye=se([eye,O5,pfe,V5,tye,bH,Wge],rye),oye=(t,e,n,r)=>yd(t,"xAxis",e,r),sye=(t,e,n,r)=>yd(t,"yAxis",n,r),aye=(t,e,n,r)=>gd(t,"xAxis",e,r),lye=(t,e,n,r)=>gd(t,"yAxis",n,r),uye=se([iye,pg],(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}}),cye=(t,e)=>{var n=PR(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var i=t[r];if(i){var{stackedData:o}=i;if(o)return o.find(s=>s.key===n)}}}},fye=se([Qge,pg],cye),dye=se([nr,jx,oye,sye,aye,lye,uye,xt,ER,bH,fye,pg,Yge],(t,e,n,r,i,o,s,u,c,f,h,y,v)=>{var{chartData:E,dataStartIndex:b,dataEndIndex:S}=c;if(!(y==null||s==null||e==null||u!=="horizontal"&&u!=="vertical"||n==null||r==null||i==null||o==null||f==null)){var{data:A}=y,R;if(A!=null&&A.length>0?R=A:R=E==null?void 0:E.slice(b,S+1),R!=null)return Bge({layout:u,barSettings:y,pos:s,parentViewBox:e,bandSize:f,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:o,stackedData:h,displayedData:R,offset:t,cells:v})}}),hye=t=>{var{chartData:e}=t,n=tr(),r=Eo();return x.useEffect(()=>r?()=>{}:(n(GV(e)),()=>{n(GV(void 0))}),[e,n,r]),null},PL={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},SH=Ai({name:"brush",initialState:PL,reducers:{setBrushSettings(t,e){return e.payload==null?PL:e.payload}}}),{setBrushSettings:Cxe}=SH.actions,pye=SH.reducer;function mye(t,e,n){return(e=gye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gye(t){var e=yye(t,"string");return typeof e=="symbol"?e:e+""}function yye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class XR{static create(e){return new XR(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(e)+o}default:return this.scale(e)}if(n){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+s}return this.scale(e)}}isInRange(e){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?e>=r&&e<=i:e>=i&&e<=r}}mye(XR,"EPS",1e-4);function vye(t){return(t%180+180)%180}var _ye=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=vye(i),s=o*Math.PI/180,u=Math.atan(r/n),c=s>u&&s<Math.PI-u?r/Math.sin(s):n/Math.cos(s);return Math.abs(c)},Tye={dots:[],areas:[],lines:[]},AH=Ai({name:"referenceElements",initialState:Tye,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=zs(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=zs(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=zs(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:Ixe,removeDot:xxe,addArea:Rxe,removeArea:Pxe,addLine:Mxe,removeLine:Dxe}=AH.actions,Eye=AH.reducer,wye=x.createContext(void 0),bye=t=>{var{children:e}=t,[n]=x.useState("".concat(_m("recharts"),"-clip")),r=vH();if(r==null)return null;var{x:i,y:o,width:s,height:u}=r;return x.createElement(wye.Provider,{value:n},x.createElement("defs",null,x.createElement("clipPath",{id:n},x.createElement("rect",{x:i,y:o,height:u,width:s}))),e)};function xS(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function CH(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function Sye(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return _ye(r,n)}function Aye(t,e,n){var r=n==="width",{x:i,y:o,width:s,height:u}=t;return e===1?{start:r?i:o,end:r?i+s:o+u}:{start:r?i+s:o+u,end:r?i:o}}function K_(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var o=n();return t*(e-t*o/2-r)>=0&&t*(e+t*o/2-i)<=0}function Cye(t,e){return CH(t,e+1)}function Iye(t,e,n,r,i){for(var o=(r||[]).slice(),{start:s,end:u}=e,c=0,f=1,h=s,y=function(){var b=r==null?void 0:r[c];if(b===void 0)return{v:CH(r,f)};var S=c,A,R=()=>(A===void 0&&(A=n(b,S)),A),D=b.coordinate,M=c===0||K_(t,D,R,h,u);M||(c=0,h=s,f+=1),M&&(h=D+t*(R()/2+i),c+=f)},v;f<=o.length;)if(v=y(),v)return v.v;return[]}function ML(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ML(Object(n),!0).forEach(function(r){xye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ML(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xye(t,e,n){return(e=Rye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rye(t){var e=Pye(t,"string");return typeof e=="symbol"?e:e+""}function Pye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mye(t,e,n,r,i){for(var o=(r||[]).slice(),s=o.length,{start:u}=e,{end:c}=e,f=function(v){var E=o[v],b,S=()=>(b===void 0&&(b=n(E,v)),b);if(v===s-1){var A=t*(E.coordinate+t*S()/2-c);o[v]=E=wr(wr({},E),{},{tickCoord:A>0?E.coordinate-A*t:E.coordinate})}else o[v]=E=wr(wr({},E),{},{tickCoord:E.coordinate});var R=K_(t,E.tickCoord,S,u,c);R&&(c=E.tickCoord-t*(S()/2+i),o[v]=wr(wr({},E),{},{isShow:!0}))},h=s-1;h>=0;h--)f(h);return o}function Dye(t,e,n,r,i,o){var s=(r||[]).slice(),u=s.length,{start:c,end:f}=e;if(o){var h=r[u-1],y=n(h,u-1),v=t*(h.coordinate+t*y/2-f);s[u-1]=h=wr(wr({},h),{},{tickCoord:v>0?h.coordinate-v*t:h.coordinate});var E=K_(t,h.tickCoord,()=>y,c,f);E&&(f=h.tickCoord-t*(y/2+i),s[u-1]=wr(wr({},h),{},{isShow:!0}))}for(var b=o?u-1:u,S=function(D){var M=s[D],U,q=()=>(U===void 0&&(U=n(M,D)),U);if(D===0){var z=t*(M.coordinate-t*q()/2-c);s[D]=M=wr(wr({},M),{},{tickCoord:z<0?M.coordinate-z*t:M.coordinate})}else s[D]=M=wr(wr({},M),{},{tickCoord:M.coordinate});var k=K_(t,M.tickCoord,q,c,f);k&&(c=M.tickCoord+t*(q()/2+i),s[D]=wr(wr({},M),{},{isShow:!0}))},A=0;A<b;A++)S(A);return s}function Nye(t,e,n){var{tick:r,ticks:i,viewBox:o,minTickGap:s,orientation:u,interval:c,tickFormatter:f,unit:h,angle:y}=t;if(!i||!i.length||!r)return[];if(Ye(c)||rg.isSsr){var v;return(v=Cye(i,Ye(c)?c:0))!==null&&v!==void 0?v:[]}var E=[],b=u==="top"||u==="bottom"?"width":"height",S=h&&b==="width"?Kp(h,{fontSize:e,letterSpacing:n}):{width:0,height:0},A=(M,U)=>{var q=typeof f=="function"?f(M.value,U):M.value;return b==="width"?Sye(Kp(q,{fontSize:e,letterSpacing:n}),S,y):Kp(q,{fontSize:e,letterSpacing:n})[b]},R=i.length>=2?vi(i[1].coordinate-i[0].coordinate):1,D=Aye(o,R,b);return c==="equidistantPreserveStart"?Iye(R,D,A,i,s):(c==="preserveStart"||c==="preserveStartEnd"?E=Dye(R,D,A,i,s,c==="preserveStartEnd"):E=Mye(R,D,A,i,s),E.filter(M=>M.isShow))}var kye=["viewBox"],Oye=["viewBox"];function Sf(){return Sf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sf.apply(null,arguments)}function DL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Un(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DL(Object(n),!0).forEach(function(r){ZR(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function NL(t,e){if(t==null)return{};var n,r,i=Vye(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Vye(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function ZR(t,e,n){return(e=Lye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lye(t){var e=Uye(t,"string");return typeof e=="symbol"?e:e+""}function Uye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class Gd extends x.Component{constructor(e){super(e),this.tickRefs=x.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(e,n){var{viewBox:r}=e,i=NL(e,kye),o=this.props,{viewBox:s}=o,u=NL(o,Oye);return!xS(r,s)||!xS(i,u)||!xS(n,this.state)}getTickLineCoord(e){var{x:n,y:r,width:i,height:o,orientation:s,tickSize:u,mirror:c,tickMargin:f}=this.props,h,y,v,E,b,S,A=c?-1:1,R=e.tickSize||u,D=Ye(e.tickCoord)?e.tickCoord:e.coordinate;switch(s){case"top":h=y=e.coordinate,E=r+ +!c*o,v=E-A*R,S=v-A*f,b=D;break;case"left":v=E=e.coordinate,y=n+ +!c*i,h=y-A*R,b=h-A*f,S=D;break;case"right":v=E=e.coordinate,y=n+ +c*i,h=y+A*R,b=h+A*f,S=D;break;default:h=y=e.coordinate,E=r+ +c*o,v=E+A*R,S=v+A*f,b=D;break}return{line:{x1:h,y1:v,x2:y,y2:E},tick:{x:b,y:S}}}getTickTextAnchor(){var{orientation:e,mirror:n}=this.props;switch(e){case"left":return n?"start":"end";case"right":return n?"end":"start";default:return"middle"}}getTickVerticalAnchor(){var{orientation:e,mirror:n}=this.props;switch(e){case"left":case"right":return"middle";case"top":return n?"start":"end";default:return n?"end":"start"}}renderAxisLine(){var{x:e,y:n,width:r,height:i,orientation:o,mirror:s,axisLine:u}=this.props,c=Un(Un(Un({},Qn(this.props,!1)),Qn(u,!1)),{},{fill:"none"});if(o==="top"||o==="bottom"){var f=+(o==="top"&&!s||o==="bottom"&&s);c=Un(Un({},c),{},{x1:e,y1:n+f*i,x2:e+r,y2:n+f*i})}else{var h=+(o==="left"&&!s||o==="right"&&s);c=Un(Un({},c),{},{x1:e+h*r,y1:n,x2:e+h*r,y2:n+i})}return x.createElement("line",Sf({},c,{className:Kt("recharts-cartesian-axis-line",ud(u,"className"))}))}static renderTickItem(e,n,r){var i,o=Kt(n.className,"recharts-cartesian-axis-tick-value");if(x.isValidElement(e))i=x.cloneElement(e,Un(Un({},n),{},{className:o}));else if(typeof e=="function")i=e(Un(Un({},n),{},{className:o}));else{var s="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(s=Kt(s,e.className)),i=x.createElement(YR,Sf({},n,{className:s}),r)}return i}renderTicks(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:i,stroke:o,tick:s,tickFormatter:u,unit:c,padding:f,tickTextProps:h}=this.props,y=Nye(Un(Un({},this.props),{},{ticks:r}),e,n),v=this.getTickTextAnchor(),E=this.getTickVerticalAnchor(),b=H0(this.props),S=Qn(s,!1),A=Un(Un({},b),{},{fill:"none"},Qn(i,!1)),R=y.map((D,M)=>{var{line:U,tick:q}=this.getTickLineCoord(D),z=Un(Un(Un(Un({textAnchor:v,verticalAnchor:E},b),{},{stroke:"none",fill:o},S),q),{},{index:M,payload:D,visibleTicksCount:y.length,tickFormatter:u,padding:f},h);return x.createElement(El,Sf({className:"recharts-cartesian-axis-tick",key:"tick-".concat(D.value,"-").concat(D.coordinate,"-").concat(D.tickCoord)},kx(this.props,D,M)),i&&x.createElement("line",Sf({},A,U,{className:Kt("recharts-cartesian-axis-tick-line",ud(i,"className"))})),s&&Gd.renderTickItem(s,z,"".concat(typeof u=="function"?u(D.value,M):D.value).concat(c||"")))});return R.length>0?x.createElement("g",{className:"recharts-cartesian-axis-ticks"},R):null}render(){var{axisLine:e,width:n,height:r,className:i,hide:o}=this.props;if(o)return null;var{ticks:s}=this.props;return n!=null&&n<=0||r!=null&&r<=0?null:x.createElement(El,{className:Kt("recharts-cartesian-axis",i),ref:u=>{if(u){var c=u.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(c);var f=c[0];if(f){var h=window.getComputedStyle(f).fontSize,y=window.getComputedStyle(f).letterSpacing;(h!==this.state.fontSize||y!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(f).fontSize,letterSpacing:window.getComputedStyle(f).letterSpacing})}}}},e&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,s),x.createElement(Vpe,{x:this.props.x,y:this.props.y,width:this.props.width,height:this.props.height},x.createElement(Kpe,{label:this.props.label}),this.props.children))}}ZR(Gd,"displayName","CartesianAxis");ZR(Gd,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Fye=["children"],Bye=["dangerouslySetInnerHTML","ticks"],qye=["id"];function IH(t,e,n){return(e=$ye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $ye(t){var e=zye(t,"string");return typeof e=="symbol"?e:e+""}function zye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fC(){return fC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fC.apply(null,arguments)}function dC(t,e){if(t==null)return{};var n,r,i=Hye(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Hye(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Gye(t){var e=tr(),n=x.useMemo(()=>{var{children:r}=t,i=dC(t,Fye);return i},[t]);return x.useEffect(()=>(e(Kme(n)),()=>{e(jme(n))}),[n,e]),t.children}var Kye=t=>{var{xAxisId:e,className:n}=t,r=$e(jx),i=Eo(),o="xAxis",s=$e(A=>$d(A,o,e,i)),u=$e(A=>Cz(A,o,e,i)),c=$e(A=>wz(A,e)),f=$e(A=>sde(A,e)),h=$e(A=>G5(A,e));if(c==null||f==null||h==null)return null;var{dangerouslySetInnerHTML:y,ticks:v}=t,E=dC(t,Bye),{id:b}=h,S=dC(h,qye);return x.createElement(Gd,fC({},E,S,{scale:s,x:f.x,y:f.y,width:c.width,height:c.height,className:Kt("recharts-".concat(o," ").concat(o),n),viewBox:r,ticks:u}))},jye=t=>{var e,n,r,i,o;return x.createElement(Gye,{interval:(e=t.interval)!==null&&e!==void 0?e:"preserveEnd",id:t.xAxisId,scale:t.scale,type:t.type,padding:t.padding,allowDataOverflow:t.allowDataOverflow,domain:t.domain,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,includeHidden:(n=t.includeHidden)!==null&&n!==void 0?n:!1,reversed:t.reversed,ticks:t.ticks,height:t.height,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:(r=t.angle)!==null&&r!==void 0?r:0,minTickGap:(i=t.minTickGap)!==null&&i!==void 0?i:5,tick:(o=t.tick)!==null&&o!==void 0?o:!0,tickFormatter:t.tickFormatter},x.createElement(Kye,t))};class e1 extends x.Component{render(){return x.createElement(jye,this.props)}}IH(e1,"displayName","XAxis");IH(e1,"defaultProps",{allowDataOverflow:ci.allowDataOverflow,allowDecimals:ci.allowDecimals,allowDuplicatedCategory:ci.allowDuplicatedCategory,height:ci.height,hide:!1,mirror:ci.mirror,orientation:ci.orientation,padding:ci.padding,reversed:ci.reversed,scale:ci.scale,tickCount:ci.tickCount,type:ci.type,xAxisId:0});var Wye=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:o=0}=t,s=0;if(e){e.forEach(h=>{if(h){var y=h.getBoundingClientRect();y.width>s&&(s=y.width)}});var u=n?n.getBoundingClientRect().width:0,c=i+o,f=s+c+u+(n?r:0);return Math.round(f)}return 0},Yye=["dangerouslySetInnerHTML","ticks"],Jye=["id"];function xH(t,e,n){return(e=Qye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qye(t){var e=Xye(t,"string");return typeof e=="symbol"?e:e+""}function Xye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hC(){return hC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hC.apply(null,arguments)}function kL(t,e){if(t==null)return{};var n,r,i=Zye(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Zye(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function eve(t){var e=tr();return x.useEffect(()=>(e(Wme(t)),()=>{e(Yme(t))}),[t,e]),null}var tve=t=>{var e,{yAxisId:n,className:r,width:i,label:o}=t,s=x.useRef(null),u=x.useRef(null),c=$e(jx),f=Eo(),h=tr(),y="yAxis",v=$e(z=>$d(z,y,n,f)),E=$e(z=>bz(z,n)),b=$e(z=>ade(z,n)),S=$e(z=>Cz(z,y,n,f)),A=$e(z=>K5(z,n));if(x.useLayoutEffect(()=>{var z;if(!(i!=="auto"||!E||JR(o)||x.isValidElement(o)||A==null)){var k=s.current,V=k==null||(z=k.tickRefs)===null||z===void 0?void 0:z.current,{tickSize:N,tickMargin:$}=k.props,F=Wye({ticks:V,label:u.current,labelGapWithTick:5,tickSize:N,tickMargin:$});Math.round(E.width)!==Math.round(F)&&h(Jme({id:n,width:F}))}},[s,s==null||(e=s.current)===null||e===void 0||(e=e.tickRefs)===null||e===void 0?void 0:e.current,E==null?void 0:E.width,E,h,o,n,i]),E==null||b==null||A==null)return null;var{dangerouslySetInnerHTML:R,ticks:D}=t,M=kL(t,Yye),{id:U}=A,q=kL(A,Jye);return x.createElement(Gd,hC({},M,q,{ref:s,labelRef:u,scale:v,x:b.x,y:b.y,tickTextProps:i==="auto"?{width:void 0}:{width:i},width:E.width,height:E.height,className:Kt("recharts-".concat(y," ").concat(y),r),viewBox:c,ticks:S}))},nve=t=>{var e,n,r,i,o;return x.createElement(x.Fragment,null,x.createElement(eve,{interval:(e=t.interval)!==null&&e!==void 0?e:"preserveEnd",id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:(n=t.includeHidden)!==null&&n!==void 0?n:!1,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:(r=t.angle)!==null&&r!==void 0?r:0,minTickGap:(i=t.minTickGap)!==null&&i!==void 0?i:5,tick:(o=t.tick)!==null&&o!==void 0?o:!0,tickFormatter:t.tickFormatter}),x.createElement(tve,t))},rve={allowDataOverflow:fi.allowDataOverflow,allowDecimals:fi.allowDecimals,allowDuplicatedCategory:fi.allowDuplicatedCategory,hide:!1,mirror:fi.mirror,orientation:fi.orientation,padding:fi.padding,reversed:fi.reversed,scale:fi.scale,tickCount:fi.tickCount,type:fi.type,width:fi.width,yAxisId:0};class t1 extends x.Component{render(){return x.createElement(nve,this.props)}}xH(t1,"displayName","YAxis");xH(t1,"defaultProps",rve);var RS={exports:{}},PS={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OL;function ive(){if(OL)return PS;OL=1;var t=_d();function e(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,o=t.useEffect,s=t.useMemo,u=t.useDebugValue;return PS.useSyncExternalStoreWithSelector=function(c,f,h,y,v){var E=i(null);if(E.current===null){var b={hasValue:!1,value:null};E.current=b}else b=E.current;E=s(function(){function A(q){if(!R){if(R=!0,D=q,q=y(q),v!==void 0&&b.hasValue){var z=b.value;if(v(z,q))return M=z}return M=q}if(z=M,n(D,q))return z;var k=y(q);return v!==void 0&&v(z,k)?(D=q,z):(D=q,M=k)}var R=!1,D,M,U=h===void 0?null:h;return[function(){return A(f())},U===null?void 0:function(){return A(U())}]},[f,h,y,v]);var S=r(c,E[0],E[1]);return o(function(){b.hasValue=!0,b.value=S},[S]),u(S),S},PS}var VL;function ove(){return VL||(VL=1,RS.exports=ive()),RS.exports}ove();function sve(t){t()}function ave(){let t=null,e=null;return{clear(){t=null,e=null},notify(){sve(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var LL={notify(){},get:()=>[]};function lve(t,e){let n,r=LL,i=0,o=!1;function s(S){h();const A=r.subscribe(S);let R=!1;return()=>{R||(R=!0,A(),y())}}function u(){r.notify()}function c(){b.onStateChange&&b.onStateChange()}function f(){return o}function h(){i++,n||(n=t.subscribe(c),r=ave())}function y(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=LL)}function v(){o||(o=!0,h())}function E(){o&&(o=!1,y())}const b={addNestedSub:s,notifyNestedSubs:u,handleChangeWrapper:c,isSubscribed:f,trySubscribe:v,tryUnsubscribe:E,getListeners:()=>r};return b}var uve=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",cve=uve(),fve=()=>typeof navigator<"u"&&navigator.product==="ReactNative",dve=fve(),hve=()=>cve||dve?x.useLayoutEffect:x.useEffect,pve=hve(),MS=Symbol.for("react-redux-context"),DS=typeof globalThis<"u"?globalThis:{};function mve(){if(!x.createContext)return{};const t=DS[MS]??(DS[MS]=new Map);let e=t.get(x.createContext);return e||(e=x.createContext(null),t.set(x.createContext,e)),e}var gve=mve();function yve(t){const{children:e,context:n,serverState:r,store:i}=t,o=x.useMemo(()=>{const c=lve(i);return{store:i,subscription:c,getServerState:r?()=>r:void 0}},[i,r]),s=x.useMemo(()=>i.getState(),[i]);pve(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),s!==i.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,s]);const u=n||gve;return x.createElement(u.Provider,{value:o},e)}var vve=yve,_ve=(t,e)=>e,n1=se([_ve,xt,$5,$n,qz,ha,fhe,nr],ghe),r1=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},RH=Zi("mouseClick"),PH=tg();PH.startListening({actionCreator:RH,effect:(t,e)=>{var n=t.payload,r=n1(e.getState(),r1(n));(r==null?void 0:r.activeIndex)!=null&&e.dispatch(Tde({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var pC=Zi("mouseMove"),MH=tg();MH.startListening({actionCreator:pC,effect:(t,e)=>{var n=t.payload,r=e.getState(),i=BR(r,r.tooltip.settings.shared),o=n1(r,r1(n));i==="axis"&&((o==null?void 0:o.activeIndex)!=null?e.dispatch(kz({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):e.dispatch(Nz()))}});function Tve(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":e}var UL={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},DH=Ai({name:"rootProps",initialState:UL,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:UL.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className}}}),Eve=DH.reducer,{updateOptions:wve}=DH.actions,NH=Ai({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:Nxe}=NH.actions,bve=NH.reducer,kH=Zi("keyDown"),OH=Zi("focus"),i1=tg();i1.startListening({actionCreator:kH,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,o=t.payload;if(!(o!=="ArrowRight"&&o!=="ArrowLeft"&&o!=="Enter")){var s=Number(qR(i,Hd(n))),u=ha(n);if(o==="Enter"){var c=q_(n,"axis","hover",String(i.index));e.dispatch(sC({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:c}));return}var f=fde(n),h=f==="left-to-right"?1:-1,y=o==="ArrowRight"?1:-1,v=s+y*h;if(!(u==null||v>=u.length||v<0)){var E=q_(n,"axis","hover",String(v));e.dispatch(sC({active:!0,activeIndex:v.toString(),activeDataKey:void 0,activeCoordinate:E}))}}}}});i1.startListening({actionCreator:OH,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var o="0",s=q_(n,"axis","hover",String(o));e.dispatch(sC({activeDataKey:void 0,active:!0,activeIndex:o,activeCoordinate:s}))}}}});var $i=Zi("externalEvent"),VH=tg();VH.startListening({actionCreator:$i,effect:(t,e)=>{if(t.payload.handler!=null){var n=e.getState(),r={activeCoordinate:nhe(n),activeDataKey:Gz(n),activeIndex:vd(n),activeLabel:Hz(n),activeTooltipIndex:vd(n),isTooltipActive:rhe(n)};t.payload.handler(r,t.payload.reactEvent)}}});var Sve=se([zd],t=>t.tooltipItemPayloads),Ave=se([Sve,dg,(t,e,n)=>e,(t,e,n)=>n],(t,e,n,r)=>{var i=t.find(u=>u.settings.dataKey===r);if(i!=null){var{positions:o}=i;if(o!=null){var s=e(o,n);return s}}}),LH=Zi("touchMove"),UH=tg();UH.startListening({actionCreator:LH,effect:(t,e)=>{var n=t.payload,r=e.getState(),i=BR(r,r.tooltip.settings.shared);if(i==="axis"){var o=n1(r,r1({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));(o==null?void 0:o.activeIndex)!=null&&e.dispatch(kz({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(i==="item"){var s,u=n.touches[0],c=document.elementFromPoint(u.clientX,u.clientY);if(!c||!c.getAttribute)return;var f=c.getAttribute(jse),h=(s=c.getAttribute(Wse))!==null&&s!==void 0?s:void 0,y=Ave(e.getState(),f,h);e.dispatch(Dz({activeDataKey:h,activeIndex:f,activeCoordinate:y}))}}});var Cve=i$({brush:pye,cartesianAxis:Qme,chartData:Nhe,errorBars:fge,graphicalItems:Bme,layout:gse,legend:dae,options:xhe,polarAxis:lme,polarOptions:bve,referenceElements:Eye,rootProps:Eve,tooltip:Ede}),Ive=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return qoe({reducer:Cve,preloadedState:e,middleware:r=>r({serializableCheck:!1}).concat([PH.middleware,MH.middleware,i1.middleware,VH.middleware,UH.middleware]),devTools:!!window.RECHARTS_DEV_TOOLS_ENABLED&&{serialize:{replacer:Tve},name:"recharts-".concat(n)}})};function xve(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=Eo(),o=x.useRef(null);if(i)return n;o.current==null&&(o.current=Ive(e,r));var s=Bx;return x.createElement(vve,{context:s,store:o.current},n)}function Rve(t){var{layout:e,width:n,height:r,margin:i}=t,o=tr(),s=Eo();return x.useEffect(()=>{s||(o(hse(e)),o(pse({width:n,height:r})),o(dse(i)))},[o,s,e,n,r,i]),null}function Pve(t){var e=tr();return x.useEffect(()=>{e(wve(t))},[e,t]),null}var Mve=["children"];function Dve(t,e){if(t==null)return{};var n,r,i=Nve(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Nve(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function j_(){return j_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},j_.apply(null,arguments)}var kve={width:"100%",height:"100%"},Ove=x.forwardRef((t,e)=>{var n=aae(),r=lae(),i=M$();if(!A_(n)||!A_(r))return null;var{children:o,otherAttributes:s,title:u,desc:c}=t,f,h;return typeof s.tabIndex=="number"?f=s.tabIndex:f=i?0:void 0,typeof s.role=="string"?h=s.role:h=i?"application":void 0,x.createElement(C3,j_({},s,{title:u,desc:c,role:h,tabIndex:f,width:n,height:r,style:kve,ref:e}),o)}),Vve=t=>{var{children:e}=t,n=$e(rT);if(!n)return null;var{width:r,height:i,y:o,x:s}=n;return x.createElement(C3,{width:r,height:i,x:s,y:o},e)},FL=x.forwardRef((t,e)=>{var{children:n}=t,r=Dve(t,Mve),i=Eo();return i?x.createElement(Vve,null,n):x.createElement(Ove,j_({ref:e},r),n)});function Lve(){var t=tr(),[e,n]=x.useState(null),r=$e(Kse);return x.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),o=i.width/e.offsetWidth;Si(o)&&o!==r&&t(mse(o))}},[e,t,r]),n}function BL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Uve(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BL(Object(n),!0).forEach(function(r){Fve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fve(t,e,n){return(e=Bve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bve(t){var e=qve(t,"string");return typeof e=="symbol"?e:e+""}function qve(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $ve=x.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:o,onContextMenu:s,onDoubleClick:u,onMouseDown:c,onMouseEnter:f,onMouseLeave:h,onMouseMove:y,onMouseUp:v,onTouchEnd:E,onTouchMove:b,onTouchStart:S,style:A,width:R}=t,D=tr(),[M,U]=x.useState(null),[q,z]=x.useState(null);$he();var k=Lve(),V=x.useCallback(le=>{k(le),typeof e=="function"&&e(le),U(le),z(le)},[k,e,U,z]),N=x.useCallback(le=>{D(RH(le)),D($i({handler:o,reactEvent:le}))},[D,o]),$=x.useCallback(le=>{D(pC(le)),D($i({handler:f,reactEvent:le}))},[D,f]),F=x.useCallback(le=>{D(Nz()),D($i({handler:h,reactEvent:le}))},[D,h]),G=x.useCallback(le=>{D(pC(le)),D($i({handler:y,reactEvent:le}))},[D,y]),H=x.useCallback(()=>{D(OH())},[D]),Ae=x.useCallback(le=>{D(kH(le.key))},[D]),Se=x.useCallback(le=>{D($i({handler:s,reactEvent:le}))},[D,s]),ee=x.useCallback(le=>{D($i({handler:u,reactEvent:le}))},[D,u]),he=x.useCallback(le=>{D($i({handler:c,reactEvent:le}))},[D,c]),Te=x.useCallback(le=>{D($i({handler:v,reactEvent:le}))},[D,v]),Ve=x.useCallback(le=>{D($i({handler:S,reactEvent:le}))},[D,S]),j=x.useCallback(le=>{D(LH(le)),D($i({handler:b,reactEvent:le}))},[D,b]),ce=x.useCallback(le=>{D($i({handler:E,reactEvent:le}))},[D,E]);return x.createElement(Qz.Provider,{value:M},x.createElement(Vre.Provider,{value:q},x.createElement("div",{className:Kt("recharts-wrapper",r),style:Uve({position:"relative",cursor:"default",width:R,height:i},A),onClick:N,onContextMenu:Se,onDoubleClick:ee,onFocus:H,onKeyDown:Ae,onMouseDown:he,onMouseEnter:$,onMouseLeave:F,onMouseMove:G,onMouseUp:Te,onTouchEnd:ce,onTouchMove:j,onTouchStart:Ve,ref:V},n)))}),zve=["children","className","width","height","style","compact","title","desc"];function Hve(t,e){if(t==null)return{};var n,r,i=Gve(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Gve(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Kve=x.forwardRef((t,e)=>{var{children:n,className:r,width:i,height:o,style:s,compact:u,title:c,desc:f}=t,h=Hve(t,zve),y=H0(h);return u?x.createElement(FL,{otherAttributes:y,title:c,desc:f},n):x.createElement($ve,{className:r,style:s,width:i,height:o,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},x.createElement(FL,{otherAttributes:y,title:c,desc:f,ref:e},x.createElement(bye,null,n)))}),jve=["width","height"];function mC(){return mC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mC.apply(null,arguments)}function Wve(t,e){if(t==null)return{};var n,r,i=Yve(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Yve(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Jve={top:5,right:5,bottom:5,left:5},Qve={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Jve,reverseStackOrder:!1,syncMethod:"index"},Xve=x.forwardRef(function(e,n){var r,i=Dl(e.categoricalChartProps,Qve),{width:o,height:s}=i,u=Wve(i,jve);if(!A_(o)||!A_(s))return null;var{chartName:c,defaultTooltipEventType:f,validateTooltipEventTypes:h,tooltipPayloadSearcher:y,categoricalChartProps:v}=e,E={chartName:c,defaultTooltipEventType:f,validateTooltipEventTypes:h,tooltipPayloadSearcher:y,eventEmitter:void 0};return x.createElement(xve,{preloadedState:{options:E},reduxStoreName:(r=v.id)!==null&&r!==void 0?r:c},x.createElement(hye,{chartData:v.data}),x.createElement(Rve,{width:o,height:s,layout:i.layout,margin:i.margin}),x.createElement(Pve,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),x.createElement(Kve,mC({},u,{width:o,height:s,ref:n})))}),Zve=["axis","item"],e_e=x.forwardRef((t,e)=>x.createElement(Xve,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Zve,tooltipPayloadSearcher:Che,categoricalChartProps:t,ref:e}));const t_e=()=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:O.jsx("path",{d:"M2 11h3v7H2v-7zM6 3h3v15H6V3zm5 8h3v7h-3v-7zm4-4h3v11h-3V7z"})}),n_e=()=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:O.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),r_e=()=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:O.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})}),i_e=()=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),o_e=({data:t})=>!t||t.length===0?O.jsx("p",{className:"text-stone-400 text-center py-8",children:"   ."}):O.jsx(spe,{width:"100%",height:300,children:O.jsxs(e_e,{data:t,margin:{top:5,right:20,left:-10,bottom:5},children:[O.jsx(e1,{dataKey:"label",stroke:"#a8a29e",fontSize:12,tickLine:!1,axisLine:!1}),O.jsx(t1,{stroke:"#a8a29e",fontSize:12,tickLine:!1,axisLine:!1,allowDecimals:!1}),O.jsx(Jhe,{contentStyle:{backgroundColor:"#292524",border:"1px solid #57534e",borderRadius:"0.375rem"},labelStyle:{color:"#f59e0b"},itemStyle:{color:"#d6d3d1"},formatter:e=>[e,""]}),O.jsx(wH,{dataKey:"value",fill:"#f59e0b",radius:[4,4,0,0]})]})}),s_e=({codeword:t,onUpdate:e,onDelete:n})=>{const[r,i]=x.useState(t.usedMessage),[o,s]=x.useState(t.introText||"  :"),[u,c]=x.useState(t.note||""),[f,h]=x.useState(!1),[y,v]=x.useState([]),[E,b]=x.useState(!1),[S,A]=x.useState(""),[R,D]=x.useState("day"),M=`${window.location.origin}${window.location.pathname}#/view?c=${t.id}`,U=`https://api.qrserver.com/v1/create-qr-code/?size=256x256&data=${encodeURIComponent(M)}`,q=async()=>{b(!0),A(""),v([]);try{const k=zi(Ns(Kr,"codewords",t.id,"viewEvents"),u_("viewedAt","asc")),N=(await _x(k)).docs.map(G=>G.data().viewedAt.toDate());if(N.length===0){b(!1);return}const $={};N.forEach(G=>{let H="";R==="day"?H=G.toLocaleDateString("ru-RU",{year:"2-digit",month:"2-digit",day:"2-digit"}):H=G.toLocaleDateString("ru-RU",{year:"2-digit",month:"2-digit",day:"2-digit"})+` ${G.getHours()}:00`,$[H]=($[H]||0)+1});const F=Object.keys($).map(G=>({label:G,value:$[G]}));v(F)}catch(k){console.error("Error fetching stats:",k),A("   .")}finally{b(!1)}};x.useEffect(()=>{f&&q()},[f,R]);const z=async()=>{try{const k=await fetch(U);if(!k.ok)throw new Error("QR code fetch failed");const V=await k.blob(),N=window.URL.createObjectURL(V),$=document.createElement("a");$.href=N;const F=t.word.replace(/[^a-z0-9-]/gi,"_").toLowerCase();$.setAttribute("download",`qr_${F}.png`),document.body.appendChild($),$.click(),$.parentNode&&$.parentNode.removeChild($),window.URL.revokeObjectURL(N)}catch(k){console.error("Failed to download QR code",k),alert("   QR-.")}};return O.jsxs(O.Fragment,{children:[O.jsxs("div",{className:"bg-stone-800/70 border border-stone-700 p-4 rounded-md grid grid-cols-1 md:grid-cols-3 gap-4 items-start",children:[O.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2",children:[O.jsx("img",{src:U,alt:"QR Code",className:"w-36 h-36 border-2 border-stone-600 rounded-md"}),O.jsxs("button",{onClick:z,className:"flex items-center justify-center gap-2 w-full bg-stone-600 hover:bg-stone-500 text-stone-200 px-3 py-2 rounded-md text-sm transition-colors",children:[O.jsx(i_e,{})," QR"]}),O.jsx("a",{href:M,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-amber-400 hover:text-amber-300 break-all text-center pt-1",children:M})]}),O.jsxs("div",{className:"md:col-span-2 space-y-3",children:[O.jsxs("div",{children:[O.jsx("label",{htmlFor:`introText_${t.id}`,className:"text-sm font-bold text-stone-400 block",children:" :"}),O.jsx("input",{id:`introText_${t.id}`,type:"text",value:o,onChange:k=>s(k.target.value),onBlur:()=>e(t.id,{introText:o}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-3 py-1 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"})]}),O.jsxs("div",{children:[O.jsx("label",{className:"text-sm font-bold text-stone-400 block",children:" :"}),O.jsx("p",{className:"text-lg bg-stone-900 p-2 rounded-md font-bold text-stone-100 break-words",children:t.word})]}),O.jsxs("div",{children:[O.jsx("label",{htmlFor:`usedMsg_${t.id}`,className:"text-sm font-bold text-stone-400 block",children:" ( ):"}),O.jsx("input",{id:`usedMsg_${t.id}`,type:"text",value:r,onChange:k=>i(k.target.value),onBlur:()=>e(t.id,{usedMessage:r}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-3 py-1 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"})]}),O.jsxs("div",{children:[O.jsx("label",{htmlFor:`note_${t.id}`,className:"text-sm font-bold text-stone-400 block",children:" (  ):"}),O.jsx("textarea",{id:`note_${t.id}`,value:u,onChange:k=>c(k.target.value),onBlur:()=>e(t.id,{note:u}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-3 py-1 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all h-20 resize-y",placeholder:"    ..."})]}),O.jsxs("div",{className:"flex items-center justify-between pt-2",children:[O.jsxs("label",{htmlFor:`toggle_${t.id}`,className:"flex items-center cursor-pointer",children:[O.jsxs("div",{className:"relative",children:[O.jsx("input",{type:"checkbox",id:`toggle_${t.id}`,className:"sr-only",checked:t.isUsed,onChange:()=>e(t.id,{isUsed:!t.isUsed})}),O.jsx("div",{className:`block ${t.isUsed?"bg-amber-500":"bg-stone-600"} w-14 h-8 rounded-full transition-colors`}),O.jsx("div",{className:`dot absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition-transform ${t.isUsed?"transform translate-x-6":""}`})]}),O.jsx("div",{className:"ml-3 text-stone-300 font-semibold",children:t.isUsed?"":""})]}),O.jsxs("div",{className:"flex items-center gap-2 text-stone-400",children:[O.jsxs("div",{className:"flex items-center gap-1",title:"",children:[O.jsx(n_e,{}),O.jsx("span",{children:t.views||0})]}),O.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-1 bg-sky-800 hover:bg-sky-700 text-stone-100 px-3 py-2 rounded-md text-sm transition-colors",children:[O.jsx(t_e,{}),""]}),O.jsxs("button",{onClick:()=>n(t.id),className:"flex items-center gap-1 bg-red-800 hover:bg-red-700 text-stone-100 px-3 py-2 rounded-md text-sm transition-colors",children:[O.jsx(r_e,{}),""]})]})]})]})]}),f&&O.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",onClick:()=>h(!1),role:"dialog","aria-modal":"true","aria-labelledby":"stats-modal-title",children:O.jsxs("div",{className:"bg-stone-800 border border-stone-700 rounded-lg w-full max-w-4xl max-h-[90vh] flex flex-col",onClick:k=>k.stopPropagation(),children:[O.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-stone-700",children:[O.jsx("h3",{id:"stats-modal-title",className:"font-display text-2xl text-amber-400",children:" "}),O.jsx("button",{onClick:()=>h(!1),className:"text-stone-400 hover:text-white text-3xl leading-none","aria-label":"Close",children:""})]}),O.jsxs("div",{className:"p-4 flex-grow overflow-y-auto",children:[O.jsxs("div",{className:"flex gap-2 mb-4",children:[O.jsx("button",{onClick:()=>D("day"),className:`px-4 py-2 rounded-md font-semibold ${R==="day"?"bg-amber-500 text-stone-900":"bg-stone-700 text-stone-300 hover:bg-stone-600"}`,children:" "}),O.jsx("button",{onClick:()=>D("hour"),className:`px-4 py-2 rounded-md font-semibold ${R==="hour"?"bg-amber-500 text-stone-900":"bg-stone-700 text-stone-300 hover:bg-stone-600"}`,children:" "})]}),E&&O.jsx("p",{className:"animate-pulse text-center py-8 font-display text-xl text-stone-400",children:" ..."}),S&&O.jsx("p",{className:"text-red-500 text-center py-8",children:S}),!E&&!S&&O.jsx(o_e,{data:y})]})]})})]})},a_e=()=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:O.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),l_e=()=>O.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[O.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),O.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]}),u_e=()=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:O.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})}),c_e=({game:t,onDelete:e})=>{var o;const n=(o=t.createdAt)==null?void 0:o.toDate().toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}),r=()=>{window.location.hash=`#/admin/quest/${t.id}`},i=()=>{window.location.hash=`#/play/${t.id}`};return O.jsxs("div",{className:"bg-stone-800/70 border border-stone-700 p-4 rounded-md flex justify-between items-center",children:[O.jsxs("div",{children:[O.jsx("h4",{className:"text-xl font-bold text-stone-100",children:t.title}),O.jsxs("div",{className:"text-sm text-stone-400 mt-1",children:[O.jsx("span",{className:`inline-block px-2 py-0.5 rounded-md mr-2 text-xs font-semibold ${t.status==="published"?"bg-green-900/50 text-green-300":"bg-sky-900/50 text-sky-300"}`,children:t.status==="published"?"":""}),O.jsxs("span",{children:[": ",n||"N/A"]})]})]}),O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsxs("button",{onClick:i,className:"flex items-center gap-1 bg-green-800 hover:bg-green-700 text-stone-100 px-3 py-2 rounded-md text-sm transition-colors",children:[O.jsx(a_e,{})," "]}),O.jsxs("button",{onClick:r,className:"flex items-center gap-1 bg-blue-800 hover:bg-blue-700 text-stone-100 px-3 py-2 rounded-md text-sm transition-colors",children:[O.jsx(l_e,{})," "]}),O.jsxs("button",{onClick:()=>e(t.id),className:"flex items-center gap-1 bg-red-800 hover:bg-red-700 text-stone-100 px-3 py-2 rounded-md text-sm transition-colors",children:[O.jsx(u_e,{})," "]})]})]})},f_e=()=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H5v-2H3v-2H1v-4a6 6 0 017.743-5.743z"})}),d_e=()=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),h_e=()=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:O.jsx("path",{d:"M17 3H5a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2zm-3 12H8v-4h6v4zm2-6H5V5h12v4z"})}),p_e=()=>{const[t,e]=x.useState("codewords"),[n,r]=x.useState([]),[i,o]=x.useState(""),[s,u]=x.useState("    ."),[c,f]=x.useState("  :"),[h,y]=x.useState([]),[v,E]=x.useState(""),[b,S]=x.useState(""),[A,R]=x.useState({type:"",text:""});x.useEffect(()=>{let N;if(t==="codewords"){const $=zi(Ns(Kr,"codewords"),u_("createdAt","desc"));N=gm($,F=>{const G=F.docs.map(H=>({...H.data(),id:H.id}));r(G)},F=>{console.error("Error fetching codewords:",F),alert("    .")})}else if(t==="quests"){const $=zi(Ns(Kr,"games"),u_("createdAt","desc"));N=gm($,F=>{const G=F.docs.map(H=>({...H.data(),id:H.id}));y(G)},F=>{console.error("Error fetching games:",F),alert("   .")})}return()=>N&&N()},[t]);const D=async N=>{if(N.preventDefault(),i.trim()!=="")try{await c_(Ns(Kr,"codewords"),{word:i.trim(),isUsed:!1,usedMessage:s.trim()||"    .",introText:c.trim()||"  :",note:"",createdAt:Df(),views:0}),o(""),f("  :"),u("    .")}catch($){console.error("Error adding codeword: ",$),alert("   .")}},M=async(N,$)=>{try{await mm(ho(Kr,"codewords",N),$)}catch(F){console.error("Error updating codeword: ",F),alert("   .")}},U=async N=>{if(window.confirm(" ,     ?   ."))try{const $=zi(Ns(Kr,"codewords",N,"viewEvents")),F=await _x($),G=Ste(Kr);F.docs.forEach(H=>G.delete(H.ref)),await G.commit(),await EA(ho(Kr,"codewords",N))}catch($){console.error("Error deleting codeword:",$),alert("   .")}},q=async N=>{if(N.preventDefault(),v.trim()!=="")try{const $=`quest_${Date.now()}`;await c_(Ns(Kr,"games"),{title:v.trim(),status:"draft",createdAt:Df(),updatedAt:Df(),dsl:{format:"bk-quest@1",meta:{id:$,title:v.trim(),version:1,defaultLocale:"ru"},assets:{images:{},audio:{}},state:{vars:{},inventory:[]},nodes:{start:{text:"This is the beginning."}}}}),E("")}catch($){console.error("Error adding quest: ",$),alert("   .")}},z=async N=>{if(window.confirm(" ,     ?      ."))try{await EA(ho(Kr,"games",N))}catch($){console.error("Error deleting quest:",$),alert("   .")}},k=async N=>{if(N.preventDefault(),R({type:"",text:""}),window.confirm(" ,    ?"))try{if(!Gp.currentUser)throw new Error("  .");if(!b||b.length<6)throw new Error("     6 .");await M4(Gp.currentUser,b),R({type:"success",text:"  !"}),S("")}catch($){R({type:"error",text:`: ${$.message}`})}},V=({tabName:N,label:$,children:F})=>O.jsxs("button",{onClick:()=>e(N),className:`flex items-center justify-center w-full px-4 py-3 font-display text-xl rounded-t-md transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-500
            ${t===N?"bg-stone-800/50 text-amber-400 border-b-2 border-amber-400":"bg-stone-900/50 text-stone-400 hover:bg-stone-800/50"}`,children:[F,$]});return O.jsxs("div",{className:"container mx-auto py-8 px-4",children:[O.jsxs("div",{className:"flex justify-between items-center mb-6",children:[O.jsx("h2",{className:"font-display text-4xl text-stone-200",children:" "}),O.jsx("button",{onClick:()=>tY(Gp),className:"bg-stone-700 hover:bg-stone-600 text-stone-200 font-semibold py-2 px-4 rounded-md transition-colors",children:""})]}),O.jsxs("div",{className:"bg-stone-800/50 border border-stone-700 p-6 rounded-md mb-8",children:[O.jsx("h3",{className:"font-display text-2xl text-amber-400 mb-4",children:" "}),O.jsxs("form",{onSubmit:k,className:"space-y-4",children:[O.jsx("input",{type:"password",value:b,onChange:N=>S(N.target.value),placeholder:"  ( 6 )",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),O.jsxs("button",{type:"submit",className:"w-full flex items-center justify-center font-display text-xl bg-amber-500 text-stone-900 py-2 rounded-md hover:bg-amber-400 transition-colors",children:[O.jsx(h_e,{}),"  "]}),A.text&&O.jsx("p",{className:A.type==="success"?"text-green-400":"text-red-500",children:A.text})]})]}),O.jsxs("div",{className:"flex mb-[-1px]",children:[O.jsx(V,{tabName:"codewords",label:" ",children:O.jsx(f_e,{})}),O.jsx(V,{tabName:"quests",label:"",children:O.jsx(d_e,{})})]}),O.jsxs("div",{className:"bg-stone-800/50 border border-stone-700 p-6 rounded-b-md rounded-tr-md",children:[t==="codewords"&&O.jsxs(O.Fragment,{children:[O.jsxs("div",{className:"mb-8",children:[O.jsx("h3",{className:"font-display text-2xl text-amber-400 mb-4",children:"  "}),O.jsxs("form",{onSubmit:D,className:"space-y-4",children:[O.jsx("input",{type:"text",value:c,onChange:N=>f(N.target.value),placeholder:"  ()",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),O.jsx("input",{type:"text",value:i,onChange:N=>o(N.target.value),placeholder:"  ",required:!0,className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),O.jsx("input",{type:"text",value:s,onChange:N=>u(N.target.value),placeholder:"   ",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),O.jsx("button",{type:"submit",className:"w-full font-display text-xl bg-amber-500 text-stone-900 py-2 rounded-md hover:bg-amber-400 transition-colors",children:" QR-"})]})]}),O.jsx("div",{className:"space-y-4",children:n.map(N=>O.jsx(s_e,{codeword:N,onUpdate:M,onDelete:U},N.id))})]}),t==="quests"&&O.jsxs(O.Fragment,{children:[O.jsxs("div",{className:"mb-8",children:[O.jsx("h3",{className:"font-display text-2xl text-amber-400 mb-4",children:"  "}),O.jsxs("form",{onSubmit:q,className:"flex gap-4",children:[O.jsx("input",{type:"text",value:v,onChange:N=>E(N.target.value),placeholder:" ",required:!0,className:"flex-grow bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),O.jsx("button",{type:"submit",className:"font-display text-xl bg-amber-500 text-stone-900 py-2 px-6 rounded-md hover:bg-amber-400 transition-colors",children:""})]})]}),O.jsx("div",{className:"space-y-4",children:h.length>0?h.map(N=>O.jsx(c_e,{game:N,onDelete:z},N.id)):O.jsx("p",{className:"text-stone-400 text-center py-4",children:"   ."})})]})]})]})},m_e=()=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),g_e=()=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),qL=({codeId:t})=>{const[e,n]=x.useState(null),[r,i]=x.useState("loading"),[o,s]=x.useState(!1),u=as();x.useEffect(()=>{const f=new URLSearchParams(u.search||u.hash.split("?")[1]),h=t||f.get("c");if(h){const y=ho(Kr,"codewords",h);(async()=>{try{const E=await vx(y);if(E.exists()){const b={id:E.id,...E.data()};n(b),i("found");const S=`viewed-${h}`;sessionStorage.getItem(S)||(await mm(y,{views:B6(1)}),await c_(Ns(y,"viewEvents"),{viewedAt:Df()}),sessionStorage.setItem(S,"true"))}else i("not-found")}catch(E){console.error("Failed to fetch codeword from Firestore:",E),i("error")}})()}else i("not-found")},[u,t]);const c=()=>{e&&!e.isUsed&&(navigator.clipboard.writeText(e.word),s(!0),setTimeout(()=>s(!1),2e3))};return r==="loading"?O.jsx("div",{className:"flex items-center justify-center min-h-[80vh]",children:O.jsx("p",{className:"font-display text-2xl text-stone-400 animate-pulse",children:" ..."})}):r==="not-found"||r==="error"?O.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] text-center p-4",children:[O.jsx("h2",{className:"font-display text-6xl text-red-500",children:"404"}),O.jsx("p",{className:"text-stone-300 text-xl mt-2",children:"  ."}),O.jsx("p",{className:"text-stone-500",children:",      ."})]}):e!=null&&e.isUsed?O.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] text-center p-4",children:[O.jsx("h2",{className:"font-display text-5xl text-amber-500",children:" "}),O.jsx("p",{className:"text-stone-300 text-xl mt-4 max-w-lg",children:e.usedMessage})]}):O.jsx("div",{className:"flex flex-col items-center justify-center min-h-[80vh] text-center p-4",children:O.jsxs("div",{className:"w-full max-w-2xl bg-stone-800/50 border-2 border-stone-700 p-8 rounded-lg shadow-2xl shadow-black/50",children:[O.jsx("p",{className:"text-stone-400 font-display text-2xl tracking-wide",children:(e==null?void 0:e.introText)||"  :"}),O.jsx("p",{className:"text-amber-400 font-bold text-3xl md:text-5xl my-4 break-words select-all tracking-widest",children:e==null?void 0:e.word}),O.jsxs("button",{onClick:c,className:"w-full flex items-center justify-center gap-3 mt-6 bg-stone-700 hover:bg-amber-500 hover:text-stone-900 text-stone-200 font-display text-2xl py-3 rounded-md transition-all duration-300",children:[o?O.jsx(g_e,{}):O.jsx(m_e,{}),o?"!":" "]})]})})},y_e=()=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:O.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 110 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})}),$L=()=>{var M;const{questId:t}=EF(),[e,n]=x.useState(null),[r,i]=x.useState(null),[o,s]=x.useState("start"),[u,c]=x.useState(!0),[f,h]=x.useState(""),y=U=>U?typeof U=="string"?U:U[(e==null?void 0:e.dsl.meta.defaultLocale)||"ru"]||Object.values(U)[0]||"":"",v=x.useCallback((U,q)=>{if(U.all)return U.all.every(V=>v(V,q));if(U.any)return U.any.some(V=>v(V,q));if(U.not)return!v(U.not,q);const{vars:z,inventory:k}=q;return U.hp_eq!==void 0?z.hp===U.hp_eq:U.hp_gt!==void 0?z.hp>U.hp_gt:U.hp_gte!==void 0?z.hp>=U.hp_gte:U.hp_lt!==void 0?z.hp<U.hp_lt:U.hp_lte!==void 0?z.hp<=U.hp_lte:U.has_item?k.includes(U.has_item):U.missing_item?!k.includes(U.missing_item):U.var_eq?Object.entries(U.var_eq).every(([V,N])=>z[V]===N):U.var_neq?Object.entries(U.var_neq).every(([V,N])=>z[V]!==N):!0},[]),E=x.useCallback((U,q)=>{if(!U)return q;const z=JSON.parse(JSON.stringify(q));return U.forEach(k=>{k.add&&Object.entries(k.add).forEach(([V,N])=>{z.vars[V]=(z.vars[V]||0)+N}),k.set&&Object.entries(k.set).forEach(([V,N])=>{z.vars[V]=N}),k.inv_add&&!z.inventory.includes(k.inv_add)&&z.inventory.push(k.inv_add),k.inv_remove&&(z.inventory=z.inventory.filter(V=>V!==k.inv_remove))}),z},[]);x.useEffect(()=>{if(!t){h("  ."),c(!1);return}c(!0),h("");const U=ho(Kr,"games",t);vx(U).then(q=>{if(q.exists()){const z={id:q.id,...q.data()};n(z);const k=localStorage.getItem(`quest-save-${t}`);if(k){const{playerState:V,currentNodeId:N}=JSON.parse(k);i(V),s(N)}else i(z.dsl.state),s("start")}else h("  .");c(!1)}).catch(q=>{console.error("Error fetching quest:",q),h("   ."),c(!1)})},[t]),x.useEffect(()=>{if(e&&r){const U={questId:t,playerState:r,currentNodeId:o};localStorage.setItem(`quest-save-${t}`,JSON.stringify(U))}},[r,o,t,e]);const b=e==null?void 0:e.dsl.nodes[o];x.useEffect(()=>{if(!b||!r)return;const U=E(b.effects,r);if(JSON.stringify(U)!==JSON.stringify(r)){i(U);return}if(b.branch){for(const q of b.branch)if(v(q.when,r)){s(q.to);return}}b.fallback&&s(b.fallback)},[o,e,r,E,v]);const S=U=>{if(!r)return;const q=E(U.effects,r);i(q),s(U.to)},A=x.useCallback(()=>{!t||!e||window.confirm(" ,     ?    .")&&(localStorage.removeItem(`quest-save-${t}`),i(e.dsl.state),s("start"))},[t,e]);if(u)return O.jsx("div",{className:"text-center p-8 font-display text-4xl text-stone-400 animate-pulse",children:" ..."});if(f)return O.jsx("div",{className:"text-center p-8 text-2xl text-red-500",children:f});if(!e||!r||!b)return O.jsx("div",{className:"text-center p-8 text-2xl text-stone-400",children:"..."});const R=b.bg&&e.dsl.assets.images[b.bg]?e.dsl.assets.images[b.bg]:void 0,D=((M=b.choices)==null?void 0:M.filter(U=>U.when?v(U.when,r):!0))||[];return O.jsx("div",{className:"min-h-screen w-full flex items-center justify-center p-4 md:p-8",children:O.jsx("div",{className:"w-full max-w-4xl bg-cover bg-center rounded-lg shadow-2xl shadow-black/50 overflow-hidden border-2 border-stone-800",style:{backgroundImage:R?`url(${R})`:"none",backgroundColor:"#1c1917",minHeight:"70vh"},children:O.jsxs("div",{className:"bg-stone-900/80 backdrop-blur-sm p-6 md:p-8 flex flex-col h-full text-stone-200",children:[O.jsxs("div",{className:"flex items-center justify-between gap-4 mb-6 border-b border-stone-700 pb-4 text-sm",children:[O.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1",children:[Object.keys(r.vars).length>0&&Object.keys(r.vars).map(U=>O.jsxs("span",{className:"font-bold text-amber-400",children:[U.toUpperCase(),": ",O.jsx("span",{className:"font-normal text-stone-200",children:r.vars[U]??0})]},U)),r.inventory.length>0&&O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx("span",{className:"font-bold text-amber-400",children:":"}),O.jsx("span",{className:"text-stone-200",children:r.inventory.join(", ")})]})]}),O.jsxs("button",{onClick:A,className:"flex items-center justify-center font-display text-lg bg-stone-700 text-stone-200 py-2 px-4 rounded-md hover:bg-stone-600 transition-colors flex-shrink-0",children:[O.jsx(y_e,{}),""]})]}),O.jsxs("div",{className:"flex-grow",children:[O.jsx("h2",{className:"font-display text-3xl md:text-4xl text-amber-400 mb-4",children:y(b.title)}),O.jsx("p",{className:"text-stone-300 whitespace-pre-wrap leading-relaxed mb-6",children:y(b.text)}),b.end&&O.jsxs("div",{className:"text-center py-4 border-t border-stone-700 mt-6",children:[O.jsx("h3",{className:`font-display text-4xl ${b.end.type==="win"?"text-lime-400":"text-red-500"}`,children:b.end.type==="win"?"!":" "}),O.jsx("p",{className:"mt-4 text-stone-300",children:y(b.end.message)})]}),!b.end&&O.jsx("div",{className:"flex flex-col space-y-3",children:D.map((U,q)=>O.jsx("button",{onClick:()=>S(U),className:"text-left w-full p-4 bg-stone-800/70 border border-stone-600 rounded-md hover:bg-amber-500 hover:border-amber-400 hover:text-stone-900 transition-all text-stone-200 font-semibold",children:y(U.label)},q))})]})]})})})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let v_e,__e;function T_e(){return{geminiUrl:v_e,vertexUrl:__e}}function E_e(t,e,n,r){var i,o;if(!(t!=null&&t.baseUrl)){const s=T_e();return e?(i=s.vertexUrl)!==null&&i!==void 0?i:n:(o=s.geminiUrl)!==null&&o!==void 0?o:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gc{}function Ne(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function m(t,e,n){for(let o=0;o<e.length-1;o++){const s=e[o];if(s.endsWith("[]")){const u=s.slice(0,-2);if(!(u in t))if(Array.isArray(n))t[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[u])){const c=t[u];if(Array.isArray(n))for(let f=0;f<c.length;f++){const h=c[f];m(h,e.slice(o+1),n[f])}else for(const f of c)m(f,e.slice(o+1),n)}return}else if(s.endsWith("[0]")){const u=s.slice(0,-3);u in t||(t[u]=[{}]);const c=t[u];m(c[0],e.slice(o+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else t[r]=n}function p(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const r=e[n];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in t){const o=t[i];return Array.isArray(o)?o.map(s=>p(s,e.slice(n+1))):void 0}else return}else t=t[r]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gC(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var zL;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(zL||(zL={}));var HL;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(HL||(HL={}));var rl;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(rl||(rl={}));var GL;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(GL||(GL={}));var KL;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(KL||(KL={}));var jL;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(jL||(jL={}));var WL;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(WL||(WL={}));var YL;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(YL||(YL={}));var JL;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(JL||(JL={}));var QL;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(QL||(QL={}));var XL;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(XL||(XL={}));var ZL;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(ZL||(ZL={}));var eU;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(eU||(eU={}));var tU;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(tU||(tU={}));var nU;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(nU||(nU={}));var W_;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(W_||(W_={}));var rU;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(rU||(rU={}));var yC;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(yC||(yC={}));var iU;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(iU||(iU={}));var oU;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(oU||(oU={}));var sU;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(sU||(sU={}));var aU;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(aU||(aU={}));var lU;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(lU||(lU={}));var uU;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(uU||(uU={}));var cU;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(cU||(cU={}));var fU;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(fU||(fU={}));var dU;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(dU||(dU={}));var hU;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(hU||(hU={}));var pU;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(pU||(pU={}));var mU;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(mU||(mU={}));var gU;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(gU||(gU={}));var yU;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(yU||(yU={}));var vU;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(vU||(vU={}));var _U;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(_U||(_U={}));var TU;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(TU||(TU={}));var EU;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(EU||(EU={}));var wU;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(wU||(wU={}));var bU;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(bU||(bU={}));var SU;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(SU||(SU={}));var AU;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(AU||(AU={}));var CU;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(CU||(CU={}));var IU;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(IU||(IU={}));var xU;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(xU||(xU={}));var RU;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(RU||(RU={}));var PU;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(PU||(PU={}));var Af;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Af||(Af={}));class vC{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class vp{get text(){var e,n,r,i,o,s,u,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",h=!1;const y=[];for(const v of(c=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[E,b]of Object.entries(v))E!=="text"&&E!=="thought"&&(b!==null||b!==void 0)&&y.push(E);if(typeof v.text=="string"){if(typeof v.thought=="boolean"&&v.thought)continue;h=!0,f+=v.text}}return y.length>0&&console.warn(`there are non-text parts ${y} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?f:void 0}get data(){var e,n,r,i,o,s,u,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const h=[];for(const y of(c=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[v,E]of Object.entries(y))v!=="inlineData"&&(E!==null||E!==void 0)&&h.push(v);y.inlineData&&typeof y.inlineData.data=="string"&&(f+=atob(y.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,n,r,i,o,s,u,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(c=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var e,n,r,i,o,s,u,c,f;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(c=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(y=>y.executableCode).map(y=>y.executableCode).filter(y=>y!==void 0);if((h==null?void 0:h.length)!==0)return(f=h==null?void 0:h[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,n,r,i,o,s,u,c,f;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(c=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(y=>y.codeExecutionResult).map(y=>y.codeExecutionResult).filter(y=>y!==void 0);if((h==null?void 0:h.length)!==0)return(f=h==null?void 0:h[0])===null||f===void 0?void 0:f.output}}class MU{}class DU{}class w_e{}class b_e{}class S_e{}class A_e{}class NU{}class kU{}class OU{}class C_e{}class VU{}class Y_{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const r=new Y_;if(r.name=e.name,r.metadata=e.metadata,r.done=e.done,r.error=e.error,n){const i=e.response;if(i){const o=new VU,s=i.videos;o.generatedVideos=s==null?void 0:s.map(u=>({video:{uri:u.gcsUri,videoBytes:u.bytesBase64Encoded?gC(u.bytesBase64Encoded):void 0,mimeType:u.mimeType}})),o.raiMediaFilteredCount=i.raiMediaFilteredCount,o.raiMediaFilteredReasons=i.raiMediaFilteredReasons,r.response=o}}else{const i=e.response;if(i){const o=new VU,s=i.generateVideoResponse,u=s==null?void 0:s.generatedSamples;o.generatedVideos=u==null?void 0:u.map(c=>{const f=c.video;return{video:{uri:f==null?void 0:f.uri,videoBytes:f!=null&&f.encodedVideo?gC(f==null?void 0:f.encodedVideo):void 0,mimeType:c.encoding}}}),o.raiMediaFilteredCount=s==null?void 0:s.raiMediaFilteredCount,o.raiMediaFilteredReasons=s==null?void 0:s.raiMediaFilteredReasons,r.response=o}}return r}}class LU{}class UU{}class FU{}class I_e{}class x_e{}class R_e{}class BU{}class P_e{get text(){var e,n,r;let i="",o=!1;const s=[];for(const u of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[c,f]of Object.entries(u))c!=="text"&&c!=="thought"&&f!==null&&s.push(c);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;o=!0,i+=u.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var e,n,r;let i="";const o=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[u,c]of Object.entries(s))u!=="inlineData"&&c!==null&&o.push(u);s.inlineData&&typeof s.inlineData.data=="string"&&(i+=atob(s.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class M_e{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Tt(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function FH(t,e){const n=Tt(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function BH(t){return Array.isArray(t)?t.map(e=>J_(e)):[J_(t)]}function J_(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function qH(t){const e=J_(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function $H(t){const e=J_(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function qU(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function zH(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>qU(e)):[qU(t)]}function _C(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function $U(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function zU(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Cr(t){if(t==null)throw new Error("ContentUnion is required");return _C(t)?t:{role:"user",parts:zH(t)}}function HH(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=Cr(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=Cr(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Cr(n)):[Cr(e)]}function Wi(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if($U(t)||zU(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Cr(t)]}const e=[],n=[],r=_C(t[0]);for(const i of t){const o=_C(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(i);else{if($U(i)||zU(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:zH(n)}),e}function D_e(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(rl).includes(n[0].toUpperCase())?n[0].toUpperCase():rl.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(rl).includes(r.toUpperCase())?r.toUpperCase():rl.TYPE_UNSPECIFIED})}}function Vf(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&D_e(t.type,e);for(const[s,u]of Object.entries(t))if(u!=null)if(s=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(rl).includes(u.toUpperCase())?u.toUpperCase():rl.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=Vf(u);else if(r.includes(s)){const c=[];for(const f of u){if(f.type=="null"){e.nullable=!0;continue}c.push(Vf(f))}e[s]=c}else if(i.includes(s)){const c={};for(const[f,h]of Object.entries(u))c[f]=Vf(h);e[s]=c}else{if(s==="additionalProperties")continue;e[s]=u}return e}function o1(t){return Vf(t)}function s1(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function a1(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Kd(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Vf(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Vf(e.response));return t}function jd(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function N_e(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function pa(t,e){if(typeof e!="string")throw new Error("name must be a string");return N_e(t,e,"cachedContents")}function GH(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function yc(t){return gC(t)}function k_e(t){return t!=null&&typeof t=="object"&&"name"in t}function O_e(t){return t!=null&&typeof t=="object"&&"video"in t}function V_e(t){return t!=null&&typeof t=="object"&&"uri"in t}function KH(t){var e;let n;if(k_e(t)&&(n=t.name),!(V_e(t)&&(n=t.uri,n===void 0))&&!(O_e(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function jH(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function WH(t){for(const e of["models","tunedModels","publisherModels"])if(L_e(t,e))return t[e];return[]}function L_e(t,e){return t!==null&&typeof t=="object"&&e in t}function U_e(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function F_e(t,e={}){const n=[],r=new Set;for(const i of t){const o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const s=U_e(i,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function YH(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function B_e(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Wd(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function JH(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function q_e(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function $_e(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["data"]);n!=null&&m(e,["data"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function z_e(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function H_e(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],q_e(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],$_e(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],z_e(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const u=p(t,["codeExecutionResult"]);u!=null&&m(e,["codeExecutionResult"],u);const c=p(t,["executableCode"]);c!=null&&m(e,["executableCode"],c);const f=p(t,["functionCall"]);f!=null&&m(e,["functionCall"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const y=p(t,["text"]);return y!=null&&m(e,["text"],y),e}function QH(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>H_e(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function G_e(t){const e={},n=p(t,["anyOf"]);n!=null&&m(e,["anyOf"],n);const r=p(t,["default"]);r!=null&&m(e,["default"],r);const i=p(t,["description"]);i!=null&&m(e,["description"],i);const o=p(t,["enum"]);o!=null&&m(e,["enum"],o);const s=p(t,["example"]);s!=null&&m(e,["example"],s);const u=p(t,["format"]);u!=null&&m(e,["format"],u);const c=p(t,["items"]);c!=null&&m(e,["items"],c);const f=p(t,["maxItems"]);f!=null&&m(e,["maxItems"],f);const h=p(t,["maxLength"]);h!=null&&m(e,["maxLength"],h);const y=p(t,["maxProperties"]);y!=null&&m(e,["maxProperties"],y);const v=p(t,["maximum"]);v!=null&&m(e,["maximum"],v);const E=p(t,["minItems"]);E!=null&&m(e,["minItems"],E);const b=p(t,["minLength"]);b!=null&&m(e,["minLength"],b);const S=p(t,["minProperties"]);S!=null&&m(e,["minProperties"],S);const A=p(t,["minimum"]);A!=null&&m(e,["minimum"],A);const R=p(t,["nullable"]);R!=null&&m(e,["nullable"],R);const D=p(t,["pattern"]);D!=null&&m(e,["pattern"],D);const M=p(t,["properties"]);M!=null&&m(e,["properties"],M);const U=p(t,["propertyOrdering"]);U!=null&&m(e,["propertyOrdering"],U);const q=p(t,["required"]);q!=null&&m(e,["required"],q);const z=p(t,["title"]);z!=null&&m(e,["title"],z);const k=p(t,["type"]);return k!=null&&m(e,["type"],k),e}function K_e(t){const e={};if(p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=p(t,["category"]);n!=null&&m(e,["category"],n);const r=p(t,["threshold"]);return r!=null&&m(e,["threshold"],r),e}function j_e(t){const e={},n=p(t,["behavior"]);n!=null&&m(e,["behavior"],n);const r=p(t,["description"]);r!=null&&m(e,["description"],r);const i=p(t,["name"]);i!=null&&m(e,["name"],i);const o=p(t,["parameters"]);o!=null&&m(e,["parameters"],o);const s=p(t,["parametersJsonSchema"]);s!=null&&m(e,["parametersJsonSchema"],s);const u=p(t,["response"]);u!=null&&m(e,["response"],u);const c=p(t,["responseJsonSchema"]);return c!=null&&m(e,["responseJsonSchema"],c),e}function W_e(t){const e={},n=p(t,["startTime"]);n!=null&&m(e,["startTime"],n);const r=p(t,["endTime"]);return r!=null&&m(e,["endTime"],r),e}function Y_e(t){const e={},n=p(t,["timeRangeFilter"]);if(n!=null&&m(e,["timeRangeFilter"],W_e(n)),p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function J_e(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["dynamicThreshold"]);return r!=null&&m(e,["dynamicThreshold"],r),e}function Q_e(t){const e={},n=p(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],J_e(n)),e}function X_e(){return{}}function Z_e(t){const e={},n=p(t,["environment"]);return n!=null&&m(e,["environment"],n),e}function e0e(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>j_e(f))),m(e,["functionDeclarations"],c)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=p(t,["googleSearch"]);r!=null&&m(e,["googleSearch"],Y_e(r));const i=p(t,["googleSearchRetrieval"]);if(i!=null&&m(e,["googleSearchRetrieval"],Q_e(i)),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(p(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");p(t,["urlContext"])!=null&&m(e,["urlContext"],X_e());const s=p(t,["computerUse"]);s!=null&&m(e,["computerUse"],Z_e(s));const u=p(t,["codeExecution"]);return u!=null&&m(e,["codeExecution"],u),e}function t0e(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["allowedFunctionNames"]);return r!=null&&m(e,["allowedFunctionNames"],r),e}function n0e(t){const e={},n=p(t,["latitude"]);n!=null&&m(e,["latitude"],n);const r=p(t,["longitude"]);return r!=null&&m(e,["longitude"],r),e}function r0e(t){const e={},n=p(t,["latLng"]);n!=null&&m(e,["latLng"],n0e(n));const r=p(t,["languageCode"]);return r!=null&&m(e,["languageCode"],r),e}function i0e(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],t0e(n));const r=p(t,["retrievalConfig"]);return r!=null&&m(e,["retrievalConfig"],r0e(r)),e}function o0e(t){const e={},n=p(t,["voiceName"]);return n!=null&&m(e,["voiceName"],n),e}function XH(t){const e={},n=p(t,["prebuiltVoiceConfig"]);return n!=null&&m(e,["prebuiltVoiceConfig"],o0e(n)),e}function s0e(t){const e={},n=p(t,["speaker"]);n!=null&&m(e,["speaker"],n);const r=p(t,["voiceConfig"]);return r!=null&&m(e,["voiceConfig"],XH(r)),e}function a0e(t){const e={},n=p(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>s0e(i))),m(e,["speakerVoiceConfigs"],r)}return e}function l0e(t){const e={},n=p(t,["voiceConfig"]);n!=null&&m(e,["voiceConfig"],XH(n));const r=p(t,["multiSpeakerVoiceConfig"]);r!=null&&m(e,["multiSpeakerVoiceConfig"],a0e(r));const i=p(t,["languageCode"]);return i!=null&&m(e,["languageCode"],i),e}function u0e(t){const e={},n=p(t,["includeThoughts"]);n!=null&&m(e,["includeThoughts"],n);const r=p(t,["thinkingBudget"]);return r!=null&&m(e,["thinkingBudget"],r),e}function c0e(t,e,n){const r={},i=p(e,["systemInstruction"]);n!==void 0&&i!=null&&m(n,["systemInstruction"],QH(Cr(i)));const o=p(e,["temperature"]);o!=null&&m(r,["temperature"],o);const s=p(e,["topP"]);s!=null&&m(r,["topP"],s);const u=p(e,["topK"]);u!=null&&m(r,["topK"],u);const c=p(e,["candidateCount"]);c!=null&&m(r,["candidateCount"],c);const f=p(e,["maxOutputTokens"]);f!=null&&m(r,["maxOutputTokens"],f);const h=p(e,["stopSequences"]);h!=null&&m(r,["stopSequences"],h);const y=p(e,["responseLogprobs"]);y!=null&&m(r,["responseLogprobs"],y);const v=p(e,["logprobs"]);v!=null&&m(r,["logprobs"],v);const E=p(e,["presencePenalty"]);E!=null&&m(r,["presencePenalty"],E);const b=p(e,["frequencyPenalty"]);b!=null&&m(r,["frequencyPenalty"],b);const S=p(e,["seed"]);S!=null&&m(r,["seed"],S);const A=p(e,["responseMimeType"]);A!=null&&m(r,["responseMimeType"],A);const R=p(e,["responseSchema"]);R!=null&&m(r,["responseSchema"],G_e(o1(R)));const D=p(e,["responseJsonSchema"]);if(D!=null&&m(r,["responseJsonSchema"],D),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const M=p(e,["safetySettings"]);if(n!==void 0&&M!=null){let F=M;Array.isArray(F)&&(F=F.map(G=>K_e(G))),m(n,["safetySettings"],F)}const U=p(e,["tools"]);if(n!==void 0&&U!=null){let F=jd(U);Array.isArray(F)&&(F=F.map(G=>e0e(Kd(G)))),m(n,["tools"],F)}const q=p(e,["toolConfig"]);if(n!==void 0&&q!=null&&m(n,["toolConfig"],i0e(q)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const z=p(e,["cachedContent"]);n!==void 0&&z!=null&&m(n,["cachedContent"],pa(t,z));const k=p(e,["responseModalities"]);k!=null&&m(r,["responseModalities"],k);const V=p(e,["mediaResolution"]);V!=null&&m(r,["mediaResolution"],V);const N=p(e,["speechConfig"]);if(N!=null&&m(r,["speechConfig"],l0e(s1(N))),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const $=p(e,["thinkingConfig"]);return $!=null&&m(r,["thinkingConfig"],u0e($)),r}function f0e(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["request","model"],Tt(t,r));const i=p(e,["contents"]);if(i!=null){let s=Wi(i);Array.isArray(s)&&(s=s.map(u=>QH(u))),m(n,["request","contents"],s)}const o=p(e,["config"]);return o!=null&&m(n,["request","generationConfig"],c0e(t,o,n)),n}function d0e(t,e){const n={};if(p(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(p(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=p(e,["fileName"]);r!=null&&m(n,["fileName"],r);const i=p(e,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>f0e(t,s))),m(n,["requests","requests"],o)}return n}function h0e(t,e){const n={},r=p(t,["displayName"]);if(e!==void 0&&r!=null&&m(e,["batch","displayName"],r),p(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function HU(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],Tt(t,r));const i=p(e,["src"]);i!=null&&m(n,["batch","inputConfig"],d0e(t,YH(t,i)));const o=p(e,["config"]);return o!=null&&m(n,["config"],h0e(o,n)),n}function p0e(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],Wd(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function m0e(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],Wd(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function g0e(t,e){const n={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=p(t,["pageToken"]);if(e!==void 0&&i!=null&&m(e,["_query","pageToken"],i),p(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function y0e(t){const e={},n=p(t,["config"]);return n!=null&&m(e,["config"],g0e(n,e)),e}function v0e(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],Wd(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function _0e(t){const e={},n=p(t,["format"]);n!=null&&m(e,["instancesFormat"],n);const r=p(t,["gcsUri"]);r!=null&&m(e,["gcsSource","uris"],r);const i=p(t,["bigqueryUri"]);if(i!=null&&m(e,["bigquerySource","inputUri"],i),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function T0e(t){const e={},n=p(t,["format"]);n!=null&&m(e,["predictionsFormat"],n);const r=p(t,["gcsUri"]);r!=null&&m(e,["gcsDestination","outputUriPrefix"],r);const i=p(t,["bigqueryUri"]);if(i!=null&&m(e,["bigqueryDestination","outputUri"],i),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function E0e(t,e){const n={},r=p(t,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const i=p(t,["dest"]);return e!==void 0&&i!=null&&m(e,["outputConfig"],T0e(B_e(i))),n}function w0e(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["model"],Tt(t,r));const i=p(e,["src"]);i!=null&&m(n,["inputConfig"],_0e(YH(t,i)));const o=p(e,["config"]);return o!=null&&m(n,["config"],E0e(o,n)),n}function b0e(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],Wd(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function S0e(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],Wd(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function A0e(t,e){const n={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=p(t,["pageToken"]);e!==void 0&&i!=null&&m(e,["_query","pageToken"],i);const o=p(t,["filter"]);return e!==void 0&&o!=null&&m(e,["_query","filter"],o),n}function C0e(t){const e={},n=p(t,["config"]);return n!=null&&m(e,["config"],A0e(n,e)),e}function I0e(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],Wd(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function x0e(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function R0e(t){const e={},n=p(t,["data"]);n!=null&&m(e,["data"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function P0e(t){const e={},n=p(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function M0e(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],x0e(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],R0e(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],P0e(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const u=p(t,["codeExecutionResult"]);u!=null&&m(e,["codeExecutionResult"],u);const c=p(t,["executableCode"]);c!=null&&m(e,["executableCode"],c);const f=p(t,["functionCall"]);f!=null&&m(e,["functionCall"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const y=p(t,["text"]);return y!=null&&m(e,["text"],y),e}function D0e(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>M0e(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function N0e(t){const e={},n=p(t,["citationSources"]);return n!=null&&m(e,["citations"],n),e}function k0e(t){const e={},n=p(t,["retrievedUrl"]);n!=null&&m(e,["retrievedUrl"],n);const r=p(t,["urlRetrievalStatus"]);return r!=null&&m(e,["urlRetrievalStatus"],r),e}function O0e(t){const e={},n=p(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>k0e(i))),m(e,["urlMetadata"],r)}return e}function V0e(t){const e={},n=p(t,["content"]);n!=null&&m(e,["content"],D0e(n));const r=p(t,["citationMetadata"]);r!=null&&m(e,["citationMetadata"],N0e(r));const i=p(t,["tokenCount"]);i!=null&&m(e,["tokenCount"],i);const o=p(t,["finishReason"]);o!=null&&m(e,["finishReason"],o);const s=p(t,["urlContextMetadata"]);s!=null&&m(e,["urlContextMetadata"],O0e(s));const u=p(t,["avgLogprobs"]);u!=null&&m(e,["avgLogprobs"],u);const c=p(t,["groundingMetadata"]);c!=null&&m(e,["groundingMetadata"],c);const f=p(t,["index"]);f!=null&&m(e,["index"],f);const h=p(t,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const y=p(t,["safetyRatings"]);return y!=null&&m(e,["safetyRatings"],y),e}function L0e(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>V0e(f))),m(e,["candidates"],c)}const i=p(t,["modelVersion"]);i!=null&&m(e,["modelVersion"],i);const o=p(t,["promptFeedback"]);o!=null&&m(e,["promptFeedback"],o);const s=p(t,["responseId"]);s!=null&&m(e,["responseId"],s);const u=p(t,["usageMetadata"]);return u!=null&&m(e,["usageMetadata"],u),e}function ZH(t){const e={},n=p(t,["details"]);n!=null&&m(e,["details"],n);const r=p(t,["code"]);r!=null&&m(e,["code"],r);const i=p(t,["message"]);return i!=null&&m(e,["message"],i),e}function U0e(t){const e={},n=p(t,["response"]);n!=null&&m(e,["response"],L0e(n));const r=p(t,["error"]);return r!=null&&m(e,["error"],ZH(r)),e}function F0e(t){const e={},n=p(t,["responsesFile"]);n!=null&&m(e,["fileName"],n);const r=p(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>U0e(o))),m(e,["inlinedResponses"],i)}return e}function Nv(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const r=p(t,["metadata","displayName"]);r!=null&&m(e,["displayName"],r);const i=p(t,["metadata","state"]);i!=null&&m(e,["state"],JH(i));const o=p(t,["metadata","createTime"]);o!=null&&m(e,["createTime"],o);const s=p(t,["metadata","endTime"]);s!=null&&m(e,["endTime"],s);const u=p(t,["metadata","updateTime"]);u!=null&&m(e,["updateTime"],u);const c=p(t,["metadata","model"]);c!=null&&m(e,["model"],c);const f=p(t,["metadata","output"]);return f!=null&&m(e,["dest"],F0e(f)),e}function B0e(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(t,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Nv(s))),m(e,["batchJobs"],o)}return e}function q0e(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["name"]);r!=null&&m(e,["name"],r);const i=p(t,["done"]);i!=null&&m(e,["done"],i);const o=p(t,["error"]);return o!=null&&m(e,["error"],ZH(o)),e}function e9(t){const e={},n=p(t,["details"]);n!=null&&m(e,["details"],n);const r=p(t,["code"]);r!=null&&m(e,["code"],r);const i=p(t,["message"]);return i!=null&&m(e,["message"],i),e}function $0e(t){const e={},n=p(t,["instancesFormat"]);n!=null&&m(e,["format"],n);const r=p(t,["gcsSource","uris"]);r!=null&&m(e,["gcsUri"],r);const i=p(t,["bigquerySource","inputUri"]);return i!=null&&m(e,["bigqueryUri"],i),e}function z0e(t){const e={},n=p(t,["predictionsFormat"]);n!=null&&m(e,["format"],n);const r=p(t,["gcsDestination","outputUriPrefix"]);r!=null&&m(e,["gcsUri"],r);const i=p(t,["bigqueryDestination","outputUri"]);return i!=null&&m(e,["bigqueryUri"],i),e}function TC(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const r=p(t,["displayName"]);r!=null&&m(e,["displayName"],r);const i=p(t,["state"]);i!=null&&m(e,["state"],JH(i));const o=p(t,["error"]);o!=null&&m(e,["error"],e9(o));const s=p(t,["createTime"]);s!=null&&m(e,["createTime"],s);const u=p(t,["startTime"]);u!=null&&m(e,["startTime"],u);const c=p(t,["endTime"]);c!=null&&m(e,["endTime"],c);const f=p(t,["updateTime"]);f!=null&&m(e,["updateTime"],f);const h=p(t,["model"]);h!=null&&m(e,["model"],h);const y=p(t,["inputConfig"]);y!=null&&m(e,["src"],$0e(y));const v=p(t,["outputConfig"]);return v!=null&&m(e,["dest"],z0e(v)),e}function H0e(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(t,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>TC(s))),m(e,["batchJobs"],o)}return e}function G0e(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["name"]);r!=null&&m(e,["name"],r);const i=p(t,["done"]);i!=null&&m(e,["done"],i);const o=p(t,["error"]);return o!=null&&m(e,["error"],e9(o)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ic;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(ic||(ic={}));class mg{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(i=s.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class K0e extends gc{constructor(e){super(),this.apiClient=e,this.create=async n=>{var r,i;if(this.apiClient.isVertexAI()){const s=Date.now().toString();if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_${timestampStr}"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_${s}`;else throw new Error("Unsupported source:"+n.src)}else if(Array.isArray(n.src)||typeof n.src!="string"&&n.src.inlinedRequests){let o="",s={};const u=HU(this.apiClient,n);o=Ne("{model}:batchGenerateContent",u._url),s=u._query;const h=u.batch.inputConfig.requests,y=h.requests,v=[];for(const b of y){const S=b;if(S.systemInstruction){const A=S.systemInstruction;delete S.systemInstruction;const R=S.request;R.systemInstruction=A,S.request=R}v.push(S)}return h.requests=v,delete u.config,delete u._url,delete u._query,this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json()).then(b=>Nv(b))}return await this.createInternal(n)},this.list=async(n={})=>new mg(ic.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}async createInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=w0e(this.apiClient,e);return u=Ne("batchPredictionJobs",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>TC(h))}else{const f=HU(this.apiClient,e);return u=Ne("{model}:batchGenerateContent",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Nv(h))}}async get(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=b0e(this.apiClient,e);return u=Ne("batchPredictionJobs/{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>TC(h))}else{const f=p0e(this.apiClient,e);return u=Ne("batches/{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Nv(h))}}async cancel(e){var n,r,i,o;let s="",u={};if(this.apiClient.isVertexAI()){const c=S0e(this.apiClient,e);s=Ne("batchPredictionJobs/{name}:cancel",c._url),u=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=m0e(this.apiClient,e);s=Ne("batches/{name}:cancel",c._url),u=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=C0e(e);return u=Ne("batchPredictionJobs",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const y=H0e(h),v=new BU;return Object.assign(v,y),v})}else{const f=y0e(e);return u=Ne("batches",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const y=B0e(h),v=new BU;return Object.assign(v,y),v})}}async delete(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=I0e(this.apiClient,e);return u=Ne("batchPredictionJobs/{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>G0e(h))}else{const f=v0e(this.apiClient,e);return u=Ne("batches/{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>q0e(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function j0e(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function W0e(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["data"]);n!=null&&m(e,["data"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function Y0e(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function J0e(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],j0e(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],W0e(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],Y0e(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const u=p(t,["codeExecutionResult"]);u!=null&&m(e,["codeExecutionResult"],u);const c=p(t,["executableCode"]);c!=null&&m(e,["executableCode"],c);const f=p(t,["functionCall"]);f!=null&&m(e,["functionCall"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const y=p(t,["text"]);return y!=null&&m(e,["text"],y),e}function GU(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>J0e(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function Q0e(t){const e={},n=p(t,["behavior"]);n!=null&&m(e,["behavior"],n);const r=p(t,["description"]);r!=null&&m(e,["description"],r);const i=p(t,["name"]);i!=null&&m(e,["name"],i);const o=p(t,["parameters"]);o!=null&&m(e,["parameters"],o);const s=p(t,["parametersJsonSchema"]);s!=null&&m(e,["parametersJsonSchema"],s);const u=p(t,["response"]);u!=null&&m(e,["response"],u);const c=p(t,["responseJsonSchema"]);return c!=null&&m(e,["responseJsonSchema"],c),e}function X0e(t){const e={},n=p(t,["startTime"]);n!=null&&m(e,["startTime"],n);const r=p(t,["endTime"]);return r!=null&&m(e,["endTime"],r),e}function Z0e(t){const e={},n=p(t,["timeRangeFilter"]);if(n!=null&&m(e,["timeRangeFilter"],X0e(n)),p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function eTe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["dynamicThreshold"]);return r!=null&&m(e,["dynamicThreshold"],r),e}function tTe(t){const e={},n=p(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],eTe(n)),e}function nTe(){return{}}function rTe(t){const e={},n=p(t,["environment"]);return n!=null&&m(e,["environment"],n),e}function iTe(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>Q0e(f))),m(e,["functionDeclarations"],c)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=p(t,["googleSearch"]);r!=null&&m(e,["googleSearch"],Z0e(r));const i=p(t,["googleSearchRetrieval"]);if(i!=null&&m(e,["googleSearchRetrieval"],tTe(i)),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(p(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");p(t,["urlContext"])!=null&&m(e,["urlContext"],nTe());const s=p(t,["computerUse"]);s!=null&&m(e,["computerUse"],rTe(s));const u=p(t,["codeExecution"]);return u!=null&&m(e,["codeExecution"],u),e}function oTe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["allowedFunctionNames"]);return r!=null&&m(e,["allowedFunctionNames"],r),e}function sTe(t){const e={},n=p(t,["latitude"]);n!=null&&m(e,["latitude"],n);const r=p(t,["longitude"]);return r!=null&&m(e,["longitude"],r),e}function aTe(t){const e={},n=p(t,["latLng"]);n!=null&&m(e,["latLng"],sTe(n));const r=p(t,["languageCode"]);return r!=null&&m(e,["languageCode"],r),e}function lTe(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],oTe(n));const r=p(t,["retrievalConfig"]);return r!=null&&m(e,["retrievalConfig"],aTe(r)),e}function uTe(t,e){const n={},r=p(t,["ttl"]);e!==void 0&&r!=null&&m(e,["ttl"],r);const i=p(t,["expireTime"]);e!==void 0&&i!=null&&m(e,["expireTime"],i);const o=p(t,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const s=p(t,["contents"]);if(e!==void 0&&s!=null){let h=Wi(s);Array.isArray(h)&&(h=h.map(y=>GU(y))),m(e,["contents"],h)}const u=p(t,["systemInstruction"]);e!==void 0&&u!=null&&m(e,["systemInstruction"],GU(Cr(u)));const c=p(t,["tools"]);if(e!==void 0&&c!=null){let h=c;Array.isArray(h)&&(h=h.map(y=>iTe(y))),m(e,["tools"],h)}const f=p(t,["toolConfig"]);if(e!==void 0&&f!=null&&m(e,["toolConfig"],lTe(f)),p(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function cTe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["model"],FH(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],uTe(i,n)),n}function fTe(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],pa(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function dTe(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],pa(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function hTe(t,e){const n={},r=p(t,["ttl"]);e!==void 0&&r!=null&&m(e,["ttl"],r);const i=p(t,["expireTime"]);return e!==void 0&&i!=null&&m(e,["expireTime"],i),n}function pTe(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],pa(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],hTe(i,n)),n}function mTe(t,e){const n={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=p(t,["pageToken"]);return e!==void 0&&i!=null&&m(e,["_query","pageToken"],i),n}function gTe(t){const e={},n=p(t,["config"]);return n!=null&&m(e,["config"],mTe(n,e)),e}function yTe(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function vTe(t){const e={},n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const r=p(t,["data"]);r!=null&&m(e,["data"],r);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function _Te(t){const e={},n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const r=p(t,["fileUri"]);r!=null&&m(e,["fileUri"],r);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function TTe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],yTe(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],vTe(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],_Te(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const u=p(t,["codeExecutionResult"]);u!=null&&m(e,["codeExecutionResult"],u);const c=p(t,["executableCode"]);c!=null&&m(e,["executableCode"],c);const f=p(t,["functionCall"]);f!=null&&m(e,["functionCall"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const y=p(t,["text"]);return y!=null&&m(e,["text"],y),e}function KU(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>TTe(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function ETe(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&m(e,["description"],n);const r=p(t,["name"]);r!=null&&m(e,["name"],r);const i=p(t,["parameters"]);i!=null&&m(e,["parameters"],i);const o=p(t,["parametersJsonSchema"]);o!=null&&m(e,["parametersJsonSchema"],o);const s=p(t,["response"]);s!=null&&m(e,["response"],s);const u=p(t,["responseJsonSchema"]);return u!=null&&m(e,["responseJsonSchema"],u),e}function wTe(t){const e={},n=p(t,["startTime"]);n!=null&&m(e,["startTime"],n);const r=p(t,["endTime"]);return r!=null&&m(e,["endTime"],r),e}function bTe(t){const e={},n=p(t,["timeRangeFilter"]);n!=null&&m(e,["timeRangeFilter"],wTe(n));const r=p(t,["excludeDomains"]);return r!=null&&m(e,["excludeDomains"],r),e}function STe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["dynamicThreshold"]);return r!=null&&m(e,["dynamicThreshold"],r),e}function ATe(t){const e={},n=p(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],STe(n)),e}function CTe(t){const e={},n=p(t,["excludeDomains"]);return n!=null&&m(e,["excludeDomains"],n),e}function ITe(t){const e={},n=p(t,["apiKeyString"]);return n!=null&&m(e,["apiKeyString"],n),e}function xTe(t){const e={},n=p(t,["apiKeyConfig"]);n!=null&&m(e,["apiKeyConfig"],ITe(n));const r=p(t,["authType"]);r!=null&&m(e,["authType"],r);const i=p(t,["googleServiceAccountConfig"]);i!=null&&m(e,["googleServiceAccountConfig"],i);const o=p(t,["httpBasicAuthConfig"]);o!=null&&m(e,["httpBasicAuthConfig"],o);const s=p(t,["oauthConfig"]);s!=null&&m(e,["oauthConfig"],s);const u=p(t,["oidcConfig"]);return u!=null&&m(e,["oidcConfig"],u),e}function RTe(t){const e={},n=p(t,["authConfig"]);return n!=null&&m(e,["authConfig"],xTe(n)),e}function PTe(){return{}}function MTe(t){const e={},n=p(t,["environment"]);return n!=null&&m(e,["environment"],n),e}function DTe(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(v=>ETe(v))),m(e,["functionDeclarations"],y)}const r=p(t,["retrieval"]);r!=null&&m(e,["retrieval"],r);const i=p(t,["googleSearch"]);i!=null&&m(e,["googleSearch"],bTe(i));const o=p(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],ATe(o));const s=p(t,["enterpriseWebSearch"]);s!=null&&m(e,["enterpriseWebSearch"],CTe(s));const u=p(t,["googleMaps"]);u!=null&&m(e,["googleMaps"],RTe(u)),p(t,["urlContext"])!=null&&m(e,["urlContext"],PTe());const f=p(t,["computerUse"]);f!=null&&m(e,["computerUse"],MTe(f));const h=p(t,["codeExecution"]);return h!=null&&m(e,["codeExecution"],h),e}function NTe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["allowedFunctionNames"]);return r!=null&&m(e,["allowedFunctionNames"],r),e}function kTe(t){const e={},n=p(t,["latitude"]);n!=null&&m(e,["latitude"],n);const r=p(t,["longitude"]);return r!=null&&m(e,["longitude"],r),e}function OTe(t){const e={},n=p(t,["latLng"]);n!=null&&m(e,["latLng"],kTe(n));const r=p(t,["languageCode"]);return r!=null&&m(e,["languageCode"],r),e}function VTe(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],NTe(n));const r=p(t,["retrievalConfig"]);return r!=null&&m(e,["retrievalConfig"],OTe(r)),e}function LTe(t,e){const n={},r=p(t,["ttl"]);e!==void 0&&r!=null&&m(e,["ttl"],r);const i=p(t,["expireTime"]);e!==void 0&&i!=null&&m(e,["expireTime"],i);const o=p(t,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const s=p(t,["contents"]);if(e!==void 0&&s!=null){let y=Wi(s);Array.isArray(y)&&(y=y.map(v=>KU(v))),m(e,["contents"],y)}const u=p(t,["systemInstruction"]);e!==void 0&&u!=null&&m(e,["systemInstruction"],KU(Cr(u)));const c=p(t,["tools"]);if(e!==void 0&&c!=null){let y=c;Array.isArray(y)&&(y=y.map(v=>DTe(v))),m(e,["tools"],y)}const f=p(t,["toolConfig"]);e!==void 0&&f!=null&&m(e,["toolConfig"],VTe(f));const h=p(t,["kmsKeyName"]);return e!==void 0&&h!=null&&m(e,["encryption_spec","kmsKeyName"],h),n}function UTe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["model"],FH(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],LTe(i,n)),n}function FTe(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],pa(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function BTe(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],pa(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function qTe(t,e){const n={},r=p(t,["ttl"]);e!==void 0&&r!=null&&m(e,["ttl"],r);const i=p(t,["expireTime"]);return e!==void 0&&i!=null&&m(e,["expireTime"],i),n}function $Te(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],pa(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],qTe(i,n)),n}function zTe(t,e){const n={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=p(t,["pageToken"]);return e!==void 0&&i!=null&&m(e,["_query","pageToken"],i),n}function HTe(t){const e={},n=p(t,["config"]);return n!=null&&m(e,["config"],zTe(n,e)),e}function kv(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const r=p(t,["displayName"]);r!=null&&m(e,["displayName"],r);const i=p(t,["model"]);i!=null&&m(e,["model"],i);const o=p(t,["createTime"]);o!=null&&m(e,["createTime"],o);const s=p(t,["updateTime"]);s!=null&&m(e,["updateTime"],s);const u=p(t,["expireTime"]);u!=null&&m(e,["expireTime"],u);const c=p(t,["usageMetadata"]);return c!=null&&m(e,["usageMetadata"],c),e}function GTe(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function KTe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>kv(s))),m(e,["cachedContents"],o)}return e}function Ov(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const r=p(t,["displayName"]);r!=null&&m(e,["displayName"],r);const i=p(t,["model"]);i!=null&&m(e,["model"],i);const o=p(t,["createTime"]);o!=null&&m(e,["createTime"],o);const s=p(t,["updateTime"]);s!=null&&m(e,["updateTime"],s);const u=p(t,["expireTime"]);u!=null&&m(e,["expireTime"],u);const c=p(t,["usageMetadata"]);return c!=null&&m(e,["usageMetadata"],c),e}function jTe(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function WTe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Ov(s))),m(e,["cachedContents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YTe extends gc{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new mg(ic.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=UTe(this.apiClient,e);return u=Ne("cachedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Ov(h))}else{const f=cTe(this.apiClient,e);return u=Ne("cachedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>kv(h))}}async get(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=FTe(this.apiClient,e);return u=Ne("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Ov(h))}else{const f=fTe(this.apiClient,e);return u=Ne("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>kv(h))}}async delete(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=BTe(this.apiClient,e);return u=Ne("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const y=jTe(h),v=new UU;return Object.assign(v,y),v})}else{const f=dTe(this.apiClient,e);return u=Ne("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const y=GTe(h),v=new UU;return Object.assign(v,y),v})}}async update(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=$Te(this.apiClient,e);return u=Ne("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Ov(h))}else{const f=pTe(this.apiClient,e);return u=Ne("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>kv(h))}}async listInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=HTe(e);return u=Ne("cachedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const y=WTe(h),v=new FU;return Object.assign(v,y),v})}else{const f=gTe(e);return u=Ne("cachedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const y=KTe(h),v=new FU;return Object.assign(v,y),v})}}}function jU(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function $t(t){return this instanceof $t?(this.v=t,this):new $t(t)}function Lf(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(E){return function(b){return Promise.resolve(b).then(E,y)}}function u(E,b){r[E]&&(i[E]=function(S){return new Promise(function(A,R){o.push([E,S,A,R])>1||c(E,S)})},b&&(i[E]=b(i[E])))}function c(E,b){try{f(r[E](b))}catch(S){v(o[0][3],S)}}function f(E){E.value instanceof $t?Promise.resolve(E.value.v).then(h,y):v(o[0][2],E)}function h(E){c("next",E)}function y(E){c("throw",E)}function v(E,b){E(b),o.shift(),o.length&&c(o[0][0],o[0][1])}}function jp(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof jU=="function"?jU(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(u,c){s=t[o](s),i(u,c,s.done,s.value)})}}function i(o,s,u,c){Promise.resolve(c).then(function(f){o({value:f,done:u})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JTe(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:t9(n)}function t9(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function QTe(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function WU(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let o=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),o&&!t9(t[r])&&(o=!1),r++;o?e.push(...i):e.pop()}return e}class XTe{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new ZTe(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class ZTe{constructor(e,n,r,i={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),QTe(o)}async sendMessage(e){var n;await this.sendPromise;const r=Cr(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,s,u;const c=await i,f=(s=(o=c.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,h=c.automaticFunctionCallingHistory,y=this.getHistory(!0).length;let v=[];h!=null&&(v=(u=h.slice(y))!==null&&u!==void 0?u:[]);const E=f?[f]:[];this.recordHistory(r,E,v)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=Cr(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){const n=e?WU(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,i;return Lf(this,arguments,function*(){var s,u,c,f;const h=[];try{for(var y=!0,v=jp(e),E;E=yield $t(v.next()),s=E.done,!s;y=!0){f=E.value,y=!1;const b=f;if(JTe(b)){const S=(i=(r=b.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;S!==void 0&&h.push(S)}yield yield $t(b)}}catch(b){u={error:b}}finally{try{!y&&!s&&(c=v.return)&&(yield $t(c.call(v)))}finally{if(u)throw u.error}}this.recordHistory(n,h)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(o=>o.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...WU(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ET extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,ET.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eEe(t,e){const n={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=p(t,["pageToken"]);return e!==void 0&&i!=null&&m(e,["_query","pageToken"],i),n}function tEe(t){const e={},n=p(t,["config"]);return n!=null&&m(e,["config"],eEe(n,e)),e}function nEe(t){const e={},n=p(t,["details"]);n!=null&&m(e,["details"],n);const r=p(t,["message"]);r!=null&&m(e,["message"],r);const i=p(t,["code"]);return i!=null&&m(e,["code"],i),e}function rEe(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const r=p(t,["displayName"]);r!=null&&m(e,["displayName"],r);const i=p(t,["mimeType"]);i!=null&&m(e,["mimeType"],i);const o=p(t,["sizeBytes"]);o!=null&&m(e,["sizeBytes"],o);const s=p(t,["createTime"]);s!=null&&m(e,["createTime"],s);const u=p(t,["expirationTime"]);u!=null&&m(e,["expirationTime"],u);const c=p(t,["updateTime"]);c!=null&&m(e,["updateTime"],c);const f=p(t,["sha256Hash"]);f!=null&&m(e,["sha256Hash"],f);const h=p(t,["uri"]);h!=null&&m(e,["uri"],h);const y=p(t,["downloadUri"]);y!=null&&m(e,["downloadUri"],y);const v=p(t,["state"]);v!=null&&m(e,["state"],v);const E=p(t,["source"]);E!=null&&m(e,["source"],E);const b=p(t,["videoMetadata"]);b!=null&&m(e,["videoMetadata"],b);const S=p(t,["error"]);return S!=null&&m(e,["error"],nEe(S)),e}function iEe(t){const e={},n=p(t,["file"]);n!=null&&m(e,["file"],rEe(n));const r=p(t,["config"]);return r!=null&&m(e,["config"],r),e}function oEe(t){const e={},n=p(t,["name"]);n!=null&&m(e,["_url","file"],KH(n));const r=p(t,["config"]);return r!=null&&m(e,["config"],r),e}function sEe(t){const e={},n=p(t,["name"]);n!=null&&m(e,["_url","file"],KH(n));const r=p(t,["config"]);return r!=null&&m(e,["config"],r),e}function aEe(t){const e={},n=p(t,["details"]);n!=null&&m(e,["details"],n);const r=p(t,["message"]);r!=null&&m(e,["message"],r);const i=p(t,["code"]);return i!=null&&m(e,["code"],i),e}function EC(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const r=p(t,["displayName"]);r!=null&&m(e,["displayName"],r);const i=p(t,["mimeType"]);i!=null&&m(e,["mimeType"],i);const o=p(t,["sizeBytes"]);o!=null&&m(e,["sizeBytes"],o);const s=p(t,["createTime"]);s!=null&&m(e,["createTime"],s);const u=p(t,["expirationTime"]);u!=null&&m(e,["expirationTime"],u);const c=p(t,["updateTime"]);c!=null&&m(e,["updateTime"],c);const f=p(t,["sha256Hash"]);f!=null&&m(e,["sha256Hash"],f);const h=p(t,["uri"]);h!=null&&m(e,["uri"],h);const y=p(t,["downloadUri"]);y!=null&&m(e,["downloadUri"],y);const v=p(t,["state"]);v!=null&&m(e,["state"],v);const E=p(t,["source"]);E!=null&&m(e,["source"],E);const b=p(t,["videoMetadata"]);b!=null&&m(e,["videoMetadata"],b);const S=p(t,["error"]);return S!=null&&m(e,["error"],aEe(S)),e}function lEe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(t,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>EC(s))),m(e,["files"],o)}return e}function uEe(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function cEe(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fEe extends gc{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new mg(ic.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>EC(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=tEe(e);return o=Ne("files",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const f=lEe(c),h=new I_e;return Object.assign(h,f),h})}}async createInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=iEe(e);return o=Ne("upload/v1beta/files",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const f=uEe(c),h=new x_e;return Object.assign(h,f),h})}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=oEe(e);return o=Ne("files/{file}",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>EC(c))}}async delete(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=sEe(e);return o=Ne("files/{file}",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const f=cEe(c),h=new R_e;return Object.assign(h,f),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dEe(t){const e={},n=p(t,["voiceName"]);return n!=null&&m(e,["voiceName"],n),e}function n9(t){const e={},n=p(t,["prebuiltVoiceConfig"]);return n!=null&&m(e,["prebuiltVoiceConfig"],dEe(n)),e}function hEe(t){const e={},n=p(t,["speaker"]);n!=null&&m(e,["speaker"],n);const r=p(t,["voiceConfig"]);return r!=null&&m(e,["voiceConfig"],n9(r)),e}function pEe(t){const e={},n=p(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>hEe(i))),m(e,["speakerVoiceConfigs"],r)}return e}function mEe(t){const e={},n=p(t,["voiceConfig"]);n!=null&&m(e,["voiceConfig"],n9(n));const r=p(t,["multiSpeakerVoiceConfig"]);r!=null&&m(e,["multiSpeakerVoiceConfig"],pEe(r));const i=p(t,["languageCode"]);return i!=null&&m(e,["languageCode"],i),e}function gEe(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function yEe(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["data"]);n!=null&&m(e,["data"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function vEe(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function _Ee(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],gEe(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],yEe(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],vEe(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const u=p(t,["codeExecutionResult"]);u!=null&&m(e,["codeExecutionResult"],u);const c=p(t,["executableCode"]);c!=null&&m(e,["executableCode"],c);const f=p(t,["functionCall"]);f!=null&&m(e,["functionCall"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const y=p(t,["text"]);return y!=null&&m(e,["text"],y),e}function TEe(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>_Ee(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function EEe(t){const e={},n=p(t,["behavior"]);n!=null&&m(e,["behavior"],n);const r=p(t,["description"]);r!=null&&m(e,["description"],r);const i=p(t,["name"]);i!=null&&m(e,["name"],i);const o=p(t,["parameters"]);o!=null&&m(e,["parameters"],o);const s=p(t,["parametersJsonSchema"]);s!=null&&m(e,["parametersJsonSchema"],s);const u=p(t,["response"]);u!=null&&m(e,["response"],u);const c=p(t,["responseJsonSchema"]);return c!=null&&m(e,["responseJsonSchema"],c),e}function wEe(t){const e={},n=p(t,["startTime"]);n!=null&&m(e,["startTime"],n);const r=p(t,["endTime"]);return r!=null&&m(e,["endTime"],r),e}function bEe(t){const e={},n=p(t,["timeRangeFilter"]);if(n!=null&&m(e,["timeRangeFilter"],wEe(n)),p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function SEe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["dynamicThreshold"]);return r!=null&&m(e,["dynamicThreshold"],r),e}function AEe(t){const e={},n=p(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],SEe(n)),e}function CEe(){return{}}function IEe(t){const e={},n=p(t,["environment"]);return n!=null&&m(e,["environment"],n),e}function xEe(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>EEe(f))),m(e,["functionDeclarations"],c)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=p(t,["googleSearch"]);r!=null&&m(e,["googleSearch"],bEe(r));const i=p(t,["googleSearchRetrieval"]);if(i!=null&&m(e,["googleSearchRetrieval"],AEe(i)),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(p(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");p(t,["urlContext"])!=null&&m(e,["urlContext"],CEe());const s=p(t,["computerUse"]);s!=null&&m(e,["computerUse"],IEe(s));const u=p(t,["codeExecution"]);return u!=null&&m(e,["codeExecution"],u),e}function REe(t){const e={},n=p(t,["handle"]);if(n!=null&&m(e,["handle"],n),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function YU(){return{}}function PEe(t){const e={},n=p(t,["disabled"]);n!=null&&m(e,["disabled"],n);const r=p(t,["startOfSpeechSensitivity"]);r!=null&&m(e,["startOfSpeechSensitivity"],r);const i=p(t,["endOfSpeechSensitivity"]);i!=null&&m(e,["endOfSpeechSensitivity"],i);const o=p(t,["prefixPaddingMs"]);o!=null&&m(e,["prefixPaddingMs"],o);const s=p(t,["silenceDurationMs"]);return s!=null&&m(e,["silenceDurationMs"],s),e}function MEe(t){const e={},n=p(t,["automaticActivityDetection"]);n!=null&&m(e,["automaticActivityDetection"],PEe(n));const r=p(t,["activityHandling"]);r!=null&&m(e,["activityHandling"],r);const i=p(t,["turnCoverage"]);return i!=null&&m(e,["turnCoverage"],i),e}function DEe(t){const e={},n=p(t,["targetTokens"]);return n!=null&&m(e,["targetTokens"],n),e}function NEe(t){const e={},n=p(t,["triggerTokens"]);n!=null&&m(e,["triggerTokens"],n);const r=p(t,["slidingWindow"]);return r!=null&&m(e,["slidingWindow"],DEe(r)),e}function kEe(t){const e={},n=p(t,["proactiveAudio"]);return n!=null&&m(e,["proactiveAudio"],n),e}function OEe(t,e){const n={},r=p(t,["generationConfig"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig"],r);const i=p(t,["responseModalities"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig","responseModalities"],i);const o=p(t,["temperature"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","temperature"],o);const s=p(t,["topP"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","topP"],s);const u=p(t,["topK"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topK"],u);const c=p(t,["maxOutputTokens"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","maxOutputTokens"],c);const f=p(t,["mediaResolution"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","mediaResolution"],f);const h=p(t,["seed"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","seed"],h);const y=p(t,["speechConfig"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","speechConfig"],mEe(a1(y)));const v=p(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],v);const E=p(t,["systemInstruction"]);e!==void 0&&E!=null&&m(e,["setup","systemInstruction"],TEe(Cr(E)));const b=p(t,["tools"]);if(e!==void 0&&b!=null){let q=jd(b);Array.isArray(q)&&(q=q.map(z=>xEe(Kd(z)))),m(e,["setup","tools"],q)}const S=p(t,["sessionResumption"]);e!==void 0&&S!=null&&m(e,["setup","sessionResumption"],REe(S));const A=p(t,["inputAudioTranscription"]);e!==void 0&&A!=null&&m(e,["setup","inputAudioTranscription"],YU());const R=p(t,["outputAudioTranscription"]);e!==void 0&&R!=null&&m(e,["setup","outputAudioTranscription"],YU());const D=p(t,["realtimeInputConfig"]);e!==void 0&&D!=null&&m(e,["setup","realtimeInputConfig"],MEe(D));const M=p(t,["contextWindowCompression"]);e!==void 0&&M!=null&&m(e,["setup","contextWindowCompression"],NEe(M));const U=p(t,["proactivity"]);return e!==void 0&&U!=null&&m(e,["setup","proactivity"],kEe(U)),n}function VEe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["setup","model"],Tt(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],OEe(i,n)),n}function LEe(){return{}}function UEe(){return{}}function FEe(t){const e={},n=p(t,["media"]);n!=null&&m(e,["mediaChunks"],BH(n));const r=p(t,["audio"]);r!=null&&m(e,["audio"],$H(r));const i=p(t,["audioStreamEnd"]);i!=null&&m(e,["audioStreamEnd"],i);const o=p(t,["video"]);o!=null&&m(e,["video"],qH(o));const s=p(t,["text"]);return s!=null&&m(e,["text"],s),p(t,["activityStart"])!=null&&m(e,["activityStart"],LEe()),p(t,["activityEnd"])!=null&&m(e,["activityEnd"],UEe()),e}function r9(t){const e={},n=p(t,["text"]);n!=null&&m(e,["text"],n);const r=p(t,["weight"]);return r!=null&&m(e,["weight"],r),e}function BEe(t){const e={},n=p(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>r9(i))),m(e,["weightedPrompts"],r)}return e}function i9(t){const e={},n=p(t,["temperature"]);n!=null&&m(e,["temperature"],n);const r=p(t,["topK"]);r!=null&&m(e,["topK"],r);const i=p(t,["seed"]);i!=null&&m(e,["seed"],i);const o=p(t,["guidance"]);o!=null&&m(e,["guidance"],o);const s=p(t,["bpm"]);s!=null&&m(e,["bpm"],s);const u=p(t,["density"]);u!=null&&m(e,["density"],u);const c=p(t,["brightness"]);c!=null&&m(e,["brightness"],c);const f=p(t,["scale"]);f!=null&&m(e,["scale"],f);const h=p(t,["muteBass"]);h!=null&&m(e,["muteBass"],h);const y=p(t,["muteDrums"]);y!=null&&m(e,["muteDrums"],y);const v=p(t,["onlyBassAndDrums"]);v!=null&&m(e,["onlyBassAndDrums"],v);const E=p(t,["musicGenerationMode"]);return E!=null&&m(e,["musicGenerationMode"],E),e}function qEe(t){const e={},n=p(t,["musicGenerationConfig"]);return n!=null&&m(e,["musicGenerationConfig"],i9(n)),e}function o9(t){const e={},n=p(t,["model"]);return n!=null&&m(e,["model"],n),e}function s9(t){const e={},n=p(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>r9(i))),m(e,["weightedPrompts"],r)}return e}function wC(t){const e={},n=p(t,["setup"]);n!=null&&m(e,["setup"],o9(n));const r=p(t,["clientContent"]);r!=null&&m(e,["clientContent"],s9(r));const i=p(t,["musicGenerationConfig"]);i!=null&&m(e,["musicGenerationConfig"],i9(i));const o=p(t,["playbackControl"]);return o!=null&&m(e,["playbackControl"],o),e}function $Ee(t){const e={},n=p(t,["voiceName"]);return n!=null&&m(e,["voiceName"],n),e}function zEe(t){const e={},n=p(t,["prebuiltVoiceConfig"]);return n!=null&&m(e,["prebuiltVoiceConfig"],$Ee(n)),e}function HEe(t){const e={},n=p(t,["voiceConfig"]);if(n!=null&&m(e,["voiceConfig"],zEe(n)),p(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=p(t,["languageCode"]);return r!=null&&m(e,["languageCode"],r),e}function GEe(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function KEe(t){const e={},n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const r=p(t,["data"]);r!=null&&m(e,["data"],r);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function jEe(t){const e={},n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const r=p(t,["fileUri"]);r!=null&&m(e,["fileUri"],r);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function WEe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],GEe(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],KEe(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],jEe(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const u=p(t,["codeExecutionResult"]);u!=null&&m(e,["codeExecutionResult"],u);const c=p(t,["executableCode"]);c!=null&&m(e,["executableCode"],c);const f=p(t,["functionCall"]);f!=null&&m(e,["functionCall"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const y=p(t,["text"]);return y!=null&&m(e,["text"],y),e}function YEe(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>WEe(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function JEe(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&m(e,["description"],n);const r=p(t,["name"]);r!=null&&m(e,["name"],r);const i=p(t,["parameters"]);i!=null&&m(e,["parameters"],i);const o=p(t,["parametersJsonSchema"]);o!=null&&m(e,["parametersJsonSchema"],o);const s=p(t,["response"]);s!=null&&m(e,["response"],s);const u=p(t,["responseJsonSchema"]);return u!=null&&m(e,["responseJsonSchema"],u),e}function QEe(t){const e={},n=p(t,["startTime"]);n!=null&&m(e,["startTime"],n);const r=p(t,["endTime"]);return r!=null&&m(e,["endTime"],r),e}function XEe(t){const e={},n=p(t,["timeRangeFilter"]);n!=null&&m(e,["timeRangeFilter"],QEe(n));const r=p(t,["excludeDomains"]);return r!=null&&m(e,["excludeDomains"],r),e}function ZEe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["dynamicThreshold"]);return r!=null&&m(e,["dynamicThreshold"],r),e}function ewe(t){const e={},n=p(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],ZEe(n)),e}function twe(t){const e={},n=p(t,["excludeDomains"]);return n!=null&&m(e,["excludeDomains"],n),e}function nwe(t){const e={},n=p(t,["apiKeyString"]);return n!=null&&m(e,["apiKeyString"],n),e}function rwe(t){const e={},n=p(t,["apiKeyConfig"]);n!=null&&m(e,["apiKeyConfig"],nwe(n));const r=p(t,["authType"]);r!=null&&m(e,["authType"],r);const i=p(t,["googleServiceAccountConfig"]);i!=null&&m(e,["googleServiceAccountConfig"],i);const o=p(t,["httpBasicAuthConfig"]);o!=null&&m(e,["httpBasicAuthConfig"],o);const s=p(t,["oauthConfig"]);s!=null&&m(e,["oauthConfig"],s);const u=p(t,["oidcConfig"]);return u!=null&&m(e,["oidcConfig"],u),e}function iwe(t){const e={},n=p(t,["authConfig"]);return n!=null&&m(e,["authConfig"],rwe(n)),e}function owe(){return{}}function swe(t){const e={},n=p(t,["environment"]);return n!=null&&m(e,["environment"],n),e}function awe(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(v=>JEe(v))),m(e,["functionDeclarations"],y)}const r=p(t,["retrieval"]);r!=null&&m(e,["retrieval"],r);const i=p(t,["googleSearch"]);i!=null&&m(e,["googleSearch"],XEe(i));const o=p(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],ewe(o));const s=p(t,["enterpriseWebSearch"]);s!=null&&m(e,["enterpriseWebSearch"],twe(s));const u=p(t,["googleMaps"]);u!=null&&m(e,["googleMaps"],iwe(u)),p(t,["urlContext"])!=null&&m(e,["urlContext"],owe());const f=p(t,["computerUse"]);f!=null&&m(e,["computerUse"],swe(f));const h=p(t,["codeExecution"]);return h!=null&&m(e,["codeExecution"],h),e}function lwe(t){const e={},n=p(t,["handle"]);n!=null&&m(e,["handle"],n);const r=p(t,["transparent"]);return r!=null&&m(e,["transparent"],r),e}function JU(){return{}}function uwe(t){const e={},n=p(t,["disabled"]);n!=null&&m(e,["disabled"],n);const r=p(t,["startOfSpeechSensitivity"]);r!=null&&m(e,["startOfSpeechSensitivity"],r);const i=p(t,["endOfSpeechSensitivity"]);i!=null&&m(e,["endOfSpeechSensitivity"],i);const o=p(t,["prefixPaddingMs"]);o!=null&&m(e,["prefixPaddingMs"],o);const s=p(t,["silenceDurationMs"]);return s!=null&&m(e,["silenceDurationMs"],s),e}function cwe(t){const e={},n=p(t,["automaticActivityDetection"]);n!=null&&m(e,["automaticActivityDetection"],uwe(n));const r=p(t,["activityHandling"]);r!=null&&m(e,["activityHandling"],r);const i=p(t,["turnCoverage"]);return i!=null&&m(e,["turnCoverage"],i),e}function fwe(t){const e={},n=p(t,["targetTokens"]);return n!=null&&m(e,["targetTokens"],n),e}function dwe(t){const e={},n=p(t,["triggerTokens"]);n!=null&&m(e,["triggerTokens"],n);const r=p(t,["slidingWindow"]);return r!=null&&m(e,["slidingWindow"],fwe(r)),e}function hwe(t){const e={},n=p(t,["proactiveAudio"]);return n!=null&&m(e,["proactiveAudio"],n),e}function pwe(t,e){const n={},r=p(t,["generationConfig"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig"],r);const i=p(t,["responseModalities"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig","responseModalities"],i);const o=p(t,["temperature"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","temperature"],o);const s=p(t,["topP"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","topP"],s);const u=p(t,["topK"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topK"],u);const c=p(t,["maxOutputTokens"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","maxOutputTokens"],c);const f=p(t,["mediaResolution"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","mediaResolution"],f);const h=p(t,["seed"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","seed"],h);const y=p(t,["speechConfig"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","speechConfig"],HEe(a1(y)));const v=p(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],v);const E=p(t,["systemInstruction"]);e!==void 0&&E!=null&&m(e,["setup","systemInstruction"],YEe(Cr(E)));const b=p(t,["tools"]);if(e!==void 0&&b!=null){let q=jd(b);Array.isArray(q)&&(q=q.map(z=>awe(Kd(z)))),m(e,["setup","tools"],q)}const S=p(t,["sessionResumption"]);e!==void 0&&S!=null&&m(e,["setup","sessionResumption"],lwe(S));const A=p(t,["inputAudioTranscription"]);e!==void 0&&A!=null&&m(e,["setup","inputAudioTranscription"],JU());const R=p(t,["outputAudioTranscription"]);e!==void 0&&R!=null&&m(e,["setup","outputAudioTranscription"],JU());const D=p(t,["realtimeInputConfig"]);e!==void 0&&D!=null&&m(e,["setup","realtimeInputConfig"],cwe(D));const M=p(t,["contextWindowCompression"]);e!==void 0&&M!=null&&m(e,["setup","contextWindowCompression"],dwe(M));const U=p(t,["proactivity"]);return e!==void 0&&U!=null&&m(e,["setup","proactivity"],hwe(U)),n}function mwe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["setup","model"],Tt(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],pwe(i,n)),n}function gwe(){return{}}function ywe(){return{}}function vwe(t){const e={},n=p(t,["media"]);n!=null&&m(e,["mediaChunks"],BH(n));const r=p(t,["audio"]);r!=null&&m(e,["audio"],$H(r));const i=p(t,["audioStreamEnd"]);i!=null&&m(e,["audioStreamEnd"],i);const o=p(t,["video"]);o!=null&&m(e,["video"],qH(o));const s=p(t,["text"]);return s!=null&&m(e,["text"],s),p(t,["activityStart"])!=null&&m(e,["activityStart"],gwe()),p(t,["activityEnd"])!=null&&m(e,["activityEnd"],ywe()),e}function _we(){return{}}function Twe(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function Ewe(t){const e={},n=p(t,["data"]);n!=null&&m(e,["data"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function wwe(t){const e={},n=p(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function bwe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],Twe(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],Ewe(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],wwe(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const u=p(t,["codeExecutionResult"]);u!=null&&m(e,["codeExecutionResult"],u);const c=p(t,["executableCode"]);c!=null&&m(e,["executableCode"],c);const f=p(t,["functionCall"]);f!=null&&m(e,["functionCall"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const y=p(t,["text"]);return y!=null&&m(e,["text"],y),e}function Swe(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>bwe(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function QU(t){const e={},n=p(t,["text"]);n!=null&&m(e,["text"],n);const r=p(t,["finished"]);return r!=null&&m(e,["finished"],r),e}function Awe(t){const e={},n=p(t,["retrievedUrl"]);n!=null&&m(e,["retrievedUrl"],n);const r=p(t,["urlRetrievalStatus"]);return r!=null&&m(e,["urlRetrievalStatus"],r),e}function Cwe(t){const e={},n=p(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Awe(i))),m(e,["urlMetadata"],r)}return e}function Iwe(t){const e={},n=p(t,["modelTurn"]);n!=null&&m(e,["modelTurn"],Swe(n));const r=p(t,["turnComplete"]);r!=null&&m(e,["turnComplete"],r);const i=p(t,["interrupted"]);i!=null&&m(e,["interrupted"],i);const o=p(t,["groundingMetadata"]);o!=null&&m(e,["groundingMetadata"],o);const s=p(t,["generationComplete"]);s!=null&&m(e,["generationComplete"],s);const u=p(t,["inputTranscription"]);u!=null&&m(e,["inputTranscription"],QU(u));const c=p(t,["outputTranscription"]);c!=null&&m(e,["outputTranscription"],QU(c));const f=p(t,["urlContextMetadata"]);return f!=null&&m(e,["urlContextMetadata"],Cwe(f)),e}function xwe(t){const e={},n=p(t,["id"]);n!=null&&m(e,["id"],n);const r=p(t,["args"]);r!=null&&m(e,["args"],r);const i=p(t,["name"]);return i!=null&&m(e,["name"],i),e}function Rwe(t){const e={},n=p(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>xwe(i))),m(e,["functionCalls"],r)}return e}function Pwe(t){const e={},n=p(t,["ids"]);return n!=null&&m(e,["ids"],n),e}function fv(t){const e={},n=p(t,["modality"]);n!=null&&m(e,["modality"],n);const r=p(t,["tokenCount"]);return r!=null&&m(e,["tokenCount"],r),e}function Mwe(t){const e={},n=p(t,["promptTokenCount"]);n!=null&&m(e,["promptTokenCount"],n);const r=p(t,["cachedContentTokenCount"]);r!=null&&m(e,["cachedContentTokenCount"],r);const i=p(t,["responseTokenCount"]);i!=null&&m(e,["responseTokenCount"],i);const o=p(t,["toolUsePromptTokenCount"]);o!=null&&m(e,["toolUsePromptTokenCount"],o);const s=p(t,["thoughtsTokenCount"]);s!=null&&m(e,["thoughtsTokenCount"],s);const u=p(t,["totalTokenCount"]);u!=null&&m(e,["totalTokenCount"],u);const c=p(t,["promptTokensDetails"]);if(c!=null){let v=c;Array.isArray(v)&&(v=v.map(E=>fv(E))),m(e,["promptTokensDetails"],v)}const f=p(t,["cacheTokensDetails"]);if(f!=null){let v=f;Array.isArray(v)&&(v=v.map(E=>fv(E))),m(e,["cacheTokensDetails"],v)}const h=p(t,["responseTokensDetails"]);if(h!=null){let v=h;Array.isArray(v)&&(v=v.map(E=>fv(E))),m(e,["responseTokensDetails"],v)}const y=p(t,["toolUsePromptTokensDetails"]);if(y!=null){let v=y;Array.isArray(v)&&(v=v.map(E=>fv(E))),m(e,["toolUsePromptTokensDetails"],v)}return e}function Dwe(t){const e={},n=p(t,["timeLeft"]);return n!=null&&m(e,["timeLeft"],n),e}function Nwe(t){const e={},n=p(t,["newHandle"]);n!=null&&m(e,["newHandle"],n);const r=p(t,["resumable"]);r!=null&&m(e,["resumable"],r);const i=p(t,["lastConsumedClientMessageIndex"]);return i!=null&&m(e,["lastConsumedClientMessageIndex"],i),e}function kwe(t){const e={};p(t,["setupComplete"])!=null&&m(e,["setupComplete"],_we());const r=p(t,["serverContent"]);r!=null&&m(e,["serverContent"],Iwe(r));const i=p(t,["toolCall"]);i!=null&&m(e,["toolCall"],Rwe(i));const o=p(t,["toolCallCancellation"]);o!=null&&m(e,["toolCallCancellation"],Pwe(o));const s=p(t,["usageMetadata"]);s!=null&&m(e,["usageMetadata"],Mwe(s));const u=p(t,["goAway"]);u!=null&&m(e,["goAway"],Dwe(u));const c=p(t,["sessionResumptionUpdate"]);return c!=null&&m(e,["sessionResumptionUpdate"],Nwe(c)),e}function Owe(){return{}}function Vwe(t){const e={},n=p(t,["text"]);n!=null&&m(e,["text"],n);const r=p(t,["weight"]);return r!=null&&m(e,["weight"],r),e}function Lwe(t){const e={},n=p(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Vwe(i))),m(e,["weightedPrompts"],r)}return e}function Uwe(t){const e={},n=p(t,["temperature"]);n!=null&&m(e,["temperature"],n);const r=p(t,["topK"]);r!=null&&m(e,["topK"],r);const i=p(t,["seed"]);i!=null&&m(e,["seed"],i);const o=p(t,["guidance"]);o!=null&&m(e,["guidance"],o);const s=p(t,["bpm"]);s!=null&&m(e,["bpm"],s);const u=p(t,["density"]);u!=null&&m(e,["density"],u);const c=p(t,["brightness"]);c!=null&&m(e,["brightness"],c);const f=p(t,["scale"]);f!=null&&m(e,["scale"],f);const h=p(t,["muteBass"]);h!=null&&m(e,["muteBass"],h);const y=p(t,["muteDrums"]);y!=null&&m(e,["muteDrums"],y);const v=p(t,["onlyBassAndDrums"]);v!=null&&m(e,["onlyBassAndDrums"],v);const E=p(t,["musicGenerationMode"]);return E!=null&&m(e,["musicGenerationMode"],E),e}function Fwe(t){const e={},n=p(t,["clientContent"]);n!=null&&m(e,["clientContent"],Lwe(n));const r=p(t,["musicGenerationConfig"]);return r!=null&&m(e,["musicGenerationConfig"],Uwe(r)),e}function Bwe(t){const e={},n=p(t,["data"]);n!=null&&m(e,["data"],n);const r=p(t,["mimeType"]);r!=null&&m(e,["mimeType"],r);const i=p(t,["sourceMetadata"]);return i!=null&&m(e,["sourceMetadata"],Fwe(i)),e}function qwe(t){const e={},n=p(t,["audioChunks"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Bwe(i))),m(e,["audioChunks"],r)}return e}function $we(t){const e={},n=p(t,["text"]);n!=null&&m(e,["text"],n);const r=p(t,["filteredReason"]);return r!=null&&m(e,["filteredReason"],r),e}function zwe(t){const e={};p(t,["setupComplete"])!=null&&m(e,["setupComplete"],Owe());const r=p(t,["serverContent"]);r!=null&&m(e,["serverContent"],qwe(r));const i=p(t,["filteredPrompt"]);return i!=null&&m(e,["filteredPrompt"],$we(i)),e}function Hwe(t){const e={},n=p(t,["sessionId"]);return n!=null&&m(e,["sessionId"],n),e}function Gwe(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function Kwe(t){const e={},n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const r=p(t,["data"]);r!=null&&m(e,["data"],r);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function jwe(t){const e={},n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const r=p(t,["fileUri"]);r!=null&&m(e,["fileUri"],r);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function Wwe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],Gwe(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],Kwe(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],jwe(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const u=p(t,["codeExecutionResult"]);u!=null&&m(e,["codeExecutionResult"],u);const c=p(t,["executableCode"]);c!=null&&m(e,["executableCode"],c);const f=p(t,["functionCall"]);f!=null&&m(e,["functionCall"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const y=p(t,["text"]);return y!=null&&m(e,["text"],y),e}function Ywe(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Wwe(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function XU(t){const e={},n=p(t,["text"]);n!=null&&m(e,["text"],n);const r=p(t,["finished"]);return r!=null&&m(e,["finished"],r),e}function Jwe(t){const e={},n=p(t,["modelTurn"]);n!=null&&m(e,["modelTurn"],Ywe(n));const r=p(t,["turnComplete"]);r!=null&&m(e,["turnComplete"],r);const i=p(t,["interrupted"]);i!=null&&m(e,["interrupted"],i);const o=p(t,["groundingMetadata"]);o!=null&&m(e,["groundingMetadata"],o);const s=p(t,["generationComplete"]);s!=null&&m(e,["generationComplete"],s);const u=p(t,["inputTranscription"]);u!=null&&m(e,["inputTranscription"],XU(u));const c=p(t,["outputTranscription"]);return c!=null&&m(e,["outputTranscription"],XU(c)),e}function Qwe(t){const e={},n=p(t,["args"]);n!=null&&m(e,["args"],n);const r=p(t,["name"]);return r!=null&&m(e,["name"],r),e}function Xwe(t){const e={},n=p(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Qwe(i))),m(e,["functionCalls"],r)}return e}function Zwe(t){const e={},n=p(t,["ids"]);return n!=null&&m(e,["ids"],n),e}function dv(t){const e={},n=p(t,["modality"]);n!=null&&m(e,["modality"],n);const r=p(t,["tokenCount"]);return r!=null&&m(e,["tokenCount"],r),e}function ebe(t){const e={},n=p(t,["promptTokenCount"]);n!=null&&m(e,["promptTokenCount"],n);const r=p(t,["cachedContentTokenCount"]);r!=null&&m(e,["cachedContentTokenCount"],r);const i=p(t,["candidatesTokenCount"]);i!=null&&m(e,["responseTokenCount"],i);const o=p(t,["toolUsePromptTokenCount"]);o!=null&&m(e,["toolUsePromptTokenCount"],o);const s=p(t,["thoughtsTokenCount"]);s!=null&&m(e,["thoughtsTokenCount"],s);const u=p(t,["totalTokenCount"]);u!=null&&m(e,["totalTokenCount"],u);const c=p(t,["promptTokensDetails"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(b=>dv(b))),m(e,["promptTokensDetails"],E)}const f=p(t,["cacheTokensDetails"]);if(f!=null){let E=f;Array.isArray(E)&&(E=E.map(b=>dv(b))),m(e,["cacheTokensDetails"],E)}const h=p(t,["candidatesTokensDetails"]);if(h!=null){let E=h;Array.isArray(E)&&(E=E.map(b=>dv(b))),m(e,["responseTokensDetails"],E)}const y=p(t,["toolUsePromptTokensDetails"]);if(y!=null){let E=y;Array.isArray(E)&&(E=E.map(b=>dv(b))),m(e,["toolUsePromptTokensDetails"],E)}const v=p(t,["trafficType"]);return v!=null&&m(e,["trafficType"],v),e}function tbe(t){const e={},n=p(t,["timeLeft"]);return n!=null&&m(e,["timeLeft"],n),e}function nbe(t){const e={},n=p(t,["newHandle"]);n!=null&&m(e,["newHandle"],n);const r=p(t,["resumable"]);r!=null&&m(e,["resumable"],r);const i=p(t,["lastConsumedClientMessageIndex"]);return i!=null&&m(e,["lastConsumedClientMessageIndex"],i),e}function rbe(t){const e={},n=p(t,["setupComplete"]);n!=null&&m(e,["setupComplete"],Hwe(n));const r=p(t,["serverContent"]);r!=null&&m(e,["serverContent"],Jwe(r));const i=p(t,["toolCall"]);i!=null&&m(e,["toolCall"],Xwe(i));const o=p(t,["toolCallCancellation"]);o!=null&&m(e,["toolCallCancellation"],Zwe(o));const s=p(t,["usageMetadata"]);s!=null&&m(e,["usageMetadata"],ebe(s));const u=p(t,["goAway"]);u!=null&&m(e,["goAway"],tbe(u));const c=p(t,["sessionResumptionUpdate"]);return c!=null&&m(e,["sessionResumptionUpdate"],nbe(c)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ibe(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function obe(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["data"]);n!=null&&m(e,["data"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function sbe(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function abe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],ibe(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],obe(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],sbe(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const u=p(t,["codeExecutionResult"]);u!=null&&m(e,["codeExecutionResult"],u);const c=p(t,["executableCode"]);c!=null&&m(e,["executableCode"],c);const f=p(t,["functionCall"]);f!=null&&m(e,["functionCall"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const y=p(t,["text"]);return y!=null&&m(e,["text"],y),e}function wT(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>abe(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function lbe(t){const e={},n=p(t,["anyOf"]);n!=null&&m(e,["anyOf"],n);const r=p(t,["default"]);r!=null&&m(e,["default"],r);const i=p(t,["description"]);i!=null&&m(e,["description"],i);const o=p(t,["enum"]);o!=null&&m(e,["enum"],o);const s=p(t,["example"]);s!=null&&m(e,["example"],s);const u=p(t,["format"]);u!=null&&m(e,["format"],u);const c=p(t,["items"]);c!=null&&m(e,["items"],c);const f=p(t,["maxItems"]);f!=null&&m(e,["maxItems"],f);const h=p(t,["maxLength"]);h!=null&&m(e,["maxLength"],h);const y=p(t,["maxProperties"]);y!=null&&m(e,["maxProperties"],y);const v=p(t,["maximum"]);v!=null&&m(e,["maximum"],v);const E=p(t,["minItems"]);E!=null&&m(e,["minItems"],E);const b=p(t,["minLength"]);b!=null&&m(e,["minLength"],b);const S=p(t,["minProperties"]);S!=null&&m(e,["minProperties"],S);const A=p(t,["minimum"]);A!=null&&m(e,["minimum"],A);const R=p(t,["nullable"]);R!=null&&m(e,["nullable"],R);const D=p(t,["pattern"]);D!=null&&m(e,["pattern"],D);const M=p(t,["properties"]);M!=null&&m(e,["properties"],M);const U=p(t,["propertyOrdering"]);U!=null&&m(e,["propertyOrdering"],U);const q=p(t,["required"]);q!=null&&m(e,["required"],q);const z=p(t,["title"]);z!=null&&m(e,["title"],z);const k=p(t,["type"]);return k!=null&&m(e,["type"],k),e}function ube(t){const e={};if(p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=p(t,["category"]);n!=null&&m(e,["category"],n);const r=p(t,["threshold"]);return r!=null&&m(e,["threshold"],r),e}function cbe(t){const e={},n=p(t,["behavior"]);n!=null&&m(e,["behavior"],n);const r=p(t,["description"]);r!=null&&m(e,["description"],r);const i=p(t,["name"]);i!=null&&m(e,["name"],i);const o=p(t,["parameters"]);o!=null&&m(e,["parameters"],o);const s=p(t,["parametersJsonSchema"]);s!=null&&m(e,["parametersJsonSchema"],s);const u=p(t,["response"]);u!=null&&m(e,["response"],u);const c=p(t,["responseJsonSchema"]);return c!=null&&m(e,["responseJsonSchema"],c),e}function fbe(t){const e={},n=p(t,["startTime"]);n!=null&&m(e,["startTime"],n);const r=p(t,["endTime"]);return r!=null&&m(e,["endTime"],r),e}function dbe(t){const e={},n=p(t,["timeRangeFilter"]);if(n!=null&&m(e,["timeRangeFilter"],fbe(n)),p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function hbe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["dynamicThreshold"]);return r!=null&&m(e,["dynamicThreshold"],r),e}function pbe(t){const e={},n=p(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],hbe(n)),e}function mbe(){return{}}function gbe(t){const e={},n=p(t,["environment"]);return n!=null&&m(e,["environment"],n),e}function ybe(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>cbe(f))),m(e,["functionDeclarations"],c)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=p(t,["googleSearch"]);r!=null&&m(e,["googleSearch"],dbe(r));const i=p(t,["googleSearchRetrieval"]);if(i!=null&&m(e,["googleSearchRetrieval"],pbe(i)),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(p(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");p(t,["urlContext"])!=null&&m(e,["urlContext"],mbe());const s=p(t,["computerUse"]);s!=null&&m(e,["computerUse"],gbe(s));const u=p(t,["codeExecution"]);return u!=null&&m(e,["codeExecution"],u),e}function vbe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["allowedFunctionNames"]);return r!=null&&m(e,["allowedFunctionNames"],r),e}function _be(t){const e={},n=p(t,["latitude"]);n!=null&&m(e,["latitude"],n);const r=p(t,["longitude"]);return r!=null&&m(e,["longitude"],r),e}function Tbe(t){const e={},n=p(t,["latLng"]);n!=null&&m(e,["latLng"],_be(n));const r=p(t,["languageCode"]);return r!=null&&m(e,["languageCode"],r),e}function Ebe(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],vbe(n));const r=p(t,["retrievalConfig"]);return r!=null&&m(e,["retrievalConfig"],Tbe(r)),e}function wbe(t){const e={},n=p(t,["voiceName"]);return n!=null&&m(e,["voiceName"],n),e}function a9(t){const e={},n=p(t,["prebuiltVoiceConfig"]);return n!=null&&m(e,["prebuiltVoiceConfig"],wbe(n)),e}function bbe(t){const e={},n=p(t,["speaker"]);n!=null&&m(e,["speaker"],n);const r=p(t,["voiceConfig"]);return r!=null&&m(e,["voiceConfig"],a9(r)),e}function Sbe(t){const e={},n=p(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>bbe(i))),m(e,["speakerVoiceConfigs"],r)}return e}function Abe(t){const e={},n=p(t,["voiceConfig"]);n!=null&&m(e,["voiceConfig"],a9(n));const r=p(t,["multiSpeakerVoiceConfig"]);r!=null&&m(e,["multiSpeakerVoiceConfig"],Sbe(r));const i=p(t,["languageCode"]);return i!=null&&m(e,["languageCode"],i),e}function Cbe(t){const e={},n=p(t,["includeThoughts"]);n!=null&&m(e,["includeThoughts"],n);const r=p(t,["thinkingBudget"]);return r!=null&&m(e,["thinkingBudget"],r),e}function Ibe(t,e,n){const r={},i=p(e,["systemInstruction"]);n!==void 0&&i!=null&&m(n,["systemInstruction"],wT(Cr(i)));const o=p(e,["temperature"]);o!=null&&m(r,["temperature"],o);const s=p(e,["topP"]);s!=null&&m(r,["topP"],s);const u=p(e,["topK"]);u!=null&&m(r,["topK"],u);const c=p(e,["candidateCount"]);c!=null&&m(r,["candidateCount"],c);const f=p(e,["maxOutputTokens"]);f!=null&&m(r,["maxOutputTokens"],f);const h=p(e,["stopSequences"]);h!=null&&m(r,["stopSequences"],h);const y=p(e,["responseLogprobs"]);y!=null&&m(r,["responseLogprobs"],y);const v=p(e,["logprobs"]);v!=null&&m(r,["logprobs"],v);const E=p(e,["presencePenalty"]);E!=null&&m(r,["presencePenalty"],E);const b=p(e,["frequencyPenalty"]);b!=null&&m(r,["frequencyPenalty"],b);const S=p(e,["seed"]);S!=null&&m(r,["seed"],S);const A=p(e,["responseMimeType"]);A!=null&&m(r,["responseMimeType"],A);const R=p(e,["responseSchema"]);R!=null&&m(r,["responseSchema"],lbe(o1(R)));const D=p(e,["responseJsonSchema"]);if(D!=null&&m(r,["responseJsonSchema"],D),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const M=p(e,["safetySettings"]);if(n!==void 0&&M!=null){let F=M;Array.isArray(F)&&(F=F.map(G=>ube(G))),m(n,["safetySettings"],F)}const U=p(e,["tools"]);if(n!==void 0&&U!=null){let F=jd(U);Array.isArray(F)&&(F=F.map(G=>ybe(Kd(G)))),m(n,["tools"],F)}const q=p(e,["toolConfig"]);if(n!==void 0&&q!=null&&m(n,["toolConfig"],Ebe(q)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const z=p(e,["cachedContent"]);n!==void 0&&z!=null&&m(n,["cachedContent"],pa(t,z));const k=p(e,["responseModalities"]);k!=null&&m(r,["responseModalities"],k);const V=p(e,["mediaResolution"]);V!=null&&m(r,["mediaResolution"],V);const N=p(e,["speechConfig"]);if(N!=null&&m(r,["speechConfig"],Abe(s1(N))),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const $=p(e,["thinkingConfig"]);return $!=null&&m(r,["thinkingConfig"],Cbe($)),r}function ZU(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],Tt(t,r));const i=p(e,["contents"]);if(i!=null){let s=Wi(i);Array.isArray(s)&&(s=s.map(u=>wT(u))),m(n,["contents"],s)}const o=p(e,["config"]);return o!=null&&m(n,["generationConfig"],Ibe(t,o,n)),n}function xbe(t,e){const n={},r=p(t,["taskType"]);e!==void 0&&r!=null&&m(e,["requests[]","taskType"],r);const i=p(t,["title"]);e!==void 0&&i!=null&&m(e,["requests[]","title"],i);const o=p(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&m(e,["requests[]","outputDimensionality"],o),p(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Rbe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],Tt(t,r));const i=p(e,["contents"]);i!=null&&m(n,["requests[]","content"],HH(t,i));const o=p(e,["config"]);o!=null&&m(n,["config"],xbe(o,n));const s=p(e,["model"]);return s!==void 0&&m(n,["requests[]","model"],Tt(t,s)),n}function Pbe(t,e){const n={};if(p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=p(t,["numberOfImages"]);e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r);const i=p(t,["aspectRatio"]);e!==void 0&&i!=null&&m(e,["parameters","aspectRatio"],i);const o=p(t,["guidanceScale"]);if(e!==void 0&&o!=null&&m(e,["parameters","guidanceScale"],o),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=p(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&m(e,["parameters","safetySetting"],s);const u=p(t,["personGeneration"]);e!==void 0&&u!=null&&m(e,["parameters","personGeneration"],u);const c=p(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&m(e,["parameters","includeSafetyAttributes"],c);const f=p(t,["includeRaiReason"]);e!==void 0&&f!=null&&m(e,["parameters","includeRaiReason"],f);const h=p(t,["language"]);e!==void 0&&h!=null&&m(e,["parameters","language"],h);const y=p(t,["outputMimeType"]);e!==void 0&&y!=null&&m(e,["parameters","outputOptions","mimeType"],y);const v=p(t,["outputCompressionQuality"]);if(e!==void 0&&v!=null&&m(e,["parameters","outputOptions","compressionQuality"],v),p(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const E=p(t,["imageSize"]);if(e!==void 0&&E!=null&&m(e,["parameters","sampleImageSize"],E),p(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Mbe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],Tt(t,r));const i=p(e,["prompt"]);i!=null&&m(n,["instances[0]","prompt"],i);const o=p(e,["config"]);return o!=null&&m(n,["config"],Pbe(o,n)),n}function Dbe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","name"],Tt(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function Nbe(t,e,n){const r={},i=p(e,["pageSize"]);n!==void 0&&i!=null&&m(n,["_query","pageSize"],i);const o=p(e,["pageToken"]);n!==void 0&&o!=null&&m(n,["_query","pageToken"],o);const s=p(e,["filter"]);n!==void 0&&s!=null&&m(n,["_query","filter"],s);const u=p(e,["queryBase"]);return n!==void 0&&u!=null&&m(n,["_url","models_url"],jH(t,u)),r}function kbe(t,e){const n={},r=p(e,["config"]);return r!=null&&m(n,["config"],Nbe(t,r,n)),n}function Obe(t,e){const n={},r=p(t,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const i=p(t,["description"]);e!==void 0&&i!=null&&m(e,["description"],i);const o=p(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&m(e,["defaultCheckpointId"],o),n}function Vbe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","name"],Tt(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],Obe(i,n)),n}function Lbe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","name"],Tt(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function Ube(t){const e={};if(p(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(p(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(p(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Fbe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],Tt(t,r));const i=p(e,["contents"]);if(i!=null){let s=Wi(i);Array.isArray(s)&&(s=s.map(u=>wT(u))),m(n,["contents"],s)}const o=p(e,["config"]);return o!=null&&m(n,["config"],Ube(o)),n}function l9(t){const e={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=p(t,["imageBytes"]);n!=null&&m(e,["bytesBase64Encoded"],yc(n));const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function Bbe(t,e){const n={},r=p(t,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const i=p(t,["image"]);if(e!==void 0&&i!=null&&m(e,["instances[0]","image"],l9(i)),p(t,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");return n}function qbe(t,e){const n={},r=p(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r),p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=p(t,["durationSeconds"]);if(e!==void 0&&i!=null&&m(e,["parameters","durationSeconds"],i),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=p(t,["aspectRatio"]);e!==void 0&&o!=null&&m(e,["parameters","aspectRatio"],o);const s=p(t,["resolution"]);e!==void 0&&s!=null&&m(e,["parameters","resolution"],s);const u=p(t,["personGeneration"]);if(e!==void 0&&u!=null&&m(e,["parameters","personGeneration"],u),p(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=p(t,["negativePrompt"]);e!==void 0&&c!=null&&m(e,["parameters","negativePrompt"],c);const f=p(t,["enhancePrompt"]);if(e!==void 0&&f!=null&&m(e,["parameters","enhancePrompt"],f),p(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(p(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(p(t,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(p(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function $be(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],Tt(t,r));const i=p(e,["prompt"]);i!=null&&m(n,["instances[0]","prompt"],i);const o=p(e,["image"]);if(o!=null&&m(n,["instances[0]","image"],l9(o)),p(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const s=p(e,["source"]);s!=null&&m(n,["config"],Bbe(s,n));const u=p(e,["config"]);return u!=null&&m(n,["config"],qbe(u,n)),n}function zbe(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function Hbe(t){const e={},n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const r=p(t,["data"]);r!=null&&m(e,["data"],r);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function Gbe(t){const e={},n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const r=p(t,["fileUri"]);r!=null&&m(e,["fileUri"],r);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function Kbe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],zbe(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],Hbe(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],Gbe(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const u=p(t,["codeExecutionResult"]);u!=null&&m(e,["codeExecutionResult"],u);const c=p(t,["executableCode"]);c!=null&&m(e,["executableCode"],c);const f=p(t,["functionCall"]);f!=null&&m(e,["functionCall"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const y=p(t,["text"]);return y!=null&&m(e,["text"],y),e}function Yd(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Kbe(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function jbe(t){const e={},n=p(t,["anyOf"]);n!=null&&m(e,["anyOf"],n);const r=p(t,["default"]);r!=null&&m(e,["default"],r);const i=p(t,["description"]);i!=null&&m(e,["description"],i);const o=p(t,["enum"]);o!=null&&m(e,["enum"],o);const s=p(t,["example"]);s!=null&&m(e,["example"],s);const u=p(t,["format"]);u!=null&&m(e,["format"],u);const c=p(t,["items"]);c!=null&&m(e,["items"],c);const f=p(t,["maxItems"]);f!=null&&m(e,["maxItems"],f);const h=p(t,["maxLength"]);h!=null&&m(e,["maxLength"],h);const y=p(t,["maxProperties"]);y!=null&&m(e,["maxProperties"],y);const v=p(t,["maximum"]);v!=null&&m(e,["maximum"],v);const E=p(t,["minItems"]);E!=null&&m(e,["minItems"],E);const b=p(t,["minLength"]);b!=null&&m(e,["minLength"],b);const S=p(t,["minProperties"]);S!=null&&m(e,["minProperties"],S);const A=p(t,["minimum"]);A!=null&&m(e,["minimum"],A);const R=p(t,["nullable"]);R!=null&&m(e,["nullable"],R);const D=p(t,["pattern"]);D!=null&&m(e,["pattern"],D);const M=p(t,["properties"]);M!=null&&m(e,["properties"],M);const U=p(t,["propertyOrdering"]);U!=null&&m(e,["propertyOrdering"],U);const q=p(t,["required"]);q!=null&&m(e,["required"],q);const z=p(t,["title"]);z!=null&&m(e,["title"],z);const k=p(t,["type"]);return k!=null&&m(e,["type"],k),e}function Wbe(t){const e={},n=p(t,["featureSelectionPreference"]);return n!=null&&m(e,["featureSelectionPreference"],n),e}function Ybe(t){const e={},n=p(t,["method"]);n!=null&&m(e,["method"],n);const r=p(t,["category"]);r!=null&&m(e,["category"],r);const i=p(t,["threshold"]);return i!=null&&m(e,["threshold"],i),e}function Jbe(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&m(e,["description"],n);const r=p(t,["name"]);r!=null&&m(e,["name"],r);const i=p(t,["parameters"]);i!=null&&m(e,["parameters"],i);const o=p(t,["parametersJsonSchema"]);o!=null&&m(e,["parametersJsonSchema"],o);const s=p(t,["response"]);s!=null&&m(e,["response"],s);const u=p(t,["responseJsonSchema"]);return u!=null&&m(e,["responseJsonSchema"],u),e}function Qbe(t){const e={},n=p(t,["startTime"]);n!=null&&m(e,["startTime"],n);const r=p(t,["endTime"]);return r!=null&&m(e,["endTime"],r),e}function Xbe(t){const e={},n=p(t,["timeRangeFilter"]);n!=null&&m(e,["timeRangeFilter"],Qbe(n));const r=p(t,["excludeDomains"]);return r!=null&&m(e,["excludeDomains"],r),e}function Zbe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["dynamicThreshold"]);return r!=null&&m(e,["dynamicThreshold"],r),e}function eSe(t){const e={},n=p(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],Zbe(n)),e}function tSe(t){const e={},n=p(t,["excludeDomains"]);return n!=null&&m(e,["excludeDomains"],n),e}function nSe(t){const e={},n=p(t,["apiKeyString"]);return n!=null&&m(e,["apiKeyString"],n),e}function rSe(t){const e={},n=p(t,["apiKeyConfig"]);n!=null&&m(e,["apiKeyConfig"],nSe(n));const r=p(t,["authType"]);r!=null&&m(e,["authType"],r);const i=p(t,["googleServiceAccountConfig"]);i!=null&&m(e,["googleServiceAccountConfig"],i);const o=p(t,["httpBasicAuthConfig"]);o!=null&&m(e,["httpBasicAuthConfig"],o);const s=p(t,["oauthConfig"]);s!=null&&m(e,["oauthConfig"],s);const u=p(t,["oidcConfig"]);return u!=null&&m(e,["oidcConfig"],u),e}function iSe(t){const e={},n=p(t,["authConfig"]);return n!=null&&m(e,["authConfig"],rSe(n)),e}function oSe(){return{}}function sSe(t){const e={},n=p(t,["environment"]);return n!=null&&m(e,["environment"],n),e}function u9(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(v=>Jbe(v))),m(e,["functionDeclarations"],y)}const r=p(t,["retrieval"]);r!=null&&m(e,["retrieval"],r);const i=p(t,["googleSearch"]);i!=null&&m(e,["googleSearch"],Xbe(i));const o=p(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],eSe(o));const s=p(t,["enterpriseWebSearch"]);s!=null&&m(e,["enterpriseWebSearch"],tSe(s));const u=p(t,["googleMaps"]);u!=null&&m(e,["googleMaps"],iSe(u)),p(t,["urlContext"])!=null&&m(e,["urlContext"],oSe());const f=p(t,["computerUse"]);f!=null&&m(e,["computerUse"],sSe(f));const h=p(t,["codeExecution"]);return h!=null&&m(e,["codeExecution"],h),e}function aSe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["allowedFunctionNames"]);return r!=null&&m(e,["allowedFunctionNames"],r),e}function lSe(t){const e={},n=p(t,["latitude"]);n!=null&&m(e,["latitude"],n);const r=p(t,["longitude"]);return r!=null&&m(e,["longitude"],r),e}function uSe(t){const e={},n=p(t,["latLng"]);n!=null&&m(e,["latLng"],lSe(n));const r=p(t,["languageCode"]);return r!=null&&m(e,["languageCode"],r),e}function cSe(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],aSe(n));const r=p(t,["retrievalConfig"]);return r!=null&&m(e,["retrievalConfig"],uSe(r)),e}function fSe(t){const e={},n=p(t,["voiceName"]);return n!=null&&m(e,["voiceName"],n),e}function dSe(t){const e={},n=p(t,["prebuiltVoiceConfig"]);return n!=null&&m(e,["prebuiltVoiceConfig"],fSe(n)),e}function hSe(t){const e={},n=p(t,["voiceConfig"]);if(n!=null&&m(e,["voiceConfig"],dSe(n)),p(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=p(t,["languageCode"]);return r!=null&&m(e,["languageCode"],r),e}function pSe(t){const e={},n=p(t,["includeThoughts"]);n!=null&&m(e,["includeThoughts"],n);const r=p(t,["thinkingBudget"]);return r!=null&&m(e,["thinkingBudget"],r),e}function mSe(t,e,n){const r={},i=p(e,["systemInstruction"]);n!==void 0&&i!=null&&m(n,["systemInstruction"],Yd(Cr(i)));const o=p(e,["temperature"]);o!=null&&m(r,["temperature"],o);const s=p(e,["topP"]);s!=null&&m(r,["topP"],s);const u=p(e,["topK"]);u!=null&&m(r,["topK"],u);const c=p(e,["candidateCount"]);c!=null&&m(r,["candidateCount"],c);const f=p(e,["maxOutputTokens"]);f!=null&&m(r,["maxOutputTokens"],f);const h=p(e,["stopSequences"]);h!=null&&m(r,["stopSequences"],h);const y=p(e,["responseLogprobs"]);y!=null&&m(r,["responseLogprobs"],y);const v=p(e,["logprobs"]);v!=null&&m(r,["logprobs"],v);const E=p(e,["presencePenalty"]);E!=null&&m(r,["presencePenalty"],E);const b=p(e,["frequencyPenalty"]);b!=null&&m(r,["frequencyPenalty"],b);const S=p(e,["seed"]);S!=null&&m(r,["seed"],S);const A=p(e,["responseMimeType"]);A!=null&&m(r,["responseMimeType"],A);const R=p(e,["responseSchema"]);R!=null&&m(r,["responseSchema"],jbe(o1(R)));const D=p(e,["responseJsonSchema"]);D!=null&&m(r,["responseJsonSchema"],D);const M=p(e,["routingConfig"]);M!=null&&m(r,["routingConfig"],M);const U=p(e,["modelSelectionConfig"]);U!=null&&m(r,["modelConfig"],Wbe(U));const q=p(e,["safetySettings"]);if(n!==void 0&&q!=null){let Se=q;Array.isArray(Se)&&(Se=Se.map(ee=>Ybe(ee))),m(n,["safetySettings"],Se)}const z=p(e,["tools"]);if(n!==void 0&&z!=null){let Se=jd(z);Array.isArray(Se)&&(Se=Se.map(ee=>u9(Kd(ee)))),m(n,["tools"],Se)}const k=p(e,["toolConfig"]);n!==void 0&&k!=null&&m(n,["toolConfig"],cSe(k));const V=p(e,["labels"]);n!==void 0&&V!=null&&m(n,["labels"],V);const N=p(e,["cachedContent"]);n!==void 0&&N!=null&&m(n,["cachedContent"],pa(t,N));const $=p(e,["responseModalities"]);$!=null&&m(r,["responseModalities"],$);const F=p(e,["mediaResolution"]);F!=null&&m(r,["mediaResolution"],F);const G=p(e,["speechConfig"]);G!=null&&m(r,["speechConfig"],hSe(s1(G)));const H=p(e,["audioTimestamp"]);H!=null&&m(r,["audioTimestamp"],H);const Ae=p(e,["thinkingConfig"]);return Ae!=null&&m(r,["thinkingConfig"],pSe(Ae)),r}function eF(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],Tt(t,r));const i=p(e,["contents"]);if(i!=null){let s=Wi(i);Array.isArray(s)&&(s=s.map(u=>Yd(u))),m(n,["contents"],s)}const o=p(e,["config"]);return o!=null&&m(n,["generationConfig"],mSe(t,o,n)),n}function gSe(t,e){const n={},r=p(t,["taskType"]);e!==void 0&&r!=null&&m(e,["instances[]","task_type"],r);const i=p(t,["title"]);e!==void 0&&i!=null&&m(e,["instances[]","title"],i);const o=p(t,["outputDimensionality"]);e!==void 0&&o!=null&&m(e,["parameters","outputDimensionality"],o);const s=p(t,["mimeType"]);e!==void 0&&s!=null&&m(e,["instances[]","mimeType"],s);const u=p(t,["autoTruncate"]);return e!==void 0&&u!=null&&m(e,["parameters","autoTruncate"],u),n}function ySe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],Tt(t,r));const i=p(e,["contents"]);i!=null&&m(n,["instances[]","content"],HH(t,i));const o=p(e,["config"]);return o!=null&&m(n,["config"],gSe(o,n)),n}function vSe(t,e){const n={},r=p(t,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const i=p(t,["negativePrompt"]);e!==void 0&&i!=null&&m(e,["parameters","negativePrompt"],i);const o=p(t,["numberOfImages"]);e!==void 0&&o!=null&&m(e,["parameters","sampleCount"],o);const s=p(t,["aspectRatio"]);e!==void 0&&s!=null&&m(e,["parameters","aspectRatio"],s);const u=p(t,["guidanceScale"]);e!==void 0&&u!=null&&m(e,["parameters","guidanceScale"],u);const c=p(t,["seed"]);e!==void 0&&c!=null&&m(e,["parameters","seed"],c);const f=p(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&m(e,["parameters","safetySetting"],f);const h=p(t,["personGeneration"]);e!==void 0&&h!=null&&m(e,["parameters","personGeneration"],h);const y=p(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&m(e,["parameters","includeSafetyAttributes"],y);const v=p(t,["includeRaiReason"]);e!==void 0&&v!=null&&m(e,["parameters","includeRaiReason"],v);const E=p(t,["language"]);e!==void 0&&E!=null&&m(e,["parameters","language"],E);const b=p(t,["outputMimeType"]);e!==void 0&&b!=null&&m(e,["parameters","outputOptions","mimeType"],b);const S=p(t,["outputCompressionQuality"]);e!==void 0&&S!=null&&m(e,["parameters","outputOptions","compressionQuality"],S);const A=p(t,["addWatermark"]);e!==void 0&&A!=null&&m(e,["parameters","addWatermark"],A);const R=p(t,["imageSize"]);e!==void 0&&R!=null&&m(e,["parameters","sampleImageSize"],R);const D=p(t,["enhancePrompt"]);return e!==void 0&&D!=null&&m(e,["parameters","enhancePrompt"],D),n}function _Se(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],Tt(t,r));const i=p(e,["prompt"]);i!=null&&m(n,["instances[0]","prompt"],i);const o=p(e,["config"]);return o!=null&&m(n,["config"],vSe(o,n)),n}function ls(t){const e={},n=p(t,["gcsUri"]);n!=null&&m(e,["gcsUri"],n);const r=p(t,["imageBytes"]);r!=null&&m(e,["bytesBase64Encoded"],yc(r));const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function TSe(t){const e={},n=p(t,["maskMode"]);n!=null&&m(e,["maskMode"],n);const r=p(t,["segmentationClasses"]);r!=null&&m(e,["maskClasses"],r);const i=p(t,["maskDilation"]);return i!=null&&m(e,["dilation"],i),e}function ESe(t){const e={},n=p(t,["controlType"]);n!=null&&m(e,["controlType"],n);const r=p(t,["enableControlImageComputation"]);return r!=null&&m(e,["computeControl"],r),e}function wSe(t){const e={},n=p(t,["styleDescription"]);return n!=null&&m(e,["styleDescription"],n),e}function bSe(t){const e={},n=p(t,["subjectType"]);n!=null&&m(e,["subjectType"],n);const r=p(t,["subjectDescription"]);return r!=null&&m(e,["subjectDescription"],r),e}function SSe(t){const e={},n=p(t,["referenceImage"]);n!=null&&m(e,["referenceImage"],ls(n));const r=p(t,["referenceId"]);r!=null&&m(e,["referenceId"],r);const i=p(t,["referenceType"]);i!=null&&m(e,["referenceType"],i);const o=p(t,["maskImageConfig"]);o!=null&&m(e,["maskImageConfig"],TSe(o));const s=p(t,["controlImageConfig"]);s!=null&&m(e,["controlImageConfig"],ESe(s));const u=p(t,["styleImageConfig"]);u!=null&&m(e,["styleImageConfig"],wSe(u));const c=p(t,["subjectImageConfig"]);return c!=null&&m(e,["subjectImageConfig"],bSe(c)),e}function ASe(t,e){const n={},r=p(t,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const i=p(t,["negativePrompt"]);e!==void 0&&i!=null&&m(e,["parameters","negativePrompt"],i);const o=p(t,["numberOfImages"]);e!==void 0&&o!=null&&m(e,["parameters","sampleCount"],o);const s=p(t,["aspectRatio"]);e!==void 0&&s!=null&&m(e,["parameters","aspectRatio"],s);const u=p(t,["guidanceScale"]);e!==void 0&&u!=null&&m(e,["parameters","guidanceScale"],u);const c=p(t,["seed"]);e!==void 0&&c!=null&&m(e,["parameters","seed"],c);const f=p(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&m(e,["parameters","safetySetting"],f);const h=p(t,["personGeneration"]);e!==void 0&&h!=null&&m(e,["parameters","personGeneration"],h);const y=p(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&m(e,["parameters","includeSafetyAttributes"],y);const v=p(t,["includeRaiReason"]);e!==void 0&&v!=null&&m(e,["parameters","includeRaiReason"],v);const E=p(t,["language"]);e!==void 0&&E!=null&&m(e,["parameters","language"],E);const b=p(t,["outputMimeType"]);e!==void 0&&b!=null&&m(e,["parameters","outputOptions","mimeType"],b);const S=p(t,["outputCompressionQuality"]);e!==void 0&&S!=null&&m(e,["parameters","outputOptions","compressionQuality"],S);const A=p(t,["addWatermark"]);e!==void 0&&A!=null&&m(e,["parameters","addWatermark"],A);const R=p(t,["editMode"]);e!==void 0&&R!=null&&m(e,["parameters","editMode"],R);const D=p(t,["baseSteps"]);return e!==void 0&&D!=null&&m(e,["parameters","editConfig","baseSteps"],D),n}function CSe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],Tt(t,r));const i=p(e,["prompt"]);i!=null&&m(n,["instances[0]","prompt"],i);const o=p(e,["referenceImages"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(c=>SSe(c))),m(n,["instances[0]","referenceImages"],u)}const s=p(e,["config"]);return s!=null&&m(n,["config"],ASe(s,n)),n}function ISe(t,e){const n={},r=p(t,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const i=p(t,["includeRaiReason"]);e!==void 0&&i!=null&&m(e,["parameters","includeRaiReason"],i);const o=p(t,["outputMimeType"]);e!==void 0&&o!=null&&m(e,["parameters","outputOptions","mimeType"],o);const s=p(t,["outputCompressionQuality"]);e!==void 0&&s!=null&&m(e,["parameters","outputOptions","compressionQuality"],s);const u=p(t,["enhanceInputImage"]);e!==void 0&&u!=null&&m(e,["parameters","upscaleConfig","enhanceInputImage"],u);const c=p(t,["imagePreservationFactor"]);e!==void 0&&c!=null&&m(e,["parameters","upscaleConfig","imagePreservationFactor"],c);const f=p(t,["numberOfImages"]);e!==void 0&&f!=null&&m(e,["parameters","sampleCount"],f);const h=p(t,["mode"]);return e!==void 0&&h!=null&&m(e,["parameters","mode"],h),n}function xSe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],Tt(t,r));const i=p(e,["image"]);i!=null&&m(n,["instances[0]","image"],ls(i));const o=p(e,["upscaleFactor"]);o!=null&&m(n,["parameters","upscaleConfig","upscaleFactor"],o);const s=p(e,["config"]);return s!=null&&m(n,["config"],ISe(s,n)),n}function RSe(t){const e={},n=p(t,["productImage"]);return n!=null&&m(e,["image"],ls(n)),e}function PSe(t,e){const n={},r=p(t,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const i=p(t,["personImage"]);e!==void 0&&i!=null&&m(e,["instances[0]","personImage","image"],ls(i));const o=p(t,["productImages"]);if(e!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(u=>RSe(u))),m(e,["instances[0]","productImages"],s)}return n}function MSe(t,e){const n={},r=p(t,["numberOfImages"]);e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r);const i=p(t,["baseSteps"]);e!==void 0&&i!=null&&m(e,["parameters","editConfig","baseSteps"],i);const o=p(t,["outputGcsUri"]);e!==void 0&&o!=null&&m(e,["parameters","storageUri"],o);const s=p(t,["seed"]);e!==void 0&&s!=null&&m(e,["parameters","seed"],s);const u=p(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&m(e,["parameters","safetySetting"],u);const c=p(t,["personGeneration"]);e!==void 0&&c!=null&&m(e,["parameters","personGeneration"],c);const f=p(t,["addWatermark"]);e!==void 0&&f!=null&&m(e,["parameters","addWatermark"],f);const h=p(t,["outputMimeType"]);e!==void 0&&h!=null&&m(e,["parameters","outputOptions","mimeType"],h);const y=p(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&m(e,["parameters","outputOptions","compressionQuality"],y);const v=p(t,["enhancePrompt"]);return e!==void 0&&v!=null&&m(e,["parameters","enhancePrompt"],v),n}function DSe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],Tt(t,r));const i=p(e,["source"]);i!=null&&m(n,["config"],PSe(i,n));const o=p(e,["config"]);return o!=null&&m(n,["config"],MSe(o,n)),n}function NSe(t){const e={},n=p(t,["image"]);return n!=null&&m(e,["image"],ls(n)),e}function kSe(t,e){const n={},r=p(t,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const i=p(t,["image"]);e!==void 0&&i!=null&&m(e,["instances[0]","image"],ls(i));const o=p(t,["scribbleImage"]);return e!==void 0&&o!=null&&m(e,["instances[0]","scribble"],NSe(o)),n}function OSe(t,e){const n={},r=p(t,["mode"]);e!==void 0&&r!=null&&m(e,["parameters","mode"],r);const i=p(t,["maxPredictions"]);e!==void 0&&i!=null&&m(e,["parameters","maxPredictions"],i);const o=p(t,["confidenceThreshold"]);e!==void 0&&o!=null&&m(e,["parameters","confidenceThreshold"],o);const s=p(t,["maskDilation"]);e!==void 0&&s!=null&&m(e,["parameters","maskDilation"],s);const u=p(t,["binaryColorThreshold"]);return e!==void 0&&u!=null&&m(e,["parameters","binaryColorThreshold"],u),n}function VSe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],Tt(t,r));const i=p(e,["source"]);i!=null&&m(n,["config"],kSe(i,n));const o=p(e,["config"]);return o!=null&&m(n,["config"],OSe(o,n)),n}function LSe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","name"],Tt(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function USe(t,e,n){const r={},i=p(e,["pageSize"]);n!==void 0&&i!=null&&m(n,["_query","pageSize"],i);const o=p(e,["pageToken"]);n!==void 0&&o!=null&&m(n,["_query","pageToken"],o);const s=p(e,["filter"]);n!==void 0&&s!=null&&m(n,["_query","filter"],s);const u=p(e,["queryBase"]);return n!==void 0&&u!=null&&m(n,["_url","models_url"],jH(t,u)),r}function FSe(t,e){const n={},r=p(e,["config"]);return r!=null&&m(n,["config"],USe(t,r,n)),n}function BSe(t,e){const n={},r=p(t,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const i=p(t,["description"]);e!==void 0&&i!=null&&m(e,["description"],i);const o=p(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&m(e,["defaultCheckpointId"],o),n}function qSe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],Tt(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],BSe(i,n)),n}function $Se(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","name"],Tt(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function zSe(t,e){const n={},r=p(t,["systemInstruction"]);e!==void 0&&r!=null&&m(e,["systemInstruction"],Yd(Cr(r)));const i=p(t,["tools"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>u9(u))),m(e,["tools"],s)}const o=p(t,["generationConfig"]);return e!==void 0&&o!=null&&m(e,["generationConfig"],o),n}function HSe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],Tt(t,r));const i=p(e,["contents"]);if(i!=null){let s=Wi(i);Array.isArray(s)&&(s=s.map(u=>Yd(u))),m(n,["contents"],s)}const o=p(e,["config"]);return o!=null&&m(n,["config"],zSe(o,n)),n}function GSe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],Tt(t,r));const i=p(e,["contents"]);if(i!=null){let s=Wi(i);Array.isArray(s)&&(s=s.map(u=>Yd(u))),m(n,["contents"],s)}const o=p(e,["config"]);return o!=null&&m(n,["config"],o),n}function c9(t){const e={},n=p(t,["uri"]);n!=null&&m(e,["gcsUri"],n);const r=p(t,["videoBytes"]);r!=null&&m(e,["bytesBase64Encoded"],yc(r));const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function KSe(t,e){const n={},r=p(t,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const i=p(t,["image"]);e!==void 0&&i!=null&&m(e,["instances[0]","image"],ls(i));const o=p(t,["video"]);return e!==void 0&&o!=null&&m(e,["instances[0]","video"],c9(o)),n}function jSe(t){const e={},n=p(t,["image"]);n!=null&&m(e,["image"],ls(n));const r=p(t,["referenceType"]);return r!=null&&m(e,["referenceType"],r),e}function WSe(t,e){const n={},r=p(t,["numberOfVideos"]);e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r);const i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&m(e,["parameters","storageUri"],i);const o=p(t,["fps"]);e!==void 0&&o!=null&&m(e,["parameters","fps"],o);const s=p(t,["durationSeconds"]);e!==void 0&&s!=null&&m(e,["parameters","durationSeconds"],s);const u=p(t,["seed"]);e!==void 0&&u!=null&&m(e,["parameters","seed"],u);const c=p(t,["aspectRatio"]);e!==void 0&&c!=null&&m(e,["parameters","aspectRatio"],c);const f=p(t,["resolution"]);e!==void 0&&f!=null&&m(e,["parameters","resolution"],f);const h=p(t,["personGeneration"]);e!==void 0&&h!=null&&m(e,["parameters","personGeneration"],h);const y=p(t,["pubsubTopic"]);e!==void 0&&y!=null&&m(e,["parameters","pubsubTopic"],y);const v=p(t,["negativePrompt"]);e!==void 0&&v!=null&&m(e,["parameters","negativePrompt"],v);const E=p(t,["enhancePrompt"]);e!==void 0&&E!=null&&m(e,["parameters","enhancePrompt"],E);const b=p(t,["generateAudio"]);e!==void 0&&b!=null&&m(e,["parameters","generateAudio"],b);const S=p(t,["lastFrame"]);e!==void 0&&S!=null&&m(e,["instances[0]","lastFrame"],ls(S));const A=p(t,["referenceImages"]);if(e!==void 0&&A!=null){let D=A;Array.isArray(D)&&(D=D.map(M=>jSe(M))),m(e,["instances[0]","referenceImages"],D)}const R=p(t,["compressionQuality"]);return e!==void 0&&R!=null&&m(e,["parameters","compressionQuality"],R),n}function YSe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],Tt(t,r));const i=p(e,["prompt"]);i!=null&&m(n,["instances[0]","prompt"],i);const o=p(e,["image"]);o!=null&&m(n,["instances[0]","image"],ls(o));const s=p(e,["video"]);s!=null&&m(n,["instances[0]","video"],c9(s));const u=p(e,["source"]);u!=null&&m(n,["config"],KSe(u,n));const c=p(e,["config"]);return c!=null&&m(n,["config"],WSe(c,n)),n}function JSe(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function QSe(t){const e={},n=p(t,["data"]);n!=null&&m(e,["data"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function XSe(t){const e={},n=p(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function ZSe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],JSe(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],QSe(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],XSe(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const u=p(t,["codeExecutionResult"]);u!=null&&m(e,["codeExecutionResult"],u);const c=p(t,["executableCode"]);c!=null&&m(e,["executableCode"],c);const f=p(t,["functionCall"]);f!=null&&m(e,["functionCall"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const y=p(t,["text"]);return y!=null&&m(e,["text"],y),e}function eAe(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>ZSe(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function tAe(t){const e={},n=p(t,["citationSources"]);return n!=null&&m(e,["citations"],n),e}function nAe(t){const e={},n=p(t,["retrievedUrl"]);n!=null&&m(e,["retrievedUrl"],n);const r=p(t,["urlRetrievalStatus"]);return r!=null&&m(e,["urlRetrievalStatus"],r),e}function rAe(t){const e={},n=p(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>nAe(i))),m(e,["urlMetadata"],r)}return e}function iAe(t){const e={},n=p(t,["content"]);n!=null&&m(e,["content"],eAe(n));const r=p(t,["citationMetadata"]);r!=null&&m(e,["citationMetadata"],tAe(r));const i=p(t,["tokenCount"]);i!=null&&m(e,["tokenCount"],i);const o=p(t,["finishReason"]);o!=null&&m(e,["finishReason"],o);const s=p(t,["urlContextMetadata"]);s!=null&&m(e,["urlContextMetadata"],rAe(s));const u=p(t,["avgLogprobs"]);u!=null&&m(e,["avgLogprobs"],u);const c=p(t,["groundingMetadata"]);c!=null&&m(e,["groundingMetadata"],c);const f=p(t,["index"]);f!=null&&m(e,["index"],f);const h=p(t,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const y=p(t,["safetyRatings"]);return y!=null&&m(e,["safetyRatings"],y),e}function tF(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>iAe(f))),m(e,["candidates"],c)}const i=p(t,["modelVersion"]);i!=null&&m(e,["modelVersion"],i);const o=p(t,["promptFeedback"]);o!=null&&m(e,["promptFeedback"],o);const s=p(t,["responseId"]);s!=null&&m(e,["responseId"],s);const u=p(t,["usageMetadata"]);return u!=null&&m(e,["usageMetadata"],u),e}function oAe(t){const e={},n=p(t,["values"]);return n!=null&&m(e,["values"],n),e}function sAe(){return{}}function aAe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>oAe(s))),m(e,["embeddings"],o)}return p(t,["metadata"])!=null&&m(e,["metadata"],sAe()),e}function lAe(t){const e={},n=p(t,["bytesBase64Encoded"]);n!=null&&m(e,["imageBytes"],yc(n));const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function f9(t){const e={},n=p(t,["safetyAttributes","categories"]);n!=null&&m(e,["categories"],n);const r=p(t,["safetyAttributes","scores"]);r!=null&&m(e,["scores"],r);const i=p(t,["contentType"]);return i!=null&&m(e,["contentType"],i),e}function uAe(t){const e={},n=p(t,["_self"]);n!=null&&m(e,["image"],lAe(n));const r=p(t,["raiFilteredReason"]);r!=null&&m(e,["raiFilteredReason"],r);const i=p(t,["_self"]);return i!=null&&m(e,["safetyAttributes"],f9(i)),e}function cAe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>uAe(s))),m(e,["generatedImages"],o)}const i=p(t,["positivePromptSafetyAttributes"]);return i!=null&&m(e,["positivePromptSafetyAttributes"],f9(i)),e}function fAe(t){const e={},n=p(t,["baseModel"]);n!=null&&m(e,["baseModel"],n);const r=p(t,["createTime"]);r!=null&&m(e,["createTime"],r);const i=p(t,["updateTime"]);return i!=null&&m(e,["updateTime"],i),e}function bC(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const r=p(t,["displayName"]);r!=null&&m(e,["displayName"],r);const i=p(t,["description"]);i!=null&&m(e,["description"],i);const o=p(t,["version"]);o!=null&&m(e,["version"],o);const s=p(t,["_self"]);s!=null&&m(e,["tunedModelInfo"],fAe(s));const u=p(t,["inputTokenLimit"]);u!=null&&m(e,["inputTokenLimit"],u);const c=p(t,["outputTokenLimit"]);c!=null&&m(e,["outputTokenLimit"],c);const f=p(t,["supportedGenerationMethods"]);return f!=null&&m(e,["supportedActions"],f),e}function dAe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(t,["_self"]);if(i!=null){let o=WH(i);Array.isArray(o)&&(o=o.map(s=>bC(s))),m(e,["models"],o)}return e}function hAe(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function pAe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["totalTokens"]);r!=null&&m(e,["totalTokens"],r);const i=p(t,["cachedContentTokenCount"]);return i!=null&&m(e,["cachedContentTokenCount"],i),e}function mAe(t){const e={},n=p(t,["video","uri"]);n!=null&&m(e,["uri"],n);const r=p(t,["video","encodedVideo"]);r!=null&&m(e,["videoBytes"],yc(r));const i=p(t,["encoding"]);return i!=null&&m(e,["mimeType"],i),e}function gAe(t){const e={},n=p(t,["_self"]);return n!=null&&m(e,["video"],mAe(n)),e}function yAe(t){const e={},n=p(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>gAe(s))),m(e,["generatedVideos"],o)}const r=p(t,["raiMediaFilteredCount"]);r!=null&&m(e,["raiMediaFilteredCount"],r);const i=p(t,["raiMediaFilteredReasons"]);return i!=null&&m(e,["raiMediaFilteredReasons"],i),e}function vAe(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const r=p(t,["metadata"]);r!=null&&m(e,["metadata"],r);const i=p(t,["done"]);i!=null&&m(e,["done"],i);const o=p(t,["error"]);o!=null&&m(e,["error"],o);const s=p(t,["response","generateVideoResponse"]);return s!=null&&m(e,["response"],yAe(s)),e}function _Ae(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function TAe(t){const e={},n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const r=p(t,["data"]);r!=null&&m(e,["data"],r);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function EAe(t){const e={},n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const r=p(t,["fileUri"]);r!=null&&m(e,["fileUri"],r);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function wAe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],_Ae(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],TAe(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],EAe(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const u=p(t,["codeExecutionResult"]);u!=null&&m(e,["codeExecutionResult"],u);const c=p(t,["executableCode"]);c!=null&&m(e,["executableCode"],c);const f=p(t,["functionCall"]);f!=null&&m(e,["functionCall"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const y=p(t,["text"]);return y!=null&&m(e,["text"],y),e}function bAe(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>wAe(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function SAe(t){const e={},n=p(t,["citations"]);return n!=null&&m(e,["citations"],n),e}function AAe(t){const e={},n=p(t,["retrievedUrl"]);n!=null&&m(e,["retrievedUrl"],n);const r=p(t,["urlRetrievalStatus"]);return r!=null&&m(e,["urlRetrievalStatus"],r),e}function CAe(t){const e={},n=p(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>AAe(i))),m(e,["urlMetadata"],r)}return e}function IAe(t){const e={},n=p(t,["content"]);n!=null&&m(e,["content"],bAe(n));const r=p(t,["citationMetadata"]);r!=null&&m(e,["citationMetadata"],SAe(r));const i=p(t,["finishMessage"]);i!=null&&m(e,["finishMessage"],i);const o=p(t,["finishReason"]);o!=null&&m(e,["finishReason"],o);const s=p(t,["urlContextMetadata"]);s!=null&&m(e,["urlContextMetadata"],CAe(s));const u=p(t,["avgLogprobs"]);u!=null&&m(e,["avgLogprobs"],u);const c=p(t,["groundingMetadata"]);c!=null&&m(e,["groundingMetadata"],c);const f=p(t,["index"]);f!=null&&m(e,["index"],f);const h=p(t,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const y=p(t,["safetyRatings"]);return y!=null&&m(e,["safetyRatings"],y),e}function nF(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(h=>IAe(h))),m(e,["candidates"],f)}const i=p(t,["createTime"]);i!=null&&m(e,["createTime"],i);const o=p(t,["modelVersion"]);o!=null&&m(e,["modelVersion"],o);const s=p(t,["promptFeedback"]);s!=null&&m(e,["promptFeedback"],s);const u=p(t,["responseId"]);u!=null&&m(e,["responseId"],u);const c=p(t,["usageMetadata"]);return c!=null&&m(e,["usageMetadata"],c),e}function xAe(t){const e={},n=p(t,["truncated"]);n!=null&&m(e,["truncated"],n);const r=p(t,["token_count"]);return r!=null&&m(e,["tokenCount"],r),e}function RAe(t){const e={},n=p(t,["values"]);n!=null&&m(e,["values"],n);const r=p(t,["statistics"]);return r!=null&&m(e,["statistics"],xAe(r)),e}function PAe(t){const e={},n=p(t,["billableCharacterCount"]);return n!=null&&m(e,["billableCharacterCount"],n),e}function MAe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>RAe(s))),m(e,["embeddings"],o)}const i=p(t,["metadata"]);return i!=null&&m(e,["metadata"],PAe(i)),e}function d9(t){const e={},n=p(t,["gcsUri"]);n!=null&&m(e,["gcsUri"],n);const r=p(t,["bytesBase64Encoded"]);r!=null&&m(e,["imageBytes"],yc(r));const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function h9(t){const e={},n=p(t,["safetyAttributes","categories"]);n!=null&&m(e,["categories"],n);const r=p(t,["safetyAttributes","scores"]);r!=null&&m(e,["scores"],r);const i=p(t,["contentType"]);return i!=null&&m(e,["contentType"],i),e}function bT(t){const e={},n=p(t,["_self"]);n!=null&&m(e,["image"],d9(n));const r=p(t,["raiFilteredReason"]);r!=null&&m(e,["raiFilteredReason"],r);const i=p(t,["_self"]);i!=null&&m(e,["safetyAttributes"],h9(i));const o=p(t,["prompt"]);return o!=null&&m(e,["enhancedPrompt"],o),e}function DAe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>bT(s))),m(e,["generatedImages"],o)}const i=p(t,["positivePromptSafetyAttributes"]);return i!=null&&m(e,["positivePromptSafetyAttributes"],h9(i)),e}function NAe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>bT(o))),m(e,["generatedImages"],i)}return e}function kAe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>bT(o))),m(e,["generatedImages"],i)}return e}function OAe(t){const e={},n=p(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>bT(i))),m(e,["generatedImages"],r)}return e}function VAe(t){const e={},n=p(t,["label"]);n!=null&&m(e,["label"],n);const r=p(t,["score"]);return r!=null&&m(e,["score"],r),e}function LAe(t){const e={},n=p(t,["_self"]);n!=null&&m(e,["mask"],d9(n));const r=p(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>VAe(o))),m(e,["labels"],i)}return e}function UAe(t){const e={},n=p(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>LAe(i))),m(e,["generatedMasks"],r)}return e}function FAe(t){const e={},n=p(t,["endpoint"]);n!=null&&m(e,["name"],n);const r=p(t,["deployedModelId"]);return r!=null&&m(e,["deployedModelId"],r),e}function BAe(t){const e={},n=p(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&m(e,["baseModel"],n);const r=p(t,["createTime"]);r!=null&&m(e,["createTime"],r);const i=p(t,["updateTime"]);return i!=null&&m(e,["updateTime"],i),e}function qAe(t){const e={},n=p(t,["checkpointId"]);n!=null&&m(e,["checkpointId"],n);const r=p(t,["epoch"]);r!=null&&m(e,["epoch"],r);const i=p(t,["step"]);return i!=null&&m(e,["step"],i),e}function SC(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const r=p(t,["displayName"]);r!=null&&m(e,["displayName"],r);const i=p(t,["description"]);i!=null&&m(e,["description"],i);const o=p(t,["versionId"]);o!=null&&m(e,["version"],o);const s=p(t,["deployedModels"]);if(s!=null){let y=s;Array.isArray(y)&&(y=y.map(v=>FAe(v))),m(e,["endpoints"],y)}const u=p(t,["labels"]);u!=null&&m(e,["labels"],u);const c=p(t,["_self"]);c!=null&&m(e,["tunedModelInfo"],BAe(c));const f=p(t,["defaultCheckpointId"]);f!=null&&m(e,["defaultCheckpointId"],f);const h=p(t,["checkpoints"]);if(h!=null){let y=h;Array.isArray(y)&&(y=y.map(v=>qAe(v))),m(e,["checkpoints"],y)}return e}function $Ae(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(t,["_self"]);if(i!=null){let o=WH(i);Array.isArray(o)&&(o=o.map(s=>SC(s))),m(e,["models"],o)}return e}function zAe(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function HAe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["totalTokens"]);return r!=null&&m(e,["totalTokens"],r),e}function GAe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["tokensInfo"]);return r!=null&&m(e,["tokensInfo"],r),e}function KAe(t){const e={},n=p(t,["gcsUri"]);n!=null&&m(e,["uri"],n);const r=p(t,["bytesBase64Encoded"]);r!=null&&m(e,["videoBytes"],yc(r));const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function jAe(t){const e={},n=p(t,["_self"]);return n!=null&&m(e,["video"],KAe(n)),e}function WAe(t){const e={},n=p(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>jAe(s))),m(e,["generatedVideos"],o)}const r=p(t,["raiMediaFilteredCount"]);r!=null&&m(e,["raiMediaFilteredCount"],r);const i=p(t,["raiMediaFilteredReasons"]);return i!=null&&m(e,["raiMediaFilteredReasons"],i),e}function YAe(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const r=p(t,["metadata"]);r!=null&&m(e,["metadata"],r);const i=p(t,["done"]);i!=null&&m(e,["done"],i);const o=p(t,["error"]);o!=null&&m(e,["error"],o);const s=p(t,["response"]);return s!=null&&m(e,["response"],WAe(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const JAe="Content-Type",QAe="X-Server-Timeout",XAe="User-Agent",AC="x-goog-api-client",ZAe="1.17.0",eCe=`google-genai-sdk/${ZAe}`,tCe="v1beta1",nCe="v1beta",rF=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class rCe{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:tCe,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:nCe,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[s,u]of Object.entries(e.queryParams))i.searchParams.append(s,String(u));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(n))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r){if(n&&n.timeout||r){const i=new AbortController,o=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const s=setTimeout(()=>i.abort(),n.timeout);s&&typeof s.unref=="function"&&s.unref()}r&&r.addEventListener("abort",()=>{i.abort()}),e.signal=o}return n&&n.extraBody!==null&&iCe(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await iF(i),new vC(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await iF(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var n;return Lf(this,arguments,function*(){const i=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let s="";for(;;){const{done:u,value:c}=yield $t(i.read());if(u){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=o.decode(c,{stream:!0});try{const y=JSON.parse(f);if("error"in y){const v=JSON.parse(JSON.stringify(y.error)),E=v.status,b=v.code,S=`got status: ${E}. ${JSON.stringify(y)}`;if(b>=400&&b<600)throw new ET({message:S,status:b})}}catch(y){if(y.name==="ApiError")throw y}s+=f;let h=s.match(rF);for(;h;){const y=h[1];try{const v=new Response(y,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield $t(new vC(v)),s=s.slice(h[0].length),h=s.match(rF)}catch(v){throw new Error(`exception parsing stream chunk ${y}. ${v}`)}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=eCe+" "+this.clientOptions.userAgentExtra;return e[XAe]=n,e[AC]=n,e[JAe]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[r,i]of Object.entries(e.headers))n.append(r,i);e.timeout&&e.timeout>0&&n.append(QAe,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,s=await o.stat(e);i.sizeBytes=String(s.size);const u=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:s.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=u;const c=await this.fetchUploadUrl(i,n);return o.upload(e,c,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var r;let i={};n!=null&&n.httpOptions?i=n.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const o={file:e},s=await this.request({path:Ne("upload/v1beta/files",o._url),body:JSON.stringify(o),httpMethod:"POST",httpOptions:i});if(!s||!(s!=null&&s.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(r=s==null?void 0:s.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function iF(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new ET({message:i,status:n}):new Error(i)}}function iCe(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,s){const u=Object.assign({},o);for(const c in s)if(Object.prototype.hasOwnProperty.call(s,c)){const f=s[c],h=u[c];f&&typeof f=="object"&&!Array.isArray(f)&&h&&typeof h=="object"&&!Array.isArray(h)?u[c]=r(h,f):(h&&f&&typeof h!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof h}, New type: ${typeof f}. Overwriting.`),u[c]=f)}return u}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oCe="mcp_used/unknown";let sCe=!1;function p9(t){for(const e of t)if(aCe(e)||typeof e=="object"&&"inputSchema"in e)return!0;return sCe}function m9(t){var e;const n=(e=t[AC])!==null&&e!==void 0?e:"";t[AC]=(n+` ${oCe}`).trimStart()}function aCe(t){return t!==null&&typeof t=="object"&&t instanceof l1}function lCe(t,e=100){return Lf(this,arguments,function*(){let r,i=0;for(;i<e;){const o=yield $t(t.listTools({cursor:r}));for(const s of o.tools)yield yield $t(s),i++;if(!o.nextCursor)break;r=o.nextCursor}})}class l1{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new l1(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const o={},s=[];for(const h of this.mcpClients)try{for(var u=!0,c=(n=void 0,jp(lCe(h))),f;f=await c.next(),e=f.done,!e;u=!0){i=f.value,u=!1;const y=i;s.push(y);const v=y.name;if(o[v])throw new Error(`Duplicate function name ${v} found in MCP tools. Please ensure function names are unique.`);o[v]=h}}catch(y){n={error:y}}finally{try{!u&&!e&&(r=c.return)&&await r.call(c)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),F_e(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const s=await i.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function uCe(t,e,n){const r=new M_e;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data);const o=zwe(i);Object.assign(r,o),e(r)}class cCe{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),s=hCe(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),c=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${u}`;let f=()=>{};const h=new Promise(M=>{f=M}),y=e.callbacks,v=function(){f({})},E=this.apiClient,b={onopen:v,onmessage:M=>{uCe(E,y.onmessage,M)},onerror:(n=y==null?void 0:y.onerror)!==null&&n!==void 0?n:function(M){},onclose:(r=y==null?void 0:y.onclose)!==null&&r!==void 0?r:function(M){}},S=this.webSocketFactory.create(c,dCe(s),b);S.connect(),await h;const A=Tt(this.apiClient,e.model),R=o9({model:A}),D=wC({setup:R});return S.send(JSON.stringify(D)),new fCe(S,this.apiClient)}}class fCe{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=BEe(e),r=s9(n);this.conn.send(JSON.stringify({clientContent:r}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=qEe(e),r=wC(n);this.conn.send(JSON.stringify(r))}sendPlaybackControl(e){const n=wC({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Af.PLAY)}pause(){this.sendPlaybackControl(Af.PAUSE)}stop(){this.sendPlaybackControl(Af.STOP)}resetContext(){this.sendPlaybackControl(Af.RESET_CONTEXT)}close(){this.conn.close()}}function dCe(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function hCe(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pCe="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function mCe(t,e,n){const r=new P_e;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const o=JSON.parse(i);if(t.isVertexAI()){const s=rbe(o);Object.assign(r,s)}else{const s=kwe(o);Object.assign(r,s)}e(r)}class gCe{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new cCe(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,o,s,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let h;const y=this.apiClient.getHeaders();e.config&&e.config.tools&&p9(e.config.tools)&&m9(y);const v=TCe(y);if(this.apiClient.isVertexAI())h=`${c}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(v);else{const N=this.apiClient.getApiKey();let $="BidiGenerateContent",F="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),$="BidiGenerateContentConstrained",F="access_token"),h=`${c}/ws/google.ai.generativelanguage.${f}.GenerativeService.${$}?${F}=${N}`}let E=()=>{};const b=new Promise(N=>{E=N}),S=e.callbacks,A=function(){var N;(N=S==null?void 0:S.onopen)===null||N===void 0||N.call(S),E({})},R=this.apiClient,D={onopen:A,onmessage:N=>{mCe(R,S.onmessage,N)},onerror:(n=S==null?void 0:S.onerror)!==null&&n!==void 0?n:function(N){},onclose:(r=S==null?void 0:S.onclose)!==null&&r!==void 0?r:function(N){}},M=this.webSocketFactory.create(h,_Ce(v),D);M.connect(),await b;let U=Tt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&U.startsWith("publishers/")){const N=this.apiClient.getProject(),$=this.apiClient.getLocation();U=`projects/${N}/locations/${$}/`+U}let q={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[W_.AUDIO]}:e.config.responseModalities=[W_.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const z=(u=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&u!==void 0?u:[],k=[];for(const N of z)if(this.isCallableTool(N)){const $=N;k.push(await $.tool())}else k.push(N);k.length>0&&(e.config.tools=k);const V={model:U,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?q=mwe(this.apiClient,V):q=VEe(this.apiClient,V),delete q.config,M.send(JSON.stringify(q)),new vCe(M,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const yCe={turnComplete:!0};class vCe{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Wi(n.turns),e.isVertexAI()?r=r.map(i=>Yd(i)):r=r.map(i=>wT(i))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(pCe)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},yCe),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:vwe(e)}:n={realtimeInput:FEe(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function _Ce(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function TCe(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oF=10;function sF(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Uf(s)){i=!0;break}if(!i)return!0;const o=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function Uf(t){return"callTool"in t&&typeof t.callTool=="function"}function ECe(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>Uf(i)))!==null&&r!==void 0?r:!1}function wCe(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>!Uf(i)))!==null&&r!==void 0?r:!1}function aF(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bCe extends gc{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,o,s,u;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!ECe(n)||sF(n.config))return await this.generateContentInternal(c);if(wCe(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let f,h;const y=Wi(c.contents),v=(o=(i=(r=c.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:oF;let E=0;for(;E<v&&(f=await this.generateContentInternal(c),!(!f.functionCalls||f.functionCalls.length===0));){const b=f.candidates[0].content,S=[];for(const A of(u=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&u!==void 0?u:[])if(Uf(A)){const D=await A.callTool(f.functionCalls);S.push(...D)}E++,h={role:"user",parts:S},c.contents=Wi(c.contents),c.contents.push(b),c.contents.push(h),aF(c.config)&&(y.push(b),y.push(h))}return aF(c.config)&&(f.automaticFunctionCallingHistory=y),f},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),sF(n.config)){const r=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(r)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let o;const s=[];if(r!=null&&r.generatedImages)for(const c of r.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((i=c==null?void 0:c.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=c==null?void 0:c.safetyAttributes:s.push(c);let u;return o?u={generatedImages:s,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:u={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},u}),this.list=async n=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new mg(ic.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(s),s)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const s=await Promise.all(o.map(async c=>Uf(c)?await c.tool():c)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(u.config.tools=s,e.config&&e.config.tools&&p9(e.config.tools)){const c=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let f=Object.assign({},c);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),m9(f),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return u}async initAfcToolsMap(e){var n,r,i;const o=new Map;for(const s of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Uf(s)){const u=s,c=await u.tool();for(const f of(i=c.functionDeclarations)!==null&&i!==void 0?i:[]){if(!f.name)throw new Error("Function declaration name is required.");if(o.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);o.set(f.name,u)}}return o}async processAfcStream(e){var n,r,i;const o=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:oF;let s=!1,u=0;const c=await this.initAfcToolsMap(e);return(function(f,h,y){var v,E;return Lf(this,arguments,function*(){for(var b,S,A,R;u<o;){s&&(u++,s=!1);const q=yield $t(f.processParamsMaybeAddMcpUsage(y)),z=yield $t(f.generateContentStreamInternal(q)),k=[],V=[];try{for(var D=!0,M=(S=void 0,jp(z)),U;U=yield $t(M.next()),b=U.done,!b;D=!0){R=U.value,D=!1;const N=R;if(yield yield $t(N),N.candidates&&(!((v=N.candidates[0])===null||v===void 0)&&v.content)){V.push(N.candidates[0].content);for(const $ of(E=N.candidates[0].content.parts)!==null&&E!==void 0?E:[])if(u<o&&$.functionCall){if(!$.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has($.functionCall.name)){const F=yield $t(h.get($.functionCall.name).callTool([$.functionCall]));k.push(...F)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${$.functionCall.name}`)}}}}catch(N){S={error:N}}finally{try{!D&&!b&&(A=M.return)&&(yield $t(A.call(M)))}finally{if(S)throw S.error}}if(k.length>0){s=!0;const N=new vp;N.candidates=[{content:{role:"user",parts:k}}],yield yield $t(N);const $=[];$.push(...V),$.push({role:"user",parts:k});const F=Wi(y.contents).concat($);y.contents=F}else break}})})(this,c,e)}async generateContentInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=eF(this.apiClient,e);return u=Ne("{model}:generateContent",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const y=nF(h),v=new vp;return Object.assign(v,y),v})}else{const f=ZU(this.apiClient,e);return u=Ne("{model}:generateContent",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const y=tF(h),v=new vp;return Object.assign(v,y),v})}}async generateContentStreamInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=eF(this.apiClient,e);return u=Ne("{model}:streamGenerateContent?alt=sse",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(y){return Lf(this,arguments,function*(){var v,E,b,S;try{for(var A=!0,R=jp(y),D;D=yield $t(R.next()),v=D.done,!v;A=!0){S=D.value,A=!1;const M=S,U=nF(yield $t(M.json()));U.sdkHttpResponse={headers:M.headers};const q=new vp;Object.assign(q,U),yield yield $t(q)}}catch(M){E={error:M}}finally{try{!A&&!v&&(b=R.return)&&(yield $t(b.call(R)))}finally{if(E)throw E.error}}})})}else{const f=ZU(this.apiClient,e);return u=Ne("{model}:streamGenerateContent?alt=sse",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(y){return Lf(this,arguments,function*(){var v,E,b,S;try{for(var A=!0,R=jp(y),D;D=yield $t(R.next()),v=D.done,!v;A=!0){S=D.value,A=!1;const M=S,U=tF(yield $t(M.json()));U.sdkHttpResponse={headers:M.headers};const q=new vp;Object.assign(q,U),yield yield $t(q)}}catch(M){E={error:M}}finally{try{!A&&!v&&(b=R.return)&&(yield $t(b.call(R)))}finally{if(E)throw E.error}}})})}}async embedContent(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=ySe(this.apiClient,e);return u=Ne("{model}:predict",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const y=MAe(h),v=new MU;return Object.assign(v,y),v})}else{const f=Rbe(this.apiClient,e);return u=Ne("{model}:batchEmbedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const y=aAe(h),v=new MU;return Object.assign(v,y),v})}}async generateImagesInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=_Se(this.apiClient,e);return u=Ne("{model}:predict",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const y=DAe(h),v=new DU;return Object.assign(v,y),v})}else{const f=Mbe(this.apiClient,e);return u=Ne("{model}:predict",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const y=cAe(h),v=new DU;return Object.assign(v,y),v})}}async editImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=CSe(this.apiClient,e);return o=Ne("{model}:predict",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const f=NAe(c),h=new w_e;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=xSe(this.apiClient,e);return o=Ne("{model}:predict",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const f=kAe(c),h=new b_e;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=DSe(this.apiClient,e);return o=Ne("{model}:predict",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const f=OAe(c),h=new S_e;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=VSe(this.apiClient,e);return o=Ne("{model}:predict",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const f=UAe(c),h=new A_e;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=LSe(this.apiClient,e);return u=Ne("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>SC(h))}else{const f=Dbe(this.apiClient,e);return u=Ne("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>bC(h))}}async listInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=FSe(this.apiClient,e);return u=Ne("{models_url}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const y=$Ae(h),v=new NU;return Object.assign(v,y),v})}else{const f=kbe(this.apiClient,e);return u=Ne("{models_url}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const y=dAe(h),v=new NU;return Object.assign(v,y),v})}}async update(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=qSe(this.apiClient,e);return u=Ne("{model}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>SC(h))}else{const f=Vbe(this.apiClient,e);return u=Ne("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>bC(h))}}async delete(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=$Se(this.apiClient,e);return u=Ne("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const y=zAe(h),v=new kU;return Object.assign(v,y),v})}else{const f=Lbe(this.apiClient,e);return u=Ne("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const y=hAe(h),v=new kU;return Object.assign(v,y),v})}}async countTokens(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=HSe(this.apiClient,e);return u=Ne("{model}:countTokens",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const y=HAe(h),v=new OU;return Object.assign(v,y),v})}else{const f=Fbe(this.apiClient,e);return u=Ne("{model}:countTokens",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const y=pAe(h),v=new OU;return Object.assign(v,y),v})}}async computeTokens(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=GSe(this.apiClient,e);return o=Ne("{model}:computeTokens",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const f=GAe(c),h=new C_e;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=YSe(this.apiClient,e);return u=Ne("{model}:predictLongRunning",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>{const y=YAe(h),v=new Y_;return Object.assign(v,y),v})}else{const f=$be(this.apiClient,e);return u=Ne("{model}:predictLongRunning",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const y=vAe(h),v=new Y_;return Object.assign(v,y),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SCe(t){const e={},n=p(t,["operationName"]);n!=null&&m(e,["_url","operationName"],n);const r=p(t,["config"]);return r!=null&&m(e,["config"],r),e}function ACe(t){const e={},n=p(t,["operationName"]);n!=null&&m(e,["operationName"],n);const r=p(t,["resourceName"]);r!=null&&m(e,["_url","resourceName"],r);const i=p(t,["config"]);return i!=null&&m(e,["config"],i),e}function CCe(t){const e={},n=p(t,["operationName"]);n!=null&&m(e,["_url","operationName"],n);const r=p(t,["config"]);return r!=null&&m(e,["config"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ICe extends gc{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=CCe(e);return u=Ne("{operationName}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s}else{const f=SCe(e);return u=Ne("{operationName}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s}}async fetchPredictVideosOperationInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=ACe(e);return o=Ne("{resourceName}:fetchPredictOperation",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xCe(t){const e={},n=p(t,["voiceName"]);return n!=null&&m(e,["voiceName"],n),e}function g9(t){const e={},n=p(t,["prebuiltVoiceConfig"]);return n!=null&&m(e,["prebuiltVoiceConfig"],xCe(n)),e}function RCe(t){const e={},n=p(t,["speaker"]);n!=null&&m(e,["speaker"],n);const r=p(t,["voiceConfig"]);return r!=null&&m(e,["voiceConfig"],g9(r)),e}function PCe(t){const e={},n=p(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>RCe(i))),m(e,["speakerVoiceConfigs"],r)}return e}function MCe(t){const e={},n=p(t,["voiceConfig"]);n!=null&&m(e,["voiceConfig"],g9(n));const r=p(t,["multiSpeakerVoiceConfig"]);r!=null&&m(e,["multiSpeakerVoiceConfig"],PCe(r));const i=p(t,["languageCode"]);return i!=null&&m(e,["languageCode"],i),e}function DCe(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function NCe(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["data"]);n!=null&&m(e,["data"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function kCe(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function OCe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],DCe(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],NCe(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],kCe(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const u=p(t,["codeExecutionResult"]);u!=null&&m(e,["codeExecutionResult"],u);const c=p(t,["executableCode"]);c!=null&&m(e,["executableCode"],c);const f=p(t,["functionCall"]);f!=null&&m(e,["functionCall"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const y=p(t,["text"]);return y!=null&&m(e,["text"],y),e}function VCe(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>OCe(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function LCe(t){const e={},n=p(t,["behavior"]);n!=null&&m(e,["behavior"],n);const r=p(t,["description"]);r!=null&&m(e,["description"],r);const i=p(t,["name"]);i!=null&&m(e,["name"],i);const o=p(t,["parameters"]);o!=null&&m(e,["parameters"],o);const s=p(t,["parametersJsonSchema"]);s!=null&&m(e,["parametersJsonSchema"],s);const u=p(t,["response"]);u!=null&&m(e,["response"],u);const c=p(t,["responseJsonSchema"]);return c!=null&&m(e,["responseJsonSchema"],c),e}function UCe(t){const e={},n=p(t,["startTime"]);n!=null&&m(e,["startTime"],n);const r=p(t,["endTime"]);return r!=null&&m(e,["endTime"],r),e}function FCe(t){const e={},n=p(t,["timeRangeFilter"]);if(n!=null&&m(e,["timeRangeFilter"],UCe(n)),p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function BCe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["dynamicThreshold"]);return r!=null&&m(e,["dynamicThreshold"],r),e}function qCe(t){const e={},n=p(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],BCe(n)),e}function $Ce(){return{}}function zCe(t){const e={},n=p(t,["environment"]);return n!=null&&m(e,["environment"],n),e}function HCe(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>LCe(f))),m(e,["functionDeclarations"],c)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=p(t,["googleSearch"]);r!=null&&m(e,["googleSearch"],FCe(r));const i=p(t,["googleSearchRetrieval"]);if(i!=null&&m(e,["googleSearchRetrieval"],qCe(i)),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(p(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");p(t,["urlContext"])!=null&&m(e,["urlContext"],$Ce());const s=p(t,["computerUse"]);s!=null&&m(e,["computerUse"],zCe(s));const u=p(t,["codeExecution"]);return u!=null&&m(e,["codeExecution"],u),e}function GCe(t){const e={},n=p(t,["handle"]);if(n!=null&&m(e,["handle"],n),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function lF(){return{}}function KCe(t){const e={},n=p(t,["disabled"]);n!=null&&m(e,["disabled"],n);const r=p(t,["startOfSpeechSensitivity"]);r!=null&&m(e,["startOfSpeechSensitivity"],r);const i=p(t,["endOfSpeechSensitivity"]);i!=null&&m(e,["endOfSpeechSensitivity"],i);const o=p(t,["prefixPaddingMs"]);o!=null&&m(e,["prefixPaddingMs"],o);const s=p(t,["silenceDurationMs"]);return s!=null&&m(e,["silenceDurationMs"],s),e}function jCe(t){const e={},n=p(t,["automaticActivityDetection"]);n!=null&&m(e,["automaticActivityDetection"],KCe(n));const r=p(t,["activityHandling"]);r!=null&&m(e,["activityHandling"],r);const i=p(t,["turnCoverage"]);return i!=null&&m(e,["turnCoverage"],i),e}function WCe(t){const e={},n=p(t,["targetTokens"]);return n!=null&&m(e,["targetTokens"],n),e}function YCe(t){const e={},n=p(t,["triggerTokens"]);n!=null&&m(e,["triggerTokens"],n);const r=p(t,["slidingWindow"]);return r!=null&&m(e,["slidingWindow"],WCe(r)),e}function JCe(t){const e={},n=p(t,["proactiveAudio"]);return n!=null&&m(e,["proactiveAudio"],n),e}function QCe(t,e){const n={},r=p(t,["generationConfig"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig"],r);const i=p(t,["responseModalities"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig","responseModalities"],i);const o=p(t,["temperature"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","temperature"],o);const s=p(t,["topP"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","topP"],s);const u=p(t,["topK"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topK"],u);const c=p(t,["maxOutputTokens"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","maxOutputTokens"],c);const f=p(t,["mediaResolution"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","mediaResolution"],f);const h=p(t,["seed"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","seed"],h);const y=p(t,["speechConfig"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","speechConfig"],MCe(a1(y)));const v=p(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],v);const E=p(t,["systemInstruction"]);e!==void 0&&E!=null&&m(e,["setup","systemInstruction"],VCe(Cr(E)));const b=p(t,["tools"]);if(e!==void 0&&b!=null){let q=jd(b);Array.isArray(q)&&(q=q.map(z=>HCe(Kd(z)))),m(e,["setup","tools"],q)}const S=p(t,["sessionResumption"]);e!==void 0&&S!=null&&m(e,["setup","sessionResumption"],GCe(S));const A=p(t,["inputAudioTranscription"]);e!==void 0&&A!=null&&m(e,["setup","inputAudioTranscription"],lF());const R=p(t,["outputAudioTranscription"]);e!==void 0&&R!=null&&m(e,["setup","outputAudioTranscription"],lF());const D=p(t,["realtimeInputConfig"]);e!==void 0&&D!=null&&m(e,["setup","realtimeInputConfig"],jCe(D));const M=p(t,["contextWindowCompression"]);e!==void 0&&M!=null&&m(e,["setup","contextWindowCompression"],YCe(M));const U=p(t,["proactivity"]);return e!==void 0&&U!=null&&m(e,["setup","proactivity"],JCe(U)),n}function XCe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["setup","model"],Tt(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],QCe(i,n)),n}function ZCe(t,e,n){const r={},i=p(e,["expireTime"]);n!==void 0&&i!=null&&m(n,["expireTime"],i);const o=p(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&m(n,["newSessionExpireTime"],o);const s=p(e,["uses"]);n!==void 0&&s!=null&&m(n,["uses"],s);const u=p(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&m(n,["bidiGenerateContentSetup"],XCe(t,u));const c=p(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&m(n,["fieldMask"],c),r}function eIe(t,e){const n={},r=p(e,["config"]);return r!=null&&m(n,["config"],ZCe(t,r,n)),n}function tIe(t){const e={},n=p(t,["name"]);return n!=null&&m(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nIe(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(o=>`${n}.${o}`);e.push(...i)}else e.push(n)}return e.join(",")}function rIe(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const o=nIe(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];i.length>0&&(u=i.map(f=>s.includes(f)?`generationConfig.${f}`:f));const c=[];o&&c.push(o),u.length>0&&c.push(...u),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class iIe extends gc{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=eIe(this.apiClient,e);o=Ne("auth_tokens",u._url),s=u._query,delete u.config,delete u._url,delete u._query;const c=rIe(u,e.config);return i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>tIe(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oIe(t){const e={},n=p(t,["name"]);n!=null&&m(e,["_url","name"],n);const r=p(t,["config"]);return r!=null&&m(e,["config"],r),e}function sIe(t,e){const n={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=p(t,["pageToken"]);e!==void 0&&i!=null&&m(e,["_query","pageToken"],i);const o=p(t,["filter"]);return e!==void 0&&o!=null&&m(e,["_query","filter"],o),n}function aIe(t){const e={},n=p(t,["config"]);return n!=null&&m(e,["config"],sIe(n,e)),e}function lIe(t){const e={},n=p(t,["name"]);n!=null&&m(e,["_url","name"],n);const r=p(t,["config"]);return r!=null&&m(e,["config"],r),e}function uIe(t){const e={},n=p(t,["textInput"]);n!=null&&m(e,["textInput"],n);const r=p(t,["output"]);return r!=null&&m(e,["output"],r),e}function cIe(t){const e={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=p(t,["examples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>uIe(i))),m(e,["examples","examples"],r)}return e}function fIe(t,e){const n={};if(p(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=p(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&m(e,["displayName"],r),p(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=p(t,["epochCount"]);e!==void 0&&i!=null&&m(e,["tuningTask","hyperparameters","epochCount"],i);const o=p(t,["learningRateMultiplier"]);if(o!=null&&m(n,["tuningTask","hyperparameters","learningRateMultiplier"],o),p(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(p(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(p(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const s=p(t,["batchSize"]);e!==void 0&&s!=null&&m(e,["tuningTask","hyperparameters","batchSize"],s);const u=p(t,["learningRate"]);return e!==void 0&&u!=null&&m(e,["tuningTask","hyperparameters","learningRate"],u),n}function dIe(t){const e={},n=p(t,["baseModel"]);n!=null&&m(e,["baseModel"],n);const r=p(t,["preTunedModel"]);r!=null&&m(e,["preTunedModel"],r);const i=p(t,["trainingDataset"]);i!=null&&m(e,["tuningTask","trainingData"],cIe(i));const o=p(t,["config"]);return o!=null&&m(e,["config"],fIe(o,e)),e}function hIe(t){const e={},n=p(t,["name"]);n!=null&&m(e,["_url","name"],n);const r=p(t,["config"]);return r!=null&&m(e,["config"],r),e}function pIe(t,e){const n={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=p(t,["pageToken"]);e!==void 0&&i!=null&&m(e,["_query","pageToken"],i);const o=p(t,["filter"]);return e!==void 0&&o!=null&&m(e,["_query","filter"],o),n}function mIe(t){const e={},n=p(t,["config"]);return n!=null&&m(e,["config"],pIe(n,e)),e}function gIe(t){const e={},n=p(t,["name"]);n!=null&&m(e,["_url","name"],n);const r=p(t,["config"]);return r!=null&&m(e,["config"],r),e}function yIe(t,e){const n={},r=p(t,["gcsUri"]);e!==void 0&&r!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],r);const i=p(t,["vertexDatasetResource"]);if(e!==void 0&&i!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],i),p(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function vIe(t,e){const n={},r=p(t,["gcsUri"]);r!=null&&m(n,["validationDatasetUri"],r);const i=p(t,["vertexDatasetResource"]);return e!==void 0&&i!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],i),n}function _Ie(t,e){const n={},r=p(t,["validationDataset"]);e!==void 0&&r!=null&&m(e,["supervisedTuningSpec"],vIe(r,n));const i=p(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&m(e,["tunedModelDisplayName"],i);const o=p(t,["description"]);e!==void 0&&o!=null&&m(e,["description"],o);const s=p(t,["epochCount"]);e!==void 0&&s!=null&&m(e,["supervisedTuningSpec","hyperParameters","epochCount"],s);const u=p(t,["learningRateMultiplier"]);e!==void 0&&u!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],u);const c=p(t,["exportLastCheckpointOnly"]);e!==void 0&&c!=null&&m(e,["supervisedTuningSpec","exportLastCheckpointOnly"],c);const f=p(t,["preTunedModelCheckpointId"]);f!=null&&m(n,["preTunedModel","checkpointId"],f);const h=p(t,["adapterSize"]);if(e!==void 0&&h!=null&&m(e,["supervisedTuningSpec","hyperParameters","adapterSize"],h),p(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(p(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function TIe(t){const e={},n=p(t,["baseModel"]);n!=null&&m(e,["baseModel"],n);const r=p(t,["preTunedModel"]);r!=null&&m(e,["preTunedModel"],r);const i=p(t,["trainingDataset"]);i!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],yIe(i,e));const o=p(t,["config"]);return o!=null&&m(e,["config"],_Ie(o,e)),e}function EIe(t){const e={},n=p(t,["name"]);n!=null&&m(e,["model"],n);const r=p(t,["name"]);return r!=null&&m(e,["endpoint"],r),e}function y9(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["name"]);r!=null&&m(e,["name"],r);const i=p(t,["state"]);i!=null&&m(e,["state"],GH(i));const o=p(t,["createTime"]);o!=null&&m(e,["createTime"],o);const s=p(t,["tuningTask","startTime"]);s!=null&&m(e,["startTime"],s);const u=p(t,["tuningTask","completeTime"]);u!=null&&m(e,["endTime"],u);const c=p(t,["updateTime"]);c!=null&&m(e,["updateTime"],c);const f=p(t,["description"]);f!=null&&m(e,["description"],f);const h=p(t,["baseModel"]);h!=null&&m(e,["baseModel"],h);const y=p(t,["_self"]);y!=null&&m(e,["tunedModel"],EIe(y));const v=p(t,["customBaseModel"]);v!=null&&m(e,["customBaseModel"],v);const E=p(t,["experiment"]);E!=null&&m(e,["experiment"],E);const b=p(t,["labels"]);b!=null&&m(e,["labels"],b);const S=p(t,["outputUri"]);S!=null&&m(e,["outputUri"],S);const A=p(t,["pipelineJob"]);A!=null&&m(e,["pipelineJob"],A);const R=p(t,["serviceAccount"]);R!=null&&m(e,["serviceAccount"],R);const D=p(t,["tunedModelDisplayName"]);return D!=null&&m(e,["tunedModelDisplayName"],D),e}function wIe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(t,["tunedModels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>y9(s))),m(e,["tuningJobs"],o)}return e}function bIe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["name"]);r!=null&&m(e,["name"],r);const i=p(t,["metadata"]);i!=null&&m(e,["metadata"],i);const o=p(t,["done"]);o!=null&&m(e,["done"],o);const s=p(t,["error"]);return s!=null&&m(e,["error"],s),e}function SIe(t){const e={},n=p(t,["checkpointId"]);n!=null&&m(e,["checkpointId"],n);const r=p(t,["epoch"]);r!=null&&m(e,["epoch"],r);const i=p(t,["step"]);i!=null&&m(e,["step"],i);const o=p(t,["endpoint"]);return o!=null&&m(e,["endpoint"],o),e}function AIe(t){const e={},n=p(t,["model"]);n!=null&&m(e,["model"],n);const r=p(t,["endpoint"]);r!=null&&m(e,["endpoint"],r);const i=p(t,["checkpoints"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>SIe(s))),m(e,["checkpoints"],o)}return e}function CC(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["name"]);r!=null&&m(e,["name"],r);const i=p(t,["state"]);i!=null&&m(e,["state"],GH(i));const o=p(t,["createTime"]);o!=null&&m(e,["createTime"],o);const s=p(t,["startTime"]);s!=null&&m(e,["startTime"],s);const u=p(t,["endTime"]);u!=null&&m(e,["endTime"],u);const c=p(t,["updateTime"]);c!=null&&m(e,["updateTime"],c);const f=p(t,["error"]);f!=null&&m(e,["error"],f);const h=p(t,["description"]);h!=null&&m(e,["description"],h);const y=p(t,["baseModel"]);y!=null&&m(e,["baseModel"],y);const v=p(t,["tunedModel"]);v!=null&&m(e,["tunedModel"],AIe(v));const E=p(t,["preTunedModel"]);E!=null&&m(e,["preTunedModel"],E);const b=p(t,["supervisedTuningSpec"]);b!=null&&m(e,["supervisedTuningSpec"],b);const S=p(t,["tuningDataStats"]);S!=null&&m(e,["tuningDataStats"],S);const A=p(t,["encryptionSpec"]);A!=null&&m(e,["encryptionSpec"],A);const R=p(t,["partnerModelTuningSpec"]);R!=null&&m(e,["partnerModelTuningSpec"],R);const D=p(t,["customBaseModel"]);D!=null&&m(e,["customBaseModel"],D);const M=p(t,["experiment"]);M!=null&&m(e,["experiment"],M);const U=p(t,["labels"]);U!=null&&m(e,["labels"],U);const q=p(t,["outputUri"]);q!=null&&m(e,["outputUri"],q);const z=p(t,["pipelineJob"]);z!=null&&m(e,["pipelineJob"],z);const k=p(t,["serviceAccount"]);k!=null&&m(e,["serviceAccount"],k);const V=p(t,["tunedModelDisplayName"]);return V!=null&&m(e,["tunedModelDisplayName"],V),e}function CIe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(t,["tuningJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>CC(s))),m(e,["tuningJobs"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class IIe extends gc{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new mg(ic.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel},i=Object.assign(Object.assign({},n),{preTunedModel:r});return i.baseModel=void 0,await this.tuneInternal(i)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),i=await this.tuneMldevInternal(r);let o="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?o=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(o=i.name.split("/operations/")[0]),{name:o,state:yC.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=hIe(e);return u=Ne("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>CC(h))}else{const f=oIe(e);return u=Ne("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>y9(h))}}async listInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=mIe(e);return u=Ne("tuningJobs",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const y=CIe(h),v=new LU;return Object.assign(v,y),v})}else{const f=aIe(e);return u=Ne("tunedModels",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const y=wIe(h),v=new LU;return Object.assign(v,y),v})}}async cancel(e){var n,r,i,o;let s="",u={};if(this.apiClient.isVertexAI()){const c=gIe(e);s=Ne("{name}:cancel",c._url),u=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=lIe(e);s=Ne("{name}:cancel",c._url),u=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async tuneInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=TIe(e);return o=Ne("tuningJobs",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>CC(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=dIe(e);return o=Ne("tunedModels",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>bIe(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xIe{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const RIe=1024*1024*8,PIe=3,MIe=1e3,DIe=2,NS="x-goog-upload-status";async function NIe(t,e,n){var r,i,o;let s=0,u=0,c=new vC(new Response),f="upload";for(s=t.size;u<s;){const y=Math.min(RIe,s-u),v=t.slice(u,u+y);u+y>=s&&(f+=", finalize");let E=0,b=MIe;for(;E<PIe&&(c=await n.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(u),"Content-Length":String(y)}}}),!(!((r=c==null?void 0:c.headers)===null||r===void 0)&&r[NS]));)E++,await OIe(b),b=b*DIe;if(u+=y,((i=c==null?void 0:c.headers)===null||i===void 0?void 0:i[NS])!=="active")break;if(s<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const h=await(c==null?void 0:c.json());if(((o=c==null?void 0:c.headers)===null||o===void 0?void 0:o[NS])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return h.file}async function kIe(t){return{size:t.size,type:t.type}}function OIe(t){return new Promise(e=>setTimeout(e,t))}class VIe{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await NIe(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await kIe(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LIe{create(e,n,r){return new UIe(e,n,r)}}class UIe{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uF="x-goog-api-key";class FIe{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(uF)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(uF,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const BIe="gl-node/";class qIe{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=E_e(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const i=new FIe(this.apiKey);this.apiClient=new rCe({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:BIe+"web",uploader:new VIe,downloader:new xIe}),this.models=new bCe(this.apiClient),this.live=new gCe(this.apiClient,i,new LIe),this.batches=new K0e(this.apiClient),this.chats=new XTe(this.models,this.apiClient),this.caches=new YTe(this.apiClient),this.files=new fEe(this.apiClient),this.operations=new ICe(this.apiClient),this.authTokens=new iIe(this.apiClient),this.tunings=new IIe(this.apiClient)}}const $Ie="AIzaSyByOfSHfNNIwPKwNOkklamTuSy1-t3NOPI",v9=new qIe({apiKey:$Ie}),zIe=async t=>{var e;try{const n=await v9.models.generateImages({model:"imagen-4.0-generate-001",prompt:`Futuristic, dark, dystopian, gritty, mysterious, quest item. ${t}`,config:{numberOfImages:1,outputMimeType:"image/jpeg",aspectRatio:"16:9"}});if(n.generatedImages&&n.generatedImages.length>0)return`data:image/jpeg;base64,${n.generatedImages[0].image.imageBytes}`;throw new Error("No image was generated by the API.")}catch(n){console.error("Error generating image with Gemini API:",n);let r="An unknown error occurred.";if(n instanceof Error){r=n.message;try{const i=n.message.includes("ApiError: ")?n.message.split("ApiError: ")[1]:n.message,o=JSON.parse(i);r=((e=o==null?void 0:o.error)==null?void 0:e.message)||r}catch{}}throw new Error(`Failed to generate image: ${r}`)}},HIe=async t=>{var e;try{const{prompt:n,tone:r,keywords:i,wordCount:o}=t,s=`        ,  .          .

        :
        - /: ${r}.
        -     : ${i||" "}.
        -  :  ${o} .
        -         .   , ,   .
        -         .

           :
        "${n}"`,c=(await v9.models.generateContent({model:"gemini-2.5-flash",contents:s})).text;if(!c)throw new Error("API   .");return c.trim()}catch(n){console.error("Error generating text with Gemini API:",n);let r="     .";if(n instanceof Error){r=n.message;try{const i=n.message.includes("ApiError: ")?n.message.split("ApiError: ")[1]:n.message,o=JSON.parse(i);r=((e=o==null?void 0:o.error)==null?void 0:e.message)||r}catch{}}throw new Error(`   : ${r}`)}},GIe=()=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:O.jsx("path",{d:"M17 3H5a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2zm-3 12H8v-4h6v4zm2-6H5V5h12v4z"})}),hv=()=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),_9=()=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-stone-400 hover:text-red-500 transition-colors",viewBox:"0 0 20 20",fill:"currentColor",children:O.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})}),cF=()=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:O.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),KIe=()=>O.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-stone-400 hover:text-amber-400 transition-colors",viewBox:"0 0 20 20",fill:"currentColor",children:[O.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),O.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]}),jIe=()=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:O.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),WIe=()=>O.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-stone-400 hover:text-amber-400 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),IC=({nodeId:t,dsl:e,selectedNodeId:n,renamingNodeId:r,renamingValue:i,setRenamingValue:o,onSelectNode:s,onStartRename:u,onFinishRename:c,onDeleteNode:f,level:h=0,visited:y})=>{const v=e.nodes[t];if(!v||y.has(t))return null;y.add(t);const E=()=>{c(t,i)},b=(v.choices||[]).map(S=>S.to).concat((v.branch||[]).map(S=>S.to)).concat(v.fallback?[v.fallback]:[]).filter((S,A,R)=>S&&e.nodes[S]&&R.indexOf(S)===A);return O.jsxs("div",{className:"relative",children:[h>0&&O.jsx("div",{className:"absolute top-0 left-[-11px] h-full w-px bg-stone-600"}),h>0&&O.jsx("div",{className:"absolute top-4 left-[-11px] w-3 h-px bg-stone-600"}),O.jsx("div",{className:`pl-${h*4}`,children:O.jsxs("div",{className:`flex items-center justify-between p-2 rounded-md transition-colors group ${n===t?"bg-amber-500":"bg-stone-700 hover:bg-stone-600"}`,children:[r===t?O.jsx("input",{type:"text",value:i,onChange:S=>o(S.target.value),onBlur:E,onKeyDown:S=>S.key==="Enter"&&E(),className:"bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-2 py-1 text-sm w-full",autoFocus:!0}):O.jsx("button",{onClick:()=>s(t),className:`w-full text-left font-mono text-sm ${n===t?"text-stone-900 font-bold":""}`,children:t}),t!=="start"&&r!==t&&O.jsxs("div",{className:"flex items-center opacity-0 group-hover:opacity-100 transition-opacity",children:[O.jsx("button",{onClick:()=>u(t),className:"p-1",children:O.jsx(KIe,{})}),O.jsx("button",{onClick:()=>f(t),className:"p-1",children:O.jsx(_9,{})})]})]})}),O.jsx("div",{className:"mt-1",children:b.map(S=>O.jsx(IC,{nodeId:S,dsl:e,selectedNodeId:n,renamingNodeId:r,renamingValue:i,setRenamingValue:o,onSelectNode:s,onStartRename:u,onFinishRename:c,onDeleteNode:f,level:h+1,visited:y},S))})]})},YIe=()=>{var us,ga,Fl,qt,ht;const{questId:t}=EF(),e=MC(),[n,r]=x.useState(null),[i,o]=x.useState(null),[s,u]=x.useState("start"),[c,f]=x.useState(!0),[h,y]=x.useState(!1),[v,E]=x.useState(""),[b,S]=x.useState(null),[A,R]=x.useState({}),[D,M]=x.useState(null),[U,q]=x.useState(""),[z,k]=x.useState(null),V=x.useRef(!1),[N,$]=x.useState(!1),[F,G]=x.useState({prompt:"",tone:"",keywords:"",wordCount:100}),[H,Ae]=x.useState({loading:!1,error:"",text:""}),Se=x.useCallback((ie,pe=!1)=>{o(ie),pe||(V.current=!0)},[]);x.useEffect(()=>{if(!t){E("  ."),f(!1);return}f(!0);const ie=ho(Kr,"games",t),pe=gm(ie,Me=>{if(Me.exists()){const Ce={id:Me.id,...Me.data()};r(Ce),V.current||Se(JSON.parse(JSON.stringify(Ce.dsl)),!0)}else E("  .");f(!1)},Me=>{console.error(Me),E("  ."),f(!1)});return()=>pe()},[t,Se]),x.useEffect(()=>{k(null)},[s]);const ee=async()=>{if(!(!t||!i)){y(!0);try{await mm(ho(Kr,"games",t),{title:i.meta.title,dsl:i,updatedAt:Df()}),S(new Date),V.current=!1}catch(ie){console.error(ie),alert("   .")}finally{y(!1)}}},he=(ie,pe,Me)=>{if(!i)return;const Ce={...i,nodes:{...i.nodes}};Ce.nodes[ie]={...Ce.nodes[ie],[pe]:Me},Se(Ce)},Te=(ie,pe,Me,Ce)=>{if(!i)return;const xe={...i,nodes:{...i.nodes}},Ke=[...xe.nodes[ie].choices||[]],pt={...Ke[pe]};Ce===void 0||Array.isArray(Ce)&&Ce.length===0?delete pt[Me]:pt[Me]=Ce,Ke[pe]=pt,xe.nodes[ie]={...xe.nodes[ie],choices:Ke},Se(xe)},Ve=(ie,pe,Me)=>{var Ce,xe,Ke,pt,Rt,Qe,mt,vr,Ii;if(i)if(Me==="__CREATE_NEW__"){const or=prompt(" ID   (,  ):");if(or&&/^[a-zA-Z0-9_]+$/.test(or)){if(i.nodes[or]){alert("   ID  .");const ya=document.getElementById(`choice-to-${pe}`);ya&&(ya.value=((Ke=(xe=(Ce=i.nodes[ie])==null?void 0:Ce.choices)==null?void 0:xe[pe])==null?void 0:Ke.to)||"");return}const gn={...i,nodes:{...i.nodes}};gn.nodes[or]={text:" ..."};const ei=[...gn.nodes[ie].choices||[]];ei[pe]={...ei[pe],to:or},gn.nodes[ie]={...gn.nodes[ie],choices:ei},Se(gn),u(or)}else if(or){alert("  ID.    ,   .");const gn=document.getElementById(`choice-to-${pe}`);gn&&(gn.value=((Qe=(Rt=(pt=i.nodes[ie])==null?void 0:pt.choices)==null?void 0:Rt[pe])==null?void 0:Qe.to)||"")}else{const gn=document.getElementById(`choice-to-${pe}`);gn&&(gn.value=((Ii=(vr=(mt=i.nodes[ie])==null?void 0:mt.choices)==null?void 0:vr[pe])==null?void 0:Ii.to)||"")}}else Te(ie,pe,"to",Me)},j=ie=>{if(!i)return;const pe={...i,nodes:{...i.nodes}},Me=[...pe.nodes[ie].choices||[]];Me.push({label:"",to:""}),pe.nodes[ie]={...pe.nodes[ie],choices:Me},Se(pe)},ce=(ie,pe)=>{if(!i||!window.confirm(" ,     ?"))return;const Me={...i,nodes:{...i.nodes}},Ce=[...Me.nodes[ie].choices||[]];Ce.splice(pe,1),Me.nodes[ie]={...Me.nodes[ie],choices:Ce},Se(Me)},le=()=>{if(!i)return;const ie=prompt(" ID   (,  ):");if(ie&&/^[a-zA-Z0-9_]+$/.test(ie)){if(i.nodes[ie]){alert("   ID  .");return}const pe={...i,nodes:{...i.nodes}};pe.nodes[ie]={text:" ..."},Se(pe),u(ie)}else ie&&alert("  ID.    ,   .")},ve=(ie,pe)=>{if(!i||!pe||pe===ie||ie==="start")return;if(!/^[a-zA-Z0-9_]+$/.test(pe)){alert("  ID.    ,   .");return}if(i.nodes[pe]){alert("   ID  .");return}const Me=JSON.parse(JSON.stringify(i));Me.nodes[pe]=Me.nodes[ie],delete Me.nodes[ie],Object.values(Me.nodes).forEach(Ce=>{Ce.choices&&Ce.choices.forEach(xe=>{xe.to===ie&&(xe.to=pe)}),Ce.branch&&Ce.branch.forEach(xe=>{xe.to===ie&&(xe.to=pe)}),Ce.fallback===ie&&(Ce.fallback=pe)}),Se(Me),s===ie&&u(pe)},Oe=ie=>{M(ie),q(ie)},Fe=(ie,pe)=>{pe.trim()&&pe.trim()!==ie&&ve(ie,pe.trim()),M(null),q("")},Be=ie=>{if(!i||ie==="start"||!window.confirm(` ,     "${ie}"?   .`))return;const pe=[];if(Object.entries(i.nodes).forEach(([Ce,xe])=>{if(Ce===ie)return;((xe.choices||[]).some(pt=>pt.to===ie)||(xe.branch||[]).some(pt=>pt.to===ie)||xe.fallback===ie)&&pe.push(Ce)}),pe.length>0&&!window.confirm(`!      : ${pe.join(", ")}.    . ?`))return;const Me=JSON.parse(JSON.stringify(i));delete Me.nodes[ie],Object.values(Me.nodes).forEach(Ce=>{Ce.choices&&(Ce.choices=Ce.choices.map(xe=>xe.to===ie?{...xe,to:""}:xe)),Ce.branch&&(Ce.branch=Ce.branch.filter(xe=>xe.to!==ie)),Ce.fallback===ie&&(Ce.fallback=void 0)}),s===ie&&u("start"),Se(Me)},an=async ie=>{var Me;if(!i||!t)return;const pe=(Me=document.getElementById(`image-prompt-${ie}`))==null?void 0:Me.value;if(!pe){alert(",     .");return}R(Ce=>({...Ce,[ie]:{loading:!0,error:""}}));try{const Ce=await zIe(pe),xe=`${ie}_${Date.now()}`,Ke=CA(dre,`quests/${t}/images/${xe}.jpeg`),pt=Ce.split(",")[1],Rt=await Yne(Ke,pt,"base64",{contentType:"image/jpeg"}),Qe=await g3(Rt.ref),mt=JSON.parse(JSON.stringify(i));mt.assets.images||(mt.assets.images={}),mt.assets.images[xe]=Qe,mt.nodes[ie].bg=xe,Se(mt),R(vr=>({...vr,[ie]:{loading:!1,error:""}}))}catch(Ce){let xe=Ce.message||"   ";Ce instanceof Sl.FirebaseError&&Ce.code==="storage/unauthorized"&&(xe="  .    Firebase Storage."),R(Ke=>({...Ke,[ie]:{loading:!1,error:xe}}))}},ft=ie=>ie?ie.all&&Array.isArray(ie.all)?ie.all:typeof ie=="object"&&!ie.all&&!ie.any&&!ie.not?[ie]:[]:[],we=ie=>{if(ie.length!==0)return ie.length===1?ie[0]:{all:ie}},Ge=ie=>{var xe;const pe=(xe=vt==null?void 0:vt.choices)==null?void 0:xe[ie];if(!pe)return;const Ce=[...ft(pe.when),{has_item:""}];Te(s,ie,"when",we(Ce))},je=(ie,pe,Me)=>{var pt;const Ce=(pt=vt==null?void 0:vt.choices)==null?void 0:pt[ie];if(!Ce)return;const Ke=[...ft(Ce.when)];Ke[pe]=Me,Te(s,ie,"when",we(Ke))},ge=(ie,pe)=>{var Ke;const Me=(Ke=vt==null?void 0:vt.choices)==null?void 0:Ke[ie];if(!Me)return;const xe=ft(Me.when).filter((pt,Rt)=>Rt!==pe);Te(s,ie,"when",we(xe))},Wt=ie=>{var xe;const pe=(xe=vt==null?void 0:vt.choices)==null?void 0:xe[ie];if(!pe)return;const Ce=[...pe.effects||[],{set:{variable:""}}];Te(s,ie,"effects",Ce)},et=(ie,pe,Me)=>{var pt;const Ce=(pt=vt==null?void 0:vt.choices)==null?void 0:pt[ie];if(!Ce)return;const Ke=[...Ce.effects||[]];Ke[pe]=Me,Te(s,ie,"effects",Ke)},mn=(ie,pe)=>{var Ke;const Me=(Ke=vt==null?void 0:vt.choices)==null?void 0:Ke[ie];if(!Me)return;const xe=(Me.effects||[]).filter((pt,Rt)=>Rt!==pe);Te(s,ie,"effects",xe)},bn=()=>{vt&&(Ae({loading:!1,error:"",text:""}),G(ie=>({...ie,prompt:vt.text||""})),$(!0))},ln=async ie=>{ie.preventDefault(),Ae({loading:!0,error:"",text:""});try{const pe=await HIe(F);Ae({loading:!1,error:"",text:pe})}catch(pe){Ae({loading:!1,error:pe.message,text:""})}},ma=()=>{H.text&&(he(s,"text",H.text),$(!1))};if(c)return O.jsx("div",{className:"text-center p-8 font-display text-2xl text-stone-400 animate-pulse",children:" ..."});if(v)return O.jsx("div",{className:"text-center p-8 text-2xl text-red-500",children:v});if(!n||!i)return null;const vt=i.nodes[s],wo=new Set,Ci=Object.keys(i.nodes),Ul=Ci.includes("start")?"start":Ci[0]||null;return O.jsxs("div",{className:"container mx-auto py-8 px-4",children:[O.jsxs("div",{className:"flex justify-between items-center mb-6",children:[O.jsxs("div",{className:"flex items-center gap-4 flex-grow min-w-0",children:[O.jsx("button",{onClick:()=>e("/admin"),className:"bg-stone-700 hover:bg-stone-600 text-stone-200 font-semibold py-2 px-4 rounded-md transition-colors flex-shrink-0",children:" "}),O.jsx("input",{type:"text",value:i.meta.title,onChange:ie=>Se({...i,meta:{...i.meta,title:ie.target.value}}),className:"font-display text-4xl text-stone-200 bg-transparent border-0 focus:ring-2 focus:ring-amber-500 rounded-md p-1 truncate"})]}),O.jsxs("div",{className:"flex items-center gap-4 flex-shrink-0",children:[b&&O.jsxs("span",{className:"text-sm text-stone-400",children:[": ",b.toLocaleTimeString()]}),O.jsxs("button",{onClick:ee,disabled:h,className:"flex items-center justify-center font-display text-xl bg-amber-500 text-stone-900 py-2 px-6 rounded-md hover:bg-amber-400 transition-colors disabled:bg-stone-600 disabled:cursor-not-allowed",children:[O.jsx(GIe,{})," ",h?"...":""]})]})]}),O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[O.jsxs("div",{className:"md:col-span-1 bg-stone-800/50 border border-stone-700 p-4 rounded-md flex flex-col h-full max-h-[75vh]",children:[O.jsx("h3",{className:"font-display text-2xl text-amber-400 mb-4 flex-shrink-0",children:" "}),O.jsxs("div",{className:"flex-grow overflow-y-auto space-y-1 pr-2",children:[Ul&&i.nodes[Ul]&&O.jsx(IC,{nodeId:Ul,dsl:i,selectedNodeId:s,onSelectNode:u,onStartRename:Oe,onFinishRename:Fe,onDeleteNode:Be,renamingNodeId:D,renamingValue:U,setRenamingValue:q,visited:wo}),Ci.filter(ie=>!wo.has(ie)).map(ie=>O.jsx(IC,{nodeId:ie,dsl:i,selectedNodeId:s,onSelectNode:u,onStartRename:Oe,onFinishRename:Fe,onDeleteNode:Be,renamingNodeId:D,renamingValue:U,setRenamingValue:q,visited:wo},ie))]}),O.jsxs("button",{onClick:le,className:"mt-4 w-full flex items-center justify-center bg-stone-600 hover:bg-stone-500 text-stone-200 font-semibold py-2 px-4 rounded-md transition-colors flex-shrink-0",children:[O.jsx(jIe,{}),"  "]})]}),O.jsx("div",{className:"md:col-span-3 bg-stone-800/50 border border-stone-700 p-6 rounded-md space-y-6 max-h-[75vh] overflow-y-auto",children:vt?O.jsxs("div",{children:[O.jsxs("h3",{className:"font-display text-3xl text-stone-100 mb-4 border-b-2 border-amber-500 pb-2",children:[": ",O.jsx("span",{className:"text-amber-400",children:s})]}),O.jsxs("div",{children:[O.jsxs("div",{className:"flex justify-between items-center mb-1",children:[O.jsx("label",{htmlFor:"nodeText",className:"text-sm font-bold text-stone-400 block",children:" :"}),O.jsxs("button",{onClick:bn,className:"flex items-center gap-1.5 text-sm bg-sky-600 hover:bg-sky-500 text-white font-semibold py-1 px-3 rounded-md transition-colors",children:[O.jsx(hv,{}),"   AI"]})]}),O.jsx("textarea",{id:"nodeText",value:vt.text,onChange:ie=>he(s,"text",ie.target.value),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all h-40 resize-y"})]}),O.jsxs("div",{className:"space-y-2",children:[O.jsx("label",{className:"text-sm font-bold text-stone-400 block",children:"  (AI):"}),O.jsxs("div",{className:"aspect-video bg-stone-900 rounded-md overflow-hidden relative flex items-center justify-center",children:[i.assets.images[vt.bg||""]?O.jsx("img",{src:i.assets.images[vt.bg||""],alt:"Generated background",className:"w-full h-full object-cover"}):O.jsx("span",{className:"text-stone-500",children:" "}),((us=A[s])==null?void 0:us.loading)&&O.jsx("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center",children:O.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-500"})})]}),O.jsxs("div",{className:"flex gap-2",children:[O.jsx("input",{id:`image-prompt-${s}`,type:"text",placeholder:" ... ( )",className:"flex-grow bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),O.jsxs("button",{onClick:()=>an(s),disabled:(ga=A[s])==null?void 0:ga.loading,className:"flex items-center justify-center font-display text-lg bg-sky-600 text-white py-2 px-4 rounded-md hover:bg-sky-500 transition-colors disabled:bg-stone-600",children:[O.jsx(hv,{})," ",(Fl=A[s])!=null&&Fl.loading?"...":""]})]}),((qt=A[s])==null?void 0:qt.error)&&O.jsx("p",{className:"text-red-500 text-sm mt-1",children:(ht=A[s])==null?void 0:ht.error})]}),O.jsxs("div",{children:[O.jsx("h4",{className:"text-lg font-bold text-stone-300 mt-6 mb-2",children:":"}),O.jsxs("div",{className:"space-y-2",children:[(vt.choices||[]).map((ie,pe)=>O.jsxs("div",{className:"bg-stone-900/50 p-3 rounded-md transition-all",children:[O.jsxs("div",{className:"flex gap-2 items-center",children:[O.jsx("input",{type:"text",value:ie.label,onChange:Me=>Te(s,pe,"label",Me.target.value),placeholder:" ",className:"flex-grow bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 focus:ring-1 focus:ring-amber-500 outline-none"}),O.jsx("span",{className:"text-stone-400",children:""}),O.jsxs("select",{id:`choice-to-${pe}`,value:ie.to||"",onChange:Me=>Ve(s,pe,Me.target.value),className:"w-48 bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 focus:ring-1 focus:ring-amber-500 outline-none",children:[O.jsx("option",{value:"",disabled:!0,children:" ..."}),O.jsx("option",{value:"__CREATE_NEW__",className:"text-sky-400 font-semibold",children:"[   ... ]"}),Ci.map(Me=>O.jsx("option",{value:Me,children:Me},Me))]}),O.jsx("button",{onClick:()=>k(z===pe?null:pe),title:"  ",children:O.jsx(WIe,{})}),O.jsx("button",{onClick:()=>ce(s,pe),title:" ",children:O.jsx(_9,{})})]}),z===pe&&O.jsxs("div",{className:"mt-3 space-y-4 border-t border-stone-700 pt-3",children:[O.jsxs("div",{children:[O.jsx("h5",{className:"text-sm font-bold text-stone-400 mb-2",children:"  (   )"}),O.jsx("div",{className:"space-y-2",children:ft(ie.when).map((Me,Ce)=>{const xe=Object.keys(Me)[0]||"has_item",Ke=Me[xe],pt=Qe=>{let mt={};Qe==="var_eq"||Qe==="var_neq"?mt={[Qe]:{"":""}}:mt={[Qe]:""},je(pe,Ce,mt)},Rt=(Qe,mt)=>{if(xe==="var_eq"||xe==="var_neq"){const vr=Object.keys(Ke)[0],Ii=Ke[vr],or=Qe==="key"?{[mt]:Ii}:{[vr]:mt};je(pe,Ce,{[xe]:or})}else je(pe,Ce,{[xe]:mt})};return O.jsxs("div",{className:"flex items-center gap-2 bg-stone-800 p-2 rounded",children:[O.jsxs("select",{value:xe,onChange:Qe=>pt(Qe.target.value),className:"bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm outline-none",children:[O.jsx("option",{value:"has_item",children:": "}),O.jsx("option",{value:"missing_item",children:": "}),O.jsx("option",{value:"var_eq",children:" ="}),O.jsx("option",{value:"var_neq",children:" "})]}),xe==="var_eq"||xe==="var_neq"?O.jsxs(O.Fragment,{children:[O.jsx("input",{type:"text",value:Object.keys(Ke)[0]||"",onChange:Qe=>Rt("key",Qe.target.value),placeholder:"variable",className:"w-24 bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm outline-none"}),O.jsx("input",{type:"text",value:Object.values(Ke)[0]||"",onChange:Qe=>Rt("value",Qe.target.value),placeholder:"value",className:"w-24 bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm outline-none"})]}):O.jsx("input",{type:"text",value:Ke,onChange:Qe=>Rt("value",Qe.target.value),placeholder:"item_id",className:"flex-grow bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm outline-none"}),O.jsx("button",{onClick:()=>ge(pe,Ce),className:"text-stone-500 hover:text-red-400",children:O.jsx(cF,{})})]},Ce)})}),O.jsx("button",{onClick:()=>Ge(pe),className:"mt-2 text-sky-400 hover:text-sky-300 text-sm font-semibold",children:"+  "})]}),O.jsxs("div",{children:[O.jsx("h5",{className:"text-sm font-bold text-stone-400 mb-2",children:"  "}),O.jsx("div",{className:"space-y-2",children:(ie.effects||[]).map((Me,Ce)=>{const xe=Object.keys(Me)[0],Ke=Me[xe],pt=Qe=>{let mt={};Qe==="set"||Qe==="add"?mt={[Qe]:{"":""}}:mt={[Qe]:""},et(pe,Ce,mt)},Rt=(Qe,mt)=>{if(xe==="set"||xe==="add"){const vr=Object.keys(Ke)[0],Ii=Ke[vr],or=Qe==="key"?{[mt]:Ii}:{[vr]:mt};et(pe,Ce,{[xe]:or})}else et(pe,Ce,{[xe]:mt})};return O.jsxs("div",{className:"flex items-center gap-2 bg-stone-800 p-2 rounded",children:[O.jsxs("select",{value:xe,onChange:Qe=>pt(Qe.target.value),className:"bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm outline-none",children:[O.jsx("option",{value:"set",children:" "}),O.jsx("option",{value:"add",children:"  "}),O.jsx("option",{value:"inv_add",children:" "}),O.jsx("option",{value:"inv_remove",children:" "})]}),xe==="set"||xe==="add"?O.jsxs(O.Fragment,{children:[O.jsx("input",{type:"text",value:Ke&&typeof Ke=="object"&&Object.keys(Ke)[0]||"",onChange:Qe=>Rt("key",Qe.target.value),placeholder:"variable",className:"w-24 bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm outline-none"}),O.jsx("input",{type:xe==="add"?"number":"text",value:Ke&&typeof Ke=="object"?String(Object.values(Ke)[0]??""):"",onChange:Qe=>Rt("value",Qe.target.value),placeholder:"value",className:"w-24 bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm outline-none"})]}):O.jsx("input",{type:"text",value:String(Ke??""),onChange:Qe=>Rt("value",Qe.target.value),placeholder:"item_id",className:"flex-grow bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm outline-none"}),O.jsx("button",{onClick:()=>mn(pe,Ce),className:"text-stone-500 hover:text-red-400",children:O.jsx(cF,{})})]},Ce)})}),O.jsx("button",{onClick:()=>Wt(pe),className:"mt-2 text-sky-400 hover:text-sky-300 text-sm font-semibold",children:"+  "})]})]})]},pe)),O.jsx("button",{onClick:()=>j(s),className:"w-full text-stone-300 hover:bg-stone-700 p-2 rounded-md transition-colors text-sm font-semibold",children:"+  "})]})]})]}):O.jsx("p",{className:"text-stone-400",children:"   "})})]}),N&&O.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",onClick:()=>$(!1),role:"dialog","aria-modal":"true",children:O.jsxs("div",{className:"bg-stone-800 border border-stone-700 rounded-lg w-full max-w-2xl max-h-[90vh] flex flex-col",onClick:ie=>ie.stopPropagation(),children:[O.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-stone-700",children:[O.jsxs("h3",{className:"font-display text-2xl text-amber-400 flex items-center gap-2",children:[O.jsx(hv,{})," AI- "]}),O.jsx("button",{onClick:()=>$(!1),className:"text-stone-400 hover:text-white text-3xl leading-none","aria-label":"Close",children:""})]}),O.jsxs("form",{onSubmit:ln,className:"p-6 space-y-4 overflow-y-auto",children:[O.jsxs("div",{children:[O.jsx("label",{htmlFor:"ai-prompt",className:"text-sm font-bold text-stone-400 block mb-1",children:"  :"}),O.jsx("textarea",{id:"ai-prompt",value:F.prompt,onChange:ie=>G({...F,prompt:ie.target.value}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all h-32 resize-y",placeholder:".:    ,      ...",required:!0})]}),O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[O.jsxs("div",{children:[O.jsx("label",{htmlFor:"ai-tone",className:"text-sm font-bold text-stone-400 block mb-1",children:" / :"}),O.jsxs("select",{id:"ai-tone",value:F.tone,onChange:ie=>G({...F,tone:ie.target.value}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",children:[O.jsx("option",{children:""}),O.jsx("option",{children:""}),O.jsx("option",{children:""}),O.jsx("option",{children:""}),O.jsx("option",{children:""}),O.jsx("option",{children:""})]})]}),O.jsxs("div",{children:[O.jsx("label",{htmlFor:"ai-keywords",className:"text-sm font-bold text-stone-400 block mb-1",children:"  ( ):"}),O.jsx("input",{id:"ai-keywords",type:"text",value:F.keywords,onChange:ie=>G({...F,keywords:ie.target.value}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",placeholder:".: ,  , "})]})]}),O.jsxs("div",{children:[O.jsxs("label",{htmlFor:"ai-word-count",className:"text-sm font-bold text-stone-400 block mb-1",children:["  : ",O.jsxs("span",{className:"font-mono text-amber-400",children:[F.wordCount," "]})]}),O.jsx("input",{id:"ai-word-count",type:"range",min:"30",max:"300",step:"10",value:F.wordCount,onChange:ie=>G({...F,wordCount:parseInt(ie.target.value,10)}),className:"w-full h-2 bg-stone-700 rounded-lg appearance-none cursor-pointer accent-amber-500"})]}),O.jsxs("button",{type:"submit",disabled:H.loading,className:"w-full flex items-center justify-center font-display text-xl bg-sky-600 text-white py-2 px-6 rounded-md hover:bg-sky-500 transition-colors disabled:bg-stone-600 disabled:cursor-not-allowed",children:[O.jsx(hv,{})," ",H.loading?"...":" "]}),H.error&&O.jsx("p",{className:"text-red-500 text-center text-sm",children:H.error}),H.text&&O.jsxs("div",{className:"space-y-3 pt-4 border-t border-stone-700",children:[O.jsx("h4",{className:"text-sm font-bold text-stone-400 block",children:":"}),O.jsx("div",{className:"bg-stone-900 p-4 rounded-md text-stone-300 whitespace-pre-wrap max-h-48 overflow-y-auto",children:H.text}),O.jsx("button",{type:"button",onClick:ma,className:"w-full font-display text-xl bg-amber-500 text-stone-900 py-2 rounded-md hover:bg-amber-400 transition-colors",children:"  "})]})]})]})})]})},JIe=()=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:O.jsx("path",{fillRule:"evenodd",d:"M10 2a4 4 0 00-4 4v4H4a2 2 0 00-2 2v6a2 2 0 002 2h12a2 2 0 002-2v-6a2 2 0 00-2-2h-2V6a4 4 0 00-4-4zm-2 6V6a2 2 0 114 0v4H8z",clipRule:"evenodd"})}),kS=()=>{const[t,e]=x.useState(""),[n,r]=x.useState(""),[i,o]=x.useState(""),s=async u=>{u.preventDefault(),o("");try{await P4(Gp,t,n)}catch(c){o(" .    ."),console.error(c)}};return O.jsx("div",{className:"flex flex-col items-center justify-center min-h-[60vh]",children:O.jsxs("div",{className:"w-full max-w-sm p-8 bg-stone-800/50 border border-stone-700 rounded-md shadow-lg",children:[O.jsx("h2",{className:"font-display text-3xl text-center text-stone-200 mb-6 tracking-wider",children:"  "}),O.jsxs("form",{onSubmit:s,className:"space-y-4",children:[O.jsx("input",{type:"email",value:t,onChange:u=>e(u.target.value),placeholder:"Email",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all","aria-label":"Email",required:!0}),O.jsx("input",{type:"password",value:n,onChange:u=>r(u.target.value),placeholder:"",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all","aria-label":"Password",required:!0}),O.jsxs("button",{type:"submit",className:"w-full flex items-center justify-center font-display text-xl bg-amber-500 text-stone-900 py-2 rounded-md hover:bg-amber-400 transition-colors",children:[O.jsx(JIe,{}),""]}),i&&O.jsx("p",{className:"text-red-500 text-center text-sm mt-4",children:i})]})]})})},QIe=()=>O.jsx("header",{className:"bg-black/50 border-b-2 border-amber-500/50 p-4 sticky top-0 z-20 backdrop-blur-sm",children:O.jsxs("div",{className:"container mx-auto text-center",children:[O.jsx("a",{href:"/#",className:"font-display text-4xl md:text-5xl text-amber-400 tracking-widest no-underline",children:"B_KOMHATE"}),O.jsx("p",{className:"text-stone-400 text-sm tracking-wider",children:"QUEST & CODEWORD PLATFORM"})]})}),fF=()=>O.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] text-center p-4",children:[O.jsx("h2",{className:"font-display text-6xl text-red-500",children:"404"}),O.jsx("p",{className:"text-stone-300 text-xl mt-2",children:"  ."}),O.jsx("a",{href:"/#/admin",className:"text-amber-400 hover:text-amber-300 mt-4",children:"   "})]}),XIe=()=>{const{currentUser:t,loading:e}=hre();return as(),e?O.jsx("div",{className:"flex items-center justify-center min-h-[80vh]",children:O.jsx("p",{className:"font-display text-2xl text-stone-400 animate-pulse",children:" ..."})}):t?O.jsxs(ND,{children:[O.jsx(ui,{path:"/admin",element:O.jsx(p_e,{})}),O.jsx(ui,{path:"/admin/quest/:questId",element:O.jsx(YIe,{})}),O.jsx(ui,{path:"/",element:O.jsx(j8,{to:"/admin",replace:!0})}),O.jsx(ui,{path:"/view",element:O.jsx(qL,{})}),O.jsx(ui,{path:"/play/:questId",element:O.jsx($L,{})}),O.jsx(ui,{path:"*",element:O.jsx(fF,{})})]}):O.jsxs(ND,{children:[O.jsx(ui,{path:"/view",element:O.jsx(qL,{})}),O.jsx(ui,{path:"/play/:questId",element:O.jsx($L,{})}),O.jsx(ui,{path:"/admin",element:O.jsx(kS,{})}),O.jsx(ui,{path:"/admin/*",element:O.jsx(kS,{})}),O.jsx(ui,{path:"/",element:O.jsx(kS,{})}),O.jsx(ui,{path:"*",element:O.jsx(fF,{})})]})},ZIe=()=>O.jsx("div",{className:"min-h-screen",children:O.jsx(pre,{children:O.jsxs(y7,{children:[O.jsx(QIe,{}),O.jsx("main",{children:O.jsx(XIe,{})})]})})}),T9=document.getElementById("root");if(!T9)throw new Error("Could not find root element to mount to");const exe=i8.createRoot(T9);exe.render(O.jsx(dF.StrictMode,{children:O.jsx(ZIe,{})}));
