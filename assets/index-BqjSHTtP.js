var rae=Object.defineProperty;var iae=(t,e,n)=>e in t?rae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Fx=(t,e,n)=>iae(t,typeof e!="symbol"?e+"":e,n);function oae(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var v0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ao(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Bx={exports:{}},pm={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sq;function sae(){if(sq)return pm;sq=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,o){var s=null;if(o!==void 0&&(s=""+o),i.key!==void 0&&(s=""+i.key),"key"in i){o={};for(var a in i)a!=="key"&&(o[a]=i[a])}else o=i;return i=o.ref,{$$typeof:t,type:r,key:s,ref:i!==void 0?i:null,props:o}}return pm.Fragment=e,pm.jsx=n,pm.jsxs=n,pm}var aq;function aae(){return aq||(aq=1,Bx.exports=sae()),Bx.exports}var I=aae(),$x={exports:{}},ct={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lq;function lae(){if(lq)return ct;lq=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),s=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator;function g(G){return G===null||typeof G!="object"?null:(G=h&&G[h]||G["@@iterator"],typeof G=="function"?G:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,E={};function b(G,Q,Z){this.props=G,this.context=Q,this.refs=E,this.updater=Z||_}b.prototype.isReactComponent={},b.prototype.setState=function(G,Q){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,Q,"setState")},b.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function S(){}S.prototype=b.prototype;function C(G,Q,Z){this.props=G,this.context=Q,this.refs=E,this.updater=Z||_}var R=C.prototype=new S;R.constructor=C,T(R,b.prototype),R.isPureReactComponent=!0;var P=Array.isArray,O={H:null,A:null,T:null,S:null,V:null},q=Object.prototype.hasOwnProperty;function D(G,Q,Z,fe,J,ne){return Z=ne.ref,{$$typeof:t,type:G,key:Q,ref:Z!==void 0?Z:null,props:ne}}function L(G,Q){return D(G.type,Q,void 0,void 0,void 0,G.props)}function N(G){return typeof G=="object"&&G!==null&&G.$$typeof===t}function U(G){var Q={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(Z){return Q[Z]})}var V=/\/+/g;function $(G,Q){return typeof G=="object"&&G!==null&&G.key!=null?U(""+G.key):Q.toString(36)}function F(){}function H(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(F,F):(G.status="pending",G.then(function(Q){G.status==="pending"&&(G.status="fulfilled",G.value=Q)},function(Q){G.status==="pending"&&(G.status="rejected",G.reason=Q)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function X(G,Q,Z,fe,J){var ne=typeof G;(ne==="undefined"||ne==="boolean")&&(G=null);var oe=!1;if(G===null)oe=!0;else switch(ne){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(G.$$typeof){case t:case e:oe=!0;break;case f:return oe=G._init,X(oe(G._payload),Q,Z,fe,J)}}if(oe)return J=J(G),oe=fe===""?"."+$(G,0):fe,P(J)?(Z="",oe!=null&&(Z=oe.replace(V,"$&/")+"/"),X(J,Q,Z,"",function(ye){return ye})):J!=null&&(N(J)&&(J=L(J,Z+(J.key==null||G&&G.key===J.key?"":(""+J.key).replace(V,"$&/")+"/")+oe)),Q.push(J)),1;oe=0;var _e=fe===""?".":fe+":";if(P(G))for(var Ce=0;Ce<G.length;Ce++)fe=G[Ce],ne=_e+$(fe,Ce),oe+=X(fe,Q,Z,ne,J);else if(Ce=g(G),typeof Ce=="function")for(G=Ce.call(G),Ce=0;!(fe=G.next()).done;)fe=fe.value,ne=_e+$(fe,Ce++),oe+=X(fe,Q,Z,ne,J);else if(ne==="object"){if(typeof G.then=="function")return X(H(G),Q,Z,fe,J);throw Q=String(G),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return oe}function K(G,Q,Z){if(G==null)return G;var fe=[],J=0;return X(G,fe,"","",function(ne){return Q.call(Z,ne,J++)}),fe}function te(G){if(G._status===-1){var Q=G._result;Q=Q(),Q.then(function(Z){(G._status===0||G._status===-1)&&(G._status=1,G._result=Z)},function(Z){(G._status===0||G._status===-1)&&(G._status=2,G._result=Z)}),G._status===-1&&(G._status=0,G._result=Q)}if(G._status===1)return G._result.default;throw G._result}var re=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",G);return}console.error(G)};function Y(){}return ct.Children={map:K,forEach:function(G,Q,Z){K(G,function(){Q.apply(this,arguments)},Z)},count:function(G){var Q=0;return K(G,function(){Q++}),Q},toArray:function(G){return K(G,function(Q){return Q})||[]},only:function(G){if(!N(G))throw Error("React.Children.only expected to receive a single React element child.");return G}},ct.Component=b,ct.Fragment=n,ct.Profiler=i,ct.PureComponent=C,ct.StrictMode=r,ct.Suspense=u,ct.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,ct.__COMPILER_RUNTIME={__proto__:null,c:function(G){return O.H.useMemoCache(G)}},ct.cache=function(G){return function(){return G.apply(null,arguments)}},ct.cloneElement=function(G,Q,Z){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var fe=T({},G.props),J=G.key,ne=void 0;if(Q!=null)for(oe in Q.ref!==void 0&&(ne=void 0),Q.key!==void 0&&(J=""+Q.key),Q)!q.call(Q,oe)||oe==="key"||oe==="__self"||oe==="__source"||oe==="ref"&&Q.ref===void 0||(fe[oe]=Q[oe]);var oe=arguments.length-2;if(oe===1)fe.children=Z;else if(1<oe){for(var _e=Array(oe),Ce=0;Ce<oe;Ce++)_e[Ce]=arguments[Ce+2];fe.children=_e}return D(G.type,J,void 0,void 0,ne,fe)},ct.createContext=function(G){return G={$$typeof:s,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:o,_context:G},G},ct.createElement=function(G,Q,Z){var fe,J={},ne=null;if(Q!=null)for(fe in Q.key!==void 0&&(ne=""+Q.key),Q)q.call(Q,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(J[fe]=Q[fe]);var oe=arguments.length-2;if(oe===1)J.children=Z;else if(1<oe){for(var _e=Array(oe),Ce=0;Ce<oe;Ce++)_e[Ce]=arguments[Ce+2];J.children=_e}if(G&&G.defaultProps)for(fe in oe=G.defaultProps,oe)J[fe]===void 0&&(J[fe]=oe[fe]);return D(G,ne,void 0,void 0,null,J)},ct.createRef=function(){return{current:null}},ct.forwardRef=function(G){return{$$typeof:a,render:G}},ct.isValidElement=N,ct.lazy=function(G){return{$$typeof:f,_payload:{_status:-1,_result:G},_init:te}},ct.memo=function(G,Q){return{$$typeof:c,type:G,compare:Q===void 0?null:Q}},ct.startTransition=function(G){var Q=O.T,Z={};O.T=Z;try{var fe=G(),J=O.S;J!==null&&J(Z,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(Y,re)}catch(ne){re(ne)}finally{O.T=Q}},ct.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},ct.use=function(G){return O.H.use(G)},ct.useActionState=function(G,Q,Z){return O.H.useActionState(G,Q,Z)},ct.useCallback=function(G,Q){return O.H.useCallback(G,Q)},ct.useContext=function(G){return O.H.useContext(G)},ct.useDebugValue=function(){},ct.useDeferredValue=function(G,Q){return O.H.useDeferredValue(G,Q)},ct.useEffect=function(G,Q,Z){var fe=O.H;if(typeof Z=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return fe.useEffect(G,Q)},ct.useId=function(){return O.H.useId()},ct.useImperativeHandle=function(G,Q,Z){return O.H.useImperativeHandle(G,Q,Z)},ct.useInsertionEffect=function(G,Q){return O.H.useInsertionEffect(G,Q)},ct.useLayoutEffect=function(G,Q){return O.H.useLayoutEffect(G,Q)},ct.useMemo=function(G,Q){return O.H.useMemo(G,Q)},ct.useOptimistic=function(G,Q){return O.H.useOptimistic(G,Q)},ct.useReducer=function(G,Q,Z){return O.H.useReducer(G,Q,Z)},ct.useRef=function(G){return O.H.useRef(G)},ct.useState=function(G){return O.H.useState(G)},ct.useSyncExternalStore=function(G,Q,Z){return O.H.useSyncExternalStore(G,Q,Z)},ct.useTransition=function(){return O.H.useTransition()},ct.version="19.1.1",ct}var uq;function Ph(){return uq||(uq=1,$x.exports=lae()),$x.exports}var M=Ph();const ge=Ao(M),uae=oae({__proto__:null,default:ge},[M]);var zx={exports:{}},mm={},Hx={exports:{}},Gx={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cq;function cae(){return cq||(cq=1,(function(t){function e(K,te){var re=K.length;K.push(te);e:for(;0<re;){var Y=re-1>>>1,G=K[Y];if(0<i(G,te))K[Y]=te,K[re]=G,re=Y;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var te=K[0],re=K.pop();if(re!==te){K[0]=re;e:for(var Y=0,G=K.length,Q=G>>>1;Y<Q;){var Z=2*(Y+1)-1,fe=K[Z],J=Z+1,ne=K[J];if(0>i(fe,re))J<G&&0>i(ne,fe)?(K[Y]=ne,K[J]=re,Y=J):(K[Y]=fe,K[Z]=re,Y=Z);else if(J<G&&0>i(ne,re))K[Y]=ne,K[J]=re,Y=J;else break e}}return te}function i(K,te){var re=K.sortIndex-te.sortIndex;return re!==0?re:K.id-te.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var u=[],c=[],f=1,h=null,g=3,_=!1,T=!1,E=!1,b=!1,S=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function P(K){for(var te=n(c);te!==null;){if(te.callback===null)r(c);else if(te.startTime<=K)r(c),te.sortIndex=te.expirationTime,e(u,te);else break;te=n(c)}}function O(K){if(E=!1,P(K),!T)if(n(u)!==null)T=!0,q||(q=!0,$());else{var te=n(c);te!==null&&X(O,te.startTime-K)}}var q=!1,D=-1,L=5,N=-1;function U(){return b?!0:!(t.unstable_now()-N<L)}function V(){if(b=!1,q){var K=t.unstable_now();N=K;var te=!0;try{e:{T=!1,E&&(E=!1,C(D),D=-1),_=!0;var re=g;try{t:{for(P(K),h=n(u);h!==null&&!(h.expirationTime>K&&U());){var Y=h.callback;if(typeof Y=="function"){h.callback=null,g=h.priorityLevel;var G=Y(h.expirationTime<=K);if(K=t.unstable_now(),typeof G=="function"){h.callback=G,P(K),te=!0;break t}h===n(u)&&r(u),P(K)}else r(u);h=n(u)}if(h!==null)te=!0;else{var Q=n(c);Q!==null&&X(O,Q.startTime-K),te=!1}}break e}finally{h=null,g=re,_=!1}te=void 0}}finally{te?$():q=!1}}}var $;if(typeof R=="function")$=function(){R(V)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,H=F.port2;F.port1.onmessage=V,$=function(){H.postMessage(null)}}else $=function(){S(V,0)};function X(K,te){D=S(function(){K(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(K){switch(g){case 1:case 2:case 3:var te=3;break;default:te=g}var re=g;g=te;try{return K()}finally{g=re}},t.unstable_requestPaint=function(){b=!0},t.unstable_runWithPriority=function(K,te){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var re=g;g=K;try{return te()}finally{g=re}},t.unstable_scheduleCallback=function(K,te,re){var Y=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?Y+re:Y):re=Y,K){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=re+G,K={id:f++,callback:te,priorityLevel:K,startTime:re,expirationTime:G,sortIndex:-1},re>Y?(K.sortIndex=re,e(c,K),n(u)===null&&K===n(c)&&(E?(C(D),D=-1):E=!0,X(O,re-Y))):(K.sortIndex=G,e(u,K),T||_||(T=!0,q||(q=!0,$()))),K},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(K){var te=g;return function(){var re=g;g=te;try{return K.apply(this,arguments)}finally{g=re}}}})(Gx)),Gx}var fq;function fae(){return fq||(fq=1,Hx.exports=cae()),Hx.exports}var jx={exports:{}},Or={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dq;function dae(){if(dq)return Or;dq=1;var t=Ph();function e(u){var c="https://react.dev/errors/"+u;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+u+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(u,c,f){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:h==null?null:""+h,children:u,containerInfo:c,implementation:f}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(u,c){if(u==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return Or.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Or.createPortal=function(u,c){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return o(u,c,null,f)},Or.flushSync=function(u){var c=s.T,f=r.p;try{if(s.T=null,r.p=2,u)return u()}finally{s.T=c,r.p=f,r.d.f()}},Or.preconnect=function(u,c){typeof u=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(u,c))},Or.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},Or.preinit=function(u,c){if(typeof u=="string"&&c&&typeof c.as=="string"){var f=c.as,h=a(f,c.crossOrigin),g=typeof c.integrity=="string"?c.integrity:void 0,_=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;f==="style"?r.d.S(u,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:h,integrity:g,fetchPriority:_}):f==="script"&&r.d.X(u,{crossOrigin:h,integrity:g,fetchPriority:_,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},Or.preinitModule=function(u,c){if(typeof u=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var f=a(c.as,c.crossOrigin);r.d.M(u,{crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(u)},Or.preload=function(u,c){if(typeof u=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var f=c.as,h=a(f,c.crossOrigin);r.d.L(u,f,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},Or.preloadModule=function(u,c){if(typeof u=="string")if(c){var f=a(c.as,c.crossOrigin);r.d.m(u,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(u)},Or.requestFormReset=function(u){r.d.r(u)},Or.unstable_batchedUpdates=function(u,c){return u(c)},Or.useFormState=function(u,c,f){return s.H.useFormState(u,c,f)},Or.useFormStatus=function(){return s.H.useHostTransitionStatus()},Or.version="19.1.1",Or}var hq;function sK(){if(hq)return jx.exports;hq=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),jx.exports=dae(),jx.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pq;function hae(){if(pq)return mm;pq=1;var t=fae(),e=Ph(),n=sK();function r(l){var d="https://react.dev/errors/"+l;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function o(l){var d=l,p=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(p=d.return),l=d.return;while(l)}return d.tag===3?p:null}function s(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function a(l){if(o(l)!==l)throw Error(r(188))}function u(l){var d=l.alternate;if(!d){if(d=o(l),d===null)throw Error(r(188));return d!==l?null:l}for(var p=l,v=d;;){var x=p.return;if(x===null)break;var A=x.alternate;if(A===null){if(v=x.return,v!==null){p=v;continue}break}if(x.child===A.child){for(A=x.child;A;){if(A===p)return a(x),l;if(A===v)return a(x),d;A=A.sibling}throw Error(r(188))}if(p.return!==v.return)p=x,v=A;else{for(var z=!1,j=x.child;j;){if(j===p){z=!0,p=x,v=A;break}if(j===v){z=!0,v=x,p=A;break}j=j.sibling}if(!z){for(j=A.child;j;){if(j===p){z=!0,p=A,v=x;break}if(j===v){z=!0,v=A,p=x;break}j=j.sibling}if(!z)throw Error(r(189))}}if(p.alternate!==v)throw Error(r(190))}if(p.tag!==3)throw Error(r(188));return p.stateNode.current===p?l:d}function c(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l;for(l=l.child;l!==null;){if(d=c(l),d!==null)return d;l=l.sibling}return null}var f=Object.assign,h=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),C=Symbol.for("react.consumer"),R=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function $(l){return l===null||typeof l!="object"?null:(l=V&&l[V]||l["@@iterator"],typeof l=="function"?l:null)}var F=Symbol.for("react.client.reference");function H(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===F?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case T:return"Fragment";case b:return"Profiler";case E:return"StrictMode";case O:return"Suspense";case q:return"SuspenseList";case N:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case _:return"Portal";case R:return(l.displayName||"Context")+".Provider";case C:return(l._context.displayName||"Context")+".Consumer";case P:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case D:return d=l.displayName||null,d!==null?d:H(l.type)||"Memo";case L:d=l._payload,l=l._init;try{return H(l(d))}catch{}}return null}var X=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},Y=[],G=-1;function Q(l){return{current:l}}function Z(l){0>G||(l.current=Y[G],Y[G]=null,G--)}function fe(l,d){G++,Y[G]=l.current,l.current=d}var J=Q(null),ne=Q(null),oe=Q(null),_e=Q(null);function Ce(l,d){switch(fe(oe,d),fe(ne,l),fe(J,null),d.nodeType){case 9:case 11:l=(l=d.documentElement)&&(l=l.namespaceURI)?k4(l):0;break;default:if(l=d.tagName,d=d.namespaceURI)d=k4(d),l=O4(d,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}Z(J),fe(J,l)}function ye(){Z(J),Z(ne),Z(oe)}function Ie(l){l.memoizedState!==null&&fe(_e,l);var d=J.current,p=O4(d,l.type);d!==p&&(fe(ne,l),fe(J,p))}function Le(l){ne.current===l&&(Z(J),Z(ne)),_e.current===l&&(Z(_e),um._currentValue=re)}var be=Object.prototype.hasOwnProperty,Qe=t.unstable_scheduleCallback,Be=t.unstable_cancelCallback,Ve=t.unstable_shouldYield,at=t.unstable_requestPaint,Pe=t.unstable_now,qe=t.unstable_getCurrentPriorityLevel,ot=t.unstable_ImmediatePriority,Tt=t.unstable_UserBlockingPriority,En=t.unstable_NormalPriority,Nn=t.unstable_LowPriority,Rt=t.unstable_IdlePriority,Mn=t.log,Te=t.unstable_setDisableYieldValue,ke=null,Ue=null;function Oe(l){if(typeof Mn=="function"&&Te(l),Ue&&typeof Ue.setStrictMode=="function")try{Ue.setStrictMode(ke,l)}catch{}}var Ye=Math.clz32?Math.clz32:Ft,Ct=Math.log,Pt=Math.LN2;function Ft(l){return l>>>=0,l===0?32:31-(Ct(l)/Pt|0)|0}var lt=256,wt=4194304;function Kn(l){var d=l&42;if(d!==0)return d;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function Tn(l,d,p){var v=l.pendingLanes;if(v===0)return 0;var x=0,A=l.suspendedLanes,z=l.pingedLanes;l=l.warmLanes;var j=v&134217727;return j!==0?(v=j&~A,v!==0?x=Kn(v):(z&=j,z!==0?x=Kn(z):p||(p=j&~l,p!==0&&(x=Kn(p))))):(j=v&~A,j!==0?x=Kn(j):z!==0?x=Kn(z):p||(p=v&~l,p!==0&&(x=Kn(p)))),x===0?0:d!==0&&d!==x&&(d&A)===0&&(A=x&-x,p=d&-d,A>=p||A===32&&(p&4194048)!==0)?d:x}function Wn(l,d){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&d)===0}function Gi(l,d){switch(l){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ws(){var l=lt;return lt<<=1,(lt&4194048)===0&&(lt=256),l}function oi(){var l=wt;return wt<<=1,(wt&62914560)===0&&(wt=4194304),l}function as(l){for(var d=[],p=0;31>p;p++)d.push(l);return d}function an(l,d){l.pendingLanes|=d,d!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function ji(l,d,p,v,x,A){var z=l.pendingLanes;l.pendingLanes=p,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=p,l.entangledLanes&=p,l.errorRecoveryDisabledLanes&=p,l.shellSuspendCounter=0;var j=l.entanglements,ee=l.expirationTimes,ce=l.hiddenUpdates;for(p=z&~p;0<p;){var we=31-Ye(p),xe=1<<we;j[we]=0,ee[we]=-1;var de=ce[we];if(de!==null)for(ce[we]=null,we=0;we<de.length;we++){var he=de[we];he!==null&&(he.lane&=-536870913)}p&=~xe}v!==0&&ls(l,v,0),A!==0&&x===0&&l.tag!==0&&(l.suspendedLanes|=A&~(z&~d))}function ls(l,d,p){l.pendingLanes|=d,l.suspendedLanes&=~d;var v=31-Ye(d);l.entangledLanes|=d,l.entanglements[v]=l.entanglements[v]|1073741824|p&4194090}function us(l,d){var p=l.entangledLanes|=d;for(l=l.entanglements;p;){var v=31-Ye(p),x=1<<v;x&d|l[v]&d&&(l[v]|=d),p&=~x}}function ku(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function Ou(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function Po(){var l=te.p;return l!==0?l:(l=window.event,l===void 0?32:eq(l.type))}function fp(l,d){var p=te.p;try{return te.p=l,d()}finally{te.p=p}}var Ki=Math.random().toString(36).slice(2),mn="__reactFiber$"+Ki,Yn="__reactProps$"+Ki,No="__reactContainer$"+Ki,Ys="__reactEvents$"+Ki,Js="__reactListeners$"+Ki,dp="__reactHandles$"+Ki,vi="__reactResources$"+Ki,cs="__reactMarker$"+Ki;function ul(l){delete l[mn],delete l[Yn],delete l[Ys],delete l[Js],delete l[dp]}function _i(l){var d=l[mn];if(d)return d;for(var p=l.parentNode;p;){if(d=p[No]||p[mn]){if(p=d.alternate,d.child!==null||p!==null&&p.child!==null)for(l=q4(l);l!==null;){if(p=l[mn])return p;l=q4(l)}return d}l=p,p=l.parentNode}return null}function Wi(l){if(l=l[mn]||l[No]){var d=l.tag;if(d===5||d===6||d===13||d===26||d===27||d===3)return l}return null}function fs(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l.stateNode;throw Error(r(33))}function ds(l){var d=l[vi];return d||(d=l[vi]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function gn(l){l[cs]=!0}var Af=new Set,Xs={};function Yi(l,d){Ji(l,d),Ji(l+"Capture",d)}function Ji(l,d){for(Xs[l]=d,l=0;l<d.length;l++)Af.add(d[l])}var hs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xi={},cl={};function hp(l){return be.call(cl,l)?!0:be.call(Xi,l)?!1:hs.test(l)?cl[l]=!0:(Xi[l]=!0,!1)}function Qs(l,d,p){if(hp(d))if(p===null)l.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":l.removeAttribute(d);return;case"boolean":var v=d.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){l.removeAttribute(d);return}}l.setAttribute(d,""+p)}}function Zs(l,d,p){if(p===null)l.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(d);return}l.setAttribute(d,""+p)}}function si(l,d,p,v){if(v===null)l.removeAttribute(p);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(p);return}l.setAttributeNS(d,p,""+v)}}var ps,fl;function Mo(l){if(ps===void 0)try{throw Error()}catch(p){var d=p.stack.trim().match(/\n( *(at )?)/);ps=d&&d[1]||"",fl=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ps+l+fl}var dl=!1;function ms(l,d){if(!l||dl)return"";dl=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(d){var xe=function(){throw Error()};if(Object.defineProperty(xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xe,[])}catch(he){var de=he}Reflect.construct(l,[],xe)}else{try{xe.call()}catch(he){de=he}l.call(xe.prototype)}}else{try{throw Error()}catch(he){de=he}(xe=l())&&typeof xe.catch=="function"&&xe.catch(function(){})}}catch(he){if(he&&de&&typeof he.stack=="string")return[he.stack,de.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=v.DetermineComponentFrameRoot(),z=A[0],j=A[1];if(z&&j){var ee=z.split(`
`),ce=j.split(`
`);for(x=v=0;v<ee.length&&!ee[v].includes("DetermineComponentFrameRoot");)v++;for(;x<ce.length&&!ce[x].includes("DetermineComponentFrameRoot");)x++;if(v===ee.length||x===ce.length)for(v=ee.length-1,x=ce.length-1;1<=v&&0<=x&&ee[v]!==ce[x];)x--;for(;1<=v&&0<=x;v--,x--)if(ee[v]!==ce[x]){if(v!==1||x!==1)do if(v--,x--,0>x||ee[v]!==ce[x]){var we=`
`+ee[v].replace(" at new "," at ");return l.displayName&&we.includes("<anonymous>")&&(we=we.replace("<anonymous>",l.displayName)),we}while(1<=v&&0<=x);break}}}finally{dl=!1,Error.prepareStackTrace=p}return(p=l?l.displayName||l.name:"")?Mo(p):""}function WE(l){switch(l.tag){case 26:case 27:case 5:return Mo(l.type);case 16:return Mo("Lazy");case 13:return Mo("Suspense");case 19:return Mo("SuspenseList");case 0:case 15:return ms(l.type,!1);case 11:return ms(l.type.render,!1);case 1:return ms(l.type,!0);case 31:return Mo("Activity");default:return""}}function Do(l){try{var d="";do d+=WE(l),l=l.return;while(l);return d}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}function yn(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function hl(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function Lu(l){var d=hl(l)?"checked":"value",p=Object.getOwnPropertyDescriptor(l.constructor.prototype,d),v=""+l[d];if(!l.hasOwnProperty(d)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var x=p.get,A=p.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return x.call(this)},set:function(z){v=""+z,A.call(this,z)}}),Object.defineProperty(l,d,{enumerable:p.enumerable}),{getValue:function(){return v},setValue:function(z){v=""+z},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function pl(l){l._valueTracker||(l._valueTracker=Lu(l))}function Bt(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var p=d.getValue(),v="";return l&&(v=hl(l)?l.checked?"true":"false":l.value),l=v,l!==p?(d.setValue(l),!0):!1}function ea(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var Vu=/[\n"\\]/g;function or(l){return l.replace(Vu,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function pp(l,d,p,v,x,A,z,j){l.name="",z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?l.type=z:l.removeAttribute("type"),d!=null?z==="number"?(d===0&&l.value===""||l.value!=d)&&(l.value=""+yn(d)):l.value!==""+yn(d)&&(l.value=""+yn(d)):z!=="submit"&&z!=="reset"||l.removeAttribute("value"),d!=null?gp(l,z,yn(d)):p!=null?gp(l,z,yn(p)):v!=null&&l.removeAttribute("value"),x==null&&A!=null&&(l.defaultChecked=!!A),x!=null&&(l.checked=x&&typeof x!="function"&&typeof x!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?l.name=""+yn(j):l.removeAttribute("name")}function mp(l,d,p,v,x,A,z,j){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(l.type=A),d!=null||p!=null){if(!(A!=="submit"&&A!=="reset"||d!=null))return;p=p!=null?""+yn(p):"",d=d!=null?""+yn(d):p,j||d===l.value||(l.value=d),l.defaultValue=d}v=v??x,v=typeof v!="function"&&typeof v!="symbol"&&!!v,l.checked=j?l.checked:!!v,l.defaultChecked=!!v,z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"&&(l.name=z)}function gp(l,d,p){d==="number"&&ea(l.ownerDocument)===l||l.defaultValue===""+p||(l.defaultValue=""+p)}function ml(l,d,p,v){if(l=l.options,d){d={};for(var x=0;x<p.length;x++)d["$"+p[x]]=!0;for(p=0;p<l.length;p++)x=d.hasOwnProperty("$"+l[p].value),l[p].selected!==x&&(l[p].selected=x),x&&v&&(l[p].defaultSelected=!0)}else{for(p=""+yn(p),d=null,x=0;x<l.length;x++){if(l[x].value===p){l[x].selected=!0,v&&(l[x].defaultSelected=!0);return}d!==null||l[x].disabled||(d=l[x])}d!==null&&(d.selected=!0)}}function iv(l,d,p){if(d!=null&&(d=""+yn(d),d!==l.value&&(l.value=d),p==null)){l.defaultValue!==d&&(l.defaultValue=d);return}l.defaultValue=p!=null?""+yn(p):""}function ov(l,d,p,v){if(d==null){if(v!=null){if(p!=null)throw Error(r(92));if(X(v)){if(1<v.length)throw Error(r(93));v=v[0]}p=v}p==null&&(p=""),d=p}p=yn(d),l.defaultValue=p,v=l.textContent,v===p&&v!==""&&v!==null&&(l.value=v)}function Qi(l,d){if(d){var p=l.firstChild;if(p&&p===l.lastChild&&p.nodeType===3){p.nodeValue=d;return}}l.textContent=d}var ta=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yp(l,d,p){var v=d.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?v?l.setProperty(d,""):d==="float"?l.cssFloat="":l[d]="":v?l.setProperty(d,p):typeof p!="number"||p===0||ta.has(d)?d==="float"?l.cssFloat=p:l[d]=(""+p).trim():l[d]=p+"px"}function vp(l,d,p){if(d!=null&&typeof d!="object")throw Error(r(62));if(l=l.style,p!=null){for(var v in p)!p.hasOwnProperty(v)||d!=null&&d.hasOwnProperty(v)||(v.indexOf("--")===0?l.setProperty(v,""):v==="float"?l.cssFloat="":l[v]="");for(var x in d)v=d[x],d.hasOwnProperty(x)&&p[x]!==v&&yp(l,x,v)}else for(var A in d)d.hasOwnProperty(A)&&yp(l,A,d[A])}function Cf(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),av=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ko(l){return av.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var _p=null;function bp(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var gl=null,Hr=null;function lv(l){var d=Wi(l);if(d&&(l=d.stateNode)){var p=l[Yn]||null;e:switch(l=d.stateNode,d.type){case"input":if(pp(l,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),d=p.name,p.type==="radio"&&d!=null){for(p=l;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+or(""+d)+'"][type="radio"]'),d=0;d<p.length;d++){var v=p[d];if(v!==l&&v.form===l.form){var x=v[Yn]||null;if(!x)throw Error(r(90));pp(v,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(d=0;d<p.length;d++)v=p[d],v.form===l.form&&Bt(v)}break e;case"textarea":iv(l,p.value,p.defaultValue);break e;case"select":d=p.value,d!=null&&ml(l,!!p.multiple,d,!1)}}}var Uu=!1;function qu(l,d,p){if(Uu)return l(d,p);Uu=!0;try{var v=l(d);return v}finally{if(Uu=!1,(gl!==null||Hr!==null)&&(Xv(),gl&&(d=gl,l=Hr,Hr=gl=null,lv(d),l)))for(d=0;d<l.length;d++)lv(l[d])}}function yl(l,d){var p=l.stateNode;if(p===null)return null;var v=p[Yn]||null;if(v===null)return null;p=v[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(l=l.type,v=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!v;break e;default:l=!1}if(l)return null;if(p&&typeof p!="function")throw Error(r(231,d,typeof p));return p}var Gr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),na=!1;if(Gr)try{var vl={};Object.defineProperty(vl,"passive",{get:function(){na=!0}}),window.addEventListener("test",vl,vl),window.removeEventListener("test",vl,vl)}catch{na=!1}var Zi=null,Wt=null,If=null;function uv(){if(If)return If;var l,d=Wt,p=d.length,v,x="value"in Zi?Zi.value:Zi.textContent,A=x.length;for(l=0;l<p&&d[l]===x[l];l++);var z=p-l;for(v=1;v<=z&&d[p-v]===x[A-v];v++);return If=x.slice(l,1<v?1-v:void 0)}function Fu(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function Bu(){return!0}function wp(){return!1}function Jn(l){function d(p,v,x,A,z){this._reactName=p,this._targetInst=x,this.type=v,this.nativeEvent=A,this.target=z,this.currentTarget=null;for(var j in l)l.hasOwnProperty(j)&&(p=l[j],this[j]=p?p(A):A[j]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?Bu:wp,this.isPropagationStopped=wp,this}return f(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Bu)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Bu)},persist:function(){},isPersistent:Bu}),d}var Dr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$u=Jn(Dr),zu=f({},Dr,{view:0,detail:0}),Hu=Jn(zu),Rf,Gu,gs,ju=f({},zu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mf,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==gs&&(gs&&l.type==="mousemove"?(Rf=l.screenX-gs.screenX,Gu=l.screenY-gs.screenY):Gu=Rf=0,gs=l),Rf)},movementY:function(l){return"movementY"in l?l.movementY:Gu}}),Ku=Jn(ju),YE=f({},ju,{dataTransfer:0}),cv=Jn(YE),Wu=f({},zu,{relatedTarget:0}),Pf=Jn(Wu),fv=f({},Dr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ep=Jn(fv),Tp=f({},Dr,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),dv=Jn(Tp),Nf=f({},Dr,{data:0}),xp=Jn(Nf),hv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ra={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mv(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=pv[l])?!!d[l]:!1}function Mf(){return mv}var gv=f({},zu,{key:function(l){if(l.key){var d=hv[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=Fu(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?ra[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mf,charCode:function(l){return l.type==="keypress"?Fu(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Fu(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Df=Jn(gv),jr=f({},ju,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sp=Jn(jr),yv=f({},zu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mf}),_l=Jn(yv),w=f({},Dr,{propertyName:0,elapsedTime:0,pseudoElement:0}),k=Jn(w),B=f({},ju,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),W=Jn(B),ue=f({},Dr,{newState:0,oldState:0}),me=Jn(ue),Ne=[9,13,27,32],st=Gr&&"CompositionEvent"in window,Zt=null;Gr&&"documentMode"in document&&(Zt=document.documentMode);var Dt=Gr&&"TextEvent"in window&&!Zt,Dn=Gr&&(!st||Zt&&8<Zt&&11>=Zt),bi=" ",ys=!1;function Oo(l,d){switch(l){case"keyup":return Ne.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lo(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Vo=!1;function Ap(l,d){switch(l){case"compositionend":return Lo(d);case"keypress":return d.which!==32?null:(ys=!0,bi);case"textInput":return l=d.data,l===bi&&ys?null:l;default:return null}}function Poe(l,d){if(Vo)return l==="compositionend"||!st&&Oo(l,d)?(l=uv(),If=Wt=Zi=null,Vo=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return Dn&&d.locale!=="ko"?null:d.data;default:return null}}var Noe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function WL(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!Noe[l.type]:d==="textarea"}function YL(l,d,p,v){gl?Hr?Hr.push(v):Hr=[v]:gl=v,d=r0(d,"onChange"),0<d.length&&(p=new $u("onChange","change",null,p,v),l.push({event:p,listeners:d}))}var Cp=null,Ip=null;function Moe(l){R4(l,0)}function vv(l){var d=fs(l);if(Bt(d))return l}function JL(l,d){if(l==="change")return d}var XL=!1;if(Gr){var JE;if(Gr){var XE="oninput"in document;if(!XE){var QL=document.createElement("div");QL.setAttribute("oninput","return;"),XE=typeof QL.oninput=="function"}JE=XE}else JE=!1;XL=JE&&(!document.documentMode||9<document.documentMode)}function ZL(){Cp&&(Cp.detachEvent("onpropertychange",eV),Ip=Cp=null)}function eV(l){if(l.propertyName==="value"&&vv(Ip)){var d=[];YL(d,Ip,l,bp(l)),qu(Moe,d)}}function Doe(l,d,p){l==="focusin"?(ZL(),Cp=d,Ip=p,Cp.attachEvent("onpropertychange",eV)):l==="focusout"&&ZL()}function koe(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return vv(Ip)}function Ooe(l,d){if(l==="click")return vv(d)}function Loe(l,d){if(l==="input"||l==="change")return vv(d)}function Voe(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var wi=typeof Object.is=="function"?Object.is:Voe;function Rp(l,d){if(wi(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var p=Object.keys(l),v=Object.keys(d);if(p.length!==v.length)return!1;for(v=0;v<p.length;v++){var x=p[v];if(!be.call(d,x)||!wi(l[x],d[x]))return!1}return!0}function tV(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function nV(l,d){var p=tV(l);l=0;for(var v;p;){if(p.nodeType===3){if(v=l+p.textContent.length,l<=d&&v>=d)return{node:p,offset:d-l};l=v}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=tV(p)}}function rV(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?rV(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function iV(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var d=ea(l.document);d instanceof l.HTMLIFrameElement;){try{var p=typeof d.contentWindow.location.href=="string"}catch{p=!1}if(p)l=d.contentWindow;else break;d=ea(l.document)}return d}function QE(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}var Uoe=Gr&&"documentMode"in document&&11>=document.documentMode,kf=null,ZE=null,Pp=null,eT=!1;function oV(l,d,p){var v=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;eT||kf==null||kf!==ea(v)||(v=kf,"selectionStart"in v&&QE(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),Pp&&Rp(Pp,v)||(Pp=v,v=r0(ZE,"onSelect"),0<v.length&&(d=new $u("onSelect","select",null,d,p),l.push({event:d,listeners:v}),d.target=kf)))}function Yu(l,d){var p={};return p[l.toLowerCase()]=d.toLowerCase(),p["Webkit"+l]="webkit"+d,p["Moz"+l]="moz"+d,p}var Of={animationend:Yu("Animation","AnimationEnd"),animationiteration:Yu("Animation","AnimationIteration"),animationstart:Yu("Animation","AnimationStart"),transitionrun:Yu("Transition","TransitionRun"),transitionstart:Yu("Transition","TransitionStart"),transitioncancel:Yu("Transition","TransitionCancel"),transitionend:Yu("Transition","TransitionEnd")},tT={},sV={};Gr&&(sV=document.createElement("div").style,"AnimationEvent"in window||(delete Of.animationend.animation,delete Of.animationiteration.animation,delete Of.animationstart.animation),"TransitionEvent"in window||delete Of.transitionend.transition);function Ju(l){if(tT[l])return tT[l];if(!Of[l])return l;var d=Of[l],p;for(p in d)if(d.hasOwnProperty(p)&&p in sV)return tT[l]=d[p];return l}var aV=Ju("animationend"),lV=Ju("animationiteration"),uV=Ju("animationstart"),qoe=Ju("transitionrun"),Foe=Ju("transitionstart"),Boe=Ju("transitioncancel"),cV=Ju("transitionend"),fV=new Map,nT="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");nT.push("scrollEnd");function Uo(l,d){fV.set(l,d),Yi(d,[l])}var dV=new WeakMap;function eo(l,d){if(typeof l=="object"&&l!==null){var p=dV.get(l);return p!==void 0?p:(d={value:l,source:d,stack:Do(d)},dV.set(l,d),d)}return{value:l,source:d,stack:Do(d)}}var to=[],Lf=0,rT=0;function _v(){for(var l=Lf,d=rT=Lf=0;d<l;){var p=to[d];to[d++]=null;var v=to[d];to[d++]=null;var x=to[d];to[d++]=null;var A=to[d];if(to[d++]=null,v!==null&&x!==null){var z=v.pending;z===null?x.next=x:(x.next=z.next,z.next=x),v.pending=x}A!==0&&hV(p,x,A)}}function bv(l,d,p,v){to[Lf++]=l,to[Lf++]=d,to[Lf++]=p,to[Lf++]=v,rT|=v,l.lanes|=v,l=l.alternate,l!==null&&(l.lanes|=v)}function iT(l,d,p,v){return bv(l,d,p,v),wv(l)}function Vf(l,d){return bv(l,null,null,d),wv(l)}function hV(l,d,p){l.lanes|=p;var v=l.alternate;v!==null&&(v.lanes|=p);for(var x=!1,A=l.return;A!==null;)A.childLanes|=p,v=A.alternate,v!==null&&(v.childLanes|=p),A.tag===22&&(l=A.stateNode,l===null||l._visibility&1||(x=!0)),l=A,A=A.return;return l.tag===3?(A=l.stateNode,x&&d!==null&&(x=31-Ye(p),l=A.hiddenUpdates,v=l[x],v===null?l[x]=[d]:v.push(d),d.lane=p|536870912),A):null}function wv(l){if(50<tm)throw tm=0,cx=null,Error(r(185));for(var d=l.return;d!==null;)l=d,d=l.return;return l.tag===3?l.stateNode:null}var Uf={};function $oe(l,d,p,v){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ei(l,d,p,v){return new $oe(l,d,p,v)}function oT(l){return l=l.prototype,!(!l||!l.isReactComponent)}function ia(l,d){var p=l.alternate;return p===null?(p=Ei(l.tag,d,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=d,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&65011712,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,d=l.dependencies,p.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p.refCleanup=l.refCleanup,p}function pV(l,d){l.flags&=65011714;var p=l.alternate;return p===null?(l.childLanes=0,l.lanes=d,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=p.childLanes,l.lanes=p.lanes,l.child=p.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=p.memoizedProps,l.memoizedState=p.memoizedState,l.updateQueue=p.updateQueue,l.type=p.type,d=p.dependencies,l.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),l}function Ev(l,d,p,v,x,A){var z=0;if(v=l,typeof l=="function")oT(l)&&(z=1);else if(typeof l=="string")z=Hse(l,p,J.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case N:return l=Ei(31,p,d,x),l.elementType=N,l.lanes=A,l;case T:return Xu(p.children,x,A,d);case E:z=8,x|=24;break;case b:return l=Ei(12,p,d,x|2),l.elementType=b,l.lanes=A,l;case O:return l=Ei(13,p,d,x),l.elementType=O,l.lanes=A,l;case q:return l=Ei(19,p,d,x),l.elementType=q,l.lanes=A,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case S:case R:z=10;break e;case C:z=9;break e;case P:z=11;break e;case D:z=14;break e;case L:z=16,v=null;break e}z=29,p=Error(r(130,l===null?"null":typeof l,"")),v=null}return d=Ei(z,p,d,x),d.elementType=l,d.type=v,d.lanes=A,d}function Xu(l,d,p,v){return l=Ei(7,l,v,d),l.lanes=p,l}function sT(l,d,p){return l=Ei(6,l,null,d),l.lanes=p,l}function aT(l,d,p){return d=Ei(4,l.children!==null?l.children:[],l.key,d),d.lanes=p,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}var qf=[],Ff=0,Tv=null,xv=0,no=[],ro=0,Qu=null,oa=1,sa="";function Zu(l,d){qf[Ff++]=xv,qf[Ff++]=Tv,Tv=l,xv=d}function mV(l,d,p){no[ro++]=oa,no[ro++]=sa,no[ro++]=Qu,Qu=l;var v=oa;l=sa;var x=32-Ye(v)-1;v&=~(1<<x),p+=1;var A=32-Ye(d)+x;if(30<A){var z=x-x%5;A=(v&(1<<z)-1).toString(32),v>>=z,x-=z,oa=1<<32-Ye(d)+x|p<<x|v,sa=A+l}else oa=1<<A|p<<x|v,sa=l}function lT(l){l.return!==null&&(Zu(l,1),mV(l,1,0))}function uT(l){for(;l===Tv;)Tv=qf[--Ff],qf[Ff]=null,xv=qf[--Ff],qf[Ff]=null;for(;l===Qu;)Qu=no[--ro],no[ro]=null,sa=no[--ro],no[ro]=null,oa=no[--ro],no[ro]=null}var Kr=null,xn=null,It=!1,ec=null,vs=!1,cT=Error(r(519));function tc(l){var d=Error(r(418,""));throw Dp(eo(d,l)),cT}function gV(l){var d=l.stateNode,p=l.type,v=l.memoizedProps;switch(d[mn]=l,d[Yn]=v,p){case"dialog":mt("cancel",d),mt("close",d);break;case"iframe":case"object":case"embed":mt("load",d);break;case"video":case"audio":for(p=0;p<rm.length;p++)mt(rm[p],d);break;case"source":mt("error",d);break;case"img":case"image":case"link":mt("error",d),mt("load",d);break;case"details":mt("toggle",d);break;case"input":mt("invalid",d),mp(d,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0),pl(d);break;case"select":mt("invalid",d);break;case"textarea":mt("invalid",d),ov(d,v.value,v.defaultValue,v.children),pl(d)}p=v.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||d.textContent===""+p||v.suppressHydrationWarning===!0||D4(d.textContent,p)?(v.popover!=null&&(mt("beforetoggle",d),mt("toggle",d)),v.onScroll!=null&&mt("scroll",d),v.onScrollEnd!=null&&mt("scrollend",d),v.onClick!=null&&(d.onclick=i0),d=!0):d=!1,d||tc(l)}function yV(l){for(Kr=l.return;Kr;)switch(Kr.tag){case 5:case 13:vs=!1;return;case 27:case 3:vs=!0;return;default:Kr=Kr.return}}function Np(l){if(l!==Kr)return!1;if(!It)return yV(l),It=!0,!1;var d=l.tag,p;if((p=d!==3&&d!==27)&&((p=d===5)&&(p=l.type,p=!(p!=="form"&&p!=="button")||Ax(l.type,l.memoizedProps)),p=!p),p&&xn&&tc(l),yV(l),d===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));e:{for(l=l.nextSibling,d=0;l;){if(l.nodeType===8)if(p=l.data,p==="/$"){if(d===0){xn=Fo(l.nextSibling);break e}d--}else p!=="$"&&p!=="$!"&&p!=="$?"||d++;l=l.nextSibling}xn=null}}else d===27?(d=xn,Ol(l.type)?(l=Px,Px=null,xn=l):xn=d):xn=Kr?Fo(l.stateNode.nextSibling):null;return!0}function Mp(){xn=Kr=null,It=!1}function vV(){var l=ec;return l!==null&&(ui===null?ui=l:ui.push.apply(ui,l),ec=null),l}function Dp(l){ec===null?ec=[l]:ec.push(l)}var fT=Q(null),nc=null,aa=null;function bl(l,d,p){fe(fT,d._currentValue),d._currentValue=p}function la(l){l._currentValue=fT.current,Z(fT)}function dT(l,d,p){for(;l!==null;){var v=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,v!==null&&(v.childLanes|=d)):v!==null&&(v.childLanes&d)!==d&&(v.childLanes|=d),l===p)break;l=l.return}}function hT(l,d,p,v){var x=l.child;for(x!==null&&(x.return=l);x!==null;){var A=x.dependencies;if(A!==null){var z=x.child;A=A.firstContext;e:for(;A!==null;){var j=A;A=x;for(var ee=0;ee<d.length;ee++)if(j.context===d[ee]){A.lanes|=p,j=A.alternate,j!==null&&(j.lanes|=p),dT(A.return,p,l),v||(z=null);break e}A=j.next}}else if(x.tag===18){if(z=x.return,z===null)throw Error(r(341));z.lanes|=p,A=z.alternate,A!==null&&(A.lanes|=p),dT(z,p,l),z=null}else z=x.child;if(z!==null)z.return=x;else for(z=x;z!==null;){if(z===l){z=null;break}if(x=z.sibling,x!==null){x.return=z.return,z=x;break}z=z.return}x=z}}function kp(l,d,p,v){l=null;for(var x=d,A=!1;x!==null;){if(!A){if((x.flags&524288)!==0)A=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var z=x.alternate;if(z===null)throw Error(r(387));if(z=z.memoizedProps,z!==null){var j=x.type;wi(x.pendingProps.value,z.value)||(l!==null?l.push(j):l=[j])}}else if(x===_e.current){if(z=x.alternate,z===null)throw Error(r(387));z.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(l!==null?l.push(um):l=[um])}x=x.return}l!==null&&hT(d,l,p,v),d.flags|=262144}function Sv(l){for(l=l.firstContext;l!==null;){if(!wi(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function rc(l){nc=l,aa=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function kr(l){return _V(nc,l)}function Av(l,d){return nc===null&&rc(l),_V(l,d)}function _V(l,d){var p=d._currentValue;if(d={context:d,memoizedValue:p,next:null},aa===null){if(l===null)throw Error(r(308));aa=d,l.dependencies={lanes:0,firstContext:d},l.flags|=524288}else aa=aa.next=d;return p}var zoe=typeof AbortController<"u"?AbortController:function(){var l=[],d=this.signal={aborted:!1,addEventListener:function(p,v){l.push(v)}};this.abort=function(){d.aborted=!0,l.forEach(function(p){return p()})}},Hoe=t.unstable_scheduleCallback,Goe=t.unstable_NormalPriority,Xn={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function pT(){return{controller:new zoe,data:new Map,refCount:0}}function Op(l){l.refCount--,l.refCount===0&&Hoe(Goe,function(){l.controller.abort()})}var Lp=null,mT=0,Bf=0,$f=null;function joe(l,d){if(Lp===null){var p=Lp=[];mT=0,Bf=yx(),$f={status:"pending",value:void 0,then:function(v){p.push(v)}}}return mT++,d.then(bV,bV),d}function bV(){if(--mT===0&&Lp!==null){$f!==null&&($f.status="fulfilled");var l=Lp;Lp=null,Bf=0,$f=null;for(var d=0;d<l.length;d++)(0,l[d])()}}function Koe(l,d){var p=[],v={status:"pending",value:null,reason:null,then:function(x){p.push(x)}};return l.then(function(){v.status="fulfilled",v.value=d;for(var x=0;x<p.length;x++)(0,p[x])(d)},function(x){for(v.status="rejected",v.reason=x,x=0;x<p.length;x++)(0,p[x])(void 0)}),v}var wV=K.S;K.S=function(l,d){typeof d=="object"&&d!==null&&typeof d.then=="function"&&joe(l,d),wV!==null&&wV(l,d)};var ic=Q(null);function gT(){var l=ic.current;return l!==null?l:Yt.pooledCache}function Cv(l,d){d===null?fe(ic,ic.current):fe(ic,d.pool)}function EV(){var l=gT();return l===null?null:{parent:Xn._currentValue,pool:l}}var Vp=Error(r(460)),TV=Error(r(474)),Iv=Error(r(542)),yT={then:function(){}};function xV(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Rv(){}function SV(l,d,p){switch(p=l[p],p===void 0?l.push(d):p!==d&&(d.then(Rv,Rv),d=p),d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,CV(l),l;default:if(typeof d.status=="string")d.then(Rv,Rv);else{if(l=Yt,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=d,l.status="pending",l.then(function(v){if(d.status==="pending"){var x=d;x.status="fulfilled",x.value=v}},function(v){if(d.status==="pending"){var x=d;x.status="rejected",x.reason=v}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,CV(l),l}throw Up=d,Vp}}var Up=null;function AV(){if(Up===null)throw Error(r(459));var l=Up;return Up=null,l}function CV(l){if(l===Vp||l===Iv)throw Error(r(483))}var wl=!1;function vT(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _T(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function El(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Tl(l,d,p){var v=l.updateQueue;if(v===null)return null;if(v=v.shared,(kt&2)!==0){var x=v.pending;return x===null?d.next=d:(d.next=x.next,x.next=d),v.pending=d,d=wv(l),hV(l,null,p),d}return bv(l,v,d,p),wv(l)}function qp(l,d,p){if(d=d.updateQueue,d!==null&&(d=d.shared,(p&4194048)!==0)){var v=d.lanes;v&=l.pendingLanes,p|=v,d.lanes=p,us(l,p)}}function bT(l,d){var p=l.updateQueue,v=l.alternate;if(v!==null&&(v=v.updateQueue,p===v)){var x=null,A=null;if(p=p.firstBaseUpdate,p!==null){do{var z={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};A===null?x=A=z:A=A.next=z,p=p.next}while(p!==null);A===null?x=A=d:A=A.next=d}else x=A=d;p={baseState:v.baseState,firstBaseUpdate:x,lastBaseUpdate:A,shared:v.shared,callbacks:v.callbacks},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=d:l.next=d,p.lastBaseUpdate=d}var wT=!1;function Fp(){if(wT){var l=$f;if(l!==null)throw l}}function Bp(l,d,p,v){wT=!1;var x=l.updateQueue;wl=!1;var A=x.firstBaseUpdate,z=x.lastBaseUpdate,j=x.shared.pending;if(j!==null){x.shared.pending=null;var ee=j,ce=ee.next;ee.next=null,z===null?A=ce:z.next=ce,z=ee;var we=l.alternate;we!==null&&(we=we.updateQueue,j=we.lastBaseUpdate,j!==z&&(j===null?we.firstBaseUpdate=ce:j.next=ce,we.lastBaseUpdate=ee))}if(A!==null){var xe=x.baseState;z=0,we=ce=ee=null,j=A;do{var de=j.lane&-536870913,he=de!==j.lane;if(he?(_t&de)===de:(v&de)===de){de!==0&&de===Bf&&(wT=!0),we!==null&&(we=we.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var nt=l,Ze=j;de=d;var Ht=p;switch(Ze.tag){case 1:if(nt=Ze.payload,typeof nt=="function"){xe=nt.call(Ht,xe,de);break e}xe=nt;break e;case 3:nt.flags=nt.flags&-65537|128;case 0:if(nt=Ze.payload,de=typeof nt=="function"?nt.call(Ht,xe,de):nt,de==null)break e;xe=f({},xe,de);break e;case 2:wl=!0}}de=j.callback,de!==null&&(l.flags|=64,he&&(l.flags|=8192),he=x.callbacks,he===null?x.callbacks=[de]:he.push(de))}else he={lane:de,tag:j.tag,payload:j.payload,callback:j.callback,next:null},we===null?(ce=we=he,ee=xe):we=we.next=he,z|=de;if(j=j.next,j===null){if(j=x.shared.pending,j===null)break;he=j,j=he.next,he.next=null,x.lastBaseUpdate=he,x.shared.pending=null}}while(!0);we===null&&(ee=xe),x.baseState=ee,x.firstBaseUpdate=ce,x.lastBaseUpdate=we,A===null&&(x.shared.lanes=0),Nl|=z,l.lanes=z,l.memoizedState=xe}}function IV(l,d){if(typeof l!="function")throw Error(r(191,l));l.call(d)}function RV(l,d){var p=l.callbacks;if(p!==null)for(l.callbacks=null,l=0;l<p.length;l++)IV(p[l],d)}var zf=Q(null),Pv=Q(0);function PV(l,d){l=ma,fe(Pv,l),fe(zf,d),ma=l|d.baseLanes}function ET(){fe(Pv,ma),fe(zf,zf.current)}function TT(){ma=Pv.current,Z(zf),Z(Pv)}var xl=0,ft=null,$t=null,qn=null,Nv=!1,Hf=!1,oc=!1,Mv=0,$p=0,Gf=null,Woe=0;function kn(){throw Error(r(321))}function xT(l,d){if(d===null)return!1;for(var p=0;p<d.length&&p<l.length;p++)if(!wi(l[p],d[p]))return!1;return!0}function ST(l,d,p,v,x,A){return xl=A,ft=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,K.H=l===null||l.memoizedState===null?hU:pU,oc=!1,A=p(v,x),oc=!1,Hf&&(A=MV(d,p,v,x)),NV(l),A}function NV(l){K.H=Uv;var d=$t!==null&&$t.next!==null;if(xl=0,qn=$t=ft=null,Nv=!1,$p=0,Gf=null,d)throw Error(r(300));l===null||sr||(l=l.dependencies,l!==null&&Sv(l)&&(sr=!0))}function MV(l,d,p,v){ft=l;var x=0;do{if(Hf&&(Gf=null),$p=0,Hf=!1,25<=x)throw Error(r(301));if(x+=1,qn=$t=null,l.updateQueue!=null){var A=l.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}K.H=tse,A=d(p,v)}while(Hf);return A}function Yoe(){var l=K.H,d=l.useState()[0];return d=typeof d.then=="function"?zp(d):d,l=l.useState()[0],($t!==null?$t.memoizedState:null)!==l&&(ft.flags|=1024),d}function AT(){var l=Mv!==0;return Mv=0,l}function CT(l,d,p){d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~p}function IT(l){if(Nv){for(l=l.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}Nv=!1}xl=0,qn=$t=ft=null,Hf=!1,$p=Mv=0,Gf=null}function ai(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qn===null?ft.memoizedState=qn=l:qn=qn.next=l,qn}function Fn(){if($t===null){var l=ft.alternate;l=l!==null?l.memoizedState:null}else l=$t.next;var d=qn===null?ft.memoizedState:qn.next;if(d!==null)qn=d,$t=l;else{if(l===null)throw ft.alternate===null?Error(r(467)):Error(r(310));$t=l,l={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},qn===null?ft.memoizedState=qn=l:qn=qn.next=l}return qn}function RT(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zp(l){var d=$p;return $p+=1,Gf===null&&(Gf=[]),l=SV(Gf,l,d),d=ft,(qn===null?d.memoizedState:qn.next)===null&&(d=d.alternate,K.H=d===null||d.memoizedState===null?hU:pU),l}function Dv(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return zp(l);if(l.$$typeof===R)return kr(l)}throw Error(r(438,String(l)))}function PT(l){var d=null,p=ft.updateQueue;if(p!==null&&(d=p.memoCache),d==null){var v=ft.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(d={data:v.data.map(function(x){return x.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),p===null&&(p=RT(),ft.updateQueue=p),p.memoCache=d,p=d.data[d.index],p===void 0)for(p=d.data[d.index]=Array(l),v=0;v<l;v++)p[v]=U;return d.index++,p}function ua(l,d){return typeof d=="function"?d(l):d}function kv(l){var d=Fn();return NT(d,$t,l)}function NT(l,d,p){var v=l.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=p;var x=l.baseQueue,A=v.pending;if(A!==null){if(x!==null){var z=x.next;x.next=A.next,A.next=z}d.baseQueue=x=A,v.pending=null}if(A=l.baseState,x===null)l.memoizedState=A;else{d=x.next;var j=z=null,ee=null,ce=d,we=!1;do{var xe=ce.lane&-536870913;if(xe!==ce.lane?(_t&xe)===xe:(xl&xe)===xe){var de=ce.revertLane;if(de===0)ee!==null&&(ee=ee.next={lane:0,revertLane:0,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null}),xe===Bf&&(we=!0);else if((xl&de)===de){ce=ce.next,de===Bf&&(we=!0);continue}else xe={lane:0,revertLane:ce.revertLane,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null},ee===null?(j=ee=xe,z=A):ee=ee.next=xe,ft.lanes|=de,Nl|=de;xe=ce.action,oc&&p(A,xe),A=ce.hasEagerState?ce.eagerState:p(A,xe)}else de={lane:xe,revertLane:ce.revertLane,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null},ee===null?(j=ee=de,z=A):ee=ee.next=de,ft.lanes|=xe,Nl|=xe;ce=ce.next}while(ce!==null&&ce!==d);if(ee===null?z=A:ee.next=j,!wi(A,l.memoizedState)&&(sr=!0,we&&(p=$f,p!==null)))throw p;l.memoizedState=A,l.baseState=z,l.baseQueue=ee,v.lastRenderedState=A}return x===null&&(v.lanes=0),[l.memoizedState,v.dispatch]}function MT(l){var d=Fn(),p=d.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=l;var v=p.dispatch,x=p.pending,A=d.memoizedState;if(x!==null){p.pending=null;var z=x=x.next;do A=l(A,z.action),z=z.next;while(z!==x);wi(A,d.memoizedState)||(sr=!0),d.memoizedState=A,d.baseQueue===null&&(d.baseState=A),p.lastRenderedState=A}return[A,v]}function DV(l,d,p){var v=ft,x=Fn(),A=It;if(A){if(p===void 0)throw Error(r(407));p=p()}else p=d();var z=!wi(($t||x).memoizedState,p);z&&(x.memoizedState=p,sr=!0),x=x.queue;var j=LV.bind(null,v,x,l);if(Hp(2048,8,j,[l]),x.getSnapshot!==d||z||qn!==null&&qn.memoizedState.tag&1){if(v.flags|=2048,jf(9,Ov(),OV.bind(null,v,x,p,d),null),Yt===null)throw Error(r(349));A||(xl&124)!==0||kV(v,d,p)}return p}function kV(l,d,p){l.flags|=16384,l={getSnapshot:d,value:p},d=ft.updateQueue,d===null?(d=RT(),ft.updateQueue=d,d.stores=[l]):(p=d.stores,p===null?d.stores=[l]:p.push(l))}function OV(l,d,p,v){d.value=p,d.getSnapshot=v,VV(d)&&UV(l)}function LV(l,d,p){return p(function(){VV(d)&&UV(l)})}function VV(l){var d=l.getSnapshot;l=l.value;try{var p=d();return!wi(l,p)}catch{return!0}}function UV(l){var d=Vf(l,2);d!==null&&Ci(d,l,2)}function DT(l){var d=ai();if(typeof l=="function"){var p=l;if(l=p(),oc){Oe(!0);try{p()}finally{Oe(!1)}}}return d.memoizedState=d.baseState=l,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:l},d}function qV(l,d,p,v){return l.baseState=p,NT(l,$t,typeof v=="function"?v:ua)}function Joe(l,d,p,v,x){if(Vv(l))throw Error(r(485));if(l=d.action,l!==null){var A={payload:x,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(z){A.listeners.push(z)}};K.T!==null?p(!0):A.isTransition=!1,v(A),p=d.pending,p===null?(A.next=d.pending=A,FV(d,A)):(A.next=p.next,d.pending=p.next=A)}}function FV(l,d){var p=d.action,v=d.payload,x=l.state;if(d.isTransition){var A=K.T,z={};K.T=z;try{var j=p(x,v),ee=K.S;ee!==null&&ee(z,j),BV(l,d,j)}catch(ce){kT(l,d,ce)}finally{K.T=A}}else try{A=p(x,v),BV(l,d,A)}catch(ce){kT(l,d,ce)}}function BV(l,d,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(v){$V(l,d,v)},function(v){return kT(l,d,v)}):$V(l,d,p)}function $V(l,d,p){d.status="fulfilled",d.value=p,zV(d),l.state=p,d=l.pending,d!==null&&(p=d.next,p===d?l.pending=null:(p=p.next,d.next=p,FV(l,p)))}function kT(l,d,p){var v=l.pending;if(l.pending=null,v!==null){v=v.next;do d.status="rejected",d.reason=p,zV(d),d=d.next;while(d!==v)}l.action=null}function zV(l){l=l.listeners;for(var d=0;d<l.length;d++)(0,l[d])()}function HV(l,d){return d}function GV(l,d){if(It){var p=Yt.formState;if(p!==null){e:{var v=ft;if(It){if(xn){t:{for(var x=xn,A=vs;x.nodeType!==8;){if(!A){x=null;break t}if(x=Fo(x.nextSibling),x===null){x=null;break t}}A=x.data,x=A==="F!"||A==="F"?x:null}if(x){xn=Fo(x.nextSibling),v=x.data==="F!";break e}}tc(v)}v=!1}v&&(d=p[0])}}return p=ai(),p.memoizedState=p.baseState=d,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:HV,lastRenderedState:d},p.queue=v,p=cU.bind(null,ft,v),v.dispatch=p,v=DT(!1),A=qT.bind(null,ft,!1,v.queue),v=ai(),x={state:d,dispatch:null,action:l,pending:null},v.queue=x,p=Joe.bind(null,ft,x,A,p),x.dispatch=p,v.memoizedState=l,[d,p,!1]}function jV(l){var d=Fn();return KV(d,$t,l)}function KV(l,d,p){if(d=NT(l,d,HV)[0],l=kv(ua)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var v=zp(d)}catch(z){throw z===Vp?Iv:z}else v=d;d=Fn();var x=d.queue,A=x.dispatch;return p!==d.memoizedState&&(ft.flags|=2048,jf(9,Ov(),Xoe.bind(null,x,p),null)),[v,A,l]}function Xoe(l,d){l.action=d}function WV(l){var d=Fn(),p=$t;if(p!==null)return KV(d,p,l);Fn(),d=d.memoizedState,p=Fn();var v=p.queue.dispatch;return p.memoizedState=l,[d,v,!1]}function jf(l,d,p,v){return l={tag:l,create:p,deps:v,inst:d,next:null},d=ft.updateQueue,d===null&&(d=RT(),ft.updateQueue=d),p=d.lastEffect,p===null?d.lastEffect=l.next=l:(v=p.next,p.next=l,l.next=v,d.lastEffect=l),l}function Ov(){return{destroy:void 0,resource:void 0}}function YV(){return Fn().memoizedState}function Lv(l,d,p,v){var x=ai();v=v===void 0?null:v,ft.flags|=l,x.memoizedState=jf(1|d,Ov(),p,v)}function Hp(l,d,p,v){var x=Fn();v=v===void 0?null:v;var A=x.memoizedState.inst;$t!==null&&v!==null&&xT(v,$t.memoizedState.deps)?x.memoizedState=jf(d,A,p,v):(ft.flags|=l,x.memoizedState=jf(1|d,A,p,v))}function JV(l,d){Lv(8390656,8,l,d)}function XV(l,d){Hp(2048,8,l,d)}function QV(l,d){return Hp(4,2,l,d)}function ZV(l,d){return Hp(4,4,l,d)}function eU(l,d){if(typeof d=="function"){l=l();var p=d(l);return function(){typeof p=="function"?p():d(null)}}if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function tU(l,d,p){p=p!=null?p.concat([l]):null,Hp(4,4,eU.bind(null,d,l),p)}function OT(){}function nU(l,d){var p=Fn();d=d===void 0?null:d;var v=p.memoizedState;return d!==null&&xT(d,v[1])?v[0]:(p.memoizedState=[l,d],l)}function rU(l,d){var p=Fn();d=d===void 0?null:d;var v=p.memoizedState;if(d!==null&&xT(d,v[1]))return v[0];if(v=l(),oc){Oe(!0);try{l()}finally{Oe(!1)}}return p.memoizedState=[v,d],v}function LT(l,d,p){return p===void 0||(xl&1073741824)!==0?l.memoizedState=d:(l.memoizedState=p,l=s4(),ft.lanes|=l,Nl|=l,p)}function iU(l,d,p,v){return wi(p,d)?p:zf.current!==null?(l=LT(l,p,v),wi(l,d)||(sr=!0),l):(xl&42)===0?(sr=!0,l.memoizedState=p):(l=s4(),ft.lanes|=l,Nl|=l,d)}function oU(l,d,p,v,x){var A=te.p;te.p=A!==0&&8>A?A:8;var z=K.T,j={};K.T=j,qT(l,!1,d,p);try{var ee=x(),ce=K.S;if(ce!==null&&ce(j,ee),ee!==null&&typeof ee=="object"&&typeof ee.then=="function"){var we=Koe(ee,v);Gp(l,d,we,Ai(l))}else Gp(l,d,v,Ai(l))}catch(xe){Gp(l,d,{then:function(){},status:"rejected",reason:xe},Ai())}finally{te.p=A,K.T=z}}function Qoe(){}function VT(l,d,p,v){if(l.tag!==5)throw Error(r(476));var x=sU(l).queue;oU(l,x,d,re,p===null?Qoe:function(){return aU(l),p(v)})}function sU(l){var d=l.memoizedState;if(d!==null)return d;d={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:re},next:null};var p={};return d.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:p},next:null},l.memoizedState=d,l=l.alternate,l!==null&&(l.memoizedState=d),d}function aU(l){var d=sU(l).next.queue;Gp(l,d,{},Ai())}function UT(){return kr(um)}function lU(){return Fn().memoizedState}function uU(){return Fn().memoizedState}function Zoe(l){for(var d=l.return;d!==null;){switch(d.tag){case 24:case 3:var p=Ai();l=El(p);var v=Tl(d,l,p);v!==null&&(Ci(v,d,p),qp(v,d,p)),d={cache:pT()},l.payload=d;return}d=d.return}}function ese(l,d,p){var v=Ai();p={lane:v,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null},Vv(l)?fU(d,p):(p=iT(l,d,p,v),p!==null&&(Ci(p,l,v),dU(p,d,v)))}function cU(l,d,p){var v=Ai();Gp(l,d,p,v)}function Gp(l,d,p,v){var x={lane:v,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null};if(Vv(l))fU(d,x);else{var A=l.alternate;if(l.lanes===0&&(A===null||A.lanes===0)&&(A=d.lastRenderedReducer,A!==null))try{var z=d.lastRenderedState,j=A(z,p);if(x.hasEagerState=!0,x.eagerState=j,wi(j,z))return bv(l,d,x,0),Yt===null&&_v(),!1}catch{}finally{}if(p=iT(l,d,x,v),p!==null)return Ci(p,l,v),dU(p,d,v),!0}return!1}function qT(l,d,p,v){if(v={lane:2,revertLane:yx(),action:v,hasEagerState:!1,eagerState:null,next:null},Vv(l)){if(d)throw Error(r(479))}else d=iT(l,p,v,2),d!==null&&Ci(d,l,2)}function Vv(l){var d=l.alternate;return l===ft||d!==null&&d===ft}function fU(l,d){Hf=Nv=!0;var p=l.pending;p===null?d.next=d:(d.next=p.next,p.next=d),l.pending=d}function dU(l,d,p){if((p&4194048)!==0){var v=d.lanes;v&=l.pendingLanes,p|=v,d.lanes=p,us(l,p)}}var Uv={readContext:kr,use:Dv,useCallback:kn,useContext:kn,useEffect:kn,useImperativeHandle:kn,useLayoutEffect:kn,useInsertionEffect:kn,useMemo:kn,useReducer:kn,useRef:kn,useState:kn,useDebugValue:kn,useDeferredValue:kn,useTransition:kn,useSyncExternalStore:kn,useId:kn,useHostTransitionStatus:kn,useFormState:kn,useActionState:kn,useOptimistic:kn,useMemoCache:kn,useCacheRefresh:kn},hU={readContext:kr,use:Dv,useCallback:function(l,d){return ai().memoizedState=[l,d===void 0?null:d],l},useContext:kr,useEffect:JV,useImperativeHandle:function(l,d,p){p=p!=null?p.concat([l]):null,Lv(4194308,4,eU.bind(null,d,l),p)},useLayoutEffect:function(l,d){return Lv(4194308,4,l,d)},useInsertionEffect:function(l,d){Lv(4,2,l,d)},useMemo:function(l,d){var p=ai();d=d===void 0?null:d;var v=l();if(oc){Oe(!0);try{l()}finally{Oe(!1)}}return p.memoizedState=[v,d],v},useReducer:function(l,d,p){var v=ai();if(p!==void 0){var x=p(d);if(oc){Oe(!0);try{p(d)}finally{Oe(!1)}}}else x=d;return v.memoizedState=v.baseState=x,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:x},v.queue=l,l=l.dispatch=ese.bind(null,ft,l),[v.memoizedState,l]},useRef:function(l){var d=ai();return l={current:l},d.memoizedState=l},useState:function(l){l=DT(l);var d=l.queue,p=cU.bind(null,ft,d);return d.dispatch=p,[l.memoizedState,p]},useDebugValue:OT,useDeferredValue:function(l,d){var p=ai();return LT(p,l,d)},useTransition:function(){var l=DT(!1);return l=oU.bind(null,ft,l.queue,!0,!1),ai().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,d,p){var v=ft,x=ai();if(It){if(p===void 0)throw Error(r(407));p=p()}else{if(p=d(),Yt===null)throw Error(r(349));(_t&124)!==0||kV(v,d,p)}x.memoizedState=p;var A={value:p,getSnapshot:d};return x.queue=A,JV(LV.bind(null,v,A,l),[l]),v.flags|=2048,jf(9,Ov(),OV.bind(null,v,A,p,d),null),p},useId:function(){var l=ai(),d=Yt.identifierPrefix;if(It){var p=sa,v=oa;p=(v&~(1<<32-Ye(v)-1)).toString(32)+p,d="«"+d+"R"+p,p=Mv++,0<p&&(d+="H"+p.toString(32)),d+="»"}else p=Woe++,d="«"+d+"r"+p.toString(32)+"»";return l.memoizedState=d},useHostTransitionStatus:UT,useFormState:GV,useActionState:GV,useOptimistic:function(l){var d=ai();d.memoizedState=d.baseState=l;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=p,d=qT.bind(null,ft,!0,p),p.dispatch=d,[l,d]},useMemoCache:PT,useCacheRefresh:function(){return ai().memoizedState=Zoe.bind(null,ft)}},pU={readContext:kr,use:Dv,useCallback:nU,useContext:kr,useEffect:XV,useImperativeHandle:tU,useInsertionEffect:QV,useLayoutEffect:ZV,useMemo:rU,useReducer:kv,useRef:YV,useState:function(){return kv(ua)},useDebugValue:OT,useDeferredValue:function(l,d){var p=Fn();return iU(p,$t.memoizedState,l,d)},useTransition:function(){var l=kv(ua)[0],d=Fn().memoizedState;return[typeof l=="boolean"?l:zp(l),d]},useSyncExternalStore:DV,useId:lU,useHostTransitionStatus:UT,useFormState:jV,useActionState:jV,useOptimistic:function(l,d){var p=Fn();return qV(p,$t,l,d)},useMemoCache:PT,useCacheRefresh:uU},tse={readContext:kr,use:Dv,useCallback:nU,useContext:kr,useEffect:XV,useImperativeHandle:tU,useInsertionEffect:QV,useLayoutEffect:ZV,useMemo:rU,useReducer:MT,useRef:YV,useState:function(){return MT(ua)},useDebugValue:OT,useDeferredValue:function(l,d){var p=Fn();return $t===null?LT(p,l,d):iU(p,$t.memoizedState,l,d)},useTransition:function(){var l=MT(ua)[0],d=Fn().memoizedState;return[typeof l=="boolean"?l:zp(l),d]},useSyncExternalStore:DV,useId:lU,useHostTransitionStatus:UT,useFormState:WV,useActionState:WV,useOptimistic:function(l,d){var p=Fn();return $t!==null?qV(p,$t,l,d):(p.baseState=l,[l,p.queue.dispatch])},useMemoCache:PT,useCacheRefresh:uU},Kf=null,jp=0;function qv(l){var d=jp;return jp+=1,Kf===null&&(Kf=[]),SV(Kf,l,d)}function Kp(l,d){d=d.props.ref,l.ref=d!==void 0?d:null}function Fv(l,d){throw d.$$typeof===h?Error(r(525)):(l=Object.prototype.toString.call(d),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l)))}function mU(l){var d=l._init;return d(l._payload)}function gU(l){function d(se,ie){if(l){var le=se.deletions;le===null?(se.deletions=[ie],se.flags|=16):le.push(ie)}}function p(se,ie){if(!l)return null;for(;ie!==null;)d(se,ie),ie=ie.sibling;return null}function v(se){for(var ie=new Map;se!==null;)se.key!==null?ie.set(se.key,se):ie.set(se.index,se),se=se.sibling;return ie}function x(se,ie){return se=ia(se,ie),se.index=0,se.sibling=null,se}function A(se,ie,le){return se.index=le,l?(le=se.alternate,le!==null?(le=le.index,le<ie?(se.flags|=67108866,ie):le):(se.flags|=67108866,ie)):(se.flags|=1048576,ie)}function z(se){return l&&se.alternate===null&&(se.flags|=67108866),se}function j(se,ie,le,Ee){return ie===null||ie.tag!==6?(ie=sT(le,se.mode,Ee),ie.return=se,ie):(ie=x(ie,le),ie.return=se,ie)}function ee(se,ie,le,Ee){var Ge=le.type;return Ge===T?we(se,ie,le.props.children,Ee,le.key):ie!==null&&(ie.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===L&&mU(Ge)===ie.type)?(ie=x(ie,le.props),Kp(ie,le),ie.return=se,ie):(ie=Ev(le.type,le.key,le.props,null,se.mode,Ee),Kp(ie,le),ie.return=se,ie)}function ce(se,ie,le,Ee){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==le.containerInfo||ie.stateNode.implementation!==le.implementation?(ie=aT(le,se.mode,Ee),ie.return=se,ie):(ie=x(ie,le.children||[]),ie.return=se,ie)}function we(se,ie,le,Ee,Ge){return ie===null||ie.tag!==7?(ie=Xu(le,se.mode,Ee,Ge),ie.return=se,ie):(ie=x(ie,le),ie.return=se,ie)}function xe(se,ie,le){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return ie=sT(""+ie,se.mode,le),ie.return=se,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case g:return le=Ev(ie.type,ie.key,ie.props,null,se.mode,le),Kp(le,ie),le.return=se,le;case _:return ie=aT(ie,se.mode,le),ie.return=se,ie;case L:var Ee=ie._init;return ie=Ee(ie._payload),xe(se,ie,le)}if(X(ie)||$(ie))return ie=Xu(ie,se.mode,le,null),ie.return=se,ie;if(typeof ie.then=="function")return xe(se,qv(ie),le);if(ie.$$typeof===R)return xe(se,Av(se,ie),le);Fv(se,ie)}return null}function de(se,ie,le,Ee){var Ge=ie!==null?ie.key:null;if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return Ge!==null?null:j(se,ie,""+le,Ee);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case g:return le.key===Ge?ee(se,ie,le,Ee):null;case _:return le.key===Ge?ce(se,ie,le,Ee):null;case L:return Ge=le._init,le=Ge(le._payload),de(se,ie,le,Ee)}if(X(le)||$(le))return Ge!==null?null:we(se,ie,le,Ee,null);if(typeof le.then=="function")return de(se,ie,qv(le),Ee);if(le.$$typeof===R)return de(se,ie,Av(se,le),Ee);Fv(se,le)}return null}function he(se,ie,le,Ee,Ge){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint")return se=se.get(le)||null,j(ie,se,""+Ee,Ge);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case g:return se=se.get(Ee.key===null?le:Ee.key)||null,ee(ie,se,Ee,Ge);case _:return se=se.get(Ee.key===null?le:Ee.key)||null,ce(ie,se,Ee,Ge);case L:var dt=Ee._init;return Ee=dt(Ee._payload),he(se,ie,le,Ee,Ge)}if(X(Ee)||$(Ee))return se=se.get(le)||null,we(ie,se,Ee,Ge,null);if(typeof Ee.then=="function")return he(se,ie,le,qv(Ee),Ge);if(Ee.$$typeof===R)return he(se,ie,le,Av(ie,Ee),Ge);Fv(ie,Ee)}return null}function nt(se,ie,le,Ee){for(var Ge=null,dt=null,Je=ie,tt=ie=0,lr=null;Je!==null&&tt<le.length;tt++){Je.index>tt?(lr=Je,Je=null):lr=Je.sibling;var xt=de(se,Je,le[tt],Ee);if(xt===null){Je===null&&(Je=lr);break}l&&Je&&xt.alternate===null&&d(se,Je),ie=A(xt,ie,tt),dt===null?Ge=xt:dt.sibling=xt,dt=xt,Je=lr}if(tt===le.length)return p(se,Je),It&&Zu(se,tt),Ge;if(Je===null){for(;tt<le.length;tt++)Je=xe(se,le[tt],Ee),Je!==null&&(ie=A(Je,ie,tt),dt===null?Ge=Je:dt.sibling=Je,dt=Je);return It&&Zu(se,tt),Ge}for(Je=v(Je);tt<le.length;tt++)lr=he(Je,se,tt,le[tt],Ee),lr!==null&&(l&&lr.alternate!==null&&Je.delete(lr.key===null?tt:lr.key),ie=A(lr,ie,tt),dt===null?Ge=lr:dt.sibling=lr,dt=lr);return l&&Je.forEach(function(Fl){return d(se,Fl)}),It&&Zu(se,tt),Ge}function Ze(se,ie,le,Ee){if(le==null)throw Error(r(151));for(var Ge=null,dt=null,Je=ie,tt=ie=0,lr=null,xt=le.next();Je!==null&&!xt.done;tt++,xt=le.next()){Je.index>tt?(lr=Je,Je=null):lr=Je.sibling;var Fl=de(se,Je,xt.value,Ee);if(Fl===null){Je===null&&(Je=lr);break}l&&Je&&Fl.alternate===null&&d(se,Je),ie=A(Fl,ie,tt),dt===null?Ge=Fl:dt.sibling=Fl,dt=Fl,Je=lr}if(xt.done)return p(se,Je),It&&Zu(se,tt),Ge;if(Je===null){for(;!xt.done;tt++,xt=le.next())xt=xe(se,xt.value,Ee),xt!==null&&(ie=A(xt,ie,tt),dt===null?Ge=xt:dt.sibling=xt,dt=xt);return It&&Zu(se,tt),Ge}for(Je=v(Je);!xt.done;tt++,xt=le.next())xt=he(Je,se,tt,xt.value,Ee),xt!==null&&(l&&xt.alternate!==null&&Je.delete(xt.key===null?tt:xt.key),ie=A(xt,ie,tt),dt===null?Ge=xt:dt.sibling=xt,dt=xt);return l&&Je.forEach(function(nae){return d(se,nae)}),It&&Zu(se,tt),Ge}function Ht(se,ie,le,Ee){if(typeof le=="object"&&le!==null&&le.type===T&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case g:e:{for(var Ge=le.key;ie!==null;){if(ie.key===Ge){if(Ge=le.type,Ge===T){if(ie.tag===7){p(se,ie.sibling),Ee=x(ie,le.props.children),Ee.return=se,se=Ee;break e}}else if(ie.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===L&&mU(Ge)===ie.type){p(se,ie.sibling),Ee=x(ie,le.props),Kp(Ee,le),Ee.return=se,se=Ee;break e}p(se,ie);break}else d(se,ie);ie=ie.sibling}le.type===T?(Ee=Xu(le.props.children,se.mode,Ee,le.key),Ee.return=se,se=Ee):(Ee=Ev(le.type,le.key,le.props,null,se.mode,Ee),Kp(Ee,le),Ee.return=se,se=Ee)}return z(se);case _:e:{for(Ge=le.key;ie!==null;){if(ie.key===Ge)if(ie.tag===4&&ie.stateNode.containerInfo===le.containerInfo&&ie.stateNode.implementation===le.implementation){p(se,ie.sibling),Ee=x(ie,le.children||[]),Ee.return=se,se=Ee;break e}else{p(se,ie);break}else d(se,ie);ie=ie.sibling}Ee=aT(le,se.mode,Ee),Ee.return=se,se=Ee}return z(se);case L:return Ge=le._init,le=Ge(le._payload),Ht(se,ie,le,Ee)}if(X(le))return nt(se,ie,le,Ee);if($(le)){if(Ge=$(le),typeof Ge!="function")throw Error(r(150));return le=Ge.call(le),Ze(se,ie,le,Ee)}if(typeof le.then=="function")return Ht(se,ie,qv(le),Ee);if(le.$$typeof===R)return Ht(se,ie,Av(se,le),Ee);Fv(se,le)}return typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint"?(le=""+le,ie!==null&&ie.tag===6?(p(se,ie.sibling),Ee=x(ie,le),Ee.return=se,se=Ee):(p(se,ie),Ee=sT(le,se.mode,Ee),Ee.return=se,se=Ee),z(se)):p(se,ie)}return function(se,ie,le,Ee){try{jp=0;var Ge=Ht(se,ie,le,Ee);return Kf=null,Ge}catch(Je){if(Je===Vp||Je===Iv)throw Je;var dt=Ei(29,Je,null,se.mode);return dt.lanes=Ee,dt.return=se,dt}finally{}}}var Wf=gU(!0),yU=gU(!1),io=Q(null),_s=null;function Sl(l){var d=l.alternate;fe(Qn,Qn.current&1),fe(io,l),_s===null&&(d===null||zf.current!==null||d.memoizedState!==null)&&(_s=l)}function vU(l){if(l.tag===22){if(fe(Qn,Qn.current),fe(io,l),_s===null){var d=l.alternate;d!==null&&d.memoizedState!==null&&(_s=l)}}else Al()}function Al(){fe(Qn,Qn.current),fe(io,io.current)}function ca(l){Z(io),_s===l&&(_s=null),Z(Qn)}var Qn=Q(0);function Bv(l){for(var d=l;d!==null;){if(d.tag===13){var p=d.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||Rx(p)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}function FT(l,d,p,v){d=l.memoizedState,p=p(v,d),p=p==null?d:f({},d,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}var BT={enqueueSetState:function(l,d,p){l=l._reactInternals;var v=Ai(),x=El(v);x.payload=d,p!=null&&(x.callback=p),d=Tl(l,x,v),d!==null&&(Ci(d,l,v),qp(d,l,v))},enqueueReplaceState:function(l,d,p){l=l._reactInternals;var v=Ai(),x=El(v);x.tag=1,x.payload=d,p!=null&&(x.callback=p),d=Tl(l,x,v),d!==null&&(Ci(d,l,v),qp(d,l,v))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var p=Ai(),v=El(p);v.tag=2,d!=null&&(v.callback=d),d=Tl(l,v,p),d!==null&&(Ci(d,l,p),qp(d,l,p))}};function _U(l,d,p,v,x,A,z){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(v,A,z):d.prototype&&d.prototype.isPureReactComponent?!Rp(p,v)||!Rp(x,A):!0}function bU(l,d,p,v){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(p,v),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(p,v),d.state!==l&&BT.enqueueReplaceState(d,d.state,null)}function sc(l,d){var p=d;if("ref"in d){p={};for(var v in d)v!=="ref"&&(p[v]=d[v])}if(l=l.defaultProps){p===d&&(p=f({},p));for(var x in l)p[x]===void 0&&(p[x]=l[x])}return p}var $v=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function wU(l){$v(l)}function EU(l){console.error(l)}function TU(l){$v(l)}function zv(l,d){try{var p=l.onUncaughtError;p(d.value,{componentStack:d.stack})}catch(v){setTimeout(function(){throw v})}}function xU(l,d,p){try{var v=l.onCaughtError;v(p.value,{componentStack:p.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function $T(l,d,p){return p=El(p),p.tag=3,p.payload={element:null},p.callback=function(){zv(l,d)},p}function SU(l){return l=El(l),l.tag=3,l}function AU(l,d,p,v){var x=p.type.getDerivedStateFromError;if(typeof x=="function"){var A=v.value;l.payload=function(){return x(A)},l.callback=function(){xU(d,p,v)}}var z=p.stateNode;z!==null&&typeof z.componentDidCatch=="function"&&(l.callback=function(){xU(d,p,v),typeof x!="function"&&(Ml===null?Ml=new Set([this]):Ml.add(this));var j=v.stack;this.componentDidCatch(v.value,{componentStack:j!==null?j:""})})}function nse(l,d,p,v,x){if(p.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(d=p.alternate,d!==null&&kp(d,p,x,!0),p=io.current,p!==null){switch(p.tag){case 13:return _s===null?dx():p.alternate===null&&Sn===0&&(Sn=3),p.flags&=-257,p.flags|=65536,p.lanes=x,v===yT?p.flags|=16384:(d=p.updateQueue,d===null?p.updateQueue=new Set([v]):d.add(v),px(l,v,x)),!1;case 22:return p.flags|=65536,v===yT?p.flags|=16384:(d=p.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([v])},p.updateQueue=d):(p=d.retryQueue,p===null?d.retryQueue=new Set([v]):p.add(v)),px(l,v,x)),!1}throw Error(r(435,p.tag))}return px(l,v,x),dx(),!1}if(It)return d=io.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=x,v!==cT&&(l=Error(r(422),{cause:v}),Dp(eo(l,p)))):(v!==cT&&(d=Error(r(423),{cause:v}),Dp(eo(d,p))),l=l.current.alternate,l.flags|=65536,x&=-x,l.lanes|=x,v=eo(v,p),x=$T(l.stateNode,v,x),bT(l,x),Sn!==4&&(Sn=2)),!1;var A=Error(r(520),{cause:v});if(A=eo(A,p),em===null?em=[A]:em.push(A),Sn!==4&&(Sn=2),d===null)return!0;v=eo(v,p),p=d;do{switch(p.tag){case 3:return p.flags|=65536,l=x&-x,p.lanes|=l,l=$T(p.stateNode,v,l),bT(p,l),!1;case 1:if(d=p.type,A=p.stateNode,(p.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Ml===null||!Ml.has(A))))return p.flags|=65536,x&=-x,p.lanes|=x,x=SU(x),AU(x,l,p,v),bT(p,x),!1}p=p.return}while(p!==null);return!1}var CU=Error(r(461)),sr=!1;function _r(l,d,p,v){d.child=l===null?yU(d,null,p,v):Wf(d,l.child,p,v)}function IU(l,d,p,v,x){p=p.render;var A=d.ref;if("ref"in v){var z={};for(var j in v)j!=="ref"&&(z[j]=v[j])}else z=v;return rc(d),v=ST(l,d,p,z,A,x),j=AT(),l!==null&&!sr?(CT(l,d,x),fa(l,d,x)):(It&&j&&lT(d),d.flags|=1,_r(l,d,v,x),d.child)}function RU(l,d,p,v,x){if(l===null){var A=p.type;return typeof A=="function"&&!oT(A)&&A.defaultProps===void 0&&p.compare===null?(d.tag=15,d.type=A,PU(l,d,A,v,x)):(l=Ev(p.type,null,v,d,d.mode,x),l.ref=d.ref,l.return=d,d.child=l)}if(A=l.child,!JT(l,x)){var z=A.memoizedProps;if(p=p.compare,p=p!==null?p:Rp,p(z,v)&&l.ref===d.ref)return fa(l,d,x)}return d.flags|=1,l=ia(A,v),l.ref=d.ref,l.return=d,d.child=l}function PU(l,d,p,v,x){if(l!==null){var A=l.memoizedProps;if(Rp(A,v)&&l.ref===d.ref)if(sr=!1,d.pendingProps=v=A,JT(l,x))(l.flags&131072)!==0&&(sr=!0);else return d.lanes=l.lanes,fa(l,d,x)}return zT(l,d,p,v,x)}function NU(l,d,p){var v=d.pendingProps,x=v.children,A=l!==null?l.memoizedState:null;if(v.mode==="hidden"){if((d.flags&128)!==0){if(v=A!==null?A.baseLanes|p:p,l!==null){for(x=d.child=l.child,A=0;x!==null;)A=A|x.lanes|x.childLanes,x=x.sibling;d.childLanes=A&~v}else d.childLanes=0,d.child=null;return MU(l,d,v,p)}if((p&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},l!==null&&Cv(d,A!==null?A.cachePool:null),A!==null?PV(d,A):ET(),vU(d);else return d.lanes=d.childLanes=536870912,MU(l,d,A!==null?A.baseLanes|p:p,p)}else A!==null?(Cv(d,A.cachePool),PV(d,A),Al(),d.memoizedState=null):(l!==null&&Cv(d,null),ET(),Al());return _r(l,d,x,p),d.child}function MU(l,d,p,v){var x=gT();return x=x===null?null:{parent:Xn._currentValue,pool:x},d.memoizedState={baseLanes:p,cachePool:x},l!==null&&Cv(d,null),ET(),vU(d),l!==null&&kp(l,d,v,!0),null}function Hv(l,d){var p=d.ref;if(p===null)l!==null&&l.ref!==null&&(d.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(r(284));(l===null||l.ref!==p)&&(d.flags|=4194816)}}function zT(l,d,p,v,x){return rc(d),p=ST(l,d,p,v,void 0,x),v=AT(),l!==null&&!sr?(CT(l,d,x),fa(l,d,x)):(It&&v&&lT(d),d.flags|=1,_r(l,d,p,x),d.child)}function DU(l,d,p,v,x,A){return rc(d),d.updateQueue=null,p=MV(d,v,p,x),NV(l),v=AT(),l!==null&&!sr?(CT(l,d,A),fa(l,d,A)):(It&&v&&lT(d),d.flags|=1,_r(l,d,p,A),d.child)}function kU(l,d,p,v,x){if(rc(d),d.stateNode===null){var A=Uf,z=p.contextType;typeof z=="object"&&z!==null&&(A=kr(z)),A=new p(v,A),d.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=BT,d.stateNode=A,A._reactInternals=d,A=d.stateNode,A.props=v,A.state=d.memoizedState,A.refs={},vT(d),z=p.contextType,A.context=typeof z=="object"&&z!==null?kr(z):Uf,A.state=d.memoizedState,z=p.getDerivedStateFromProps,typeof z=="function"&&(FT(d,p,z,v),A.state=d.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(z=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),z!==A.state&&BT.enqueueReplaceState(A,A.state,null),Bp(d,v,A,x),Fp(),A.state=d.memoizedState),typeof A.componentDidMount=="function"&&(d.flags|=4194308),v=!0}else if(l===null){A=d.stateNode;var j=d.memoizedProps,ee=sc(p,j);A.props=ee;var ce=A.context,we=p.contextType;z=Uf,typeof we=="object"&&we!==null&&(z=kr(we));var xe=p.getDerivedStateFromProps;we=typeof xe=="function"||typeof A.getSnapshotBeforeUpdate=="function",j=d.pendingProps!==j,we||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(j||ce!==z)&&bU(d,A,v,z),wl=!1;var de=d.memoizedState;A.state=de,Bp(d,v,A,x),Fp(),ce=d.memoizedState,j||de!==ce||wl?(typeof xe=="function"&&(FT(d,p,xe,v),ce=d.memoizedState),(ee=wl||_U(d,p,ee,v,de,ce,z))?(we||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(d.flags|=4194308)):(typeof A.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=v,d.memoizedState=ce),A.props=v,A.state=ce,A.context=z,v=ee):(typeof A.componentDidMount=="function"&&(d.flags|=4194308),v=!1)}else{A=d.stateNode,_T(l,d),z=d.memoizedProps,we=sc(p,z),A.props=we,xe=d.pendingProps,de=A.context,ce=p.contextType,ee=Uf,typeof ce=="object"&&ce!==null&&(ee=kr(ce)),j=p.getDerivedStateFromProps,(ce=typeof j=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(z!==xe||de!==ee)&&bU(d,A,v,ee),wl=!1,de=d.memoizedState,A.state=de,Bp(d,v,A,x),Fp();var he=d.memoizedState;z!==xe||de!==he||wl||l!==null&&l.dependencies!==null&&Sv(l.dependencies)?(typeof j=="function"&&(FT(d,p,j,v),he=d.memoizedState),(we=wl||_U(d,p,we,v,de,he,ee)||l!==null&&l.dependencies!==null&&Sv(l.dependencies))?(ce||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(v,he,ee),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(v,he,ee)),typeof A.componentDidUpdate=="function"&&(d.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof A.componentDidUpdate!="function"||z===l.memoizedProps&&de===l.memoizedState||(d.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||z===l.memoizedProps&&de===l.memoizedState||(d.flags|=1024),d.memoizedProps=v,d.memoizedState=he),A.props=v,A.state=he,A.context=ee,v=we):(typeof A.componentDidUpdate!="function"||z===l.memoizedProps&&de===l.memoizedState||(d.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||z===l.memoizedProps&&de===l.memoizedState||(d.flags|=1024),v=!1)}return A=v,Hv(l,d),v=(d.flags&128)!==0,A||v?(A=d.stateNode,p=v&&typeof p.getDerivedStateFromError!="function"?null:A.render(),d.flags|=1,l!==null&&v?(d.child=Wf(d,l.child,null,x),d.child=Wf(d,null,p,x)):_r(l,d,p,x),d.memoizedState=A.state,l=d.child):l=fa(l,d,x),l}function OU(l,d,p,v){return Mp(),d.flags|=256,_r(l,d,p,v),d.child}var HT={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function GT(l){return{baseLanes:l,cachePool:EV()}}function jT(l,d,p){return l=l!==null?l.childLanes&~p:0,d&&(l|=oo),l}function LU(l,d,p){var v=d.pendingProps,x=!1,A=(d.flags&128)!==0,z;if((z=A)||(z=l!==null&&l.memoizedState===null?!1:(Qn.current&2)!==0),z&&(x=!0,d.flags&=-129),z=(d.flags&32)!==0,d.flags&=-33,l===null){if(It){if(x?Sl(d):Al(),It){var j=xn,ee;if(ee=j){e:{for(ee=j,j=vs;ee.nodeType!==8;){if(!j){j=null;break e}if(ee=Fo(ee.nextSibling),ee===null){j=null;break e}}j=ee}j!==null?(d.memoizedState={dehydrated:j,treeContext:Qu!==null?{id:oa,overflow:sa}:null,retryLane:536870912,hydrationErrors:null},ee=Ei(18,null,null,0),ee.stateNode=j,ee.return=d,d.child=ee,Kr=d,xn=null,ee=!0):ee=!1}ee||tc(d)}if(j=d.memoizedState,j!==null&&(j=j.dehydrated,j!==null))return Rx(j)?d.lanes=32:d.lanes=536870912,null;ca(d)}return j=v.children,v=v.fallback,x?(Al(),x=d.mode,j=Gv({mode:"hidden",children:j},x),v=Xu(v,x,p,null),j.return=d,v.return=d,j.sibling=v,d.child=j,x=d.child,x.memoizedState=GT(p),x.childLanes=jT(l,z,p),d.memoizedState=HT,v):(Sl(d),KT(d,j))}if(ee=l.memoizedState,ee!==null&&(j=ee.dehydrated,j!==null)){if(A)d.flags&256?(Sl(d),d.flags&=-257,d=WT(l,d,p)):d.memoizedState!==null?(Al(),d.child=l.child,d.flags|=128,d=null):(Al(),x=v.fallback,j=d.mode,v=Gv({mode:"visible",children:v.children},j),x=Xu(x,j,p,null),x.flags|=2,v.return=d,x.return=d,v.sibling=x,d.child=v,Wf(d,l.child,null,p),v=d.child,v.memoizedState=GT(p),v.childLanes=jT(l,z,p),d.memoizedState=HT,d=x);else if(Sl(d),Rx(j)){if(z=j.nextSibling&&j.nextSibling.dataset,z)var ce=z.dgst;z=ce,v=Error(r(419)),v.stack="",v.digest=z,Dp({value:v,source:null,stack:null}),d=WT(l,d,p)}else if(sr||kp(l,d,p,!1),z=(p&l.childLanes)!==0,sr||z){if(z=Yt,z!==null&&(v=p&-p,v=(v&42)!==0?1:ku(v),v=(v&(z.suspendedLanes|p))!==0?0:v,v!==0&&v!==ee.retryLane))throw ee.retryLane=v,Vf(l,v),Ci(z,l,v),CU;j.data==="$?"||dx(),d=WT(l,d,p)}else j.data==="$?"?(d.flags|=192,d.child=l.child,d=null):(l=ee.treeContext,xn=Fo(j.nextSibling),Kr=d,It=!0,ec=null,vs=!1,l!==null&&(no[ro++]=oa,no[ro++]=sa,no[ro++]=Qu,oa=l.id,sa=l.overflow,Qu=d),d=KT(d,v.children),d.flags|=4096);return d}return x?(Al(),x=v.fallback,j=d.mode,ee=l.child,ce=ee.sibling,v=ia(ee,{mode:"hidden",children:v.children}),v.subtreeFlags=ee.subtreeFlags&65011712,ce!==null?x=ia(ce,x):(x=Xu(x,j,p,null),x.flags|=2),x.return=d,v.return=d,v.sibling=x,d.child=v,v=x,x=d.child,j=l.child.memoizedState,j===null?j=GT(p):(ee=j.cachePool,ee!==null?(ce=Xn._currentValue,ee=ee.parent!==ce?{parent:ce,pool:ce}:ee):ee=EV(),j={baseLanes:j.baseLanes|p,cachePool:ee}),x.memoizedState=j,x.childLanes=jT(l,z,p),d.memoizedState=HT,v):(Sl(d),p=l.child,l=p.sibling,p=ia(p,{mode:"visible",children:v.children}),p.return=d,p.sibling=null,l!==null&&(z=d.deletions,z===null?(d.deletions=[l],d.flags|=16):z.push(l)),d.child=p,d.memoizedState=null,p)}function KT(l,d){return d=Gv({mode:"visible",children:d},l.mode),d.return=l,l.child=d}function Gv(l,d){return l=Ei(22,l,null,d),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function WT(l,d,p){return Wf(d,l.child,null,p),l=KT(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function VU(l,d,p){l.lanes|=d;var v=l.alternate;v!==null&&(v.lanes|=d),dT(l.return,d,p)}function YT(l,d,p,v,x){var A=l.memoizedState;A===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:v,tail:p,tailMode:x}:(A.isBackwards=d,A.rendering=null,A.renderingStartTime=0,A.last=v,A.tail=p,A.tailMode=x)}function UU(l,d,p){var v=d.pendingProps,x=v.revealOrder,A=v.tail;if(_r(l,d,v.children,p),v=Qn.current,(v&2)!==0)v=v&1|2,d.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&VU(l,p,d);else if(l.tag===19)VU(l,p,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}v&=1}switch(fe(Qn,v),x){case"forwards":for(p=d.child,x=null;p!==null;)l=p.alternate,l!==null&&Bv(l)===null&&(x=p),p=p.sibling;p=x,p===null?(x=d.child,d.child=null):(x=p.sibling,p.sibling=null),YT(d,!1,x,p,A);break;case"backwards":for(p=null,x=d.child,d.child=null;x!==null;){if(l=x.alternate,l!==null&&Bv(l)===null){d.child=x;break}l=x.sibling,x.sibling=p,p=x,x=l}YT(d,!0,p,null,A);break;case"together":YT(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function fa(l,d,p){if(l!==null&&(d.dependencies=l.dependencies),Nl|=d.lanes,(p&d.childLanes)===0)if(l!==null){if(kp(l,d,p,!1),(p&d.childLanes)===0)return null}else return null;if(l!==null&&d.child!==l.child)throw Error(r(153));if(d.child!==null){for(l=d.child,p=ia(l,l.pendingProps),d.child=p,p.return=d;l.sibling!==null;)l=l.sibling,p=p.sibling=ia(l,l.pendingProps),p.return=d;p.sibling=null}return d.child}function JT(l,d){return(l.lanes&d)!==0?!0:(l=l.dependencies,!!(l!==null&&Sv(l)))}function rse(l,d,p){switch(d.tag){case 3:Ce(d,d.stateNode.containerInfo),bl(d,Xn,l.memoizedState.cache),Mp();break;case 27:case 5:Ie(d);break;case 4:Ce(d,d.stateNode.containerInfo);break;case 10:bl(d,d.type,d.memoizedProps.value);break;case 13:var v=d.memoizedState;if(v!==null)return v.dehydrated!==null?(Sl(d),d.flags|=128,null):(p&d.child.childLanes)!==0?LU(l,d,p):(Sl(d),l=fa(l,d,p),l!==null?l.sibling:null);Sl(d);break;case 19:var x=(l.flags&128)!==0;if(v=(p&d.childLanes)!==0,v||(kp(l,d,p,!1),v=(p&d.childLanes)!==0),x){if(v)return UU(l,d,p);d.flags|=128}if(x=d.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),fe(Qn,Qn.current),v)break;return null;case 22:case 23:return d.lanes=0,NU(l,d,p);case 24:bl(d,Xn,l.memoizedState.cache)}return fa(l,d,p)}function qU(l,d,p){if(l!==null)if(l.memoizedProps!==d.pendingProps)sr=!0;else{if(!JT(l,p)&&(d.flags&128)===0)return sr=!1,rse(l,d,p);sr=(l.flags&131072)!==0}else sr=!1,It&&(d.flags&1048576)!==0&&mV(d,xv,d.index);switch(d.lanes=0,d.tag){case 16:e:{l=d.pendingProps;var v=d.elementType,x=v._init;if(v=x(v._payload),d.type=v,typeof v=="function")oT(v)?(l=sc(v,l),d.tag=1,d=kU(null,d,v,l,p)):(d.tag=0,d=zT(null,d,v,l,p));else{if(v!=null){if(x=v.$$typeof,x===P){d.tag=11,d=IU(null,d,v,l,p);break e}else if(x===D){d.tag=14,d=RU(null,d,v,l,p);break e}}throw d=H(v)||v,Error(r(306,d,""))}}return d;case 0:return zT(l,d,d.type,d.pendingProps,p);case 1:return v=d.type,x=sc(v,d.pendingProps),kU(l,d,v,x,p);case 3:e:{if(Ce(d,d.stateNode.containerInfo),l===null)throw Error(r(387));v=d.pendingProps;var A=d.memoizedState;x=A.element,_T(l,d),Bp(d,v,null,p);var z=d.memoizedState;if(v=z.cache,bl(d,Xn,v),v!==A.cache&&hT(d,[Xn],p,!0),Fp(),v=z.element,A.isDehydrated)if(A={element:v,isDehydrated:!1,cache:z.cache},d.updateQueue.baseState=A,d.memoizedState=A,d.flags&256){d=OU(l,d,v,p);break e}else if(v!==x){x=eo(Error(r(424)),d),Dp(x),d=OU(l,d,v,p);break e}else{switch(l=d.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(xn=Fo(l.firstChild),Kr=d,It=!0,ec=null,vs=!0,p=yU(d,null,v,p),d.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(Mp(),v===x){d=fa(l,d,p);break e}_r(l,d,v,p)}d=d.child}return d;case 26:return Hv(l,d),l===null?(p=z4(d.type,null,d.pendingProps,null))?d.memoizedState=p:It||(p=d.type,l=d.pendingProps,v=o0(oe.current).createElement(p),v[mn]=d,v[Yn]=l,wr(v,p,l),gn(v),d.stateNode=v):d.memoizedState=z4(d.type,l.memoizedProps,d.pendingProps,l.memoizedState),null;case 27:return Ie(d),l===null&&It&&(v=d.stateNode=F4(d.type,d.pendingProps,oe.current),Kr=d,vs=!0,x=xn,Ol(d.type)?(Px=x,xn=Fo(v.firstChild)):xn=x),_r(l,d,d.pendingProps.children,p),Hv(l,d),l===null&&(d.flags|=4194304),d.child;case 5:return l===null&&It&&((x=v=xn)&&(v=Nse(v,d.type,d.pendingProps,vs),v!==null?(d.stateNode=v,Kr=d,xn=Fo(v.firstChild),vs=!1,x=!0):x=!1),x||tc(d)),Ie(d),x=d.type,A=d.pendingProps,z=l!==null?l.memoizedProps:null,v=A.children,Ax(x,A)?v=null:z!==null&&Ax(x,z)&&(d.flags|=32),d.memoizedState!==null&&(x=ST(l,d,Yoe,null,null,p),um._currentValue=x),Hv(l,d),_r(l,d,v,p),d.child;case 6:return l===null&&It&&((l=p=xn)&&(p=Mse(p,d.pendingProps,vs),p!==null?(d.stateNode=p,Kr=d,xn=null,l=!0):l=!1),l||tc(d)),null;case 13:return LU(l,d,p);case 4:return Ce(d,d.stateNode.containerInfo),v=d.pendingProps,l===null?d.child=Wf(d,null,v,p):_r(l,d,v,p),d.child;case 11:return IU(l,d,d.type,d.pendingProps,p);case 7:return _r(l,d,d.pendingProps,p),d.child;case 8:return _r(l,d,d.pendingProps.children,p),d.child;case 12:return _r(l,d,d.pendingProps.children,p),d.child;case 10:return v=d.pendingProps,bl(d,d.type,v.value),_r(l,d,v.children,p),d.child;case 9:return x=d.type._context,v=d.pendingProps.children,rc(d),x=kr(x),v=v(x),d.flags|=1,_r(l,d,v,p),d.child;case 14:return RU(l,d,d.type,d.pendingProps,p);case 15:return PU(l,d,d.type,d.pendingProps,p);case 19:return UU(l,d,p);case 31:return v=d.pendingProps,p=d.mode,v={mode:v.mode,children:v.children},l===null?(p=Gv(v,p),p.ref=d.ref,d.child=p,p.return=d,d=p):(p=ia(l.child,v),p.ref=d.ref,d.child=p,p.return=d,d=p),d;case 22:return NU(l,d,p);case 24:return rc(d),v=kr(Xn),l===null?(x=gT(),x===null&&(x=Yt,A=pT(),x.pooledCache=A,A.refCount++,A!==null&&(x.pooledCacheLanes|=p),x=A),d.memoizedState={parent:v,cache:x},vT(d),bl(d,Xn,x)):((l.lanes&p)!==0&&(_T(l,d),Bp(d,null,null,p),Fp()),x=l.memoizedState,A=d.memoizedState,x.parent!==v?(x={parent:v,cache:v},d.memoizedState=x,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=x),bl(d,Xn,v)):(v=A.cache,bl(d,Xn,v),v!==x.cache&&hT(d,[Xn],p,!0))),_r(l,d,d.pendingProps.children,p),d.child;case 29:throw d.pendingProps}throw Error(r(156,d.tag))}function da(l){l.flags|=4}function FU(l,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!W4(d)){if(d=io.current,d!==null&&((_t&4194048)===_t?_s!==null:(_t&62914560)!==_t&&(_t&536870912)===0||d!==_s))throw Up=yT,TV;l.flags|=8192}}function jv(l,d){d!==null&&(l.flags|=4),l.flags&16384&&(d=l.tag!==22?oi():536870912,l.lanes|=d,Qf|=d)}function Wp(l,d){if(!It)switch(l.tailMode){case"hidden":d=l.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var v=null;p!==null;)p.alternate!==null&&(v=p),p=p.sibling;v===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:v.sibling=null}}function vn(l){var d=l.alternate!==null&&l.alternate.child===l.child,p=0,v=0;if(d)for(var x=l.child;x!==null;)p|=x.lanes|x.childLanes,v|=x.subtreeFlags&65011712,v|=x.flags&65011712,x.return=l,x=x.sibling;else for(x=l.child;x!==null;)p|=x.lanes|x.childLanes,v|=x.subtreeFlags,v|=x.flags,x.return=l,x=x.sibling;return l.subtreeFlags|=v,l.childLanes=p,d}function ise(l,d,p){var v=d.pendingProps;switch(uT(d),d.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vn(d),null;case 1:return vn(d),null;case 3:return p=d.stateNode,v=null,l!==null&&(v=l.memoizedState.cache),d.memoizedState.cache!==v&&(d.flags|=2048),la(Xn),ye(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(l===null||l.child===null)&&(Np(d)?da(d):l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,vV())),vn(d),null;case 26:return p=d.memoizedState,l===null?(da(d),p!==null?(vn(d),FU(d,p)):(vn(d),d.flags&=-16777217)):p?p!==l.memoizedState?(da(d),vn(d),FU(d,p)):(vn(d),d.flags&=-16777217):(l.memoizedProps!==v&&da(d),vn(d),d.flags&=-16777217),null;case 27:Le(d),p=oe.current;var x=d.type;if(l!==null&&d.stateNode!=null)l.memoizedProps!==v&&da(d);else{if(!v){if(d.stateNode===null)throw Error(r(166));return vn(d),null}l=J.current,Np(d)?gV(d):(l=F4(x,v,p),d.stateNode=l,da(d))}return vn(d),null;case 5:if(Le(d),p=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==v&&da(d);else{if(!v){if(d.stateNode===null)throw Error(r(166));return vn(d),null}if(l=J.current,Np(d))gV(d);else{switch(x=o0(oe.current),l){case 1:l=x.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:l=x.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":l=x.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":l=x.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":l=x.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof v.is=="string"?x.createElement("select",{is:v.is}):x.createElement("select"),v.multiple?l.multiple=!0:v.size&&(l.size=v.size);break;default:l=typeof v.is=="string"?x.createElement(p,{is:v.is}):x.createElement(p)}}l[mn]=d,l[Yn]=v;e:for(x=d.child;x!==null;){if(x.tag===5||x.tag===6)l.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===d)break e;for(;x.sibling===null;){if(x.return===null||x.return===d)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}d.stateNode=l;e:switch(wr(l,p,v),p){case"button":case"input":case"select":case"textarea":l=!!v.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&da(d)}}return vn(d),d.flags&=-16777217,null;case 6:if(l&&d.stateNode!=null)l.memoizedProps!==v&&da(d);else{if(typeof v!="string"&&d.stateNode===null)throw Error(r(166));if(l=oe.current,Np(d)){if(l=d.stateNode,p=d.memoizedProps,v=null,x=Kr,x!==null)switch(x.tag){case 27:case 5:v=x.memoizedProps}l[mn]=d,l=!!(l.nodeValue===p||v!==null&&v.suppressHydrationWarning===!0||D4(l.nodeValue,p)),l||tc(d)}else l=o0(l).createTextNode(v),l[mn]=d,d.stateNode=l}return vn(d),null;case 13:if(v=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(x=Np(d),v!==null&&v.dehydrated!==null){if(l===null){if(!x)throw Error(r(318));if(x=d.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(r(317));x[mn]=d}else Mp(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;vn(d),x=!1}else x=vV(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=x),x=!0;if(!x)return d.flags&256?(ca(d),d):(ca(d),null)}if(ca(d),(d.flags&128)!==0)return d.lanes=p,d;if(p=v!==null,l=l!==null&&l.memoizedState!==null,p){v=d.child,x=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(x=v.alternate.memoizedState.cachePool.pool);var A=null;v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(A=v.memoizedState.cachePool.pool),A!==x&&(v.flags|=2048)}return p!==l&&p&&(d.child.flags|=8192),jv(d,d.updateQueue),vn(d),null;case 4:return ye(),l===null&&wx(d.stateNode.containerInfo),vn(d),null;case 10:return la(d.type),vn(d),null;case 19:if(Z(Qn),x=d.memoizedState,x===null)return vn(d),null;if(v=(d.flags&128)!==0,A=x.rendering,A===null)if(v)Wp(x,!1);else{if(Sn!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if(A=Bv(l),A!==null){for(d.flags|=128,Wp(x,!1),l=A.updateQueue,d.updateQueue=l,jv(d,l),d.subtreeFlags=0,l=p,p=d.child;p!==null;)pV(p,l),p=p.sibling;return fe(Qn,Qn.current&1|2),d.child}l=l.sibling}x.tail!==null&&Pe()>Yv&&(d.flags|=128,v=!0,Wp(x,!1),d.lanes=4194304)}else{if(!v)if(l=Bv(A),l!==null){if(d.flags|=128,v=!0,l=l.updateQueue,d.updateQueue=l,jv(d,l),Wp(x,!0),x.tail===null&&x.tailMode==="hidden"&&!A.alternate&&!It)return vn(d),null}else 2*Pe()-x.renderingStartTime>Yv&&p!==536870912&&(d.flags|=128,v=!0,Wp(x,!1),d.lanes=4194304);x.isBackwards?(A.sibling=d.child,d.child=A):(l=x.last,l!==null?l.sibling=A:d.child=A,x.last=A)}return x.tail!==null?(d=x.tail,x.rendering=d,x.tail=d.sibling,x.renderingStartTime=Pe(),d.sibling=null,l=Qn.current,fe(Qn,v?l&1|2:l&1),d):(vn(d),null);case 22:case 23:return ca(d),TT(),v=d.memoizedState!==null,l!==null?l.memoizedState!==null!==v&&(d.flags|=8192):v&&(d.flags|=8192),v?(p&536870912)!==0&&(d.flags&128)===0&&(vn(d),d.subtreeFlags&6&&(d.flags|=8192)):vn(d),p=d.updateQueue,p!==null&&jv(d,p.retryQueue),p=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),v=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(v=d.memoizedState.cachePool.pool),v!==p&&(d.flags|=2048),l!==null&&Z(ic),null;case 24:return p=null,l!==null&&(p=l.memoizedState.cache),d.memoizedState.cache!==p&&(d.flags|=2048),la(Xn),vn(d),null;case 25:return null;case 30:return null}throw Error(r(156,d.tag))}function ose(l,d){switch(uT(d),d.tag){case 1:return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return la(Xn),ye(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 26:case 27:case 5:return Le(d),null;case 13:if(ca(d),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(r(340));Mp()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return Z(Qn),null;case 4:return ye(),null;case 10:return la(d.type),null;case 22:case 23:return ca(d),TT(),l!==null&&Z(ic),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 24:return la(Xn),null;case 25:return null;default:return null}}function BU(l,d){switch(uT(d),d.tag){case 3:la(Xn),ye();break;case 26:case 27:case 5:Le(d);break;case 4:ye();break;case 13:ca(d);break;case 19:Z(Qn);break;case 10:la(d.type);break;case 22:case 23:ca(d),TT(),l!==null&&Z(ic);break;case 24:la(Xn)}}function Yp(l,d){try{var p=d.updateQueue,v=p!==null?p.lastEffect:null;if(v!==null){var x=v.next;p=x;do{if((p.tag&l)===l){v=void 0;var A=p.create,z=p.inst;v=A(),z.destroy=v}p=p.next}while(p!==x)}}catch(j){jt(d,d.return,j)}}function Cl(l,d,p){try{var v=d.updateQueue,x=v!==null?v.lastEffect:null;if(x!==null){var A=x.next;v=A;do{if((v.tag&l)===l){var z=v.inst,j=z.destroy;if(j!==void 0){z.destroy=void 0,x=d;var ee=p,ce=j;try{ce()}catch(we){jt(x,ee,we)}}}v=v.next}while(v!==A)}}catch(we){jt(d,d.return,we)}}function $U(l){var d=l.updateQueue;if(d!==null){var p=l.stateNode;try{RV(d,p)}catch(v){jt(l,l.return,v)}}}function zU(l,d,p){p.props=sc(l.type,l.memoizedProps),p.state=l.memoizedState;try{p.componentWillUnmount()}catch(v){jt(l,d,v)}}function Jp(l,d){try{var p=l.ref;if(p!==null){switch(l.tag){case 26:case 27:case 5:var v=l.stateNode;break;case 30:v=l.stateNode;break;default:v=l.stateNode}typeof p=="function"?l.refCleanup=p(v):p.current=v}}catch(x){jt(l,d,x)}}function bs(l,d){var p=l.ref,v=l.refCleanup;if(p!==null)if(typeof v=="function")try{v()}catch(x){jt(l,d,x)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(x){jt(l,d,x)}else p.current=null}function HU(l){var d=l.type,p=l.memoizedProps,v=l.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":p.autoFocus&&v.focus();break e;case"img":p.src?v.src=p.src:p.srcSet&&(v.srcset=p.srcSet)}}catch(x){jt(l,l.return,x)}}function XT(l,d,p){try{var v=l.stateNode;Ase(v,l.type,p,d),v[Yn]=d}catch(x){jt(l,l.return,x)}}function GU(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Ol(l.type)||l.tag===4}function QT(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||GU(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Ol(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function ZT(l,d,p){var v=l.tag;if(v===5||v===6)l=l.stateNode,d?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(l,d):(d=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,d.appendChild(l),p=p._reactRootContainer,p!=null||d.onclick!==null||(d.onclick=i0));else if(v!==4&&(v===27&&Ol(l.type)&&(p=l.stateNode,d=null),l=l.child,l!==null))for(ZT(l,d,p),l=l.sibling;l!==null;)ZT(l,d,p),l=l.sibling}function Kv(l,d,p){var v=l.tag;if(v===5||v===6)l=l.stateNode,d?p.insertBefore(l,d):p.appendChild(l);else if(v!==4&&(v===27&&Ol(l.type)&&(p=l.stateNode),l=l.child,l!==null))for(Kv(l,d,p),l=l.sibling;l!==null;)Kv(l,d,p),l=l.sibling}function jU(l){var d=l.stateNode,p=l.memoizedProps;try{for(var v=l.type,x=d.attributes;x.length;)d.removeAttributeNode(x[0]);wr(d,v,p),d[mn]=l,d[Yn]=p}catch(A){jt(l,l.return,A)}}var ha=!1,On=!1,ex=!1,KU=typeof WeakSet=="function"?WeakSet:Set,ar=null;function sse(l,d){if(l=l.containerInfo,xx=f0,l=iV(l),QE(l)){if("selectionStart"in l)var p={start:l.selectionStart,end:l.selectionEnd};else e:{p=(p=l.ownerDocument)&&p.defaultView||window;var v=p.getSelection&&p.getSelection();if(v&&v.rangeCount!==0){p=v.anchorNode;var x=v.anchorOffset,A=v.focusNode;v=v.focusOffset;try{p.nodeType,A.nodeType}catch{p=null;break e}var z=0,j=-1,ee=-1,ce=0,we=0,xe=l,de=null;t:for(;;){for(var he;xe!==p||x!==0&&xe.nodeType!==3||(j=z+x),xe!==A||v!==0&&xe.nodeType!==3||(ee=z+v),xe.nodeType===3&&(z+=xe.nodeValue.length),(he=xe.firstChild)!==null;)de=xe,xe=he;for(;;){if(xe===l)break t;if(de===p&&++ce===x&&(j=z),de===A&&++we===v&&(ee=z),(he=xe.nextSibling)!==null)break;xe=de,de=xe.parentNode}xe=he}p=j===-1||ee===-1?null:{start:j,end:ee}}else p=null}p=p||{start:0,end:0}}else p=null;for(Sx={focusedElem:l,selectionRange:p},f0=!1,ar=d;ar!==null;)if(d=ar,l=d.child,(d.subtreeFlags&1024)!==0&&l!==null)l.return=d,ar=l;else for(;ar!==null;){switch(d=ar,A=d.alternate,l=d.flags,d.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&A!==null){l=void 0,p=d,x=A.memoizedProps,A=A.memoizedState,v=p.stateNode;try{var nt=sc(p.type,x,p.elementType===p.type);l=v.getSnapshotBeforeUpdate(nt,A),v.__reactInternalSnapshotBeforeUpdate=l}catch(Ze){jt(p,p.return,Ze)}}break;case 3:if((l&1024)!==0){if(l=d.stateNode.containerInfo,p=l.nodeType,p===9)Ix(l);else if(p===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":Ix(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=d.sibling,l!==null){l.return=d.return,ar=l;break}ar=d.return}}function WU(l,d,p){var v=p.flags;switch(p.tag){case 0:case 11:case 15:Il(l,p),v&4&&Yp(5,p);break;case 1:if(Il(l,p),v&4)if(l=p.stateNode,d===null)try{l.componentDidMount()}catch(z){jt(p,p.return,z)}else{var x=sc(p.type,d.memoizedProps);d=d.memoizedState;try{l.componentDidUpdate(x,d,l.__reactInternalSnapshotBeforeUpdate)}catch(z){jt(p,p.return,z)}}v&64&&$U(p),v&512&&Jp(p,p.return);break;case 3:if(Il(l,p),v&64&&(l=p.updateQueue,l!==null)){if(d=null,p.child!==null)switch(p.child.tag){case 27:case 5:d=p.child.stateNode;break;case 1:d=p.child.stateNode}try{RV(l,d)}catch(z){jt(p,p.return,z)}}break;case 27:d===null&&v&4&&jU(p);case 26:case 5:Il(l,p),d===null&&v&4&&HU(p),v&512&&Jp(p,p.return);break;case 12:Il(l,p);break;case 13:Il(l,p),v&4&&XU(l,p),v&64&&(l=p.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(p=mse.bind(null,p),Dse(l,p))));break;case 22:if(v=p.memoizedState!==null||ha,!v){d=d!==null&&d.memoizedState!==null||On,x=ha;var A=On;ha=v,(On=d)&&!A?Rl(l,p,(p.subtreeFlags&8772)!==0):Il(l,p),ha=x,On=A}break;case 30:break;default:Il(l,p)}}function YU(l){var d=l.alternate;d!==null&&(l.alternate=null,YU(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&ul(d)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var ln=null,li=!1;function pa(l,d,p){for(p=p.child;p!==null;)JU(l,d,p),p=p.sibling}function JU(l,d,p){if(Ue&&typeof Ue.onCommitFiberUnmount=="function")try{Ue.onCommitFiberUnmount(ke,p)}catch{}switch(p.tag){case 26:On||bs(p,d),pa(l,d,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:On||bs(p,d);var v=ln,x=li;Ol(p.type)&&(ln=p.stateNode,li=!1),pa(l,d,p),om(p.stateNode),ln=v,li=x;break;case 5:On||bs(p,d);case 6:if(v=ln,x=li,ln=null,pa(l,d,p),ln=v,li=x,ln!==null)if(li)try{(ln.nodeType===9?ln.body:ln.nodeName==="HTML"?ln.ownerDocument.body:ln).removeChild(p.stateNode)}catch(A){jt(p,d,A)}else try{ln.removeChild(p.stateNode)}catch(A){jt(p,d,A)}break;case 18:ln!==null&&(li?(l=ln,U4(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,p.stateNode),hm(l)):U4(ln,p.stateNode));break;case 4:v=ln,x=li,ln=p.stateNode.containerInfo,li=!0,pa(l,d,p),ln=v,li=x;break;case 0:case 11:case 14:case 15:On||Cl(2,p,d),On||Cl(4,p,d),pa(l,d,p);break;case 1:On||(bs(p,d),v=p.stateNode,typeof v.componentWillUnmount=="function"&&zU(p,d,v)),pa(l,d,p);break;case 21:pa(l,d,p);break;case 22:On=(v=On)||p.memoizedState!==null,pa(l,d,p),On=v;break;default:pa(l,d,p)}}function XU(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{hm(l)}catch(p){jt(d,d.return,p)}}function ase(l){switch(l.tag){case 13:case 19:var d=l.stateNode;return d===null&&(d=l.stateNode=new KU),d;case 22:return l=l.stateNode,d=l._retryCache,d===null&&(d=l._retryCache=new KU),d;default:throw Error(r(435,l.tag))}}function tx(l,d){var p=ase(l);d.forEach(function(v){var x=gse.bind(null,l,v);p.has(v)||(p.add(v),v.then(x,x))})}function Ti(l,d){var p=d.deletions;if(p!==null)for(var v=0;v<p.length;v++){var x=p[v],A=l,z=d,j=z;e:for(;j!==null;){switch(j.tag){case 27:if(Ol(j.type)){ln=j.stateNode,li=!1;break e}break;case 5:ln=j.stateNode,li=!1;break e;case 3:case 4:ln=j.stateNode.containerInfo,li=!0;break e}j=j.return}if(ln===null)throw Error(r(160));JU(A,z,x),ln=null,li=!1,A=x.alternate,A!==null&&(A.return=null),x.return=null}if(d.subtreeFlags&13878)for(d=d.child;d!==null;)QU(d,l),d=d.sibling}var qo=null;function QU(l,d){var p=l.alternate,v=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Ti(d,l),xi(l),v&4&&(Cl(3,l,l.return),Yp(3,l),Cl(5,l,l.return));break;case 1:Ti(d,l),xi(l),v&512&&(On||p===null||bs(p,p.return)),v&64&&ha&&(l=l.updateQueue,l!==null&&(v=l.callbacks,v!==null&&(p=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=p===null?v:p.concat(v))));break;case 26:var x=qo;if(Ti(d,l),xi(l),v&512&&(On||p===null||bs(p,p.return)),v&4){var A=p!==null?p.memoizedState:null;if(v=l.memoizedState,p===null)if(v===null)if(l.stateNode===null){e:{v=l.type,p=l.memoizedProps,x=x.ownerDocument||x;t:switch(v){case"title":A=x.getElementsByTagName("title")[0],(!A||A[cs]||A[mn]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=x.createElement(v),x.head.insertBefore(A,x.querySelector("head > title"))),wr(A,v,p),A[mn]=l,gn(A),v=A;break e;case"link":var z=j4("link","href",x).get(v+(p.href||""));if(z){for(var j=0;j<z.length;j++)if(A=z[j],A.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&A.getAttribute("rel")===(p.rel==null?null:p.rel)&&A.getAttribute("title")===(p.title==null?null:p.title)&&A.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){z.splice(j,1);break t}}A=x.createElement(v),wr(A,v,p),x.head.appendChild(A);break;case"meta":if(z=j4("meta","content",x).get(v+(p.content||""))){for(j=0;j<z.length;j++)if(A=z[j],A.getAttribute("content")===(p.content==null?null:""+p.content)&&A.getAttribute("name")===(p.name==null?null:p.name)&&A.getAttribute("property")===(p.property==null?null:p.property)&&A.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&A.getAttribute("charset")===(p.charSet==null?null:p.charSet)){z.splice(j,1);break t}}A=x.createElement(v),wr(A,v,p),x.head.appendChild(A);break;default:throw Error(r(468,v))}A[mn]=l,gn(A),v=A}l.stateNode=v}else K4(x,l.type,l.stateNode);else l.stateNode=G4(x,v,l.memoizedProps);else A!==v?(A===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):A.count--,v===null?K4(x,l.type,l.stateNode):G4(x,v,l.memoizedProps)):v===null&&l.stateNode!==null&&XT(l,l.memoizedProps,p.memoizedProps)}break;case 27:Ti(d,l),xi(l),v&512&&(On||p===null||bs(p,p.return)),p!==null&&v&4&&XT(l,l.memoizedProps,p.memoizedProps);break;case 5:if(Ti(d,l),xi(l),v&512&&(On||p===null||bs(p,p.return)),l.flags&32){x=l.stateNode;try{Qi(x,"")}catch(he){jt(l,l.return,he)}}v&4&&l.stateNode!=null&&(x=l.memoizedProps,XT(l,x,p!==null?p.memoizedProps:x)),v&1024&&(ex=!0);break;case 6:if(Ti(d,l),xi(l),v&4){if(l.stateNode===null)throw Error(r(162));v=l.memoizedProps,p=l.stateNode;try{p.nodeValue=v}catch(he){jt(l,l.return,he)}}break;case 3:if(l0=null,x=qo,qo=s0(d.containerInfo),Ti(d,l),qo=x,xi(l),v&4&&p!==null&&p.memoizedState.isDehydrated)try{hm(d.containerInfo)}catch(he){jt(l,l.return,he)}ex&&(ex=!1,ZU(l));break;case 4:v=qo,qo=s0(l.stateNode.containerInfo),Ti(d,l),xi(l),qo=v;break;case 12:Ti(d,l),xi(l);break;case 13:Ti(d,l),xi(l),l.child.flags&8192&&l.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(ax=Pe()),v&4&&(v=l.updateQueue,v!==null&&(l.updateQueue=null,tx(l,v)));break;case 22:x=l.memoizedState!==null;var ee=p!==null&&p.memoizedState!==null,ce=ha,we=On;if(ha=ce||x,On=we||ee,Ti(d,l),On=we,ha=ce,xi(l),v&8192)e:for(d=l.stateNode,d._visibility=x?d._visibility&-2:d._visibility|1,x&&(p===null||ee||ha||On||ac(l)),p=null,d=l;;){if(d.tag===5||d.tag===26){if(p===null){ee=p=d;try{if(A=ee.stateNode,x)z=A.style,typeof z.setProperty=="function"?z.setProperty("display","none","important"):z.display="none";else{j=ee.stateNode;var xe=ee.memoizedProps.style,de=xe!=null&&xe.hasOwnProperty("display")?xe.display:null;j.style.display=de==null||typeof de=="boolean"?"":(""+de).trim()}}catch(he){jt(ee,ee.return,he)}}}else if(d.tag===6){if(p===null){ee=d;try{ee.stateNode.nodeValue=x?"":ee.memoizedProps}catch(he){jt(ee,ee.return,he)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===l)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break e;for(;d.sibling===null;){if(d.return===null||d.return===l)break e;p===d&&(p=null),d=d.return}p===d&&(p=null),d.sibling.return=d.return,d=d.sibling}v&4&&(v=l.updateQueue,v!==null&&(p=v.retryQueue,p!==null&&(v.retryQueue=null,tx(l,p))));break;case 19:Ti(d,l),xi(l),v&4&&(v=l.updateQueue,v!==null&&(l.updateQueue=null,tx(l,v)));break;case 30:break;case 21:break;default:Ti(d,l),xi(l)}}function xi(l){var d=l.flags;if(d&2){try{for(var p,v=l.return;v!==null;){if(GU(v)){p=v;break}v=v.return}if(p==null)throw Error(r(160));switch(p.tag){case 27:var x=p.stateNode,A=QT(l);Kv(l,A,x);break;case 5:var z=p.stateNode;p.flags&32&&(Qi(z,""),p.flags&=-33);var j=QT(l);Kv(l,j,z);break;case 3:case 4:var ee=p.stateNode.containerInfo,ce=QT(l);ZT(l,ce,ee);break;default:throw Error(r(161))}}catch(we){jt(l,l.return,we)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function ZU(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var d=l;ZU(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),l=l.sibling}}function Il(l,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)WU(l,d.alternate,d),d=d.sibling}function ac(l){for(l=l.child;l!==null;){var d=l;switch(d.tag){case 0:case 11:case 14:case 15:Cl(4,d,d.return),ac(d);break;case 1:bs(d,d.return);var p=d.stateNode;typeof p.componentWillUnmount=="function"&&zU(d,d.return,p),ac(d);break;case 27:om(d.stateNode);case 26:case 5:bs(d,d.return),ac(d);break;case 22:d.memoizedState===null&&ac(d);break;case 30:ac(d);break;default:ac(d)}l=l.sibling}}function Rl(l,d,p){for(p=p&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var v=d.alternate,x=l,A=d,z=A.flags;switch(A.tag){case 0:case 11:case 15:Rl(x,A,p),Yp(4,A);break;case 1:if(Rl(x,A,p),v=A,x=v.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(ce){jt(v,v.return,ce)}if(v=A,x=v.updateQueue,x!==null){var j=v.stateNode;try{var ee=x.shared.hiddenCallbacks;if(ee!==null)for(x.shared.hiddenCallbacks=null,x=0;x<ee.length;x++)IV(ee[x],j)}catch(ce){jt(v,v.return,ce)}}p&&z&64&&$U(A),Jp(A,A.return);break;case 27:jU(A);case 26:case 5:Rl(x,A,p),p&&v===null&&z&4&&HU(A),Jp(A,A.return);break;case 12:Rl(x,A,p);break;case 13:Rl(x,A,p),p&&z&4&&XU(x,A);break;case 22:A.memoizedState===null&&Rl(x,A,p),Jp(A,A.return);break;case 30:break;default:Rl(x,A,p)}d=d.sibling}}function nx(l,d){var p=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),l=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(l=d.memoizedState.cachePool.pool),l!==p&&(l!=null&&l.refCount++,p!=null&&Op(p))}function rx(l,d){l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&Op(l))}function ws(l,d,p,v){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)e4(l,d,p,v),d=d.sibling}function e4(l,d,p,v){var x=d.flags;switch(d.tag){case 0:case 11:case 15:ws(l,d,p,v),x&2048&&Yp(9,d);break;case 1:ws(l,d,p,v);break;case 3:ws(l,d,p,v),x&2048&&(l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&Op(l)));break;case 12:if(x&2048){ws(l,d,p,v),l=d.stateNode;try{var A=d.memoizedProps,z=A.id,j=A.onPostCommit;typeof j=="function"&&j(z,d.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(ee){jt(d,d.return,ee)}}else ws(l,d,p,v);break;case 13:ws(l,d,p,v);break;case 23:break;case 22:A=d.stateNode,z=d.alternate,d.memoizedState!==null?A._visibility&2?ws(l,d,p,v):Xp(l,d):A._visibility&2?ws(l,d,p,v):(A._visibility|=2,Yf(l,d,p,v,(d.subtreeFlags&10256)!==0)),x&2048&&nx(z,d);break;case 24:ws(l,d,p,v),x&2048&&rx(d.alternate,d);break;default:ws(l,d,p,v)}}function Yf(l,d,p,v,x){for(x=x&&(d.subtreeFlags&10256)!==0,d=d.child;d!==null;){var A=l,z=d,j=p,ee=v,ce=z.flags;switch(z.tag){case 0:case 11:case 15:Yf(A,z,j,ee,x),Yp(8,z);break;case 23:break;case 22:var we=z.stateNode;z.memoizedState!==null?we._visibility&2?Yf(A,z,j,ee,x):Xp(A,z):(we._visibility|=2,Yf(A,z,j,ee,x)),x&&ce&2048&&nx(z.alternate,z);break;case 24:Yf(A,z,j,ee,x),x&&ce&2048&&rx(z.alternate,z);break;default:Yf(A,z,j,ee,x)}d=d.sibling}}function Xp(l,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var p=l,v=d,x=v.flags;switch(v.tag){case 22:Xp(p,v),x&2048&&nx(v.alternate,v);break;case 24:Xp(p,v),x&2048&&rx(v.alternate,v);break;default:Xp(p,v)}d=d.sibling}}var Qp=8192;function Jf(l){if(l.subtreeFlags&Qp)for(l=l.child;l!==null;)t4(l),l=l.sibling}function t4(l){switch(l.tag){case 26:Jf(l),l.flags&Qp&&l.memoizedState!==null&&jse(qo,l.memoizedState,l.memoizedProps);break;case 5:Jf(l);break;case 3:case 4:var d=qo;qo=s0(l.stateNode.containerInfo),Jf(l),qo=d;break;case 22:l.memoizedState===null&&(d=l.alternate,d!==null&&d.memoizedState!==null?(d=Qp,Qp=16777216,Jf(l),Qp=d):Jf(l));break;default:Jf(l)}}function n4(l){var d=l.alternate;if(d!==null&&(l=d.child,l!==null)){d.child=null;do d=l.sibling,l.sibling=null,l=d;while(l!==null)}}function Zp(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var p=0;p<d.length;p++){var v=d[p];ar=v,i4(v,l)}n4(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)r4(l),l=l.sibling}function r4(l){switch(l.tag){case 0:case 11:case 15:Zp(l),l.flags&2048&&Cl(9,l,l.return);break;case 3:Zp(l);break;case 12:Zp(l);break;case 22:var d=l.stateNode;l.memoizedState!==null&&d._visibility&2&&(l.return===null||l.return.tag!==13)?(d._visibility&=-3,Wv(l)):Zp(l);break;default:Zp(l)}}function Wv(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var p=0;p<d.length;p++){var v=d[p];ar=v,i4(v,l)}n4(l)}for(l=l.child;l!==null;){switch(d=l,d.tag){case 0:case 11:case 15:Cl(8,d,d.return),Wv(d);break;case 22:p=d.stateNode,p._visibility&2&&(p._visibility&=-3,Wv(d));break;default:Wv(d)}l=l.sibling}}function i4(l,d){for(;ar!==null;){var p=ar;switch(p.tag){case 0:case 11:case 15:Cl(8,p,d);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var v=p.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:Op(p.memoizedState.cache)}if(v=p.child,v!==null)v.return=p,ar=v;else e:for(p=l;ar!==null;){v=ar;var x=v.sibling,A=v.return;if(YU(v),v===p){ar=null;break e}if(x!==null){x.return=A,ar=x;break e}ar=A}}}var lse={getCacheForType:function(l){var d=kr(Xn),p=d.data.get(l);return p===void 0&&(p=l(),d.data.set(l,p)),p}},use=typeof WeakMap=="function"?WeakMap:Map,kt=0,Yt=null,pt=null,_t=0,Ot=0,Si=null,Pl=!1,Xf=!1,ix=!1,ma=0,Sn=0,Nl=0,lc=0,ox=0,oo=0,Qf=0,em=null,ui=null,sx=!1,ax=0,Yv=1/0,Jv=null,Ml=null,br=0,Dl=null,Zf=null,ed=0,lx=0,ux=null,o4=null,tm=0,cx=null;function Ai(){if((kt&2)!==0&&_t!==0)return _t&-_t;if(K.T!==null){var l=Bf;return l!==0?l:yx()}return Po()}function s4(){oo===0&&(oo=(_t&536870912)===0||It?Ws():536870912);var l=io.current;return l!==null&&(l.flags|=32),oo}function Ci(l,d,p){(l===Yt&&(Ot===2||Ot===9)||l.cancelPendingCommit!==null)&&(td(l,0),kl(l,_t,oo,!1)),an(l,p),((kt&2)===0||l!==Yt)&&(l===Yt&&((kt&2)===0&&(lc|=p),Sn===4&&kl(l,_t,oo,!1)),Es(l))}function a4(l,d,p){if((kt&6)!==0)throw Error(r(327));var v=!p&&(d&124)===0&&(d&l.expiredLanes)===0||Wn(l,d),x=v?dse(l,d):hx(l,d,!0),A=v;do{if(x===0){Xf&&!v&&kl(l,d,0,!1);break}else{if(p=l.current.alternate,A&&!cse(p)){x=hx(l,d,!1),A=!1;continue}if(x===2){if(A=d,l.errorRecoveryDisabledLanes&A)var z=0;else z=l.pendingLanes&-536870913,z=z!==0?z:z&536870912?536870912:0;if(z!==0){d=z;e:{var j=l;x=em;var ee=j.current.memoizedState.isDehydrated;if(ee&&(td(j,z).flags|=256),z=hx(j,z,!1),z!==2){if(ix&&!ee){j.errorRecoveryDisabledLanes|=A,lc|=A,x=4;break e}A=ui,ui=x,A!==null&&(ui===null?ui=A:ui.push.apply(ui,A))}x=z}if(A=!1,x!==2)continue}}if(x===1){td(l,0),kl(l,d,0,!0);break}e:{switch(v=l,A=x,A){case 0:case 1:throw Error(r(345));case 4:if((d&4194048)!==d)break;case 6:kl(v,d,oo,!Pl);break e;case 2:ui=null;break;case 3:case 5:break;default:throw Error(r(329))}if((d&62914560)===d&&(x=ax+300-Pe(),10<x)){if(kl(v,d,oo,!Pl),Tn(v,0,!0)!==0)break e;v.timeoutHandle=L4(l4.bind(null,v,p,ui,Jv,sx,d,oo,lc,Qf,Pl,A,2,-0,0),x);break e}l4(v,p,ui,Jv,sx,d,oo,lc,Qf,Pl,A,0,-0,0)}}break}while(!0);Es(l)}function l4(l,d,p,v,x,A,z,j,ee,ce,we,xe,de,he){if(l.timeoutHandle=-1,xe=d.subtreeFlags,(xe&8192||(xe&16785408)===16785408)&&(lm={stylesheets:null,count:0,unsuspend:Gse},t4(d),xe=Kse(),xe!==null)){l.cancelPendingCommit=xe(m4.bind(null,l,d,A,p,v,x,z,j,ee,we,1,de,he)),kl(l,A,z,!ce);return}m4(l,d,A,p,v,x,z,j,ee)}function cse(l){for(var d=l;;){var p=d.tag;if((p===0||p===11||p===15)&&d.flags&16384&&(p=d.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var v=0;v<p.length;v++){var x=p[v],A=x.getSnapshot;x=x.value;try{if(!wi(A(),x))return!1}catch{return!1}}if(p=d.child,d.subtreeFlags&16384&&p!==null)p.return=d,d=p;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function kl(l,d,p,v){d&=~ox,d&=~lc,l.suspendedLanes|=d,l.pingedLanes&=~d,v&&(l.warmLanes|=d),v=l.expirationTimes;for(var x=d;0<x;){var A=31-Ye(x),z=1<<A;v[A]=-1,x&=~z}p!==0&&ls(l,p,d)}function Xv(){return(kt&6)===0?(nm(0),!1):!0}function fx(){if(pt!==null){if(Ot===0)var l=pt.return;else l=pt,aa=nc=null,IT(l),Kf=null,jp=0,l=pt;for(;l!==null;)BU(l.alternate,l),l=l.return;pt=null}}function td(l,d){var p=l.timeoutHandle;p!==-1&&(l.timeoutHandle=-1,Ise(p)),p=l.cancelPendingCommit,p!==null&&(l.cancelPendingCommit=null,p()),fx(),Yt=l,pt=p=ia(l.current,null),_t=d,Ot=0,Si=null,Pl=!1,Xf=Wn(l,d),ix=!1,Qf=oo=ox=lc=Nl=Sn=0,ui=em=null,sx=!1,(d&8)!==0&&(d|=d&32);var v=l.entangledLanes;if(v!==0)for(l=l.entanglements,v&=d;0<v;){var x=31-Ye(v),A=1<<x;d|=l[x],v&=~A}return ma=d,_v(),p}function u4(l,d){ft=null,K.H=Uv,d===Vp||d===Iv?(d=AV(),Ot=3):d===TV?(d=AV(),Ot=4):Ot=d===CU?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,Si=d,pt===null&&(Sn=1,zv(l,eo(d,l.current)))}function c4(){var l=K.H;return K.H=Uv,l===null?Uv:l}function f4(){var l=K.A;return K.A=lse,l}function dx(){Sn=4,Pl||(_t&4194048)!==_t&&io.current!==null||(Xf=!0),(Nl&134217727)===0&&(lc&134217727)===0||Yt===null||kl(Yt,_t,oo,!1)}function hx(l,d,p){var v=kt;kt|=2;var x=c4(),A=f4();(Yt!==l||_t!==d)&&(Jv=null,td(l,d)),d=!1;var z=Sn;e:do try{if(Ot!==0&&pt!==null){var j=pt,ee=Si;switch(Ot){case 8:fx(),z=6;break e;case 3:case 2:case 9:case 6:io.current===null&&(d=!0);var ce=Ot;if(Ot=0,Si=null,nd(l,j,ee,ce),p&&Xf){z=0;break e}break;default:ce=Ot,Ot=0,Si=null,nd(l,j,ee,ce)}}fse(),z=Sn;break}catch(we){u4(l,we)}while(!0);return d&&l.shellSuspendCounter++,aa=nc=null,kt=v,K.H=x,K.A=A,pt===null&&(Yt=null,_t=0,_v()),z}function fse(){for(;pt!==null;)d4(pt)}function dse(l,d){var p=kt;kt|=2;var v=c4(),x=f4();Yt!==l||_t!==d?(Jv=null,Yv=Pe()+500,td(l,d)):Xf=Wn(l,d);e:do try{if(Ot!==0&&pt!==null){d=pt;var A=Si;t:switch(Ot){case 1:Ot=0,Si=null,nd(l,d,A,1);break;case 2:case 9:if(xV(A)){Ot=0,Si=null,h4(d);break}d=function(){Ot!==2&&Ot!==9||Yt!==l||(Ot=7),Es(l)},A.then(d,d);break e;case 3:Ot=7;break e;case 4:Ot=5;break e;case 7:xV(A)?(Ot=0,Si=null,h4(d)):(Ot=0,Si=null,nd(l,d,A,7));break;case 5:var z=null;switch(pt.tag){case 26:z=pt.memoizedState;case 5:case 27:var j=pt;if(!z||W4(z)){Ot=0,Si=null;var ee=j.sibling;if(ee!==null)pt=ee;else{var ce=j.return;ce!==null?(pt=ce,Qv(ce)):pt=null}break t}}Ot=0,Si=null,nd(l,d,A,5);break;case 6:Ot=0,Si=null,nd(l,d,A,6);break;case 8:fx(),Sn=6;break e;default:throw Error(r(462))}}hse();break}catch(we){u4(l,we)}while(!0);return aa=nc=null,K.H=v,K.A=x,kt=p,pt!==null?0:(Yt=null,_t=0,_v(),Sn)}function hse(){for(;pt!==null&&!Ve();)d4(pt)}function d4(l){var d=qU(l.alternate,l,ma);l.memoizedProps=l.pendingProps,d===null?Qv(l):pt=d}function h4(l){var d=l,p=d.alternate;switch(d.tag){case 15:case 0:d=DU(p,d,d.pendingProps,d.type,void 0,_t);break;case 11:d=DU(p,d,d.pendingProps,d.type.render,d.ref,_t);break;case 5:IT(d);default:BU(p,d),d=pt=pV(d,ma),d=qU(p,d,ma)}l.memoizedProps=l.pendingProps,d===null?Qv(l):pt=d}function nd(l,d,p,v){aa=nc=null,IT(d),Kf=null,jp=0;var x=d.return;try{if(nse(l,x,d,p,_t)){Sn=1,zv(l,eo(p,l.current)),pt=null;return}}catch(A){if(x!==null)throw pt=x,A;Sn=1,zv(l,eo(p,l.current)),pt=null;return}d.flags&32768?(It||v===1?l=!0:Xf||(_t&536870912)!==0?l=!1:(Pl=l=!0,(v===2||v===9||v===3||v===6)&&(v=io.current,v!==null&&v.tag===13&&(v.flags|=16384))),p4(d,l)):Qv(d)}function Qv(l){var d=l;do{if((d.flags&32768)!==0){p4(d,Pl);return}l=d.return;var p=ise(d.alternate,d,ma);if(p!==null){pt=p;return}if(d=d.sibling,d!==null){pt=d;return}pt=d=l}while(d!==null);Sn===0&&(Sn=5)}function p4(l,d){do{var p=ose(l.alternate,l);if(p!==null){p.flags&=32767,pt=p;return}if(p=l.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!d&&(l=l.sibling,l!==null)){pt=l;return}pt=l=p}while(l!==null);Sn=6,pt=null}function m4(l,d,p,v,x,A,z,j,ee){l.cancelPendingCommit=null;do Zv();while(br!==0);if((kt&6)!==0)throw Error(r(327));if(d!==null){if(d===l.current)throw Error(r(177));if(A=d.lanes|d.childLanes,A|=rT,ji(l,p,A,z,j,ee),l===Yt&&(pt=Yt=null,_t=0),Zf=d,Dl=l,ed=p,lx=A,ux=x,o4=v,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,yse(En,function(){return b4(),null})):(l.callbackNode=null,l.callbackPriority=0),v=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||v){v=K.T,K.T=null,x=te.p,te.p=2,z=kt,kt|=4;try{sse(l,d,p)}finally{kt=z,te.p=x,K.T=v}}br=1,g4(),y4(),v4()}}function g4(){if(br===1){br=0;var l=Dl,d=Zf,p=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||p){p=K.T,K.T=null;var v=te.p;te.p=2;var x=kt;kt|=4;try{QU(d,l);var A=Sx,z=iV(l.containerInfo),j=A.focusedElem,ee=A.selectionRange;if(z!==j&&j&&j.ownerDocument&&rV(j.ownerDocument.documentElement,j)){if(ee!==null&&QE(j)){var ce=ee.start,we=ee.end;if(we===void 0&&(we=ce),"selectionStart"in j)j.selectionStart=ce,j.selectionEnd=Math.min(we,j.value.length);else{var xe=j.ownerDocument||document,de=xe&&xe.defaultView||window;if(de.getSelection){var he=de.getSelection(),nt=j.textContent.length,Ze=Math.min(ee.start,nt),Ht=ee.end===void 0?Ze:Math.min(ee.end,nt);!he.extend&&Ze>Ht&&(z=Ht,Ht=Ze,Ze=z);var se=nV(j,Ze),ie=nV(j,Ht);if(se&&ie&&(he.rangeCount!==1||he.anchorNode!==se.node||he.anchorOffset!==se.offset||he.focusNode!==ie.node||he.focusOffset!==ie.offset)){var le=xe.createRange();le.setStart(se.node,se.offset),he.removeAllRanges(),Ze>Ht?(he.addRange(le),he.extend(ie.node,ie.offset)):(le.setEnd(ie.node,ie.offset),he.addRange(le))}}}}for(xe=[],he=j;he=he.parentNode;)he.nodeType===1&&xe.push({element:he,left:he.scrollLeft,top:he.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<xe.length;j++){var Ee=xe[j];Ee.element.scrollLeft=Ee.left,Ee.element.scrollTop=Ee.top}}f0=!!xx,Sx=xx=null}finally{kt=x,te.p=v,K.T=p}}l.current=d,br=2}}function y4(){if(br===2){br=0;var l=Dl,d=Zf,p=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||p){p=K.T,K.T=null;var v=te.p;te.p=2;var x=kt;kt|=4;try{WU(l,d.alternate,d)}finally{kt=x,te.p=v,K.T=p}}br=3}}function v4(){if(br===4||br===3){br=0,at();var l=Dl,d=Zf,p=ed,v=o4;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?br=5:(br=0,Zf=Dl=null,_4(l,l.pendingLanes));var x=l.pendingLanes;if(x===0&&(Ml=null),Ou(p),d=d.stateNode,Ue&&typeof Ue.onCommitFiberRoot=="function")try{Ue.onCommitFiberRoot(ke,d,void 0,(d.current.flags&128)===128)}catch{}if(v!==null){d=K.T,x=te.p,te.p=2,K.T=null;try{for(var A=l.onRecoverableError,z=0;z<v.length;z++){var j=v[z];A(j.value,{componentStack:j.stack})}}finally{K.T=d,te.p=x}}(ed&3)!==0&&Zv(),Es(l),x=l.pendingLanes,(p&4194090)!==0&&(x&42)!==0?l===cx?tm++:(tm=0,cx=l):tm=0,nm(0)}}function _4(l,d){(l.pooledCacheLanes&=d)===0&&(d=l.pooledCache,d!=null&&(l.pooledCache=null,Op(d)))}function Zv(l){return g4(),y4(),v4(),b4()}function b4(){if(br!==5)return!1;var l=Dl,d=lx;lx=0;var p=Ou(ed),v=K.T,x=te.p;try{te.p=32>p?32:p,K.T=null,p=ux,ux=null;var A=Dl,z=ed;if(br=0,Zf=Dl=null,ed=0,(kt&6)!==0)throw Error(r(331));var j=kt;if(kt|=4,r4(A.current),e4(A,A.current,z,p),kt=j,nm(0,!1),Ue&&typeof Ue.onPostCommitFiberRoot=="function")try{Ue.onPostCommitFiberRoot(ke,A)}catch{}return!0}finally{te.p=x,K.T=v,_4(l,d)}}function w4(l,d,p){d=eo(p,d),d=$T(l.stateNode,d,2),l=Tl(l,d,2),l!==null&&(an(l,2),Es(l))}function jt(l,d,p){if(l.tag===3)w4(l,l,p);else for(;d!==null;){if(d.tag===3){w4(d,l,p);break}else if(d.tag===1){var v=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Ml===null||!Ml.has(v))){l=eo(p,l),p=SU(2),v=Tl(d,p,2),v!==null&&(AU(p,v,d,l),an(v,2),Es(v));break}}d=d.return}}function px(l,d,p){var v=l.pingCache;if(v===null){v=l.pingCache=new use;var x=new Set;v.set(d,x)}else x=v.get(d),x===void 0&&(x=new Set,v.set(d,x));x.has(p)||(ix=!0,x.add(p),l=pse.bind(null,l,d,p),d.then(l,l))}function pse(l,d,p){var v=l.pingCache;v!==null&&v.delete(d),l.pingedLanes|=l.suspendedLanes&p,l.warmLanes&=~p,Yt===l&&(_t&p)===p&&(Sn===4||Sn===3&&(_t&62914560)===_t&&300>Pe()-ax?(kt&2)===0&&td(l,0):ox|=p,Qf===_t&&(Qf=0)),Es(l)}function E4(l,d){d===0&&(d=oi()),l=Vf(l,d),l!==null&&(an(l,d),Es(l))}function mse(l){var d=l.memoizedState,p=0;d!==null&&(p=d.retryLane),E4(l,p)}function gse(l,d){var p=0;switch(l.tag){case 13:var v=l.stateNode,x=l.memoizedState;x!==null&&(p=x.retryLane);break;case 19:v=l.stateNode;break;case 22:v=l.stateNode._retryCache;break;default:throw Error(r(314))}v!==null&&v.delete(d),E4(l,p)}function yse(l,d){return Qe(l,d)}var e0=null,rd=null,mx=!1,t0=!1,gx=!1,uc=0;function Es(l){l!==rd&&l.next===null&&(rd===null?e0=rd=l:rd=rd.next=l),t0=!0,mx||(mx=!0,_se())}function nm(l,d){if(!gx&&t0){gx=!0;do for(var p=!1,v=e0;v!==null;){if(l!==0){var x=v.pendingLanes;if(x===0)var A=0;else{var z=v.suspendedLanes,j=v.pingedLanes;A=(1<<31-Ye(42|l)+1)-1,A&=x&~(z&~j),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(p=!0,A4(v,A))}else A=_t,A=Tn(v,v===Yt?A:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(A&3)===0||Wn(v,A)||(p=!0,A4(v,A));v=v.next}while(p);gx=!1}}function vse(){T4()}function T4(){t0=mx=!1;var l=0;uc!==0&&(Cse()&&(l=uc),uc=0);for(var d=Pe(),p=null,v=e0;v!==null;){var x=v.next,A=x4(v,d);A===0?(v.next=null,p===null?e0=x:p.next=x,x===null&&(rd=p)):(p=v,(l!==0||(A&3)!==0)&&(t0=!0)),v=x}nm(l)}function x4(l,d){for(var p=l.suspendedLanes,v=l.pingedLanes,x=l.expirationTimes,A=l.pendingLanes&-62914561;0<A;){var z=31-Ye(A),j=1<<z,ee=x[z];ee===-1?((j&p)===0||(j&v)!==0)&&(x[z]=Gi(j,d)):ee<=d&&(l.expiredLanes|=j),A&=~j}if(d=Yt,p=_t,p=Tn(l,l===d?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),v=l.callbackNode,p===0||l===d&&(Ot===2||Ot===9)||l.cancelPendingCommit!==null)return v!==null&&v!==null&&Be(v),l.callbackNode=null,l.callbackPriority=0;if((p&3)===0||Wn(l,p)){if(d=p&-p,d===l.callbackPriority)return d;switch(v!==null&&Be(v),Ou(p)){case 2:case 8:p=Tt;break;case 32:p=En;break;case 268435456:p=Rt;break;default:p=En}return v=S4.bind(null,l),p=Qe(p,v),l.callbackPriority=d,l.callbackNode=p,d}return v!==null&&v!==null&&Be(v),l.callbackPriority=2,l.callbackNode=null,2}function S4(l,d){if(br!==0&&br!==5)return l.callbackNode=null,l.callbackPriority=0,null;var p=l.callbackNode;if(Zv()&&l.callbackNode!==p)return null;var v=_t;return v=Tn(l,l===Yt?v:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),v===0?null:(a4(l,v,d),x4(l,Pe()),l.callbackNode!=null&&l.callbackNode===p?S4.bind(null,l):null)}function A4(l,d){if(Zv())return null;a4(l,d,!0)}function _se(){Rse(function(){(kt&6)!==0?Qe(ot,vse):T4()})}function yx(){return uc===0&&(uc=Ws()),uc}function C4(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:ko(""+l)}function I4(l,d){var p=d.ownerDocument.createElement("input");return p.name=d.name,p.value=d.value,l.id&&p.setAttribute("form",l.id),d.parentNode.insertBefore(p,d),l=new FormData(l),p.parentNode.removeChild(p),l}function bse(l,d,p,v,x){if(d==="submit"&&p&&p.stateNode===x){var A=C4((x[Yn]||null).action),z=v.submitter;z&&(d=(d=z[Yn]||null)?C4(d.formAction):z.getAttribute("formAction"),d!==null&&(A=d,z=null));var j=new $u("action","action",null,v,x);l.push({event:j,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(uc!==0){var ee=z?I4(x,z):new FormData(x);VT(p,{pending:!0,data:ee,method:x.method,action:A},null,ee)}}else typeof A=="function"&&(j.preventDefault(),ee=z?I4(x,z):new FormData(x),VT(p,{pending:!0,data:ee,method:x.method,action:A},A,ee))},currentTarget:x}]})}}for(var vx=0;vx<nT.length;vx++){var _x=nT[vx],wse=_x.toLowerCase(),Ese=_x[0].toUpperCase()+_x.slice(1);Uo(wse,"on"+Ese)}Uo(aV,"onAnimationEnd"),Uo(lV,"onAnimationIteration"),Uo(uV,"onAnimationStart"),Uo("dblclick","onDoubleClick"),Uo("focusin","onFocus"),Uo("focusout","onBlur"),Uo(qoe,"onTransitionRun"),Uo(Foe,"onTransitionStart"),Uo(Boe,"onTransitionCancel"),Uo(cV,"onTransitionEnd"),Ji("onMouseEnter",["mouseout","mouseover"]),Ji("onMouseLeave",["mouseout","mouseover"]),Ji("onPointerEnter",["pointerout","pointerover"]),Ji("onPointerLeave",["pointerout","pointerover"]),Yi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Yi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Yi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Yi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Yi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Yi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tse=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(rm));function R4(l,d){d=(d&4)!==0;for(var p=0;p<l.length;p++){var v=l[p],x=v.event;v=v.listeners;e:{var A=void 0;if(d)for(var z=v.length-1;0<=z;z--){var j=v[z],ee=j.instance,ce=j.currentTarget;if(j=j.listener,ee!==A&&x.isPropagationStopped())break e;A=j,x.currentTarget=ce;try{A(x)}catch(we){$v(we)}x.currentTarget=null,A=ee}else for(z=0;z<v.length;z++){if(j=v[z],ee=j.instance,ce=j.currentTarget,j=j.listener,ee!==A&&x.isPropagationStopped())break e;A=j,x.currentTarget=ce;try{A(x)}catch(we){$v(we)}x.currentTarget=null,A=ee}}}}function mt(l,d){var p=d[Ys];p===void 0&&(p=d[Ys]=new Set);var v=l+"__bubble";p.has(v)||(P4(d,l,2,!1),p.add(v))}function bx(l,d,p){var v=0;d&&(v|=4),P4(p,l,v,d)}var n0="_reactListening"+Math.random().toString(36).slice(2);function wx(l){if(!l[n0]){l[n0]=!0,Af.forEach(function(p){p!=="selectionchange"&&(Tse.has(p)||bx(p,!1,l),bx(p,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[n0]||(d[n0]=!0,bx("selectionchange",!1,d))}}function P4(l,d,p,v){switch(eq(d)){case 2:var x=Jse;break;case 8:x=Xse;break;default:x=Ox}p=x.bind(null,d,p,l),x=void 0,!na||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(x=!0),v?x!==void 0?l.addEventListener(d,p,{capture:!0,passive:x}):l.addEventListener(d,p,!0):x!==void 0?l.addEventListener(d,p,{passive:x}):l.addEventListener(d,p,!1)}function Ex(l,d,p,v,x){var A=v;if((d&1)===0&&(d&2)===0&&v!==null)e:for(;;){if(v===null)return;var z=v.tag;if(z===3||z===4){var j=v.stateNode.containerInfo;if(j===x)break;if(z===4)for(z=v.return;z!==null;){var ee=z.tag;if((ee===3||ee===4)&&z.stateNode.containerInfo===x)return;z=z.return}for(;j!==null;){if(z=_i(j),z===null)return;if(ee=z.tag,ee===5||ee===6||ee===26||ee===27){v=A=z;continue e}j=j.parentNode}}v=v.return}qu(function(){var ce=A,we=bp(p),xe=[];e:{var de=fV.get(l);if(de!==void 0){var he=$u,nt=l;switch(l){case"keypress":if(Fu(p)===0)break e;case"keydown":case"keyup":he=Df;break;case"focusin":nt="focus",he=Pf;break;case"focusout":nt="blur",he=Pf;break;case"beforeblur":case"afterblur":he=Pf;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=Ku;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=cv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=_l;break;case aV:case lV:case uV:he=Ep;break;case cV:he=k;break;case"scroll":case"scrollend":he=Hu;break;case"wheel":he=W;break;case"copy":case"cut":case"paste":he=dv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=Sp;break;case"toggle":case"beforetoggle":he=me}var Ze=(d&4)!==0,Ht=!Ze&&(l==="scroll"||l==="scrollend"),se=Ze?de!==null?de+"Capture":null:de;Ze=[];for(var ie=ce,le;ie!==null;){var Ee=ie;if(le=Ee.stateNode,Ee=Ee.tag,Ee!==5&&Ee!==26&&Ee!==27||le===null||se===null||(Ee=yl(ie,se),Ee!=null&&Ze.push(im(ie,Ee,le))),Ht)break;ie=ie.return}0<Ze.length&&(de=new he(de,nt,null,p,we),xe.push({event:de,listeners:Ze}))}}if((d&7)===0){e:{if(de=l==="mouseover"||l==="pointerover",he=l==="mouseout"||l==="pointerout",de&&p!==_p&&(nt=p.relatedTarget||p.fromElement)&&(_i(nt)||nt[No]))break e;if((he||de)&&(de=we.window===we?we:(de=we.ownerDocument)?de.defaultView||de.parentWindow:window,he?(nt=p.relatedTarget||p.toElement,he=ce,nt=nt?_i(nt):null,nt!==null&&(Ht=o(nt),Ze=nt.tag,nt!==Ht||Ze!==5&&Ze!==27&&Ze!==6)&&(nt=null)):(he=null,nt=ce),he!==nt)){if(Ze=Ku,Ee="onMouseLeave",se="onMouseEnter",ie="mouse",(l==="pointerout"||l==="pointerover")&&(Ze=Sp,Ee="onPointerLeave",se="onPointerEnter",ie="pointer"),Ht=he==null?de:fs(he),le=nt==null?de:fs(nt),de=new Ze(Ee,ie+"leave",he,p,we),de.target=Ht,de.relatedTarget=le,Ee=null,_i(we)===ce&&(Ze=new Ze(se,ie+"enter",nt,p,we),Ze.target=le,Ze.relatedTarget=Ht,Ee=Ze),Ht=Ee,he&&nt)t:{for(Ze=he,se=nt,ie=0,le=Ze;le;le=id(le))ie++;for(le=0,Ee=se;Ee;Ee=id(Ee))le++;for(;0<ie-le;)Ze=id(Ze),ie--;for(;0<le-ie;)se=id(se),le--;for(;ie--;){if(Ze===se||se!==null&&Ze===se.alternate)break t;Ze=id(Ze),se=id(se)}Ze=null}else Ze=null;he!==null&&N4(xe,de,he,Ze,!1),nt!==null&&Ht!==null&&N4(xe,Ht,nt,Ze,!0)}}e:{if(de=ce?fs(ce):window,he=de.nodeName&&de.nodeName.toLowerCase(),he==="select"||he==="input"&&de.type==="file")var Ge=JL;else if(WL(de))if(XL)Ge=Loe;else{Ge=koe;var dt=Doe}else he=de.nodeName,!he||he.toLowerCase()!=="input"||de.type!=="checkbox"&&de.type!=="radio"?ce&&Cf(ce.elementType)&&(Ge=JL):Ge=Ooe;if(Ge&&(Ge=Ge(l,ce))){YL(xe,Ge,p,we);break e}dt&&dt(l,de,ce),l==="focusout"&&ce&&de.type==="number"&&ce.memoizedProps.value!=null&&gp(de,"number",de.value)}switch(dt=ce?fs(ce):window,l){case"focusin":(WL(dt)||dt.contentEditable==="true")&&(kf=dt,ZE=ce,Pp=null);break;case"focusout":Pp=ZE=kf=null;break;case"mousedown":eT=!0;break;case"contextmenu":case"mouseup":case"dragend":eT=!1,oV(xe,p,we);break;case"selectionchange":if(Uoe)break;case"keydown":case"keyup":oV(xe,p,we)}var Je;if(st)e:{switch(l){case"compositionstart":var tt="onCompositionStart";break e;case"compositionend":tt="onCompositionEnd";break e;case"compositionupdate":tt="onCompositionUpdate";break e}tt=void 0}else Vo?Oo(l,p)&&(tt="onCompositionEnd"):l==="keydown"&&p.keyCode===229&&(tt="onCompositionStart");tt&&(Dn&&p.locale!=="ko"&&(Vo||tt!=="onCompositionStart"?tt==="onCompositionEnd"&&Vo&&(Je=uv()):(Zi=we,Wt="value"in Zi?Zi.value:Zi.textContent,Vo=!0)),dt=r0(ce,tt),0<dt.length&&(tt=new xp(tt,l,null,p,we),xe.push({event:tt,listeners:dt}),Je?tt.data=Je:(Je=Lo(p),Je!==null&&(tt.data=Je)))),(Je=Dt?Ap(l,p):Poe(l,p))&&(tt=r0(ce,"onBeforeInput"),0<tt.length&&(dt=new xp("onBeforeInput","beforeinput",null,p,we),xe.push({event:dt,listeners:tt}),dt.data=Je)),bse(xe,l,ce,p,we)}R4(xe,d)})}function im(l,d,p){return{instance:l,listener:d,currentTarget:p}}function r0(l,d){for(var p=d+"Capture",v=[];l!==null;){var x=l,A=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||A===null||(x=yl(l,p),x!=null&&v.unshift(im(l,x,A)),x=yl(l,d),x!=null&&v.push(im(l,x,A))),l.tag===3)return v;l=l.return}return[]}function id(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function N4(l,d,p,v,x){for(var A=d._reactName,z=[];p!==null&&p!==v;){var j=p,ee=j.alternate,ce=j.stateNode;if(j=j.tag,ee!==null&&ee===v)break;j!==5&&j!==26&&j!==27||ce===null||(ee=ce,x?(ce=yl(p,A),ce!=null&&z.unshift(im(p,ce,ee))):x||(ce=yl(p,A),ce!=null&&z.push(im(p,ce,ee)))),p=p.return}z.length!==0&&l.push({event:d,listeners:z})}var xse=/\r\n?/g,Sse=/\u0000|\uFFFD/g;function M4(l){return(typeof l=="string"?l:""+l).replace(xse,`
`).replace(Sse,"")}function D4(l,d){return d=M4(d),M4(l)===d}function i0(){}function zt(l,d,p,v,x,A){switch(p){case"children":typeof v=="string"?d==="body"||d==="textarea"&&v===""||Qi(l,v):(typeof v=="number"||typeof v=="bigint")&&d!=="body"&&Qi(l,""+v);break;case"className":Zs(l,"class",v);break;case"tabIndex":Zs(l,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":Zs(l,p,v);break;case"style":vp(l,v,A);break;case"data":if(d!=="object"){Zs(l,"data",v);break}case"src":case"href":if(v===""&&(d!=="a"||p!=="href")){l.removeAttribute(p);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){l.removeAttribute(p);break}v=ko(""+v),l.setAttribute(p,v);break;case"action":case"formAction":if(typeof v=="function"){l.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(p==="formAction"?(d!=="input"&&zt(l,d,"name",x.name,x,null),zt(l,d,"formEncType",x.formEncType,x,null),zt(l,d,"formMethod",x.formMethod,x,null),zt(l,d,"formTarget",x.formTarget,x,null)):(zt(l,d,"encType",x.encType,x,null),zt(l,d,"method",x.method,x,null),zt(l,d,"target",x.target,x,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){l.removeAttribute(p);break}v=ko(""+v),l.setAttribute(p,v);break;case"onClick":v!=null&&(l.onclick=i0);break;case"onScroll":v!=null&&mt("scroll",l);break;case"onScrollEnd":v!=null&&mt("scrollend",l);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(p=v.__html,p!=null){if(x.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"multiple":l.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":l.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){l.removeAttribute("xlink:href");break}p=ko(""+v),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(p,""+v):l.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(p,""):l.removeAttribute(p);break;case"capture":case"download":v===!0?l.setAttribute(p,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(p,v):l.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?l.setAttribute(p,v):l.removeAttribute(p);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?l.removeAttribute(p):l.setAttribute(p,v);break;case"popover":mt("beforetoggle",l),mt("toggle",l),Qs(l,"popover",v);break;case"xlinkActuate":si(l,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":si(l,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":si(l,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":si(l,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":si(l,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":si(l,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":si(l,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":si(l,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":si(l,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":Qs(l,"is",v);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=sv.get(p)||p,Qs(l,p,v))}}function Tx(l,d,p,v,x,A){switch(p){case"style":vp(l,v,A);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(p=v.__html,p!=null){if(x.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"children":typeof v=="string"?Qi(l,v):(typeof v=="number"||typeof v=="bigint")&&Qi(l,""+v);break;case"onScroll":v!=null&&mt("scroll",l);break;case"onScrollEnd":v!=null&&mt("scrollend",l);break;case"onClick":v!=null&&(l.onclick=i0);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xs.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(x=p.endsWith("Capture"),d=p.slice(2,x?p.length-7:void 0),A=l[Yn]||null,A=A!=null?A[p]:null,typeof A=="function"&&l.removeEventListener(d,A,x),typeof v=="function")){typeof A!="function"&&A!==null&&(p in l?l[p]=null:l.hasAttribute(p)&&l.removeAttribute(p)),l.addEventListener(d,v,x);break e}p in l?l[p]=v:v===!0?l.setAttribute(p,""):Qs(l,p,v)}}}function wr(l,d,p){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":mt("error",l),mt("load",l);var v=!1,x=!1,A;for(A in p)if(p.hasOwnProperty(A)){var z=p[A];if(z!=null)switch(A){case"src":v=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:zt(l,d,A,z,p,null)}}x&&zt(l,d,"srcSet",p.srcSet,p,null),v&&zt(l,d,"src",p.src,p,null);return;case"input":mt("invalid",l);var j=A=z=x=null,ee=null,ce=null;for(v in p)if(p.hasOwnProperty(v)){var we=p[v];if(we!=null)switch(v){case"name":x=we;break;case"type":z=we;break;case"checked":ee=we;break;case"defaultChecked":ce=we;break;case"value":A=we;break;case"defaultValue":j=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(r(137,d));break;default:zt(l,d,v,we,p,null)}}mp(l,A,j,ee,ce,z,x,!1),pl(l);return;case"select":mt("invalid",l),v=z=A=null;for(x in p)if(p.hasOwnProperty(x)&&(j=p[x],j!=null))switch(x){case"value":A=j;break;case"defaultValue":z=j;break;case"multiple":v=j;default:zt(l,d,x,j,p,null)}d=A,p=z,l.multiple=!!v,d!=null?ml(l,!!v,d,!1):p!=null&&ml(l,!!v,p,!0);return;case"textarea":mt("invalid",l),A=x=v=null;for(z in p)if(p.hasOwnProperty(z)&&(j=p[z],j!=null))switch(z){case"value":v=j;break;case"defaultValue":x=j;break;case"children":A=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(91));break;default:zt(l,d,z,j,p,null)}ov(l,v,x,A),pl(l);return;case"option":for(ee in p)if(p.hasOwnProperty(ee)&&(v=p[ee],v!=null))switch(ee){case"selected":l.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:zt(l,d,ee,v,p,null)}return;case"dialog":mt("beforetoggle",l),mt("toggle",l),mt("cancel",l),mt("close",l);break;case"iframe":case"object":mt("load",l);break;case"video":case"audio":for(v=0;v<rm.length;v++)mt(rm[v],l);break;case"image":mt("error",l),mt("load",l);break;case"details":mt("toggle",l);break;case"embed":case"source":case"link":mt("error",l),mt("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ce in p)if(p.hasOwnProperty(ce)&&(v=p[ce],v!=null))switch(ce){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:zt(l,d,ce,v,p,null)}return;default:if(Cf(d)){for(we in p)p.hasOwnProperty(we)&&(v=p[we],v!==void 0&&Tx(l,d,we,v,p,void 0));return}}for(j in p)p.hasOwnProperty(j)&&(v=p[j],v!=null&&zt(l,d,j,v,p,null))}function Ase(l,d,p,v){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,A=null,z=null,j=null,ee=null,ce=null,we=null;for(he in p){var xe=p[he];if(p.hasOwnProperty(he)&&xe!=null)switch(he){case"checked":break;case"value":break;case"defaultValue":ee=xe;default:v.hasOwnProperty(he)||zt(l,d,he,null,v,xe)}}for(var de in v){var he=v[de];if(xe=p[de],v.hasOwnProperty(de)&&(he!=null||xe!=null))switch(de){case"type":A=he;break;case"name":x=he;break;case"checked":ce=he;break;case"defaultChecked":we=he;break;case"value":z=he;break;case"defaultValue":j=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(r(137,d));break;default:he!==xe&&zt(l,d,de,he,v,xe)}}pp(l,z,j,ee,ce,we,A,x);return;case"select":he=z=j=de=null;for(A in p)if(ee=p[A],p.hasOwnProperty(A)&&ee!=null)switch(A){case"value":break;case"multiple":he=ee;default:v.hasOwnProperty(A)||zt(l,d,A,null,v,ee)}for(x in v)if(A=v[x],ee=p[x],v.hasOwnProperty(x)&&(A!=null||ee!=null))switch(x){case"value":de=A;break;case"defaultValue":j=A;break;case"multiple":z=A;default:A!==ee&&zt(l,d,x,A,v,ee)}d=j,p=z,v=he,de!=null?ml(l,!!p,de,!1):!!v!=!!p&&(d!=null?ml(l,!!p,d,!0):ml(l,!!p,p?[]:"",!1));return;case"textarea":he=de=null;for(j in p)if(x=p[j],p.hasOwnProperty(j)&&x!=null&&!v.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:zt(l,d,j,null,v,x)}for(z in v)if(x=v[z],A=p[z],v.hasOwnProperty(z)&&(x!=null||A!=null))switch(z){case"value":de=x;break;case"defaultValue":he=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(r(91));break;default:x!==A&&zt(l,d,z,x,v,A)}iv(l,de,he);return;case"option":for(var nt in p)if(de=p[nt],p.hasOwnProperty(nt)&&de!=null&&!v.hasOwnProperty(nt))switch(nt){case"selected":l.selected=!1;break;default:zt(l,d,nt,null,v,de)}for(ee in v)if(de=v[ee],he=p[ee],v.hasOwnProperty(ee)&&de!==he&&(de!=null||he!=null))switch(ee){case"selected":l.selected=de&&typeof de!="function"&&typeof de!="symbol";break;default:zt(l,d,ee,de,v,he)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ze in p)de=p[Ze],p.hasOwnProperty(Ze)&&de!=null&&!v.hasOwnProperty(Ze)&&zt(l,d,Ze,null,v,de);for(ce in v)if(de=v[ce],he=p[ce],v.hasOwnProperty(ce)&&de!==he&&(de!=null||he!=null))switch(ce){case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(r(137,d));break;default:zt(l,d,ce,de,v,he)}return;default:if(Cf(d)){for(var Ht in p)de=p[Ht],p.hasOwnProperty(Ht)&&de!==void 0&&!v.hasOwnProperty(Ht)&&Tx(l,d,Ht,void 0,v,de);for(we in v)de=v[we],he=p[we],!v.hasOwnProperty(we)||de===he||de===void 0&&he===void 0||Tx(l,d,we,de,v,he);return}}for(var se in p)de=p[se],p.hasOwnProperty(se)&&de!=null&&!v.hasOwnProperty(se)&&zt(l,d,se,null,v,de);for(xe in v)de=v[xe],he=p[xe],!v.hasOwnProperty(xe)||de===he||de==null&&he==null||zt(l,d,xe,de,v,he)}var xx=null,Sx=null;function o0(l){return l.nodeType===9?l:l.ownerDocument}function k4(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function O4(l,d){if(l===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&d==="foreignObject"?0:l}function Ax(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var Cx=null;function Cse(){var l=window.event;return l&&l.type==="popstate"?l===Cx?!1:(Cx=l,!0):(Cx=null,!1)}var L4=typeof setTimeout=="function"?setTimeout:void 0,Ise=typeof clearTimeout=="function"?clearTimeout:void 0,V4=typeof Promise=="function"?Promise:void 0,Rse=typeof queueMicrotask=="function"?queueMicrotask:typeof V4<"u"?function(l){return V4.resolve(null).then(l).catch(Pse)}:L4;function Pse(l){setTimeout(function(){throw l})}function Ol(l){return l==="head"}function U4(l,d){var p=d,v=0,x=0;do{var A=p.nextSibling;if(l.removeChild(p),A&&A.nodeType===8)if(p=A.data,p==="/$"){if(0<v&&8>v){p=v;var z=l.ownerDocument;if(p&1&&om(z.documentElement),p&2&&om(z.body),p&4)for(p=z.head,om(p),z=p.firstChild;z;){var j=z.nextSibling,ee=z.nodeName;z[cs]||ee==="SCRIPT"||ee==="STYLE"||ee==="LINK"&&z.rel.toLowerCase()==="stylesheet"||p.removeChild(z),z=j}}if(x===0){l.removeChild(A),hm(d);return}x--}else p==="$"||p==="$?"||p==="$!"?x++:v=p.charCodeAt(0)-48;else v=0;p=A}while(p);hm(d)}function Ix(l){var d=l.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var p=d;switch(d=d.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":Ix(p),ul(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}l.removeChild(p)}}function Nse(l,d,p,v){for(;l.nodeType===1;){var x=p;if(l.nodeName.toLowerCase()!==d.toLowerCase()){if(!v&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(v){if(!l[cs])switch(d){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(A=l.getAttribute("rel"),A==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(A!==x.rel||l.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||l.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||l.getAttribute("title")!==(x.title==null?null:x.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(A=l.getAttribute("src"),(A!==(x.src==null?null:x.src)||l.getAttribute("type")!==(x.type==null?null:x.type)||l.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&A&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(d==="input"&&l.type==="hidden"){var A=x.name==null?null:""+x.name;if(x.type==="hidden"&&l.getAttribute("name")===A)return l}else return l;if(l=Fo(l.nextSibling),l===null)break}return null}function Mse(l,d,p){if(d==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!p||(l=Fo(l.nextSibling),l===null))return null;return l}function Rx(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function Dse(l,d){var p=l.ownerDocument;if(l.data!=="$?"||p.readyState==="complete")d();else{var v=function(){d(),p.removeEventListener("DOMContentLoaded",v)};p.addEventListener("DOMContentLoaded",v),l._reactRetry=v}}function Fo(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?"||d==="F!"||d==="F")break;if(d==="/$")return null}}return l}var Px=null;function q4(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var p=l.data;if(p==="$"||p==="$!"||p==="$?"){if(d===0)return l;d--}else p==="/$"&&d++}l=l.previousSibling}return null}function F4(l,d,p){switch(d=o0(p),l){case"html":if(l=d.documentElement,!l)throw Error(r(452));return l;case"head":if(l=d.head,!l)throw Error(r(453));return l;case"body":if(l=d.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function om(l){for(var d=l.attributes;d.length;)l.removeAttributeNode(d[0]);ul(l)}var so=new Map,B4=new Set;function s0(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var ga=te.d;te.d={f:kse,r:Ose,D:Lse,C:Vse,L:Use,m:qse,X:Bse,S:Fse,M:$se};function kse(){var l=ga.f(),d=Xv();return l||d}function Ose(l){var d=Wi(l);d!==null&&d.tag===5&&d.type==="form"?aU(d):ga.r(l)}var od=typeof document>"u"?null:document;function $4(l,d,p){var v=od;if(v&&typeof d=="string"&&d){var x=or(d);x='link[rel="'+l+'"][href="'+x+'"]',typeof p=="string"&&(x+='[crossorigin="'+p+'"]'),B4.has(x)||(B4.add(x),l={rel:l,crossOrigin:p,href:d},v.querySelector(x)===null&&(d=v.createElement("link"),wr(d,"link",l),gn(d),v.head.appendChild(d)))}}function Lse(l){ga.D(l),$4("dns-prefetch",l,null)}function Vse(l,d){ga.C(l,d),$4("preconnect",l,d)}function Use(l,d,p){ga.L(l,d,p);var v=od;if(v&&l&&d){var x='link[rel="preload"][as="'+or(d)+'"]';d==="image"&&p&&p.imageSrcSet?(x+='[imagesrcset="'+or(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(x+='[imagesizes="'+or(p.imageSizes)+'"]')):x+='[href="'+or(l)+'"]';var A=x;switch(d){case"style":A=sd(l);break;case"script":A=ad(l)}so.has(A)||(l=f({rel:"preload",href:d==="image"&&p&&p.imageSrcSet?void 0:l,as:d},p),so.set(A,l),v.querySelector(x)!==null||d==="style"&&v.querySelector(sm(A))||d==="script"&&v.querySelector(am(A))||(d=v.createElement("link"),wr(d,"link",l),gn(d),v.head.appendChild(d)))}}function qse(l,d){ga.m(l,d);var p=od;if(p&&l){var v=d&&typeof d.as=="string"?d.as:"script",x='link[rel="modulepreload"][as="'+or(v)+'"][href="'+or(l)+'"]',A=x;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=ad(l)}if(!so.has(A)&&(l=f({rel:"modulepreload",href:l},d),so.set(A,l),p.querySelector(x)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(am(A)))return}v=p.createElement("link"),wr(v,"link",l),gn(v),p.head.appendChild(v)}}}function Fse(l,d,p){ga.S(l,d,p);var v=od;if(v&&l){var x=ds(v).hoistableStyles,A=sd(l);d=d||"default";var z=x.get(A);if(!z){var j={loading:0,preload:null};if(z=v.querySelector(sm(A)))j.loading=5;else{l=f({rel:"stylesheet",href:l,"data-precedence":d},p),(p=so.get(A))&&Nx(l,p);var ee=z=v.createElement("link");gn(ee),wr(ee,"link",l),ee._p=new Promise(function(ce,we){ee.onload=ce,ee.onerror=we}),ee.addEventListener("load",function(){j.loading|=1}),ee.addEventListener("error",function(){j.loading|=2}),j.loading|=4,a0(z,d,v)}z={type:"stylesheet",instance:z,count:1,state:j},x.set(A,z)}}}function Bse(l,d){ga.X(l,d);var p=od;if(p&&l){var v=ds(p).hoistableScripts,x=ad(l),A=v.get(x);A||(A=p.querySelector(am(x)),A||(l=f({src:l,async:!0},d),(d=so.get(x))&&Mx(l,d),A=p.createElement("script"),gn(A),wr(A,"link",l),p.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},v.set(x,A))}}function $se(l,d){ga.M(l,d);var p=od;if(p&&l){var v=ds(p).hoistableScripts,x=ad(l),A=v.get(x);A||(A=p.querySelector(am(x)),A||(l=f({src:l,async:!0,type:"module"},d),(d=so.get(x))&&Mx(l,d),A=p.createElement("script"),gn(A),wr(A,"link",l),p.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},v.set(x,A))}}function z4(l,d,p,v){var x=(x=oe.current)?s0(x):null;if(!x)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(d=sd(p.href),p=ds(x).hoistableStyles,v=p.get(d),v||(v={type:"style",instance:null,count:0,state:null},p.set(d,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){l=sd(p.href);var A=ds(x).hoistableStyles,z=A.get(l);if(z||(x=x.ownerDocument||x,z={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(l,z),(A=x.querySelector(sm(l)))&&!A._p&&(z.instance=A,z.state.loading=5),so.has(l)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},so.set(l,p),A||zse(x,l,p,z.state))),d&&v===null)throw Error(r(528,""));return z}if(d&&v!==null)throw Error(r(529,""));return null;case"script":return d=p.async,p=p.src,typeof p=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=ad(p),p=ds(x).hoistableScripts,v=p.get(d),v||(v={type:"script",instance:null,count:0,state:null},p.set(d,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function sd(l){return'href="'+or(l)+'"'}function sm(l){return'link[rel="stylesheet"]['+l+"]"}function H4(l){return f({},l,{"data-precedence":l.precedence,precedence:null})}function zse(l,d,p,v){l.querySelector('link[rel="preload"][as="style"]['+d+"]")?v.loading=1:(d=l.createElement("link"),v.preload=d,d.addEventListener("load",function(){return v.loading|=1}),d.addEventListener("error",function(){return v.loading|=2}),wr(d,"link",p),gn(d),l.head.appendChild(d))}function ad(l){return'[src="'+or(l)+'"]'}function am(l){return"script[async]"+l}function G4(l,d,p){if(d.count++,d.instance===null)switch(d.type){case"style":var v=l.querySelector('style[data-href~="'+or(p.href)+'"]');if(v)return d.instance=v,gn(v),v;var x=f({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return v=(l.ownerDocument||l).createElement("style"),gn(v),wr(v,"style",x),a0(v,p.precedence,l),d.instance=v;case"stylesheet":x=sd(p.href);var A=l.querySelector(sm(x));if(A)return d.state.loading|=4,d.instance=A,gn(A),A;v=H4(p),(x=so.get(x))&&Nx(v,x),A=(l.ownerDocument||l).createElement("link"),gn(A);var z=A;return z._p=new Promise(function(j,ee){z.onload=j,z.onerror=ee}),wr(A,"link",v),d.state.loading|=4,a0(A,p.precedence,l),d.instance=A;case"script":return A=ad(p.src),(x=l.querySelector(am(A)))?(d.instance=x,gn(x),x):(v=p,(x=so.get(A))&&(v=f({},p),Mx(v,x)),l=l.ownerDocument||l,x=l.createElement("script"),gn(x),wr(x,"link",v),l.head.appendChild(x),d.instance=x);case"void":return null;default:throw Error(r(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(v=d.instance,d.state.loading|=4,a0(v,p.precedence,l));return d.instance}function a0(l,d,p){for(var v=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=v.length?v[v.length-1]:null,A=x,z=0;z<v.length;z++){var j=v[z];if(j.dataset.precedence===d)A=j;else if(A!==x)break}A?A.parentNode.insertBefore(l,A.nextSibling):(d=p.nodeType===9?p.head:p,d.insertBefore(l,d.firstChild))}function Nx(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.title==null&&(l.title=d.title)}function Mx(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.integrity==null&&(l.integrity=d.integrity)}var l0=null;function j4(l,d,p){if(l0===null){var v=new Map,x=l0=new Map;x.set(p,v)}else x=l0,v=x.get(p),v||(v=new Map,x.set(p,v));if(v.has(l))return v;for(v.set(l,null),p=p.getElementsByTagName(l),x=0;x<p.length;x++){var A=p[x];if(!(A[cs]||A[mn]||l==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var z=A.getAttribute(d)||"";z=l+z;var j=v.get(z);j?j.push(A):v.set(z,[A])}}return v}function K4(l,d,p){l=l.ownerDocument||l,l.head.insertBefore(p,d==="title"?l.querySelector("head > title"):null)}function Hse(l,d,p){if(p===1||d.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return l=d.disabled,typeof d.precedence=="string"&&l==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function W4(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var lm=null;function Gse(){}function jse(l,d,p){if(lm===null)throw Error(r(475));var v=lm;if(d.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var x=sd(p.href),A=l.querySelector(sm(x));if(A){l=A._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(v.count++,v=u0.bind(v),l.then(v,v)),d.state.loading|=4,d.instance=A,gn(A);return}A=l.ownerDocument||l,p=H4(p),(x=so.get(x))&&Nx(p,x),A=A.createElement("link"),gn(A);var z=A;z._p=new Promise(function(j,ee){z.onload=j,z.onerror=ee}),wr(A,"link",p),d.instance=A}v.stylesheets===null&&(v.stylesheets=new Map),v.stylesheets.set(d,l),(l=d.state.preload)&&(d.state.loading&3)===0&&(v.count++,d=u0.bind(v),l.addEventListener("load",d),l.addEventListener("error",d))}}function Kse(){if(lm===null)throw Error(r(475));var l=lm;return l.stylesheets&&l.count===0&&Dx(l,l.stylesheets),0<l.count?function(d){var p=setTimeout(function(){if(l.stylesheets&&Dx(l,l.stylesheets),l.unsuspend){var v=l.unsuspend;l.unsuspend=null,v()}},6e4);return l.unsuspend=d,function(){l.unsuspend=null,clearTimeout(p)}}:null}function u0(){if(this.count--,this.count===0){if(this.stylesheets)Dx(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var c0=null;function Dx(l,d){l.stylesheets=null,l.unsuspend!==null&&(l.count++,c0=new Map,d.forEach(Wse,l),c0=null,u0.call(l))}function Wse(l,d){if(!(d.state.loading&4)){var p=c0.get(l);if(p)var v=p.get(null);else{p=new Map,c0.set(l,p);for(var x=l.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<x.length;A++){var z=x[A];(z.nodeName==="LINK"||z.getAttribute("media")!=="not all")&&(p.set(z.dataset.precedence,z),v=z)}v&&p.set(null,v)}x=d.instance,z=x.getAttribute("data-precedence"),A=p.get(z)||v,A===v&&p.set(null,x),p.set(z,x),this.count++,v=u0.bind(this),x.addEventListener("load",v),x.addEventListener("error",v),A?A.parentNode.insertBefore(x,A.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(x,l.firstChild)),d.state.loading|=4}}var um={$$typeof:R,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function Yse(l,d,p,v,x,A,z,j){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=as(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=as(0),this.hiddenUpdates=as(null),this.identifierPrefix=v,this.onUncaughtError=x,this.onCaughtError=A,this.onRecoverableError=z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function Y4(l,d,p,v,x,A,z,j,ee,ce,we,xe){return l=new Yse(l,d,p,z,j,ee,ce,xe),d=1,A===!0&&(d|=24),A=Ei(3,null,null,d),l.current=A,A.stateNode=l,d=pT(),d.refCount++,l.pooledCache=d,d.refCount++,A.memoizedState={element:v,isDehydrated:p,cache:d},vT(A),l}function J4(l){return l?(l=Uf,l):Uf}function X4(l,d,p,v,x,A){x=J4(x),v.context===null?v.context=x:v.pendingContext=x,v=El(d),v.payload={element:p},A=A===void 0?null:A,A!==null&&(v.callback=A),p=Tl(l,v,d),p!==null&&(Ci(p,l,d),qp(p,l,d))}function Q4(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<d?p:d}}function kx(l,d){Q4(l,d),(l=l.alternate)&&Q4(l,d)}function Z4(l){if(l.tag===13){var d=Vf(l,67108864);d!==null&&Ci(d,l,67108864),kx(l,67108864)}}var f0=!0;function Jse(l,d,p,v){var x=K.T;K.T=null;var A=te.p;try{te.p=2,Ox(l,d,p,v)}finally{te.p=A,K.T=x}}function Xse(l,d,p,v){var x=K.T;K.T=null;var A=te.p;try{te.p=8,Ox(l,d,p,v)}finally{te.p=A,K.T=x}}function Ox(l,d,p,v){if(f0){var x=Lx(v);if(x===null)Ex(l,d,v,d0,p),tq(l,v);else if(Zse(x,l,d,p,v))v.stopPropagation();else if(tq(l,v),d&4&&-1<Qse.indexOf(l)){for(;x!==null;){var A=Wi(x);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var z=Kn(A.pendingLanes);if(z!==0){var j=A;for(j.pendingLanes|=2,j.entangledLanes|=2;z;){var ee=1<<31-Ye(z);j.entanglements[1]|=ee,z&=~ee}Es(A),(kt&6)===0&&(Yv=Pe()+500,nm(0))}}break;case 13:j=Vf(A,2),j!==null&&Ci(j,A,2),Xv(),kx(A,2)}if(A=Lx(v),A===null&&Ex(l,d,v,d0,p),A===x)break;x=A}x!==null&&v.stopPropagation()}else Ex(l,d,v,null,p)}}function Lx(l){return l=bp(l),Vx(l)}var d0=null;function Vx(l){if(d0=null,l=_i(l),l!==null){var d=o(l);if(d===null)l=null;else{var p=d.tag;if(p===13){if(l=s(d),l!==null)return l;l=null}else if(p===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null)}}return d0=l,null}function eq(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(qe()){case ot:return 2;case Tt:return 8;case En:case Nn:return 32;case Rt:return 268435456;default:return 32}default:return 32}}var Ux=!1,Ll=null,Vl=null,Ul=null,cm=new Map,fm=new Map,ql=[],Qse="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function tq(l,d){switch(l){case"focusin":case"focusout":Ll=null;break;case"dragenter":case"dragleave":Vl=null;break;case"mouseover":case"mouseout":Ul=null;break;case"pointerover":case"pointerout":cm.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":fm.delete(d.pointerId)}}function dm(l,d,p,v,x,A){return l===null||l.nativeEvent!==A?(l={blockedOn:d,domEventName:p,eventSystemFlags:v,nativeEvent:A,targetContainers:[x]},d!==null&&(d=Wi(d),d!==null&&Z4(d)),l):(l.eventSystemFlags|=v,d=l.targetContainers,x!==null&&d.indexOf(x)===-1&&d.push(x),l)}function Zse(l,d,p,v,x){switch(d){case"focusin":return Ll=dm(Ll,l,d,p,v,x),!0;case"dragenter":return Vl=dm(Vl,l,d,p,v,x),!0;case"mouseover":return Ul=dm(Ul,l,d,p,v,x),!0;case"pointerover":var A=x.pointerId;return cm.set(A,dm(cm.get(A)||null,l,d,p,v,x)),!0;case"gotpointercapture":return A=x.pointerId,fm.set(A,dm(fm.get(A)||null,l,d,p,v,x)),!0}return!1}function nq(l){var d=_i(l.target);if(d!==null){var p=o(d);if(p!==null){if(d=p.tag,d===13){if(d=s(p),d!==null){l.blockedOn=d,fp(l.priority,function(){if(p.tag===13){var v=Ai();v=ku(v);var x=Vf(p,v);x!==null&&Ci(x,p,v),kx(p,v)}});return}}else if(d===3&&p.stateNode.current.memoizedState.isDehydrated){l.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}l.blockedOn=null}function h0(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var p=Lx(l.nativeEvent);if(p===null){p=l.nativeEvent;var v=new p.constructor(p.type,p);_p=v,p.target.dispatchEvent(v),_p=null}else return d=Wi(p),d!==null&&Z4(d),l.blockedOn=p,!1;d.shift()}return!0}function rq(l,d,p){h0(l)&&p.delete(d)}function eae(){Ux=!1,Ll!==null&&h0(Ll)&&(Ll=null),Vl!==null&&h0(Vl)&&(Vl=null),Ul!==null&&h0(Ul)&&(Ul=null),cm.forEach(rq),fm.forEach(rq)}function p0(l,d){l.blockedOn===d&&(l.blockedOn=null,Ux||(Ux=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,eae)))}var m0=null;function iq(l){m0!==l&&(m0=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){m0===l&&(m0=null);for(var d=0;d<l.length;d+=3){var p=l[d],v=l[d+1],x=l[d+2];if(typeof v!="function"){if(Vx(v||p)===null)continue;break}var A=Wi(p);A!==null&&(l.splice(d,3),d-=3,VT(A,{pending:!0,data:x,method:p.method,action:v},v,x))}}))}function hm(l){function d(ee){return p0(ee,l)}Ll!==null&&p0(Ll,l),Vl!==null&&p0(Vl,l),Ul!==null&&p0(Ul,l),cm.forEach(d),fm.forEach(d);for(var p=0;p<ql.length;p++){var v=ql[p];v.blockedOn===l&&(v.blockedOn=null)}for(;0<ql.length&&(p=ql[0],p.blockedOn===null);)nq(p),p.blockedOn===null&&ql.shift();if(p=(l.ownerDocument||l).$$reactFormReplay,p!=null)for(v=0;v<p.length;v+=3){var x=p[v],A=p[v+1],z=x[Yn]||null;if(typeof A=="function")z||iq(p);else if(z){var j=null;if(A&&A.hasAttribute("formAction")){if(x=A,z=A[Yn]||null)j=z.formAction;else if(Vx(x)!==null)continue}else j=z.action;typeof j=="function"?p[v+1]=j:(p.splice(v,3),v-=3),iq(p)}}}function qx(l){this._internalRoot=l}g0.prototype.render=qx.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(r(409));var p=d.current,v=Ai();X4(p,v,l,d,null,null)},g0.prototype.unmount=qx.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;X4(l.current,2,null,l,null,null),Xv(),d[No]=null}};function g0(l){this._internalRoot=l}g0.prototype.unstable_scheduleHydration=function(l){if(l){var d=Po();l={blockedOn:null,target:l,priority:d};for(var p=0;p<ql.length&&d!==0&&d<ql[p].priority;p++);ql.splice(p,0,l),p===0&&nq(l)}};var oq=e.version;if(oq!=="19.1.1")throw Error(r(527,oq,"19.1.1"));te.findDOMNode=function(l){var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=u(d),l=l!==null?c(l):null,l=l===null?null:l.stateNode,l};var tae={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var y0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!y0.isDisabled&&y0.supportsFiber)try{ke=y0.inject(tae),Ue=y0}catch{}}return mm.createRoot=function(l,d){if(!i(l))throw Error(r(299));var p=!1,v="",x=wU,A=EU,z=TU,j=null;return d!=null&&(d.unstable_strictMode===!0&&(p=!0),d.identifierPrefix!==void 0&&(v=d.identifierPrefix),d.onUncaughtError!==void 0&&(x=d.onUncaughtError),d.onCaughtError!==void 0&&(A=d.onCaughtError),d.onRecoverableError!==void 0&&(z=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(j=d.unstable_transitionCallbacks)),d=Y4(l,1,!1,null,null,p,v,x,A,z,j,null),l[No]=d.current,wx(l),new qx(d)},mm.hydrateRoot=function(l,d,p){if(!i(l))throw Error(r(299));var v=!1,x="",A=wU,z=EU,j=TU,ee=null,ce=null;return p!=null&&(p.unstable_strictMode===!0&&(v=!0),p.identifierPrefix!==void 0&&(x=p.identifierPrefix),p.onUncaughtError!==void 0&&(A=p.onUncaughtError),p.onCaughtError!==void 0&&(z=p.onCaughtError),p.onRecoverableError!==void 0&&(j=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(ee=p.unstable_transitionCallbacks),p.formState!==void 0&&(ce=p.formState)),d=Y4(l,1,!0,d,p??null,v,x,A,z,j,ee,ce),d.context=J4(null),p=d.current,v=Ai(),v=ku(v),x=El(v),x.callback=null,Tl(p,x,v),p=v,d.current.lanes=p,an(d,p),Es(d),l[No]=d.current,wx(l),new g0(d)},mm.version="19.1.1",mm}var mq;function pae(){if(mq)return zx.exports;mq=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),zx.exports=hae(),zx.exports}var mae=pae();const gae=Ao(mae);/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var gq="popstate";function yae(t={}){function e(i,o){let{pathname:s="/",search:a="",hash:u=""}=uf(i.location.hash.substring(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),AN("",{pathname:s,search:a,hash:u},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){let s=i.document.querySelector("base"),a="";if(s&&s.getAttribute("href")){let u=i.location.href,c=u.indexOf("#");a=c===-1?u:u.slice(0,c)}return a+"#"+(typeof o=="string"?o:Tg(o))}function r(i,o){bo(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return _ae(e,n,r,t)}function hn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function bo(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function vae(){return Math.random().toString(36).substring(2,10)}function yq(t,e){return{usr:t.state,key:t.key,idx:e}}function AN(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?uf(e):e,state:n,key:e&&e.key||r||vae()}}function Tg({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function uf(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function _ae(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a="POP",u=null,c=f();c==null&&(c=0,s.replaceState({...s.state,idx:c},""));function f(){return(s.state||{idx:null}).idx}function h(){a="POP";let b=f(),S=b==null?null:b-c;c=b,u&&u({action:a,location:E.location,delta:S})}function g(b,S){a="PUSH";let C=AN(E.location,b,S);n&&n(C,b),c=f()+1;let R=yq(C,c),P=E.createHref(C);try{s.pushState(R,"",P)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(P)}o&&u&&u({action:a,location:E.location,delta:1})}function _(b,S){a="REPLACE";let C=AN(E.location,b,S);n&&n(C,b),c=f();let R=yq(C,c),P=E.createHref(C);s.replaceState(R,"",P),o&&u&&u({action:a,location:E.location,delta:0})}function T(b){return bae(b)}let E={get action(){return a},get location(){return t(i,s)},listen(b){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(gq,h),u=b,()=>{i.removeEventListener(gq,h),u=null}},createHref(b){return e(i,b)},createURL:T,encodeLocation(b){let S=T(b);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:g,replace:_,go(b){return s.go(b)}};return E}function bae(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),hn(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Tg(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function aK(t,e,n="/"){return wae(t,e,n,!1)}function wae(t,e,n,r){let i=typeof e=="string"?uf(e):e,o=Da(i.pathname||"/",n);if(o==null)return null;let s=lK(t);Eae(s);let a=null;for(let u=0;a==null&&u<s.length;++u){let c=Dae(o);a=Nae(s[u],c,r)}return a}function lK(t,e=[],n=[],r="",i=!1){let o=(s,a,u=i,c)=>{let f={relativePath:c===void 0?s.path||"":c,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(r)&&u)return;hn(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length)}let h=Aa([r,f.relativePath]),g=n.concat(f);s.children&&s.children.length>0&&(hn(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),lK(s.children,e,g,h,u)),!(s.path==null&&!s.index)&&e.push({path:h,score:Rae(h,s.index),routesMeta:g})};return t.forEach((s,a)=>{var u;if(s.path===""||!((u=s.path)!=null&&u.includes("?")))o(s,a);else for(let c of uK(s.path))o(s,a,!0,c)}),e}function uK(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=uK(r.join("/")),a=[];return a.push(...s.map(u=>u===""?o:[o,u].join("/"))),i&&a.push(...s),a.map(u=>t.startsWith("/")&&u===""?"/":u)}function Eae(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Pae(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var Tae=/^:[\w-]+$/,xae=3,Sae=2,Aae=1,Cae=10,Iae=-2,vq=t=>t==="*";function Rae(t,e){let n=t.split("/"),r=n.length;return n.some(vq)&&(r+=Iae),e&&(r+=Sae),n.filter(i=>!vq(i)).reduce((i,o)=>i+(Tae.test(o)?xae:o===""?Aae:Cae),r)}function Pae(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function Nae(t,e,n=!1){let{routesMeta:r}=t,i={},o="/",s=[];for(let a=0;a<r.length;++a){let u=r[a],c=a===r.length-1,f=o==="/"?e:e.slice(o.length)||"/",h=C_({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},f),g=u.route;if(!h&&c&&n&&!r[r.length-1].route.index&&(h=C_({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!h)return null;Object.assign(i,h.params),s.push({params:i,pathname:Aa([o,h.pathname]),pathnameBase:Vae(Aa([o,h.pathnameBase])),route:g}),h.pathnameBase!=="/"&&(o=Aa([o,h.pathnameBase]))}return s}function C_(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Mae(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,{paramName:f,isOptional:h},g)=>{if(f==="*"){let T=a[g]||"";s=o.slice(0,o.length-T.length).replace(/(.)\/+$/,"$1")}const _=a[g];return h&&!_?c[f]=void 0:c[f]=(_||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:s,pattern:t}}function Mae(t,e=!1,n=!0){bo(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Dae(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return bo(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Da(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function kae(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?uf(t):t;return{pathname:n?n.startsWith("/")?n:Oae(n,e):e,search:Uae(r),hash:qae(i)}}function Oae(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Kx(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Lae(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function M2(t){let e=Lae(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function D2(t,e,n,r=!1){let i;typeof t=="string"?i=uf(t):(i={...t},hn(!i.pathname||!i.pathname.includes("?"),Kx("?","pathname","search",i)),hn(!i.pathname||!i.pathname.includes("#"),Kx("#","pathname","hash",i)),hn(!i.search||!i.search.includes("#"),Kx("#","search","hash",i)));let o=t===""||i.pathname==="",s=o?"/":i.pathname,a;if(s==null)a=n;else{let h=e.length-1;if(!r&&s.startsWith("..")){let g=s.split("/");for(;g[0]==="..";)g.shift(),h-=1;i.pathname=g.join("/")}a=h>=0?e[h]:"/"}let u=kae(i,a),c=s&&s!=="/"&&s.endsWith("/"),f=(o||s===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||f)&&(u.pathname+="/"),u}var Aa=t=>t.join("/").replace(/\/\/+/g,"/"),Vae=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Uae=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,qae=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Fae(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var cK=["POST","PUT","PATCH","DELETE"];new Set(cK);var Bae=["GET",...cK];new Set(Bae);var Nh=M.createContext(null);Nh.displayName="DataRouter";var Qb=M.createContext(null);Qb.displayName="DataRouterState";M.createContext(!1);var fK=M.createContext({isTransitioning:!1});fK.displayName="ViewTransition";var $ae=M.createContext(new Map);$ae.displayName="Fetchers";var zae=M.createContext(null);zae.displayName="Await";var Zo=M.createContext(null);Zo.displayName="Navigation";var uy=M.createContext(null);uy.displayName="Location";var es=M.createContext({outlet:null,matches:[],isDataRoute:!1});es.displayName="Route";var k2=M.createContext(null);k2.displayName="RouteError";function Hae(t,{relative:e}={}){hn(Mh(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=M.useContext(Zo),{hash:i,pathname:o,search:s}=fy(t,{relative:e}),a=o;return n!=="/"&&(a=o==="/"?n:Aa([n,o])),r.createHref({pathname:a,search:s,hash:i})}function Mh(){return M.useContext(uy)!=null}function Gs(){return hn(Mh(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(uy).location}var dK="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function hK(t){M.useContext(Zo).static||M.useLayoutEffect(t)}function cy(){let{isDataRoute:t}=M.useContext(es);return t?rle():Gae()}function Gae(){hn(Mh(),"useNavigate() may be used only in the context of a <Router> component.");let t=M.useContext(Nh),{basename:e,navigator:n}=M.useContext(Zo),{matches:r}=M.useContext(es),{pathname:i}=Gs(),o=JSON.stringify(M2(r)),s=M.useRef(!1);return hK(()=>{s.current=!0}),M.useCallback((u,c={})=>{if(bo(s.current,dK),!s.current)return;if(typeof u=="number"){n.go(u);return}let f=D2(u,JSON.parse(o),i,c.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Aa([e,f.pathname])),(c.replace?n.replace:n.push)(f,c.state,c)},[e,n,o,i,t])}M.createContext(null);function O2(){let{matches:t}=M.useContext(es),e=t[t.length-1];return e?e.params:{}}function fy(t,{relative:e}={}){let{matches:n}=M.useContext(es),{pathname:r}=Gs(),i=JSON.stringify(M2(n));return M.useMemo(()=>D2(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function jae(t,e){return pK(t,e)}function pK(t,e,n,r,i){var C;hn(Mh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=M.useContext(Zo),{matches:s}=M.useContext(es),a=s[s.length-1],u=a?a.params:{},c=a?a.pathname:"/",f=a?a.pathnameBase:"/",h=a&&a.route;{let R=h&&h.path||"";mK(c,!h||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let g=Gs(),_;if(e){let R=typeof e=="string"?uf(e):e;hn(f==="/"||((C=R.pathname)==null?void 0:C.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${R.pathname}" was given in the \`location\` prop.`),_=R}else _=g;let T=_.pathname||"/",E=T;if(f!=="/"){let R=f.replace(/^\//,"").split("/");E="/"+T.replace(/^\//,"").split("/").slice(R.length).join("/")}let b=aK(t,{pathname:E});bo(h||b!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),bo(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=Xae(b&&b.map(R=>Object.assign({},R,{params:Object.assign({},u,R.params),pathname:Aa([f,o.encodeLocation?o.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?f:Aa([f,o.encodeLocation?o.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),s,n,r,i);return e&&S?M.createElement(uy.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},S):S}function Kae(){let t=nle(),e=Fae(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=M.createElement(M.Fragment,null,M.createElement("p",null,"💿 Hey developer 👋"),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:o},"ErrorBoundary")," or"," ",M.createElement("code",{style:o},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:i},n):null,s)}var Wae=M.createElement(Kae,null),Yae=class extends M.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?M.createElement(es.Provider,{value:this.props.routeContext},M.createElement(k2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Jae({routeContext:t,match:e,children:n}){let r=M.useContext(Nh);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement(es.Provider,{value:t},n)}function Xae(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,s=n==null?void 0:n.errors;if(s!=null){let c=o.findIndex(f=>f.route.id&&(s==null?void 0:s[f.route.id])!==void 0);hn(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),o=o.slice(0,Math.min(o.length,c+1))}let a=!1,u=-1;if(n)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=c),f.route.id){let{loaderData:h,errors:g}=n,_=f.route.loader&&!h.hasOwnProperty(f.route.id)&&(!g||g[f.route.id]===void 0);if(f.route.lazy||_){a=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,f,h)=>{let g,_=!1,T=null,E=null;n&&(g=s&&f.route.id?s[f.route.id]:void 0,T=f.route.errorElement||Wae,a&&(u<0&&h===0?(mK("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,E=null):u===h&&(_=!0,E=f.route.hydrateFallbackElement||null)));let b=e.concat(o.slice(0,h+1)),S=()=>{let C;return g?C=T:_?C=E:f.route.Component?C=M.createElement(f.route.Component,null):f.route.element?C=f.route.element:C=c,M.createElement(Jae,{match:f,routeContext:{outlet:c,matches:b,isDataRoute:n!=null},children:C})};return n&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?M.createElement(Yae,{location:n.location,revalidation:n.revalidation,component:T,error:g,children:S(),routeContext:{outlet:null,matches:b,isDataRoute:!0},unstable_onError:r}):S()},null)}function L2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Qae(t){let e=M.useContext(Nh);return hn(e,L2(t)),e}function Zae(t){let e=M.useContext(Qb);return hn(e,L2(t)),e}function ele(t){let e=M.useContext(es);return hn(e,L2(t)),e}function V2(t){let e=ele(t),n=e.matches[e.matches.length-1];return hn(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function tle(){return V2("useRouteId")}function nle(){var r;let t=M.useContext(k2),e=Zae("useRouteError"),n=V2("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function rle(){let{router:t}=Qae("useNavigate"),e=V2("useNavigate"),n=M.useRef(!1);return hK(()=>{n.current=!0}),M.useCallback(async(i,o={})=>{bo(n.current,dK),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...o}))},[t,e])}var _q={};function mK(t,e,n){!e&&!_q[t]&&(_q[t]=!0,bo(!1,n))}M.memo(ile);function ile({routes:t,future:e,state:n,unstable_onError:r}){return pK(t,void 0,n,r,e)}function bq({to:t,replace:e,state:n,relative:r}){hn(Mh(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=M.useContext(Zo);bo(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=M.useContext(es),{pathname:s}=Gs(),a=cy(),u=D2(t,M2(o),s,r==="path"),c=JSON.stringify(u);return M.useEffect(()=>{a(JSON.parse(c),{replace:e,state:n,relative:r})},[a,c,r,e,n]),null}function Yr(t){hn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ole({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:o=!1}){hn(!Mh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=t.replace(/^\/*/,"/"),a=M.useMemo(()=>({basename:s,navigator:i,static:o,future:{}}),[s,i,o]);typeof n=="string"&&(n=uf(n));let{pathname:u="/",search:c="",hash:f="",state:h=null,key:g="default"}=n,_=M.useMemo(()=>{let T=Da(u,s);return T==null?null:{location:{pathname:T,search:c,hash:f,state:h,key:g},navigationType:r}},[s,u,c,f,h,g,r]);return bo(_!=null,`<Router basename="${s}"> is not able to match the URL "${u}${c}${f}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:M.createElement(Zo.Provider,{value:a},M.createElement(uy.Provider,{children:e,value:_}))}function wq({children:t,location:e}){return jae(CN(t),e)}function CN(t,e=[]){let n=[];return M.Children.forEach(t,(r,i)=>{if(!M.isValidElement(r))return;let o=[...e,i];if(r.type===M.Fragment){n.push.apply(n,CN(r.props.children,o));return}hn(r.type===Yr,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),hn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=CN(r.props.children,o)),n.push(s)}),n}var n_="get",r_="application/x-www-form-urlencoded";function Zb(t){return t!=null&&typeof t.tagName=="string"}function sle(t){return Zb(t)&&t.tagName.toLowerCase()==="button"}function ale(t){return Zb(t)&&t.tagName.toLowerCase()==="form"}function lle(t){return Zb(t)&&t.tagName.toLowerCase()==="input"}function ule(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function cle(t,e){return t.button===0&&(!e||e==="_self")&&!ule(t)}var _0=null;function fle(){if(_0===null)try{new FormData(document.createElement("form"),0),_0=!1}catch{_0=!0}return _0}var dle=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Wx(t){return t!=null&&!dle.has(t)?(bo(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${r_}"`),null):t}function hle(t,e){let n,r,i,o,s;if(ale(t)){let a=t.getAttribute("action");r=a?Da(a,e):null,n=t.getAttribute("method")||n_,i=Wx(t.getAttribute("enctype"))||r_,o=new FormData(t)}else if(sle(t)||lle(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||a.getAttribute("action");if(r=u?Da(u,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||n_,i=Wx(t.getAttribute("formenctype"))||Wx(a.getAttribute("enctype"))||r_,o=new FormData(a,t),!fle()){let{name:c,type:f,value:h}=t;if(f==="image"){let g=c?`${c}.`:"";o.append(`${g}x`,"0"),o.append(`${g}y`,"0")}else c&&o.append(c,h)}}else{if(Zb(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=n_,r=null,i=r_,s=t}return o&&i==="text/plain"&&(s=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function U2(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ple(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Da(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function mle(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function gle(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function yle(t,e,n){let r=await Promise.all(t.map(async i=>{let o=e.routes[i.route.id];if(o){let s=await mle(o,n);return s.links?s.links():[]}return[]}));return wle(r.flat(1).filter(gle).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Eq(t,e,n,r,i,o){let s=(u,c)=>n[c]?u.route.id!==n[c].route.id:!0,a=(u,c)=>{var f;return n[c].pathname!==u.pathname||((f=n[c].route.path)==null?void 0:f.endsWith("*"))&&n[c].params["*"]!==u.params["*"]};return o==="assets"?e.filter((u,c)=>s(u,c)||a(u,c)):o==="data"?e.filter((u,c)=>{var h;let f=r.routes[u.route.id];if(!f||!f.hasLoader)return!1;if(s(u,c)||a(u,c))return!0;if(u.route.shouldRevalidate){let g=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((h=n[0])==null?void 0:h.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function vle(t,e,{includeHydrateFallback:n}={}){return _le(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function _le(t){return[...new Set(t)]}function ble(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function wle(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let o=JSON.stringify(ble(i));return n.has(o)||(n.add(o),r.push({key:o,link:i})),r},[])}function gK(){let t=M.useContext(Nh);return U2(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Ele(){let t=M.useContext(Qb);return U2(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var q2=M.createContext(void 0);q2.displayName="FrameworkContext";function yK(){let t=M.useContext(q2);return U2(t,"You must render this element inside a <HydratedRouter> element"),t}function Tle(t,e){let n=M.useContext(q2),[r,i]=M.useState(!1),[o,s]=M.useState(!1),{onFocus:a,onBlur:u,onMouseEnter:c,onMouseLeave:f,onTouchStart:h}=e,g=M.useRef(null);M.useEffect(()=>{if(t==="render"&&s(!0),t==="viewport"){let E=S=>{S.forEach(C=>{s(C.isIntersecting)})},b=new IntersectionObserver(E,{threshold:.5});return g.current&&b.observe(g.current),()=>{b.disconnect()}}},[t]),M.useEffect(()=>{if(r){let E=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(E)}}},[r]);let _=()=>{i(!0)},T=()=>{i(!1),s(!1)};return n?t!=="intent"?[o,g,{}]:[o,g,{onFocus:gm(a,_),onBlur:gm(u,T),onMouseEnter:gm(c,_),onMouseLeave:gm(f,T),onTouchStart:gm(h,_)}]:[!1,g,{}]}function gm(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function xle({page:t,...e}){let{router:n}=gK(),r=M.useMemo(()=>aK(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?M.createElement(Ale,{page:t,matches:r,...e}):null}function Sle(t){let{manifest:e,routeModules:n}=yK(),[r,i]=M.useState([]);return M.useEffect(()=>{let o=!1;return yle(t,e,n).then(s=>{o||i(s)}),()=>{o=!0}},[t,e,n]),r}function Ale({page:t,matches:e,...n}){let r=Gs(),{manifest:i,routeModules:o}=yK(),{basename:s}=gK(),{loaderData:a,matches:u}=Ele(),c=M.useMemo(()=>Eq(t,e,u,i,r,"data"),[t,e,u,i,r]),f=M.useMemo(()=>Eq(t,e,u,i,r,"assets"),[t,e,u,i,r]),h=M.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let T=new Set,E=!1;if(e.forEach(S=>{var R;let C=i.routes[S.route.id];!C||!C.hasLoader||(!c.some(P=>P.route.id===S.route.id)&&S.route.id in a&&((R=o[S.route.id])!=null&&R.shouldRevalidate)||C.hasClientLoader?E=!0:T.add(S.route.id))}),T.size===0)return[];let b=ple(t,s,"data");return E&&T.size>0&&b.searchParams.set("_routes",e.filter(S=>T.has(S.route.id)).map(S=>S.route.id).join(",")),[b.pathname+b.search]},[s,a,r,i,c,e,t,o]),g=M.useMemo(()=>vle(f,i),[f,i]),_=Sle(f);return M.createElement(M.Fragment,null,h.map(T=>M.createElement("link",{key:T,rel:"prefetch",as:"fetch",href:T,...n})),g.map(T=>M.createElement("link",{key:T,rel:"modulepreload",href:T,...n})),_.map(({key:T,link:E})=>M.createElement("link",{key:T,nonce:n.nonce,...E})))}function Cle(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var vK=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{vK&&(window.__reactRouterVersion="7.9.1")}catch{}function Ile({basename:t,children:e,window:n}){let r=M.useRef();r.current==null&&(r.current=yae({window:n,v5Compat:!0}));let i=r.current,[o,s]=M.useState({action:i.action,location:i.location}),a=M.useCallback(u=>{M.startTransition(()=>s(u))},[s]);return M.useLayoutEffect(()=>i.listen(a),[i,a]),M.createElement(ole,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:i})}var _K=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bK=M.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:s,state:a,target:u,to:c,preventScrollReset:f,viewTransition:h,...g},_){let{basename:T}=M.useContext(Zo),E=typeof c=="string"&&_K.test(c),b,S=!1;if(typeof c=="string"&&E&&(b=c,vK))try{let N=new URL(window.location.href),U=c.startsWith("//")?new URL(N.protocol+c):new URL(c),V=Da(U.pathname,T);U.origin===N.origin&&V!=null?c=V+U.search+U.hash:S=!0}catch{bo(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=Hae(c,{relative:i}),[R,P,O]=Tle(r,g),q=Mle(c,{replace:s,state:a,target:u,preventScrollReset:f,relative:i,viewTransition:h});function D(N){e&&e(N),N.defaultPrevented||q(N)}let L=M.createElement("a",{...g,...O,href:b||C,onClick:S||o?e:D,ref:Cle(_,P),target:u,"data-discover":!E&&n==="render"?"true":void 0});return R&&!E?M.createElement(M.Fragment,null,L,M.createElement(xle,{page:C})):L});bK.displayName="Link";var Rle=M.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:s,viewTransition:a,children:u,...c},f){let h=fy(s,{relative:c.relative}),g=Gs(),_=M.useContext(Qb),{navigator:T,basename:E}=M.useContext(Zo),b=_!=null&&Vle(h)&&a===!0,S=T.encodeLocation?T.encodeLocation(h).pathname:h.pathname,C=g.pathname,R=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;n||(C=C.toLowerCase(),R=R?R.toLowerCase():null,S=S.toLowerCase()),R&&E&&(R=Da(R,E)||R);const P=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let O=C===S||!i&&C.startsWith(S)&&C.charAt(P)==="/",q=R!=null&&(R===S||!i&&R.startsWith(S)&&R.charAt(S.length)==="/"),D={isActive:O,isPending:q,isTransitioning:b},L=O?e:void 0,N;typeof r=="function"?N=r(D):N=[r,O?"active":null,q?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let U=typeof o=="function"?o(D):o;return M.createElement(bK,{...c,"aria-current":L,className:N,ref:f,style:U,to:s,viewTransition:a},typeof u=="function"?u(D):u)});Rle.displayName="NavLink";var Ple=M.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:o,method:s=n_,action:a,onSubmit:u,relative:c,preventScrollReset:f,viewTransition:h,...g},_)=>{let T=Ole(),E=Lle(a,{relative:c}),b=s.toLowerCase()==="get"?"get":"post",S=typeof a=="string"&&_K.test(a),C=R=>{if(u&&u(R),R.defaultPrevented)return;R.preventDefault();let P=R.nativeEvent.submitter,O=(P==null?void 0:P.getAttribute("formmethod"))||s;T(P||R.currentTarget,{fetcherKey:e,method:O,navigate:n,replace:i,state:o,relative:c,preventScrollReset:f,viewTransition:h})};return M.createElement("form",{ref:_,method:b,action:E,onSubmit:r?u:C,...g,"data-discover":!S&&t==="render"?"true":void 0})});Ple.displayName="Form";function Nle(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wK(t){let e=M.useContext(Nh);return hn(e,Nle(t)),e}function Mle(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:s}={}){let a=cy(),u=Gs(),c=fy(t,{relative:o});return M.useCallback(f=>{if(cle(f,e)){f.preventDefault();let h=n!==void 0?n:Tg(u)===Tg(c);a(t,{replace:h,state:r,preventScrollReset:i,relative:o,viewTransition:s})}},[u,a,c,n,r,e,t,i,o,s])}var Dle=0,kle=()=>`__${String(++Dle)}__`;function Ole(){let{router:t}=wK("useSubmit"),{basename:e}=M.useContext(Zo),n=tle();return M.useCallback(async(r,i={})=>{let{action:o,method:s,encType:a,formData:u,body:c}=hle(r,e);if(i.navigate===!1){let f=i.fetcherKey||kle();await t.fetch(f,n,i.action||o,{preventScrollReset:i.preventScrollReset,formData:u,body:c,formMethod:i.method||s,formEncType:i.encType||a,flushSync:i.flushSync})}else await t.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:u,body:c,formMethod:i.method||s,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function Lle(t,{relative:e}={}){let{basename:n}=M.useContext(Zo),r=M.useContext(es);hn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...fy(t||".",{relative:e})},s=Gs();if(t==null){o.search=s.search;let a=new URLSearchParams(o.search),u=a.getAll("index");if(u.some(f=>f==="")){a.delete("index"),u.filter(h=>h).forEach(h=>a.append("index",h));let f=a.toString();o.search=f?`?${f}`:""}}return(!t||t===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Aa([n,o.pathname])),Tg(o)}function Vle(t,{relative:e}={}){let n=M.useContext(fK);hn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=wK("useViewTransitionState"),i=fy(t,{relative:e});if(!n.isTransitioning)return!1;let o=Da(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=Da(n.nextLocation.pathname,r)||n.nextLocation.pathname;return C_(i.pathname,s)!=null||C_(i.pathname,o)!=null}var EK=sK();const Ule=()=>{};var Tq={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TK=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},qle=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},xK={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,f=o>>2,h=(o&3)<<4|a>>4;let g=(a&15)<<2|c>>6,_=c&63;u||(_=64,s||(g=64)),r.push(n[f],n[h],n[g],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(TK(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):qle(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||c==null||h==null)throw new Fle;const g=o<<2|a>>4;if(r.push(g),c!==64){const _=a<<4&240|c>>2;if(r.push(_),h!==64){const T=c<<6&192|h;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Fle extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ble=function(t){const e=TK(t);return xK.encodeByteArray(e,!0)},I_=function(t){return Ble(t).replace(/\./g,"")},F2=function(t){try{return xK.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function R_(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!$le(n)||(t[n]=R_(t[n],e[n]));return t}function $le(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zle=()=>B2().__FIREBASE_DEFAULTS__,Hle=()=>{if(typeof process>"u"||typeof Tq>"u")return;const t=Tq.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Gle=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&F2(t[1]);return e&&JSON.parse(e)},ew=()=>{try{return Ule()||zle()||Hle()||Gle()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},jle=t=>{var e,n;return(n=(e=ew())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},Kle=t=>{const e=jle(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},$2=()=>{var t;return(t=ew())==null?void 0:t.config},Wle=t=>{var e;return(e=ew())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yle{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wu(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function z2(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SK(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[I_(JSON.stringify(n)),I_(JSON.stringify(s)),""].join(".")}const rg={};function Jle(){const t={prod:[],emulator:[]};for(const e of Object.keys(rg))rg[e]?t.emulator.push(e):t.prod.push(e);return t}function Xle(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let xq=!1;function H2(t,e){if(typeof window>"u"||typeof document>"u"||!wu(window.location.host)||rg[t]===e||rg[t]||xq)return;rg[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",o=Jle().prod.length>0;function s(){const g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,_){g.setAttribute("width","24"),g.setAttribute("id",_),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function c(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{xq=!0,s()},g}function f(g,_){g.setAttribute("id",_),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function h(){const g=Xle(r),_=n("text"),T=document.getElementById(_)||document.createElement("span"),E=n("learnmore"),b=document.getElementById(E)||document.createElement("a"),S=n("preprendIcon"),C=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const R=g.element;a(R),f(b,E);const P=c();u(C,S),R.append(C,T,b,P),document.body.appendChild(R)}o?(T.innerText="Preview backend disconnected.",C.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(C.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Qle(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_n())}function tw(){var e;const t=(e=ew())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Zle(){return typeof window<"u"||AK()}function AK(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function eue(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function CK(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function G2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function IK(){const t=_n();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function RK(){return!tw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function PK(){return!tw()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function xg(){try{return typeof indexedDB=="object"}catch{return!1}}function tue(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nue="FirebaseError";class $r extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=nue,Object.setPrototypeOf(this,$r.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cf.prototype.create)}}class cf{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?rue(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new $r(i,a,r)}}function rue(t,e){return t.replace(iue,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const iue=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sq(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function oue(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function lu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(Aq(o)&&Aq(s)){if(!lu(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Aq(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dh(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Cd(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Bm(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function NK(t,e){const n=new sue(t,e);return n.subscribe.bind(n)}class sue{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");aue(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Yx),i.error===void 0&&(i.error=Yx),i.complete===void 0&&(i.complete=Yx);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aue(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Yx(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(t){return t&&t._delegate?t._delegate:t}class wo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lue=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Yle;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cue(e))try{this.getOrInitializeService({instanceIdentifier:dc})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=dc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=dc){return this.instances.has(e)}getOptions(e=dc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:uue(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=dc){return this.component?this.component.multipleInstances?e:dc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function uue(t){return t===dc?void 0:t}function cue(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MK{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new lue(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2=[];var gt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(gt||(gt={}));const DK={debug:gt.DEBUG,verbose:gt.VERBOSE,info:gt.INFO,warn:gt.WARN,error:gt.ERROR,silent:gt.SILENT},fue=gt.INFO,due={[gt.DEBUG]:"log",[gt.VERBOSE]:"log",[gt.INFO]:"info",[gt.WARN]:"warn",[gt.ERROR]:"error"},hue=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=due[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class nw{constructor(e){this.name=e,this._logLevel=fue,this._logHandler=hue,this._userLogHandler=null,j2.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in gt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?DK[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,gt.DEBUG,...e),this._logHandler(this,gt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,gt.VERBOSE,...e),this._logHandler(this,gt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,gt.INFO,...e),this._logHandler(this,gt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,gt.WARN,...e),this._logHandler(this,gt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,gt.ERROR,...e),this._logHandler(this,gt.ERROR,...e)}}function pue(t){j2.forEach(e=>{e.setLogLevel(t)})}function mue(t,e){for(const n of j2){let r=null;e&&e.level&&(r=DK[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,o,...s)=>{const a=s.map(u=>{if(u==null)return null;if(typeof u=="string")return u;if(typeof u=="number"||typeof u=="boolean")return u.toString();if(u instanceof Error)return u.message;try{return JSON.stringify(u)}catch{return null}}).filter(u=>u).join(" ");o>=(r??i.logLevel)&&t({level:gt[o].toLowerCase(),message:a,args:s,type:i.name})}}}const gue=(t,e)=>e.some(n=>t instanceof n);let Cq,Iq;function yue(){return Cq||(Cq=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vue(){return Iq||(Iq=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kK=new WeakMap,IN=new WeakMap,OK=new WeakMap,Jx=new WeakMap,K2=new WeakMap;function _ue(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(tu(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&kK.set(n,t)}).catch(()=>{}),K2.set(e,t),e}function bue(t){if(IN.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});IN.set(t,e)}let RN={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return IN.get(t);if(e==="objectStoreNames")return t.objectStoreNames||OK.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return tu(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function wue(t){RN=t(RN)}function Eue(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Xx(this),e,...n);return OK.set(r,e.sort?e.sort():[e]),tu(r)}:vue().includes(t)?function(...e){return t.apply(Xx(this),e),tu(kK.get(this))}:function(...e){return tu(t.apply(Xx(this),e))}}function Tue(t){return typeof t=="function"?Eue(t):(t instanceof IDBTransaction&&bue(t),gue(t,yue())?new Proxy(t,RN):t)}function tu(t){if(t instanceof IDBRequest)return _ue(t);if(Jx.has(t))return Jx.get(t);const e=Tue(t);return e!==t&&(Jx.set(t,e),K2.set(e,t)),e}const Xx=t=>K2.get(t);function xue(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=tu(s);return r&&s.addEventListener("upgradeneeded",u=>{r(tu(s.result),u.oldVersion,u.newVersion,tu(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Sue=["get","getKey","getAll","getAllKeys","count"],Aue=["put","add","delete","clear"],Qx=new Map;function Rq(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Qx.get(e))return Qx.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Aue.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Sue.includes(n)))return;const o=async function(s,...a){const u=this.transaction(s,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&u.done]))[0]};return Qx.set(e,o),o}wue(t=>({...t,get:(e,n,r)=>Rq(e,n)||t.get(e,n,r),has:(e,n)=>!!Rq(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cue{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Iue(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Iue(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const P_="@firebase/app",PN="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka=new nw("@firebase/app"),Rue="@firebase/app-compat",Pue="@firebase/analytics-compat",Nue="@firebase/analytics",Mue="@firebase/app-check-compat",Due="@firebase/app-check",kue="@firebase/auth",Oue="@firebase/auth-compat",Lue="@firebase/database",Vue="@firebase/data-connect",Uue="@firebase/database-compat",que="@firebase/functions",Fue="@firebase/functions-compat",Bue="@firebase/installations",$ue="@firebase/installations-compat",zue="@firebase/messaging",Hue="@firebase/messaging-compat",Gue="@firebase/performance",jue="@firebase/performance-compat",Kue="@firebase/remote-config",Wue="@firebase/remote-config-compat",Yue="@firebase/storage",Jue="@firebase/storage-compat",Xue="@firebase/firestore",Que="@firebase/ai",Zue="@firebase/firestore-compat",ece="firebase",tce="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uu="[DEFAULT]",nce={[P_]:"fire-core",[Rue]:"fire-core-compat",[Nue]:"fire-analytics",[Pue]:"fire-analytics-compat",[Due]:"fire-app-check",[Mue]:"fire-app-check-compat",[kue]:"fire-auth",[Oue]:"fire-auth-compat",[Lue]:"fire-rtdb",[Vue]:"fire-data-connect",[Uue]:"fire-rtdb-compat",[que]:"fire-fn",[Fue]:"fire-fn-compat",[Bue]:"fire-iid",[$ue]:"fire-iid-compat",[zue]:"fire-fcm",[Hue]:"fire-fcm-compat",[Gue]:"fire-perf",[jue]:"fire-perf-compat",[Kue]:"fire-rc",[Wue]:"fire-rc-compat",[Yue]:"fire-gcs",[Jue]:"fire-gcs-compat",[Xue]:"fire-fst",[Zue]:"fire-fst-compat",[Que]:"fire-vertex","fire-js":"fire-js",[ece]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu=new Map,Gd=new Map,jd=new Map;function Sg(t,e){try{t.container.addComponent(e)}catch(n){ka.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function LK(t,e){t.container.addOrOverwriteComponent(e)}function Oa(t){const e=t.name;if(jd.has(e))return ka.debug(`There were multiple attempts to register component ${e}.`),!1;jd.set(e,t);for(const n of cu.values())Sg(n,t);for(const n of Gd.values())Sg(n,t);return!0}function W2(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function rce(t,e,n=uu){W2(t,e).clearInstance(n)}function Y2(t){return t.options!==void 0}function VK(t){return Y2(t)?!1:"authIdToken"in t||"appCheckToken"in t||"releaseOnDeref"in t||"automaticDataCollectionEnabled"in t}function rn(t){return t==null?!1:t.settings!==void 0}function ice(){jd.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oce={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Li=new cf("app","Firebase",oce);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let UK=class{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new wo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Li.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pq(t,e){const n=F2(t.split(".")[1]);if(n===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(n).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const i=JSON.parse(n).exp*1e3,o=new Date().getTime();i-o<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class sce extends UK{constructor(e,n,r,i){const o=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!0,s={name:r,automaticDataCollectionEnabled:o};if(e.apiKey!==void 0)super(e,s,i);else{const a=e;super(a.options,s,i)}this._serverConfig={automaticDataCollectionEnabled:o,...n},this._serverConfig.authIdToken&&Pq(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&Pq(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,Vi(P_,PN,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){X2(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Li.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ga=tce;function J2(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:uu,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Li.create("bad-app-name",{appName:String(i)});if(n||(n=$2()),!n)throw Li.create("no-options");const o=cu.get(i);if(o){if(lu(n,o.options)&&lu(r,o.config))return o;throw Li.create("duplicate-app",{appName:i})}const s=new MK(i);for(const u of jd.values())s.addComponent(u);const a=new UK(n,r,s);return cu.set(i,a),a}function ace(t,e={}){if(Zle()&&!AK())throw Li.create("invalid-server-app-environment");let n,r=e||{};if(t&&(Y2(t)?n=t.options:VK(t)?r=t:n=t),r.automaticDataCollectionEnabled===void 0&&(r.automaticDataCollectionEnabled=!0),n||(n=$2()),!n)throw Li.create("no-options");const i={...r,...n};i.releaseOnDeref!==void 0&&delete i.releaseOnDeref;const o=f=>[...f].reduce((h,g)=>Math.imul(31,h)+g.charCodeAt(0)|0,0);if(r.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Li.create("finalization-registry-not-supported",{});const s=""+o(JSON.stringify(i)),a=Gd.get(s);if(a)return a.incRefCount(r.releaseOnDeref),a;const u=new MK(s);for(const f of jd.values())u.addComponent(f);const c=new sce(n,r,s,u);return Gd.set(s,c),c}function qK(t=uu){const e=cu.get(t);if(!e&&t===uu&&$2())return J2();if(!e)throw Li.create("no-app",{appName:t});return e}function lce(){return Array.from(cu.values())}async function X2(t){let e=!1;const n=t.name;cu.has(n)?(e=!0,cu.delete(n)):Gd.has(n)&&t.decRefCount()<=0&&(Gd.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function Vi(t,e,n){let r=nce[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ka.warn(s.join(" "));return}Oa(new wo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function FK(t,e){if(t!==null&&typeof t!="function")throw Li.create("invalid-log-argument");mue(t,e)}function BK(t){pue(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uce="firebase-heartbeat-database",cce=1,Ag="firebase-heartbeat-store";let Zx=null;function $K(){return Zx||(Zx=xue(uce,cce,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ag)}catch(n){console.warn(n)}}}}).catch(t=>{throw Li.create("idb-open",{originalErrorMessage:t.message})})),Zx}async function fce(t){try{const n=(await $K()).transaction(Ag),r=await n.objectStore(Ag).get(zK(t));return await n.done,r}catch(e){if(e instanceof $r)ka.warn(e.message);else{const n=Li.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ka.warn(n.message)}}}async function Nq(t,e){try{const r=(await $K()).transaction(Ag,"readwrite");await r.objectStore(Ag).put(e,zK(t)),await r.done}catch(n){if(n instanceof $r)ka.warn(n.message);else{const r=Li.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ka.warn(r.message)}}}function zK(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dce=1024,hce=30;class pce{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new gce(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Mq();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>hce){const s=yce(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ka.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Mq(),{heartbeatsToSend:r,unsentEntries:i}=mce(this._heartbeatsCache.heartbeats),o=I_(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return ka.warn(n),""}}}function Mq(){return new Date().toISOString().substring(0,10)}function mce(t,e=dce){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Dq(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Dq(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class gce{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xg()?tue().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await fce(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Nq(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Nq(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Dq(t){return I_(JSON.stringify({version:2,heartbeats:t})).length}function yce(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vce(t){Oa(new wo("platform-logger",e=>new Cue(e),"PRIVATE")),Oa(new wo("heartbeat",e=>new pce(e),"PRIVATE")),Vi(P_,PN,t),Vi(P_,PN,"esm2020"),Vi("fire-js","")}vce("");const _ce=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:$r,SDK_VERSION:Ga,_DEFAULT_ENTRY_NAME:uu,_addComponent:Sg,_addOrOverwriteComponent:LK,_apps:cu,_clearComponents:ice,_components:jd,_getProvider:W2,_isFirebaseApp:Y2,_isFirebaseServerApp:rn,_isFirebaseServerAppSettings:VK,_registerComponent:Oa,_removeServiceInstance:rce,_serverApps:Gd,deleteApp:X2,getApp:qK,getApps:lce,initializeApp:J2,initializeServerApp:ace,onLog:FK,registerVersion:Vi,setLogLevel:BK},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bce{constructor(e,n){this._delegate=e,this.firebase=n,Sg(e,new wo("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),X2(this._delegate)))}_getService(e,n=uu){var i;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&((i=r.getComponent())==null?void 0:i.instantiationMode)==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:n})}_removeServiceInstance(e,n=uu){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Sg(this._delegate,e)}_addOrOverwriteComponent(e){LK(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wce={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},kq=new cf("app-compat","Firebase",wce);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ece(t){const e={},n={__esModule:!0,initializeApp:o,app:i,registerVersion:Vi,setLogLevel:BK,onLog:FK,apps:null,SDK_VERSION:Ga,INTERNAL:{registerComponent:a,removeApp:r,useAsService:u,modularAPIs:_ce}};n.default=n,Object.defineProperty(n,"apps",{get:s});function r(c){delete e[c]}function i(c){if(c=c||uu,!Sq(e,c))throw kq.create("no-app",{appName:c});return e[c]}i.App=t;function o(c,f={}){const h=J2(c,f);if(Sq(e,h.name))return e[h.name];const g=new t(h,n);return e[h.name]=g,g}function s(){return Object.keys(e).map(c=>e[c])}function a(c){const f=c.name,h=f.replace("-compat","");if(Oa(c)&&c.type==="PUBLIC"){const g=(_=i())=>{if(typeof _[h]!="function")throw kq.create("invalid-app-argument",{appName:f});return _[h]()};c.serviceProps!==void 0&&R_(g,c.serviceProps),n[h]=g,t.prototype[h]=function(..._){return this._getService.bind(this,f).apply(this,c.multipleInstances?_:[])}}return c.type==="PUBLIC"?n[h]:null}function u(c,f){return f==="serverAuth"?null:f}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HK(){const t=Ece(bce);t.INTERNAL={...t.INTERNAL,createFirebaseNamespace:HK,extendNamespace:e,createSubscribe:NK,ErrorFactory:cf,deepExtend:R_};function e(n){R_(t,n)}return t}const Tce=HK();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oq=new nw("@firebase/app-compat"),xce="@firebase/app-compat",Sce="0.5.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ace(t){Vi(xce,Sce,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=B2();if(t.firebase!==void 0){Oq.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&Oq.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const ja=Tce;Ace();var Cce="firebase",Ice="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ja.registerVersion(Cce,Ice,"app-compat");const ym={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},ld={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rce(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function GK(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Pce=Rce,Nce=GK,jK=new cf("auth","Firebase",GK());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N_=new nw("@firebase/auth");function Mce(t,...e){N_.logLevel<=gt.WARN&&N_.warn(`Auth (${Ga}): ${t}`,...e)}function i_(t,...e){N_.logLevel<=gt.ERROR&&N_.error(`Auth (${Ga}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(t,...e){throw Z2(t,...e)}function er(t,...e){return Z2(t,...e)}function Q2(t,e,n){const r={...Nce(),[e]:n};return new cf("auth","Firebase",r).create(e,{appName:t.name})}function dr(t){return Q2(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function kh(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Rr(t,"argument-error"),Q2(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Z2(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return jK.create(t,...e)}function Re(t,e,...n){if(!t)throw Z2(e,...n)}function Ns(t){const e="INTERNAL ASSERTION FAILED: "+t;throw i_(e),new Error(e)}function Jo(t,e){t||Ns(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function eD(){return Lq()==="http:"||Lq()==="https:"}function Lq(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dce(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eD()||CK()||"connection"in navigator)?navigator.onLine:!0}function kce(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e,n){this.shortDelay=e,this.longDelay=n,Jo(n>e,"Short delay should be less than long delay!"),this.isMobile=Qle()||G2()}get(){return Dce()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tD(t,e){Jo(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KK{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ns("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ns("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ns("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oce={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lce=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Vce=new dy(3e4,6e4);function Rn(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Pn(t,e,n,r,i={}){return WK(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});const a=Dh({key:t.config.apiKey,...s}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:u,...o};return eue()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&wu(t.emulatorConfig.host)&&(c.credentials="include"),KK.fetch()(await YK(t,t.config.apiHost,n,a),c)})}async function WK(t,e,n){t._canInitEmulator=!1;const r={...Oce,...e};try{const i=new qce(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw $m(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[u,c]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw $m(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw $m(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw $m(t,"user-disabled",s);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Q2(t,f,c);Rr(t,f)}}catch(i){if(i instanceof $r)throw i;Rr(t,"network-request-failed",{message:String(i)})}}async function Ka(t,e,n,r,i={}){const o=await Pn(t,e,n,r,i);return"mfaPendingCredential"in o&&Rr(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function YK(t,e,n,r){const i=`${e}${n}?${r}`,o=t,s=o.config.emulator?tD(t.config,i):`${t.config.apiScheme}://${i}`;return Lce.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}function Uce(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class qce{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(er(this.auth,"network-request-failed")),Vce.get())})}}function $m(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=er(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vq(t){return t!==void 0&&t.getResponse!==void 0}function Uq(t){return t!==void 0&&t.enterprise!==void 0}class JK{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Uce(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fce(t){return(await Pn(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function XK(t,e){return Pn(t,"GET","/v2/recaptchaConfig",Rn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bce(t,e){return Pn(t,"POST","/v1/accounts:delete",e)}async function $ce(t,e){return Pn(t,"POST","/v1/accounts:update",e)}async function M_(t,e){return Pn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function zce(t,e=!1){const n=Ke(t),r=await n.getIdToken(e),i=rw(r);Re(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:ig(eS(i.auth_time)),issuedAtTime:ig(eS(i.iat)),expirationTime:ig(eS(i.exp)),signInProvider:s||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function eS(t){return Number(t)*1e3}function rw(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return i_("JWT malformed, contained fewer than 3 sections"),null;try{const i=F2(n);return i?JSON.parse(i):(i_("Failed to decode base64 JWT payload"),null)}catch(i){return i_("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function qq(t){const e=rw(t);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function La(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof $r&&Hce(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Hce({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gce{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ig(this.lastLoginAt),this.creationTime=ig(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ig(t){var h;const e=t.auth,n=await t.getIdToken(),r=await La(t,M_(e,{idToken:n}));Re(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const o=(h=i.providerUserInfo)!=null&&h.length?QK(i.providerUserInfo):[],s=Kce(t.providerData,o),a=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(s!=null&&s.length),c=a?u:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new NN(i.createdAt,i.lastLoginAt),isAnonymous:c};Object.assign(t,f)}async function jce(t){const e=Ke(t);await Ig(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Kce(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function QK(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wce(t,e){const n=await WK(t,{},async()=>{const r=Dh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=await YK(t,i,"/v1/token",`key=${o}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:a,body:r};return t.emulatorConfig&&wu(t.emulatorConfig.host)&&(u.credentials="include"),KK.fetch()(s,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Yce(t,e){return Pn(t,"POST","/v2/accounts:revokeToken",Rn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qq(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const n=qq(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await Wce(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new Nd;return r&&(Re(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Re(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Re(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Nd,this.toJSON())}_performRefresh(){return Ns("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bl(t,e){Re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class jo{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new Gce(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new NN(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await La(this,this.stsTokenManager.getToken(this.auth,e));return Re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return zce(this,e)}reload(){return jce(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new jo({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ig(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(rn(this.auth.app))return Promise.reject(dr(this.auth));const e=await this.getIdToken();return await La(this,Bce(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,o=n.phoneNumber??void 0,s=n.photoURL??void 0,a=n.tenantId??void 0,u=n._redirectEventId??void 0,c=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:h,emailVerified:g,isAnonymous:_,providerData:T,stsTokenManager:E}=n;Re(h&&E,e,"internal-error");const b=Nd.fromJSON(this.name,E);Re(typeof h=="string",e,"internal-error"),Bl(r,e.name),Bl(i,e.name),Re(typeof g=="boolean",e,"internal-error"),Re(typeof _=="boolean",e,"internal-error"),Bl(o,e.name),Bl(s,e.name),Bl(a,e.name),Bl(u,e.name),Bl(c,e.name),Bl(f,e.name);const S=new jo({uid:h,auth:e,email:i,emailVerified:g,displayName:r,isAnonymous:_,photoURL:s,phoneNumber:o,tenantId:a,stsTokenManager:b,createdAt:c,lastLoginAt:f});return T&&Array.isArray(T)&&(S.providerData=T.map(C=>({...C}))),u&&(S._redirectEventId=u),S}static async _fromIdTokenResponse(e,n,r=!1){const i=new Nd;i.updateFromServerResponse(n);const o=new jo({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ig(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Re(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?QK(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),a=new Nd;a.updateFromIdToken(r);const u=new jo({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new NN(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fq=new Map;function ki(t){Jo(t instanceof Function,"Expected a class definition");let e=Fq.get(t);return e?(Jo(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Fq.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZK{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ZK.type="NONE";const Kd=ZK;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mc(t,e,n){return`firebase:${t}:${e}:${n}`}class Md{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Mc(this.userKey,i.apiKey,o),this.fullPersistenceKey=Mc("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await M_(this.auth,{idToken:e}).catch(()=>{});return n?jo._fromGetAccountInfoResponse(this.auth,n,e):null}return jo._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Md(ki(Kd),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let o=i[0]||ki(Kd);const s=Mc(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const f=await c._get(s);if(f){let h;if(typeof f=="string"){const g=await M_(e,{idToken:f}).catch(()=>{});if(!g)break;h=await jo._fromGetAccountInfoResponse(e,g,f)}else h=jo._fromJSON(e,f);c!==o&&(a=h),o=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new Md(o,e,r):(o=u[0],a&&await o._set(s,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==o)try{await c._remove(s)}catch{}})),new Md(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bq(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(rW(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(eW(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(iW(e))return"Blackberry";if(oW(e))return"Webos";if(tW(e))return"Safari";if((e.includes("chrome/")||nW(e))&&!e.includes("edge/"))return"Chrome";if(hy(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function eW(t=_n()){return/firefox\//i.test(t)}function tW(t=_n()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function nW(t=_n()){return/crios\//i.test(t)}function rW(t=_n()){return/iemobile/i.test(t)}function hy(t=_n()){return/android/i.test(t)}function iW(t=_n()){return/blackberry/i.test(t)}function oW(t=_n()){return/webos/i.test(t)}function py(t=_n()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Jce(t=_n()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function Xce(t=_n()){var e;return py(t)&&!!((e=window.navigator)!=null&&e.standalone)}function Qce(){return IK()&&document.documentMode===10}function sW(t=_n()){return py(t)||hy(t)||oW(t)||iW(t)||/windows phone/i.test(t)||rW(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aW(t,e=[]){let n;switch(t){case"Browser":n=Bq(_n());break;case"Worker":n=`${Bq(_n())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ga}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zce{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,a)=>{try{const u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function efe(t,e={}){return Pn(t,"GET","/v2/passwordPolicy",Rn(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tfe=6;class nfe{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??tfe,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rfe{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $q(this),this.idTokenSubscription=new $q(this),this.beforeStateQueue=new Zce(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jK,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ki(n)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await Md.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await M_(this,{idToken:e}),r=await jo._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(rn(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(o=this.redirectUser)==null?void 0:o._redirectEventId,a=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!s||s===a)&&(u!=null&&u.user)&&(r=u.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ig(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=kce()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(rn(this.app))return Promise.reject(dr(this));const n=e?Ke(e):null;return n&&Re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return rn(this.app)?Promise.reject(dr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return rn(this.app)?Promise.reject(dr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ki(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await efe(this),n=new nfe(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new cf("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Yce(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ki(e)||this._popupRedirectResolver;Re(n,this,"argument-error"),this.redirectPersistenceManager=await Md.create(this,[ki(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{const u=e.addObserver(n);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=aW(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(rn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&Mce(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function bn(t){return Ke(t)}class $q{constructor(e){this.auth=e,this.observer=null,this.addObserver=NK(n=>this.observer=n)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let my={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ife(t){my=t}function nD(t){return my.loadJS(t)}function ofe(){return my.recaptchaV2Script}function sfe(){return my.recaptchaEnterpriseScript}function afe(){return my.gapiScript}function lW(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lfe=500,ufe=6e4,b0=1e12;class cfe{constructor(e){this.auth=e,this.counter=b0,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new hfe(e,this.auth.name,n||{})),this.counter++,r}reset(e){var r;const n=e||b0;(r=this._widgets.get(n))==null||r.delete(),this._widgets.delete(n)}getResponse(e){var r;const n=e||b0;return((r=this._widgets.get(n))==null?void 0:r.getResponse())||""}async execute(e){var r;const n=e||b0;return(r=this._widgets.get(n))==null||r.execute(),""}}class ffe{constructor(){this.enterprise=new dfe}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class dfe{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class hfe{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;Re(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=pfe(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},ufe)},lfe))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function pfe(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const mfe="recaptcha-enterprise",og="NO_RECAPTCHA";class uW{constructor(e){this.type=mfe,this.auth=bn(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(s,a)=>{XK(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new JK(u);return o.tenantId==null?o._agentRecaptchaConfig=c:o._tenantRecaptchaConfigs[o.tenantId]=c,s(c.siteKey)}}).catch(u=>{a(u)})})}function i(o,s,a){const u=window.grecaptcha;Uq(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(c=>{s(c)}).catch(()=>{s(og)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ffe().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&Uq(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=sfe();u.length!==0&&(u+=a),nD(u).then(()=>{i(a,o,s)}).catch(c=>{s(c)})}}).catch(a=>{s(a)})})}}async function vm(t,e,n,r=!1,i=!1){const o=new uW(t);let s;if(i)s=og;else try{s=await o.verify(n)}catch{s=await o.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const u=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function nu(t,e,n,r,i){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await vm(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await vm(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("PHONE_PROVIDER")){const a=await vm(t,e,n);return r(t,a).catch(async u=>{var c;if(((c=t._getRecaptchaConfig())==null?void 0:c.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const f=await vm(t,e,n,!1,!0);return r(t,f)}return Promise.reject(u)})}else{const a=await vm(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")}async function gfe(t){const e=bn(t),n=await XK(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new JK(n);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new uW(e).verify()}function yfe(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ki);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function vfe(t,e,n){const r=bn(t);Re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),o=cW(e),{host:s,port:a}=_fe(e),u=a===null?"":`:${a}`,c={url:`${o}//${s}${u}/`},f=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Re(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Re(lu(c,r.config.emulator)&&lu(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,wu(s)?(z2(`${o}//${s}${u}`),H2("Auth",!0)):i||bfe()}function cW(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _fe(t){const e=cW(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:zq(r.substr(o.length+1))}}else{const[o,s]=r.split(":");return{host:o,port:zq(s)}}}function zq(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function bfe(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ns("not implemented")}_getIdTokenResponse(e){return Ns("not implemented")}_linkToIdToken(e,n){return Ns("not implemented")}_getReauthenticationResolver(e){return Ns("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fW(t,e){return Pn(t,"POST","/v1/accounts:resetPassword",Rn(t,e))}async function wfe(t,e){return Pn(t,"POST","/v1/accounts:update",e)}async function Efe(t,e){return Pn(t,"POST","/v1/accounts:signUp",e)}async function Tfe(t,e){return Pn(t,"POST","/v1/accounts:update",Rn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xfe(t,e){return Ka(t,"POST","/v1/accounts:signInWithPassword",Rn(t,e))}async function iw(t,e){return Pn(t,"POST","/v1/accounts:sendOobCode",Rn(t,e))}async function Sfe(t,e){return iw(t,e)}async function Afe(t,e){return iw(t,e)}async function Cfe(t,e){return iw(t,e)}async function Ife(t,e){return iw(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rfe(t,e){return Ka(t,"POST","/v1/accounts:signInWithEmailLink",Rn(t,e))}async function Pfe(t,e){return Ka(t,"POST","/v1/accounts:signInWithEmailLink",Rn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg extends Oh{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Rg(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Rg(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nu(e,n,"signInWithPassword",xfe,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Rfe(e,{email:this._email,oobCode:this._password});default:Rr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nu(e,r,"signUpPassword",Efe,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Pfe(e,{idToken:n,email:this._email,oobCode:this._password});default:Rr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ca(t,e){return Ka(t,"POST","/v1/accounts:signInWithIdp",Rn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nfe="http://localhost";class Fs extends Oh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Fs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Rr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=n;if(!r||!i)return null;const s=new Fs(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return Ca(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ca(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ca(e,n)}buildRequest(){const e={requestUri:Nfe,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Dh(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hq(t,e){return Pn(t,"POST","/v1/accounts:sendVerificationCode",Rn(t,e))}async function Mfe(t,e){return Ka(t,"POST","/v1/accounts:signInWithPhoneNumber",Rn(t,e))}async function Dfe(t,e){const n=await Ka(t,"POST","/v1/accounts:signInWithPhoneNumber",Rn(t,e));if(n.temporaryProof)throw $m(t,"account-exists-with-different-credential",n);return n}const kfe={USER_NOT_FOUND:"user-not-found"};async function Ofe(t,e){const n={...e,operation:"REAUTH"};return Ka(t,"POST","/v1/accounts:signInWithPhoneNumber",Rn(t,n),kfe)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc extends Oh{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Dc({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Dc({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return Mfe(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return Dfe(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return Ofe(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:o}=e;return!r&&!n&&!i&&!o?null:new Dc({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lfe(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Vfe(t){const e=Cd(Bm(t)).link,n=e?Cd(Bm(e)).deep_link_id:null,r=Cd(Bm(t)).deep_link_id;return(r?Cd(Bm(r)).link:null)||r||n||e||t}class ow{constructor(e){const n=Cd(Bm(e)),r=n.apiKey??null,i=n.oobCode??null,o=Lfe(n.mode??null);Re(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Vfe(e);try{return new ow(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(){this.providerId=Eu.PROVIDER_ID}static credential(e,n){return Rg._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=ow.parseLink(n);return Re(r,"argument-error"),Rg._fromEmailAndCode(e,r.code,r.tenantId)}}Eu.PROVIDER_ID="password";Eu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Eu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh extends Wa{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Dd extends Lh{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return Re("providerId"in n&&"signInMethod"in n,"argument-error"),Fs._fromParams(n)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return Re(e.idToken||e.accessToken,"argument-error"),Fs._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return Dd.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Dd.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:o,nonce:s,providerId:a}=e;if(!r&&!i&&!n&&!o||!a)return null;try{return new Dd(a)._credential({idToken:n,accessToken:r,nonce:s,pendingToken:o})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss extends Lh{constructor(){super("facebook.com")}static credential(e){return Fs._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ss.credentialFromTaggedObject(e)}static credentialFromError(e){return Ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ss.credential(e.oauthAccessToken)}catch{return null}}}Ss.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ss.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As extends Lh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Fs._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return As.credentialFromTaggedObject(e)}static credentialFromError(e){return As.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return As.credential(n,r)}catch{return null}}}As.GOOGLE_SIGN_IN_METHOD="google.com";As.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs extends Lh{constructor(){super("github.com")}static credential(e){return Fs._fromParams({providerId:Cs.PROVIDER_ID,signInMethod:Cs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cs.credentialFromTaggedObject(e)}static credentialFromError(e){return Cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cs.credential(e.oauthAccessToken)}catch{return null}}}Cs.GITHUB_SIGN_IN_METHOD="github.com";Cs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ufe="http://localhost";class Wd extends Oh{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Ca(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ca(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ca(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:o}=n;return!r||!i||!o||r!==i?null:new Wd(r,o)}static _create(e,n){return new Wd(e,n)}buildRequest(){return{requestUri:Ufe,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qfe="saml.";class D_ extends Wa{constructor(e){Re(e.startsWith(qfe),"argument-error"),super(e)}static credentialFromResult(e){return D_.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return D_.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Wd.fromJSON(e);return Re(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Wd._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends Lh{constructor(){super("twitter.com")}static credential(e,n){return Fs._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Is.credentialFromTaggedObject(e)}static credentialFromError(e){return Is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Is.credential(n,r)}catch{return null}}}Is.TWITTER_SIGN_IN_METHOD="twitter.com";Is.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dW(t,e){return Ka(t,"POST","/v1/accounts:signUp",Rn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await jo._fromIdTokenResponse(e,r,i),s=Gq(r);return new Eo({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Gq(r);return new Eo({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Gq(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ffe(t){var i;if(rn(t.app))return Promise.reject(dr(t));const e=bn(t);if(await e._initializationPromise,(i=e.currentUser)!=null&&i.isAnonymous)return new Eo({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await dW(e,{returnSecureToken:!0}),r=await Eo._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_ extends $r{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,k_.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new k_(e,n,r,i)}}function hW(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?k_._fromErrorAndOperation(t,o,e,r):o})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pW(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bfe(t,e){const n=Ke(t);await sw(!0,n,e);const{providerUserInfo:r}=await $ce(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=pW(r||[]);return n.providerData=n.providerData.filter(o=>i.has(o.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function rD(t,e,n=!1){const r=await La(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Eo._forOperation(t,"link",r)}async function sw(t,e,n){await Ig(e);const r=pW(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";Re(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mW(t,e,n=!1){const{auth:r}=t;if(rn(r.app))return Promise.reject(dr(r));const i="reauthenticate";try{const o=await La(t,hW(r,i,e,t),n);Re(o.idToken,r,"internal-error");const s=rw(o.idToken);Re(s,r,"internal-error");const{sub:a}=s;return Re(t.uid===a,r,"user-mismatch"),Eo._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Rr(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gW(t,e,n=!1){if(rn(t.app))return Promise.reject(dr(t));const r="signIn",i=await hW(t,r,e),o=await Eo._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function aw(t,e){return gW(bn(t),e)}async function yW(t,e){const n=Ke(t);return await sw(!1,n,e.providerId),rD(n,e)}async function vW(t,e){return mW(Ke(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $fe(t,e){return Ka(t,"POST","/v1/accounts:signInWithCustomToken",Rn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zfe(t,e){if(rn(t.app))return Promise.reject(dr(t));const n=bn(t),r=await $fe(n,{token:e,returnSecureToken:!0}),i=await Eo._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?iD._fromServerResponse(e,n):"totpInfo"in n?oD._fromServerResponse(e,n):Rr(e,"internal-error")}}class iD extends gy{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new iD(n)}}class oD extends gy{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new oD(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(t,e,n){var r;Re(((r=n.url)==null?void 0:r.length)>0,t,"invalid-continue-uri"),Re(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),Re(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Re(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(Re(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sD(t){const e=bn(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Hfe(t,e,n){const r=bn(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&lw(r,i,n),await nu(r,i,"getOobCode",Afe,"EMAIL_PASSWORD_PROVIDER")}async function Gfe(t,e,n){await fW(Ke(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&sD(t),r})}async function jfe(t,e){await Tfe(Ke(t),{oobCode:e})}async function _W(t,e){const n=Ke(t),r=await fW(n,{oobCode:e}),i=r.requestType;switch(Re(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Re(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Re(r.mfaInfo,n,"internal-error");default:Re(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=gy._fromServerResponse(bn(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:o},operation:i}}async function Kfe(t,e){const{data:n}=await _W(Ke(t),e);return n.email}async function Wfe(t,e,n){if(rn(t.app))return Promise.reject(dr(t));const r=bn(t),s=await nu(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",dW,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&sD(t),u}),a=await Eo._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a}function Yfe(t,e,n){return rn(t.app)?Promise.reject(dr(t)):aw(Ke(t),Eu.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&sD(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jfe(t,e,n){const r=bn(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function o(s,a){Re(a.handleCodeInApp,r,"argument-error"),a&&lw(r,s,a)}o(i,n),await nu(r,i,"getOobCode",Cfe,"EMAIL_PASSWORD_PROVIDER")}function Xfe(t,e){const n=ow.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function Qfe(t,e,n){if(rn(t.app))return Promise.reject(dr(t));const r=Ke(t),i=Eu.credentialWithLink(e,n||Cg());return Re(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),aw(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zfe(t,e){return Pn(t,"POST","/v1/accounts:createAuthUri",Rn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ede(t,e){const n=eD()?Cg():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await Zfe(Ke(t),r);return i||[]}async function tde(t,e){const n=Ke(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&lw(n.auth,i,e);const{email:o}=await Sfe(n.auth,i);o!==t.email&&await t.reload()}async function nde(t,e,n){const r=Ke(t),o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&lw(r.auth,o,n);const{email:s}=await Ife(r.auth,o);s!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rde(t,e){return Pn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ide(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ke(t),o={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},s=await La(r,rde(r.auth,o));r.displayName=s.displayName||null,r.photoURL=s.photoUrl||null;const a=r.providerData.find(({providerId:u})=>u==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(s)}function ode(t,e){const n=Ke(t);return rn(n.auth.app)?Promise.reject(dr(n.auth)):bW(n,e,null)}function sde(t,e){return bW(Ke(t),null,e)}async function bW(t,e,n){const{auth:r}=t,o={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(o.email=e),n&&(o.password=n);const s=await La(t,wfe(r,o));await t._updateTokensIfNecessary(s,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ade(t){var i,o;if(!t)return null;const{providerId:e}=t,n=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},r=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(t!=null&&t.idToken)){const s=(o=(i=rw(t.idToken))==null?void 0:i.firebase)==null?void 0:o.sign_in_provider;if(s){const a=s!=="anonymous"&&s!=="custom"?s:null;return new kd(r,a)}}if(!e)return null;switch(e){case"facebook.com":return new lde(r,n);case"github.com":return new ude(r,n);case"google.com":return new cde(r,n);case"twitter.com":return new fde(r,n,t.screenName||null);case"custom":case"anonymous":return new kd(r,null);default:return new kd(r,e,n)}}class kd{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class wW extends kd{constructor(e,n,r,i){super(e,n,r),this.username=i}}class lde extends kd{constructor(e,n){super(e,"facebook.com",n)}}class ude extends wW{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class cde extends kd{constructor(e,n){super(e,"google.com",n)}}class fde extends wW{constructor(e,n,r){super(e,"twitter.com",n,r)}}function dde(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:ade(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new xc("enroll",e,n)}static _fromMfaPendingCredential(e){return new xc("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if((n=e.multiFactorSession)!=null&&n.pendingCredential)return xc._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if((r=e.multiFactorSession)!=null&&r.idToken)return xc._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=bn(e),i=n.customData._serverResponse,o=(i.mfaInfo||[]).map(a=>gy._fromServerResponse(r,a));Re(i.mfaPendingCredential,r,"internal-error");const s=xc._fromMfaPendingCredential(i.mfaPendingCredential);return new aD(s,o,async a=>{const u=await a._process(r,s);delete i.mfaInfo,delete i.mfaPendingCredential;const c={...i,idToken:u.idToken,refreshToken:u.refreshToken};switch(n.operationType){case"signIn":const f=await Eo._fromIdTokenResponse(r,n.operationType,c);return await r._updateCurrentUser(f.user),f;case"reauthenticate":return Re(n.user,r,"internal-error"),Eo._forOperation(n.user,n.operationType,c);default:Rr(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function hde(t,e){var i;const n=Ke(t),r=e;return Re(e.customData.operationType,n,"argument-error"),Re((i=r.customData._serverResponse)==null?void 0:i.mfaPendingCredential,n,"argument-error"),aD._fromError(n,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jq(t,e){return Pn(t,"POST","/v2/accounts/mfaEnrollment:start",Rn(t,e))}function pde(t,e){return Pn(t,"POST","/v2/accounts/mfaEnrollment:finalize",Rn(t,e))}function mde(t,e){return Pn(t,"POST","/v2/accounts/mfaEnrollment:withdraw",Rn(t,e))}class lD{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>gy._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new lD(e)}async getSession(){return xc._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,i=await this.getSession(),o=await La(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(o),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await La(this.user,mde(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:o})=>o!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const tS=new WeakMap;function gde(t){const e=Ke(t);return tS.has(e)||tS.set(e,lD._fromUser(e)),tS.get(e)}const O_="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EW{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(O_,"1"),this.storage.removeItem(O_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yde=1e3,vde=10;class TW extends EW{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=sW(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,a,u)=>{this.notifyListeners(s,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},o=this.storage.getItem(r);Qce()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,vde):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},yde)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}TW.type="LOCAL";const uD=TW;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xW extends EW{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}xW.type="SESSION";const Bc=xW;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _de(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new uw(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(s).map(async c=>c(n.origin,o)),u=await _de(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}uw.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bde{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{const c=yy("",20);i.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(h){const g=h;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(f),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(f),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(){return window}function wde(t){$n().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(){return typeof $n().WorkerGlobalScope<"u"&&typeof $n().importScripts=="function"}async function Ede(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Tde(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function xde(){return cD()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SW="firebaseLocalStorageDb",Sde=1,L_="firebaseLocalStorage",AW="fbase_key";class vy{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function cw(t,e){return t.transaction([L_],e?"readwrite":"readonly").objectStore(L_)}function Ade(){const t=indexedDB.deleteDatabase(SW);return new vy(t).toPromise()}function MN(){const t=indexedDB.open(SW,Sde);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(L_,{keyPath:AW})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(L_)?e(r):(r.close(),await Ade(),e(await MN()))})})}async function Kq(t,e,n){const r=cw(t,!0).put({[AW]:e,value:n});return new vy(r).toPromise()}async function Cde(t,e){const n=cw(t,!1).get(e),r=await new vy(n).toPromise();return r===void 0?null:r.value}function Wq(t,e){const n=cw(t,!0).delete(e);return new vy(n).toPromise()}const Ide=800,Rde=3;class CW{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await MN(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Rde)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cD()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=uw._getInstance(xde()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await Ede(),!this.activeServiceWorker)return;this.sender=new bde(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Tde()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await MN();return await Kq(e,O_,"1"),await Wq(e,O_),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Kq(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Cde(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Wq(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=cw(i,!1).getAll();return new vy(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Ide)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}CW.type="LOCAL";const Pg=CW;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yq(t,e){return Pn(t,"POST","/v2/accounts/mfaSignIn:start",Rn(t,e))}function Pde(t,e){return Pn(t,"POST","/v2/accounts/mfaSignIn:finalize",Rn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS=lW("rcb"),Nde=new dy(3e4,6e4);class Mde{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=$n().grecaptcha)!=null&&e.render)}load(e,n=""){return Re(Dde(n),e,"argument-error"),this.shouldResolveImmediately(n)&&Vq($n().grecaptcha)?Promise.resolve($n().grecaptcha):new Promise((r,i)=>{const o=$n().setTimeout(()=>{i(er(e,"network-request-failed"))},Nde.get());$n()[nS]=()=>{$n().clearTimeout(o),delete $n()[nS];const a=$n().grecaptcha;if(!a||!Vq(a)){i(er(e,"internal-error"));return}const u=a.render;a.render=(c,f)=>{const h=u(c,f);return this.counter++,h},this.hostLanguage=n,r(a)};const s=`${ofe()}?${Dh({onload:nS,render:"explicit",hl:n})}`;nD(s).catch(()=>{clearTimeout(o),i(er(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!((n=$n().grecaptcha)!=null&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function Dde(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class kde{async load(e){return new cfe(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg="recaptcha",Ode={theme:"light",type:"image"};let Lde=class{constructor(e,n,r={...Ode}){this.parameters=r,this.type=sg,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=bn(e),this.isInvisible=this.parameters.size==="invisible",Re(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;Re(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new kde:new Mde,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const o=s=>{s&&(this.tokenChangeListeners.delete(o),i(s))};this.tokenChangeListeners.add(o),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){Re(!this.parameters.sitekey,this.auth,"argument-error"),Re(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Re(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=$n()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){Re(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Re(eD()&&!cD(),this.auth,"internal-error"),await Vde(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await Fce(this.auth);Re(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Re(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function Vde(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Dc._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function Ude(t,e,n){if(rn(t.app))return Promise.reject(dr(t));const r=bn(t),i=await fw(r,e,Ke(n));return new fD(i,o=>aw(r,o))}async function qde(t,e,n){const r=Ke(t);await sw(!1,r,"phone");const i=await fw(r.auth,e,Ke(n));return new fD(i,o=>yW(r,o))}async function Fde(t,e,n){const r=Ke(t);if(rn(r.auth.app))return Promise.reject(dr(r.auth));const i=await fw(r.auth,e,Ke(n));return new fD(i,o=>vW(r,o))}async function fw(t,e,n){var r;if(!t._getRecaptchaConfig())try{await gfe(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const o=i.session;if("phoneNumber"in i){Re(o.type==="enroll",t,"internal-error");const s={idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await nu(t,s,"mfaSmsEnrollment",async(f,h)=>{if(h.phoneEnrollmentInfo.captchaResponse===og){Re((n==null?void 0:n.type)===sg,f,"argument-error");const g=await rS(f,h,n);return jq(f,g)}return jq(f,h)},"PHONE_PROVIDER").catch(f=>Promise.reject(f))).phoneSessionInfo.sessionInfo}else{Re(o.type==="signin",t,"internal-error");const s=((r=i.multiFactorHint)==null?void 0:r.uid)||i.multiFactorUid;Re(s,t,"missing-multi-factor-info");const a={mfaPendingCredential:o.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await nu(t,a,"mfaSmsSignIn",async(h,g)=>{if(g.phoneSignInInfo.captchaResponse===og){Re((n==null?void 0:n.type)===sg,h,"argument-error");const _=await rS(h,g,n);return Yq(h,_)}return Yq(h,g)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneResponseInfo.sessionInfo}}else{const o={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await nu(t,o,"sendVerificationCode",async(c,f)=>{if(f.captchaResponse===og){Re((n==null?void 0:n.type)===sg,c,"argument-error");const h=await rS(c,f,n);return Hq(c,h)}return Hq(c,f)},"PHONE_PROVIDER").catch(c=>Promise.reject(c))).sessionInfo}}finally{n==null||n._reset()}}async function Bde(t,e){const n=Ke(t);if(rn(n.auth.app))return Promise.reject(dr(n.auth));await rD(n,e)}async function rS(t,e,n){Re(n.type===sg,t,"argument-error");const r=await n.verify();Re(typeof r=="string",t,"argument-error");const i={...e};if("phoneEnrollmentInfo"in i){const o=i.phoneEnrollmentInfo.phoneNumber,s=i.phoneEnrollmentInfo.captchaResponse,a=i.phoneEnrollmentInfo.clientType,u=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r,captchaResponse:s,clientType:a,recaptchaVersion:u}}),i}else if("phoneSignInInfo"in i){const o=i.phoneSignInInfo.captchaResponse,s=i.phoneSignInInfo.clientType,a=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:o,clientType:s,recaptchaVersion:a}}),i}else return Object.assign(i,{recaptchaToken:r}),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $c=class o_{constructor(e){this.providerId=o_.PROVIDER_ID,this.auth=bn(e)}verifyPhoneNumber(e,n){return fw(this.auth,e,Ke(n))}static credential(e,n){return Dc._fromVerification(e,n)}static credentialFromResult(e){const n=e;return o_.credentialFromTaggedObject(n)}static credentialFromError(e){return o_.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Dc._fromTokenResponse(n,r):null}};$c.PROVIDER_ID="phone";$c.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ff(t,e){return e?ki(e):(Re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD extends Oh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ca(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ca(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ca(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function $de(t){return gW(t.auth,new dD(t),t.bypassAuthState)}function zde(t){const{auth:e,user:n}=t;return Re(n,e,"internal-error"),mW(n,new dD(t),t.bypassAuthState)}async function Hde(t){const{auth:e,user:n}=t;return Re(n,e,"internal-error"),rD(n,new dD(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IW{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $de;case"linkViaPopup":case"linkViaRedirect":return Hde;case"reauthViaPopup":case"reauthViaRedirect":return zde;default:Rr(this.auth,"internal-error")}}resolve(e){Jo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Jo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gde=new dy(2e3,1e4);async function jde(t,e,n){if(rn(t.app))return Promise.reject(er(t,"operation-not-supported-in-this-environment"));const r=bn(t);kh(t,e,Wa);const i=ff(r,n);return new wa(r,"signInViaPopup",e,i).executeNotNull()}async function Kde(t,e,n){const r=Ke(t);if(rn(r.auth.app))return Promise.reject(er(r.auth,"operation-not-supported-in-this-environment"));kh(r.auth,e,Wa);const i=ff(r.auth,n);return new wa(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function Wde(t,e,n){const r=Ke(t);kh(r.auth,e,Wa);const i=ff(r.auth,n);return new wa(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class wa extends IW{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,wa.currentPopupAction&&wa.currentPopupAction.cancel(),wa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){Jo(this.filter.length===1,"Popup operations only handle one event");const e=yy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(er(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(er(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,wa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(er(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Gde.get())};e()}}wa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yde="pendingRedirect",ag=new Map;class Jde extends IW{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ag.get(this.auth._key());if(!e){try{const r=await Xde(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ag.set(this.auth._key(),e)}return this.bypassAuthState||ag.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Xde(t,e){const n=PW(e),r=RW(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function hD(t,e){return RW(t)._set(PW(e),"true")}function Qde(){ag.clear()}function pD(t,e){ag.set(t._key(),e)}function RW(t){return ki(t._redirectPersistence)}function PW(t){return Mc(Yde,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zde(t,e,n){return ehe(t,e,n)}async function ehe(t,e,n){if(rn(t.app))return Promise.reject(dr(t));const r=bn(t);kh(t,e,Wa),await r._initializationPromise;const i=ff(r,n);return await hD(i,r),i._openRedirect(r,e,"signInViaRedirect")}function the(t,e,n){return nhe(t,e,n)}async function nhe(t,e,n){const r=Ke(t);if(kh(r.auth,e,Wa),rn(r.auth.app))return Promise.reject(dr(r.auth));await r.auth._initializationPromise;const i=ff(r.auth,n);await hD(i,r.auth);const o=await NW(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",o)}function rhe(t,e,n){return ihe(t,e,n)}async function ihe(t,e,n){const r=Ke(t);kh(r.auth,e,Wa),await r.auth._initializationPromise;const i=ff(r.auth,n);await sw(!1,r,e.providerId),await hD(i,r.auth);const o=await NW(r);return i._openRedirect(r.auth,e,"linkViaRedirect",o)}async function ohe(t,e){return await bn(t)._initializationPromise,dw(t,e,!1)}async function dw(t,e,n=!1){if(rn(t.app))return Promise.reject(dr(t));const r=bn(t),i=ff(r,e),s=await new Jde(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}async function NW(t){const e=yy(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const she=600*1e3;class MW{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ahe(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!DW(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(er(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=she&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jq(e))}saveEventToCache(e){this.cachedEventUids.add(Jq(e)),this.lastProcessedEventTime=Date.now()}}function Jq(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function DW({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ahe(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return DW(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kW(t,e={}){return Pn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lhe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uhe=/^https?/;async function che(t){if(t.config.emulator)return;const{authorizedDomains:e}=await kW(t);for(const n of e)try{if(fhe(n))return}catch{}Rr(t,"unauthorized-domain")}function fhe(t){const e=Cg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!uhe.test(n))return!1;if(lhe.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dhe=new dy(3e4,6e4);function Xq(){const t=$n().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function hhe(t){return new Promise((e,n)=>{var i,o,s;function r(){Xq(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Xq(),n(er(t,"network-request-failed"))},timeout:dhe.get()})}if((o=(i=$n().gapi)==null?void 0:i.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((s=$n().gapi)!=null&&s.load)r();else{const a=lW("iframefcb");return $n()[a]=()=>{gapi.load?r():n(er(t,"network-request-failed"))},nD(`${afe()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw s_=null,e})}let s_=null;function phe(t){return s_=s_||hhe(t),s_}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mhe=new dy(5e3,15e3),ghe="__/auth/iframe",yhe="emulator/auth/iframe",vhe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_he=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bhe(t){const e=t.config;Re(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?tD(e,yhe):`https://${t.config.authDomain}/${ghe}`,r={apiKey:e.apiKey,appName:t.name,v:Ga},i=_he.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Dh(r).slice(1)}`}async function whe(t){const e=await phe(t),n=$n().gapi;return Re(n,t,"internal-error"),e.open({where:document.body,url:bhe(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vhe,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const s=er(t,"network-request-failed"),a=$n().setTimeout(()=>{o(s)},mhe.get());function u(){$n().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ehe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},The=500,xhe=600,She="_blank",Ahe="http://localhost";class Qq{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Che(t,e,n,r=The,i=xhe){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u={...Ehe,width:r.toString(),height:i.toString(),top:o,left:s},c=_n().toLowerCase();n&&(a=nW(c)?She:n),eW(c)&&(e=e||Ahe,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[_,T])=>`${g}${_}=${T},`,"");if(Xce(c)&&a!=="_self")return Ihe(e||"",a),new Qq(null);const h=window.open(e||"",a,f);Re(h,t,"popup-blocked");try{h.focus()}catch{}return new Qq(h)}function Ihe(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rhe="__/auth/handler",Phe="emulator/auth/handler",Nhe=encodeURIComponent("fac");async function DN(t,e,n,r,i,o){Re(t.config.authDomain,t,"auth-domain-config-required"),Re(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ga,eventId:i};if(e instanceof Wa){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",oue(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,h]of Object.entries(o||{}))s[f]=h}if(e instanceof Lh){const f=e.getScopes().filter(h=>h!=="");f.length>0&&(s.scopes=f.join(","))}t.tenantId&&(s.tid=t.tenantId);const a=s;for(const f of Object.keys(a))a[f]===void 0&&delete a[f];const u=await t._getAppCheckToken(),c=u?`#${Nhe}=${encodeURIComponent(u)}`:"";return`${Mhe(t)}?${Dh(a).slice(1)}${c}`}function Mhe({config:t}){return t.emulator?tD(t,Phe):`https://${t.authDomain}/${Rhe}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS="webStorageSupport";class Dhe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Bc,this._completeRedirectFn=dw,this._overrideRedirectResult=pD}async _openPopup(e,n,r,i){var s;Jo((s=this.eventManagers[e._key()])==null?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await DN(e,n,r,Cg(),i);return Che(e,o,yy())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await DN(e,n,r,Cg(),i);return wde(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Jo(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await whe(e),r=new MW(e);return n.register("authEvent",i=>(Re(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(iS,{type:iS},i=>{var s;const o=(s=i==null?void 0:i[0])==null?void 0:s[iS];o!==void 0&&n(!!o),Rr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=che(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return sW()||tW()||py()}}const khe=Dhe;class Ohe{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return Ns("unexpected MultiFactorSessionType")}}}class mD extends Ohe{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new mD(e)}_finalizeEnroll(e,n,r){return pde(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return Pde(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class OW{constructor(){}static assertion(e){return mD._fromCredential(e)}}OW.FACTOR_ID="phone";var Zq="@firebase/auth",eF="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lhe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vhe(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Uhe(t){Oa(new wo("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Re(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aW(t)},c=new rfe(r,i,o,u);return yfe(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Oa(new wo("auth-internal",e=>{const n=bn(e.getProvider("auth").getImmediate());return(r=>new Lhe(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vi(Zq,eF,Vhe(t)),Vi(Zq,eF,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qhe=300;Wle("authIdTokenMaxAge");function Fhe(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}ife({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=er("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",Fhe().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Uhe("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bhe=2e3;async function $he(t,e,n){const{BuildInfo:r}=zc();Jo(e.sessionId,"AuthEvent did not contain a session ID");const i=await Khe(e.sessionId),o={};return py()?o.ibi=r.packageName:hy()?o.apn=r.packageName:Rr(t,"operation-not-supported-in-this-environment"),r.displayName&&(o.appDisplayName=r.displayName),o.sessionId=i,DN(t,n,e.type,void 0,e.eventId??void 0,o)}async function zhe(t){const{BuildInfo:e}=zc(),n={};py()?n.iosBundleId=e.packageName:hy()?n.androidPackageName=e.packageName:Rr(t,"operation-not-supported-in-this-environment"),await kW(t,n)}function Hhe(t){const{cordova:e}=zc();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,Jce()?"_blank":"_system","location=yes"),n(i)})})}async function Ghe(t,e,n){const{cordova:r}=zc();let i=()=>{};try{await new Promise((o,s)=>{let a=null;function u(){var g;o();const h=(g=r.plugins.browsertab)==null?void 0:g.close;typeof h=="function"&&h(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function c(){a||(a=window.setTimeout(()=>{s(er(t,"redirect-cancelled-by-user"))},Bhe))}function f(){(document==null?void 0:document.visibilityState)==="visible"&&c()}e.addPassiveListener(u),document.addEventListener("resume",c,!1),hy()&&document.addEventListener("visibilitychange",f,!1),i=()=>{e.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",f,!1),a&&window.clearTimeout(a)}})}finally{i()}}function jhe(t){var n,r,i,o,s,a,u,c,f,h;const e=zc();Re(typeof((n=e==null?void 0:e.universalLinks)==null?void 0:n.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Re(typeof((r=e==null?void 0:e.BuildInfo)==null?void 0:r.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Re(typeof((s=(o=(i=e==null?void 0:e.cordova)==null?void 0:i.plugins)==null?void 0:o.browsertab)==null?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Re(typeof((c=(u=(a=e==null?void 0:e.cordova)==null?void 0:a.plugins)==null?void 0:u.browsertab)==null?void 0:c.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Re(typeof((h=(f=e==null?void 0:e.cordova)==null?void 0:f.InAppBrowser)==null?void 0:h.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function Khe(t){const e=Whe(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function Whe(t){if(Jo(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yhe=20;class Jhe extends MW{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function Xhe(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:epe(),postBody:null,tenantId:t.tenantId,error:er(t,"no-auth-event")}}function Qhe(t,e){return kN()._set(ON(t),e)}async function tF(t){const e=await kN()._get(ON(t));return e&&await kN()._remove(ON(t)),e}function Zhe(t,e){var r,i;const n=npe(e);if(n.includes("/__/auth/callback")){const o=a_(n),s=o.firebaseError?tpe(decodeURIComponent(o.firebaseError)):null,a=(i=(r=s==null?void 0:s.code)==null?void 0:r.split("auth/"))==null?void 0:i[1],u=a?er(a):null;return u?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:n,postBody:null}}return null}function epe(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<Yhe;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function kN(){return ki(uD)}function ON(t){return Mc("authEvent",t.config.apiKey,t.name)}function tpe(t){try{return JSON.parse(t)}catch{return null}}function npe(t){const e=a_(t),n=e.link?decodeURIComponent(e.link):void 0,r=a_(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return a_(i).link||i||r||n||t}function a_(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return Cd(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rpe=500;class ipe{constructor(){this._redirectPersistence=Bc,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=dw,this._overrideRedirectResult=pD}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new Jhe(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){Rr(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){jhe(e);const o=await this._initialize(e);await o.initialized(),o.resetRedirect(),Qde(),await this._originValidation(e);const s=Xhe(e,r,i);await Qhe(e,s);const a=await $he(e,s,n),u=await Hhe(a);return Ghe(e,o,u)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=zhe(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:o}=zc(),s=setTimeout(async()=>{await tF(e),n.onEvent(nF())},rpe),a=async f=>{clearTimeout(s);const h=await tF(e);let g=null;h&&(f!=null&&f.url)&&(g=Zhe(h,f.url)),n.onEvent(g||nF())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const u=i,c=`${o.packageName.toLowerCase()}://`;zc().handleOpenURL=async f=>{if(f.toLowerCase().startsWith(c)&&a({url:f}),typeof u=="function")try{u(f)}catch(h){console.error(h)}}}}const ope=ipe;function nF(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:er("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function spe(t,e){bn(t)._logFramework(e)}var ape="@firebase/auth-compat",lpe="0.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const upe=1e3;function lg(){var t;return((t=self==null?void 0:self.location)==null?void 0:t.protocol)||null}function cpe(){return lg()==="http:"||lg()==="https:"}function LW(t=_n()){return!!((lg()==="file:"||lg()==="ionic:"||lg()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function fpe(){return G2()||tw()}function dpe(){return IK()&&(document==null?void 0:document.documentMode)===11}function hpe(t=_n()){return/Edge\/\d+/.test(t)}function ppe(t=_n()){return dpe()||hpe(t)}function VW(){try{const t=self.localStorage,e=yy();if(t)return t.setItem(e,"1"),t.removeItem(e),ppe()?xg():!0}catch{return gD()&&xg()}return!1}function gD(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function oS(){return(cpe()||CK()||LW())&&!fpe()&&VW()&&!gD()}function UW(){return LW()&&typeof document<"u"}async function mpe(){return UW()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},upe);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function gpe(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi={LOCAL:"local",NONE:"none",SESSION:"session"},_m=Re,qW="persistence";function ype(t,e){if(_m(Object.values(Mi).includes(e),t,"invalid-persistence-type"),G2()){_m(e!==Mi.SESSION,t,"unsupported-persistence-type");return}if(tw()){_m(e===Mi.NONE,t,"unsupported-persistence-type");return}if(gD()){_m(e===Mi.NONE||e===Mi.LOCAL&&xg(),t,"unsupported-persistence-type");return}_m(e===Mi.NONE||VW(),t,"unsupported-persistence-type")}async function LN(t){await t._initializationPromise;const e=FW(),n=Mc(qW,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistenceType())}function vpe(t,e){const n=FW();if(!n)return[];const r=Mc(qW,t,e);switch(n.getItem(r)){case Mi.NONE:return[Kd];case Mi.LOCAL:return[Pg,Bc];case Mi.SESSION:return[Bc];default:return[]}}function FW(){var t;try{return((t=gpe())==null?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _pe=Re;class Ql{constructor(){this.browserResolver=ki(khe),this.cordovaResolver=ki(ope),this.underlyingResolver=null,this._redirectPersistence=Bc,this._completeRedirectFn=dw,this._overrideRedirectResult=pD}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return UW()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return _pe(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await mpe();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BW(t){return t.unwrap()}function bpe(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wpe(t){return $W(t)}function Epe(t,e){var r;const n=(r=e.customData)==null?void 0:r._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new Tpe(t,hde(t,e))}else if(n){const i=$W(e),o=e;i&&(o.credential=i,o.tenantId=n.tenantId||void 0,o.email=n.email||void 0,o.phoneNumber=n.phoneNumber||void 0)}}function $W(t){const{_tokenResponse:e}=t instanceof $r?t.customData:t;if(!e)return null;if(!(t instanceof $r)&&"temporaryProof"in e&&"phoneNumber"in e)return $c.credentialFromResult(t);const n=e.providerId;if(!n||n===ym.PASSWORD)return null;let r;switch(n){case ym.GOOGLE:r=As;break;case ym.FACEBOOK:r=Ss;break;case ym.GITHUB:r=Cs;break;case ym.TWITTER:r=Is;break;default:const{oauthIdToken:i,oauthAccessToken:o,oauthTokenSecret:s,pendingToken:a,nonce:u}=e;return!o&&!s&&!i&&!a?null:a?n.startsWith("saml.")?Wd._create(n,a):Fs._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:i,accessToken:o}):new Dd(n).credential({idToken:i,accessToken:o,rawNonce:u})}return t instanceof $r?r.credentialFromError(t):r.credentialFromResult(t)}function fi(t,e){return e.catch(n=>{throw n instanceof $r&&Epe(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:wpe(n),additionalUserInfo:dde(n),user:hw.getOrCreate(i)}})}async function VN(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>fi(t,n.confirm(r))}}class Tpe{constructor(e,n){this.resolver=n,this.auth=bpe(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return fi(BW(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hw=class zm{constructor(e){this._delegate=e,this.multiFactor=gde(e)}static getOrCreate(e){return zm.USER_MAP.has(e)||zm.USER_MAP.set(e,new zm(e)),zm.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return fi(this.auth,yW(this._delegate,e))}async linkWithPhoneNumber(e,n){return VN(this.auth,qde(this._delegate,e,n))}async linkWithPopup(e){return fi(this.auth,Wde(this._delegate,e,Ql))}async linkWithRedirect(e){return await LN(bn(this.auth)),rhe(this._delegate,e,Ql)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return fi(this.auth,vW(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return VN(this.auth,Fde(this._delegate,e,n))}reauthenticateWithPopup(e){return fi(this.auth,Kde(this._delegate,e,Ql))}async reauthenticateWithRedirect(e){return await LN(bn(this.auth)),the(this._delegate,e,Ql)}sendEmailVerification(e){return tde(this._delegate,e)}async unlink(e){return await Bfe(this._delegate,e),this}updateEmail(e){return ode(this._delegate,e)}updatePassword(e){return sde(this._delegate,e)}updatePhoneNumber(e){return Bde(this._delegate,e)}updateProfile(e){return ide(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return nde(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};hw.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm=Re;class UN{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;bm(r,"invalid-api-key",{appName:e.name}),bm(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?Ql:void 0;this._delegate=n.initialize({options:{persistence:xpe(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Pce),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?hw.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){vfe(this._delegate,e,n)}applyActionCode(e){return jfe(this._delegate,e)}checkActionCode(e){return _W(this._delegate,e)}confirmPasswordReset(e,n){return Gfe(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return fi(this._delegate,Wfe(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return ede(this._delegate,e)}isSignInWithEmailLink(e){return Xfe(this._delegate,e)}async getRedirectResult(){bm(oS(),this._delegate,"operation-not-supported-in-this-environment");const e=await ohe(this._delegate,Ql);return e?fi(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){spe(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:o,complete:s}=rF(e,n,r);return this._delegate.onAuthStateChanged(i,o,s)}onIdTokenChanged(e,n,r){const{next:i,error:o,complete:s}=rF(e,n,r);return this._delegate.onIdTokenChanged(i,o,s)}sendSignInLinkToEmail(e,n){return Jfe(this._delegate,e,n)}sendPasswordResetEmail(e,n){return Hfe(this._delegate,e,n||void 0)}async setPersistence(e){ype(this._delegate,e);let n;switch(e){case Mi.SESSION:n=Bc;break;case Mi.LOCAL:n=await ki(Pg)._isAvailable()?Pg:uD;break;case Mi.NONE:n=Kd;break;default:return Rr("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return fi(this._delegate,Ffe(this._delegate))}signInWithCredential(e){return fi(this._delegate,aw(this._delegate,e))}signInWithCustomToken(e){return fi(this._delegate,zfe(this._delegate,e))}signInWithEmailAndPassword(e,n){return fi(this._delegate,Yfe(this._delegate,e,n))}signInWithEmailLink(e,n){return fi(this._delegate,Qfe(this._delegate,e,n))}signInWithPhoneNumber(e,n){return VN(this._delegate,Ude(this._delegate,e,n))}async signInWithPopup(e){return bm(oS(),this._delegate,"operation-not-supported-in-this-environment"),fi(this._delegate,jde(this._delegate,e,Ql))}async signInWithRedirect(e){return bm(oS(),this._delegate,"operation-not-supported-in-this-environment"),await LN(this._delegate),Zde(this._delegate,e,Ql)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return Kfe(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}UN.Persistence=Mi;function rF(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:s=>i(s&&hw.getOrCreate(s)),error:e,complete:n}}function xpe(t,e){const n=vpe(t,e);if(typeof self<"u"&&!n.includes(Pg)&&n.push(Pg),typeof window<"u")for(const r of[uD,Bc])n.includes(r)||n.push(r);return n.includes(Kd)||n.push(Kd),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{static credential(e,n){return $c.credential(e,n)}constructor(){this.providerId="phone",this._delegate=new $c(BW(ja.auth()))}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}yD.PHONE_SIGN_IN_METHOD=$c.PHONE_SIGN_IN_METHOD;yD.PROVIDER_ID=$c.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Spe=Re;class Ape{constructor(e,n,r=ja.app()){var i;Spe((i=r.options)==null?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new Lde(r.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cpe="auth-compat";function Ipe(t){t.INTERNAL.registerComponent(new wo(Cpe,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new UN(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ld.EMAIL_SIGNIN,PASSWORD_RESET:ld.PASSWORD_RESET,RECOVER_EMAIL:ld.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:ld.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:ld.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:ld.VERIFY_EMAIL}},EmailAuthProvider:Eu,FacebookAuthProvider:Ss,GithubAuthProvider:Cs,GoogleAuthProvider:As,OAuthProvider:Dd,SAMLAuthProvider:D_,PhoneAuthProvider:yD,PhoneMultiFactorGenerator:OW,RecaptchaVerifier:Ape,TwitterAuthProvider:Is,Auth:UN,AuthCredential:Oh,Error:$r}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(ape,lpe)}Ipe(ja);var iF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ru,zW;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,L){function N(){}N.prototype=L.prototype,D.F=L.prototype,D.prototype=new N,D.prototype.constructor=D,D.D=function(U,V,$){for(var F=Array(arguments.length-2),H=2;H<arguments.length;H++)F[H-2]=arguments[H];return L.prototype[V].apply(U,F)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,L,N){N||(N=0);const U=Array(16);if(typeof L=="string")for(var V=0;V<16;++V)U[V]=L.charCodeAt(N++)|L.charCodeAt(N++)<<8|L.charCodeAt(N++)<<16|L.charCodeAt(N++)<<24;else for(V=0;V<16;++V)U[V]=L[N++]|L[N++]<<8|L[N++]<<16|L[N++]<<24;L=D.g[0],N=D.g[1],V=D.g[2];let $=D.g[3],F;F=L+($^N&(V^$))+U[0]+3614090360&4294967295,L=N+(F<<7&4294967295|F>>>25),F=$+(V^L&(N^V))+U[1]+3905402710&4294967295,$=L+(F<<12&4294967295|F>>>20),F=V+(N^$&(L^N))+U[2]+606105819&4294967295,V=$+(F<<17&4294967295|F>>>15),F=N+(L^V&($^L))+U[3]+3250441966&4294967295,N=V+(F<<22&4294967295|F>>>10),F=L+($^N&(V^$))+U[4]+4118548399&4294967295,L=N+(F<<7&4294967295|F>>>25),F=$+(V^L&(N^V))+U[5]+1200080426&4294967295,$=L+(F<<12&4294967295|F>>>20),F=V+(N^$&(L^N))+U[6]+2821735955&4294967295,V=$+(F<<17&4294967295|F>>>15),F=N+(L^V&($^L))+U[7]+4249261313&4294967295,N=V+(F<<22&4294967295|F>>>10),F=L+($^N&(V^$))+U[8]+1770035416&4294967295,L=N+(F<<7&4294967295|F>>>25),F=$+(V^L&(N^V))+U[9]+2336552879&4294967295,$=L+(F<<12&4294967295|F>>>20),F=V+(N^$&(L^N))+U[10]+4294925233&4294967295,V=$+(F<<17&4294967295|F>>>15),F=N+(L^V&($^L))+U[11]+2304563134&4294967295,N=V+(F<<22&4294967295|F>>>10),F=L+($^N&(V^$))+U[12]+1804603682&4294967295,L=N+(F<<7&4294967295|F>>>25),F=$+(V^L&(N^V))+U[13]+4254626195&4294967295,$=L+(F<<12&4294967295|F>>>20),F=V+(N^$&(L^N))+U[14]+2792965006&4294967295,V=$+(F<<17&4294967295|F>>>15),F=N+(L^V&($^L))+U[15]+1236535329&4294967295,N=V+(F<<22&4294967295|F>>>10),F=L+(V^$&(N^V))+U[1]+4129170786&4294967295,L=N+(F<<5&4294967295|F>>>27),F=$+(N^V&(L^N))+U[6]+3225465664&4294967295,$=L+(F<<9&4294967295|F>>>23),F=V+(L^N&($^L))+U[11]+643717713&4294967295,V=$+(F<<14&4294967295|F>>>18),F=N+($^L&(V^$))+U[0]+3921069994&4294967295,N=V+(F<<20&4294967295|F>>>12),F=L+(V^$&(N^V))+U[5]+3593408605&4294967295,L=N+(F<<5&4294967295|F>>>27),F=$+(N^V&(L^N))+U[10]+38016083&4294967295,$=L+(F<<9&4294967295|F>>>23),F=V+(L^N&($^L))+U[15]+3634488961&4294967295,V=$+(F<<14&4294967295|F>>>18),F=N+($^L&(V^$))+U[4]+3889429448&4294967295,N=V+(F<<20&4294967295|F>>>12),F=L+(V^$&(N^V))+U[9]+568446438&4294967295,L=N+(F<<5&4294967295|F>>>27),F=$+(N^V&(L^N))+U[14]+3275163606&4294967295,$=L+(F<<9&4294967295|F>>>23),F=V+(L^N&($^L))+U[3]+4107603335&4294967295,V=$+(F<<14&4294967295|F>>>18),F=N+($^L&(V^$))+U[8]+1163531501&4294967295,N=V+(F<<20&4294967295|F>>>12),F=L+(V^$&(N^V))+U[13]+2850285829&4294967295,L=N+(F<<5&4294967295|F>>>27),F=$+(N^V&(L^N))+U[2]+4243563512&4294967295,$=L+(F<<9&4294967295|F>>>23),F=V+(L^N&($^L))+U[7]+1735328473&4294967295,V=$+(F<<14&4294967295|F>>>18),F=N+($^L&(V^$))+U[12]+2368359562&4294967295,N=V+(F<<20&4294967295|F>>>12),F=L+(N^V^$)+U[5]+4294588738&4294967295,L=N+(F<<4&4294967295|F>>>28),F=$+(L^N^V)+U[8]+2272392833&4294967295,$=L+(F<<11&4294967295|F>>>21),F=V+($^L^N)+U[11]+1839030562&4294967295,V=$+(F<<16&4294967295|F>>>16),F=N+(V^$^L)+U[14]+4259657740&4294967295,N=V+(F<<23&4294967295|F>>>9),F=L+(N^V^$)+U[1]+2763975236&4294967295,L=N+(F<<4&4294967295|F>>>28),F=$+(L^N^V)+U[4]+1272893353&4294967295,$=L+(F<<11&4294967295|F>>>21),F=V+($^L^N)+U[7]+4139469664&4294967295,V=$+(F<<16&4294967295|F>>>16),F=N+(V^$^L)+U[10]+3200236656&4294967295,N=V+(F<<23&4294967295|F>>>9),F=L+(N^V^$)+U[13]+681279174&4294967295,L=N+(F<<4&4294967295|F>>>28),F=$+(L^N^V)+U[0]+3936430074&4294967295,$=L+(F<<11&4294967295|F>>>21),F=V+($^L^N)+U[3]+3572445317&4294967295,V=$+(F<<16&4294967295|F>>>16),F=N+(V^$^L)+U[6]+76029189&4294967295,N=V+(F<<23&4294967295|F>>>9),F=L+(N^V^$)+U[9]+3654602809&4294967295,L=N+(F<<4&4294967295|F>>>28),F=$+(L^N^V)+U[12]+3873151461&4294967295,$=L+(F<<11&4294967295|F>>>21),F=V+($^L^N)+U[15]+530742520&4294967295,V=$+(F<<16&4294967295|F>>>16),F=N+(V^$^L)+U[2]+3299628645&4294967295,N=V+(F<<23&4294967295|F>>>9),F=L+(V^(N|~$))+U[0]+4096336452&4294967295,L=N+(F<<6&4294967295|F>>>26),F=$+(N^(L|~V))+U[7]+1126891415&4294967295,$=L+(F<<10&4294967295|F>>>22),F=V+(L^($|~N))+U[14]+2878612391&4294967295,V=$+(F<<15&4294967295|F>>>17),F=N+($^(V|~L))+U[5]+4237533241&4294967295,N=V+(F<<21&4294967295|F>>>11),F=L+(V^(N|~$))+U[12]+1700485571&4294967295,L=N+(F<<6&4294967295|F>>>26),F=$+(N^(L|~V))+U[3]+2399980690&4294967295,$=L+(F<<10&4294967295|F>>>22),F=V+(L^($|~N))+U[10]+4293915773&4294967295,V=$+(F<<15&4294967295|F>>>17),F=N+($^(V|~L))+U[1]+2240044497&4294967295,N=V+(F<<21&4294967295|F>>>11),F=L+(V^(N|~$))+U[8]+1873313359&4294967295,L=N+(F<<6&4294967295|F>>>26),F=$+(N^(L|~V))+U[15]+4264355552&4294967295,$=L+(F<<10&4294967295|F>>>22),F=V+(L^($|~N))+U[6]+2734768916&4294967295,V=$+(F<<15&4294967295|F>>>17),F=N+($^(V|~L))+U[13]+1309151649&4294967295,N=V+(F<<21&4294967295|F>>>11),F=L+(V^(N|~$))+U[4]+4149444226&4294967295,L=N+(F<<6&4294967295|F>>>26),F=$+(N^(L|~V))+U[11]+3174756917&4294967295,$=L+(F<<10&4294967295|F>>>22),F=V+(L^($|~N))+U[2]+718787259&4294967295,V=$+(F<<15&4294967295|F>>>17),F=N+($^(V|~L))+U[9]+3951481745&4294967295,D.g[0]=D.g[0]+L&4294967295,D.g[1]=D.g[1]+(V+(F<<21&4294967295|F>>>11))&4294967295,D.g[2]=D.g[2]+V&4294967295,D.g[3]=D.g[3]+$&4294967295}r.prototype.v=function(D,L){L===void 0&&(L=D.length);const N=L-this.blockSize,U=this.C;let V=this.h,$=0;for(;$<L;){if(V==0)for(;$<=N;)i(this,D,$),$+=this.blockSize;if(typeof D=="string"){for(;$<L;)if(U[V++]=D.charCodeAt($++),V==this.blockSize){i(this,U),V=0;break}}else for(;$<L;)if(U[V++]=D[$++],V==this.blockSize){i(this,U),V=0;break}}this.h=V,this.o+=L},r.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var L=1;L<D.length-8;++L)D[L]=0;L=this.o*8;for(var N=D.length-8;N<D.length;++N)D[N]=L&255,L/=256;for(this.v(D),D=Array(16),L=0,N=0;N<4;++N)for(let U=0;U<32;U+=8)D[L++]=this.g[N]>>>U&255;return D};function o(D,L){var N=a;return Object.prototype.hasOwnProperty.call(N,D)?N[D]:N[D]=L(D)}function s(D,L){this.h=L;const N=[];let U=!0;for(let V=D.length-1;V>=0;V--){const $=D[V]|0;U&&$==L||(N[V]=$,U=!1)}this.g=N}var a={};function u(D){return-128<=D&&D<128?o(D,function(L){return new s([L|0],L<0?-1:0)}):new s([D|0],D<0?-1:0)}function c(D){if(isNaN(D)||!isFinite(D))return h;if(D<0)return b(c(-D));const L=[];let N=1;for(let U=0;D>=N;U++)L[U]=D/N|0,N*=4294967296;return new s(L,0)}function f(D,L){if(D.length==0)throw Error("number format error: empty string");if(L=L||10,L<2||36<L)throw Error("radix out of range: "+L);if(D.charAt(0)=="-")return b(f(D.substring(1),L));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=c(Math.pow(L,8));let U=h;for(let $=0;$<D.length;$+=8){var V=Math.min(8,D.length-$);const F=parseInt(D.substring($,$+V),L);V<8?(V=c(Math.pow(L,V)),U=U.j(V).add(c(F))):(U=U.j(N),U=U.add(c(F)))}return U}var h=u(0),g=u(1),_=u(16777216);t=s.prototype,t.m=function(){if(E(this))return-b(this).m();let D=0,L=1;for(let N=0;N<this.g.length;N++){const U=this.i(N);D+=(U>=0?U:4294967296+U)*L,L*=4294967296}return D},t.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(T(this))return"0";if(E(this))return"-"+b(this).toString(D);const L=c(Math.pow(D,6));var N=this;let U="";for(;;){const V=P(N,L).g;N=S(N,V.j(L));let $=((N.g.length>0?N.g[0]:N.h)>>>0).toString(D);if(N=V,T(N))return $+U;for(;$.length<6;)$="0"+$;U=$+U}},t.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function T(D){if(D.h!=0)return!1;for(let L=0;L<D.g.length;L++)if(D.g[L]!=0)return!1;return!0}function E(D){return D.h==-1}t.l=function(D){return D=S(this,D),E(D)?-1:T(D)?0:1};function b(D){const L=D.g.length,N=[];for(let U=0;U<L;U++)N[U]=~D.g[U];return new s(N,~D.h).add(g)}t.abs=function(){return E(this)?b(this):this},t.add=function(D){const L=Math.max(this.g.length,D.g.length),N=[];let U=0;for(let V=0;V<=L;V++){let $=U+(this.i(V)&65535)+(D.i(V)&65535),F=($>>>16)+(this.i(V)>>>16)+(D.i(V)>>>16);U=F>>>16,$&=65535,F&=65535,N[V]=F<<16|$}return new s(N,N[N.length-1]&-2147483648?-1:0)};function S(D,L){return D.add(b(L))}t.j=function(D){if(T(this)||T(D))return h;if(E(this))return E(D)?b(this).j(b(D)):b(b(this).j(D));if(E(D))return b(this.j(b(D)));if(this.l(_)<0&&D.l(_)<0)return c(this.m()*D.m());const L=this.g.length+D.g.length,N=[];for(var U=0;U<2*L;U++)N[U]=0;for(U=0;U<this.g.length;U++)for(let V=0;V<D.g.length;V++){const $=this.i(U)>>>16,F=this.i(U)&65535,H=D.i(V)>>>16,X=D.i(V)&65535;N[2*U+2*V]+=F*X,C(N,2*U+2*V),N[2*U+2*V+1]+=$*X,C(N,2*U+2*V+1),N[2*U+2*V+1]+=F*H,C(N,2*U+2*V+1),N[2*U+2*V+2]+=$*H,C(N,2*U+2*V+2)}for(D=0;D<L;D++)N[D]=N[2*D+1]<<16|N[2*D];for(D=L;D<2*L;D++)N[D]=0;return new s(N,0)};function C(D,L){for(;(D[L]&65535)!=D[L];)D[L+1]+=D[L]>>>16,D[L]&=65535,L++}function R(D,L){this.g=D,this.h=L}function P(D,L){if(T(L))throw Error("division by zero");if(T(D))return new R(h,h);if(E(D))return L=P(b(D),L),new R(b(L.g),b(L.h));if(E(L))return L=P(D,b(L)),new R(b(L.g),L.h);if(D.g.length>30){if(E(D)||E(L))throw Error("slowDivide_ only works with positive integers.");for(var N=g,U=L;U.l(D)<=0;)N=O(N),U=O(U);var V=q(N,1),$=q(U,1);for(U=q(U,2),N=q(N,2);!T(U);){var F=$.add(U);F.l(D)<=0&&(V=V.add(N),$=F),U=q(U,1),N=q(N,1)}return L=S(D,V.j(L)),new R(V,L)}for(V=h;D.l(L)>=0;){for(N=Math.max(1,Math.floor(D.m()/L.m())),U=Math.ceil(Math.log(N)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),$=c(N),F=$.j(L);E(F)||F.l(D)>0;)N-=U,$=c(N),F=$.j(L);T($)&&($=g),V=V.add($),D=S(D,F)}return new R(V,D)}t.B=function(D){return P(this,D).h},t.and=function(D){const L=Math.max(this.g.length,D.g.length),N=[];for(let U=0;U<L;U++)N[U]=this.i(U)&D.i(U);return new s(N,this.h&D.h)},t.or=function(D){const L=Math.max(this.g.length,D.g.length),N=[];for(let U=0;U<L;U++)N[U]=this.i(U)|D.i(U);return new s(N,this.h|D.h)},t.xor=function(D){const L=Math.max(this.g.length,D.g.length),N=[];for(let U=0;U<L;U++)N[U]=this.i(U)^D.i(U);return new s(N,this.h^D.h)};function O(D){const L=D.g.length+1,N=[];for(let U=0;U<L;U++)N[U]=D.i(U)<<1|D.i(U-1)>>>31;return new s(N,D.h)}function q(D,L){const N=L>>5;L%=32;const U=D.g.length-N,V=[];for(let $=0;$<U;$++)V[$]=L>0?D.i($+N)>>>L|D.i($+N+1)<<32-L:D.i($+N);return new s(V,D.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,zW=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=c,s.fromString=f,ru=s}).apply(typeof iF<"u"?iF:typeof self<"u"?self:typeof window<"u"?window:{});var w0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var HW,Hm,GW,l_,qN,jW,KW,WW;(function(){var t,e=Object.defineProperty;function n(w){w=[typeof globalThis=="object"&&globalThis,w,typeof window=="object"&&window,typeof self=="object"&&self,typeof w0=="object"&&w0];for(var k=0;k<w.length;++k){var B=w[k];if(B&&B.Math==Math)return B}throw Error("Cannot find global object")}var r=n(this);function i(w,k){if(k)e:{var B=r;w=w.split(".");for(var W=0;W<w.length-1;W++){var ue=w[W];if(!(ue in B))break e;B=B[ue]}w=w[w.length-1],W=B[w],k=k(W),k!=W&&k!=null&&e(B,w,{configurable:!0,writable:!0,value:k})}}i("Symbol.dispose",function(w){return w||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(w){return w||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(w){return w||function(k){var B=[],W;for(W in k)Object.prototype.hasOwnProperty.call(k,W)&&B.push([W,k[W]]);return B}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},s=this||self;function a(w){var k=typeof w;return k=="object"&&w!=null||k=="function"}function u(w,k,B){return w.call.apply(w.bind,arguments)}function c(w,k,B){return c=u,c.apply(null,arguments)}function f(w,k){var B=Array.prototype.slice.call(arguments,1);return function(){var W=B.slice();return W.push.apply(W,arguments),w.apply(this,W)}}function h(w,k){function B(){}B.prototype=k.prototype,w.Z=k.prototype,w.prototype=new B,w.prototype.constructor=w,w.Ob=function(W,ue,me){for(var Ne=Array(arguments.length-2),st=2;st<arguments.length;st++)Ne[st-2]=arguments[st];return k.prototype[ue].apply(W,Ne)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?w=>w&&AsyncContext.Snapshot.wrap(w):w=>w;function _(w){const k=w.length;if(k>0){const B=Array(k);for(let W=0;W<k;W++)B[W]=w[W];return B}return[]}function T(w,k){for(let W=1;W<arguments.length;W++){const ue=arguments[W];var B=typeof ue;if(B=B!="object"?B:ue?Array.isArray(ue)?"array":B:"null",B=="array"||B=="object"&&typeof ue.length=="number"){B=w.length||0;const me=ue.length||0;w.length=B+me;for(let Ne=0;Ne<me;Ne++)w[B+Ne]=ue[Ne]}else w.push(ue)}}class E{constructor(k,B){this.i=k,this.j=B,this.h=0,this.g=null}get(){let k;return this.h>0?(this.h--,k=this.g,this.g=k.next,k.next=null):k=this.i(),k}}function b(w){s.setTimeout(()=>{throw w},0)}function S(){var w=D;let k=null;return w.g&&(k=w.g,w.g=w.g.next,w.g||(w.h=null),k.next=null),k}class C{constructor(){this.h=this.g=null}add(k,B){const W=R.get();W.set(k,B),this.h?this.h.next=W:this.g=W,this.h=W}}var R=new E(()=>new P,w=>w.reset());class P{constructor(){this.next=this.g=this.h=null}set(k,B){this.h=k,this.g=B,this.next=null}reset(){this.next=this.g=this.h=null}}let O,q=!1,D=new C,L=()=>{const w=Promise.resolve(void 0);O=()=>{w.then(N)}};function N(){for(var w;w=S();){try{w.h.call(w.g)}catch(B){b(B)}var k=R;k.j(w),k.h<100&&(k.h++,w.next=k.g,k.g=w)}q=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(w,k){this.type=w,this.g=this.target=k,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var $=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var w=!1,k=Object.defineProperty({},"passive",{get:function(){w=!0}});try{const B=()=>{};s.addEventListener("test",B,k),s.removeEventListener("test",B,k)}catch{}return w})();function F(w){return/^[\s\xa0]*$/.test(w)}function H(w,k){V.call(this,w?w.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,w&&this.init(w,k)}h(H,V),H.prototype.init=function(w,k){const B=this.type=w.type,W=w.changedTouches&&w.changedTouches.length?w.changedTouches[0]:null;this.target=w.target||w.srcElement,this.g=k,k=w.relatedTarget,k||(B=="mouseover"?k=w.fromElement:B=="mouseout"&&(k=w.toElement)),this.relatedTarget=k,W?(this.clientX=W.clientX!==void 0?W.clientX:W.pageX,this.clientY=W.clientY!==void 0?W.clientY:W.pageY,this.screenX=W.screenX||0,this.screenY=W.screenY||0):(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0),this.button=w.button,this.key=w.key||"",this.ctrlKey=w.ctrlKey,this.altKey=w.altKey,this.shiftKey=w.shiftKey,this.metaKey=w.metaKey,this.pointerId=w.pointerId||0,this.pointerType=w.pointerType,this.state=w.state,this.i=w,w.defaultPrevented&&H.Z.h.call(this)},H.prototype.h=function(){H.Z.h.call(this);const w=this.i;w.preventDefault?w.preventDefault():w.returnValue=!1};var X="closure_listenable_"+(Math.random()*1e6|0),K=0;function te(w,k,B,W,ue){this.listener=w,this.proxy=null,this.src=k,this.type=B,this.capture=!!W,this.ha=ue,this.key=++K,this.da=this.fa=!1}function re(w){w.da=!0,w.listener=null,w.proxy=null,w.src=null,w.ha=null}function Y(w,k,B){for(const W in w)k.call(B,w[W],W,w)}function G(w,k){for(const B in w)k.call(void 0,w[B],B,w)}function Q(w){const k={};for(const B in w)k[B]=w[B];return k}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fe(w,k){let B,W;for(let ue=1;ue<arguments.length;ue++){W=arguments[ue];for(B in W)w[B]=W[B];for(let me=0;me<Z.length;me++)B=Z[me],Object.prototype.hasOwnProperty.call(W,B)&&(w[B]=W[B])}}function J(w){this.src=w,this.g={},this.h=0}J.prototype.add=function(w,k,B,W,ue){const me=w.toString();w=this.g[me],w||(w=this.g[me]=[],this.h++);const Ne=oe(w,k,W,ue);return Ne>-1?(k=w[Ne],B||(k.fa=!1)):(k=new te(k,this.src,me,!!W,ue),k.fa=B,w.push(k)),k};function ne(w,k){const B=k.type;if(B in w.g){var W=w.g[B],ue=Array.prototype.indexOf.call(W,k,void 0),me;(me=ue>=0)&&Array.prototype.splice.call(W,ue,1),me&&(re(k),w.g[B].length==0&&(delete w.g[B],w.h--))}}function oe(w,k,B,W){for(let ue=0;ue<w.length;++ue){const me=w[ue];if(!me.da&&me.listener==k&&me.capture==!!B&&me.ha==W)return ue}return-1}var _e="closure_lm_"+(Math.random()*1e6|0),Ce={};function ye(w,k,B,W,ue){if(Array.isArray(k)){for(let me=0;me<k.length;me++)ye(w,k[me],B,W,ue);return null}return B=qe(B),w&&w[X]?w.J(k,B,a(W)?!!W.capture:!1,ue):Ie(w,k,B,!1,W,ue)}function Ie(w,k,B,W,ue,me){if(!k)throw Error("Invalid event type");const Ne=a(ue)?!!ue.capture:!!ue;let st=at(w);if(st||(w[_e]=st=new J(w)),B=st.add(k,B,W,Ne,me),B.proxy)return B;if(W=Le(),B.proxy=W,W.src=w,W.listener=B,w.addEventListener)$||(ue=Ne),ue===void 0&&(ue=!1),w.addEventListener(k.toString(),W,ue);else if(w.attachEvent)w.attachEvent(Be(k.toString()),W);else if(w.addListener&&w.removeListener)w.addListener(W);else throw Error("addEventListener and attachEvent are unavailable.");return B}function Le(){function w(B){return k.call(w.src,w.listener,B)}const k=Ve;return w}function be(w,k,B,W,ue){if(Array.isArray(k))for(var me=0;me<k.length;me++)be(w,k[me],B,W,ue);else W=a(W)?!!W.capture:!!W,B=qe(B),w&&w[X]?(w=w.i,me=String(k).toString(),me in w.g&&(k=w.g[me],B=oe(k,B,W,ue),B>-1&&(re(k[B]),Array.prototype.splice.call(k,B,1),k.length==0&&(delete w.g[me],w.h--)))):w&&(w=at(w))&&(k=w.g[k.toString()],w=-1,k&&(w=oe(k,B,W,ue)),(B=w>-1?k[w]:null)&&Qe(B))}function Qe(w){if(typeof w!="number"&&w&&!w.da){var k=w.src;if(k&&k[X])ne(k.i,w);else{var B=w.type,W=w.proxy;k.removeEventListener?k.removeEventListener(B,W,w.capture):k.detachEvent?k.detachEvent(Be(B),W):k.addListener&&k.removeListener&&k.removeListener(W),(B=at(k))?(ne(B,w),B.h==0&&(B.src=null,k[_e]=null)):re(w)}}}function Be(w){return w in Ce?Ce[w]:Ce[w]="on"+w}function Ve(w,k){if(w.da)w=!0;else{k=new H(k,this);const B=w.listener,W=w.ha||w.src;w.fa&&Qe(w),w=B.call(W,k)}return w}function at(w){return w=w[_e],w instanceof J?w:null}var Pe="__closure_events_fn_"+(Math.random()*1e9>>>0);function qe(w){return typeof w=="function"?w:(w[Pe]||(w[Pe]=function(k){return w.handleEvent(k)}),w[Pe])}function ot(){U.call(this),this.i=new J(this),this.M=this,this.G=null}h(ot,U),ot.prototype[X]=!0,ot.prototype.removeEventListener=function(w,k,B,W){be(this,w,k,B,W)};function Tt(w,k){var B,W=w.G;if(W)for(B=[];W;W=W.G)B.push(W);if(w=w.M,W=k.type||k,typeof k=="string")k=new V(k,w);else if(k instanceof V)k.target=k.target||w;else{var ue=k;k=new V(W,w),fe(k,ue)}ue=!0;let me,Ne;if(B)for(Ne=B.length-1;Ne>=0;Ne--)me=k.g=B[Ne],ue=En(me,W,!0,k)&&ue;if(me=k.g=w,ue=En(me,W,!0,k)&&ue,ue=En(me,W,!1,k)&&ue,B)for(Ne=0;Ne<B.length;Ne++)me=k.g=B[Ne],ue=En(me,W,!1,k)&&ue}ot.prototype.N=function(){if(ot.Z.N.call(this),this.i){var w=this.i;for(const k in w.g){const B=w.g[k];for(let W=0;W<B.length;W++)re(B[W]);delete w.g[k],w.h--}}this.G=null},ot.prototype.J=function(w,k,B,W){return this.i.add(String(w),k,!1,B,W)},ot.prototype.K=function(w,k,B,W){return this.i.add(String(w),k,!0,B,W)};function En(w,k,B,W){if(k=w.i.g[String(k)],!k)return!0;k=k.concat();let ue=!0;for(let me=0;me<k.length;++me){const Ne=k[me];if(Ne&&!Ne.da&&Ne.capture==B){const st=Ne.listener,Zt=Ne.ha||Ne.src;Ne.fa&&ne(w.i,Ne),ue=st.call(Zt,W)!==!1&&ue}}return ue&&!W.defaultPrevented}function Nn(w,k){if(typeof w!="function")if(w&&typeof w.handleEvent=="function")w=c(w.handleEvent,w);else throw Error("Invalid listener argument");return Number(k)>2147483647?-1:s.setTimeout(w,k||0)}function Rt(w){w.g=Nn(()=>{w.g=null,w.i&&(w.i=!1,Rt(w))},w.l);const k=w.h;w.h=null,w.m.apply(null,k)}class Mn extends U{constructor(k,B){super(),this.m=k,this.l=B,this.h=null,this.i=!1,this.g=null}j(k){this.h=arguments,this.g?this.i=!0:Rt(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Te(w){U.call(this),this.h=w,this.g={}}h(Te,U);var ke=[];function Ue(w){Y(w.g,function(k,B){this.g.hasOwnProperty(B)&&Qe(k)},w),w.g={}}Te.prototype.N=function(){Te.Z.N.call(this),Ue(this)},Te.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Oe=s.JSON.stringify,Ye=s.JSON.parse,Ct=class{stringify(w){return s.JSON.stringify(w,void 0)}parse(w){return s.JSON.parse(w,void 0)}};function Pt(){}function Ft(){}var lt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function wt(){V.call(this,"d")}h(wt,V);function Kn(){V.call(this,"c")}h(Kn,V);var Tn={},Wn=null;function Gi(){return Wn=Wn||new ot}Tn.Ia="serverreachability";function Ws(w){V.call(this,Tn.Ia,w)}h(Ws,V);function oi(w){const k=Gi();Tt(k,new Ws(k))}Tn.STAT_EVENT="statevent";function as(w,k){V.call(this,Tn.STAT_EVENT,w),this.stat=k}h(as,V);function an(w){const k=Gi();Tt(k,new as(k,w))}Tn.Ja="timingevent";function ji(w,k){V.call(this,Tn.Ja,w),this.size=k}h(ji,V);function ls(w,k){if(typeof w!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){w()},k)}function us(){this.g=!0}us.prototype.ua=function(){this.g=!1};function ku(w,k,B,W,ue,me){w.info(function(){if(w.g)if(me){var Ne="",st=me.split("&");for(let Dt=0;Dt<st.length;Dt++){var Zt=st[Dt].split("=");if(Zt.length>1){const Dn=Zt[0];Zt=Zt[1];const bi=Dn.split("_");Ne=bi.length>=2&&bi[1]=="type"?Ne+(Dn+"="+Zt+"&"):Ne+(Dn+"=redacted&")}}}else Ne=null;else Ne=me;return"XMLHTTP REQ ("+W+") [attempt "+ue+"]: "+k+`
`+B+`
`+Ne})}function Ou(w,k,B,W,ue,me,Ne){w.info(function(){return"XMLHTTP RESP ("+W+") [ attempt "+ue+"]: "+k+`
`+B+`
`+me+" "+Ne})}function Po(w,k,B,W){w.info(function(){return"XMLHTTP TEXT ("+k+"): "+Ki(w,B)+(W?" "+W:"")})}function fp(w,k){w.info(function(){return"TIMEOUT: "+k})}us.prototype.info=function(){};function Ki(w,k){if(!w.g)return k;if(!k)return null;try{const me=JSON.parse(k);if(me){for(w=0;w<me.length;w++)if(Array.isArray(me[w])){var B=me[w];if(!(B.length<2)){var W=B[1];if(Array.isArray(W)&&!(W.length<1)){var ue=W[0];if(ue!="noop"&&ue!="stop"&&ue!="close")for(let Ne=1;Ne<W.length;Ne++)W[Ne]=""}}}}return Oe(me)}catch{return k}}var mn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Yn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},No;function Ys(){}h(Ys,Pt),Ys.prototype.g=function(){return new XMLHttpRequest},No=new Ys;function Js(w){return encodeURIComponent(String(w))}function dp(w){var k=1;w=w.split(":");const B=[];for(;k>0&&w.length;)B.push(w.shift()),k--;return w.length&&B.push(w.join(":")),B}function vi(w,k,B,W){this.j=w,this.i=k,this.l=B,this.S=W||1,this.V=new Te(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new cs}function cs(){this.i=null,this.g="",this.h=!1}var ul={},_i={};function Wi(w,k,B){w.M=1,w.A=ea(yn(k)),w.u=B,w.R=!0,fs(w,null)}function fs(w,k){w.F=Date.now(),Xs(w),w.B=yn(w.A);var B=w.B,W=w.S;Array.isArray(W)||(W=[String(W)]),sv(B.i,"t",W),w.C=0,B=w.j.L,w.h=new cs,w.g=Mf(w.j,B?k:null,!w.u),w.P>0&&(w.O=new Mn(c(w.Y,w,w.g),w.P)),k=w.V,B=w.g,W=w.ba;var ue="readystatechange";Array.isArray(ue)||(ue&&(ke[0]=ue.toString()),ue=ke);for(let me=0;me<ue.length;me++){const Ne=ye(B,ue[me],W||k.handleEvent,!1,k.h||k);if(!Ne)break;k.g[Ne.key]=Ne}k=w.J?Q(w.J):{},w.u?(w.v||(w.v="POST"),k["Content-Type"]="application/x-www-form-urlencoded",w.g.ea(w.B,w.v,w.u,k)):(w.v="GET",w.g.ea(w.B,w.v,null,k)),oi(),ku(w.i,w.v,w.B,w.l,w.S,w.u)}vi.prototype.ba=function(w){w=w.target;const k=this.O;k&&Dr(w)==3?k.j():this.Y(w)},vi.prototype.Y=function(w){try{if(w==this.g)e:{const st=Dr(this.g),Zt=this.g.ya(),Dt=this.g.ca();if(!(st<3)&&(st!=3||this.g&&(this.h.h||this.g.la()||$u(this.g)))){this.K||st!=4||Zt==7||(Zt==8||Dt<=0?oi(3):oi(2)),Ji(this);var k=this.g.ca();this.X=k;var B=ds(this);if(this.o=k==200,Ou(this.i,this.v,this.B,this.l,this.S,st,k),this.o){if(this.U&&!this.L){t:{if(this.g){var W,ue=this.g;if((W=ue.g?ue.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(W)){var me=W;break t}}me=null}if(w=me)Po(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,cl(this,w);else{this.o=!1,this.m=3,an(12),Xi(this),hs(this);break e}}if(this.R){w=!0;let Dn;for(;!this.K&&this.C<B.length;)if(Dn=Af(this,B),Dn==_i){st==4&&(this.m=4,an(14),w=!1),Po(this.i,this.l,null,"[Incomplete Response]");break}else if(Dn==ul){this.m=4,an(15),Po(this.i,this.l,B,"[Invalid Chunk]"),w=!1;break}else Po(this.i,this.l,Dn,null),cl(this,Dn);if(gn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),st!=4||B.length!=0||this.h.h||(this.m=1,an(16),w=!1),this.o=this.o&&w,!w)Po(this.i,this.l,B,"[Invalid Chunked Response]"),Xi(this),hs(this);else if(B.length>0&&!this.W){this.W=!0;var Ne=this.j;Ne.g==this&&Ne.aa&&!Ne.P&&(Ne.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),Tp(Ne),Ne.P=!0,an(11))}}else Po(this.i,this.l,B,null),cl(this,B);st==4&&Xi(this),this.o&&!this.K&&(st==4?xp(this.j,this):(this.o=!1,Xs(this)))}else zu(this.g),k==400&&B.indexOf("Unknown SID")>0?(this.m=3,an(12)):(this.m=0,an(13)),Xi(this),hs(this)}}}catch{}finally{}};function ds(w){if(!gn(w))return w.g.la();const k=$u(w.g);if(k==="")return"";let B="";const W=k.length,ue=Dr(w.g)==4;if(!w.h.i){if(typeof TextDecoder>"u")return Xi(w),hs(w),"";w.h.i=new s.TextDecoder}for(let me=0;me<W;me++)w.h.h=!0,B+=w.h.i.decode(k[me],{stream:!(ue&&me==W-1)});return k.length=0,w.h.g+=B,w.C=0,w.h.g}function gn(w){return w.g?w.v=="GET"&&w.M!=2&&w.j.Aa:!1}function Af(w,k){var B=w.C,W=k.indexOf(`
`,B);return W==-1?_i:(B=Number(k.substring(B,W)),isNaN(B)?ul:(W+=1,W+B>k.length?_i:(k=k.slice(W,W+B),w.C=W+B,k)))}vi.prototype.cancel=function(){this.K=!0,Xi(this)};function Xs(w){w.T=Date.now()+w.H,Yi(w,w.H)}function Yi(w,k){if(w.D!=null)throw Error("WatchDog timer not null");w.D=ls(c(w.aa,w),k)}function Ji(w){w.D&&(s.clearTimeout(w.D),w.D=null)}vi.prototype.aa=function(){this.D=null;const w=Date.now();w-this.T>=0?(fp(this.i,this.B),this.M!=2&&(oi(),an(17)),Xi(this),this.m=2,hs(this)):Yi(this,this.T-w)};function hs(w){w.j.I==0||w.K||xp(w.j,w)}function Xi(w){Ji(w);var k=w.O;k&&typeof k.dispose=="function"&&k.dispose(),w.O=null,Ue(w.V),w.g&&(k=w.g,w.g=null,k.abort(),k.dispose())}function cl(w,k){try{var B=w.j;if(B.I!=0&&(B.g==w||ps(B.h,w))){if(!w.L&&ps(B.h,w)&&B.I==3){try{var W=B.Ba.g.parse(k)}catch{W=null}if(Array.isArray(W)&&W.length==3){var ue=W;if(ue[0]==0){e:if(!B.v){if(B.g)if(B.g.F+3e3<w.F)Nf(B),gs(B);else break e;Ep(B),an(18)}}else B.xa=ue[1],0<B.xa-B.K&&ue[2]<37500&&B.F&&B.A==0&&!B.C&&(B.C=ls(c(B.Va,B),6e3));si(B.h)<=1&&B.ta&&(B.ta=void 0)}else ra(B,11)}else if((w.L||B.g==w)&&Nf(B),!F(k))for(ue=B.Ba.g.parse(k),k=0;k<ue.length;k++){let Dt=ue[k];const Dn=Dt[0];if(!(Dn<=B.K))if(B.K=Dn,Dt=Dt[1],B.I==2)if(Dt[0]=="c"){B.M=Dt[1],B.ba=Dt[2];const bi=Dt[3];bi!=null&&(B.ka=bi,B.j.info("VER="+B.ka));const ys=Dt[4];ys!=null&&(B.za=ys,B.j.info("SVER="+B.za));const Oo=Dt[5];Oo!=null&&typeof Oo=="number"&&Oo>0&&(W=1.5*Oo,B.O=W,B.j.info("backChannelRequestTimeoutMs_="+W)),W=B;const Lo=w.g;if(Lo){const Vo=Lo.g?Lo.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vo){var me=W.h;me.g||Vo.indexOf("spdy")==-1&&Vo.indexOf("quic")==-1&&Vo.indexOf("h2")==-1||(me.j=me.l,me.g=new Set,me.h&&(fl(me,me.h),me.h=null))}if(W.G){const Ap=Lo.g?Lo.g.getResponseHeader("X-HTTP-Session-Id"):null;Ap&&(W.wa=Ap,Bt(W.J,W.G,Ap))}}B.I=3,B.l&&B.l.ra(),B.aa&&(B.T=Date.now()-w.F,B.j.info("Handshake RTT: "+B.T+"ms")),W=B;var Ne=w;if(W.na=mv(W,W.L?W.ba:null,W.W),Ne.L){Mo(W.h,Ne);var st=Ne,Zt=W.O;Zt&&(st.H=Zt),st.D&&(Ji(st),Xs(st)),W.g=Ne}else fv(W);B.i.length>0&&Ku(B)}else Dt[0]!="stop"&&Dt[0]!="close"||ra(B,7);else B.I==3&&(Dt[0]=="stop"||Dt[0]=="close"?Dt[0]=="stop"?ra(B,7):Gu(B):Dt[0]!="noop"&&B.l&&B.l.qa(Dt),B.A=0)}}oi(4)}catch{}}var hp=class{constructor(w,k){this.g=w,this.map=k}};function Qs(w){this.l=w||10,s.PerformanceNavigationTiming?(w=s.performance.getEntriesByType("navigation"),w=w.length>0&&(w[0].nextHopProtocol=="hq"||w[0].nextHopProtocol=="h2")):w=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=w?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Zs(w){return w.h?!0:w.g?w.g.size>=w.j:!1}function si(w){return w.h?1:w.g?w.g.size:0}function ps(w,k){return w.h?w.h==k:w.g?w.g.has(k):!1}function fl(w,k){w.g?w.g.add(k):w.h=k}function Mo(w,k){w.h&&w.h==k?w.h=null:w.g&&w.g.has(k)&&w.g.delete(k)}Qs.prototype.cancel=function(){if(this.i=dl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const w of this.g.values())w.cancel();this.g.clear()}};function dl(w){if(w.h!=null)return w.i.concat(w.h.G);if(w.g!=null&&w.g.size!==0){let k=w.i;for(const B of w.g.values())k=k.concat(B.G);return k}return _(w.i)}var ms=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function WE(w,k){if(w){w=w.split("&");for(let B=0;B<w.length;B++){const W=w[B].indexOf("=");let ue,me=null;W>=0?(ue=w[B].substring(0,W),me=w[B].substring(W+1)):ue=w[B],k(ue,me?decodeURIComponent(me.replace(/\+/g," ")):"")}}}function Do(w){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let k;w instanceof Do?(this.l=w.l,hl(this,w.j),this.o=w.o,this.g=w.g,Lu(this,w.u),this.h=w.h,pl(this,av(w.i)),this.m=w.m):w&&(k=String(w).match(ms))?(this.l=!1,hl(this,k[1]||"",!0),this.o=Vu(k[2]||""),this.g=Vu(k[3]||"",!0),Lu(this,k[4]),this.h=Vu(k[5]||"",!0),pl(this,k[6]||"",!0),this.m=Vu(k[7]||"")):(this.l=!1,this.i=new Qi(null,this.l))}Do.prototype.toString=function(){const w=[];var k=this.j;k&&w.push(or(k,mp,!0),":");var B=this.g;return(B||k=="file")&&(w.push("//"),(k=this.o)&&w.push(or(k,mp,!0),"@"),w.push(Js(B).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),B=this.u,B!=null&&w.push(":",String(B))),(B=this.h)&&(this.g&&B.charAt(0)!="/"&&w.push("/"),w.push(or(B,B.charAt(0)=="/"?ml:gp,!0))),(B=this.i.toString())&&w.push("?",B),(B=this.m)&&w.push("#",or(B,ov)),w.join("")},Do.prototype.resolve=function(w){const k=yn(this);let B=!!w.j;B?hl(k,w.j):B=!!w.o,B?k.o=w.o:B=!!w.g,B?k.g=w.g:B=w.u!=null;var W=w.h;if(B)Lu(k,w.u);else if(B=!!w.h){if(W.charAt(0)!="/")if(this.g&&!this.h)W="/"+W;else{var ue=k.h.lastIndexOf("/");ue!=-1&&(W=k.h.slice(0,ue+1)+W)}if(ue=W,ue==".."||ue==".")W="";else if(ue.indexOf("./")!=-1||ue.indexOf("/.")!=-1){W=ue.lastIndexOf("/",0)==0,ue=ue.split("/");const me=[];for(let Ne=0;Ne<ue.length;){const st=ue[Ne++];st=="."?W&&Ne==ue.length&&me.push(""):st==".."?((me.length>1||me.length==1&&me[0]!="")&&me.pop(),W&&Ne==ue.length&&me.push("")):(me.push(st),W=!0)}W=me.join("/")}else W=ue}return B?k.h=W:B=w.i.toString()!=="",B?pl(k,av(w.i)):B=!!w.m,B&&(k.m=w.m),k};function yn(w){return new Do(w)}function hl(w,k,B){w.j=B?Vu(k,!0):k,w.j&&(w.j=w.j.replace(/:$/,""))}function Lu(w,k){if(k){if(k=Number(k),isNaN(k)||k<0)throw Error("Bad port number "+k);w.u=k}else w.u=null}function pl(w,k,B){k instanceof Qi?(w.i=k,_p(w.i,w.l)):(B||(k=or(k,iv)),w.i=new Qi(k,w.l))}function Bt(w,k,B){w.i.set(k,B)}function ea(w){return Bt(w,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),w}function Vu(w,k){return w?k?decodeURI(w.replace(/%25/g,"%2525")):decodeURIComponent(w):""}function or(w,k,B){return typeof w=="string"?(w=encodeURI(w).replace(k,pp),B&&(w=w.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w):null}function pp(w){return w=w.charCodeAt(0),"%"+(w>>4&15).toString(16)+(w&15).toString(16)}var mp=/[#\/\?@]/g,gp=/[#\?:]/g,ml=/[#\?]/g,iv=/[#\?@]/g,ov=/#/g;function Qi(w,k){this.h=this.g=null,this.i=w||null,this.j=!!k}function ta(w){w.g||(w.g=new Map,w.h=0,w.i&&WE(w.i,function(k,B){w.add(decodeURIComponent(k.replace(/\+/g," ")),B)}))}t=Qi.prototype,t.add=function(w,k){ta(this),this.i=null,w=ko(this,w);let B=this.g.get(w);return B||this.g.set(w,B=[]),B.push(k),this.h+=1,this};function yp(w,k){ta(w),k=ko(w,k),w.g.has(k)&&(w.i=null,w.h-=w.g.get(k).length,w.g.delete(k))}function vp(w,k){return ta(w),k=ko(w,k),w.g.has(k)}t.forEach=function(w,k){ta(this),this.g.forEach(function(B,W){B.forEach(function(ue){w.call(k,ue,W,this)},this)},this)};function Cf(w,k){ta(w);let B=[];if(typeof k=="string")vp(w,k)&&(B=B.concat(w.g.get(ko(w,k))));else for(w=Array.from(w.g.values()),k=0;k<w.length;k++)B=B.concat(w[k]);return B}t.set=function(w,k){return ta(this),this.i=null,w=ko(this,w),vp(this,w)&&(this.h-=this.g.get(w).length),this.g.set(w,[k]),this.h+=1,this},t.get=function(w,k){return w?(w=Cf(this,w),w.length>0?String(w[0]):k):k};function sv(w,k,B){yp(w,k),B.length>0&&(w.i=null,w.g.set(ko(w,k),_(B)),w.h+=B.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const w=[],k=Array.from(this.g.keys());for(let W=0;W<k.length;W++){var B=k[W];const ue=Js(B);B=Cf(this,B);for(let me=0;me<B.length;me++){let Ne=ue;B[me]!==""&&(Ne+="="+Js(B[me])),w.push(Ne)}}return this.i=w.join("&")};function av(w){const k=new Qi;return k.i=w.i,w.g&&(k.g=new Map(w.g),k.h=w.h),k}function ko(w,k){return k=String(k),w.j&&(k=k.toLowerCase()),k}function _p(w,k){k&&!w.j&&(ta(w),w.i=null,w.g.forEach(function(B,W){const ue=W.toLowerCase();W!=ue&&(yp(this,W),sv(this,ue,B))},w)),w.j=k}function bp(w,k){const B=new us;if(s.Image){const W=new Image;W.onload=f(Hr,B,"TestLoadImage: loaded",!0,k,W),W.onerror=f(Hr,B,"TestLoadImage: error",!1,k,W),W.onabort=f(Hr,B,"TestLoadImage: abort",!1,k,W),W.ontimeout=f(Hr,B,"TestLoadImage: timeout",!1,k,W),s.setTimeout(function(){W.ontimeout&&W.ontimeout()},1e4),W.src=w}else k(!1)}function gl(w,k){const B=new us,W=new AbortController,ue=setTimeout(()=>{W.abort(),Hr(B,"TestPingServer: timeout",!1,k)},1e4);fetch(w,{signal:W.signal}).then(me=>{clearTimeout(ue),me.ok?Hr(B,"TestPingServer: ok",!0,k):Hr(B,"TestPingServer: server error",!1,k)}).catch(()=>{clearTimeout(ue),Hr(B,"TestPingServer: error",!1,k)})}function Hr(w,k,B,W,ue){try{ue&&(ue.onload=null,ue.onerror=null,ue.onabort=null,ue.ontimeout=null),W(B)}catch{}}function lv(){this.g=new Ct}function Uu(w){this.i=w.Sb||null,this.h=w.ab||!1}h(Uu,Pt),Uu.prototype.g=function(){return new qu(this.i,this.h)};function qu(w,k){ot.call(this),this.H=w,this.o=k,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(qu,ot),t=qu.prototype,t.open=function(w,k){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=w,this.D=k,this.readyState=1,na(this)},t.send=function(w){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const k={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};w&&(k.body=w),(this.H||s).fetch(new Request(this.D,k)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Gr(this)),this.readyState=0},t.Pa=function(w){if(this.g&&(this.l=w,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=w.headers,this.readyState=2,na(this)),this.g&&(this.readyState=3,na(this),this.g)))if(this.responseType==="arraybuffer")w.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in w){if(this.j=w.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;yl(this)}else w.text().then(this.Oa.bind(this),this.ga.bind(this))};function yl(w){w.j.read().then(w.Ma.bind(w)).catch(w.ga.bind(w))}t.Ma=function(w){if(this.g){if(this.o&&w.value)this.response.push(w.value);else if(!this.o){var k=w.value?w.value:new Uint8Array(0);(k=this.B.decode(k,{stream:!w.done}))&&(this.response=this.responseText+=k)}w.done?Gr(this):na(this),this.readyState==3&&yl(this)}},t.Oa=function(w){this.g&&(this.response=this.responseText=w,Gr(this))},t.Na=function(w){this.g&&(this.response=w,Gr(this))},t.ga=function(){this.g&&Gr(this)};function Gr(w){w.readyState=4,w.l=null,w.j=null,w.B=null,na(w)}t.setRequestHeader=function(w,k){this.A.append(w,k)},t.getResponseHeader=function(w){return this.h&&this.h.get(w.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const w=[],k=this.h.entries();for(var B=k.next();!B.done;)B=B.value,w.push(B[0]+": "+B[1]),B=k.next();return w.join(`\r
`)};function na(w){w.onreadystatechange&&w.onreadystatechange.call(w)}Object.defineProperty(qu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(w){this.m=w?"include":"same-origin"}});function vl(w){let k="";return Y(w,function(B,W){k+=W,k+=":",k+=B,k+=`\r
`}),k}function Zi(w,k,B){e:{for(W in B){var W=!1;break e}W=!0}W||(B=vl(B),typeof w=="string"?B!=null&&Js(B):Bt(w,k,B))}function Wt(w){ot.call(this),this.headers=new Map,this.L=w||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(Wt,ot);var If=/^https?$/i,uv=["POST","PUT"];t=Wt.prototype,t.Fa=function(w){this.H=w},t.ea=function(w,k,B,W){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+w);k=k?k.toUpperCase():"GET",this.D=w,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():No.g(),this.g.onreadystatechange=g(c(this.Ca,this));try{this.B=!0,this.g.open(k,String(w),!0),this.B=!1}catch(me){Fu(this,me);return}if(w=B||"",B=new Map(this.headers),W)if(Object.getPrototypeOf(W)===Object.prototype)for(var ue in W)B.set(ue,W[ue]);else if(typeof W.keys=="function"&&typeof W.get=="function")for(const me of W.keys())B.set(me,W.get(me));else throw Error("Unknown input type for opt_headers: "+String(W));W=Array.from(B.keys()).find(me=>me.toLowerCase()=="content-type"),ue=s.FormData&&w instanceof s.FormData,!(Array.prototype.indexOf.call(uv,k,void 0)>=0)||W||ue||B.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[me,Ne]of B)this.g.setRequestHeader(me,Ne);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(w),this.v=!1}catch(me){Fu(this,me)}};function Fu(w,k){w.h=!1,w.g&&(w.j=!0,w.g.abort(),w.j=!1),w.l=k,w.o=5,Bu(w),Jn(w)}function Bu(w){w.A||(w.A=!0,Tt(w,"complete"),Tt(w,"error"))}t.abort=function(w){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=w||7,Tt(this,"complete"),Tt(this,"abort"),Jn(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Jn(this,!0)),Wt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?wp(this):this.Xa())},t.Xa=function(){wp(this)};function wp(w){if(w.h&&typeof o<"u"){if(w.v&&Dr(w)==4)setTimeout(w.Ca.bind(w),0);else if(Tt(w,"readystatechange"),Dr(w)==4){w.h=!1;try{const me=w.ca();e:switch(me){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var k=!0;break e;default:k=!1}var B;if(!(B=k)){var W;if(W=me===0){let Ne=String(w.D).match(ms)[1]||null;!Ne&&s.self&&s.self.location&&(Ne=s.self.location.protocol.slice(0,-1)),W=!If.test(Ne?Ne.toLowerCase():"")}B=W}if(B)Tt(w,"complete"),Tt(w,"success");else{w.o=6;try{var ue=Dr(w)>2?w.g.statusText:""}catch{ue=""}w.l=ue+" ["+w.ca()+"]",Bu(w)}}finally{Jn(w)}}}}function Jn(w,k){if(w.g){w.m&&(clearTimeout(w.m),w.m=null);const B=w.g;w.g=null,k||Tt(w,"ready");try{B.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Dr(w){return w.g?w.g.readyState:0}t.ca=function(){try{return Dr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(w){if(this.g){var k=this.g.responseText;return w&&k.indexOf(w)==0&&(k=k.substring(w.length)),Ye(k)}};function $u(w){try{if(!w.g)return null;if("response"in w.g)return w.g.response;switch(w.F){case"":case"text":return w.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in w.g)return w.g.mozResponseArrayBuffer}return null}catch{return null}}function zu(w){const k={};w=(w.g&&Dr(w)>=2&&w.g.getAllResponseHeaders()||"").split(`\r
`);for(let W=0;W<w.length;W++){if(F(w[W]))continue;var B=dp(w[W]);const ue=B[0];if(B=B[1],typeof B!="string")continue;B=B.trim();const me=k[ue]||[];k[ue]=me,me.push(B)}G(k,function(W){return W.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hu(w,k,B){return B&&B.internalChannelParams&&B.internalChannelParams[w]||k}function Rf(w){this.za=0,this.i=[],this.j=new us,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Hu("failFast",!1,w),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Hu("baseRetryDelayMs",5e3,w),this.Za=Hu("retryDelaySeedMs",1e4,w),this.Ta=Hu("forwardChannelMaxRetries",2,w),this.va=Hu("forwardChannelRequestTimeoutMs",2e4,w),this.ma=w&&w.xmlHttpFactory||void 0,this.Ua=w&&w.Rb||void 0,this.Aa=w&&w.useFetchStreams||!1,this.O=void 0,this.L=w&&w.supportsCrossDomainXhr||!1,this.M="",this.h=new Qs(w&&w.concurrentRequestLimit),this.Ba=new lv,this.S=w&&w.fastHandshake||!1,this.R=w&&w.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=w&&w.Pb||!1,w&&w.ua&&this.j.ua(),w&&w.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&w&&w.detectBufferingProxy||!1,this.ia=void 0,w&&w.longPollingTimeout&&w.longPollingTimeout>0&&(this.ia=w.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Rf.prototype,t.ka=8,t.I=1,t.connect=function(w,k,B,W){an(0),this.W=w,this.H=k||{},B&&W!==void 0&&(this.H.OSID=B,this.H.OAID=W),this.F=this.X,this.J=mv(this,null,this.W),Ku(this)};function Gu(w){if(ju(w),w.I==3){var k=w.V++,B=yn(w.J);if(Bt(B,"SID",w.M),Bt(B,"RID",k),Bt(B,"TYPE","terminate"),Wu(w,B),k=new vi(w,w.j,k),k.M=2,k.A=ea(yn(B)),B=!1,s.navigator&&s.navigator.sendBeacon)try{B=s.navigator.sendBeacon(k.A.toString(),"")}catch{}!B&&s.Image&&(new Image().src=k.A,B=!0),B||(k.g=Mf(k.j,null),k.g.ea(k.A)),k.F=Date.now(),Xs(k)}pv(w)}function gs(w){w.g&&(Tp(w),w.g.cancel(),w.g=null)}function ju(w){gs(w),w.v&&(s.clearTimeout(w.v),w.v=null),Nf(w),w.h.cancel(),w.m&&(typeof w.m=="number"&&s.clearTimeout(w.m),w.m=null)}function Ku(w){if(!Zs(w.h)&&!w.m){w.m=!0;var k=w.Ea;O||L(),q||(O(),q=!0),D.add(k,w),w.D=0}}function YE(w,k){return si(w.h)>=w.h.j-(w.m?1:0)?!1:w.m?(w.i=k.G.concat(w.i),!0):w.I==1||w.I==2||w.D>=(w.Sa?0:w.Ta)?!1:(w.m=ls(c(w.Ea,w,k),hv(w,w.D)),w.D++,!0)}t.Ea=function(w){if(this.m)if(this.m=null,this.I==1){if(!w){this.V=Math.floor(Math.random()*1e5),w=this.V++;const ue=new vi(this,this.j,w);let me=this.o;if(this.U&&(me?(me=Q(me),fe(me,this.U)):me=this.U),this.u!==null||this.R||(ue.J=me,me=null),this.S)e:{for(var k=0,B=0;B<this.i.length;B++){t:{var W=this.i[B];if("__data__"in W.map&&(W=W.map.__data__,typeof W=="string")){W=W.length;break t}W=void 0}if(W===void 0)break;if(k+=W,k>4096){k=B;break e}if(k===4096||B===this.i.length-1){k=B+1;break e}}k=1e3}else k=1e3;k=Pf(this,ue,k),B=yn(this.J),Bt(B,"RID",w),Bt(B,"CVER",22),this.G&&Bt(B,"X-HTTP-Session-Id",this.G),Wu(this,B),me&&(this.R?k="headers="+Js(vl(me))+"&"+k:this.u&&Zi(B,this.u,me)),fl(this.h,ue),this.Ra&&Bt(B,"TYPE","init"),this.S?(Bt(B,"$req",k),Bt(B,"SID","null"),ue.U=!0,Wi(ue,B,null)):Wi(ue,B,k),this.I=2}}else this.I==3&&(w?cv(this,w):this.i.length==0||Zs(this.h)||cv(this))};function cv(w,k){var B;k?B=k.l:B=w.V++;const W=yn(w.J);Bt(W,"SID",w.M),Bt(W,"RID",B),Bt(W,"AID",w.K),Wu(w,W),w.u&&w.o&&Zi(W,w.u,w.o),B=new vi(w,w.j,B,w.D+1),w.u===null&&(B.J=w.o),k&&(w.i=k.G.concat(w.i)),k=Pf(w,B,1e3),B.H=Math.round(w.va*.5)+Math.round(w.va*.5*Math.random()),fl(w.h,B),Wi(B,W,k)}function Wu(w,k){w.H&&Y(w.H,function(B,W){Bt(k,W,B)}),w.l&&Y({},function(B,W){Bt(k,W,B)})}function Pf(w,k,B){B=Math.min(w.i.length,B);const W=w.l?c(w.l.Ka,w.l,w):null;e:{var ue=w.i;let st=-1;for(;;){const Zt=["count="+B];st==-1?B>0?(st=ue[0].g,Zt.push("ofs="+st)):st=0:Zt.push("ofs="+st);let Dt=!0;for(let Dn=0;Dn<B;Dn++){var me=ue[Dn].g;const bi=ue[Dn].map;if(me-=st,me<0)st=Math.max(0,ue[Dn].g-100),Dt=!1;else try{me="req"+me+"_"||"";try{var Ne=bi instanceof Map?bi:Object.entries(bi);for(const[ys,Oo]of Ne){let Lo=Oo;a(Oo)&&(Lo=Oe(Oo)),Zt.push(me+ys+"="+encodeURIComponent(Lo))}}catch(ys){throw Zt.push(me+"type="+encodeURIComponent("_badmap")),ys}}catch{W&&W(bi)}}if(Dt){Ne=Zt.join("&");break e}}Ne=void 0}return w=w.i.splice(0,B),k.G=w,Ne}function fv(w){if(!w.g&&!w.v){w.Y=1;var k=w.Da;O||L(),q||(O(),q=!0),D.add(k,w),w.A=0}}function Ep(w){return w.g||w.v||w.A>=3?!1:(w.Y++,w.v=ls(c(w.Da,w),hv(w,w.A)),w.A++,!0)}t.Da=function(){if(this.v=null,dv(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var w=4*this.T;this.j.info("BP detection timer enabled: "+w),this.B=ls(c(this.Wa,this),w)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,an(10),gs(this),dv(this))};function Tp(w){w.B!=null&&(s.clearTimeout(w.B),w.B=null)}function dv(w){w.g=new vi(w,w.j,"rpc",w.Y),w.u===null&&(w.g.J=w.o),w.g.P=0;var k=yn(w.na);Bt(k,"RID","rpc"),Bt(k,"SID",w.M),Bt(k,"AID",w.K),Bt(k,"CI",w.F?"0":"1"),!w.F&&w.ia&&Bt(k,"TO",w.ia),Bt(k,"TYPE","xmlhttp"),Wu(w,k),w.u&&w.o&&Zi(k,w.u,w.o),w.O&&(w.g.H=w.O);var B=w.g;w=w.ba,B.M=1,B.A=ea(yn(k)),B.u=null,B.R=!0,fs(B,w)}t.Va=function(){this.C!=null&&(this.C=null,gs(this),Ep(this),an(19))};function Nf(w){w.C!=null&&(s.clearTimeout(w.C),w.C=null)}function xp(w,k){var B=null;if(w.g==k){Nf(w),Tp(w),w.g=null;var W=2}else if(ps(w.h,k))B=k.G,Mo(w.h,k),W=1;else return;if(w.I!=0){if(k.o)if(W==1){B=k.u?k.u.length:0,k=Date.now()-k.F;var ue=w.D;W=Gi(),Tt(W,new ji(W,B)),Ku(w)}else fv(w);else if(ue=k.m,ue==3||ue==0&&k.X>0||!(W==1&&YE(w,k)||W==2&&Ep(w)))switch(B&&B.length>0&&(k=w.h,k.i=k.i.concat(B)),ue){case 1:ra(w,5);break;case 4:ra(w,10);break;case 3:ra(w,6);break;default:ra(w,2)}}}function hv(w,k){let B=w.Qa+Math.floor(Math.random()*w.Za);return w.isActive()||(B*=2),B*k}function ra(w,k){if(w.j.info("Error code "+k),k==2){var B=c(w.bb,w),W=w.Ua;const ue=!W;W=new Do(W||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||hl(W,"https"),ea(W),ue?bp(W.toString(),B):gl(W.toString(),B)}else an(2);w.I=0,w.l&&w.l.pa(k),pv(w),ju(w)}t.bb=function(w){w?(this.j.info("Successfully pinged google.com"),an(2)):(this.j.info("Failed to ping google.com"),an(1))};function pv(w){if(w.I=0,w.ja=[],w.l){const k=dl(w.h);(k.length!=0||w.i.length!=0)&&(T(w.ja,k),T(w.ja,w.i),w.h.i.length=0,_(w.i),w.i.length=0),w.l.oa()}}function mv(w,k,B){var W=B instanceof Do?yn(B):new Do(B);if(W.g!="")k&&(W.g=k+"."+W.g),Lu(W,W.u);else{var ue=s.location;W=ue.protocol,k=k?k+"."+ue.hostname:ue.hostname,ue=+ue.port;const me=new Do(null);W&&hl(me,W),k&&(me.g=k),ue&&Lu(me,ue),B&&(me.h=B),W=me}return B=w.G,k=w.wa,B&&k&&Bt(W,B,k),Bt(W,"VER",w.ka),Wu(w,W),W}function Mf(w,k,B){if(k&&!w.L)throw Error("Can't create secondary domain capable XhrIo object.");return k=w.Aa&&!w.ma?new Wt(new Uu({ab:B})):new Wt(w.ma),k.Fa(w.L),k}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function gv(){}t=gv.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Df(){}Df.prototype.g=function(w,k){return new jr(w,k)};function jr(w,k){ot.call(this),this.g=new Rf(k),this.l=w,this.h=k&&k.messageUrlParams||null,w=k&&k.messageHeaders||null,k&&k.clientProtocolHeaderRequired&&(w?w["X-Client-Protocol"]="webchannel":w={"X-Client-Protocol":"webchannel"}),this.g.o=w,w=k&&k.initMessageHeaders||null,k&&k.messageContentType&&(w?w["X-WebChannel-Content-Type"]=k.messageContentType:w={"X-WebChannel-Content-Type":k.messageContentType}),k&&k.sa&&(w?w["X-WebChannel-Client-Profile"]=k.sa:w={"X-WebChannel-Client-Profile":k.sa}),this.g.U=w,(w=k&&k.Qb)&&!F(w)&&(this.g.u=w),this.A=k&&k.supportsCrossDomainXhr||!1,this.v=k&&k.sendRawJson||!1,(k=k&&k.httpSessionIdParam)&&!F(k)&&(this.g.G=k,w=this.h,w!==null&&k in w&&(w=this.h,k in w&&delete w[k])),this.j=new _l(this)}h(jr,ot),jr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},jr.prototype.close=function(){Gu(this.g)},jr.prototype.o=function(w){var k=this.g;if(typeof w=="string"){var B={};B.__data__=w,w=B}else this.v&&(B={},B.__data__=Oe(w),w=B);k.i.push(new hp(k.Ya++,w)),k.I==3&&Ku(k)},jr.prototype.N=function(){this.g.l=null,delete this.j,Gu(this.g),delete this.g,jr.Z.N.call(this)};function Sp(w){wt.call(this),w.__headers__&&(this.headers=w.__headers__,this.statusCode=w.__status__,delete w.__headers__,delete w.__status__);var k=w.__sm__;if(k){e:{for(const B in k){w=B;break e}w=void 0}(this.i=w)&&(w=this.i,k=k!==null&&w in k?k[w]:void 0),this.data=k}else this.data=w}h(Sp,wt);function yv(){Kn.call(this),this.status=1}h(yv,Kn);function _l(w){this.g=w}h(_l,gv),_l.prototype.ra=function(){Tt(this.g,"a")},_l.prototype.qa=function(w){Tt(this.g,new Sp(w))},_l.prototype.pa=function(w){Tt(this.g,new yv)},_l.prototype.oa=function(){Tt(this.g,"b")},Df.prototype.createWebChannel=Df.prototype.g,jr.prototype.send=jr.prototype.o,jr.prototype.open=jr.prototype.m,jr.prototype.close=jr.prototype.close,WW=function(){return new Df},KW=function(){return Gi()},jW=Tn,qN={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},mn.NO_ERROR=0,mn.TIMEOUT=8,mn.HTTP_ERROR=6,l_=mn,Yn.COMPLETE="complete",GW=Yn,Ft.EventType=lt,lt.OPEN="a",lt.CLOSE="b",lt.ERROR="c",lt.MESSAGE="d",ot.prototype.listen=ot.prototype.J,Hm=Ft,Wt.prototype.listenOnce=Wt.prototype.K,Wt.prototype.getLastError=Wt.prototype.Ha,Wt.prototype.getLastErrorCode=Wt.prototype.ya,Wt.prototype.getStatus=Wt.prototype.ca,Wt.prototype.getResponseJson=Wt.prototype.La,Wt.prototype.getResponseText=Wt.prototype.la,Wt.prototype.send=Wt.prototype.ea,Wt.prototype.setWithCredentials=Wt.prototype.Fa,HW=Wt}).apply(typeof w0<"u"?w0:typeof self<"u"?self:typeof window<"u"?window:{});const oF="@firebase/firestore",sF="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fr.UNAUTHENTICATED=new fr(null),fr.GOOGLE_CREDENTIALS=new fr("google-credentials-uid"),fr.FIRST_PARTY=new fr("first-party-uid"),fr.MOCK_USER=new fr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vh="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fu=new nw("@firebase/firestore");function wd(){return fu.logLevel}function Rpe(t){fu.setLogLevel(t)}function Ae(t,...e){if(fu.logLevel<=gt.DEBUG){const n=e.map(vD);fu.debug(`Firestore (${Vh}): ${t}`,...n)}}function Vn(t,...e){if(fu.logLevel<=gt.ERROR){const n=e.map(vD);fu.error(`Firestore (${Vh}): ${t}`,...n)}}function Bs(t,...e){if(fu.logLevel<=gt.WARN){const n=e.map(vD);fu.warn(`Firestore (${Vh}): ${t}`,...n)}}function vD(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,YW(t,r,n)}function YW(t,e,n){let r=`FIRESTORE (${Vh}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Vn(r),new Error(r)}function je(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||YW(e,i,r)}function Ppe(t,e){t||Fe(57014,e)}function De(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends $r{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JW{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Npe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(fr.UNAUTHENTICATED)))}shutdown(){}}class Mpe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class Dpe{constructor(e){this.t=e,this.currentUser=fr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){je(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let o=new Ir;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ir,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const u=o;e.enqueueRetryable((async()=>{await u.promise,await i(this.currentUser)}))},a=u=>{Ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((u=>a(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(Ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ir)}}),0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(je(typeof r.accessToken=="string",31837,{l:r}),new JW(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return je(e===null||typeof e=="string",2055,{h:e}),new fr(e)}}class kpe{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=fr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Ope{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new kpe(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(fr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class aF{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Lpe{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,rn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){je(this.o===void 0,3512);const r=o=>{o.error!=null&&Ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.m;return this.m=o.token,Ae("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const i=o=>{Ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>i(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):Ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new aF(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(je(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new aF(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vpe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=Vpe(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}}function rt(t,e){return t<e?-1:t>e?1:0}function FN(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),o=e.charAt(r);if(i!==o)return sS(i)===sS(o)?rt(i,o):sS(i)?1:-1}return rt(t.length,e.length)}const Upe=55296,qpe=57343;function sS(t){const e=t.charCodeAt(0);return e>=Upe&&e<=qpe}function Yd(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}function XW(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lF="__name__";class Ts{constructor(e,n,r){n===void 0?n=0:n>e.length&&Fe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Fe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ts.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ts?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=Ts.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return rt(e.length,n.length)}static compareSegments(e,n){const r=Ts.isNumericId(e),i=Ts.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Ts.extractNumericId(e).compare(Ts.extractNumericId(n)):FN(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ru.fromString(e.substring(4,e.length-2))}}class yt extends Ts{construct(e,n,r){return new yt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Se(pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new yt(n)}static emptyPath(){return new yt([])}}const Fpe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cn extends Ts{construct(e,n,r){return new cn(e,n,r)}static isValidIdentifier(e){return Fpe.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===lF}static keyField(){return new cn([lF])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new Se(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Se(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Se(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Se(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cn(n)}static emptyPath(){return new cn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.path=e}static fromPath(e){return new Me(yt.fromString(e))}static fromName(e){return new Me(yt.fromString(e).popFirst(5))}static empty(){return new Me(yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&yt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return yt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Me(new yt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bD(t,e,n){if(!n)throw new Se(pe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function QW(t,e,n,r){if(e===!0&&r===!0)throw new Se(pe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function uF(t){if(!Me.isDocumentKey(t))throw new Se(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function cF(t){if(Me.isDocumentKey(t))throw new Se(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ZW(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function pw(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Fe(12329,{type:typeof t})}function Et(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Se(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=pw(t);throw new Se(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function eY(t,e){if(e<=0)throw new Se(pe.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(t,e){const n={typeString:t};return e&&(n.value=e),n}function _y(t,e){if(!ZW(t))throw new Se(pe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new Se(pe.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fF=-62135596800,dF=1e6;class Nt{static now(){return Nt.fromMillis(Date.now())}static fromDate(e){return Nt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*dF);return new Nt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Se(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Se(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<fF)throw new Se(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/dF}_compareTo(e){return this.seconds===e.seconds?rt(this.nanoseconds,e.nanoseconds):rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Nt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(_y(e,Nt._jsonSchema))return new Nt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-fF;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Nt._jsonSchemaVersion="firestore/timestamp/1.0",Nt._jsonSchema={type:zn("string",Nt._jsonSchemaVersion),seconds:zn("number"),nanoseconds:zn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{static fromTimestamp(e){return new We(e)}static min(){return new We(new Nt(0,0))}static max(){return new We(new Nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jd=-1;class V_{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function BN(t){return t.fields.find((e=>e.kind===2))}function hc(t){return t.fields.filter((e=>e.kind!==2))}V_.UNKNOWN_ID=-1;class u_{constructor(e,n){this.fieldPath=e,this.kind=n}}class Ng{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Ng(0,Fi.min())}}function tY(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=We.fromTimestamp(r===1e9?new Nt(n+1,0):new Nt(n,r));return new Fi(i,Me.empty(),e)}function nY(t){return new Fi(t.readTime,t.key,Jd)}class Fi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Fi(We.min(),Me.empty(),Jd)}static max(){return new Fi(We.max(),Me.empty(),Jd)}}function wD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Me.comparator(t.documentKey,e.documentKey),n!==0?n:rt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rY="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iY{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tu(t){if(t.code!==pe.FAILED_PRECONDITION||t.message!==rY)throw t;Ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ae(((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ae?n:ae.resolve(n)}catch(n){return ae.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ae.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ae.reject(n)}static resolve(e){return new ae(((n,r)=>{n(e)}))}static reject(e){return new ae(((n,r)=>{r(e)}))}static waitFor(e){return new ae(((n,r)=>{let i=0,o=0,s=!1;e.forEach((a=>{++i,a.next((()=>{++o,s&&o===i&&n()}),(u=>r(u)))})),s=!0,o===i&&n()}))}static or(e){let n=ae.resolve(!1);for(const r of e)n=n.next((i=>i?ae.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,o)=>{r.push(n.call(this,i,o))})),this.waitFor(r)}static mapArray(e,n){return new ae(((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let u=0;u<o;u++){const c=u;n(e[c]).next((f=>{s[c]=f,++a,a===o&&r(s)}),(f=>i(f)))}}))}static doWhile(e,n){return new ae(((r,i)=>{const o=()=>{e()===!0?n().next((()=>{o()}),i):r()};o()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi="SimpleDb";class mw{static open(e,n,r,i){try{return new mw(n,e.transaction(i,r))}catch(o){throw new ug(n,o)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new Ir,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new ug(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=ED(r.target.error);this.S.reject(new ug(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Ae(Pi,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new $pe(n)}}class Os{static delete(e){return Ae(Pi,"Removing database:",e),_c(B2().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!xg())return!1;if(Os.F())return!0;const e=_n(),n=Os.M(e),r=0<n&&n<10,i=oY(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,Os.M(_n())===12.2&&Vn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(Ae(Pi,"Opening database:",this.name),this.db=await new Promise(((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{const s=o.target.result;n(s)},i.onblocked=()=>{r(new ug(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{const s=o.target.error;s.name==="VersionError"?r(new Se(pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new Se(pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new ug(e,s))},i.onupgradeneeded=o=>{Ae(Pi,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const s=o.target.result;this.N.k(s,i.transaction,o.oldVersion,this.version).next((()=>{Ae(Pi,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const o=n==="readonly";let s=0;for(;;){++s;try{this.db=await this.L(e);const a=mw.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next((c=>(a.C(),c))).catch((c=>(a.abort(c),ae.reject(c)))).toPromise();return u.catch((()=>{})),await a.D,u}catch(a){const u=a,c=u.name!=="FirebaseError"&&s<3;if(Ae(Pi,"Transaction failed with error:",u.message,"Retrying:",c),this.close(),!c)return Promise.reject(u)}}}close(){this.db&&this.db.close(),this.db=void 0}}function oY(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Bpe{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return _c(this.U.delete())}}class ug extends Se{constructor(e,n){super(pe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function xu(t){return t.name==="IndexedDbTransactionError"}class $pe{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(Ae(Pi,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(Ae(Pi,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),_c(r)}add(e){return Ae(Pi,"ADD",this.store.name,e,e),_c(this.store.add(e))}get(e){return _c(this.store.get(e)).next((n=>(n===void 0&&(n=null),Ae(Pi,"GET",this.store.name,e,n),n)))}delete(e){return Ae(Pi,"DELETE",this.store.name,e),_c(this.store.delete(e))}count(){return Ae(Pi,"COUNT",this.store.name),_c(this.store.count())}J(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const o=i.getAll(r.range);return new ae(((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}}))}{const o=this.cursor(r),s=[];return this.H(o,((a,u)=>{s.push(u)})).next((()=>s))}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new ae(((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}}))}Z(e,n){Ae(Pi,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const i=this.cursor(r);return this.H(i,((o,s,a)=>a.delete()))}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}te(e){const n=this.cursor({});return new ae(((r,i)=>{n.onerror=o=>{const s=ED(o.target.error);i(s)},n.onsuccess=o=>{const s=o.target.result;s?e(s.primaryKey,s.value).next((a=>{a?s.continue():r()})):r()}}))}H(e,n){const r=[];return new ae(((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{const a=s.target.result;if(!a)return void i();const u=new Bpe(a),c=n(a.primaryKey,a.value,u);if(c instanceof ae){const f=c.catch((h=>(u.done(),ae.reject(h))));r.push(f)}u.isDone?i():u.G===null?a.continue():a.continue(u.G)}})).next((()=>ae.waitFor(r)))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function _c(t){return new ae(((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=ED(r.target.error);n(i)}}))}let hF=!1;function ED(t){const e=Os.M(_n());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new Se("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return hF||(hF=!0,setTimeout((()=>{throw r}),0)),r}}return t}const cg="IndexBackfiller";class zpe{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){Ae(cg,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const n=await this.ne.ie();Ae(cg,`Documents written: ${n}`)}catch(n){xu(n)?Ae(cg,"Ignoring IndexedDB error during index backfill: ",n):await Tu(n)}await this.re(6e4)}))}}class Hpe{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.se(n,e)))}se(e,n){const r=new Set;let i=n,o=!0;return ae.doWhile((()=>o===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((s=>{if(s!==null&&!r.has(s))return Ae(cg,`Processing collection: ${s}`),this.oe(e,s,i).next((a=>{i-=a,r.add(s)}));o=!1})))).next((()=>n-i))}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next((i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next((o=>{const s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next((()=>this._e(i,o))).next((a=>(Ae(cg,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a)))).next((()=>s.size))}))))}_e(e,n){let r=e;return n.changes.forEach(((i,o)=>{const s=nY(o);wD(s,r)>0&&(r=s)})),new Fi(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}di.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu=-1;function by(t){return t==null}function Mg(t){return t===0&&1/t==-1/0}function sY(t){return typeof t=="number"&&Number.isInteger(t)&&!Mg(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_="";function zr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=pF(e)),e=Gpe(t.get(n),e);return pF(e)}function Gpe(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case U_:n+="";break;default:n+=o}}return n}function pF(t){return t+U_+""}function Ms(t){const e=t.length;if(je(e>=2,64408,{path:t}),e===2)return je(t.charAt(0)===U_&&t.charAt(1)==="",56145,{path:t}),yt.emptyPath();const n=e-2,r=[];let i="";for(let o=0;o<e;){const s=t.indexOf(U_,o);switch((s<0||s>n)&&Fe(50515,{path:t}),t.charAt(s+1)){case"":const a=t.substring(o,s);let u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:Fe(61167,{path:t})}o=s+2}return new yt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pc="remoteDocuments",wy="owner",ud="owner",Dg="mutationQueues",jpe="userId",Bo="mutations",mF="batchId",Sc="userMutationsIndex",gF=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c_(t,e){return[t,zr(e)]}function aY(t,e,n){return[t,zr(e),n]}const Kpe={},Xd="documentMutations",q_="remoteDocumentsV14",Wpe=["prefixPath","collectionGroup","readTime","documentId"],f_="documentKeyIndex",Ype=["prefixPath","collectionGroup","documentId"],lY="collectionGroupIndex",Jpe=["collectionGroup","readTime","prefixPath","documentId"],kg="remoteDocumentGlobal",$N="remoteDocumentGlobalKey",Qd="targets",uY="queryTargetsIndex",Xpe=["canonicalId","targetId"],Zd="targetDocuments",Qpe=["targetId","path"],TD="documentTargetsIndex",Zpe=["path","targetId"],F_="targetGlobalKey",kc="targetGlobal",Og="collectionParents",eme=["collectionId","parent"],eh="clientMetadata",tme="clientId",gw="bundles",nme="bundleId",yw="namedQueries",rme="name",xD="indexConfiguration",ime="indexId",zN="collectionGroupIndex",ome="collectionGroup",fg="indexState",sme=["indexId","uid"],cY="sequenceNumberIndex",ame=["uid","sequenceNumber"],dg="indexEntries",lme=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],fY="documentKeyIndex",ume=["indexId","uid","orderedDocumentKey"],vw="documentOverlays",cme=["userId","collectionPath","documentId"],HN="collectionPathOverlayIndex",fme=["userId","collectionPath","largestBatchId"],dY="collectionGroupOverlayIndex",dme=["userId","collectionGroup","largestBatchId"],SD="globals",hme="name",hY=[Dg,Bo,Xd,pc,Qd,wy,kc,Zd,eh,kg,Og,gw,yw],pme=[...hY,vw],pY=[Dg,Bo,Xd,q_,Qd,wy,kc,Zd,eh,kg,Og,gw,yw,vw],mY=pY,AD=[...mY,xD,fg,dg],mme=AD,gY=[...AD,SD],gme=gY;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN extends iY{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function tr(t,e){const n=De(t);return Os.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yF(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Su(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function yY(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,n){this.comparator=e,this.root=n||xr.EMPTY}insert(e,n){return new Qt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,xr.BLACK,null,null))}remove(e){return new Qt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new E0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new E0(this.root,e,this.comparator,!1)}getReverseIterator(){return new E0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new E0(this.root,e,this.comparator,!0)}}class E0{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xr{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??xr.RED,this.left=i??xr.EMPTY,this.right=o??xr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new xr(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return xr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return xr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Fe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Fe(27949);return e+(this.isRed()?0:1)}}xr.EMPTY=null,xr.RED=!0,xr.BLACK=!1;xr.EMPTY=new class{constructor(){this.size=0}get key(){throw Fe(57766)}get value(){throw Fe(16141)}get color(){throw Fe(16727)}get left(){throw Fe(29726)}get right(){throw Fe(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new xr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new Qt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new vF(this.data.getIterator())}getIteratorFrom(e){return new vF(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Ut(this.comparator);return n.data=e,n}}class vF{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function cd(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.fields=e,e.sort(cn.comparator)}static empty(){return new hi([])}unionWith(e){let n=new Ut(cn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new hi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Yd(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vY extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yme(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new vY("Invalid base64 string: "+o):o}})(e);return new Cn(n)}static fromUint8Array(e){const n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new Cn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Cn.EMPTY_BYTE_STRING=new Cn("");const vme=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Va(t){if(je(!!t,39018),typeof t=="string"){let e=0;const n=vme.exec(t);if(je(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:un(t.seconds),nanos:un(t.nanos)}}function un(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ua(t){return typeof t=="string"?Cn.fromBase64String(t):Cn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Y="server_timestamp",bY="__type__",wY="__previous_value__",EY="__local_write_time__";function _w(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[bY])==null?void 0:r.stringValue)===_Y}function bw(t){const e=t.mapValue.fields[wY];return _w(e)?bw(e):e}function Lg(t){const e=Va(t.mapValue.fields[EY].timestampValue);return new Nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _me{constructor(e,n,r,i,o,s,a,u,c,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c,this.isUsingEmulator=f}}const B_="(default)";class du{constructor(e,n){this.projectId=e,this.database=n||B_}static empty(){return new du("","")}get isDefaultDatabase(){return this.database===B_}isEqual(e){return e instanceof du&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD="__type__",TY="__max__",Zl={mapValue:{fields:{__type__:{stringValue:TY}}}},ID="__vector__",th="value",d_={nullValue:"NULL_VALUE"};function hu(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_w(t)?4:xY(t)?9007199254740991:ww(t)?10:11:Fe(28295,{value:t})}function $s(t,e){if(t===e)return!0;const n=hu(t);if(n!==hu(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Lg(t).isEqual(Lg(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Va(i.timestampValue),a=Va(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return Ua(i.bytesValue).isEqual(Ua(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return un(i.geoPointValue.latitude)===un(o.geoPointValue.latitude)&&un(i.geoPointValue.longitude)===un(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return un(i.integerValue)===un(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=un(i.doubleValue),a=un(o.doubleValue);return s===a?Mg(s)===Mg(a):isNaN(s)&&isNaN(a)}return!1})(t,e);case 9:return Yd(t.arrayValue.values||[],e.arrayValue.values||[],$s);case 10:case 11:return(function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(yF(s)!==yF(a))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!$s(s[u],a[u])))return!1;return!0})(t,e);default:return Fe(52216,{left:t})}}function Vg(t,e){return(t.values||[]).find((n=>$s(n,e)))!==void 0}function pu(t,e){if(t===e)return 0;const n=hu(t),r=hu(e);if(n!==r)return rt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return rt(t.booleanValue,e.booleanValue);case 2:return(function(o,s){const a=un(o.integerValue||o.doubleValue),u=un(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1})(t,e);case 3:return _F(t.timestampValue,e.timestampValue);case 4:return _F(Lg(t),Lg(e));case 5:return FN(t.stringValue,e.stringValue);case 6:return(function(o,s){const a=Ua(o),u=Ua(s);return a.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){const a=o.split("/"),u=s.split("/");for(let c=0;c<a.length&&c<u.length;c++){const f=rt(a[c],u[c]);if(f!==0)return f}return rt(a.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){const a=rt(un(o.latitude),un(s.latitude));return a!==0?a:rt(un(o.longitude),un(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return bF(t.arrayValue,e.arrayValue);case 10:return(function(o,s){var g,_,T,E;const a=o.fields||{},u=s.fields||{},c=(g=a[th])==null?void 0:g.arrayValue,f=(_=u[th])==null?void 0:_.arrayValue,h=rt(((T=c==null?void 0:c.values)==null?void 0:T.length)||0,((E=f==null?void 0:f.values)==null?void 0:E.length)||0);return h!==0?h:bF(c,f)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Zl.mapValue&&s===Zl.mapValue)return 0;if(o===Zl.mapValue)return 1;if(s===Zl.mapValue)return-1;const a=o.fields||{},u=Object.keys(a),c=s.fields||{},f=Object.keys(c);u.sort(),f.sort();for(let h=0;h<u.length&&h<f.length;++h){const g=FN(u[h],f[h]);if(g!==0)return g;const _=pu(a[u[h]],c[f[h]]);if(_!==0)return _}return rt(u.length,f.length)})(t.mapValue,e.mapValue);default:throw Fe(23264,{he:n})}}function _F(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return rt(t,e);const n=Va(t),r=Va(e),i=rt(n.seconds,r.seconds);return i!==0?i:rt(n.nanos,r.nanos)}function bF(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=pu(n[i],r[i]);if(o)return o}return rt(n.length,r.length)}function nh(t){return jN(t)}function jN(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Va(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Ua(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Me.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=jN(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${jN(n.fields[s])}`;return i+"}"})(t.mapValue):Fe(61005,{value:t})}function h_(t){switch(hu(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=bw(t);return e?16+h_(e):16;case 5:return 2*t.stringValue.length;case 6:return Ua(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,o)=>i+h_(o)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return Su(r.fields,((o,s)=>{i+=o.length+h_(s)})),i})(t.mapValue);default:throw Fe(13486,{value:t})}}function Hc(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function KN(t){return!!t&&"integerValue"in t}function Ug(t){return!!t&&"arrayValue"in t}function wF(t){return!!t&&"nullValue"in t}function EF(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function p_(t){return!!t&&"mapValue"in t}function ww(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[CD])==null?void 0:r.stringValue)===ID}function hg(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Su(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=hg(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=hg(t.arrayValue.values[n]);return e}return{...t}}function xY(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===TY}const SY={mapValue:{fields:{[CD]:{stringValue:ID},[th]:{arrayValue:{}}}}};function bme(t){return"nullValue"in t?d_:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Hc(du.empty(),Me.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?ww(t)?SY:{mapValue:{}}:Fe(35942,{value:t})}function wme(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Hc(du.empty(),Me.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?SY:"mapValue"in t?ww(t)?{mapValue:{}}:Zl:Fe(61959,{value:t})}function TF(t,e){const n=pu(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function xF(t,e){const n=pu(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e){this.value=e}static empty(){return new Ar({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!p_(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=hg(n)}setAll(e){let n=cn.emptyPath(),r={},i=[];e.forEach(((s,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=hg(s):i.push(a.lastSegment())}));const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());p_(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return $s(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];p_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Su(n,((i,o)=>e[i]=o));for(const i of r)delete e[i]}clone(){return new Ar(hg(this.value))}}function AY(t){const e=[];return Su(t.fields,((n,r)=>{const i=new cn([n]);if(p_(r)){const o=AY(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)})),new hi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new nn(e,0,We.min(),We.min(),We.min(),Ar.empty(),0)}static newFoundDocument(e,n,r,i){return new nn(e,1,n,We.min(),r,i,0)}static newNoDocument(e,n){return new nn(e,2,n,We.min(),We.min(),Ar.empty(),0)}static newUnknownDocument(e,n){return new nn(e,3,n,We.min(),We.min(),Ar.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(We.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ar.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ar.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=We.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,n){this.position=e,this.inclusive=n}}function SF(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?r=Me.comparator(Me.fromName(s.referenceValue),n.key):r=pu(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function AF(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!$s(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e,n="asc"){this.field=e,this.dir=n}}function Eme(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CY{}class vt extends CY{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Tme(e,n,r):n==="array-contains"?new Ame(e,r):n==="in"?new DY(e,r):n==="not-in"?new Cme(e,r):n==="array-contains-any"?new Ime(e,r):new vt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new xme(e,r):new Sme(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(pu(n,this.value)):n!==null&&hu(this.value)===hu(n)&&this.matchesComparison(pu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vt extends CY{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Vt(e,n)}matches(e){return rh(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function rh(t){return t.op==="and"}function WN(t){return t.op==="or"}function RD(t){return IY(t)&&rh(t)}function IY(t){for(const e of t.filters)if(e instanceof Vt)return!1;return!0}function YN(t){if(t instanceof vt)return t.field.canonicalString()+t.op.toString()+nh(t.value);if(RD(t))return t.filters.map((e=>YN(e))).join(",");{const e=t.filters.map((n=>YN(n))).join(",");return`${t.op}(${e})`}}function RY(t,e){return t instanceof vt?(function(r,i){return i instanceof vt&&r.op===i.op&&r.field.isEqual(i.field)&&$s(r.value,i.value)})(t,e):t instanceof Vt?(function(r,i){return i instanceof Vt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((o,s,a)=>o&&RY(s,i.filters[a])),!0):!1})(t,e):void Fe(19439)}function PY(t,e){const n=t.filters.concat(e);return Vt.create(n,t.op)}function NY(t){return t instanceof vt?(function(n){return`${n.field.canonicalString()} ${n.op} ${nh(n.value)}`})(t):t instanceof Vt?(function(n){return n.op.toString()+" {"+n.getFilters().map(NY).join(" ,")+"}"})(t):"Filter"}class Tme extends vt{constructor(e,n,r){super(e,n,r),this.key=Me.fromName(r.referenceValue)}matches(e){const n=Me.comparator(e.key,this.key);return this.matchesComparison(n)}}class xme extends vt{constructor(e,n){super(e,"in",n),this.keys=MY("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class Sme extends vt{constructor(e,n){super(e,"not-in",n),this.keys=MY("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function MY(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((r=>Me.fromName(r.referenceValue)))}class Ame extends vt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ug(n)&&Vg(n.arrayValue,this.value)}}class DY extends vt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Vg(this.value.arrayValue,n)}}class Cme extends vt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Vg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Vg(this.value.arrayValue,n)}}class Ime extends vt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ug(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Vg(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rme{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Te=null}}function JN(t,e=null,n=[],r=[],i=null,o=null,s=null){return new Rme(t,e,n,r,i,o,s)}function Gc(t){const e=De(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>YN(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),by(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>nh(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>nh(r))).join(",")),e.Te=n}return e.Te}function Ey(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Eme(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!RY(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!AF(t.startAt,e.startAt)&&AF(t.endAt,e.endAt)}function $_(t){return Me.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function z_(t,e){return t.filters.filter((n=>n instanceof vt&&n.field.isEqual(e)))}function CF(t,e,n){let r=d_,i=!0;for(const o of z_(t,e)){let s=d_,a=!0;switch(o.op){case"<":case"<=":s=bme(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=d_}TF({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const s=n.position[o];TF({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function IF(t,e,n){let r=Zl,i=!0;for(const o of z_(t,e)){let s=Zl,a=!0;switch(o.op){case">=":case">":s=wme(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Zl}xF({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const s=n.position[o];xF({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function kY(t,e,n,r,i,o,s,a){return new Ya(t,e,n,r,i,o,s,a)}function Uh(t){return new Ya(t)}function RF(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function PD(t){return t.collectionGroup!==null}function Od(t){const e=De(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ut(cn.comparator);return s.filters.forEach((u=>{u.getFlattenedFilters().forEach((c=>{c.isInequality()&&(a=a.add(c.field))}))})),a})(e).forEach((o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new qg(o,r))})),n.has(cn.keyField().canonicalString())||e.Ie.push(new qg(cn.keyField(),r))}return e.Ie}function ni(t){const e=De(t);return e.Ee||(e.Ee=Pme(e,Od(t))),e.Ee}function Pme(t,e){if(t.limitType==="F")return JN(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const o=i.dir==="desc"?"asc":"desc";return new qg(i.field,o)}));const n=t.endAt?new mu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new mu(t.startAt.position,t.startAt.inclusive):null;return JN(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function XN(t,e){const n=t.filters.concat([e]);return new Ya(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function H_(t,e,n){return new Ya(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ty(t,e){return Ey(ni(t),ni(e))&&t.limitType===e.limitType}function OY(t){return`${Gc(ni(t))}|lt:${t.limitType}`}function Ed(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>NY(i))).join(", ")}]`),by(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>nh(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>nh(i))).join(",")),`Target(${r})`})(ni(t))}; limitType=${t.limitType})`}function xy(t,e){return e.isFoundDocument()&&(function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Me.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(const o of Od(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,u){const c=SF(s,a,u);return s.inclusive?c<=0:c<0})(r.startAt,Od(r),i)||r.endAt&&!(function(s,a,u){const c=SF(s,a,u);return s.inclusive?c>=0:c>0})(r.endAt,Od(r),i))})(t,e)}function LY(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function VY(t){return(e,n)=>{let r=!1;for(const i of Od(t)){const o=Nme(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Nme(t,e,n){const r=t.field.isKeyField()?Me.comparator(e.key,n.key):(function(o,s,a){const u=s.data.field(o),c=a.data.field(o);return u!==null&&c!==null?pu(u,c):Fe(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Fe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Su(this.inner,((n,r)=>{for(const[i,o]of r)e(i,o)}))}isEmpty(){return yY(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mme=new Qt(Me.comparator);function pi(){return Mme}const UY=new Qt(Me.comparator);function Gm(...t){let e=UY;for(const n of t)e=e.insert(n.key,n);return e}function qY(t){let e=UY;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Ds(){return pg()}function FY(){return pg()}function pg(){return new Ja((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Dme=new Qt(Me.comparator),kme=new Ut(Me.comparator);function ut(...t){let e=kme;for(const n of t)e=e.add(n);return e}const Ome=new Ut(rt);function ND(){return Ome}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MD(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mg(e)?"-0":e}}function BY(t){return{integerValue:""+t}}function $Y(t,e){return sY(e)?BY(e):MD(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(){this._=void 0}}function Lme(t,e,n){return t instanceof ih?(function(i,o){const s={fields:{[bY]:{stringValue:_Y},[EY]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&_w(o)&&(o=bw(o)),o&&(s.fields[wY]=o),{mapValue:s}})(n,e):t instanceof jc?HY(t,e):t instanceof Kc?GY(t,e):(function(i,o){const s=zY(i,o),a=PF(s)+PF(i.Ae);return KN(s)&&KN(i.Ae)?BY(a):MD(i.serializer,a)})(t,e)}function Vme(t,e,n){return t instanceof jc?HY(t,e):t instanceof Kc?GY(t,e):n}function zY(t,e){return t instanceof oh?(function(r){return KN(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class ih extends Ew{}class jc extends Ew{constructor(e){super(),this.elements=e}}function HY(t,e){const n=jY(e);for(const r of t.elements)n.some((i=>$s(i,r)))||n.push(r);return{arrayValue:{values:n}}}class Kc extends Ew{constructor(e){super(),this.elements=e}}function GY(t,e){let n=jY(e);for(const r of t.elements)n=n.filter((i=>!$s(i,r)));return{arrayValue:{values:n}}}class oh extends Ew{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function PF(t){return un(t.integerValue||t.doubleValue)}function jY(t){return Ug(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e,n){this.field=e,this.transform=n}}function Ume(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof jc&&i instanceof jc||r instanceof Kc&&i instanceof Kc?Yd(r.elements,i.elements,$s):r instanceof oh&&i instanceof oh?$s(r.Ae,i.Ae):r instanceof ih&&i instanceof ih})(t.transform,e.transform)}class qme{constructor(e,n){this.version=e,this.transformResults=n}}class fn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new fn}static exists(e){return new fn(void 0,e)}static updateTime(e){return new fn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function m_(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Tw{}function KY(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Fh(t.key,fn.none()):new qh(t.key,t.data,fn.none());{const n=t.data,r=Ar.empty();let i=new Ut(cn.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Xa(t.key,r,new hi(i.toArray()),fn.none())}}function Fme(t,e,n){t instanceof qh?(function(i,o,s){const a=i.value.clone(),u=MF(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(t,e,n):t instanceof Xa?(function(i,o,s){if(!m_(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=MF(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(WY(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function mg(t,e,n,r){return t instanceof qh?(function(o,s,a,u){if(!m_(o.precondition,s))return a;const c=o.value.clone(),f=DF(o.fieldTransforms,u,s);return c.setAll(f),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null})(t,e,n,r):t instanceof Xa?(function(o,s,a,u){if(!m_(o.precondition,s))return a;const c=DF(o.fieldTransforms,u,s),f=s.data;return f.setAll(WY(o)),f.setAll(c),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((h=>h.field)))})(t,e,n,r):(function(o,s,a){return m_(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(t,e,n)}function Bme(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=zY(r.transform,i||null);o!=null&&(n===null&&(n=Ar.empty()),n.set(r.field,o))}return n||null}function NF(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Yd(r,i,((o,s)=>Ume(o,s)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class qh extends Tw{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Xa extends Tw{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function WY(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function MF(t,e,n){const r=new Map;je(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Vme(s,a,n[i]))}return r}function DF(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,Lme(o,s,e))}return r}class Fh extends Tw{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class DD extends Tw{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&Fme(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=mg(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=mg(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=FY();return this.mutations.forEach((i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const u=KY(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(We.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ut())}isEqual(e){return this.batchId===e.batchId&&Yd(this.mutations,e.mutations,((n,r)=>NF(n,r)))&&Yd(this.baseMutations,e.baseMutations,((n,r)=>NF(n,r)))}}class OD{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){je(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return Dme})();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new OD(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $me{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bn,bt;function YY(t){switch(t){case pe.OK:return Fe(64938);case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0;default:return Fe(15467,{code:t})}}function JY(t){if(t===void 0)return Vn("GRPC error has no .code"),pe.UNKNOWN;switch(t){case Bn.OK:return pe.OK;case Bn.CANCELLED:return pe.CANCELLED;case Bn.UNKNOWN:return pe.UNKNOWN;case Bn.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case Bn.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case Bn.INTERNAL:return pe.INTERNAL;case Bn.UNAVAILABLE:return pe.UNAVAILABLE;case Bn.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case Bn.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case Bn.NOT_FOUND:return pe.NOT_FOUND;case Bn.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case Bn.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case Bn.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case Bn.ABORTED:return pe.ABORTED;case Bn.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case Bn.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case Bn.DATA_LOSS:return pe.DATA_LOSS;default:return Fe(39323,{code:t})}}(bt=Bn||(Bn={}))[bt.OK=0]="OK",bt[bt.CANCELLED=1]="CANCELLED",bt[bt.UNKNOWN=2]="UNKNOWN",bt[bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",bt[bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",bt[bt.NOT_FOUND=5]="NOT_FOUND",bt[bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",bt[bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",bt[bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",bt[bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",bt[bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",bt[bt.ABORTED=10]="ABORTED",bt[bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",bt[bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",bt[bt.INTERNAL=13]="INTERNAL",bt[bt.UNAVAILABLE=14]="UNAVAILABLE",bt[bt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XY(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zme=new ru([4294967295,4294967295],0);function kF(t){const e=XY().encode(t),n=new zW;return n.update(e),new Uint8Array(n.digest())}function OF(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ru([n,r],0),new ru([i,o],0)]}class VD{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new jm(`Invalid padding: ${n}`);if(r<0)throw new jm(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new jm(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new jm(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ru.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(ru.fromNumber(r)));return i.compare(zme)===1&&(i=new ru([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=kF(e),[r,i]=OF(n);for(let o=0;o<this.hashCount;o++){const s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new VD(o,i,n);return r.forEach((a=>s.insert(a))),s}insert(e){if(this.ge===0)return;const n=kF(e),[r,i]=OF(n);for(let o=0;o<this.hashCount;o++){const s=this.ye(r,i,o);this.Se(s)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class jm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Cy.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ay(We.min(),i,new Qt(rt),pi(),ut())}}class Cy{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Cy(r,n,ut(),ut(),ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class QY{constructor(e,n){this.targetId=e,this.Ce=n}}class ZY{constructor(e,n,r=Cn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class LF{constructor(){this.ve=0,this.Fe=VF(),this.Me=Cn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ut(),n=ut(),r=ut();return this.Fe.forEach(((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Fe(38017,{changeType:o})}})),new Cy(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=VF()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,je(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Hme{constructor(e){this.Ge=e,this.ze=new Map,this.je=pi(),this.Je=T0(),this.He=T0(),this.Ye=new Qt(rt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Fe(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const o=i.target;if($_(o))if(r===0){const s=new Me(o.path);this.et(n,s,nn.newNoDocument(s,We.min()))}else je(r===1,20013,{expectedCount:r});else{const s=this._t(n);if(s!==r){const a=this.ut(e),u=a?this.ct(a,e,s):1;if(u!==0){this.it(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=Ua(r).toUint8Array()}catch(u){if(u instanceof vY)return Bs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new VD(s,i,o)}catch(u){return Bs(u instanceof jm?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((o=>{const s=this.Ge.ht(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.et(n,o,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((o,s)=>{const a=this.ot(s);if(a){if(o.current&&$_(a.target)){const u=new Me(a.target.path);this.It(u).has(s)||this.Et(s,u)||this.et(s,u,nn.newNoDocument(u,e))}o.Be&&(n.set(s,o.ke()),o.qe())}}));let r=ut();this.He.forEach(((o,s)=>{let a=!0;s.forEachWhile((u=>{const c=this.ot(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(r=r.add(o))})),this.je.forEach(((o,s)=>s.setReadTime(e)));const i=new Ay(e,n,this.Ye,this.je,r);return this.je=pi(),this.Je=T0(),this.He=T0(),this.Ye=new Qt(rt),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new LF,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ut(rt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ut(rt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ae("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new LF),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function T0(){return new Qt(Me.comparator)}function VF(){return new Qt(Me.comparator)}const Gme={asc:"ASCENDING",desc:"DESCENDING"},jme={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Kme={and:"AND",or:"OR"};class Wme{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function QN(t,e){return t.useProto3Json||by(e)?e:{value:e}}function sh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eJ(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Yme(t,e){return sh(t,e.toTimestamp())}function Un(t){return je(!!t,49232),We.fromTimestamp((function(n){const r=Va(n);return new Nt(r.seconds,r.nanos)})(t))}function UD(t,e){return ZN(t,e).canonicalString()}function ZN(t,e){const n=(function(i){return new yt(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function tJ(t){const e=yt.fromString(t);return je(fJ(e),10190,{key:e.toString()}),e}function Fg(t,e){return UD(t.databaseId,e.path)}function Ls(t,e){const n=tJ(e);if(n.get(1)!==t.databaseId.projectId)throw new Se(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Se(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Me(iJ(n))}function nJ(t,e){return UD(t.databaseId,e)}function rJ(t){const e=tJ(t);return e.length===4?yt.emptyPath():iJ(e)}function eM(t){return new yt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function iJ(t){return je(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function UF(t,e,n){return{name:Fg(t,e),fields:n.value.mapValue.fields}}function oJ(t,e,n){const r=Ls(t,e.name),i=Un(e.updateTime),o=e.createTime?Un(e.createTime):We.min(),s=new Ar({mapValue:{fields:e.fields}}),a=nn.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Jme(t,e){return"found"in e?(function(r,i){je(!!i.found,43571),i.found.name,i.found.updateTime;const o=Ls(r,i.found.name),s=Un(i.found.updateTime),a=i.found.createTime?Un(i.found.createTime):We.min(),u=new Ar({mapValue:{fields:i.found.fields}});return nn.newFoundDocument(o,s,a,u)})(t,e):"missing"in e?(function(r,i){je(!!i.missing,3894),je(!!i.readTime,22933);const o=Ls(r,i.missing),s=Un(i.readTime);return nn.newNoDocument(o,s)})(t,e):Fe(7234,{result:e})}function Xme(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Fe(39313,{state:c})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(c,f){return c.useProto3Json?(je(f===void 0||typeof f=="string",58123),Cn.fromBase64String(f||"")):(je(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Cn.fromUint8Array(f||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(c){const f=c.code===void 0?pe.UNKNOWN:JY(c.code);return new Se(f,c.message||"")})(s);n=new ZY(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ls(t,r.document.name),o=Un(r.document.updateTime),s=r.document.createTime?Un(r.document.createTime):We.min(),a=new Ar({mapValue:{fields:r.document.fields}}),u=nn.newFoundDocument(i,o,s,a),c=r.targetIds||[],f=r.removedTargetIds||[];n=new g_(c,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ls(t,r.document),o=r.readTime?Un(r.readTime):We.min(),s=nn.newNoDocument(i,o),a=r.removedTargetIds||[];n=new g_([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ls(t,r.document),o=r.removedTargetIds||[];n=new g_([],o,i,null)}else{if(!("filter"in e))return Fe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new $me(i,o),a=r.targetId;n=new QY(a,s)}}return n}function Bg(t,e){let n;if(e instanceof qh)n={update:UF(t,e.key,e.value)};else if(e instanceof Fh)n={delete:Fg(t,e.key)};else if(e instanceof Xa)n={update:UF(t,e.key,e.data),updateMask:rge(e.fieldMask)};else{if(!(e instanceof DD))return Fe(16599,{Vt:e.type});n={verify:Fg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(o,s){const a=s.transform;if(a instanceof ih)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof jc)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Kc)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof oh)return{fieldPath:s.field.canonicalString(),increment:a.Ae};throw Fe(20930,{transform:s.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:Yme(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Fe(27497)})(t,e.precondition)),n}function tM(t,e){const n=e.currentDocument?(function(o){return o.updateTime!==void 0?fn.updateTime(Un(o.updateTime)):o.exists!==void 0?fn.exists(o.exists):fn.none()})(e.currentDocument):fn.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(s,a){let u=null;if("setToServerValue"in a)je(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),u=new ih;else if("appendMissingElements"in a){const f=a.appendMissingElements.values||[];u=new jc(f)}else if("removeAllFromArray"in a){const f=a.removeAllFromArray.values||[];u=new Kc(f)}else"increment"in a?u=new oh(s,a.increment):Fe(16584,{proto:a});const c=cn.fromServerFormat(a.fieldPath);return new Sy(c,u)})(t,i))):[];if(e.update){e.update.name;const i=Ls(t,e.update.name),o=new Ar({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=(function(u){const c=u.fieldPaths||[];return new hi(c.map((f=>cn.fromServerFormat(f))))})(e.updateMask);return new Xa(i,o,s,n,r)}return new qh(i,o,n,r)}if(e.delete){const i=Ls(t,e.delete);return new Fh(i,n)}if(e.verify){const i=Ls(t,e.verify);return new DD(i,n)}return Fe(1463,{proto:e})}function Qme(t,e){return t&&t.length>0?(je(e!==void 0,14353),t.map((n=>(function(i,o){let s=i.updateTime?Un(i.updateTime):Un(o);return s.isEqual(We.min())&&(s=Un(o)),new qme(s,i.transformResults||[])})(n,e)))):[]}function sJ(t,e){return{documents:[nJ(t,e.path)]}}function aJ(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=nJ(t,i);const o=(function(c){if(c.length!==0)return cJ(Vt.create(c,"and"))})(e.filters);o&&(n.structuredQuery.where=o);const s=(function(c){if(c.length!==0)return c.map((f=>(function(g){return{field:Td(g.field),direction:ege(g.dir)}})(f)))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=QN(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(c){return{before:c.inclusive,values:c.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(c){return{before:!c.inclusive,values:c.position}})(e.endAt)),{ft:n,parent:i}}function lJ(t){let e=rJ(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){je(r===1,65062);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];n.where&&(o=(function(h){const g=uJ(h);return g instanceof Vt&&RD(g)?g.getFilters():[g]})(n.where));let s=[];n.orderBy&&(s=(function(h){return h.map((g=>(function(T){return new qg(xd(T.field),(function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(T.direction))})(g)))})(n.orderBy));let a=null;n.limit&&(a=(function(h){let g;return g=typeof h=="object"?h.value:h,by(g)?null:g})(n.limit));let u=null;n.startAt&&(u=(function(h){const g=!!h.before,_=h.values||[];return new mu(_,g)})(n.startAt));let c=null;return n.endAt&&(c=(function(h){const g=!h.before,_=h.values||[];return new mu(_,g)})(n.endAt)),kY(e,i,s,o,a,"F",u,c)}function Zme(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Fe(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function uJ(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=xd(n.unaryFilter.field);return vt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=xd(n.unaryFilter.field);return vt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=xd(n.unaryFilter.field);return vt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=xd(n.unaryFilter.field);return vt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Fe(61313);default:return Fe(60726)}})(t):t.fieldFilter!==void 0?(function(n){return vt.create(xd(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Fe(58110);default:return Fe(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Vt.create(n.compositeFilter.filters.map((r=>uJ(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Fe(1026)}})(n.compositeFilter.op))})(t):Fe(30097,{filter:t})}function ege(t){return Gme[t]}function tge(t){return jme[t]}function nge(t){return Kme[t]}function Td(t){return{fieldPath:t.canonicalString()}}function xd(t){return cn.fromServerFormat(t.fieldPath)}function cJ(t){return t instanceof vt?(function(n){if(n.op==="=="){if(EF(n.value))return{unaryFilter:{field:Td(n.field),op:"IS_NAN"}};if(wF(n.value))return{unaryFilter:{field:Td(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(EF(n.value))return{unaryFilter:{field:Td(n.field),op:"IS_NOT_NAN"}};if(wF(n.value))return{unaryFilter:{field:Td(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Td(n.field),op:tge(n.op),value:n.value}}})(t):t instanceof Vt?(function(n){const r=n.getFilters().map((i=>cJ(i)));return r.length===1?r[0]:{compositeFilter:{op:nge(n.op),filters:r}}})(t):Fe(54877,{filter:t})}function rge(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function fJ(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,n,r,i,o=We.min(),s=We.min(),a=Cn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Ea(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ea(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ea(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ea(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dJ{constructor(e){this.yt=e}}function ige(t,e){let n;if(e.document)n=oJ(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Me.fromSegments(e.noDocument.path),i=Yc(e.noDocument.readTime);n=nn.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Fe(56709);{const r=Me.fromSegments(e.unknownDocument.path),i=Yc(e.unknownDocument.version);n=nn.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime((function(i){const o=new Nt(i[0],i[1]);return We.fromTimestamp(o)})(e.readTime)),n}function qF(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:G_(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(o,s){return{name:Fg(o,s.key),fields:s.data.value.mapValue.fields,updateTime:sh(o,s.version.toTimestamp()),createTime:sh(o,s.createTime.toTimestamp())}})(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Wc(e.version)};else{if(!e.isUnknownDocument())return Fe(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Wc(e.version)}}return r}function G_(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Wc(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Yc(t){const e=new Nt(t.seconds,t.nanoseconds);return We.fromTimestamp(e)}function bc(t,e){const n=(e.baseMutations||[]).map((o=>tM(t.yt,o)));for(let o=0;o<e.mutations.length-1;++o){const s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const r=e.mutations.map((o=>tM(t.yt,o))),i=Nt.fromMillis(e.localWriteTimeMs);return new kD(e.batchId,i,n,r)}function Km(t){const e=Yc(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Yc(t.lastLimboFreeSnapshotVersion):We.min();let r;return r=(function(o){return o.documents!==void 0})(t.query)?(function(o){const s=o.documents.length;return je(s===1,1966,{count:s}),ni(Uh(rJ(o.documents[0])))})(t.query):(function(o){return ni(lJ(o))})(t.query),new Ea(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Cn.fromBase64String(t.resumeToken))}function hJ(t,e){const n=Wc(e.snapshotVersion),r=Wc(e.lastLimboFreeSnapshotVersion);let i;i=$_(e.target)?sJ(t.yt,e.target):aJ(t.yt,e.target).ft;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Gc(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function qD(t){const e=lJ({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?H_(e,e.limit,"L"):e}function aS(t,e){return new LD(e.largestBatchId,tM(t.yt,e.overlayMutation))}function FF(t,e){const n=e.path.lastSegment();return[t,zr(e.path.popLast()),n]}function BF(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Wc(r.readTime),documentKey:zr(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oge{getBundleMetadata(e,n){return $F(e).get(n).next((r=>{if(r)return(function(o){return{id:o.bundleId,createTime:Yc(o.createTime),version:o.version}})(r)}))}saveBundleMetadata(e,n){return $F(e).put((function(i){return{bundleId:i.id,createTime:Wc(Un(i.createTime)),version:i.version}})(n))}getNamedQuery(e,n){return zF(e).get(n).next((r=>{if(r)return(function(o){return{name:o.name,query:qD(o.bundledQuery),readTime:Yc(o.readTime)}})(r)}))}saveNamedQuery(e,n){return zF(e).put((function(i){return{name:i.name,readTime:Wc(Un(i.readTime)),bundledQuery:i.bundledQuery}})(n))}}function $F(t){return tr(t,gw)}function zF(t){return tr(t,yw)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new xw(e,r)}getOverlay(e,n){return wm(e).get(FF(this.userId,n)).next((r=>r?aS(this.serializer,r):null))}getOverlays(e,n){const r=Ds();return ae.forEach(n,(i=>this.getOverlay(e,i).next((o=>{o!==null&&r.set(i,o)})))).next((()=>r))}saveOverlays(e,n,r){const i=[];return r.forEach(((o,s)=>{const a=new LD(n,s);i.push(this.St(e,a))})),ae.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach((s=>i.add(zr(s.getCollectionPath()))));const o=[];return i.forEach((s=>{const a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(wm(e).Z(HN,a))})),ae.waitFor(o)}getOverlaysForCollection(e,n,r){const i=Ds(),o=zr(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return wm(e).J(HN,s).next((a=>{for(const u of a){const c=aS(this.serializer,u);i.set(c.getKey(),c)}return i}))}getOverlaysForCollectionGroup(e,n,r,i){const o=Ds();let s;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return wm(e).ee({index:dY,range:a},((u,c,f)=>{const h=aS(this.serializer,c);o.size()<i||h.largestBatchId===s?(o.set(h.getKey(),h),s=h.largestBatchId):f.done()})).next((()=>o))}St(e,n){return wm(e).put((function(i,o,s){const[a,u,c]=FF(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:c,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Bg(i.yt,s.mutation)}})(this.serializer,this.userId,n))}}function wm(t){return tr(t,vw)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sge{bt(e){return tr(e,SD)}getSessionToken(e){return this.bt(e).get("sessionToken").next((n=>{const r=n==null?void 0:n.value;return r?Cn.fromUint8Array(r):Cn.EMPTY_BYTE_STRING}))}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(un(e.integerValue));else if("doubleValue"in e){const r=un(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Mg(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Va(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Ua(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?xY(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):ww(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):Fe(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){var s,a;const r=e.fields||{};this.Ft(n,53);const i=th,o=((a=(s=r[i].arrayValue)==null?void 0:s.values)==null?void 0:a.length)||0;this.Ft(n,15),n.Mt(un(o)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),Me.fromName(e).path.forEach((r=>{this.Ft(n,60),this.Ut(r,n)}))}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}wc.Kt=new wc;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fd=255;function age(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function HF(t){const e=64-(function(r){let i=0;for(let o=0;o<8;++o){const s=age(255&r[o]);if(i+=s,s!==8)break}return i})(t);return Math.ceil(e/8)}class lge{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=n.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const n=this.en(e),r=HF(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=HF(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(fd),this.sn(255)}_n(){this.an(fd),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=(function(o){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)})(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===fd?(this.sn(fd),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===fd?(this.an(fd),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class uge{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class cge{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Em{constructor(){this.cn=new lge,this.ln=new uge(this.cn),this.hn=new cge(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,n,r,i){this.Tn=e,this.In=n,this.En=r,this.dn=i}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new Ec(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:y_(this.En),directionalValue:y_(this.dn),orderedDocumentKey:y_(n),documentKey:r.path.toArray()}}Vn(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function $l(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=GF(t.En,e.En),n!==0?n:(n=GF(t.dn,e.dn),n!==0?n:Me.comparator(t.In,e.In)))}function GF(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function y_(t){return PK()?(function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r})(t):t}function jF(t){return typeof t!="string"?t:(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(t)}class KF{constructor(e){this.mn=new Ut(((n,r)=>cn.comparator(n.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(je(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=BN(e);if(n!==void 0&&!this.wn(n))return!1;const r=hc(e);let i=new Set,o=0,s=0;for(;o<r.length&&this.wn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[o];if(!this.Sn(a,u)||!this.bn(this.fn[s++],u))return!1}++o}for(;o<r.length;++o){const a=r[o];if(s>=this.fn.length||!this.bn(this.fn[s++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new Ut(cn.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new u_(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new u_(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new u_(r.field,r.dir==="asc"?0:1)));return new V_(V_.UNKNOWN_ID,this.collectionId,n,Ng.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pJ(t){var n,r;if(je(t instanceof vt||t instanceof Vt,20012),t instanceof vt){if(t instanceof DY){const i=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map((o=>vt.create(t.field,"==",o))))||[];return Vt.create(i,"or")}return t}const e=t.filters.map((i=>pJ(i)));return Vt.create(e,t.op)}function fge(t){if(t.getFilters().length===0)return[];const e=iM(pJ(t));return je(mJ(e),7391),nM(e)||rM(e)?[e]:e.getFilters()}function nM(t){return t instanceof vt}function rM(t){return t instanceof Vt&&RD(t)}function mJ(t){return nM(t)||rM(t)||(function(n){if(n instanceof Vt&&WN(n)){for(const r of n.getFilters())if(!nM(r)&&!rM(r))return!1;return!0}return!1})(t)}function iM(t){if(je(t instanceof vt||t instanceof Vt,34018),t instanceof vt)return t;if(t.filters.length===1)return iM(t.filters[0]);const e=t.filters.map((r=>iM(r)));let n=Vt.create(e,t.op);return n=j_(n),mJ(n)?n:(je(n instanceof Vt,64498),je(rh(n),40251),je(n.filters.length>1,57927),n.filters.reduce(((r,i)=>FD(r,i))))}function FD(t,e){let n;return je(t instanceof vt||t instanceof Vt,38388),je(e instanceof vt||e instanceof Vt,25473),n=t instanceof vt?e instanceof vt?(function(i,o){return Vt.create([i,o],"and")})(t,e):WF(t,e):e instanceof vt?WF(e,t):(function(i,o){if(je(i.filters.length>0&&o.filters.length>0,48005),rh(i)&&rh(o))return PY(i,o.getFilters());const s=WN(i)?i:o,a=WN(i)?o:i,u=s.filters.map((c=>FD(c,a)));return Vt.create(u,"or")})(t,e),j_(n)}function WF(t,e){if(rh(e))return PY(e,t.getFilters());{const n=e.filters.map((r=>FD(t,r)));return Vt.create(n,"or")}}function j_(t){if(je(t instanceof vt||t instanceof Vt,11850),t instanceof vt)return t;const e=t.getFilters();if(e.length===1)return j_(e[0]);if(IY(t))return t;const n=e.map((i=>j_(i))),r=[];return n.forEach((i=>{i instanceof vt?r.push(i):i instanceof Vt&&(i.op===t.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:Vt.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dge{constructor(){this.Cn=new BD}addToCollectionParentIndex(e,n){return this.Cn.add(n),ae.resolve()}getCollectionParents(e,n){return ae.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ae.resolve()}deleteFieldIndex(e,n){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,n){return ae.resolve()}getDocumentsMatchingTarget(e,n){return ae.resolve(null)}getIndexType(e,n){return ae.resolve(0)}getFieldIndexes(e,n){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,n){return ae.resolve(Fi.min())}getMinOffsetFromCollectionGroup(e,n){return ae.resolve(Fi.min())}updateCollectionGroup(e,n,r){return ae.resolve()}updateIndexEntries(e,n){return ae.resolve()}}class BD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ut(yt.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ut(yt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YF="IndexedDbIndexManager",x0=new Uint8Array(0);class hge{constructor(e,n){this.databaseId=n,this.vn=new BD,this.Fn=new Ja((r=>Gc(r)),((r,i)=>Ey(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener((()=>{this.vn.add(n)}));const o={collectionId:r,parent:zr(i)};return JF(e).put(o)}return ae.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[XW(n),""],!1,!0);return JF(e).J(i).next((o=>{for(const s of o){if(s.collectionId!==n)break;r.push(Ms(s.parent))}return r}))}addFieldIndex(e,n){const r=Tm(e),i=(function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map((u=>[u.fieldPath.canonicalString(),u.kind]))}})(n);delete i.indexId;const o=r.add(i);if(n.indexState){const s=hd(e);return o.next((a=>{s.put(BF(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return o.next()}deleteFieldIndex(e,n){const r=Tm(e),i=hd(e),o=dd(e);return r.delete(n.indexId).next((()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const n=Tm(e),r=dd(e),i=hd(e);return n.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,n){return ae.forEach(this.Mn(n),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const o=new KF(r).Dn();if(o!=null)return this.addFieldIndex(e,o)}}))))}getDocumentsMatchingTarget(e,n){const r=dd(e);let i=!0;const o=new Map;return ae.forEach(this.Mn(n),(s=>this.xn(e,s).next((a=>{i&&(i=!!a),o.set(s,a)})))).next((()=>{if(i){let s=ut();const a=[];return ae.forEach(o,((u,c)=>{Ae(YF,`Using index ${(function(R){return`id=${R.indexId}|cg=${R.collectionGroup}|f=${R.fields.map((P=>`${P.fieldPath}:${P.kind}`)).join(",")}`})(u)} to execute ${Gc(n)}`);const f=(function(R,P){const O=BN(P);if(O===void 0)return null;for(const q of z_(R,O.fieldPath))switch(q.op){case"array-contains-any":return q.value.arrayValue.values||[];case"array-contains":return[q.value]}return null})(c,u),h=(function(R,P){const O=new Map;for(const q of hc(P))for(const D of z_(R,q.fieldPath))switch(D.op){case"==":case"in":O.set(q.fieldPath.canonicalString(),D.value);break;case"not-in":case"!=":return O.set(q.fieldPath.canonicalString(),D.value),Array.from(O.values())}return null})(c,u),g=(function(R,P){const O=[];let q=!0;for(const D of hc(P)){const L=D.kind===0?CF(R,D.fieldPath,R.startAt):IF(R,D.fieldPath,R.startAt);O.push(L.value),q&&(q=L.inclusive)}return new mu(O,q)})(c,u),_=(function(R,P){const O=[];let q=!0;for(const D of hc(P)){const L=D.kind===0?IF(R,D.fieldPath,R.endAt):CF(R,D.fieldPath,R.endAt);O.push(L.value),q&&(q=L.inclusive)}return new mu(O,q)})(c,u),T=this.On(u,c,g),E=this.On(u,c,_),b=this.Nn(u,c,h),S=this.Bn(u.indexId,f,T,g.inclusive,E,_.inclusive,b);return ae.forEach(S,(C=>r.Y(C,n.limit).next((R=>{R.forEach((P=>{const O=Me.fromSegments(P.documentKey);s.has(O)||(s=s.add(O),a.push(O))}))}))))})).next((()=>a))}return ae.resolve(null)}))}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=fge(Vt.create(e.filters,"and")).map((r=>JN(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,n),n)}Bn(e,n,r,i,o,s,a){const u=(n!=null?n.length:1)*Math.max(r.length,o.length),c=u/(n!=null?n.length:1),f=[];for(let h=0;h<u;++h){const g=n?this.Ln(n[h/c]):x0,_=this.kn(e,g,r[h%c],i),T=this.qn(e,g,o[h%c],s),E=a.map((b=>this.kn(e,g,b,!0)));f.push(...this.createRange(_,T,E))}return f}kn(e,n,r,i){const o=new Ec(e,Me.empty(),n,r);return i?o:o.An()}qn(e,n,r,i){const o=new Ec(e,Me.empty(),n,r);return i?o.An():o}xn(e,n){const r=new KF(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next((o=>{let s=null;for(const a of o)r.yn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s}))}getIndexType(e,n){let r=2;const i=this.Mn(n);return ae.forEach(i,(o=>this.xn(e,o).next((s=>{s?r!==0&&s.fields.length<(function(u){let c=new Ut(cn.comparator),f=!1;for(const h of u.filters)for(const g of h.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?f=!0:c=c.add(g.field));for(const h of u.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(f?1:0)})(o)&&(r=1):r=0})))).next((()=>(function(s){return s.limit!==null})(n)&&i.length>1&&r===2?1:r))}Qn(e,n){const r=new Em;for(const i of hc(e)){const o=n.data.field(i.fieldPath);if(o==null)return null;const s=r.Pn(i.kind);wc.Kt.Dt(o,s)}return r.un()}Ln(e){const n=new Em;return wc.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new Em;return wc.Kt.Dt(Hc(this.databaseId,n),r.Pn((function(o){const s=hc(o);return s.length===0?0:s[s.length-1].kind})(e))),r.un()}Nn(e,n,r){if(r===null)return[];let i=[];i.push(new Em);let o=0;for(const s of hc(e)){const a=r[o++];for(const u of i)if(this.Un(n,s.fieldPath)&&Ug(a))i=this.Kn(i,s,a);else{const c=u.Pn(s.kind);wc.Kt.Dt(a,c)}}return this.Wn(i)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const i=[...e],o=[];for(const s of r.arrayValue.values||[])for(const a of i){const u=new Em;u.seed(a.un()),wc.Kt.Dt(s,u.Pn(n.kind)),o.push(u)}return o}Un(e,n){return!!e.filters.find((r=>r instanceof vt&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,n){const r=Tm(e),i=hd(e);return(n?r.J(zN,IDBKeyRange.bound(n,n)):r.J()).next((o=>{const s=[];return ae.forEach(o,(a=>i.get([a.indexId,this.uid]).next((u=>{s.push((function(f,h){const g=h?new Ng(h.sequenceNumber,new Fi(Yc(h.readTime),new Me(Ms(h.documentKey)),h.largestBatchId)):Ng.empty(),_=f.fields.map((([T,E])=>new u_(cn.fromServerFormat(T),E)));return new V_(f.indexId,f.collectionGroup,_,g)})(a,u))})))).next((()=>s))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((n=>n.length===0?null:(n.sort(((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:rt(r.collectionGroup,i.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(e,n,r){const i=Tm(e),o=hd(e);return this.Gn(e).next((s=>i.J(zN,IDBKeyRange.bound(n,n)).next((a=>ae.forEach(a,(u=>o.put(BF(u.indexId,this.uid,s,r))))))))}updateIndexEntries(e,n){const r=new Map;return ae.forEach(n,((i,o)=>{const s=r.get(i.collectionGroup);return(s?ae.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next((a=>(r.set(i.collectionGroup,a),ae.forEach(a,(u=>this.zn(e,i,u).next((c=>{const f=this.jn(o,u);return c.isEqual(f)?ae.resolve():this.Jn(e,o,u,c,f)})))))))}))}Hn(e,n,r,i){return dd(e).put(i.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,i){return dd(e).delete(i.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const i=dd(e);let o=new Ut($l);return i.ee({index:fY,range:IDBKeyRange.only([r.indexId,this.uid,y_(this.$n(r,n))])},((s,a)=>{o=o.add(new Ec(r.indexId,n,jF(a.arrayValue),jF(a.directionalValue)))})).next((()=>o))}jn(e,n){let r=new Ut($l);const i=this.Qn(n,e);if(i==null)return r;const o=BN(n);if(o!=null){const s=e.data.field(o.fieldPath);if(Ug(s))for(const a of s.arrayValue.values||[])r=r.add(new Ec(n.indexId,e.key,this.Ln(a),i))}else r=r.add(new Ec(n.indexId,e.key,x0,i));return r}Jn(e,n,r,i,o){Ae(YF,"Updating index entries for document '%s'",n.key);const s=[];return(function(u,c,f,h,g){const _=u.getIterator(),T=c.getIterator();let E=cd(_),b=cd(T);for(;E||b;){let S=!1,C=!1;if(E&&b){const R=f(E,b);R<0?C=!0:R>0&&(S=!0)}else E!=null?C=!0:S=!0;S?(h(b),b=cd(T)):C?(g(E),E=cd(_)):(E=cd(_),b=cd(T))}})(i,o,$l,(a=>{s.push(this.Hn(e,n,r,a))}),(a=>{s.push(this.Yn(e,n,r,a))})),ae.waitFor(s)}Gn(e){let n=1;return hd(e).ee({index:cY,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,o)=>{o.done(),n=i.sequenceNumber+1})).next((()=>n))}createRange(e,n,r){r=r.sort(((s,a)=>$l(s,a))).filter(((s,a,u)=>!a||$l(s,u[a-1])!==0));const i=[];i.push(e);for(const s of r){const a=$l(s,e),u=$l(s,n);if(a===0)i[0]=e.An();else if(a>0&&u<0)i.push(s),i.push(s.An());else if(u>0)break}i.push(n);const o=[];for(let s=0;s<i.length;s+=2){if(this.Zn(i[s],i[s+1]))return[];const a=i[s].Vn(this.uid,x0,Me.empty()),u=i[s+1].Vn(this.uid,x0,Me.empty());o.push(IDBKeyRange.bound(a,u))}return o}Zn(e,n){return $l(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(XF)}getMinOffset(e,n){return ae.mapArray(this.Mn(n),(r=>this.xn(e,r).next((i=>i||Fe(44426))))).next(XF)}}function JF(t){return tr(t,Og)}function dd(t){return tr(t,dg)}function Tm(t){return tr(t,xD)}function hd(t){return tr(t,fg)}function XF(t){je(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;wD(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Fi(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gJ=41943040;class Ur{static withCacheSize(e){return new Ur(e,Ur.DEFAULT_COLLECTION_PERCENTILE,Ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yJ(t,e,n){const r=t.store(Bo),i=t.store(Xd),o=[],s=IDBKeyRange.only(n.batchId);let a=0;const u=r.ee({range:s},((f,h,g)=>(a++,g.delete())));o.push(u.next((()=>{je(a===1,47070,{batchId:n.batchId})})));const c=[];for(const f of n.mutations){const h=aY(e,f.key.path,n.batchId);o.push(i.delete(h)),c.push(f.key)}return ae.waitFor(o).next((()=>c))}function K_(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Fe(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ur.DEFAULT_COLLECTION_PERCENTILE=10,Ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ur.DEFAULT=new Ur(gJ,Ur.DEFAULT_COLLECTION_PERCENTILE,Ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ur.DISABLED=new Ur(-1,0,0);class Sw{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,n,r,i){je(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new Sw(o,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return zl(e).ee({index:Sc,range:r},((i,o,s)=>{n=!1,s.done()})).next((()=>n))}addMutationBatch(e,n,r,i){const o=Sd(e),s=zl(e);return s.add({}).next((a=>{je(typeof a=="number",49019);const u=new kD(a,n,r,i),c=(function(_,T,E){const b=E.baseMutations.map((C=>Bg(_.yt,C))),S=E.mutations.map((C=>Bg(_.yt,C)));return{userId:T,batchId:E.batchId,localWriteTimeMs:E.localWriteTime.toMillis(),baseMutations:b,mutations:S}})(this.serializer,this.userId,u),f=[];let h=new Ut(((g,_)=>rt(g.canonicalString(),_.canonicalString())));for(const g of i){const _=aY(this.userId,g.key.path,a);h=h.add(g.key.path.popLast()),f.push(s.put(c)),f.push(o.put(_,Kpe))}return h.forEach((g=>{f.push(this.indexManager.addToCollectionParentIndex(e,g))})),e.addOnCommittedListener((()=>{this.Xn[a]=u.keys()})),ae.waitFor(f).next((()=>u))}))}lookupMutationBatch(e,n){return zl(e).get(n).next((r=>r?(je(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),bc(this.serializer,r)):null))}er(e,n){return this.Xn[n]?ae.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next((r=>{if(r){const i=r.keys();return this.Xn[n]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return zl(e).ee({index:Sc,range:i},((s,a,u)=>{a.userId===this.userId&&(je(a.batchId>=r,47524,{tr:r}),o=bc(this.serializer,a)),u.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=iu;return zl(e).ee({index:Sc,range:n,reverse:!0},((i,o,s)=>{r=o.batchId,s.done()})).next((()=>r))}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,iu],[this.userId,Number.POSITIVE_INFINITY]);return zl(e).J(Sc,n).next((r=>r.map((i=>bc(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=c_(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return Sd(e).ee({range:i},((s,a,u)=>{const[c,f,h]=s,g=Ms(f);if(c===this.userId&&n.path.isEqual(g))return zl(e).get(h).next((_=>{if(!_)throw Fe(61480,{nr:s,batchId:h});je(_.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:_.userId,batchId:h}),o.push(bc(this.serializer,_))}));u.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ut(rt);const i=[];return n.forEach((o=>{const s=c_(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=Sd(e).ee({range:a},((c,f,h)=>{const[g,_,T]=c,E=Ms(_);g===this.userId&&o.path.isEqual(E)?r=r.add(T):h.done()}));i.push(u)})),ae.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,o=c_(this.userId,r),s=IDBKeyRange.lowerBound(o);let a=new Ut(rt);return Sd(e).ee({range:s},((u,c,f)=>{const[h,g,_]=u,T=Ms(g);h===this.userId&&r.isPrefixOf(T)?T.length===i&&(a=a.add(_)):f.done()})).next((()=>this.rr(e,a)))}rr(e,n){const r=[],i=[];return n.forEach((o=>{i.push(zl(e).get(o).next((s=>{if(s===null)throw Fe(35274,{batchId:o});je(s.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:s.userId,batchId:o}),r.push(bc(this.serializer,s))})))})),ae.waitFor(i).next((()=>r))}removeMutationBatch(e,n){return yJ(e.le,this.userId,n).next((r=>(e.addOnCommittedListener((()=>{this.ir(n.batchId)})),ae.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((n=>{if(!n)return ae.resolve();const r=IDBKeyRange.lowerBound((function(s){return[s]})(this.userId)),i=[];return Sd(e).ee({range:r},((o,s,a)=>{if(o[0]===this.userId){const u=Ms(o[1]);i.push(u)}else a.done()})).next((()=>{je(i.length===0,56720,{sr:i.map((o=>o.canonicalString()))})}))}))}containsKey(e,n){return vJ(e,this.userId,n)}_r(e){return _J(e).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:iu,lastStreamToken:""}))}}function vJ(t,e,n){const r=c_(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return Sd(t).ee({range:o,X:!0},((a,u,c)=>{const[f,h,g]=a;f===e&&h===i&&(s=!0),c.done()})).next((()=>s))}function zl(t){return tr(t,Bo)}function Sd(t){return tr(t,Xd)}function _J(t){return tr(t,Dg)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Jc(0)}static cr(){return new Jc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pge{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next((n=>{const r=new Jc(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((n=>We.fromTimestamp(new Nt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(e,n,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.hr(e,i))))}addTargetData(e,n){return this.Pr(e,n).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next((()=>pd(e).delete(n.targetId))).next((()=>this.lr(e))).next((r=>(je(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,n,r){let i=0;const o=[];return pd(e).ee(((s,a)=>{const u=Km(a);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))})).next((()=>ae.waitFor(o))).next((()=>i))}forEachTarget(e,n){return pd(e).ee(((r,i)=>{const o=Km(i);n(o)}))}lr(e){return ZF(e).get(F_).next((n=>(je(n!==null,2888),n)))}hr(e,n){return ZF(e).put(F_,n)}Pr(e,n){return pd(e).put(hJ(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((n=>n.targetCount))}getTargetData(e,n){const r=Gc(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return pd(e).ee({range:i,index:uY},((s,a,u)=>{const c=Km(a);Ey(n,c.target)&&(o=c,u.done())})).next((()=>o))}addMatchingKeys(e,n,r){const i=[],o=Yl(e);return n.forEach((s=>{const a=zr(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))})),ae.waitFor(i)}removeMatchingKeys(e,n,r){const i=Yl(e);return ae.forEach(n,(o=>{const s=zr(o.path);return ae.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])}))}removeMatchingKeysForTargetId(e,n){const r=Yl(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Yl(e);let o=ut();return i.ee({range:r,X:!0},((s,a,u)=>{const c=Ms(s[1]),f=new Me(c);o=o.add(f)})).next((()=>o))}containsKey(e,n){const r=zr(n.path),i=IDBKeyRange.bound([r],[XW(r)],!1,!0);let o=0;return Yl(e).ee({index:TD,X:!0,range:i},(([s,a],u,c)=>{s!==0&&(o++,c.done())})).next((()=>o>0))}At(e,n){return pd(e).get(n).next((r=>r?Km(r):null))}}function pd(t){return tr(t,Qd)}function ZF(t){return tr(t,kc)}function Yl(t){return tr(t,Zd)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3="LruGarbageCollector",mge=1048576;function t3([t,e],[n,r]){const i=rt(t,n);return i===0?rt(e,r):i}class gge{constructor(e){this.Ir=e,this.buffer=new Ut(t3),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();t3(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class bJ{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ae(e3,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){xu(n)?Ae(e3,"Ignoring IndexedDB error during garbage collection: ",n):await Tu(n)}await this.Vr(3e5)}))}}class yge{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return ae.resolve(di.ce);const r=new gge(n);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ae("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(QF)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),QF):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,o,s,a,u,c;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((h=>(h>this.params.maximumSequenceNumbersToCollect?(Ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,s=Date.now(),this.nthSequenceNumber(e,i)))).next((h=>(r=h,a=Date.now(),this.removeTargets(e,r,n)))).next((h=>(o=h,u=Date.now(),this.removeOrphanedDocuments(e,r)))).next((h=>(c=Date.now(),wd()<=gt.DEBUG&&Ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${h} documents in `+(c-u)+`ms
Total Duration: ${c-f}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:h}))))}}function wJ(t,e){return new yge(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vge{constructor(e,n){this.db=e,this.garbageCollector=wJ(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,((r,i)=>n(i)))}addReference(e,n,r){return S0(e,r)}removeReference(e,n,r){return S0(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return S0(e,n)}br(e,n){return(function(i,o){let s=!1;return _J(i).te((a=>vJ(i,a,o).next((u=>(u&&(s=!0),ae.resolve(!u)))))).next((()=>s))})(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Sr(e,((s,a)=>{if(a<=n){const u=this.br(e,s).next((c=>{if(!c)return o++,r.getEntry(e,s).next((()=>(r.removeEntry(s,We.min()),Yl(e).delete((function(h){return[0,zr(h.path)]})(s)))))}));i.push(u)}})).next((()=>ae.waitFor(i))).next((()=>r.apply(e))).next((()=>o))}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return S0(e,n)}Sr(e,n){const r=Yl(e);let i,o=di.ce;return r.ee({index:TD},(([s,a],{path:u,sequenceNumber:c})=>{s===0?(o!==di.ce&&n(new Me(Ms(i)),o),o=c,i=u):o=di.ce})).next((()=>{o!==di.ce&&n(new Me(Ms(i)),o)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function S0(t,e){return Yl(t).put((function(r,i){return{targetId:0,path:zr(r.path),sequenceNumber:i}})(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EJ{constructor(){this.changes=new Ja((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,nn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ae.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ge{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return cc(e).put(r)}removeEntry(e,n,r){return cc(e).delete((function(o,s){const a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],G_(s),a[a.length-1]]})(n,r))}updateMetadata(e,n){return this.getMetadata(e).next((r=>(r.byteSize+=n,this.Dr(e,r))))}getEntry(e,n){let r=nn.newInvalidDocument(n);return cc(e).ee({index:f_,range:IDBKeyRange.only(xm(n))},((i,o)=>{r=this.Cr(n,o)})).next((()=>r))}vr(e,n){let r={size:0,document:nn.newInvalidDocument(n)};return cc(e).ee({index:f_,range:IDBKeyRange.only(xm(n))},((i,o)=>{r={document:this.Cr(n,o),size:K_(o)}})).next((()=>r))}getEntries(e,n){let r=pi();return this.Fr(e,n,((i,o)=>{const s=this.Cr(i,o);r=r.insert(i,s)})).next((()=>r))}Mr(e,n){let r=pi(),i=new Qt(Me.comparator);return this.Fr(e,n,((o,s)=>{const a=this.Cr(o,s);r=r.insert(o,a),i=i.insert(o,K_(s))})).next((()=>({documents:r,Or:i})))}Fr(e,n,r){if(n.isEmpty())return ae.resolve();let i=new Ut(i3);n.forEach((u=>i=i.add(u)));const o=IDBKeyRange.bound(xm(i.first()),xm(i.last())),s=i.getIterator();let a=s.getNext();return cc(e).ee({index:f_,range:o},((u,c,f)=>{const h=Me.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&i3(a,h)<0;)r(a,null),a=s.getNext();a&&a.isEqual(h)&&(r(a,c),a=s.hasNext()?s.getNext():null),a?f.j(xm(a)):f.done()})).next((()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,n,r,i,o){const s=n.path,a=[s.popLast().toArray(),s.lastSegment(),G_(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return cc(e).J(IDBKeyRange.bound(a,u,!0)).next((c=>{o==null||o.incrementDocumentReadCount(c.length);let f=pi();for(const h of c){const g=this.Cr(Me.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);g.isFoundDocument()&&(xy(n,g)||i.has(g.key))&&(f=f.insert(g.key,g))}return f}))}getAllFromCollectionGroup(e,n,r,i){let o=pi();const s=r3(n,r),a=r3(n,Fi.max());return cc(e).ee({index:lY,range:IDBKeyRange.bound(s,a,!0)},((u,c,f)=>{const h=this.Cr(Me.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);o=o.insert(h.key,h),o.size===i&&f.done()})).next((()=>o))}newChangeBuffer(e){return new bge(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((n=>n.byteSize))}getMetadata(e){return n3(e).get($N).next((n=>(je(!!n,20021),n)))}Dr(e,n){return n3(e).put($N,n)}Cr(e,n){if(n){const r=ige(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(We.min())))return r}return nn.newInvalidDocument(e)}}function TJ(t){return new _ge(t)}class bge extends EJ{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Ja((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const n=[];let r=0,i=new Ut(((o,s)=>rt(o.canonicalString(),s.canonicalString())));return this.changes.forEach(((o,s)=>{const a=this.Br.get(o);if(n.push(this.Nr.removeEntry(e,o,a.readTime)),s.isValidDocument()){const u=qF(this.Nr.serializer,s);i=i.add(o.path.popLast());const c=K_(u);r+=c-a.size,n.push(this.Nr.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){const u=qF(this.Nr.serializer,s.convertToNoDocument(We.min()));n.push(this.Nr.addEntry(e,o,u))}})),i.forEach((o=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,o))})),n.push(this.Nr.updateMetadata(e,r)),ae.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next((r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next((({documents:r,Or:i})=>(i.forEach(((o,s)=>{this.Br.set(o,{size:s,readTime:r.get(o).readTime})})),r)))}}function n3(t){return tr(t,kg)}function cc(t){return tr(t,q_)}function xm(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function r3(t,e){const n=e.documentKey.path.toArray();return[t,G_(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function i3(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=rt(n[o],r[o]),i)return i;return i=rt(n.length,r.length),i||(i=rt(n[n.length-2],r[r.length-2]),i||rt(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wge{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xJ{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&mg(r.mutation,i,hi.empty(),Nt.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,ut()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=ut()){const i=Ds();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((o=>{let s=Gm();return o.forEach(((a,u)=>{s=s.insert(a,u.overlayedDocument)})),s}))))}getOverlayedDocuments(e,n){const r=Ds();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,ut())))}populateOverlays(e,n,r){const i=[];return r.forEach((o=>{n.has(o)||i.push(o)})),this.documentOverlayCache.getOverlays(e,i).next((o=>{o.forEach(((s,a)=>{n.set(s,a)}))}))}computeViews(e,n,r,i){let o=pi();const s=pg(),a=(function(){return pg()})();return n.forEach(((u,c)=>{const f=r.get(c.key);i.has(c.key)&&(f===void 0||f.mutation instanceof Xa)?o=o.insert(c.key,c):f!==void 0?(s.set(c.key,f.mutation.getFieldMask()),mg(f.mutation,c,f.mutation.getFieldMask(),Nt.now())):s.set(c.key,hi.empty())})),this.recalculateAndSaveOverlays(e,o).next((u=>(u.forEach(((c,f)=>s.set(c,f))),n.forEach(((c,f)=>a.set(c,new wge(f,s.get(c)??null)))),a)))}recalculateAndSaveOverlays(e,n){const r=pg();let i=new Qt(((s,a)=>s-a)),o=ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((s=>{for(const a of s)a.keys().forEach((u=>{const c=n.get(u);if(c===null)return;let f=r.get(u)||hi.empty();f=a.applyToLocalView(c,f),r.set(u,f);const h=(i.get(a.batchId)||ut()).add(u);i=i.insert(a.batchId,h)}))})).next((()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,f=u.value,h=FY();f.forEach((g=>{if(!o.has(g)){const _=KY(n.get(g),r.get(g));_!==null&&h.set(g,_),o=o.add(g)}})),s.push(this.documentOverlayCache.saveOverlays(e,c,h))}return ae.waitFor(s)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return Me.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):PD(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):ae.resolve(Ds());let a=Jd,u=o;return s.next((c=>ae.forEach(c,((f,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),o.get(f)?ae.resolve():this.remoteDocumentCache.getEntry(e,f).next((g=>{u=u.insert(f,g)}))))).next((()=>this.populateOverlays(e,c,o))).next((()=>this.computeViews(e,u,c,ut()))).next((f=>({batchId:a,changes:qY(f)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Me(n)).next((r=>{let i=Gm();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=Gm();return this.indexManager.getCollectionParents(e,o).next((a=>ae.forEach(a,(u=>{const c=(function(h,g){return new Ya(g,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)})(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next((f=>{f.forEach(((h,g)=>{s=s.insert(h,g)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i)))).next((s=>{o.forEach(((u,c)=>{const f=c.getKey();s.get(f)===null&&(s=s.insert(f,nn.newInvalidDocument(f)))}));let a=Gm();return s.forEach(((u,c)=>{const f=o.get(u);f!==void 0&&mg(f.mutation,c,hi.empty(),Nt.now()),xy(n,c)&&(a=a.insert(u,c))})),a}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ege{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ae.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Un(i.createTime)}})(n)),ae.resolve()}getNamedQuery(e,n){return ae.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:qD(i.bundledQuery),readTime:Un(i.readTime)}})(n)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tge{constructor(){this.overlays=new Qt(Me.comparator),this.qr=new Map}getOverlay(e,n){return ae.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ds();return ae.forEach(n,(i=>this.getOverlay(e,i).next((o=>{o!==null&&r.set(i,o)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,o)=>{this.St(e,n,o)})),ae.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(r)),ae.resolve()}getOverlaysForCollection(e,n,r){const i=Ds(),o=n.length+1,s=new Me(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return ae.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Qt(((c,f)=>c-f));const s=this.overlays.getIterator();for(;s.hasNext();){const c=s.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let f=o.get(c.largestBatchId);f===null&&(f=Ds(),o=o.insert(c.largestBatchId,f)),f.set(c.getKey(),c)}}const a=Ds(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((c,f)=>a.set(c,f))),!(a.size()>=i)););return ae.resolve(a)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new LD(n,r));let o=this.qr.get(n);o===void 0&&(o=ut(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xge{constructor(){this.sessionToken=Cn.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(){this.Qr=new Ut(ur.$r),this.Ur=new Ut(ur.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new ur(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new ur(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new Me(new yt([])),r=new ur(n,e),i=new ur(n,e+1),o=[];return this.Ur.forEachInRange([r,i],(s=>{this.Gr(s),o.push(s.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Me(new yt([])),r=new ur(n,e),i=new ur(n,e+1);let o=ut();return this.Ur.forEachInRange([r,i],(s=>{o=o.add(s.key)})),o}containsKey(e){const n=new ur(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ur{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Me.comparator(e.key,n.key)||rt(e.Yr,n.Yr)}static Kr(e,n){return rt(e.Yr,n.Yr)||Me.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sge{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ut(ur.$r)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new kD(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.Zr=this.Zr.add(new ur(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ae.resolve(s)}lookupMutationBatch(e,n){return ae.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),o=i<0?0:i;return ae.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?iu:this.tr-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ur(n,0),i=new ur(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],(s=>{const a=this.Xr(s.Yr);o.push(a)})),ae.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ut(rt);return n.forEach((i=>{const o=new ur(i,0),s=new ur(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],(a=>{r=r.add(a.Yr)}))})),ae.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;Me.isDocumentKey(o)||(o=o.child(""));const s=new ur(new Me(o),0);let a=new Ut(rt);return this.Zr.forEachWhile((u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.Yr)),!0)}),s),ae.resolve(this.ti(a))}ti(e){const n=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){je(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ae.forEach(n.mutations,(i=>{const o=new ur(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new ur(n,0),i=this.Zr.firstAfterOrEqual(r);return ae.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Age{constructor(e){this.ri=e,this.docs=(function(){return new Qt(Me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ae.resolve(r?r.document.mutableCopy():nn.newInvalidDocument(n))}getEntries(e,n){let r=pi();return n.forEach((i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():nn.newInvalidDocument(i))})),ae.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=pi();const s=n.path,a=new Me(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:f}}=u.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||wD(nY(f),r)<=0||(i.has(f.key)||xy(n,f))&&(o=o.insert(f.key,f.mutableCopy()))}return ae.resolve(o)}getAllFromCollectionGroup(e,n,r,i){Fe(9500)}ii(e,n){return ae.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new Cge(this)}getSize(e){return ae.resolve(this.size)}}class Cge extends EJ{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),ae.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ige{constructor(e){this.persistence=e,this.si=new Ja((n=>Gc(n)),Ey),this.lastRemoteSnapshotVersion=We.min(),this.highestTargetId=0,this.oi=0,this._i=new $D,this.targetCount=0,this.ai=Jc.ur()}forEachTarget(e,n){return this.si.forEach(((r,i)=>n(i))),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),ae.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Jc(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ae.resolve()}updateTargetData(e,n){return this.Pr(n),ae.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.si.forEach(((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)})),ae.waitFor(o).next((()=>i))}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return ae.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),ae.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach((s=>{o.push(i.markPotentiallyOrphaned(e,s))})),ae.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ae.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return ae.resolve(r)}containsKey(e,n){return ae.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(e,n){this.ui={},this.overlays={},this.ci=new di(0),this.li=!1,this.li=!0,this.hi=new xge,this.referenceDelegate=e(this),this.Pi=new Ige(this),this.indexManager=new dge,this.remoteDocumentCache=(function(i){return new Age(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new dJ(n),this.Ii=new Ege(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Tge,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Sge(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Ae("MemoryPersistence","Starting transaction:",e);const i=new Rge(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((o=>this.referenceDelegate.di(i).next((()=>o)))).toPromise().then((o=>(i.raiseOnCommittedEvent(),o)))}Ai(e,n){return ae.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class Rge extends iY{constructor(e){super(),this.currentSequenceNumber=e}}class Aw{constructor(e){this.persistence=e,this.Ri=new $D,this.Vi=null}static mi(e){return new Aw(e)}get fi(){if(this.Vi)return this.Vi;throw Fe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),ae.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),ae.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ae.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((o=>this.fi.add(o.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.fi,(r=>{const i=Me.fromPath(r);return this.gi(e,i).next((o=>{o||n.removeEntry(i,We.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ae.or([()=>ae.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class W_{constructor(e,n){this.persistence=e,this.pi=new Ja((r=>zr(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=wJ(this,n)}static mi(e,n){return new W_(e,n)}Ei(){}di(e){return ae.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return ae.forEach(this.pi,((r,i)=>this.br(e,r,i).next((o=>o?ae.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,(s=>this.br(e,s,n).next((a=>{a||(r++,o.removeEntry(s,We.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ae.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),ae.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),ae.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ae.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=h_(e.data.value)),n}br(e,n,r){return ae.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return ae.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pge{constructor(e){this.serializer=e}k(e,n,r,i){const o=new mw("createOrUpgrade",n);r<1&&i>=1&&((function(u){u.createObjectStore(wy)})(e),(function(u){u.createObjectStore(Dg,{keyPath:jpe}),u.createObjectStore(Bo,{keyPath:mF,autoIncrement:!0}).createIndex(Sc,gF,{unique:!0}),u.createObjectStore(Xd)})(e),o3(e),(function(u){u.createObjectStore(pc)})(e));let s=ae.resolve();return r<3&&i>=3&&(r!==0&&((function(u){u.deleteObjectStore(Zd),u.deleteObjectStore(Qd),u.deleteObjectStore(kc)})(e),o3(e)),s=s.next((()=>(function(u){const c=u.store(kc),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:We.min().toTimestamp(),targetCount:0};return c.put(F_,f)})(o)))),r<4&&i>=4&&(r!==0&&(s=s.next((()=>(function(u,c){return c.store(Bo).J().next((h=>{u.deleteObjectStore(Bo),u.createObjectStore(Bo,{keyPath:mF,autoIncrement:!0}).createIndex(Sc,gF,{unique:!0});const g=c.store(Bo),_=h.map((T=>g.put(T)));return ae.waitFor(_)}))})(e,o)))),s=s.next((()=>{(function(u){u.createObjectStore(eh,{keyPath:tme})})(e)}))),r<5&&i>=5&&(s=s.next((()=>this.yi(o)))),r<6&&i>=6&&(s=s.next((()=>((function(u){u.createObjectStore(kg)})(e),this.wi(o))))),r<7&&i>=7&&(s=s.next((()=>this.Si(o)))),r<8&&i>=8&&(s=s.next((()=>this.bi(e,o)))),r<9&&i>=9&&(s=s.next((()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(s=s.next((()=>this.Di(o)))),r<11&&i>=11&&(s=s.next((()=>{(function(u){u.createObjectStore(gw,{keyPath:nme})})(e),(function(u){u.createObjectStore(yw,{keyPath:rme})})(e)}))),r<12&&i>=12&&(s=s.next((()=>{(function(u){const c=u.createObjectStore(vw,{keyPath:cme});c.createIndex(HN,fme,{unique:!1}),c.createIndex(dY,dme,{unique:!1})})(e)}))),r<13&&i>=13&&(s=s.next((()=>(function(u){const c=u.createObjectStore(q_,{keyPath:Wpe});c.createIndex(f_,Ype),c.createIndex(lY,Jpe)})(e))).next((()=>this.Ci(e,o))).next((()=>e.deleteObjectStore(pc)))),r<14&&i>=14&&(s=s.next((()=>this.Fi(e,o)))),r<15&&i>=15&&(s=s.next((()=>(function(u){u.createObjectStore(xD,{keyPath:ime,autoIncrement:!0}).createIndex(zN,ome,{unique:!1}),u.createObjectStore(fg,{keyPath:sme}).createIndex(cY,ame,{unique:!1}),u.createObjectStore(dg,{keyPath:lme}).createIndex(fY,ume,{unique:!1})})(e)))),r<16&&i>=16&&(s=s.next((()=>{n.objectStore(fg).clear()})).next((()=>{n.objectStore(dg).clear()}))),r<17&&i>=17&&(s=s.next((()=>{(function(u){u.createObjectStore(SD,{keyPath:hme})})(e)}))),r<18&&i>=18&&PK()&&(s=s.next((()=>{n.objectStore(fg).clear()})).next((()=>{n.objectStore(dg).clear()}))),s}wi(e){let n=0;return e.store(pc).ee(((r,i)=>{n+=K_(i)})).next((()=>{const r={byteSize:n};return e.store(kg).put($N,r)}))}yi(e){const n=e.store(Dg),r=e.store(Bo);return n.J().next((i=>ae.forEach(i,(o=>{const s=IDBKeyRange.bound([o.userId,iu],[o.userId,o.lastAcknowledgedBatchId]);return r.J(Sc,s).next((a=>ae.forEach(a,(u=>{je(u.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:u.batchId});const c=bc(this.serializer,u);return yJ(e,o.userId,c).next((()=>{}))}))))}))))}Si(e){const n=e.store(Zd),r=e.store(pc);return e.store(kc).get(F_).next((i=>{const o=[];return r.ee(((s,a)=>{const u=new yt(s),c=(function(h){return[0,zr(h)]})(u);o.push(n.get(c).next((f=>f?ae.resolve():(h=>n.put({targetId:0,path:zr(h),sequenceNumber:i.highestListenSequenceNumber}))(u))))})).next((()=>ae.waitFor(o)))}))}bi(e,n){e.createObjectStore(Og,{keyPath:eme});const r=n.store(Og),i=new BD,o=s=>{if(i.add(s)){const a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:zr(u)})}};return n.store(pc).ee({X:!0},((s,a)=>{const u=new yt(s);return o(u.popLast())})).next((()=>n.store(Xd).ee({X:!0},(([s,a,u],c)=>{const f=Ms(a);return o(f.popLast())}))))}Di(e){const n=e.store(Qd);return n.ee(((r,i)=>{const o=Km(i),s=hJ(this.serializer,o);return n.put(s)}))}Ci(e,n){const r=n.store(pc),i=[];return r.ee(((o,s)=>{const a=n.store(q_),u=(function(h){return h.document?new Me(yt.fromString(h.document.name).popFirst(5)):h.noDocument?Me.fromSegments(h.noDocument.path):h.unknownDocument?Me.fromSegments(h.unknownDocument.path):Fe(36783)})(s).path.toArray(),c={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(c))})).next((()=>ae.waitFor(i)))}Fi(e,n){const r=n.store(Bo),i=TJ(this.serializer),o=new zD(Aw.mi,this.serializer.yt);return r.J().next((s=>{const a=new Map;return s.forEach((u=>{let c=a.get(u.userId)??ut();bc(this.serializer,u).keys().forEach((f=>c=c.add(f))),a.set(u.userId,c)})),ae.forEach(a,((u,c)=>{const f=new fr(c),h=xw.wt(this.serializer,f),g=o.getIndexManager(f),_=Sw.wt(f,this.serializer,g,o.referenceDelegate);return new xJ(i,_,h,g).recalculateAndSaveOverlaysForDocumentKeys(new GN(n,di.ce),u).next()}))}))}}function o3(t){t.createObjectStore(Zd,{keyPath:Qpe}).createIndex(TD,Zpe,{unique:!0}),t.createObjectStore(Qd,{keyPath:"targetId"}).createIndex(uY,Xpe,{unique:!0}),t.createObjectStore(kc)}const Hl="IndexedDbPersistence",lS=18e5,uS=5e3,cS="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",SJ="main";class HD{constructor(e,n,r,i,o,s,a,u,c,f,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=o,this.window=s,this.document=a,this.xi=c,this.Oi=f,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=g=>Promise.resolve(),!HD.v())throw new Se(pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new vge(this,i),this.$i=n+SJ,this.serializer=new dJ(u),this.Ui=new Os(this.$i,this.Ni,new Pge(this.serializer)),this.hi=new sge,this.Pi=new pge(this.referenceDelegate,this.serializer),this.remoteDocumentCache=TJ(this.serializer),this.Ii=new oge,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,f===!1&&Vn(Hl,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Se(pe.FAILED_PRECONDITION,cS);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new di(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async n=>{n.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>A0(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((n=>this.isPrimary&&!n?this.Zi(e).next((()=>!1)):!!n&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(xu(e))return Ae(Hl,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ae(Hl,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Sm(e).get(ud).next((n=>ae.resolve(this.es(n))))}ts(e){return A0(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,lS)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const r=tr(n,eh);return r.J().next((i=>{const o=this.ss(i,lS),s=i.filter((a=>o.indexOf(a)===-1));return ae.forEach(s,(a=>r.delete(a.clientId))).next((()=>s))}))})).catch((()=>[]));if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?ae.resolve(!0):Sm(e).get(ud).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,uS)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new Se(pe.FAILED_PRECONDITION,cS);return!1}}return!(!this.networkEnabled||!this.inForeground)||A0(e).J().next((r=>this.ss(r,uS).find((i=>{if(this.clientId!==i.clientId){const o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&Ae(Hl,`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[wy,eh],(e=>{const n=new GN(e,di.ce);return this.Zi(n).next((()=>this.ts(n)))})),this.Ui.close(),this.Ps()}ss(e,n){return e.filter((r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>A0(e).J().next((n=>this.ss(n,lS).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return Sw.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new hge(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return xw.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){Ae(Hl,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",o=(function(u){return u===18?gme:u===17?gY:u===16?mme:u===15?AD:u===14?mY:u===13?pY:u===12?pme:u===11?hY:void Fe(60245)})(this.Ni);let s;return this.Ui.runTransaction(e,i,o,(a=>(s=new GN(a,this.ci?this.ci.next():di.ce),n==="readwrite-primary"?this.Hi(s).next((u=>!!u||this.Yi(s))).next((u=>{if(!u)throw Vn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new Se(pe.FAILED_PRECONDITION,rY);return r(s)})).next((u=>this.Xi(s).next((()=>u)))):this.Is(s).next((()=>r(s)))))).then((a=>(s.raiseOnCommittedEvent(),a)))}Is(e){return Sm(e).get(ud).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,uS)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Se(pe.FAILED_PRECONDITION,cS)}))}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Sm(e).put(ud,n)}static v(){return Os.v()}Zi(e){const n=Sm(e);return n.get(ud).next((r=>this.es(r)?(Ae(Hl,"Releasing primary lease."),n.delete(ud)):ae.resolve()))}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Vn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;RK()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return Ae(Hl,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Vn(Hl,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Vn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Sm(t){return tr(t,wy)}function A0(t){return tr(t,eh)}function GD(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=ut(),i=ut();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new jD(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nge{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AJ{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return RK()?8:oY(_n())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.ys(e,n).next((s=>{o.result=s})).next((()=>{if(!o.result)return this.ws(e,n,i,r).next((s=>{o.result=s}))})).next((()=>{if(o.result)return;const s=new Nge;return this.Ss(e,n,s).next((a=>{if(o.result=a,this.Vs)return this.bs(e,n,s,a.size)}))})).next((()=>o.result))}bs(e,n,r,i){return r.documentReadCount<this.fs?(wd()<=gt.DEBUG&&Ae("QueryEngine","SDK will not create cache indexes for query:",Ed(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ae.resolve()):(wd()<=gt.DEBUG&&Ae("QueryEngine","Query:",Ed(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(wd()<=gt.DEBUG&&Ae("QueryEngine","The SDK decides to create cache indexes for query:",Ed(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ni(n))):ae.resolve())}ys(e,n){if(RF(n))return ae.resolve(null);let r=ni(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=H_(n,null,"F"),r=ni(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const s=ut(...o);return this.ps.getDocuments(e,s).next((a=>this.indexManager.getMinOffset(e,r).next((u=>{const c=this.Ds(n,a);return this.Cs(n,c,s,u.readTime)?this.ys(e,H_(n,null,"F")):this.vs(e,c,n,u)}))))})))))}ws(e,n,r,i){return RF(n)||i.isEqual(We.min())?ae.resolve(null):this.ps.getDocuments(e,r).next((o=>{const s=this.Ds(n,o);return this.Cs(n,s,r,i)?ae.resolve(null):(wd()<=gt.DEBUG&&Ae("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ed(n)),this.vs(e,s,n,tY(i,Jd)).next((a=>a)))}))}Ds(e,n){let r=new Ut(VY(e));return n.forEach(((i,o)=>{xy(e,o)&&(r=r.add(o))})),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,r){return wd()<=gt.DEBUG&&Ae("QueryEngine","Using full collection scan to execute query:",Ed(n)),this.ps.getDocumentsMatchingQuery(e,n,Fi.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((o=>(n.forEach((s=>{o=o.insert(s.key,s)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD="LocalStore",Mge=3e8;class Dge{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Qt(rt),this.xs=new Ja((o=>Gc(o)),Ey),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xJ(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function CJ(t,e,n,r){return new Dge(t,e,n,r)}async function IJ(t,e){const n=De(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((o=>(i=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((o=>{const s=[],a=[];let u=ut();for(const c of i){s.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}for(const c of o){a.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next((c=>({Ls:c,removedBatchIds:s,addedBatchIds:a})))}))}))}function kge(t,e){const n=De(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,u,c,f){const h=c.batch,g=h.keys();let _=ae.resolve();return g.forEach((T=>{_=_.next((()=>f.getEntry(u,T))).next((E=>{const b=c.docVersions.get(T);je(b!==null,48541),E.version.compareTo(b)<0&&(h.applyToRemoteDocument(E,c),E.isValidDocument()&&(E.setReadTime(c.commitVersion),f.addEntry(E)))}))})),_.next((()=>a.mutationQueue.removeMutationBatch(u,h)))})(n,r,e,o).next((()=>o.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let u=ut();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function RJ(t){const e=De(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function Oge(t,e){const n=De(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];e.targetChanges.forEach(((f,h)=>{const g=i.get(h);if(!g)return;a.push(n.Pi.removeMatchingKeys(o,f.removedDocuments,h).next((()=>n.Pi.addMatchingKeys(o,f.addedDocuments,h))));let _=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(h)!==null?_=_.withResumeToken(Cn.EMPTY_BYTE_STRING,We.min()).withLastLimboFreeSnapshotVersion(We.min()):f.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(f.resumeToken,r)),i=i.insert(h,_),(function(E,b,S){return E.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=Mge?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0})(g,_,f)&&a.push(n.Pi.updateTargetData(o,_))}));let u=pi(),c=ut();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,f))})),a.push(PJ(o,s,e.documentUpdates).next((f=>{u=f.ks,c=f.qs}))),!r.isEqual(We.min())){const f=n.Pi.getLastRemoteSnapshotVersion(o).next((h=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r)));a.push(f)}return ae.waitFor(a).next((()=>s.apply(o))).next((()=>n.localDocuments.getLocalViewOfDocuments(o,u,c))).next((()=>u))})).then((o=>(n.Ms=i,o)))}function PJ(t,e,n){let r=ut(),i=ut();return n.forEach((o=>r=r.add(o))),e.getEntries(t,r).next((o=>{let s=pi();return n.forEach(((a,u)=>{const c=o.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(We.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):Ae(KD,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)})),{ks:s,qs:i}}))}function Lge(t,e){const n=De(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=iu),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function ah(t,e){const n=De(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Pi.getTargetData(r,e).next((o=>o?(i=o,ae.resolve(i)):n.Pi.allocateTargetId(r).next((s=>(i=new Ea(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function lh(t,e,n){const r=De(t),i=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!xu(s))throw s;Ae(KD,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Y_(t,e,n){const r=De(t);let i=We.min(),o=ut();return r.persistence.runTransaction("Execute query","readwrite",(s=>(function(u,c,f){const h=De(u),g=h.xs.get(f);return g!==void 0?ae.resolve(h.Ms.get(g)):h.Pi.getTargetData(c,f)})(r,s,ni(e)).next((a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,a.targetId).next((u=>{o=u}))})).next((()=>r.Fs.getDocumentsMatchingQuery(s,e,n?i:We.min(),n?o:ut()))).next((a=>(DJ(r,LY(e),a),{documents:a,Qs:o})))))}function NJ(t,e){const n=De(t),r=De(n.Pi),i=n.Ms.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(o=>r.At(o,e).next((s=>s?s.target:null))))}function MJ(t,e){const n=De(t),r=n.Os.get(e)||We.min();return n.persistence.runTransaction("Get new document changes","readonly",(i=>n.Ns.getAllFromCollectionGroup(i,e,tY(r,Jd),Number.MAX_SAFE_INTEGER))).then((i=>(DJ(n,e,i),i)))}function DJ(t,e,n){let r=t.Os.get(e)||We.min();n.forEach(((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),t.Os.set(e,r)}async function Vge(t,e,n,r){const i=De(t);let o=ut(),s=pi();for(const c of n){const f=e.$s(c.metadata.name);c.document&&(o=o.add(f));const h=e.Us(c);h.setReadTime(e.Ks(c.metadata.readTime)),s=s.insert(f,h)}const a=i.Ns.newChangeBuffer({trackRemovals:!0}),u=await ah(i,(function(f){return ni(Uh(yt.fromString(`__bundle__/docs/${f}`)))})(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(c=>PJ(c,a,s).next((f=>(a.apply(c),f))).next((f=>i.Pi.removeMatchingKeysForTargetId(c,u.targetId).next((()=>i.Pi.addMatchingKeys(c,o,u.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(c,f.ks,f.qs))).next((()=>f.ks))))))}async function Uge(t,e,n=ut()){const r=await ah(t,ni(qD(e.bundledQuery))),i=De(t);return i.persistence.runTransaction("Save named query","readwrite",(o=>{const s=Un(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Ii.saveNamedQuery(o,e);const a=r.withResumeToken(Cn.EMPTY_BYTE_STRING,s);return i.Ms=i.Ms.insert(a.targetId,a),i.Pi.updateTargetData(o,a).next((()=>i.Pi.removeMatchingKeysForTargetId(o,r.targetId))).next((()=>i.Pi.addMatchingKeys(o,n,r.targetId))).next((()=>i.Ii.saveNamedQuery(o,e)))}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kJ="firestore_clients";function s3(t,e){return`${kJ}_${t}_${e}`}const OJ="firestore_mutations";function a3(t,e,n){let r=`${OJ}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const LJ="firestore_targets";function fS(t,e){return`${LJ}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs="SharedClientState";class J_{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ws(e,n,r){const i=JSON.parse(r);let o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new Se(i.error.code,i.error.message))),s?new J_(e,n,i.state,o):(Vn(xs,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class gg{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new Se(r.error.code,r.error.message))),o?new gg(e,r.state,i):(Vn(xs,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class X_{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=ND();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=sY(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new X_(e,o):(Vn(xs,`Failed to parse client data for instance '${e}': ${n}`),null)}}class WD{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new WD(n.clientId,n.onlineState):(Vn(xs,`Failed to parse online state: ${e}`),null)}}class oM{constructor(){this.activeTargetIds=ND()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dS{constructor(e,n,r,i,o){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Qt(rt),this.started=!1,this.Xs=[];const s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.eo=s3(this.persistenceKey,this.Js),this.no=(function(u){return`firestore_sequence_number_${u}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new oM),this.ro=new RegExp(`^${kJ}_${s}_([^_]*)$`),this.io=new RegExp(`^${OJ}_${s}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${LJ}_${s}_(\\d+)$`),this.oo=(function(u){return`firestore_online_state_${u}`})(this.persistenceKey),this._o=(function(u){return`firestore_bundle_loaded_v2_${u}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(s3(this.persistenceKey,r));if(i){const o=X_.Ws(r,i);o&&(this.Zs=this.Zs.insert(o.clientId,o))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach(((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)})),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(fS(this.persistenceKey,e));if(i){const o=gg.Ws(e,i);o&&(r=o.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(fS(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach((i=>{this.Po(i)})),this.currentUser=e,r.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Ae(xs,"READ",e,n),n}setItem(e,n){Ae(xs,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){Ae(xs,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(Ae(xs,"EVENT",n.key,n.newValue),n.key===this.eo)return void Vn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=(function(o){let s=di.ce;if(o!=null)try{const a=JSON.parse(o);je(typeof a=="number",30636,{So:o}),s=a}catch(a){Vn(xs,"Failed to read sequence number from WebStorage",a)}return s})(n.newValue);r!==di.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map((i=>this.syncEngine.Do(i))))}}}else this.Xs.push(n)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const i=new J_(this.currentUser,e,n,r),o=a3(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Gs())}Po(e){const n=a3(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const i=fS(this.persistenceKey,e),o=new gg(e,n,r);this.setItem(i,o.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return X_.Ws(r,n)}fo(e,n){const r=this.io.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return J_.Ws(new fr(o),i,n)}yo(e,n){const r=this.so.exec(e),i=Number(r[1]);return gg.Ws(i,n)}uo(e){return WD.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);Ae(xs,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),i=this.lo(this.Zs),o=this.lo(r),s=[],a=[];return o.forEach((u=>{i.has(u)||s.push(u)})),i.forEach((u=>{o.has(u)||a.push(u)})),this.syncEngine.Fo(s,a).then((()=>{this.Zs=r}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=ND();return e.forEach(((r,i)=>{n=n.unionWith(i.activeTargetIds)})),n}}class VJ{constructor(){this.Mo=new oM,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new oM,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qge{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l3="ConnectivityMonitor";class u3{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ae(l3,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ae(l3,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let C0=null;function sM(){return C0===null?C0=(function(){return 268435456+Math.round(2147483648*Math.random())})():C0++,"0x"+C0.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS="RestConnection",Fge={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Bge{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===B_?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,o){const s=sM(),a=this.zo(e,n.toUriEncodedString());Ae(hS,`Sending RPC '${e}' ${s}:`,a,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,o);const{host:c}=new URL(a),f=wu(c);return this.Jo(e,a,u,r,f).then((h=>(Ae(hS,`Received RPC '${e}' ${s}: `,h),h)),(h=>{throw Bs(hS,`RPC '${e}' ${s} failed with error: `,h,"url: ",a,"request:",r),h}))}Ho(e,n,r,i,o,s){return this.Go(e,n,r,i,o)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Vh})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,o)=>e[o]=i)),r&&r.headers.forEach(((i,o)=>e[o]=i))}zo(e,n){const r=Fge[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ge{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr="WebChannelConnection";class zge extends Bge{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,o){const s=sM();return new Promise(((a,u)=>{const c=new HW;c.setWithCredentials(!0),c.listenOnce(GW.COMPLETE,(()=>{try{switch(c.getLastErrorCode()){case l_.NO_ERROR:const h=c.getResponseJson();Ae(Lr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),a(h);break;case l_.TIMEOUT:Ae(Lr,`RPC '${e}' ${s} timed out`),u(new Se(pe.DEADLINE_EXCEEDED,"Request time out"));break;case l_.HTTP_ERROR:const g=c.getStatus();if(Ae(Lr,`RPC '${e}' ${s} failed with status:`,g,"response text:",c.getResponseText()),g>0){let _=c.getResponseJson();Array.isArray(_)&&(_=_[0]);const T=_==null?void 0:_.error;if(T&&T.status&&T.message){const E=(function(S){const C=S.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(C)>=0?C:pe.UNKNOWN})(T.status);u(new Se(E,T.message))}else u(new Se(pe.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new Se(pe.UNAVAILABLE,"Connection failed."));break;default:Fe(9055,{l_:e,streamId:s,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{Ae(Lr,`RPC '${e}' ${s} completed.`)}}));const f=JSON.stringify(i);Ae(Lr,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",f,r,15)}))}T_(e,n,r){const i=sM(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=WW(),a=KW(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=o.join("");Ae(Lr,`Creating RPC '${e}' stream ${i}: ${f}`,u);const h=s.createWebChannel(f,u);this.I_(h);let g=!1,_=!1;const T=new $ge({Yo:b=>{_?Ae(Lr,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(g||(Ae(Lr,`Opening RPC '${e}' stream ${i} transport.`),h.open(),g=!0),Ae(Lr,`RPC '${e}' stream ${i} sending:`,b),h.send(b))},Zo:()=>h.close()}),E=(b,S,C)=>{b.listen(S,(R=>{try{C(R)}catch(P){setTimeout((()=>{throw P}),0)}}))};return E(h,Hm.EventType.OPEN,(()=>{_||(Ae(Lr,`RPC '${e}' stream ${i} transport opened.`),T.o_())})),E(h,Hm.EventType.CLOSE,(()=>{_||(_=!0,Ae(Lr,`RPC '${e}' stream ${i} transport closed`),T.a_(),this.E_(h))})),E(h,Hm.EventType.ERROR,(b=>{_||(_=!0,Bs(Lr,`RPC '${e}' stream ${i} transport errored. Name:`,b.name,"Message:",b.message),T.a_(new Se(pe.UNAVAILABLE,"The operation could not be completed")))})),E(h,Hm.EventType.MESSAGE,(b=>{var S;if(!_){const C=b.data[0];je(!!C,16349);const R=C,P=(R==null?void 0:R.error)||((S=R[0])==null?void 0:S.error);if(P){Ae(Lr,`RPC '${e}' stream ${i} received error:`,P);const O=P.status;let q=(function(N){const U=Bn[N];if(U!==void 0)return JY(U)})(O),D=P.message;q===void 0&&(q=pe.INTERNAL,D="Unknown error status: "+O+" with message "+P.message),_=!0,T.a_(new Se(q,D)),h.close()}else Ae(Lr,`RPC '${e}' stream ${i} received:`,C),T.u_(C)}})),E(a,jW.STAT_EVENT,(b=>{b.stat===qN.PROXY?Ae(Lr,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===qN.NOPROXY&&Ae(Lr,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{T.__()}),0),T}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UJ(){return typeof window<"u"?window:null}function v_(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iy(t){return new Wme(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&Ae("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c3="PersistentStream";class qJ{constructor(e,n,r,i,o,s,a,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new YD(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===pe.RESOURCE_EXHAUSTED?(Vn(n.toString()),Vn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new Se(pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ae(c3,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Ae(c3,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Hge extends qJ{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Xme(this.serializer,e),r=(function(o){if(!("targetChange"in o))return We.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?We.min():s.readTime?Un(s.readTime):We.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=eM(this.serializer),n.addTarget=(function(o,s){let a;const u=s.target;if(a=$_(u)?{documents:sJ(o,u)}:{query:aJ(o,u).ft},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=eJ(o,s.resumeToken);const c=QN(o,s.expectedCount);c!==null&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo(We.min())>0){a.readTime=sh(o,s.snapshotVersion.toTimestamp());const c=QN(o,s.expectedCount);c!==null&&(a.expectedCount=c)}return a})(this.serializer,e);const r=Zme(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=eM(this.serializer),n.removeTarget=e,this.q_(n)}}class Gge extends qJ{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,je(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Qme(e.writeResults,e.commitTime),r=Un(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=eM(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>Bg(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jge{}class Kge extends jge{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Se(pe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,s])=>this.connection.Go(e,ZN(n,r),i,o,s))).catch((o=>{throw o.name==="FirebaseError"?(o.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Se(pe.UNKNOWN,o.toString())}))}Ho(e,n,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.Ho(e,ZN(n,r),i,s,a,o))).catch((s=>{throw s.name==="FirebaseError"?(s.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Se(pe.UNKNOWN,s.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Wge{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Vn(n),this.aa=!1):Ae("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xc="RemoteStore";class Yge{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((s=>{r.enqueueAndForget((async()=>{Au(this)&&(Ae(Xc,"Restarting streams for network reachability change."),await(async function(u){const c=De(u);c.Ea.add(4),await Bh(c),c.Ra.set("Unknown"),c.Ea.delete(4),await Ry(c)})(this))}))})),this.Ra=new Wge(r,i)}}async function Ry(t){if(Au(t))for(const e of t.da)await e(!0)}async function Bh(t){for(const e of t.da)await e(!1)}function Cw(t,e){const n=De(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),QD(n)?XD(n):zh(n).O_()&&JD(n,e))}function uh(t,e){const n=De(t),r=zh(n);n.Ia.delete(e),r.O_()&&FJ(n,e),n.Ia.size===0&&(r.O_()?r.L_():Au(n)&&n.Ra.set("Unknown"))}function JD(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(We.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}zh(t).Y_(e)}function FJ(t,e){t.Va.Ue(e),zh(t).Z_(e)}function XD(t){t.Va=new Hme({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),zh(t).start(),t.Ra.ua()}function QD(t){return Au(t)&&!zh(t).x_()&&t.Ia.size>0}function Au(t){return De(t).Ea.size===0}function BJ(t){t.Va=void 0}async function Jge(t){t.Ra.set("Online")}async function Xge(t){t.Ia.forEach(((e,n)=>{JD(t,e)}))}async function Qge(t,e){BJ(t),QD(t)?(t.Ra.ha(e),XD(t)):t.Ra.set("Unknown")}async function Zge(t,e,n){if(t.Ra.set("Online"),e instanceof ZY&&e.state===2&&e.cause)try{await(async function(i,o){const s=o.cause;for(const a of o.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ia.delete(a),i.Va.removeTarget(a))})(t,e)}catch(r){Ae(Xc,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Q_(t,r)}else if(e instanceof g_?t.Va.Ze(e):e instanceof QY?t.Va.st(e):t.Va.tt(e),!n.isEqual(We.min()))try{const r=await RJ(t.localStore);n.compareTo(r)>=0&&await(function(o,s){const a=o.Va.Tt(s);return a.targetChanges.forEach(((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const f=o.Ia.get(c);f&&o.Ia.set(c,f.withResumeToken(u.resumeToken,s))}})),a.targetMismatches.forEach(((u,c)=>{const f=o.Ia.get(u);if(!f)return;o.Ia.set(u,f.withResumeToken(Cn.EMPTY_BYTE_STRING,f.snapshotVersion)),FJ(o,u);const h=new Ea(f.target,u,c,f.sequenceNumber);JD(o,h)})),o.remoteSyncer.applyRemoteEvent(a)})(t,n)}catch(r){Ae(Xc,"Failed to raise snapshot:",r),await Q_(t,r)}}async function Q_(t,e,n){if(!xu(e))throw e;t.Ea.add(1),await Bh(t),t.Ra.set("Offline"),n||(n=()=>RJ(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Ae(Xc,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Ry(t)}))}function $J(t,e){return e().catch((n=>Q_(t,n,e)))}async function $h(t){const e=De(t),n=gu(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:iu;for(;eye(e);)try{const i=await Lge(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,tye(e,i)}catch(i){await Q_(e,i)}zJ(e)&&HJ(e)}function eye(t){return Au(t)&&t.Ta.length<10}function tye(t,e){t.Ta.push(e);const n=gu(t);n.O_()&&n.X_&&n.ea(e.mutations)}function zJ(t){return Au(t)&&!gu(t).x_()&&t.Ta.length>0}function HJ(t){gu(t).start()}async function nye(t){gu(t).ra()}async function rye(t){const e=gu(t);for(const n of t.Ta)e.ea(n.mutations)}async function iye(t,e,n){const r=t.Ta.shift(),i=OD.from(r,e,n);await $J(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await $h(t)}async function oye(t,e){e&&gu(t).X_&&await(async function(r,i){if((function(s){return YY(s)&&s!==pe.ABORTED})(i.code)){const o=r.Ta.shift();gu(r).B_(),await $J(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i))),await $h(r)}})(t,e),zJ(t)&&HJ(t)}async function f3(t,e){const n=De(t);n.asyncQueue.verifyOperationInProgress(),Ae(Xc,"RemoteStore received new credentials");const r=Au(n);n.Ea.add(3),await Bh(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ry(n)}async function aM(t,e){const n=De(t);e?(n.Ea.delete(2),await Ry(n)):e||(n.Ea.add(2),await Bh(n),n.Ra.set("Unknown"))}function zh(t){return t.ma||(t.ma=(function(n,r,i){const o=De(n);return o.sa(),new Hge(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:Jge.bind(null,t),t_:Xge.bind(null,t),r_:Qge.bind(null,t),H_:Zge.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),QD(t)?XD(t):t.Ra.set("Unknown")):(await t.ma.stop(),BJ(t))}))),t.ma}function gu(t){return t.fa||(t.fa=(function(n,r,i){const o=De(n);return o.sa(),new Gge(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:nye.bind(null,t),r_:oye.bind(null,t),ta:rye.bind(null,t),na:iye.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await $h(t)):(await t.fa.stop(),t.Ta.length>0&&(Ae(Xc,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((s=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,a=new ZD(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Se(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hh(t,e){if(Vn("AsyncQueue",`${e}: ${t}`),xu(t))return new Se(pe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{static emptySet(e){return new Ld(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Me.comparator(n.key,r.key):(n,r)=>Me.comparator(n.key,r.key),this.keyedMap=Gm(),this.sortedSet=new Qt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ld)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ld;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(){this.ga=new Qt(Me.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Fe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class ch{constructor(e,n,r,i,o,s,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach((a=>{s.push({type:0,doc:a})})),new ch(e,n,Ld.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ty(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sye{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class aye{constructor(){this.queries=h3(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=De(n),o=i.queries;i.queries=h3(),o.forEach(((s,a)=>{for(const u of a.Sa)u.onError(r)}))})(this,new Se(pe.ABORTED,"Firestore shutting down"))}}function h3(){return new Ja((t=>OY(t)),Ty)}async function ek(t,e){const n=De(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new sye,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const a=Hh(s,`Initialization of query '${Ed(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&nk(n)}async function tk(t,e){const n=De(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function lye(t,e){const n=De(t);let r=!1;for(const i of e){const o=i.query,s=n.queries.get(o);if(s){for(const a of s.Sa)a.Fa(i)&&(r=!0);s.wa=i}}r&&nk(n)}function uye(t,e,n){const r=De(t),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(n);r.queries.delete(e)}function nk(t){t.Ca.forEach((e=>{e.next()}))}var lM,p3;(p3=lM||(lM={})).Ma="default",p3.Cache="cache";class rk{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ch(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ch.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==lM.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cye{constructor(e,n){this.Qa=e,this.byteLength=n}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(e){this.serializer=e}$s(e){return Ls(this.serializer,e)}Us(e){return e.metadata.exists?oJ(this.serializer,e.document,!1):nn.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return Un(e)}}class fye{constructor(e,n){this.Ua=e,this.serializer=n,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=GJ(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++n;const r=yt.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,{...this.progress}):null}za(e){const n=new Map,r=new m3(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.$s(i.metadata.name);for(const s of i.metadata.queries){const a=(n.get(s)||ut()).add(o);n.set(s,a)}}return n}async ja(e){const n=await Vge(e,new m3(this.serializer),this.Wa,this.Ua.id),r=this.za(this.documents);for(const i of this.Ka)await Uge(e,i,r.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:n}}}function GJ(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jJ{constructor(e){this.key=e}}class KJ{constructor(e){this.key=e}}class WJ{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ut(),this.mutatedKeys=ut(),this.eu=VY(e),this.tu=new Ld(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new d3,i=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((f,h)=>{const g=i.get(f),_=xy(this.query,h)?h:null,T=!!g&&this.mutatedKeys.has(g.key),E=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let b=!1;g&&_?g.data.isEqual(_.data)?T!==E&&(r.track({type:3,doc:_}),b=!0):this.su(g,_)||(r.track({type:2,doc:_}),b=!0,(u&&this.eu(_,u)>0||c&&this.eu(_,c)<0)&&(a=!0)):!g&&_?(r.track({type:0,doc:_}),b=!0):g&&!_&&(r.track({type:1,doc:g}),b=!0,(u||c)&&(a=!0)),b&&(_?(s=s.add(_),o=E?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))})),this.query.limit!==null)for(;s.size>this.query.limit;){const f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{tu:s,iu:r,Cs:a,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort(((f,h)=>(function(_,T){const E=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fe(20277,{Rt:b})}};return E(_)-E(T)})(f.type,h.type)||this.eu(f.doc,h.doc))),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,c=u!==this.Za;return this.Za=u,s.length!==0||c?{snapshot:new ch(this.query,e.tu,o,s,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new d3,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ut(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new KJ(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new jJ(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=ut();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ch.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Cu="SyncEngine";class dye{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class hye{constructor(e){this.key=e,this.hu=!1}}class pye{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Ja((a=>OY(a)),Ty),this.Iu=new Map,this.Eu=new Set,this.du=new Qt(Me.comparator),this.Au=new Map,this.Ru=new $D,this.Vu={},this.mu=new Map,this.fu=Jc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function mye(t,e,n=!0){const r=Iw(t);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await YJ(r,e,n,!0),i}async function gye(t,e){const n=Iw(t);await YJ(n,e,!0,!1)}async function YJ(t,e,n,r){const i=await ah(t.localStore,ni(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=await ik(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&Cw(t.remoteStore,i),a}async function ik(t,e,n,r,i){t.pu=(h,g,_)=>(async function(E,b,S,C){let R=b.view.ru(S);R.Cs&&(R=await Y_(E.localStore,b.query,!1).then((({documents:D})=>b.view.ru(D,R))));const P=C&&C.targetChanges.get(b.targetId),O=C&&C.targetMismatches.get(b.targetId)!=null,q=b.view.applyChanges(R,E.isPrimaryClient,P,O);return uM(E,b.targetId,q.au),q.snapshot})(t,h,g,_);const o=await Y_(t.localStore,e,!0),s=new WJ(e,o.Qs),a=s.ru(o.documents),u=Cy.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=s.applyChanges(a,t.isPrimaryClient,u);uM(t,n,c.au);const f=new dye(e,n,s);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function yye(t,e,n){const r=De(t),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter((s=>!Ty(s,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await lh(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&uh(r.remoteStore,i.targetId),fh(r,i.targetId)})).catch(Tu)):(fh(r,i.targetId),await lh(r.localStore,i.targetId,!0))}async function vye(t,e){const n=De(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),uh(n.remoteStore,r.targetId))}async function _ye(t,e,n){const r=lk(t);try{const i=await(function(s,a){const u=De(s),c=Nt.now(),f=a.reduce(((_,T)=>_.add(T.key)),ut());let h,g;return u.persistence.runTransaction("Locally write mutations","readwrite",(_=>{let T=pi(),E=ut();return u.Ns.getEntries(_,f).next((b=>{T=b,T.forEach(((S,C)=>{C.isValidDocument()||(E=E.add(S))}))})).next((()=>u.localDocuments.getOverlayedDocuments(_,T))).next((b=>{h=b;const S=[];for(const C of a){const R=Bme(C,h.get(C.key).overlayedDocument);R!=null&&S.push(new Xa(C.key,R,AY(R.value.mapValue),fn.exists(!0)))}return u.mutationQueue.addMutationBatch(_,c,S,a)})).next((b=>{g=b;const S=b.applyToLocalDocumentSet(h,E);return u.documentOverlayCache.saveOverlays(_,b.batchId,S)}))})).then((()=>({batchId:g.batchId,changes:qY(h)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,u){let c=s.Vu[s.currentUser.toKey()];c||(c=new Qt(rt)),c=c.insert(a,u),s.Vu[s.currentUser.toKey()]=c})(r,i.batchId,n),await Qa(r,i.changes),await $h(r.remoteStore)}catch(i){const o=Hh(i,"Failed to persist write");n.reject(o)}}async function JJ(t,e){const n=De(t);try{const r=await Oge(n.localStore,e);e.targetChanges.forEach(((i,o)=>{const s=n.Au.get(o);s&&(je(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?je(s.hu,14607):i.removedDocuments.size>0&&(je(s.hu,42227),s.hu=!1))})),await Qa(n,r,e)}catch(r){await Tu(r)}}function g3(t,e,n){const r=De(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((o,s)=>{const a=s.view.va(e);a.snapshot&&i.push(a.snapshot)})),(function(s,a){const u=De(s);u.onlineState=a;let c=!1;u.queries.forEach(((f,h)=>{for(const g of h.Sa)g.va(a)&&(c=!0)})),c&&nk(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function bye(t,e,n){const r=De(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),o=i&&i.key;if(o){let s=new Qt(Me.comparator);s=s.insert(o,nn.newNoDocument(o,We.min()));const a=ut().add(o),u=new Ay(We.min(),new Map,new Qt(rt),s,a);await JJ(r,u),r.du=r.du.remove(o),r.Au.delete(e),ak(r)}else await lh(r.localStore,e,!1).then((()=>fh(r,e,n))).catch(Tu)}async function wye(t,e){const n=De(t),r=e.batch.batchId;try{const i=await kge(n.localStore,e);sk(n,r,null),ok(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Qa(n,i)}catch(i){await Tu(i)}}async function Eye(t,e,n){const r=De(t);try{const i=await(function(s,a){const u=De(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",(c=>{let f;return u.mutationQueue.lookupMutationBatch(c,a).next((h=>(je(h!==null,37113),f=h.keys(),u.mutationQueue.removeMutationBatch(c,h)))).next((()=>u.mutationQueue.performConsistencyCheck(c))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(c,f,a))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,f))).next((()=>u.localDocuments.getDocuments(c,f)))}))})(r.localStore,e);sk(r,e,n),ok(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Qa(r,i)}catch(i){await Tu(i)}}async function Tye(t,e){const n=De(t);Au(n.remoteStore)||Ae(Cu,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await(function(s){const a=De(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u)))})(n.localStore);if(r===iu)return void e.resolve();const i=n.mu.get(r)||[];i.push(e),n.mu.set(r,i)}catch(r){const i=Hh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function ok(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function sk(t,e,n){const r=De(t);let i=r.Vu[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function fh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||XJ(t,r)}))}function XJ(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(uh(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),ak(t))}function uM(t,e,n){for(const r of n)r instanceof jJ?(t.Ru.addReference(r.key,e),xye(t,r)):r instanceof KJ?(Ae(Cu,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||XJ(t,r.key)):Fe(19791,{wu:r})}function xye(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Ae(Cu,"New document in limbo: "+n),t.Eu.add(r),ak(t))}function ak(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Me(yt.fromString(e)),r=t.fu.next();t.Au.set(r,new hye(n)),t.du=t.du.insert(n,r),Cw(t.remoteStore,new Ea(ni(Uh(n.path)),r,"TargetPurposeLimboResolution",di.ce))}}async function Qa(t,e,n){const r=De(t),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach(((a,u)=>{s.push(r.pu(u,e,n).then((c=>{var f;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(c){i.push(c);const h=jD.As(u.targetId,c);o.push(h)}})))})),await Promise.all(s),r.Pu.H_(i),await(async function(u,c){const f=De(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(h=>ae.forEach(c,(g=>ae.forEach(g.Es,(_=>f.persistence.referenceDelegate.addReference(h,g.targetId,_))).next((()=>ae.forEach(g.ds,(_=>f.persistence.referenceDelegate.removeReference(h,g.targetId,_)))))))))}catch(h){if(!xu(h))throw h;Ae(KD,"Failed to update sequence numbers: "+h)}for(const h of c){const g=h.targetId;if(!h.fromCache){const _=f.Ms.get(g),T=_.snapshotVersion,E=_.withLastLimboFreeSnapshotVersion(T);f.Ms=f.Ms.insert(g,E)}}})(r.localStore,o))}async function Sye(t,e){const n=De(t);if(!n.currentUser.isEqual(e)){Ae(Cu,"User change. New user:",e.toKey());const r=await IJ(n.localStore,e);n.currentUser=e,(function(o,s){o.mu.forEach((a=>{a.forEach((u=>{u.reject(new Se(pe.CANCELLED,s))}))})),o.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Qa(n,r.Ls)}}function Aye(t,e){const n=De(t),r=n.Au.get(e);if(r&&r.hu)return ut().add(r.key);{let i=ut();const o=n.Iu.get(e);if(!o)return i;for(const s of o){const a=n.Tu.get(s);i=i.unionWith(a.view.nu)}return i}}async function Cye(t,e){const n=De(t),r=await Y_(n.localStore,e.query,!0),i=e.view.cu(r);return n.isPrimaryClient&&uM(n,e.targetId,i.au),i}async function Iye(t,e){const n=De(t);return MJ(n.localStore,e).then((r=>Qa(n,r)))}async function Rye(t,e,n,r){const i=De(t),o=await(function(a,u){const c=De(a),f=De(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",(h=>f.er(h,u).next((g=>g?c.localDocuments.getDocuments(h,g):ae.resolve(null)))))})(i.localStore,e);o!==null?(n==="pending"?await $h(i.remoteStore):n==="acknowledged"||n==="rejected"?(sk(i,e,r||null),ok(i,e),(function(a,u){De(De(a).mutationQueue).ir(u)})(i.localStore,e)):Fe(6720,"Unknown batchState",{Su:n}),await Qa(i,o)):Ae(Cu,"Cannot apply mutation batch with id: "+e)}async function Pye(t,e){const n=De(t);if(Iw(n),lk(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await y3(n,r.toArray());n.gu=!0,await aM(n.remoteStore,!0);for(const o of i)Cw(n.remoteStore,o)}else if(e===!1&&n.gu!==!1){const r=[];let i=Promise.resolve();n.Iu.forEach(((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then((()=>(fh(n,s),lh(n.localStore,s,!0)))),uh(n.remoteStore,s)})),await i,await y3(n,r),(function(s){const a=De(s);a.Au.forEach(((u,c)=>{uh(a.remoteStore,c)})),a.Ru.Jr(),a.Au=new Map,a.du=new Qt(Me.comparator)})(n),n.gu=!1,await aM(n.remoteStore,!1)}}async function y3(t,e,n){const r=De(t),i=[],o=[];for(const s of e){let a;const u=r.Iu.get(s);if(u&&u.length!==0){a=await ah(r.localStore,ni(u[0]));for(const c of u){const f=r.Tu.get(c),h=await Cye(r,f);h.snapshot&&o.push(h.snapshot)}}else{const c=await NJ(r.localStore,s);a=await ah(r.localStore,c),await ik(r,QJ(c),s,!1,a.resumeToken)}i.push(a)}return r.Pu.H_(o),i}function QJ(t){return kY(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Nye(t){return(function(n){return De(De(n).persistence).Ts()})(De(t).localStore)}async function Mye(t,e,n,r){const i=De(t);if(i.gu)return void Ae(Cu,"Ignoring unexpected query state notification.");const o=i.Iu.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{const s=await MJ(i.localStore,LY(o[0])),a=Ay.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Cn.EMPTY_BYTE_STRING);await Qa(i,s,a);break}case"rejected":await lh(i.localStore,e,!0),fh(i,e,r);break;default:Fe(64155,n)}}async function Dye(t,e,n){const r=Iw(t);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){Ae(Cu,"Adding an already active target "+i);continue}const o=await NJ(r.localStore,i),s=await ah(r.localStore,o);await ik(r,QJ(o),s.targetId,!1,s.resumeToken),Cw(r.remoteStore,s)}for(const i of n)r.Iu.has(i)&&await lh(r.localStore,i,!1).then((()=>{uh(r.remoteStore,i),fh(r,i)})).catch(Tu)}}function Iw(t){const e=De(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=JJ.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Aye.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bye.bind(null,e),e.Pu.H_=lye.bind(null,e.eventManager),e.Pu.yu=uye.bind(null,e.eventManager),e}function lk(t){const e=De(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wye.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Eye.bind(null,e),e}function kye(t,e,n){const r=De(t);(async function(o,s,a){try{const u=await s.getMetadata();if(await(function(_,T){const E=De(_),b=Un(T.createTime);return E.persistence.runTransaction("hasNewerBundle","readonly",(S=>E.Ii.getBundleMetadata(S,T.id))).then((S=>!!S&&S.createTime.compareTo(b)>=0))})(o.localStore,u))return await s.close(),a._completeWith((function(_){return{taskState:"Success",documentsLoaded:_.totalDocuments,bytesLoaded:_.totalBytes,totalDocuments:_.totalDocuments,totalBytes:_.totalBytes}})(u)),Promise.resolve(new Set);a._updateProgress(GJ(u));const c=new fye(u,s.serializer);let f=await s.bu();for(;f;){const g=await c.Ga(f);g&&a._updateProgress(g),f=await s.bu()}const h=await c.ja(o.localStore);return await Qa(o,h.Ha,void 0),await(function(_,T){const E=De(_);return E.persistence.runTransaction("Save bundle","readwrite",(b=>E.Ii.saveBundleMetadata(b,T)))})(o.localStore,u),a._completeWith(h.progress),Promise.resolve(h.Ja)}catch(u){return Bs(Cu,`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})(r,e,n).then((i=>{r.sharedClientState.notifyBundleLoaded(i)}))}class $g{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Iy(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return CJ(this.persistence,new AJ,e.initialUser,this.serializer)}Cu(e){return new zD(Aw.mi,this.serializer)}Du(e){return new VJ}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$g.provider={build:()=>new $g};class Oye extends $g{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){je(this.persistence.referenceDelegate instanceof W_,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new bJ(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ur.withCacheSize(this.cacheSizeBytes):Ur.DEFAULT;return new zD((r=>W_.mi(r,n)),this.serializer)}}class ZJ extends $g{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await lk(this.xu.syncEngine),await $h(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return CJ(this.persistence,new AJ,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new bJ(r,e.asyncQueue,n)}Mu(e,n){const r=new Hpe(n,this.persistence);return new zpe(e.asyncQueue,r)}Cu(e){const n=GD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Ur.withCacheSize(this.cacheSizeBytes):Ur.DEFAULT;return new HD(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,UJ(),v_(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new VJ}}class Lye extends ZJ{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof dS&&(this.sharedClientState.syncEngine={Co:Rye.bind(null,n),vo:Mye.bind(null,n),Fo:Dye.bind(null,n),Ts:Nye.bind(null,n),Do:Iye.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await Pye(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const n=UJ();if(!dS.v(n))throw new Se(pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=GD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new dS(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class zg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>g3(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Sye.bind(null,this.syncEngine),await aM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new aye})()}createDatastore(e){const n=Iy(e.databaseInfo.databaseId),r=(function(o){return new zge(o)})(e.databaseInfo);return(function(o,s,a,u){return new Kge(o,s,a,u)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,o,s,a){return new Yge(r,i,o,s,a)})(this.localStore,this.datastore,e.asyncQueue,(n=>g3(this.syncEngine,n,0)),(function(){return u3.v()?new u3:new qge})())}createSyncEngine(e,n){return(function(i,o,s,a,u,c,f){const h=new pye(i,o,s,a,u,c);return f&&(h.gu=!0),h})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(i){const o=De(i);Ae(Xc,"RemoteStore shutting down."),o.Ea.add(5),await Bh(o),o.Aa.shutdown(),o.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}zg.provider={build:()=>new zg};function v3(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Vn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vye{constructor(e,n){this.Bu=e,this.serializer=n,this.metadata=new Ir,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((r=>{r&&r.$a()?this.metadata.resolve(r.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Qa)}`))}),(r=>this.metadata.reject(r)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const n=this.Lu.decode(e),r=Number(n);isNaN(r)&&this.Qu(`length string (${n}) is not valid number`);const i=await this.$u(r);return new cye(JSON.parse(i),e.length+r)}Uu(){return this.buffer.findIndex((e=>e===123))}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const n=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uye{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Se(pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(i,o){const s=De(i),a={documents:o.map((h=>Fg(s.serializer,h)))},u=await s.Ho("BatchGetDocuments",s.serializer.databaseId,yt.emptyPath(),a,o.length),c=new Map;u.forEach((h=>{const g=Jme(s.serializer,h);c.set(g.key.toString(),g)}));const f=[];return o.forEach((h=>{const g=c.get(h.toString());je(!!g,55234,{key:h}),f.push(g)})),f})(this.datastore,e);return n.forEach((r=>this.recordVersion(r))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Fh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,r)=>{const i=Me.fromPath(r);this.mutations.push(new DD(i,this.precondition(i)))})),await(async function(r,i){const o=De(r),s={writes:i.map((a=>Bg(o.serializer,a)))};await o.Go("Commit",o.serializer.databaseId,yt.emptyPath(),s)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Fe(50498,{Gu:e.constructor.name});n=We.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new Se(pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(We.min())?fn.exists(!1):fn.updateTime(n):fn.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(We.min()))throw new Se(pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return fn.updateTime(n)}return fn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qye{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.zu=r.maxAttempts,this.M_=new YD(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new Uye(this.datastore),n=this.Hu(e);n&&n.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((i=>{this.Yu(i)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const n=this.updateFunction(e);return!by(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!YY(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yu="FirestoreClient";class Fye{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=fr.UNAUTHENTICATED,this.clientId=_D.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async s=>{Ae(yu,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,(s=>(Ae(yu,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Hh(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function pS(t,e){t.asyncQueue.verifyOperationInProgress(),Ae(yu,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await IJ(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function _3(t,e){t.asyncQueue.verifyOperationInProgress();const n=await uk(t);Ae(yu,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>f3(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>f3(e.remoteStore,i))),t._onlineComponents=e}async function uk(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ae(yu,"Using user provided OfflineComponentProvider");try{await pS(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===pe.FAILED_PRECONDITION||i.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Bs("Error using user provided cache. Falling back to memory cache: "+n),await pS(t,new $g)}}else Ae(yu,"Using default OfflineComponentProvider"),await pS(t,new Oye(void 0));return t._offlineComponents}async function Pw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ae(yu,"Using user provided OnlineComponentProvider"),await _3(t,t._uninitializedComponentsProvider._online)):(Ae(yu,"Using default OnlineComponentProvider"),await _3(t,new zg))),t._onlineComponents}function eX(t){return uk(t).then((e=>e.persistence))}function ck(t){return uk(t).then((e=>e.localStore))}function tX(t){return Pw(t).then((e=>e.remoteStore))}function fk(t){return Pw(t).then((e=>e.syncEngine))}function Bye(t){return Pw(t).then((e=>e.datastore))}async function dh(t){const e=await Pw(t),n=e.eventManager;return n.onListen=mye.bind(null,e.syncEngine),n.onUnlisten=yye.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=gye.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=vye.bind(null,e.syncEngine),n}function $ye(t){return t.asyncQueue.enqueue((async()=>{const e=await eX(t),n=await tX(t);return e.setNetworkEnabled(!0),(function(i){const o=De(i);return o.Ea.delete(0),Ry(o)})(n)}))}function zye(t){return t.asyncQueue.enqueue((async()=>{const e=await eX(t),n=await tX(t);return e.setNetworkEnabled(!1),(async function(i){const o=De(i);o.Ea.add(0),await Bh(o),o.Ra.set("Offline")})(n)}))}function Hye(t,e){const n=new Ir;return t.asyncQueue.enqueueAndForget((async()=>(async function(i,o,s){try{const a=await(function(c,f){const h=De(c);return h.persistence.runTransaction("read document","readonly",(g=>h.localDocuments.getDocument(g,f)))})(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new Se(pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const u=Hh(a,`Failed to get document '${o} from cache`);s.reject(u)}})(await ck(t),e,n))),n.promise}function nX(t,e,n={}){const r=new Ir;return t.asyncQueue.enqueueAndForget((async()=>(function(o,s,a,u,c){const f=new Rw({next:g=>{f.Nu(),s.enqueueAndForget((()=>tk(o,h)));const _=g.docs.has(a);!_&&g.fromCache?c.reject(new Se(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&g.fromCache&&u&&u.source==="server"?c.reject(new Se(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),h=new rk(Uh(a.path),f,{includeMetadataChanges:!0,qa:!0});return ek(o,h)})(await dh(t),t.asyncQueue,e,n,r))),r.promise}function Gye(t,e){const n=new Ir;return t.asyncQueue.enqueueAndForget((async()=>(async function(i,o,s){try{const a=await Y_(i,o,!0),u=new WJ(o,a.Qs),c=u.ru(a.documents),f=u.applyChanges(c,!1);s.resolve(f.snapshot)}catch(a){const u=Hh(a,`Failed to execute query '${o} against cache`);s.reject(u)}})(await ck(t),e,n))),n.promise}function rX(t,e,n={}){const r=new Ir;return t.asyncQueue.enqueueAndForget((async()=>(function(o,s,a,u,c){const f=new Rw({next:g=>{f.Nu(),s.enqueueAndForget((()=>tk(o,h))),g.fromCache&&u.source==="server"?c.reject(new Se(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),h=new rk(a,f,{includeMetadataChanges:!0,qa:!0});return ek(o,h)})(await dh(t),t.asyncQueue,e,n,r))),r.promise}function jye(t,e){const n=new Rw(e);return t.asyncQueue.enqueueAndForget((async()=>(function(i,o){De(i).Ca.add(o),o.next()})(await dh(t),n))),()=>{n.Nu(),t.asyncQueue.enqueueAndForget((async()=>(function(i,o){De(i).Ca.delete(o)})(await dh(t),n)))}}function Kye(t,e,n,r){const i=(function(s,a){let u;return u=typeof s=="string"?XY().encode(s):s,(function(f,h){return new Vye(f,h)})((function(f,h){if(f instanceof Uint8Array)return v3(f,h);if(f instanceof ArrayBuffer)return v3(new Uint8Array(f),h);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(u),a)})(n,Iy(e));t.asyncQueue.enqueueAndForget((async()=>{kye(await fk(t),i,r)}))}function Wye(t,e){return t.asyncQueue.enqueue((async()=>(function(r,i){const o=De(r);return o.persistence.runTransaction("Get named query","readonly",(s=>o.Ii.getNamedQuery(s,i)))})(await ck(t),e)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iX(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b3=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oX="firestore.googleapis.com",w3=!0;class E3{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Se(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=oX,this.ssl=w3}else this.host=e.host,this.ssl=e.ssl??w3;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=gJ;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<mge)throw new Se(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QW("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iX(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Se(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Se(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Se(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Py{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new E3({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Se(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Se(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new E3(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Npe;switch(r.type){case"firstParty":return new Ope(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Se(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=b3.get(n);r&&(Ae("ComponentProvider","Removing Datastore"),b3.delete(n),r.terminate())})(this),Promise.resolve()}}function sX(t,e,n,r={}){var c;t=Et(t,Py);const i=wu(e),o=t._getSettings(),s={...o,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;i&&(z2(`https://${a}`),H2("Firestore",!0)),o.host!==oX&&o.host!==a&&Bs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...o,host:a,ssl:i,emulatorOptions:r};if(!lu(u,s)&&(t._setSettings(u),r.mockUserToken)){let f,h;if(typeof r.mockUserToken=="string")f=r.mockUserToken,h=fr.MOCK_USER;else{f=SK(r.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Se(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new fr(g)}t._authCredentials=new Mpe(new JW(f,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ii=class aX{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new aX(this.firestore,e,this._query)}},Xt=class Wm{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ou(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wm(this.firestore,e,this._key)}toJSON(){return{type:Wm._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(_y(n,Wm._jsonSchema))return new Wm(e,r||null,new Me(yt.fromString(n.referencePath)))}};Xt._jsonSchemaVersion="firestore/documentReference/1.0",Xt._jsonSchema={type:zn("string",Xt._jsonSchemaVersion),referencePath:zn("string")};let ou=class lX extends ii{constructor(e,n,r){super(e,n,Uh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xt(this.firestore,null,new Me(e))}withConverter(e){return new lX(this.firestore,e,this._path)}};function Rs(t,e,...n){if(t=Ke(t),bD("collection","path",e),t instanceof Py){const r=yt.fromString(e,...n);return cF(r),new ou(t,null,r)}{if(!(t instanceof Xt||t instanceof ou))throw new Se(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(yt.fromString(e,...n));return cF(r),new ou(t.firestore,null,r)}}function Yye(t,e){if(t=Et(t,Py),bD("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Se(pe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ii(t,null,(function(r){return new Ya(yt.emptyPath(),r)})(e))}function Ui(t,e,...n){if(t=Ke(t),arguments.length===1&&(e=_D.newId()),bD("doc","path",e),t instanceof Py){const r=yt.fromString(e,...n);return uF(r),new Xt(t,null,new Me(r))}{if(!(t instanceof Xt||t instanceof ou))throw new Se(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(yt.fromString(e,...n));return uF(r),new Xt(t.firestore,t instanceof ou?t.converter:null,new Me(r))}}function uX(t,e){return t=Ke(t),e=Ke(e),(t instanceof Xt||t instanceof ou)&&(e instanceof Xt||e instanceof ou)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function cX(t,e){return t=Ke(t),e=Ke(e),t instanceof ii&&e instanceof ii&&t.firestore===e.firestore&&Ty(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T3="AsyncQueue";class x3{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new YD(this,"async_queue_retry"),this._c=()=>{const r=v_();r&&Ae(T3,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=v_();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=v_();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ir;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!xu(e))throw e;Ae(T3,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Vn("INTERNAL UNHANDLED ERROR: ",S3(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=ZD.createAndSchedule(this,e,n,r,(o=>this.hc(o)));return this.tc.push(i),i}uc(){this.nc&&Fe(47125,{Pc:S3(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function S3(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cM(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(t,["next","error","complete"])}class Jye{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ir,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xye=-1;let In=class extends Py{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new x3,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new x3(e),this._firestoreClient=void 0,await e}}};function Qye(t,e){const n=typeof t=="object"?t:qK(),r=typeof t=="string"?t:B_,i=W2(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=Kle("firestore");o&&sX(i,...o)}return i}function Nr(t){if(t._terminated)throw new Se(pe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||fX(t),t._firestoreClient}function fX(t){var r,i,o;const e=t._freezeSettings(),n=(function(a,u,c,f){return new _me(a,u,c,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,iX(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)})(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Fye(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}})(t._componentsProvider))}function Zye(t,e){Bs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return dX(t,zg.provider,{build:r=>new ZJ(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function eve(t){Bs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();dX(t,zg.provider,{build:n=>new Lye(n,e.cacheSizeBytes)})}function dX(t,e,n){if((t=Et(t,In))._firestoreClient||t._terminated)throw new Se(pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new Se(pe.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},fX(t)}function tve(t){if(t._initialized&&!t._terminated)throw new Se(pe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ir;return t._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(r){if(!Os.v())return Promise.resolve();const i=r+SJ;await Os.delete(i)})(GD(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function nve(t){return(function(n){const r=new Ir;return n.asyncQueue.enqueueAndForget((async()=>Tye(await fk(n),r))),r.promise})(Nr(t=Et(t,In)))}function rve(t){return $ye(Nr(t=Et(t,In)))}function ive(t){return zye(Nr(t=Et(t,In)))}function ove(t,e){const n=Nr(t=Et(t,In)),r=new Jye;return Kye(n,t._databaseId,e,r),r}function sve(t,e){return Wye(Nr(t=Et(t,In)),e).then((n=>n?new ii(t,null,n.query):null))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qr(Cn.fromBase64String(e))}catch(n){throw new Se(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new qr(Cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:qr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(_y(e,qr._jsonSchema))return qr.fromBase64String(e.bytes)}}qr._jsonSchemaVersion="firestore/bytes/1.0",qr._jsonSchema={type:zn("string",qr._jsonSchemaVersion),bytes:zn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vu=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Se(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let df=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Se(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Se(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return rt(this._lat,e._lat)||rt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ko._jsonSchemaVersion}}static fromJSON(e){if(_y(e,Ko._jsonSchema))return new Ko(e.latitude,e.longitude)}}Ko._jsonSchemaVersion="firestore/geoPoint/1.0",Ko._jsonSchema={type:zn("string",Ko._jsonSchemaVersion),latitude:zn("number"),longitude:zn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Vs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(_y(e,Vs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Vs(e.vectorValues);throw new Se(pe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vs._jsonSchemaVersion="firestore/vectorValue/1.0",Vs._jsonSchema={type:zn("string",Vs._jsonSchemaVersion),vectorValues:zn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ave=/^__.*__$/;class lve{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Xa(e,this.data,this.fieldMask,n,this.fieldTransforms):new qh(e,this.data,n,this.fieldTransforms)}}class hX{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Xa(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function pX(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fe(40011,{Ac:t})}}class Nw{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Nw({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Z_(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(pX(this.Ac)&&ave.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class uve{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Iy(e)}Cc(e,n,r,i=!1){return new Nw({Ac:e,methodName:n,Dc:r,path:cn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hf(t){const e=t._freezeSettings(),n=Iy(t._databaseId);return new uve(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Mw(t,e,n,r,i,o={}){const s=t.Cc(o.merge||o.mergeFields?2:0,e,n,i);vk("Data must be an object, but it was:",s,r);const a=yX(r,s);let u,c;if(o.merge)u=new hi(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const f=[];for(const h of o.mergeFields){const g=fM(e,h,n);if(!s.contains(g))throw new Se(pe.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);_X(f,g)||f.push(g)}u=new hi(f),c=s.fieldTransforms.filter((h=>u.covers(h.field)))}else u=null,c=s.fieldTransforms;return new lve(new Ar(a),u,c)}class Ny extends df{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ny}}function mX(t,e,n){return new Nw({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class dk extends df{_toFieldTransform(e){return new Sy(e.path,new ih)}isEqual(e){return e instanceof dk}}class hk extends df{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=mX(this,e,!0),r=this.vc.map((o=>pf(o,n))),i=new jc(r);return new Sy(e.path,i)}isEqual(e){return e instanceof hk&&lu(this.vc,e.vc)}}class pk extends df{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=mX(this,e,!0),r=this.vc.map((o=>pf(o,n))),i=new Kc(r);return new Sy(e.path,i)}isEqual(e){return e instanceof pk&&lu(this.vc,e.vc)}}class mk extends df{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new oh(e.serializer,$Y(e.serializer,this.Fc));return new Sy(e.path,n)}isEqual(e){return e instanceof mk&&this.Fc===e.Fc}}function gk(t,e,n,r){const i=t.Cc(1,e,n);vk("Data must be an object, but it was:",i,r);const o=[],s=Ar.empty();Su(r,((u,c)=>{const f=_k(e,u,n);c=Ke(c);const h=i.yc(f);if(c instanceof Ny)o.push(f);else{const g=pf(c,h);g!=null&&(o.push(f),s.set(f,g))}}));const a=new hi(o);return new hX(s,a,i.fieldTransforms)}function yk(t,e,n,r,i,o){const s=t.Cc(1,e,n),a=[fM(e,r,n)],u=[i];if(o.length%2!=0)throw new Se(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(fM(e,o[g])),u.push(o[g+1]);const c=[],f=Ar.empty();for(let g=a.length-1;g>=0;--g)if(!_X(c,a[g])){const _=a[g];let T=u[g];T=Ke(T);const E=s.yc(_);if(T instanceof Ny)c.push(_);else{const b=pf(T,E);b!=null&&(c.push(_),f.set(_,b))}}const h=new hi(c);return new hX(f,h,s.fieldTransforms)}function gX(t,e,n,r=!1){return pf(n,t.Cc(r?4:3,e))}function pf(t,e){if(vX(t=Ke(t)))return vk("Unsupported field value:",e,t),yX(t,e);if(t instanceof df)return(function(r,i){if(!pX(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const o=[];let s=0;for(const a of r){let u=pf(a,i.wc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=Ke(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $Y(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Nt.fromDate(r);return{timestampValue:sh(i.serializer,o)}}if(r instanceof Nt){const o=new Nt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:sh(i.serializer,o)}}if(r instanceof Ko)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof qr)return{bytesValue:eJ(i.serializer,r._byteString)};if(r instanceof Xt){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:UD(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Vs)return(function(s,a){return{mapValue:{fields:{[CD]:{stringValue:ID},[th]:{arrayValue:{values:s.toArray().map((c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return MD(a.serializer,c)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${pw(r)}`)})(t,e)}function yX(t,e){const n={};return yY(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Su(t,((r,i)=>{const o=pf(i,e.mc(r));o!=null&&(n[r]=o)})),{mapValue:{fields:n}}}function vX(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Nt||t instanceof Ko||t instanceof qr||t instanceof Xt||t instanceof df||t instanceof Vs)}function vk(t,e,n){if(!vX(n)||!ZW(n)){const r=pw(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function fM(t,e,n){if((e=Ke(e))instanceof vu)return e._internalPath;if(typeof e=="string")return _k(t,e);throw Z_("Field path arguments must be of type string or ",t,!1,void 0,n)}const cve=new RegExp("[~\\*/\\[\\]]");function _k(t,e,n){if(e.search(cve)>=0)throw Z_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new vu(...e.split("."))._internalPath}catch{throw Z_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Z_(t,e,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new Se(pe.INVALID_ARGUMENT,a+t+u)}function _X(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new fve(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Dw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class fve extends Hg{data(){return super.data()}}function Dw(t,e){return typeof e=="string"?_k(t,e):e instanceof vu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bX(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Se(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bk{}class My extends bk{}function co(t,e,...n){let r=[];e instanceof bk&&r.push(e),r=r.concat(n),(function(o){const s=o.filter((u=>u instanceof wk)).length,a=o.filter((u=>u instanceof kw)).length;if(s>1||s>0&&a>0)throw new Se(pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class kw extends My{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new kw(e,n,r)}_apply(e){const n=this._parse(e);return EX(e._query,n),new ii(e.firestore,e.converter,XN(e._query,n))}_parse(e){const n=hf(e.firestore);return(function(o,s,a,u,c,f,h){let g;if(c.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Se(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){C3(h,f);const T=[];for(const E of h)T.push(A3(u,o,E));g={arrayValue:{values:T}}}else g=A3(u,o,h)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||C3(h,f),g=gX(a,s,h,f==="in"||f==="not-in");return vt.create(c,f,g)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function dve(t,e,n){const r=e,i=Dw("where",t);return kw._create(i,r,n)}class wk extends bk{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new wk(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Vt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,o){let s=i;const a=o.getFlattenedFilters();for(const u of a)EX(s,u),s=XN(s,u)})(e._query,n),new ii(e.firestore,e.converter,XN(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ek extends My{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Ek(e,n)}_apply(e){const n=(function(i,o,s){if(i.startAt!==null)throw new Se(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Se(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new qg(o,s)})(e._query,this._field,this._direction);return new ii(e.firestore,e.converter,(function(i,o){const s=i.explicitOrderBy.concat([o]);return new Ya(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}}function eb(t,e="asc"){const n=e,r=Dw("orderBy",t);return Ek._create(r,n)}class Ow extends My{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Ow(e,n,r)}_apply(e){return new ii(e.firestore,e.converter,H_(e._query,this._limit,this._limitType))}}function hve(t){return eY("limit",t),Ow._create("limit",t,"F")}function pve(t){return eY("limitToLast",t),Ow._create("limitToLast",t,"L")}class Lw extends My{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Lw(e,n,r)}_apply(e){const n=wX(e,this.type,this._docOrFields,this._inclusive);return new ii(e.firestore,e.converter,(function(i,o){return new Ya(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)})(e._query,n))}}function mve(...t){return Lw._create("startAt",t,!0)}function gve(...t){return Lw._create("startAfter",t,!1)}class Vw extends My{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Vw(e,n,r)}_apply(e){const n=wX(e,this.type,this._docOrFields,this._inclusive);return new ii(e.firestore,e.converter,(function(i,o){return new Ya(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)})(e._query,n))}}function yve(...t){return Vw._create("endBefore",t,!1)}function vve(...t){return Vw._create("endAt",t,!0)}function wX(t,e,n,r){if(n[0]=Ke(n[0]),n[0]instanceof Hg)return(function(o,s,a,u,c){if(!u)throw new Se(pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const f=[];for(const h of Od(o))if(h.field.isKeyField())f.push(Hc(s,u.key));else{const g=u.data.field(h.field);if(_w(g))throw new Se(pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){const _=h.field.canonicalString();throw new Se(pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${_}' (used as the orderBy) does not exist.`)}f.push(g)}return new mu(f,c)})(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=hf(t.firestore);return(function(s,a,u,c,f,h){const g=s.explicitOrderBy;if(f.length>g.length)throw new Se(pe.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const _=[];for(let T=0;T<f.length;T++){const E=f[T];if(g[T].field.isKeyField()){if(typeof E!="string")throw new Se(pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof E}`);if(!PD(s)&&E.indexOf("/")!==-1)throw new Se(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${E}' contains a slash.`);const b=s.path.child(yt.fromString(E));if(!Me.isDocumentKey(b))throw new Se(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${b}' is not because it contains an odd number of segments.`);const S=new Me(b);_.push(Hc(a,S))}else{const b=gX(u,c,E);_.push(b)}}return new mu(_,h)})(t._query,t.firestore._databaseId,i,e,n,r)}}function A3(t,e,n){if(typeof(n=Ke(n))=="string"){if(n==="")throw new Se(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!PD(e)&&n.indexOf("/")!==-1)throw new Se(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(yt.fromString(n));if(!Me.isDocumentKey(r))throw new Se(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Hc(t,new Me(r))}if(n instanceof Xt)return Hc(t,n._key);throw new Se(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pw(n)}.`)}function C3(t,e){if(!Array.isArray(t)||t.length===0)throw new Se(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function EX(t,e){const n=(function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Se(pe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Se(pe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Tk{convertValue(e,n="none"){switch(hu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return un(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ua(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Fe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Su(e,((i,o)=>{r[i]=this.convertValue(o,n)})),r}convertVectorValue(e){var r,i,o;const n=(o=(i=(r=e.fields)==null?void 0:r[th].arrayValue)==null?void 0:i.values)==null?void 0:o.map((s=>un(s.doubleValue)));return new Vs(n)}convertGeoPoint(e){return new Ko(un(e.latitude),un(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=bw(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Lg(e));default:return null}}convertTimestamp(e){const n=Va(e);return new Nt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=yt.fromString(e);je(fJ(r),9688,{name:e});const i=new du(r.get(1),r.get(3)),o=new Me(r.popFirst(5));return i.isEqual(n)||Vn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uw(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class _ve extends Tk{constructor(e){super(),this.firestore=e}convertBytes(e){return new qr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Xt(this.firestore,null,n)}}class Ac{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let vo=class TX extends Hg{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new yg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Dw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(pe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=TX._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};vo._jsonSchemaVersion="firestore/documentSnapshot/1.0",vo._jsonSchema={type:zn("string",vo._jsonSchemaVersion),bundleSource:zn("string","DocumentSnapshot"),bundleName:zn("string"),bundle:zn("string")};let yg=class extends vo{data(e={}){return super.data(e)}},Wo=class xX{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ac(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new yg(this._firestore,this._userDataWriter,r.key,r,new Ac(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Se(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map((a=>{const u=new yg(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ac(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((a=>o||a.type!==3)).map((a=>{const u=new yg(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ac(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,f=-1;return a.type!==0&&(c=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),f=s.indexOf(a.doc.key)),{type:bve(a.type),doc:u,oldIndex:c,newIndex:f}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(pe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=xX._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=_D.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function bve(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fe(61501,{type:t})}}function SX(t,e){return t instanceof vo&&e instanceof vo?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Wo&&e instanceof Wo&&t._firestore===e._firestore&&cX(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dy(t){t=Et(t,Xt);const e=Et(t.firestore,In);return nX(Nr(e),t._key).then((n=>Sk(e,t,n)))}Wo._jsonSchemaVersion="firestore/querySnapshot/1.0",Wo._jsonSchema={type:zn("string",Wo._jsonSchemaVersion),bundleSource:zn("string","QuerySnapshot"),bundleName:zn("string"),bundle:zn("string")};class mf extends Tk{constructor(e){super(),this.firestore=e}convertBytes(e){return new qr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Xt(this.firestore,null,n)}}function wve(t){t=Et(t,Xt);const e=Et(t.firestore,In),n=Nr(e),r=new mf(e);return Hye(n,t._key).then((i=>new vo(e,r,t._key,i,new Ac(i!==null&&i.hasLocalMutations,!0),t.converter)))}function Eve(t){t=Et(t,Xt);const e=Et(t.firestore,In);return nX(Nr(e),t._key,{source:"server"}).then((n=>Sk(e,t,n)))}function xk(t){t=Et(t,ii);const e=Et(t.firestore,In),n=Nr(e),r=new mf(e);return bX(t._query),rX(n,t._query).then((i=>new Wo(e,r,t,i)))}function Tve(t){t=Et(t,ii);const e=Et(t.firestore,In),n=Nr(e),r=new mf(e);return Gye(n,t._query).then((i=>new Wo(e,r,t,i)))}function xve(t){t=Et(t,ii);const e=Et(t.firestore,In),n=Nr(e),r=new mf(e);return rX(n,t._query,{source:"server"}).then((i=>new Wo(e,r,t,i)))}function I3(t,e,n){t=Et(t,Xt);const r=Et(t.firestore,In),i=Uw(t.converter,e,n);return Gh(r,[Mw(hf(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,fn.none())])}function hh(t,e,n,...r){t=Et(t,Xt);const i=Et(t.firestore,In),o=hf(i);let s;return s=typeof(e=Ke(e))=="string"||e instanceof vu?yk(o,"updateDoc",t._key,e,n,r):gk(o,"updateDoc",t._key,e),Gh(i,[s.toMutation(t._key,fn.exists(!0))])}function dM(t){return Gh(Et(t.firestore,In),[new Fh(t._key,fn.none())])}function Gg(t,e){const n=Et(t.firestore,In),r=Ui(t),i=Uw(t.converter,e);return Gh(n,[Mw(hf(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,fn.exists(!1))]).then((()=>r))}function tb(t,...e){var u,c,f;t=Ke(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||cM(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(cM(e[r])){const h=e[r];e[r]=(u=h.next)==null?void 0:u.bind(h),e[r+1]=(c=h.error)==null?void 0:c.bind(h),e[r+2]=(f=h.complete)==null?void 0:f.bind(h)}let o,s,a;if(t instanceof Xt)s=Et(t.firestore,In),a=Uh(t._key.path),o={next:h=>{e[r]&&e[r](Sk(s,t,h))},error:e[r+1],complete:e[r+2]};else{const h=Et(t,ii);s=Et(h.firestore,In),a=h._query;const g=new mf(s);o={next:_=>{e[r]&&e[r](new Wo(s,g,h,_))},error:e[r+1],complete:e[r+2]},bX(t._query)}return(function(g,_,T,E){const b=new Rw(E),S=new rk(_,b,T);return g.asyncQueue.enqueueAndForget((async()=>ek(await dh(g),S))),()=>{b.Nu(),g.asyncQueue.enqueueAndForget((async()=>tk(await dh(g),S)))}})(Nr(s),a,i,o)}function Sve(t,e){return jye(Nr(t=Et(t,In)),cM(e)?e:{next:e})}function Gh(t,e){return(function(r,i){const o=new Ir;return r.asyncQueue.enqueueAndForget((async()=>_ye(await fk(r),i,o))),o.promise})(Nr(t),e)}function Sk(t,e,n){const r=n.docs.get(e._key),i=new mf(t);return new vo(t,i,e._key,r,new Ac(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ave={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let AX=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=hf(e)}set(e,n,r){this._verifyNotCommitted();const i=eu(e,this._firestore),o=Uw(i.converter,n,r),s=Mw(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,fn.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const o=eu(e,this._firestore);let s;return s=typeof(n=Ke(n))=="string"||n instanceof vu?yk(this._dataReader,"WriteBatch.update",o._key,n,r,i):gk(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,fn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=eu(e,this._firestore);return this._mutations=this._mutations.concat(new Fh(n._key,fn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Se(pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function eu(t,e){if((t=Ke(t)).firestore!==e)throw new Se(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cve{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=hf(e)}get(e){const n=eu(e,this._firestore),r=new _ve(this._firestore);return this._transaction.lookup([n._key]).then((i=>{if(!i||i.length!==1)return Fe(24041);const o=i[0];if(o.isFoundDocument())return new Hg(this._firestore,r,o.key,o,n.converter);if(o.isNoDocument())return new Hg(this._firestore,r,n._key,null,n.converter);throw Fe(18433,{doc:o})}))}set(e,n,r){const i=eu(e,this._firestore),o=Uw(i.converter,n,r),s=Mw(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this}update(e,n,r,...i){const o=eu(e,this._firestore);let s;return s=typeof(n=Ke(n))=="string"||n instanceof vu?yk(this._dataReader,"Transaction.update",o._key,n,r,i):gk(this._dataReader,"Transaction.update",o._key,n),this._transaction.update(o._key,s),this}delete(e){const n=eu(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ive=class extends Cve{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=eu(e,this._firestore),r=new mf(this._firestore);return super.get(e).then((i=>new vo(this._firestore,r,n._key,i._document,new Ac(!1,!1),n.converter)))}};function Rve(t,e,n){t=Et(t,In);const r={...Ave,...n};return(function(o){if(o.maxAttempts<1)throw new Se(pe.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(o,s,a){const u=new Ir;return o.asyncQueue.enqueueAndForget((async()=>{const c=await Bye(o);new qye(o.asyncQueue,c,a,s,u).ju()})),u.promise})(Nr(t),(i=>e(new Ive(t,i))),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pve(){return new Ny("deleteField")}function Ia(){return new dk("serverTimestamp")}function Nve(...t){return new hk("arrayUnion",t)}function Mve(...t){return new pk("arrayRemove",t)}function CX(t){return new mk("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dve(t){return Nr(t=Et(t,In)),new AX(t,(e=>Gh(t,e)))}(function(e,n=!0){(function(i){Vh=i})(Ga),Oa(new wo("firestore",((r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new In(new Dpe(r.getProvider("auth-internal")),new Lpe(s,r.getProvider("app-check-internal")),(function(c,f){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Se(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new du(c.options.projectId,f)})(s,i),s);return o={useFetchStreams:n,...o},a._setSettings(o),a}),"PUBLIC").setMultipleInstances(!0)),Vi(oF,sF,e),Vi(oF,sF,"esm2020")})();const kve="@firebase/firestore-compat",Ove="0.4.2";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new Se("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R3(){if(typeof Uint8Array>"u")throw new Se("unimplemented","Uint8Arrays are not available in this environment.")}function P3(){if(!yme())throw new Se("unimplemented","Blobs are unavailable in Firestore in this environment.")}let IX=class hM{constructor(e){this._delegate=e}static fromBase64String(e){return P3(),new hM(qr.fromBase64String(e))}static fromUint8Array(e){return R3(),new hM(qr.fromUint8Array(e))}toBase64(){return P3(),this._delegate.toBase64()}toUint8Array(){return R3(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pM(t){return Lve(t,["next","error","complete"])}function Lve(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vve{enableIndexedDbPersistence(e,n){return Zye(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return eve(e._delegate)}clearIndexedDbPersistence(e){return tve(e._delegate)}}class RX{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof du||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Bs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...n,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){sX(this._delegate,e,n,r)}enableNetwork(){return rve(this._delegate)}disableNetwork(){return ive(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,QW("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return nve(this._delegate)}onSnapshotsInSync(e){return Sve(this._delegate,e)}get app(){if(!this._appCompat)throw new Se("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ph(this,Rs(this._delegate,e))}catch(n){throw Xr(n,"collection()","Firestore.collection()")}}doc(e){try{return new po(this,Ui(this._delegate,e))}catch(n){throw Xr(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Jr(this,Yye(this._delegate,e))}catch(n){throw Xr(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return Rve(this._delegate,n=>e(new PX(this,n)))}batch(){return Nr(this._delegate),new NX(new AX(this._delegate,e=>Gh(this._delegate,e)))}loadBundle(e){return ove(this._delegate,e)}namedQuery(e){return sve(this._delegate,e).then(n=>n?new Jr(this,n):null)}}class qw extends Tk{constructor(e){super(),this.firestore=e}convertBytes(e){return new IX(new qr(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return po.forKey(n,this.firestore,null)}}function Uve(t){Rpe(t)}class PX{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new qw(e)}get(e){const n=Cc(e);return this._delegate.get(n).then(r=>new jg(this._firestore,new vo(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Cc(e);return r?(Ak("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=Cc(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=Cc(e);return this._delegate.delete(n),this}}class NX{constructor(e){this._delegate=e}set(e,n,r){const i=Cc(e);return r?(Ak("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=Cc(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=Cc(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Qc{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new yg(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Kg(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=Qc.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new Qc(e,new qw(e),n),i.set(n,o)),o}}Qc.INSTANCES=new WeakMap;class po{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new qw(e)}static forPath(e,n,r){if(e.length%2!==0)throw new Se("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new po(n,new Xt(n._delegate,r,new Me(e)))}static forKey(e,n,r){return new po(n,new Xt(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ph(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ph(this.firestore,Rs(this._delegate,e))}catch(n){throw Xr(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ke(e),e instanceof Xt?uX(this._delegate,e):!1}set(e,n){n=Ak("DocumentReference.set",n);try{return n?I3(this._delegate,e,n):I3(this._delegate,e)}catch(r){throw Xr(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?hh(this._delegate,e):hh(this._delegate,e,n,...r)}catch(i){throw Xr(i,"updateDoc()","DocumentReference.update()")}}delete(){return dM(this._delegate)}onSnapshot(...e){const n=MX(e),r=DX(e,i=>new jg(this.firestore,new vo(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return tb(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=wve(this._delegate):(e==null?void 0:e.source)==="server"?n=Eve(this._delegate):n=Dy(this._delegate),n.then(r=>new jg(this.firestore,new vo(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new po(this.firestore,e?this._delegate.withConverter(Qc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Xr(t,e,n){return t.message=t.message.replace(e,n),t}function MX(t){for(const e of t)if(typeof e=="object"&&!pM(e))return e;return{}}function DX(t,e){var r,i;let n;return pM(t[0])?n=t[0]:pM(t[1])?n=t[1]:typeof t[0]=="function"?n={next:t[0],error:t[1],complete:t[2]}:n={next:t[1],error:t[2],complete:t[3]},{next:o=>{n.next&&n.next(e(o))},error:(r=n.error)==null?void 0:r.bind(n),complete:(i=n.complete)==null?void 0:i.bind(n)}}class jg{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new po(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return SX(this._delegate,e._delegate)}}class Kg extends jg{data(e){const n=this._delegate.data(e);return this._delegate._converter||Ppe(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}}class Jr{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new qw(e)}where(e,n,r){try{return new Jr(this.firestore,co(this._delegate,dve(e,n,r)))}catch(i){throw Xr(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Jr(this.firestore,co(this._delegate,eb(e,n)))}catch(r){throw Xr(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Jr(this.firestore,co(this._delegate,hve(e)))}catch(n){throw Xr(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Jr(this.firestore,co(this._delegate,pve(e)))}catch(n){throw Xr(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Jr(this.firestore,co(this._delegate,mve(...e)))}catch(n){throw Xr(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Jr(this.firestore,co(this._delegate,gve(...e)))}catch(n){throw Xr(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Jr(this.firestore,co(this._delegate,yve(...e)))}catch(n){throw Xr(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Jr(this.firestore,co(this._delegate,vve(...e)))}catch(n){throw Xr(n,"endAt()","Query.endAt()")}}isEqual(e){return cX(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=Tve(this._delegate):(e==null?void 0:e.source)==="server"?n=xve(this._delegate):n=xk(this._delegate),n.then(r=>new mM(this.firestore,new Wo(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=MX(e),r=DX(e,i=>new mM(this.firestore,new Wo(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return tb(this._delegate,n,r)}withConverter(e){return new Jr(this.firestore,e?this._delegate.withConverter(Qc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class qve{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Kg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class mM{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Jr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Kg(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new qve(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Kg(this._firestore,r))})}isEqual(e){return SX(this._delegate,e._delegate)}}class ph extends Jr{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new po(this.firestore,e):null}doc(e){try{return e===void 0?new po(this.firestore,Ui(this._delegate)):new po(this.firestore,Ui(this._delegate,e))}catch(n){throw Xr(n,"doc()","CollectionReference.doc()")}}add(e){return Gg(this._delegate,e).then(n=>new po(this.firestore,n))}isEqual(e){return uX(this._delegate,e._delegate)}withConverter(e){return new ph(this.firestore,e?this._delegate.withConverter(Qc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Cc(t){return Et(t,Xt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(...e){this._delegate=new vu(...e)}static documentId(){return new Ck(cn.keyField().canonicalString())}isEqual(e){return e=Ke(e),e instanceof vu?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{static serverTimestamp(){const e=Ia();return e._methodName="FieldValue.serverTimestamp",new Tc(e)}static delete(){const e=Pve();return e._methodName="FieldValue.delete",new Tc(e)}static arrayUnion(...e){const n=Nve(...e);return n._methodName="FieldValue.arrayUnion",new Tc(n)}static arrayRemove(...e){const n=Mve(...e);return n._methodName="FieldValue.arrayRemove",new Tc(n)}static increment(e){const n=CX(e);return n._methodName="FieldValue.increment",new Tc(n)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fve={Firestore:RX,GeoPoint:Ko,Timestamp:Nt,Blob:IX,Transaction:PX,WriteBatch:NX,DocumentReference:po,DocumentSnapshot:jg,Query:Jr,QueryDocumentSnapshot:Kg,QuerySnapshot:mM,CollectionReference:ph,FieldPath:Ck,FieldValue:Tc,setLogLevel:Uve,CACHE_SIZE_UNLIMITED:Xye};function Bve(t,e){t.INTERNAL.registerComponent(new wo("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps({...Fve}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $ve(t){Bve(t,(e,n)=>new RX(e,n,new Vve)),t.registerVersion(kve,Ove)}$ve(ja);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kX="firebasestorage.googleapis.com",OX="storageBucket",zve=120*1e3,Hve=600*1e3,Gve=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn extends $r{constructor(e,n,r=0){super(mS(e),`Firebase Storage: ${n} (${mS(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,wn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return mS(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var on;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(on||(on={}));function mS(t){return"storage/"+t}function Ik(){const t="An unknown error occurred, please check the error payload for server response.";return new wn(on.UNKNOWN,t)}function jve(t){return new wn(on.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Kve(t){return new wn(on.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Wve(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new wn(on.UNAUTHENTICATED,t)}function Yve(){return new wn(on.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Jve(t){return new wn(on.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function LX(){return new wn(on.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function VX(){return new wn(on.CANCELED,"User canceled the upload/download.")}function Xve(t){return new wn(on.INVALID_URL,"Invalid URL '"+t+"'.")}function Qve(t){return new wn(on.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Zve(){return new wn(on.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+OX+"' property when initializing the app?")}function UX(){return new wn(on.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function e0e(){return new wn(on.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function t0e(){return new wn(on.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function n0e(t){return new wn(on.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Vd(t){return new wn(on.INVALID_ARGUMENT,t)}function qX(){return new wn(on.APP_DELETED,"The Firebase app was deleted.")}function FX(t){return new wn(on.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function vg(t,e){return new wn(on.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Am(t){throw new wn(on.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Fr.makeFromUrl(e,n)}catch{return new Fr(e,"")}if(r.path==="")return r;throw Qve(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),u={bucket:1,path:3};function c(P){P.path_=decodeURIComponent(P.path)}const f="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",_=new RegExp(`^https?://${h}/${f}/b/${i}/o${g}`,"i"),T={bucket:1,path:3},E=n===kX?"(?:storage.googleapis.com|storage.cloud.google.com)":n,b="([^?#]*)",S=new RegExp(`^https?://${E}/${i}/${b}`,"i"),R=[{regex:a,indices:u,postModify:o},{regex:_,indices:T,postModify:c},{regex:S,indices:{bucket:1,path:2},postModify:c}];for(let P=0;P<R.length;P++){const O=R[P],q=O.regex.exec(e);if(q){const D=q[O.indices.bucket];let L=q[O.indices.path];L||(L=""),r=new Fr(D,L),O.postModify(r);break}}if(r==null)throw Xve(e);return r}}class r0e{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0e(t,e,n){let r=1,i=null,o=null,s=!1,a=0;function u(){return a===2}let c=!1;function f(...b){c||(c=!0,e.apply(null,b))}function h(b){i=setTimeout(()=>{i=null,t(_,u())},b)}function g(){o&&clearTimeout(o)}function _(b,...S){if(c){g();return}if(b){g(),f.call(null,b,...S);return}if(u()||s){g(),f.call(null,b,...S);return}r<64&&(r*=2);let R;a===1?(a=2,R=0):R=(r+Math.random())*1e3,h(R)}let T=!1;function E(b){T||(T=!0,g(),!c&&(i!==null?(b||(a=2),clearTimeout(i),h(0)):b||(a=1)))}return h(0),o=setTimeout(()=>{s=!0,E(!0)},n),E}function o0e(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0e(t){return t!==void 0}function a0e(t){return typeof t=="function"}function l0e(t){return typeof t=="object"&&!Array.isArray(t)}function Fw(t){return typeof t=="string"||t instanceof String}function N3(t){return Rk()&&t instanceof Blob}function Rk(){return typeof Blob<"u"}function gM(t,e,n,r){if(r<e)throw Vd(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Vd(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function BX(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Oc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Oc||(Oc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $X(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0e{constructor(e,n,r,i,o,s,a,u,c,f,h,g=!0,_=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=f,this.connectionFactory_=h,this.retry=g,this.isUsingEmulator=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((T,E)=>{this.resolve_=T,this.reject_=E,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new I0(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const s=a=>{const u=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,c)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const a=o.getErrorCode()===Oc.NO_ERROR,u=o.getStatus();if(!a||$X(u,this.additionalRetryCodes_)&&this.retry){const f=o.getErrorCode()===Oc.ABORT;r(!1,new I0(!1,null,f));return}const c=this.successCodes_.indexOf(u)!==-1;r(!0,new I0(c,o))})},n=(r,i)=>{const o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());s0e(u)?o(u):o()}catch(u){s(u)}else if(a!==null){const u=Ik();u.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,u)):s(u)}else if(i.canceled){const u=this.appDelete_?qX():VX();s(u)}else{const u=LX();s(u)}};this.canceled_?n(!1,new I0(!1,null,!0)):this.backoffId_=i0e(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&o0e(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class I0{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function c0e(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function f0e(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function d0e(t,e){e&&(t["X-Firebase-GMPID"]=e)}function h0e(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function p0e(t,e,n,r,i,o,s=!0,a=!1){const u=BX(t.urlParams),c=t.url+u,f=Object.assign({},t.headers);return d0e(f,e),c0e(f,n),f0e(f,o),h0e(f,r),new u0e(c,t.method,f,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0e(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function g0e(...t){const e=m0e();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Rk())return new Blob(t);throw new wn(on.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function y0e(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0e(t){if(typeof atob>"u")throw n0e("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class gS{constructor(e,n){this.data=e,this.contentType=n||null}}function zX(t,e){switch(t){case mo.RAW:return new gS(HX(e));case mo.BASE64:case mo.BASE64URL:return new gS(GX(t,e));case mo.DATA_URL:return new gS(b0e(e),w0e(e))}throw Ik()}function HX(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=r,s=t.charCodeAt(++n);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function _0e(t){let e;try{e=decodeURIComponent(t)}catch{throw vg(mo.DATA_URL,"Malformed data URL.")}return HX(e)}function GX(t,e){switch(t){case mo.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw vg(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case mo.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw vg(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=v0e(e)}catch(i){throw i.message.includes("polyfill")?i:vg(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class jX{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw vg(mo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=E0e(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function b0e(t){const e=new jX(t);return e.base64?GX(mo.BASE64,e.rest):_0e(e.rest)}function w0e(t){return new jX(t).contentType}function E0e(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e,n){let r=0,i="";N3(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(N3(this.data_)){const r=this.data_,i=y0e(r,e,n);return i===null?null:new va(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new va(r,!0)}}static getBlob(...e){if(Rk()){const n=e.map(r=>r instanceof va?r.data_:r);return new va(g0e.apply(null,n))}else{const n=e.map(s=>Fw(s)?zX(mo.RAW,s).data:s.data_);let r=0;n.forEach(s=>{r+=s.byteLength});const i=new Uint8Array(r);let o=0;return n.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new va(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(t){let e;try{e=JSON.parse(t)}catch{return null}return l0e(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0e(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function x0e(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function KX(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0e(t,e){return e}class Wr{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||S0e}}let R0=null;function A0e(t){return!Fw(t)||t.length<2?t:KX(t)}function Bw(){if(R0)return R0;const t=[];t.push(new Wr("bucket")),t.push(new Wr("generation")),t.push(new Wr("metageneration")),t.push(new Wr("name","fullPath",!0));function e(o,s){return A0e(s)}const n=new Wr("name");n.xform=e,t.push(n);function r(o,s){return s!==void 0?Number(s):s}const i=new Wr("size");return i.xform=r,t.push(i),t.push(new Wr("timeCreated")),t.push(new Wr("updated")),t.push(new Wr("md5Hash",null,!0)),t.push(new Wr("cacheControl",null,!0)),t.push(new Wr("contentDisposition",null,!0)),t.push(new Wr("contentEncoding",null,!0)),t.push(new Wr("contentLanguage",null,!0)),t.push(new Wr("contentType",null,!0)),t.push(new Wr("metadata","customMetadata",!0)),R0=t,R0}function C0e(t,e){function n(){const r=t.bucket,i=t.fullPath,o=new Fr(r,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function I0e(t,e,n){const r={};r.type="file";const i=n.length;for(let o=0;o<i;o++){const s=n[o];r[s.local]=s.xform(r,e[s.server])}return C0e(r,t),r}function WX(t,e,n){const r=Pk(e);return r===null?null:I0e(t,r,n)}function R0e(t,e,n,r){const i=Pk(e);if(i===null||!Fw(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const s=encodeURIComponent;return o.split(",").map(c=>{const f=t.bucket,h=t.fullPath,g="/b/"+s(f)+"/o/"+s(h),_=Iu(g,n,r),T=BX({alt:"media",token:c});return _+T})[0]}function Nk(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M3="prefixes",D3="items";function P0e(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[M3])for(const i of n[M3]){const o=i.replace(/\/$/,""),s=t._makeStorageReference(new Fr(e,o));r.prefixes.push(s)}if(n[D3])for(const i of n[D3]){const o=t._makeStorageReference(new Fr(e,i.name));r.items.push(o)}return r}function N0e(t,e,n){const r=Pk(n);return r===null?null:P0e(t,e,r)}class Za{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(t){if(!t)throw Ik()}function $w(t,e){function n(r,i){const o=WX(t,i,e);return Us(o!==null),o}return n}function M0e(t,e){function n(r,i){const o=N0e(t,e,i);return Us(o!==null),o}return n}function D0e(t,e){function n(r,i){const o=WX(t,i,e);return Us(o!==null),R0e(o,i,t.host,t._protocol)}return n}function jh(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=Yve():i=Wve():n.getStatus()===402?i=Kve(t.bucket):n.getStatus()===403?i=Jve(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function zw(t){const e=jh(t);function n(r,i){let o=e(r,i);return r.getStatus()===404&&(o=jve(t.path)),o.serverResponse=i.serverResponse,o}return n}function YX(t,e,n){const r=e.fullServerUrl(),i=Iu(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,a=new Za(i,o,$w(t,n),s);return a.errorHandler=zw(e),a}function k0e(t,e,n,r,i){const o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);const s=e.bucketOnlyServerUrl(),a=Iu(s,t.host,t._protocol),u="GET",c=t.maxOperationRetryTime,f=new Za(a,u,M0e(t,e.bucket),c);return f.urlParams=o,f.errorHandler=jh(e),f}function O0e(t,e,n){const r=e.fullServerUrl(),i=Iu(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,a=new Za(i,o,D0e(t,n),s);return a.errorHandler=zw(e),a}function L0e(t,e,n,r){const i=e.fullServerUrl(),o=Iu(i,t.host,t._protocol),s="PATCH",a=Nk(n,r),u={"Content-Type":"application/json; charset=utf-8"},c=t.maxOperationRetryTime,f=new Za(o,s,$w(t,r),c);return f.headers=u,f.body=a,f.errorHandler=zw(e),f}function V0e(t,e){const n=e.fullServerUrl(),r=Iu(n,t.host,t._protocol),i="DELETE",o=t.maxOperationRetryTime;function s(u,c){}const a=new Za(r,i,s,o);return a.successCodes=[200,204],a.errorHandler=zw(e),a}function U0e(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function JX(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=U0e(null,e)),r}function q0e(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let R="";for(let P=0;P<2;P++)R=R+Math.random().toString().slice(2);return R}const u=a();s["Content-Type"]="multipart/related; boundary="+u;const c=JX(e,r,i),f=Nk(c,n),h="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+u+`\r
Content-Type: `+c.contentType+`\r
\r
`,g=`\r
--`+u+"--",_=va.getBlob(h,r,g);if(_===null)throw UX();const T={name:c.fullPath},E=Iu(o,t.host,t._protocol),b="POST",S=t.maxUploadRetryTime,C=new Za(E,b,$w(t,n),S);return C.urlParams=T,C.headers=s,C.body=_.uploadData(),C.errorHandler=jh(e),C}class nb{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function Mk(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Us(!1)}return Us(!!n&&(e||["active"]).indexOf(n)!==-1),n}function F0e(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),s=JX(e,r,i),a={name:s.fullPath},u=Iu(o,t.host,t._protocol),c="POST",f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},h=Nk(s,n),g=t.maxUploadRetryTime;function _(E){Mk(E);let b;try{b=E.getResponseHeader("X-Goog-Upload-URL")}catch{Us(!1)}return Us(Fw(b)),b}const T=new Za(u,c,_,g);return T.urlParams=a,T.headers=f,T.body=h,T.errorHandler=jh(e),T}function B0e(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function o(c){const f=Mk(c,["active","final"]);let h=null;try{h=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Us(!1)}h||Us(!1);const g=Number(h);return Us(!isNaN(g)),new nb(g,r.size(),f==="final")}const s="POST",a=t.maxUploadRetryTime,u=new Za(n,s,o,a);return u.headers=i,u.errorHandler=jh(e),u}const k3=256*1024;function $0e(t,e,n,r,i,o,s,a){const u=new nb(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw e0e();const c=u.total-u.current;let f=c;i>0&&(f=Math.min(f,i));const h=u.current,g=h+f;let _="";f===0?_="finalize":c===f?_="upload, finalize":_="upload";const T={"X-Goog-Upload-Command":_,"X-Goog-Upload-Offset":`${u.current}`},E=r.slice(h,g);if(E===null)throw UX();function b(P,O){const q=Mk(P,["active","final"]),D=u.current+f,L=r.size();let N;return q==="final"?N=$w(e,o)(P,O):N=null,new nb(D,L,q==="final",N)}const S="POST",C=e.maxUploadRetryTime,R=new Za(n,S,b,C);return R.headers=T,R.body=E.uploadData(),R.progressCallback=a||null,R.errorHandler=jh(t),R}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0e={STATE_CHANGED:"state_changed"},Qr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function yS(t){switch(t){case"running":case"pausing":case"canceling":return Qr.RUNNING;case"paused":return Qr.PAUSED;case"success":return Qr.SUCCESS;case"canceled":return Qr.CANCELED;case"error":return Qr.ERROR;default:return Qr.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0e{constructor(e,n,r){if(a0e(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function md(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class G0e{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Oc.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Oc.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Oc.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,o){if(this.sent_)throw Am("cannot .send() more than once");if(wu(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const s in o)o.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,o[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Am("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Am("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Am("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Am("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class j0e extends G0e{initXhr(){this.xhr_.responseType="text"}}function Ps(){return new j0e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XX{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=Bw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(on.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if($X(i.status,[]))if(o)i=LX();else{this.sleepTime=Math.max(this.sleepTime*2,Gve),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(on.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=F0e(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ps,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=B0e(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,Ps,n,r);this._request=o,o.getPromise().then(s=>{s=s,this._request=void 0,this._updateProgress(s.current),this._needToFetchStatus=!1,s.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=k3*this._chunkMultiplier,n=new nb(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let s;try{s=$0e(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(u){this._error=u,this._transition("error");return}const a=this._ref.storage._makeRequest(s,Ps,i,o,!1);this._request=a,a.getPromise().then(u=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(u.current),u.finalized?(this._metadata=u.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){k3*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=YX(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Ps,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=q0e(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ps,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=VX(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=yS(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const o=new H0e(n||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(yS(this._state)){case Qr.SUCCESS:md(this._resolve.bind(null,this.snapshot))();break;case Qr.CANCELED:case Qr.ERROR:const n=this._reject;md(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(yS(this._state)){case Qr.RUNNING:case Qr.PAUSED:e.next&&md(e.next.bind(e,this.snapshot))();break;case Qr.SUCCESS:e.complete&&md(e.complete.bind(e))();break;case Qr.CANCELED:case Qr.ERROR:e.error&&md(e.error.bind(e,this._error))();break;default:e.error&&md(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,n){this._service=e,n instanceof Fr?this._location=n:this._location=Fr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Zc(e,n)}get root(){const e=new Fr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return KX(this._location.path)}get storage(){return this._service}get parent(){const e=T0e(this._location.path);if(e===null)return null;const n=new Fr(this._location.bucket,e);return new Zc(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw FX(e)}}function K0e(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new XX(t,new va(e),n)}function W0e(t){const e={prefixes:[],items:[]};return QX(t,e).then(()=>e)}async function QX(t,e,n){const i=await ZX(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&await QX(t,e,i.nextPageToken)}function ZX(t,e){e!=null&&typeof e.maxResults=="number"&&gM("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=k0e(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,Ps)}function Y0e(t){t._throwIfRoot("getMetadata");const e=YX(t.storage,t._location,Bw());return t.storage.makeRequestWithTokens(e,Ps)}function J0e(t,e){t._throwIfRoot("updateMetadata");const n=L0e(t.storage,t._location,e,Bw());return t.storage.makeRequestWithTokens(n,Ps)}function X0e(t){t._throwIfRoot("getDownloadURL");const e=O0e(t.storage,t._location,Bw());return t.storage.makeRequestWithTokens(e,Ps).then(n=>{if(n===null)throw t0e();return n})}function Q0e(t){t._throwIfRoot("deleteObject");const e=V0e(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Ps)}function eQ(t,e){const n=x0e(t._location.path,e),r=new Fr(t._location.bucket,n);return new Zc(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0e(t){return/^[A-Za-z]+:\/\//.test(t)}function e_e(t,e){return new Zc(t,e)}function tQ(t,e){if(t instanceof Dk){const n=t;if(n._bucket==null)throw Zve();const r=new Zc(n,n._bucket);return e!=null?tQ(r,e):r}else return e!==void 0?eQ(t,e):t}function t_e(t,e){if(e&&Z0e(e)){if(t instanceof Dk)return e_e(t,e);throw Vd("To use ref(service, url), the first argument must be a Storage instance.")}else return tQ(t,e)}function O3(t,e){const n=e==null?void 0:e[OX];return n==null?null:Fr.makeFromBucketSpec(n,t)}function n_e(t,e,n,r={}){t.host=`${e}:${n}`;const i=wu(e);i&&(z2(`https://${t.host}/b`),H2("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:o}=r;o&&(t._overrideAuthToken=typeof o=="string"?o:SK(o,t.app.options.projectId))}class Dk{constructor(e,n,r,i,o,s=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=s,this._bucket=null,this._host=kX,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=zve,this._maxUploadRetryTime=Hve,this._requests=new Set,i!=null?this._bucket=Fr.makeFromBucketSpec(i,this._host):this._bucket=O3(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Fr.makeFromBucketSpec(this._url,e):this._bucket=O3(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){gM("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){gM("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(rn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Zc(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new r0e(qX());{const s=p0e(e,this._appId,r,i,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const L3="@firebase/storage",V3="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_e="storage";function i_e(t,e,n){return t=Ke(t),K0e(t,e,n)}function o_e(t){return t=Ke(t),Y0e(t)}function s_e(t,e){return t=Ke(t),J0e(t,e)}function a_e(t,e){return t=Ke(t),ZX(t,e)}function l_e(t){return t=Ke(t),W0e(t)}function u_e(t){return t=Ke(t),X0e(t)}function c_e(t){return t=Ke(t),Q0e(t)}function U3(t,e){return t=Ke(t),t_e(t,e)}function f_e(t,e){return eQ(t,e)}function d_e(t,e,n,r={}){n_e(t,e,n,r)}function h_e(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Dk(n,r,i,e,Ga)}function p_e(){Oa(new wo(r_e,h_e,"PUBLIC").setMultipleInstances(!0)),Vi(L3,V3,""),Vi(L3,V3,"esm2020")}p_e();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new P0(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new P0(r,this,this._ref))},n)}on(e,n,r,i){let o;return n&&(typeof n=="function"?o=s=>n(new P0(s,this,this._ref)):o={next:n.next?s=>n.next(new P0(s,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,o,r||void 0,i||void 0)}}class F3{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new Ra(e,this._service))}get items(){return this._delegate.items.map(e=>new Ra(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=f_e(this._delegate,e);return new Ra(n,this.storage)}get root(){return new Ra(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new Ra(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new q3(i_e(this._delegate,e,n),this)}putString(e,n=mo.RAW,r){this._throwIfRoot("putString");const i=zX(n,e),o={...r};return o.contentType==null&&i.contentType!=null&&(o.contentType=i.contentType),new q3(new XX(this._delegate,new va(i.data,!0),o),this)}listAll(){return l_e(this._delegate).then(e=>new F3(e,this.storage))}list(e){return a_e(this._delegate,e||void 0).then(n=>new F3(n,this.storage))}getMetadata(){return o_e(this._delegate)}updateMetadata(e){return s_e(this._delegate,e)}getDownloadURL(){return u_e(this._delegate)}delete(){return this._throwIfRoot("delete"),c_e(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw FX(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nQ{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(B3(e))throw Vd("ref() expected a child path but got a URL, use refFromURL instead.");return new Ra(U3(this._delegate,e),this)}refFromURL(e){if(!B3(e))throw Vd("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Fr.makeFromUrl(e,this._delegate.host)}catch{throw Vd("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ra(U3(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){d_e(this._delegate,e,n,r)}}function B3(t){return/^[A-Za-z]+:\/\//.test(t)}const m_e="@firebase/storage-compat",g_e="0.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_e="storage-compat";function v_e(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new nQ(n,r)}function __e(t){const e={TaskState:Qr,TaskEvent:z0e,StringFormat:mo,Storage:nQ,Reference:Ra};t.INTERNAL.registerComponent(new wo(y_e,v_e,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(m_e,g_e)}__e(ja);const b_e={apiKey:"AIzaSyCZh_PwX7LZfXujZiHGH9T-8uA17hNQGBY",authDomain:"bkomhate-site.firebaseapp.com",projectId:"bkomhate-site",storageBucket:"bkomhate-site.firebasestorage.app",messagingSenderId:"37549082348",appId:"1:37549082348:web:cf0c6c4f504b40192887c9"},w_e=ja.initializeApp(b_e),_g=ja.auth(),Tr=Qye(w_e),E_e=ja.storage(),rQ=M.createContext({currentUser:null,loading:!0}),T_e=()=>M.useContext(rQ),x_e=({children:t})=>{const[e,n]=M.useState(null),[r,i]=M.useState(!0);M.useEffect(()=>_g.onAuthStateChanged(a=>{n(a),i(!1)}),[]);const o={currentUser:e,loading:r};return I.jsx(rQ.Provider,{value:o,children:t})};function iQ(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=iQ(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function sn(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=iQ(t))&&(r&&(r+=" "),r+=e);return r}var vS={},_S={},$3;function S_e(){return $3||($3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(_S)),_S}var bS={},z3;function oQ(){return z3||(z3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(bS)),bS}var wS={},H3;function sQ(){return H3||(H3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}t.toKey=e})(wS)),wS}var ES={},G3;function kk(){return G3||(G3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){const r=[],i=n.length;if(i===0)return r;let o=0,s="",a="",u=!1;for(n.charCodeAt(0)===46&&(r.push(""),o++);o<i;){const c=n[o];a?c==="\\"&&o+1<i?(o++,s+=n[o]):c===a?a="":s+=c:u?c==='"'||c==="'"?a=c:c==="]"?(u=!1,r.push(s),s=""):s+=c:c==="["?(u=!0,s&&(r.push(s),s="")):c==="."?s&&(r.push(s),s=""):s+=c,o++}return s&&r.push(s),r}t.toPath=e})(ES)),ES}var j3;function Ok(){return j3||(j3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=S_e(),n=oQ(),r=sQ(),i=kk();function o(a,u,c){if(a==null)return c;switch(typeof u){case"string":{if(e.isUnsafeProperty(u))return c;const f=a[u];return f===void 0?n.isDeepKey(u)?o(a,i.toPath(u),c):c:f}case"number":case"symbol":{typeof u=="number"&&(u=r.toKey(u));const f=a[u];return f===void 0?c:f}default:{if(Array.isArray(u))return s(a,u,c);if(Object.is(u==null?void 0:u.valueOf(),-0)?u="-0":u=String(u),e.isUnsafeProperty(u))return c;const f=a[u];return f===void 0?c:f}}}function s(a,u,c){if(u.length===0)return c;let f=a;for(let h=0;h<u.length;h++){if(f==null||e.isUnsafeProperty(u[h]))return c;f=f[u[h]]}return f===void 0?c:f}t.get=o})(vS)),vS}var TS,K3;function A_e(){return K3||(K3=1,TS=Ok().get),TS}var C_e=A_e();const mh=Ao(C_e);var xS={exports:{}},Gt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W3;function I_e(){if(W3)return Gt;W3=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),s=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),c=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),g=Symbol.for("react.view_transition"),_=Symbol.for("react.client.reference");function T(E){if(typeof E=="object"&&E!==null){var b=E.$$typeof;switch(b){case t:switch(E=E.type,E){case n:case i:case r:case u:case c:case g:return E;default:switch(E=E&&E.$$typeof,E){case s:case a:case h:case f:return E;case o:return E;default:return b}}case e:return b}}}return Gt.ContextConsumer=o,Gt.ContextProvider=s,Gt.Element=t,Gt.ForwardRef=a,Gt.Fragment=n,Gt.Lazy=h,Gt.Memo=f,Gt.Portal=e,Gt.Profiler=i,Gt.StrictMode=r,Gt.Suspense=u,Gt.SuspenseList=c,Gt.isContextConsumer=function(E){return T(E)===o},Gt.isContextProvider=function(E){return T(E)===s},Gt.isElement=function(E){return typeof E=="object"&&E!==null&&E.$$typeof===t},Gt.isForwardRef=function(E){return T(E)===a},Gt.isFragment=function(E){return T(E)===n},Gt.isLazy=function(E){return T(E)===h},Gt.isMemo=function(E){return T(E)===f},Gt.isPortal=function(E){return T(E)===e},Gt.isProfiler=function(E){return T(E)===i},Gt.isStrictMode=function(E){return T(E)===r},Gt.isSuspense=function(E){return T(E)===u},Gt.isSuspenseList=function(E){return T(E)===c},Gt.isValidElementType=function(E){return typeof E=="string"||typeof E=="function"||E===n||E===i||E===r||E===u||E===c||typeof E=="object"&&E!==null&&(E.$$typeof===h||E.$$typeof===f||E.$$typeof===s||E.$$typeof===o||E.$$typeof===a||E.$$typeof===_||E.getModuleId!==void 0)},Gt.typeOf=T,Gt}var Y3;function R_e(){return Y3||(Y3=1,xS.exports=I_e()),xS.exports}var P_e=R_e(),Oi=t=>t===0?0:t>0?1:-1,To=t=>typeof t=="number"&&t!=+t,Ic=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,it=t=>(typeof t=="number"||t instanceof Number)&&!To(t),zs=t=>it(t)||typeof t=="string",N_e=0,Wg=t=>{var e=++N_e;return"".concat(t||"").concat(e)},Xo=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!it(e)&&typeof e!="string")return r;var o;if(Ic(e)){if(n==null)return r;var s=e.indexOf("%");o=n*parseFloat(e.slice(0,s))/100}else o=+e;return To(o)&&(o=r),i&&n!=null&&o>n&&(o=n),o},aQ=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[t[r]])n[t[r]]=!0;else return!0;return!1};function Zr(t,e,n){return it(t)&&it(e)?t+n*(e-t):e}function M_e(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):mh(r,e))===n)}var hr=t=>t===null||typeof t>"u",ky=t=>hr(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1)),D_e=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Lk(t){if(typeof t!="string")return!1;var e=D_e;return e.includes(t)}var k_e=["viewBox","children"],J3=["points","pathLength"],SS={svg:k_e,polygon:J3,polyline:J3},O_e=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(M.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{Lk(i)&&(r[i]=(o=>n[i](n,o)))}),r},L_e=(t,e,n)=>r=>(t(e,n,r),null),Vk=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var o=t[i];Lk(i)&&typeof o=="function"&&(r||(r={}),r[i]=L_e(o,e,n))}),r},V_e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function lQ(t){if(typeof t!="string")return!1;var e=V_e;return e.includes(t)}function Oy(t){var e=Object.entries(t).filter(n=>{var[r]=n;return lQ(r)});return Object.fromEntries(e)}var X3=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",Q3=null,AS=null,uQ=t=>{if(t===Q3&&Array.isArray(AS))return AS;var e=[];return M.Children.forEach(t,n=>{hr(n)||(P_e.isFragment(n)?e=e.concat(uQ(n.props.children)):e.push(n))}),AS=e,Q3=t,e};function U_e(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>X3(i)):r=[X3(e)],uQ(t).forEach(i=>{var o=mh(i,"type.displayName")||mh(i,"type.name");r.indexOf(o)!==-1&&n.push(i)}),n}var q_e=(t,e,n,r)=>{var i;if(typeof e=="symbol"||typeof e=="number")return!0;var o=(i=r&&(SS==null?void 0:SS[r]))!==null&&i!==void 0?i:[],s=e.startsWith("data-"),a=typeof t!="function"&&(!!r&&o.includes(e)||lQ(e)),u=!!n&&Lk(e);return s||a||u},Pr=(t,e,n)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(M.isValidElement(t)&&(r=t.props),typeof r!="object"&&typeof r!="function")return null;var i={};return Object.keys(r).forEach(o=>{var s;q_e((s=r)===null||s===void 0?void 0:s[o],o,e,n)&&(i[o]=r[o])}),i},F_e=["children","width","height","viewBox","className","style","title","desc"];function yM(){return yM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yM.apply(null,arguments)}function B_e(t,e){if(t==null)return{};var n,r,i=$_e(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function $_e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var cQ=M.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:o,className:s,style:a,title:u,desc:c}=t,f=B_e(t,F_e),h=o||{width:r,height:i,x:0,y:0},g=sn("recharts-surface",s);return M.createElement("svg",yM({},Pr(f,!0,"svg"),{className:g,width:r,height:i,style:a,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:e}),M.createElement("title",null,u),M.createElement("desc",null,c),n)}),z_e=["children","className"];function vM(){return vM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vM.apply(null,arguments)}function H_e(t,e){if(t==null)return{};var n,r,i=G_e(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function G_e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var _u=M.forwardRef((t,e)=>{var{children:n,className:r}=t,i=H_e(t,z_e),o=sn("recharts-layer",r);return M.createElement("g",vM({className:o},Pr(i,!0),{ref:e}),n)}),j_e=M.createContext(null);function Jt(t){return function(){return t}}const fQ=Math.cos,rb=Math.sin,ts=Math.sqrt,ib=Math.PI,Hw=2*ib,_M=Math.PI,bM=2*_M,mc=1e-6,K_e=bM-mc;function dQ(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function W_e(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return dQ;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Y_e{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?dQ:W_e(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,u=r-e,c=i-n,f=s-e,h=a-n,g=f*f+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(g>mc)if(!(Math.abs(h*u-c*f)>mc)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let _=r-s,T=i-a,E=u*u+c*c,b=_*_+T*T,S=Math.sqrt(E),C=Math.sqrt(g),R=o*Math.tan((_M-Math.acos((E+g-b)/(2*S*C)))/2),P=R/C,O=R/S;Math.abs(P-1)>mc&&this._append`L${e+P*f},${n+P*h}`,this._append`A${o},${o},0,0,${+(h*_>f*T)},${this._x1=e+O*u},${this._y1=n+O*c}`}}arc(e,n,r,i,o,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),c=e+a,f=n+u,h=1^s,g=s?i-o:o-i;this._x1===null?this._append`M${c},${f}`:(Math.abs(this._x1-c)>mc||Math.abs(this._y1-f)>mc)&&this._append`L${c},${f}`,r&&(g<0&&(g=g%bM+bM),g>K_e?this._append`A${r},${r},0,1,${h},${e-a},${n-u}A${r},${r},0,1,${h},${this._x1=c},${this._y1=f}`:g>mc&&this._append`A${r},${r},0,${+(g>=_M)},${h},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Uk(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Y_e(e)}function qk(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function hQ(t){this._context=t}hQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Gw(t){return new hQ(t)}function pQ(t){return t[0]}function mQ(t){return t[1]}function gQ(t,e){var n=Jt(!0),r=null,i=Gw,o=null,s=Uk(a);t=typeof t=="function"?t:t===void 0?pQ:Jt(t),e=typeof e=="function"?e:e===void 0?mQ:Jt(e);function a(u){var c,f=(u=qk(u)).length,h,g=!1,_;for(r==null&&(o=i(_=s())),c=0;c<=f;++c)!(c<f&&n(h=u[c],c,u))===g&&((g=!g)?o.lineStart():o.lineEnd()),g&&o.point(+t(h,c,u),+e(h,c,u));if(_)return o=null,_+""||null}return a.x=function(u){return arguments.length?(t=typeof u=="function"?u:Jt(+u),a):t},a.y=function(u){return arguments.length?(e=typeof u=="function"?u:Jt(+u),a):e},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Jt(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(o=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=o=null:o=i(r=u),a):r},a}function N0(t,e,n){var r=null,i=Jt(!0),o=null,s=Gw,a=null,u=Uk(c);t=typeof t=="function"?t:t===void 0?pQ:Jt(+t),e=typeof e=="function"?e:Jt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?mQ:Jt(+n);function c(h){var g,_,T,E=(h=qk(h)).length,b,S=!1,C,R=new Array(E),P=new Array(E);for(o==null&&(a=s(C=u())),g=0;g<=E;++g){if(!(g<E&&i(b=h[g],g,h))===S)if(S=!S)_=g,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),T=g-1;T>=_;--T)a.point(R[T],P[T]);a.lineEnd(),a.areaEnd()}S&&(R[g]=+t(b,g,h),P[g]=+e(b,g,h),a.point(r?+r(b,g,h):R[g],n?+n(b,g,h):P[g]))}if(C)return a=null,C+""||null}function f(){return gQ().defined(i).curve(s).context(o)}return c.x=function(h){return arguments.length?(t=typeof h=="function"?h:Jt(+h),r=null,c):t},c.x0=function(h){return arguments.length?(t=typeof h=="function"?h:Jt(+h),c):t},c.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:Jt(+h),c):r},c.y=function(h){return arguments.length?(e=typeof h=="function"?h:Jt(+h),n=null,c):e},c.y0=function(h){return arguments.length?(e=typeof h=="function"?h:Jt(+h),c):e},c.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Jt(+h),c):n},c.lineX0=c.lineY0=function(){return f().x(t).y(e)},c.lineY1=function(){return f().x(t).y(n)},c.lineX1=function(){return f().x(r).y(e)},c.defined=function(h){return arguments.length?(i=typeof h=="function"?h:Jt(!!h),c):i},c.curve=function(h){return arguments.length?(s=h,o!=null&&(a=s(o)),c):s},c.context=function(h){return arguments.length?(h==null?o=a=null:a=s(o=h),c):o},c}class yQ{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function J_e(t){return new yQ(t,!0)}function X_e(t){return new yQ(t,!1)}const Fk={draw(t,e){const n=ts(e/ib);t.moveTo(n,0),t.arc(0,0,n,0,Hw)}},Q_e={draw(t,e){const n=ts(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},vQ=ts(1/3),Z_e=vQ*2,ebe={draw(t,e){const n=ts(e/Z_e),r=n*vQ;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},tbe={draw(t,e){const n=ts(e),r=-n/2;t.rect(r,r,n,n)}},nbe=.8908130915292852,_Q=rb(ib/10)/rb(7*ib/10),rbe=rb(Hw/10)*_Q,ibe=-fQ(Hw/10)*_Q,obe={draw(t,e){const n=ts(e*nbe),r=rbe*n,i=ibe*n;t.moveTo(0,-n),t.lineTo(r,i);for(let o=1;o<5;++o){const s=Hw*o/5,a=fQ(s),u=rb(s);t.lineTo(u*n,-a*n),t.lineTo(a*r-u*i,u*r+a*i)}t.closePath()}},CS=ts(3),sbe={draw(t,e){const n=-ts(e/(CS*3));t.moveTo(0,n*2),t.lineTo(-CS*n,-n),t.lineTo(CS*n,-n),t.closePath()}},ao=-.5,lo=ts(3)/2,wM=1/ts(12),abe=(wM/2+1)*3,lbe={draw(t,e){const n=ts(e/abe),r=n/2,i=n*wM,o=r,s=n*wM+n,a=-o,u=s;t.moveTo(r,i),t.lineTo(o,s),t.lineTo(a,u),t.lineTo(ao*r-lo*i,lo*r+ao*i),t.lineTo(ao*o-lo*s,lo*o+ao*s),t.lineTo(ao*a-lo*u,lo*a+ao*u),t.lineTo(ao*r+lo*i,ao*i-lo*r),t.lineTo(ao*o+lo*s,ao*s-lo*o),t.lineTo(ao*a+lo*u,ao*u-lo*a),t.closePath()}};function ube(t,e){let n=null,r=Uk(i);t=typeof t=="function"?t:Jt(t||Fk),e=typeof e=="function"?e:Jt(e===void 0?64:+e);function i(){let o;if(n||(n=o=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(t=typeof o=="function"?o:Jt(o),i):t},i.size=function(o){return arguments.length?(e=typeof o=="function"?o:Jt(+o),i):e},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function ob(){}function sb(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function bQ(t){this._context=t}bQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:sb(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:sb(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function cbe(t){return new bQ(t)}function wQ(t){this._context=t}wQ.prototype={areaStart:ob,areaEnd:ob,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:sb(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function fbe(t){return new wQ(t)}function EQ(t){this._context=t}EQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:sb(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function dbe(t){return new EQ(t)}function TQ(t){this._context=t}TQ.prototype={areaStart:ob,areaEnd:ob,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function hbe(t){return new TQ(t)}function Z3(t){return t<0?-1:1}function eB(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),a=(o*i+s*r)/(r+i);return(Z3(o)+Z3(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function tB(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function IS(t,e,n){var r=t._x0,i=t._y0,o=t._x1,s=t._y1,a=(o-r)/3;t._context.bezierCurveTo(r+a,i+a*e,o-a,s-a*n,o,s)}function ab(t){this._context=t}ab.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:IS(this,this._t0,tB(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,IS(this,tB(this,n=eB(this,t,e)),n);break;default:IS(this,this._t0,n=eB(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function xQ(t){this._context=new SQ(t)}(xQ.prototype=Object.create(ab.prototype)).point=function(t,e){ab.prototype.point.call(this,e,t)};function SQ(t){this._context=t}SQ.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}};function pbe(t){return new ab(t)}function mbe(t){return new xQ(t)}function AQ(t){this._context=t}AQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=nB(t),i=nB(e),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function nB(t){var e,n=t.length-1,r,i=new Array(n),o=new Array(n),s=new Array(n);for(i[0]=0,o[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,o[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,o[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/o[e-1],o[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/o[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/o[e];for(o[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function gbe(t){return new AQ(t)}function jw(t,e){this._context=t,this._t=e}jw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function ybe(t){return new jw(t,.5)}function vbe(t){return new jw(t,0)}function _be(t){return new jw(t,1)}function gh(t,e){if((s=t.length)>1)for(var n=1,r,i,o=t[e[0]],s,a=o.length;n<s;++n)for(i=o,o=t[e[n]],r=0;r<a;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function EM(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function bbe(t,e){return t[e]}function wbe(t){const e=[];return e.key=t,e}function Ebe(){var t=Jt([]),e=EM,n=gh,r=bbe;function i(o){var s=Array.from(t.apply(this,arguments),wbe),a,u=s.length,c=-1,f;for(const h of o)for(a=0,++c;a<u;++a)(s[a][c]=[0,+r(h,s[a].key,c,o)]).data=h;for(a=0,f=qk(e(s));a<u;++a)s[f[a]].index=a;return n(s,f),s}return i.keys=function(o){return arguments.length?(t=typeof o=="function"?o:Jt(Array.from(o)),i):t},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:Jt(+o),i):r},i.order=function(o){return arguments.length?(e=o==null?EM:typeof o=="function"?o:Jt(Array.from(o)),i):e},i.offset=function(o){return arguments.length?(n=o??gh,i):n},i}function Tbe(t,e){if((r=t.length)>0){for(var n,r,i=0,o=t[0].length,s;i<o;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}gh(t,e)}}function xbe(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,o=r.length;n<o;++n){for(var s=0,a=0;s<i;++s)a+=t[s][n][1]||0;r[n][1]+=r[n][0]=-a/2}gh(t,e)}}function Sbe(t,e){if(!(!((s=t.length)>0)||!((o=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,o,s;r<o;++r){for(var a=0,u=0,c=0;a<s;++a){for(var f=t[e[a]],h=f[r][1]||0,g=f[r-1][1]||0,_=(h-g)/2,T=0;T<a;++T){var E=t[e[T]],b=E[r][1]||0,S=E[r-1][1]||0;_+=b-S}u+=h,c+=_*h}i[r-1][1]+=i[r-1][0]=n,u&&(n-=c/u)}i[r-1][1]+=i[r-1][0]=n,gh(t,e)}}var Abe=["type","size","sizeType"];function TM(){return TM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TM.apply(null,arguments)}function rB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function iB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rB(Object(n),!0).forEach(function(r){Cbe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Cbe(t,e,n){return(e=Ibe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ibe(t){var e=Rbe(t,"string");return typeof e=="symbol"?e:e+""}function Rbe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Pbe(t,e){if(t==null)return{};var n,r,i=Nbe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Nbe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var CQ={symbolCircle:Fk,symbolCross:Q_e,symbolDiamond:ebe,symbolSquare:tbe,symbolStar:obe,symbolTriangle:sbe,symbolWye:lbe},Mbe=Math.PI/180,Dbe=t=>{var e="symbol".concat(ky(t));return CQ[e]||Fk},kbe=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*Mbe;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Obe=(t,e)=>{CQ["symbol".concat(ky(t))]=e},IQ=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=Pbe(t,Abe),o=iB(iB({},i),{},{type:e,size:n,sizeType:r}),s="circle";typeof e=="string"&&(s=e);var a=()=>{var g=Dbe(s),_=ube().type(g).size(kbe(n,r,s));return _()},{className:u,cx:c,cy:f}=o,h=Pr(o,!0);return c===+c&&f===+f&&n===+n?M.createElement("path",TM({},h,{className:sn("recharts-symbols",u),transform:"translate(".concat(c,", ").concat(f,")"),d:a()})):null};IQ.registerSymbol=Obe;var RS={},PS={},oB;function Lbe(){return oB||(oB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let o=0;o<n.length;o++){const s=n[o],a=r(s);i.has(a)||i.set(a,s)}return Array.from(i.values())}t.uniqBy=e})(PS)),PS}var NS={},sB;function RQ(){return sB||(sB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(NS)),NS}var MS={},DS={},kS={},aB;function Vbe(){return aB||(aB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(kS)),kS}var lB;function Bk(){return lB||(lB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Vbe();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(DS)),DS}var OS={},uB;function Ube(){return uB||(uB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(OS)),OS}var cB;function qbe(){return cB||(cB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Bk(),n=Ube();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(MS)),MS}var LS={},VS={},fB;function Fbe(){return fB||(fB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Ok();function n(r){return function(i){return e.get(i,r)}}t.property=n})(VS)),VS}var US={},qS={},FS={},BS={},dB;function PQ(){return dB||(dB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(BS)),BS}var $S={},hB;function NQ(){return hB||(hB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})($S)),$S}var zS={},pB;function MQ(){return pB||(pB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.eq=e})(zS)),zS}var mB;function Bbe(){return mB||(mB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$k(),n=PQ(),r=NQ(),i=MQ();function o(h,g,_){return typeof _!="function"?e.isMatch(h,g):s(h,g,function T(E,b,S,C,R,P){const O=_(E,b,S,C,R,P);return O!==void 0?!!O:s(E,b,T,P)},new Map)}function s(h,g,_,T){if(g===h)return!0;switch(typeof g){case"object":return a(h,g,_,T);case"function":return Object.keys(g).length>0?s(h,{...g},_,T):i.eq(h,g);default:return n.isObject(h)?typeof g=="string"?g==="":!0:i.eq(h,g)}}function a(h,g,_,T){if(g==null)return!0;if(Array.isArray(g))return c(h,g,_,T);if(g instanceof Map)return u(h,g,_,T);if(g instanceof Set)return f(h,g,_,T);const E=Object.keys(g);if(h==null)return E.length===0;if(E.length===0)return!0;if(T&&T.has(g))return T.get(g)===h;T&&T.set(g,h);try{for(let b=0;b<E.length;b++){const S=E[b];if(!r.isPrimitive(h)&&!(S in h)||g[S]===void 0&&h[S]!==void 0||g[S]===null&&h[S]!==null||!_(h[S],g[S],S,h,g,T))return!1}return!0}finally{T&&T.delete(g)}}function u(h,g,_,T){if(g.size===0)return!0;if(!(h instanceof Map))return!1;for(const[E,b]of g.entries()){const S=h.get(E);if(_(S,b,E,h,g,T)===!1)return!1}return!0}function c(h,g,_,T){if(g.length===0)return!0;if(!Array.isArray(h))return!1;const E=new Set;for(let b=0;b<g.length;b++){const S=g[b];let C=!1;for(let R=0;R<h.length;R++){if(E.has(R))continue;const P=h[R];let O=!1;if(_(P,S,b,h,g,T)&&(O=!0),O){E.add(R),C=!0;break}}if(!C)return!1}return!0}function f(h,g,_,T){return g.size===0?!0:h instanceof Set?c([...h],[...g],_,T):!1}t.isMatchWith=o,t.isSetMatch=f})(FS)),FS}var gB;function $k(){return gB||(gB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Bbe();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(qS)),qS}var HS={},GS={},jS={},yB;function $be(){return yB||(yB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(jS)),jS}var KS={},vB;function DQ(){return vB||(vB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(KS)),KS}var WS={},_B;function kQ(){return _B||(_B=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",o="[object Arguments]",s="[object Symbol]",a="[object Date]",u="[object Map]",c="[object Set]",f="[object Array]",h="[object Function]",g="[object ArrayBuffer]",_="[object Object]",T="[object Error]",E="[object DataView]",b="[object Uint8Array]",S="[object Uint8ClampedArray]",C="[object Uint16Array]",R="[object Uint32Array]",P="[object BigUint64Array]",O="[object Int8Array]",q="[object Int16Array]",D="[object Int32Array]",L="[object BigInt64Array]",N="[object Float32Array]",U="[object Float64Array]";t.argumentsTag=o,t.arrayBufferTag=g,t.arrayTag=f,t.bigInt64ArrayTag=L,t.bigUint64ArrayTag=P,t.booleanTag=i,t.dataViewTag=E,t.dateTag=a,t.errorTag=T,t.float32ArrayTag=N,t.float64ArrayTag=U,t.functionTag=h,t.int16ArrayTag=q,t.int32ArrayTag=D,t.int8ArrayTag=O,t.mapTag=u,t.numberTag=r,t.objectTag=_,t.regexpTag=e,t.setTag=c,t.stringTag=n,t.symbolTag=s,t.uint16ArrayTag=C,t.uint32ArrayTag=R,t.uint8ArrayTag=b,t.uint8ClampedArrayTag=S})(WS)),WS}var YS={},bB;function zbe(){return bB||(bB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(YS)),YS}var wB;function OQ(){return wB||(wB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$be(),n=DQ(),r=kQ(),i=NQ(),o=zbe();function s(f,h){return a(f,void 0,f,new Map,h)}function a(f,h,g,_=new Map,T=void 0){const E=T==null?void 0:T(f,h,g,_);if(E!==void 0)return E;if(i.isPrimitive(f))return f;if(_.has(f))return _.get(f);if(Array.isArray(f)){const b=new Array(f.length);_.set(f,b);for(let S=0;S<f.length;S++)b[S]=a(f[S],S,g,_,T);return Object.hasOwn(f,"index")&&(b.index=f.index),Object.hasOwn(f,"input")&&(b.input=f.input),b}if(f instanceof Date)return new Date(f.getTime());if(f instanceof RegExp){const b=new RegExp(f.source,f.flags);return b.lastIndex=f.lastIndex,b}if(f instanceof Map){const b=new Map;_.set(f,b);for(const[S,C]of f)b.set(S,a(C,S,g,_,T));return b}if(f instanceof Set){const b=new Set;_.set(f,b);for(const S of f)b.add(a(S,void 0,g,_,T));return b}if(typeof Buffer<"u"&&Buffer.isBuffer(f))return f.subarray();if(o.isTypedArray(f)){const b=new(Object.getPrototypeOf(f)).constructor(f.length);_.set(f,b);for(let S=0;S<f.length;S++)b[S]=a(f[S],S,g,_,T);return b}if(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer)return f.slice(0);if(f instanceof DataView){const b=new DataView(f.buffer.slice(0),f.byteOffset,f.byteLength);return _.set(f,b),u(b,f,g,_,T),b}if(typeof File<"u"&&f instanceof File){const b=new File([f],f.name,{type:f.type});return _.set(f,b),u(b,f,g,_,T),b}if(f instanceof Blob){const b=new Blob([f],{type:f.type});return _.set(f,b),u(b,f,g,_,T),b}if(f instanceof Error){const b=new f.constructor;return _.set(f,b),b.message=f.message,b.name=f.name,b.stack=f.stack,b.cause=f.cause,u(b,f,g,_,T),b}if(typeof f=="object"&&c(f)){const b=Object.create(Object.getPrototypeOf(f));return _.set(f,b),u(b,f,g,_,T),b}return f}function u(f,h,g=f,_,T){const E=[...Object.keys(h),...e.getSymbols(h)];for(let b=0;b<E.length;b++){const S=E[b],C=Object.getOwnPropertyDescriptor(f,S);(C==null||C.writable)&&(f[S]=a(h[S],S,g,_,T))}}function c(f){switch(n.getTag(f)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=s,t.cloneDeepWithImpl=a,t.copyProperties=u})(GS)),GS}var EB;function Hbe(){return EB||(EB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=OQ();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(HS)),HS}var TB;function Gbe(){return TB||(TB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$k(),n=Hbe();function r(i){return i=n.cloneDeep(i),o=>e.isMatch(o,i)}t.matches=r})(US)),US}var JS={},XS={},QS={},xB;function jbe(){return xB||(xB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=OQ(),n=kQ();function r(i,o){return e.cloneDeepWith(i,(s,a,u,c)=>{const f=o==null?void 0:o(s,a,u,c);if(f!==void 0)return f;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const h=new i.constructor(i==null?void 0:i.valueOf());return e.copyProperties(h,i),h}case n.argumentsTag:{const h={};return e.copyProperties(h,i),h.length=i.length,h[Symbol.iterator]=i[Symbol.iterator],h}default:return}})}t.cloneDeepWith=r})(QS)),QS}var SB;function Kbe(){return SB||(SB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=jbe();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(XS)),XS}var ZS={},eA={},AB;function LQ(){return AB||(AB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(eA)),eA}var tA={},CB;function Wbe(){return CB||(CB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=DQ();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(tA)),tA}var IB;function Ybe(){return IB||(IB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=oQ(),n=LQ(),r=Wbe(),i=kk();function o(s,a){let u;if(Array.isArray(a)?u=a:typeof a=="string"&&e.isDeepKey(a)&&(s==null?void 0:s[a])==null?u=i.toPath(a):u=[a],u.length===0)return!1;let c=s;for(let f=0;f<u.length;f++){const h=u[f];if((c==null||!Object.hasOwn(c,h))&&!((Array.isArray(c)||r.isArguments(c))&&n.isIndex(h)&&h<c.length))return!1;c=c[h]}return!0}t.has=o})(ZS)),ZS}var RB;function Jbe(){return RB||(RB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$k(),n=sQ(),r=Kbe(),i=Ok(),o=Ybe();function s(a,u){switch(typeof a){case"object":{Object.is(a==null?void 0:a.valueOf(),-0)&&(a="-0");break}case"number":{a=n.toKey(a);break}}return u=r.cloneDeep(u),function(c){const f=i.get(c,a);return f===void 0?o.has(c,a):u===void 0?f===void 0:e.isMatch(f,u)}}t.matchesProperty=s})(JS)),JS}var PB;function Xbe(){return PB||(PB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=RQ(),n=Fbe(),r=Gbe(),i=Jbe();function o(s){if(s==null)return e.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?i.matchesProperty(s[0],s[1]):r.matches(s);case"string":case"symbol":case"number":return n.property(s)}}t.iteratee=o})(LS)),LS}var NB;function Qbe(){return NB||(NB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Lbe(),n=RQ(),r=qbe(),i=Xbe();function o(s,a=n.identity){return r.isArrayLikeObject(s)?e.uniqBy(Array.from(s),i.iteratee(a)):[]}t.uniqBy=o})(RS)),RS}var nA,MB;function Zbe(){return MB||(MB=1,nA=Qbe().uniqBy),nA}var ewe=Zbe();const DB=Ao(ewe);function twe(t,e,n){return e===!0?DB(t,n):typeof e=="function"?DB(t,e):t}var rA={exports:{}},iA={},oA={exports:{}},sA={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kB;function nwe(){if(kB)return sA;kB=1;var t=Ph();function e(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,o=t.useLayoutEffect,s=t.useDebugValue;function a(h,g){var _=g(),T=r({inst:{value:_,getSnapshot:g}}),E=T[0].inst,b=T[1];return o(function(){E.value=_,E.getSnapshot=g,u(E)&&b({inst:E})},[h,_,g]),i(function(){return u(E)&&b({inst:E}),h(function(){u(E)&&b({inst:E})})},[h]),s(_),_}function u(h){var g=h.getSnapshot;h=h.value;try{var _=g();return!n(h,_)}catch{return!0}}function c(h,g){return g()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return sA.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:f,sA}var OB;function rwe(){return OB||(OB=1,oA.exports=nwe()),oA.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LB;function iwe(){if(LB)return iA;LB=1;var t=Ph(),e=rwe();function n(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,o=t.useRef,s=t.useEffect,a=t.useMemo,u=t.useDebugValue;return iA.useSyncExternalStoreWithSelector=function(c,f,h,g,_){var T=o(null);if(T.current===null){var E={hasValue:!1,value:null};T.current=E}else E=T.current;T=a(function(){function S(q){if(!C){if(C=!0,R=q,q=g(q),_!==void 0&&E.hasValue){var D=E.value;if(_(D,q))return P=D}return P=q}if(D=P,r(R,q))return D;var L=g(q);return _!==void 0&&_(D,L)?(R=q,D):(R=q,P=L)}var C=!1,R,P,O=h===void 0?null:h;return[function(){return S(f())},O===null?void 0:function(){return S(O())}]},[f,h,g,_]);var b=i(c,T[0],T[1]);return s(function(){E.hasValue=!0,E.value=b},[b]),u(b),b},iA}var VB;function owe(){return VB||(VB=1,rA.exports=iwe()),rA.exports}var VQ=owe();const swe=Ao(VQ);var zk=M.createContext(null),awe=t=>t,mr=()=>{var t=M.useContext(zk);return t?t.store.dispatch:awe},__=()=>{},lwe=()=>__,uwe=(t,e)=>t===e;function et(t){var e=M.useContext(zk);return VQ.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:lwe,e?e.store.getState:__,e?e.store.getState:__,e?t:__,uwe)}function cwe(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function fwe(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function dwe(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var UB=t=>Array.isArray(t)?t:[t];function hwe(t){const e=Array.isArray(t[0])?t[0]:t;return dwe(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function pwe(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var mwe=class{constructor(t){this.value=t}deref(){return this.value}},gwe=typeof WeakRef<"u"?WeakRef:mwe,ywe=0,qB=1;function M0(){return{s:ywe,v:void 0,o:null,p:null}}function UQ(t,e={}){let n=M0();const{resultEqualityCheck:r}=e;let i,o=0;function s(){var h;let a=n;const{length:u}=arguments;for(let g=0,_=u;g<_;g++){const T=arguments[g];if(typeof T=="function"||typeof T=="object"&&T!==null){let E=a.o;E===null&&(a.o=E=new WeakMap);const b=E.get(T);b===void 0?(a=M0(),E.set(T,a)):a=b}else{let E=a.p;E===null&&(a.p=E=new Map);const b=E.get(T);b===void 0?(a=M0(),E.set(T,a)):a=b}}const c=a;let f;if(a.s===qB)f=a.v;else if(f=t.apply(null,arguments),o++,r){const g=((h=i==null?void 0:i.deref)==null?void 0:h.call(i))??i;g!=null&&r(g,f)&&(f=g,o!==0&&o--),i=typeof f=="object"&&f!==null||typeof f=="function"?new gwe(f):f}return c.s=qB,c.v=f,f}return s.clearCache=()=>{n=M0(),s.resetResultsCount()},s.resultsCount=()=>o,s.resetResultsCount=()=>{o=0},s}function vwe(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let o=0,s=0,a,u={},c=i.pop();typeof c=="object"&&(u=c,c=i.pop()),cwe(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const f={...n,...u},{memoize:h,memoizeOptions:g=[],argsMemoize:_=UQ,argsMemoizeOptions:T=[]}=f,E=UB(g),b=UB(T),S=hwe(i),C=h(function(){return o++,c.apply(null,arguments)},...E),R=_(function(){s++;const O=pwe(S,arguments);return a=C.apply(null,O),a},...b);return Object.assign(R,{resultFunc:c,memoizedResultFunc:C,dependencies:S,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>a,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:h,argsMemoize:_})};return Object.assign(r,{withTypes:()=>r}),r}var ve=vwe(UQ),_we=Object.assign((t,e=ve)=>{fwe(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(o=>t[o]);return e(r,(...o)=>o.reduce((s,a,u)=>(s[n[u]]=a,s),{}))},{withTypes:()=>_we}),aA={},lA={},uA={},FB;function bwe(){return FB||(FB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,o)=>{if(r!==i){const s=e(r),a=e(i);if(s===a&&s===0){if(r<i)return o==="desc"?1:-1;if(r>i)return o==="desc"?-1:1}return o==="desc"?a-s:s-a}return 0};t.compareValues=n})(uA)),uA}var cA={},fA={},BB;function qQ(){return BB||(BB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(fA)),fA}var $B;function wwe(){return $B||($B=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qQ(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(o,s){return Array.isArray(o)?!1:typeof o=="number"||typeof o=="boolean"||o==null||e.isSymbol(o)?!0:typeof o=="string"&&(r.test(o)||!n.test(o))||s!=null&&Object.hasOwn(s,o)}t.isKey=i})(cA)),cA}var zB;function Ewe(){return zB||(zB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=bwe(),n=wwe(),r=kk();function i(o,s,a,u){if(o==null)return[];a=u?void 0:a,Array.isArray(o)||(o=Object.values(o)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(a)||(a=a==null?[]:[a]),a=a.map(_=>String(_));const c=(_,T)=>{let E=_;for(let b=0;b<T.length&&E!=null;++b)E=E[T[b]];return E},f=(_,T)=>T==null||_==null?T:typeof _=="object"&&"key"in _?Object.hasOwn(T,_.key)?T[_.key]:c(T,_.path):typeof _=="function"?_(T):Array.isArray(_)?c(T,_):typeof T=="object"?T[_]:T,h=s.map(_=>(Array.isArray(_)&&_.length===1&&(_=_[0]),_==null||typeof _=="function"||Array.isArray(_)||n.isKey(_)?_:{key:_,path:r.toPath(_)}));return o.map(_=>({original:_,criteria:h.map(T=>f(T,_))})).slice().sort((_,T)=>{for(let E=0;E<h.length;E++){const b=e.compareValues(_.criteria[E],T.criteria[E],a[E]);if(b!==0)return b}return 0}).map(_=>_.original)}t.orderBy=i})(lA)),lA}var dA={},HB;function Twe(){return HB||(HB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],o=Math.floor(r),s=(a,u)=>{for(let c=0;c<a.length;c++){const f=a[c];Array.isArray(f)&&u<o?s(f,u+1):i.push(f)}};return s(n,0),i}t.flatten=e})(dA)),dA}var hA={},GB;function FQ(){return GB||(GB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=LQ(),n=Bk(),r=PQ(),i=MQ();function o(s,a,u){return r.isObject(u)&&(typeof a=="number"&&n.isArrayLike(u)&&e.isIndex(a)&&a<u.length||typeof a=="string"&&a in u)?i.eq(u[a],s):!1}t.isIterateeCall=o})(hA)),hA}var jB;function xwe(){return jB||(jB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Ewe(),n=Twe(),r=FQ();function i(o,...s){const a=s.length;return a>1&&r.isIterateeCall(o,s[0],s[1])?s=[]:a>2&&r.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),e.orderBy(o,n.flatten(s),["asc"])}t.sortBy=i})(aA)),aA}var pA,KB;function Swe(){return KB||(KB=1,pA=xwe().sortBy),pA}var Awe=Swe();const Kw=Ao(Awe);var BQ=t=>t.legend.settings,Cwe=t=>t.legend.size,Iwe=t=>t.legend.payload;ve([Iwe,BQ],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?Kw(r,n):r});var D0=1;function Rwe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=M.useState({height:0,left:0,top:0,width:0}),r=M.useCallback(i=>{if(i!=null){var o=i.getBoundingClientRect(),s={height:o.height,left:o.left,top:o.top,width:o.width};(Math.abs(s.height-e.height)>D0||Math.abs(s.left-e.left)>D0||Math.abs(s.top-e.top)>D0||Math.abs(s.width-e.width)>D0)&&n({height:s.height,left:s.left,top:s.top,width:s.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function Er(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Pwe=typeof Symbol=="function"&&Symbol.observable||"@@observable",WB=Pwe,mA=()=>Math.random().toString(36).substring(7).split("").join("."),Nwe={INIT:`@@redux/INIT${mA()}`,REPLACE:`@@redux/REPLACE${mA()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${mA()}`},lb=Nwe;function Hk(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function $Q(t,e,n){if(typeof t!="function")throw new Error(Er(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Er(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Er(1));return n($Q)(t,e)}let r=t,i=e,o=new Map,s=o,a=0,u=!1;function c(){s===o&&(s=new Map,o.forEach((b,S)=>{s.set(S,b)}))}function f(){if(u)throw new Error(Er(3));return i}function h(b){if(typeof b!="function")throw new Error(Er(4));if(u)throw new Error(Er(5));let S=!0;c();const C=a++;return s.set(C,b),function(){if(S){if(u)throw new Error(Er(6));S=!1,c(),s.delete(C),o=null}}}function g(b){if(!Hk(b))throw new Error(Er(7));if(typeof b.type>"u")throw new Error(Er(8));if(typeof b.type!="string")throw new Error(Er(17));if(u)throw new Error(Er(9));try{u=!0,i=r(i,b)}finally{u=!1}return(o=s).forEach(C=>{C()}),b}function _(b){if(typeof b!="function")throw new Error(Er(10));r=b,g({type:lb.REPLACE})}function T(){const b=h;return{subscribe(S){if(typeof S!="object"||S===null)throw new Error(Er(11));function C(){const P=S;P.next&&P.next(f())}return C(),{unsubscribe:b(C)}},[WB](){return this}}}return g({type:lb.INIT}),{dispatch:g,subscribe:h,getState:f,replaceReducer:_,[WB]:T}}function Mwe(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:lb.INIT})>"u")throw new Error(Er(12));if(typeof n(void 0,{type:lb.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Er(13))})}function zQ(t){const e=Object.keys(t),n={};for(let o=0;o<e.length;o++){const s=e[o];typeof t[s]=="function"&&(n[s]=t[s])}const r=Object.keys(n);let i;try{Mwe(n)}catch(o){i=o}return function(s={},a){if(i)throw i;let u=!1;const c={};for(let f=0;f<r.length;f++){const h=r[f],g=n[h],_=s[h],T=g(_,a);if(typeof T>"u")throw a&&a.type,new Error(Er(14));c[h]=T,u=u||T!==_}return u=u||r.length!==Object.keys(s).length,u?c:s}}function ub(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function Dwe(...t){return e=>(n,r)=>{const i=e(n,r);let o=()=>{throw new Error(Er(15))};const s={getState:i.getState,dispatch:(u,...c)=>o(u,...c)},a=t.map(u=>u(s));return o=ub(...a)(i.dispatch),{...i,dispatch:o}}}function HQ(t){return Hk(t)&&"type"in t&&typeof t.type=="string"}var GQ=Symbol.for("immer-nothing"),YB=Symbol.for("immer-draftable"),Bi=Symbol.for("immer-state");function Ho(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var yh=Object.getPrototypeOf;function ef(t){return!!t&&!!t[Bi]}function qa(t){var e;return t?jQ(t)||Array.isArray(t)||!!t[YB]||!!((e=t.constructor)!=null&&e[YB])||Ly(t)||Yw(t):!1}var kwe=Object.prototype.constructor.toString();function jQ(t){if(!t||typeof t!="object")return!1;const e=yh(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===kwe}function cb(t,e){Ww(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function Ww(t){const e=t[Bi];return e?e.type_:Array.isArray(t)?1:Ly(t)?2:Yw(t)?3:0}function xM(t,e){return Ww(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function KQ(t,e,n){const r=Ww(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function Owe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Ly(t){return t instanceof Map}function Yw(t){return t instanceof Set}function gc(t){return t.copy_||t.base_}function SM(t,e){if(Ly(t))return new Map(t);if(Yw(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=jQ(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[Bi];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const s=i[o],a=r[s];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[s]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[s]})}return Object.create(yh(t),r)}else{const r=yh(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function Gk(t,e=!1){return Jw(t)||ef(t)||!qa(t)||(Ww(t)>1&&Object.defineProperties(t,{set:{value:k0},add:{value:k0},clear:{value:k0},delete:{value:k0}}),Object.freeze(t),e&&Object.values(t).forEach(n=>Gk(n,!0))),t}function k0(){Ho(2)}function Jw(t){return Object.isFrozen(t)}var Lwe={};function tf(t){const e=Lwe[t];return e||Ho(0,t),e}var Yg;function WQ(){return Yg}function Vwe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function JB(t,e){e&&(tf("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function AM(t){CM(t),t.drafts_.forEach(Uwe),t.drafts_=null}function CM(t){t===Yg&&(Yg=t.parent_)}function XB(t){return Yg=Vwe(Yg,t)}function Uwe(t){const e=t[Bi];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function QB(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Bi].modified_&&(AM(e),Ho(4)),qa(t)&&(t=fb(e,t),e.parent_||db(e,t)),e.patches_&&tf("Patches").generateReplacementPatches_(n[Bi].base_,t,e.patches_,e.inversePatches_)):t=fb(e,n,[]),AM(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==GQ?t:void 0}function fb(t,e,n){if(Jw(e))return e;const r=e[Bi];if(!r)return cb(e,(i,o)=>ZB(t,r,e,i,o,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return db(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,s=!1;r.type_===3&&(o=new Set(i),i.clear(),s=!0),cb(o,(a,u)=>ZB(t,r,i,a,u,n,s)),db(t,i,!1),n&&t.patches_&&tf("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function ZB(t,e,n,r,i,o,s){if(ef(i)){const a=o&&e&&e.type_!==3&&!xM(e.assigned_,r)?o.concat(r):void 0,u=fb(t,i,a);if(KQ(n,r,u),ef(u))t.canAutoFreeze_=!1;else return}else s&&n.add(i);if(qa(i)&&!Jw(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;fb(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(Ly(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&db(t,i)}}function db(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&Gk(e,n)}function qwe(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:WQ(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=jk;n&&(i=[r],o=Jg);const{revoke:s,proxy:a}=Proxy.revocable(i,o);return r.draft_=a,r.revoke_=s,a}var jk={get(t,e){if(e===Bi)return t;const n=gc(t);if(!xM(n,e))return Fwe(t,n,e);const r=n[e];return t.finalized_||!qa(r)?r:r===gA(t.base_,e)?(yA(t),t.copy_[e]=RM(r,t)):r},has(t,e){return e in gc(t)},ownKeys(t){return Reflect.ownKeys(gc(t))},set(t,e,n){const r=YQ(gc(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=gA(gc(t),e),o=i==null?void 0:i[Bi];if(o&&o.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(Owe(n,i)&&(n!==void 0||xM(t.base_,e)))return!0;yA(t),IM(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return gA(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,yA(t),IM(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=gc(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){Ho(11)},getPrototypeOf(t){return yh(t.base_)},setPrototypeOf(){Ho(12)}},Jg={};cb(jk,(t,e)=>{Jg[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Jg.deleteProperty=function(t,e){return Jg.set.call(this,t,e,void 0)};Jg.set=function(t,e,n){return jk.set.call(this,t[0],e,n,t[0])};function gA(t,e){const n=t[Bi];return(n?gc(n):t)[e]}function Fwe(t,e,n){var i;const r=YQ(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function YQ(t,e){if(!(e in t))return;let n=yh(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=yh(n)}}function IM(t){t.modified_||(t.modified_=!0,t.parent_&&IM(t.parent_))}function yA(t){t.copy_||(t.copy_=SM(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Bwe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const o=n;n=e;const s=this;return function(u=o,...c){return s.produce(u,f=>n.call(this,f,...c))}}typeof n!="function"&&Ho(6),r!==void 0&&typeof r!="function"&&Ho(7);let i;if(qa(e)){const o=XB(this),s=RM(e,void 0);let a=!0;try{i=n(s),a=!1}finally{a?AM(o):CM(o)}return JB(o,r),QB(i,o)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===GQ&&(i=void 0),this.autoFreeze_&&Gk(i,!0),r){const o=[],s=[];tf("Patches").generateReplacementPatches_(e,i,o,s),r(o,s)}return i}else Ho(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(s,...a)=>this.produceWithPatches(s,u=>e(u,...a));let r,i;return[this.produce(e,n,(s,a)=>{r=s,i=a}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){qa(t)||Ho(8),ef(t)&&(t=Pa(t));const e=XB(this),n=RM(t,void 0);return n[Bi].isManual_=!0,CM(e),n}finishDraft(t,e){const n=t&&t[Bi];(!n||!n.isManual_)&&Ho(9);const{scope_:r}=n;return JB(r,e),QB(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=tf("Patches").applyPatches_;return ef(t)?r(t,e):this.produce(t,i=>r(i,e))}};function RM(t,e){const n=Ly(t)?tf("MapSet").proxyMap_(t,e):Yw(t)?tf("MapSet").proxySet_(t,e):qwe(t,e);return(e?e.scope_:WQ()).drafts_.push(n),n}function Pa(t){return ef(t)||Ho(10,t),JQ(t)}function JQ(t){if(!qa(t)||Jw(t))return t;const e=t[Bi];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=SM(t,e.scope_.immer_.useStrictShallowCopy_)}else n=SM(t,!0);return cb(n,(r,i)=>{KQ(n,r,JQ(i))}),e&&(e.finalized_=!1),n}var $we=new Bwe,XQ=$we.produce;function QQ(t){return({dispatch:n,getState:r})=>i=>o=>typeof o=="function"?o(n,r,t):i(o)}var zwe=QQ(),Hwe=QQ,Gwe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?ub:ub.apply(null,arguments)};function xo(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(qi(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>HQ(r)&&r.type===t,n}var ZQ=class Ym extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Ym.prototype)}static get[Symbol.species](){return Ym}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Ym(...e[0].concat(this)):new Ym(...e.concat(this))}};function e6(t){return qa(t)?XQ(t,()=>{}):t}function O0(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function jwe(t){return typeof t=="boolean"}var Kwe=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=e??{};let s=new ZQ;return n&&(jwe(n)?s.push(zwe):s.push(Hwe(n.extraArgument))),s},Wwe="RTK_autoBatch",t6=t=>e=>{setTimeout(e,t)},Ywe=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,o=!1,s=!1;const a=new Set,u=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:t6(10):t.type==="callback"?t.queueNotification:t6(t.timeout),c=()=>{s=!1,o&&(o=!1,a.forEach(f=>f()))};return Object.assign({},r,{subscribe(f){const h=()=>i&&f(),g=r.subscribe(h);return a.add(f),()=>{g(),a.delete(f)}},dispatch(f){var h;try{return i=!((h=f==null?void 0:f.meta)!=null&&h[Wwe]),o=!i,o&&(s||(s=!0,u(c))),r.dispatch(f)}finally{i=!0}}})},Jwe=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new ZQ(t);return r&&i.push(Ywe(typeof r=="object"?r:void 0)),i};function Xwe(t){const e=Kwe(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:o=void 0,enhancers:s=void 0}=t||{};let a;if(typeof n=="function")a=n;else if(Hk(n))a=zQ(n);else throw new Error(qi(1));let u;typeof r=="function"?u=r(e):u=e();let c=ub;i&&(c=Gwe({trace:!1,...typeof i=="object"&&i}));const f=Dwe(...u),h=Jwe(f);let g=typeof s=="function"?s(h):h();const _=c(...g);return $Q(a,o,_)}function eZ(t){const e={},n=[];let r;const i={addCase(o,s){const a=typeof o=="string"?o:o.type;if(!a)throw new Error(qi(28));if(a in e)throw new Error(qi(29));return e[a]=s,i},addAsyncThunk(o,s){return s.pending&&(e[o.pending.type]=s.pending),s.rejected&&(e[o.rejected.type]=s.rejected),s.fulfilled&&(e[o.fulfilled.type]=s.fulfilled),s.settled&&n.push({matcher:o.settled,reducer:s.settled}),i},addMatcher(o,s){return n.push({matcher:o,reducer:s}),i},addDefaultCase(o){return r=o,i}};return t(i),[e,n,r]}function Qwe(t){return typeof t=="function"}function Zwe(t,e){let[n,r,i]=eZ(e),o;if(Qwe(t))o=()=>e6(t());else{const a=e6(t);o=()=>a}function s(a=o(),u){let c=[n[u.type],...r.filter(({matcher:f})=>f(u)).map(({reducer:f})=>f)];return c.filter(f=>!!f).length===0&&(c=[i]),c.reduce((f,h)=>{if(h)if(ef(f)){const _=h(f,u);return _===void 0?f:_}else{if(qa(f))return XQ(f,g=>h(g,u));{const g=h(f,u);if(g===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return f},a)}return s.getInitialState=o,s}var eEe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",tEe=(t=21)=>{let e="",n=t;for(;n--;)e+=eEe[Math.random()*64|0];return e},nEe=Symbol.for("rtk-slice-createasyncthunk");function rEe(t,e){return`${t}/${e}`}function iEe({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[nEe];return function(i){const{name:o,reducerPath:s=o}=i;if(!o)throw new Error(qi(11));const a=(typeof i.reducers=="function"?i.reducers(sEe()):i.reducers)||{},u=Object.keys(a),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(P,O){const q=typeof P=="string"?P:P.type;if(!q)throw new Error(qi(12));if(q in c.sliceCaseReducersByType)throw new Error(qi(13));return c.sliceCaseReducersByType[q]=O,f},addMatcher(P,O){return c.sliceMatchers.push({matcher:P,reducer:O}),f},exposeAction(P,O){return c.actionCreators[P]=O,f},exposeCaseReducer(P,O){return c.sliceCaseReducersByName[P]=O,f}};u.forEach(P=>{const O=a[P],q={reducerName:P,type:rEe(o,P),createNotation:typeof i.reducers=="function"};lEe(O)?cEe(q,O,f,e):aEe(q,O,f)});function h(){const[P={},O=[],q=void 0]=typeof i.extraReducers=="function"?eZ(i.extraReducers):[i.extraReducers],D={...P,...c.sliceCaseReducersByType};return Zwe(i.initialState,L=>{for(let N in D)L.addCase(N,D[N]);for(let N of c.sliceMatchers)L.addMatcher(N.matcher,N.reducer);for(let N of O)L.addMatcher(N.matcher,N.reducer);q&&L.addDefaultCase(q)})}const g=P=>P,_=new Map,T=new WeakMap;let E;function b(P,O){return E||(E=h()),E(P,O)}function S(){return E||(E=h()),E.getInitialState()}function C(P,O=!1){function q(L){let N=L[P];return typeof N>"u"&&O&&(N=O0(T,q,S)),N}function D(L=g){const N=O0(_,O,()=>new WeakMap);return O0(N,L,()=>{const U={};for(const[V,$]of Object.entries(i.selectors??{}))U[V]=oEe($,L,()=>O0(T,L,S),O);return U})}return{reducerPath:P,getSelectors:D,get selectors(){return D(q)},selectSlice:q}}const R={name:o,reducer:b,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:S,...C(s),injectInto(P,{reducerPath:O,...q}={}){const D=O??s;return P.inject({reducerPath:D,reducer:b},q),{...R,...C(D,!0)}}};return R}}function oEe(t,e,n,r){function i(o,...s){let a=e(o);return typeof a>"u"&&r&&(a=n()),t(a,...s)}return i.unwrapped=t,i}var Hi=iEe();function sEe(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function aEe({type:t,reducerName:e,createNotation:n},r,i){let o,s;if("reducer"in r){if(n&&!uEe(r))throw new Error(qi(17));o=r.reducer,s=r.prepare}else o=r;i.addCase(t,o).exposeCaseReducer(e,o).exposeAction(e,s?xo(t,s):xo(t))}function lEe(t){return t._reducerDefinitionType==="asyncThunk"}function uEe(t){return t._reducerDefinitionType==="reducerWithPrepare"}function cEe({type:t,reducerName:e},n,r,i){if(!i)throw new Error(qi(18));const{payloadCreator:o,fulfilled:s,pending:a,rejected:u,settled:c,options:f}=n,h=i(t,o,f);r.exposeAction(e,h),s&&r.addCase(h.fulfilled,s),a&&r.addCase(h.pending,a),u&&r.addCase(h.rejected,u),c&&r.addMatcher(h.settled,c),r.exposeCaseReducer(e,{fulfilled:s||L0,pending:a||L0,rejected:u||L0,settled:c||L0})}function L0(){}var fEe="task",tZ="listener",nZ="completed",Kk="cancelled",dEe=`task-${Kk}`,hEe=`task-${nZ}`,PM=`${tZ}-${Kk}`,pEe=`${tZ}-${nZ}`,Xw=class{constructor(t){Fx(this,"name","TaskAbortError");Fx(this,"message");this.code=t,this.message=`${fEe} ${Kk} (reason: ${t})`}},Wk=(t,e)=>{if(typeof t!="function")throw new TypeError(qi(32))},hb=()=>{},rZ=(t,e=hb)=>(t.catch(e),t),iZ=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Lc=(t,e)=>{const n=t.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},Vc=t=>{if(t.aborted){const{reason:e}=t;throw new Xw(e)}};function oZ(t,e){let n=hb;return new Promise((r,i)=>{const o=()=>i(new Xw(t.reason));if(t.aborted){o();return}n=iZ(t,o),e.finally(()=>n()).then(r,i)}).finally(()=>{n=hb})}var mEe=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof Xw?"cancelled":"rejected",error:n}}finally{e==null||e()}},pb=t=>e=>rZ(oZ(t,e).then(n=>(Vc(t),n))),sZ=t=>{const e=pb(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:Ud}=Object,n6={},Qw="listenerMiddleware",gEe=(t,e)=>{const n=r=>iZ(t,()=>Lc(r,t.reason));return(r,i)=>{Wk(r);const o=new AbortController;n(o);const s=mEe(async()=>{Vc(t),Vc(o.signal);const a=await r({pause:pb(o.signal),delay:sZ(o.signal),signal:o.signal});return Vc(o.signal),a},()=>Lc(o,hEe));return i!=null&&i.autoJoin&&e.push(s.catch(hb)),{result:pb(t)(s),cancel(){Lc(o,dEe)}}}},yEe=(t,e)=>{const n=async(r,i)=>{Vc(e);let o=()=>{};const a=[new Promise((u,c)=>{let f=t({predicate:r,effect:(h,g)=>{g.unsubscribe(),u([h,g.getState(),g.getOriginalState()])}});o=()=>{f(),c()}})];i!=null&&a.push(new Promise(u=>setTimeout(u,i,null)));try{const u=await oZ(e,Promise.race(a));return Vc(e),u}finally{o()}};return(r,i)=>rZ(n(r,i))},aZ=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:o}=t;if(e)i=xo(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(qi(21));return Wk(o),{predicate:i,type:e,effect:o}},lZ=Ud(t=>{const{type:e,predicate:n,effect:r}=aZ(t);return{id:tEe(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(qi(22))}}},{withTypes:()=>lZ}),r6=(t,e)=>{const{type:n,effect:r,predicate:i}=aZ(e);return Array.from(t.values()).find(o=>(typeof n=="string"?o.type===n:o.predicate===i)&&o.effect===r)},NM=t=>{t.pending.forEach(e=>{Lc(e,PM)})},vEe=t=>()=>{t.forEach(NM),t.clear()},i6=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},uZ=Ud(xo(`${Qw}/add`),{withTypes:()=>uZ}),_Ee=xo(`${Qw}/removeAll`),cZ=Ud(xo(`${Qw}/remove`),{withTypes:()=>cZ}),bEe=(...t)=>{console.error(`${Qw}/error`,...t)},Vy=(t={})=>{const e=new Map,{extra:n,onError:r=bEe}=t;Wk(r);const i=f=>(f.unsubscribe=()=>e.delete(f.id),e.set(f.id,f),h=>{f.unsubscribe(),h!=null&&h.cancelActive&&NM(f)}),o=f=>{const h=r6(e,f)??lZ(f);return i(h)};Ud(o,{withTypes:()=>o});const s=f=>{const h=r6(e,f);return h&&(h.unsubscribe(),f.cancelActive&&NM(h)),!!h};Ud(s,{withTypes:()=>s});const a=async(f,h,g,_)=>{const T=new AbortController,E=yEe(o,T.signal),b=[];try{f.pending.add(T),await Promise.resolve(f.effect(h,Ud({},g,{getOriginalState:_,condition:(S,C)=>E(S,C).then(Boolean),take:E,delay:sZ(T.signal),pause:pb(T.signal),extra:n,signal:T.signal,fork:gEe(T.signal,b),unsubscribe:f.unsubscribe,subscribe:()=>{e.set(f.id,f)},cancelActiveListeners:()=>{f.pending.forEach((S,C,R)=>{S!==T&&(Lc(S,PM),R.delete(S))})},cancel:()=>{Lc(T,PM),f.pending.delete(T)},throwIfCancelled:()=>{Vc(T.signal)}})))}catch(S){S instanceof Xw||i6(r,S,{raisedBy:"effect"})}finally{await Promise.all(b),Lc(T,pEe),f.pending.delete(T)}},u=vEe(e);return{middleware:f=>h=>g=>{if(!HQ(g))return h(g);if(uZ.match(g))return o(g.payload);if(_Ee.match(g)){u();return}if(cZ.match(g))return s(g.payload);let _=f.getState();const T=()=>{if(_===n6)throw new Error(qi(23));return _};let E;try{if(E=h(g),e.size>0){const b=f.getState(),S=Array.from(e.values());for(const C of S){let R=!1;try{R=C.predicate(g,b,_)}catch(P){R=!1,i6(r,P,{raisedBy:"predicate"})}R&&a(C,g,f,T)}}}finally{_=n6}return E},startListening:o,stopListening:s,clearListeners:u}};function qi(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var wEe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},fZ=Hi({name:"chartLayout",initialState:wEe,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,o;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(o=e.payload.left)!==null&&o!==void 0?o:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:EEe,setLayout:TEe,setChartSize:xEe,setScale:SEe}=fZ.actions,AEe=fZ.reducer;function o6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function s6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?o6(Object(n),!0).forEach(function(r){CEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function CEe(t,e,n){return(e=IEe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IEe(t){var e=REe(t,"string");return typeof e=="symbol"?e:e+""}function REe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mb=Math.PI/180,PEe=t=>t*180/Math.PI,Cr=(t,e,n,r)=>({x:t+Math.cos(-mb*r)*n,y:e+Math.sin(-mb*r)*n}),NEe=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},MEe=(t,e)=>{var{x:n,y:r}=t,{x:i,y:o}=e;return Math.sqrt((n-i)**2+(r-o)**2)},DEe=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:o}=e,s=MEe({x:n,y:r},{x:i,y:o});if(s<=0)return{radius:s,angle:0};var a=(n-i)/s,u=Math.acos(a);return r>o&&(u=2*Math.PI-u),{radius:s,angle:PEe(u),angleInRadian:u}},kEe=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),o=Math.min(r,i);return{startAngle:e-o*360,endAngle:n-o*360}},OEe=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),o=Math.floor(r/360),s=Math.min(i,o);return t+s*360},LEe=(t,e)=>{var{x:n,y:r}=t,{radius:i,angle:o}=DEe({x:n,y:r},e),{innerRadius:s,outerRadius:a}=e;if(i<s||i>a||i===0)return null;var{startAngle:u,endAngle:c}=kEe(e),f=o,h;if(u<=c){for(;f>c;)f-=360;for(;f<u;)f+=360;h=f>=u&&f<=c}else{for(;f>u;)f-=360;for(;f<c;)f+=360;h=f>=c&&f<=u}return h?s6(s6({},e),{},{radius:i,angle:OEe(f,e)}):null};function dZ(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function a6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?a6(Object(n),!0).forEach(function(r){VEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function VEe(t,e,n){return(e=UEe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UEe(t){var e=qEe(t,"string");return typeof e=="symbol"?e:e+""}function qEe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ri(t,e,n){return hr(t)||hr(e)?n:zs(e)?mh(t,e,n):typeof e=="function"?e(t):n}var FEe=(t,e,n,r,i)=>{var o,s=-1,a=(o=e==null?void 0:e.length)!==null&&o!==void 0?o:0;if(a<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var u=0;u<a;u++){var c=u>0?n[u-1].coordinate:n[a-1].coordinate,f=n[u].coordinate,h=u>=a-1?n[0].coordinate:n[u+1].coordinate,g=void 0;if(Oi(f-c)!==Oi(h-f)){var _=[];if(Oi(h-f)===Oi(i[1]-i[0])){g=h;var T=f+i[1]-i[0];_[0]=Math.min(T,(T+c)/2),_[1]=Math.max(T,(T+c)/2)}else{g=c;var E=h+i[1]-i[0];_[0]=Math.min(f,(E+f)/2),_[1]=Math.max(f,(E+f)/2)}var b=[Math.min(f,(g+f)/2),Math.max(f,(g+f)/2)];if(t>b[0]&&t<=b[1]||t>=_[0]&&t<=_[1]){({index:s}=n[u]);break}}else{var S=Math.min(c,h),C=Math.max(c,h);if(t>(S+f)/2&&t<=(C+f)/2){({index:s}=n[u]);break}}}else if(e){for(var R=0;R<a;R++)if(R===0&&t<=(e[R].coordinate+e[R+1].coordinate)/2||R>0&&R<a-1&&t>(e[R].coordinate+e[R-1].coordinate)/2&&t<=(e[R].coordinate+e[R+1].coordinate)/2||R===a-1&&t>(e[R].coordinate+e[R-1].coordinate)/2){({index:s}=e[R]);break}}return s},BEe=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:o,verticalAlign:s,layout:a}=e;if((a==="vertical"||a==="horizontal"&&s==="middle")&&o!=="center"&&it(t[o]))return fo(fo({},t),{},{[o]:t[o]+(r||0)});if((a==="horizontal"||a==="vertical"&&o==="center")&&s!=="middle"&&it(t[s]))return fo(fo({},t),{},{[s]:t[s]+(i||0)})}return t},gf=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",l6=1e-4,$Ee=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),i=Math.min(r[0],r[1])-l6,o=Math.max(r[0],r[1])+l6,s=t(e[0]),a=t(e[n-1]);(s<i||s>o||a<i||a>o)&&t.domain([e[0],e[n-1]])}},zEe=(t,e)=>{if(!e||e.length!==2||!it(e[0])||!it(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!it(t[0])||t[0]<n)&&(i[0]=n),(!it(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},HEe=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,o=0,s=0;s<e;++s){var a=To(t[s][n][1])?t[s][n][0]:t[s][n][1];a>=0?(t[s][n][0]=i,t[s][n][1]=i+a,i=t[s][n][1]):(t[s][n][0]=o,t[s][n][1]=o+a,o=t[s][n][1])}},GEe=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,o=0;o<e;++o){var s=To(t[o][n][1])?t[o][n][0]:t[o][n][1];s>=0?(t[o][n][0]=i,t[o][n][1]=i+s,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},jEe={sign:HEe,expand:Tbe,none:gh,silhouette:xbe,wiggle:Sbe,positive:GEe},KEe=(t,e,n)=>{var r=jEe[n],i=Ebe().keys(e).value((o,s)=>+ri(o,s,0)).order(EM).offset(r);return i(t)};function WEe(t){return t==null?void 0:String(t)}var u6=t=>{var{axis:e,ticks:n,offset:r,bandSize:i,entry:o,index:s}=t;if(e.type==="category")return n[s]?n[s].coordinate+r:null;var a=ri(o,e.dataKey,e.scale.domain()[s]);return hr(a)?null:e.scale(a)-i/2+r},YEe=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},JEe=t=>{var e=t.flat(2).filter(it);return[Math.min(...e),Math.max(...e)]},XEe=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],QEe=(t,e,n)=>{if(t!=null)return XEe(Object.keys(t).reduce((r,i)=>{var o=t[i],{stackedData:s}=o,a=s.reduce((u,c)=>{var f=dZ(c,e,n),h=JEe(f);return[Math.min(u[0],h[0]),Math.max(u[1],h[1])]},[1/0,-1/0]);return[Math.min(a[0],r[0]),Math.max(a[1],r[1])]},[1/0,-1/0]))},c6=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,f6=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Yk=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=Kw(e,f=>f.coordinate),o=1/0,s=1,a=i.length;s<a;s++){var u=i[s],c=i[s-1];o=Math.min((u.coordinate||0)-(c.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0};function d6(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:o}=t;return fo(fo({},e),{},{dataKey:n,payload:r,value:i,name:o})}function hZ(t,e){if(t)return String(t);if(typeof e=="string")return e}function ZEe(t,e,n,r,i){if(n==="horizontal"||n==="vertical"){var o=t>=i.left&&t<=i.left+i.width&&e>=i.top&&e<=i.top+i.height;return o?{x:t,y:e}:null}return r?LEe({x:t,y:e},r):null}var eTe=(t,e,n,r)=>{var i=e.find(c=>c&&c.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.y};if(t==="vertical")return{x:r.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,{radius:s}=r;return fo(fo(fo({},r),Cr(r.cx,r.cy,s,o)),{},{angle:o,radius:s})}var a=i.coordinate,{angle:u}=r;return fo(fo(fo({},r),Cr(r.cx,r.cy,a,u)),{},{angle:u,radius:a})}return{x:0,y:0}},tTe=(t,e)=>e==="horizontal"?t.x:e==="vertical"?t.y:e==="centric"?t.angle:t.radius,el=t=>t.layout.width,tl=t=>t.layout.height,nTe=t=>t.layout.scale,pZ=t=>t.layout.margin,Zw=ve(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),eE=ve(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),rTe="data-recharts-item-index",iTe="data-recharts-item-data-key",Uy=60;function h6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function V0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?h6(Object(n),!0).forEach(function(r){oTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oTe(t,e,n){return(e=sTe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sTe(t){var e=aTe(t,"string");return typeof e=="symbol"?e:e+""}function aTe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lTe=t=>t.brush.height;function uTe(t){var e=eE(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Uy;return n+i}return n},0)}function cTe(t){var e=eE(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Uy;return n+i}return n},0)}function fTe(t){var e=Zw(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function dTe(t){var e=Zw(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var gr=ve([el,tl,pZ,lTe,uTe,cTe,fTe,dTe,BQ,Cwe],(t,e,n,r,i,o,s,a,u,c)=>{var f={left:(n.left||0)+i,right:(n.right||0)+o},h={top:(n.top||0)+s,bottom:(n.bottom||0)+a},g=V0(V0({},h),f),_=g.bottom;g.bottom+=r,g=BEe(g,u,c);var T=t-g.left-g.right,E=e-g.top-g.bottom;return V0(V0({brushBottom:_},g),{},{width:Math.max(T,0),height:Math.max(E,0)})}),hTe=ve(gr,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),Jk=ve(el,tl,(t,e)=>({x:0,y:0,width:t,height:e})),pTe=M.createContext(null),ns=()=>M.useContext(pTe)!=null,tE=t=>t.brush,nE=ve([tE,gr,pZ],(t,e,n)=>({height:t.height,x:it(t.x)?t.x:e.left,y:it(t.y)?t.y:e.top+e.height+e.brushBottom-((n==null?void 0:n.bottom)||0),width:it(t.width)?t.width:e.width})),Xk=()=>{var t,e=ns(),n=et(hTe),r=et(nE),i=(t=et(tE))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},mTe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},gTe=()=>{var t;return(t=et(gr))!==null&&t!==void 0?t:mTe},yTe=()=>et(el),vTe=()=>et(tl),qt=t=>t.layout.layoutType,Qk=()=>et(qt),_Te={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},mZ=Hi({name:"legend",initialState:_Te,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload(t,e){t.payload.push(e.payload)},removeLegendPayload(t,e){var n=Pa(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)}}}),{setLegendSize:dKe,setLegendSettings:hKe,addLegendPayload:bTe,removeLegendPayload:wTe}=mZ.actions,ETe=mZ.reducer;function MM(){return MM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},MM.apply(null,arguments)}function p6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?p6(Object(n),!0).forEach(function(r){TTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TTe(t,e,n){return(e=xTe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xTe(t){var e=STe(t,"string");return typeof e=="symbol"?e:e+""}function STe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ATe(t){return Array.isArray(t)&&zs(t[0])&&zs(t[1])?t.join(" ~ "):t}var CTe=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:o,formatter:s,itemSorter:a,wrapperClassName:u,labelClassName:c,label:f,labelFormatter:h,accessibilityLayer:g=!1}=t,_=()=>{if(o&&o.length){var O={padding:0,margin:0},q=(a?Kw(o,a):o).map((D,L)=>{if(D.type==="none")return null;var N=D.formatter||s||ATe,{value:U,name:V}=D,$=U,F=V;if(N){var H=N(U,V,D,L,o);if(Array.isArray(H))[$,F]=H;else if(H!=null)$=H;else return null}var X=vA({display:"block",paddingTop:4,paddingBottom:4,color:D.color||"#000"},r);return M.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(L),style:X},zs(F)?M.createElement("span",{className:"recharts-tooltip-item-name"},F):null,zs(F)?M.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,M.createElement("span",{className:"recharts-tooltip-item-value"},$),M.createElement("span",{className:"recharts-tooltip-item-unit"},D.unit||""))});return M.createElement("ul",{className:"recharts-tooltip-item-list",style:O},q)}return null},T=vA({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),E=vA({margin:0},i),b=!hr(f),S=b?f:"",C=sn("recharts-default-tooltip",u),R=sn("recharts-tooltip-label",c);b&&h&&o!==void 0&&o!==null&&(S=h(f,o));var P=g?{role:"status","aria-live":"assertive"}:{};return M.createElement("div",MM({className:C,style:T},P),M.createElement("p",{className:R,style:E},M.isValidElement(S)?S:"".concat(S)),_())},Cm="recharts-tooltip-wrapper",ITe={visibility:"hidden"};function RTe(t){var{coordinate:e,translateX:n,translateY:r}=t;return sn(Cm,{["".concat(Cm,"-right")]:it(n)&&e&&it(e.x)&&n>=e.x,["".concat(Cm,"-left")]:it(n)&&e&&it(e.x)&&n<e.x,["".concat(Cm,"-bottom")]:it(r)&&e&&it(e.y)&&r>=e.y,["".concat(Cm,"-top")]:it(r)&&e&&it(e.y)&&r<e.y})}function m6(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:i,position:o,reverseDirection:s,tooltipDimension:a,viewBox:u,viewBoxDimension:c}=t;if(o&&it(o[r]))return o[r];var f=n[r]-a-(i>0?i:0),h=n[r]+i;if(e[r])return s[r]?f:h;var g=u[r];if(g==null)return 0;if(s[r]){var _=f,T=g;return _<T?Math.max(h,g):Math.max(f,g)}if(c==null)return 0;var E=h+a,b=g+c;return E>b?Math.max(f,g):Math.max(h,g)}function PTe(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function NTe(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:o,tooltipBox:s,useTranslate3d:a,viewBox:u}=t,c,f,h;return s.height>0&&s.width>0&&n?(f=m6({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:s.width,viewBox:u,viewBoxDimension:u.width}),h=m6({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:s.height,viewBox:u,viewBoxDimension:u.height}),c=PTe({translateX:f,translateY:h,useTranslate3d:a})):c=ITe,{cssProperties:c,cssClasses:RTe({translateX:f,translateY:h,coordinate:n})}}function g6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function U0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?g6(Object(n),!0).forEach(function(r){DM(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function DM(t,e,n){return(e=MTe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MTe(t){var e=DTe(t,"string");return typeof e=="symbol"?e:e+""}function DTe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class kTe extends M.PureComponent{constructor(){super(...arguments),DM(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),DM(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,o;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:o,coordinate:s,hasPayload:a,isAnimationActive:u,offset:c,position:f,reverseDirection:h,useTranslate3d:g,viewBox:_,wrapperStyle:T,lastBoundingBox:E,innerRef:b,hasPortalFromProps:S}=this.props,{cssClasses:C,cssProperties:R}=NTe({allowEscapeViewBox:n,coordinate:s,offsetTopLeft:c,position:f,reverseDirection:h,tooltipBox:{height:E.height,width:E.width},useTranslate3d:g,viewBox:_}),P=S?{}:U0(U0({transition:u&&e?"transform ".concat(r,"ms ").concat(i):void 0},R),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&a?"visible":"hidden",position:"absolute",top:0,left:0}),O=U0(U0({},P),{},{visibility:!this.state.dismissed&&e&&a?"visible":"hidden"},T);return M.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:C,style:O,ref:b},o)}}var OTe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Kh={devToolsEnabled:!1,isSsr:OTe()},gZ=()=>et(t=>t.rootProps.accessibilityLayer);function $i(t){return Number.isFinite(t)}function gb(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function kM(){return kM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kM.apply(null,arguments)}function y6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function v6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y6(Object(n),!0).forEach(function(r){LTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function LTe(t,e,n){return(e=VTe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VTe(t){var e=UTe(t,"string");return typeof e=="symbol"?e:e+""}function UTe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _6={curveBasisClosed:fbe,curveBasisOpen:dbe,curveBasis:cbe,curveBumpX:J_e,curveBumpY:X_e,curveLinearClosed:hbe,curveLinear:Gw,curveMonotoneX:pbe,curveMonotoneY:mbe,curveNatural:gbe,curveStep:ybe,curveStepAfter:_be,curveStepBefore:vbe},q0=t=>$i(t.x)&&$i(t.y),Im=t=>t.x,Rm=t=>t.y,qTe=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(ky(t));return(n==="curveMonotone"||n==="curveBump")&&e?_6["".concat(n).concat(e==="vertical"?"Y":"X")]:_6[n]||Gw},FTe=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:i,connectNulls:o=!1}=t,s=qTe(e,i),a=o?n.filter(q0):n,u;if(Array.isArray(r)){var c=o?r.filter(h=>q0(h)):r,f=a.map((h,g)=>v6(v6({},h),{},{base:c[g]}));return i==="vertical"?u=N0().y(Rm).x1(Im).x0(h=>h.base.x):u=N0().x(Im).y1(Rm).y0(h=>h.base.y),u.defined(q0).curve(s),u(f)}return i==="vertical"&&it(r)?u=N0().y(Rm).x1(Im).x0(r):it(r)?u=N0().x(Im).y1(Rm).y0(r):u=gQ().x(Im).y(Rm),u.defined(q0).curve(s),u(a)},BTe=t=>{var{className:e,points:n,path:r,pathRef:i}=t;if((!n||!n.length)&&!r)return null;var o=n&&n.length?FTe(t):r;return M.createElement("path",kM({},Oy(t),O_e(t),{className:sn("recharts-curve",e),d:o===null?void 0:o,ref:i}))},$Te=["x","y","top","left","width","height","className"];function OM(){return OM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},OM.apply(null,arguments)}function b6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zTe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?b6(Object(n),!0).forEach(function(r){HTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function HTe(t,e,n){return(e=GTe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GTe(t){var e=jTe(t,"string");return typeof e=="symbol"?e:e+""}function jTe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function KTe(t,e){if(t==null)return{};var n,r,i=WTe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function WTe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var YTe=(t,e,n,r,i,o)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(o,",").concat(e,"h").concat(n),JTe=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:o=0,height:s=0,className:a}=t,u=KTe(t,$Te),c=zTe({x:e,y:n,top:r,left:i,width:o,height:s},u);return!it(e)||!it(n)||!it(o)||!it(s)||!it(r)||!it(i)?null:M.createElement("path",OM({},Pr(c,!0),{className:sn("recharts-cross",a),d:YTe(e,n,o,s,r,i)}))};function XTe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function w6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function QTe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w6(Object(n),!0).forEach(function(r){ZTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ZTe(t,e,n){return(e=exe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function exe(t){var e=txe(t,"string");return typeof e=="symbol"?e:e+""}function txe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rs(t,e){var n=QTe({},t),r=e,i=Object.keys(e),o=i.reduce((s,a)=>(s[a]===void 0&&r[a]!==void 0&&(s[a]=r[a]),s),n);return o}function nxe(){}function E6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function T6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?E6(Object(n),!0).forEach(function(r){rxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rxe(t,e,n){return(e=ixe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ixe(t){var e=oxe(t,"string");return typeof e=="symbol"?e:e+""}function oxe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sxe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),yZ=(t,e,n)=>t.map(r=>"".concat(sxe(r)," ").concat(e,"ms ").concat(n)).join(","),axe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),Xg=(t,e)=>Object.keys(e).reduce((n,r)=>T6(T6({},n),{},{[r]:t(r,e[r])}),{});function x6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Sr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?x6(Object(n),!0).forEach(function(r){lxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lxe(t,e,n){return(e=uxe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uxe(t){var e=cxe(t,"string");return typeof e=="symbol"?e:e+""}function cxe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yb=(t,e,n)=>t+(e-t)*n,LM=t=>{var{from:e,to:n}=t;return e!==n},vZ=(t,e,n)=>{var r=Xg((i,o)=>{if(LM(o)){var[s,a]=t(o.from,o.to,o.velocity);return Sr(Sr({},o),{},{from:s,velocity:a})}return o},e);return n<1?Xg((i,o)=>LM(o)?Sr(Sr({},o),{},{velocity:yb(o.velocity,r[i].velocity,n),from:yb(o.from,r[i].from,n)}):o,e):vZ(t,r,n-1)};function fxe(t,e,n,r,i,o){var s,a=r.reduce((g,_)=>Sr(Sr({},g),{},{[_]:{from:t[_],velocity:0,to:e[_]}}),{}),u=()=>Xg((g,_)=>_.from,a),c=()=>!Object.values(a).filter(LM).length,f=null,h=g=>{s||(s=g);var _=g-s,T=_/n.dt;a=vZ(n,a,T),i(Sr(Sr(Sr({},t),e),u())),s=g,c()||(f=o.setTimeout(h))};return()=>(f=o.setTimeout(h),()=>{f()})}function dxe(t,e,n,r,i,o,s){var a=null,u=i.reduce((h,g)=>Sr(Sr({},h),{},{[g]:[t[g],e[g]]}),{}),c,f=h=>{c||(c=h);var g=(h-c)/r,_=Xg((E,b)=>yb(...b,n(g)),u);if(o(Sr(Sr(Sr({},t),e),_)),g<1)a=s.setTimeout(f);else{var T=Xg((E,b)=>yb(...b,n(1)),u);o(Sr(Sr(Sr({},t),e),T))}};return()=>(a=s.setTimeout(f),()=>{a()})}const hxe=(t,e,n,r,i,o)=>{var s=axe(t,e);return n.isStepper===!0?fxe(t,e,n,s,i,o):dxe(t,e,n,r,s,i,o)};var vb=1e-4,_Z=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],bZ=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),S6=(t,e)=>n=>{var r=_Z(t,e);return bZ(r,n)},pxe=(t,e)=>n=>{var r=_Z(t,e),i=[...r.map((o,s)=>o*s).slice(1),0];return bZ(i,n)},A6=function(){for(var e,n,r,i,o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];if(s.length===1)switch(s[0]){case"linear":[e,r,n,i]=[0,0,1,1];break;case"ease":[e,r,n,i]=[.25,.1,.25,1];break;case"ease-in":[e,r,n,i]=[.42,0,1,1];break;case"ease-out":[e,r,n,i]=[.42,0,.58,1];break;case"ease-in-out":[e,r,n,i]=[0,0,.58,1];break;default:{var u=s[0].split("(");u[0]==="cubic-bezier"&&u[1].split(")")[0].split(",").length===4&&([e,r,n,i]=u[1].split(")")[0].split(",").map(T=>parseFloat(T)))}}else s.length===4&&([e,r,n,i]=s);var c=S6(e,n),f=S6(r,i),h=pxe(e,n),g=T=>T>1?1:T<0?0:T,_=T=>{for(var E=T>1?1:T,b=E,S=0;S<8;++S){var C=c(b)-E,R=h(b);if(Math.abs(C-E)<vb||R<vb)return f(b);b=g(b-C/R)}return f(b)};return _.isStepper=!1,_},mxe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,o=(s,a,u)=>{var c=-(s-a)*n,f=u*r,h=u+(c-f)*i/1e3,g=u*i/1e3+s;return Math.abs(g-a)<vb&&Math.abs(h)<vb?[a,0]:[g,h]};return o.isStepper=!0,o.dt=i,o},gxe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return A6(t);case"spring":return mxe();default:if(t.split("(")[0]==="cubic-bezier")return A6(t)}return typeof t=="function"?t:null};function yxe(t){var e,n=()=>null,r=!1,i=null,o=s=>{if(!r){if(Array.isArray(s)){if(!s.length)return;var a=s,[u,...c]=a;if(typeof u=="number"){i=t.setTimeout(o.bind(null,c),u);return}o(u),i=t.setTimeout(o.bind(null,c));return}typeof s=="string"&&(e=s,n(e)),typeof s=="object"&&(e=s,n(e)),typeof s=="function"&&s()}};return{stop:()=>{r=!0},start:s=>{r=!1,i&&(i(),i=null),o(s)},subscribe:s=>(n=s,()=>{n=()=>null}),getTimeoutController:()=>t}}class vxe{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,o=s=>{s-r>=n?e(s):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(o))};return i=requestAnimationFrame(o),()=>{cancelAnimationFrame(i)}}}function _xe(){return yxe(new vxe)}var bxe=M.createContext(_xe);function wxe(t,e){var n=M.useContext(bxe);return M.useMemo(()=>e??n(t),[t,e,n])}var Exe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},C6={t:0},_A={t:1};function Zk(t){var e=rs(t,Exe),{isActive:n,canBegin:r,duration:i,easing:o,begin:s,onAnimationEnd:a,onAnimationStart:u,children:c}=e,f=wxe(e.animationId,e.animationManager),[h,g]=M.useState(n?C6:_A),_=M.useRef(null);return M.useEffect(()=>{n||g(_A)},[n]),M.useEffect(()=>{if(!n||!r)return nxe;var T=hxe(C6,_A,gxe(o),i,g,f.getTimeoutController()),E=()=>{_.current=T()};return f.start([u,s,E,i,a]),()=>{f.stop(),_.current&&_.current(),a()}},[n,r,i,o,s,u,a,f]),c(h.t)}function eO(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=M.useRef(Wg(e)),r=M.useRef(t);return r.current!==t&&(n.current=Wg(e),r.current=t),n.current}function I6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function R6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I6(Object(n),!0).forEach(function(r){Txe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Txe(t,e,n){return(e=xxe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xxe(t){var e=Sxe(t,"string");return typeof e=="symbol"?e:e+""}function Sxe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _b(){return _b=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_b.apply(null,arguments)}var P6=(t,e,n,r,i)=>{var o=Math.min(Math.abs(n)/2,Math.abs(r)/2),s=r>=0?1:-1,a=n>=0?1:-1,u=r>=0&&n>=0||r<0&&n<0?1:0,c;if(o>0&&i instanceof Array){for(var f=[0,0,0,0],h=0,g=4;h<g;h++)f[h]=i[h]>o?o:i[h];c="M".concat(t,",").concat(e+s*f[0]),f[0]>0&&(c+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(t+a*f[0],",").concat(e)),c+="L ".concat(t+n-a*f[1],",").concat(e),f[1]>0&&(c+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(e+s*f[1])),c+="L ".concat(t+n,",").concat(e+r-s*f[2]),f[2]>0&&(c+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(t+n-a*f[2],",").concat(e+r)),c+="L ".concat(t+a*f[3],",").concat(e+r),f[3]>0&&(c+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(e+r-s*f[3])),c+="Z"}else if(o>0&&i===+i&&i>0){var _=Math.min(o,i);c="M ".concat(t,",").concat(e+s*_,`
            A `).concat(_,",").concat(_,",0,0,").concat(u,",").concat(t+a*_,",").concat(e,`
            L `).concat(t+n-a*_,",").concat(e,`
            A `).concat(_,",").concat(_,",0,0,").concat(u,",").concat(t+n,",").concat(e+s*_,`
            L `).concat(t+n,",").concat(e+r-s*_,`
            A `).concat(_,",").concat(_,",0,0,").concat(u,",").concat(t+n-a*_,",").concat(e+r,`
            L `).concat(t+a*_,",").concat(e+r,`
            A `).concat(_,",").concat(_,",0,0,").concat(u,",").concat(t,",").concat(e+r-s*_," Z")}else c="M ".concat(t,",").concat(e," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return c},Axe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},wZ=t=>{var e=rs(t,Axe),n=M.useRef(null),[r,i]=M.useState(-1);M.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var H=n.current.getTotalLength();H&&i(H)}catch{}},[]);var{x:o,y:s,width:a,height:u,radius:c,className:f}=e,{animationEasing:h,animationDuration:g,animationBegin:_,isAnimationActive:T,isUpdateAnimationActive:E}=e,b=M.useRef(a),S=M.useRef(u),C=M.useRef(o),R=M.useRef(s),P=M.useMemo(()=>({x:o,y:s,width:a,height:u,radius:c}),[o,s,a,u,c]),O=eO(P,"rectangle-");if(o!==+o||s!==+s||a!==+a||u!==+u||a===0||u===0)return null;var q=sn("recharts-rectangle",f);if(!E)return M.createElement("path",_b({},Pr(e,!0),{className:q,d:P6(o,s,a,u,c)}));var D=b.current,L=S.current,N=C.current,U=R.current,V="0px ".concat(r===-1?1:r,"px"),$="".concat(r,"px 0px"),F=yZ(["strokeDasharray"],g,typeof h=="string"?h:void 0);return M.createElement(Zk,{animationId:O,key:O,canBegin:r>0,duration:g,easing:h,isActive:E,begin:_},H=>{var X=Zr(D,a,H),K=Zr(L,u,H),te=Zr(N,o,H),re=Zr(U,s,H);n.current&&(b.current=X,S.current=K,C.current=te,R.current=re);var Y;return T?H>0?Y={transition:F,strokeDasharray:$}:Y={strokeDasharray:V}:Y={strokeDasharray:$},M.createElement("path",_b({},Pr(e,!0),{className:q,d:P6(te,re,X,K,c),ref:n,style:R6(R6({},Y),e.style)}))})};function EZ(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:o}=t,s=Cr(e,n,r,i),a=Cr(e,n,r,o);return{points:[s,a],cx:e,cy:n,radius:r,startAngle:i,endAngle:o}}function VM(){return VM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},VM.apply(null,arguments)}var Cxe=(t,e)=>{var n=Oi(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},F0=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:o,isExternal:s,cornerRadius:a,cornerIsExternal:u}=t,c=a*(s?1:-1)+r,f=Math.asin(a/c)/mb,h=u?i:i+o*f,g=Cr(e,n,c,h),_=Cr(e,n,r,h),T=u?i-o*f:i,E=Cr(e,n,c*Math.cos(f*mb),T);return{center:g,circleTangency:_,lineTangency:E,theta:f}},TZ=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:o,endAngle:s}=t,a=Cxe(o,s),u=o+a,c=Cr(e,n,i,o),f=Cr(e,n,i,u),h="M ".concat(c.x,",").concat(c.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(a)>180),",").concat(+(o>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(r>0){var g=Cr(e,n,r,o),_=Cr(e,n,r,u);h+="L ".concat(_.x,",").concat(_.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(a)>180),",").concat(+(o<=u),`,
            `).concat(g.x,",").concat(g.y," Z")}else h+="L ".concat(e,",").concat(n," Z");return h},Ixe=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:o,forceCornerRadius:s,cornerIsExternal:a,startAngle:u,endAngle:c}=t,f=Oi(c-u),{circleTangency:h,lineTangency:g,theta:_}=F0({cx:e,cy:n,radius:i,angle:u,sign:f,cornerRadius:o,cornerIsExternal:a}),{circleTangency:T,lineTangency:E,theta:b}=F0({cx:e,cy:n,radius:i,angle:c,sign:-f,cornerRadius:o,cornerIsExternal:a}),S=a?Math.abs(u-c):Math.abs(u-c)-_-b;if(S<0)return s?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):TZ({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:u,endAngle:c});var C="M ".concat(g.x,",").concat(g.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(S>180),",").concat(+(f<0),",").concat(T.x,",").concat(T.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(E.x,",").concat(E.y,`
  `);if(r>0){var{circleTangency:R,lineTangency:P,theta:O}=F0({cx:e,cy:n,radius:r,angle:u,sign:f,isExternal:!0,cornerRadius:o,cornerIsExternal:a}),{circleTangency:q,lineTangency:D,theta:L}=F0({cx:e,cy:n,radius:r,angle:c,sign:-f,isExternal:!0,cornerRadius:o,cornerIsExternal:a}),N=a?Math.abs(u-c):Math.abs(u-c)-O-L;if(N<0&&o===0)return"".concat(C,"L").concat(e,",").concat(n,"Z");C+="L".concat(D.x,",").concat(D.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(q.x,",").concat(q.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(N>180),",").concat(+(f>0),",").concat(R.x,",").concat(R.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(P.x,",").concat(P.y,"Z")}else C+="L".concat(e,",").concat(n,"Z");return C},Rxe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},xZ=t=>{var e=rs(t,Rxe),{cx:n,cy:r,innerRadius:i,outerRadius:o,cornerRadius:s,forceCornerRadius:a,cornerIsExternal:u,startAngle:c,endAngle:f,className:h}=e;if(o<i||c===f)return null;var g=sn("recharts-sector",h),_=o-i,T=Xo(s,_,0,!0),E;return T>0&&Math.abs(c-f)<360?E=Ixe({cx:n,cy:r,innerRadius:i,outerRadius:o,cornerRadius:Math.min(T,_/2),forceCornerRadius:a,cornerIsExternal:u,startAngle:c,endAngle:f}):E=TZ({cx:n,cy:r,innerRadius:i,outerRadius:o,startAngle:c,endAngle:f}),M.createElement("path",VM({},Pr(e,!0),{className:g,d:E}))};function Pxe(t,e,n){var r,i,o,s;if(t==="horizontal")r=e.x,o=r,i=n.top,s=n.top+n.height;else if(t==="vertical")i=e.y,s=i,r=n.left,o=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var{cx:a,cy:u,innerRadius:c,outerRadius:f,angle:h}=e,g=Cr(a,u,c,h),_=Cr(a,u,f,h);r=g.x,i=g.y,o=_.x,s=_.y}else return EZ(e);return[{x:r,y:i},{x:o,y:s}]}var bA={},wA={},EA={},N6;function Nxe(){return N6||(N6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qQ();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(EA)),EA}var M6;function Mxe(){return M6||(M6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Nxe();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(wA)),wA}var D6;function Dxe(){return D6||(D6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=FQ(),n=Mxe();function r(i,o,s){s&&typeof s!="number"&&e.isIterateeCall(i,o,s)&&(o=s=void 0),i=n.toFinite(i),o===void 0?(o=i,i=0):o=n.toFinite(o),s=s===void 0?i<o?1:-1:n.toFinite(s);const a=Math.max(Math.ceil((o-i)/(s||1)),0),u=new Array(a);for(let c=0;c<a;c++)u[c]=i,i+=s;return u}t.range=r})(bA)),bA}var TA,k6;function kxe(){return k6||(k6=1,TA=Dxe().range),TA}var Oxe=kxe();const SZ=Ao(Oxe);function su(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Lxe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function tO(t){let e,n,r;t.length!==2?(e=su,n=(a,u)=>su(t(a),u),r=(a,u)=>t(a)-u):(e=t===su||t===Lxe?t:Vxe,n=t,r=t);function i(a,u,c=0,f=a.length){if(c<f){if(e(u,u)!==0)return f;do{const h=c+f>>>1;n(a[h],u)<0?c=h+1:f=h}while(c<f)}return c}function o(a,u,c=0,f=a.length){if(c<f){if(e(u,u)!==0)return f;do{const h=c+f>>>1;n(a[h],u)<=0?c=h+1:f=h}while(c<f)}return c}function s(a,u,c=0,f=a.length){const h=i(a,u,c,f-1);return h>c&&r(a[h-1],u)>-r(a[h],u)?h-1:h}return{left:i,center:s,right:o}}function Vxe(){return 0}function AZ(t){return t===null?NaN:+t}function*Uxe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const qxe=tO(su),qy=qxe.right;tO(AZ).center;class O6 extends Map{constructor(e,n=$xe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(L6(this,e))}has(e){return super.has(L6(this,e))}set(e,n){return super.set(Fxe(this,e),n)}delete(e){return super.delete(Bxe(this,e))}}function L6({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Fxe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Bxe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function $xe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function zxe(t=su){if(t===su)return CZ;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function CZ(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Hxe=Math.sqrt(50),Gxe=Math.sqrt(10),jxe=Math.sqrt(2);function bb(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=Hxe?10:o>=Gxe?5:o>=jxe?2:1;let a,u,c;return i<0?(c=Math.pow(10,-i)/s,a=Math.round(t*c),u=Math.round(e*c),a/c<t&&++a,u/c>e&&--u,c=-c):(c=Math.pow(10,i)*s,a=Math.round(t/c),u=Math.round(e/c),a*c<t&&++a,u*c>e&&--u),u<a&&.5<=n&&n<2?bb(t,e,n*2):[a,u,c]}function UM(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,s]=r?bb(e,t,n):bb(t,e,n);if(!(o>=i))return[];const a=o-i+1,u=new Array(a);if(r)if(s<0)for(let c=0;c<a;++c)u[c]=(o-c)/-s;else for(let c=0;c<a;++c)u[c]=(o-c)*s;else if(s<0)for(let c=0;c<a;++c)u[c]=(i+c)/-s;else for(let c=0;c<a;++c)u[c]=(i+c)*s;return u}function qM(t,e,n){return e=+e,t=+t,n=+n,bb(t,e,n)[2]}function FM(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?qM(e,t,n):qM(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function V6(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function U6(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function IZ(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?CZ:zxe(i);r>n;){if(r-n>600){const u=r-n+1,c=e-n+1,f=Math.log(u),h=.5*Math.exp(2*f/3),g=.5*Math.sqrt(f*h*(u-h)/u)*(c-u/2<0?-1:1),_=Math.max(n,Math.floor(e-c*h/u+g)),T=Math.min(r,Math.floor(e+(u-c)*h/u+g));IZ(t,e,_,T,i)}const o=t[e];let s=n,a=r;for(Pm(t,n,e),i(t[r],o)>0&&Pm(t,n,r);s<a;){for(Pm(t,s,a),++s,--a;i(t[s],o)<0;)++s;for(;i(t[a],o)>0;)--a}i(t[n],o)===0?Pm(t,n,a):(++a,Pm(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}return t}function Pm(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Kxe(t,e,n){if(t=Float64Array.from(Uxe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return U6(t);if(e>=1)return V6(t);var r,i=(r-1)*e,o=Math.floor(i),s=V6(IZ(t,o).subarray(0,o+1)),a=U6(t.subarray(o+1));return s+(a-s)*(i-o)}}function Wxe(t,e,n=AZ){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),s=+n(t[o],o,t),a=+n(t[o+1],o+1,t);return s+(a-s)*(i-o)}}function Yxe(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function Co(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function nl(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const BM=Symbol("implicit");function nO(){var t=new O6,e=[],n=[],r=BM;function i(o){let s=t.get(o);if(s===void 0){if(r!==BM)return r;t.set(o,s=e.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new O6;for(const s of o)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return nO(e,n).unknown(r)},Co.apply(i,arguments),i}function rO(){var t=nO().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,o,s,a=!1,u=0,c=0,f=.5;delete t.unknown;function h(){var g=e().length,_=i<r,T=_?i:r,E=_?r:i;o=(E-T)/Math.max(1,g-u+c*2),a&&(o=Math.floor(o)),T+=(E-T-o*(g-u))*f,s=o*(1-u),a&&(T=Math.round(T),s=Math.round(s));var b=Yxe(g).map(function(S){return T+o*S});return n(_?b.reverse():b)}return t.domain=function(g){return arguments.length?(e(g),h()):e()},t.range=function(g){return arguments.length?([r,i]=g,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(g){return[r,i]=g,r=+r,i=+i,a=!0,h()},t.bandwidth=function(){return s},t.step=function(){return o},t.round=function(g){return arguments.length?(a=!!g,h()):a},t.padding=function(g){return arguments.length?(u=Math.min(1,c=+g),h()):u},t.paddingInner=function(g){return arguments.length?(u=Math.min(1,g),h()):u},t.paddingOuter=function(g){return arguments.length?(c=+g,h()):c},t.align=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),h()):f},t.copy=function(){return rO(e(),[r,i]).round(a).paddingInner(u).paddingOuter(c).align(f)},Co.apply(h(),arguments)}function RZ(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return RZ(e())},t}function Jxe(){return RZ(rO.apply(null,arguments).paddingInner(1))}function iO(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function PZ(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Fy(){}var Qg=.7,wb=1/Qg,qd="\\s*([+-]?\\d+)\\s*",Zg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",qs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Xxe=/^#([0-9a-f]{3,8})$/,Qxe=new RegExp(`^rgb\\(${qd},${qd},${qd}\\)$`),Zxe=new RegExp(`^rgb\\(${qs},${qs},${qs}\\)$`),eSe=new RegExp(`^rgba\\(${qd},${qd},${qd},${Zg}\\)$`),tSe=new RegExp(`^rgba\\(${qs},${qs},${qs},${Zg}\\)$`),nSe=new RegExp(`^hsl\\(${Zg},${qs},${qs}\\)$`),rSe=new RegExp(`^hsla\\(${Zg},${qs},${qs},${Zg}\\)$`),q6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};iO(Fy,nf,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:F6,formatHex:F6,formatHex8:iSe,formatHsl:oSe,formatRgb:B6,toString:B6});function F6(){return this.rgb().formatHex()}function iSe(){return this.rgb().formatHex8()}function oSe(){return NZ(this).formatHsl()}function B6(){return this.rgb().formatRgb()}function nf(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Xxe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?$6(e):n===3?new mi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?B0(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?B0(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Qxe.exec(t))?new mi(e[1],e[2],e[3],1):(e=Zxe.exec(t))?new mi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=eSe.exec(t))?B0(e[1],e[2],e[3],e[4]):(e=tSe.exec(t))?B0(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=nSe.exec(t))?G6(e[1],e[2]/100,e[3]/100,1):(e=rSe.exec(t))?G6(e[1],e[2]/100,e[3]/100,e[4]):q6.hasOwnProperty(t)?$6(q6[t]):t==="transparent"?new mi(NaN,NaN,NaN,0):null}function $6(t){return new mi(t>>16&255,t>>8&255,t&255,1)}function B0(t,e,n,r){return r<=0&&(t=e=n=NaN),new mi(t,e,n,r)}function sSe(t){return t instanceof Fy||(t=nf(t)),t?(t=t.rgb(),new mi(t.r,t.g,t.b,t.opacity)):new mi}function $M(t,e,n,r){return arguments.length===1?sSe(t):new mi(t,e,n,r??1)}function mi(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}iO(mi,$M,PZ(Fy,{brighter(t){return t=t==null?wb:Math.pow(wb,t),new mi(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Qg:Math.pow(Qg,t),new mi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new mi(Uc(this.r),Uc(this.g),Uc(this.b),Eb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:z6,formatHex:z6,formatHex8:aSe,formatRgb:H6,toString:H6}));function z6(){return`#${Rc(this.r)}${Rc(this.g)}${Rc(this.b)}`}function aSe(){return`#${Rc(this.r)}${Rc(this.g)}${Rc(this.b)}${Rc((isNaN(this.opacity)?1:this.opacity)*255)}`}function H6(){const t=Eb(this.opacity);return`${t===1?"rgb(":"rgba("}${Uc(this.r)}, ${Uc(this.g)}, ${Uc(this.b)}${t===1?")":`, ${t})`}`}function Eb(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Uc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Rc(t){return t=Uc(t),(t<16?"0":"")+t.toString(16)}function G6(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Go(t,e,n,r)}function NZ(t){if(t instanceof Go)return new Go(t.h,t.s,t.l,t.opacity);if(t instanceof Fy||(t=nf(t)),!t)return new Go;if(t instanceof Go)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,a=o-i,u=(o+i)/2;return a?(e===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-e)/a+2:s=(e-n)/a+4,a/=u<.5?o+i:2-o-i,s*=60):a=u>0&&u<1?0:s,new Go(s,a,u,t.opacity)}function lSe(t,e,n,r){return arguments.length===1?NZ(t):new Go(t,e,n,r??1)}function Go(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}iO(Go,lSe,PZ(Fy,{brighter(t){return t=t==null?wb:Math.pow(wb,t),new Go(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Qg:Math.pow(Qg,t),new Go(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new mi(xA(t>=240?t-240:t+120,i,r),xA(t,i,r),xA(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Go(j6(this.h),$0(this.s),$0(this.l),Eb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Eb(this.opacity);return`${t===1?"hsl(":"hsla("}${j6(this.h)}, ${$0(this.s)*100}%, ${$0(this.l)*100}%${t===1?")":`, ${t})`}`}}));function j6(t){return t=(t||0)%360,t<0?t+360:t}function $0(t){return Math.max(0,Math.min(1,t||0))}function xA(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const oO=t=>()=>t;function uSe(t,e){return function(n){return t+n*e}}function cSe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function fSe(t){return(t=+t)==1?MZ:function(e,n){return n-e?cSe(e,n,t):oO(isNaN(e)?n:e)}}function MZ(t,e){var n=e-t;return n?uSe(t,n):oO(isNaN(t)?e:t)}const Tb=(function t(e){var n=fSe(e);function r(i,o){var s=n((i=$M(i)).r,(o=$M(o)).r),a=n(i.g,o.g),u=n(i.b,o.b),c=MZ(i.opacity,o.opacity);return function(f){return i.r=s(f),i.g=a(f),i.b=u(f),i.opacity=c(f),i+""}}return r.gamma=t,r})(1);function dSe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function hSe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function pSe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=Wh(t[s],e[s]);for(;s<n;++s)o[s]=e[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function mSe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function zo(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function gSe(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Wh(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var zM=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,SA=new RegExp(zM.source,"g");function ySe(t){return function(){return t}}function vSe(t){return function(e){return t(e)+""}}function DZ(t,e){var n=zM.lastIndex=SA.lastIndex=0,r,i,o,s=-1,a=[],u=[];for(t=t+"",e=e+"";(r=zM.exec(t))&&(i=SA.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,u.push({i:s,x:zo(r,i)})),n=SA.lastIndex;return n<e.length&&(o=e.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?u[0]?vSe(u[0].x):ySe(e):(e=u.length,function(c){for(var f=0,h;f<e;++f)a[(h=u[f]).i]=h.x(c);return a.join("")})}function Wh(t,e){var n=typeof e,r;return e==null||n==="boolean"?oO(e):(n==="number"?zo:n==="string"?(r=nf(e))?(e=r,Tb):DZ:e instanceof nf?Tb:e instanceof Date?mSe:hSe(e)?dSe:Array.isArray(e)?pSe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?gSe:zo)(t,e)}function sO(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var K6=180/Math.PI,HM={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function kZ(t,e,n,r,i,o){var s,a,u;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),t*r<e*n&&(t=-t,e=-e,u=-u,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*K6,skewX:Math.atan(u)*K6,scaleX:s,scaleY:a}}var z0;function _Se(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?HM:kZ(e.a,e.b,e.c,e.d,e.e,e.f)}function bSe(t){return t==null||(z0||(z0=document.createElementNS("http://www.w3.org/2000/svg","g")),z0.setAttribute("transform",t),!(t=z0.transform.baseVal.consolidate()))?HM:(t=t.matrix,kZ(t.a,t.b,t.c,t.d,t.e,t.f))}function OZ(t,e,n,r){function i(c){return c.length?c.pop()+" ":""}function o(c,f,h,g,_,T){if(c!==h||f!==g){var E=_.push("translate(",null,e,null,n);T.push({i:E-4,x:zo(c,h)},{i:E-2,x:zo(f,g)})}else(h||g)&&_.push("translate("+h+e+g+n)}function s(c,f,h,g){c!==f?(c-f>180?f+=360:f-c>180&&(c+=360),g.push({i:h.push(i(h)+"rotate(",null,r)-2,x:zo(c,f)})):f&&h.push(i(h)+"rotate("+f+r)}function a(c,f,h,g){c!==f?g.push({i:h.push(i(h)+"skewX(",null,r)-2,x:zo(c,f)}):f&&h.push(i(h)+"skewX("+f+r)}function u(c,f,h,g,_,T){if(c!==h||f!==g){var E=_.push(i(_)+"scale(",null,",",null,")");T.push({i:E-4,x:zo(c,h)},{i:E-2,x:zo(f,g)})}else(h!==1||g!==1)&&_.push(i(_)+"scale("+h+","+g+")")}return function(c,f){var h=[],g=[];return c=t(c),f=t(f),o(c.translateX,c.translateY,f.translateX,f.translateY,h,g),s(c.rotate,f.rotate,h,g),a(c.skewX,f.skewX,h,g),u(c.scaleX,c.scaleY,f.scaleX,f.scaleY,h,g),c=f=null,function(_){for(var T=-1,E=g.length,b;++T<E;)h[(b=g[T]).i]=b.x(_);return h.join("")}}}var wSe=OZ(_Se,"px, ","px)","deg)"),ESe=OZ(bSe,", ",")",")"),TSe=1e-12;function W6(t){return((t=Math.exp(t))+1/t)/2}function xSe(t){return((t=Math.exp(t))-1/t)/2}function SSe(t){return((t=Math.exp(2*t))-1)/(t+1)}const ASe=(function t(e,n,r){function i(o,s){var a=o[0],u=o[1],c=o[2],f=s[0],h=s[1],g=s[2],_=f-a,T=h-u,E=_*_+T*T,b,S;if(E<TSe)S=Math.log(g/c)/e,b=function(D){return[a+D*_,u+D*T,c*Math.exp(e*D*S)]};else{var C=Math.sqrt(E),R=(g*g-c*c+r*E)/(2*c*n*C),P=(g*g-c*c-r*E)/(2*g*n*C),O=Math.log(Math.sqrt(R*R+1)-R),q=Math.log(Math.sqrt(P*P+1)-P);S=(q-O)/e,b=function(D){var L=D*S,N=W6(O),U=c/(n*C)*(N*SSe(e*L+O)-xSe(O));return[a+U*_,u+U*T,c*N/W6(e*L+O)]}}return b.duration=S*1e3*e/Math.SQRT2,b}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,u=a*a;return t(s,a,u)},i})(Math.SQRT2,2,4);function CSe(t,e){e===void 0&&(e=t,t=Wh);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(s){var a=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return o[a](s-a)}}function ISe(t){return function(){return t}}function xb(t){return+t}var Y6=[0,1];function ti(t){return t}function GM(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:ISe(isNaN(e)?NaN:.5)}function RSe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function PSe(t,e,n){var r=t[0],i=t[1],o=e[0],s=e[1];return i<r?(r=GM(i,r),o=n(s,o)):(r=GM(r,i),o=n(o,s)),function(a){return o(r(a))}}function NSe(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=GM(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(a){var u=qy(t,a,1,r)-1;return o[u](i[u](a))}}function By(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function rE(){var t=Y6,e=Y6,n=Wh,r,i,o,s=ti,a,u,c;function f(){var g=Math.min(t.length,e.length);return s!==ti&&(s=RSe(t[0],t[g-1])),a=g>2?NSe:PSe,u=c=null,h}function h(g){return g==null||isNaN(g=+g)?o:(u||(u=a(t.map(r),e,n)))(r(s(g)))}return h.invert=function(g){return s(i((c||(c=a(e,t.map(r),zo)))(g)))},h.domain=function(g){return arguments.length?(t=Array.from(g,xb),f()):t.slice()},h.range=function(g){return arguments.length?(e=Array.from(g),f()):e.slice()},h.rangeRound=function(g){return e=Array.from(g),n=sO,f()},h.clamp=function(g){return arguments.length?(s=g?!0:ti,f()):s!==ti},h.interpolate=function(g){return arguments.length?(n=g,f()):n},h.unknown=function(g){return arguments.length?(o=g,h):o},function(g,_){return r=g,i=_,f()}}function aO(){return rE()(ti,ti)}function MSe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Sb(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function vh(t){return t=Sb(Math.abs(t)),t?t[1]:NaN}function DSe(t,e){return function(n,r){for(var i=n.length,o=[],s=0,a=t[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),o.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=t[s=(s+1)%t.length];return o.reverse().join(e)}}function kSe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var OSe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ey(t){if(!(e=OSe.exec(t)))throw new Error("invalid format: "+t);var e;return new lO({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}ey.prototype=lO.prototype;function lO(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}lO.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function LSe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var LZ;function VSe(t,e){var n=Sb(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(LZ=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Sb(t,Math.max(0,e+o-1))[0]}function J6(t,e){var n=Sb(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const X6={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:MSe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>J6(t*100,e),r:J6,s:VSe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Q6(t){return t}var Z6=Array.prototype.map,e5=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function USe(t){var e=t.grouping===void 0||t.thousands===void 0?Q6:DSe(Z6.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?Q6:kSe(Z6.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"−":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function c(h){h=ey(h);var g=h.fill,_=h.align,T=h.sign,E=h.symbol,b=h.zero,S=h.width,C=h.comma,R=h.precision,P=h.trim,O=h.type;O==="n"?(C=!0,O="g"):X6[O]||(R===void 0&&(R=12),P=!0,O="g"),(b||g==="0"&&_==="=")&&(b=!0,g="0",_="=");var q=E==="$"?n:E==="#"&&/[boxX]/.test(O)?"0"+O.toLowerCase():"",D=E==="$"?r:/[%p]/.test(O)?s:"",L=X6[O],N=/[defgprs%]/.test(O);R=R===void 0?6:/[gprs]/.test(O)?Math.max(1,Math.min(21,R)):Math.max(0,Math.min(20,R));function U(V){var $=q,F=D,H,X,K;if(O==="c")F=L(V)+F,V="";else{V=+V;var te=V<0||1/V<0;if(V=isNaN(V)?u:L(Math.abs(V),R),P&&(V=LSe(V)),te&&+V==0&&T!=="+"&&(te=!1),$=(te?T==="("?T:a:T==="-"||T==="("?"":T)+$,F=(O==="s"?e5[8+LZ/3]:"")+F+(te&&T==="("?")":""),N){for(H=-1,X=V.length;++H<X;)if(K=V.charCodeAt(H),48>K||K>57){F=(K===46?i+V.slice(H+1):V.slice(H))+F,V=V.slice(0,H);break}}}C&&!b&&(V=e(V,1/0));var re=$.length+V.length+F.length,Y=re<S?new Array(S-re+1).join(g):"";switch(C&&b&&(V=e(Y+V,Y.length?S-F.length:1/0),Y=""),_){case"<":V=$+V+F+Y;break;case"=":V=$+Y+V+F;break;case"^":V=Y.slice(0,re=Y.length>>1)+$+V+F+Y.slice(re);break;default:V=Y+$+V+F;break}return o(V)}return U.toString=function(){return h+""},U}function f(h,g){var _=c((h=ey(h),h.type="f",h)),T=Math.max(-8,Math.min(8,Math.floor(vh(g)/3)))*3,E=Math.pow(10,-T),b=e5[8+T/3];return function(S){return _(E*S)+b}}return{format:c,formatPrefix:f}}var H0,uO,VZ;qSe({thousands:",",grouping:[3],currency:["$",""]});function qSe(t){return H0=USe(t),uO=H0.format,VZ=H0.formatPrefix,H0}function FSe(t){return Math.max(0,-vh(Math.abs(t)))}function BSe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(vh(e)/3)))*3-vh(Math.abs(t)))}function $Se(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,vh(e)-vh(t))+1}function UZ(t,e,n,r){var i=FM(t,e,n),o;switch(r=ey(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=BSe(i,s))&&(r.precision=o),VZ(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=$Se(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=FSe(i))&&(r.precision=o-(r.type==="%")*2);break}}return uO(r)}function Ru(t){var e=t.domain;return t.ticks=function(n){var r=e();return UM(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return UZ(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,s=r[i],a=r[o],u,c,f=10;for(a<s&&(c=s,s=a,a=c,c=i,i=o,o=c);f-- >0;){if(c=qM(s,a,n),c===u)return r[i]=s,r[o]=a,e(r);if(c>0)s=Math.floor(s/c)*c,a=Math.ceil(a/c)*c;else if(c<0)s=Math.ceil(s*c)/c,a=Math.floor(a*c)/c;else break;u=c}return t},t}function qZ(){var t=aO();return t.copy=function(){return By(t,qZ())},Co.apply(t,arguments),Ru(t)}function FZ(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,xb),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return FZ(t).unknown(e)},t=arguments.length?Array.from(t,xb):[0,1],Ru(n)}function BZ(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],o=t[r],s;return o<i&&(s=n,n=r,r=s,s=i,i=o,o=s),t[n]=e.floor(i),t[r]=e.ceil(o),t}function t5(t){return Math.log(t)}function n5(t){return Math.exp(t)}function zSe(t){return-Math.log(-t)}function HSe(t){return-Math.exp(-t)}function GSe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function jSe(t){return t===10?GSe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function KSe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function r5(t){return(e,n)=>-t(-e,n)}function cO(t){const e=t(t5,n5),n=e.domain;let r=10,i,o;function s(){return i=KSe(r),o=jSe(r),n()[0]<0?(i=r5(i),o=r5(o),t(zSe,HSe)):t(t5,n5),e}return e.base=function(a){return arguments.length?(r=+a,s()):r},e.domain=function(a){return arguments.length?(n(a),s()):n()},e.ticks=a=>{const u=n();let c=u[0],f=u[u.length-1];const h=f<c;h&&([c,f]=[f,c]);let g=i(c),_=i(f),T,E;const b=a==null?10:+a;let S=[];if(!(r%1)&&_-g<b){if(g=Math.floor(g),_=Math.ceil(_),c>0){for(;g<=_;++g)for(T=1;T<r;++T)if(E=g<0?T/o(-g):T*o(g),!(E<c)){if(E>f)break;S.push(E)}}else for(;g<=_;++g)for(T=r-1;T>=1;--T)if(E=g>0?T/o(-g):T*o(g),!(E<c)){if(E>f)break;S.push(E)}S.length*2<b&&(S=UM(c,f,b))}else S=UM(g,_,Math.min(_-g,b)).map(o);return h?S.reverse():S},e.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=ey(u)).precision==null&&(u.trim=!0),u=uO(u)),a===1/0)return u;const c=Math.max(1,r*a/e.ticks().length);return f=>{let h=f/o(Math.round(i(f)));return h*r<r-.5&&(h*=r),h<=c?u(f):""}},e.nice=()=>n(BZ(n(),{floor:a=>o(Math.floor(i(a))),ceil:a=>o(Math.ceil(i(a)))})),e}function $Z(){const t=cO(rE()).domain([1,10]);return t.copy=()=>By(t,$Z()).base(t.base()),Co.apply(t,arguments),t}function i5(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function o5(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function fO(t){var e=1,n=t(i5(e),o5(e));return n.constant=function(r){return arguments.length?t(i5(e=+r),o5(e)):e},Ru(n)}function zZ(){var t=fO(rE());return t.copy=function(){return By(t,zZ()).constant(t.constant())},Co.apply(t,arguments)}function s5(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function WSe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function YSe(t){return t<0?-t*t:t*t}function dO(t){var e=t(ti,ti),n=1;function r(){return n===1?t(ti,ti):n===.5?t(WSe,YSe):t(s5(n),s5(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Ru(e)}function hO(){var t=dO(rE());return t.copy=function(){return By(t,hO()).exponent(t.exponent())},Co.apply(t,arguments),t}function JSe(){return hO.apply(null,arguments).exponent(.5)}function a5(t){return Math.sign(t)*t*t}function XSe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function HZ(){var t=aO(),e=[0,1],n=!1,r;function i(o){var s=XSe(t(o));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(o){return t.invert(a5(o))},i.domain=function(o){return arguments.length?(t.domain(o),i):t.domain()},i.range=function(o){return arguments.length?(t.range((e=Array.from(o,xb)).map(a5)),i):e.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(n=!!o,i):n},i.clamp=function(o){return arguments.length?(t.clamp(o),i):t.clamp()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return HZ(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Co.apply(i,arguments),Ru(i)}function GZ(){var t=[],e=[],n=[],r;function i(){var s=0,a=Math.max(1,e.length);for(n=new Array(a-1);++s<a;)n[s-1]=Wxe(t,s/a);return o}function o(s){return s==null||isNaN(s=+s)?r:e[qy(n,s)]}return o.invertExtent=function(s){var a=e.indexOf(s);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},o.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let a of s)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(su),i()},o.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return GZ().domain(t).range(e).unknown(r)},Co.apply(o,arguments)}function jZ(){var t=0,e=1,n=1,r=[.5],i=[0,1],o;function s(u){return u!=null&&u<=u?i[qy(r,u,0,n)]:o}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*e-(u-n)*t)/(n+1);return s}return s.domain=function(u){return arguments.length?([t,e]=u,t=+t,e=+e,a()):[t,e]},s.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},s.invertExtent=function(u){var c=i.indexOf(u);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},s.unknown=function(u){return arguments.length&&(o=u),s},s.thresholds=function(){return r.slice()},s.copy=function(){return jZ().domain([t,e]).range(i).unknown(o)},Co.apply(Ru(s),arguments)}function KZ(){var t=[.5],e=[0,1],n,r=1;function i(o){return o!=null&&o<=o?e[qy(t,o,0,r)]:n}return i.domain=function(o){return arguments.length?(t=Array.from(o),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(o){return arguments.length?(e=Array.from(o),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(o){var s=e.indexOf(o);return[t[s-1],t[s]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return KZ().domain(t).range(e).unknown(n)},Co.apply(i,arguments)}const AA=new Date,CA=new Date;function nr(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=(o,s)=>(e(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,a)=>{const u=[];if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return u;let c;do u.push(c=new Date(+o)),e(o,a),t(o);while(c<o&&o<s);return u},i.filter=o=>nr(s=>{if(s>=s)for(;t(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;e(s,-1),!o(s););else for(;--a>=0;)for(;e(s,1),!o(s););}),n&&(i.count=(o,s)=>(AA.setTime(+o),CA.setTime(+s),t(AA),t(CA),Math.floor(n(AA,CA))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?s=>r(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const Ab=nr(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Ab.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?nr(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Ab);Ab.range;const Ta=1e3,go=Ta*60,xa=go*60,Fa=xa*24,pO=Fa*7,l5=Fa*30,IA=Fa*365,Pc=nr(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Ta)},(t,e)=>(e-t)/Ta,t=>t.getUTCSeconds());Pc.range;const mO=nr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ta)},(t,e)=>{t.setTime(+t+e*go)},(t,e)=>(e-t)/go,t=>t.getMinutes());mO.range;const gO=nr(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*go)},(t,e)=>(e-t)/go,t=>t.getUTCMinutes());gO.range;const yO=nr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ta-t.getMinutes()*go)},(t,e)=>{t.setTime(+t+e*xa)},(t,e)=>(e-t)/xa,t=>t.getHours());yO.range;const vO=nr(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*xa)},(t,e)=>(e-t)/xa,t=>t.getUTCHours());vO.range;const $y=nr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*go)/Fa,t=>t.getDate()-1);$y.range;const iE=nr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Fa,t=>t.getUTCDate()-1);iE.range;const WZ=nr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Fa,t=>Math.floor(t/Fa));WZ.range;function yf(t){return nr(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*go)/pO)}const oE=yf(0),Cb=yf(1),QSe=yf(2),ZSe=yf(3),_h=yf(4),eAe=yf(5),tAe=yf(6);oE.range;Cb.range;QSe.range;ZSe.range;_h.range;eAe.range;tAe.range;function vf(t){return nr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/pO)}const sE=vf(0),Ib=vf(1),nAe=vf(2),rAe=vf(3),bh=vf(4),iAe=vf(5),oAe=vf(6);sE.range;Ib.range;nAe.range;rAe.range;bh.range;iAe.range;oAe.range;const _O=nr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());_O.range;const bO=nr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());bO.range;const Ba=nr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Ba.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:nr(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Ba.range;const $a=nr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());$a.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:nr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});$a.range;function YZ(t,e,n,r,i,o){const s=[[Pc,1,Ta],[Pc,5,5*Ta],[Pc,15,15*Ta],[Pc,30,30*Ta],[o,1,go],[o,5,5*go],[o,15,15*go],[o,30,30*go],[i,1,xa],[i,3,3*xa],[i,6,6*xa],[i,12,12*xa],[r,1,Fa],[r,2,2*Fa],[n,1,pO],[e,1,l5],[e,3,3*l5],[t,1,IA]];function a(c,f,h){const g=f<c;g&&([c,f]=[f,c]);const _=h&&typeof h.range=="function"?h:u(c,f,h),T=_?_.range(c,+f+1):[];return g?T.reverse():T}function u(c,f,h){const g=Math.abs(f-c)/h,_=tO(([,,b])=>b).right(s,g);if(_===s.length)return t.every(FM(c/IA,f/IA,h));if(_===0)return Ab.every(Math.max(FM(c,f,h),1));const[T,E]=s[g/s[_-1][2]<s[_][2]/g?_-1:_];return T.every(E)}return[a,u]}const[sAe,aAe]=YZ($a,bO,sE,WZ,vO,gO),[lAe,uAe]=YZ(Ba,_O,oE,$y,yO,mO);function RA(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function PA(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Nm(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function cAe(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,s=t.shortDays,a=t.months,u=t.shortMonths,c=Mm(i),f=Dm(i),h=Mm(o),g=Dm(o),_=Mm(s),T=Dm(s),E=Mm(a),b=Dm(a),S=Mm(u),C=Dm(u),R={a:te,A:re,b:Y,B:G,c:null,d:p5,e:p5,f:DAe,g:zAe,G:GAe,H:PAe,I:NAe,j:MAe,L:JZ,m:kAe,M:OAe,p:Q,q:Z,Q:y5,s:v5,S:LAe,u:VAe,U:UAe,V:qAe,w:FAe,W:BAe,x:null,X:null,y:$Ae,Y:HAe,Z:jAe,"%":g5},P={a:fe,A:J,b:ne,B:oe,c:null,d:m5,e:m5,f:JAe,g:s1e,G:l1e,H:KAe,I:WAe,j:YAe,L:QZ,m:XAe,M:QAe,p:_e,q:Ce,Q:y5,s:v5,S:ZAe,u:e1e,U:t1e,V:n1e,w:r1e,W:i1e,x:null,X:null,y:o1e,Y:a1e,Z:u1e,"%":g5},O={a:U,A:V,b:$,B:F,c:H,d:d5,e:d5,f:AAe,g:f5,G:c5,H:h5,I:h5,j:EAe,L:SAe,m:wAe,M:TAe,p:N,q:bAe,Q:IAe,s:RAe,S:xAe,u:mAe,U:gAe,V:yAe,w:pAe,W:vAe,x:X,X:K,y:f5,Y:c5,Z:_Ae,"%":CAe};R.x=q(n,R),R.X=q(r,R),R.c=q(e,R),P.x=q(n,P),P.X=q(r,P),P.c=q(e,P);function q(ye,Ie){return function(Le){var be=[],Qe=-1,Be=0,Ve=ye.length,at,Pe,qe;for(Le instanceof Date||(Le=new Date(+Le));++Qe<Ve;)ye.charCodeAt(Qe)===37&&(be.push(ye.slice(Be,Qe)),(Pe=u5[at=ye.charAt(++Qe)])!=null?at=ye.charAt(++Qe):Pe=at==="e"?" ":"0",(qe=Ie[at])&&(at=qe(Le,Pe)),be.push(at),Be=Qe+1);return be.push(ye.slice(Be,Qe)),be.join("")}}function D(ye,Ie){return function(Le){var be=Nm(1900,void 0,1),Qe=L(be,ye,Le+="",0),Be,Ve;if(Qe!=Le.length)return null;if("Q"in be)return new Date(be.Q);if("s"in be)return new Date(be.s*1e3+("L"in be?be.L:0));if(Ie&&!("Z"in be)&&(be.Z=0),"p"in be&&(be.H=be.H%12+be.p*12),be.m===void 0&&(be.m="q"in be?be.q:0),"V"in be){if(be.V<1||be.V>53)return null;"w"in be||(be.w=1),"Z"in be?(Be=PA(Nm(be.y,0,1)),Ve=Be.getUTCDay(),Be=Ve>4||Ve===0?Ib.ceil(Be):Ib(Be),Be=iE.offset(Be,(be.V-1)*7),be.y=Be.getUTCFullYear(),be.m=Be.getUTCMonth(),be.d=Be.getUTCDate()+(be.w+6)%7):(Be=RA(Nm(be.y,0,1)),Ve=Be.getDay(),Be=Ve>4||Ve===0?Cb.ceil(Be):Cb(Be),Be=$y.offset(Be,(be.V-1)*7),be.y=Be.getFullYear(),be.m=Be.getMonth(),be.d=Be.getDate()+(be.w+6)%7)}else("W"in be||"U"in be)&&("w"in be||(be.w="u"in be?be.u%7:"W"in be?1:0),Ve="Z"in be?PA(Nm(be.y,0,1)).getUTCDay():RA(Nm(be.y,0,1)).getDay(),be.m=0,be.d="W"in be?(be.w+6)%7+be.W*7-(Ve+5)%7:be.w+be.U*7-(Ve+6)%7);return"Z"in be?(be.H+=be.Z/100|0,be.M+=be.Z%100,PA(be)):RA(be)}}function L(ye,Ie,Le,be){for(var Qe=0,Be=Ie.length,Ve=Le.length,at,Pe;Qe<Be;){if(be>=Ve)return-1;if(at=Ie.charCodeAt(Qe++),at===37){if(at=Ie.charAt(Qe++),Pe=O[at in u5?Ie.charAt(Qe++):at],!Pe||(be=Pe(ye,Le,be))<0)return-1}else if(at!=Le.charCodeAt(be++))return-1}return be}function N(ye,Ie,Le){var be=c.exec(Ie.slice(Le));return be?(ye.p=f.get(be[0].toLowerCase()),Le+be[0].length):-1}function U(ye,Ie,Le){var be=_.exec(Ie.slice(Le));return be?(ye.w=T.get(be[0].toLowerCase()),Le+be[0].length):-1}function V(ye,Ie,Le){var be=h.exec(Ie.slice(Le));return be?(ye.w=g.get(be[0].toLowerCase()),Le+be[0].length):-1}function $(ye,Ie,Le){var be=S.exec(Ie.slice(Le));return be?(ye.m=C.get(be[0].toLowerCase()),Le+be[0].length):-1}function F(ye,Ie,Le){var be=E.exec(Ie.slice(Le));return be?(ye.m=b.get(be[0].toLowerCase()),Le+be[0].length):-1}function H(ye,Ie,Le){return L(ye,e,Ie,Le)}function X(ye,Ie,Le){return L(ye,n,Ie,Le)}function K(ye,Ie,Le){return L(ye,r,Ie,Le)}function te(ye){return s[ye.getDay()]}function re(ye){return o[ye.getDay()]}function Y(ye){return u[ye.getMonth()]}function G(ye){return a[ye.getMonth()]}function Q(ye){return i[+(ye.getHours()>=12)]}function Z(ye){return 1+~~(ye.getMonth()/3)}function fe(ye){return s[ye.getUTCDay()]}function J(ye){return o[ye.getUTCDay()]}function ne(ye){return u[ye.getUTCMonth()]}function oe(ye){return a[ye.getUTCMonth()]}function _e(ye){return i[+(ye.getUTCHours()>=12)]}function Ce(ye){return 1+~~(ye.getUTCMonth()/3)}return{format:function(ye){var Ie=q(ye+="",R);return Ie.toString=function(){return ye},Ie},parse:function(ye){var Ie=D(ye+="",!1);return Ie.toString=function(){return ye},Ie},utcFormat:function(ye){var Ie=q(ye+="",P);return Ie.toString=function(){return ye},Ie},utcParse:function(ye){var Ie=D(ye+="",!0);return Ie.toString=function(){return ye},Ie}}}var u5={"-":"",_:" ",0:"0"},yr=/^\s*\d+/,fAe=/^%/,dAe=/[\\^$*+?|[\]().{}]/g;function St(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function hAe(t){return t.replace(dAe,"\\$&")}function Mm(t){return new RegExp("^(?:"+t.map(hAe).join("|")+")","i")}function Dm(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function pAe(t,e,n){var r=yr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function mAe(t,e,n){var r=yr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function gAe(t,e,n){var r=yr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function yAe(t,e,n){var r=yr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function vAe(t,e,n){var r=yr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function c5(t,e,n){var r=yr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function f5(t,e,n){var r=yr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function _Ae(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function bAe(t,e,n){var r=yr.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function wAe(t,e,n){var r=yr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function d5(t,e,n){var r=yr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function EAe(t,e,n){var r=yr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function h5(t,e,n){var r=yr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function TAe(t,e,n){var r=yr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function xAe(t,e,n){var r=yr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function SAe(t,e,n){var r=yr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function AAe(t,e,n){var r=yr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function CAe(t,e,n){var r=fAe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function IAe(t,e,n){var r=yr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function RAe(t,e,n){var r=yr.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function p5(t,e){return St(t.getDate(),e,2)}function PAe(t,e){return St(t.getHours(),e,2)}function NAe(t,e){return St(t.getHours()%12||12,e,2)}function MAe(t,e){return St(1+$y.count(Ba(t),t),e,3)}function JZ(t,e){return St(t.getMilliseconds(),e,3)}function DAe(t,e){return JZ(t,e)+"000"}function kAe(t,e){return St(t.getMonth()+1,e,2)}function OAe(t,e){return St(t.getMinutes(),e,2)}function LAe(t,e){return St(t.getSeconds(),e,2)}function VAe(t){var e=t.getDay();return e===0?7:e}function UAe(t,e){return St(oE.count(Ba(t)-1,t),e,2)}function XZ(t){var e=t.getDay();return e>=4||e===0?_h(t):_h.ceil(t)}function qAe(t,e){return t=XZ(t),St(_h.count(Ba(t),t)+(Ba(t).getDay()===4),e,2)}function FAe(t){return t.getDay()}function BAe(t,e){return St(Cb.count(Ba(t)-1,t),e,2)}function $Ae(t,e){return St(t.getFullYear()%100,e,2)}function zAe(t,e){return t=XZ(t),St(t.getFullYear()%100,e,2)}function HAe(t,e){return St(t.getFullYear()%1e4,e,4)}function GAe(t,e){var n=t.getDay();return t=n>=4||n===0?_h(t):_h.ceil(t),St(t.getFullYear()%1e4,e,4)}function jAe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+St(e/60|0,"0",2)+St(e%60,"0",2)}function m5(t,e){return St(t.getUTCDate(),e,2)}function KAe(t,e){return St(t.getUTCHours(),e,2)}function WAe(t,e){return St(t.getUTCHours()%12||12,e,2)}function YAe(t,e){return St(1+iE.count($a(t),t),e,3)}function QZ(t,e){return St(t.getUTCMilliseconds(),e,3)}function JAe(t,e){return QZ(t,e)+"000"}function XAe(t,e){return St(t.getUTCMonth()+1,e,2)}function QAe(t,e){return St(t.getUTCMinutes(),e,2)}function ZAe(t,e){return St(t.getUTCSeconds(),e,2)}function e1e(t){var e=t.getUTCDay();return e===0?7:e}function t1e(t,e){return St(sE.count($a(t)-1,t),e,2)}function ZZ(t){var e=t.getUTCDay();return e>=4||e===0?bh(t):bh.ceil(t)}function n1e(t,e){return t=ZZ(t),St(bh.count($a(t),t)+($a(t).getUTCDay()===4),e,2)}function r1e(t){return t.getUTCDay()}function i1e(t,e){return St(Ib.count($a(t)-1,t),e,2)}function o1e(t,e){return St(t.getUTCFullYear()%100,e,2)}function s1e(t,e){return t=ZZ(t),St(t.getUTCFullYear()%100,e,2)}function a1e(t,e){return St(t.getUTCFullYear()%1e4,e,4)}function l1e(t,e){var n=t.getUTCDay();return t=n>=4||n===0?bh(t):bh.ceil(t),St(t.getUTCFullYear()%1e4,e,4)}function u1e(){return"+0000"}function g5(){return"%"}function y5(t){return+t}function v5(t){return Math.floor(+t/1e3)}var gd,eee,tee;c1e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function c1e(t){return gd=cAe(t),eee=gd.format,gd.parse,tee=gd.utcFormat,gd.utcParse,gd}function f1e(t){return new Date(t)}function d1e(t){return t instanceof Date?+t:+new Date(+t)}function wO(t,e,n,r,i,o,s,a,u,c){var f=aO(),h=f.invert,g=f.domain,_=c(".%L"),T=c(":%S"),E=c("%I:%M"),b=c("%I %p"),S=c("%a %d"),C=c("%b %d"),R=c("%B"),P=c("%Y");function O(q){return(u(q)<q?_:a(q)<q?T:s(q)<q?E:o(q)<q?b:r(q)<q?i(q)<q?S:C:n(q)<q?R:P)(q)}return f.invert=function(q){return new Date(h(q))},f.domain=function(q){return arguments.length?g(Array.from(q,d1e)):g().map(f1e)},f.ticks=function(q){var D=g();return t(D[0],D[D.length-1],q??10)},f.tickFormat=function(q,D){return D==null?O:c(D)},f.nice=function(q){var D=g();return(!q||typeof q.range!="function")&&(q=e(D[0],D[D.length-1],q??10)),q?g(BZ(D,q)):f},f.copy=function(){return By(f,wO(t,e,n,r,i,o,s,a,u,c))},f}function h1e(){return Co.apply(wO(lAe,uAe,Ba,_O,oE,$y,yO,mO,Pc,eee).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function p1e(){return Co.apply(wO(sAe,aAe,$a,bO,sE,iE,vO,gO,Pc,tee).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function aE(){var t=0,e=1,n,r,i,o,s=ti,a=!1,u;function c(h){return h==null||isNaN(h=+h)?u:s(i===0?.5:(h=(o(h)-n)*i,a?Math.max(0,Math.min(1,h)):h))}c.domain=function(h){return arguments.length?([t,e]=h,n=o(t=+t),r=o(e=+e),i=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(h){return arguments.length?(a=!!h,c):a},c.interpolator=function(h){return arguments.length?(s=h,c):s};function f(h){return function(g){var _,T;return arguments.length?([_,T]=g,s=h(_,T),c):[s(0),s(1)]}}return c.range=f(Wh),c.rangeRound=f(sO),c.unknown=function(h){return arguments.length?(u=h,c):u},function(h){return o=h,n=h(t),r=h(e),i=n===r?0:1/(r-n),c}}function Pu(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function nee(){var t=Ru(aE()(ti));return t.copy=function(){return Pu(t,nee())},nl.apply(t,arguments)}function ree(){var t=cO(aE()).domain([1,10]);return t.copy=function(){return Pu(t,ree()).base(t.base())},nl.apply(t,arguments)}function iee(){var t=fO(aE());return t.copy=function(){return Pu(t,iee()).constant(t.constant())},nl.apply(t,arguments)}function EO(){var t=dO(aE());return t.copy=function(){return Pu(t,EO()).exponent(t.exponent())},nl.apply(t,arguments)}function m1e(){return EO.apply(null,arguments).exponent(.5)}function oee(){var t=[],e=ti;function n(r){if(r!=null&&!isNaN(r=+r))return e((qy(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(su),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,o)=>Kxe(t,o/r))},n.copy=function(){return oee(e).domain(t)},nl.apply(n,arguments)}function lE(){var t=0,e=.5,n=1,r=1,i,o,s,a,u,c=ti,f,h=!1,g;function _(E){return isNaN(E=+E)?g:(E=.5+((E=+f(E))-o)*(r*E<r*o?a:u),c(h?Math.max(0,Math.min(1,E)):E))}_.domain=function(E){return arguments.length?([t,e,n]=E,i=f(t=+t),o=f(e=+e),s=f(n=+n),a=i===o?0:.5/(o-i),u=o===s?0:.5/(s-o),r=o<i?-1:1,_):[t,e,n]},_.clamp=function(E){return arguments.length?(h=!!E,_):h},_.interpolator=function(E){return arguments.length?(c=E,_):c};function T(E){return function(b){var S,C,R;return arguments.length?([S,C,R]=b,c=CSe(E,[S,C,R]),_):[c(0),c(.5),c(1)]}}return _.range=T(Wh),_.rangeRound=T(sO),_.unknown=function(E){return arguments.length?(g=E,_):g},function(E){return f=E,i=E(t),o=E(e),s=E(n),a=i===o?0:.5/(o-i),u=o===s?0:.5/(s-o),r=o<i?-1:1,_}}function see(){var t=Ru(lE()(ti));return t.copy=function(){return Pu(t,see())},nl.apply(t,arguments)}function aee(){var t=cO(lE()).domain([.1,1,10]);return t.copy=function(){return Pu(t,aee()).base(t.base())},nl.apply(t,arguments)}function lee(){var t=fO(lE());return t.copy=function(){return Pu(t,lee()).constant(t.constant())},nl.apply(t,arguments)}function TO(){var t=dO(lE());return t.copy=function(){return Pu(t,TO()).exponent(t.exponent())},nl.apply(t,arguments)}function g1e(){return TO.apply(null,arguments).exponent(.5)}const Jm=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:rO,scaleDiverging:see,scaleDivergingLog:aee,scaleDivergingPow:TO,scaleDivergingSqrt:g1e,scaleDivergingSymlog:lee,scaleIdentity:FZ,scaleImplicit:BM,scaleLinear:qZ,scaleLog:$Z,scaleOrdinal:nO,scalePoint:Jxe,scalePow:hO,scaleQuantile:GZ,scaleQuantize:jZ,scaleRadial:HZ,scaleSequential:nee,scaleSequentialLog:ree,scaleSequentialPow:EO,scaleSequentialQuantile:oee,scaleSequentialSqrt:m1e,scaleSequentialSymlog:iee,scaleSqrt:JSe,scaleSymlog:zZ,scaleThreshold:KZ,scaleTime:h1e,scaleUtc:p1e,tickFormat:UZ},Symbol.toStringTag,{value:"Module"}));var Nu=t=>t.chartData,y1e=ve([Nu],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),xO=(t,e,n,r)=>r?y1e(t):Nu(t);function wh(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if($i(e)&&$i(n))return!0}return!1}function _5(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function v1e(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,o;if($i(n))i=n;else if(typeof n=="function")return;if($i(r))o=r;else if(typeof r=="function")return;var s=[i,o];if(wh(s))return s}}function _1e(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(wh(r))return _5(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,o]=t,s,a;if(i==="auto")e!=null&&(s=Math.min(...e));else if(it(i))s=i;else if(typeof i=="function")try{e!=null&&(s=i(e==null?void 0:e[0]))}catch{}else if(typeof i=="string"&&c6.test(i)){var u=c6.exec(i);if(u==null||e==null)s=void 0;else{var c=+u[1];s=e[0]-c}}else s=e==null?void 0:e[0];if(o==="auto")e!=null&&(a=Math.max(...e));else if(it(o))a=o;else if(typeof o=="function")try{e!=null&&(a=o(e==null?void 0:e[1]))}catch{}else if(typeof o=="string"&&f6.test(o)){var f=f6.exec(o);if(f==null||e==null)a=void 0;else{var h=+f[1];a=e[1]+h}}else a=e==null?void 0:e[1];var g=[s,a];if(wh(g))return e==null?g:_5(g,e,n)}}}var Yh=1e9,b1e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},AO,dn=!0,So="[DecimalError] ",qc=So+"Invalid argument: ",SO=So+"Exponent out of range: ",Jh=Math.floor,yc=Math.pow,w1e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Di,cr=1e7,tn=7,uee=9007199254740991,Rb=Jh(uee/tn),ze={};ze.absoluteValue=ze.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};ze.comparedTo=ze.cmp=function(t){var e,n,r,i,o=this;if(t=new o.constructor(t),o.s!==t.s)return o.s||-t.s;if(o.e!==t.e)return o.e>t.e^o.s<0?1:-1;for(r=o.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(o.d[e]!==t.d[e])return o.d[e]>t.d[e]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1};ze.decimalPlaces=ze.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*tn;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};ze.dividedBy=ze.div=function(t){return Na(this,new this.constructor(t))};ze.dividedToIntegerBy=ze.idiv=function(t){var e=this,n=e.constructor;return Kt(Na(e,new n(t),0,1),n.precision)};ze.equals=ze.eq=function(t){return!this.cmp(t)};ze.exponent=function(){return Hn(this)};ze.greaterThan=ze.gt=function(t){return this.cmp(t)>0};ze.greaterThanOrEqualTo=ze.gte=function(t){return this.cmp(t)>=0};ze.isInteger=ze.isint=function(){return this.e>this.d.length-2};ze.isNegative=ze.isneg=function(){return this.s<0};ze.isPositive=ze.ispos=function(){return this.s>0};ze.isZero=function(){return this.s===0};ze.lessThan=ze.lt=function(t){return this.cmp(t)<0};ze.lessThanOrEqualTo=ze.lte=function(t){return this.cmp(t)<1};ze.logarithm=ze.log=function(t){var e,n=this,r=n.constructor,i=r.precision,o=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Di))throw Error(So+"NaN");if(n.s<1)throw Error(So+(n.s?"NaN":"-Infinity"));return n.eq(Di)?new r(0):(dn=!1,e=Na(ty(n,o),ty(t,o),o),dn=!0,Kt(e,i))};ze.minus=ze.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?dee(e,t):cee(e,(t.s=-t.s,t))};ze.modulo=ze.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(So+"NaN");return n.s?(dn=!1,e=Na(n,t,0,1).times(t),dn=!0,n.minus(e)):Kt(new r(n),i)};ze.naturalExponential=ze.exp=function(){return fee(this)};ze.naturalLogarithm=ze.ln=function(){return ty(this)};ze.negated=ze.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};ze.plus=ze.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?cee(e,t):dee(e,(t.s=-t.s,t))};ze.precision=ze.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(qc+t);if(e=Hn(i)+1,r=i.d.length-1,n=r*tn+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};ze.squareRoot=ze.sqrt=function(){var t,e,n,r,i,o,s,a=this,u=a.constructor;if(a.s<1){if(!a.s)return new u(0);throw Error(So+"NaN")}for(t=Hn(a),dn=!1,i=Math.sqrt(+a),i==0||i==1/0?(e=ks(a.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Jh((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new u(e)):r=new u(i.toString()),n=u.precision,i=s=n+3;;)if(o=r,r=o.plus(Na(a,o,s+2)).times(.5),ks(o.d).slice(0,s)===(e=ks(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(Kt(o,n+1,0),o.times(o).eq(a)){r=o;break}}else if(e!="9999")break;s+=4}return dn=!0,Kt(r,n)};ze.times=ze.mul=function(t){var e,n,r,i,o,s,a,u,c,f=this,h=f.constructor,g=f.d,_=(t=new h(t)).d;if(!f.s||!t.s)return new h(0);for(t.s*=f.s,n=f.e+t.e,u=g.length,c=_.length,u<c&&(o=g,g=_,_=o,s=u,u=c,c=s),o=[],s=u+c,r=s;r--;)o.push(0);for(r=c;--r>=0;){for(e=0,i=u+r;i>r;)a=o[i]+_[r]*g[i-r-1]+e,o[i--]=a%cr|0,e=a/cr|0;o[i]=(o[i]+e)%cr|0}for(;!o[--s];)o.pop();return e?++n:o.shift(),t.d=o,t.e=n,dn?Kt(t,h.precision):t};ze.toDecimalPlaces=ze.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Hs(t,0,Yh),e===void 0?e=r.rounding:Hs(e,0,8),Kt(n,t+Hn(n)+1,e))};ze.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=rf(r,!0):(Hs(t,0,Yh),e===void 0?e=i.rounding:Hs(e,0,8),r=Kt(new i(r),t+1,e),n=rf(r,!0,t+1)),n};ze.toFixed=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?rf(i):(Hs(t,0,Yh),e===void 0?e=o.rounding:Hs(e,0,8),r=Kt(new o(i),t+Hn(i)+1,e),n=rf(r.abs(),!1,t+Hn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};ze.toInteger=ze.toint=function(){var t=this,e=t.constructor;return Kt(new e(t),Hn(t)+1,e.rounding)};ze.toNumber=function(){return+this};ze.toPower=ze.pow=function(t){var e,n,r,i,o,s,a=this,u=a.constructor,c=12,f=+(t=new u(t));if(!t.s)return new u(Di);if(a=new u(a),!a.s){if(t.s<1)throw Error(So+"Infinity");return a}if(a.eq(Di))return a;if(r=u.precision,t.eq(Di))return Kt(a,r);if(e=t.e,n=t.d.length-1,s=e>=n,o=a.s,s){if((n=f<0?-f:f)<=uee){for(i=new u(Di),e=Math.ceil(r/tn+4),dn=!1;n%2&&(i=i.times(a),w5(i.d,e)),n=Jh(n/2),n!==0;)a=a.times(a),w5(a.d,e);return dn=!0,t.s<0?new u(Di).div(i):Kt(i,r)}}else if(o<0)throw Error(So+"NaN");return o=o<0&&t.d[Math.max(e,n)]&1?-1:1,a.s=1,dn=!1,i=t.times(ty(a,r+c)),dn=!0,i=fee(i),i.s=o,i};ze.toPrecision=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?(n=Hn(i),r=rf(i,n<=o.toExpNeg||n>=o.toExpPos)):(Hs(t,1,Yh),e===void 0?e=o.rounding:Hs(e,0,8),i=Kt(new o(i),t,e),n=Hn(i),r=rf(i,t<=n||n<=o.toExpNeg,t)),r};ze.toSignificantDigits=ze.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Hs(t,1,Yh),e===void 0?e=r.rounding:Hs(e,0,8)),Kt(new r(n),t,e)};ze.toString=ze.valueOf=ze.val=ze.toJSON=ze[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Hn(t),n=t.constructor;return rf(t,e<=n.toExpNeg||e>=n.toExpPos)};function cee(t,e){var n,r,i,o,s,a,u,c,f=t.constructor,h=f.precision;if(!t.s||!e.s)return e.s||(e=new f(t)),dn?Kt(e,h):e;if(u=t.d,c=e.d,s=t.e,i=e.e,u=u.slice(),o=s-i,o){for(o<0?(r=u,o=-o,a=c.length):(r=c,i=s,a=u.length),s=Math.ceil(h/tn),a=s>a?s+1:a+1,o>a&&(o=a,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for(a=u.length,o=c.length,a-o<0&&(o=a,r=c,c=u,u=r),n=0;o;)n=(u[--o]=u[o]+c[o]+n)/cr|0,u[o]%=cr;for(n&&(u.unshift(n),++i),a=u.length;u[--a]==0;)u.pop();return e.d=u,e.e=i,dn?Kt(e,h):e}function Hs(t,e,n){if(t!==~~t||t<e||t>n)throw Error(qc+t)}function ks(t){var e,n,r,i=t.length-1,o="",s=t[0];if(i>0){for(o+=s,e=1;e<i;e++)r=t[e]+"",n=tn-r.length,n&&(o+=jl(n)),o+=r;s=t[e],r=s+"",n=tn-r.length,n&&(o+=jl(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return o+s}var Na=(function(){function t(r,i){var o,s=0,a=r.length;for(r=r.slice();a--;)o=r[a]*i+s,r[a]=o%cr|0,s=o/cr|0;return s&&r.unshift(s),r}function e(r,i,o,s){var a,u;if(o!=s)u=o>s?1:-1;else for(a=u=0;a<o;a++)if(r[a]!=i[a]){u=r[a]>i[a]?1:-1;break}return u}function n(r,i,o){for(var s=0;o--;)r[o]-=s,s=r[o]<i[o]?1:0,r[o]=s*cr+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,s){var a,u,c,f,h,g,_,T,E,b,S,C,R,P,O,q,D,L,N=r.constructor,U=r.s==i.s?1:-1,V=r.d,$=i.d;if(!r.s)return new N(r);if(!i.s)throw Error(So+"Division by zero");for(u=r.e-i.e,D=$.length,O=V.length,_=new N(U),T=_.d=[],c=0;$[c]==(V[c]||0);)++c;if($[c]>(V[c]||0)&&--u,o==null?C=o=N.precision:s?C=o+(Hn(r)-Hn(i))+1:C=o,C<0)return new N(0);if(C=C/tn+2|0,c=0,D==1)for(f=0,$=$[0],C++;(c<O||f)&&C--;c++)R=f*cr+(V[c]||0),T[c]=R/$|0,f=R%$|0;else{for(f=cr/($[0]+1)|0,f>1&&($=t($,f),V=t(V,f),D=$.length,O=V.length),P=D,E=V.slice(0,D),b=E.length;b<D;)E[b++]=0;L=$.slice(),L.unshift(0),q=$[0],$[1]>=cr/2&&++q;do f=0,a=e($,E,D,b),a<0?(S=E[0],D!=b&&(S=S*cr+(E[1]||0)),f=S/q|0,f>1?(f>=cr&&(f=cr-1),h=t($,f),g=h.length,b=E.length,a=e(h,E,g,b),a==1&&(f--,n(h,D<g?L:$,g))):(f==0&&(a=f=1),h=$.slice()),g=h.length,g<b&&h.unshift(0),n(E,h,b),a==-1&&(b=E.length,a=e($,E,D,b),a<1&&(f++,n(E,D<b?L:$,b))),b=E.length):a===0&&(f++,E=[0]),T[c++]=f,a&&E[0]?E[b++]=V[P]||0:(E=[V[P]],b=1);while((P++<O||E[0]!==void 0)&&C--)}return T[0]||T.shift(),_.e=u,Kt(_,s?o+Hn(_)+1:o)}})();function fee(t,e){var n,r,i,o,s,a,u=0,c=0,f=t.constructor,h=f.precision;if(Hn(t)>16)throw Error(SO+Hn(t));if(!t.s)return new f(Di);for(dn=!1,a=h,s=new f(.03125);t.abs().gte(.1);)t=t.times(s),c+=5;for(r=Math.log(yc(2,c))/Math.LN10*2+5|0,a+=r,n=i=o=new f(Di),f.precision=a;;){if(i=Kt(i.times(t),a),n=n.times(++u),s=o.plus(Na(i,n,a)),ks(s.d).slice(0,a)===ks(o.d).slice(0,a)){for(;c--;)o=Kt(o.times(o),a);return f.precision=h,e==null?(dn=!0,Kt(o,h)):o}o=s}}function Hn(t){for(var e=t.e*tn,n=t.d[0];n>=10;n/=10)e++;return e}function NA(t,e,n){if(e>t.LN10.sd())throw dn=!0,n&&(t.precision=n),Error(So+"LN10 precision limit exceeded");return Kt(new t(t.LN10),e)}function jl(t){for(var e="";t--;)e+="0";return e}function ty(t,e){var n,r,i,o,s,a,u,c,f,h=1,g=10,_=t,T=_.d,E=_.constructor,b=E.precision;if(_.s<1)throw Error(So+(_.s?"NaN":"-Infinity"));if(_.eq(Di))return new E(0);if(e==null?(dn=!1,c=b):c=e,_.eq(10))return e==null&&(dn=!0),NA(E,c);if(c+=g,E.precision=c,n=ks(T),r=n.charAt(0),o=Hn(_),Math.abs(o)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)_=_.times(t),n=ks(_.d),r=n.charAt(0),h++;o=Hn(_),r>1?(_=new E("0."+n),o++):_=new E(r+"."+n.slice(1))}else return u=NA(E,c+2,b).times(o+""),_=ty(new E(r+"."+n.slice(1)),c-g).plus(u),E.precision=b,e==null?(dn=!0,Kt(_,b)):_;for(a=s=_=Na(_.minus(Di),_.plus(Di),c),f=Kt(_.times(_),c),i=3;;){if(s=Kt(s.times(f),c),u=a.plus(Na(s,new E(i),c)),ks(u.d).slice(0,c)===ks(a.d).slice(0,c))return a=a.times(2),o!==0&&(a=a.plus(NA(E,c+2,b).times(o+""))),a=Na(a,new E(h),c),E.precision=b,e==null?(dn=!0,Kt(a,b)):a;a=u,i+=2}}function b5(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Jh(n/tn),t.d=[],r=(n+1)%tn,n<0&&(r+=tn),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=tn;r<i;)t.d.push(+e.slice(r,r+=tn));e=e.slice(r),r=tn-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),dn&&(t.e>Rb||t.e<-Rb))throw Error(SO+n)}else t.s=0,t.e=0,t.d=[0];return t}function Kt(t,e,n){var r,i,o,s,a,u,c,f,h=t.d;for(s=1,o=h[0];o>=10;o/=10)s++;if(r=e-s,r<0)r+=tn,i=e,c=h[f=0];else{if(f=Math.ceil((r+1)/tn),o=h.length,f>=o)return t;for(c=o=h[f],s=1;o>=10;o/=10)s++;r%=tn,i=r-tn+s}if(n!==void 0&&(o=yc(10,s-i-1),a=c/o%10|0,u=e<0||h[f+1]!==void 0||c%o,u=n<4?(a||u)&&(n==0||n==(t.s<0?3:2)):a>5||a==5&&(n==4||u||n==6&&(r>0?i>0?c/yc(10,s-i):0:h[f-1])%10&1||n==(t.s<0?8:7))),e<1||!h[0])return u?(o=Hn(t),h.length=1,e=e-o-1,h[0]=yc(10,(tn-e%tn)%tn),t.e=Jh(-e/tn)||0):(h.length=1,h[0]=t.e=t.s=0),t;if(r==0?(h.length=f,o=1,f--):(h.length=f+1,o=yc(10,tn-r),h[f]=i>0?(c/yc(10,s-i)%yc(10,i)|0)*o:0),u)for(;;)if(f==0){(h[0]+=o)==cr&&(h[0]=1,++t.e);break}else{if(h[f]+=o,h[f]!=cr)break;h[f--]=0,o=1}for(r=h.length;h[--r]===0;)h.pop();if(dn&&(t.e>Rb||t.e<-Rb))throw Error(SO+Hn(t));return t}function dee(t,e){var n,r,i,o,s,a,u,c,f,h,g=t.constructor,_=g.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new g(t),dn?Kt(e,_):e;if(u=t.d,h=e.d,r=e.e,c=t.e,u=u.slice(),s=c-r,s){for(f=s<0,f?(n=u,s=-s,a=h.length):(n=h,r=c,a=u.length),i=Math.max(Math.ceil(_/tn),a)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=u.length,a=h.length,f=i<a,f&&(a=i),i=0;i<a;i++)if(u[i]!=h[i]){f=u[i]<h[i];break}s=0}for(f&&(n=u,u=h,h=n,e.s=-e.s),a=u.length,i=h.length-a;i>0;--i)u[a++]=0;for(i=h.length;i>s;){if(u[--i]<h[i]){for(o=i;o&&u[--o]===0;)u[o]=cr-1;--u[o],u[i]+=cr}u[i]-=h[i]}for(;u[--a]===0;)u.pop();for(;u[0]===0;u.shift())--r;return u[0]?(e.d=u,e.e=r,dn?Kt(e,_):e):new g(0)}function rf(t,e,n){var r,i=Hn(t),o=ks(t.d),s=o.length;return e?(n&&(r=n-s)>0?o=o.charAt(0)+"."+o.slice(1)+jl(r):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+jl(-i-1)+o,n&&(r=n-s)>0&&(o+=jl(r))):i>=s?(o+=jl(i+1-s),n&&(r=n-i-1)>0&&(o=o+"."+jl(r))):((r=i+1)<s&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(o+="."),o+=jl(r))),t.s<0?"-"+o:o}function w5(t,e){if(t.length>e)return t.length=e,!0}function hee(t){var e,n,r;function i(o){var s=this;if(!(s instanceof i))return new i(o);if(s.constructor=i,o instanceof i){s.s=o.s,s.e=o.e,s.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(qc+o);if(o>0)s.s=1;else if(o<0)o=-o,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(o===~~o&&o<1e7){s.e=0,s.d=[o];return}return b5(s,o.toString())}else if(typeof o!="string")throw Error(qc+o);if(o.charCodeAt(0)===45?(o=o.slice(1),s.s=-1):s.s=1,w1e.test(o))b5(s,o);else throw Error(qc+o)}if(i.prototype=ze,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=hee,i.config=i.set=E1e,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function E1e(t){if(!t||typeof t!="object")throw Error(So+"Object expected");var e,n,r,i=["precision",1,Yh,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Jh(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(qc+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(qc+n+": "+r);return this}var AO=hee(b1e);Di=new AO(1);const Lt=AO;var T1e=t=>t,pee={},mee=t=>t===pee,E5=t=>function e(){return arguments.length===0||arguments.length===1&&mee(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},gee=(t,e)=>t===1?e:E5(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=r.filter(s=>s!==pee).length;return o>=t?e(...r):gee(t-o,E5(function(){for(var s=arguments.length,a=new Array(s),u=0;u<s;u++)a[u]=arguments[u];var c=r.map(f=>mee(f)?a.shift():f);return e(...c,...a)}))}),uE=t=>gee(t.length,t),jM=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},x1e=uE((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),S1e=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return T1e;var i=n.reverse(),o=i[0],s=i.slice(1);return function(){return s.reduce((a,u)=>u(a),o(...arguments))}},KM=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join(""),yee=t=>{var e=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e&&i.every((s,a)=>{var u;return s===((u=e)===null||u===void 0?void 0:u[a])})||(e=i,n=t(...i)),n}};function vee(t){var e;return t===0?e=1:e=Math.floor(new Lt(t).abs().log(10).toNumber())+1,e}function _ee(t,e,n){for(var r=new Lt(t),i=0,o=[];r.lt(e)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o}uE((t,e,n)=>{var r=+t,i=+e;return r+n*(i-r)});uE((t,e,n)=>{var r=e-+t;return r=r||1/0,(n-t)/r});uE((t,e,n)=>{var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});var bee=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},wee=(t,e,n)=>{if(t.lte(0))return new Lt(0);var r=vee(t.toNumber()),i=new Lt(10).pow(r),o=t.div(i),s=r!==1?.05:.1,a=new Lt(Math.ceil(o.div(s).toNumber())).add(n).mul(s),u=a.mul(i);return e?new Lt(u.toNumber()):new Lt(Math.ceil(u.toNumber()))},A1e=(t,e,n)=>{var r=new Lt(1),i=new Lt(t);if(!i.isint()&&n){var o=Math.abs(t);o<1?(r=new Lt(10).pow(vee(t)-1),i=new Lt(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new Lt(Math.floor(t)))}else t===0?i=new Lt(Math.floor((e-1)/2)):n||(i=new Lt(Math.floor(t)));var s=Math.floor((e-1)/2),a=S1e(x1e(u=>i.add(new Lt(u-s).mul(r)).toNumber()),jM);return a(0,e)},Eee=function(e,n,r,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new Lt(0),tickMin:new Lt(0),tickMax:new Lt(0)};var s=wee(new Lt(n).sub(e).div(r-1),i,o),a;e<=0&&n>=0?a=new Lt(0):(a=new Lt(e).add(n).div(2),a=a.sub(new Lt(a).mod(s)));var u=Math.ceil(a.sub(e).div(s).toNumber()),c=Math.ceil(new Lt(n).sub(a).div(s).toNumber()),f=u+c+1;return f>r?Eee(e,n,r,i,o+1):(f<r&&(c=n>0?c+(r-f):c,u=n>0?u:u+(r-f)),{step:s,tickMin:a.sub(new Lt(u).mul(s)),tickMax:a.add(new Lt(c).mul(s))})};function C1e(t){var[e,n]=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(r,2),[s,a]=bee([e,n]);if(s===-1/0||a===1/0){var u=a===1/0?[s,...jM(0,r-1).map(()=>1/0)]:[...jM(0,r-1).map(()=>-1/0),a];return e>n?KM(u):u}if(s===a)return A1e(s,r,i);var{step:c,tickMin:f,tickMax:h}=Eee(s,a,o,i,0),g=_ee(f,h.add(new Lt(.1).mul(c)),c);return e>n?KM(g):g}function I1e(t,e){var[n,r]=t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,s]=bee([n,r]);if(o===-1/0||s===1/0)return[n,r];if(o===s)return[o];var a=Math.max(e,2),u=wee(new Lt(s).sub(o).div(a-1),i,0),c=[..._ee(new Lt(o),new Lt(s),u),s];return i===!1&&(c=c.map(f=>Math.round(f))),n>r?KM(c):c}var R1e=yee(C1e),P1e=yee(I1e),Tee=t=>t.rootProps.maxBarSize,N1e=t=>t.rootProps.barGap,xee=t=>t.rootProps.barCategoryGap,M1e=t=>t.rootProps.barSize,cE=t=>t.rootProps.stackOffset,CO=t=>t.options.chartName,IO=t=>t.rootProps.syncId,See=t=>t.rootProps.syncMethod,RO=t=>t.options.eventEmitter,_a={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Ni={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},fE=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},D1e={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:_a.angleAxisId,includeHidden:!1,name:void 0,reversed:_a.reversed,scale:_a.scale,tick:_a.tick,tickCount:void 0,ticks:void 0,type:_a.type,unit:void 0},k1e={allowDataOverflow:Ni.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Ni.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ni.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ni.scale,tick:Ni.tick,tickCount:Ni.tickCount,ticks:void 0,type:Ni.type,unit:void 0},O1e={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:_a.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:_a.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:_a.scale,tick:_a.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},L1e={allowDataOverflow:Ni.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Ni.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ni.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ni.scale,tick:Ni.tick,tickCount:Ni.tickCount,ticks:void 0,type:"category",unit:void 0},PO=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?O1e:D1e,NO=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?L1e:k1e,dE=t=>t.polarOptions,MO=ve([el,tl,gr],NEe),Aee=ve([dE,MO],(t,e)=>{if(t!=null)return Xo(t.innerRadius,e,0)}),Cee=ve([dE,MO],(t,e)=>{if(t!=null)return Xo(t.outerRadius,e,e*.8)}),V1e=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},Iee=ve([dE],V1e);ve([PO,Iee],fE);var Ree=ve([MO,Aee,Cee],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});ve([NO,Ree],fE);var Pee=ve([qt,dE,Aee,Cee,el,tl],(t,e,n,r,i,o)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:s,cy:a,startAngle:u,endAngle:c}=e;return{cx:Xo(s,i,i/2),cy:Xo(a,o,o/2),innerRadius:n,outerRadius:r,startAngle:u,endAngle:c,clockWise:!1}}}),Gn=(t,e)=>e,hE=(t,e,n)=>n;function DO(t){return t==null?void 0:t.id}var rr=t=>{var e=qt(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Xh=t=>t.tooltip.settings.axisId,vr=t=>{var e=rr(t),n=Xh(t);return zy(t,e,n)},Nee=ve([vr],t=>t==null?void 0:t.dataKey);function Mee(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:o}=n,s=new Map;return t.forEach(a=>{var u,c=(u=a.data)!==null&&u!==void 0?u:r;if(!(c==null||c.length===0)){var f=DO(a);c.forEach((h,g)=>{var _=o==null||i?g:String(ri(h,o,null)),T=ri(h,a.dataKey,0),E;s.has(_)?E=s.get(_):E={},Object.assign(E,{[f]:T}),s.set(_,E)})}}),Array.from(s.values())}function pE(t){return t.stackId!=null&&t.dataKey!=null}function T5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Pb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?T5(Object(n),!0).forEach(function(r){U1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function U1e(t,e,n){return(e=q1e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q1e(t){var e=F1e(t,"string");return typeof e=="symbol"?e:e+""}function F1e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var WM=[0,"auto"],Ii={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Dee=(t,e)=>t.cartesianAxis.xAxis[e],rl=(t,e)=>{var n=Dee(t,e);return n??Ii},Ri={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:WM,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Uy},kee=(t,e)=>t.cartesianAxis.yAxis[e],il=(t,e)=>{var n=kee(t,e);return n??Ri},B1e={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},kO=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??B1e},yi=(t,e,n)=>{switch(e){case"xAxis":return rl(t,n);case"yAxis":return il(t,n);case"zAxis":return kO(t,n);case"angleAxis":return PO(t,n);case"radiusAxis":return NO(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},$1e=(t,e,n)=>{switch(e){case"xAxis":return rl(t,n);case"yAxis":return il(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},zy=(t,e,n)=>{switch(e){case"xAxis":return rl(t,n);case"yAxis":return il(t,n);case"angleAxis":return PO(t,n);case"radiusAxis":return NO(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Oee=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function Lee(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var OO=t=>t.graphicalItems.cartesianItems,z1e=ve([Gn,hE],Lee),Vee=(t,e,n)=>t.filter(n).filter(r=>(e==null?void 0:e.includeHidden)===!0?!0:!r.hide),Hy=ve([OO,yi,z1e],Vee),Uee=ve([Hy],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(pE)),qee=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),Fee=ve([Hy],qee),Bee=t=>t.map(e=>e.data).filter(Boolean).flat(1),H1e=ve([Hy],Bee),$ee=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},LO=ve([H1e,xO],$ee),zee=(t,e,n)=>(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:ri(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:ri(i,r)}))):t.map(r=>({value:r})),mE=ve([LO,yi,Hy],zee);function Hee(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function _f(t){return t.filter(e=>zs(e)||e instanceof Date).map(Number).filter(e=>To(e)===!1)}function G1e(t,e,n){return!n||typeof e!="number"||To(e)?[]:n.length?_f(n.flatMap(r=>{var i=ri(t,r.dataKey),o,s;if(Array.isArray(i)?[o,s]=i:o=s=i,!(!$i(o)||!$i(s)))return[e-o,e+s]})):[]}var j1e=ve([Uee,xO,vr],Mee),Gee=(t,e,n)=>{var r={},i=e.reduce((o,s)=>(s.stackId==null||(o[s.stackId]==null&&(o[s.stackId]=[]),o[s.stackId].push(s)),o),r);return Object.fromEntries(Object.entries(i).map(o=>{var[s,a]=o,u=a.map(DO);return[s,{stackedData:KEe(t,u,n),graphicalItems:a}]}))},YM=ve([j1e,Uee,cE],Gee),jee=(t,e,n)=>{var{dataStartIndex:r,dataEndIndex:i}=e;if(n!=="zAxis"){var o=QEe(t,r,i);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},K1e=ve([YM,Nu,Gn],jee),Kee=(t,e,n,r,i)=>n.length>0?t.flatMap(o=>n.flatMap(s=>{var a,u,c=(a=r[s.id])===null||a===void 0?void 0:a.filter(h=>Hee(i,h)),f=ri(o,(u=e.dataKey)!==null&&u!==void 0?u:s.dataKey);return{value:f,errorDomain:G1e(o,f,c)}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(o=>({value:ri(o,e.dataKey),errorDomain:[]})):t.map(o=>({value:o,errorDomain:[]})),gE=t=>t.errorBars,Wee=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>Hee(n,r));ve([Fee,gE,Gn],Wee);var W1e=ve([LO,yi,Fee,gE,Gn],Kee);function Y1e(t){var{value:e}=t;if(zs(e)||e instanceof Date)return e}var x5=t=>{var e=t.flatMap(r=>[r.value,r.errorDomain]).flat(1),n=_f(e);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},J1e=(t,e,n)=>{var r=t.map(Y1e).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&aQ(r))?SZ(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},VO=t=>{var e;if(t==null||!("domain"in t))return WM;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var n=_f(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:WM},Nb=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var o=i.flat(),s=Math.min(...o),a=Math.max(...o);return[s,a]}},Yee=t=>t.referenceElements.dots,Qh=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),X1e=ve([Yee,Gn,hE],Qh),Jee=t=>t.referenceElements.areas,Q1e=ve([Jee,Gn,hE],Qh),Xee=t=>t.referenceElements.lines,Z1e=ve([Xee,Gn,hE],Qh),Qee=(t,e)=>{var n=_f(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},eCe=ve(X1e,Gn,Qee),Zee=(t,e)=>{var n=_f(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},tCe=ve([Q1e,Gn],Zee),ete=(t,e)=>{var n=_f(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},nCe=ve(Z1e,Gn,ete),rCe=ve(eCe,nCe,tCe,(t,e,n)=>Nb(t,n,e)),iCe=ve([yi],VO),tte=(t,e,n,r,i,o,s)=>{var a=v1e(e,t.allowDataOverflow);if(a!=null)return a;var u=o==="vertical"&&s==="xAxis"||o==="horizontal"&&s==="yAxis",c=u?Nb(n,i,x5(r)):Nb(i,x5(r));return _1e(e,c,t.allowDataOverflow)},oCe=ve([yi,iCe,K1e,W1e,rCe,qt,Gn],tte),sCe=[0,1],nte=(t,e,n,r,i,o,s)=>{if(!((t==null||n==null||n.length===0)&&s===void 0)){var{dataKey:a,type:u}=t,c=gf(e,o);return c&&a==null?SZ(0,n.length):u==="category"?J1e(r,t,c):i==="expand"?sCe:s}},UO=ve([yi,qt,LO,mE,cE,Gn,oCe],nte),rte=(t,e,n,r,i)=>{if(t!=null){var{scale:o,type:s}=t;if(o==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":s==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":s==="category"?"band":"linear";if(typeof o=="string"){var a="scale".concat(ky(o));return a in Jm?a:"point"}}},Gy=ve([yi,qt,Oee,CO,Gn],rte);function aCe(t){if(t!=null){if(t in Jm)return Jm[t]();var e="scale".concat(ky(t));if(e in Jm)return Jm[e]()}}function qO(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var i=aCe(e);if(i!=null){var o=i.domain(n).range(r);return $Ee(o),o}}}var ite=(t,e,n)=>{var r=VO(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&wh(t))return R1e(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&wh(t))return P1e(t,e.tickCount,e.allowDecimals)}},FO=ve([UO,zy,Gy],ite),ote=(t,e,n,r)=>{if(r!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&wh(e)&&Array.isArray(n)&&n.length>0){var i=e[0],o=n[0],s=e[1],a=n[n.length-1];return[Math.min(i,o),Math.max(s,a)]}return e},lCe=ve([yi,UO,FO,Gn],ote),uCe=ve(mE,yi,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(_f(t.map(a=>a.value))).sort((a,u)=>a-u);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var o=0;o<r.length-1;o++){var s=r[o+1]-r[o];n=Math.min(n,s)}return n/i}}),ste=ve(uCe,qt,xee,gr,(t,e,n,r)=>r,(t,e,n,r,i)=>{if(!$i(t))return 0;var o=e==="vertical"?r.height:r.width;if(i==="gap")return t*o/2;if(i==="no-gap"){var s=Xo(n,t*o),a=t*o/2;return a-s-(a-s)/o*s}return 0}),cCe=(t,e)=>{var n=rl(t,e);return n==null||typeof n.padding!="string"?0:ste(t,"xAxis",e,n.padding)},fCe=(t,e)=>{var n=il(t,e);return n==null||typeof n.padding!="string"?0:ste(t,"yAxis",e,n.padding)},dCe=ve(rl,cCe,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),hCe=ve(il,fCe,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),pCe=ve([gr,dCe,nE,tE,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:o}=r;return i?[o.left,n.width-o.right]:[t.left+e.left,t.left+t.width-e.right]}),mCe=ve([gr,qt,hCe,nE,tE,(t,e,n)=>n],(t,e,n,r,i,o)=>{var{padding:s}=i;return o?[r.height-s.bottom,s.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),jy=(t,e,n,r)=>{var i;switch(e){case"xAxis":return pCe(t,n,r);case"yAxis":return mCe(t,n,r);case"zAxis":return(i=kO(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return Iee(t);case"radiusAxis":return Ree(t,n);default:return}},ate=ve([yi,jy],fE),Zh=ve([yi,Gy,lCe,ate],qO);ve([Hy,gE,Gn],Wee);function lte(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var yE=(t,e)=>e,vE=(t,e,n)=>n,gCe=ve(Zw,yE,vE,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(lte)),yCe=ve(eE,yE,vE,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(lte)),ute=(t,e)=>({width:t.width,height:e.height}),vCe=(t,e)=>{var n=typeof e.width=="number"?e.width:Uy;return{width:n,height:t.height}},cte=ve(gr,rl,ute),_Ce=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},bCe=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},wCe=ve(tl,gr,gCe,yE,vE,(t,e,n,r,i)=>{var o={},s;return n.forEach(a=>{var u=ute(e,a);s==null&&(s=_Ce(e,r,t));var c=r==="top"&&!i||r==="bottom"&&i;o[a.id]=s-Number(c)*u.height,s+=(c?-1:1)*u.height}),o}),ECe=ve(el,gr,yCe,yE,vE,(t,e,n,r,i)=>{var o={},s;return n.forEach(a=>{var u=vCe(e,a);s==null&&(s=bCe(e,r,t));var c=r==="left"&&!i||r==="right"&&i;o[a.id]=s-Number(c)*u.width,s+=(c?-1:1)*u.width}),o}),TCe=(t,e)=>{var n=rl(t,e);if(n!=null)return wCe(t,n.orientation,n.mirror)},xCe=ve([gr,rl,TCe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n==null?void 0:n[r];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),SCe=(t,e)=>{var n=il(t,e);if(n!=null)return ECe(t,n.orientation,n.mirror)},ACe=ve([gr,il,SCe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n==null?void 0:n[r];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),fte=ve(gr,il,(t,e)=>{var n=typeof e.width=="number"?e.width:Uy;return{width:n,height:t.height}}),S5=(t,e,n)=>{switch(e){case"xAxis":return cte(t,n).width;case"yAxis":return fte(t,n).height;default:return}},dte=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:o,dataKey:s}=n,a=gf(t,r),u=e.map(c=>c.value);if(s&&a&&o==="category"&&i&&aQ(u))return u}},BO=ve([qt,mE,yi,Gn],dte),hte=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:o}=n,s=gf(t,r);if(s&&(i==="number"||o!=="auto"))return e.map(a=>a.value)}},$O=ve([qt,mE,zy,Gn],hte);ve([qt,$1e,Gy,Zh,BO,$O,jy,FO,Gn],(t,e,n,r,i,o,s,a,u)=>{if(e==null)return null;var c=gf(t,u);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:u,categoricalDomain:o,duplicateDomain:i,isCategorical:c,niceTicks:a,range:s,realScaleType:n,scale:r}});var CCe=(t,e,n,r,i,o,s,a,u)=>{if(!(e==null||r==null)){var c=gf(t,u),{type:f,ticks:h,tickCount:g}=e,_=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,T=f==="category"&&r.bandwidth?r.bandwidth()/_:0;T=u==="angleAxis"&&o!=null&&o.length>=2?Oi(o[0]-o[1])*2*T:T;var E=h||i;if(E){var b=E.map((S,C)=>{var R=s?s.indexOf(S):S;return{index:C,coordinate:r(R)+T,value:S,offset:T}});return b.filter(S=>!To(S.coordinate))}return c&&a?a.map((S,C)=>({coordinate:r(S)+T,value:S,index:C,offset:T})):r.ticks?r.ticks(g).map(S=>({coordinate:r(S)+T,value:S,offset:T})):r.domain().map((S,C)=>({coordinate:r(S)+T,value:s?s[S]:S,index:C,offset:T}))}},pte=ve([qt,zy,Gy,Zh,FO,jy,BO,$O,Gn],CCe),ICe=(t,e,n,r,i,o,s)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var a=gf(t,s),{tickCount:u}=e,c=0;return c=s==="angleAxis"&&(r==null?void 0:r.length)>=2?Oi(r[0]-r[1])*2*c:c,a&&o?o.map((f,h)=>({coordinate:n(f)+c,value:f,index:h,offset:c})):n.ticks?n.ticks(u).map(f=>({coordinate:n(f)+c,value:f,offset:c})):n.domain().map((f,h)=>({coordinate:n(f)+c,value:i?i[f]:f,index:h,offset:c}))}},Eh=ve([qt,zy,Zh,jy,BO,$O,Gn],ICe),Th=ve(yi,Zh,(t,e)=>{if(!(t==null||e==null))return Pb(Pb({},t),{},{scale:e})}),RCe=ve([yi,Gy,UO,ate],qO);ve((t,e,n)=>kO(t,n),RCe,(t,e)=>{if(!(t==null||e==null))return Pb(Pb({},t),{},{scale:e})});var PCe=ve([qt,Zw,eE],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),mte=t=>t.options.defaultTooltipEventType,gte=t=>t.options.validateTooltipEventTypes;function yte(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function zO(t,e){var n=mte(t),r=gte(t);return yte(e,n,r)}function NCe(t){return et(e=>zO(e,t))}var vte=(t,e)=>{var n,r=Number(e);if(!(To(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},MCe=t=>t.tooltip.settings,Jl={active:!1,index:null,dataKey:void 0,coordinate:void 0},DCe={itemInteraction:{click:Jl,hover:Jl},axisInteraction:{click:Jl,hover:Jl},keyboardInteraction:Jl,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},_te=Hi({name:"tooltip",initialState:DCe,reducers:{addTooltipEntrySettings(t,e){t.tooltipItemPayloads.push(e.payload)},removeTooltipEntrySettings(t,e){var n=Pa(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:kCe,removeTooltipEntrySettings:OCe,setTooltipSettingsState:LCe,setActiveMouseOverItemIndex:bte,mouseLeaveItem:VCe,mouseLeaveChart:wte,setActiveClickItemIndex:UCe,setMouseOverAxisIndex:Ete,setMouseClickAxisIndex:qCe,setSyncInteraction:JM,setKeyboardInteraction:XM}=_te.actions,FCe=_te.reducer;function A5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function G0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?A5(Object(n),!0).forEach(function(r){BCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function BCe(t,e,n){return(e=$Ce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $Ce(t){var e=zCe(t,"string");return typeof e=="symbol"?e:e+""}function zCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function HCe(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function GCe(t){return t.index!=null}var Tte=(t,e,n,r)=>{if(e==null)return Jl;var i=HCe(t,e,n);if(i==null)return Jl;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var o=t.settings.active===!0;if(GCe(i)){if(o)return G0(G0({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return G0(G0({},Jl),{},{coordinate:i.coordinate})},HO=(t,e)=>{var n=t==null?void 0:t.index;if(n==null)return null;var r=Number(n);if(!$i(r))return n;var i=0,o=1/0;return e.length>0&&(o=e.length-1),String(Math.max(i,Math.min(r,o)))},xte=(t,e,n,r,i,o,s,a)=>{if(!(o==null||a==null)){var u=s[0],c=u==null?void 0:a(u.positions,o);if(c!=null)return c;var f=i==null?void 0:i[Number(o)];if(f)switch(n){case"horizontal":return{x:f.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:f.coordinate}}}},Ste=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=t.itemInteraction.hover.dataKey:i=t.itemInteraction.click.dataKey,i==null&&r!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(o=>{var s;return((s=o.settings)===null||s===void 0?void 0:s.dataKey)===i})},Ky=t=>t.options.tooltipPayloadSearcher,ep=t=>t.tooltip;function C5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function I5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?C5(Object(n),!0).forEach(function(r){jCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jCe(t,e,n){return(e=KCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KCe(t){var e=WCe(t,"string");return typeof e=="symbol"?e:e+""}function WCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function YCe(t,e){return t??e}var Ate=(t,e,n,r,i,o,s)=>{if(!(e==null||o==null)){var{chartData:a,computedData:u,dataStartIndex:c,dataEndIndex:f}=n,h=[];return t.reduce((g,_)=>{var T,{dataDefinedOnItem:E,settings:b}=_,S=YCe(E,a),C=Array.isArray(S)?dZ(S,c,f):S,R=(T=b==null?void 0:b.dataKey)!==null&&T!==void 0?T:r,P=b==null?void 0:b.nameKey,O;if(r&&Array.isArray(C)&&!Array.isArray(C[0])&&s==="axis"?O=M_e(C,r,i):O=o(C,e,u,P),Array.isArray(O))O.forEach(D=>{var L=I5(I5({},b),{},{name:D.name,unit:D.unit,color:void 0,fill:void 0});g.push(d6({tooltipEntrySettings:L,dataKey:D.dataKey,payload:D.payload,value:ri(D.payload,D.dataKey),name:D.name}))});else{var q;g.push(d6({tooltipEntrySettings:b,dataKey:R,payload:O,value:ri(O,R),name:(q=ri(O,P))!==null&&q!==void 0?q:b==null?void 0:b.name}))}return g},h)}},GO=ve([vr,qt,Oee,CO,rr],rte),JCe=ve([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),XCe=ve([rr,Xh],Lee),Wy=ve([JCe,vr,XCe],Vee),QCe=ve([Wy],t=>t.filter(pE)),ZCe=ve([Wy],Bee),tp=ve([ZCe,Nu],$ee),eIe=ve([QCe,Nu,vr],Mee),jO=ve([tp,vr,Wy],zee),tIe=ve([vr],VO),nIe=ve([Wy],t=>t.filter(pE)),rIe=ve([eIe,nIe,cE],Gee),iIe=ve([rIe,Nu,rr],jee),oIe=ve([Wy],qee),sIe=ve([tp,vr,oIe,gE,rr],Kee),aIe=ve([Yee,rr,Xh],Qh),lIe=ve([aIe,rr],Qee),uIe=ve([Jee,rr,Xh],Qh),cIe=ve([uIe,rr],Zee),fIe=ve([Xee,rr,Xh],Qh),dIe=ve([fIe,rr],ete),hIe=ve([lIe,dIe,cIe],Nb),pIe=ve([vr,tIe,iIe,sIe,hIe,qt,rr],tte),Cte=ve([vr,qt,tp,jO,cE,rr,pIe],nte),mIe=ve([Cte,vr,GO],ite),gIe=ve([vr,Cte,mIe,rr],ote),Ite=t=>{var e=rr(t),n=Xh(t),r=!1;return jy(t,e,n,r)},Rte=ve([vr,Ite],fE),Pte=ve([vr,GO,gIe,Rte],qO),yIe=ve([qt,jO,vr,rr],dte),vIe=ve([qt,jO,vr,rr],hte),_Ie=(t,e,n,r,i,o,s,a)=>{if(e){var{type:u}=e,c=gf(t,a);if(r){var f=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,h=u==="category"&&r.bandwidth?r.bandwidth()/f:0;return h=a==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?Oi(i[0]-i[1])*2*h:h,c&&s?s.map((g,_)=>({coordinate:r(g)+h,value:g,index:_,offset:h})):r.domain().map((g,_)=>({coordinate:r(g)+h,value:o?o[g]:g,index:_,offset:h}))}}},ol=ve([qt,vr,GO,Pte,Ite,yIe,vIe,rr],_Ie),KO=ve([mte,gte,MCe],(t,e,n)=>yte(n.shared,t,e)),Nte=t=>t.tooltip.settings.trigger,WO=t=>t.tooltip.settings.defaultIndex,_E=ve([ep,KO,Nte,WO],Tte),xh=ve([_E,tp],HO),Mte=ve([ol,xh],vte),Dte=ve([_E],t=>{if(t)return t.dataKey}),kte=ve([ep,KO,Nte,WO],Ste),bIe=ve([el,tl,qt,gr,ol,WO,kte,Ky],xte),wIe=ve([_E,bIe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),EIe=ve([_E],t=>t.active),TIe=ve([kte,xh,Nu,Nee,Mte,Ky,KO],Ate);ve([TIe],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function R5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function P5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R5(Object(n),!0).forEach(function(r){xIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xIe(t,e,n){return(e=SIe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SIe(t){var e=AIe(t,"string");return typeof e=="symbol"?e:e+""}function AIe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var CIe=()=>et(vr),IIe=()=>{var t=CIe(),e=et(ol),n=et(Pte);return Yk(P5(P5({},t),{},{scale:n}),e)},RIe=()=>et(CO),YO=(t,e)=>e,Ote=(t,e,n)=>n,JO=(t,e,n,r)=>r,PIe=ve(ol,t=>Kw(t,e=>e.coordinate)),XO=ve([ep,YO,Ote,JO],Tte),Lte=ve([XO,tp],HO),NIe=(t,e,n)=>{if(e!=null){var r=ep(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},Vte=ve([ep,YO,Ote,JO],Ste),Mb=ve([el,tl,qt,gr,ol,JO,Vte,Ky],xte),MIe=ve([XO,Mb],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),Ute=ve(ol,Lte,vte),DIe=ve([Vte,Lte,Nu,Nee,Ute,Ky,YO],Ate),kIe=ve([XO],t=>({isActive:t.active,activeIndex:t.index})),OIe=(t,e,n,r,i,o,s,a)=>{if(!(!t||!e||!r||!i||!o)){var u=ZEe(t.chartX,t.chartY,e,n,a);if(u){var c=tTe(u,e),f=FEe(c,s,o,r,i),h=eTe(e,o,f,u);return{activeIndex:String(f),activeCoordinate:h}}}};function QM(){return QM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},QM.apply(null,arguments)}function N5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function j0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?N5(Object(n),!0).forEach(function(r){LIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function LIe(t,e,n){return(e=VIe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VIe(t){var e=UIe(t,"string");return typeof e=="symbol"?e:e+""}function UIe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qIe(t){var{coordinate:e,payload:n,index:r,offset:i,tooltipAxisBandSize:o,layout:s,cursor:a,tooltipEventType:u,chartName:c}=t,f=e,h=n,g=r;if(!a||!f||c!=="ScatterChart"&&u!=="axis")return null;var _,T;if(c==="ScatterChart")_=f,T=JTe;else if(c==="BarChart")_=XTe(s,f,i,o),T=wZ;else if(s==="radial"){var{cx:E,cy:b,radius:S,startAngle:C,endAngle:R}=EZ(f);_={cx:E,cy:b,startAngle:C,endAngle:R,innerRadius:S,outerRadius:S},T=xZ}else _={points:Pxe(s,f,i)},T=BTe;var P=typeof a=="object"&&"className"in a?a.className:void 0,O=j0(j0(j0(j0({stroke:"#ccc",pointerEvents:"none"},i),_),Pr(a,!1)),{},{payload:h,payloadIndex:g,className:sn("recharts-tooltip-cursor",P)});return M.isValidElement(a)?M.cloneElement(a,O):M.createElement(T,O)}function FIe(t){var e=IIe(),n=gTe(),r=Qk(),i=RIe();return M.createElement(qIe,QM({},t,{coordinate:t.coordinate,index:t.index,payload:t.payload,offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var qte=M.createContext(null),BIe=()=>M.useContext(qte),MA={exports:{}},M5;function $Ie(){return M5||(M5=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(u,c,f){this.fn=u,this.context=c,this.once=f||!1}function o(u,c,f,h,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var _=new i(f,h||u,g),T=n?n+c:c;return u._events[T]?u._events[T].fn?u._events[T]=[u._events[T],_]:u._events[T].push(_):(u._events[T]=_,u._eventsCount++),u}function s(u,c){--u._eventsCount===0?u._events=new r:delete u._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],f,h;if(this._eventsCount===0)return c;for(h in f=this._events)e.call(f,h)&&c.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(f)):c},a.prototype.listeners=function(c){var f=n?n+c:c,h=this._events[f];if(!h)return[];if(h.fn)return[h.fn];for(var g=0,_=h.length,T=new Array(_);g<_;g++)T[g]=h[g].fn;return T},a.prototype.listenerCount=function(c){var f=n?n+c:c,h=this._events[f];return h?h.fn?1:h.length:0},a.prototype.emit=function(c,f,h,g,_,T){var E=n?n+c:c;if(!this._events[E])return!1;var b=this._events[E],S=arguments.length,C,R;if(b.fn){switch(b.once&&this.removeListener(c,b.fn,void 0,!0),S){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,f),!0;case 3:return b.fn.call(b.context,f,h),!0;case 4:return b.fn.call(b.context,f,h,g),!0;case 5:return b.fn.call(b.context,f,h,g,_),!0;case 6:return b.fn.call(b.context,f,h,g,_,T),!0}for(R=1,C=new Array(S-1);R<S;R++)C[R-1]=arguments[R];b.fn.apply(b.context,C)}else{var P=b.length,O;for(R=0;R<P;R++)switch(b[R].once&&this.removeListener(c,b[R].fn,void 0,!0),S){case 1:b[R].fn.call(b[R].context);break;case 2:b[R].fn.call(b[R].context,f);break;case 3:b[R].fn.call(b[R].context,f,h);break;case 4:b[R].fn.call(b[R].context,f,h,g);break;default:if(!C)for(O=1,C=new Array(S-1);O<S;O++)C[O-1]=arguments[O];b[R].fn.apply(b[R].context,C)}}return!0},a.prototype.on=function(c,f,h){return o(this,c,f,h,!1)},a.prototype.once=function(c,f,h){return o(this,c,f,h,!0)},a.prototype.removeListener=function(c,f,h,g){var _=n?n+c:c;if(!this._events[_])return this;if(!f)return s(this,_),this;var T=this._events[_];if(T.fn)T.fn===f&&(!g||T.once)&&(!h||T.context===h)&&s(this,_);else{for(var E=0,b=[],S=T.length;E<S;E++)(T[E].fn!==f||g&&!T[E].once||h&&T[E].context!==h)&&b.push(T[E]);b.length?this._events[_]=b.length===1?b[0]:b:s(this,_)}return this},a.prototype.removeAllListeners=function(c){var f;return c?(f=n?n+c:c,this._events[f]&&s(this,f)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(MA)),MA.exports}var zIe=$Ie();const HIe=Ao(zIe);var ny=new HIe,ZM="recharts.syncEvent.tooltip",D5="recharts.syncEvent.brush";function GIe(t,e){if(e){var n=Number.parseInt(e,10);if(!To(n))return t==null?void 0:t[n]}}var jIe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},Fte=Hi({name:"options",initialState:jIe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),KIe=Fte.reducer,{createEventEmitter:WIe}=Fte.actions;function YIe(t){return t.tooltip.syncInteraction}var JIe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},Bte=Hi({name:"chartData",initialState:JIe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:k5,setDataStartEndIndexes:XIe,setComputedData:pKe}=Bte.actions,QIe=Bte.reducer,ZIe=["x","y"];function O5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?O5(Object(n),!0).forEach(function(r){eRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function eRe(t,e,n){return(e=tRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tRe(t){var e=nRe(t,"string");return typeof e=="symbol"?e:e+""}function nRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rRe(t,e){if(t==null)return{};var n,r,i=iRe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function iRe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var $te=()=>{};function oRe(){var t=et(IO),e=et(RO),n=mr(),r=et(See),i=et(ol),o=Qk(),s=Xk(),a=et(u=>u.rootProps.className);M.useEffect(()=>{if(t==null)return $te;var u=(c,f,h)=>{if(e!==h&&t===c){if(r==="index"){var g;if(s&&f!==null&&f!==void 0&&(g=f.payload)!==null&&g!==void 0&&g.coordinate){var _=f.payload.coordinate,{x:T,y:E}=_,b=rRe(_,ZIe),S=fc(fc(fc({},b),typeof T=="number"&&{x:Math.max(s.x,Math.min(T,s.x+s.width))}),typeof E=="number"&&{y:Math.max(s.y,Math.min(E,s.y+s.height))}),C=fc(fc({},f),{},{payload:fc(fc({},f.payload),{},{coordinate:S})});n(C)}else n(f);return}if(i!=null){var R;if(typeof r=="function"){var P={activeTooltipIndex:f.payload.index==null?void 0:Number(f.payload.index),isTooltipActive:f.payload.active,activeIndex:f.payload.index==null?void 0:Number(f.payload.index),activeLabel:f.payload.label,activeDataKey:f.payload.dataKey,activeCoordinate:f.payload.coordinate},O=r(i,P);R=i[O]}else r==="value"&&(R=i.find(F=>String(F.value)===f.payload.label));var{coordinate:q}=f.payload;if(R==null||f.payload.active===!1||q==null||s==null){n(JM({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:D,y:L}=q,N=Math.min(D,s.x+s.width),U=Math.min(L,s.y+s.height),V={x:o==="horizontal"?R.coordinate:N,y:o==="horizontal"?U:R.coordinate},$=JM({active:f.payload.active,coordinate:V,dataKey:f.payload.dataKey,index:String(R.index),label:f.payload.label});n($)}}};return ny.on(ZM,u),()=>{ny.off(ZM,u)}},[a,n,e,t,r,i,o,s])}function sRe(){var t=et(IO),e=et(RO),n=mr();M.useEffect(()=>{if(t==null)return $te;var r=(i,o,s)=>{e!==s&&t===i&&n(XIe(o))};return ny.on(D5,r),()=>{ny.off(D5,r)}},[n,e,t])}function aRe(){var t=mr();M.useEffect(()=>{t(WIe())},[t]),oRe(),sRe()}function lRe(t,e,n,r,i,o){var s=et(g=>NIe(g,t,e)),a=et(RO),u=et(IO),c=et(See),f=et(YIe),h=f==null?void 0:f.active;M.useEffect(()=>{if(!h&&u!=null&&a!=null){var g=JM({active:o,coordinate:n,dataKey:s,index:i,label:typeof r=="number"?String(r):r});ny.emit(ZM,u,g,a)}},[h,n,s,i,r,a,u,c,o])}function L5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function V5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L5(Object(n),!0).forEach(function(r){uRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uRe(t,e,n){return(e=cRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cRe(t){var e=fRe(t,"string");return typeof e=="symbol"?e:e+""}function fRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dRe(t){return t.dataKey}function hRe(t,e){return M.isValidElement(t)?M.cloneElement(t,e):typeof t=="function"?M.createElement(t,e):M.createElement(CTe,e)}var U5=[],pRe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Kh.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function mRe(t){var e=rs(t,pRe),{active:n,allowEscapeViewBox:r,animationDuration:i,animationEasing:o,content:s,filterNull:a,isAnimationActive:u,offset:c,payloadUniqBy:f,position:h,reverseDirection:g,useTranslate3d:_,wrapperStyle:T,cursor:E,shared:b,trigger:S,defaultIndex:C,portal:R,axisId:P}=e,O=mr(),q=typeof C=="number"?String(C):C;M.useEffect(()=>{O(LCe({shared:b,trigger:S,axisId:P,active:n,defaultIndex:q}))},[O,b,S,P,n,q]);var D=Xk(),L=gZ(),N=NCe(b),{activeIndex:U,isActive:V}=et(ne=>kIe(ne,N,S,q)),$=et(ne=>DIe(ne,N,S,q)),F=et(ne=>Ute(ne,N,S,q)),H=et(ne=>MIe(ne,N,S,q)),X=$,K=BIe(),te=n??V,[re,Y]=Rwe([X,te]),G=N==="axis"?F:void 0;lRe(N,S,H,G,U,te);var Q=R??K;if(Q==null)return null;var Z=X??U5;te||(Z=U5),a&&Z.length&&(Z=twe(X.filter(ne=>ne.value!=null&&(ne.hide!==!0||e.includeHidden)),f,dRe));var fe=Z.length>0,J=M.createElement(kTe,{allowEscapeViewBox:r,animationDuration:i,animationEasing:o,isAnimationActive:u,active:te,coordinate:H,hasPayload:fe,offset:c,position:h,reverseDirection:g,useTranslate3d:_,viewBox:D,wrapperStyle:T,lastBoundingBox:re,innerRef:Y,hasPortalFromProps:!!R},hRe(s,V5(V5({},e),{},{payload:Z,label:G,active:te,coordinate:H,accessibilityLayer:L})));return M.createElement(M.Fragment,null,EK.createPortal(J,Q),te&&M.createElement(FIe,{cursor:E,tooltipEventType:N,coordinate:H,payload:X,index:U}))}var DA={},kA={},OA={},q5;function gRe(){return q5||(q5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:o}={}){let s,a=null;const u=o!=null&&o.includes("leading"),c=o==null||o.includes("trailing"),f=()=>{a!==null&&(n.apply(s,a),s=void 0,a=null)},h=()=>{c&&f(),E()};let g=null;const _=()=>{g!=null&&clearTimeout(g),g=setTimeout(()=>{g=null,h()},r)},T=()=>{g!==null&&(clearTimeout(g),g=null)},E=()=>{T(),s=void 0,a=null},b=()=>{f()},S=function(...C){if(i!=null&&i.aborted)return;s=this,a=C;const R=g==null;_(),u&&R&&f()};return S.schedule=_,S.cancel=E,S.flush=b,i==null||i.addEventListener("abort",E,{once:!0}),S}t.debounce=e})(OA)),OA}var F5;function yRe(){return F5||(F5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=gRe();function n(r,i=0,o={}){typeof o!="object"&&(o={});const{leading:s=!1,trailing:a=!0,maxWait:u}=o,c=Array(2);s&&(c[0]="leading"),a&&(c[1]="trailing");let f,h=null;const g=e.debounce(function(...E){f=r.apply(this,E),h=null},i,{edges:c}),_=function(...E){return u!=null&&(h===null&&(h=Date.now()),Date.now()-h>=u)?(f=r.apply(this,E),h=Date.now(),g.cancel(),g.schedule(),f):(g.apply(this,E),f)},T=()=>(g.flush(),f);return _.cancel=g.cancel,_.flush=T,_}t.debounce=n})(kA)),kA}var B5;function vRe(){return B5||(B5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yRe();function n(r,i=0,o={}){const{leading:s=!0,trailing:a=!0}=o;return e.debounce(r,i,{leading:s,maxWait:i,trailing:a})}t.throttle=n})(DA)),DA}var LA,$5;function _Re(){return $5||($5=1,LA=vRe().throttle),LA}var bRe=_Re();const wRe=Ao(bRe);var VA=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o]};function z5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function UA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?z5(Object(n),!0).forEach(function(r){ERe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ERe(t,e,n){return(e=TRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TRe(t){var e=xRe(t,"string");return typeof e=="symbol"?e:e+""}function xRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var SRe=M.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i="100%",height:o="100%",minWidth:s=0,minHeight:a,maxHeight:u,children:c,debounce:f=0,id:h,className:g,onResize:_,style:T={}}=t,E=M.useRef(null),b=M.useRef();b.current=_,M.useImperativeHandle(e,()=>E.current);var[S,C]=M.useState({containerWidth:r.width,containerHeight:r.height}),R=M.useCallback((O,q)=>{C(D=>{var L=Math.round(O),N=Math.round(q);return D.containerWidth===L&&D.containerHeight===N?D:{containerWidth:L,containerHeight:N}})},[]);M.useEffect(()=>{var O=N=>{var U,{width:V,height:$}=N[0].contentRect;R(V,$),(U=b.current)===null||U===void 0||U.call(b,V,$)};f>0&&(O=wRe(O,f,{trailing:!0,leading:!1}));var q=new ResizeObserver(O),{width:D,height:L}=E.current.getBoundingClientRect();return R(D,L),q.observe(E.current),()=>{q.disconnect()}},[R,f]);var P=M.useMemo(()=>{var{containerWidth:O,containerHeight:q}=S;if(O<0||q<0)return null;VA(Ic(i)||Ic(o),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,o),VA(!n||n>0,"The aspect(%s) must be greater than zero.",n);var D=Ic(i)?O:i,L=Ic(o)?q:o;return n&&n>0&&(D?L=D/n:L&&(D=L*n),u&&L>u&&(L=u)),VA(D>0||L>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,D,L,i,o,s,a,n),M.Children.map(c,N=>M.cloneElement(N,{width:D,height:L,style:UA({width:D,height:L},N.props.style)}))},[n,c,o,u,a,s,S,i]);return M.createElement("div",{id:h?"".concat(h):void 0,className:sn("recharts-responsive-container",g),style:UA(UA({},T),{},{width:i,height:o,minWidth:s,minHeight:a,maxHeight:u}),ref:E},M.createElement("div",{style:{width:0,height:0,overflow:"visible"}},P))}),zte=t=>null;zte.displayName="Cell";function ARe(t,e,n){return(e=CRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CRe(t){var e=IRe(t,"string");return typeof e=="symbol"?e:e+""}function IRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class RRe{constructor(e){ARe(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function H5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function PRe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?H5(Object(n),!0).forEach(function(r){NRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function NRe(t,e,n){return(e=MRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MRe(t){var e=DRe(t,"string");return typeof e=="symbol"?e:e+""}function DRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kRe={cacheSize:2e3,enableCache:!0},Hte=PRe({},kRe),G5=new RRe(Hte.cacheSize),ORe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},j5="recharts_measurement_span";function LRe(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",o=e.fontStyle||"",s=e.letterSpacing||"",a=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(o,"|").concat(s,"|").concat(a)}var K5=(t,e)=>{try{var n=document.getElementById(j5);n||(n=document.createElement("span"),n.setAttribute("id",j5),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,ORe,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},bg=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Kh.isSsr)return{width:0,height:0};if(!Hte.enableCache)return K5(e,n);var r=LRe(e,n),i=G5.get(r);if(i)return i;var o=K5(e,n);return G5.set(r,o),o},W5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Y5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,VRe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,URe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Gte={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},qRe=Object.keys(Gte),Id="NaN";function FRe(t,e){return t*Gte[e]}class ci{static parse(e){var n,[,r,i]=(n=URe.exec(e))!==null&&n!==void 0?n:[];return new ci(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,To(e)&&(this.unit=""),n!==""&&!VRe.test(n)&&(this.num=NaN,this.unit=""),qRe.includes(n)&&(this.num=FRe(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new ci(NaN,""):new ci(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new ci(NaN,""):new ci(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new ci(NaN,""):new ci(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new ci(NaN,""):new ci(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return To(this.num)}}function jte(t){if(t.includes(Id))return Id;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,o]=(n=W5.exec(e))!==null&&n!==void 0?n:[],s=ci.parse(r??""),a=ci.parse(o??""),u=i==="*"?s.multiply(a):s.divide(a);if(u.isNaN())return Id;e=e.replace(W5,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var c,[,f,h,g]=(c=Y5.exec(e))!==null&&c!==void 0?c:[],_=ci.parse(f??""),T=ci.parse(g??""),E=h==="+"?_.add(T):_.subtract(T);if(E.isNaN())return Id;e=e.replace(Y5,E.toString())}return e}var J5=/\(([^()]*)\)/;function BRe(t){for(var e=t,n;(n=J5.exec(e))!=null;){var[,r]=n;e=e.replace(J5,jte(r))}return e}function $Re(t){var e=t.replace(/\s+/g,"");return e=BRe(e),e=jte(e),e}function zRe(t){try{return $Re(t)}catch{return Id}}function qA(t){var e=zRe(t.slice(5,-1));return e===Id?"":e}var HRe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],GRe=["dx","dy","angle","className","breakAll"];function e2(){return e2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},e2.apply(null,arguments)}function X5(t,e){if(t==null)return{};var n,r,i=jRe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function jRe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Kte=/[ \f\n\r\t\v\u2028\u2029]+/,Wte=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];hr(e)||(n?i=e.toString().split(""):i=e.toString().split(Kte));var o=i.map(a=>({word:a,width:bg(a,r).width})),s=n?0:bg(" ",r).width;return{wordsWithComputedWidth:o,spaceWidth:s}}catch{return null}},KRe=(t,e,n,r,i)=>{var{maxLines:o,children:s,style:a,breakAll:u}=t,c=it(o),f=s,h=function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return V.reduce(($,F)=>{var{word:H,width:X}=F,K=$[$.length-1];if(K&&(r==null||i||K.width+X+n<Number(r)))K.words.push(H),K.width+=X+n;else{var te={words:[H],width:X};$.push(te)}return $},[])},g=h(e),_=U=>U.reduce((V,$)=>V.width>$.width?V:$);if(!c||i)return g;var T=g.length>o||_(g).width>Number(r);if(!T)return g;for(var E="…",b=U=>{var V=f.slice(0,U),$=Wte({breakAll:u,style:a,children:V+E}).wordsWithComputedWidth,F=h($),H=F.length>o||_(F).width>Number(r);return[H,F]},S=0,C=f.length-1,R=0,P;S<=C&&R<=f.length-1;){var O=Math.floor((S+C)/2),q=O-1,[D,L]=b(q),[N]=b(O);if(!D&&!N&&(S=O+1),D&&N&&(C=O-1),!D&&N){P=L;break}R++}return P||g},Q5=t=>{var e=hr(t)?[]:t.toString().split(Kte);return[{words:e}]},WRe=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:o,maxLines:s}=t;if((e||n)&&!Kh.isSsr){var a,u,c=Wte({breakAll:o,children:r,style:i});if(c){var{wordsWithComputedWidth:f,spaceWidth:h}=c;a=f,u=h}else return Q5(r);return KRe({breakAll:o,children:r,maxLines:s,style:i},a,u,e,n)}return Q5(r)},Z5="#808080",QO=M.forwardRef((t,e)=>{var{x:n=0,y:r=0,lineHeight:i="1em",capHeight:o="0.71em",scaleToFit:s=!1,textAnchor:a="start",verticalAnchor:u="end",fill:c=Z5}=t,f=X5(t,HRe),h=M.useMemo(()=>WRe({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:s,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,s,f.style,f.width]),{dx:g,dy:_,angle:T,className:E,breakAll:b}=f,S=X5(f,GRe);if(!zs(n)||!zs(r)||h.length===0)return null;var C=n+(it(g)?g:0),R=r+(it(_)?_:0),P;switch(u){case"start":P=qA("calc(".concat(o,")"));break;case"middle":P=qA("calc(".concat((h.length-1)/2," * -").concat(i," + (").concat(o," / 2))"));break;default:P=qA("calc(".concat(h.length-1," * -").concat(i,")"));break}var O=[];if(s){var q=h[0].width,{width:D}=f;O.push("scale(".concat(it(D)?D/q:1,")"))}return T&&O.push("rotate(".concat(T,", ").concat(C,", ").concat(R,")")),O.length&&(S.transform=O.join(" ")),M.createElement("text",e2({},Pr(S,!0),{ref:e,x:C,y:R,className:sn("recharts-text",E),textAnchor:a,fill:c.includes("url")?Z5:c}),h.map((L,N)=>{var U=L.words.join(b?"":" ");return M.createElement("tspan",{x:C,dy:N===0?P:i,key:"".concat(U,"-").concat(N)},U)}))});QO.displayName="Text";var YRe=["labelRef"];function JRe(t,e){if(t==null)return{};var n,r,i=XRe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function XRe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function e$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ln(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?e$(Object(n),!0).forEach(function(r){QRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function QRe(t,e,n){return(e=ZRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZRe(t){var e=ePe(t,"string");return typeof e=="symbol"?e:e+""}function ePe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ba(){return ba=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ba.apply(null,arguments)}var Yte=M.createContext(null),tPe=t=>{var{x:e,y:n,width:r,height:i,children:o}=t,s=M.useMemo(()=>({x:e,y:n,width:r,height:i}),[e,n,r,i]);return M.createElement(Yte.Provider,{value:s},o)},Jte=()=>{var t=M.useContext(Yte),e=Xk();return t||e},nPe=M.createContext(null),rPe=()=>{var t=M.useContext(nPe),e=et(Pee);return t||e},iPe=t=>{var{value:e,formatter:n}=t,r=hr(t.children)?e:t.children;return typeof n=="function"?n(r):r},ZO=t=>t!=null&&typeof t=="function",oPe=(t,e)=>{var n=Oi(e-t),r=Math.min(Math.abs(e-t),360);return n*r},sPe=(t,e,n,r,i)=>{var{offset:o,className:s}=t,{cx:a,cy:u,innerRadius:c,outerRadius:f,startAngle:h,endAngle:g,clockWise:_}=i,T=(c+f)/2,E=oPe(h,g),b=E>=0?1:-1,S,C;switch(e){case"insideStart":S=h+b*o,C=_;break;case"insideEnd":S=g-b*o,C=!_;break;case"end":S=g+b*o,C=_;break;default:throw new Error("Unsupported position ".concat(e))}C=E<=0?C:!C;var R=Cr(a,u,T,S),P=Cr(a,u,T,S+(C?1:-1)*359),O="M".concat(R.x,",").concat(R.y,`
    A`).concat(T,",").concat(T,",0,1,").concat(C?0:1,`,
    `).concat(P.x,",").concat(P.y),q=hr(t.id)?Wg("recharts-radial-line-"):t.id;return M.createElement("text",ba({},r,{dominantBaseline:"central",className:sn("recharts-radial-bar-label",s)}),M.createElement("defs",null,M.createElement("path",{id:q,d:O})),M.createElement("textPath",{xlinkHref:"#".concat(q)},n))},aPe=(t,e,n)=>{var{cx:r,cy:i,innerRadius:o,outerRadius:s,startAngle:a,endAngle:u}=t,c=(a+u)/2;if(n==="outside"){var{x:f,y:h}=Cr(r,i,s+e,c);return{x:f,y:h,textAnchor:f>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var g=(o+s)/2,{x:_,y:T}=Cr(r,i,g,c);return{x:_,y:T,textAnchor:"middle",verticalAnchor:"middle"}},Xte=t=>"cx"in t&&it(t.cx),lPe=(t,e)=>{var{parentViewBox:n,offset:r,position:i}=t,o;n!=null&&!Xte(n)&&(o=n);var{x:s,y:a,width:u,height:c}=e,f=c>=0?1:-1,h=f*r,g=f>0?"end":"start",_=f>0?"start":"end",T=u>=0?1:-1,E=T*r,b=T>0?"end":"start",S=T>0?"start":"end";if(i==="top"){var C={x:s+u/2,y:a-f*r,textAnchor:"middle",verticalAnchor:g};return Ln(Ln({},C),o?{height:Math.max(a-o.y,0),width:u}:{})}if(i==="bottom"){var R={x:s+u/2,y:a+c+h,textAnchor:"middle",verticalAnchor:_};return Ln(Ln({},R),o?{height:Math.max(o.y+o.height-(a+c),0),width:u}:{})}if(i==="left"){var P={x:s-E,y:a+c/2,textAnchor:b,verticalAnchor:"middle"};return Ln(Ln({},P),o?{width:Math.max(P.x-o.x,0),height:c}:{})}if(i==="right"){var O={x:s+u+E,y:a+c/2,textAnchor:S,verticalAnchor:"middle"};return Ln(Ln({},O),o?{width:Math.max(o.x+o.width-O.x,0),height:c}:{})}var q=o?{width:u,height:c}:{};return i==="insideLeft"?Ln({x:s+E,y:a+c/2,textAnchor:S,verticalAnchor:"middle"},q):i==="insideRight"?Ln({x:s+u-E,y:a+c/2,textAnchor:b,verticalAnchor:"middle"},q):i==="insideTop"?Ln({x:s+u/2,y:a+h,textAnchor:"middle",verticalAnchor:_},q):i==="insideBottom"?Ln({x:s+u/2,y:a+c-h,textAnchor:"middle",verticalAnchor:g},q):i==="insideTopLeft"?Ln({x:s+E,y:a+h,textAnchor:S,verticalAnchor:_},q):i==="insideTopRight"?Ln({x:s+u-E,y:a+h,textAnchor:b,verticalAnchor:_},q):i==="insideBottomLeft"?Ln({x:s+E,y:a+c-h,textAnchor:S,verticalAnchor:g},q):i==="insideBottomRight"?Ln({x:s+u-E,y:a+c-h,textAnchor:b,verticalAnchor:g},q):i&&typeof i=="object"&&(it(i.x)||Ic(i.x))&&(it(i.y)||Ic(i.y))?Ln({x:s+Xo(i.x,u),y:a+Xo(i.y,c),textAnchor:"end",verticalAnchor:"end"},q):Ln({x:s+u/2,y:a+c/2,textAnchor:"middle",verticalAnchor:"middle"},q)},uPe={offset:5};function Kl(t){var e=rs(t,uPe),{viewBox:n,position:r,value:i,children:o,content:s,className:a="",textBreakAll:u,labelRef:c}=e,f=rPe(),h=Jte(),g=r==="center"?h:f??h,_=n||g;if(!_||hr(i)&&hr(o)&&!M.isValidElement(s)&&typeof s!="function")return null;var T=Ln(Ln({},e),{},{viewBox:_});if(M.isValidElement(s)){var{labelRef:E}=T,b=JRe(T,YRe);return M.cloneElement(s,b)}var S;if(typeof s=="function"){if(S=M.createElement(s,T),M.isValidElement(S))return S}else S=iPe(e);var C=Xte(_),R=Pr(e,!0);if(C&&(r==="insideStart"||r==="insideEnd"||r==="end"))return sPe(e,r,S,R,_);var P=C?aPe(_,e.offset,e.position):lPe(e,_);return M.createElement(QO,ba({ref:c,className:sn("recharts-label",a)},R,P,{breakAll:u}),S)}Kl.displayName="Label";var cPe=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?M.createElement(Kl,ba({key:"label-implicit"},r)):zs(t)?M.createElement(Kl,ba({key:"label-implicit",value:t},r)):M.isValidElement(t)?t.type===Kl?M.cloneElement(t,Ln({key:"label-implicit"},r)):M.createElement(Kl,ba({key:"label-implicit",content:t},r)):ZO(t)?M.createElement(Kl,ba({key:"label-implicit",content:t},r)):t&&typeof t=="object"?M.createElement(Kl,ba({},t,{key:"label-implicit"},r)):null};function fPe(t){var{label:e}=t,n=Jte();return cPe(e,n)||null}var FA={},BA={},t$;function dPe(){return t$||(t$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(BA)),BA}var $A={},n$;function hPe(){return n$||(n$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})($A)),$A}var r$;function pPe(){return r$||(r$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=dPe(),n=hPe(),r=Bk();function i(o){if(r.isArrayLike(o))return e.last(n.toArray(o))}t.last=i})(FA)),FA}var zA,i$;function mPe(){return i$||(i$=1,zA=pPe().last),zA}var gPe=mPe();const yPe=Ao(gPe);var vPe=["valueAccessor"],_Pe=["dataKey","clockWise","id","textBreakAll"];function Db(){return Db=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Db.apply(null,arguments)}function o$(t,e){if(t==null)return{};var n,r,i=bPe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function bPe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var wPe=t=>Array.isArray(t.value)?yPe(t.value):t.value,Qte=M.createContext(void 0),EPe=Qte.Provider,Zte=M.createContext(void 0);Zte.Provider;function TPe(){return M.useContext(Qte)}function xPe(){return M.useContext(Zte)}function b_(t){var{valueAccessor:e=wPe}=t,n=o$(t,vPe),{dataKey:r,clockWise:i,id:o,textBreakAll:s}=n,a=o$(n,_Pe),u=TPe(),c=xPe(),f=u||c;return!f||!f.length?null:M.createElement(_u,{className:"recharts-label-list"},f.map((h,g)=>{var _,T=hr(r)?e(h,g):ri(h&&h.payload,r),E=hr(o)?{}:{id:"".concat(o,"-").concat(g)};return M.createElement(Kl,Db({},Pr(h,!0),a,E,{fill:(_=n.fill)!==null&&_!==void 0?_:h.fill,parentViewBox:h.parentViewBox,value:T,textBreakAll:s,viewBox:h.viewBox,key:"label-".concat(g),index:g}))}))}b_.displayName="LabelList";function SPe(t){var{label:e}=t;return e?e===!0?M.createElement(b_,{key:"labelList-implicit"}):M.isValidElement(e)||ZO(e)?M.createElement(b_,{key:"labelList-implicit",content:e}):typeof e=="object"?M.createElement(b_,Db({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}var APe={radiusAxis:{},angleAxis:{}},ene=Hi({name:"polarAxis",initialState:APe,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:mKe,removeRadiusAxis:gKe,addAngleAxis:yKe,removeAngleAxis:vKe}=ene.actions,CPe=ene.reducer,HA={},s$;function IPe(){return s$||(s$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var i;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const o=n[Symbol.toStringTag];return o==null||!((i=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&i.writable)?!1:n.toString()===`[object ${o}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(HA)),HA}var GA,a$;function RPe(){return a$||(a$=1,GA=IPe().isPlainObject),GA}var PPe=RPe();const NPe=Ao(PPe);function l$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function u$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?l$(Object(n),!0).forEach(function(r){MPe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function MPe(t,e,n){return(e=DPe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DPe(t){var e=kPe(t,"string");return typeof e=="symbol"?e:e+""}function kPe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kb(){return kb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kb.apply(null,arguments)}var c$=(t,e,n,r,i)=>{var o=n-r,s;return s="M ".concat(t,",").concat(e),s+="L ".concat(t+n,",").concat(e),s+="L ".concat(t+n-o/2,",").concat(e+i),s+="L ".concat(t+n-o/2-r,",").concat(e+i),s+="L ".concat(t,",").concat(e," Z"),s},OPe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},LPe=t=>{var e=rs(t,OPe),{x:n,y:r,upperWidth:i,lowerWidth:o,height:s,className:a}=e,{animationEasing:u,animationDuration:c,animationBegin:f,isUpdateAnimationActive:h}=e,g=M.useRef(),[_,T]=M.useState(-1),E=M.useRef(i),b=M.useRef(o),S=M.useRef(s),C=M.useRef(n),R=M.useRef(r),P=eO(t,"trapezoid-");if(M.useEffect(()=>{if(g.current&&g.current.getTotalLength)try{var H=g.current.getTotalLength();H&&T(H)}catch{}},[]),n!==+n||r!==+r||i!==+i||o!==+o||s!==+s||i===0&&o===0||s===0)return null;var O=sn("recharts-trapezoid",a);if(!h)return M.createElement("g",null,M.createElement("path",kb({},Pr(e,!0),{className:O,d:c$(n,r,i,o,s)})));var q=E.current,D=b.current,L=S.current,N=C.current,U=R.current,V="0px ".concat(_===-1?1:_,"px"),$="".concat(_,"px 0px"),F=yZ(["strokeDasharray"],c,u);return M.createElement(Zk,{animationId:P,key:P,canBegin:_>0,duration:c,easing:u,isActive:h,begin:f},H=>{var X=Zr(q,i,H),K=Zr(D,o,H),te=Zr(L,s,H),re=Zr(N,n,H),Y=Zr(U,r,H);g.current&&(E.current=X,b.current=K,S.current=te,C.current=re,R.current=Y);var G=H>0?{transition:F,strokeDasharray:$}:{strokeDasharray:V};return M.createElement("path",kb({},Pr(e,!0),{className:O,d:c$(re,Y,X,K,te),ref:g,style:u$(u$({},G),e.style)}))})},VPe=["option","shapeType","propTransformer","activeClassName","isActive"];function UPe(t,e){if(t==null)return{};var n,r,i=qPe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function qPe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function f$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ob(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?f$(Object(n),!0).forEach(function(r){FPe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function FPe(t,e,n){return(e=BPe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BPe(t){var e=$Pe(t,"string");return typeof e=="symbol"?e:e+""}function $Pe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zPe(t,e){return Ob(Ob({},e),t)}function HPe(t,e){return t==="symbols"}function d$(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return M.createElement(wZ,n);case"trapezoid":return M.createElement(LPe,n);case"sector":return M.createElement(xZ,n);case"symbols":if(HPe(e))return M.createElement(IQ,n);break;default:return null}}function GPe(t){return M.isValidElement(t)?t.props:t}function jPe(t){var{option:e,shapeType:n,propTransformer:r=zPe,activeClassName:i="recharts-active-shape",isActive:o}=t,s=UPe(t,VPe),a;if(M.isValidElement(e))a=M.cloneElement(e,Ob(Ob({},s),GPe(e)));else if(typeof e=="function")a=e(s);else if(NPe(e)&&typeof e!="boolean"){var u=r(e,s);a=M.createElement(d$,{shapeType:n,elementProps:u})}else{var c=s;a=M.createElement(d$,{shapeType:n,elementProps:c})}return o?M.createElement(_u,{className:i},a):a}var tne=(t,e)=>{var n=mr();return(r,i)=>o=>{t==null||t(r,i,o),n(bte({activeIndex:String(i),activeDataKey:e,activeCoordinate:r.tooltipPosition}))}},nne=t=>{var e=mr();return(n,r)=>i=>{t==null||t(n,r,i),e(VCe())}},rne=(t,e)=>{var n=mr();return(r,i)=>o=>{t==null||t(r,i,o),n(UCe({activeIndex:String(i),activeDataKey:e,activeCoordinate:r.tooltipPosition}))}};function KPe(t){var{fn:e,args:n}=t,r=mr(),i=ns();return M.useEffect(()=>{if(!i){var o=e(n);return r(kCe(o)),()=>{r(OCe(o))}}},[e,n,r,i]),null}var WPe=()=>{};function YPe(t){var{legendPayload:e}=t,n=mr(),r=ns();return M.useEffect(()=>r?WPe:(n(bTe(e)),()=>{n(wTe(e))}),[n,r,e]),null}var jA,JPe=()=>{var[t]=M.useState(()=>Wg("uid-"));return t},XPe=(jA=uae.useId)!==null&&jA!==void 0?jA:JPe;function QPe(t,e){var n=XPe();return e||(t?"".concat(t,"-").concat(n):n)}var ZPe=M.createContext(void 0),eNe=t=>{var{id:e,type:n,children:r}=t,i=QPe("recharts-".concat(n),e);return M.createElement(ZPe.Provider,{value:i},r(i))},tNe={cartesianItems:[],polarItems:[]},ine=Hi({name:"graphicalItems",initialState:tNe,reducers:{addCartesianGraphicalItem(t,e){t.cartesianItems.push(e.payload)},replaceCartesianGraphicalItem(t,e){var{prev:n,next:r}=e.payload,i=Pa(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},removeCartesianGraphicalItem(t,e){var n=Pa(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},addPolarGraphicalItem(t,e){t.polarItems.push(e.payload)},removePolarGraphicalItem(t,e){var n=Pa(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)}}}),{addCartesianGraphicalItem:nNe,replaceCartesianGraphicalItem:rNe,removeCartesianGraphicalItem:iNe,addPolarGraphicalItem:_Ke,removePolarGraphicalItem:bKe}=ine.actions,oNe=ine.reducer;function sNe(t){var e=mr(),n=M.useRef(null);return M.useEffect(()=>{n.current===null?e(nNe(t)):n.current!==t&&e(rNe({prev:n.current,next:t})),n.current=t},[e,t]),M.useEffect(()=>()=>{n.current&&(e(iNe(n.current)),n.current=null)},[e]),null}function h$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function p$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?h$(Object(n),!0).forEach(function(r){aNe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aNe(t,e,n){return(e=lNe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lNe(t){var e=uNe(t,"string");return typeof e=="symbol"?e:e+""}function uNe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var cNe={xAxis:{},yAxis:{},zAxis:{}},one=Hi({name:"cartesianAxis",initialState:cNe,reducers:{addXAxis(t,e){t.xAxis[e.payload.id]=e.payload},removeXAxis(t,e){delete t.xAxis[e.payload.id]},addYAxis(t,e){t.yAxis[e.payload.id]=e.payload},removeYAxis(t,e){delete t.yAxis[e.payload.id]},addZAxis(t,e){t.zAxis[e.payload.id]=e.payload},removeZAxis(t,e){delete t.zAxis[e.payload.id]},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload;t.yAxis[n]&&(t.yAxis[n]=p$(p$({},t.yAxis[n]),{},{width:r}))}}}),{addXAxis:fNe,removeXAxis:dNe,addYAxis:hNe,removeYAxis:pNe,addZAxis:wKe,removeZAxis:EKe,updateYAxisWidth:mNe}=one.actions,gNe=one.reducer,yNe=ve([gr],t=>{if(t)return{top:t.top,bottom:t.bottom,left:t.left,right:t.right}}),vNe=ve([yNe,el,tl],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),sne=()=>et(vNe),_Ne="Invariant failed";function bNe(t,e){throw new Error(_Ne)}var wNe=["x","y"];function t2(){return t2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},t2.apply(null,arguments)}function m$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function km(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?m$(Object(n),!0).forEach(function(r){ENe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ENe(t,e,n){return(e=TNe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TNe(t){var e=xNe(t,"string");return typeof e=="symbol"?e:e+""}function xNe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function SNe(t,e){if(t==null)return{};var n,r,i=ANe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ANe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function CNe(t,e){var{x:n,y:r}=t,i=SNe(t,wNe),o="".concat(n),s=parseInt(o,10),a="".concat(r),u=parseInt(a,10),c="".concat(e.height||i.height),f=parseInt(c,10),h="".concat(e.width||i.width),g=parseInt(h,10);return km(km(km(km(km({},e),i),s?{x:s}:{}),u?{y:u}:{}),{},{height:f,width:g,name:e.name,radius:e.radius})}function eL(t){return M.createElement(jPe,t2({shapeType:"rectangle",propTransformer:CNe,activeClassName:"recharts-active-bar"},t))}var INe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(it(e))return e;var o=it(r)||hr(r);return o?e(r,i):(o||bNe(),n)}},RNe={},ane=Hi({name:"errorBars",initialState:RNe,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(o=>o.dataKey===r.dataKey&&o.direction===r.direction?i:o))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:TKe,replaceErrorBar:xKe,removeErrorBar:SKe}=ane.actions,PNe=ane.reducer,NNe=["children"];function MNe(t,e){if(t==null)return{};var n,r,i=DNe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function DNe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var kNe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},ONe=M.createContext(kNe);function LNe(t){var{children:e}=t,n=MNe(t,NNe);return M.createElement(ONe.Provider,{value:n},e)}function lne(t,e){var n,r,i=et(c=>rl(c,t)),o=et(c=>il(c,e)),s=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:Ii.allowDataOverflow,a=(r=o==null?void 0:o.allowDataOverflow)!==null&&r!==void 0?r:Ri.allowDataOverflow,u=s||a;return{needClip:u,needClipX:s,needClipY:a}}function VNe(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=sne(),{needClipX:o,needClipY:s,needClip:a}=lne(e,n);if(!a)return null;var{x:u,y:c,width:f,height:h}=i;return M.createElement("clipPath",{id:"clipPath-".concat(r)},M.createElement("rect",{x:o?u:u-f/2,y:s?c:c-h/2,width:o?f:f*2,height:s?h:h*2}))}var UNe=["onMouseEnter","onMouseLeave","onClick"],qNe=["value","background","tooltipPosition"],FNe=["id"],BNe=["onMouseEnter","onClick","onMouseLeave"];function bu(){return bu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bu.apply(null,arguments)}function g$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ei(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?g$(Object(n),!0).forEach(function(r){$Ne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $Ne(t,e,n){return(e=zNe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zNe(t){var e=HNe(t,"string");return typeof e=="symbol"?e:e+""}function HNe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Lb(t,e){if(t==null)return{};var n,r,i=GNe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function GNe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var jNe=t=>{var{dataKey:e,name:n,fill:r,legendType:i,hide:o}=t;return[{inactive:o,dataKey:e,type:i,color:r,value:hZ(n,e),payload:t}]};function KNe(t){var{dataKey:e,stroke:n,strokeWidth:r,fill:i,name:o,hide:s,unit:a}=t;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:e,nameKey:void 0,name:hZ(o,e),hide:s,type:t.tooltipType,color:t.fill,unit:a}}}function WNe(t){var e=et(xh),{data:n,dataKey:r,background:i,allOtherBarProps:o}=t,{onMouseEnter:s,onMouseLeave:a,onClick:u}=o,c=Lb(o,UNe),f=tne(s,r),h=nne(a),g=rne(u,r);if(!i||n==null)return null;var _=Pr(i,!1);return M.createElement(M.Fragment,null,n.map((T,E)=>{var{value:b,background:S,tooltipPosition:C}=T,R=Lb(T,qNe);if(!S)return null;var P=f(T,E),O=h(T,E),q=g(T,E),D=ei(ei(ei(ei(ei({option:i,isActive:String(E)===e},R),{},{fill:"#eee"},S),_),Vk(c,T,E)),{},{onMouseEnter:P,onMouseLeave:O,onClick:q,dataKey:r,index:E,className:"recharts-bar-background-rectangle"});return M.createElement(eL,bu({key:"background-bar-".concat(D.index)},D))}))}function YNe(t){var{showLabels:e,children:n,rects:r}=t,i=r==null?void 0:r.map(o=>{var s={x:o.x,y:o.y,width:o.width,height:o.height};return ei(ei({},s),{},{value:o.value,payload:o.payload,parentViewBox:o.parentViewBox,viewBox:s,fill:o.fill})});return M.createElement(EPe,{value:e?i:void 0},n)}function JNe(t){var{shape:e,activeBar:n,baseProps:r,entry:i,index:o,dataKey:s}=t,a=et(xh),u=et(Dte),c=n&&String(o)===a&&(u==null||s===u),f=c?n:e;return M.createElement(eL,bu({},r,i,{isActive:c,option:f,index:o,dataKey:s}))}function XNe(t){var{shape:e,baseProps:n,entry:r,index:i,dataKey:o}=t;return M.createElement(eL,bu({},n,r,{isActive:!1,option:e,index:i,dataKey:o}))}function QNe(t){var{data:e,props:n}=t,r=Oy(n),{id:i}=r,o=Lb(r,FNe),{shape:s,dataKey:a,activeBar:u}=n,{onMouseEnter:c,onClick:f,onMouseLeave:h}=n,g=Lb(n,BNe),_=tne(c,a),T=nne(h),E=rne(f,a);return e?M.createElement(M.Fragment,null,e.map((b,S)=>M.createElement(_u,bu({className:"recharts-bar-rectangle"},Vk(g,b,S),{onMouseEnter:_(b,S),onMouseLeave:T(b,S),onClick:E(b,S),key:"rectangle-".concat(b==null?void 0:b.x,"-").concat(b==null?void 0:b.y,"-").concat(b==null?void 0:b.value,"-").concat(S)}),u?M.createElement(JNe,{shape:s,activeBar:u,baseProps:o,entry:b,index:S,dataKey:a}):M.createElement(XNe,{shape:s,baseProps:o,entry:b,index:S,dataKey:a})))):null}function ZNe(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:i,isAnimationActive:o,animationBegin:s,animationDuration:a,animationEasing:u,onAnimationEnd:c,onAnimationStart:f}=e,h=n.current,g=eO(e,"recharts-bar-"),[_,T]=M.useState(!1),E=!_,b=M.useCallback(()=>{typeof c=="function"&&c(),T(!1)},[c]),S=M.useCallback(()=>{typeof f=="function"&&f(),T(!0)},[f]);return M.createElement(YNe,{showLabels:E,rects:r},M.createElement(Zk,{animationId:g,begin:s,duration:a,isActive:o,easing:u,onAnimationEnd:b,onAnimationStart:S,key:g},C=>{var R=C===1?r:r==null?void 0:r.map((P,O)=>{var q=h&&h[O];if(q)return ei(ei({},P),{},{x:Zr(q.x,P.x,C),y:Zr(q.y,P.y,C),width:Zr(q.width,P.width,C),height:Zr(q.height,P.height,C)});if(i==="horizontal"){var D=Zr(0,P.height,C);return ei(ei({},P),{},{y:P.y+P.height-D,height:D})}var L=Zr(0,P.width,C);return ei(ei({},P),{},{width:L})});return C>0&&(n.current=R??null),R==null?null:M.createElement(_u,null,M.createElement(QNe,{props:e,data:R}))}),M.createElement(SPe,{label:e.label}),e.children)}function eMe(t){var e=M.useRef(null);return M.createElement(ZNe,{previousRectanglesRef:e,props:t})}var une=0,tMe=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:ri(t,e)}};class nMe extends M.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:i,xAxisId:o,yAxisId:s,needClip:a,background:u,id:c}=this.props;if(e||n==null)return null;var f=sn("recharts-bar",i),h=c;return M.createElement(_u,{className:f,id:c},a&&M.createElement("defs",null,M.createElement(VNe,{clipPathId:h,xAxisId:o,yAxisId:s})),M.createElement(_u,{className:"recharts-bar-rectangles",clipPath:a?"url(#clipPath-".concat(h,")"):void 0},M.createElement(WNe,{data:n,dataKey:r,background:u,allOtherBarProps:this.props}),M.createElement(eMe,this.props)))}}var rMe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Kh.isSsr,legendType:"rect",minPointSize:une,xAxisId:0,yAxisId:0};function iMe(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:o,activeBar:s,animationBegin:a,animationDuration:u,animationEasing:c,isAnimationActive:f}=t,{needClip:h}=lne(e,n),g=Qk(),_=ns(),T=U_e(t.children,zte),E=et(C=>MMe(C,e,n,_,t.id,T));if(g!=="vertical"&&g!=="horizontal")return null;var b,S=E==null?void 0:E[0];return S==null||S.height==null||S.width==null?b=0:b=g==="vertical"?S.height/2:S.width/2,M.createElement(LNe,{xAxisId:e,yAxisId:n,data:E,dataPointFormatter:tMe,errorBarOffset:b},M.createElement(nMe,bu({},t,{layout:g,needClip:h,data:E,xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:o,activeBar:s,animationBegin:a,animationDuration:u,animationEasing:c,isAnimationActive:f})))}function oMe(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:o,xAxis:s,yAxis:a,xAxisTicks:u,yAxisTicks:c,stackedData:f,displayedData:h,offset:g,cells:_,parentViewBox:T}=t,E=e==="horizontal"?a:s,b=f?E.scale.domain():null,S=YEe({numericAxis:E});return h.map((C,R)=>{var P,O,q,D,L,N;f?P=zEe(f[R],b):(P=ri(C,n),Array.isArray(P)||(P=[S,P]));var U=INe(r,une)(P[1],R);if(e==="horizontal"){var V,[$,F]=[a.scale(P[0]),a.scale(P[1])];O=u6({axis:s,ticks:u,bandSize:o,offset:i.offset,entry:C,index:R}),q=(V=F??$)!==null&&V!==void 0?V:void 0,D=i.size;var H=$-F;if(L=To(H)?0:H,N={x:O,y:g.top,width:D,height:g.height},Math.abs(U)>0&&Math.abs(L)<Math.abs(U)){var X=Oi(L||U)*(Math.abs(U)-Math.abs(L));q-=X,L+=X}}else{var[K,te]=[s.scale(P[0]),s.scale(P[1])];if(O=K,q=u6({axis:a,ticks:c,bandSize:o,offset:i.offset,entry:C,index:R}),D=te-K,L=i.size,N={x:g.left,y:q,width:g.width,height:L},Math.abs(U)>0&&Math.abs(D)<Math.abs(U)){var re=Oi(D||U)*(Math.abs(U)-Math.abs(D));D+=re}}if(O==null||q==null||D==null||L==null)return null;var Y=ei(ei({},C),{},{x:O,y:q,width:D,height:L,value:f?P:P[1],payload:C,background:N,tooltipPosition:{x:O+D/2,y:q+L/2},parentViewBox:T},_&&_[R]&&_[R].props);return Y}).filter(Boolean)}function sMe(t){var e=rs(t,rMe),n=ns();return M.createElement(eNe,{id:e.id,type:"bar"},r=>M.createElement(M.Fragment,null,M.createElement(YPe,{legendPayload:jNe(e)}),M.createElement(KPe,{fn:KNe,args:e}),M.createElement(sNe,{type:"bar",id:r,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:WEe(e.stackId),hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:n}),M.createElement(iMe,bu({},e,{id:r}))))}var cne=M.memo(sMe);cne.displayName="Bar";function y$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function K0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y$(Object(n),!0).forEach(function(r){aMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aMe(t,e,n){return(e=lMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lMe(t){var e=uMe(t,"string");return typeof e=="symbol"?e:e+""}function uMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var cMe=(t,e)=>e,fMe=(t,e,n)=>n,dMe=(t,e,n,r)=>r,hMe=(t,e,n,r,i)=>i,Yy=ve([OO,hMe],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),pMe=ve([Yy],t=>t==null?void 0:t.maxBarSize),mMe=(t,e,n,r,i,o)=>o,v$=(t,e,n)=>{var r=n??t;if(!hr(r))return Xo(r,e,0)},gMe=ve([qt,OO,cMe,fMe,dMe],(t,e,n,r,i)=>e.filter(o=>t==="horizontal"?o.xAxisId===n:o.yAxisId===r).filter(o=>o.isPanorama===i).filter(o=>o.hide===!1).filter(o=>o.type==="bar")),yMe=(t,e,n,r)=>{var i=qt(t);return i==="horizontal"?YM(t,"yAxis",n,r):YM(t,"xAxis",e,r)},vMe=(t,e,n)=>{var r=qt(t);return r==="horizontal"?S5(t,"xAxis",e):S5(t,"yAxis",n)},_Me=(t,e,n)=>{var r={},i=t.filter(pE),o=t.filter(c=>c.stackId==null),s=i.reduce((c,f)=>(c[f.stackId]||(c[f.stackId]=[]),c[f.stackId].push(f),c),r),a=Object.entries(s).map(c=>{var[f,h]=c,g=h.map(T=>T.dataKey),_=v$(e,n,h[0].barSize);return{stackId:f,dataKeys:g,barSize:_}}),u=o.map(c=>{var f=[c.dataKey].filter(g=>g!=null),h=v$(e,n,c.barSize);return{stackId:void 0,dataKeys:f,barSize:h}});return[...a,...u]},bMe=ve([gMe,M1e,vMe],_Me),wMe=(t,e,n,r,i)=>{var o,s,a=Yy(t,e,n,r,i);if(a!=null){var u=qt(t),c=Tee(t),{maxBarSize:f}=a,h=hr(f)?c:f,g,_;return u==="horizontal"?(g=Th(t,"xAxis",e,r),_=Eh(t,"xAxis",e,r)):(g=Th(t,"yAxis",n,r),_=Eh(t,"yAxis",n,r)),(o=(s=Yk(g,_,!0))!==null&&s!==void 0?s:h)!==null&&o!==void 0?o:0}},fne=(t,e,n,r)=>{var i=qt(t),o,s;return i==="horizontal"?(o=Th(t,"xAxis",e,r),s=Eh(t,"xAxis",e,r)):(o=Th(t,"yAxis",n,r),s=Eh(t,"yAxis",n,r)),Yk(o,s)};function EMe(t,e,n,r,i){var o=r.length;if(!(o<1)){var s=Xo(t,n,0,!0),a,u=[];if($i(r[0].barSize)){var c=!1,f=n/o,h=r.reduce((S,C)=>S+(C.barSize||0),0);h+=(o-1)*s,h>=n&&(h-=(o-1)*s,s=0),h>=n&&f>0&&(c=!0,f*=.9,h=o*f);var g=(n-h)/2>>0,_={offset:g-s,size:0};a=r.reduce((S,C)=>{var R,P={stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:_.offset+_.size+s,size:c?f:(R=C.barSize)!==null&&R!==void 0?R:0}},O=[...S,P];return _=O[O.length-1].position,O},u)}else{var T=Xo(e,n,0,!0);n-2*T-(o-1)*s<=0&&(s=0);var E=(n-2*T-(o-1)*s)/o;E>1&&(E>>=0);var b=$i(i)?Math.min(E,i):E;a=r.reduce((S,C,R)=>[...S,{stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:T+(E+s)*R+(E-b)/2,size:b}}],u)}return a}}var TMe=(t,e,n,r,i,o,s)=>{var a=hr(s)?e:s,u=EMe(n,r,i!==o?i:o,t,a);return i!==o&&u!=null&&(u=u.map(c=>K0(K0({},c),{},{position:K0(K0({},c.position),{},{offset:c.position.offset-i/2})}))),u},xMe=ve([bMe,Tee,N1e,xee,wMe,fne,pMe],TMe),SMe=(t,e,n,r)=>Th(t,"xAxis",e,r),AMe=(t,e,n,r)=>Th(t,"yAxis",n,r),CMe=(t,e,n,r)=>Eh(t,"xAxis",e,r),IMe=(t,e,n,r)=>Eh(t,"yAxis",n,r),RMe=ve([xMe,Yy],(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}}),PMe=(t,e)=>{var n=DO(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var i=t[r];if(i){var{stackedData:o}=i;if(o)return o.find(s=>s.key===n)}}}},NMe=ve([yMe,Yy],PMe),MMe=ve([gr,Jk,SMe,AMe,CMe,IMe,RMe,qt,xO,fne,NMe,Yy,mMe],(t,e,n,r,i,o,s,a,u,c,f,h,g)=>{var{chartData:_,dataStartIndex:T,dataEndIndex:E}=u;if(!(h==null||s==null||e==null||a!=="horizontal"&&a!=="vertical"||n==null||r==null||i==null||o==null||c==null)){var{data:b}=h,S;if(b!=null&&b.length>0?S=b:S=_==null?void 0:_.slice(T,E+1),S!=null)return oMe({layout:a,barSettings:h,pos:s,parentViewBox:e,bandSize:c,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:o,stackedData:f,displayedData:S,offset:t,cells:g})}}),DMe=t=>{var{chartData:e}=t,n=mr(),r=ns();return M.useEffect(()=>r?()=>{}:(n(k5(e)),()=>{n(k5(void 0))}),[e,n,r]),null},_$={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},dne=Hi({name:"brush",initialState:_$,reducers:{setBrushSettings(t,e){return e.payload==null?_$:e.payload}}}),{setBrushSettings:AKe}=dne.actions,kMe=dne.reducer;function OMe(t,e,n){return(e=LMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LMe(t){var e=VMe(t,"string");return typeof e=="symbol"?e:e+""}function VMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class tL{static create(e){return new tL(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(e)+o}default:return this.scale(e)}if(n){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+s}return this.scale(e)}}isInRange(e){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?e>=r&&e<=i:e>=i&&e<=r}}OMe(tL,"EPS",1e-4);function UMe(t){return(t%180+180)%180}var qMe=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=UMe(i),s=o*Math.PI/180,a=Math.atan(r/n),u=s>a&&s<Math.PI-a?r/Math.sin(s):n/Math.cos(s);return Math.abs(u)},FMe={dots:[],areas:[],lines:[]},hne=Hi({name:"referenceElements",initialState:FMe,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=Pa(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=Pa(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=Pa(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:CKe,removeDot:IKe,addArea:RKe,removeArea:PKe,addLine:NKe,removeLine:MKe}=hne.actions,BMe=hne.reducer,$Me=M.createContext(void 0),zMe=t=>{var{children:e}=t,[n]=M.useState("".concat(Wg("recharts"),"-clip")),r=sne();if(r==null)return null;var{x:i,y:o,width:s,height:a}=r;return M.createElement($Me.Provider,{value:n},M.createElement("defs",null,M.createElement("clipPath",{id:n},M.createElement("rect",{x:i,y:o,height:a,width:s}))),e)};function Sh(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function pne(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function HMe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return qMe(r,n)}function GMe(t,e,n){var r=n==="width",{x:i,y:o,width:s,height:a}=t;return e===1?{start:r?i:o,end:r?i+s:o+a}:{start:r?i+s:o+a,end:r?i:o}}function Vb(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var o=n();return t*(e-t*o/2-r)>=0&&t*(e+t*o/2-i)<=0}function jMe(t,e){return pne(t,e+1)}function KMe(t,e,n,r,i){for(var o=(r||[]).slice(),{start:s,end:a}=e,u=0,c=1,f=s,h=function(){var T=r==null?void 0:r[u];if(T===void 0)return{v:pne(r,c)};var E=u,b,S=()=>(b===void 0&&(b=n(T,E)),b),C=T.coordinate,R=u===0||Vb(t,C,S,f,a);R||(u=0,f=s,c+=1),R&&(f=C+t*(S()/2+i),u+=c)},g;c<=o.length;)if(g=h(),g)return g.v;return[]}function b$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Vr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?b$(Object(n),!0).forEach(function(r){WMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WMe(t,e,n){return(e=YMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YMe(t){var e=JMe(t,"string");return typeof e=="symbol"?e:e+""}function JMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function XMe(t,e,n,r,i){for(var o=(r||[]).slice(),s=o.length,{start:a}=e,{end:u}=e,c=function(g){var _=o[g],T,E=()=>(T===void 0&&(T=n(_,g)),T);if(g===s-1){var b=t*(_.coordinate+t*E()/2-u);o[g]=_=Vr(Vr({},_),{},{tickCoord:b>0?_.coordinate-b*t:_.coordinate})}else o[g]=_=Vr(Vr({},_),{},{tickCoord:_.coordinate});var S=Vb(t,_.tickCoord,E,a,u);S&&(u=_.tickCoord-t*(E()/2+i),o[g]=Vr(Vr({},_),{},{isShow:!0}))},f=s-1;f>=0;f--)c(f);return o}function QMe(t,e,n,r,i,o){var s=(r||[]).slice(),a=s.length,{start:u,end:c}=e;if(o){var f=r[a-1],h=n(f,a-1),g=t*(f.coordinate+t*h/2-c);s[a-1]=f=Vr(Vr({},f),{},{tickCoord:g>0?f.coordinate-g*t:f.coordinate});var _=Vb(t,f.tickCoord,()=>h,u,c);_&&(c=f.tickCoord-t*(h/2+i),s[a-1]=Vr(Vr({},f),{},{isShow:!0}))}for(var T=o?a-1:a,E=function(C){var R=s[C],P,O=()=>(P===void 0&&(P=n(R,C)),P);if(C===0){var q=t*(R.coordinate-t*O()/2-u);s[C]=R=Vr(Vr({},R),{},{tickCoord:q<0?R.coordinate-q*t:R.coordinate})}else s[C]=R=Vr(Vr({},R),{},{tickCoord:R.coordinate});var D=Vb(t,R.tickCoord,O,u,c);D&&(u=R.tickCoord+t*(O()/2+i),s[C]=Vr(Vr({},R),{},{isShow:!0}))},b=0;b<T;b++)E(b);return s}function ZMe(t,e,n){var{tick:r,ticks:i,viewBox:o,minTickGap:s,orientation:a,interval:u,tickFormatter:c,unit:f,angle:h}=t;if(!i||!i.length||!r)return[];if(it(u)||Kh.isSsr){var g;return(g=jMe(i,it(u)?u:0))!==null&&g!==void 0?g:[]}var _=[],T=a==="top"||a==="bottom"?"width":"height",E=f&&T==="width"?bg(f,{fontSize:e,letterSpacing:n}):{width:0,height:0},b=(R,P)=>{var O=typeof c=="function"?c(R.value,P):R.value;return T==="width"?HMe(bg(O,{fontSize:e,letterSpacing:n}),E,h):bg(O,{fontSize:e,letterSpacing:n})[T]},S=i.length>=2?Oi(i[1].coordinate-i[0].coordinate):1,C=GMe(o,S,T);return u==="equidistantPreserveStart"?KMe(S,C,b,i,s):(u==="preserveStart"||u==="preserveStartEnd"?_=QMe(S,C,b,i,s,u==="preserveStartEnd"):_=XMe(S,C,b,i,s),_.filter(R=>R.isShow))}var e2e=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:o=0}=t,s=0;if(e){e.forEach(f=>{if(f){var h=f.getBoundingClientRect();h.width>s&&(s=h.width)}});var a=n?n.getBoundingClientRect().width:0,u=i+o,c=s+u+a+(n?r:0);return Math.round(c)}return 0},t2e=["axisLine","width","height","className","hide","ticks"],n2e=["viewBox"],r2e=["viewBox"];function n2(t,e){if(t==null)return{};var n,r,i=i2e(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function i2e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function of(){return of=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},of.apply(null,arguments)}function w$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w$(Object(n),!0).forEach(function(r){o2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function o2e(t,e,n){return(e=s2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s2e(t){var e=a2e(t,"string");return typeof e=="symbol"?e:e+""}function a2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var l2e={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function u2e(t){var{x:e,y:n,width:r,height:i,orientation:o,mirror:s,axisLine:a,otherSvgProps:u}=t;if(!a)return null;var c=Zn(Zn(Zn({},u),Pr(a,!1)),{},{fill:"none"});if(o==="top"||o==="bottom"){var f=+(o==="top"&&!s||o==="bottom"&&s);c=Zn(Zn({},c),{},{x1:e,y1:n+f*i,x2:e+r,y2:n+f*i})}else{var h=+(o==="left"&&!s||o==="right"&&s);c=Zn(Zn({},c),{},{x1:e+h*r,y1:n,x2:e+h*r,y2:n+i})}return M.createElement("line",of({},c,{className:sn("recharts-cartesian-axis-line",mh(a,"className"))}))}function c2e(t,e,n,r,i,o,s,a,u){var c,f,h,g,_,T,E=a?-1:1,b=t.tickSize||s,S=it(t.tickCoord)?t.tickCoord:t.coordinate;switch(o){case"top":c=f=t.coordinate,g=n+ +!a*i,h=g-E*b,T=h-E*u,_=S;break;case"left":h=g=t.coordinate,f=e+ +!a*r,c=f-E*b,_=c-E*u,T=S;break;case"right":h=g=t.coordinate,f=e+ +a*r,c=f+E*b,_=c+E*u,T=S;break;default:c=f=t.coordinate,g=n+ +a*i,h=g+E*b,T=h+E*u,_=S;break}return{line:{x1:c,y1:h,x2:f,y2:g},tick:{x:_,y:T}}}function f2e(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function d2e(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function h2e(t){var{option:e,tickProps:n,value:r}=t,i,o=sn(n.className,"recharts-cartesian-axis-tick-value");if(M.isValidElement(e))i=M.cloneElement(e,Zn(Zn({},n),{},{className:o}));else if(typeof e=="function")i=e(Zn(Zn({},n),{},{className:o}));else{var s="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(s=sn(s,e==null?void 0:e.className)),i=M.createElement(QO,of({},n,{className:s}),r)}return i}function p2e(t){var{ticks:e=[],tick:n,tickLine:r,stroke:i,tickFormatter:o,unit:s,padding:a,tickTextProps:u,orientation:c,mirror:f,x:h,y:g,width:_,height:T,tickSize:E,tickMargin:b,fontSize:S,letterSpacing:C,getTicksConfig:R,events:P}=t,O=ZMe(Zn(Zn({},R),{},{ticks:e}),S,C),q=f2e(c,f),D=d2e(c,f),L=Oy(R),N=Pr(n,!1),U=Zn(Zn({},L),{},{fill:"none"},Pr(r,!1)),V=O.map(($,F)=>{var{line:H,tick:X}=c2e($,h,g,_,T,c,E,f,b),K=Zn(Zn(Zn(Zn({textAnchor:q,verticalAnchor:D},L),{},{stroke:"none",fill:i},N),X),{},{index:F,payload:$,visibleTicksCount:O.length,tickFormatter:o,padding:a},u);return M.createElement(_u,of({className:"recharts-cartesian-axis-tick",key:"tick-".concat($.value,"-").concat($.coordinate,"-").concat($.tickCoord)},Vk(P,$,F)),r&&M.createElement("line",of({},U,H,{className:sn("recharts-cartesian-axis-tick-line",mh(r,"className"))})),n&&M.createElement(h2e,{option:n,tickProps:K,value:"".concat(typeof o=="function"?o($.value,F):$.value).concat(s||"")}))});return V.length>0?M.createElement("g",{className:"recharts-cartesian-axis-ticks"},V):null}var m2e=M.forwardRef((t,e)=>{var{axisLine:n,width:r,height:i,className:o,hide:s,ticks:a}=t,u=n2(t,t2e),[c,f]=M.useState(""),[h,g]=M.useState(""),_=M.useRef([]);M.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var E;return e2e({ticks:_.current,label:(E=t.labelRef)===null||E===void 0?void 0:E.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var T=M.useCallback(E=>{if(E){var b=E.getElementsByClassName("recharts-cartesian-axis-tick-value");_.current=Array.from(b);var S=b[0];if(S){var C=window.getComputedStyle(S),R=C.fontSize,P=C.letterSpacing;(R!==c||P!==h)&&(f(R),g(P))}}},[c,h]);return s||r!=null&&r<=0||i!=null&&i<=0?null:M.createElement(_u,{className:sn("recharts-cartesian-axis",o),ref:T},M.createElement(u2e,{x:t.x,y:t.y,width:r,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:Oy(t)}),M.createElement(p2e,{ticks:a,tick:t.tick,tickLine:t.tickLine,stroke:t.stroke,tickFormatter:t.tickFormatter,unit:t.unit,padding:t.padding,tickTextProps:t.tickTextProps,orientation:t.orientation,mirror:t.mirror,x:t.x,y:t.y,width:t.width,height:t.height,tickSize:t.tickSize,tickMargin:t.tickMargin,fontSize:c,letterSpacing:h,getTicksConfig:t,events:u}),M.createElement(tPe,{x:t.x,y:t.y,width:t.width,height:t.height},M.createElement(fPe,{label:t.label}),t.children))}),g2e=M.memo(m2e,(t,e)=>{var{viewBox:n}=t,r=n2(t,n2e),{viewBox:i}=e,o=n2(e,r2e);return Sh(n,i)&&Sh(r,o)}),nL=M.forwardRef((t,e)=>{var n=rs(t,l2e);return M.createElement(g2e,of({},n,{ref:e}))});nL.displayName="CartesianAxis";var y2e=["dangerouslySetInnerHTML","ticks"],v2e=["id"],_2e=["domain"],b2e=["domain"];function r2(){return r2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r2.apply(null,arguments)}function Ub(t,e){if(t==null)return{};var n,r,i=w2e(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function w2e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function E2e(t){var e=mr();return M.useEffect(()=>(e(fNe(t)),()=>{e(dNe(t))}),[t,e]),null}var T2e=t=>{var{xAxisId:e,className:n}=t,r=et(Jk),i=ns(),o="xAxis",s=et(b=>Zh(b,o,e,i)),a=et(b=>pte(b,o,e,i)),u=et(b=>cte(b,e)),c=et(b=>xCe(b,e)),f=et(b=>Dee(b,e));if(u==null||c==null||f==null)return null;var{dangerouslySetInnerHTML:h,ticks:g}=t,_=Ub(t,y2e),{id:T}=f,E=Ub(f,v2e);return M.createElement(nL,r2({},_,E,{scale:s,x:c.x,y:c.y,width:u.width,height:u.height,className:sn("recharts-".concat(o," ").concat(o),n),viewBox:r,ticks:a}))},x2e={allowDataOverflow:Ii.allowDataOverflow,allowDecimals:Ii.allowDecimals,allowDuplicatedCategory:Ii.allowDuplicatedCategory,height:Ii.height,hide:!1,mirror:Ii.mirror,orientation:Ii.orientation,padding:Ii.padding,reversed:Ii.reversed,scale:Ii.scale,tickCount:Ii.tickCount,type:Ii.type,xAxisId:0},S2e=t=>{var e,n,r,i,o,s=rs(t,x2e);return M.createElement(M.Fragment,null,M.createElement(E2e,{interval:(e=s.interval)!==null&&e!==void 0?e:"preserveEnd",id:s.xAxisId,scale:s.scale,type:s.type,padding:s.padding,allowDataOverflow:s.allowDataOverflow,domain:s.domain,dataKey:s.dataKey,allowDuplicatedCategory:s.allowDuplicatedCategory,allowDecimals:s.allowDecimals,tickCount:s.tickCount,includeHidden:(n=s.includeHidden)!==null&&n!==void 0?n:!1,reversed:s.reversed,ticks:s.ticks,height:s.height,orientation:s.orientation,mirror:s.mirror,hide:s.hide,unit:s.unit,name:s.name,angle:(r=s.angle)!==null&&r!==void 0?r:0,minTickGap:(i=s.minTickGap)!==null&&i!==void 0?i:5,tick:(o=s.tick)!==null&&o!==void 0?o:!0,tickFormatter:s.tickFormatter}),M.createElement(T2e,s))},A2e=(t,e)=>{var{domain:n}=t,r=Ub(t,_2e),{domain:i}=e,o=Ub(e,b2e);return Sh(r,o)?Array.isArray(n)&&n.length===2&&Array.isArray(i)&&i.length===2?n[0]===i[0]&&n[1]===i[1]:Sh({domain:n},{domain:i}):!1},mne=M.memo(S2e,A2e);mne.displayName="XAxis";var C2e=["dangerouslySetInnerHTML","ticks"],I2e=["id"],R2e=["domain"],P2e=["domain"];function i2(){return i2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i2.apply(null,arguments)}function qb(t,e){if(t==null)return{};var n,r,i=N2e(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function N2e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function M2e(t){var e=mr();return M.useEffect(()=>(e(hNe(t)),()=>{e(pNe(t))}),[t,e]),null}var D2e=t=>{var{yAxisId:e,className:n,width:r,label:i}=t,o=M.useRef(null),s=M.useRef(null),a=et(Jk),u=ns(),c=mr(),f="yAxis",h=et(O=>Zh(O,f,e,u)),g=et(O=>fte(O,e)),_=et(O=>ACe(O,e)),T=et(O=>pte(O,f,e,u)),E=et(O=>kee(O,e));if(M.useLayoutEffect(()=>{if(!(r!=="auto"||!g||ZO(i)||M.isValidElement(i)||E==null)){var O=o.current;if(O){var q=O.getCalculatedWidth();Math.round(g.width)!==Math.round(q)&&c(mNe({id:e,width:q}))}}},[T,g,c,i,e,r,E]),g==null||_==null||E==null)return null;var{dangerouslySetInnerHTML:b,ticks:S}=t,C=qb(t,C2e),{id:R}=E,P=qb(E,I2e);return M.createElement(nL,i2({},C,P,{ref:o,labelRef:s,scale:h,x:_.x,y:_.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:g.width,height:g.height,className:sn("recharts-".concat(f," ").concat(f),n),viewBox:a,ticks:T}))},k2e={allowDataOverflow:Ri.allowDataOverflow,allowDecimals:Ri.allowDecimals,allowDuplicatedCategory:Ri.allowDuplicatedCategory,hide:!1,mirror:Ri.mirror,orientation:Ri.orientation,padding:Ri.padding,reversed:Ri.reversed,scale:Ri.scale,tickCount:Ri.tickCount,type:Ri.type,width:Ri.width,yAxisId:0},O2e=t=>{var e,n,r,i,o,s=rs(t,k2e);return M.createElement(M.Fragment,null,M.createElement(M2e,{interval:(e=s.interval)!==null&&e!==void 0?e:"preserveEnd",id:s.yAxisId,scale:s.scale,type:s.type,domain:s.domain,allowDataOverflow:s.allowDataOverflow,dataKey:s.dataKey,allowDuplicatedCategory:s.allowDuplicatedCategory,allowDecimals:s.allowDecimals,tickCount:s.tickCount,padding:s.padding,includeHidden:(n=s.includeHidden)!==null&&n!==void 0?n:!1,reversed:s.reversed,ticks:s.ticks,width:s.width,orientation:s.orientation,mirror:s.mirror,hide:s.hide,unit:s.unit,name:s.name,angle:(r=s.angle)!==null&&r!==void 0?r:0,minTickGap:(i=s.minTickGap)!==null&&i!==void 0?i:5,tick:(o=s.tick)!==null&&o!==void 0?o:!0,tickFormatter:s.tickFormatter}),M.createElement(D2e,s))},L2e=(t,e)=>{var{domain:n}=t,r=qb(t,R2e),{domain:i}=e,o=qb(e,P2e);return Sh(r,o)?Array.isArray(n)&&n.length===2&&Array.isArray(i)&&i.length===2?n[0]===i[0]&&n[1]===i[1]:Sh({domain:n},{domain:i}):!1},gne=M.memo(O2e,L2e);gne.displayName="YAxis";var KA={exports:{}},WA={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E$;function V2e(){if(E$)return WA;E$=1;var t=Ph();function e(u,c){return u===c&&(u!==0||1/u===1/c)||u!==u&&c!==c}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,o=t.useEffect,s=t.useMemo,a=t.useDebugValue;return WA.useSyncExternalStoreWithSelector=function(u,c,f,h,g){var _=i(null);if(_.current===null){var T={hasValue:!1,value:null};_.current=T}else T=_.current;_=s(function(){function b(O){if(!S){if(S=!0,C=O,O=h(O),g!==void 0&&T.hasValue){var q=T.value;if(g(q,O))return R=q}return R=O}if(q=R,n(C,O))return q;var D=h(O);return g!==void 0&&g(q,D)?(C=O,q):(C=O,R=D)}var S=!1,C,R,P=f===void 0?null:f;return[function(){return b(c())},P===null?void 0:function(){return b(P())}]},[c,f,h,g]);var E=r(u,_[0],_[1]);return o(function(){T.hasValue=!0,T.value=E},[E]),a(E),E},WA}var T$;function U2e(){return T$||(T$=1,KA.exports=V2e()),KA.exports}U2e();function q2e(t){t()}function F2e(){let t=null,e=null;return{clear(){t=null,e=null},notify(){q2e(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var x$={notify(){},get:()=>[]};function B2e(t,e){let n,r=x$,i=0,o=!1;function s(E){f();const b=r.subscribe(E);let S=!1;return()=>{S||(S=!0,b(),h())}}function a(){r.notify()}function u(){T.onStateChange&&T.onStateChange()}function c(){return o}function f(){i++,n||(n=t.subscribe(u),r=F2e())}function h(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=x$)}function g(){o||(o=!0,f())}function _(){o&&(o=!1,h())}const T={addNestedSub:s,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:c,trySubscribe:g,tryUnsubscribe:_,getListeners:()=>r};return T}var $2e=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",z2e=$2e(),H2e=()=>typeof navigator<"u"&&navigator.product==="ReactNative",G2e=H2e(),j2e=()=>z2e||G2e?M.useLayoutEffect:M.useEffect,K2e=j2e(),YA=Symbol.for("react-redux-context"),JA=typeof globalThis<"u"?globalThis:{};function W2e(){if(!M.createContext)return{};const t=JA[YA]??(JA[YA]=new Map);let e=t.get(M.createContext);return e||(e=M.createContext(null),t.set(M.createContext,e)),e}var Y2e=W2e();function J2e(t){const{children:e,context:n,serverState:r,store:i}=t,o=M.useMemo(()=>{const u=B2e(i);return{store:i,subscription:u,getServerState:r?()=>r:void 0}},[i,r]),s=M.useMemo(()=>i.getState(),[i]);K2e(()=>{const{subscription:u}=o;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),s!==i.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[o,s]);const a=n||Y2e;return M.createElement(a.Provider,{value:o},e)}var X2e=J2e,Q2e=(t,e)=>e,rL=ve([Q2e,qt,Pee,rr,Rte,ol,PIe,gr],OIe),iL=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},yne=xo("mouseClick"),vne=Vy();vne.startListening({actionCreator:yne,effect:(t,e)=>{var n=t.payload,r=rL(e.getState(),iL(n));(r==null?void 0:r.activeIndex)!=null&&e.dispatch(qCe({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var o2=xo("mouseMove"),_ne=Vy();_ne.startListening({actionCreator:o2,effect:(t,e)=>{var n=t.payload,r=e.getState(),i=zO(r,r.tooltip.settings.shared),o=rL(r,iL(n));i==="axis"&&((o==null?void 0:o.activeIndex)!=null?e.dispatch(Ete({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):e.dispatch(wte()))}});var S$={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},bne=Hi({name:"rootProps",initialState:S$,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:S$.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className}}}),Z2e=bne.reducer,{updateOptions:eDe}=bne.actions,wne=Hi({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:DKe}=wne.actions,tDe=wne.reducer,Ene=xo("keyDown"),Tne=xo("focus"),oL=Vy();oL.startListening({actionCreator:Ene,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,o=t.payload;if(!(o!=="ArrowRight"&&o!=="ArrowLeft"&&o!=="Enter")){var s=Number(HO(i,tp(n))),a=ol(n);if(o==="Enter"){var u=Mb(n,"axis","hover",String(i.index));e.dispatch(XM({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:u}));return}var c=PCe(n),f=c==="left-to-right"?1:-1,h=o==="ArrowRight"?1:-1,g=s+h*f;if(!(a==null||g>=a.length||g<0)){var _=Mb(n,"axis","hover",String(g));e.dispatch(XM({active:!0,activeIndex:g.toString(),activeDataKey:void 0,activeCoordinate:_}))}}}}});oL.startListening({actionCreator:Tne,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var o="0",s=Mb(n,"axis","hover",String(o));e.dispatch(XM({activeDataKey:void 0,active:!0,activeIndex:o,activeCoordinate:s}))}}}});var uo=xo("externalEvent"),xne=Vy();xne.startListening({actionCreator:uo,effect:(t,e)=>{if(t.payload.handler!=null){var n=e.getState(),r={activeCoordinate:wIe(n),activeDataKey:Dte(n),activeIndex:xh(n),activeLabel:Mte(n),activeTooltipIndex:xh(n),isTooltipActive:EIe(n)};t.payload.handler(r,t.payload.reactEvent)}}});var nDe=ve([ep],t=>t.tooltipItemPayloads),rDe=ve([nDe,Ky,(t,e,n)=>e,(t,e,n)=>n],(t,e,n,r)=>{var i=t.find(a=>a.settings.dataKey===r);if(i!=null){var{positions:o}=i;if(o!=null){var s=e(o,n);return s}}}),Sne=xo("touchMove"),Ane=Vy();Ane.startListening({actionCreator:Sne,effect:(t,e)=>{var n=t.payload,r=e.getState(),i=zO(r,r.tooltip.settings.shared);if(i==="axis"){var o=rL(r,iL({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));(o==null?void 0:o.activeIndex)!=null&&e.dispatch(Ete({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(i==="item"){var s,a=n.touches[0],u=document.elementFromPoint(a.clientX,a.clientY);if(!u||!u.getAttribute)return;var c=u.getAttribute(rTe),f=(s=u.getAttribute(iTe))!==null&&s!==void 0?s:void 0,h=rDe(e.getState(),c,f);e.dispatch(bte({activeDataKey:f,activeIndex:c,activeCoordinate:h}))}}});var iDe=zQ({brush:kMe,cartesianAxis:gNe,chartData:QIe,errorBars:PNe,graphicalItems:oNe,layout:AEe,legend:ETe,options:KIe,polarAxis:CPe,polarOptions:tDe,referenceElements:BMe,rootProps:Z2e,tooltip:FCe}),oDe=function(e){return Xwe({reducer:iDe,preloadedState:e,middleware:n=>n({serializableCheck:!1}).concat([vne.middleware,_ne.middleware,oL.middleware,xne.middleware,Ane.middleware]),devTools:Kh.devToolsEnabled})};function sDe(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=ns(),o=M.useRef(null);if(i)return n;o.current==null&&(o.current=oDe(e));var s=zk;return M.createElement(X2e,{context:s,store:o.current},n)}function aDe(t){var{layout:e,width:n,height:r,margin:i}=t,o=mr(),s=ns();return M.useEffect(()=>{s||(o(TEe(e)),o(xEe({width:n,height:r})),o(EEe(i)))},[o,s,e,n,r,i]),null}function lDe(t){var e=mr();return M.useEffect(()=>{e(eDe(t))},[e,t]),null}var uDe=["children"];function cDe(t,e){if(t==null)return{};var n,r,i=fDe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function fDe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Fb(){return Fb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fb.apply(null,arguments)}var dDe={width:"100%",height:"100%"},hDe=M.forwardRef((t,e)=>{var n=yTe(),r=vTe(),i=gZ();if(!gb(n)||!gb(r))return null;var{children:o,otherAttributes:s,title:a,desc:u}=t,c,f;return typeof s.tabIndex=="number"?c=s.tabIndex:c=i?0:void 0,typeof s.role=="string"?f=s.role:f=i?"application":void 0,M.createElement(cQ,Fb({},s,{title:a,desc:u,role:f,tabIndex:c,width:n,height:r,style:dDe,ref:e}),o)}),pDe=t=>{var{children:e}=t,n=et(nE);if(!n)return null;var{width:r,height:i,y:o,x:s}=n;return M.createElement(cQ,{width:r,height:i,x:s,y:o},e)},A$=M.forwardRef((t,e)=>{var{children:n}=t,r=cDe(t,uDe),i=ns();return i?M.createElement(pDe,null,n):M.createElement(hDe,Fb({ref:e},r),n)});function mDe(){var t=mr(),[e,n]=M.useState(null),r=et(nTe);return M.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),o=i.width/e.offsetWidth;$i(o)&&o!==r&&t(SEe(o))}},[e,t,r]),n}function C$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gDe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?C$(Object(n),!0).forEach(function(r){yDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yDe(t,e,n){return(e=vDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vDe(t){var e=_De(t,"string");return typeof e=="symbol"?e:e+""}function _De(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bDe=M.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:o,onContextMenu:s,onDoubleClick:a,onMouseDown:u,onMouseEnter:c,onMouseLeave:f,onMouseMove:h,onMouseUp:g,onTouchEnd:_,onTouchMove:T,onTouchStart:E,style:b,width:S}=t,C=mr(),[R,P]=M.useState(null),[O,q]=M.useState(null);aRe();var D=mDe(),L=M.useCallback(Z=>{D(Z),typeof e=="function"&&e(Z),P(Z),q(Z)},[D,e,P,q]),N=M.useCallback(Z=>{C(yne(Z)),C(uo({handler:o,reactEvent:Z}))},[C,o]),U=M.useCallback(Z=>{C(o2(Z)),C(uo({handler:c,reactEvent:Z}))},[C,c]),V=M.useCallback(Z=>{C(wte()),C(uo({handler:f,reactEvent:Z}))},[C,f]),$=M.useCallback(Z=>{C(o2(Z)),C(uo({handler:h,reactEvent:Z}))},[C,h]),F=M.useCallback(()=>{C(Tne())},[C]),H=M.useCallback(Z=>{C(Ene(Z.key))},[C]),X=M.useCallback(Z=>{C(uo({handler:s,reactEvent:Z}))},[C,s]),K=M.useCallback(Z=>{C(uo({handler:a,reactEvent:Z}))},[C,a]),te=M.useCallback(Z=>{C(uo({handler:u,reactEvent:Z}))},[C,u]),re=M.useCallback(Z=>{C(uo({handler:g,reactEvent:Z}))},[C,g]),Y=M.useCallback(Z=>{C(uo({handler:E,reactEvent:Z}))},[C,E]),G=M.useCallback(Z=>{C(Sne(Z)),C(uo({handler:T,reactEvent:Z}))},[C,T]),Q=M.useCallback(Z=>{C(uo({handler:_,reactEvent:Z}))},[C,_]);return M.createElement(qte.Provider,{value:R},M.createElement(j_e.Provider,{value:O},M.createElement("div",{className:sn("recharts-wrapper",r),style:gDe({position:"relative",cursor:"default",width:S,height:i},b),onClick:N,onContextMenu:X,onDoubleClick:K,onFocus:F,onKeyDown:H,onMouseDown:te,onMouseEnter:U,onMouseLeave:V,onMouseMove:$,onMouseUp:re,onTouchEnd:Q,onTouchMove:G,onTouchStart:Y,ref:L},n)))}),wDe=["children","className","width","height","style","compact","title","desc"];function EDe(t,e){if(t==null)return{};var n,r,i=TDe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function TDe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var xDe=M.forwardRef((t,e)=>{var{children:n,className:r,width:i,height:o,style:s,compact:a,title:u,desc:c}=t,f=EDe(t,wDe),h=Oy(f);return a?M.createElement(A$,{otherAttributes:h,title:u,desc:c},n):M.createElement(bDe,{className:r,style:s,width:i,height:o,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},M.createElement(A$,{otherAttributes:h,title:u,desc:c,ref:e},M.createElement(zMe,null,n)))}),SDe=["width","height"];function s2(){return s2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s2.apply(null,arguments)}function ADe(t,e){if(t==null)return{};var n,r,i=CDe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function CDe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var IDe={top:5,right:5,bottom:5,left:5},RDe={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:IDe,reverseStackOrder:!1,syncMethod:"index"},PDe=M.forwardRef(function(e,n){var r,i=rs(e.categoricalChartProps,RDe),{width:o,height:s}=i,a=ADe(i,SDe);if(!gb(o)||!gb(s))return null;var{chartName:u,defaultTooltipEventType:c,validateTooltipEventTypes:f,tooltipPayloadSearcher:h,categoricalChartProps:g}=e,_={chartName:u,defaultTooltipEventType:c,validateTooltipEventTypes:f,tooltipPayloadSearcher:h,eventEmitter:void 0};return M.createElement(sDe,{preloadedState:{options:_},reduxStoreName:(r=g.id)!==null&&r!==void 0?r:u},M.createElement(DMe,{chartData:g.data}),M.createElement(aDe,{width:o,height:s,layout:i.layout,margin:i.margin}),M.createElement(lDe,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),M.createElement(xDe,s2({},a,{width:o,height:s,ref:n})))}),NDe=["axis","item"],MDe=M.forwardRef((t,e)=>M.createElement(PDe,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:NDe,tooltipPayloadSearcher:GIe,categoricalChartProps:t,ref:e}));const DDe=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{d:"M2 11h3v7H2v-7zM6 3h3v15H6V3zm5 8h3v7h-3v-7zm4-4h3v11h-3V7z"})}),kDe=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),ODe=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})}),LDe=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),VDe=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{fillRule:"evenodd",d:"M10 2a4 4 0 00-4 4v4H4a2 2 0 00-2 2v6a2 2 0 002 2h12a2 2 0 002-2v-6a2 2 0 00-2-2h-2V6a4 4 0 00-4-4zm-2 6V6a2 2 0 114 0v4H8z",clipRule:"evenodd"})}),UDe=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{d:"M10 2a4 4 0 00-4 4v4H4a2 2 0 00-2 2v6a2 2 0 002 2h12a2 2 0 002-2v-6a2 2 0 00-2-2h-2V6a4 4 0 00-4-4zm2 6V6a2 2 0 10-4 0v4h4zM4 12h12v6H4v-6z"})}),qDe=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h8a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 4a1 1 0 100 2h8a1 1 0 100-2H6zM6 12a1 1 0 100 2h4a1 1 0 100-2H6z",clipRule:"evenodd"})}),FDe=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{fillRule:"evenodd",d:"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 001.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z",clipRule:"evenodd"})}),I$=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-stone-400 hover:text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),BDe=({data:t})=>!t||t.length===0?I.jsx("p",{className:"text-stone-400 text-center py-8",children:"Нет данных для отображения."}):I.jsx(SRe,{width:"100%",height:300,children:I.jsxs(MDe,{data:t,margin:{top:5,right:20,left:-10,bottom:5},children:[I.jsx(mne,{dataKey:"label",stroke:"#a8a29e",fontSize:12,tickLine:!1,axisLine:!1}),I.jsx(gne,{stroke:"#a8a29e",fontSize:12,tickLine:!1,axisLine:!1,allowDecimals:!1}),I.jsx(mRe,{contentStyle:{backgroundColor:"#292524",border:"1px solid #57534e",borderRadius:"0.375rem"},labelStyle:{color:"#f59e0b"},itemStyle:{color:"#d6d3d1"},formatter:e=>[e,"Просмотры"]}),I.jsx(cne,{dataKey:"value",fill:"#f59e0b",radius:[4,4,0,0]})]})}),$De=({codeword:t,games:e,onUpdate:n,onDelete:r})=>{const[i,o]=M.useState(t.usedMessage),[s,a]=M.useState(t.introText||"ВАШЕ КОДОВОЕ СЛОВО:"),[u,c]=M.useState(t.note||""),[f,h]=M.useState(t.footerComponents||[]),[g,_]=M.useState(!1),[T,E]=M.useState([]),[b,S]=M.useState(!1),[C,R]=M.useState(""),[P,O]=M.useState("day"),[q,D]=M.useState(!1),[L,N]=M.useState(t.word),U=`${window.location.origin}${window.location.pathname}#/view?c=${t.id}`,V=`https://api.qrserver.com/v1/create-qr-code/?size=256x256&data=${encodeURIComponent(U)}`;M.useEffect(()=>{h(t.footerComponents||[])},[t.footerComponents]);const $=Y=>{h(Y),n(t.id,{footerComponents:Y})},F=Y=>{const G=Y==="text"?{type:"text",content:"Новый текстовый блок"}:{type:"button",text:"Перейти в Telegram",url:"https://t.me/your_username"};$([...f,G])},H=(Y,G,Q)=>{const Z=[...f];Z[Y]={...Z[Y],[G]:Q},h(Z)},X=()=>{n(t.id,{footerComponents:f})},K=Y=>{const G=f.filter((Q,Z)=>Z!==Y);$(G)},te=async()=>{S(!0),R(""),E([]);try{const Y=co(Rs(Tr,"codewords",t.id,"viewEvents"),eb("viewedAt","asc")),Q=(await xk(Y)).docs.map(J=>J.data().viewedAt.toDate());if(Q.length===0){S(!1);return}const Z={};Q.forEach(J=>{let ne="";P==="day"?ne=J.toLocaleDateString("ru-RU",{year:"2-digit",month:"2-digit",day:"2-digit"}):ne=J.toLocaleDateString("ru-RU",{year:"2-digit",month:"2-digit",day:"2-digit"})+` ${J.getHours()}:00`,Z[ne]=(Z[ne]||0)+1});const fe=Object.keys(Z).map(J=>({label:J,value:Z[J]}));E(fe)}catch(Y){console.error("Error fetching stats:",Y),R("Не удалось загрузить статистику.")}finally{S(!1)}};M.useEffect(()=>{g&&te()},[g,P]),M.useEffect(()=>{q||N(t.word)},[t.word,q]);const re=async()=>{try{const Y=await fetch(V);if(!Y.ok)throw new Error("QR code fetch failed");const G=await Y.blob(),Q=window.URL.createObjectURL(G),Z=document.createElement("a");Z.href=Q;const fe=t.word.replace(/[^a-z0-9а-яё]/gi,"_").toLowerCase();Z.setAttribute("download",`qr_${fe}.png`),document.body.appendChild(Z),Z.click(),Z.parentNode&&Z.parentNode.removeChild(Z),window.URL.revokeObjectURL(Q)}catch(Y){console.error("Failed to download QR code",Y),alert("Не удалось скачать QR-код.")}};return I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"bg-stone-800/70 border border-stone-700 p-4 rounded-md grid grid-cols-1 md:grid-cols-3 gap-4 items-start",children:[I.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2",children:[I.jsx("img",{src:V,alt:"QR Code",className:"w-36 h-36 border-2 border-stone-600 rounded-md"}),I.jsxs("button",{onClick:re,className:"flex items-center justify-center gap-2 w-full bg-stone-600 hover:bg-stone-500 text-stone-200 px-3 py-2 rounded-md text-sm transition-colors",children:[I.jsx(LDe,{}),"Скачать QR"]}),I.jsx("a",{href:U,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-amber-400 hover:text-amber-300 break-all text-center pt-1",children:U})]}),I.jsxs("div",{className:"md:col-span-2 space-y-3",children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:`introText_${t.id}`,className:"text-sm font-bold text-stone-400 block",children:"Вступительный текст:"}),I.jsx("input",{id:`introText_${t.id}`,type:"text",value:s,onChange:Y=>a(Y.target.value),onBlur:()=>n(t.id,{introText:s}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-3 py-1 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:`word_${t.id}`,className:"text-sm font-bold text-stone-400 block",children:"Кодовое слово:"}),I.jsxs("div",{className:"flex items-center gap-2 bg-stone-900 rounded-md pr-2 border border-stone-600 focus-within:border-amber-500 focus-within:ring-1 focus-within:ring-amber-500 transition-all",children:[q?I.jsx("input",{id:`word_${t.id}`,type:"text",value:L,onChange:Y=>N(Y.target.value),onBlur:()=>{L.trim()&&L.trim()!==t.word?n(t.id,{word:L.trim()}):N(t.word),D(!1)},onKeyDown:Y=>{Y.key==="Enter"&&Y.target.blur(),Y.key==="Escape"&&(N(t.word),D(!1))},className:"text-lg w-full bg-transparent p-1 px-3 font-bold text-amber-400 focus:ring-0 border-0 outline-none",autoFocus:!0}):I.jsx("p",{id:`word_${t.id}`,className:"flex-grow text-lg p-1 px-3 font-bold text-stone-100 break-words",children:t.word}),I.jsx("button",{onClick:()=>{q||N(t.word),D(!q)},className:"p-1 text-stone-400 hover:text-amber-400 transition-colors",title:q?"Заблокировать":"Редактировать кодовое слово","aria-label":q?"Заблокировать редактирование":"Редактировать кодовое слово","aria-controls":`word_${t.id}`,children:q?I.jsx(UDe,{}):I.jsx(VDe,{})})]})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:`usedMsg_${t.id}`,className:"text-sm font-bold text-stone-400 block",children:"Сообщение (если использовано):"}),I.jsx("input",{id:`usedMsg_${t.id}`,type:"text",value:i,onChange:Y=>o(Y.target.value),onBlur:()=>n(t.id,{usedMessage:i}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-3 py-1 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:`note_${t.id}`,className:"text-sm font-bold text-stone-400 block",children:"Заметка (видна только вам):"}),I.jsx("textarea",{id:`note_${t.id}`,value:u,onChange:Y=>c(Y.target.value),onBlur:()=>n(t.id,{note:u}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-3 py-1 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all h-20 resize-y",placeholder:"Любые пометки по этому коду..."})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:`questLink_${t.id}`,className:"text-sm font-bold text-stone-400 block",children:"Запустить квест перед показом:"}),I.jsxs("select",{id:`questLink_${t.id}`,value:t.questId||"",onChange:Y=>n(t.id,{questId:Y.target.value}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-3 py-1 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",children:[I.jsx("option",{value:"",children:"Квест отключен"}),e.map(Y=>I.jsx("option",{value:Y.id,children:Y.title},Y.id))]})]}),I.jsxs("div",{className:"mt-2 pt-3 border-t border-stone-700",children:[I.jsx("label",{className:"text-sm font-bold text-stone-400 block mb-2",children:"Дополнительные блоки (под кодом):"}),I.jsxs("div",{className:"space-y-3",children:[f.map((Y,G)=>I.jsxs("div",{className:"bg-stone-900/50 p-3 rounded-md border border-stone-700",children:[Y.type==="text"&&I.jsxs("div",{className:"space-y-2",children:[I.jsxs("div",{className:"flex justify-between items-center",children:[I.jsx("label",{className:"text-xs font-semibold text-stone-400",children:"Текстовый блок"}),I.jsx("button",{onClick:()=>K(G),children:I.jsx(I$,{})})]}),I.jsx("textarea",{value:Y.content,onChange:Q=>H(G,"content",Q.target.value),onBlur:X,placeholder:"Введите текст...",className:"w-full bg-stone-700 text-stone-200 border border-stone-600 rounded-md px-3 py-1 text-sm h-24 resize-y"})]}),Y.type==="button"&&I.jsxs("div",{className:"space-y-2",children:[I.jsxs("div",{className:"flex justify-between items-center",children:[I.jsx("label",{className:"text-xs font-semibold text-stone-400",children:"Кнопка-ссылка"}),I.jsx("button",{onClick:()=>K(G),children:I.jsx(I$,{})})]}),I.jsx("input",{type:"text",value:Y.text,onChange:Q=>H(G,"text",Q.target.value),onBlur:X,placeholder:"Текст на кнопке",className:"w-full bg-stone-700 text-stone-200 border border-stone-600 rounded-md px-3 py-1 text-sm"}),I.jsx("input",{type:"text",value:Y.url,onChange:Q=>H(G,"url",Q.target.value),onBlur:X,placeholder:"URL (ссылка)",className:"w-full bg-stone-700 text-stone-200 border border-stone-600 rounded-md px-3 py-1 text-sm"})]})]},G)),I.jsxs("div",{className:"flex gap-2",children:[I.jsxs("button",{onClick:()=>F("text"),className:"flex-1 flex items-center justify-center text-sm bg-stone-600 hover:bg-stone-500 text-stone-200 py-1.5 px-3 rounded-md transition-colors",children:[I.jsx(qDe,{}),"Добавить текст"]}),I.jsxs("button",{onClick:()=>F("button"),className:"flex-1 flex items-center justify-center text-sm bg-stone-600 hover:bg-stone-500 text-stone-200 py-1.5 px-3 rounded-md transition-colors",children:[I.jsx(FDe,{}),"Добавить кнопку"]})]})]})]}),I.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-stone-700 mt-3",children:[I.jsxs("label",{htmlFor:`toggle_${t.id}`,className:"flex items-center cursor-pointer",children:[I.jsxs("div",{className:"relative",children:[I.jsx("input",{type:"checkbox",id:`toggle_${t.id}`,className:"sr-only",checked:t.isUsed,onChange:()=>n(t.id,{isUsed:!t.isUsed})}),I.jsx("div",{className:`block ${t.isUsed?"bg-amber-500":"bg-stone-600"} w-14 h-8 rounded-full transition-colors`}),I.jsx("div",{className:`dot absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition-transform ${t.isUsed?"transform translate-x-6":""}`})]}),I.jsx("div",{className:"ml-3 text-stone-300 font-semibold",children:t.isUsed?"ИСПОЛЬЗОВАНО":"АКТИВНО"})]}),I.jsxs("div",{className:"flex items-center gap-2 text-stone-400",children:[I.jsxs("div",{className:"flex items-center gap-1",title:"Просмотры",children:[I.jsx(kDe,{}),I.jsx("span",{children:t.views||0})]}),I.jsxs("button",{onClick:()=>_(!0),className:"flex items-center gap-1 bg-sky-800 hover:bg-sky-700 text-stone-100 px-3 py-2 rounded-md text-sm transition-colors",children:[I.jsx(DDe,{}),"Статистика"]}),I.jsxs("button",{onClick:()=>r(t.id),className:"flex items-center gap-1 bg-red-800 hover:bg-red-700 text-stone-100 px-3 py-2 rounded-md text-sm transition-colors",children:[I.jsx(ODe,{}),"Удалить"]})]})]})]})]}),g&&I.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",onClick:()=>_(!1),role:"dialog","aria-modal":"true","aria-labelledby":"stats-modal-title",children:I.jsxs("div",{className:"bg-stone-800 border border-stone-700 rounded-lg w-full max-w-4xl max-h-[90vh] flex flex-col",onClick:Y=>Y.stopPropagation(),children:[I.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-stone-700",children:[I.jsx("h3",{id:"stats-modal-title",className:"font-display text-2xl text-amber-400",children:"Статистика просмотров"}),I.jsx("button",{onClick:()=>_(!1),className:"text-stone-400 hover:text-white text-3xl leading-none","aria-label":"Close",children:"×"})]}),I.jsxs("div",{className:"p-4 flex-grow overflow-y-auto",children:[I.jsxs("div",{className:"flex gap-2 mb-4",children:[I.jsx("button",{onClick:()=>O("day"),className:`px-4 py-2 rounded-md font-semibold ${P==="day"?"bg-amber-500 text-stone-900":"bg-stone-700 text-stone-300 hover:bg-stone-600"}`,children:"По дням"}),I.jsx("button",{onClick:()=>O("hour"),className:`px-4 py-2 rounded-md font-semibold ${P==="hour"?"bg-amber-500 text-stone-900":"bg-stone-700 text-stone-300 hover:bg-stone-600"}`,children:"По часам"})]}),b&&I.jsx("p",{className:"animate-pulse text-center py-8 font-display text-xl text-stone-400",children:"ЗАГРУЗКА СТАТИСТИКИ..."}),C&&I.jsx("p",{className:"text-red-500 text-center py-8",children:C}),!b&&!C&&I.jsx(BDe,{data:T})]})]})})]})},zDe=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),HDe=()=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[I.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),I.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]}),GDe=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})}),jDe=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),KDe=({game:t,onDelete:e})=>{var s;const n=(s=t.createdAt)==null?void 0:s.toDate().toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}),r=()=>{window.location.hash=`#/admin/quest/${t.id}`},i=()=>{window.location.hash=`#/play/${t.id}`},o=()=>{window.location.hash=`#/admin/quest/${t.id}/debug`};return I.jsxs("div",{className:"bg-stone-800/70 border border-stone-700 p-4 rounded-md flex justify-between items-center",children:[I.jsxs("div",{children:[I.jsx("h4",{className:"text-xl font-bold text-stone-100",children:t.title}),I.jsxs("div",{className:"text-sm text-stone-400 mt-1",children:[I.jsx("span",{className:`inline-block px-2 py-0.5 rounded-md mr-2 text-xs font-semibold ${t.status==="published"?"bg-green-900/50 text-green-300":"bg-sky-900/50 text-sky-300"}`,children:t.status==="published"?"Опубликован":"Черновик"}),I.jsxs("span",{children:["Создан: ",n||"N/A"]})]})]}),I.jsxs("div",{className:"flex items-center gap-2",children:[I.jsxs("button",{onClick:i,className:"flex items-center gap-1 bg-green-800 hover:bg-green-700 text-stone-100 px-3 py-2 rounded-md text-sm transition-colors",children:[I.jsx(zDe,{})," Играть"]}),I.jsxs("button",{onClick:o,className:"flex items-center gap-1 bg-purple-800 hover:bg-purple-700 text-stone-100 px-3 py-2 rounded-md text-sm transition-colors",children:[I.jsx(jDe,{})," Отладка"]}),I.jsxs("button",{onClick:r,className:"flex items-center gap-1 bg-blue-800 hover:bg-blue-700 text-stone-100 px-3 py-2 rounded-md text-sm transition-colors",children:[I.jsx(HDe,{})," Редактировать"]}),I.jsxs("button",{onClick:()=>e(t.id),className:"flex items-center gap-1 bg-red-800 hover:bg-red-700 text-stone-100 px-3 py-2 rounded-md text-sm transition-colors",children:[I.jsx(GDe,{})," Удалить"]})]})]})},WDe=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H5v-2H3v-2H1v-4a6 6 0 017.743-5.743z"})}),YDe=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),JDe=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{d:"M17 3H5a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2zm-3 12H8v-4h6v4zm2-6H5V5h12v4z"})}),XDe=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),QDe=()=>{const[t,e]=M.useState("quests"),[n,r]=M.useState([]),[i,o]=M.useState(""),[s,a]=M.useState("Этот код уже был использован."),[u,c]=M.useState("ВАШЕ КОДОВОЕ СЛОВО:"),[f,h]=M.useState([]),[g,_]=M.useState(""),[T,E]=M.useState(""),[b,S]=M.useState({type:"",text:""});M.useEffect(()=>{const N=co(Rs(Tr,"games"),eb("createdAt","desc")),U=tb(N,V=>{const $=V.docs.map(F=>({...F.data(),id:F.id}));h($)},V=>{console.error("Error fetching games:",V),alert("Не удалось загрузить квесты.")});return()=>U()},[]),M.useEffect(()=>{if(t!=="codewords"){r([]);return}const N=co(Rs(Tr,"codewords"),eb("createdAt","desc")),U=tb(N,V=>{const $=V.docs.map(F=>({...F.data(),id:F.id}));r($)},V=>{console.error("Error fetching codewords:",V),alert("Не удалось загрузить кодовые слова.")});return()=>U&&U()},[t]);const C=async N=>{if(N.preventDefault(),i.trim()!=="")try{await Gg(Rs(Tr,"codewords"),{word:i.trim(),isUsed:!1,usedMessage:s.trim()||"Этот код уже был использован.",introText:u.trim()||"ВАШЕ КОДОВОЕ СЛОВО:",note:"",questId:"",footerComponents:[],createdAt:Ia(),views:0}),o(""),c("ВАШЕ КОДОВОЕ СЛОВО:"),a("Этот код уже был использован.")}catch(U){console.error("Error adding codeword: ",U),alert("Ошибка при добавлении кода.")}},R=async(N,U)=>{try{await hh(Ui(Tr,"codewords",N),U)}catch(V){console.error("Error updating codeword: ",V),alert("Ошибка при обновлении кода.")}},P=async N=>{if(window.confirm("Вы уверены, что хотите удалить этот код? Это действие необратимо."))try{const U=co(Rs(Tr,"codewords",N,"viewEvents")),V=await xk(U),$=Dve(Tr);V.docs.forEach(F=>$.delete(F.ref)),await $.commit(),await dM(Ui(Tr,"codewords",N))}catch(U){console.error("Error deleting codeword:",U),alert("Ошибка при удалении кода.")}},O=async N=>{if(N.preventDefault(),g.trim()!=="")try{const U=`quest_${Date.now()}`;await Gg(Rs(Tr,"games"),{title:g.trim(),status:"draft",createdAt:Ia(),updatedAt:Ia(),dsl:{format:"bk-quest@1",meta:{id:U,title:g.trim(),version:1,defaultLocale:"ru"},assets:{images:{},audio:{}},state:{vars:{},inventory:[]},nodes:{start:{text:"This is the beginning."}}}}),_("")}catch(U){console.error("Error adding quest: ",U),alert("Ошибка при создании квеста.")}},q=async N=>{if(window.confirm("Вы уверены, что хотите удалить этот квест? Все его данные будут стерты навсегда."))try{await dM(Ui(Tr,"games",N))}catch(U){console.error("Error deleting quest:",U),alert("Ошибка при удалении квеста.")}},D=async N=>{if(N.preventDefault(),S({type:"",text:""}),window.confirm("Вы уверены, что хотите изменить пароль?"))try{if(!_g.currentUser)throw new Error("Пользователь не авторизован.");if(!T||T.length<6)throw new Error("Пароль должен содержать не менее 6 символов.");await _g.currentUser.updatePassword(T),S({type:"success",text:"Пароль успешно изменен!"}),E("")}catch(U){S({type:"error",text:`Ошибка: ${U.message}`})}},L=({tabName:N,label:U,children:V})=>I.jsxs("button",{onClick:()=>e(N),className:`flex items-center justify-center w-full px-4 py-3 font-display text-xl rounded-t-md transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-500
            ${t===N?"bg-stone-800/50 text-amber-400 border-b-2 border-amber-400":"bg-stone-900/50 text-stone-400 hover:bg-stone-800/50"}`,children:[V,U]});return I.jsxs("div",{className:"container mx-auto py-8 px-4",children:[I.jsxs("div",{className:"flex justify-between items-center mb-6",children:[I.jsx("h2",{className:"font-display text-4xl text-stone-200",children:"Панель управления"}),I.jsx("button",{onClick:()=>_g.signOut(),className:"bg-stone-700 hover:bg-stone-600 text-stone-200 font-semibold py-2 px-4 rounded-md transition-colors",children:"Выйти"})]}),I.jsxs("div",{className:"bg-stone-800/50 border border-stone-700 p-6 rounded-md mb-8",children:[I.jsx("h3",{className:"font-display text-2xl text-amber-400 mb-4",children:"Изменить пароль"}),I.jsxs("form",{onSubmit:D,className:"space-y-4",children:[I.jsx("input",{type:"password",value:T,onChange:N=>E(N.target.value),placeholder:"Новый пароль (минимум 6 символов)",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),I.jsxs("button",{type:"submit",className:"w-full flex items-center justify-center font-display text-xl bg-amber-500 text-stone-900 py-2 rounded-md hover:bg-amber-400 transition-colors",children:[I.jsx(JDe,{})," Сохранить пароль"]}),b.text&&I.jsx("p",{className:b.type==="success"?"text-green-400":"text-red-500",children:b.text})]})]}),I.jsxs("div",{className:"flex mb-[-1px]",children:[I.jsx(L,{tabName:"quests",label:"Квесты",children:I.jsx(YDe,{})}),I.jsx(L,{tabName:"codewords",label:"Кодовые слова",children:I.jsx(WDe,{})})]}),I.jsxs("div",{className:"bg-stone-800/50 border border-stone-700 p-6 rounded-b-md rounded-tr-md",children:[t==="codewords"&&I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"mb-8",children:[I.jsx("h3",{className:"font-display text-2xl text-amber-400 mb-4",children:"Добавить новый код"}),I.jsxs("form",{onSubmit:C,className:"space-y-4",children:[I.jsx("input",{type:"text",value:u,onChange:N=>c(N.target.value),placeholder:"Вступительный текст (обращение)",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),I.jsx("input",{type:"text",value:i,onChange:N=>o(N.target.value),placeholder:"Новое кодовое слово",required:!0,className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),I.jsx("input",{type:"text",value:s,onChange:N=>a(N.target.value),placeholder:"Сообщение если код использован",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),I.jsx("button",{type:"submit",className:"w-full font-display text-xl bg-amber-500 text-stone-900 py-2 rounded-md hover:bg-amber-400 transition-colors",children:"Создать QR-код"})]})]}),I.jsx("div",{className:"space-y-4",children:n.map(N=>I.jsx($De,{codeword:N,games:f,onUpdate:R,onDelete:P},N.id))})]}),t==="quests"&&I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"mb-8",children:[I.jsx("h3",{className:"font-display text-2xl text-amber-400 mb-4",children:"Создать новый квест"}),I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[I.jsxs("form",{onSubmit:O,className:"flex-grow flex gap-4",children:[I.jsx("input",{type:"text",value:g,onChange:N=>_(N.target.value),placeholder:"Название квеста",required:!0,className:"flex-grow bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),I.jsx("button",{type:"submit",className:"font-display text-xl bg-amber-500 text-stone-900 py-2 px-6 rounded-md hover:bg-amber-400 transition-colors",children:"Создать"})]}),I.jsxs("a",{href:"/#/admin/architect",className:"w-full flex items-center justify-center font-display text-xl bg-sky-600 text-white py-2 px-6 rounded-md hover:bg-sky-500 transition-colors",children:[I.jsx(XDe,{})," AI-Сценарист"]})]})]}),I.jsx("div",{className:"space-y-4",children:f.length>0?f.map(N=>I.jsx(KDe,{game:N,onDelete:q},N.id)):I.jsx("p",{className:"text-stone-400 text-center py-4",children:"Квесты еще не созданы."})})]})]})]})},Cne=(t,e)=>{const[n,r]=M.useState(null),[i,o]=M.useState("start"),[s,a]=M.useState(!1),u=M.useRef(!1),c=M.useCallback(b=>!b||!t?"":typeof b=="string"?b:b[t.meta.defaultLocale||"ru"]||Object.values(b)[0]||"",[t]),f=M.useCallback((b,S)=>{if(!b)return!0;if(b.all)return b.all.every(P=>f(P,S));if(b.any)return b.any.some(P=>f(P,S));if(b.not)return!f(b.not,S);const{vars:C,inventory:R}=S;return b.hp_eq!==void 0?C.hp===b.hp_eq:b.hp_gt!==void 0?C.hp>b.hp_gt:b.hp_gte!==void 0?C.hp>=b.hp_gte:b.hp_lt!==void 0?C.hp<b.hp_lt:b.hp_lte!==void 0?C.hp<=b.hp_lte:b.has_item?R.includes(b.has_item):b.missing_item?!R.includes(b.missing_item):b.var_eq?Array.isArray(b.var_eq)?b.var_eq.every(P=>C[P.key]===P.value):Object.entries(b.var_eq).every(([P,O])=>C[P]===O):b.var_neq?Array.isArray(b.var_neq)?b.var_neq.every(P=>C[P.key]!==P.value):Object.entries(b.var_neq).every(([P,O])=>C[P]!==O):!0},[]),h=M.useCallback((b,S)=>{if(!b)return S;const C=JSON.parse(JSON.stringify(S));return b.forEach(R=>{R.add&&(Array.isArray(R.add)?R.add.forEach(P=>{C.vars[P.key]=(C.vars[P.key]||0)+P.value}):Object.entries(R.add).forEach(([P,O])=>{C.vars[P]=(C.vars[P]||0)+O})),R.set&&(Array.isArray(R.set)?R.set.forEach(P=>{C.vars[P.key]=P.value}):Object.entries(R.set).forEach(([P,O])=>{C.vars[P]=O})),R.inv_add&&!C.inventory.includes(R.inv_add)&&C.inventory.push(R.inv_add),R.inv_remove&&(C.inventory=C.inventory.filter(P=>P!==R.inv_remove))}),C},[]);M.useEffect(()=>{if(t&&e&&!u.current){const b=localStorage.getItem(`quest-save-${e}`);if(b)try{const{playerState:S,currentNodeId:C}=JSON.parse(b);r(S),o(C)}catch{r(JSON.parse(JSON.stringify(t.state))),o("start")}else r(JSON.parse(JSON.stringify(t.state))),o("start");a(!0),u.current=!0}else t||(u.current=!1,a(!1))},[t,e]),M.useEffect(()=>{if(t&&n&&s&&e){const b={playerState:n,currentNodeId:i};localStorage.setItem(`quest-save-${e}`,JSON.stringify(b))}},[n,i,e,t,s]);const g=t==null?void 0:t.nodes[i];M.useEffect(()=>{if(!g||!n)return;const b=h(g.effects,n);let S=!1;if(g.branch){for(const C of g.branch)if(f(C.when,b)){o(C.to),S=!0;break}}!S&&g.fallback&&(o(g.fallback),S=!0),!S&&JSON.stringify(b)!==JSON.stringify(n)&&r(b)},[i,t,n,h,f]);const _=b=>{if(!n)return;const S=h(b.effects,n);r(S),o(b.to)},T=M.useCallback(b=>{if(!e||!t)return;const S=()=>{localStorage.removeItem(`quest-save-${e}`),r(JSON.parse(JSON.stringify(t.state))),o("start")};b?window.confirm("Вы уверены, что хотите начать квест заново? Весь прогресс будет потерян.")&&S():S()},[e,t]),E=M.useMemo(()=>{var b;return((b=g==null?void 0:g.choices)==null?void 0:b.filter(S=>f(S.when,n)))||[]},[g,n,f]);return{currentNode:g,playerState:n,setPlayerState:r,currentNodeId:i,setCurrentNodeId:o,visibleChoices:E,handleChoice:_,handleRestart:T,resolveText:c,isInitialized:s}},ZDe=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 110 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})}),a2=({questId:t,onWin:e})=>{const{questId:n}=O2(),r=t||n,[i,o]=M.useState(null),[s,a]=M.useState(!0),[u,c]=M.useState(""),{currentNode:f,playerState:h,visibleChoices:g,handleChoice:_,handleRestart:T,resolveText:E,isInitialized:b}=Cne((i==null?void 0:i.dsl)??null,r??"");if(M.useEffect(()=>{if(!r){c("Квест не найден."),a(!1);return}a(!0),c("");const C=Ui(Tr,"games",r);Dy(C).then(R=>{if(R.exists()){const P={id:R.id,...R.data()};o(P)}else c("Квест не найден.");a(!1)}).catch(R=>{console.error("Error fetching quest:",R),c("Ошибка при загрузке квеста."),a(!1)})},[r]),M.useEffect(()=>{var C;((C=f==null?void 0:f.end)==null?void 0:C.type)==="win"&&e&&(T(!1),e())},[f,e,T]),s)return I.jsx("div",{className:"text-center p-8 font-display text-4xl text-stone-400 animate-pulse",children:"ЗАГРУЗКА КВЕСТА..."});if(u)return I.jsx("div",{className:"text-center p-8 text-2xl text-red-500",children:u});if(!i||!b||!h||!f)return I.jsx("div",{className:"text-center p-8 text-2xl text-stone-400",children:"Инициализация..."});const S=f.bg&&i.dsl.assets.images[f.bg]?i.dsl.assets.images[f.bg]:void 0;return I.jsx("div",{className:"min-h-screen w-full flex items-center justify-center p-4 md:p-8",children:I.jsx("div",{className:"w-full max-w-4xl bg-cover bg-center rounded-lg shadow-2xl shadow-black/50 overflow-hidden border-2 border-stone-800",style:{backgroundImage:S?`url(${S})`:"none",backgroundColor:"#1c1917",minHeight:"70vh"},children:I.jsxs("div",{className:"bg-stone-900/80 backdrop-blur-sm p-6 md:p-8 flex flex-col h-full text-stone-200",children:[I.jsxs("div",{className:"flex items-center justify-between gap-4 mb-6 border-b border-stone-700 pb-4 text-sm",children:[I.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1",children:[Object.keys(h.vars).length>0&&Object.keys(h.vars).map(C=>I.jsxs("span",{className:"font-bold text-amber-400",children:[C.toUpperCase(),": ",I.jsx("span",{className:"font-normal text-stone-200",children:h.vars[C]??0})]},C)),h.inventory.length>0&&I.jsxs("div",{className:"flex items-center gap-2",children:[I.jsx("span",{className:"font-bold text-amber-400",children:"ИНВЕНТАРЬ:"}),I.jsx("span",{className:"text-stone-200",children:h.inventory.join(", ")})]})]}),I.jsxs("button",{onClick:()=>T(!0),className:"flex items-center justify-center font-display text-lg bg-stone-700 text-stone-200 py-2 px-4 rounded-md hover:bg-stone-600 transition-colors flex-shrink-0",children:[I.jsx(ZDe,{}),"ЗАНОВО"]})]}),I.jsxs("div",{className:"flex-grow",children:[I.jsx("h2",{className:"font-display text-3xl md:text-4xl text-amber-400 mb-4",children:E(f.title)}),I.jsx("p",{className:"text-stone-300 whitespace-pre-wrap leading-relaxed mb-6",children:E(f.text)}),f.end&&!e&&I.jsxs("div",{className:"text-center py-4 border-t border-stone-700 mt-6",children:[I.jsx("h3",{className:`font-display text-4xl ${f.end.type==="win"?"text-lime-400":"text-red-500"}`,children:f.end.type==="win"?"Победа!":"Конец игры"}),I.jsx("p",{className:"mt-4 text-stone-300",children:E(f.end.message)})]}),!f.end&&I.jsx("div",{className:"flex flex-col space-y-3",children:g.map((C,R)=>I.jsx("button",{onClick:()=>_(C),className:"text-left w-full p-4 bg-stone-800/70 border border-stone-600 rounded-md hover:bg-amber-500 hover:border-amber-400 hover:text-stone-900 transition-all text-stone-200 font-semibold",children:E(C.label)},R))})]})]})})})},eke=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),tke=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),nke=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 24 24",fill:"currentColor",children:I.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.64 6.78l-1.44 6.84c-.12.56-.51.7-.97.44l-2.22-1.64-1.08 1.04c-.12.12-.22.22-.44.22l.16-2.28 4.2-3.82c.18-.16-.04-.26-.28-.1l-5.16 3.2-2.18-.68c-.56-.18-.58-.54.1-.78l8.4-3.26c.48-.18.9.22.74.84z"})}),R$=({codeId:t})=>{const[e,n]=M.useState(null),[r,i]=M.useState("loading"),[o,s]=M.useState(!1),[a,u]=M.useState(!1),c=Gs();M.useEffect(()=>{const h=new URLSearchParams(c.search||c.hash.split("?")[1]),g=t||h.get("c");if(g){const _=Ui(Tr,"codewords",g);(async()=>{try{const E=await Dy(_);if(E.exists()){const b={id:E.id,...E.data()};n(b),i("found");const S=`viewed-${g}`;sessionStorage.getItem(S)||(await hh(_,{views:CX(1)}),await Gg(Rs(_,"viewEvents"),{viewedAt:Ia()}),sessionStorage.setItem(S,"true"))}else i("not-found")}catch(E){console.error("Failed to fetch codeword from Firestore:",E),i("error")}})()}else i("not-found")},[c,t]);const f=()=>{e&&!e.isUsed&&(navigator.clipboard.writeText(e.word),s(!0),setTimeout(()=>s(!1),2e3))};return r==="loading"?I.jsx("div",{className:"flex items-center justify-center min-h-[80vh]",children:I.jsx("p",{className:"font-display text-2xl text-stone-400 animate-pulse",children:"ПОИСК ДАННЫХ..."})}):r==="not-found"||r==="error"?I.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] text-center p-4",children:[I.jsx("h2",{className:"font-display text-6xl text-red-500",children:"404"}),I.jsx("p",{className:"text-stone-300 text-xl mt-2",children:"Код не найден."}),I.jsx("p",{className:"text-stone-500",children:"Возможно, ссылка неверна или код был удален."})]}):e!=null&&e.isUsed?I.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] text-center p-4",children:[I.jsx("h2",{className:"font-display text-5xl text-amber-500",children:"КОД ИСПОЛЬЗОВАН"}),I.jsx("p",{className:"text-stone-300 text-xl mt-4 max-w-lg",children:e.usedMessage})]}):e!=null&&e.questId&&!a?I.jsx(a2,{questId:e.questId,onWin:()=>u(!0)}):I.jsx("div",{className:"flex flex-col items-center justify-center min-h-[80vh] text-center p-4",children:I.jsxs("div",{className:"w-full max-w-2xl bg-stone-800/50 border-2 border-stone-700 p-8 rounded-lg shadow-2xl shadow-black/50",children:[a&&I.jsx("p",{className:"font-display text-2xl text-lime-400 mb-4 tracking-wider",children:"КВЕСТ ПРОЙДЕН!"}),I.jsx("p",{className:"text-stone-400 font-display text-2xl tracking-wide",children:(e==null?void 0:e.introText)||"ВАШЕ КОДОВОЕ СЛОВО:"}),I.jsx("p",{className:"text-amber-400 font-bold text-3xl md:text-5xl my-4 break-words select-all tracking-widest",children:e==null?void 0:e.word}),I.jsxs("button",{onClick:f,className:"w-full flex items-center justify-center gap-3 mt-6 bg-stone-700 hover:bg-amber-500 hover:text-stone-900 text-stone-200 font-display text-2xl py-3 rounded-md transition-all duration-300",children:[o?I.jsx(tke,{}):I.jsx(eke,{}),o?"СКОПИРОВАНО!":"СКОПИРОВАТЬ КОД"]}),(e==null?void 0:e.footerComponents)&&e.footerComponents.length>0&&I.jsx("div",{className:"mt-8 pt-6 border-t-2 border-stone-600 space-y-5 w-full",children:e.footerComponents.map((h,g)=>{if(h.type==="text"&&h.content)return I.jsx("p",{className:"text-stone-300 text-base whitespace-pre-wrap text-center",children:h.content},g);if(h.type==="button"&&h.text&&h.url){const _=h.url.includes("t.me");return I.jsxs("a",{href:h.url,target:"_blank",rel:"noopener noreferrer",className:"w-full flex items-center justify-center gap-3 bg-sky-600 hover:bg-sky-500 text-white font-display text-2xl py-3 rounded-md transition-all duration-300 no-underline",children:[_&&I.jsx(nke,{}),h.text]},g)}return null})})]})})};function Mr(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=Mr(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}const rke={},P$=t=>{let e;const n=new Set,r=(f,h)=>{const g=typeof f=="function"?f(e):f;if(!Object.is(g,e)){const _=e;e=h??(typeof g!="object"||g===null)?g:Object.assign({},e,g),n.forEach(T=>T(e,_))}},i=()=>e,u={setState:r,getState:i,getInitialState:()=>c,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{(rke?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(r,i,u);return u},ike=t=>t?P$(t):P$,{useDebugValue:oke}=ge,{useSyncExternalStoreWithSelector:ske}=swe,ake=t=>t;function Ine(t,e=ake,n){const r=ske(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return oke(r),r}const N$=(t,e)=>{const n=ike(t),r=(i,o=e)=>Ine(n,i,o);return Object.assign(r,n),r},lke=(t,e)=>t?N$(t,e):N$;function pr(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,i]of t)if(!Object.is(i,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}var uke={value:()=>{}};function bE(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new w_(n)}function w_(t){this._=t}function cke(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}w_.prototype=bE.prototype={constructor:w_,on:function(t,e){var n=this._,r=cke(t+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(t=r[o]).type)&&(i=fke(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(i=(t=r[o]).type)n[i]=M$(n[i],t.name,e);else if(e==null)for(i in n)n[i]=M$(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new w_(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function fke(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function M$(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=uke,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var l2="http://www.w3.org/1999/xhtml";const D$={svg:"http://www.w3.org/2000/svg",xhtml:l2,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function wE(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),D$.hasOwnProperty(e)?{space:D$[e],local:t}:t}function dke(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===l2&&e.documentElement.namespaceURI===l2?e.createElement(t):e.createElementNS(n,t)}}function hke(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Rne(t){var e=wE(t);return(e.local?hke:dke)(e)}function pke(){}function sL(t){return t==null?pke:function(){return this.querySelector(t)}}function mke(t){typeof t!="function"&&(t=sL(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=new Array(s),u,c,f=0;f<s;++f)(u=o[f])&&(c=t.call(u,u.__data__,f,o))&&("__data__"in u&&(c.__data__=u.__data__),a[f]=c);return new zi(r,this._parents)}function gke(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function yke(){return[]}function Pne(t){return t==null?yke:function(){return this.querySelectorAll(t)}}function vke(t){return function(){return gke(t.apply(this,arguments))}}function _ke(t){typeof t=="function"?t=vke(t):t=Pne(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var s=e[o],a=s.length,u,c=0;c<a;++c)(u=s[c])&&(r.push(t.call(u,u.__data__,c,s)),i.push(u));return new zi(r,i)}function Nne(t){return function(){return this.matches(t)}}function Mne(t){return function(e){return e.matches(t)}}var bke=Array.prototype.find;function wke(t){return function(){return bke.call(this.children,t)}}function Eke(){return this.firstElementChild}function Tke(t){return this.select(t==null?Eke:wke(typeof t=="function"?t:Mne(t)))}var xke=Array.prototype.filter;function Ske(){return Array.from(this.children)}function Ake(t){return function(){return xke.call(this.children,t)}}function Cke(t){return this.selectAll(t==null?Ske:Ake(typeof t=="function"?t:Mne(t)))}function Ike(t){typeof t!="function"&&(t=Nne(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=[],u,c=0;c<s;++c)(u=o[c])&&t.call(u,u.__data__,c,o)&&a.push(u);return new zi(r,this._parents)}function Dne(t){return new Array(t.length)}function Rke(){return new zi(this._enter||this._groups.map(Dne),this._parents)}function Bb(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Bb.prototype={constructor:Bb,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Pke(t){return function(){return t}}function Nke(t,e,n,r,i,o){for(var s=0,a,u=e.length,c=o.length;s<c;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new Bb(t,o[s]);for(;s<u;++s)(a=e[s])&&(i[s]=a)}function Mke(t,e,n,r,i,o,s){var a,u,c=new Map,f=e.length,h=o.length,g=new Array(f),_;for(a=0;a<f;++a)(u=e[a])&&(g[a]=_=s.call(u,u.__data__,a,e)+"",c.has(_)?i[a]=u:c.set(_,u));for(a=0;a<h;++a)_=s.call(t,o[a],a,o)+"",(u=c.get(_))?(r[a]=u,u.__data__=o[a],c.delete(_)):n[a]=new Bb(t,o[a]);for(a=0;a<f;++a)(u=e[a])&&c.get(g[a])===u&&(i[a]=u)}function Dke(t){return t.__data__}function kke(t,e){if(!arguments.length)return Array.from(this,Dke);var n=e?Mke:Nke,r=this._parents,i=this._groups;typeof t!="function"&&(t=Pke(t));for(var o=i.length,s=new Array(o),a=new Array(o),u=new Array(o),c=0;c<o;++c){var f=r[c],h=i[c],g=h.length,_=Oke(t.call(f,f&&f.__data__,c,r)),T=_.length,E=a[c]=new Array(T),b=s[c]=new Array(T),S=u[c]=new Array(g);n(f,h,E,b,S,_,e);for(var C=0,R=0,P,O;C<T;++C)if(P=E[C]){for(C>=R&&(R=C+1);!(O=b[R])&&++R<T;);P._next=O||null}}return s=new zi(s,r),s._enter=a,s._exit=u,s}function Oke(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Lke(){return new zi(this._exit||this._groups.map(Dne),this._parents)}function Vke(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Uke(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),u=0;u<s;++u)for(var c=n[u],f=r[u],h=c.length,g=a[u]=new Array(h),_,T=0;T<h;++T)(_=c[T]||f[T])&&(g[T]=_);for(;u<i;++u)a[u]=n[u];return new zi(a,this._parents)}function qke(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function Fke(t){t||(t=Bke);function e(h,g){return h&&g?t(h.__data__,g.__data__):!h-!g}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,u=i[o]=new Array(a),c,f=0;f<a;++f)(c=s[f])&&(u[f]=c);u.sort(e)}return new zi(i,this._parents).order()}function Bke(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function $ke(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function zke(){return Array.from(this)}function Hke(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function Gke(){let t=0;for(const e of this)++t;return t}function jke(){return!this.node()}function Kke(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&t.call(a,a.__data__,o,i);return this}function Wke(t){return function(){this.removeAttribute(t)}}function Yke(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Jke(t,e){return function(){this.setAttribute(t,e)}}function Xke(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Qke(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Zke(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function eOe(t,e){var n=wE(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Yke:Wke:typeof e=="function"?n.local?Zke:Qke:n.local?Xke:Jke)(n,e))}function kne(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function tOe(t){return function(){this.style.removeProperty(t)}}function nOe(t,e,n){return function(){this.style.setProperty(t,e,n)}}function rOe(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function iOe(t,e,n){return arguments.length>1?this.each((e==null?tOe:typeof e=="function"?rOe:nOe)(t,e,n??"")):Ah(this.node(),t)}function Ah(t,e){return t.style.getPropertyValue(e)||kne(t).getComputedStyle(t,null).getPropertyValue(e)}function oOe(t){return function(){delete this[t]}}function sOe(t,e){return function(){this[t]=e}}function aOe(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function lOe(t,e){return arguments.length>1?this.each((e==null?oOe:typeof e=="function"?aOe:sOe)(t,e)):this.node()[t]}function One(t){return t.trim().split(/^|\s+/)}function aL(t){return t.classList||new Lne(t)}function Lne(t){this._node=t,this._names=One(t.getAttribute("class")||"")}Lne.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Vne(t,e){for(var n=aL(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Une(t,e){for(var n=aL(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function uOe(t){return function(){Vne(this,t)}}function cOe(t){return function(){Une(this,t)}}function fOe(t,e){return function(){(e.apply(this,arguments)?Vne:Une)(this,t)}}function dOe(t,e){var n=One(t+"");if(arguments.length<2){for(var r=aL(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?fOe:e?uOe:cOe)(n,e))}function hOe(){this.textContent=""}function pOe(t){return function(){this.textContent=t}}function mOe(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function gOe(t){return arguments.length?this.each(t==null?hOe:(typeof t=="function"?mOe:pOe)(t)):this.node().textContent}function yOe(){this.innerHTML=""}function vOe(t){return function(){this.innerHTML=t}}function _Oe(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function bOe(t){return arguments.length?this.each(t==null?yOe:(typeof t=="function"?_Oe:vOe)(t)):this.node().innerHTML}function wOe(){this.nextSibling&&this.parentNode.appendChild(this)}function EOe(){return this.each(wOe)}function TOe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function xOe(){return this.each(TOe)}function SOe(t){var e=typeof t=="function"?t:Rne(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function AOe(){return null}function COe(t,e){var n=typeof t=="function"?t:Rne(t),r=e==null?AOe:typeof e=="function"?e:sL(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function IOe(){var t=this.parentNode;t&&t.removeChild(this)}function ROe(){return this.each(IOe)}function POe(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function NOe(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function MOe(t){return this.select(t?NOe:POe)}function DOe(t){return arguments.length?this.property("__data__",t):this.node().__data__}function kOe(t){return function(e){t.call(this,e,this.__data__)}}function OOe(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function LOe(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function VOe(t,e,n){return function(){var r=this.__on,i,o=kOe(e);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function UOe(t,e,n){var r=OOe(t+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,c=a.length,f;u<c;++u)for(i=0,f=a[u];i<o;++i)if((s=r[i]).type===f.type&&s.name===f.name)return f.value}return}for(a=e?VOe:LOe,i=0;i<o;++i)this.each(a(r[i],e,n));return this}function qne(t,e,n){var r=kne(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function qOe(t,e){return function(){return qne(this,t,e)}}function FOe(t,e){return function(){return qne(this,t,e.apply(this,arguments))}}function BOe(t,e){return this.each((typeof e=="function"?FOe:qOe)(t,e))}function*$Oe(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var Fne=[null];function zi(t,e){this._groups=t,this._parents=e}function Jy(){return new zi([[document.documentElement]],Fne)}function zOe(){return this}zi.prototype=Jy.prototype={constructor:zi,select:mke,selectAll:_ke,selectChild:Tke,selectChildren:Cke,filter:Ike,data:kke,enter:Rke,exit:Lke,join:Vke,merge:Uke,selection:zOe,order:qke,sort:Fke,call:$ke,nodes:zke,node:Hke,size:Gke,empty:jke,each:Kke,attr:eOe,style:iOe,property:lOe,classed:dOe,text:gOe,html:bOe,raise:EOe,lower:xOe,append:SOe,insert:COe,remove:ROe,clone:MOe,datum:DOe,on:UOe,dispatch:BOe,[Symbol.iterator]:$Oe};function ho(t){return typeof t=="string"?new zi([[document.querySelector(t)]],[document.documentElement]):new zi([[t]],Fne)}function HOe(t){let e;for(;e=t.sourceEvent;)t=e;return t}function $o(t,e){if(t=HOe(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const GOe={passive:!1},ry={capture:!0,passive:!1};function XA(t){t.stopImmediatePropagation()}function Fd(t){t.preventDefault(),t.stopImmediatePropagation()}function Bne(t){var e=t.document.documentElement,n=ho(t).on("dragstart.drag",Fd,ry);"onselectstart"in e?n.on("selectstart.drag",Fd,ry):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function $ne(t,e){var n=t.document.documentElement,r=ho(t).on("dragstart.drag",null);e&&(r.on("click.drag",Fd,ry),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const W0=t=>()=>t;function u2(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:o,x:s,y:a,dx:u,dy:c,dispatch:f}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:f}})}u2.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function jOe(t){return!t.ctrlKey&&!t.button}function KOe(){return this.parentNode}function WOe(t,e){return e??{x:t.x,y:t.y}}function YOe(){return navigator.maxTouchPoints||"ontouchstart"in this}function JOe(){var t=jOe,e=KOe,n=WOe,r=YOe,i={},o=bE("start","drag","end"),s=0,a,u,c,f,h=0;function g(P){P.on("mousedown.drag",_).filter(r).on("touchstart.drag",b).on("touchmove.drag",S,GOe).on("touchend.drag touchcancel.drag",C).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function _(P,O){if(!(f||!t.call(this,P,O))){var q=R(this,e.call(this,P,O),P,O,"mouse");q&&(ho(P.view).on("mousemove.drag",T,ry).on("mouseup.drag",E,ry),Bne(P.view),XA(P),c=!1,a=P.clientX,u=P.clientY,q("start",P))}}function T(P){if(Fd(P),!c){var O=P.clientX-a,q=P.clientY-u;c=O*O+q*q>h}i.mouse("drag",P)}function E(P){ho(P.view).on("mousemove.drag mouseup.drag",null),$ne(P.view,c),Fd(P),i.mouse("end",P)}function b(P,O){if(t.call(this,P,O)){var q=P.changedTouches,D=e.call(this,P,O),L=q.length,N,U;for(N=0;N<L;++N)(U=R(this,D,P,O,q[N].identifier,q[N]))&&(XA(P),U("start",P,q[N]))}}function S(P){var O=P.changedTouches,q=O.length,D,L;for(D=0;D<q;++D)(L=i[O[D].identifier])&&(Fd(P),L("drag",P,O[D]))}function C(P){var O=P.changedTouches,q=O.length,D,L;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),D=0;D<q;++D)(L=i[O[D].identifier])&&(XA(P),L("end",P,O[D]))}function R(P,O,q,D,L,N){var U=o.copy(),V=$o(N||q,O),$,F,H;if((H=n.call(P,new u2("beforestart",{sourceEvent:q,target:g,identifier:L,active:s,x:V[0],y:V[1],dx:0,dy:0,dispatch:U}),D))!=null)return $=H.x-V[0]||0,F=H.y-V[1]||0,function X(K,te,re){var Y=V,G;switch(K){case"start":i[L]=X,G=s++;break;case"end":delete i[L],--s;case"drag":V=$o(re||te,O),G=s;break}U.call(K,P,new u2(K,{sourceEvent:te,subject:H,target:g,identifier:L,active:G,x:V[0]+$,y:V[1]+F,dx:V[0]-Y[0],dy:V[1]-Y[1],dispatch:U}),D)}}return g.filter=function(P){return arguments.length?(t=typeof P=="function"?P:W0(!!P),g):t},g.container=function(P){return arguments.length?(e=typeof P=="function"?P:W0(P),g):e},g.subject=function(P){return arguments.length?(n=typeof P=="function"?P:W0(P),g):n},g.touchable=function(P){return arguments.length?(r=typeof P=="function"?P:W0(!!P),g):r},g.on=function(){var P=o.on.apply(o,arguments);return P===o?g:P},g.clickDistance=function(P){return arguments.length?(h=(P=+P)*P,g):Math.sqrt(h)},g}var Ch=0,Xm=0,Om=0,zne=1e3,$b,Qm,zb=0,sf=0,EE=0,iy=typeof performance=="object"&&performance.now?performance:Date,Hne=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function lL(){return sf||(Hne(XOe),sf=iy.now()+EE)}function XOe(){sf=0}function Hb(){this._call=this._time=this._next=null}Hb.prototype=Gne.prototype={constructor:Hb,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?lL():+n)+(e==null?0:+e),!this._next&&Qm!==this&&(Qm?Qm._next=this:$b=this,Qm=this),this._call=t,this._time=n,c2()},stop:function(){this._call&&(this._call=null,this._time=1/0,c2())}};function Gne(t,e,n){var r=new Hb;return r.restart(t,e,n),r}function QOe(){lL(),++Ch;for(var t=$b,e;t;)(e=sf-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Ch}function k$(){sf=(zb=iy.now())+EE,Ch=Xm=0;try{QOe()}finally{Ch=0,eLe(),sf=0}}function ZOe(){var t=iy.now(),e=t-zb;e>zne&&(EE-=e,zb=t)}function eLe(){for(var t,e=$b,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:$b=n);Qm=t,c2(r)}function c2(t){if(!Ch){Xm&&(Xm=clearTimeout(Xm));var e=t-sf;e>24?(t<1/0&&(Xm=setTimeout(k$,t-iy.now()-EE)),Om&&(Om=clearInterval(Om))):(Om||(zb=iy.now(),Om=setInterval(ZOe,zne)),Ch=1,Hne(k$))}}function O$(t,e,n){var r=new Hb;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var tLe=bE("start","end","cancel","interrupt"),nLe=[],jne=0,L$=1,f2=2,E_=3,V$=4,d2=5,T_=6;function TE(t,e,n,r,i,o){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;rLe(t,n,{name:e,index:r,group:i,on:tLe,tween:nLe,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:jne})}function uL(t,e){var n=is(t,e);if(n.state>jne)throw new Error("too late; already scheduled");return n}function js(t,e){var n=is(t,e);if(n.state>E_)throw new Error("too late; already running");return n}function is(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function rLe(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Gne(o,0,n.time);function o(c){n.state=L$,n.timer.restart(s,n.delay,n.time),n.delay<=c&&s(c-n.delay)}function s(c){var f,h,g,_;if(n.state!==L$)return u();for(f in r)if(_=r[f],_.name===n.name){if(_.state===E_)return O$(s);_.state===V$?(_.state=T_,_.timer.stop(),_.on.call("interrupt",t,t.__data__,_.index,_.group),delete r[f]):+f<e&&(_.state=T_,_.timer.stop(),_.on.call("cancel",t,t.__data__,_.index,_.group),delete r[f])}if(O$(function(){n.state===E_&&(n.state=V$,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=f2,n.on.call("start",t,t.__data__,n.index,n.group),n.state===f2){for(n.state=E_,i=new Array(g=n.tween.length),f=0,h=-1;f<g;++f)(_=n.tween[f].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=_);i.length=h+1}}function a(c){for(var f=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(u),n.state=d2,1),h=-1,g=i.length;++h<g;)i[h].call(t,f);n.state===d2&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=T_,n.timer.stop(),delete r[e];for(var c in r)return;delete t.__transition}}function x_(t,e){var n=t.__transition,r,i,o=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((r=n[s]).name!==e){o=!1;continue}i=r.state>f2&&r.state<d2,r.state=T_,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[s]}o&&delete t.__transition}}function iLe(t){return this.each(function(){x_(this,t)})}function oLe(t,e){var n,r;return function(){var i=js(this,t),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function sLe(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=js(this,t),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:e,value:n},u=0,c=i.length;u<c;++u)if(i[u].name===e){i[u]=a;break}u===c&&i.push(a)}o.tween=i}}function aLe(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=is(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((e==null?oLe:sLe)(n,t,e))}function cL(t,e,n){var r=t._id;return t.each(function(){var i=js(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return is(i,r).value[e]}}function Kne(t,e){var n;return(typeof e=="number"?zo:e instanceof nf?Tb:(n=nf(e))?(e=n,Tb):DZ)(t,e)}function lLe(t){return function(){this.removeAttribute(t)}}function uLe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function cLe(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttribute(t);return s===i?null:s===r?o:o=e(r=s,n)}}function fLe(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?o:o=e(r=s,n)}}function dLe(t,e,n){var r,i,o;return function(){var s,a=n(this),u;return a==null?void this.removeAttribute(t):(s=this.getAttribute(t),u=a+"",s===u?null:s===r&&u===i?o:(i=u,o=e(r=s,a)))}}function hLe(t,e,n){var r,i,o;return function(){var s,a=n(this),u;return a==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),u=a+"",s===u?null:s===r&&u===i?o:(i=u,o=e(r=s,a)))}}function pLe(t,e){var n=wE(t),r=n==="transform"?ESe:Kne;return this.attrTween(t,typeof e=="function"?(n.local?hLe:dLe)(n,r,cL(this,"attr."+t,e)):e==null?(n.local?uLe:lLe)(n):(n.local?fLe:cLe)(n,r,e))}function mLe(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function gLe(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function yLe(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&gLe(t,o)),n}return i._value=e,i}function vLe(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&mLe(t,o)),n}return i._value=e,i}function _Le(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=wE(t);return this.tween(n,(r.local?yLe:vLe)(r,e))}function bLe(t,e){return function(){uL(this,t).delay=+e.apply(this,arguments)}}function wLe(t,e){return e=+e,function(){uL(this,t).delay=e}}function ELe(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?bLe:wLe)(e,t)):is(this.node(),e).delay}function TLe(t,e){return function(){js(this,t).duration=+e.apply(this,arguments)}}function xLe(t,e){return e=+e,function(){js(this,t).duration=e}}function SLe(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?TLe:xLe)(e,t)):is(this.node(),e).duration}function ALe(t,e){if(typeof e!="function")throw new Error;return function(){js(this,t).ease=e}}function CLe(t){var e=this._id;return arguments.length?this.each(ALe(e,t)):is(this.node(),e).ease}function ILe(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;js(this,t).ease=n}}function RLe(t){if(typeof t!="function")throw new Error;return this.each(ILe(this._id,t))}function PLe(t){typeof t!="function"&&(t=Nne(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=[],u,c=0;c<s;++c)(u=o[c])&&t.call(u,u.__data__,c,o)&&a.push(u);return new za(r,this._parents,this._name,this._id)}function NLe(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var u=e[a],c=n[a],f=u.length,h=s[a]=new Array(f),g,_=0;_<f;++_)(g=u[_]||c[_])&&(h[_]=g);for(;a<r;++a)s[a]=e[a];return new za(s,this._parents,this._name,this._id)}function MLe(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function DLe(t,e,n){var r,i,o=MLe(e)?uL:js;return function(){var s=o(this,t),a=s.on;a!==r&&(i=(r=a).copy()).on(e,n),s.on=i}}function kLe(t,e){var n=this._id;return arguments.length<2?is(this.node(),n).on.on(t):this.each(DLe(n,t,e))}function OLe(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function LLe(){return this.on("end.remove",OLe(this._id))}function VLe(t){var e=this._name,n=this._id;typeof t!="function"&&(t=sL(t));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],u=a.length,c=o[s]=new Array(u),f,h,g=0;g<u;++g)(f=a[g])&&(h=t.call(f,f.__data__,g,a))&&("__data__"in f&&(h.__data__=f.__data__),c[g]=h,TE(c[g],e,n,g,c,is(f,n)));return new za(o,this._parents,e,n)}function ULe(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Pne(t));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var u=r[a],c=u.length,f,h=0;h<c;++h)if(f=u[h]){for(var g=t.call(f,f.__data__,h,u),_,T=is(f,n),E=0,b=g.length;E<b;++E)(_=g[E])&&TE(_,e,n,E,g,T);o.push(g),s.push(f)}return new za(o,s,e,n)}var qLe=Jy.prototype.constructor;function FLe(){return new qLe(this._groups,this._parents)}function BLe(t,e){var n,r,i;return function(){var o=Ah(this,t),s=(this.style.removeProperty(t),Ah(this,t));return o===s?null:o===n&&s===r?i:i=e(n=o,r=s)}}function Wne(t){return function(){this.style.removeProperty(t)}}function $Le(t,e,n){var r,i=n+"",o;return function(){var s=Ah(this,t);return s===i?null:s===r?o:o=e(r=s,n)}}function zLe(t,e,n){var r,i,o;return function(){var s=Ah(this,t),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(t),Ah(this,t))),s===u?null:s===r&&u===i?o:(i=u,o=e(r=s,a))}}function HLe(t,e){var n,r,i,o="style."+e,s="end."+o,a;return function(){var u=js(this,t),c=u.on,f=u.value[o]==null?a||(a=Wne(e)):void 0;(c!==n||i!==f)&&(r=(n=c).copy()).on(s,i=f),u.on=r}}function GLe(t,e,n){var r=(t+="")=="transform"?wSe:Kne;return e==null?this.styleTween(t,BLe(t,r)).on("end.style."+t,Wne(t)):typeof e=="function"?this.styleTween(t,zLe(t,r,cL(this,"style."+t,e))).each(HLe(this._id,t)):this.styleTween(t,$Le(t,r,e),n).on("end.style."+t,null)}function jLe(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function KLe(t,e,n){var r,i;function o(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&jLe(t,s,n)),r}return o._value=e,o}function WLe(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,KLe(t,e,n??""))}function YLe(t){return function(){this.textContent=t}}function JLe(t){return function(){var e=t(this);this.textContent=e??""}}function XLe(t){return this.tween("text",typeof t=="function"?JLe(cL(this,"text",t)):YLe(t==null?"":t+""))}function QLe(t){return function(e){this.textContent=t.call(this,e)}}function ZLe(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&QLe(i)),e}return r._value=t,r}function eVe(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,ZLe(t))}function tVe(){for(var t=this._name,e=this._id,n=Yne(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,u,c=0;c<a;++c)if(u=s[c]){var f=is(u,e);TE(u,t,n,c,s,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new za(r,this._parents,t,n)}function nVe(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},u={value:function(){--i===0&&o()}};n.each(function(){var c=js(this,r),f=c.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(u)),c.on=e}),i===0&&o()})}var rVe=0;function za(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Yne(){return++rVe}var ya=Jy.prototype;za.prototype={constructor:za,select:VLe,selectAll:ULe,selectChild:ya.selectChild,selectChildren:ya.selectChildren,filter:PLe,merge:NLe,selection:FLe,transition:tVe,call:ya.call,nodes:ya.nodes,node:ya.node,size:ya.size,empty:ya.empty,each:ya.each,on:kLe,attr:pLe,attrTween:_Le,style:GLe,styleTween:WLe,text:XLe,textTween:eVe,remove:LLe,tween:aLe,delay:ELe,duration:SLe,ease:CLe,easeVarying:RLe,end:nVe,[Symbol.iterator]:ya[Symbol.iterator]};function iVe(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var oVe={time:null,delay:0,duration:250,ease:iVe};function sVe(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function aVe(t){var e,n;t instanceof za?(e=t._id,t=t._name):(e=Yne(),(n=oVe).time=lL(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,u,c=0;c<a;++c)(u=s[c])&&TE(u,t,e,c,s,n||sVe(u,e));return new za(r,this._parents,t,e)}Jy.prototype.interrupt=iLe;Jy.prototype.transition=aVe;const Y0=t=>()=>t;function lVe(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Sa(t,e,n){this.k=t,this.x=e,this.y=n}Sa.prototype={constructor:Sa,scale:function(t){return t===1?this:new Sa(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Sa(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ma=new Sa(1,0,0);Sa.prototype;function QA(t){t.stopImmediatePropagation()}function Lm(t){t.preventDefault(),t.stopImmediatePropagation()}function uVe(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function cVe(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function U$(){return this.__zoom||Ma}function fVe(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function dVe(){return navigator.maxTouchPoints||"ontouchstart"in this}function hVe(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function Jne(){var t=uVe,e=cVe,n=hVe,r=fVe,i=dVe,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,u=ASe,c=bE("start","zoom","end"),f,h,g,_=500,T=150,E=0,b=10;function S(H){H.property("__zoom",U$).on("wheel.zoom",L,{passive:!1}).on("mousedown.zoom",N).on("dblclick.zoom",U).filter(i).on("touchstart.zoom",V).on("touchmove.zoom",$).on("touchend.zoom touchcancel.zoom",F).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}S.transform=function(H,X,K,te){var re=H.selection?H.selection():H;re.property("__zoom",U$),H!==re?O(H,X,K,te):re.interrupt().each(function(){q(this,arguments).event(te).start().zoom(null,typeof X=="function"?X.apply(this,arguments):X).end()})},S.scaleBy=function(H,X,K,te){S.scaleTo(H,function(){var re=this.__zoom.k,Y=typeof X=="function"?X.apply(this,arguments):X;return re*Y},K,te)},S.scaleTo=function(H,X,K,te){S.transform(H,function(){var re=e.apply(this,arguments),Y=this.__zoom,G=K==null?P(re):typeof K=="function"?K.apply(this,arguments):K,Q=Y.invert(G),Z=typeof X=="function"?X.apply(this,arguments):X;return n(R(C(Y,Z),G,Q),re,s)},K,te)},S.translateBy=function(H,X,K,te){S.transform(H,function(){return n(this.__zoom.translate(typeof X=="function"?X.apply(this,arguments):X,typeof K=="function"?K.apply(this,arguments):K),e.apply(this,arguments),s)},null,te)},S.translateTo=function(H,X,K,te,re){S.transform(H,function(){var Y=e.apply(this,arguments),G=this.__zoom,Q=te==null?P(Y):typeof te=="function"?te.apply(this,arguments):te;return n(Ma.translate(Q[0],Q[1]).scale(G.k).translate(typeof X=="function"?-X.apply(this,arguments):-X,typeof K=="function"?-K.apply(this,arguments):-K),Y,s)},te,re)};function C(H,X){return X=Math.max(o[0],Math.min(o[1],X)),X===H.k?H:new Sa(X,H.x,H.y)}function R(H,X,K){var te=X[0]-K[0]*H.k,re=X[1]-K[1]*H.k;return te===H.x&&re===H.y?H:new Sa(H.k,te,re)}function P(H){return[(+H[0][0]+ +H[1][0])/2,(+H[0][1]+ +H[1][1])/2]}function O(H,X,K,te){H.on("start.zoom",function(){q(this,arguments).event(te).start()}).on("interrupt.zoom end.zoom",function(){q(this,arguments).event(te).end()}).tween("zoom",function(){var re=this,Y=arguments,G=q(re,Y).event(te),Q=e.apply(re,Y),Z=K==null?P(Q):typeof K=="function"?K.apply(re,Y):K,fe=Math.max(Q[1][0]-Q[0][0],Q[1][1]-Q[0][1]),J=re.__zoom,ne=typeof X=="function"?X.apply(re,Y):X,oe=u(J.invert(Z).concat(fe/J.k),ne.invert(Z).concat(fe/ne.k));return function(_e){if(_e===1)_e=ne;else{var Ce=oe(_e),ye=fe/Ce[2];_e=new Sa(ye,Z[0]-Ce[0]*ye,Z[1]-Ce[1]*ye)}G.zoom(null,_e)}})}function q(H,X,K){return!K&&H.__zooming||new D(H,X)}function D(H,X){this.that=H,this.args=X,this.active=0,this.sourceEvent=null,this.extent=e.apply(H,X),this.taps=0}D.prototype={event:function(H){return H&&(this.sourceEvent=H),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(H,X){return this.mouse&&H!=="mouse"&&(this.mouse[1]=X.invert(this.mouse[0])),this.touch0&&H!=="touch"&&(this.touch0[1]=X.invert(this.touch0[0])),this.touch1&&H!=="touch"&&(this.touch1[1]=X.invert(this.touch1[0])),this.that.__zoom=X,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(H){var X=ho(this.that).datum();c.call(H,this.that,new lVe(H,{sourceEvent:this.sourceEvent,target:S,transform:this.that.__zoom,dispatch:c}),X)}};function L(H,...X){if(!t.apply(this,arguments))return;var K=q(this,X).event(H),te=this.__zoom,re=Math.max(o[0],Math.min(o[1],te.k*Math.pow(2,r.apply(this,arguments)))),Y=$o(H);if(K.wheel)(K.mouse[0][0]!==Y[0]||K.mouse[0][1]!==Y[1])&&(K.mouse[1]=te.invert(K.mouse[0]=Y)),clearTimeout(K.wheel);else{if(te.k===re)return;K.mouse=[Y,te.invert(Y)],x_(this),K.start()}Lm(H),K.wheel=setTimeout(G,T),K.zoom("mouse",n(R(C(te,re),K.mouse[0],K.mouse[1]),K.extent,s));function G(){K.wheel=null,K.end()}}function N(H,...X){if(g||!t.apply(this,arguments))return;var K=H.currentTarget,te=q(this,X,!0).event(H),re=ho(H.view).on("mousemove.zoom",Z,!0).on("mouseup.zoom",fe,!0),Y=$o(H,K),G=H.clientX,Q=H.clientY;Bne(H.view),QA(H),te.mouse=[Y,this.__zoom.invert(Y)],x_(this),te.start();function Z(J){if(Lm(J),!te.moved){var ne=J.clientX-G,oe=J.clientY-Q;te.moved=ne*ne+oe*oe>E}te.event(J).zoom("mouse",n(R(te.that.__zoom,te.mouse[0]=$o(J,K),te.mouse[1]),te.extent,s))}function fe(J){re.on("mousemove.zoom mouseup.zoom",null),$ne(J.view,te.moved),Lm(J),te.event(J).end()}}function U(H,...X){if(t.apply(this,arguments)){var K=this.__zoom,te=$o(H.changedTouches?H.changedTouches[0]:H,this),re=K.invert(te),Y=K.k*(H.shiftKey?.5:2),G=n(R(C(K,Y),te,re),e.apply(this,X),s);Lm(H),a>0?ho(this).transition().duration(a).call(O,G,te,H):ho(this).call(S.transform,G,te,H)}}function V(H,...X){if(t.apply(this,arguments)){var K=H.touches,te=K.length,re=q(this,X,H.changedTouches.length===te).event(H),Y,G,Q,Z;for(QA(H),G=0;G<te;++G)Q=K[G],Z=$o(Q,this),Z=[Z,this.__zoom.invert(Z),Q.identifier],re.touch0?!re.touch1&&re.touch0[2]!==Z[2]&&(re.touch1=Z,re.taps=0):(re.touch0=Z,Y=!0,re.taps=1+!!f);f&&(f=clearTimeout(f)),Y&&(re.taps<2&&(h=Z[0],f=setTimeout(function(){f=null},_)),x_(this),re.start())}}function $(H,...X){if(this.__zooming){var K=q(this,X).event(H),te=H.changedTouches,re=te.length,Y,G,Q,Z;for(Lm(H),Y=0;Y<re;++Y)G=te[Y],Q=$o(G,this),K.touch0&&K.touch0[2]===G.identifier?K.touch0[0]=Q:K.touch1&&K.touch1[2]===G.identifier&&(K.touch1[0]=Q);if(G=K.that.__zoom,K.touch1){var fe=K.touch0[0],J=K.touch0[1],ne=K.touch1[0],oe=K.touch1[1],_e=(_e=ne[0]-fe[0])*_e+(_e=ne[1]-fe[1])*_e,Ce=(Ce=oe[0]-J[0])*Ce+(Ce=oe[1]-J[1])*Ce;G=C(G,Math.sqrt(_e/Ce)),Q=[(fe[0]+ne[0])/2,(fe[1]+ne[1])/2],Z=[(J[0]+oe[0])/2,(J[1]+oe[1])/2]}else if(K.touch0)Q=K.touch0[0],Z=K.touch0[1];else return;K.zoom("touch",n(R(G,Q,Z),K.extent,s))}}function F(H,...X){if(this.__zooming){var K=q(this,X).event(H),te=H.changedTouches,re=te.length,Y,G;for(QA(H),g&&clearTimeout(g),g=setTimeout(function(){g=null},_),Y=0;Y<re;++Y)G=te[Y],K.touch0&&K.touch0[2]===G.identifier?delete K.touch0:K.touch1&&K.touch1[2]===G.identifier&&delete K.touch1;if(K.touch1&&!K.touch0&&(K.touch0=K.touch1,delete K.touch1),K.touch0)K.touch0[1]=this.__zoom.invert(K.touch0[0]);else if(K.end(),K.taps===2&&(G=$o(G,this),Math.hypot(h[0]-G[0],h[1]-G[1])<b)){var Q=ho(this).on("dblclick.zoom");Q&&Q.apply(this,arguments)}}}return S.wheelDelta=function(H){return arguments.length?(r=typeof H=="function"?H:Y0(+H),S):r},S.filter=function(H){return arguments.length?(t=typeof H=="function"?H:Y0(!!H),S):t},S.touchable=function(H){return arguments.length?(i=typeof H=="function"?H:Y0(!!H),S):i},S.extent=function(H){return arguments.length?(e=typeof H=="function"?H:Y0([[+H[0][0],+H[0][1]],[+H[1][0],+H[1][1]]]),S):e},S.scaleExtent=function(H){return arguments.length?(o[0]=+H[0],o[1]=+H[1],S):[o[0],o[1]]},S.translateExtent=function(H){return arguments.length?(s[0][0]=+H[0][0],s[1][0]=+H[1][0],s[0][1]=+H[0][1],s[1][1]=+H[1][1],S):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},S.constrain=function(H){return arguments.length?(n=H,S):n},S.duration=function(H){return arguments.length?(a=+H,S):a},S.interpolate=function(H){return arguments.length?(u=H,S):u},S.on=function(){var H=c.on.apply(c,arguments);return H===c?S:H},S.clickDistance=function(H){return arguments.length?(E=(H=+H)*H,S):Math.sqrt(E)},S.tapDistance=function(H){return arguments.length?(b=+H,S):b},S}const xE=M.createContext(null),pVe=xE.Provider,Ha={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Xne=Ha.error001();function Mt(t,e){const n=M.useContext(xE);if(n===null)throw new Error(Xne);return Ine(n,t,e)}const ir=()=>{const t=M.useContext(xE);if(t===null)throw new Error(Xne);return M.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},mVe=t=>t.userSelectionActive?"none":"all";function fL({position:t,children:e,className:n,style:r,...i}){const o=Mt(mVe),s=`${t}`.split("-");return ge.createElement("div",{className:Mr(["react-flow__panel",n,...s]),style:{...r,pointerEvents:o},...i},e)}function gVe({proOptions:t,position:e="bottom-right"}){return t!=null&&t.hideAttribution?null:ge.createElement(fL,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},ge.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const yVe=({x:t,y:e,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:o={},labelBgPadding:s=[2,4],labelBgBorderRadius:a=2,children:u,className:c,...f})=>{const h=M.useRef(null),[g,_]=M.useState({x:0,y:0,width:0,height:0}),T=Mr(["react-flow__edge-textwrapper",c]);return M.useEffect(()=>{if(h.current){const E=h.current.getBBox();_({x:E.x,y:E.y,width:E.width,height:E.height})}},[n]),typeof n>"u"||!n?null:ge.createElement("g",{transform:`translate(${t-g.width/2} ${e-g.height/2})`,className:T,visibility:g.width?"visible":"hidden",...f},i&&ge.createElement("rect",{width:g.width+2*s[0],x:-s[0],y:-s[1],height:g.height+2*s[1],className:"react-flow__edge-textbg",style:o,rx:a,ry:a}),ge.createElement("text",{className:"react-flow__edge-text",y:g.height/2,dy:"0.3em",ref:h,style:r},n),u)};var vVe=M.memo(yVe);const dL=t=>({width:t.offsetWidth,height:t.offsetHeight}),Ih=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),hL=(t={x:0,y:0},e)=>({x:Ih(t.x,e[0][0],e[1][0]),y:Ih(t.y,e[0][1],e[1][1])}),q$=(t,e,n)=>t<e?Ih(Math.abs(t-e),1,50)/50:t>n?-Ih(Math.abs(t-n),1,50)/50:0,Qne=(t,e)=>{const n=q$(t.x,35,e.width-35)*20,r=q$(t.y,35,e.height-35)*20;return[n,r]},Zne=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},ere=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),oy=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),tre=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),F$=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),_Ve=(t,e)=>tre(ere(oy(t),oy(e))),h2=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},bVe=t=>yo(t.width)&&yo(t.height)&&yo(t.x)&&yo(t.y),yo=t=>!isNaN(t)&&isFinite(t),An=Symbol.for("internals"),nre=["Enter"," ","Escape"],wVe=(t,e)=>{},EVe=t=>"nativeEvent"in t;function p2(t){var i,o;const e=EVe(t)?t.nativeEvent:t,n=((o=(i=e.composedPath)==null?void 0:i.call(e))==null?void 0:o[0])||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const rre=t=>"clientX"in t,au=(t,e)=>{var o,s;const n=rre(t),r=n?t.clientX:(o=t.touches)==null?void 0:o[0].clientX,i=n?t.clientY:(s=t.touches)==null?void 0:s[0].clientY;return{x:r-((e==null?void 0:e.left)??0),y:i-((e==null?void 0:e.top)??0)}},Gb=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0},Xy=({id:t,path:e,labelX:n,labelY:r,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:u,labelBgBorderRadius:c,style:f,markerEnd:h,markerStart:g,interactionWidth:_=20})=>ge.createElement(ge.Fragment,null,ge.createElement("path",{id:t,style:f,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:h,markerStart:g}),_&&ge.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:_,className:"react-flow__edge-interaction"}),i&&yo(n)&&yo(r)?ge.createElement(vVe,{x:n,y:r,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:u,labelBgBorderRadius:c}):null);Xy.displayName="BaseEdge";function Vm(t,e,n){return n===void 0?n:r=>{const i=e().edges.find(o=>o.id===t);i&&n(r,{...i})}}function ire({sourceX:t,sourceY:e,targetX:n,targetY:r}){const i=Math.abs(n-t)/2,o=n<t?n+i:n-i,s=Math.abs(r-e)/2,a=r<e?r+s:r-s;return[o,a,i,s]}function ore({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:i,sourceControlY:o,targetControlX:s,targetControlY:a}){const u=t*.125+i*.375+s*.375+n*.125,c=e*.125+o*.375+a*.375+r*.125,f=Math.abs(u-t),h=Math.abs(c-e);return[u,c,f,h]}var af;(function(t){t.Strict="strict",t.Loose="loose"})(af||(af={}));var Nc;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Nc||(Nc={}));var sy;(function(t){t.Partial="partial",t.Full="full"})(sy||(sy={}));var Xl;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Xl||(Xl={}));var ay;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(ay||(ay={}));var Xe;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Xe||(Xe={}));function B$({pos:t,x1:e,y1:n,x2:r,y2:i}){return t===Xe.Left||t===Xe.Right?[.5*(e+r),n]:[e,.5*(n+i)]}function sre({sourceX:t,sourceY:e,sourcePosition:n=Xe.Bottom,targetX:r,targetY:i,targetPosition:o=Xe.Top}){const[s,a]=B$({pos:n,x1:t,y1:e,x2:r,y2:i}),[u,c]=B$({pos:o,x1:r,y1:i,x2:t,y2:e}),[f,h,g,_]=ore({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:s,sourceControlY:a,targetControlX:u,targetControlY:c});return[`M${t},${e} C${s},${a} ${u},${c} ${r},${i}`,f,h,g,_]}const pL=M.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:i=Xe.Bottom,targetPosition:o=Xe.Top,label:s,labelStyle:a,labelShowBg:u,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h,style:g,markerEnd:_,markerStart:T,interactionWidth:E})=>{const[b,S,C]=sre({sourceX:t,sourceY:e,sourcePosition:i,targetX:n,targetY:r,targetPosition:o});return ge.createElement(Xy,{path:b,labelX:S,labelY:C,label:s,labelStyle:a,labelShowBg:u,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h,style:g,markerEnd:_,markerStart:T,interactionWidth:E})});pL.displayName="SimpleBezierEdge";const $$={[Xe.Left]:{x:-1,y:0},[Xe.Right]:{x:1,y:0},[Xe.Top]:{x:0,y:-1},[Xe.Bottom]:{x:0,y:1}},TVe=({source:t,sourcePosition:e=Xe.Bottom,target:n})=>e===Xe.Left||e===Xe.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},z$=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function xVe({source:t,sourcePosition:e=Xe.Bottom,target:n,targetPosition:r=Xe.Top,center:i,offset:o}){const s=$$[e],a=$$[r],u={x:t.x+s.x*o,y:t.y+s.y*o},c={x:n.x+a.x*o,y:n.y+a.y*o},f=TVe({source:u,sourcePosition:e,target:c}),h=f.x!==0?"x":"y",g=f[h];let _=[],T,E;const b={x:0,y:0},S={x:0,y:0},[C,R,P,O]=ire({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(s[h]*a[h]===-1){T=i.x??C,E=i.y??R;const D=[{x:T,y:u.y},{x:T,y:c.y}],L=[{x:u.x,y:E},{x:c.x,y:E}];s[h]===g?_=h==="x"?D:L:_=h==="x"?L:D}else{const D=[{x:u.x,y:c.y}],L=[{x:c.x,y:u.y}];if(h==="x"?_=s.x===g?L:D:_=s.y===g?D:L,e===r){const F=Math.abs(t[h]-n[h]);if(F<=o){const H=Math.min(o-1,o-F);s[h]===g?b[h]=(u[h]>t[h]?-1:1)*H:S[h]=(c[h]>n[h]?-1:1)*H}}if(e!==r){const F=h==="x"?"y":"x",H=s[h]===a[F],X=u[F]>c[F],K=u[F]<c[F];(s[h]===1&&(!H&&X||H&&K)||s[h]!==1&&(!H&&K||H&&X))&&(_=h==="x"?D:L)}const N={x:u.x+b.x,y:u.y+b.y},U={x:c.x+S.x,y:c.y+S.y},V=Math.max(Math.abs(N.x-_[0].x),Math.abs(U.x-_[0].x)),$=Math.max(Math.abs(N.y-_[0].y),Math.abs(U.y-_[0].y));V>=$?(T=(N.x+U.x)/2,E=_[0].y):(T=_[0].x,E=(N.y+U.y)/2)}return[[t,{x:u.x+b.x,y:u.y+b.y},..._,{x:c.x+S.x,y:c.y+S.y},n],T,E,P,O]}function SVe(t,e,n,r){const i=Math.min(z$(t,e)/2,z$(e,n)/2,r),{x:o,y:s}=e;if(t.x===o&&o===n.x||t.y===s&&s===n.y)return`L${o} ${s}`;if(t.y===s){const c=t.x<n.x?-1:1,f=t.y<n.y?1:-1;return`L ${o+i*c},${s}Q ${o},${s} ${o},${s+i*f}`}const a=t.x<n.x?1:-1,u=t.y<n.y?-1:1;return`L ${o},${s+i*u}Q ${o},${s} ${o+i*a},${s}`}function jb({sourceX:t,sourceY:e,sourcePosition:n=Xe.Bottom,targetX:r,targetY:i,targetPosition:o=Xe.Top,borderRadius:s=5,centerX:a,centerY:u,offset:c=20}){const[f,h,g,_,T]=xVe({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:i},targetPosition:o,center:{x:a,y:u},offset:c});return[f.reduce((b,S,C)=>{let R="";return C>0&&C<f.length-1?R=SVe(f[C-1],S,f[C+1],s):R=`${C===0?"M":"L"}${S.x} ${S.y}`,b+=R,b},""),h,g,_,T]}const SE=M.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:u,labelBgBorderRadius:c,style:f,sourcePosition:h=Xe.Bottom,targetPosition:g=Xe.Top,markerEnd:_,markerStart:T,pathOptions:E,interactionWidth:b})=>{const[S,C,R]=jb({sourceX:t,sourceY:e,sourcePosition:h,targetX:n,targetY:r,targetPosition:g,borderRadius:E==null?void 0:E.borderRadius,offset:E==null?void 0:E.offset});return ge.createElement(Xy,{path:S,labelX:C,labelY:R,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:u,labelBgBorderRadius:c,style:f,markerEnd:_,markerStart:T,interactionWidth:b})});SE.displayName="SmoothStepEdge";const mL=M.memo(t=>{var e;return ge.createElement(SE,{...t,pathOptions:M.useMemo(()=>{var n;return{borderRadius:0,offset:(n=t.pathOptions)==null?void 0:n.offset}},[(e=t.pathOptions)==null?void 0:e.offset])})});mL.displayName="StepEdge";function AVe({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[i,o,s,a]=ire({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,i,o,s,a]}const gL=M.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:u,labelBgBorderRadius:c,style:f,markerEnd:h,markerStart:g,interactionWidth:_})=>{const[T,E,b]=AVe({sourceX:t,sourceY:e,targetX:n,targetY:r});return ge.createElement(Xy,{path:T,labelX:E,labelY:b,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:u,labelBgBorderRadius:c,style:f,markerEnd:h,markerStart:g,interactionWidth:_})});gL.displayName="StraightEdge";function J0(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function H$({pos:t,x1:e,y1:n,x2:r,y2:i,c:o}){switch(t){case Xe.Left:return[e-J0(e-r,o),n];case Xe.Right:return[e+J0(r-e,o),n];case Xe.Top:return[e,n-J0(n-i,o)];case Xe.Bottom:return[e,n+J0(i-n,o)]}}function are({sourceX:t,sourceY:e,sourcePosition:n=Xe.Bottom,targetX:r,targetY:i,targetPosition:o=Xe.Top,curvature:s=.25}){const[a,u]=H$({pos:n,x1:t,y1:e,x2:r,y2:i,c:s}),[c,f]=H$({pos:o,x1:r,y1:i,x2:t,y2:e,c:s}),[h,g,_,T]=ore({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:a,sourceControlY:u,targetControlX:c,targetControlY:f});return[`M${t},${e} C${a},${u} ${c},${f} ${r},${i}`,h,g,_,T]}const Kb=M.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:i=Xe.Bottom,targetPosition:o=Xe.Top,label:s,labelStyle:a,labelShowBg:u,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h,style:g,markerEnd:_,markerStart:T,pathOptions:E,interactionWidth:b})=>{const[S,C,R]=are({sourceX:t,sourceY:e,sourcePosition:i,targetX:n,targetY:r,targetPosition:o,curvature:E==null?void 0:E.curvature});return ge.createElement(Xy,{path:S,labelX:C,labelY:R,label:s,labelStyle:a,labelShowBg:u,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h,style:g,markerEnd:_,markerStart:T,interactionWidth:b})});Kb.displayName="BezierEdge";const yL=M.createContext(null),CVe=yL.Provider;yL.Consumer;const IVe=()=>M.useContext(yL),RVe=t=>"id"in t&&"source"in t&&"target"in t,PVe=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`reactflow__edge-${t}${e||""}-${n}${r||""}`,m2=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`,NVe=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),MVe=(t,e)=>{if(!t.source||!t.target)return e;let n;return RVe(t)?n={...t}:n={...t,id:PVe(t)},NVe(n,e)?e:e.concat(n)},g2=({x:t,y:e},[n,r,i],o,[s,a])=>{const u={x:(t-n)/i,y:(e-r)/i};return o?{x:s*Math.round(u.x/s),y:a*Math.round(u.y/a)}:u},lre=({x:t,y:e},[n,r,i])=>({x:t*i+n,y:e*i+r}),Fc=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],r=(t.height??0)*e[1],i={x:t.position.x-n,y:t.position.y-r};return{...i,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-r}:i}},AE=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,i)=>{const{x:o,y:s}=Fc(i,e).positionAbsolute;return ere(r,oy({x:o,y:s,width:i.width||0,height:i.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return tre(n)},ure=(t,e,[n,r,i]=[0,0,1],o=!1,s=!1,a=[0,0])=>{const u={x:(e.x-n)/i,y:(e.y-r)/i,width:e.width/i,height:e.height/i},c=[];return t.forEach(f=>{const{width:h,height:g,selectable:_=!0,hidden:T=!1}=f;if(s&&!_||T)return!1;const{positionAbsolute:E}=Fc(f,a),b={x:E.x,y:E.y,width:h||0,height:g||0},S=h2(u,b),C=typeof h>"u"||typeof g>"u"||h===null||g===null,R=o&&S>0,P=(h||0)*(g||0);(C||R||S>=P||f.dragging)&&c.push(f)}),c},cre=(t,e)=>{const n=t.map(r=>r.id);return e.filter(r=>n.includes(r.source)||n.includes(r.target))},fre=(t,e,n,r,i,o=.1)=>{const s=e/(t.width*(1+o)),a=n/(t.height*(1+o)),u=Math.min(s,a),c=Ih(u,r,i),f=t.x+t.width/2,h=t.y+t.height/2,g=e/2-f*c,_=n/2-h*c;return{x:g,y:_,zoom:c}},vc=(t,e=0)=>t.transition().duration(e);function G$(t,e,n,r){return(e[n]||[]).reduce((i,o)=>{var s,a;return`${t.id}-${o.id}-${n}`!==r&&i.push({id:o.id||null,type:n,nodeId:t.id,x:(((s=t.positionAbsolute)==null?void 0:s.x)??0)+o.x+o.width/2,y:(((a=t.positionAbsolute)==null?void 0:a.y)??0)+o.y+o.height/2}),i},[])}function DVe(t,e,n,r,i,o){const{x:s,y:a}=au(t),c=e.elementsFromPoint(s,a).find(T=>T.classList.contains("react-flow__handle"));if(c){const T=c.getAttribute("data-nodeid");if(T){const E=vL(void 0,c),b=c.getAttribute("data-handleid"),S=o({nodeId:T,id:b,type:E});if(S){const C=i.find(R=>R.nodeId===T&&R.type===E&&R.id===b);return{handle:{id:b,type:E,nodeId:T,x:(C==null?void 0:C.x)||n.x,y:(C==null?void 0:C.y)||n.y},validHandleResult:S}}}}let f=[],h=1/0;if(i.forEach(T=>{const E=Math.sqrt((T.x-n.x)**2+(T.y-n.y)**2);if(E<=r){const b=o(T);E<=h&&(E<h?f=[{handle:T,validHandleResult:b}]:E===h&&f.push({handle:T,validHandleResult:b}),h=E)}}),!f.length)return{handle:null,validHandleResult:dre()};if(f.length===1)return f[0];const g=f.some(({validHandleResult:T})=>T.isValid),_=f.some(({handle:T})=>T.type==="target");return f.find(({handle:T,validHandleResult:E})=>_?T.type==="target":g?E.isValid:!0)||f[0]}const kVe={source:null,target:null,sourceHandle:null,targetHandle:null},dre=()=>({handleDomNode:null,isValid:!1,connection:kVe,endHandle:null});function hre(t,e,n,r,i,o,s){const a=i==="target",u=s.querySelector(`.react-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),c={...dre(),handleDomNode:u};if(u){const f=vL(void 0,u),h=u.getAttribute("data-nodeid"),g=u.getAttribute("data-handleid"),_=u.classList.contains("connectable"),T=u.classList.contains("connectableend"),E={source:a?h:n,sourceHandle:a?g:r,target:a?n:h,targetHandle:a?r:g};c.connection=E,_&&T&&(e===af.Strict?a&&f==="source"||!a&&f==="target":h!==n||g!==r)&&(c.endHandle={nodeId:h,handleId:g,type:f},c.isValid=o(E))}return c}function OVe({nodes:t,nodeId:e,handleId:n,handleType:r}){return t.reduce((i,o)=>{if(o[An]){const{handleBounds:s}=o[An];let a=[],u=[];s&&(a=G$(o,s,"source",`${e}-${n}-${r}`),u=G$(o,s,"target",`${e}-${n}-${r}`)),i.push(...a,...u)}return i},[])}function vL(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function ZA(t){t==null||t.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function LVe(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function pre({event:t,handleId:e,nodeId:n,onConnect:r,isTarget:i,getState:o,setState:s,isValidConnection:a,edgeUpdaterType:u,onReconnectEnd:c}){const f=Zne(t.target),{connectionMode:h,domNode:g,autoPanOnConnect:_,connectionRadius:T,onConnectStart:E,panBy:b,getNodes:S,cancelConnection:C}=o();let R=0,P;const{x:O,y:q}=au(t),D=f==null?void 0:f.elementFromPoint(O,q),L=vL(u,D),N=g==null?void 0:g.getBoundingClientRect();if(!N||!L)return;let U,V=au(t,N),$=!1,F=null,H=!1,X=null;const K=OVe({nodes:S(),nodeId:n,handleId:e,handleType:L}),te=()=>{if(!_)return;const[G,Q]=Qne(V,N);b({x:G,y:Q}),R=requestAnimationFrame(te)};s({connectionPosition:V,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:L,connectionStartHandle:{nodeId:n,handleId:e,type:L},connectionEndHandle:null}),E==null||E(t,{nodeId:n,handleId:e,handleType:L});function re(G){const{transform:Q}=o();V=au(G,N);const{handle:Z,validHandleResult:fe}=DVe(G,f,g2(V,Q,!1,[1,1]),T,K,J=>hre(J,h,n,e,i?"target":"source",a,f));if(P=Z,$||(te(),$=!0),X=fe.handleDomNode,F=fe.connection,H=fe.isValid,s({connectionPosition:P&&H?lre({x:P.x,y:P.y},Q):V,connectionStatus:LVe(!!P,H),connectionEndHandle:fe.endHandle}),!P&&!H&&!X)return ZA(U);F.source!==F.target&&X&&(ZA(U),U=X,X.classList.add("connecting","react-flow__handle-connecting"),X.classList.toggle("valid",H),X.classList.toggle("react-flow__handle-valid",H))}function Y(G){var Q,Z;(P||X)&&F&&H&&(r==null||r(F)),(Z=(Q=o()).onConnectEnd)==null||Z.call(Q,G),u&&(c==null||c(G)),ZA(U),C(),cancelAnimationFrame(R),$=!1,H=!1,F=null,X=null,f.removeEventListener("mousemove",re),f.removeEventListener("mouseup",Y),f.removeEventListener("touchmove",re),f.removeEventListener("touchend",Y)}f.addEventListener("mousemove",re),f.addEventListener("mouseup",Y),f.addEventListener("touchmove",re),f.addEventListener("touchend",Y)}const j$=()=>!0,VVe=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),UVe=(t,e,n)=>r=>{const{connectionStartHandle:i,connectionEndHandle:o,connectionClickStartHandle:s}=r;return{connecting:(i==null?void 0:i.nodeId)===t&&(i==null?void 0:i.handleId)===e&&(i==null?void 0:i.type)===n||(o==null?void 0:o.nodeId)===t&&(o==null?void 0:o.handleId)===e&&(o==null?void 0:o.type)===n,clickConnecting:(s==null?void 0:s.nodeId)===t&&(s==null?void 0:s.handleId)===e&&(s==null?void 0:s.type)===n}},mre=M.forwardRef(({type:t="source",position:e=Xe.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:o=!0,id:s,onConnect:a,children:u,className:c,onMouseDown:f,onTouchStart:h,...g},_)=>{var N,U;const T=s||null,E=t==="target",b=ir(),S=IVe(),{connectOnClick:C,noPanClassName:R}=Mt(VVe,pr),{connecting:P,clickConnecting:O}=Mt(UVe(S,T,t),pr);S||(U=(N=b.getState()).onError)==null||U.call(N,"010",Ha.error010());const q=V=>{const{defaultEdgeOptions:$,onConnect:F,hasDefaultEdges:H}=b.getState(),X={...$,...V};if(H){const{edges:K,setEdges:te}=b.getState();te(MVe(X,K))}F==null||F(X),a==null||a(X)},D=V=>{if(!S)return;const $=rre(V);i&&($&&V.button===0||!$)&&pre({event:V,handleId:T,nodeId:S,onConnect:q,isTarget:E,getState:b.getState,setState:b.setState,isValidConnection:n||b.getState().isValidConnection||j$}),$?f==null||f(V):h==null||h(V)},L=V=>{const{onClickConnectStart:$,onClickConnectEnd:F,connectionClickStartHandle:H,connectionMode:X,isValidConnection:K}=b.getState();if(!S||!H&&!i)return;if(!H){$==null||$(V,{nodeId:S,handleId:T,handleType:t}),b.setState({connectionClickStartHandle:{nodeId:S,type:t,handleId:T}});return}const te=Zne(V.target),re=n||K||j$,{connection:Y,isValid:G}=hre({nodeId:S,id:T,type:t},X,H.nodeId,H.handleId||null,H.type,re,te);G&&q(Y),F==null||F(V),b.setState({connectionClickStartHandle:null})};return ge.createElement("div",{"data-handleid":T,"data-nodeid":S,"data-handlepos":e,"data-id":`${S}-${T}-${t}`,className:Mr(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",R,c,{source:!E,target:E,connectable:r,connectablestart:i,connectableend:o,connecting:O,connectionindicator:r&&(i&&!P||o&&P)}]),onMouseDown:D,onTouchStart:D,onClick:C?L:void 0,ref:_,...g},u)});mre.displayName="Handle";var Rh=M.memo(mre);const gre=({data:t,isConnectable:e,targetPosition:n=Xe.Top,sourcePosition:r=Xe.Bottom})=>ge.createElement(ge.Fragment,null,ge.createElement(Rh,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label,ge.createElement(Rh,{type:"source",position:r,isConnectable:e}));gre.displayName="DefaultNode";var y2=M.memo(gre);const yre=({data:t,isConnectable:e,sourcePosition:n=Xe.Bottom})=>ge.createElement(ge.Fragment,null,t==null?void 0:t.label,ge.createElement(Rh,{type:"source",position:n,isConnectable:e}));yre.displayName="InputNode";var vre=M.memo(yre);const _re=({data:t,isConnectable:e,targetPosition:n=Xe.Top})=>ge.createElement(ge.Fragment,null,ge.createElement(Rh,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label);_re.displayName="OutputNode";var bre=M.memo(_re);const _L=()=>null;_L.displayName="GroupNode";const qVe=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),X0=t=>t.id;function FVe(t,e){return pr(t.selectedNodes.map(X0),e.selectedNodes.map(X0))&&pr(t.selectedEdges.map(X0),e.selectedEdges.map(X0))}const wre=M.memo(({onSelectionChange:t})=>{const e=ir(),{selectedNodes:n,selectedEdges:r}=Mt(qVe,FVe);return M.useEffect(()=>{const i={nodes:n,edges:r};t==null||t(i),e.getState().onSelectionChange.forEach(o=>o(i))},[n,r,t]),null});wre.displayName="SelectionListener";const BVe=t=>!!t.onSelectionChange;function $Ve({onSelectionChange:t}){const e=Mt(BVe);return t||e?ge.createElement(wre,{onSelectionChange:t}):null}const zVe=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function yd(t,e){M.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function ht(t,e,n){M.useEffect(()=>{typeof e<"u"&&n({[t]:e})},[e])}const HVe=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:i,onConnectStart:o,onConnectEnd:s,onClickConnectStart:a,onClickConnectEnd:u,nodesDraggable:c,nodesConnectable:f,nodesFocusable:h,edgesFocusable:g,edgesUpdatable:_,elevateNodesOnSelect:T,minZoom:E,maxZoom:b,nodeExtent:S,onNodesChange:C,onEdgesChange:R,elementsSelectable:P,connectionMode:O,snapGrid:q,snapToGrid:D,translateExtent:L,connectOnClick:N,defaultEdgeOptions:U,fitView:V,fitViewOptions:$,onNodesDelete:F,onEdgesDelete:H,onNodeDrag:X,onNodeDragStart:K,onNodeDragStop:te,onSelectionDrag:re,onSelectionDragStart:Y,onSelectionDragStop:G,noPanClassName:Q,nodeOrigin:Z,rfId:fe,autoPanOnConnect:J,autoPanOnNodeDrag:ne,onError:oe,connectionRadius:_e,isValidConnection:Ce,nodeDragThreshold:ye})=>{const{setNodes:Ie,setEdges:Le,setDefaultNodesAndEdges:be,setMinZoom:Qe,setMaxZoom:Be,setTranslateExtent:Ve,setNodeExtent:at,reset:Pe}=Mt(zVe,pr),qe=ir();return M.useEffect(()=>{const ot=r==null?void 0:r.map(Tt=>({...Tt,...U}));return be(n,ot),()=>{Pe()}},[]),ht("defaultEdgeOptions",U,qe.setState),ht("connectionMode",O,qe.setState),ht("onConnect",i,qe.setState),ht("onConnectStart",o,qe.setState),ht("onConnectEnd",s,qe.setState),ht("onClickConnectStart",a,qe.setState),ht("onClickConnectEnd",u,qe.setState),ht("nodesDraggable",c,qe.setState),ht("nodesConnectable",f,qe.setState),ht("nodesFocusable",h,qe.setState),ht("edgesFocusable",g,qe.setState),ht("edgesUpdatable",_,qe.setState),ht("elementsSelectable",P,qe.setState),ht("elevateNodesOnSelect",T,qe.setState),ht("snapToGrid",D,qe.setState),ht("snapGrid",q,qe.setState),ht("onNodesChange",C,qe.setState),ht("onEdgesChange",R,qe.setState),ht("connectOnClick",N,qe.setState),ht("fitViewOnInit",V,qe.setState),ht("fitViewOnInitOptions",$,qe.setState),ht("onNodesDelete",F,qe.setState),ht("onEdgesDelete",H,qe.setState),ht("onNodeDrag",X,qe.setState),ht("onNodeDragStart",K,qe.setState),ht("onNodeDragStop",te,qe.setState),ht("onSelectionDrag",re,qe.setState),ht("onSelectionDragStart",Y,qe.setState),ht("onSelectionDragStop",G,qe.setState),ht("noPanClassName",Q,qe.setState),ht("nodeOrigin",Z,qe.setState),ht("rfId",fe,qe.setState),ht("autoPanOnConnect",J,qe.setState),ht("autoPanOnNodeDrag",ne,qe.setState),ht("onError",oe,qe.setState),ht("connectionRadius",_e,qe.setState),ht("isValidConnection",Ce,qe.setState),ht("nodeDragThreshold",ye,qe.setState),yd(t,Ie),yd(e,Le),yd(E,Qe),yd(b,Be),yd(L,Ve),yd(S,at),null},K$={display:"none"},GVe={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Ere="react-flow__node-desc",Tre="react-flow__edge-desc",jVe="react-flow__aria-live",KVe=t=>t.ariaLiveMessage;function WVe({rfId:t}){const e=Mt(KVe);return ge.createElement("div",{id:`${jVe}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:GVe},e)}function YVe({rfId:t,disableKeyboardA11y:e}){return ge.createElement(ge.Fragment,null,ge.createElement("div",{id:`${Ere}-${t}`,style:K$},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),ge.createElement("div",{id:`${Tre}-${t}`,style:K$},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&ge.createElement(WVe,{rfId:t}))}var ly=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,r]=M.useState(!1),i=M.useRef(!1),o=M.useRef(new Set([])),[s,a]=M.useMemo(()=>{if(t!==null){const c=(Array.isArray(t)?t:[t]).filter(h=>typeof h=="string").map(h=>h.split("+")),f=c.reduce((h,g)=>h.concat(...g),[]);return[c,f]}return[[],[]]},[t]);return M.useEffect(()=>{const u=typeof document<"u"?document:null,c=(e==null?void 0:e.target)||u;if(t!==null){const f=_=>{if(i.current=_.ctrlKey||_.metaKey||_.shiftKey,(!i.current||i.current&&!e.actInsideInputWithModifier)&&p2(_))return!1;const E=Y$(_.code,a);o.current.add(_[E]),W$(s,o.current,!1)&&(_.preventDefault(),r(!0))},h=_=>{if((!i.current||i.current&&!e.actInsideInputWithModifier)&&p2(_))return!1;const E=Y$(_.code,a);W$(s,o.current,!0)?(r(!1),o.current.clear()):o.current.delete(_[E]),_.key==="Meta"&&o.current.clear(),i.current=!1},g=()=>{o.current.clear(),r(!1)};return c==null||c.addEventListener("keydown",f),c==null||c.addEventListener("keyup",h),window.addEventListener("blur",g),()=>{c==null||c.removeEventListener("keydown",f),c==null||c.removeEventListener("keyup",h),window.removeEventListener("blur",g)}}},[t,r]),n};function W$(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(i=>e.has(i)))}function Y$(t,e){return e.includes(t)?"code":"key"}function xre(t,e,n,r){var a,u;const i=t.parentNode||t.parentId;if(!i)return n;const o=e.get(i),s=Fc(o,r);return xre(o,e,{x:(n.x??0)+s.x,y:(n.y??0)+s.y,z:(((a=o[An])==null?void 0:a.z)??0)>(n.z??0)?((u=o[An])==null?void 0:u.z)??0:n.z??0},r)}function Sre(t,e,n){t.forEach(r=>{var o;const i=r.parentNode||r.parentId;if(i&&!t.has(i))throw new Error(`Parent node ${i} not found`);if(i||n!=null&&n[r.id]){const{x:s,y:a,z:u}=xre(r,t,{...r.position,z:((o=r[An])==null?void 0:o.z)??0},e);r.positionAbsolute={x:s,y:a},r[An].z=u,n!=null&&n[r.id]&&(r[An].isParent=!0)}})}function e1(t,e,n,r){const i=new Map,o={},s=r?1e3:0;return t.forEach(a=>{var _;const u=(yo(a.zIndex)?a.zIndex:0)+(a.selected?s:0),c=e.get(a.id),f={...a,positionAbsolute:{x:a.position.x,y:a.position.y}},h=a.parentNode||a.parentId;h&&(o[h]=!0);const g=(c==null?void 0:c.type)&&(c==null?void 0:c.type)!==a.type;Object.defineProperty(f,An,{enumerable:!1,value:{handleBounds:g||(_=c==null?void 0:c[An])==null?void 0:_.handleBounds,z:u}}),i.set(a.id,f)}),Sre(i,n,o),i}function Are(t,e={}){const{getNodes:n,width:r,height:i,minZoom:o,maxZoom:s,d3Zoom:a,d3Selection:u,fitViewOnInitDone:c,fitViewOnInit:f,nodeOrigin:h}=t(),g=e.initial&&!c&&f;if(a&&u&&(g||!e.initial)){const T=n().filter(b=>{var C;const S=e.includeHiddenNodes?b.width&&b.height:!b.hidden;return(C=e.nodes)!=null&&C.length?S&&e.nodes.some(R=>R.id===b.id):S}),E=T.every(b=>b.width&&b.height);if(T.length>0&&E){const b=AE(T,h),{x:S,y:C,zoom:R}=fre(b,r,i,e.minZoom??o,e.maxZoom??s,e.padding??.1),P=Ma.translate(S,C).scale(R);return typeof e.duration=="number"&&e.duration>0?a.transform(vc(u,e.duration),P):a.transform(u,P),!0}}return!1}function JVe(t,e){return t.forEach(n=>{const r=e.get(n.id);r&&e.set(r.id,{...r,[An]:r[An],selected:n.selected})}),new Map(e)}function XVe(t,e){return e.map(n=>{const r=t.find(i=>i.id===n.id);return r&&(n.selected=r.selected),n})}function Q0({changedNodes:t,changedEdges:e,get:n,set:r}){const{nodeInternals:i,edges:o,onNodesChange:s,onEdgesChange:a,hasDefaultNodes:u,hasDefaultEdges:c}=n();t!=null&&t.length&&(u&&r({nodeInternals:JVe(t,i)}),s==null||s(t)),e!=null&&e.length&&(c&&r({edges:XVe(e,o)}),a==null||a(e))}const vd=()=>{},QVe={zoomIn:vd,zoomOut:vd,zoomTo:vd,getZoom:()=>1,setViewport:vd,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:vd,fitBounds:vd,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},ZVe=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),eUe=()=>{const t=ir(),{d3Zoom:e,d3Selection:n}=Mt(ZVe,pr);return M.useMemo(()=>n&&e?{zoomIn:i=>e.scaleBy(vc(n,i==null?void 0:i.duration),1.2),zoomOut:i=>e.scaleBy(vc(n,i==null?void 0:i.duration),1/1.2),zoomTo:(i,o)=>e.scaleTo(vc(n,o==null?void 0:o.duration),i),getZoom:()=>t.getState().transform[2],setViewport:(i,o)=>{const[s,a,u]=t.getState().transform,c=Ma.translate(i.x??s,i.y??a).scale(i.zoom??u);e.transform(vc(n,o==null?void 0:o.duration),c)},getViewport:()=>{const[i,o,s]=t.getState().transform;return{x:i,y:o,zoom:s}},fitView:i=>Are(t.getState,i),setCenter:(i,o,s)=>{const{width:a,height:u,maxZoom:c}=t.getState(),f=typeof(s==null?void 0:s.zoom)<"u"?s.zoom:c,h=a/2-i*f,g=u/2-o*f,_=Ma.translate(h,g).scale(f);e.transform(vc(n,s==null?void 0:s.duration),_)},fitBounds:(i,o)=>{const{width:s,height:a,minZoom:u,maxZoom:c}=t.getState(),{x:f,y:h,zoom:g}=fre(i,s,a,u,c,(o==null?void 0:o.padding)??.1),_=Ma.translate(f,h).scale(g);e.transform(vc(n,o==null?void 0:o.duration),_)},project:i=>{const{transform:o,snapToGrid:s,snapGrid:a}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),g2(i,o,s,a)},screenToFlowPosition:i=>{const{transform:o,snapToGrid:s,snapGrid:a,domNode:u}=t.getState();if(!u)return i;const{x:c,y:f}=u.getBoundingClientRect(),h={x:i.x-c,y:i.y-f};return g2(h,o,s,a)},flowToScreenPosition:i=>{const{transform:o,domNode:s}=t.getState();if(!s)return i;const{x:a,y:u}=s.getBoundingClientRect(),c=lre(i,o);return{x:c.x+a,y:c.y+u}},viewportInitialized:!0}:QVe,[e,n])};function CE(){const t=eUe(),e=ir(),n=M.useCallback(()=>e.getState().getNodes().map(E=>({...E})),[]),r=M.useCallback(E=>e.getState().nodeInternals.get(E),[]),i=M.useCallback(()=>{const{edges:E=[]}=e.getState();return E.map(b=>({...b}))},[]),o=M.useCallback(E=>{const{edges:b=[]}=e.getState();return b.find(S=>S.id===E)},[]),s=M.useCallback(E=>{const{getNodes:b,setNodes:S,hasDefaultNodes:C,onNodesChange:R}=e.getState(),P=b(),O=typeof E=="function"?E(P):E;if(C)S(O);else if(R){const q=O.length===0?P.map(D=>({type:"remove",id:D.id})):O.map(D=>({item:D,type:"reset"}));R(q)}},[]),a=M.useCallback(E=>{const{edges:b=[],setEdges:S,hasDefaultEdges:C,onEdgesChange:R}=e.getState(),P=typeof E=="function"?E(b):E;if(C)S(P);else if(R){const O=P.length===0?b.map(q=>({type:"remove",id:q.id})):P.map(q=>({item:q,type:"reset"}));R(O)}},[]),u=M.useCallback(E=>{const b=Array.isArray(E)?E:[E],{getNodes:S,setNodes:C,hasDefaultNodes:R,onNodesChange:P}=e.getState();if(R){const q=[...S(),...b];C(q)}else if(P){const O=b.map(q=>({item:q,type:"add"}));P(O)}},[]),c=M.useCallback(E=>{const b=Array.isArray(E)?E:[E],{edges:S=[],setEdges:C,hasDefaultEdges:R,onEdgesChange:P}=e.getState();if(R)C([...S,...b]);else if(P){const O=b.map(q=>({item:q,type:"add"}));P(O)}},[]),f=M.useCallback(()=>{const{getNodes:E,edges:b=[],transform:S}=e.getState(),[C,R,P]=S;return{nodes:E().map(O=>({...O})),edges:b.map(O=>({...O})),viewport:{x:C,y:R,zoom:P}}},[]),h=M.useCallback(({nodes:E,edges:b})=>{const{nodeInternals:S,getNodes:C,edges:R,hasDefaultNodes:P,hasDefaultEdges:O,onNodesDelete:q,onEdgesDelete:D,onNodesChange:L,onEdgesChange:N}=e.getState(),U=(E||[]).map(X=>X.id),V=(b||[]).map(X=>X.id),$=C().reduce((X,K)=>{const te=K.parentNode||K.parentId,re=!U.includes(K.id)&&te&&X.find(G=>G.id===te);return(typeof K.deletable=="boolean"?K.deletable:!0)&&(U.includes(K.id)||re)&&X.push(K),X},[]),F=R.filter(X=>typeof X.deletable=="boolean"?X.deletable:!0),H=F.filter(X=>V.includes(X.id));if($||H){const X=cre($,F),K=[...H,...X],te=K.reduce((re,Y)=>(re.includes(Y.id)||re.push(Y.id),re),[]);if((O||P)&&(O&&e.setState({edges:R.filter(re=>!te.includes(re.id))}),P&&($.forEach(re=>{S.delete(re.id)}),e.setState({nodeInternals:new Map(S)}))),te.length>0&&(D==null||D(K),N&&N(te.map(re=>({id:re,type:"remove"})))),$.length>0&&(q==null||q($),L)){const re=$.map(Y=>({id:Y.id,type:"remove"}));L(re)}}},[]),g=M.useCallback(E=>{const b=bVe(E),S=b?null:e.getState().nodeInternals.get(E.id);return!b&&!S?[null,null,b]:[b?E:F$(S),S,b]},[]),_=M.useCallback((E,b=!0,S)=>{const[C,R,P]=g(E);return C?(S||e.getState().getNodes()).filter(O=>{if(!P&&(O.id===R.id||!O.positionAbsolute))return!1;const q=F$(O),D=h2(q,C);return b&&D>0||D>=C.width*C.height}):[]},[]),T=M.useCallback((E,b,S=!0)=>{const[C]=g(E);if(!C)return!1;const R=h2(C,b);return S&&R>0||R>=C.width*C.height},[]);return M.useMemo(()=>({...t,getNodes:n,getNode:r,getEdges:i,getEdge:o,setNodes:s,setEdges:a,addNodes:u,addEdges:c,toObject:f,deleteElements:h,getIntersectingNodes:_,isNodeIntersecting:T}),[t,n,r,i,o,s,a,u,c,f,h,_,T])}const tUe={actInsideInputWithModifier:!1};var nUe=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const n=ir(),{deleteElements:r}=CE(),i=ly(t,tUe),o=ly(e);M.useEffect(()=>{if(i){const{edges:s,getNodes:a}=n.getState(),u=a().filter(f=>f.selected),c=s.filter(f=>f.selected);r({nodes:u,edges:c}),n.setState({nodesSelectionActive:!1})}},[i]),M.useEffect(()=>{n.setState({multiSelectionActive:o})},[o])};function rUe(t){const e=ir();M.useEffect(()=>{let n;const r=()=>{var o,s;if(!t.current)return;const i=dL(t.current);(i.height===0||i.width===0)&&((s=(o=e.getState()).onError)==null||s.call(o,"004",Ha.error004())),e.setState({width:i.width||500,height:i.height||500})};return r(),window.addEventListener("resize",r),t.current&&(n=new ResizeObserver(()=>r()),n.observe(t.current)),()=>{window.removeEventListener("resize",r),n&&t.current&&n.unobserve(t.current)}},[])}const bL={position:"absolute",width:"100%",height:"100%",top:0,left:0},iUe=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,Z0=t=>({x:t.x,y:t.y,zoom:t.k}),_d=(t,e)=>t.target.closest(`.${e}`),J$=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),X$=t=>{const e=t.ctrlKey&&Gb()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},oUe=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),sUe=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:i=!0,zoomOnPinch:o=!0,panOnScroll:s=!1,panOnScrollSpeed:a=.5,panOnScrollMode:u=Nc.Free,zoomOnDoubleClick:c=!0,elementsSelectable:f,panOnDrag:h=!0,defaultViewport:g,translateExtent:_,minZoom:T,maxZoom:E,zoomActivationKeyCode:b,preventScrolling:S=!0,children:C,noWheelClassName:R,noPanClassName:P})=>{const O=M.useRef(),q=ir(),D=M.useRef(!1),L=M.useRef(!1),N=M.useRef(null),U=M.useRef({x:0,y:0,zoom:0}),{d3Zoom:V,d3Selection:$,d3ZoomHandler:F,userSelectionActive:H}=Mt(oUe,pr),X=ly(b),K=M.useRef(0),te=M.useRef(!1),re=M.useRef();return rUe(N),M.useEffect(()=>{if(N.current){const Y=N.current.getBoundingClientRect(),G=Jne().scaleExtent([T,E]).translateExtent(_),Q=ho(N.current).call(G),Z=Ma.translate(g.x,g.y).scale(Ih(g.zoom,T,E)),fe=[[0,0],[Y.width,Y.height]],J=G.constrain()(Z,fe,_);G.transform(Q,J),G.wheelDelta(X$),q.setState({d3Zoom:G,d3Selection:Q,d3ZoomHandler:Q.on("wheel.zoom"),transform:[J.x,J.y,J.k],domNode:N.current.closest(".react-flow")})}},[]),M.useEffect(()=>{$&&V&&(s&&!X&&!H?$.on("wheel.zoom",Y=>{if(_d(Y,R))return!1;Y.preventDefault(),Y.stopImmediatePropagation();const G=$.property("__zoom").k||1;if(Y.ctrlKey&&o){const Ce=$o(Y),ye=X$(Y),Ie=G*Math.pow(2,ye);V.scaleTo($,Ie,Ce,Y);return}const Q=Y.deltaMode===1?20:1;let Z=u===Nc.Vertical?0:Y.deltaX*Q,fe=u===Nc.Horizontal?0:Y.deltaY*Q;!Gb()&&Y.shiftKey&&u!==Nc.Vertical&&(Z=Y.deltaY*Q,fe=0),V.translateBy($,-(Z/G)*a,-(fe/G)*a,{internal:!0});const J=Z0($.property("__zoom")),{onViewportChangeStart:ne,onViewportChange:oe,onViewportChangeEnd:_e}=q.getState();clearTimeout(re.current),te.current||(te.current=!0,e==null||e(Y,J),ne==null||ne(J)),te.current&&(t==null||t(Y,J),oe==null||oe(J),re.current=setTimeout(()=>{n==null||n(Y,J),_e==null||_e(J),te.current=!1},150))},{passive:!1}):typeof F<"u"&&$.on("wheel.zoom",function(Y,G){if(!S&&Y.type==="wheel"&&!Y.ctrlKey||_d(Y,R))return null;Y.preventDefault(),F.call(this,Y,G)},{passive:!1}))},[H,s,u,$,V,F,X,o,S,R,e,t,n]),M.useEffect(()=>{V&&V.on("start",Y=>{var Z,fe;if(!Y.sourceEvent||Y.sourceEvent.internal)return null;K.current=(Z=Y.sourceEvent)==null?void 0:Z.button;const{onViewportChangeStart:G}=q.getState(),Q=Z0(Y.transform);D.current=!0,U.current=Q,((fe=Y.sourceEvent)==null?void 0:fe.type)==="mousedown"&&q.setState({paneDragging:!0}),G==null||G(Q),e==null||e(Y.sourceEvent,Q)})},[V,e]),M.useEffect(()=>{V&&(H&&!D.current?V.on("zoom",null):H||V.on("zoom",Y=>{var Q;const{onViewportChange:G}=q.getState();if(q.setState({transform:[Y.transform.x,Y.transform.y,Y.transform.k]}),L.current=!!(r&&J$(h,K.current??0)),(t||G)&&!((Q=Y.sourceEvent)!=null&&Q.internal)){const Z=Z0(Y.transform);G==null||G(Z),t==null||t(Y.sourceEvent,Z)}}))},[H,V,t,h,r]),M.useEffect(()=>{V&&V.on("end",Y=>{if(!Y.sourceEvent||Y.sourceEvent.internal)return null;const{onViewportChangeEnd:G}=q.getState();if(D.current=!1,q.setState({paneDragging:!1}),r&&J$(h,K.current??0)&&!L.current&&r(Y.sourceEvent),L.current=!1,(n||G)&&iUe(U.current,Y.transform)){const Q=Z0(Y.transform);U.current=Q,clearTimeout(O.current),O.current=setTimeout(()=>{G==null||G(Q),n==null||n(Y.sourceEvent,Q)},s?150:0)}})},[V,s,h,n,r]),M.useEffect(()=>{V&&V.filter(Y=>{const G=X||i,Q=o&&Y.ctrlKey;if((h===!0||Array.isArray(h)&&h.includes(1))&&Y.button===1&&Y.type==="mousedown"&&(_d(Y,"react-flow__node")||_d(Y,"react-flow__edge")))return!0;if(!h&&!G&&!s&&!c&&!o||H||!c&&Y.type==="dblclick"||_d(Y,R)&&Y.type==="wheel"||_d(Y,P)&&(Y.type!=="wheel"||s&&Y.type==="wheel"&&!X)||!o&&Y.ctrlKey&&Y.type==="wheel"||!G&&!s&&!Q&&Y.type==="wheel"||!h&&(Y.type==="mousedown"||Y.type==="touchstart")||Array.isArray(h)&&!h.includes(Y.button)&&Y.type==="mousedown")return!1;const Z=Array.isArray(h)&&h.includes(Y.button)||!Y.button||Y.button<=1;return(!Y.ctrlKey||Y.type==="wheel")&&Z})},[H,V,i,o,s,c,h,f,X]),ge.createElement("div",{className:"react-flow__renderer",ref:N,style:bL},C)},aUe=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function lUe(){const{userSelectionActive:t,userSelectionRect:e}=Mt(aUe,pr);return t&&e?ge.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function Q$(t,e){const n=e.parentNode||e.parentId,r=t.find(i=>i.id===n);if(r){const i=e.position.x+e.width-r.width,o=e.position.y+e.height-r.height;if(i>0||o>0||e.position.x<0||e.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,i>0&&(r.style.width+=i),o>0&&(r.style.height+=o),e.position.x<0){const s=Math.abs(e.position.x);r.position.x=r.position.x-s,r.style.width+=s,e.position.x=0}if(e.position.y<0){const s=Math.abs(e.position.y);r.position.y=r.position.y-s,r.style.height+=s,e.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function Cre(t,e){if(t.some(r=>r.type==="reset"))return t.filter(r=>r.type==="reset").map(r=>r.item);const n=t.filter(r=>r.type==="add").map(r=>r.item);return e.reduce((r,i)=>{const o=t.filter(a=>a.id===i.id);if(o.length===0)return r.push(i),r;const s={...i};for(const a of o)if(a)switch(a.type){case"select":{s.selected=a.selected;break}case"position":{typeof a.position<"u"&&(s.position=a.position),typeof a.positionAbsolute<"u"&&(s.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(s.dragging=a.dragging),s.expandParent&&Q$(r,s);break}case"dimensions":{typeof a.dimensions<"u"&&(s.width=a.dimensions.width,s.height=a.dimensions.height),typeof a.updateStyle<"u"&&(s.style={...s.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(s.resizing=a.resizing),s.expandParent&&Q$(r,s);break}case"remove":return r}return r.push(s),r},n)}function Ire(t,e){return Cre(t,e)}function uUe(t,e){return Cre(t,e)}const Wl=(t,e)=>({id:t,type:"select",selected:e});function Rd(t,e){return t.reduce((n,r)=>{const i=e.includes(r.id);return!r.selected&&i?(r.selected=!0,n.push(Wl(r.id,!0))):r.selected&&!i&&(r.selected=!1,n.push(Wl(r.id,!1))),n},[])}const t1=(t,e)=>n=>{n.target===e.current&&(t==null||t(n))},cUe=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),Rre=M.memo(({isSelecting:t,selectionMode:e=sy.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:i,onPaneClick:o,onPaneContextMenu:s,onPaneScroll:a,onPaneMouseEnter:u,onPaneMouseMove:c,onPaneMouseLeave:f,children:h})=>{const g=M.useRef(null),_=ir(),T=M.useRef(0),E=M.useRef(0),b=M.useRef(),{userSelectionActive:S,elementsSelectable:C,dragging:R}=Mt(cUe,pr),P=()=>{_.setState({userSelectionActive:!1,userSelectionRect:null}),T.current=0,E.current=0},O=F=>{o==null||o(F),_.getState().resetSelectedElements(),_.setState({nodesSelectionActive:!1})},q=F=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){F.preventDefault();return}s==null||s(F)},D=a?F=>a(F):void 0,L=F=>{const{resetSelectedElements:H,domNode:X}=_.getState();if(b.current=X==null?void 0:X.getBoundingClientRect(),!C||!t||F.button!==0||F.target!==g.current||!b.current)return;const{x:K,y:te}=au(F,b.current);H(),_.setState({userSelectionRect:{width:0,height:0,startX:K,startY:te,x:K,y:te}}),r==null||r(F)},N=F=>{const{userSelectionRect:H,nodeInternals:X,edges:K,transform:te,onNodesChange:re,onEdgesChange:Y,nodeOrigin:G,getNodes:Q}=_.getState();if(!t||!b.current||!H)return;_.setState({userSelectionActive:!0,nodesSelectionActive:!1});const Z=au(F,b.current),fe=H.startX??0,J=H.startY??0,ne={...H,x:Z.x<fe?Z.x:fe,y:Z.y<J?Z.y:J,width:Math.abs(Z.x-fe),height:Math.abs(Z.y-J)},oe=Q(),_e=ure(X,ne,te,e===sy.Partial,!0,G),Ce=cre(_e,K).map(Ie=>Ie.id),ye=_e.map(Ie=>Ie.id);if(T.current!==ye.length){T.current=ye.length;const Ie=Rd(oe,ye);Ie.length&&(re==null||re(Ie))}if(E.current!==Ce.length){E.current=Ce.length;const Ie=Rd(K,Ce);Ie.length&&(Y==null||Y(Ie))}_.setState({userSelectionRect:ne})},U=F=>{if(F.button!==0)return;const{userSelectionRect:H}=_.getState();!S&&H&&F.target===g.current&&(O==null||O(F)),_.setState({nodesSelectionActive:T.current>0}),P(),i==null||i(F)},V=F=>{S&&(_.setState({nodesSelectionActive:T.current>0}),i==null||i(F)),P()},$=C&&(t||S);return ge.createElement("div",{className:Mr(["react-flow__pane",{dragging:R,selection:t}]),onClick:$?void 0:t1(O,g),onContextMenu:t1(q,g),onWheel:t1(D,g),onMouseEnter:$?void 0:u,onMouseDown:$?L:void 0,onMouseMove:$?N:c,onMouseUp:$?U:void 0,onMouseLeave:$?V:f,ref:g,style:bL},h,ge.createElement(lUe,null))});Rre.displayName="Pane";function Pre(t,e){const n=t.parentNode||t.parentId;if(!n)return!1;const r=e.get(n);return r?r.selected?!0:Pre(r,e):!1}function Z$(t,e,n){let r=t;do{if(r!=null&&r.matches(e))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function fUe(t,e,n,r){return Array.from(t.values()).filter(i=>(i.selected||i.id===r)&&(!i.parentNode||i.parentId||!Pre(i,t))&&(i.draggable||e&&typeof i.draggable>"u")).map(i=>{var o,s;return{id:i.id,position:i.position||{x:0,y:0},positionAbsolute:i.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((o=i.positionAbsolute)==null?void 0:o.x)??0),y:n.y-(((s=i.positionAbsolute)==null?void 0:s.y)??0)},delta:{x:0,y:0},extent:i.extent,parentNode:i.parentNode||i.parentId,parentId:i.parentNode||i.parentId,width:i.width,height:i.height,expandParent:i.expandParent}})}function dUe(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function Nre(t,e,n,r,i=[0,0],o){const s=dUe(t,t.extent||r);let a=s;const u=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(u&&t.width&&t.height){const h=n.get(u),{x:g,y:_}=Fc(h,i).positionAbsolute;a=h&&yo(g)&&yo(_)&&yo(h.width)&&yo(h.height)?[[g+t.width*i[0],_+t.height*i[1]],[g+h.width-t.width+t.width*i[0],_+h.height-t.height+t.height*i[1]]]:a}else o==null||o("005",Ha.error005()),a=s;else if(t.extent&&u&&t.extent!=="parent"){const h=n.get(u),{x:g,y:_}=Fc(h,i).positionAbsolute;a=[[t.extent[0][0]+g,t.extent[0][1]+_],[t.extent[1][0]+g,t.extent[1][1]+_]]}let c={x:0,y:0};if(u){const h=n.get(u);c=Fc(h,i).positionAbsolute}const f=a&&a!=="parent"?hL(e,a):e;return{position:{x:f.x-c.x,y:f.y-c.y},positionAbsolute:f}}function n1({nodeId:t,dragItems:e,nodeInternals:n}){const r=e.map(i=>({...n.get(i.id),position:i.position,positionAbsolute:i.positionAbsolute}));return[t?r.find(i=>i.id===t):r[0],r]}const ez=(t,e,n,r)=>{const i=e.querySelectorAll(t);if(!i||!i.length)return null;const o=Array.from(i),s=e.getBoundingClientRect(),a={x:s.width*r[0],y:s.height*r[1]};return o.map(u=>{const c=u.getBoundingClientRect();return{id:u.getAttribute("data-handleid"),position:u.getAttribute("data-handlepos"),x:(c.left-s.left-a.x)/n,y:(c.top-s.top-a.y)/n,...dL(u)}})};function Um(t,e,n){return n===void 0?n:r=>{const i=e().nodeInternals.get(t);i&&n(r,{...i})}}function v2({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:o,multiSelectionActive:s,nodeInternals:a,onError:u}=e.getState(),c=a.get(t);if(!c){u==null||u("012",Ha.error012(t));return}e.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&s)&&(o({nodes:[c],edges:[]}),requestAnimationFrame(()=>{var f;return(f=r==null?void 0:r.current)==null?void 0:f.blur()})):i([t])}function hUe(){const t=ir();return M.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:i,snapToGrid:o}=t.getState(),s=n.touches?n.touches[0].clientX:n.clientX,a=n.touches?n.touches[0].clientY:n.clientY,u={x:(s-r[0])/r[2],y:(a-r[1])/r[2]};return{xSnapped:o?i[0]*Math.round(u.x/i[0]):u.x,ySnapped:o?i[1]*Math.round(u.y/i[1]):u.y,...u}},[])}function r1(t){return(e,n,r)=>t==null?void 0:t(e,r)}function Mre({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:o,selectNodesOnDrag:s}){const a=ir(),[u,c]=M.useState(!1),f=M.useRef([]),h=M.useRef({x:null,y:null}),g=M.useRef(0),_=M.useRef(null),T=M.useRef({x:0,y:0}),E=M.useRef(null),b=M.useRef(!1),S=M.useRef(!1),C=M.useRef(!1),R=hUe();return M.useEffect(()=>{if(t!=null&&t.current){const P=ho(t.current),O=({x:L,y:N})=>{const{nodeInternals:U,onNodeDrag:V,onSelectionDrag:$,updateNodePositions:F,nodeExtent:H,snapGrid:X,snapToGrid:K,nodeOrigin:te,onError:re}=a.getState();h.current={x:L,y:N};let Y=!1,G={x:0,y:0,x2:0,y2:0};if(f.current.length>1&&H){const Z=AE(f.current,te);G=oy(Z)}if(f.current=f.current.map(Z=>{const fe={x:L-Z.distance.x,y:N-Z.distance.y};K&&(fe.x=X[0]*Math.round(fe.x/X[0]),fe.y=X[1]*Math.round(fe.y/X[1]));const J=[[H[0][0],H[0][1]],[H[1][0],H[1][1]]];f.current.length>1&&H&&!Z.extent&&(J[0][0]=Z.positionAbsolute.x-G.x+H[0][0],J[1][0]=Z.positionAbsolute.x+(Z.width??0)-G.x2+H[1][0],J[0][1]=Z.positionAbsolute.y-G.y+H[0][1],J[1][1]=Z.positionAbsolute.y+(Z.height??0)-G.y2+H[1][1]);const ne=Nre(Z,fe,U,J,te,re);return Y=Y||Z.position.x!==ne.position.x||Z.position.y!==ne.position.y,Z.position=ne.position,Z.positionAbsolute=ne.positionAbsolute,Z}),!Y)return;F(f.current,!0,!0),c(!0);const Q=i?V:r1($);if(Q&&E.current){const[Z,fe]=n1({nodeId:i,dragItems:f.current,nodeInternals:U});Q(E.current,Z,fe)}},q=()=>{if(!_.current)return;const[L,N]=Qne(T.current,_.current);if(L!==0||N!==0){const{transform:U,panBy:V}=a.getState();h.current.x=(h.current.x??0)-L/U[2],h.current.y=(h.current.y??0)-N/U[2],V({x:L,y:N})&&O(h.current)}g.current=requestAnimationFrame(q)},D=L=>{var te;const{nodeInternals:N,multiSelectionActive:U,nodesDraggable:V,unselectNodesAndEdges:$,onNodeDragStart:F,onSelectionDragStart:H}=a.getState();S.current=!0;const X=i?F:r1(H);(!s||!o)&&!U&&i&&((te=N.get(i))!=null&&te.selected||$()),i&&o&&s&&v2({id:i,store:a,nodeRef:t});const K=R(L);if(h.current=K,f.current=fUe(N,V,K,i),X&&f.current){const[re,Y]=n1({nodeId:i,dragItems:f.current,nodeInternals:N});X(L.sourceEvent,re,Y)}};if(e)P.on(".drag",null);else{const L=JOe().on("start",N=>{const{domNode:U,nodeDragThreshold:V}=a.getState();V===0&&D(N),C.current=!1;const $=R(N);h.current=$,_.current=(U==null?void 0:U.getBoundingClientRect())||null,T.current=au(N.sourceEvent,_.current)}).on("drag",N=>{var F,H;const U=R(N),{autoPanOnNodeDrag:V,nodeDragThreshold:$}=a.getState();if(N.sourceEvent.type==="touchmove"&&N.sourceEvent.touches.length>1&&(C.current=!0),!C.current){if(!b.current&&S.current&&V&&(b.current=!0,q()),!S.current){const X=U.xSnapped-(((F=h==null?void 0:h.current)==null?void 0:F.x)??0),K=U.ySnapped-(((H=h==null?void 0:h.current)==null?void 0:H.y)??0);Math.sqrt(X*X+K*K)>$&&D(N)}(h.current.x!==U.xSnapped||h.current.y!==U.ySnapped)&&f.current&&S.current&&(E.current=N.sourceEvent,T.current=au(N.sourceEvent,_.current),O(U))}}).on("end",N=>{if(!(!S.current||C.current)&&(c(!1),b.current=!1,S.current=!1,cancelAnimationFrame(g.current),f.current)){const{updateNodePositions:U,nodeInternals:V,onNodeDragStop:$,onSelectionDragStop:F}=a.getState(),H=i?$:r1(F);if(U(f.current,!1,!1),H){const[X,K]=n1({nodeId:i,dragItems:f.current,nodeInternals:V});H(N.sourceEvent,X,K)}}}).filter(N=>{const U=N.target;return!N.button&&(!n||!Z$(U,`.${n}`,t))&&(!r||Z$(U,r,t))});return P.call(L),()=>{P.on(".drag",null)}}}},[t,e,n,r,o,a,i,s,R]),u}function Dre(){const t=ir();return M.useCallback(n=>{const{nodeInternals:r,nodeExtent:i,updateNodePositions:o,getNodes:s,snapToGrid:a,snapGrid:u,onError:c,nodesDraggable:f}=t.getState(),h=s().filter(C=>C.selected&&(C.draggable||f&&typeof C.draggable>"u")),g=a?u[0]:5,_=a?u[1]:5,T=n.isShiftPressed?4:1,E=n.x*g*T,b=n.y*_*T,S=h.map(C=>{if(C.positionAbsolute){const R={x:C.positionAbsolute.x+E,y:C.positionAbsolute.y+b};a&&(R.x=u[0]*Math.round(R.x/u[0]),R.y=u[1]*Math.round(R.y/u[1]));const{positionAbsolute:P,position:O}=Nre(C,R,r,i,void 0,c);C.position=O,C.positionAbsolute=P}return C});o(S,!0,!1)},[])}const Bd={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var qm=t=>{const e=({id:n,type:r,data:i,xPos:o,yPos:s,xPosOrigin:a,yPosOrigin:u,selected:c,onClick:f,onMouseEnter:h,onMouseMove:g,onMouseLeave:_,onContextMenu:T,onDoubleClick:E,style:b,className:S,isDraggable:C,isSelectable:R,isConnectable:P,isFocusable:O,selectNodesOnDrag:q,sourcePosition:D,targetPosition:L,hidden:N,resizeObserver:U,dragHandle:V,zIndex:$,isParent:F,noDragClassName:H,noPanClassName:X,initialized:K,disableKeyboardA11y:te,ariaLabel:re,rfId:Y,hasHandleBounds:G})=>{const Q=ir(),Z=M.useRef(null),fe=M.useRef(null),J=M.useRef(D),ne=M.useRef(L),oe=M.useRef(r),_e=R||C||f||h||g||_,Ce=Dre(),ye=Um(n,Q.getState,h),Ie=Um(n,Q.getState,g),Le=Um(n,Q.getState,_),be=Um(n,Q.getState,T),Qe=Um(n,Q.getState,E),Be=Pe=>{const{nodeDragThreshold:qe}=Q.getState();if(R&&(!q||!C||qe>0)&&v2({id:n,store:Q,nodeRef:Z}),f){const ot=Q.getState().nodeInternals.get(n);ot&&f(Pe,{...ot})}},Ve=Pe=>{if(!p2(Pe)&&!te)if(nre.includes(Pe.key)&&R){const qe=Pe.key==="Escape";v2({id:n,store:Q,unselect:qe,nodeRef:Z})}else C&&c&&Object.prototype.hasOwnProperty.call(Bd,Pe.key)&&(Q.setState({ariaLiveMessage:`Moved selected node ${Pe.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~o}, y: ${~~s}`}),Ce({x:Bd[Pe.key].x,y:Bd[Pe.key].y,isShiftPressed:Pe.shiftKey}))};M.useEffect(()=>()=>{fe.current&&(U==null||U.unobserve(fe.current),fe.current=null)},[]),M.useEffect(()=>{if(Z.current&&!N){const Pe=Z.current;(!K||!G||fe.current!==Pe)&&(fe.current&&(U==null||U.unobserve(fe.current)),U==null||U.observe(Pe),fe.current=Pe)}},[N,K,G]),M.useEffect(()=>{const Pe=oe.current!==r,qe=J.current!==D,ot=ne.current!==L;Z.current&&(Pe||qe||ot)&&(Pe&&(oe.current=r),qe&&(J.current=D),ot&&(ne.current=L),Q.getState().updateNodeDimensions([{id:n,nodeElement:Z.current,forceUpdate:!0}]))},[n,r,D,L]);const at=Mre({nodeRef:Z,disabled:N||!C,noDragClassName:H,handleSelector:V,nodeId:n,isSelectable:R,selectNodesOnDrag:q});return N?null:ge.createElement("div",{className:Mr(["react-flow__node",`react-flow__node-${r}`,{[X]:C},S,{selected:c,selectable:R,parent:F,dragging:at}]),ref:Z,style:{zIndex:$,transform:`translate(${a}px,${u}px)`,pointerEvents:_e?"all":"none",visibility:K?"visible":"hidden",...b},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:ye,onMouseMove:Ie,onMouseLeave:Le,onContextMenu:be,onClick:Be,onDoubleClick:Qe,onKeyDown:O?Ve:void 0,tabIndex:O?0:void 0,role:O?"button":void 0,"aria-describedby":te?void 0:`${Ere}-${Y}`,"aria-label":re},ge.createElement(CVe,{value:n},ge.createElement(t,{id:n,data:i,type:r,xPos:o,yPos:s,selected:c,isConnectable:P,sourcePosition:D,targetPosition:L,dragging:at,dragHandle:V,zIndex:$})))};return e.displayName="NodeWrapper",M.memo(e)};const pUe=t=>{const e=t.getNodes().filter(n=>n.selected);return{...AE(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function mUe({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=ir(),{width:i,height:o,x:s,y:a,transformString:u,userSelectionActive:c}=Mt(pUe,pr),f=Dre(),h=M.useRef(null);if(M.useEffect(()=>{var T;n||(T=h.current)==null||T.focus({preventScroll:!0})},[n]),Mre({nodeRef:h}),c||!i||!o)return null;const g=t?T=>{const E=r.getState().getNodes().filter(b=>b.selected);t(T,E)}:void 0,_=T=>{Object.prototype.hasOwnProperty.call(Bd,T.key)&&f({x:Bd[T.key].x,y:Bd[T.key].y,isShiftPressed:T.shiftKey})};return ge.createElement("div",{className:Mr(["react-flow__nodesselection","react-flow__container",e]),style:{transform:u}},ge.createElement("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:g,tabIndex:n?void 0:-1,onKeyDown:n?void 0:_,style:{width:i,height:o,top:a,left:s}}))}var gUe=M.memo(mUe);const yUe=t=>t.nodesSelectionActive,kre=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:o,onPaneScroll:s,deleteKeyCode:a,onMove:u,onMoveStart:c,onMoveEnd:f,selectionKeyCode:h,selectionOnDrag:g,selectionMode:_,onSelectionStart:T,onSelectionEnd:E,multiSelectionKeyCode:b,panActivationKeyCode:S,zoomActivationKeyCode:C,elementsSelectable:R,zoomOnScroll:P,zoomOnPinch:O,panOnScroll:q,panOnScrollSpeed:D,panOnScrollMode:L,zoomOnDoubleClick:N,panOnDrag:U,defaultViewport:V,translateExtent:$,minZoom:F,maxZoom:H,preventScrolling:X,onSelectionContextMenu:K,noWheelClassName:te,noPanClassName:re,disableKeyboardA11y:Y})=>{const G=Mt(yUe),Q=ly(h),Z=ly(S),fe=Z||U,J=Z||q,ne=Q||g&&fe!==!0;return nUe({deleteKeyCode:a,multiSelectionKeyCode:b}),ge.createElement(sUe,{onMove:u,onMoveStart:c,onMoveEnd:f,onPaneContextMenu:o,elementsSelectable:R,zoomOnScroll:P,zoomOnPinch:O,panOnScroll:J,panOnScrollSpeed:D,panOnScrollMode:L,zoomOnDoubleClick:N,panOnDrag:!Q&&fe,defaultViewport:V,translateExtent:$,minZoom:F,maxZoom:H,zoomActivationKeyCode:C,preventScrolling:X,noWheelClassName:te,noPanClassName:re},ge.createElement(Rre,{onSelectionStart:T,onSelectionEnd:E,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:o,onPaneScroll:s,panOnDrag:fe,isSelecting:!!ne,selectionMode:_},t,G&&ge.createElement(gUe,{onSelectionContextMenu:K,noPanClassName:re,disableKeyboardA11y:Y})))};kre.displayName="FlowRenderer";var vUe=M.memo(kre);function _Ue(t){return Mt(M.useCallback(n=>t?ure(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function bUe(t){const e={input:qm(t.input||vre),default:qm(t.default||y2),output:qm(t.output||bre),group:qm(t.group||_L)},n={},r=Object.keys(t).filter(i=>!["input","default","output","group"].includes(i)).reduce((i,o)=>(i[o]=qm(t[o]||y2),i),n);return{...e,...r}}const wUe=({x:t,y:e,width:n,height:r,origin:i})=>!n||!r?{x:t,y:e}:i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:t,y:e}:{x:t-n*i[0],y:e-r*i[1]},EUe=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),Ore=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,updateNodeDimensions:o,onError:s}=Mt(EUe,pr),a=_Ue(t.onlyRenderVisibleElements),u=M.useRef(),c=M.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const f=new ResizeObserver(h=>{const g=h.map(_=>({id:_.target.getAttribute("data-id"),nodeElement:_.target,forceUpdate:!0}));o(g)});return u.current=f,f},[]);return M.useEffect(()=>()=>{var f;(f=u==null?void 0:u.current)==null||f.disconnect()},[]),ge.createElement("div",{className:"react-flow__nodes",style:bL},a.map(f=>{var O,q,D;let h=f.type||"default";t.nodeTypes[h]||(s==null||s("003",Ha.error003(h)),h="default");const g=t.nodeTypes[h]||t.nodeTypes.default,_=!!(f.draggable||e&&typeof f.draggable>"u"),T=!!(f.selectable||i&&typeof f.selectable>"u"),E=!!(f.connectable||n&&typeof f.connectable>"u"),b=!!(f.focusable||r&&typeof f.focusable>"u"),S=t.nodeExtent?hL(f.positionAbsolute,t.nodeExtent):f.positionAbsolute,C=(S==null?void 0:S.x)??0,R=(S==null?void 0:S.y)??0,P=wUe({x:C,y:R,width:f.width??0,height:f.height??0,origin:t.nodeOrigin});return ge.createElement(g,{key:f.id,id:f.id,className:f.className,style:f.style,type:h,data:f.data,sourcePosition:f.sourcePosition||Xe.Bottom,targetPosition:f.targetPosition||Xe.Top,hidden:f.hidden,xPos:C,yPos:R,xPosOrigin:P.x,yPosOrigin:P.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!f.selected,isDraggable:_,isSelectable:T,isConnectable:E,isFocusable:b,resizeObserver:c,dragHandle:f.dragHandle,zIndex:((O=f[An])==null?void 0:O.z)??0,isParent:!!((q=f[An])!=null&&q.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!f.width&&!!f.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:f.ariaLabel,hasHandleBounds:!!((D=f[An])!=null&&D.handleBounds)})}))};Ore.displayName="NodeRenderer";var TUe=M.memo(Ore);const xUe=(t,e,n)=>n===Xe.Left?t-e:n===Xe.Right?t+e:t,SUe=(t,e,n)=>n===Xe.Top?t-e:n===Xe.Bottom?t+e:t,tz="react-flow__edgeupdater",nz=({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:o,onMouseOut:s,type:a})=>ge.createElement("circle",{onMouseDown:i,onMouseEnter:o,onMouseOut:s,className:Mr([tz,`${tz}-${a}`]),cx:xUe(e,r,t),cy:SUe(n,r,t),r,stroke:"transparent",fill:"transparent"}),AUe=()=>!0;var bd=t=>{const e=({id:n,className:r,type:i,data:o,onClick:s,onEdgeDoubleClick:a,selected:u,animated:c,label:f,labelStyle:h,labelShowBg:g,labelBgStyle:_,labelBgPadding:T,labelBgBorderRadius:E,style:b,source:S,target:C,sourceX:R,sourceY:P,targetX:O,targetY:q,sourcePosition:D,targetPosition:L,elementsSelectable:N,hidden:U,sourceHandleId:V,targetHandleId:$,onContextMenu:F,onMouseEnter:H,onMouseMove:X,onMouseLeave:K,reconnectRadius:te,onReconnect:re,onReconnectStart:Y,onReconnectEnd:G,markerEnd:Q,markerStart:Z,rfId:fe,ariaLabel:J,isFocusable:ne,isReconnectable:oe,pathOptions:_e,interactionWidth:Ce,disableKeyboardA11y:ye})=>{const Ie=M.useRef(null),[Le,be]=M.useState(!1),[Qe,Be]=M.useState(!1),Ve=ir(),at=M.useMemo(()=>`url('#${m2(Z,fe)}')`,[Z,fe]),Pe=M.useMemo(()=>`url('#${m2(Q,fe)}')`,[Q,fe]);if(U)return null;const qe=Pt=>{var Wn;const{edges:Ft,addSelectedEdges:lt,unselectNodesAndEdges:wt,multiSelectionActive:Kn}=Ve.getState(),Tn=Ft.find(Gi=>Gi.id===n);Tn&&(N&&(Ve.setState({nodesSelectionActive:!1}),Tn.selected&&Kn?(wt({nodes:[],edges:[Tn]}),(Wn=Ie.current)==null||Wn.blur()):lt([n])),s&&s(Pt,Tn))},ot=Vm(n,Ve.getState,a),Tt=Vm(n,Ve.getState,F),En=Vm(n,Ve.getState,H),Nn=Vm(n,Ve.getState,X),Rt=Vm(n,Ve.getState,K),Mn=(Pt,Ft)=>{if(Pt.button!==0)return;const{edges:lt,isValidConnection:wt}=Ve.getState(),Kn=Ft?C:S,Tn=(Ft?$:V)||null,Wn=Ft?"target":"source",Gi=wt||AUe,Ws=Ft,oi=lt.find(ji=>ji.id===n);Be(!0),Y==null||Y(Pt,oi,Wn);const as=ji=>{Be(!1),G==null||G(ji,oi,Wn)};pre({event:Pt,handleId:Tn,nodeId:Kn,onConnect:ji=>re==null?void 0:re(oi,ji),isTarget:Ws,getState:Ve.getState,setState:Ve.setState,isValidConnection:Gi,edgeUpdaterType:Wn,onReconnectEnd:as})},Te=Pt=>Mn(Pt,!0),ke=Pt=>Mn(Pt,!1),Ue=()=>be(!0),Oe=()=>be(!1),Ye=!N&&!s,Ct=Pt=>{var Ft;if(!ye&&nre.includes(Pt.key)&&N){const{unselectNodesAndEdges:lt,addSelectedEdges:wt,edges:Kn}=Ve.getState();Pt.key==="Escape"?((Ft=Ie.current)==null||Ft.blur(),lt({edges:[Kn.find(Wn=>Wn.id===n)]})):wt([n])}};return ge.createElement("g",{className:Mr(["react-flow__edge",`react-flow__edge-${i}`,r,{selected:u,animated:c,inactive:Ye,updating:Le}]),onClick:qe,onDoubleClick:ot,onContextMenu:Tt,onMouseEnter:En,onMouseMove:Nn,onMouseLeave:Rt,onKeyDown:ne?Ct:void 0,tabIndex:ne?0:void 0,role:ne?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":J===null?void 0:J||`Edge from ${S} to ${C}`,"aria-describedby":ne?`${Tre}-${fe}`:void 0,ref:Ie},!Qe&&ge.createElement(t,{id:n,source:S,target:C,selected:u,animated:c,label:f,labelStyle:h,labelShowBg:g,labelBgStyle:_,labelBgPadding:T,labelBgBorderRadius:E,data:o,style:b,sourceX:R,sourceY:P,targetX:O,targetY:q,sourcePosition:D,targetPosition:L,sourceHandleId:V,targetHandleId:$,markerStart:at,markerEnd:Pe,pathOptions:_e,interactionWidth:Ce}),oe&&ge.createElement(ge.Fragment,null,(oe==="source"||oe===!0)&&ge.createElement(nz,{position:D,centerX:R,centerY:P,radius:te,onMouseDown:Te,onMouseEnter:Ue,onMouseOut:Oe,type:"source"}),(oe==="target"||oe===!0)&&ge.createElement(nz,{position:L,centerX:O,centerY:q,radius:te,onMouseDown:ke,onMouseEnter:Ue,onMouseOut:Oe,type:"target"})))};return e.displayName="EdgeWrapper",M.memo(e)};function CUe(t){const e={default:bd(t.default||Kb),straight:bd(t.bezier||gL),step:bd(t.step||mL),smoothstep:bd(t.step||SE),simplebezier:bd(t.simplebezier||pL)},n={},r=Object.keys(t).filter(i=>!["default","bezier"].includes(i)).reduce((i,o)=>(i[o]=bd(t[o]||Kb),i),n);return{...e,...r}}function rz(t,e,n=null){const r=((n==null?void 0:n.x)||0)+e.x,i=((n==null?void 0:n.y)||0)+e.y,o=(n==null?void 0:n.width)||e.width,s=(n==null?void 0:n.height)||e.height;switch(t){case Xe.Top:return{x:r+o/2,y:i};case Xe.Right:return{x:r+o,y:i+s/2};case Xe.Bottom:return{x:r+o/2,y:i+s};case Xe.Left:return{x:r,y:i+s/2}}}function iz(t,e){return t?t.length===1||!e?t[0]:e&&t.find(n=>n.id===e)||null:null}const IUe=(t,e,n,r,i,o)=>{const s=rz(n,t,e),a=rz(o,r,i);return{sourceX:s.x,sourceY:s.y,targetX:a.x,targetY:a.y}};function RUe({sourcePos:t,targetPos:e,sourceWidth:n,sourceHeight:r,targetWidth:i,targetHeight:o,width:s,height:a,transform:u}){const c={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+n,e.x+i),y2:Math.max(t.y+r,e.y+o)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const f=oy({x:(0-u[0])/u[2],y:(0-u[1])/u[2],width:s/u[2],height:a/u[2]}),h=Math.max(0,Math.min(f.x2,c.x2)-Math.max(f.x,c.x)),g=Math.max(0,Math.min(f.y2,c.y2)-Math.max(f.y,c.y));return Math.ceil(h*g)>0}function oz(t){var r,i,o,s,a;const e=((r=t==null?void 0:t[An])==null?void 0:r.handleBounds)||null,n=e&&(t==null?void 0:t.width)&&(t==null?void 0:t.height)&&typeof((i=t==null?void 0:t.positionAbsolute)==null?void 0:i.x)<"u"&&typeof((o=t==null?void 0:t.positionAbsolute)==null?void 0:o.y)<"u";return[{x:((s=t==null?void 0:t.positionAbsolute)==null?void 0:s.x)||0,y:((a=t==null?void 0:t.positionAbsolute)==null?void 0:a.y)||0,width:(t==null?void 0:t.width)||0,height:(t==null?void 0:t.height)||0},e,!!n]}const PUe=[{level:0,isMaxLevel:!0,edges:[]}];function NUe(t,e,n=!1){let r=-1;const i=t.reduce((s,a)=>{var f,h;const u=yo(a.zIndex);let c=u?a.zIndex:0;if(n){const g=e.get(a.target),_=e.get(a.source),T=a.selected||(g==null?void 0:g.selected)||(_==null?void 0:_.selected),E=Math.max(((f=_==null?void 0:_[An])==null?void 0:f.z)||0,((h=g==null?void 0:g[An])==null?void 0:h.z)||0,1e3);c=(u?a.zIndex:0)+(T?E:0)}return s[c]?s[c].push(a):s[c]=[a],r=c>r?c:r,s},{}),o=Object.entries(i).map(([s,a])=>{const u=+s;return{edges:a,level:u,isMaxLevel:u===r}});return o.length===0?PUe:o}function MUe(t,e,n){const r=Mt(M.useCallback(i=>t?i.edges.filter(o=>{const s=e.get(o.source),a=e.get(o.target);return(s==null?void 0:s.width)&&(s==null?void 0:s.height)&&(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&RUe({sourcePos:s.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:s.width,sourceHeight:s.height,targetWidth:a.width,targetHeight:a.height,width:i.width,height:i.height,transform:i.transform})}):i.edges,[t,e]));return NUe(r,e,n)}const DUe=({color:t="none",strokeWidth:e=1})=>ge.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),kUe=({color:t="none",strokeWidth:e=1})=>ge.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),sz={[ay.Arrow]:DUe,[ay.ArrowClosed]:kUe};function OUe(t){const e=ir();return M.useMemo(()=>{var i,o;return Object.prototype.hasOwnProperty.call(sz,t)?sz[t]:((o=(i=e.getState()).onError)==null||o.call(i,"009",Ha.error009(t)),null)},[t])}const LUe=({id:t,type:e,color:n,width:r=12.5,height:i=12.5,markerUnits:o="strokeWidth",strokeWidth:s,orient:a="auto-start-reverse"})=>{const u=OUe(e);return u?ge.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:a,refX:"0",refY:"0"},ge.createElement(u,{color:n,strokeWidth:s})):null},VUe=({defaultColor:t,rfId:e})=>n=>{const r=[];return n.edges.reduce((i,o)=>([o.markerStart,o.markerEnd].forEach(s=>{if(s&&typeof s=="object"){const a=m2(s,e);r.includes(a)||(i.push({id:a,color:s.color||t,...s}),r.push(a))}}),i),[]).sort((i,o)=>i.id.localeCompare(o.id))},Lre=({defaultColor:t,rfId:e})=>{const n=Mt(M.useCallback(VUe({defaultColor:t,rfId:e}),[t,e]),(r,i)=>!(r.length!==i.length||r.some((o,s)=>o.id!==i[s].id)));return ge.createElement("defs",null,n.map(r=>ge.createElement(LUe,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};Lre.displayName="MarkerDefinitions";var UUe=M.memo(Lre);const qUe=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),Vre=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:r,edgeTypes:i,noPanClassName:o,onEdgeContextMenu:s,onEdgeMouseEnter:a,onEdgeMouseMove:u,onEdgeMouseLeave:c,onEdgeClick:f,onEdgeDoubleClick:h,onReconnect:g,onReconnectStart:_,onReconnectEnd:T,reconnectRadius:E,children:b,disableKeyboardA11y:S})=>{const{edgesFocusable:C,edgesUpdatable:R,elementsSelectable:P,width:O,height:q,connectionMode:D,nodeInternals:L,onError:N}=Mt(qUe,pr),U=MUe(e,L,n);return O?ge.createElement(ge.Fragment,null,U.map(({level:V,edges:$,isMaxLevel:F})=>ge.createElement("svg",{key:V,style:{zIndex:V},width:O,height:q,className:"react-flow__edges react-flow__container"},F&&ge.createElement(UUe,{defaultColor:t,rfId:r}),ge.createElement("g",null,$.map(H=>{const[X,K,te]=oz(L.get(H.source)),[re,Y,G]=oz(L.get(H.target));if(!te||!G)return null;let Q=H.type||"default";i[Q]||(N==null||N("011",Ha.error011(Q)),Q="default");const Z=i[Q]||i.default,fe=D===af.Strict?Y.target:(Y.target??[]).concat(Y.source??[]),J=iz(K.source,H.sourceHandle),ne=iz(fe,H.targetHandle),oe=(J==null?void 0:J.position)||Xe.Bottom,_e=(ne==null?void 0:ne.position)||Xe.Top,Ce=!!(H.focusable||C&&typeof H.focusable>"u"),ye=H.reconnectable||H.updatable,Ie=typeof g<"u"&&(ye||R&&typeof ye>"u");if(!J||!ne)return N==null||N("008",Ha.error008(J,H)),null;const{sourceX:Le,sourceY:be,targetX:Qe,targetY:Be}=IUe(X,J,oe,re,ne,_e);return ge.createElement(Z,{key:H.id,id:H.id,className:Mr([H.className,o]),type:Q,data:H.data,selected:!!H.selected,animated:!!H.animated,hidden:!!H.hidden,label:H.label,labelStyle:H.labelStyle,labelShowBg:H.labelShowBg,labelBgStyle:H.labelBgStyle,labelBgPadding:H.labelBgPadding,labelBgBorderRadius:H.labelBgBorderRadius,style:H.style,source:H.source,target:H.target,sourceHandleId:H.sourceHandle,targetHandleId:H.targetHandle,markerEnd:H.markerEnd,markerStart:H.markerStart,sourceX:Le,sourceY:be,targetX:Qe,targetY:Be,sourcePosition:oe,targetPosition:_e,elementsSelectable:P,onContextMenu:s,onMouseEnter:a,onMouseMove:u,onMouseLeave:c,onClick:f,onEdgeDoubleClick:h,onReconnect:g,onReconnectStart:_,onReconnectEnd:T,reconnectRadius:E,rfId:r,ariaLabel:H.ariaLabel,isFocusable:Ce,isReconnectable:Ie,pathOptions:"pathOptions"in H?H.pathOptions:void 0,interactionWidth:H.interactionWidth,disableKeyboardA11y:S})})))),b):null};Vre.displayName="EdgeRenderer";var FUe=M.memo(Vre);const BUe=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function $Ue({children:t}){const e=Mt(BUe);return ge.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function zUe(t){const e=CE(),n=M.useRef(!1);M.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const HUe={[Xe.Left]:Xe.Right,[Xe.Right]:Xe.Left,[Xe.Top]:Xe.Bottom,[Xe.Bottom]:Xe.Top},Ure=({nodeId:t,handleType:e,style:n,type:r=Xl.Bezier,CustomComponent:i,connectionStatus:o})=>{var q,D,L;const{fromNode:s,handleId:a,toX:u,toY:c,connectionMode:f}=Mt(M.useCallback(N=>({fromNode:N.nodeInternals.get(t),handleId:N.connectionHandleId,toX:(N.connectionPosition.x-N.transform[0])/N.transform[2],toY:(N.connectionPosition.y-N.transform[1])/N.transform[2],connectionMode:N.connectionMode}),[t]),pr),h=(q=s==null?void 0:s[An])==null?void 0:q.handleBounds;let g=h==null?void 0:h[e];if(f===af.Loose&&(g=g||(h==null?void 0:h[e==="source"?"target":"source"])),!s||!g)return null;const _=a?g.find(N=>N.id===a):g[0],T=_?_.x+_.width/2:(s.width??0)/2,E=_?_.y+_.height/2:s.height??0,b=(((D=s.positionAbsolute)==null?void 0:D.x)??0)+T,S=(((L=s.positionAbsolute)==null?void 0:L.y)??0)+E,C=_==null?void 0:_.position,R=C?HUe[C]:null;if(!C||!R)return null;if(i)return ge.createElement(i,{connectionLineType:r,connectionLineStyle:n,fromNode:s,fromHandle:_,fromX:b,fromY:S,toX:u,toY:c,fromPosition:C,toPosition:R,connectionStatus:o});let P="";const O={sourceX:b,sourceY:S,sourcePosition:C,targetX:u,targetY:c,targetPosition:R};return r===Xl.Bezier?[P]=are(O):r===Xl.Step?[P]=jb({...O,borderRadius:0}):r===Xl.SmoothStep?[P]=jb(O):r===Xl.SimpleBezier?[P]=sre(O):P=`M${b},${S} ${u},${c}`,ge.createElement("path",{d:P,fill:"none",className:"react-flow__connection-path",style:n})};Ure.displayName="ConnectionLine";const GUe=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function jUe({containerStyle:t,style:e,type:n,component:r}){const{nodeId:i,handleType:o,nodesConnectable:s,width:a,height:u,connectionStatus:c}=Mt(GUe,pr);return!(i&&o&&a&&s)?null:ge.createElement("svg",{style:t,width:a,height:u,className:"react-flow__edges react-flow__connectionline react-flow__container"},ge.createElement("g",{className:Mr(["react-flow__connection",c])},ge.createElement(Ure,{nodeId:i,handleType:o,style:e,type:n,CustomComponent:r,connectionStatus:c})))}function az(t,e){return M.useRef(null),ir(),M.useMemo(()=>e(t),[t])}const qre=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:r,onMoveEnd:i,onInit:o,onNodeClick:s,onEdgeClick:a,onNodeDoubleClick:u,onEdgeDoubleClick:c,onNodeMouseEnter:f,onNodeMouseMove:h,onNodeMouseLeave:g,onNodeContextMenu:_,onSelectionContextMenu:T,onSelectionStart:E,onSelectionEnd:b,connectionLineType:S,connectionLineStyle:C,connectionLineComponent:R,connectionLineContainerStyle:P,selectionKeyCode:O,selectionOnDrag:q,selectionMode:D,multiSelectionKeyCode:L,panActivationKeyCode:N,zoomActivationKeyCode:U,deleteKeyCode:V,onlyRenderVisibleElements:$,elementsSelectable:F,selectNodesOnDrag:H,defaultViewport:X,translateExtent:K,minZoom:te,maxZoom:re,preventScrolling:Y,defaultMarkerColor:G,zoomOnScroll:Q,zoomOnPinch:Z,panOnScroll:fe,panOnScrollSpeed:J,panOnScrollMode:ne,zoomOnDoubleClick:oe,panOnDrag:_e,onPaneClick:Ce,onPaneMouseEnter:ye,onPaneMouseMove:Ie,onPaneMouseLeave:Le,onPaneScroll:be,onPaneContextMenu:Qe,onEdgeContextMenu:Be,onEdgeMouseEnter:Ve,onEdgeMouseMove:at,onEdgeMouseLeave:Pe,onReconnect:qe,onReconnectStart:ot,onReconnectEnd:Tt,reconnectRadius:En,noDragClassName:Nn,noWheelClassName:Rt,noPanClassName:Mn,elevateEdgesOnSelect:Te,disableKeyboardA11y:ke,nodeOrigin:Ue,nodeExtent:Oe,rfId:Ye})=>{const Ct=az(t,bUe),Pt=az(e,CUe);return zUe(o),ge.createElement(vUe,{onPaneClick:Ce,onPaneMouseEnter:ye,onPaneMouseMove:Ie,onPaneMouseLeave:Le,onPaneContextMenu:Qe,onPaneScroll:be,deleteKeyCode:V,selectionKeyCode:O,selectionOnDrag:q,selectionMode:D,onSelectionStart:E,onSelectionEnd:b,multiSelectionKeyCode:L,panActivationKeyCode:N,zoomActivationKeyCode:U,elementsSelectable:F,onMove:n,onMoveStart:r,onMoveEnd:i,zoomOnScroll:Q,zoomOnPinch:Z,zoomOnDoubleClick:oe,panOnScroll:fe,panOnScrollSpeed:J,panOnScrollMode:ne,panOnDrag:_e,defaultViewport:X,translateExtent:K,minZoom:te,maxZoom:re,onSelectionContextMenu:T,preventScrolling:Y,noDragClassName:Nn,noWheelClassName:Rt,noPanClassName:Mn,disableKeyboardA11y:ke},ge.createElement($Ue,null,ge.createElement(FUe,{edgeTypes:Pt,onEdgeClick:a,onEdgeDoubleClick:c,onlyRenderVisibleElements:$,onEdgeContextMenu:Be,onEdgeMouseEnter:Ve,onEdgeMouseMove:at,onEdgeMouseLeave:Pe,onReconnect:qe,onReconnectStart:ot,onReconnectEnd:Tt,reconnectRadius:En,defaultMarkerColor:G,noPanClassName:Mn,elevateEdgesOnSelect:!!Te,disableKeyboardA11y:ke,rfId:Ye},ge.createElement(jUe,{style:C,type:S,component:R,containerStyle:P})),ge.createElement("div",{className:"react-flow__edgelabel-renderer"}),ge.createElement(TUe,{nodeTypes:Ct,onNodeClick:s,onNodeDoubleClick:u,onNodeMouseEnter:f,onNodeMouseMove:h,onNodeMouseLeave:g,onNodeContextMenu:_,selectNodesOnDrag:H,onlyRenderVisibleElements:$,noPanClassName:Mn,noDragClassName:Nn,disableKeyboardA11y:ke,nodeOrigin:Ue,nodeExtent:Oe,rfId:Ye})))};qre.displayName="GraphView";var KUe=M.memo(qre);const _2=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Gl={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:_2,nodeExtent:_2,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:af.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:wVe,isValidConnection:void 0},WUe=()=>lke((t,e)=>({...Gl,setNodes:n=>{const{nodeInternals:r,nodeOrigin:i,elevateNodesOnSelect:o}=e();t({nodeInternals:e1(n,r,i,o)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=e();t({edges:n.map(i=>({...r,...i}))})},setDefaultNodesAndEdges:(n,r)=>{const i=typeof n<"u",o=typeof r<"u",s=i?e1(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:s,edges:o?r:[],hasDefaultNodes:i,hasDefaultEdges:o})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:i,fitViewOnInit:o,fitViewOnInitDone:s,fitViewOnInitOptions:a,domNode:u,nodeOrigin:c}=e(),f=u==null?void 0:u.querySelector(".react-flow__viewport");if(!f)return;const h=window.getComputedStyle(f),{m22:g}=new window.DOMMatrixReadOnly(h.transform),_=n.reduce((E,b)=>{const S=i.get(b.id);if(S!=null&&S.hidden)i.set(S.id,{...S,[An]:{...S[An],handleBounds:void 0}});else if(S){const C=dL(b.nodeElement);!!(C.width&&C.height&&(S.width!==C.width||S.height!==C.height||b.forceUpdate))&&(i.set(S.id,{...S,[An]:{...S[An],handleBounds:{source:ez(".source",b.nodeElement,g,c),target:ez(".target",b.nodeElement,g,c)}},...C}),E.push({id:S.id,type:"dimensions",dimensions:C}))}return E},[]);Sre(i,c);const T=s||o&&!s&&Are(e,{initial:!0,...a});t({nodeInternals:new Map(i),fitViewOnInitDone:T}),(_==null?void 0:_.length)>0&&(r==null||r(_))},updateNodePositions:(n,r=!0,i=!1)=>{const{triggerNodeChanges:o}=e(),s=n.map(a=>{const u={id:a.id,type:"position",dragging:i};return r&&(u.positionAbsolute=a.positionAbsolute,u.position=a.position),u});o(s)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:i,hasDefaultNodes:o,nodeOrigin:s,getNodes:a,elevateNodesOnSelect:u}=e();if(n!=null&&n.length){if(o){const c=Ire(n,a()),f=e1(c,i,s,u);t({nodeInternals:f})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:i,getNodes:o}=e();let s,a=null;r?s=n.map(u=>Wl(u,!0)):(s=Rd(o(),n),a=Rd(i,[])),Q0({changedNodes:s,changedEdges:a,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:i,getNodes:o}=e();let s,a=null;r?s=n.map(u=>Wl(u,!0)):(s=Rd(i,n),a=Rd(o(),[])),Q0({changedNodes:a,changedEdges:s,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:i,getNodes:o}=e(),s=n||o(),a=r||i,u=s.map(f=>(f.selected=!1,Wl(f.id,!1))),c=a.map(f=>Wl(f.id,!1));Q0({changedNodes:u,changedEdges:c,get:e,set:t})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:i}=e();r==null||r.scaleExtent([n,i]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:i}=e();r==null||r.scaleExtent([i,n]),t({maxZoom:n})},setTranslateExtent:n=>{var r;(r=e().d3Zoom)==null||r.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=e(),o=r().filter(a=>a.selected).map(a=>Wl(a.id,!1)),s=n.filter(a=>a.selected).map(a=>Wl(a.id,!1));Q0({changedNodes:o,changedEdges:s,get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:r}=e();r.forEach(i=>{i.positionAbsolute=hL(i.position,n)}),t({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:i,height:o,d3Zoom:s,d3Selection:a,translateExtent:u}=e();if(!s||!a||!n.x&&!n.y)return!1;const c=Ma.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),f=[[0,0],[i,o]],h=s==null?void 0:s.constrain()(c,f,u);return s.transform(a,h),r[0]!==h.x||r[1]!==h.y||r[2]!==h.k},cancelConnection:()=>t({connectionNodeId:Gl.connectionNodeId,connectionHandleId:Gl.connectionHandleId,connectionHandleType:Gl.connectionHandleType,connectionStatus:Gl.connectionStatus,connectionStartHandle:Gl.connectionStartHandle,connectionEndHandle:Gl.connectionEndHandle}),reset:()=>t({...Gl})}),Object.is),wL=({children:t})=>{const e=M.useRef(null);return e.current||(e.current=WUe()),ge.createElement(pVe,{value:e.current},t)};wL.displayName="ReactFlowProvider";const Fre=({children:t})=>M.useContext(xE)?ge.createElement(ge.Fragment,null,t):ge.createElement(wL,null,t);Fre.displayName="ReactFlowWrapper";const YUe={input:vre,default:y2,output:bre,group:_L},JUe={default:Kb,straight:gL,step:mL,smoothstep:SE,simplebezier:pL},XUe=[0,0],QUe=[15,15],ZUe={x:0,y:0,zoom:1},e4e={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Bre=M.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:o=YUe,edgeTypes:s=JUe,onNodeClick:a,onEdgeClick:u,onInit:c,onMove:f,onMoveStart:h,onMoveEnd:g,onConnect:_,onConnectStart:T,onConnectEnd:E,onClickConnectStart:b,onClickConnectEnd:S,onNodeMouseEnter:C,onNodeMouseMove:R,onNodeMouseLeave:P,onNodeContextMenu:O,onNodeDoubleClick:q,onNodeDragStart:D,onNodeDrag:L,onNodeDragStop:N,onNodesDelete:U,onEdgesDelete:V,onSelectionChange:$,onSelectionDragStart:F,onSelectionDrag:H,onSelectionDragStop:X,onSelectionContextMenu:K,onSelectionStart:te,onSelectionEnd:re,connectionMode:Y=af.Strict,connectionLineType:G=Xl.Bezier,connectionLineStyle:Q,connectionLineComponent:Z,connectionLineContainerStyle:fe,deleteKeyCode:J="Backspace",selectionKeyCode:ne="Shift",selectionOnDrag:oe=!1,selectionMode:_e=sy.Full,panActivationKeyCode:Ce="Space",multiSelectionKeyCode:ye=Gb()?"Meta":"Control",zoomActivationKeyCode:Ie=Gb()?"Meta":"Control",snapToGrid:Le=!1,snapGrid:be=QUe,onlyRenderVisibleElements:Qe=!1,selectNodesOnDrag:Be=!0,nodesDraggable:Ve,nodesConnectable:at,nodesFocusable:Pe,nodeOrigin:qe=XUe,edgesFocusable:ot,edgesUpdatable:Tt,elementsSelectable:En,defaultViewport:Nn=ZUe,minZoom:Rt=.5,maxZoom:Mn=2,translateExtent:Te=_2,preventScrolling:ke=!0,nodeExtent:Ue,defaultMarkerColor:Oe="#b1b1b7",zoomOnScroll:Ye=!0,zoomOnPinch:Ct=!0,panOnScroll:Pt=!1,panOnScrollSpeed:Ft=.5,panOnScrollMode:lt=Nc.Free,zoomOnDoubleClick:wt=!0,panOnDrag:Kn=!0,onPaneClick:Tn,onPaneMouseEnter:Wn,onPaneMouseMove:Gi,onPaneMouseLeave:Ws,onPaneScroll:oi,onPaneContextMenu:as,children:an,onEdgeContextMenu:ji,onEdgeDoubleClick:ls,onEdgeMouseEnter:us,onEdgeMouseMove:ku,onEdgeMouseLeave:Ou,onEdgeUpdate:Po,onEdgeUpdateStart:fp,onEdgeUpdateEnd:Ki,onReconnect:mn,onReconnectStart:Yn,onReconnectEnd:No,reconnectRadius:Ys=10,edgeUpdaterRadius:Js=10,onNodesChange:dp,onEdgesChange:vi,noDragClassName:cs="nodrag",noWheelClassName:ul="nowheel",noPanClassName:_i="nopan",fitView:Wi=!1,fitViewOptions:fs,connectOnClick:ds=!0,attributionPosition:gn,proOptions:Af,defaultEdgeOptions:Xs,elevateNodesOnSelect:Yi=!0,elevateEdgesOnSelect:Ji=!1,disableKeyboardA11y:hs=!1,autoPanOnConnect:Xi=!0,autoPanOnNodeDrag:cl=!0,connectionRadius:hp=20,isValidConnection:Qs,onError:Zs,style:si,id:ps,nodeDragThreshold:fl,...Mo},dl)=>{const ms=ps||"1";return ge.createElement("div",{...Mo,style:{...si,...e4e},ref:dl,className:Mr(["react-flow",i]),"data-testid":"rf__wrapper",id:ps},ge.createElement(Fre,null,ge.createElement(KUe,{onInit:c,onMove:f,onMoveStart:h,onMoveEnd:g,onNodeClick:a,onEdgeClick:u,onNodeMouseEnter:C,onNodeMouseMove:R,onNodeMouseLeave:P,onNodeContextMenu:O,onNodeDoubleClick:q,nodeTypes:o,edgeTypes:s,connectionLineType:G,connectionLineStyle:Q,connectionLineComponent:Z,connectionLineContainerStyle:fe,selectionKeyCode:ne,selectionOnDrag:oe,selectionMode:_e,deleteKeyCode:J,multiSelectionKeyCode:ye,panActivationKeyCode:Ce,zoomActivationKeyCode:Ie,onlyRenderVisibleElements:Qe,selectNodesOnDrag:Be,defaultViewport:Nn,translateExtent:Te,minZoom:Rt,maxZoom:Mn,preventScrolling:ke,zoomOnScroll:Ye,zoomOnPinch:Ct,zoomOnDoubleClick:wt,panOnScroll:Pt,panOnScrollSpeed:Ft,panOnScrollMode:lt,panOnDrag:Kn,onPaneClick:Tn,onPaneMouseEnter:Wn,onPaneMouseMove:Gi,onPaneMouseLeave:Ws,onPaneScroll:oi,onPaneContextMenu:as,onSelectionContextMenu:K,onSelectionStart:te,onSelectionEnd:re,onEdgeContextMenu:ji,onEdgeDoubleClick:ls,onEdgeMouseEnter:us,onEdgeMouseMove:ku,onEdgeMouseLeave:Ou,onReconnect:mn??Po,onReconnectStart:Yn??fp,onReconnectEnd:No??Ki,reconnectRadius:Ys??Js,defaultMarkerColor:Oe,noDragClassName:cs,noWheelClassName:ul,noPanClassName:_i,elevateEdgesOnSelect:Ji,rfId:ms,disableKeyboardA11y:hs,nodeOrigin:qe,nodeExtent:Ue}),ge.createElement(HVe,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:_,onConnectStart:T,onConnectEnd:E,onClickConnectStart:b,onClickConnectEnd:S,nodesDraggable:Ve,nodesConnectable:at,nodesFocusable:Pe,edgesFocusable:ot,edgesUpdatable:Tt,elementsSelectable:En,elevateNodesOnSelect:Yi,minZoom:Rt,maxZoom:Mn,nodeExtent:Ue,onNodesChange:dp,onEdgesChange:vi,snapToGrid:Le,snapGrid:be,connectionMode:Y,translateExtent:Te,connectOnClick:ds,defaultEdgeOptions:Xs,fitView:Wi,fitViewOptions:fs,onNodesDelete:U,onEdgesDelete:V,onNodeDragStart:D,onNodeDrag:L,onNodeDragStop:N,onSelectionDrag:H,onSelectionDragStart:F,onSelectionDragStop:X,noPanClassName:_i,nodeOrigin:qe,rfId:ms,autoPanOnConnect:Xi,autoPanOnNodeDrag:cl,onError:Zs,connectionRadius:hp,isValidConnection:Qs,nodeDragThreshold:fl}),ge.createElement($Ve,{onSelectionChange:$}),an,ge.createElement(gVe,{proOptions:Af,position:gn}),ge.createElement(YVe,{rfId:ms,disableKeyboardA11y:hs})))});Bre.displayName="ReactFlow";const t4e=t=>{var e;return(e=t.domNode)==null?void 0:e.querySelector(".react-flow__edgelabel-renderer")};function n4e({children:t}){const e=Mt(t4e);return e?EK.createPortal(t,e):null}function $re(t){return e=>{const[n,r]=M.useState(e),i=M.useCallback(o=>r(s=>t(o,s)),[]);return[n,r,i]}}const r4e=$re(Ire),i4e=$re(uUe),zre=({id:t,x:e,y:n,width:r,height:i,style:o,color:s,strokeColor:a,strokeWidth:u,className:c,borderRadius:f,shapeRendering:h,onClick:g,selected:_})=>{const{background:T,backgroundColor:E}=o||{},b=s||T||E;return ge.createElement("rect",{className:Mr(["react-flow__minimap-node",{selected:_},c]),x:e,y:n,rx:f,ry:f,width:r,height:i,fill:b,stroke:a,strokeWidth:u,shapeRendering:h,onClick:g?S=>g(S,t):void 0})};zre.displayName="MiniMapNode";var o4e=M.memo(zre);const s4e=t=>t.nodeOrigin,a4e=t=>t.getNodes().filter(e=>!e.hidden&&e.width&&e.height),i1=t=>t instanceof Function?t:()=>t;function l4e({nodeStrokeColor:t="transparent",nodeColor:e="#e2e2e2",nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i=2,nodeComponent:o=o4e,onClick:s}){const a=Mt(a4e,pr),u=Mt(s4e),c=i1(e),f=i1(t),h=i1(n),g=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return ge.createElement(ge.Fragment,null,a.map(_=>{const{x:T,y:E}=Fc(_,u).positionAbsolute;return ge.createElement(o,{key:_.id,x:T,y:E,width:_.width,height:_.height,style:_.style,selected:_.selected,className:h(_),color:c(_),borderRadius:r,strokeColor:f(_),strokeWidth:i,shapeRendering:g,onClick:s,id:_.id})}))}var u4e=M.memo(l4e);const c4e=200,f4e=150,d4e=t=>{const e=t.getNodes(),n={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:n,boundingRect:e.length>0?_Ve(AE(e,t.nodeOrigin),n):n,rfId:t.rfId}},h4e="react-flow__minimap-desc";function Hre({style:t,className:e,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:i="",nodeBorderRadius:o=5,nodeStrokeWidth:s=2,nodeComponent:a,maskColor:u="rgb(240, 240, 240, 0.6)",maskStrokeColor:c="none",maskStrokeWidth:f=1,position:h="bottom-right",onClick:g,onNodeClick:_,pannable:T=!1,zoomable:E=!1,ariaLabel:b="React Flow mini map",inversePan:S=!1,zoomStep:C=10,offsetScale:R=5}){const P=ir(),O=M.useRef(null),{boundingRect:q,viewBB:D,rfId:L}=Mt(d4e,pr),N=(t==null?void 0:t.width)??c4e,U=(t==null?void 0:t.height)??f4e,V=q.width/N,$=q.height/U,F=Math.max(V,$),H=F*N,X=F*U,K=R*F,te=q.x-(H-q.width)/2-K,re=q.y-(X-q.height)/2-K,Y=H+K*2,G=X+K*2,Q=`${h4e}-${L}`,Z=M.useRef(0);Z.current=F,M.useEffect(()=>{if(O.current){const ne=ho(O.current),oe=ye=>{const{transform:Ie,d3Selection:Le,d3Zoom:be}=P.getState();if(ye.sourceEvent.type!=="wheel"||!Le||!be)return;const Qe=-ye.sourceEvent.deltaY*(ye.sourceEvent.deltaMode===1?.05:ye.sourceEvent.deltaMode?1:.002)*C,Be=Ie[2]*Math.pow(2,Qe);be.scaleTo(Le,Be)},_e=ye=>{const{transform:Ie,d3Selection:Le,d3Zoom:be,translateExtent:Qe,width:Be,height:Ve}=P.getState();if(ye.sourceEvent.type!=="mousemove"||!Le||!be)return;const at=Z.current*Math.max(1,Ie[2])*(S?-1:1),Pe={x:Ie[0]-ye.sourceEvent.movementX*at,y:Ie[1]-ye.sourceEvent.movementY*at},qe=[[0,0],[Be,Ve]],ot=Ma.translate(Pe.x,Pe.y).scale(Ie[2]),Tt=be.constrain()(ot,qe,Qe);be.transform(Le,Tt)},Ce=Jne().on("zoom",T?_e:null).on("zoom.wheel",E?oe:null);return ne.call(Ce),()=>{ne.on("zoom",null)}}},[T,E,S,C]);const fe=g?ne=>{const oe=$o(ne);g(ne,{x:oe[0],y:oe[1]})}:void 0,J=_?(ne,oe)=>{const _e=P.getState().nodeInternals.get(oe);_(ne,_e)}:void 0;return ge.createElement(fL,{position:h,style:t,className:Mr(["react-flow__minimap",e]),"data-testid":"rf__minimap"},ge.createElement("svg",{width:N,height:U,viewBox:`${te} ${re} ${Y} ${G}`,role:"img","aria-labelledby":Q,ref:O,onClick:fe},b&&ge.createElement("title",{id:Q},b),ge.createElement(u4e,{onClick:J,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:o,nodeClassName:i,nodeStrokeWidth:s,nodeComponent:a}),ge.createElement("path",{className:"react-flow__minimap-mask",d:`M${te-K},${re-K}h${Y+K*2}v${G+K*2}h${-Y-K*2}z
        M${D.x},${D.y}h${D.width}v${D.height}h${-D.width}z`,fill:u,fillRule:"evenodd",stroke:c,strokeWidth:f,pointerEvents:"none"})))}Hre.displayName="MiniMap";var p4e=M.memo(Hre);function m4e(){return ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},ge.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function g4e(){return ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},ge.createElement("path",{d:"M0 0h32v4.2H0z"}))}function y4e(){return ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},ge.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function v4e(){return ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ge.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function _4e(){return ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ge.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Zm=({children:t,className:e,...n})=>ge.createElement("button",{type:"button",className:Mr(["react-flow__controls-button",e]),...n},t);Zm.displayName="ControlButton";const b4e=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),Gre=({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:o,onZoomOut:s,onFitView:a,onInteractiveChange:u,className:c,children:f,position:h="bottom-left"})=>{const g=ir(),[_,T]=M.useState(!1),{isInteractive:E,minZoomReached:b,maxZoomReached:S}=Mt(b4e,pr),{zoomIn:C,zoomOut:R,fitView:P}=CE();if(M.useEffect(()=>{T(!0)},[]),!_)return null;const O=()=>{C(),o==null||o()},q=()=>{R(),s==null||s()},D=()=>{P(i),a==null||a()},L=()=>{g.setState({nodesDraggable:!E,nodesConnectable:!E,elementsSelectable:!E}),u==null||u(!E)};return ge.createElement(fL,{className:Mr(["react-flow__controls",c]),position:h,style:t,"data-testid":"rf__controls"},e&&ge.createElement(ge.Fragment,null,ge.createElement(Zm,{onClick:O,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:S},ge.createElement(m4e,null)),ge.createElement(Zm,{onClick:q,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:b},ge.createElement(g4e,null))),n&&ge.createElement(Zm,{className:"react-flow__controls-fitview",onClick:D,title:"fit view","aria-label":"fit view"},ge.createElement(y4e,null)),r&&ge.createElement(Zm,{className:"react-flow__controls-interactive",onClick:L,title:"toggle interactivity","aria-label":"toggle interactivity"},E?ge.createElement(_4e,null):ge.createElement(v4e,null)),f)};Gre.displayName="Controls";var w4e=M.memo(Gre),Yo;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(Yo||(Yo={}));function E4e({color:t,dimensions:e,lineWidth:n}){return ge.createElement("path",{stroke:t,strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function T4e({color:t,radius:e}){return ge.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const x4e={[Yo.Dots]:"#91919a",[Yo.Lines]:"#eee",[Yo.Cross]:"#e2e2e2"},S4e={[Yo.Dots]:1,[Yo.Lines]:1,[Yo.Cross]:6},A4e=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function jre({id:t,variant:e=Yo.Dots,gap:n=20,size:r,lineWidth:i=1,offset:o=2,color:s,style:a,className:u}){const c=M.useRef(null),{transform:f,patternId:h}=Mt(A4e,pr),g=s||x4e[e],_=r||S4e[e],T=e===Yo.Dots,E=e===Yo.Cross,b=Array.isArray(n)?n:[n,n],S=[b[0]*f[2]||1,b[1]*f[2]||1],C=_*f[2],R=E?[C,C]:S,P=T?[C/o,C/o]:[R[0]/o,R[1]/o];return ge.createElement("svg",{className:Mr(["react-flow__background",u]),style:{...a,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:c,"data-testid":"rf__background"},ge.createElement("pattern",{id:h+t,x:f[0]%S[0],y:f[1]%S[1],width:S[0],height:S[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${P[0]},-${P[1]})`},T?ge.createElement(T4e,{color:g,radius:C/o}):ge.createElement(E4e,{dimensions:R,color:g,lineWidth:i})),ge.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${h+t})`}))}jre.displayName="Background";var C4e=M.memo(jre);const I4e=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-stone-400 hover:text-red-500 transition-colors",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})}),R4e=()=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-stone-400 hover:text-amber-400 transition-colors",viewBox:"0 0 20 20",fill:"currentColor",children:[I.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),I.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]}),P4e=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),b2=({nodeId:t,dsl:e,selectedNodeId:n,renamingNodeId:r,renamingValue:i,setRenamingValue:o,onSelectNode:s,onStartRename:a,onFinishRename:u,onDeleteNode:c,level:f=0,visited:h})=>{const g=e.nodes[t];if(!g||h.has(t))return null;h.add(t);const _=()=>{u(t,i)},T=(g.choices||[]).map(E=>E.to).concat((g.branch||[]).map(E=>E.to)).concat(g.fallback?[g.fallback]:[]).filter((E,b,S)=>E&&e.nodes[E]&&S.indexOf(E)===b);return I.jsxs("div",{className:"relative",children:[f>0&&I.jsx("div",{className:"absolute top-0 left-[-11px] h-full w-px bg-stone-600"}),f>0&&I.jsx("div",{className:"absolute top-4 left-[-11px] w-3 h-px bg-stone-600"}),I.jsx("div",{style:{paddingLeft:`${f*1}rem`},children:I.jsxs("div",{className:`flex items-center justify-between p-2 rounded-md transition-colors group ${n===t?"bg-amber-500":"bg-stone-700 hover:bg-stone-600"}`,children:[r===t?I.jsx("input",{type:"text",value:i,onChange:E=>o(E.target.value),onBlur:_,onKeyDown:E=>E.key==="Enter"&&_(),className:"bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-2 py-1 text-sm w-full",autoFocus:!0}):I.jsx("button",{onClick:()=>s(t),className:`w-full text-left font-mono text-sm ${n===t?"text-stone-900 font-bold":""}`,children:t}),t!=="start"&&r!==t&&I.jsxs("div",{className:"flex items-center opacity-0 group-hover:opacity-100 transition-opacity",children:[I.jsx("button",{onClick:()=>a(t),className:"p-1",children:I.jsx(R4e,{})}),I.jsx("button",{onClick:()=>{window.confirm(`Вы уверены, что хотите удалить узел "${t}"? Это действие необратимо.`)&&c(t)},className:"p-1",children:I.jsx(I4e,{})})]})]})}),I.jsx("div",{className:"mt-1",children:T.map(E=>I.jsx(b2,{nodeId:E,dsl:e,selectedNodeId:n,renamingNodeId:r,renamingValue:i,setRenamingValue:o,onSelectNode:s,onStartRename:a,onFinishRename:u,onDeleteNode:c,level:f+1,visited:h},E))})]})},N4e=({dsl:t,selectedNodeId:e,onSelectNode:n,onCreateNode:r,onRenameNode:i,onDeleteNode:o})=>{const[s,a]=M.useState(null),[u,c]=M.useState(""),f=Object.keys(t.nodes),h=new Set,g=f.includes("start")?"start":f[0]||null,_=()=>{const b=prompt("Введите ID нового узла (латиницей, без пробелов):");if(b&&/^[a-zA-Z0-9_]+$/.test(b)){if(t.nodes[b]){alert("Узел с таким ID уже существует.");return}r(b)}else b&&alert("Неверный формат ID. Используйте только латинские буквы, цифры и подчеркивание.")},T=b=>{a(b),c(b)},E=(b,S)=>{S.trim()&&S.trim()!==b&&(/^[a-zA-Z0-9_]+$/.test(S)?t.nodes[S]?alert("Узел с таким ID уже существует."):i(b,S.trim()):alert("Неверный формат ID. Используйте только латинские буквы, цифры и подчеркивание.")),a(null),c("")};return I.jsxs("div",{className:"flex flex-col h-full",children:[I.jsx("h3",{className:"font-display text-2xl text-amber-400 mb-4 flex-shrink-0",children:"Узлы Сценария"}),I.jsxs("div",{className:"flex-grow overflow-y-auto space-y-1 pr-2",children:[g&&t.nodes[g]&&I.jsx(b2,{nodeId:g,dsl:t,selectedNodeId:e,onSelectNode:n,onStartRename:T,onFinishRename:E,onDeleteNode:o,renamingNodeId:s,renamingValue:u,setRenamingValue:c,visited:h}),f.filter(b=>!h.has(b)).map(b=>I.jsx(b2,{nodeId:b,dsl:t,selectedNodeId:e,onSelectNode:n,onStartRename:T,onFinishRename:E,onDeleteNode:o,renamingNodeId:s,renamingValue:u,setRenamingValue:c,visited:h},b))]}),I.jsxs("button",{onClick:_,className:"mt-4 w-full flex items-center justify-center bg-stone-600 hover:bg-stone-500 text-stone-200 font-semibold py-2 px-4 rounded-md transition-colors flex-shrink-0",children:[I.jsx(P4e,{})," Создать узел"]})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let M4e,D4e;function k4e(){return{geminiUrl:M4e,vertexUrl:D4e}}function O4e(t,e,n,r){var i,o;if(!(t!=null&&t.baseUrl)){const s=k4e();return e?(i=s.vertexUrl)!==null&&i!==void 0?i:n:(o=s.geminiUrl)!==null&&o!==void 0?o:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bf{}function He(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function y(t,e,n){for(let o=0;o<e.length-1;o++){const s=e[o];if(s.endsWith("[]")){const a=s.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[a])){const u=t[a];if(Array.isArray(n))for(let c=0;c<u.length;c++){const f=u[c];y(f,e.slice(o+1),n[c])}else for(const c of u)y(c,e.slice(o+1),n)}return}else if(s.endsWith("[0]")){const a=s.slice(0,-3);a in t||(t[a]=[{}]);const u=t[a];y(u[0],e.slice(o+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function m(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const r=e[n];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in t){const o=t[i];return Array.isArray(o)?o.map(s=>m(s,e.slice(n+1))):void 0}else return}else t=t[r]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function EL(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function L4e(t){const e={},n=m(t,["operationName"]);n!=null&&y(e,["_url","operationName"],n);const r=m(t,["config"]);return r!=null&&y(e,["config"],r),e}function V4e(t){const e={},n=m(t,["operationName"]);n!=null&&y(e,["operationName"],n);const r=m(t,["resourceName"]);r!=null&&y(e,["_url","resourceName"],r);const i=m(t,["config"]);return i!=null&&y(e,["config"],i),e}function U4e(t){const e={},n=m(t,["operationName"]);n!=null&&y(e,["_url","operationName"],n);const r=m(t,["config"]);return r!=null&&y(e,["config"],r),e}function q4e(t){const e={},n=m(t,["video","uri"]);n!=null&&y(e,["uri"],n);const r=m(t,["video","encodedVideo"]);r!=null&&y(e,["videoBytes"],EL(r));const i=m(t,["encoding"]);return i!=null&&y(e,["mimeType"],i),e}function F4e(t){const e={},n=m(t,["_self"]);return n!=null&&y(e,["video"],q4e(n)),e}function B4e(t){const e={},n=m(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>F4e(s))),y(e,["generatedVideos"],o)}const r=m(t,["raiMediaFilteredCount"]);r!=null&&y(e,["raiMediaFilteredCount"],r);const i=m(t,["raiMediaFilteredReasons"]);return i!=null&&y(e,["raiMediaFilteredReasons"],i),e}function $4e(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const r=m(t,["metadata"]);r!=null&&y(e,["metadata"],r);const i=m(t,["done"]);i!=null&&y(e,["done"],i);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const s=m(t,["response","generateVideoResponse"]);return s!=null&&y(e,["response"],B4e(s)),e}function z4e(t){const e={},n=m(t,["gcsUri"]);n!=null&&y(e,["uri"],n);const r=m(t,["bytesBase64Encoded"]);r!=null&&y(e,["videoBytes"],EL(r));const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function H4e(t){const e={},n=m(t,["_self"]);return n!=null&&y(e,["video"],z4e(n)),e}function G4e(t){const e={},n=m(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>H4e(s))),y(e,["generatedVideos"],o)}const r=m(t,["raiMediaFilteredCount"]);r!=null&&y(e,["raiMediaFilteredCount"],r);const i=m(t,["raiMediaFilteredReasons"]);return i!=null&&y(e,["raiMediaFilteredReasons"],i),e}function j4e(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const r=m(t,["metadata"]);r!=null&&y(e,["metadata"],r);const i=m(t,["done"]);i!=null&&y(e,["done"],i);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const s=m(t,["response"]);return s!=null&&y(e,["response"],G4e(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var lz;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(lz||(lz={}));var uz;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(uz||(uz={}));var $e;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})($e||($e={}));var cz;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(cz||(cz={}));var fz;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(fz||(fz={}));var dz;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(dz||(dz={}));var hz;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(hz||(hz={}));var pz;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(pz||(pz={}));var mz;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(mz||(mz={}));var gz;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(gz||(gz={}));var yz;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(yz||(yz={}));var vz;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(vz||(vz={}));var _z;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(_z||(_z={}));var bz;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(bz||(bz={}));var wz;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(wz||(wz={}));var Wb;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Wb||(Wb={}));var Ez;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Ez||(Ez={}));var w2;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(w2||(w2={}));var Tz;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Tz||(Tz={}));var xz;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(xz||(xz={}));var Sz;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Sz||(Sz={}));var Az;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Az||(Az={}));var Cz;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Cz||(Cz={}));var Iz;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Iz||(Iz={}));var Rz;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Rz||(Rz={}));var Pz;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Pz||(Pz={}));var Nz;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Nz||(Nz={}));var Mz;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Mz||(Mz={}));var Dz;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Dz||(Dz={}));var kz;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(kz||(kz={}));var Oz;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Oz||(Oz={}));var Lz;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Lz||(Lz={}));var Vz;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Vz||(Vz={}));var Uz;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Uz||(Uz={}));var qz;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(qz||(qz={}));var Fz;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Fz||(Fz={}));var Bz;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Bz||(Bz={}));var $z;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})($z||($z={}));var zz;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(zz||(zz={}));var Hz;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Hz||(Hz={}));var Gz;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Gz||(Gz={}));var jz;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(jz||(jz={}));var Kz;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Kz||(Kz={}));var Wz;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Wz||(Wz={}));var Yz;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Yz||(Yz={}));var Jz;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Jz||(Jz={}));var Xz;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Xz||(Xz={}));var Pd;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Pd||(Pd={}));class E2{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Fm{get text(){var e,n,r,i,o,s,a,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",f=!1;const h=[];for(const g of(u=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&u!==void 0?u:[]){for(const[_,T]of Object.entries(g))_!=="text"&&_!=="thought"&&(T!==null||T!==void 0)&&h.push(_);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;f=!0,c+=g.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?c:void 0}get data(){var e,n,r,i,o,s,a,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const f=[];for(const h of(u=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&u!==void 0?u:[]){for(const[g,_]of Object.entries(h))g!=="inlineData"&&(_!==null||_!==void 0)&&f.push(g);h.inlineData&&typeof h.inlineData.data=="string"&&(c+=atob(h.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,r,i,o,s,a,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(u=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||u===void 0?void 0:u.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,r,i,o,s,a,u,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(u=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||u===void 0?void 0:u.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,r,i,o,s,a,u,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(u=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||u===void 0?void 0:u.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.output}}class Qz{}class Zz{}class K4e{}class W4e{}class Y4e{}class J4e{}class eH{}class tH{}class nH{}class X4e{}class Yb{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const r=new Yb;let i;const o=e;return n?i=j4e(o):i=$4e(o),Object.assign(r,i),r}}class rH{}class iH{}class oH{}class Q4e{}class Z4e{}class eqe{}class sH{}class tqe{get text(){var e,n,r;let i="",o=!1;const s=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[u,c]of Object.entries(a))u!=="text"&&u!=="thought"&&c!==null&&s.push(u);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;o=!0,i+=a.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var e,n,r;let i="";const o=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,u]of Object.entries(s))a!=="inlineData"&&u!==null&&o.push(a);s.inlineData&&typeof s.inlineData.data=="string"&&(i+=atob(s.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class nqe{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function At(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Kre(t,e){const n=At(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function Wre(t){return Array.isArray(t)?t.map(e=>Jb(e)):[Jb(t)]}function Jb(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Yre(t){const e=Jb(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Jre(t){const e=Jb(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function aH(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Xre(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>aH(e)):[aH(t)]}function T2(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function lH(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function uH(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Br(t){if(t==null)throw new Error("ContentUnion is required");return T2(t)?t:{role:"user",parts:Xre(t)}}function TL(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=Br(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=Br(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Br(n)):[Br(e)]}function _o(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(lH(t)||uH(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Br(t)]}const e=[],n=[],r=T2(t[0]);for(const i of t){const o=T2(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(i);else{if(lH(i)||uH(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:Xre(n)}),e}function rqe(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values($e).includes(n[0].toUpperCase())?n[0].toUpperCase():$e.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values($e).includes(r.toUpperCase())?r.toUpperCase():$e.TYPE_UNSPECIFIED})}}function $d(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&rqe(t.type,e);for(const[s,a]of Object.entries(t))if(a!=null)if(s=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values($e).includes(a.toUpperCase())?a.toUpperCase():$e.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=$d(a);else if(r.includes(s)){const u=[];for(const c of a){if(c.type=="null"){e.nullable=!0;continue}u.push($d(c))}e[s]=u}else if(i.includes(s)){const u={};for(const[c,f]of Object.entries(a))u[c]=$d(f);e[s]=u}else{if(s==="additionalProperties")continue;e[s]=a}return e}function xL(t){return $d(t)}function SL(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function AL(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function np(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=$d(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=$d(e.response));return t}function rp(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function iqe(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function sl(t,e){if(typeof e!="string")throw new Error("name must be a string");return iqe(t,e,"cachedContents")}function Qre(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function wf(t){return EL(t)}function oqe(t){return t!=null&&typeof t=="object"&&"name"in t}function sqe(t){return t!=null&&typeof t=="object"&&"video"in t}function aqe(t){return t!=null&&typeof t=="object"&&"uri"in t}function Zre(t){var e;let n;if(oqe(t)&&(n=t.name),!(aqe(t)&&(n=t.uri,n===void 0))&&!(sqe(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function eie(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function tie(t){for(const e of["models","tunedModels","publisherModels"])if(lqe(t,e))return t[e];return[]}function lqe(t,e){return t!==null&&typeof t=="object"&&e in t}function uqe(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function cqe(t,e={}){const n=[],r=new Set;for(const i of t){const o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const s=uqe(i,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function nie(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function fqe(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function rie(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let o=!1;for(const s of i){if(typeof s!="object"||s===null)continue;const u=s.response;if(typeof u!="object"||u===null)continue;if(u.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function ip(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function iie(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dqe(t){const e={},n=m(t,["fps"]);n!=null&&y(e,["fps"],n);const r=m(t,["endOffset"]);r!=null&&y(e,["endOffset"],r);const i=m(t,["startOffset"]);return i!=null&&y(e,["startOffset"],i),e}function hqe(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["data"]);n!=null&&y(e,["data"],n);const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function pqe(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function mqe(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const r=m(t,["args"]);r!=null&&y(e,["args"],r);const i=m(t,["name"]);return i!=null&&y(e,["name"],i),e}function gqe(t){const e={},n=m(t,["videoMetadata"]);n!=null&&y(e,["videoMetadata"],dqe(n));const r=m(t,["thought"]);r!=null&&y(e,["thought"],r);const i=m(t,["inlineData"]);i!=null&&y(e,["inlineData"],hqe(i));const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],pqe(o));const s=m(t,["thoughtSignature"]);s!=null&&y(e,["thoughtSignature"],s);const a=m(t,["functionCall"]);a!=null&&y(e,["functionCall"],mqe(a));const u=m(t,["codeExecutionResult"]);u!=null&&y(e,["codeExecutionResult"],u);const c=m(t,["executableCode"]);c!=null&&y(e,["executableCode"],c);const f=m(t,["functionResponse"]);f!=null&&y(e,["functionResponse"],f);const h=m(t,["text"]);return h!=null&&y(e,["text"],h),e}function oie(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>gqe(o))),y(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&y(e,["role"],r),e}function yqe(t){const e={},n=m(t,["anyOf"]);n!=null&&y(e,["anyOf"],n);const r=m(t,["default"]);r!=null&&y(e,["default"],r);const i=m(t,["description"]);i!=null&&y(e,["description"],i);const o=m(t,["enum"]);o!=null&&y(e,["enum"],o);const s=m(t,["example"]);s!=null&&y(e,["example"],s);const a=m(t,["format"]);a!=null&&y(e,["format"],a);const u=m(t,["items"]);u!=null&&y(e,["items"],u);const c=m(t,["maxItems"]);c!=null&&y(e,["maxItems"],c);const f=m(t,["maxLength"]);f!=null&&y(e,["maxLength"],f);const h=m(t,["maxProperties"]);h!=null&&y(e,["maxProperties"],h);const g=m(t,["maximum"]);g!=null&&y(e,["maximum"],g);const _=m(t,["minItems"]);_!=null&&y(e,["minItems"],_);const T=m(t,["minLength"]);T!=null&&y(e,["minLength"],T);const E=m(t,["minProperties"]);E!=null&&y(e,["minProperties"],E);const b=m(t,["minimum"]);b!=null&&y(e,["minimum"],b);const S=m(t,["nullable"]);S!=null&&y(e,["nullable"],S);const C=m(t,["pattern"]);C!=null&&y(e,["pattern"],C);const R=m(t,["properties"]);R!=null&&y(e,["properties"],R);const P=m(t,["propertyOrdering"]);P!=null&&y(e,["propertyOrdering"],P);const O=m(t,["required"]);O!=null&&y(e,["required"],O);const q=m(t,["title"]);q!=null&&y(e,["title"],q);const D=m(t,["type"]);return D!=null&&y(e,["type"],D),e}function vqe(t){const e={};if(m(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=m(t,["category"]);n!=null&&y(e,["category"],n);const r=m(t,["threshold"]);return r!=null&&y(e,["threshold"],r),e}function _qe(t){const e={},n=m(t,["behavior"]);n!=null&&y(e,["behavior"],n);const r=m(t,["description"]);r!=null&&y(e,["description"],r);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const o=m(t,["parameters"]);o!=null&&y(e,["parameters"],o);const s=m(t,["parametersJsonSchema"]);s!=null&&y(e,["parametersJsonSchema"],s);const a=m(t,["response"]);a!=null&&y(e,["response"],a);const u=m(t,["responseJsonSchema"]);return u!=null&&y(e,["responseJsonSchema"],u),e}function bqe(t){const e={},n=m(t,["startTime"]);n!=null&&y(e,["startTime"],n);const r=m(t,["endTime"]);return r!=null&&y(e,["endTime"],r),e}function wqe(t){const e={},n=m(t,["timeRangeFilter"]);if(n!=null&&y(e,["timeRangeFilter"],bqe(n)),m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Eqe(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const r=m(t,["dynamicThreshold"]);return r!=null&&y(e,["dynamicThreshold"],r),e}function Tqe(t){const e={},n=m(t,["dynamicRetrievalConfig"]);return n!=null&&y(e,["dynamicRetrievalConfig"],Eqe(n)),e}function xqe(){return{}}function Sqe(t){const e={},n=m(t,["environment"]);return n!=null&&y(e,["environment"],n),e}function Aqe(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(c=>_qe(c))),y(e,["functionDeclarations"],u)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=m(t,["googleSearch"]);r!=null&&y(e,["googleSearch"],wqe(r));const i=m(t,["googleSearchRetrieval"]);if(i!=null&&y(e,["googleSearchRetrieval"],Tqe(i)),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(m(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");m(t,["urlContext"])!=null&&y(e,["urlContext"],xqe());const s=m(t,["computerUse"]);s!=null&&y(e,["computerUse"],Sqe(s));const a=m(t,["codeExecution"]);return a!=null&&y(e,["codeExecution"],a),e}function Cqe(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const r=m(t,["allowedFunctionNames"]);return r!=null&&y(e,["allowedFunctionNames"],r),e}function Iqe(t){const e={},n=m(t,["latitude"]);n!=null&&y(e,["latitude"],n);const r=m(t,["longitude"]);return r!=null&&y(e,["longitude"],r),e}function Rqe(t){const e={},n=m(t,["latLng"]);n!=null&&y(e,["latLng"],Iqe(n));const r=m(t,["languageCode"]);return r!=null&&y(e,["languageCode"],r),e}function Pqe(t){const e={},n=m(t,["functionCallingConfig"]);n!=null&&y(e,["functionCallingConfig"],Cqe(n));const r=m(t,["retrievalConfig"]);return r!=null&&y(e,["retrievalConfig"],Rqe(r)),e}function Nqe(t){const e={},n=m(t,["voiceName"]);return n!=null&&y(e,["voiceName"],n),e}function sie(t){const e={},n=m(t,["prebuiltVoiceConfig"]);return n!=null&&y(e,["prebuiltVoiceConfig"],Nqe(n)),e}function Mqe(t){const e={},n=m(t,["speaker"]);n!=null&&y(e,["speaker"],n);const r=m(t,["voiceConfig"]);return r!=null&&y(e,["voiceConfig"],sie(r)),e}function Dqe(t){const e={},n=m(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Mqe(i))),y(e,["speakerVoiceConfigs"],r)}return e}function kqe(t){const e={},n=m(t,["voiceConfig"]);n!=null&&y(e,["voiceConfig"],sie(n));const r=m(t,["multiSpeakerVoiceConfig"]);r!=null&&y(e,["multiSpeakerVoiceConfig"],Dqe(r));const i=m(t,["languageCode"]);return i!=null&&y(e,["languageCode"],i),e}function Oqe(t){const e={},n=m(t,["includeThoughts"]);n!=null&&y(e,["includeThoughts"],n);const r=m(t,["thinkingBudget"]);return r!=null&&y(e,["thinkingBudget"],r),e}function Lqe(t,e,n){const r={},i=m(e,["systemInstruction"]);n!==void 0&&i!=null&&y(n,["systemInstruction"],oie(Br(i)));const o=m(e,["temperature"]);o!=null&&y(r,["temperature"],o);const s=m(e,["topP"]);s!=null&&y(r,["topP"],s);const a=m(e,["topK"]);a!=null&&y(r,["topK"],a);const u=m(e,["candidateCount"]);u!=null&&y(r,["candidateCount"],u);const c=m(e,["maxOutputTokens"]);c!=null&&y(r,["maxOutputTokens"],c);const f=m(e,["stopSequences"]);f!=null&&y(r,["stopSequences"],f);const h=m(e,["responseLogprobs"]);h!=null&&y(r,["responseLogprobs"],h);const g=m(e,["logprobs"]);g!=null&&y(r,["logprobs"],g);const _=m(e,["presencePenalty"]);_!=null&&y(r,["presencePenalty"],_);const T=m(e,["frequencyPenalty"]);T!=null&&y(r,["frequencyPenalty"],T);const E=m(e,["seed"]);E!=null&&y(r,["seed"],E);const b=m(e,["responseMimeType"]);b!=null&&y(r,["responseMimeType"],b);const S=m(e,["responseSchema"]);S!=null&&y(r,["responseSchema"],yqe(xL(S)));const C=m(e,["responseJsonSchema"]);if(C!=null&&y(r,["responseJsonSchema"],C),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const R=m(e,["safetySettings"]);if(n!==void 0&&R!=null){let V=R;Array.isArray(V)&&(V=V.map($=>vqe($))),y(n,["safetySettings"],V)}const P=m(e,["tools"]);if(n!==void 0&&P!=null){let V=rp(P);Array.isArray(V)&&(V=V.map($=>Aqe(np($)))),y(n,["tools"],V)}const O=m(e,["toolConfig"]);if(n!==void 0&&O!=null&&y(n,["toolConfig"],Pqe(O)),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const q=m(e,["cachedContent"]);n!==void 0&&q!=null&&y(n,["cachedContent"],sl(t,q));const D=m(e,["responseModalities"]);D!=null&&y(r,["responseModalities"],D);const L=m(e,["mediaResolution"]);L!=null&&y(r,["mediaResolution"],L);const N=m(e,["speechConfig"]);if(N!=null&&y(r,["speechConfig"],kqe(SL(N))),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=m(e,["thinkingConfig"]);return U!=null&&y(r,["thinkingConfig"],Oqe(U)),r}function Vqe(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["request","model"],At(t,r));const i=m(e,["contents"]);if(i!=null){let s=_o(i);Array.isArray(s)&&(s=s.map(a=>oie(a))),y(n,["request","contents"],s)}const o=m(e,["config"]);return o!=null&&y(n,["request","generationConfig"],Lqe(t,o,n)),n}function Uqe(t,e){const n={};if(m(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(m(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=m(e,["fileName"]);r!=null&&y(n,["fileName"],r);const i=m(e,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Vqe(t,s))),y(n,["requests","requests"],o)}return n}function qqe(t,e){const n={},r=m(t,["displayName"]);if(e!==void 0&&r!=null&&y(e,["batch","displayName"],r),m(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function o1(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","model"],At(t,r));const i=m(e,["src"]);i!=null&&y(n,["batch","inputConfig"],Uqe(t,nie(t,i)));const o=m(e,["config"]);return o!=null&&y(n,["config"],qqe(o,n)),n}function Fqe(t,e){const n={},r=m(t,["taskType"]);e!==void 0&&r!=null&&y(e,["requests[]","taskType"],r);const i=m(t,["title"]);e!==void 0&&i!=null&&y(e,["requests[]","title"],i);const o=m(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&y(e,["requests[]","outputDimensionality"],o),m(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Bqe(t,e){const n={},r=m(e,["contents"]);r!=null&&y(n,["requests[]","request","content"],TL(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],Fqe(i,n)),n}function $qe(t,e){const n={},r=m(e,["fileName"]);r!=null&&y(n,["file_name"],r);const i=m(e,["inlinedRequests"]);return i!=null&&y(n,["requests"],Bqe(t,i)),n}function zqe(t,e){const n={},r=m(t,["displayName"]);return e!==void 0&&r!=null&&y(e,["batch","displayName"],r),n}function s1(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","model"],At(t,r));const i=m(e,["src"]);i!=null&&y(n,["batch","inputConfig"],$qe(t,i));const o=m(e,["config"]);return o!=null&&y(n,["config"],zqe(o,n)),n}function Hqe(t,e){const n={},r=m(e,["name"]);r!=null&&y(n,["_url","name"],ip(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],i),n}function Gqe(t,e){const n={},r=m(e,["name"]);r!=null&&y(n,["_url","name"],ip(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],i),n}function jqe(t,e){const n={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const i=m(t,["pageToken"]);if(e!==void 0&&i!=null&&y(e,["_query","pageToken"],i),m(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Kqe(t){const e={},n=m(t,["config"]);return n!=null&&y(e,["config"],jqe(n,e)),e}function Wqe(t,e){const n={},r=m(e,["name"]);r!=null&&y(n,["_url","name"],ip(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],i),n}function Yqe(t){const e={},n=m(t,["format"]);n!=null&&y(e,["instancesFormat"],n);const r=m(t,["gcsUri"]);r!=null&&y(e,["gcsSource","uris"],r);const i=m(t,["bigqueryUri"]);if(i!=null&&y(e,["bigquerySource","inputUri"],i),m(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Jqe(t){const e={},n=m(t,["format"]);n!=null&&y(e,["predictionsFormat"],n);const r=m(t,["gcsUri"]);r!=null&&y(e,["gcsDestination","outputUriPrefix"],r);const i=m(t,["bigqueryUri"]);if(i!=null&&y(e,["bigqueryDestination","outputUri"],i),m(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(m(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Xqe(t,e){const n={},r=m(t,["displayName"]);e!==void 0&&r!=null&&y(e,["displayName"],r);const i=m(t,["dest"]);return e!==void 0&&i!=null&&y(e,["outputConfig"],Jqe(fqe(i))),n}function Qqe(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["model"],At(t,r));const i=m(e,["src"]);i!=null&&y(n,["inputConfig"],Yqe(nie(t,i)));const o=m(e,["config"]);return o!=null&&y(n,["config"],Xqe(o,n)),n}function Zqe(t,e){const n={},r=m(e,["name"]);r!=null&&y(n,["_url","name"],ip(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],i),n}function eFe(t,e){const n={},r=m(e,["name"]);r!=null&&y(n,["_url","name"],ip(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],i),n}function tFe(t,e){const n={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const i=m(t,["pageToken"]);e!==void 0&&i!=null&&y(e,["_query","pageToken"],i);const o=m(t,["filter"]);return e!==void 0&&o!=null&&y(e,["_query","filter"],o),n}function nFe(t){const e={},n=m(t,["config"]);return n!=null&&y(e,["config"],tFe(n,e)),e}function rFe(t,e){const n={},r=m(e,["name"]);r!=null&&y(n,["_url","name"],ip(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],i),n}function iFe(t){const e={},n=m(t,["fps"]);n!=null&&y(e,["fps"],n);const r=m(t,["endOffset"]);r!=null&&y(e,["endOffset"],r);const i=m(t,["startOffset"]);return i!=null&&y(e,["startOffset"],i),e}function oFe(t){const e={},n=m(t,["data"]);n!=null&&y(e,["data"],n);const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function sFe(t){const e={},n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function aFe(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const r=m(t,["args"]);r!=null&&y(e,["args"],r);const i=m(t,["name"]);return i!=null&&y(e,["name"],i),e}function lFe(t){const e={},n=m(t,["videoMetadata"]);n!=null&&y(e,["videoMetadata"],iFe(n));const r=m(t,["thought"]);r!=null&&y(e,["thought"],r);const i=m(t,["inlineData"]);i!=null&&y(e,["inlineData"],oFe(i));const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],sFe(o));const s=m(t,["thoughtSignature"]);s!=null&&y(e,["thoughtSignature"],s);const a=m(t,["functionCall"]);a!=null&&y(e,["functionCall"],aFe(a));const u=m(t,["codeExecutionResult"]);u!=null&&y(e,["codeExecutionResult"],u);const c=m(t,["executableCode"]);c!=null&&y(e,["executableCode"],c);const f=m(t,["functionResponse"]);f!=null&&y(e,["functionResponse"],f);const h=m(t,["text"]);return h!=null&&y(e,["text"],h),e}function uFe(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>lFe(o))),y(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&y(e,["role"],r),e}function cFe(t){const e={},n=m(t,["citationSources"]);return n!=null&&y(e,["citations"],n),e}function fFe(t){const e={},n=m(t,["retrievedUrl"]);n!=null&&y(e,["retrievedUrl"],n);const r=m(t,["urlRetrievalStatus"]);return r!=null&&y(e,["urlRetrievalStatus"],r),e}function dFe(t){const e={},n=m(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>fFe(i))),y(e,["urlMetadata"],r)}return e}function hFe(t){const e={},n=m(t,["content"]);n!=null&&y(e,["content"],uFe(n));const r=m(t,["citationMetadata"]);r!=null&&y(e,["citationMetadata"],cFe(r));const i=m(t,["tokenCount"]);i!=null&&y(e,["tokenCount"],i);const o=m(t,["finishReason"]);o!=null&&y(e,["finishReason"],o);const s=m(t,["urlContextMetadata"]);s!=null&&y(e,["urlContextMetadata"],dFe(s));const a=m(t,["avgLogprobs"]);a!=null&&y(e,["avgLogprobs"],a);const u=m(t,["groundingMetadata"]);u!=null&&y(e,["groundingMetadata"],u);const c=m(t,["index"]);c!=null&&y(e,["index"],c);const f=m(t,["logprobsResult"]);f!=null&&y(e,["logprobsResult"],f);const h=m(t,["safetyRatings"]);return h!=null&&y(e,["safetyRatings"],h),e}function pFe(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(c=>hFe(c))),y(e,["candidates"],u)}const i=m(t,["modelVersion"]);i!=null&&y(e,["modelVersion"],i);const o=m(t,["promptFeedback"]);o!=null&&y(e,["promptFeedback"],o);const s=m(t,["responseId"]);s!=null&&y(e,["responseId"],s);const a=m(t,["usageMetadata"]);return a!=null&&y(e,["usageMetadata"],a),e}function CL(t){const e={},n=m(t,["details"]);n!=null&&y(e,["details"],n);const r=m(t,["code"]);r!=null&&y(e,["code"],r);const i=m(t,["message"]);return i!=null&&y(e,["message"],i),e}function mFe(t){const e={},n=m(t,["response"]);n!=null&&y(e,["response"],pFe(n));const r=m(t,["error"]);return r!=null&&y(e,["error"],CL(r)),e}function gFe(t){const e={},n=m(t,["values"]);return n!=null&&y(e,["values"],n),e}function yFe(t){const e={},n=m(t,["embedding"]);n!=null&&y(e,["embedding"],gFe(n));const r=m(t,["tokenCount"]);return r!=null&&y(e,["tokenCount"],r),e}function vFe(t){const e={},n=m(t,["response"]);n!=null&&y(e,["response"],yFe(n));const r=m(t,["error"]);return r!=null&&y(e,["error"],CL(r)),e}function _Fe(t){const e={},n=m(t,["responsesFile"]);n!=null&&y(e,["fileName"],n);const r=m(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>mFe(s))),y(e,["inlinedResponses"],o)}const i=m(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>vFe(s))),y(e,["inlinedEmbedContentResponses"],o)}return e}function Ad(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const r=m(t,["metadata","displayName"]);r!=null&&y(e,["displayName"],r);const i=m(t,["metadata","state"]);i!=null&&y(e,["state"],iie(i));const o=m(t,["metadata","createTime"]);o!=null&&y(e,["createTime"],o);const s=m(t,["metadata","endTime"]);s!=null&&y(e,["endTime"],s);const a=m(t,["metadata","updateTime"]);a!=null&&y(e,["updateTime"],a);const u=m(t,["metadata","model"]);u!=null&&y(e,["model"],u);const c=m(t,["metadata","output"]);return c!=null&&y(e,["dest"],_Fe(rie(c))),e}function bFe(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const i=m(t,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Ad(s))),y(e,["batchJobs"],o)}return e}function wFe(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["name"]);r!=null&&y(e,["name"],r);const i=m(t,["done"]);i!=null&&y(e,["done"],i);const o=m(t,["error"]);return o!=null&&y(e,["error"],CL(o)),e}function aie(t){const e={},n=m(t,["details"]);n!=null&&y(e,["details"],n);const r=m(t,["code"]);r!=null&&y(e,["code"],r);const i=m(t,["message"]);return i!=null&&y(e,["message"],i),e}function EFe(t){const e={},n=m(t,["instancesFormat"]);n!=null&&y(e,["format"],n);const r=m(t,["gcsSource","uris"]);r!=null&&y(e,["gcsUri"],r);const i=m(t,["bigquerySource","inputUri"]);return i!=null&&y(e,["bigqueryUri"],i),e}function TFe(t){const e={},n=m(t,["predictionsFormat"]);n!=null&&y(e,["format"],n);const r=m(t,["gcsDestination","outputUriPrefix"]);r!=null&&y(e,["gcsUri"],r);const i=m(t,["bigqueryDestination","outputUri"]);return i!=null&&y(e,["bigqueryUri"],i),e}function x2(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const r=m(t,["displayName"]);r!=null&&y(e,["displayName"],r);const i=m(t,["state"]);i!=null&&y(e,["state"],iie(i));const o=m(t,["error"]);o!=null&&y(e,["error"],aie(o));const s=m(t,["createTime"]);s!=null&&y(e,["createTime"],s);const a=m(t,["startTime"]);a!=null&&y(e,["startTime"],a);const u=m(t,["endTime"]);u!=null&&y(e,["endTime"],u);const c=m(t,["updateTime"]);c!=null&&y(e,["updateTime"],c);const f=m(t,["model"]);f!=null&&y(e,["model"],f);const h=m(t,["inputConfig"]);h!=null&&y(e,["src"],EFe(h));const g=m(t,["outputConfig"]);return g!=null&&y(e,["dest"],TFe(rie(g))),e}function xFe(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const i=m(t,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>x2(s))),y(e,["batchJobs"],o)}return e}function SFe(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["name"]);r!=null&&y(e,["name"],r);const i=m(t,["done"]);i!=null&&y(e,["done"],i);const o=m(t,["error"]);return o!=null&&y(e,["error"],aie(o)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var lf;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(lf||(lf={}));class Qy{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(i=s.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AFe extends bf{constructor(e){super(),this.apiClient=e,this.create=async n=>{var r,i;if(this.apiClient.isVertexAI())return n.config=this.formatDestination(n.src,n.config),this.createInternal(n);const o=n.src;if(!(Array.isArray(n.src)||o.inlinedRequests!==void 0))return this.createInternal(n);const a=this.createInlinedGenerateContentRequest(n),u=a.path,c=a.body,f=o1(this.apiClient,n)._query||{};return this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()).then(g=>Ad(g))},this.createEmbeddings=async n=>{var r,i;if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");if(!(n.src.inlinedRequests!==void 0))return this.createEmbeddingsInternal(n);const a=this.createInlinedEmbedContentRequest(n),u=a.path,c=a.body,f=s1(this.apiClient,n)._query||{};return this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()).then(g=>Ad(g))},this.list=async(n={})=>new Qy(lf.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=o1(this.apiClient,e),r=n._url,i=He("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,u=a.requests,c=[];for(const f of u){const h=Object.assign({},f);if(h.systemInstruction){const g=h.systemInstruction;delete h.systemInstruction;const _=h.request;_.systemInstruction=g,h.request=_}c.push(h)}return a.requests=c,delete n.config,delete n._url,delete n._query,{path:i,body:n}}createInlinedEmbedContentRequest(e){const n=s1(this.apiClient,e),r=n._url,i=He("{model}:asyncBatchEmbedContent",r),a=n.batch.inputConfig.requests,u=a.requests,c=[];delete a.config;for(const f of u){const h=Object.assign({},f),g=h.request;for(const _ in h)_!=="request"&&(g[_]=h[_],delete h[_]);c.push(h)}return a.requests=c,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const o=this.getGcsUri(e),s=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?r.dest=`${o.slice(0,-6)}/dest`:r.dest=`${o}_dest_${i}`;else if(s)r.dest=`${s}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=Qqe(this.apiClient,e);return a=He("batchPredictionJobs",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>x2(f))}else{const c=o1(this.apiClient,e);return a=He("{model}:batchGenerateContent",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Ad(f))}}async createEmbeddingsInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=s1(this.apiClient,e);return o=He("{model}:asyncBatchEmbedContent",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>Ad(u))}}async get(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=Zqe(this.apiClient,e);return a=He("batchPredictionJobs/{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>x2(f))}else{const c=Hqe(this.apiClient,e);return a=He("batches/{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Ad(f))}}async cancel(e){var n,r,i,o;let s="",a={};if(this.apiClient.isVertexAI()){const u=eFe(this.apiClient,e);s=He("batchPredictionJobs/{name}:cancel",u._url),a=u._query,delete u.config,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const u=Gqe(this.apiClient,e);s=He("batches/{name}:cancel",u._url),a=u._query,delete u.config,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=nFe(e);return a=He("batchPredictionJobs",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=xFe(f),g=new sH;return Object.assign(g,h),g})}else{const c=Kqe(e);return a=He("batches",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=bFe(f),g=new sH;return Object.assign(g,h),g})}}async delete(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=rFe(this.apiClient,e);return a=He("batchPredictionJobs/{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>SFe(f))}else{const c=Wqe(this.apiClient,e);return a=He("batches/{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>wFe(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CFe(t){const e={},n=m(t,["fps"]);n!=null&&y(e,["fps"],n);const r=m(t,["endOffset"]);r!=null&&y(e,["endOffset"],r);const i=m(t,["startOffset"]);return i!=null&&y(e,["startOffset"],i),e}function IFe(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["data"]);n!=null&&y(e,["data"],n);const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function RFe(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function PFe(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const r=m(t,["args"]);r!=null&&y(e,["args"],r);const i=m(t,["name"]);return i!=null&&y(e,["name"],i),e}function NFe(t){const e={},n=m(t,["videoMetadata"]);n!=null&&y(e,["videoMetadata"],CFe(n));const r=m(t,["thought"]);r!=null&&y(e,["thought"],r);const i=m(t,["inlineData"]);i!=null&&y(e,["inlineData"],IFe(i));const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],RFe(o));const s=m(t,["thoughtSignature"]);s!=null&&y(e,["thoughtSignature"],s);const a=m(t,["functionCall"]);a!=null&&y(e,["functionCall"],PFe(a));const u=m(t,["codeExecutionResult"]);u!=null&&y(e,["codeExecutionResult"],u);const c=m(t,["executableCode"]);c!=null&&y(e,["executableCode"],c);const f=m(t,["functionResponse"]);f!=null&&y(e,["functionResponse"],f);const h=m(t,["text"]);return h!=null&&y(e,["text"],h),e}function cH(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>NFe(o))),y(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&y(e,["role"],r),e}function MFe(t){const e={},n=m(t,["behavior"]);n!=null&&y(e,["behavior"],n);const r=m(t,["description"]);r!=null&&y(e,["description"],r);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const o=m(t,["parameters"]);o!=null&&y(e,["parameters"],o);const s=m(t,["parametersJsonSchema"]);s!=null&&y(e,["parametersJsonSchema"],s);const a=m(t,["response"]);a!=null&&y(e,["response"],a);const u=m(t,["responseJsonSchema"]);return u!=null&&y(e,["responseJsonSchema"],u),e}function DFe(t){const e={},n=m(t,["startTime"]);n!=null&&y(e,["startTime"],n);const r=m(t,["endTime"]);return r!=null&&y(e,["endTime"],r),e}function kFe(t){const e={},n=m(t,["timeRangeFilter"]);if(n!=null&&y(e,["timeRangeFilter"],DFe(n)),m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function OFe(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const r=m(t,["dynamicThreshold"]);return r!=null&&y(e,["dynamicThreshold"],r),e}function LFe(t){const e={},n=m(t,["dynamicRetrievalConfig"]);return n!=null&&y(e,["dynamicRetrievalConfig"],OFe(n)),e}function VFe(){return{}}function UFe(t){const e={},n=m(t,["environment"]);return n!=null&&y(e,["environment"],n),e}function qFe(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(c=>MFe(c))),y(e,["functionDeclarations"],u)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=m(t,["googleSearch"]);r!=null&&y(e,["googleSearch"],kFe(r));const i=m(t,["googleSearchRetrieval"]);if(i!=null&&y(e,["googleSearchRetrieval"],LFe(i)),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(m(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");m(t,["urlContext"])!=null&&y(e,["urlContext"],VFe());const s=m(t,["computerUse"]);s!=null&&y(e,["computerUse"],UFe(s));const a=m(t,["codeExecution"]);return a!=null&&y(e,["codeExecution"],a),e}function FFe(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const r=m(t,["allowedFunctionNames"]);return r!=null&&y(e,["allowedFunctionNames"],r),e}function BFe(t){const e={},n=m(t,["latitude"]);n!=null&&y(e,["latitude"],n);const r=m(t,["longitude"]);return r!=null&&y(e,["longitude"],r),e}function $Fe(t){const e={},n=m(t,["latLng"]);n!=null&&y(e,["latLng"],BFe(n));const r=m(t,["languageCode"]);return r!=null&&y(e,["languageCode"],r),e}function zFe(t){const e={},n=m(t,["functionCallingConfig"]);n!=null&&y(e,["functionCallingConfig"],FFe(n));const r=m(t,["retrievalConfig"]);return r!=null&&y(e,["retrievalConfig"],$Fe(r)),e}function HFe(t,e){const n={},r=m(t,["ttl"]);e!==void 0&&r!=null&&y(e,["ttl"],r);const i=m(t,["expireTime"]);e!==void 0&&i!=null&&y(e,["expireTime"],i);const o=m(t,["displayName"]);e!==void 0&&o!=null&&y(e,["displayName"],o);const s=m(t,["contents"]);if(e!==void 0&&s!=null){let f=_o(s);Array.isArray(f)&&(f=f.map(h=>cH(h))),y(e,["contents"],f)}const a=m(t,["systemInstruction"]);e!==void 0&&a!=null&&y(e,["systemInstruction"],cH(Br(a)));const u=m(t,["tools"]);if(e!==void 0&&u!=null){let f=u;Array.isArray(f)&&(f=f.map(h=>qFe(h))),y(e,["tools"],f)}const c=m(t,["toolConfig"]);if(e!==void 0&&c!=null&&y(e,["toolConfig"],zFe(c)),m(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function GFe(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["model"],Kre(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],HFe(i,n)),n}function jFe(t,e){const n={},r=m(e,["name"]);r!=null&&y(n,["_url","name"],sl(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],i),n}function KFe(t,e){const n={},r=m(e,["name"]);r!=null&&y(n,["_url","name"],sl(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],i),n}function WFe(t,e){const n={},r=m(t,["ttl"]);e!==void 0&&r!=null&&y(e,["ttl"],r);const i=m(t,["expireTime"]);return e!==void 0&&i!=null&&y(e,["expireTime"],i),n}function YFe(t,e){const n={},r=m(e,["name"]);r!=null&&y(n,["_url","name"],sl(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],WFe(i,n)),n}function JFe(t,e){const n={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const i=m(t,["pageToken"]);return e!==void 0&&i!=null&&y(e,["_query","pageToken"],i),n}function XFe(t){const e={},n=m(t,["config"]);return n!=null&&y(e,["config"],JFe(n,e)),e}function QFe(t){const e={},n=m(t,["fps"]);n!=null&&y(e,["fps"],n);const r=m(t,["endOffset"]);r!=null&&y(e,["endOffset"],r);const i=m(t,["startOffset"]);return i!=null&&y(e,["startOffset"],i),e}function ZFe(t){const e={},n=m(t,["displayName"]);n!=null&&y(e,["displayName"],n);const r=m(t,["data"]);r!=null&&y(e,["data"],r);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function e3e(t){const e={},n=m(t,["displayName"]);n!=null&&y(e,["displayName"],n);const r=m(t,["fileUri"]);r!=null&&y(e,["fileUri"],r);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function t3e(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const r=m(t,["args"]);r!=null&&y(e,["args"],r);const i=m(t,["name"]);return i!=null&&y(e,["name"],i),e}function n3e(t){const e={},n=m(t,["videoMetadata"]);n!=null&&y(e,["videoMetadata"],QFe(n));const r=m(t,["thought"]);r!=null&&y(e,["thought"],r);const i=m(t,["inlineData"]);i!=null&&y(e,["inlineData"],ZFe(i));const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],e3e(o));const s=m(t,["thoughtSignature"]);s!=null&&y(e,["thoughtSignature"],s);const a=m(t,["functionCall"]);a!=null&&y(e,["functionCall"],t3e(a));const u=m(t,["codeExecutionResult"]);u!=null&&y(e,["codeExecutionResult"],u);const c=m(t,["executableCode"]);c!=null&&y(e,["executableCode"],c);const f=m(t,["functionResponse"]);f!=null&&y(e,["functionResponse"],f);const h=m(t,["text"]);return h!=null&&y(e,["text"],h),e}function fH(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>n3e(o))),y(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&y(e,["role"],r),e}function r3e(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&y(e,["description"],n);const r=m(t,["name"]);r!=null&&y(e,["name"],r);const i=m(t,["parameters"]);i!=null&&y(e,["parameters"],i);const o=m(t,["parametersJsonSchema"]);o!=null&&y(e,["parametersJsonSchema"],o);const s=m(t,["response"]);s!=null&&y(e,["response"],s);const a=m(t,["responseJsonSchema"]);return a!=null&&y(e,["responseJsonSchema"],a),e}function i3e(t){const e={},n=m(t,["startTime"]);n!=null&&y(e,["startTime"],n);const r=m(t,["endTime"]);return r!=null&&y(e,["endTime"],r),e}function o3e(t){const e={},n=m(t,["timeRangeFilter"]);n!=null&&y(e,["timeRangeFilter"],i3e(n));const r=m(t,["excludeDomains"]);return r!=null&&y(e,["excludeDomains"],r),e}function s3e(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const r=m(t,["dynamicThreshold"]);return r!=null&&y(e,["dynamicThreshold"],r),e}function a3e(t){const e={},n=m(t,["dynamicRetrievalConfig"]);return n!=null&&y(e,["dynamicRetrievalConfig"],s3e(n)),e}function l3e(t){const e={},n=m(t,["excludeDomains"]);return n!=null&&y(e,["excludeDomains"],n),e}function u3e(t){const e={},n=m(t,["apiKeyString"]);return n!=null&&y(e,["apiKeyString"],n),e}function c3e(t){const e={},n=m(t,["apiKeyConfig"]);n!=null&&y(e,["apiKeyConfig"],u3e(n));const r=m(t,["authType"]);r!=null&&y(e,["authType"],r);const i=m(t,["googleServiceAccountConfig"]);i!=null&&y(e,["googleServiceAccountConfig"],i);const o=m(t,["httpBasicAuthConfig"]);o!=null&&y(e,["httpBasicAuthConfig"],o);const s=m(t,["oauthConfig"]);s!=null&&y(e,["oauthConfig"],s);const a=m(t,["oidcConfig"]);return a!=null&&y(e,["oidcConfig"],a),e}function f3e(t){const e={},n=m(t,["authConfig"]);return n!=null&&y(e,["authConfig"],c3e(n)),e}function d3e(){return{}}function h3e(t){const e={},n=m(t,["environment"]);return n!=null&&y(e,["environment"],n),e}function p3e(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(g=>r3e(g))),y(e,["functionDeclarations"],h)}const r=m(t,["retrieval"]);r!=null&&y(e,["retrieval"],r);const i=m(t,["googleSearch"]);i!=null&&y(e,["googleSearch"],o3e(i));const o=m(t,["googleSearchRetrieval"]);o!=null&&y(e,["googleSearchRetrieval"],a3e(o));const s=m(t,["enterpriseWebSearch"]);s!=null&&y(e,["enterpriseWebSearch"],l3e(s));const a=m(t,["googleMaps"]);a!=null&&y(e,["googleMaps"],f3e(a)),m(t,["urlContext"])!=null&&y(e,["urlContext"],d3e());const c=m(t,["computerUse"]);c!=null&&y(e,["computerUse"],h3e(c));const f=m(t,["codeExecution"]);return f!=null&&y(e,["codeExecution"],f),e}function m3e(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const r=m(t,["allowedFunctionNames"]);return r!=null&&y(e,["allowedFunctionNames"],r),e}function g3e(t){const e={},n=m(t,["latitude"]);n!=null&&y(e,["latitude"],n);const r=m(t,["longitude"]);return r!=null&&y(e,["longitude"],r),e}function y3e(t){const e={},n=m(t,["latLng"]);n!=null&&y(e,["latLng"],g3e(n));const r=m(t,["languageCode"]);return r!=null&&y(e,["languageCode"],r),e}function v3e(t){const e={},n=m(t,["functionCallingConfig"]);n!=null&&y(e,["functionCallingConfig"],m3e(n));const r=m(t,["retrievalConfig"]);return r!=null&&y(e,["retrievalConfig"],y3e(r)),e}function _3e(t,e){const n={},r=m(t,["ttl"]);e!==void 0&&r!=null&&y(e,["ttl"],r);const i=m(t,["expireTime"]);e!==void 0&&i!=null&&y(e,["expireTime"],i);const o=m(t,["displayName"]);e!==void 0&&o!=null&&y(e,["displayName"],o);const s=m(t,["contents"]);if(e!==void 0&&s!=null){let h=_o(s);Array.isArray(h)&&(h=h.map(g=>fH(g))),y(e,["contents"],h)}const a=m(t,["systemInstruction"]);e!==void 0&&a!=null&&y(e,["systemInstruction"],fH(Br(a)));const u=m(t,["tools"]);if(e!==void 0&&u!=null){let h=u;Array.isArray(h)&&(h=h.map(g=>p3e(g))),y(e,["tools"],h)}const c=m(t,["toolConfig"]);e!==void 0&&c!=null&&y(e,["toolConfig"],v3e(c));const f=m(t,["kmsKeyName"]);return e!==void 0&&f!=null&&y(e,["encryption_spec","kmsKeyName"],f),n}function b3e(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["model"],Kre(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],_3e(i,n)),n}function w3e(t,e){const n={},r=m(e,["name"]);r!=null&&y(n,["_url","name"],sl(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],i),n}function E3e(t,e){const n={},r=m(e,["name"]);r!=null&&y(n,["_url","name"],sl(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],i),n}function T3e(t,e){const n={},r=m(t,["ttl"]);e!==void 0&&r!=null&&y(e,["ttl"],r);const i=m(t,["expireTime"]);return e!==void 0&&i!=null&&y(e,["expireTime"],i),n}function x3e(t,e){const n={},r=m(e,["name"]);r!=null&&y(n,["_url","name"],sl(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],T3e(i,n)),n}function S3e(t,e){const n={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const i=m(t,["pageToken"]);return e!==void 0&&i!=null&&y(e,["_query","pageToken"],i),n}function A3e(t){const e={},n=m(t,["config"]);return n!=null&&y(e,["config"],S3e(n,e)),e}function S_(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const r=m(t,["displayName"]);r!=null&&y(e,["displayName"],r);const i=m(t,["model"]);i!=null&&y(e,["model"],i);const o=m(t,["createTime"]);o!=null&&y(e,["createTime"],o);const s=m(t,["updateTime"]);s!=null&&y(e,["updateTime"],s);const a=m(t,["expireTime"]);a!=null&&y(e,["expireTime"],a);const u=m(t,["usageMetadata"]);return u!=null&&y(e,["usageMetadata"],u),e}function C3e(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function I3e(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const i=m(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>S_(s))),y(e,["cachedContents"],o)}return e}function A_(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const r=m(t,["displayName"]);r!=null&&y(e,["displayName"],r);const i=m(t,["model"]);i!=null&&y(e,["model"],i);const o=m(t,["createTime"]);o!=null&&y(e,["createTime"],o);const s=m(t,["updateTime"]);s!=null&&y(e,["updateTime"],s);const a=m(t,["expireTime"]);a!=null&&y(e,["expireTime"],a);const u=m(t,["usageMetadata"]);return u!=null&&y(e,["usageMetadata"],u),e}function R3e(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function P3e(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const i=m(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>A_(s))),y(e,["cachedContents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class N3e extends bf{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Qy(lf.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=b3e(this.apiClient,e);return a=He("cachedContents",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>A_(f))}else{const c=GFe(this.apiClient,e);return a=He("cachedContents",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>S_(f))}}async get(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=w3e(this.apiClient,e);return a=He("{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>A_(f))}else{const c=jFe(this.apiClient,e);return a=He("{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>S_(f))}}async delete(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=E3e(this.apiClient,e);return a=He("{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=R3e(f),g=new iH;return Object.assign(g,h),g})}else{const c=KFe(this.apiClient,e);return a=He("{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=C3e(f),g=new iH;return Object.assign(g,h),g})}}async update(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=x3e(this.apiClient,e);return a=He("{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>A_(f))}else{const c=YFe(this.apiClient,e);return a=He("{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>S_(f))}}async listInternal(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=A3e(e);return a=He("cachedContents",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=P3e(f),g=new oH;return Object.assign(g,h),g})}else{const c=XFe(e);return a=He("cachedContents",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=I3e(f),g=new oH;return Object.assign(g,h),g})}}}function dH(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function en(t){return this instanceof en?(this.v=t,this):new en(t)}function zd(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(_){return function(T){return Promise.resolve(T).then(_,h)}}function a(_,T){r[_]&&(i[_]=function(E){return new Promise(function(b,S){o.push([_,E,b,S])>1||u(_,E)})},T&&(i[_]=T(i[_])))}function u(_,T){try{c(r[_](T))}catch(E){g(o[0][3],E)}}function c(_){_.value instanceof en?Promise.resolve(_.value.v).then(f,h):g(o[0][2],_)}function f(_){u("next",_)}function h(_){u("throw",_)}function g(_,T){_(T),o.shift(),o.length&&u(o[0][0],o[0][1])}}function wg(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof dH=="function"?dH(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(c){o({value:c,done:a})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function M3e(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:lie(n)}function lie(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function D3e(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function hH(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let o=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),o&&!lie(t[r])&&(o=!1),r++;o?e.push(...i):e.pop()}return e}class k3e{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new O3e(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class O3e{constructor(e,n,r,i={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),D3e(o)}async sendMessage(e){var n;await this.sendPromise;const r=Br(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,s,a;const u=await i,c=(s=(o=u.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,f=u.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let g=[];f!=null&&(g=(a=f.slice(h))!==null&&a!==void 0?a:[]);const _=c?[c]:[];this.recordHistory(r,_,g)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=Br(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){const n=e?hH(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,i;return zd(this,arguments,function*(){var s,a,u,c;const f=[];try{for(var h=!0,g=wg(e),_;_=yield en(g.next()),s=_.done,!s;h=!0){c=_.value,h=!1;const T=c;if(M3e(T)){const E=(i=(r=T.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;E!==void 0&&f.push(E)}yield yield en(T)}}catch(T){a={error:T}}finally{try{!h&&!s&&(u=g.return)&&(yield en(u.call(g)))}finally{if(a)throw a.error}}this.recordHistory(n,f)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(o=>o.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...hH(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class IE extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,IE.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function L3e(t,e){const n={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const i=m(t,["pageToken"]);return e!==void 0&&i!=null&&y(e,["_query","pageToken"],i),n}function V3e(t){const e={},n=m(t,["config"]);return n!=null&&y(e,["config"],L3e(n,e)),e}function U3e(t){const e={},n=m(t,["details"]);n!=null&&y(e,["details"],n);const r=m(t,["message"]);r!=null&&y(e,["message"],r);const i=m(t,["code"]);return i!=null&&y(e,["code"],i),e}function q3e(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const r=m(t,["displayName"]);r!=null&&y(e,["displayName"],r);const i=m(t,["mimeType"]);i!=null&&y(e,["mimeType"],i);const o=m(t,["sizeBytes"]);o!=null&&y(e,["sizeBytes"],o);const s=m(t,["createTime"]);s!=null&&y(e,["createTime"],s);const a=m(t,["expirationTime"]);a!=null&&y(e,["expirationTime"],a);const u=m(t,["updateTime"]);u!=null&&y(e,["updateTime"],u);const c=m(t,["sha256Hash"]);c!=null&&y(e,["sha256Hash"],c);const f=m(t,["uri"]);f!=null&&y(e,["uri"],f);const h=m(t,["downloadUri"]);h!=null&&y(e,["downloadUri"],h);const g=m(t,["state"]);g!=null&&y(e,["state"],g);const _=m(t,["source"]);_!=null&&y(e,["source"],_);const T=m(t,["videoMetadata"]);T!=null&&y(e,["videoMetadata"],T);const E=m(t,["error"]);return E!=null&&y(e,["error"],U3e(E)),e}function F3e(t){const e={},n=m(t,["file"]);n!=null&&y(e,["file"],q3e(n));const r=m(t,["config"]);return r!=null&&y(e,["config"],r),e}function B3e(t){const e={},n=m(t,["name"]);n!=null&&y(e,["_url","file"],Zre(n));const r=m(t,["config"]);return r!=null&&y(e,["config"],r),e}function $3e(t){const e={},n=m(t,["name"]);n!=null&&y(e,["_url","file"],Zre(n));const r=m(t,["config"]);return r!=null&&y(e,["config"],r),e}function z3e(t){const e={},n=m(t,["details"]);n!=null&&y(e,["details"],n);const r=m(t,["message"]);r!=null&&y(e,["message"],r);const i=m(t,["code"]);return i!=null&&y(e,["code"],i),e}function S2(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const r=m(t,["displayName"]);r!=null&&y(e,["displayName"],r);const i=m(t,["mimeType"]);i!=null&&y(e,["mimeType"],i);const o=m(t,["sizeBytes"]);o!=null&&y(e,["sizeBytes"],o);const s=m(t,["createTime"]);s!=null&&y(e,["createTime"],s);const a=m(t,["expirationTime"]);a!=null&&y(e,["expirationTime"],a);const u=m(t,["updateTime"]);u!=null&&y(e,["updateTime"],u);const c=m(t,["sha256Hash"]);c!=null&&y(e,["sha256Hash"],c);const f=m(t,["uri"]);f!=null&&y(e,["uri"],f);const h=m(t,["downloadUri"]);h!=null&&y(e,["downloadUri"],h);const g=m(t,["state"]);g!=null&&y(e,["state"],g);const _=m(t,["source"]);_!=null&&y(e,["source"],_);const T=m(t,["videoMetadata"]);T!=null&&y(e,["videoMetadata"],T);const E=m(t,["error"]);return E!=null&&y(e,["error"],z3e(E)),e}function H3e(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const i=m(t,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>S2(s))),y(e,["files"],o)}return e}function G3e(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function j3e(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class K3e extends bf{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Qy(lf.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>S2(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=V3e(e);return o=He("files",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),i.then(u=>{const c=H3e(u),f=new Q4e;return Object.assign(f,c),f})}}async createInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=F3e(e);return o=He("upload/v1beta/files",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const c=G3e(u),f=new Z4e;return Object.assign(f,c),f})}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=B3e(e);return o=He("files/{file}",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>S2(u))}}async delete(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=$3e(e);return o=He("files/{file}",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),i.then(u=>{const c=j3e(u),f=new eqe;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function W3e(t){const e={},n=m(t,["voiceName"]);return n!=null&&y(e,["voiceName"],n),e}function uie(t){const e={},n=m(t,["prebuiltVoiceConfig"]);return n!=null&&y(e,["prebuiltVoiceConfig"],W3e(n)),e}function Y3e(t){const e={},n=m(t,["speaker"]);n!=null&&y(e,["speaker"],n);const r=m(t,["voiceConfig"]);return r!=null&&y(e,["voiceConfig"],uie(r)),e}function J3e(t){const e={},n=m(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Y3e(i))),y(e,["speakerVoiceConfigs"],r)}return e}function X3e(t){const e={},n=m(t,["voiceConfig"]);n!=null&&y(e,["voiceConfig"],uie(n));const r=m(t,["multiSpeakerVoiceConfig"]);r!=null&&y(e,["multiSpeakerVoiceConfig"],J3e(r));const i=m(t,["languageCode"]);return i!=null&&y(e,["languageCode"],i),e}function Q3e(t){const e={},n=m(t,["fps"]);n!=null&&y(e,["fps"],n);const r=m(t,["endOffset"]);r!=null&&y(e,["endOffset"],r);const i=m(t,["startOffset"]);return i!=null&&y(e,["startOffset"],i),e}function Z3e(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["data"]);n!=null&&y(e,["data"],n);const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function eBe(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function tBe(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const r=m(t,["args"]);r!=null&&y(e,["args"],r);const i=m(t,["name"]);return i!=null&&y(e,["name"],i),e}function nBe(t){const e={},n=m(t,["videoMetadata"]);n!=null&&y(e,["videoMetadata"],Q3e(n));const r=m(t,["thought"]);r!=null&&y(e,["thought"],r);const i=m(t,["inlineData"]);i!=null&&y(e,["inlineData"],Z3e(i));const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],eBe(o));const s=m(t,["thoughtSignature"]);s!=null&&y(e,["thoughtSignature"],s);const a=m(t,["functionCall"]);a!=null&&y(e,["functionCall"],tBe(a));const u=m(t,["codeExecutionResult"]);u!=null&&y(e,["codeExecutionResult"],u);const c=m(t,["executableCode"]);c!=null&&y(e,["executableCode"],c);const f=m(t,["functionResponse"]);f!=null&&y(e,["functionResponse"],f);const h=m(t,["text"]);return h!=null&&y(e,["text"],h),e}function rBe(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>nBe(o))),y(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&y(e,["role"],r),e}function iBe(t){const e={},n=m(t,["behavior"]);n!=null&&y(e,["behavior"],n);const r=m(t,["description"]);r!=null&&y(e,["description"],r);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const o=m(t,["parameters"]);o!=null&&y(e,["parameters"],o);const s=m(t,["parametersJsonSchema"]);s!=null&&y(e,["parametersJsonSchema"],s);const a=m(t,["response"]);a!=null&&y(e,["response"],a);const u=m(t,["responseJsonSchema"]);return u!=null&&y(e,["responseJsonSchema"],u),e}function oBe(t){const e={},n=m(t,["startTime"]);n!=null&&y(e,["startTime"],n);const r=m(t,["endTime"]);return r!=null&&y(e,["endTime"],r),e}function sBe(t){const e={},n=m(t,["timeRangeFilter"]);if(n!=null&&y(e,["timeRangeFilter"],oBe(n)),m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function aBe(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const r=m(t,["dynamicThreshold"]);return r!=null&&y(e,["dynamicThreshold"],r),e}function lBe(t){const e={},n=m(t,["dynamicRetrievalConfig"]);return n!=null&&y(e,["dynamicRetrievalConfig"],aBe(n)),e}function uBe(){return{}}function cBe(t){const e={},n=m(t,["environment"]);return n!=null&&y(e,["environment"],n),e}function fBe(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(c=>iBe(c))),y(e,["functionDeclarations"],u)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=m(t,["googleSearch"]);r!=null&&y(e,["googleSearch"],sBe(r));const i=m(t,["googleSearchRetrieval"]);if(i!=null&&y(e,["googleSearchRetrieval"],lBe(i)),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(m(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");m(t,["urlContext"])!=null&&y(e,["urlContext"],uBe());const s=m(t,["computerUse"]);s!=null&&y(e,["computerUse"],cBe(s));const a=m(t,["codeExecution"]);return a!=null&&y(e,["codeExecution"],a),e}function dBe(t){const e={},n=m(t,["handle"]);if(n!=null&&y(e,["handle"],n),m(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function pH(){return{}}function hBe(t){const e={},n=m(t,["disabled"]);n!=null&&y(e,["disabled"],n);const r=m(t,["startOfSpeechSensitivity"]);r!=null&&y(e,["startOfSpeechSensitivity"],r);const i=m(t,["endOfSpeechSensitivity"]);i!=null&&y(e,["endOfSpeechSensitivity"],i);const o=m(t,["prefixPaddingMs"]);o!=null&&y(e,["prefixPaddingMs"],o);const s=m(t,["silenceDurationMs"]);return s!=null&&y(e,["silenceDurationMs"],s),e}function pBe(t){const e={},n=m(t,["automaticActivityDetection"]);n!=null&&y(e,["automaticActivityDetection"],hBe(n));const r=m(t,["activityHandling"]);r!=null&&y(e,["activityHandling"],r);const i=m(t,["turnCoverage"]);return i!=null&&y(e,["turnCoverage"],i),e}function mBe(t){const e={},n=m(t,["targetTokens"]);return n!=null&&y(e,["targetTokens"],n),e}function gBe(t){const e={},n=m(t,["triggerTokens"]);n!=null&&y(e,["triggerTokens"],n);const r=m(t,["slidingWindow"]);return r!=null&&y(e,["slidingWindow"],mBe(r)),e}function yBe(t){const e={},n=m(t,["proactiveAudio"]);return n!=null&&y(e,["proactiveAudio"],n),e}function vBe(t,e){const n={},r=m(t,["generationConfig"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig"],r);const i=m(t,["responseModalities"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig","responseModalities"],i);const o=m(t,["temperature"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","temperature"],o);const s=m(t,["topP"]);e!==void 0&&s!=null&&y(e,["setup","generationConfig","topP"],s);const a=m(t,["topK"]);e!==void 0&&a!=null&&y(e,["setup","generationConfig","topK"],a);const u=m(t,["maxOutputTokens"]);e!==void 0&&u!=null&&y(e,["setup","generationConfig","maxOutputTokens"],u);const c=m(t,["mediaResolution"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","mediaResolution"],c);const f=m(t,["seed"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","seed"],f);const h=m(t,["speechConfig"]);e!==void 0&&h!=null&&y(e,["setup","generationConfig","speechConfig"],X3e(AL(h)));const g=m(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],g);const _=m(t,["systemInstruction"]);e!==void 0&&_!=null&&y(e,["setup","systemInstruction"],rBe(Br(_)));const T=m(t,["tools"]);if(e!==void 0&&T!=null){let O=rp(T);Array.isArray(O)&&(O=O.map(q=>fBe(np(q)))),y(e,["setup","tools"],O)}const E=m(t,["sessionResumption"]);e!==void 0&&E!=null&&y(e,["setup","sessionResumption"],dBe(E));const b=m(t,["inputAudioTranscription"]);e!==void 0&&b!=null&&y(e,["setup","inputAudioTranscription"],pH());const S=m(t,["outputAudioTranscription"]);e!==void 0&&S!=null&&y(e,["setup","outputAudioTranscription"],pH());const C=m(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&y(e,["setup","realtimeInputConfig"],pBe(C));const R=m(t,["contextWindowCompression"]);e!==void 0&&R!=null&&y(e,["setup","contextWindowCompression"],gBe(R));const P=m(t,["proactivity"]);return e!==void 0&&P!=null&&y(e,["setup","proactivity"],yBe(P)),n}function _Be(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["setup","model"],At(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],vBe(i,n)),n}function bBe(){return{}}function wBe(){return{}}function EBe(t){const e={},n=m(t,["media"]);n!=null&&y(e,["mediaChunks"],Wre(n));const r=m(t,["audio"]);r!=null&&y(e,["audio"],Jre(r));const i=m(t,["audioStreamEnd"]);i!=null&&y(e,["audioStreamEnd"],i);const o=m(t,["video"]);o!=null&&y(e,["video"],Yre(o));const s=m(t,["text"]);return s!=null&&y(e,["text"],s),m(t,["activityStart"])!=null&&y(e,["activityStart"],bBe()),m(t,["activityEnd"])!=null&&y(e,["activityEnd"],wBe()),e}function cie(t){const e={},n=m(t,["text"]);n!=null&&y(e,["text"],n);const r=m(t,["weight"]);return r!=null&&y(e,["weight"],r),e}function TBe(t){const e={},n=m(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>cie(i))),y(e,["weightedPrompts"],r)}return e}function fie(t){const e={},n=m(t,["temperature"]);n!=null&&y(e,["temperature"],n);const r=m(t,["topK"]);r!=null&&y(e,["topK"],r);const i=m(t,["seed"]);i!=null&&y(e,["seed"],i);const o=m(t,["guidance"]);o!=null&&y(e,["guidance"],o);const s=m(t,["bpm"]);s!=null&&y(e,["bpm"],s);const a=m(t,["density"]);a!=null&&y(e,["density"],a);const u=m(t,["brightness"]);u!=null&&y(e,["brightness"],u);const c=m(t,["scale"]);c!=null&&y(e,["scale"],c);const f=m(t,["muteBass"]);f!=null&&y(e,["muteBass"],f);const h=m(t,["muteDrums"]);h!=null&&y(e,["muteDrums"],h);const g=m(t,["onlyBassAndDrums"]);g!=null&&y(e,["onlyBassAndDrums"],g);const _=m(t,["musicGenerationMode"]);return _!=null&&y(e,["musicGenerationMode"],_),e}function xBe(t){const e={},n=m(t,["musicGenerationConfig"]);return n!=null&&y(e,["musicGenerationConfig"],fie(n)),e}function die(t){const e={},n=m(t,["model"]);return n!=null&&y(e,["model"],n),e}function hie(t){const e={},n=m(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>cie(i))),y(e,["weightedPrompts"],r)}return e}function A2(t){const e={},n=m(t,["setup"]);n!=null&&y(e,["setup"],die(n));const r=m(t,["clientContent"]);r!=null&&y(e,["clientContent"],hie(r));const i=m(t,["musicGenerationConfig"]);i!=null&&y(e,["musicGenerationConfig"],fie(i));const o=m(t,["playbackControl"]);return o!=null&&y(e,["playbackControl"],o),e}function SBe(t){const e={},n=m(t,["voiceName"]);return n!=null&&y(e,["voiceName"],n),e}function ABe(t){const e={},n=m(t,["prebuiltVoiceConfig"]);return n!=null&&y(e,["prebuiltVoiceConfig"],SBe(n)),e}function CBe(t){const e={},n=m(t,["voiceConfig"]);if(n!=null&&y(e,["voiceConfig"],ABe(n)),m(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=m(t,["languageCode"]);return r!=null&&y(e,["languageCode"],r),e}function IBe(t){const e={},n=m(t,["fps"]);n!=null&&y(e,["fps"],n);const r=m(t,["endOffset"]);r!=null&&y(e,["endOffset"],r);const i=m(t,["startOffset"]);return i!=null&&y(e,["startOffset"],i),e}function RBe(t){const e={},n=m(t,["displayName"]);n!=null&&y(e,["displayName"],n);const r=m(t,["data"]);r!=null&&y(e,["data"],r);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function PBe(t){const e={},n=m(t,["displayName"]);n!=null&&y(e,["displayName"],n);const r=m(t,["fileUri"]);r!=null&&y(e,["fileUri"],r);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function NBe(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const r=m(t,["args"]);r!=null&&y(e,["args"],r);const i=m(t,["name"]);return i!=null&&y(e,["name"],i),e}function MBe(t){const e={},n=m(t,["videoMetadata"]);n!=null&&y(e,["videoMetadata"],IBe(n));const r=m(t,["thought"]);r!=null&&y(e,["thought"],r);const i=m(t,["inlineData"]);i!=null&&y(e,["inlineData"],RBe(i));const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],PBe(o));const s=m(t,["thoughtSignature"]);s!=null&&y(e,["thoughtSignature"],s);const a=m(t,["functionCall"]);a!=null&&y(e,["functionCall"],NBe(a));const u=m(t,["codeExecutionResult"]);u!=null&&y(e,["codeExecutionResult"],u);const c=m(t,["executableCode"]);c!=null&&y(e,["executableCode"],c);const f=m(t,["functionResponse"]);f!=null&&y(e,["functionResponse"],f);const h=m(t,["text"]);return h!=null&&y(e,["text"],h),e}function DBe(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>MBe(o))),y(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&y(e,["role"],r),e}function kBe(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&y(e,["description"],n);const r=m(t,["name"]);r!=null&&y(e,["name"],r);const i=m(t,["parameters"]);i!=null&&y(e,["parameters"],i);const o=m(t,["parametersJsonSchema"]);o!=null&&y(e,["parametersJsonSchema"],o);const s=m(t,["response"]);s!=null&&y(e,["response"],s);const a=m(t,["responseJsonSchema"]);return a!=null&&y(e,["responseJsonSchema"],a),e}function OBe(t){const e={},n=m(t,["startTime"]);n!=null&&y(e,["startTime"],n);const r=m(t,["endTime"]);return r!=null&&y(e,["endTime"],r),e}function LBe(t){const e={},n=m(t,["timeRangeFilter"]);n!=null&&y(e,["timeRangeFilter"],OBe(n));const r=m(t,["excludeDomains"]);return r!=null&&y(e,["excludeDomains"],r),e}function VBe(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const r=m(t,["dynamicThreshold"]);return r!=null&&y(e,["dynamicThreshold"],r),e}function UBe(t){const e={},n=m(t,["dynamicRetrievalConfig"]);return n!=null&&y(e,["dynamicRetrievalConfig"],VBe(n)),e}function qBe(t){const e={},n=m(t,["excludeDomains"]);return n!=null&&y(e,["excludeDomains"],n),e}function FBe(t){const e={},n=m(t,["apiKeyString"]);return n!=null&&y(e,["apiKeyString"],n),e}function BBe(t){const e={},n=m(t,["apiKeyConfig"]);n!=null&&y(e,["apiKeyConfig"],FBe(n));const r=m(t,["authType"]);r!=null&&y(e,["authType"],r);const i=m(t,["googleServiceAccountConfig"]);i!=null&&y(e,["googleServiceAccountConfig"],i);const o=m(t,["httpBasicAuthConfig"]);o!=null&&y(e,["httpBasicAuthConfig"],o);const s=m(t,["oauthConfig"]);s!=null&&y(e,["oauthConfig"],s);const a=m(t,["oidcConfig"]);return a!=null&&y(e,["oidcConfig"],a),e}function $Be(t){const e={},n=m(t,["authConfig"]);return n!=null&&y(e,["authConfig"],BBe(n)),e}function zBe(){return{}}function HBe(t){const e={},n=m(t,["environment"]);return n!=null&&y(e,["environment"],n),e}function GBe(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(g=>kBe(g))),y(e,["functionDeclarations"],h)}const r=m(t,["retrieval"]);r!=null&&y(e,["retrieval"],r);const i=m(t,["googleSearch"]);i!=null&&y(e,["googleSearch"],LBe(i));const o=m(t,["googleSearchRetrieval"]);o!=null&&y(e,["googleSearchRetrieval"],UBe(o));const s=m(t,["enterpriseWebSearch"]);s!=null&&y(e,["enterpriseWebSearch"],qBe(s));const a=m(t,["googleMaps"]);a!=null&&y(e,["googleMaps"],$Be(a)),m(t,["urlContext"])!=null&&y(e,["urlContext"],zBe());const c=m(t,["computerUse"]);c!=null&&y(e,["computerUse"],HBe(c));const f=m(t,["codeExecution"]);return f!=null&&y(e,["codeExecution"],f),e}function jBe(t){const e={},n=m(t,["handle"]);n!=null&&y(e,["handle"],n);const r=m(t,["transparent"]);return r!=null&&y(e,["transparent"],r),e}function mH(){return{}}function KBe(t){const e={},n=m(t,["disabled"]);n!=null&&y(e,["disabled"],n);const r=m(t,["startOfSpeechSensitivity"]);r!=null&&y(e,["startOfSpeechSensitivity"],r);const i=m(t,["endOfSpeechSensitivity"]);i!=null&&y(e,["endOfSpeechSensitivity"],i);const o=m(t,["prefixPaddingMs"]);o!=null&&y(e,["prefixPaddingMs"],o);const s=m(t,["silenceDurationMs"]);return s!=null&&y(e,["silenceDurationMs"],s),e}function WBe(t){const e={},n=m(t,["automaticActivityDetection"]);n!=null&&y(e,["automaticActivityDetection"],KBe(n));const r=m(t,["activityHandling"]);r!=null&&y(e,["activityHandling"],r);const i=m(t,["turnCoverage"]);return i!=null&&y(e,["turnCoverage"],i),e}function YBe(t){const e={},n=m(t,["targetTokens"]);return n!=null&&y(e,["targetTokens"],n),e}function JBe(t){const e={},n=m(t,["triggerTokens"]);n!=null&&y(e,["triggerTokens"],n);const r=m(t,["slidingWindow"]);return r!=null&&y(e,["slidingWindow"],YBe(r)),e}function XBe(t){const e={},n=m(t,["proactiveAudio"]);return n!=null&&y(e,["proactiveAudio"],n),e}function QBe(t,e){const n={},r=m(t,["generationConfig"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig"],r);const i=m(t,["responseModalities"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig","responseModalities"],i);const o=m(t,["temperature"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","temperature"],o);const s=m(t,["topP"]);e!==void 0&&s!=null&&y(e,["setup","generationConfig","topP"],s);const a=m(t,["topK"]);e!==void 0&&a!=null&&y(e,["setup","generationConfig","topK"],a);const u=m(t,["maxOutputTokens"]);e!==void 0&&u!=null&&y(e,["setup","generationConfig","maxOutputTokens"],u);const c=m(t,["mediaResolution"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","mediaResolution"],c);const f=m(t,["seed"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","seed"],f);const h=m(t,["speechConfig"]);e!==void 0&&h!=null&&y(e,["setup","generationConfig","speechConfig"],CBe(AL(h)));const g=m(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],g);const _=m(t,["systemInstruction"]);e!==void 0&&_!=null&&y(e,["setup","systemInstruction"],DBe(Br(_)));const T=m(t,["tools"]);if(e!==void 0&&T!=null){let O=rp(T);Array.isArray(O)&&(O=O.map(q=>GBe(np(q)))),y(e,["setup","tools"],O)}const E=m(t,["sessionResumption"]);e!==void 0&&E!=null&&y(e,["setup","sessionResumption"],jBe(E));const b=m(t,["inputAudioTranscription"]);e!==void 0&&b!=null&&y(e,["setup","inputAudioTranscription"],mH());const S=m(t,["outputAudioTranscription"]);e!==void 0&&S!=null&&y(e,["setup","outputAudioTranscription"],mH());const C=m(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&y(e,["setup","realtimeInputConfig"],WBe(C));const R=m(t,["contextWindowCompression"]);e!==void 0&&R!=null&&y(e,["setup","contextWindowCompression"],JBe(R));const P=m(t,["proactivity"]);return e!==void 0&&P!=null&&y(e,["setup","proactivity"],XBe(P)),n}function ZBe(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["setup","model"],At(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],QBe(i,n)),n}function e6e(){return{}}function t6e(){return{}}function n6e(t){const e={},n=m(t,["media"]);n!=null&&y(e,["mediaChunks"],Wre(n));const r=m(t,["audio"]);r!=null&&y(e,["audio"],Jre(r));const i=m(t,["audioStreamEnd"]);i!=null&&y(e,["audioStreamEnd"],i);const o=m(t,["video"]);o!=null&&y(e,["video"],Yre(o));const s=m(t,["text"]);return s!=null&&y(e,["text"],s),m(t,["activityStart"])!=null&&y(e,["activityStart"],e6e()),m(t,["activityEnd"])!=null&&y(e,["activityEnd"],t6e()),e}function r6e(){return{}}function i6e(t){const e={},n=m(t,["fps"]);n!=null&&y(e,["fps"],n);const r=m(t,["endOffset"]);r!=null&&y(e,["endOffset"],r);const i=m(t,["startOffset"]);return i!=null&&y(e,["startOffset"],i),e}function o6e(t){const e={},n=m(t,["data"]);n!=null&&y(e,["data"],n);const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function s6e(t){const e={},n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function pie(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const r=m(t,["args"]);r!=null&&y(e,["args"],r);const i=m(t,["name"]);return i!=null&&y(e,["name"],i),e}function a6e(t){const e={},n=m(t,["videoMetadata"]);n!=null&&y(e,["videoMetadata"],i6e(n));const r=m(t,["thought"]);r!=null&&y(e,["thought"],r);const i=m(t,["inlineData"]);i!=null&&y(e,["inlineData"],o6e(i));const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],s6e(o));const s=m(t,["thoughtSignature"]);s!=null&&y(e,["thoughtSignature"],s);const a=m(t,["functionCall"]);a!=null&&y(e,["functionCall"],pie(a));const u=m(t,["codeExecutionResult"]);u!=null&&y(e,["codeExecutionResult"],u);const c=m(t,["executableCode"]);c!=null&&y(e,["executableCode"],c);const f=m(t,["functionResponse"]);f!=null&&y(e,["functionResponse"],f);const h=m(t,["text"]);return h!=null&&y(e,["text"],h),e}function l6e(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>a6e(o))),y(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&y(e,["role"],r),e}function gH(t){const e={},n=m(t,["text"]);n!=null&&y(e,["text"],n);const r=m(t,["finished"]);return r!=null&&y(e,["finished"],r),e}function u6e(t){const e={},n=m(t,["retrievedUrl"]);n!=null&&y(e,["retrievedUrl"],n);const r=m(t,["urlRetrievalStatus"]);return r!=null&&y(e,["urlRetrievalStatus"],r),e}function c6e(t){const e={},n=m(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>u6e(i))),y(e,["urlMetadata"],r)}return e}function f6e(t){const e={},n=m(t,["modelTurn"]);n!=null&&y(e,["modelTurn"],l6e(n));const r=m(t,["turnComplete"]);r!=null&&y(e,["turnComplete"],r);const i=m(t,["interrupted"]);i!=null&&y(e,["interrupted"],i);const o=m(t,["groundingMetadata"]);o!=null&&y(e,["groundingMetadata"],o);const s=m(t,["generationComplete"]);s!=null&&y(e,["generationComplete"],s);const a=m(t,["inputTranscription"]);a!=null&&y(e,["inputTranscription"],gH(a));const u=m(t,["outputTranscription"]);u!=null&&y(e,["outputTranscription"],gH(u));const c=m(t,["urlContextMetadata"]);c!=null&&y(e,["urlContextMetadata"],c6e(c));const f=m(t,["turnCompleteReason"]);f!=null&&y(e,["turnCompleteReason"],f);const h=m(t,["waitingForInput"]);return h!=null&&y(e,["waitingForInput"],h),e}function d6e(t){const e={},n=m(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>pie(i))),y(e,["functionCalls"],r)}return e}function h6e(t){const e={},n=m(t,["ids"]);return n!=null&&y(e,["ids"],n),e}function e_(t){const e={},n=m(t,["modality"]);n!=null&&y(e,["modality"],n);const r=m(t,["tokenCount"]);return r!=null&&y(e,["tokenCount"],r),e}function p6e(t){const e={},n=m(t,["promptTokenCount"]);n!=null&&y(e,["promptTokenCount"],n);const r=m(t,["cachedContentTokenCount"]);r!=null&&y(e,["cachedContentTokenCount"],r);const i=m(t,["responseTokenCount"]);i!=null&&y(e,["responseTokenCount"],i);const o=m(t,["toolUsePromptTokenCount"]);o!=null&&y(e,["toolUsePromptTokenCount"],o);const s=m(t,["thoughtsTokenCount"]);s!=null&&y(e,["thoughtsTokenCount"],s);const a=m(t,["totalTokenCount"]);a!=null&&y(e,["totalTokenCount"],a);const u=m(t,["promptTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(_=>e_(_))),y(e,["promptTokensDetails"],g)}const c=m(t,["cacheTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(_=>e_(_))),y(e,["cacheTokensDetails"],g)}const f=m(t,["responseTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(_=>e_(_))),y(e,["responseTokensDetails"],g)}const h=m(t,["toolUsePromptTokensDetails"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(_=>e_(_))),y(e,["toolUsePromptTokensDetails"],g)}return e}function m6e(t){const e={},n=m(t,["timeLeft"]);return n!=null&&y(e,["timeLeft"],n),e}function g6e(t){const e={},n=m(t,["newHandle"]);n!=null&&y(e,["newHandle"],n);const r=m(t,["resumable"]);r!=null&&y(e,["resumable"],r);const i=m(t,["lastConsumedClientMessageIndex"]);return i!=null&&y(e,["lastConsumedClientMessageIndex"],i),e}function y6e(t){const e={};m(t,["setupComplete"])!=null&&y(e,["setupComplete"],r6e());const r=m(t,["serverContent"]);r!=null&&y(e,["serverContent"],f6e(r));const i=m(t,["toolCall"]);i!=null&&y(e,["toolCall"],d6e(i));const o=m(t,["toolCallCancellation"]);o!=null&&y(e,["toolCallCancellation"],h6e(o));const s=m(t,["usageMetadata"]);s!=null&&y(e,["usageMetadata"],p6e(s));const a=m(t,["goAway"]);a!=null&&y(e,["goAway"],m6e(a));const u=m(t,["sessionResumptionUpdate"]);return u!=null&&y(e,["sessionResumptionUpdate"],g6e(u)),e}function v6e(){return{}}function _6e(t){const e={},n=m(t,["text"]);n!=null&&y(e,["text"],n);const r=m(t,["weight"]);return r!=null&&y(e,["weight"],r),e}function b6e(t){const e={},n=m(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>_6e(i))),y(e,["weightedPrompts"],r)}return e}function w6e(t){const e={},n=m(t,["temperature"]);n!=null&&y(e,["temperature"],n);const r=m(t,["topK"]);r!=null&&y(e,["topK"],r);const i=m(t,["seed"]);i!=null&&y(e,["seed"],i);const o=m(t,["guidance"]);o!=null&&y(e,["guidance"],o);const s=m(t,["bpm"]);s!=null&&y(e,["bpm"],s);const a=m(t,["density"]);a!=null&&y(e,["density"],a);const u=m(t,["brightness"]);u!=null&&y(e,["brightness"],u);const c=m(t,["scale"]);c!=null&&y(e,["scale"],c);const f=m(t,["muteBass"]);f!=null&&y(e,["muteBass"],f);const h=m(t,["muteDrums"]);h!=null&&y(e,["muteDrums"],h);const g=m(t,["onlyBassAndDrums"]);g!=null&&y(e,["onlyBassAndDrums"],g);const _=m(t,["musicGenerationMode"]);return _!=null&&y(e,["musicGenerationMode"],_),e}function E6e(t){const e={},n=m(t,["clientContent"]);n!=null&&y(e,["clientContent"],b6e(n));const r=m(t,["musicGenerationConfig"]);return r!=null&&y(e,["musicGenerationConfig"],w6e(r)),e}function T6e(t){const e={},n=m(t,["data"]);n!=null&&y(e,["data"],n);const r=m(t,["mimeType"]);r!=null&&y(e,["mimeType"],r);const i=m(t,["sourceMetadata"]);return i!=null&&y(e,["sourceMetadata"],E6e(i)),e}function x6e(t){const e={},n=m(t,["audioChunks"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>T6e(i))),y(e,["audioChunks"],r)}return e}function S6e(t){const e={},n=m(t,["text"]);n!=null&&y(e,["text"],n);const r=m(t,["filteredReason"]);return r!=null&&y(e,["filteredReason"],r),e}function A6e(t){const e={};m(t,["setupComplete"])!=null&&y(e,["setupComplete"],v6e());const r=m(t,["serverContent"]);r!=null&&y(e,["serverContent"],x6e(r));const i=m(t,["filteredPrompt"]);return i!=null&&y(e,["filteredPrompt"],S6e(i)),e}function C6e(t){const e={},n=m(t,["sessionId"]);return n!=null&&y(e,["sessionId"],n),e}function I6e(t){const e={},n=m(t,["fps"]);n!=null&&y(e,["fps"],n);const r=m(t,["endOffset"]);r!=null&&y(e,["endOffset"],r);const i=m(t,["startOffset"]);return i!=null&&y(e,["startOffset"],i),e}function R6e(t){const e={},n=m(t,["displayName"]);n!=null&&y(e,["displayName"],n);const r=m(t,["data"]);r!=null&&y(e,["data"],r);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function P6e(t){const e={},n=m(t,["displayName"]);n!=null&&y(e,["displayName"],n);const r=m(t,["fileUri"]);r!=null&&y(e,["fileUri"],r);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function mie(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const r=m(t,["args"]);r!=null&&y(e,["args"],r);const i=m(t,["name"]);return i!=null&&y(e,["name"],i),e}function N6e(t){const e={},n=m(t,["videoMetadata"]);n!=null&&y(e,["videoMetadata"],I6e(n));const r=m(t,["thought"]);r!=null&&y(e,["thought"],r);const i=m(t,["inlineData"]);i!=null&&y(e,["inlineData"],R6e(i));const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],P6e(o));const s=m(t,["thoughtSignature"]);s!=null&&y(e,["thoughtSignature"],s);const a=m(t,["functionCall"]);a!=null&&y(e,["functionCall"],mie(a));const u=m(t,["codeExecutionResult"]);u!=null&&y(e,["codeExecutionResult"],u);const c=m(t,["executableCode"]);c!=null&&y(e,["executableCode"],c);const f=m(t,["functionResponse"]);f!=null&&y(e,["functionResponse"],f);const h=m(t,["text"]);return h!=null&&y(e,["text"],h),e}function M6e(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>N6e(o))),y(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&y(e,["role"],r),e}function yH(t){const e={},n=m(t,["text"]);n!=null&&y(e,["text"],n);const r=m(t,["finished"]);return r!=null&&y(e,["finished"],r),e}function D6e(t){const e={},n=m(t,["modelTurn"]);n!=null&&y(e,["modelTurn"],M6e(n));const r=m(t,["turnComplete"]);r!=null&&y(e,["turnComplete"],r);const i=m(t,["interrupted"]);i!=null&&y(e,["interrupted"],i);const o=m(t,["groundingMetadata"]);o!=null&&y(e,["groundingMetadata"],o);const s=m(t,["generationComplete"]);s!=null&&y(e,["generationComplete"],s);const a=m(t,["inputTranscription"]);a!=null&&y(e,["inputTranscription"],yH(a));const u=m(t,["outputTranscription"]);u!=null&&y(e,["outputTranscription"],yH(u));const c=m(t,["turnCompleteReason"]);c!=null&&y(e,["turnCompleteReason"],c);const f=m(t,["waitingForInput"]);return f!=null&&y(e,["waitingForInput"],f),e}function k6e(t){const e={},n=m(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>mie(i))),y(e,["functionCalls"],r)}return e}function O6e(t){const e={},n=m(t,["ids"]);return n!=null&&y(e,["ids"],n),e}function t_(t){const e={},n=m(t,["modality"]);n!=null&&y(e,["modality"],n);const r=m(t,["tokenCount"]);return r!=null&&y(e,["tokenCount"],r),e}function L6e(t){const e={},n=m(t,["promptTokenCount"]);n!=null&&y(e,["promptTokenCount"],n);const r=m(t,["cachedContentTokenCount"]);r!=null&&y(e,["cachedContentTokenCount"],r);const i=m(t,["candidatesTokenCount"]);i!=null&&y(e,["responseTokenCount"],i);const o=m(t,["toolUsePromptTokenCount"]);o!=null&&y(e,["toolUsePromptTokenCount"],o);const s=m(t,["thoughtsTokenCount"]);s!=null&&y(e,["thoughtsTokenCount"],s);const a=m(t,["totalTokenCount"]);a!=null&&y(e,["totalTokenCount"],a);const u=m(t,["promptTokensDetails"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(T=>t_(T))),y(e,["promptTokensDetails"],_)}const c=m(t,["cacheTokensDetails"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(T=>t_(T))),y(e,["cacheTokensDetails"],_)}const f=m(t,["candidatesTokensDetails"]);if(f!=null){let _=f;Array.isArray(_)&&(_=_.map(T=>t_(T))),y(e,["responseTokensDetails"],_)}const h=m(t,["toolUsePromptTokensDetails"]);if(h!=null){let _=h;Array.isArray(_)&&(_=_.map(T=>t_(T))),y(e,["toolUsePromptTokensDetails"],_)}const g=m(t,["trafficType"]);return g!=null&&y(e,["trafficType"],g),e}function V6e(t){const e={},n=m(t,["timeLeft"]);return n!=null&&y(e,["timeLeft"],n),e}function U6e(t){const e={},n=m(t,["newHandle"]);n!=null&&y(e,["newHandle"],n);const r=m(t,["resumable"]);r!=null&&y(e,["resumable"],r);const i=m(t,["lastConsumedClientMessageIndex"]);return i!=null&&y(e,["lastConsumedClientMessageIndex"],i),e}function q6e(t){const e={},n=m(t,["setupComplete"]);n!=null&&y(e,["setupComplete"],C6e(n));const r=m(t,["serverContent"]);r!=null&&y(e,["serverContent"],D6e(r));const i=m(t,["toolCall"]);i!=null&&y(e,["toolCall"],k6e(i));const o=m(t,["toolCallCancellation"]);o!=null&&y(e,["toolCallCancellation"],O6e(o));const s=m(t,["usageMetadata"]);s!=null&&y(e,["usageMetadata"],L6e(s));const a=m(t,["goAway"]);a!=null&&y(e,["goAway"],V6e(a));const u=m(t,["sessionResumptionUpdate"]);return u!=null&&y(e,["sessionResumptionUpdate"],U6e(u)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function F6e(t){const e={},n=m(t,["fps"]);n!=null&&y(e,["fps"],n);const r=m(t,["endOffset"]);r!=null&&y(e,["endOffset"],r);const i=m(t,["startOffset"]);return i!=null&&y(e,["startOffset"],i),e}function B6e(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["data"]);n!=null&&y(e,["data"],n);const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function $6e(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function z6e(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const r=m(t,["args"]);r!=null&&y(e,["args"],r);const i=m(t,["name"]);return i!=null&&y(e,["name"],i),e}function H6e(t){const e={},n=m(t,["videoMetadata"]);n!=null&&y(e,["videoMetadata"],F6e(n));const r=m(t,["thought"]);r!=null&&y(e,["thought"],r);const i=m(t,["inlineData"]);i!=null&&y(e,["inlineData"],B6e(i));const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],$6e(o));const s=m(t,["thoughtSignature"]);s!=null&&y(e,["thoughtSignature"],s);const a=m(t,["functionCall"]);a!=null&&y(e,["functionCall"],z6e(a));const u=m(t,["codeExecutionResult"]);u!=null&&y(e,["codeExecutionResult"],u);const c=m(t,["executableCode"]);c!=null&&y(e,["executableCode"],c);const f=m(t,["functionResponse"]);f!=null&&y(e,["functionResponse"],f);const h=m(t,["text"]);return h!=null&&y(e,["text"],h),e}function RE(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>H6e(o))),y(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&y(e,["role"],r),e}function G6e(t){const e={},n=m(t,["anyOf"]);n!=null&&y(e,["anyOf"],n);const r=m(t,["default"]);r!=null&&y(e,["default"],r);const i=m(t,["description"]);i!=null&&y(e,["description"],i);const o=m(t,["enum"]);o!=null&&y(e,["enum"],o);const s=m(t,["example"]);s!=null&&y(e,["example"],s);const a=m(t,["format"]);a!=null&&y(e,["format"],a);const u=m(t,["items"]);u!=null&&y(e,["items"],u);const c=m(t,["maxItems"]);c!=null&&y(e,["maxItems"],c);const f=m(t,["maxLength"]);f!=null&&y(e,["maxLength"],f);const h=m(t,["maxProperties"]);h!=null&&y(e,["maxProperties"],h);const g=m(t,["maximum"]);g!=null&&y(e,["maximum"],g);const _=m(t,["minItems"]);_!=null&&y(e,["minItems"],_);const T=m(t,["minLength"]);T!=null&&y(e,["minLength"],T);const E=m(t,["minProperties"]);E!=null&&y(e,["minProperties"],E);const b=m(t,["minimum"]);b!=null&&y(e,["minimum"],b);const S=m(t,["nullable"]);S!=null&&y(e,["nullable"],S);const C=m(t,["pattern"]);C!=null&&y(e,["pattern"],C);const R=m(t,["properties"]);R!=null&&y(e,["properties"],R);const P=m(t,["propertyOrdering"]);P!=null&&y(e,["propertyOrdering"],P);const O=m(t,["required"]);O!=null&&y(e,["required"],O);const q=m(t,["title"]);q!=null&&y(e,["title"],q);const D=m(t,["type"]);return D!=null&&y(e,["type"],D),e}function j6e(t){const e={};if(m(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=m(t,["category"]);n!=null&&y(e,["category"],n);const r=m(t,["threshold"]);return r!=null&&y(e,["threshold"],r),e}function K6e(t){const e={},n=m(t,["behavior"]);n!=null&&y(e,["behavior"],n);const r=m(t,["description"]);r!=null&&y(e,["description"],r);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const o=m(t,["parameters"]);o!=null&&y(e,["parameters"],o);const s=m(t,["parametersJsonSchema"]);s!=null&&y(e,["parametersJsonSchema"],s);const a=m(t,["response"]);a!=null&&y(e,["response"],a);const u=m(t,["responseJsonSchema"]);return u!=null&&y(e,["responseJsonSchema"],u),e}function W6e(t){const e={},n=m(t,["startTime"]);n!=null&&y(e,["startTime"],n);const r=m(t,["endTime"]);return r!=null&&y(e,["endTime"],r),e}function Y6e(t){const e={},n=m(t,["timeRangeFilter"]);if(n!=null&&y(e,["timeRangeFilter"],W6e(n)),m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function J6e(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const r=m(t,["dynamicThreshold"]);return r!=null&&y(e,["dynamicThreshold"],r),e}function X6e(t){const e={},n=m(t,["dynamicRetrievalConfig"]);return n!=null&&y(e,["dynamicRetrievalConfig"],J6e(n)),e}function Q6e(){return{}}function Z6e(t){const e={},n=m(t,["environment"]);return n!=null&&y(e,["environment"],n),e}function e5e(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(c=>K6e(c))),y(e,["functionDeclarations"],u)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=m(t,["googleSearch"]);r!=null&&y(e,["googleSearch"],Y6e(r));const i=m(t,["googleSearchRetrieval"]);if(i!=null&&y(e,["googleSearchRetrieval"],X6e(i)),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(m(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");m(t,["urlContext"])!=null&&y(e,["urlContext"],Q6e());const s=m(t,["computerUse"]);s!=null&&y(e,["computerUse"],Z6e(s));const a=m(t,["codeExecution"]);return a!=null&&y(e,["codeExecution"],a),e}function t5e(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const r=m(t,["allowedFunctionNames"]);return r!=null&&y(e,["allowedFunctionNames"],r),e}function n5e(t){const e={},n=m(t,["latitude"]);n!=null&&y(e,["latitude"],n);const r=m(t,["longitude"]);return r!=null&&y(e,["longitude"],r),e}function r5e(t){const e={},n=m(t,["latLng"]);n!=null&&y(e,["latLng"],n5e(n));const r=m(t,["languageCode"]);return r!=null&&y(e,["languageCode"],r),e}function i5e(t){const e={},n=m(t,["functionCallingConfig"]);n!=null&&y(e,["functionCallingConfig"],t5e(n));const r=m(t,["retrievalConfig"]);return r!=null&&y(e,["retrievalConfig"],r5e(r)),e}function o5e(t){const e={},n=m(t,["voiceName"]);return n!=null&&y(e,["voiceName"],n),e}function gie(t){const e={},n=m(t,["prebuiltVoiceConfig"]);return n!=null&&y(e,["prebuiltVoiceConfig"],o5e(n)),e}function s5e(t){const e={},n=m(t,["speaker"]);n!=null&&y(e,["speaker"],n);const r=m(t,["voiceConfig"]);return r!=null&&y(e,["voiceConfig"],gie(r)),e}function a5e(t){const e={},n=m(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>s5e(i))),y(e,["speakerVoiceConfigs"],r)}return e}function l5e(t){const e={},n=m(t,["voiceConfig"]);n!=null&&y(e,["voiceConfig"],gie(n));const r=m(t,["multiSpeakerVoiceConfig"]);r!=null&&y(e,["multiSpeakerVoiceConfig"],a5e(r));const i=m(t,["languageCode"]);return i!=null&&y(e,["languageCode"],i),e}function u5e(t){const e={},n=m(t,["includeThoughts"]);n!=null&&y(e,["includeThoughts"],n);const r=m(t,["thinkingBudget"]);return r!=null&&y(e,["thinkingBudget"],r),e}function c5e(t,e,n){const r={},i=m(e,["systemInstruction"]);n!==void 0&&i!=null&&y(n,["systemInstruction"],RE(Br(i)));const o=m(e,["temperature"]);o!=null&&y(r,["temperature"],o);const s=m(e,["topP"]);s!=null&&y(r,["topP"],s);const a=m(e,["topK"]);a!=null&&y(r,["topK"],a);const u=m(e,["candidateCount"]);u!=null&&y(r,["candidateCount"],u);const c=m(e,["maxOutputTokens"]);c!=null&&y(r,["maxOutputTokens"],c);const f=m(e,["stopSequences"]);f!=null&&y(r,["stopSequences"],f);const h=m(e,["responseLogprobs"]);h!=null&&y(r,["responseLogprobs"],h);const g=m(e,["logprobs"]);g!=null&&y(r,["logprobs"],g);const _=m(e,["presencePenalty"]);_!=null&&y(r,["presencePenalty"],_);const T=m(e,["frequencyPenalty"]);T!=null&&y(r,["frequencyPenalty"],T);const E=m(e,["seed"]);E!=null&&y(r,["seed"],E);const b=m(e,["responseMimeType"]);b!=null&&y(r,["responseMimeType"],b);const S=m(e,["responseSchema"]);S!=null&&y(r,["responseSchema"],G6e(xL(S)));const C=m(e,["responseJsonSchema"]);if(C!=null&&y(r,["responseJsonSchema"],C),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const R=m(e,["safetySettings"]);if(n!==void 0&&R!=null){let V=R;Array.isArray(V)&&(V=V.map($=>j6e($))),y(n,["safetySettings"],V)}const P=m(e,["tools"]);if(n!==void 0&&P!=null){let V=rp(P);Array.isArray(V)&&(V=V.map($=>e5e(np($)))),y(n,["tools"],V)}const O=m(e,["toolConfig"]);if(n!==void 0&&O!=null&&y(n,["toolConfig"],i5e(O)),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const q=m(e,["cachedContent"]);n!==void 0&&q!=null&&y(n,["cachedContent"],sl(t,q));const D=m(e,["responseModalities"]);D!=null&&y(r,["responseModalities"],D);const L=m(e,["mediaResolution"]);L!=null&&y(r,["mediaResolution"],L);const N=m(e,["speechConfig"]);if(N!=null&&y(r,["speechConfig"],l5e(SL(N))),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=m(e,["thinkingConfig"]);return U!=null&&y(r,["thinkingConfig"],u5e(U)),r}function vH(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","model"],At(t,r));const i=m(e,["contents"]);if(i!=null){let s=_o(i);Array.isArray(s)&&(s=s.map(a=>RE(a))),y(n,["contents"],s)}const o=m(e,["config"]);return o!=null&&y(n,["generationConfig"],c5e(t,o,n)),n}function f5e(t,e){const n={},r=m(t,["taskType"]);e!==void 0&&r!=null&&y(e,["requests[]","taskType"],r);const i=m(t,["title"]);e!==void 0&&i!=null&&y(e,["requests[]","title"],i);const o=m(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&y(e,["requests[]","outputDimensionality"],o),m(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function d5e(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","model"],At(t,r));const i=m(e,["contents"]);i!=null&&y(n,["requests[]","content"],TL(t,i));const o=m(e,["config"]);o!=null&&y(n,["config"],f5e(o,n));const s=m(e,["model"]);return s!==void 0&&y(n,["requests[]","model"],At(t,s)),n}function h5e(t,e){const n={};if(m(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=m(t,["numberOfImages"]);e!==void 0&&r!=null&&y(e,["parameters","sampleCount"],r);const i=m(t,["aspectRatio"]);e!==void 0&&i!=null&&y(e,["parameters","aspectRatio"],i);const o=m(t,["guidanceScale"]);if(e!==void 0&&o!=null&&y(e,["parameters","guidanceScale"],o),m(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=m(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&y(e,["parameters","safetySetting"],s);const a=m(t,["personGeneration"]);e!==void 0&&a!=null&&y(e,["parameters","personGeneration"],a);const u=m(t,["includeSafetyAttributes"]);e!==void 0&&u!=null&&y(e,["parameters","includeSafetyAttributes"],u);const c=m(t,["includeRaiReason"]);e!==void 0&&c!=null&&y(e,["parameters","includeRaiReason"],c);const f=m(t,["language"]);e!==void 0&&f!=null&&y(e,["parameters","language"],f);const h=m(t,["outputMimeType"]);e!==void 0&&h!=null&&y(e,["parameters","outputOptions","mimeType"],h);const g=m(t,["outputCompressionQuality"]);if(e!==void 0&&g!=null&&y(e,["parameters","outputOptions","compressionQuality"],g),m(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const _=m(t,["imageSize"]);if(e!==void 0&&_!=null&&y(e,["parameters","sampleImageSize"],_),m(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function p5e(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","model"],At(t,r));const i=m(e,["prompt"]);i!=null&&y(n,["instances[0]","prompt"],i);const o=m(e,["config"]);return o!=null&&y(n,["config"],h5e(o,n)),n}function m5e(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","name"],At(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],i),n}function g5e(t,e,n){const r={},i=m(e,["pageSize"]);n!==void 0&&i!=null&&y(n,["_query","pageSize"],i);const o=m(e,["pageToken"]);n!==void 0&&o!=null&&y(n,["_query","pageToken"],o);const s=m(e,["filter"]);n!==void 0&&s!=null&&y(n,["_query","filter"],s);const a=m(e,["queryBase"]);return n!==void 0&&a!=null&&y(n,["_url","models_url"],eie(t,a)),r}function y5e(t,e){const n={},r=m(e,["config"]);return r!=null&&y(n,["config"],g5e(t,r,n)),n}function v5e(t,e){const n={},r=m(t,["displayName"]);e!==void 0&&r!=null&&y(e,["displayName"],r);const i=m(t,["description"]);e!==void 0&&i!=null&&y(e,["description"],i);const o=m(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&y(e,["defaultCheckpointId"],o),n}function _5e(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","name"],At(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],v5e(i,n)),n}function b5e(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","name"],At(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],i),n}function w5e(t){const e={};if(m(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(m(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(m(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function E5e(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","model"],At(t,r));const i=m(e,["contents"]);if(i!=null){let s=_o(i);Array.isArray(s)&&(s=s.map(a=>RE(a))),y(n,["contents"],s)}const o=m(e,["config"]);return o!=null&&y(n,["config"],w5e(o)),n}function yie(t){const e={};if(m(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=m(t,["imageBytes"]);n!=null&&y(e,["bytesBase64Encoded"],wf(n));const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function T5e(t,e){const n={},r=m(t,["prompt"]);e!==void 0&&r!=null&&y(e,["instances[0]","prompt"],r);const i=m(t,["image"]);if(e!==void 0&&i!=null&&y(e,["instances[0]","image"],yie(i)),m(t,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");return n}function x5e(t,e){const n={},r=m(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&y(e,["parameters","sampleCount"],r),m(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=m(t,["durationSeconds"]);if(e!==void 0&&i!=null&&y(e,["parameters","durationSeconds"],i),m(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=m(t,["aspectRatio"]);e!==void 0&&o!=null&&y(e,["parameters","aspectRatio"],o);const s=m(t,["resolution"]);e!==void 0&&s!=null&&y(e,["parameters","resolution"],s);const a=m(t,["personGeneration"]);if(e!==void 0&&a!=null&&y(e,["parameters","personGeneration"],a),m(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const u=m(t,["negativePrompt"]);e!==void 0&&u!=null&&y(e,["parameters","negativePrompt"],u);const c=m(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&y(e,["parameters","enhancePrompt"],c),m(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(m(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(m(t,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(m(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(m(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function S5e(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","model"],At(t,r));const i=m(e,["prompt"]);i!=null&&y(n,["instances[0]","prompt"],i);const o=m(e,["image"]);if(o!=null&&y(n,["instances[0]","image"],yie(o)),m(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const s=m(e,["source"]);s!=null&&y(n,["config"],T5e(s,n));const a=m(e,["config"]);return a!=null&&y(n,["config"],x5e(a,n)),n}function A5e(t){const e={},n=m(t,["fps"]);n!=null&&y(e,["fps"],n);const r=m(t,["endOffset"]);r!=null&&y(e,["endOffset"],r);const i=m(t,["startOffset"]);return i!=null&&y(e,["startOffset"],i),e}function C5e(t){const e={},n=m(t,["displayName"]);n!=null&&y(e,["displayName"],n);const r=m(t,["data"]);r!=null&&y(e,["data"],r);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function I5e(t){const e={},n=m(t,["displayName"]);n!=null&&y(e,["displayName"],n);const r=m(t,["fileUri"]);r!=null&&y(e,["fileUri"],r);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function R5e(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const r=m(t,["args"]);r!=null&&y(e,["args"],r);const i=m(t,["name"]);return i!=null&&y(e,["name"],i),e}function P5e(t){const e={},n=m(t,["videoMetadata"]);n!=null&&y(e,["videoMetadata"],A5e(n));const r=m(t,["thought"]);r!=null&&y(e,["thought"],r);const i=m(t,["inlineData"]);i!=null&&y(e,["inlineData"],C5e(i));const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],I5e(o));const s=m(t,["thoughtSignature"]);s!=null&&y(e,["thoughtSignature"],s);const a=m(t,["functionCall"]);a!=null&&y(e,["functionCall"],R5e(a));const u=m(t,["codeExecutionResult"]);u!=null&&y(e,["codeExecutionResult"],u);const c=m(t,["executableCode"]);c!=null&&y(e,["executableCode"],c);const f=m(t,["functionResponse"]);f!=null&&y(e,["functionResponse"],f);const h=m(t,["text"]);return h!=null&&y(e,["text"],h),e}function op(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>P5e(o))),y(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&y(e,["role"],r),e}function N5e(t){const e={},n=m(t,["anyOf"]);n!=null&&y(e,["anyOf"],n);const r=m(t,["default"]);r!=null&&y(e,["default"],r);const i=m(t,["description"]);i!=null&&y(e,["description"],i);const o=m(t,["enum"]);o!=null&&y(e,["enum"],o);const s=m(t,["example"]);s!=null&&y(e,["example"],s);const a=m(t,["format"]);a!=null&&y(e,["format"],a);const u=m(t,["items"]);u!=null&&y(e,["items"],u);const c=m(t,["maxItems"]);c!=null&&y(e,["maxItems"],c);const f=m(t,["maxLength"]);f!=null&&y(e,["maxLength"],f);const h=m(t,["maxProperties"]);h!=null&&y(e,["maxProperties"],h);const g=m(t,["maximum"]);g!=null&&y(e,["maximum"],g);const _=m(t,["minItems"]);_!=null&&y(e,["minItems"],_);const T=m(t,["minLength"]);T!=null&&y(e,["minLength"],T);const E=m(t,["minProperties"]);E!=null&&y(e,["minProperties"],E);const b=m(t,["minimum"]);b!=null&&y(e,["minimum"],b);const S=m(t,["nullable"]);S!=null&&y(e,["nullable"],S);const C=m(t,["pattern"]);C!=null&&y(e,["pattern"],C);const R=m(t,["properties"]);R!=null&&y(e,["properties"],R);const P=m(t,["propertyOrdering"]);P!=null&&y(e,["propertyOrdering"],P);const O=m(t,["required"]);O!=null&&y(e,["required"],O);const q=m(t,["title"]);q!=null&&y(e,["title"],q);const D=m(t,["type"]);return D!=null&&y(e,["type"],D),e}function M5e(t){const e={},n=m(t,["featureSelectionPreference"]);return n!=null&&y(e,["featureSelectionPreference"],n),e}function D5e(t){const e={},n=m(t,["method"]);n!=null&&y(e,["method"],n);const r=m(t,["category"]);r!=null&&y(e,["category"],r);const i=m(t,["threshold"]);return i!=null&&y(e,["threshold"],i),e}function k5e(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&y(e,["description"],n);const r=m(t,["name"]);r!=null&&y(e,["name"],r);const i=m(t,["parameters"]);i!=null&&y(e,["parameters"],i);const o=m(t,["parametersJsonSchema"]);o!=null&&y(e,["parametersJsonSchema"],o);const s=m(t,["response"]);s!=null&&y(e,["response"],s);const a=m(t,["responseJsonSchema"]);return a!=null&&y(e,["responseJsonSchema"],a),e}function O5e(t){const e={},n=m(t,["startTime"]);n!=null&&y(e,["startTime"],n);const r=m(t,["endTime"]);return r!=null&&y(e,["endTime"],r),e}function L5e(t){const e={},n=m(t,["timeRangeFilter"]);n!=null&&y(e,["timeRangeFilter"],O5e(n));const r=m(t,["excludeDomains"]);return r!=null&&y(e,["excludeDomains"],r),e}function V5e(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const r=m(t,["dynamicThreshold"]);return r!=null&&y(e,["dynamicThreshold"],r),e}function U5e(t){const e={},n=m(t,["dynamicRetrievalConfig"]);return n!=null&&y(e,["dynamicRetrievalConfig"],V5e(n)),e}function q5e(t){const e={},n=m(t,["excludeDomains"]);return n!=null&&y(e,["excludeDomains"],n),e}function F5e(t){const e={},n=m(t,["apiKeyString"]);return n!=null&&y(e,["apiKeyString"],n),e}function B5e(t){const e={},n=m(t,["apiKeyConfig"]);n!=null&&y(e,["apiKeyConfig"],F5e(n));const r=m(t,["authType"]);r!=null&&y(e,["authType"],r);const i=m(t,["googleServiceAccountConfig"]);i!=null&&y(e,["googleServiceAccountConfig"],i);const o=m(t,["httpBasicAuthConfig"]);o!=null&&y(e,["httpBasicAuthConfig"],o);const s=m(t,["oauthConfig"]);s!=null&&y(e,["oauthConfig"],s);const a=m(t,["oidcConfig"]);return a!=null&&y(e,["oidcConfig"],a),e}function $5e(t){const e={},n=m(t,["authConfig"]);return n!=null&&y(e,["authConfig"],B5e(n)),e}function z5e(){return{}}function H5e(t){const e={},n=m(t,["environment"]);return n!=null&&y(e,["environment"],n),e}function vie(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(g=>k5e(g))),y(e,["functionDeclarations"],h)}const r=m(t,["retrieval"]);r!=null&&y(e,["retrieval"],r);const i=m(t,["googleSearch"]);i!=null&&y(e,["googleSearch"],L5e(i));const o=m(t,["googleSearchRetrieval"]);o!=null&&y(e,["googleSearchRetrieval"],U5e(o));const s=m(t,["enterpriseWebSearch"]);s!=null&&y(e,["enterpriseWebSearch"],q5e(s));const a=m(t,["googleMaps"]);a!=null&&y(e,["googleMaps"],$5e(a)),m(t,["urlContext"])!=null&&y(e,["urlContext"],z5e());const c=m(t,["computerUse"]);c!=null&&y(e,["computerUse"],H5e(c));const f=m(t,["codeExecution"]);return f!=null&&y(e,["codeExecution"],f),e}function G5e(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const r=m(t,["allowedFunctionNames"]);return r!=null&&y(e,["allowedFunctionNames"],r),e}function j5e(t){const e={},n=m(t,["latitude"]);n!=null&&y(e,["latitude"],n);const r=m(t,["longitude"]);return r!=null&&y(e,["longitude"],r),e}function K5e(t){const e={},n=m(t,["latLng"]);n!=null&&y(e,["latLng"],j5e(n));const r=m(t,["languageCode"]);return r!=null&&y(e,["languageCode"],r),e}function W5e(t){const e={},n=m(t,["functionCallingConfig"]);n!=null&&y(e,["functionCallingConfig"],G5e(n));const r=m(t,["retrievalConfig"]);return r!=null&&y(e,["retrievalConfig"],K5e(r)),e}function Y5e(t){const e={},n=m(t,["voiceName"]);return n!=null&&y(e,["voiceName"],n),e}function J5e(t){const e={},n=m(t,["prebuiltVoiceConfig"]);return n!=null&&y(e,["prebuiltVoiceConfig"],Y5e(n)),e}function X5e(t){const e={},n=m(t,["voiceConfig"]);if(n!=null&&y(e,["voiceConfig"],J5e(n)),m(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=m(t,["languageCode"]);return r!=null&&y(e,["languageCode"],r),e}function Q5e(t){const e={},n=m(t,["includeThoughts"]);n!=null&&y(e,["includeThoughts"],n);const r=m(t,["thinkingBudget"]);return r!=null&&y(e,["thinkingBudget"],r),e}function Z5e(t,e,n){const r={},i=m(e,["systemInstruction"]);n!==void 0&&i!=null&&y(n,["systemInstruction"],op(Br(i)));const o=m(e,["temperature"]);o!=null&&y(r,["temperature"],o);const s=m(e,["topP"]);s!=null&&y(r,["topP"],s);const a=m(e,["topK"]);a!=null&&y(r,["topK"],a);const u=m(e,["candidateCount"]);u!=null&&y(r,["candidateCount"],u);const c=m(e,["maxOutputTokens"]);c!=null&&y(r,["maxOutputTokens"],c);const f=m(e,["stopSequences"]);f!=null&&y(r,["stopSequences"],f);const h=m(e,["responseLogprobs"]);h!=null&&y(r,["responseLogprobs"],h);const g=m(e,["logprobs"]);g!=null&&y(r,["logprobs"],g);const _=m(e,["presencePenalty"]);_!=null&&y(r,["presencePenalty"],_);const T=m(e,["frequencyPenalty"]);T!=null&&y(r,["frequencyPenalty"],T);const E=m(e,["seed"]);E!=null&&y(r,["seed"],E);const b=m(e,["responseMimeType"]);b!=null&&y(r,["responseMimeType"],b);const S=m(e,["responseSchema"]);S!=null&&y(r,["responseSchema"],N5e(xL(S)));const C=m(e,["responseJsonSchema"]);C!=null&&y(r,["responseJsonSchema"],C);const R=m(e,["routingConfig"]);R!=null&&y(r,["routingConfig"],R);const P=m(e,["modelSelectionConfig"]);P!=null&&y(r,["modelConfig"],M5e(P));const O=m(e,["safetySettings"]);if(n!==void 0&&O!=null){let X=O;Array.isArray(X)&&(X=X.map(K=>D5e(K))),y(n,["safetySettings"],X)}const q=m(e,["tools"]);if(n!==void 0&&q!=null){let X=rp(q);Array.isArray(X)&&(X=X.map(K=>vie(np(K)))),y(n,["tools"],X)}const D=m(e,["toolConfig"]);n!==void 0&&D!=null&&y(n,["toolConfig"],W5e(D));const L=m(e,["labels"]);n!==void 0&&L!=null&&y(n,["labels"],L);const N=m(e,["cachedContent"]);n!==void 0&&N!=null&&y(n,["cachedContent"],sl(t,N));const U=m(e,["responseModalities"]);U!=null&&y(r,["responseModalities"],U);const V=m(e,["mediaResolution"]);V!=null&&y(r,["mediaResolution"],V);const $=m(e,["speechConfig"]);$!=null&&y(r,["speechConfig"],X5e(SL($)));const F=m(e,["audioTimestamp"]);F!=null&&y(r,["audioTimestamp"],F);const H=m(e,["thinkingConfig"]);return H!=null&&y(r,["thinkingConfig"],Q5e(H)),r}function _H(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","model"],At(t,r));const i=m(e,["contents"]);if(i!=null){let s=_o(i);Array.isArray(s)&&(s=s.map(a=>op(a))),y(n,["contents"],s)}const o=m(e,["config"]);return o!=null&&y(n,["generationConfig"],Z5e(t,o,n)),n}function e$e(t,e){const n={},r=m(t,["taskType"]);e!==void 0&&r!=null&&y(e,["instances[]","task_type"],r);const i=m(t,["title"]);e!==void 0&&i!=null&&y(e,["instances[]","title"],i);const o=m(t,["outputDimensionality"]);e!==void 0&&o!=null&&y(e,["parameters","outputDimensionality"],o);const s=m(t,["mimeType"]);e!==void 0&&s!=null&&y(e,["instances[]","mimeType"],s);const a=m(t,["autoTruncate"]);return e!==void 0&&a!=null&&y(e,["parameters","autoTruncate"],a),n}function t$e(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","model"],At(t,r));const i=m(e,["contents"]);i!=null&&y(n,["instances[]","content"],TL(t,i));const o=m(e,["config"]);return o!=null&&y(n,["config"],e$e(o,n)),n}function n$e(t,e){const n={},r=m(t,["outputGcsUri"]);e!==void 0&&r!=null&&y(e,["parameters","storageUri"],r);const i=m(t,["negativePrompt"]);e!==void 0&&i!=null&&y(e,["parameters","negativePrompt"],i);const o=m(t,["numberOfImages"]);e!==void 0&&o!=null&&y(e,["parameters","sampleCount"],o);const s=m(t,["aspectRatio"]);e!==void 0&&s!=null&&y(e,["parameters","aspectRatio"],s);const a=m(t,["guidanceScale"]);e!==void 0&&a!=null&&y(e,["parameters","guidanceScale"],a);const u=m(t,["seed"]);e!==void 0&&u!=null&&y(e,["parameters","seed"],u);const c=m(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&y(e,["parameters","safetySetting"],c);const f=m(t,["personGeneration"]);e!==void 0&&f!=null&&y(e,["parameters","personGeneration"],f);const h=m(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&y(e,["parameters","includeSafetyAttributes"],h);const g=m(t,["includeRaiReason"]);e!==void 0&&g!=null&&y(e,["parameters","includeRaiReason"],g);const _=m(t,["language"]);e!==void 0&&_!=null&&y(e,["parameters","language"],_);const T=m(t,["outputMimeType"]);e!==void 0&&T!=null&&y(e,["parameters","outputOptions","mimeType"],T);const E=m(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&y(e,["parameters","outputOptions","compressionQuality"],E);const b=m(t,["addWatermark"]);e!==void 0&&b!=null&&y(e,["parameters","addWatermark"],b);const S=m(t,["imageSize"]);e!==void 0&&S!=null&&y(e,["parameters","sampleImageSize"],S);const C=m(t,["enhancePrompt"]);return e!==void 0&&C!=null&&y(e,["parameters","enhancePrompt"],C),n}function r$e(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","model"],At(t,r));const i=m(e,["prompt"]);i!=null&&y(n,["instances[0]","prompt"],i);const o=m(e,["config"]);return o!=null&&y(n,["config"],n$e(o,n)),n}function os(t){const e={},n=m(t,["gcsUri"]);n!=null&&y(e,["gcsUri"],n);const r=m(t,["imageBytes"]);r!=null&&y(e,["bytesBase64Encoded"],wf(r));const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function i$e(t){const e={},n=m(t,["maskMode"]);n!=null&&y(e,["maskMode"],n);const r=m(t,["segmentationClasses"]);r!=null&&y(e,["maskClasses"],r);const i=m(t,["maskDilation"]);return i!=null&&y(e,["dilation"],i),e}function o$e(t){const e={},n=m(t,["controlType"]);n!=null&&y(e,["controlType"],n);const r=m(t,["enableControlImageComputation"]);return r!=null&&y(e,["computeControl"],r),e}function s$e(t){const e={},n=m(t,["styleDescription"]);return n!=null&&y(e,["styleDescription"],n),e}function a$e(t){const e={},n=m(t,["subjectType"]);n!=null&&y(e,["subjectType"],n);const r=m(t,["subjectDescription"]);return r!=null&&y(e,["subjectDescription"],r),e}function l$e(t){const e={},n=m(t,["referenceImage"]);n!=null&&y(e,["referenceImage"],os(n));const r=m(t,["referenceId"]);r!=null&&y(e,["referenceId"],r);const i=m(t,["referenceType"]);i!=null&&y(e,["referenceType"],i);const o=m(t,["maskImageConfig"]);o!=null&&y(e,["maskImageConfig"],i$e(o));const s=m(t,["controlImageConfig"]);s!=null&&y(e,["controlImageConfig"],o$e(s));const a=m(t,["styleImageConfig"]);a!=null&&y(e,["styleImageConfig"],s$e(a));const u=m(t,["subjectImageConfig"]);return u!=null&&y(e,["subjectImageConfig"],a$e(u)),e}function u$e(t,e){const n={},r=m(t,["outputGcsUri"]);e!==void 0&&r!=null&&y(e,["parameters","storageUri"],r);const i=m(t,["negativePrompt"]);e!==void 0&&i!=null&&y(e,["parameters","negativePrompt"],i);const o=m(t,["numberOfImages"]);e!==void 0&&o!=null&&y(e,["parameters","sampleCount"],o);const s=m(t,["aspectRatio"]);e!==void 0&&s!=null&&y(e,["parameters","aspectRatio"],s);const a=m(t,["guidanceScale"]);e!==void 0&&a!=null&&y(e,["parameters","guidanceScale"],a);const u=m(t,["seed"]);e!==void 0&&u!=null&&y(e,["parameters","seed"],u);const c=m(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&y(e,["parameters","safetySetting"],c);const f=m(t,["personGeneration"]);e!==void 0&&f!=null&&y(e,["parameters","personGeneration"],f);const h=m(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&y(e,["parameters","includeSafetyAttributes"],h);const g=m(t,["includeRaiReason"]);e!==void 0&&g!=null&&y(e,["parameters","includeRaiReason"],g);const _=m(t,["language"]);e!==void 0&&_!=null&&y(e,["parameters","language"],_);const T=m(t,["outputMimeType"]);e!==void 0&&T!=null&&y(e,["parameters","outputOptions","mimeType"],T);const E=m(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&y(e,["parameters","outputOptions","compressionQuality"],E);const b=m(t,["addWatermark"]);e!==void 0&&b!=null&&y(e,["parameters","addWatermark"],b);const S=m(t,["editMode"]);e!==void 0&&S!=null&&y(e,["parameters","editMode"],S);const C=m(t,["baseSteps"]);return e!==void 0&&C!=null&&y(e,["parameters","editConfig","baseSteps"],C),n}function c$e(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","model"],At(t,r));const i=m(e,["prompt"]);i!=null&&y(n,["instances[0]","prompt"],i);const o=m(e,["referenceImages"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>l$e(u))),y(n,["instances[0]","referenceImages"],a)}const s=m(e,["config"]);return s!=null&&y(n,["config"],u$e(s,n)),n}function f$e(t,e){const n={},r=m(t,["outputGcsUri"]);e!==void 0&&r!=null&&y(e,["parameters","storageUri"],r);const i=m(t,["includeRaiReason"]);e!==void 0&&i!=null&&y(e,["parameters","includeRaiReason"],i);const o=m(t,["outputMimeType"]);e!==void 0&&o!=null&&y(e,["parameters","outputOptions","mimeType"],o);const s=m(t,["outputCompressionQuality"]);e!==void 0&&s!=null&&y(e,["parameters","outputOptions","compressionQuality"],s);const a=m(t,["enhanceInputImage"]);e!==void 0&&a!=null&&y(e,["parameters","upscaleConfig","enhanceInputImage"],a);const u=m(t,["imagePreservationFactor"]);e!==void 0&&u!=null&&y(e,["parameters","upscaleConfig","imagePreservationFactor"],u);const c=m(t,["numberOfImages"]);e!==void 0&&c!=null&&y(e,["parameters","sampleCount"],c);const f=m(t,["mode"]);return e!==void 0&&f!=null&&y(e,["parameters","mode"],f),n}function d$e(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","model"],At(t,r));const i=m(e,["image"]);i!=null&&y(n,["instances[0]","image"],os(i));const o=m(e,["upscaleFactor"]);o!=null&&y(n,["parameters","upscaleConfig","upscaleFactor"],o);const s=m(e,["config"]);return s!=null&&y(n,["config"],f$e(s,n)),n}function h$e(t){const e={},n=m(t,["productImage"]);return n!=null&&y(e,["image"],os(n)),e}function p$e(t,e){const n={},r=m(t,["prompt"]);e!==void 0&&r!=null&&y(e,["instances[0]","prompt"],r);const i=m(t,["personImage"]);e!==void 0&&i!=null&&y(e,["instances[0]","personImage","image"],os(i));const o=m(t,["productImages"]);if(e!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>h$e(a))),y(e,["instances[0]","productImages"],s)}return n}function m$e(t,e){const n={},r=m(t,["numberOfImages"]);e!==void 0&&r!=null&&y(e,["parameters","sampleCount"],r);const i=m(t,["baseSteps"]);e!==void 0&&i!=null&&y(e,["parameters","editConfig","baseSteps"],i);const o=m(t,["outputGcsUri"]);e!==void 0&&o!=null&&y(e,["parameters","storageUri"],o);const s=m(t,["seed"]);e!==void 0&&s!=null&&y(e,["parameters","seed"],s);const a=m(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&y(e,["parameters","safetySetting"],a);const u=m(t,["personGeneration"]);e!==void 0&&u!=null&&y(e,["parameters","personGeneration"],u);const c=m(t,["addWatermark"]);e!==void 0&&c!=null&&y(e,["parameters","addWatermark"],c);const f=m(t,["outputMimeType"]);e!==void 0&&f!=null&&y(e,["parameters","outputOptions","mimeType"],f);const h=m(t,["outputCompressionQuality"]);e!==void 0&&h!=null&&y(e,["parameters","outputOptions","compressionQuality"],h);const g=m(t,["enhancePrompt"]);return e!==void 0&&g!=null&&y(e,["parameters","enhancePrompt"],g),n}function g$e(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","model"],At(t,r));const i=m(e,["source"]);i!=null&&y(n,["config"],p$e(i,n));const o=m(e,["config"]);return o!=null&&y(n,["config"],m$e(o,n)),n}function y$e(t){const e={},n=m(t,["image"]);return n!=null&&y(e,["image"],os(n)),e}function v$e(t,e){const n={},r=m(t,["prompt"]);e!==void 0&&r!=null&&y(e,["instances[0]","prompt"],r);const i=m(t,["image"]);e!==void 0&&i!=null&&y(e,["instances[0]","image"],os(i));const o=m(t,["scribbleImage"]);return e!==void 0&&o!=null&&y(e,["instances[0]","scribble"],y$e(o)),n}function _$e(t,e){const n={},r=m(t,["mode"]);e!==void 0&&r!=null&&y(e,["parameters","mode"],r);const i=m(t,["maxPredictions"]);e!==void 0&&i!=null&&y(e,["parameters","maxPredictions"],i);const o=m(t,["confidenceThreshold"]);e!==void 0&&o!=null&&y(e,["parameters","confidenceThreshold"],o);const s=m(t,["maskDilation"]);e!==void 0&&s!=null&&y(e,["parameters","maskDilation"],s);const a=m(t,["binaryColorThreshold"]);return e!==void 0&&a!=null&&y(e,["parameters","binaryColorThreshold"],a),n}function b$e(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","model"],At(t,r));const i=m(e,["source"]);i!=null&&y(n,["config"],v$e(i,n));const o=m(e,["config"]);return o!=null&&y(n,["config"],_$e(o,n)),n}function w$e(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","name"],At(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],i),n}function E$e(t,e,n){const r={},i=m(e,["pageSize"]);n!==void 0&&i!=null&&y(n,["_query","pageSize"],i);const o=m(e,["pageToken"]);n!==void 0&&o!=null&&y(n,["_query","pageToken"],o);const s=m(e,["filter"]);n!==void 0&&s!=null&&y(n,["_query","filter"],s);const a=m(e,["queryBase"]);return n!==void 0&&a!=null&&y(n,["_url","models_url"],eie(t,a)),r}function T$e(t,e){const n={},r=m(e,["config"]);return r!=null&&y(n,["config"],E$e(t,r,n)),n}function x$e(t,e){const n={},r=m(t,["displayName"]);e!==void 0&&r!=null&&y(e,["displayName"],r);const i=m(t,["description"]);e!==void 0&&i!=null&&y(e,["description"],i);const o=m(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&y(e,["defaultCheckpointId"],o),n}function S$e(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","model"],At(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],x$e(i,n)),n}function A$e(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","name"],At(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],i),n}function C$e(t,e){const n={},r=m(t,["systemInstruction"]);e!==void 0&&r!=null&&y(e,["systemInstruction"],op(Br(r)));const i=m(t,["tools"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>vie(a))),y(e,["tools"],s)}const o=m(t,["generationConfig"]);return e!==void 0&&o!=null&&y(e,["generationConfig"],o),n}function I$e(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","model"],At(t,r));const i=m(e,["contents"]);if(i!=null){let s=_o(i);Array.isArray(s)&&(s=s.map(a=>op(a))),y(n,["contents"],s)}const o=m(e,["config"]);return o!=null&&y(n,["config"],C$e(o,n)),n}function R$e(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","model"],At(t,r));const i=m(e,["contents"]);if(i!=null){let s=_o(i);Array.isArray(s)&&(s=s.map(a=>op(a))),y(n,["contents"],s)}const o=m(e,["config"]);return o!=null&&y(n,["config"],o),n}function _ie(t){const e={},n=m(t,["uri"]);n!=null&&y(e,["gcsUri"],n);const r=m(t,["videoBytes"]);r!=null&&y(e,["bytesBase64Encoded"],wf(r));const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function P$e(t,e){const n={},r=m(t,["prompt"]);e!==void 0&&r!=null&&y(e,["instances[0]","prompt"],r);const i=m(t,["image"]);e!==void 0&&i!=null&&y(e,["instances[0]","image"],os(i));const o=m(t,["video"]);return e!==void 0&&o!=null&&y(e,["instances[0]","video"],_ie(o)),n}function N$e(t){const e={},n=m(t,["image"]);n!=null&&y(e,["image"],os(n));const r=m(t,["referenceType"]);return r!=null&&y(e,["referenceType"],r),e}function M$e(t){const e={},n=m(t,["image"]);n!=null&&y(e,["_self"],os(n));const r=m(t,["maskMode"]);return r!=null&&y(e,["maskMode"],r),e}function D$e(t,e){const n={},r=m(t,["numberOfVideos"]);e!==void 0&&r!=null&&y(e,["parameters","sampleCount"],r);const i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const o=m(t,["fps"]);e!==void 0&&o!=null&&y(e,["parameters","fps"],o);const s=m(t,["durationSeconds"]);e!==void 0&&s!=null&&y(e,["parameters","durationSeconds"],s);const a=m(t,["seed"]);e!==void 0&&a!=null&&y(e,["parameters","seed"],a);const u=m(t,["aspectRatio"]);e!==void 0&&u!=null&&y(e,["parameters","aspectRatio"],u);const c=m(t,["resolution"]);e!==void 0&&c!=null&&y(e,["parameters","resolution"],c);const f=m(t,["personGeneration"]);e!==void 0&&f!=null&&y(e,["parameters","personGeneration"],f);const h=m(t,["pubsubTopic"]);e!==void 0&&h!=null&&y(e,["parameters","pubsubTopic"],h);const g=m(t,["negativePrompt"]);e!==void 0&&g!=null&&y(e,["parameters","negativePrompt"],g);const _=m(t,["enhancePrompt"]);e!==void 0&&_!=null&&y(e,["parameters","enhancePrompt"],_);const T=m(t,["generateAudio"]);e!==void 0&&T!=null&&y(e,["parameters","generateAudio"],T);const E=m(t,["lastFrame"]);e!==void 0&&E!=null&&y(e,["instances[0]","lastFrame"],os(E));const b=m(t,["referenceImages"]);if(e!==void 0&&b!=null){let R=b;Array.isArray(R)&&(R=R.map(P=>N$e(P))),y(e,["instances[0]","referenceImages"],R)}const S=m(t,["mask"]);e!==void 0&&S!=null&&y(e,["instances[0]","mask"],M$e(S));const C=m(t,["compressionQuality"]);return e!==void 0&&C!=null&&y(e,["parameters","compressionQuality"],C),n}function k$e(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["_url","model"],At(t,r));const i=m(e,["prompt"]);i!=null&&y(n,["instances[0]","prompt"],i);const o=m(e,["image"]);o!=null&&y(n,["instances[0]","image"],os(o));const s=m(e,["video"]);s!=null&&y(n,["instances[0]","video"],_ie(s));const a=m(e,["source"]);a!=null&&y(n,["config"],P$e(a,n));const u=m(e,["config"]);return u!=null&&y(n,["config"],D$e(u,n)),n}function O$e(t){const e={},n=m(t,["fps"]);n!=null&&y(e,["fps"],n);const r=m(t,["endOffset"]);r!=null&&y(e,["endOffset"],r);const i=m(t,["startOffset"]);return i!=null&&y(e,["startOffset"],i),e}function L$e(t){const e={},n=m(t,["data"]);n!=null&&y(e,["data"],n);const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function V$e(t){const e={},n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function U$e(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const r=m(t,["args"]);r!=null&&y(e,["args"],r);const i=m(t,["name"]);return i!=null&&y(e,["name"],i),e}function q$e(t){const e={},n=m(t,["videoMetadata"]);n!=null&&y(e,["videoMetadata"],O$e(n));const r=m(t,["thought"]);r!=null&&y(e,["thought"],r);const i=m(t,["inlineData"]);i!=null&&y(e,["inlineData"],L$e(i));const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],V$e(o));const s=m(t,["thoughtSignature"]);s!=null&&y(e,["thoughtSignature"],s);const a=m(t,["functionCall"]);a!=null&&y(e,["functionCall"],U$e(a));const u=m(t,["codeExecutionResult"]);u!=null&&y(e,["codeExecutionResult"],u);const c=m(t,["executableCode"]);c!=null&&y(e,["executableCode"],c);const f=m(t,["functionResponse"]);f!=null&&y(e,["functionResponse"],f);const h=m(t,["text"]);return h!=null&&y(e,["text"],h),e}function F$e(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>q$e(o))),y(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&y(e,["role"],r),e}function B$e(t){const e={},n=m(t,["citationSources"]);return n!=null&&y(e,["citations"],n),e}function $$e(t){const e={},n=m(t,["retrievedUrl"]);n!=null&&y(e,["retrievedUrl"],n);const r=m(t,["urlRetrievalStatus"]);return r!=null&&y(e,["urlRetrievalStatus"],r),e}function z$e(t){const e={},n=m(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>$$e(i))),y(e,["urlMetadata"],r)}return e}function H$e(t){const e={},n=m(t,["content"]);n!=null&&y(e,["content"],F$e(n));const r=m(t,["citationMetadata"]);r!=null&&y(e,["citationMetadata"],B$e(r));const i=m(t,["tokenCount"]);i!=null&&y(e,["tokenCount"],i);const o=m(t,["finishReason"]);o!=null&&y(e,["finishReason"],o);const s=m(t,["urlContextMetadata"]);s!=null&&y(e,["urlContextMetadata"],z$e(s));const a=m(t,["avgLogprobs"]);a!=null&&y(e,["avgLogprobs"],a);const u=m(t,["groundingMetadata"]);u!=null&&y(e,["groundingMetadata"],u);const c=m(t,["index"]);c!=null&&y(e,["index"],c);const f=m(t,["logprobsResult"]);f!=null&&y(e,["logprobsResult"],f);const h=m(t,["safetyRatings"]);return h!=null&&y(e,["safetyRatings"],h),e}function bH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(c=>H$e(c))),y(e,["candidates"],u)}const i=m(t,["modelVersion"]);i!=null&&y(e,["modelVersion"],i);const o=m(t,["promptFeedback"]);o!=null&&y(e,["promptFeedback"],o);const s=m(t,["responseId"]);s!=null&&y(e,["responseId"],s);const a=m(t,["usageMetadata"]);return a!=null&&y(e,["usageMetadata"],a),e}function G$e(t){const e={},n=m(t,["values"]);return n!=null&&y(e,["values"],n),e}function j$e(){return{}}function K$e(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>G$e(s))),y(e,["embeddings"],o)}return m(t,["metadata"])!=null&&y(e,["metadata"],j$e()),e}function W$e(t){const e={},n=m(t,["bytesBase64Encoded"]);n!=null&&y(e,["imageBytes"],wf(n));const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function bie(t){const e={},n=m(t,["safetyAttributes","categories"]);n!=null&&y(e,["categories"],n);const r=m(t,["safetyAttributes","scores"]);r!=null&&y(e,["scores"],r);const i=m(t,["contentType"]);return i!=null&&y(e,["contentType"],i),e}function Y$e(t){const e={},n=m(t,["_self"]);n!=null&&y(e,["image"],W$e(n));const r=m(t,["raiFilteredReason"]);r!=null&&y(e,["raiFilteredReason"],r);const i=m(t,["_self"]);return i!=null&&y(e,["safetyAttributes"],bie(i)),e}function J$e(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>Y$e(s))),y(e,["generatedImages"],o)}const i=m(t,["positivePromptSafetyAttributes"]);return i!=null&&y(e,["positivePromptSafetyAttributes"],bie(i)),e}function X$e(t){const e={},n=m(t,["baseModel"]);n!=null&&y(e,["baseModel"],n);const r=m(t,["createTime"]);r!=null&&y(e,["createTime"],r);const i=m(t,["updateTime"]);return i!=null&&y(e,["updateTime"],i),e}function C2(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const r=m(t,["displayName"]);r!=null&&y(e,["displayName"],r);const i=m(t,["description"]);i!=null&&y(e,["description"],i);const o=m(t,["version"]);o!=null&&y(e,["version"],o);const s=m(t,["_self"]);s!=null&&y(e,["tunedModelInfo"],X$e(s));const a=m(t,["inputTokenLimit"]);a!=null&&y(e,["inputTokenLimit"],a);const u=m(t,["outputTokenLimit"]);u!=null&&y(e,["outputTokenLimit"],u);const c=m(t,["supportedGenerationMethods"]);return c!=null&&y(e,["supportedActions"],c),e}function Q$e(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const i=m(t,["_self"]);if(i!=null){let o=tie(i);Array.isArray(o)&&(o=o.map(s=>C2(s))),y(e,["models"],o)}return e}function Z$e(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function eze(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["totalTokens"]);r!=null&&y(e,["totalTokens"],r);const i=m(t,["cachedContentTokenCount"]);return i!=null&&y(e,["cachedContentTokenCount"],i),e}function tze(t){const e={},n=m(t,["video","uri"]);n!=null&&y(e,["uri"],n);const r=m(t,["video","encodedVideo"]);r!=null&&y(e,["videoBytes"],wf(r));const i=m(t,["encoding"]);return i!=null&&y(e,["mimeType"],i),e}function nze(t){const e={},n=m(t,["_self"]);return n!=null&&y(e,["video"],tze(n)),e}function rze(t){const e={},n=m(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>nze(s))),y(e,["generatedVideos"],o)}const r=m(t,["raiMediaFilteredCount"]);r!=null&&y(e,["raiMediaFilteredCount"],r);const i=m(t,["raiMediaFilteredReasons"]);return i!=null&&y(e,["raiMediaFilteredReasons"],i),e}function ize(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const r=m(t,["metadata"]);r!=null&&y(e,["metadata"],r);const i=m(t,["done"]);i!=null&&y(e,["done"],i);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const s=m(t,["response","generateVideoResponse"]);return s!=null&&y(e,["response"],rze(s)),e}function oze(t){const e={},n=m(t,["fps"]);n!=null&&y(e,["fps"],n);const r=m(t,["endOffset"]);r!=null&&y(e,["endOffset"],r);const i=m(t,["startOffset"]);return i!=null&&y(e,["startOffset"],i),e}function sze(t){const e={},n=m(t,["displayName"]);n!=null&&y(e,["displayName"],n);const r=m(t,["data"]);r!=null&&y(e,["data"],r);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function aze(t){const e={},n=m(t,["displayName"]);n!=null&&y(e,["displayName"],n);const r=m(t,["fileUri"]);r!=null&&y(e,["fileUri"],r);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function lze(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const r=m(t,["args"]);r!=null&&y(e,["args"],r);const i=m(t,["name"]);return i!=null&&y(e,["name"],i),e}function uze(t){const e={},n=m(t,["videoMetadata"]);n!=null&&y(e,["videoMetadata"],oze(n));const r=m(t,["thought"]);r!=null&&y(e,["thought"],r);const i=m(t,["inlineData"]);i!=null&&y(e,["inlineData"],sze(i));const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],aze(o));const s=m(t,["thoughtSignature"]);s!=null&&y(e,["thoughtSignature"],s);const a=m(t,["functionCall"]);a!=null&&y(e,["functionCall"],lze(a));const u=m(t,["codeExecutionResult"]);u!=null&&y(e,["codeExecutionResult"],u);const c=m(t,["executableCode"]);c!=null&&y(e,["executableCode"],c);const f=m(t,["functionResponse"]);f!=null&&y(e,["functionResponse"],f);const h=m(t,["text"]);return h!=null&&y(e,["text"],h),e}function cze(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>uze(o))),y(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&y(e,["role"],r),e}function fze(t){const e={},n=m(t,["citations"]);return n!=null&&y(e,["citations"],n),e}function dze(t){const e={},n=m(t,["retrievedUrl"]);n!=null&&y(e,["retrievedUrl"],n);const r=m(t,["urlRetrievalStatus"]);return r!=null&&y(e,["urlRetrievalStatus"],r),e}function hze(t){const e={},n=m(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>dze(i))),y(e,["urlMetadata"],r)}return e}function pze(t){const e={},n=m(t,["content"]);n!=null&&y(e,["content"],cze(n));const r=m(t,["citationMetadata"]);r!=null&&y(e,["citationMetadata"],fze(r));const i=m(t,["finishMessage"]);i!=null&&y(e,["finishMessage"],i);const o=m(t,["finishReason"]);o!=null&&y(e,["finishReason"],o);const s=m(t,["urlContextMetadata"]);s!=null&&y(e,["urlContextMetadata"],hze(s));const a=m(t,["avgLogprobs"]);a!=null&&y(e,["avgLogprobs"],a);const u=m(t,["groundingMetadata"]);u!=null&&y(e,["groundingMetadata"],u);const c=m(t,["index"]);c!=null&&y(e,["index"],c);const f=m(t,["logprobsResult"]);f!=null&&y(e,["logprobsResult"],f);const h=m(t,["safetyRatings"]);return h!=null&&y(e,["safetyRatings"],h),e}function wH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>pze(f))),y(e,["candidates"],c)}const i=m(t,["createTime"]);i!=null&&y(e,["createTime"],i);const o=m(t,["modelVersion"]);o!=null&&y(e,["modelVersion"],o);const s=m(t,["promptFeedback"]);s!=null&&y(e,["promptFeedback"],s);const a=m(t,["responseId"]);a!=null&&y(e,["responseId"],a);const u=m(t,["usageMetadata"]);return u!=null&&y(e,["usageMetadata"],u),e}function mze(t){const e={},n=m(t,["truncated"]);n!=null&&y(e,["truncated"],n);const r=m(t,["token_count"]);return r!=null&&y(e,["tokenCount"],r),e}function gze(t){const e={},n=m(t,["values"]);n!=null&&y(e,["values"],n);const r=m(t,["statistics"]);return r!=null&&y(e,["statistics"],mze(r)),e}function yze(t){const e={},n=m(t,["billableCharacterCount"]);return n!=null&&y(e,["billableCharacterCount"],n),e}function vze(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>gze(s))),y(e,["embeddings"],o)}const i=m(t,["metadata"]);return i!=null&&y(e,["metadata"],yze(i)),e}function wie(t){const e={},n=m(t,["gcsUri"]);n!=null&&y(e,["gcsUri"],n);const r=m(t,["bytesBase64Encoded"]);r!=null&&y(e,["imageBytes"],wf(r));const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function Eie(t){const e={},n=m(t,["safetyAttributes","categories"]);n!=null&&y(e,["categories"],n);const r=m(t,["safetyAttributes","scores"]);r!=null&&y(e,["scores"],r);const i=m(t,["contentType"]);return i!=null&&y(e,["contentType"],i),e}function PE(t){const e={},n=m(t,["_self"]);n!=null&&y(e,["image"],wie(n));const r=m(t,["raiFilteredReason"]);r!=null&&y(e,["raiFilteredReason"],r);const i=m(t,["_self"]);i!=null&&y(e,["safetyAttributes"],Eie(i));const o=m(t,["prompt"]);return o!=null&&y(e,["enhancedPrompt"],o),e}function _ze(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>PE(s))),y(e,["generatedImages"],o)}const i=m(t,["positivePromptSafetyAttributes"]);return i!=null&&y(e,["positivePromptSafetyAttributes"],Eie(i)),e}function bze(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>PE(o))),y(e,["generatedImages"],i)}return e}function wze(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>PE(o))),y(e,["generatedImages"],i)}return e}function Eze(t){const e={},n=m(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>PE(i))),y(e,["generatedImages"],r)}return e}function Tze(t){const e={},n=m(t,["label"]);n!=null&&y(e,["label"],n);const r=m(t,["score"]);return r!=null&&y(e,["score"],r),e}function xze(t){const e={},n=m(t,["_self"]);n!=null&&y(e,["mask"],wie(n));const r=m(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Tze(o))),y(e,["labels"],i)}return e}function Sze(t){const e={},n=m(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>xze(i))),y(e,["generatedMasks"],r)}return e}function Aze(t){const e={},n=m(t,["endpoint"]);n!=null&&y(e,["name"],n);const r=m(t,["deployedModelId"]);return r!=null&&y(e,["deployedModelId"],r),e}function Cze(t){const e={},n=m(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&y(e,["baseModel"],n);const r=m(t,["createTime"]);r!=null&&y(e,["createTime"],r);const i=m(t,["updateTime"]);return i!=null&&y(e,["updateTime"],i),e}function Ize(t){const e={},n=m(t,["checkpointId"]);n!=null&&y(e,["checkpointId"],n);const r=m(t,["epoch"]);r!=null&&y(e,["epoch"],r);const i=m(t,["step"]);return i!=null&&y(e,["step"],i),e}function I2(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const r=m(t,["displayName"]);r!=null&&y(e,["displayName"],r);const i=m(t,["description"]);i!=null&&y(e,["description"],i);const o=m(t,["versionId"]);o!=null&&y(e,["version"],o);const s=m(t,["deployedModels"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(g=>Aze(g))),y(e,["endpoints"],h)}const a=m(t,["labels"]);a!=null&&y(e,["labels"],a);const u=m(t,["_self"]);u!=null&&y(e,["tunedModelInfo"],Cze(u));const c=m(t,["defaultCheckpointId"]);c!=null&&y(e,["defaultCheckpointId"],c);const f=m(t,["checkpoints"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(g=>Ize(g))),y(e,["checkpoints"],h)}return e}function Rze(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const i=m(t,["_self"]);if(i!=null){let o=tie(i);Array.isArray(o)&&(o=o.map(s=>I2(s))),y(e,["models"],o)}return e}function Pze(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function Nze(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["totalTokens"]);return r!=null&&y(e,["totalTokens"],r),e}function Mze(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["tokensInfo"]);return r!=null&&y(e,["tokensInfo"],r),e}function Dze(t){const e={},n=m(t,["gcsUri"]);n!=null&&y(e,["uri"],n);const r=m(t,["bytesBase64Encoded"]);r!=null&&y(e,["videoBytes"],wf(r));const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function kze(t){const e={},n=m(t,["_self"]);return n!=null&&y(e,["video"],Dze(n)),e}function Oze(t){const e={},n=m(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>kze(s))),y(e,["generatedVideos"],o)}const r=m(t,["raiMediaFilteredCount"]);r!=null&&y(e,["raiMediaFilteredCount"],r);const i=m(t,["raiMediaFilteredReasons"]);return i!=null&&y(e,["raiMediaFilteredReasons"],i),e}function Lze(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const r=m(t,["metadata"]);r!=null&&y(e,["metadata"],r);const i=m(t,["done"]);i!=null&&y(e,["done"],i);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const s=m(t,["response"]);return s!=null&&y(e,["response"],Oze(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Vze="Content-Type",Uze="X-Server-Timeout",qze="User-Agent",R2="x-goog-api-client",Fze="1.20.0",Bze=`google-genai-sdk/${Fze}`,$ze="v1beta1",zze="v1beta",EH=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Hze{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:$ze,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:zze,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[s,a]of Object.entries(e.queryParams))i.searchParams.append(s,String(a));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(n))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r){if(n&&n.timeout||r){const i=new AbortController,o=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const s=setTimeout(()=>i.abort(),n.timeout);s&&typeof s.unref=="function"&&s.unref()}r&&r.addEventListener("abort",()=>{i.abort()}),e.signal=o}return n&&n.extraBody!==null&&Gze(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await TH(i),new E2(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await TH(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var n;return zd(this,arguments,function*(){const i=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let s="";for(;;){const{done:a,value:u}=yield en(i.read());if(a){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=o.decode(u,{stream:!0});try{const h=JSON.parse(c);if("error"in h){const g=JSON.parse(JSON.stringify(h.error)),_=g.status,T=g.code,E=`got status: ${_}. ${JSON.stringify(h)}`;if(T>=400&&T<600)throw new IE({message:E,status:T})}}catch(h){if(h.name==="ApiError")throw h}s+=c;let f=s.match(EH);for(;f;){const h=f[1];try{const g=new Response(h,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield en(new E2(g)),s=s.slice(f[0].length),f=s.match(EH)}catch(g){throw new Error(`exception parsing stream chunk ${h}. ${g}`)}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=Bze+" "+this.clientOptions.userAgentExtra;return e[qze]=n,e[R2]=n,e[Vze]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[r,i]of Object.entries(e.headers))n.append(r,i);e.timeout&&e.timeout>0&&n.append(Uze,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,s=await o.stat(e);i.sizeBytes=String(s.size);const a=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:s.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=a;const u=await this.fetchUploadUrl(i,n);return o.upload(e,u,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var r;let i={};n!=null&&n.httpOptions?i=n.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const o={file:e},s=await this.request({path:He("upload/v1beta/files",o._url),body:JSON.stringify(o),httpMethod:"POST",httpOptions:i});if(!s||!(s!=null&&s.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const a=(r=s==null?void 0:s.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(a===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return a}}async function TH(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new IE({message:i,status:n}):new Error(i)}}function Gze(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,s){const a=Object.assign({},o);for(const u in s)if(Object.prototype.hasOwnProperty.call(s,u)){const c=s[u],f=a[u];c&&typeof c=="object"&&!Array.isArray(c)&&f&&typeof f=="object"&&!Array.isArray(f)?a[u]=r(f,c):(f&&c&&typeof f!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${u}". Original type: ${typeof f}, New type: ${typeof c}. Overwriting.`),a[u]=c)}return a}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jze="mcp_used/unknown";let Kze=!1;function Tie(t){for(const e of t)if(Wze(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Kze}function xie(t){var e;const n=(e=t[R2])!==null&&e!==void 0?e:"";t[R2]=(n+` ${jze}`).trimStart()}function Wze(t){return t!==null&&typeof t=="object"&&t instanceof IL}function Yze(t,e=100){return zd(this,arguments,function*(){let r,i=0;for(;i<e;){const o=yield en(t.listTools({cursor:r}));for(const s of o.tools)yield yield en(s),i++;if(!o.nextCursor)break;r=o.nextCursor}})}class IL{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new IL(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const o={},s=[];for(const f of this.mcpClients)try{for(var a=!0,u=(n=void 0,wg(Yze(f))),c;c=await u.next(),e=c.done,!e;a=!0){i=c.value,a=!1;const h=i;s.push(h);const g=h.name;if(o[g])throw new Error(`Duplicate function name ${g} found in MCP tools. Please ensure function names are unique.`);o[g]=f}}catch(h){n={error:h}}finally{try{!a&&!e&&(r=u.return)&&await r.call(u)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),cqe(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const s=await i.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Jze(t,e,n){const r=new nqe;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data);const o=A6e(i);Object.assign(r,o),e(r)}class Xze{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),s=eHe(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),u=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${a}`;let c=()=>{};const f=new Promise(R=>{c=R}),h=e.callbacks,g=function(){c({})},_=this.apiClient,T={onopen:g,onmessage:R=>{Jze(_,h.onmessage,R)},onerror:(n=h==null?void 0:h.onerror)!==null&&n!==void 0?n:function(R){},onclose:(r=h==null?void 0:h.onclose)!==null&&r!==void 0?r:function(R){}},E=this.webSocketFactory.create(u,Zze(s),T);E.connect(),await f;const b=At(this.apiClient,e.model),S=die({model:b}),C=A2({setup:S});return E.send(JSON.stringify(C)),new Qze(E,this.apiClient)}}class Qze{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=TBe(e),r=hie(n);this.conn.send(JSON.stringify({clientContent:r}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=xBe(e),r=A2(n);this.conn.send(JSON.stringify(r))}sendPlaybackControl(e){const n=A2({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Pd.PLAY)}pause(){this.sendPlaybackControl(Pd.PAUSE)}stop(){this.sendPlaybackControl(Pd.STOP)}resetContext(){this.sendPlaybackControl(Pd.RESET_CONTEXT)}close(){this.conn.close()}}function Zze(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function eHe(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tHe="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function nHe(t,e,n){const r=new tqe;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const o=JSON.parse(i);if(t.isVertexAI()){const s=q6e(o);Object.assign(r,s)}else{const s=y6e(o);Object.assign(r,s)}e(r)}class rHe{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new Xze(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,o,s,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const u=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let f;const h=this.apiClient.getHeaders();e.config&&e.config.tools&&Tie(e.config.tools)&&xie(h);const g=aHe(h);if(this.apiClient.isVertexAI())f=`${u}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(g);else{const N=this.apiClient.getApiKey();let U="BidiGenerateContent",V="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),U="BidiGenerateContentConstrained",V="access_token"),f=`${u}/ws/google.ai.generativelanguage.${c}.GenerativeService.${U}?${V}=${N}`}let _=()=>{};const T=new Promise(N=>{_=N}),E=e.callbacks,b=function(){var N;(N=E==null?void 0:E.onopen)===null||N===void 0||N.call(E),_({})},S=this.apiClient,C={onopen:b,onmessage:N=>{nHe(S,E.onmessage,N)},onerror:(n=E==null?void 0:E.onerror)!==null&&n!==void 0?n:function(N){},onclose:(r=E==null?void 0:E.onclose)!==null&&r!==void 0?r:function(N){}},R=this.webSocketFactory.create(f,sHe(g),C);R.connect(),await T;let P=At(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&P.startsWith("publishers/")){const N=this.apiClient.getProject(),U=this.apiClient.getLocation();P=`projects/${N}/locations/${U}/`+P}let O={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Wb.AUDIO]}:e.config.responseModalities=[Wb.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const q=(a=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[],D=[];for(const N of q)if(this.isCallableTool(N)){const U=N;D.push(await U.tool())}else D.push(N);D.length>0&&(e.config.tools=D);const L={model:P,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?O=ZBe(this.apiClient,L):O=_Be(this.apiClient,L),delete O.config,R.send(JSON.stringify(O)),new oHe(R,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const iHe={turnComplete:!0};class oHe{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=_o(n.turns),e.isVertexAI()?r=r.map(i=>op(i)):r=r.map(i=>RE(i))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(tHe)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},iHe),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:n6e(e)}:n={realtimeInput:EBe(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function sHe(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function aHe(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xH=10;function SH(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Hd(s)){i=!0;break}if(!i)return!0;const o=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function Hd(t){return"callTool"in t&&typeof t.callTool=="function"}function lHe(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>Hd(i)))!==null&&r!==void 0?r:!1}function uHe(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>!Hd(i)))!==null&&r!==void 0?r:!1}function AH(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cHe extends bf{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,o,s,a;const u=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!lHe(n)||SH(n.config))return await this.generateContentInternal(u);if(uHe(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let c,f;const h=_o(u.contents),g=(o=(i=(r=u.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:xH;let _=0;for(;_<g&&(c=await this.generateContentInternal(u),!(!c.functionCalls||c.functionCalls.length===0));){const T=c.candidates[0].content,E=[];for(const b of(a=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[])if(Hd(b)){const C=await b.callTool(c.functionCalls);E.push(...C)}_++,f={role:"user",parts:E},u.contents=_o(u.contents),u.contents.push(T),u.contents.push(f),AH(u.config)&&(h.push(T),h.push(f))}return AH(u.config)&&(c.automaticFunctionCallingHistory=h),c},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),SH(n.config)){const r=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(r)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let o;const s=[];if(r!=null&&r.generatedImages)for(const u of r.generatedImages)u&&(u!=null&&u.safetyAttributes)&&((i=u==null?void 0:u.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=u==null?void 0:u.safetyAttributes:s.push(u);let a;return o?a={generatedImages:s,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new Qy(lf.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(s),s)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const s=await Promise.all(o.map(async u=>Hd(u)?await u.tool():u)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(a.config.tools=s,e.config&&e.config.tools&&Tie(e.config.tools)){const u=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let c=Object.assign({},u);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),xie(c),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(e){var n,r,i;const o=new Map;for(const s of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Hd(s)){const a=s,u=await a.tool();for(const c of(i=u.functionDeclarations)!==null&&i!==void 0?i:[]){if(!c.name)throw new Error("Function declaration name is required.");if(o.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);o.set(c.name,a)}}return o}async processAfcStream(e){var n,r,i;const o=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:xH;let s=!1,a=0;const u=await this.initAfcToolsMap(e);return(function(c,f,h){var g,_;return zd(this,arguments,function*(){for(var T,E,b,S;a<o;){s&&(a++,s=!1);const O=yield en(c.processParamsMaybeAddMcpUsage(h)),q=yield en(c.generateContentStreamInternal(O)),D=[],L=[];try{for(var C=!0,R=(E=void 0,wg(q)),P;P=yield en(R.next()),T=P.done,!T;C=!0){S=P.value,C=!1;const N=S;if(yield yield en(N),N.candidates&&(!((g=N.candidates[0])===null||g===void 0)&&g.content)){L.push(N.candidates[0].content);for(const U of(_=N.candidates[0].content.parts)!==null&&_!==void 0?_:[])if(a<o&&U.functionCall){if(!U.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(U.functionCall.name)){const V=yield en(f.get(U.functionCall.name).callTool([U.functionCall]));D.push(...V)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${U.functionCall.name}`)}}}}catch(N){E={error:N}}finally{try{!C&&!T&&(b=R.return)&&(yield en(b.call(R)))}finally{if(E)throw E.error}}if(D.length>0){s=!0;const N=new Fm;N.candidates=[{content:{role:"user",parts:D}}],yield yield en(N);const U=[];U.push(...L),U.push({role:"user",parts:D});const V=_o(h.contents).concat(U);h.contents=V}else break}})})(this,u,e)}async generateContentInternal(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=_H(this.apiClient,e);return a=He("{model}:generateContent",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=wH(f),g=new Fm;return Object.assign(g,h),g})}else{const c=vH(this.apiClient,e);return a=He("{model}:generateContent",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=bH(f),g=new Fm;return Object.assign(g,h),g})}}async generateContentStreamInternal(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=_H(this.apiClient,e);return a=He("{model}:streamGenerateContent?alt=sse",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.requestStream({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(h){return zd(this,arguments,function*(){var g,_,T,E;try{for(var b=!0,S=wg(h),C;C=yield en(S.next()),g=C.done,!g;b=!0){E=C.value,b=!1;const R=E,P=wH(yield en(R.json()));P.sdkHttpResponse={headers:R.headers};const O=new Fm;Object.assign(O,P),yield yield en(O)}}catch(R){_={error:R}}finally{try{!b&&!g&&(T=S.return)&&(yield en(T.call(S)))}finally{if(_)throw _.error}}})})}else{const c=vH(this.apiClient,e);return a=He("{model}:streamGenerateContent?alt=sse",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.requestStream({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(h){return zd(this,arguments,function*(){var g,_,T,E;try{for(var b=!0,S=wg(h),C;C=yield en(S.next()),g=C.done,!g;b=!0){E=C.value,b=!1;const R=E,P=bH(yield en(R.json()));P.sdkHttpResponse={headers:R.headers};const O=new Fm;Object.assign(O,P),yield yield en(O)}}catch(R){_={error:R}}finally{try{!b&&!g&&(T=S.return)&&(yield en(T.call(S)))}finally{if(_)throw _.error}}})})}}async embedContent(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=t$e(this.apiClient,e);return a=He("{model}:predict",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=vze(f),g=new Qz;return Object.assign(g,h),g})}else{const c=d5e(this.apiClient,e);return a=He("{model}:batchEmbedContents",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=K$e(f),g=new Qz;return Object.assign(g,h),g})}}async generateImagesInternal(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=r$e(this.apiClient,e);return a=He("{model}:predict",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=_ze(f),g=new Zz;return Object.assign(g,h),g})}else{const c=p5e(this.apiClient,e);return a=He("{model}:predict",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=J$e(f),g=new Zz;return Object.assign(g,h),g})}}async editImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=c$e(this.apiClient,e);return o=He("{model}:predict",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),i.then(u=>{const c=bze(u),f=new K4e;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=d$e(this.apiClient,e);return o=He("{model}:predict",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),i.then(u=>{const c=wze(u),f=new W4e;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=g$e(this.apiClient,e);return o=He("{model}:predict",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const c=Eze(u),f=new Y4e;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=b$e(this.apiClient,e);return o=He("{model}:predict",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const c=Sze(u),f=new J4e;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=w$e(this.apiClient,e);return a=He("{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>I2(f))}else{const c=m5e(this.apiClient,e);return a=He("{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>C2(f))}}async listInternal(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=T$e(this.apiClient,e);return a=He("{models_url}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=Rze(f),g=new eH;return Object.assign(g,h),g})}else{const c=y5e(this.apiClient,e);return a=He("{models_url}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=Q$e(f),g=new eH;return Object.assign(g,h),g})}}async update(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=S$e(this.apiClient,e);return a=He("{model}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>I2(f))}else{const c=_5e(this.apiClient,e);return a=He("{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>C2(f))}}async delete(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=A$e(this.apiClient,e);return a=He("{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=Pze(f),g=new tH;return Object.assign(g,h),g})}else{const c=b5e(this.apiClient,e);return a=He("{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=Z$e(f),g=new tH;return Object.assign(g,h),g})}}async countTokens(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=I$e(this.apiClient,e);return a=He("{model}:countTokens",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=Nze(f),g=new nH;return Object.assign(g,h),g})}else{const c=E5e(this.apiClient,e);return a=He("{model}:countTokens",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=eze(f),g=new nH;return Object.assign(g,h),g})}}async computeTokens(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=R$e(this.apiClient,e);return o=He("{model}:computeTokens",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),i.then(u=>{const c=Mze(u),f=new X4e;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=k$e(this.apiClient,e);return a=He("{model}:predictLongRunning",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>{const h=Lze(f),g=new Yb;return Object.assign(g,h),g})}else{const c=S5e(this.apiClient,e);return a=He("{model}:predictLongRunning",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>{const h=ize(f),g=new Yb;return Object.assign(g,h),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fHe extends bf{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=U4e(e);return a=He("{operationName}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s}else{const c=L4e(e);return a=He("{operationName}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s}}async fetchPredictVideosOperationInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=V4e(e);return o=He("{resourceName}:fetchPredictOperation",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dHe(t){const e={},n=m(t,["voiceName"]);return n!=null&&y(e,["voiceName"],n),e}function Sie(t){const e={},n=m(t,["prebuiltVoiceConfig"]);return n!=null&&y(e,["prebuiltVoiceConfig"],dHe(n)),e}function hHe(t){const e={},n=m(t,["speaker"]);n!=null&&y(e,["speaker"],n);const r=m(t,["voiceConfig"]);return r!=null&&y(e,["voiceConfig"],Sie(r)),e}function pHe(t){const e={},n=m(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>hHe(i))),y(e,["speakerVoiceConfigs"],r)}return e}function mHe(t){const e={},n=m(t,["voiceConfig"]);n!=null&&y(e,["voiceConfig"],Sie(n));const r=m(t,["multiSpeakerVoiceConfig"]);r!=null&&y(e,["multiSpeakerVoiceConfig"],pHe(r));const i=m(t,["languageCode"]);return i!=null&&y(e,["languageCode"],i),e}function gHe(t){const e={},n=m(t,["fps"]);n!=null&&y(e,["fps"],n);const r=m(t,["endOffset"]);r!=null&&y(e,["endOffset"],r);const i=m(t,["startOffset"]);return i!=null&&y(e,["startOffset"],i),e}function yHe(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["data"]);n!=null&&y(e,["data"],n);const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function vHe(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function _He(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const r=m(t,["args"]);r!=null&&y(e,["args"],r);const i=m(t,["name"]);return i!=null&&y(e,["name"],i),e}function bHe(t){const e={},n=m(t,["videoMetadata"]);n!=null&&y(e,["videoMetadata"],gHe(n));const r=m(t,["thought"]);r!=null&&y(e,["thought"],r);const i=m(t,["inlineData"]);i!=null&&y(e,["inlineData"],yHe(i));const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],vHe(o));const s=m(t,["thoughtSignature"]);s!=null&&y(e,["thoughtSignature"],s);const a=m(t,["functionCall"]);a!=null&&y(e,["functionCall"],_He(a));const u=m(t,["codeExecutionResult"]);u!=null&&y(e,["codeExecutionResult"],u);const c=m(t,["executableCode"]);c!=null&&y(e,["executableCode"],c);const f=m(t,["functionResponse"]);f!=null&&y(e,["functionResponse"],f);const h=m(t,["text"]);return h!=null&&y(e,["text"],h),e}function wHe(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>bHe(o))),y(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&y(e,["role"],r),e}function EHe(t){const e={},n=m(t,["behavior"]);n!=null&&y(e,["behavior"],n);const r=m(t,["description"]);r!=null&&y(e,["description"],r);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const o=m(t,["parameters"]);o!=null&&y(e,["parameters"],o);const s=m(t,["parametersJsonSchema"]);s!=null&&y(e,["parametersJsonSchema"],s);const a=m(t,["response"]);a!=null&&y(e,["response"],a);const u=m(t,["responseJsonSchema"]);return u!=null&&y(e,["responseJsonSchema"],u),e}function THe(t){const e={},n=m(t,["startTime"]);n!=null&&y(e,["startTime"],n);const r=m(t,["endTime"]);return r!=null&&y(e,["endTime"],r),e}function xHe(t){const e={},n=m(t,["timeRangeFilter"]);if(n!=null&&y(e,["timeRangeFilter"],THe(n)),m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function SHe(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const r=m(t,["dynamicThreshold"]);return r!=null&&y(e,["dynamicThreshold"],r),e}function AHe(t){const e={},n=m(t,["dynamicRetrievalConfig"]);return n!=null&&y(e,["dynamicRetrievalConfig"],SHe(n)),e}function CHe(){return{}}function IHe(t){const e={},n=m(t,["environment"]);return n!=null&&y(e,["environment"],n),e}function RHe(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(c=>EHe(c))),y(e,["functionDeclarations"],u)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=m(t,["googleSearch"]);r!=null&&y(e,["googleSearch"],xHe(r));const i=m(t,["googleSearchRetrieval"]);if(i!=null&&y(e,["googleSearchRetrieval"],AHe(i)),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(m(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");m(t,["urlContext"])!=null&&y(e,["urlContext"],CHe());const s=m(t,["computerUse"]);s!=null&&y(e,["computerUse"],IHe(s));const a=m(t,["codeExecution"]);return a!=null&&y(e,["codeExecution"],a),e}function PHe(t){const e={},n=m(t,["handle"]);if(n!=null&&y(e,["handle"],n),m(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function CH(){return{}}function NHe(t){const e={},n=m(t,["disabled"]);n!=null&&y(e,["disabled"],n);const r=m(t,["startOfSpeechSensitivity"]);r!=null&&y(e,["startOfSpeechSensitivity"],r);const i=m(t,["endOfSpeechSensitivity"]);i!=null&&y(e,["endOfSpeechSensitivity"],i);const o=m(t,["prefixPaddingMs"]);o!=null&&y(e,["prefixPaddingMs"],o);const s=m(t,["silenceDurationMs"]);return s!=null&&y(e,["silenceDurationMs"],s),e}function MHe(t){const e={},n=m(t,["automaticActivityDetection"]);n!=null&&y(e,["automaticActivityDetection"],NHe(n));const r=m(t,["activityHandling"]);r!=null&&y(e,["activityHandling"],r);const i=m(t,["turnCoverage"]);return i!=null&&y(e,["turnCoverage"],i),e}function DHe(t){const e={},n=m(t,["targetTokens"]);return n!=null&&y(e,["targetTokens"],n),e}function kHe(t){const e={},n=m(t,["triggerTokens"]);n!=null&&y(e,["triggerTokens"],n);const r=m(t,["slidingWindow"]);return r!=null&&y(e,["slidingWindow"],DHe(r)),e}function OHe(t){const e={},n=m(t,["proactiveAudio"]);return n!=null&&y(e,["proactiveAudio"],n),e}function LHe(t,e){const n={},r=m(t,["generationConfig"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig"],r);const i=m(t,["responseModalities"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig","responseModalities"],i);const o=m(t,["temperature"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","temperature"],o);const s=m(t,["topP"]);e!==void 0&&s!=null&&y(e,["setup","generationConfig","topP"],s);const a=m(t,["topK"]);e!==void 0&&a!=null&&y(e,["setup","generationConfig","topK"],a);const u=m(t,["maxOutputTokens"]);e!==void 0&&u!=null&&y(e,["setup","generationConfig","maxOutputTokens"],u);const c=m(t,["mediaResolution"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","mediaResolution"],c);const f=m(t,["seed"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","seed"],f);const h=m(t,["speechConfig"]);e!==void 0&&h!=null&&y(e,["setup","generationConfig","speechConfig"],mHe(AL(h)));const g=m(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],g);const _=m(t,["systemInstruction"]);e!==void 0&&_!=null&&y(e,["setup","systemInstruction"],wHe(Br(_)));const T=m(t,["tools"]);if(e!==void 0&&T!=null){let O=rp(T);Array.isArray(O)&&(O=O.map(q=>RHe(np(q)))),y(e,["setup","tools"],O)}const E=m(t,["sessionResumption"]);e!==void 0&&E!=null&&y(e,["setup","sessionResumption"],PHe(E));const b=m(t,["inputAudioTranscription"]);e!==void 0&&b!=null&&y(e,["setup","inputAudioTranscription"],CH());const S=m(t,["outputAudioTranscription"]);e!==void 0&&S!=null&&y(e,["setup","outputAudioTranscription"],CH());const C=m(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&y(e,["setup","realtimeInputConfig"],MHe(C));const R=m(t,["contextWindowCompression"]);e!==void 0&&R!=null&&y(e,["setup","contextWindowCompression"],kHe(R));const P=m(t,["proactivity"]);return e!==void 0&&P!=null&&y(e,["setup","proactivity"],OHe(P)),n}function VHe(t,e){const n={},r=m(e,["model"]);r!=null&&y(n,["setup","model"],At(t,r));const i=m(e,["config"]);return i!=null&&y(n,["config"],LHe(i,n)),n}function UHe(t,e,n){const r={},i=m(e,["expireTime"]);n!==void 0&&i!=null&&y(n,["expireTime"],i);const o=m(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&y(n,["newSessionExpireTime"],o);const s=m(e,["uses"]);n!==void 0&&s!=null&&y(n,["uses"],s);const a=m(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&y(n,["bidiGenerateContentSetup"],VHe(t,a));const u=m(e,["lockAdditionalFields"]);return n!==void 0&&u!=null&&y(n,["fieldMask"],u),r}function qHe(t,e){const n={},r=m(e,["config"]);return r!=null&&y(n,["config"],UHe(t,r,n)),n}function FHe(t){const e={},n=m(t,["name"]);return n!=null&&y(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function BHe(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(o=>`${n}.${o}`);e.push(...i)}else e.push(n)}return e.join(",")}function $He(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const o=BHe(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];i.length>0&&(a=i.map(c=>s.includes(c)?`generationConfig.${c}`:c));const u=[];o&&u.push(o),a.length>0&&u.push(...a),u.length>0?t.fieldMask=u.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class zHe extends bf{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=qHe(this.apiClient,e);o=He("auth_tokens",a._url),s=a._query,delete a.config,delete a._url,delete a._query;const u=$He(a,e.config);return i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>FHe(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HHe(t){const e={},n=m(t,["name"]);n!=null&&y(e,["_url","name"],n);const r=m(t,["config"]);return r!=null&&y(e,["config"],r),e}function GHe(t,e){const n={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const i=m(t,["pageToken"]);e!==void 0&&i!=null&&y(e,["_query","pageToken"],i);const o=m(t,["filter"]);return e!==void 0&&o!=null&&y(e,["_query","filter"],o),n}function jHe(t){const e={},n=m(t,["config"]);return n!=null&&y(e,["config"],GHe(n,e)),e}function KHe(t){const e={},n=m(t,["name"]);n!=null&&y(e,["_url","name"],n);const r=m(t,["config"]);return r!=null&&y(e,["config"],r),e}function WHe(t){const e={},n=m(t,["textInput"]);n!=null&&y(e,["textInput"],n);const r=m(t,["output"]);return r!=null&&y(e,["output"],r),e}function YHe(t){const e={};if(m(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=m(t,["examples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>WHe(i))),y(e,["examples","examples"],r)}return e}function JHe(t,e){const n={};if(m(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=m(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&y(e,["displayName"],r),m(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=m(t,["epochCount"]);e!==void 0&&i!=null&&y(e,["tuningTask","hyperparameters","epochCount"],i);const o=m(t,["learningRateMultiplier"]);if(o!=null&&y(n,["tuningTask","hyperparameters","learningRateMultiplier"],o),m(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(m(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(m(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const s=m(t,["batchSize"]);e!==void 0&&s!=null&&y(e,["tuningTask","hyperparameters","batchSize"],s);const a=m(t,["learningRate"]);if(e!==void 0&&a!=null&&y(e,["tuningTask","hyperparameters","learningRate"],a),m(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return n}function XHe(t){const e={},n=m(t,["baseModel"]);n!=null&&y(e,["baseModel"],n);const r=m(t,["preTunedModel"]);r!=null&&y(e,["preTunedModel"],r);const i=m(t,["trainingDataset"]);i!=null&&y(e,["tuningTask","trainingData"],YHe(i));const o=m(t,["config"]);return o!=null&&y(e,["config"],JHe(o,e)),e}function QHe(t){const e={},n=m(t,["name"]);n!=null&&y(e,["_url","name"],n);const r=m(t,["config"]);return r!=null&&y(e,["config"],r),e}function ZHe(t,e){const n={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const i=m(t,["pageToken"]);e!==void 0&&i!=null&&y(e,["_query","pageToken"],i);const o=m(t,["filter"]);return e!==void 0&&o!=null&&y(e,["_query","filter"],o),n}function eGe(t){const e={},n=m(t,["config"]);return n!=null&&y(e,["config"],ZHe(n,e)),e}function tGe(t){const e={},n=m(t,["name"]);n!=null&&y(e,["_url","name"],n);const r=m(t,["config"]);return r!=null&&y(e,["config"],r),e}function nGe(t,e){const n={},r=m(t,["gcsUri"]);e!==void 0&&r!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],r);const i=m(t,["vertexDatasetResource"]);if(e!==void 0&&i!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],i),m(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function rGe(t,e){const n={},r=m(t,["gcsUri"]);r!=null&&y(n,["validationDatasetUri"],r);const i=m(t,["vertexDatasetResource"]);return e!==void 0&&i!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],i),n}function iGe(t,e){const n={},r=m(t,["validationDataset"]);e!==void 0&&r!=null&&y(e,["supervisedTuningSpec"],rGe(r,n));const i=m(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&y(e,["tunedModelDisplayName"],i);const o=m(t,["description"]);e!==void 0&&o!=null&&y(e,["description"],o);const s=m(t,["epochCount"]);e!==void 0&&s!=null&&y(e,["supervisedTuningSpec","hyperParameters","epochCount"],s);const a=m(t,["learningRateMultiplier"]);e!==void 0&&a!=null&&y(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],a);const u=m(t,["exportLastCheckpointOnly"]);e!==void 0&&u!=null&&y(e,["supervisedTuningSpec","exportLastCheckpointOnly"],u);const c=m(t,["preTunedModelCheckpointId"]);c!=null&&y(n,["preTunedModel","checkpointId"],c);const f=m(t,["adapterSize"]);if(e!==void 0&&f!=null&&y(e,["supervisedTuningSpec","hyperParameters","adapterSize"],f),m(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(m(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const h=m(t,["labels"]);return e!==void 0&&h!=null&&y(e,["labels"],h),n}function oGe(t){const e={},n=m(t,["baseModel"]);n!=null&&y(e,["baseModel"],n);const r=m(t,["preTunedModel"]);r!=null&&y(e,["preTunedModel"],r);const i=m(t,["trainingDataset"]);i!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],nGe(i,e));const o=m(t,["config"]);return o!=null&&y(e,["config"],iGe(o,e)),e}function sGe(t){const e={},n=m(t,["name"]);n!=null&&y(e,["model"],n);const r=m(t,["name"]);return r!=null&&y(e,["endpoint"],r),e}function Aie(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["name"]);r!=null&&y(e,["name"],r);const i=m(t,["state"]);i!=null&&y(e,["state"],Qre(i));const o=m(t,["createTime"]);o!=null&&y(e,["createTime"],o);const s=m(t,["tuningTask","startTime"]);s!=null&&y(e,["startTime"],s);const a=m(t,["tuningTask","completeTime"]);a!=null&&y(e,["endTime"],a);const u=m(t,["updateTime"]);u!=null&&y(e,["updateTime"],u);const c=m(t,["description"]);c!=null&&y(e,["description"],c);const f=m(t,["baseModel"]);f!=null&&y(e,["baseModel"],f);const h=m(t,["_self"]);h!=null&&y(e,["tunedModel"],sGe(h));const g=m(t,["customBaseModel"]);g!=null&&y(e,["customBaseModel"],g);const _=m(t,["experiment"]);_!=null&&y(e,["experiment"],_);const T=m(t,["labels"]);T!=null&&y(e,["labels"],T);const E=m(t,["outputUri"]);E!=null&&y(e,["outputUri"],E);const b=m(t,["pipelineJob"]);b!=null&&y(e,["pipelineJob"],b);const S=m(t,["serviceAccount"]);S!=null&&y(e,["serviceAccount"],S);const C=m(t,["tunedModelDisplayName"]);return C!=null&&y(e,["tunedModelDisplayName"],C),e}function aGe(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const i=m(t,["tunedModels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Aie(s))),y(e,["tuningJobs"],o)}return e}function lGe(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["name"]);r!=null&&y(e,["name"],r);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const o=m(t,["done"]);o!=null&&y(e,["done"],o);const s=m(t,["error"]);return s!=null&&y(e,["error"],s),e}function uGe(t){const e={},n=m(t,["checkpointId"]);n!=null&&y(e,["checkpointId"],n);const r=m(t,["epoch"]);r!=null&&y(e,["epoch"],r);const i=m(t,["step"]);i!=null&&y(e,["step"],i);const o=m(t,["endpoint"]);return o!=null&&y(e,["endpoint"],o),e}function cGe(t){const e={},n=m(t,["model"]);n!=null&&y(e,["model"],n);const r=m(t,["endpoint"]);r!=null&&y(e,["endpoint"],r);const i=m(t,["checkpoints"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>uGe(s))),y(e,["checkpoints"],o)}return e}function P2(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["name"]);r!=null&&y(e,["name"],r);const i=m(t,["state"]);i!=null&&y(e,["state"],Qre(i));const o=m(t,["createTime"]);o!=null&&y(e,["createTime"],o);const s=m(t,["startTime"]);s!=null&&y(e,["startTime"],s);const a=m(t,["endTime"]);a!=null&&y(e,["endTime"],a);const u=m(t,["updateTime"]);u!=null&&y(e,["updateTime"],u);const c=m(t,["error"]);c!=null&&y(e,["error"],c);const f=m(t,["description"]);f!=null&&y(e,["description"],f);const h=m(t,["baseModel"]);h!=null&&y(e,["baseModel"],h);const g=m(t,["tunedModel"]);g!=null&&y(e,["tunedModel"],cGe(g));const _=m(t,["preTunedModel"]);_!=null&&y(e,["preTunedModel"],_);const T=m(t,["supervisedTuningSpec"]);T!=null&&y(e,["supervisedTuningSpec"],T);const E=m(t,["tuningDataStats"]);E!=null&&y(e,["tuningDataStats"],E);const b=m(t,["encryptionSpec"]);b!=null&&y(e,["encryptionSpec"],b);const S=m(t,["partnerModelTuningSpec"]);S!=null&&y(e,["partnerModelTuningSpec"],S);const C=m(t,["customBaseModel"]);C!=null&&y(e,["customBaseModel"],C);const R=m(t,["experiment"]);R!=null&&y(e,["experiment"],R);const P=m(t,["labels"]);P!=null&&y(e,["labels"],P);const O=m(t,["outputUri"]);O!=null&&y(e,["outputUri"],O);const q=m(t,["pipelineJob"]);q!=null&&y(e,["pipelineJob"],q);const D=m(t,["serviceAccount"]);D!=null&&y(e,["serviceAccount"],D);const L=m(t,["tunedModelDisplayName"]);return L!=null&&y(e,["tunedModelDisplayName"],L),e}function fGe(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=m(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const i=m(t,["tuningJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>P2(s))),y(e,["tuningJobs"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dGe extends bf{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Qy(lf.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel},i=Object.assign(Object.assign({},n),{preTunedModel:r});return i.baseModel=void 0,await this.tuneInternal(i)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),i=await this.tuneMldevInternal(r);let o="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?o=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(o=i.name.split("/operations/")[0]),{name:o,state:w2.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=QHe(e);return a=He("{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>P2(f))}else{const c=HHe(e);return a=He("{name}",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>Aie(f))}}async listInternal(e){var n,r,i,o;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=eGe(e);return a=He("tuningJobs",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=fGe(f),g=new rH;return Object.assign(g,h),g})}else{const c=jHe(e);return a=He("tunedModels",c._url),u=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=aGe(f),g=new rH;return Object.assign(g,h),g})}}async cancel(e){var n,r,i,o;let s="",a={};if(this.apiClient.isVertexAI()){const u=tGe(e);s=He("{name}:cancel",u._url),a=u._query,delete u.config,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const u=KHe(e);s=He("{name}:cancel",u._url),a=u._query,delete u.config,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async tuneInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=oGe(e);return o=He("tuningJobs",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),i.then(u=>P2(u))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=XHe(e);return o=He("tunedModels",a._url),s=a._query,delete a.config,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:u.headers},f})),i.then(u=>lGe(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hGe{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const pGe=1024*1024*8,mGe=3,gGe=1e3,yGe=2,a1="x-goog-upload-status";async function vGe(t,e,n){var r,i,o;let s=0,a=0,u=new E2(new Response),c="upload";for(s=t.size;a<s;){const h=Math.min(pGe,s-a),g=t.slice(a,a+h);a+h>=s&&(c+=", finalize");let _=0,T=gGe;for(;_<mGe&&(u=await n.request({path:"",body:g,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(a),"Content-Length":String(h)}}}),!(!((r=u==null?void 0:u.headers)===null||r===void 0)&&r[a1]));)_++,await bGe(T),T=T*yGe;if(a+=h,((i=u==null?void 0:u.headers)===null||i===void 0?void 0:i[a1])!=="active")break;if(s<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const f=await(u==null?void 0:u.json());if(((o=u==null?void 0:u.headers)===null||o===void 0?void 0:o[a1])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return f.file}async function _Ge(t){return{size:t.size,type:t.type}}function bGe(t){return new Promise(e=>setTimeout(e,t))}class wGe{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await vGe(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await _Ge(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class EGe{create(e,n,r){return new TGe(e,n,r)}}class TGe{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const IH="x-goog-api-key";class xGe{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(IH)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(IH,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const SGe="gl-node/";class AGe{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=O4e(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const i=new xGe(this.apiKey);this.apiClient=new Hze({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:SGe+"web",uploader:new wGe,downloader:new hGe}),this.models=new cHe(this.apiClient),this.live=new rHe(this.apiClient,i,new EGe),this.batches=new AFe(this.apiClient),this.chats=new k3e(this.models,this.apiClient),this.caches=new N3e(this.apiClient),this.files=new K3e(this.apiClient),this.operations=new fHe(this.apiClient),this.authTokens=new zHe(this.apiClient),this.tunings=new dGe(this.apiClient)}}const CGe="AIzaSyByOfSHfNNIwPKwNOkklamTuSy1-t3NOPI",Mu=new AGe({apiKey:CGe}),IGe={type:$e.OBJECT,properties:{key:{type:$e.STRING},value:{type:$e.STRING}},required:["key","value"]},RGe={type:$e.OBJECT,properties:{key:{type:"STRING"},value:{type:$e.NUMBER}},required:["key","value"]},N2={type:$e.ARRAY,items:IGe},PGe={type:$e.ARRAY,items:RGe},Cie={type:$e.OBJECT,properties:{has_item:{type:$e.STRING},missing_item:{type:$e.STRING},var_eq:N2,var_neq:N2},nullable:!0},RL={type:$e.OBJECT,properties:{inv_add:{type:$e.STRING},inv_remove:{type:$e.STRING},set:N2,add:PGe}},NGe={type:$e.OBJECT,properties:{label:{type:$e.STRING},to:{type:$e.STRING},when:Cie,effects:{type:$e.ARRAY,items:RL,nullable:!0}},required:["label","to"]},MGe={type:$e.OBJECT,properties:{id:{type:$e.STRING,description:"Уникальный ID в snake_case. Первый узел должен быть 'start'."},text:{type:$e.STRING,description:"Атмосферный текст сцены на русском."},choices:{type:$e.ARRAY,items:NGe,nullable:!0},effects:{type:$e.ARRAY,items:RL,nullable:!0},end:{type:$e.OBJECT,nullable:!0,properties:{type:{type:$e.STRING,description:"Тип концовки: 'win' (победа) или 'lose' (проигрыш)."},message:{type:$e.STRING}}}},required:["id","text"]},DGe=t=>new Promise(e=>setTimeout(e,t)),kGe=async(t,e=3,n=2e3)=>{var o,s;let r=0,i=n;for(;r<e;)try{return await t()}catch(a){if((((o=a.message)==null?void 0:o.includes("503"))||((s=a.message)==null?void 0:s.toLowerCase().includes("overloaded")))&&r<e-1)console.warn(`Gemini API overloaded. Retrying in ${i}ms... (Attempt ${r+1}/${e})`),await DGe(i),r++,i*=2;else throw a}throw new Error("Max retries reached. Failed to call Gemini API.")},OGe=async t=>{try{const e=`Проанализируй следующий текст игровой сцены на русском языке. Создай из него короткий, ёмкий и эффективный промпт на АНГЛИЙСКОМ языке для AI-генератора изображений, чтобы визуализировать эту сцену. Промпт должен фокусироваться на ключевых визуальных элементах, объектах и атмосфере.

        Текст сцены:
        "${t}"

        Твой ответ должен содержать ТОЛЬКО готовый промпт. Без комментариев, заголовков или кавычек.`,r=(await Mu.models.generateContent({model:"gemini-2.5-flash",contents:e})).text;if(!r)throw new Error("API returned an empty response.");return r.trim()}catch(e){throw console.error("Error generating image prompt from text with Gemini API:",e),new Error(`Failed to generate image prompt: ${e.message}`)}},LGe={Киберпанк:"cyberpunk city, neon signs, rain-slicked streets, high-tech low-life, dystopian future, cinematic lighting","Темное фэнтези":"dark fantasy, gothic architecture, ominous atmosphere, mythical creatures, enchanted forest, epic, moody lighting",Фотореализм:"photorealistic, 8k, hyper-detailed, sharp focus, professional photography, natural lighting",Аниме:"anime style, vibrant colors, cel shading, dynamic composition, detailed background, style of Studio Ghibli","Пиксель-арт":"pixel art, 16-bit, retro gaming style, limited color palette, detailed sprites",Стимпанк:"steampunk, victorian era, gears and cogs, steam-powered machinery, brass and copper details, intricate designs"},VGe=async t=>{var s;const{mainPrompt:e,style:n,negativePrompt:r}=t;let o=`${LGe[n]||"Futuristic, dark, dystopian, gritty, mysterious, quest item."}, ${e}.`;r&&r.trim()!==""&&(o+=` Avoid the following: ${r.trim()}.`);try{const a=await Mu.models.generateImages({model:"imagen-4.0-generate-001",prompt:o,config:{numberOfImages:1,outputMimeType:"image/jpeg",aspectRatio:"16:9"}});if(a.generatedImages&&a.generatedImages.length>0)return`data:image/jpeg;base64,${a.generatedImages[0].image.imageBytes}`;throw new Error("No image was generated by the API.")}catch(a){console.error("Error generating image with Gemini API:",a);let u="An unknown error occurred.";if(a instanceof Error){u=a.message;try{const c=a.message.includes("ApiError: ")?a.message.split("ApiError: ")[1]:a.message,f=JSON.parse(c);u=((s=f==null?void 0:f.error)==null?void 0:s.message)||u}catch{}}throw new Error(`Failed to generate image: ${u}`)}},UGe=async t=>{var e;try{const{prompt:n,tone:r,keywords:i,wordCount:o}=t,s=`Ты — талантливый сценарист для текстовых квестов в мрачном, загадочном сеттинге. Напиши художественное описание для одной игровой сцены на русском языке.

        Инструкции:
        - Тон/атмосфера: ${r}.
        - Обязательно упомяни следующие ключевые детали: ${i||"не указаны"}.
        - Объем текста: примерно ${o} слов.
        - Твой ответ должен содержать ТОЛЬКО готовый текст для сцены. Не добавляй заголовков, комментариев, цитат или приветствий.
        - Текст должен быть захватывающим и погружающим игрока в атмосферу.

        Основная идея от автора:
        "${n}"`,u=(await Mu.models.generateContent({model:"gemini-2.5-flash",contents:s})).text;if(!u)throw new Error("API вернул пустой ответ.");return u.trim()}catch(n){console.error("Error generating text with Gemini API:",n);let r="Произошла неизвестная ошибка при генерации текста.";if(n instanceof Error){r=n.message;try{const i=n.message.includes("ApiError: ")?n.message.split("ApiError: ")[1]:n.message,o=JSON.parse(i);r=((e=o==null?void 0:o.error)==null?void 0:e.message)||r}catch{}}throw new Error(`Не удалось сгенерировать текст: ${r}`)}},qGe=async t=>{if(!t||t.trim().length<10)throw new Error("Текст узла слишком короткий для анализа.");try{const e=`Ты — гейм-дизайнер, создающий текстовый квест. Основываясь на описании игровой сцены ниже, предложи 3-4 интересных и логичных варианта выбора для игрока. Варианты должны быть краткими и ориентированными на действие.

        Описание сцены:
        "${t}"

        Инструкции:
        - Верни ТОЛЬКО JSON-массив строк.
        - Никаких лишних комментариев, пояснений или markdown-форматирования.
        - Пример ответа: ["Осмотреть стол", "Подойти к окну", "Проверить карманы"]`,r=(await Mu.models.generateContent({model:"gemini-2.5-flash",contents:e,config:{responseMimeType:"application/json",responseSchema:{type:$e.ARRAY,items:{type:$e.STRING}}}})).text.trim();if(!r)throw new Error("API вернул пустой ответ.");const i=JSON.parse(r);if(!Array.isArray(i)||!i.every(o=>typeof o=="string"))throw new Error("API вернул некорректный формат данных.");return i}catch(e){console.error("Error generating choices with Gemini API:",e);let n="Произошла неизвестная ошибка при генерации выборов.";throw e instanceof Error&&(n=`Не удалось сгенерировать выборы: ${e.message}`),new Error(n)}},FGe=async t=>{const{prompt:e,genre:n,keywords:r,nodesCount:i,mode:o}=t,s={type:$e.OBJECT,properties:{nodes:{type:$e.ARRAY,items:MGe}},required:["nodes"]},a=`
    **Общие инструкции:**
    1.  Создай связную историю, состоящую примерно из ${i} узлов.
    2.  Первый узел ОБЯЗАТЕЛЬНО должен иметь id "start".
    3.  Все id узлов должны быть уникальными, короткими и в стиле snake_case.
    4.  Для каждого узла напиши атмосферный текст на русском языке.
    5.  Поле 'to' в каждом выборе должно ссылаться на id другого существующего узла. Убедись, что нет ссылок на несуществующие id.
    6.  У конечных узлов (с полем 'end') не должно быть поля 'choices'.
    7.  Используй игровую логику ('when' и 'effects') для создания **РЕШАЕМЫХ** загадок. Игрок должен иметь возможность найти "ключ" (получить предмет/переменную) до того, как встретит "замок" (выбор с условием).`,u=`
    Ты — AI-ассистент для быстрого прототипирования квестов. Твоя задача — быстро создать базовую, но связную структуру квеста на основе идеи автора.

    ${a}
    
    **Финальное требование:** Верни результат в формате JSON, соответствующем предоставленной схеме. Не добавляй никаких комментариев или лишнего текста вне JSON.

    **Параметры квеста от автора:**
    -   Жанр/Сеттинг: ${n}
    -   Основная завязка сюжета: "${e}"
    -   Ключевые элементы, которые нужно включить: ${r||"не указаны"}
    `,c=`
    Ты — ведущий нарративный дизайнер из Larian Studios, известный своими глубокими, нелинейными сюжетами и безупречной игровой логикой. Твоя задача — создать структуру для целого квеста на основе идеи автора, придерживаясь высочайших стандартов качества.

    **Принцип "Критического Пути" (САМОЕ ВАЖНОЕ ПРАВИЛО):**
    1.  **Спроектируй Основной Сюжет:** Прежде всего, создай **"основной сюжетный путь"** — логичную и проходимую последовательность узлов, которая ведет от узла 'start' до как минимум одной победной ('win') концовки. Это костяк истории.
    2.  **Добавь Ветки и Тупики:** После того как основной путь готов, добавляй **побочные ветки**. Эти ветки должны ответвляться **ОТ** узлов основного пути. Они могут вести к проигрышным концовкам ('lose'), давать дополнительную информацию о мире или быть тупиками.
    3.  **Генерация JSON:** Только после этого полного мысленного планирования, сгенерируй JSON, который реализует эту структурированную историю.

    **Железобетонные правила структуры (НЕУКОСНИТЕЛЬНО СЛЕДОВАТЬ):**
    *   **СТРУКТУРИРОВАННЫЙ ГРАФ:** Результат должен быть единым, связным графом. Не создавай 'островов'. Важно: ни один узел, кроме тех, что идут сразу после 'start', не должен быть связан напрямую ТОЛЬКО с узлом 'start'. Это предотвратит создание хаотичной "паутины" и обеспечит логичное течение истории.
    *   **ОБЯЗАТЕЛЬНЫЕ КОНЦОВКИ:** Сценарий ОБЯЗАТЕЛЬНО должен содержать как минимум один узел с победной концовкой (поле \`end: { "type": "win", "message": "..." }\`) и как минимум один узел с проигрышной концовкой (\`end: { "type": "lose", "message": "..." }\`).
    *   **Нелинейность:** Основной путь может быть относительно линеен, но наличие побочных веток, которые предлагают разные исходы или дополнительный контент, обязательно.
    *   **Качество текста:** Тексты узлов должны быть атмосферными, увлекательными и написаны в едином стиле.

    ${a}

    **Финальное требование:** Верни результат в формате JSON, соответствующем предоставленной схеме. Не добавляй никаких комментариев или лишнего текста вне JSON. Убедись, что структура соответствует всем правилам.

    **Параметры квеста от автора:**
    -   Жанр/Сеттинг: ${n}
    -   Основная завязка сюжета: "${e}"
    -   Ключевые элементы, которые нужно включить: ${r||"не указаны"}
    `,f=o==="deep"?c:u;try{const g=(await Mu.models.generateContent({model:"gemini-2.5-flash",contents:f,config:{responseMimeType:"application/json",responseSchema:s}})).text.trim();if(!g)throw new Error("API вернул пустой ответ.");const _=JSON.parse(g);if(!_.nodes||!Array.isArray(_.nodes))throw new Error("API вернул некорректную структуру данных (отсутствует массив nodes).");const T={};for(const E of _.nodes)if(E.id){const{id:b,...S}=E;S.choices&&S.choices.length===0&&delete S.choices,S.effects&&S.effects.length===0&&delete S.effects,T[b]=S}if(!T.start)throw new Error("Сгенерированный сценарий не содержит обязательного узла 'start'.");return T}catch(h){console.error("Error generating quest DSL with Gemini API:",h);let g="Произошла неизвестная ошибка при генерации сценария.";throw h instanceof Error&&(g=`Не удалось сгенерировать сценарий: ${h.message}`),new Error(g)}},BGe=async t=>{const e={type:$e.OBJECT,properties:{action:{type:$e.STRING,description:"Action to perform: CREATE_NODE, DELETE_CHOICE, SET_CHOICE_TARGET, DELETE_NODE."},label:{type:$e.STRING,description:"Human-readable label for the button, e.g., 'Create missing node'."},details:{type:$e.OBJECT,properties:{targetNodeId:{type:$e.STRING,nullable:!0},choiceIndex:{type:$e.NUMBER,nullable:!0,description:"The index of the choice with the broken link within its node's 'choices' array."},newNodeId:{type:$e.STRING,nullable:!0},generatedText:{type:$e.STRING,nullable:!0,description:"Pre-generated Russian text for the new node if action is CREATE_NODE."}}}},required:["action","label","details"]},n={type:$e.OBJECT,properties:{type:{type:$e.STRING,description:"Error type: BROKEN_LINK, ORPHAN_NODE, DEAD_END, UNSOLVABLE_PUZZLE"},nodeId:{type:$e.STRING,description:"ID of the node where the error occurs."},description:{type:$e.STRING,description:"Human-readable description of the error, IN RUSSIAN."},suggestions:{type:$e.ARRAY,items:e},details:{type:$e.OBJECT,properties:{choiceLabel:{type:$e.STRING,nullable:!0,description:"The 'label' text of the choice with the broken link."},targetNodeId:{type:$e.STRING,nullable:!0}}}},required:["type","nodeId","description","suggestions"]},r={type:$e.OBJECT,properties:{issues:{type:$e.ARRAY,items:n}},required:["issues"]},i=`Ты — опытный гейм-дизайнер и QA-тестировщик текстовых квестов. Проанализируй предоставленный JSON-сценарий (QuestDSL) на наличие логических ошибок. Для каждой найденной ошибки "BROKEN_LINK" ты должен не только предложить создать узел, но и СРАЗУ ЖЕ сгенерировать для него подходящий по контексту текст.

    **Важнейшее правило:** Все описания ошибок в поле \`description\` ДОЛЖНЫ быть на **РУССКОМ** языке.

    **Типы ошибок для поиска и правила генерации предложений:**

    1.  **BROKEN_LINK (Битые ссылки):**
        -   **Задача:** Найди выбор (\`choices\`), у которого поле \`to\` ссылается на ID узла, которого нет в сценарии. Ты ДОЛЖЕН определить: 1. Текст этого выбора (\`label\`). 2. Индекс этого выбора в массиве \`choices\` (число).
        -   **В \`details\` самой ошибки (\`AnalysisResult.details\`):** Укажи \`choiceLabel\` (текст выбора) и \`targetNodeId\` (несуществующий ID).
        -   **В \`suggestions\`:**
            -   **Для \`action: "CREATE_NODE"\`:** В \`details\` укажи \`choiceIndex\` (индекс), \`newNodeId\` (несуществующий ID) и сгенерируй \`generatedText\`. Текст должен логично продолжать историю, основываясь на тексте исходного узла и \`choiceLabel\`. Учти ID целевого узла (например, \`lose_taunted\` намекает на проигрыш).
            -   **Для \`action: "DELETE_CHOICE"\`:** В \`details\` укажи тот же самый \`choiceIndex\`.

    2.  **ORPHAN_NODE (Узлы-сироты):**
        -   **Задача:** Найди узел (кроме 'start'), на который нет ни одной ссылки из полей \`to\`.
        -   **Предложения:** Предложи удалить этот узел (\`action: "DELETE_NODE"\`).

    3.  **DEAD_END (Тупики):**
        -   **Задача:** Найди узел, который не является концом игры (\`end\`), но не имеет доступных для игрока выборов.
        -   **Предложения:** Предложи удалить этот узел.

    4.  **UNSOLVABLE_PUZZLE (Нерешаемые загадки):**
        -   **Задача:** Найди преграду (выбор с \`when\`), для которой нет решения в предыдущих узлах.
        -   **Предложения:** Опиши проблему в \`description\` и предложи удалить этот выбор.

    **Сценарий для анализа:**
    \`\`\`json
    ${JSON.stringify(t,null,2)}
    \`\`\`

    Верни ТОЛЬКО JSON-объект с полем "issues". Если ошибок нет, верни пустой массив.
    `,o=()=>Mu.models.generateContent({model:"gemini-2.5-flash",contents:i,config:{responseMimeType:"application/json",responseSchema:r}});try{const a=(await kGe(o)).text.trim();return a?JSON.parse(a).issues||[]:[]}catch(s){console.error("Error analyzing quest DSL:",s);let a="Произошла неизвестная ошибка при анализе сценария.";throw s instanceof Error&&(a=`Не удалось проанализировать сценарий: ${s.message}`),new Error(a)}},$Ge=async t=>{const e=`Ты — ведущий гейм-дизайнер и аналитик. Тебе предоставлен технический отчет от автоматической системы тестирования, которая прогнала все возможные пути в текстовом квесте. Твоя задача — проанализировать этот отчет и написать краткое, понятное саммари для другого гейм-дизайнера на **РУССКОМ** языке.

    **Ключевые задачи:**
    1.  **Объясни суть проблем:** Не просто перечисляй ошибки, а объясни, *почему* это проблема с точки зрения игрового опыта.
    2.  **Группируй похожие проблемы:** Если несколько путей ведут к одной и той же нерешаемой загадке, опиши это как одну общую проблему.
    3.  **Дай конкретные рекомендации:** Предложи, как можно исправить каждую проблему (например, "добавить альтернативный способ получения предмета" или "пересмотреть условия для этого выбора").
    4.  **Стиль:** Пиши профессионально, но понятно. Твой отчет должен помочь улучшить дизайн квеста.

    **Технический отчет для анализа:**
    \`\`\`json
    ${JSON.stringify(t,null,2)}
    \`\`\`

    Твой ответ должен быть отформатирован как markdown-текст, содержащий ТОЛЬКО саммари. Начни с заголовка "Отчет AI-Плейтестера:".`;try{const r=(await Mu.models.generateContent({model:"gemini-2.5-flash",contents:e})).text.trim();if(!r)throw new Error("AI не смог составить отчет.");return r}catch(n){throw console.error("Error summarizing playtest results:",n),new Error(`Не удалось составить отчет по результатам плейтеста: ${n.message}`)}},zGe=async(t,e,n,r)=>{const i={type:$e.OBJECT,properties:{nodeId:{type:$e.STRING,nullable:!0},choiceIndex:{type:$e.NUMBER,nullable:!0},field:{type:$e.STRING,nullable:!0},value:{type:$e.STRING,nullable:!0,description:"Новое значение для поля. Может быть простой строкой или JSON-строкой для сложных объектов."},effect:{...RL,nullable:!0},condition:{...Cie,nullable:!0}}},o={type:$e.OBJECT,properties:{label:{type:$e.STRING,description:"Человекочитаемый текст для кнопки, например, 'Добавить ключ в инвентарь в узле X'"},action:{type:$e.STRING,description:"Тип действия: 'UPDATE_NODE', 'ADD_EFFECT_TO_CHOICE', 'UPDATE_CHOICE_CONDITION'."},details:i},required:["label","action","details"]},s={type:$e.OBJECT,properties:{explanation:{type:$e.STRING,description:"Объяснение проблемы на русском языке."},suggestions:{type:$e.ARRAY,items:o}},required:["explanation","suggestions"]},a=`Ты — AI-отладчик для текстовых квестов. Тебе предоставлен полный сценарий (DSL), текущее состояние игрока и его описание проблемы. Твоя задача — проанализировать ситуацию и предложить конкретные программные исправления.

    **Контекст:**
    - **Текущий узел:** \`${n}\`
    - **Состояние игрока (инвентарь, переменные):**
      \`\`\`json
      ${JSON.stringify(e,null,2)}
      \`\`\`
    - **Проблема, описанная игроком:** "${r}"

    **Полный сценарий квеста (DSL) для анализа:**
    \`\`\`json
    ${JSON.stringify(t,null,2)}
    \`\`\`

    **Инструкции:**
    1.  **Проанализируй проблему:** Внимательно изучи DSL и состояние игрока, чтобы понять, почему возникла проблема, описанная пользователем.
    2.  **Напиши объяснение:** В поле \`explanation\` дай краткое и понятное объяснение причины проблемы на русском языке.
    3.  **Предложи исправления:** В поле \`suggestions\` предоставь 1-2 наиболее вероятных исправления в виде программных действий. Каждое предложение должно содержать:
        - \`label\`: Понятный текст для кнопки.
        - \`action\`: Тип действия.
        - \`details\`: JSON-объект с параметрами для этого действия.
    4.  **ВАЖНЕЙШЕЕ ПРАВИЛО:** Для действий, которые касаются конкретного выбора (например, \`ADD_EFFECT_TO_CHOICE\`), поле \`choiceIndex\` в объекте \`details\` является **ОБЯЗАТЕЛЬНЫМ**. Ты **ДОЛЖЕН** указать правильный числовой индекс выбора в массиве \`choices\` родительского узла.

    **Примеры для \`details\`:**
    - Для \`ADD_EFFECT_TO_CHOICE\`: \`{ "nodeId": "some_node", "choiceIndex": 0, "effect": { "inv_add": "blue_key" } }\`
    - Для \`UPDATE_CHOICE_CONDITION\`: \`{ "nodeId": "another_node", "choiceIndex": 1, "condition": { "has_item": "red_gem" } }\`
    - Для \`UPDATE_NODE\`: \`{ "nodeId": "start", "field": "text", "value": "Новый текст для стартового узла..." }\`

    Верни ТОЛЬКО JSON-объект, соответствующий схеме.`;try{const c=(await Mu.models.generateContent({model:"gemini-2.5-flash",contents:a,config:{responseMimeType:"application/json",responseSchema:s}})).text.trim();if(!c)throw new Error("API вернул пустой ответ.");return JSON.parse(c)}catch(u){throw console.error("Error debugging quest issue:",u),new Error(`Не удалось проанализировать проблему: ${u.message}`)}},HGe=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),GGe=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})}),jGe=({isOpen:t,onClose:e,assets:n,onSelect:r,onDelete:i})=>t?I.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",onClick:e,role:"dialog","aria-modal":"true","aria-labelledby":"asset-library-title",children:I.jsxs("div",{className:"bg-stone-800 border border-stone-700 rounded-lg w-full max-w-5xl max-h-[90vh] flex flex-col",onClick:o=>o.stopPropagation(),children:[I.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-stone-700 flex-shrink-0",children:[I.jsxs("h3",{id:"asset-library-title",className:"font-display text-2xl text-amber-400 flex items-center",children:[I.jsx(HGe,{})," Библиотека Ассетов"]}),I.jsx("button",{onClick:e,className:"text-stone-400 hover:text-white text-3xl leading-none","aria-label":"Close",children:"×"})]}),I.jsx("div",{className:"p-6 overflow-y-auto",children:Object.keys(n.images).length>0?I.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4",children:Object.entries(n.images).map(([o,s])=>I.jsxs("div",{className:"group relative",children:[I.jsx("button",{onClick:()=>r(o),className:"block w-full aspect-video bg-stone-900 rounded-md overflow-hidden border-2 border-transparent hover:border-amber-500 focus:border-amber-500 outline-none transition-all",children:I.jsx("img",{src:s,alt:o,className:"w-full h-full object-cover",loading:"lazy"})}),I.jsx("button",{onClick:()=>i(o),className:"absolute top-1 right-1 bg-black/60 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 hover:bg-red-600 transition-all",title:"Удалить из библиотеки (необратимо)",children:I.jsx(GGe,{})})]},o))}):I.jsx("p",{className:"text-stone-400 text-center py-12",children:"Библиотека пуста. Сгенерируйте изображения, чтобы они появились здесь."})})]})}):null,RH=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),KGe=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),WGe=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),YGe=({questId:t,nodeId:e,node:n,dsl:r,onDslChange:i,onNodeChange:o})=>{const[s,a]=M.useState({loading:!1,error:""}),[u,c]=M.useState({mainPrompt:"",style:"Киберпанк",negativePrompt:"text, words, letters, blurry, ugly, watermark"}),[f,h]=M.useState(!1),g=async()=>{if(!n.text||typeof n.text!="string"){alert("Текст узла пуст, чтобы генерировать промпт.");return}try{const b=await OGe(n.text);c(S=>({...S,mainPrompt:b}))}catch(b){alert(`Не удалось сгенерировать промпт: ${b.message}`)}},_=async()=>{const{mainPrompt:b,style:S,negativePrompt:C}=u;if(!b){alert("Пожалуйста, введите описание для генерации изображения.");return}a({loading:!0,error:""});try{const R=await VGe({mainPrompt:b,style:S,negativePrompt:C}),P=`${e}_${Date.now()}`,O=E_e.ref(`quests/${t}/images/${P}.jpeg`),q=R.split(",")[1],L=await(await O.putString(q,"base64",{contentType:"image/jpeg"})).ref.getDownloadURL(),N=JSON.parse(JSON.stringify(r));N.assets.images||(N.assets.images={}),N.assets.images[P]=L,N.nodes[e].bg=P,i(N),a({loading:!1,error:""})}catch(R){let P=R.message||"Ошибка генерации или загрузки";(R==null?void 0:R.code)==="storage/unauthorized"&&(P="Ошибка прав доступа. Проверьте правила безопасности Firebase Storage."),a({loading:!1,error:P})}},T=b=>{o("bg",b),h(!1)},E=b=>{const S=Object.entries(r.nodes).filter(([R,P])=>P.bg===b).map(([R,P])=>R);let C="Вы уверены, что хотите навсегда удалить это изображение из библиотеки?";if(S.length>0&&(C+=`

Оно используется в следующих узлах: ${S.join(", ")}. Фон в этих узлах будет сброшен.`),window.confirm(C)){const R=JSON.parse(JSON.stringify(r));delete R.assets.images[b],S.forEach(P=>{R.nodes[P]&&delete R.nodes[P].bg}),i(R)}};return I.jsxs("div",{className:"space-y-2",children:[I.jsx("label",{className:"text-sm font-bold text-stone-400 block",children:"Фоновое изображение:"}),I.jsxs("div",{className:"aspect-video bg-stone-900 rounded-md overflow-hidden relative flex items-center justify-center",children:[r.assets.images[n.bg||""]?I.jsx("img",{src:r.assets.images[n.bg||""],alt:"Generated background",className:"w-full h-full object-cover"}):I.jsx("span",{className:"text-stone-500",children:"Нет изображения"}),s.loading&&I.jsx("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center",children:I.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-500"})}),n.bg&&r.assets.images[n.bg]&&I.jsx("button",{onClick:()=>o("bg",void 0),className:"absolute top-2 right-2 bg-black/50 text-white rounded-full p-1.5 hover:bg-red-500 transition-colors",title:"Убрать фон с этого узла",children:I.jsx(WGe,{})})]}),I.jsx("div",{className:"flex gap-2",children:I.jsxs("button",{onClick:()=>h(!0),className:"w-full flex items-center justify-center font-display text-lg bg-stone-600 text-white py-2 px-4 rounded-md hover:bg-stone-500 transition-colors",children:[I.jsx(KGe,{}),"Выбрать из библиотеки"]})}),I.jsxs("div",{className:"mt-4 p-4 bg-stone-900/50 rounded-lg border border-stone-700 space-y-3",children:[I.jsx("h5",{className:"font-display text-lg text-amber-400",children:"AI-Студия Изображений"}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"ai-image-prompt",className:"text-sm font-bold text-stone-400 block mb-1",children:"Промпт (на английском):"}),I.jsxs("div",{className:"flex gap-2",children:[I.jsx("textarea",{id:"ai-image-prompt",value:u.mainPrompt,onChange:b=>c({...u,mainPrompt:b.target.value}),placeholder:"A lone detective standing in a neon-lit alley...",className:"flex-grow bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all h-20 resize-y"}),I.jsx("button",{onClick:g,title:"Сгенерировать промпт из текста узла",className:"flex items-center justify-center font-display text-lg bg-sky-600 text-white p-3 rounded-md hover:bg-sky-500 transition-colors",children:I.jsx(RH,{})})]})]}),I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:"ai-image-style",className:"text-sm font-bold text-stone-400 block mb-1",children:"Стиль:"}),I.jsxs("select",{id:"ai-image-style",value:u.style,onChange:b=>c({...u,style:b.target.value}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",children:[I.jsx("option",{children:"Киберпанк"}),I.jsx("option",{children:"Темное фэнтези"}),I.jsx("option",{children:"Фотореализм"}),I.jsx("option",{children:"Аниме"}),I.jsx("option",{children:"Пиксель-арт"}),I.jsx("option",{children:"Стимпанк"})]})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"ai-image-negative",className:"text-sm font-bold text-stone-400 block mb-1",children:"Негативный промпт:"}),I.jsx("input",{id:"ai-image-negative",type:"text",value:u.negativePrompt,onChange:b=>c({...u,negativePrompt:b.target.value}),placeholder:"text, words, ugly, blurry",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"})]})]}),I.jsxs("button",{onClick:_,disabled:s.loading,className:"w-full flex items-center justify-center font-display text-lg bg-amber-500 text-stone-900 py-2 px-4 rounded-md hover:bg-amber-400 transition-colors disabled:bg-stone-600",children:[I.jsx(RH,{})," ",s.loading?"Генерация...":"Создать Изображение"]}),s.error&&I.jsx("p",{className:"text-red-500 text-sm mt-1 text-center",children:s.error})]}),I.jsx(jGe,{isOpen:f,onClose:()=>h(!1),assets:r.assets,onSelect:T,onDelete:E})]})},JGe=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),XGe=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-stone-400 hover:text-red-500 transition-colors",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})}),l1=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),QGe=()=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-stone-400 hover:text-amber-400 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924-1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066 2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),ZGe=({nodeId:t,node:e,dsl:n,onDslChange:r})=>{const[i,o]=M.useState(null),[s,a]=M.useState(!1),[u,c]=M.useState([]),[f,h]=M.useState(""),g=Object.keys(n.nodes);M.useEffect(()=>{o(null),c([]),h("")},[t]);const _=(N,U,V)=>{const $={...n,nodes:{...n.nodes}},F=[...$.nodes[t].choices||[]],H={...F[N]};V===void 0||Array.isArray(V)&&V.length===0||typeof V=="object"&&V!==null&&Object.keys(V).length===0?delete H[U]:H[U]=V,F[N]=H,$.nodes[t]={...$.nodes[t],choices:F},r($)},T=(N,U)=>{if(U==="__CREATE_NEW__"){const V=prompt("Введите ID нового узла (латиницей, без пробелов):");if(V&&/^[a-zA-Z0-9_]+$/.test(V)){if(n.nodes[V]){alert("Узел с таким ID уже существует.");return}const $={...n,nodes:{...n.nodes}};$.nodes[V]={text:"Новый узел..."};const F=[...$.nodes[t].choices||[]];F[N]={...F[N],to:V},$.nodes[t]={...$.nodes[t],choices:F},r($)}else V&&alert("Неверный формат ID. Используйте только латинские буквы, цифры и подчеркивание.")}else _(N,"to",U)},E=(N="",U="")=>{const V={...n,nodes:{...n.nodes}},$=[...V.nodes[t].choices||[]];$.push({label:N,to:U}),V.nodes[t]={...V.nodes[t],choices:$},r(V)},b=N=>{if(!window.confirm("Вы уверены, что хотите удалить этот выбор?"))return;const U={...n,nodes:{...n.nodes}},V=[...U.nodes[t].choices||[]];V.splice(N,1),U.nodes[t]={...U.nodes[t],choices:V},r(U)},S=async()=>{if(!(!e||typeof e.text!="string")){a(!0),c([]),h("");try{const N=await qGe(e.text);c(N)}catch(N){h(N.message)}finally{a(!1)}}},C=N=>{E(N),c(U=>U.filter(V=>V!==N))},R=(N,U)=>{var F;const V=(F=e==null?void 0:e.choices)==null?void 0:F[N];if(!V)return;let $=V.when||{};{const H=$[U]||[];$={...$,[U]:[...H,{key:"",value:""}]}}_(N,"when",$)},P=(N,U,V,$)=>{var X;const F=(X=e==null?void 0:e.choices)==null?void 0:X[N];if(!F||!F.when)return;const H={...F.when};if($!==void 0){const K=[...H[U]||[]];K[$]=V,H[U]=K}_(N,"when",H)},O=(N,U,V)=>{var H;const $=(H=e==null?void 0:e.choices)==null?void 0:H[N];if(!$||!$.when)return;const F={...$.when};if(V!==void 0&&F[U]){const X=[...F[U]||[]];X.splice(V,1),X.length===0?delete F[U]:F[U]=X}_(N,"when",Object.keys(F).length>0?F:void 0)},q=(N,U)=>{var H;const V=(H=e==null?void 0:e.choices)==null?void 0:H[N];if(!V)return;let $={};U==="set"?$={set:[{key:"",value:""}]}:U==="add"?$={add:[{key:"",value:0}]}:U==="inv_add"?$={inv_add:""}:U==="inv_remove"&&($={inv_remove:""});const F=[...V.effects||[],$];_(N,"effects",F)},D=(N,U,V)=>{var H;const $=(H=e==null?void 0:e.choices)==null?void 0:H[N];if(!$||!$.effects)return;const F=[...$.effects];F[U]=V,_(N,"effects",F)},L=(N,U)=>{var F;if(!window.confirm("Удалить этот эффект?"))return;const V=(F=e==null?void 0:e.choices)==null?void 0:F[N];if(!V||!V.effects)return;const $=[...V.effects];$.splice(U,1),_(N,"effects",$.length>0?$:void 0)};return I.jsxs("div",{children:[I.jsxs("div",{className:"flex justify-between items-center mt-6 mb-2",children:[I.jsx("h4",{className:"text-lg font-bold text-stone-300",children:"Выборы:"}),I.jsxs("button",{onClick:S,disabled:s,className:"flex items-center gap-1.5 text-sm bg-sky-600 hover:bg-sky-500 text-white font-semibold py-1 px-3 rounded-md transition-colors disabled:bg-stone-600 disabled:cursor-not-allowed",children:[I.jsx(JGe,{})," ",s?"Думаю...":"Предложить выборы"]})]}),f&&I.jsx("p",{className:"text-red-500 text-sm my-2",children:f}),u.length>0&&I.jsxs("div",{className:"p-2 bg-stone-900/50 rounded-md mb-2",children:[I.jsx("p",{className:"text-xs text-stone-400 mb-2",children:"Нажмите, чтобы добавить вариант:"}),I.jsx("div",{className:"flex flex-wrap gap-2",children:u.map((N,U)=>I.jsxs("button",{onClick:()=>C(N),className:"bg-sky-800 text-sky-200 text-sm px-3 py-1 rounded-full hover:bg-sky-700 transition-colors",children:['+ "',N,'"']},U))})]}),I.jsxs("div",{className:"space-y-2",children:[(e.choices||[]).map((N,U)=>{var V,$,F,H,X,K,te;return I.jsxs("div",{className:"bg-stone-900/50 p-3 rounded-md transition-all",children:[I.jsxs("div",{className:"flex gap-2 items-center",children:[I.jsx("input",{type:"text",value:N.label,onChange:re=>_(U,"label",re.target.value),placeholder:"Текст выбора",className:"flex-grow bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 focus:ring-1 focus:ring-amber-500 outline-none"}),I.jsx("span",{className:"text-stone-400",children:"→"}),I.jsxs("select",{value:N.to||"",onChange:re=>T(U,re.target.value),className:"w-48 bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 focus:ring-1 focus:ring-amber-500 outline-none",children:[I.jsx("option",{value:"",disabled:!0,children:"Выберите узел..."}),I.jsx("option",{value:"__CREATE_NEW__",className:"text-sky-400 font-semibold",children:"[ Создать новый узел... ]"}),g.map(re=>I.jsx("option",{value:re,children:re},re))]}),I.jsx("button",{onClick:()=>o(i===U?null:U),title:"Условия и эффекты",children:I.jsx(QGe,{})}),I.jsx("button",{onClick:()=>b(U),title:"Удалить выбор",children:I.jsx(XGe,{})})]}),i===U&&I.jsxs("div",{className:"mt-3 space-y-4 border-t border-stone-700 pt-3",children:[I.jsxs("div",{children:[I.jsx("h5",{className:"text-sm font-bold text-stone-400 mb-2",children:"Условия видимости"}),I.jsxs("div",{className:"space-y-2",children:[I.jsxs("div",{className:"flex items-center gap-2 bg-stone-800 p-2 rounded",children:[I.jsxs("select",{value:(V=N.when)!=null&&V.has_item?"has_item":($=N.when)!=null&&$.missing_item?"missing_item":"none",onChange:re=>{const Y=re.target.value,G={...N.when};delete G.has_item,delete G.missing_item,Y!=="none"&&(G[Y]=""),_(U,"when",G)},className:"bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm outline-none",children:[I.jsx("option",{value:"none",children:"Инвентарь: нет"}),I.jsx("option",{value:"has_item",children:"Инвентарь: Есть"}),I.jsx("option",{value:"missing_item",children:"Инвентарь: Нет"})]}),(((F=N.when)==null?void 0:F.has_item)!==void 0||((H=N.when)==null?void 0:H.missing_item)!==void 0)&&I.jsx("input",{type:"text",value:((X=N.when)==null?void 0:X.has_item)||((K=N.when)==null?void 0:K.missing_item)||"",onChange:re=>{const Y={...N.when};Y.has_item!==void 0&&(Y.has_item=re.target.value),Y.missing_item!==void 0&&(Y.missing_item=re.target.value),_(U,"when",Y)},placeholder:"item_id",className:"flex-grow bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm outline-none"})]}),(((te=N.when)==null?void 0:te.var_eq)||[]).map((re,Y)=>I.jsxs("div",{className:"flex items-center gap-2 bg-stone-800 p-2 rounded",children:[I.jsx("span",{className:"text-sm text-stone-300 font-semibold",children:"Переменная ="}),I.jsx("input",{type:"text",value:re.key,onChange:G=>P(U,"var_eq",{...re,key:G.target.value},Y),placeholder:"variable",className:"w-24 bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm outline-none"}),I.jsx("input",{type:"text",value:re.value,onChange:G=>P(U,"var_eq",{...re,value:G.target.value},Y),placeholder:"value",className:"w-24 bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm outline-none"}),I.jsx("button",{onClick:()=>O(U,"var_eq",Y),className:"text-stone-500 hover:text-red-400",children:I.jsx(l1,{})})]},`var_eq_${Y}`)),I.jsx("button",{onClick:()=>R(U,"var_eq"),className:"text-sky-400 hover:text-sky-300 text-sm font-semibold",children:"+ Добавить 'Переменная ='"})]})]}),I.jsxs("div",{children:[I.jsx("h5",{className:"text-sm font-bold text-stone-400 mb-2 mt-4",children:"Эффекты при выборе"}),I.jsx("div",{className:"space-y-2",children:(N.effects||[]).map((re,Y)=>{const G=Object.keys(re)[0];if(G==="set"||G==="add"){const Q=re[G]||[];return Q.map((Z,fe)=>I.jsxs("div",{className:"flex items-center gap-2 bg-stone-800 p-2 rounded",children:[I.jsx("span",{className:"text-sm text-stone-300 font-semibold",children:G==="set"?"Установить":"Добавить к"}),I.jsx("input",{type:"text",value:Z.key,placeholder:"variable",className:"w-24 bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm",onChange:J=>{const ne=[...Q];ne[fe]={...Z,key:J.target.value},D(U,Y,{[G]:ne})}}),I.jsx("input",{type:G==="add"?"number":"text",value:Z.value,placeholder:"value",className:"w-24 bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm",onChange:J=>{const ne=[...Q],oe=G==="add"?Number(J.target.value):J.target.value;ne[fe]={...Z,value:oe},D(U,Y,{[G]:ne})}}),I.jsx("button",{onClick:()=>L(U,Y),className:"text-stone-500 hover:text-red-400",children:I.jsx(l1,{})})]},`${G}_${fe}`))}return G==="inv_add"||G==="inv_remove"?I.jsxs("div",{className:"flex items-center gap-2 bg-stone-800 p-2 rounded",children:[I.jsx("span",{className:"text-sm text-stone-300 font-semibold",children:G==="inv_add"?"Добавить предмет":"Удалить предмет"}),I.jsx("input",{type:"text",value:re[G],placeholder:"item_id",className:"flex-grow bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm",onChange:Q=>D(U,Y,{[G]:Q.target.value})}),I.jsx("button",{onClick:()=>L(U,Y),className:"text-stone-500 hover:text-red-400",children:I.jsx(l1,{})})]},G):null})}),I.jsxs("div",{className:"flex gap-4 mt-2",children:[I.jsx("button",{onClick:()=>q(U,"set"),className:"text-sky-400 hover:text-sky-300 text-sm font-semibold",children:"+ Установить переменную"}),I.jsx("button",{onClick:()=>q(U,"inv_add"),className:"text-sky-400 hover:text-sky-300 text-sm font-semibold",children:"+ Добавить предмет"}),I.jsx("button",{onClick:()=>q(U,"inv_remove"),className:"text-red-400 hover:text-red-300 text-sm font-semibold",children:"+ Удалить предмет"})]})]})]})]},U)}),I.jsx("button",{onClick:()=>E(),className:"w-full text-stone-300 hover:bg-stone-700 p-2 rounded-md transition-colors text-sm font-semibold",children:"+ Добавить выбор"})]})]})},PH=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),eje=({isOpen:t,onClose:e,aiForm:n,setAiForm:r,aiGenerationResult:i,onSubmit:o,onInsert:s})=>t?I.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",onClick:e,role:"dialog","aria-modal":"true",children:I.jsxs("div",{className:"bg-stone-800 border border-stone-700 rounded-lg w-full max-w-2xl max-h-[90vh] flex flex-col",onClick:a=>a.stopPropagation(),children:[I.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-stone-700",children:[I.jsxs("h3",{className:"font-display text-2xl text-amber-400 flex items-center gap-2",children:[I.jsx(PH,{})," AI-Ассистент Сценариста"]}),I.jsx("button",{onClick:e,className:"text-stone-400 hover:text-white text-3xl leading-none","aria-label":"Close",children:"×"})]}),I.jsxs("form",{onSubmit:o,className:"p-6 space-y-4 overflow-y-auto",children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:"ai-prompt",className:"text-sm font-bold text-stone-400 block mb-1",children:"Основная идея сцены:"}),I.jsx("textarea",{id:"ai-prompt",value:n.prompt,onChange:a=>r({...n,prompt:a.target.value}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all h-32 resize-y",placeholder:"Напр.: Герой входит в таверну, где за столом сидит загадочный незнакомец...",required:!0})]}),I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:"ai-tone",className:"text-sm font-bold text-stone-400 block mb-1",children:"Тон / Атмосфера:"}),I.jsxs("select",{id:"ai-tone",value:n.tone,onChange:a=>r({...n,tone:a.target.value}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",children:[I.jsx("option",{children:"Таинственный"}),I.jsx("option",{children:"Напряженный"}),I.jsx("option",{children:"Юмористический"}),I.jsx("option",{children:"Эпический"}),I.jsx("option",{children:"Мрачный"}),I.jsx("option",{children:"Спокойный"})]})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"ai-keywords",className:"text-sm font-bold text-stone-400 block mb-1",children:"Ключевые детали (через запятую):"}),I.jsx("input",{id:"ai-keywords",type:"text",value:n.keywords,onChange:a=>r({...n,keywords:a.target.value}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",placeholder:"старая книга, свеча, кинжал"})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"ai-wordCount",className:"text-sm font-bold text-stone-400 block mb-1",children:"Примерный объем (слов):"}),I.jsx("input",{id:"ai-wordCount",type:"number",step:"10",value:n.wordCount,onChange:a=>r({...n,wordCount:Number(a.target.value)}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"})]})]}),I.jsxs("button",{type:"submit",disabled:i.loading,className:"w-full flex items-center justify-center font-display text-xl bg-sky-600 text-white py-2 px-6 rounded-md hover:bg-sky-500 transition-colors disabled:bg-stone-600",children:[I.jsx(PH,{})," ",i.loading?"ГЕНЕРАЦИЯ...":"СГЕНЕРИРОВАТЬ ТЕКСТ"]})]}),(i.text||i.error)&&I.jsxs("div",{className:"p-6 border-t border-stone-700 space-y-3",children:[I.jsx("h4",{className:"font-display text-xl text-stone-300",children:"Результат:"}),i.error&&I.jsx("p",{className:"text-red-500",children:i.error}),i.text&&I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"bg-stone-900 p-4 rounded-md max-h-48 overflow-y-auto",children:I.jsx("p",{className:"whitespace-pre-wrap text-stone-300",children:i.text})}),I.jsx("button",{onClick:s,className:"w-full font-display text-lg bg-amber-500 text-stone-900 py-2 rounded-md hover:bg-amber-400 transition-colors",children:"Вставить текст в узел"})]})]})]})}):null,tje=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),nje=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),NH=({questId:t,dsl:e,selectedNodeId:n,onDslChange:r,onClose:i})=>{const o=e.nodes[n],[s,a]=M.useState(!1),[u,c]=M.useState({prompt:"",tone:"Таинственный",keywords:"",wordCount:100}),[f,h]=M.useState({loading:!1,error:"",text:""});if(!o)return I.jsx("div",{className:"bg-stone-800/50 border border-stone-700 p-6 rounded-md flex items-center justify-center h-full",children:I.jsx("p",{className:"text-stone-400",children:"Выберите узел для редактирования"})});const g=(b,S)=>{const C={...e,nodes:{...e.nodes}};S===void 0?delete C.nodes[n][b]:C.nodes[n]={...C.nodes[n],[b]:S},r(C)},_=()=>{h({loading:!1,error:"",text:""}),c(b=>({...b,prompt:o.text||""})),a(!0)},T=async b=>{b.preventDefault(),h({loading:!0,error:"",text:""});try{const S=await UGe(u);h({loading:!1,error:"",text:S})}catch(S){h({loading:!1,error:S.message,text:""})}},E=()=>{f.text&&(g("text",f.text),a(!1))};return I.jsxs("div",{className:"bg-stone-800/80 backdrop-blur-md border-l-2 border-stone-700/50 h-full flex flex-col",children:[I.jsxs("header",{className:"flex justify-between items-center p-4 border-b-2 border-amber-500 flex-shrink-0",children:[I.jsxs("h3",{className:"font-display text-3xl text-stone-100 truncate",children:["Узел: ",I.jsx("span",{className:"text-amber-400",children:n})]}),i&&I.jsx("button",{onClick:i,className:"p-2 text-stone-400 hover:text-white rounded-full hover:bg-stone-700 transition-colors","aria-label":"Close editor",children:I.jsx(nje,{})})]}),I.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto flex-grow",children:[I.jsxs("div",{children:[I.jsxs("div",{className:"flex justify-between items-center mb-1",children:[I.jsx("label",{htmlFor:"nodeText",className:"text-sm font-bold text-stone-400 block",children:"Текст узла:"}),I.jsxs("button",{onClick:_,className:"flex items-center gap-1.5 text-sm bg-sky-600 hover:bg-sky-500 text-white font-semibold py-1 px-3 rounded-md transition-colors",children:[I.jsx(tje,{})," Сгенерировать с AI"]})]}),I.jsx("textarea",{id:"nodeText",value:o.text,onChange:b=>g("text",b.target.value),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all h-40 resize-y"})]}),I.jsx(YGe,{questId:t,nodeId:n,node:o,dsl:e,onDslChange:r,onNodeChange:g}),I.jsx(ZGe,{nodeId:n,node:o,dsl:e,onDslChange:r})]}),I.jsx(eje,{isOpen:s,onClose:()=>a(!1),aiForm:u,setAiForm:c,aiGenerationResult:f,onSubmit:T,onInsert:E})]})},rje=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),ije=({isOpen:t,onClose:e,analysisState:n,onApplySuggestion:r})=>t?I.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",onClick:e,children:I.jsxs("div",{className:"bg-stone-800 border border-stone-700 rounded-lg w-full max-w-3xl max-h-[90vh] flex flex-col",onClick:i=>i.stopPropagation(),children:[I.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-stone-700",children:[I.jsxs("h3",{className:"font-display text-2xl text-amber-400 flex items-center gap-2",children:[I.jsx(rje,{})," Анализ Сценария"]}),I.jsx("button",{onClick:e,className:"text-stone-400 hover:text-white text-3xl leading-none",children:"×"})]}),I.jsxs("div",{className:"p-6 overflow-y-auto space-y-4",children:[n.loading&&I.jsx("p",{className:"animate-pulse text-center py-8 font-display text-xl text-stone-400",children:"АНАЛИЗ..."}),n.error&&I.jsx("p",{className:"text-red-500 text-center py-8",children:n.error}),!n.loading&&!n.error&&n.results.length===0&&I.jsx("p",{className:"text-green-400 text-center py-8 font-semibold",children:"Ошибок не найдено. Отличная работа!"}),n.results.map((i,o)=>I.jsxs("div",{className:"bg-stone-900/50 p-4 rounded-md border border-stone-700",children:[I.jsxs("h4",{className:"font-bold text-lg text-red-400 mb-1",children:[i.type," ",I.jsxs("span",{className:"text-stone-400 font-mono text-base",children:["(в узле: ",i.nodeId,")"]})]}),I.jsx("p",{className:"text-stone-300 mb-3",children:i.description}),I.jsx("div",{className:"flex gap-2",children:i.suggestions.map((s,a)=>I.jsx("button",{onClick:()=>r(i,s),className:"text-sm bg-sky-700 hover:bg-sky-600 text-white font-semibold py-1 px-3 rounded-md transition-colors",children:s.label},a))})]},o))]})]})}):null,oje=()=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),sje=({isOpen:t,onClose:e,playtestState:n})=>t?I.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",onClick:e,children:I.jsxs("div",{className:"bg-stone-800 border border-stone-700 rounded-lg w-full max-w-3xl max-h-[90vh] flex flex-col",onClick:r=>r.stopPropagation(),children:[I.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-stone-700",children:[I.jsxs("h3",{className:"font-display text-2xl text-amber-400 flex items-center gap-2",children:[I.jsx(oje,{})," Отчет AI-Плейтестера"]}),I.jsx("button",{onClick:e,className:"text-stone-400 hover:text-white text-3xl leading-none",children:"×"})]}),I.jsxs("div",{className:"p-6 overflow-y-auto",children:[n.loading&&I.jsxs("div",{className:"text-center py-8",children:[I.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto"}),I.jsx("p",{className:"mt-4 font-display text-xl text-stone-400 animate-pulse",children:"АВТОМАТИЧЕСКОЕ ТЕСТИРОВАНИЕ..."}),I.jsx("p",{className:"text-sm text-stone-500",children:"Система проходит все возможные пути. Это может занять до минуты."})]}),n.error&&I.jsx("p",{className:"text-red-500 text-center py-8 bg-red-900/50 p-4 rounded-md",children:n.error}),!n.loading&&!n.error&&I.jsx("div",{className:"prose prose-invert prose-p:text-stone-300 prose-headings:text-amber-400 prose-strong:text-stone-100 prose-li:text-stone-300",children:I.jsx("div",{dangerouslySetInnerHTML:{__html:n.summary.replace(/\n/g,"<br />")}})})]})]})}):null,Iie=ge.forwardRef(({id:t,data:e},n)=>{const r=Mt(M.useCallback(c=>{var f;return((f=c.nodeInternals.get(t))==null?void 0:f.selected)||!1},[t])),i=t==="start",o="w-48 bg-stone-800 rounded-md border-2 shadow-lg transition-all text-stone-200",s=r?"border-amber-400":i?"border-green-600":e.isEnd&&e.endType==="win"?"border-yellow-500":e.isEnd&&e.endType==="lose"||e.isError&&e.errorType==="BROKEN_LINK"?"border-red-600":e.isDeadEnd?"border-orange-600":e.isOrphan?"border-dashed border-stone-500":"border-stone-600",a=r?"scale-105":e.isChapterHighlight?"ring-2 ring-indigo-500/80 ring-offset-2 ring-offset-stone-900":e.isNeighbor?"ring-2 ring-sky-500/80 ring-offset-2 ring-offset-stone-900":"",u=e.isFaded?"opacity-30":"opacity-100";return I.jsxs("div",{className:`${o} ${s} ${a} ${u}`,ref:n,children:[I.jsx(Rh,{type:"target",position:Xe.Top,className:"!bg-stone-500"}),I.jsxs("div",{className:`p-3 ${e.isOrphan||e.isDeadEnd?"opacity-60":""}`,children:[I.jsx("p",{className:"font-mono font-bold text-center break-words",children:e.label}),e.isOrphan&&I.jsx("p",{className:"text-xs text-stone-500 text-center mt-1",children:"(Сирота)"}),e.isDeadEnd&&I.jsx("p",{className:"text-xs text-orange-400 text-center mt-1",children:"(Тупик)"})]}),I.jsx(Rh,{type:"source",position:Xe.Bottom,className:"!bg-stone-500"})]})});Iie.displayName="CustomNode";const aje=M.memo(Iie),Rie=ge.forwardRef(({id:t,source:e,target:n,sourceX:r,sourceY:i,targetX:o,targetY:s,sourcePosition:a,targetPosition:u,style:c={},label:f,markerEnd:h,data:g},_)=>{const T=Mt(M.useCallback(q=>{var D;return!!((D=q.nodeInternals.get(e))!=null&&D.selected)},[e])),E=Mt(M.useCallback(q=>{var D;return!!((D=q.nodeInternals.get(n))!=null&&D.selected)},[n])),[b,S,C]=jb({sourceX:r,sourceY:i,sourcePosition:a,targetX:o,targetY:s,targetPosition:u}),R=T||E,P=g==null?void 0:g.isHighlighted,O=g==null?void 0:g.isFaded;return I.jsxs(I.Fragment,{children:[I.jsx("path",{id:t,ref:_,style:{...c,stroke:R||P?"#f59e0b":"#57534e",strokeWidth:R||P?2.5:1.5,opacity:O?.2:1,transition:"all 0.2s"},className:"react-flow__edge-path",d:b,markerEnd:h}),!O&&f&&I.jsx(n4e,{children:I.jsx("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${S}px,${C}px)`,pointerEvents:"all"},className:"nodrag nopan",children:I.jsx("div",{style:{background:R||P?"rgba(40, 30, 0, 0.9)":"rgba(28, 25, 23, 0.9)",padding:"4px 8px",borderRadius:"6px",fontSize:12,fontWeight:600,color:R||P?"#fde047":"#d6d3d1",border:`1px solid ${R||P?"#f59e0b":"#44403c"}`,maxWidth:"180px",textAlign:"center",lineHeight:1.2,boxShadow:"0 1px 3px rgba(0,0,0,0.5)",transition:"all 0.2s"},children:f})})})]})});Rie.displayName="CustomEdge";const lje=M.memo(Rie),uje={custom:aje},cje={custom:lje},fje=({nodeToFocus:t,onClearNodeToFocus:e})=>{const{getNode:n,setCenter:r}=CE();return M.useEffect(()=>{if(t){const i=n(t);if(i!=null&&i.width&&(i!=null&&i.height)){const o=i.position.x+i.width/2,s=i.position.y+i.height/2;r(o,s,{zoom:1.2,duration:600})}e()}},[t,n,r,e]),null},dje=({nodes:t,edges:e,onNodesChange:n,onEdgesChange:r,onNodeDragStop:i,selectedNodeId:o,onSelectNode:s,onNodeToFocus:a,onClearNodeToFocus:u,onNodeMouseEnter:c,onNodeMouseLeave:f,onNodeContextMenu:h})=>{const g=M.useCallback(({nodes:T})=>{T.length>0&&T[0].id!==o&&s(T[0].id)},[s,o]),_=M.useCallback((T,E)=>{u(),T.target.closest(".react-flow")&&E.width&&E.height},[u]);return I.jsx("div",{className:"w-full h-full flex-grow bg-stone-900/50 rounded-md overflow-hidden",children:I.jsxs(Bre,{nodes:t,edges:e,onNodesChange:n,onEdgesChange:r,onNodeDragStop:i,onSelectionChange:g,onNodeDoubleClick:_,onNodeMouseEnter:c,onNodeMouseLeave:f,onNodeContextMenu:h,nodeTypes:uje,edgeTypes:cje,fitView:!0,fitViewOptions:{padding:.2},className:"bg-stone-900",minZoom:.2,maxZoom:2,children:[I.jsx(C4e,{color:"#44403c",gap:16}),I.jsx(w4e,{}),I.jsx(p4e,{nodeStrokeWidth:3,zoomable:!0,pannable:!0}),I.jsx(fje,{nodeToFocus:a,onClearNodeToFocus:u})]})})},hje=()=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:[I.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),I.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]}),pje=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})}),mje=()=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:[I.jsx("path",{d:"M11 3a1 1 0 10-2 0v1.586l-1.293-1.293a1 1 0 10-1.414 1.414L7.586 6H6a1 1 0 000 2h1.586l-1.293 1.293a1 1 0 101.414 1.414L9 8.414V10a1 1 0 102 0V8.414l1.293 1.293a1 1 0 101.414-1.414L12.414 7H14a1 1 0 100-2h-1.586l1.293-1.293a1 1 0 10-1.414-1.414L11 4.586V3z"}),I.jsx("path",{d:"M6 10a1 1 0 01-1 1H3a1 1 0 110-2h2a1 1 0 011 1zM14 10a1 1 0 01-1 1h-2a1 1 0 110-2h2a1 1 0 011 1zM3 15a1 1 0 100 2h8a1 1 0 100-2H3z"})]}),gje=({x:t,y:e,nodeId:n,onClose:r,onRename:i,onDelete:o,onCreateConnected:s})=>{const a=M.useRef(null),[u,c]=M.useState({x:t,y:e});M.useEffect(()=>{const h=g=>{a.current&&!a.current.contains(g.target)&&r()};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[r]),M.useEffect(()=>{if(a.current){const{innerWidth:h,innerHeight:g}=window,_=a.current.offsetWidth,T=a.current.offsetHeight;let E=t,b=e;t+_>h&&(E=h-_-10),e+T>g&&(b=g-T-10),c({x:E,y:b})}},[t,e]);const f=({onClick:h,children:g,isDestructive:_})=>I.jsx("button",{onClick:h,className:`w-full text-left px-3 py-1.5 text-sm flex items-center rounded-sm transition-colors ${_?"text-red-400 hover:bg-red-800/50":"text-stone-200 hover:bg-stone-600"}`,children:g});return I.jsxs("div",{ref:a,style:{top:u.y,left:u.x},className:"absolute z-50 bg-stone-800/90 backdrop-blur-sm border border-stone-600 rounded-md shadow-2xl p-1 flex flex-col w-56 animate-fade-in",children:[I.jsxs("div",{className:"px-3 py-1 text-xs text-stone-400 border-b border-stone-600/50 mb-1 truncate font-mono",children:["Узел: ",n]}),I.jsxs(f,{onClick:()=>{i(n),r()},children:[I.jsx(hje,{})," Переименовать"]}),I.jsxs(f,{onClick:()=>{s(n),r()},children:[I.jsx(mje,{})," Создать связанный узел"]}),n!=="start"&&I.jsxs(f,{onClick:()=>{window.confirm(`Вы уверены, что хотите удалить узел "${n}"?`)&&o(n),r()},isDestructive:!0,children:[I.jsx(pje,{})," Удалить"]})]})},Eg=(t,e)=>{if(!t)return!0;if(t.all)return t.all.every(i=>Eg(i,e));if(t.any)return t.any.some(i=>Eg(i,e));if(t.not)return!Eg(t.not,e);const{vars:n,inventory:r}=e;return t.hp_eq!==void 0?n.hp===t.hp_eq:t.hp_gt!==void 0?n.hp>t.hp_gt:t.hp_gte!==void 0?n.hp>=t.hp_gte:t.hp_lt!==void 0?n.hp<t.hp_lt:t.hp_lte!==void 0?n.hp<=t.hp_lte:t.has_item?r.includes(t.has_item):t.missing_item?!r.includes(t.missing_item):t.var_eq?Array.isArray(t.var_eq)?t.var_eq.every(i=>n[i.key]===i.value):Object.entries(t.var_eq).every(([i,o])=>n[i]===o):t.var_neq?Array.isArray(t.var_neq)?t.var_neq.every(i=>n[i.key]!==i.value):Object.entries(t.var_neq).every(([i,o])=>n[i]!==o):!0},MH=(t,e)=>{if(!t)return e;const n=JSON.parse(JSON.stringify(e));return t.forEach(r=>{r.add&&(Array.isArray(r.add)?r.add.forEach(i=>{n.vars[i.key]=(n.vars[i.key]||0)+i.value}):Object.entries(r.add).forEach(([i,o])=>{n.vars[i]=(n.vars[i]||0)+o})),r.set&&(Array.isArray(r.set)?r.set.forEach(i=>{n.vars[i.key]=i.value}):Object.entries(r.set).forEach(([i,o])=>{n.vars[i]=o})),r.inv_add&&!n.inventory.includes(r.inv_add)&&n.inventory.push(r.inv_add),r.inv_remove&&(n.inventory=n.inventory.filter(i=>i!==r.inv_remove))}),n},yje=t=>{var s;const e=[],n=[{nodeId:"start",playerState:t.state,path:["start"]}],r=new Set;let i=0;const o=5e3;for(;n.length>0&&i<o;){i++;const{nodeId:a,playerState:u,path:c}=n.shift(),f=`${a}|${JSON.stringify(u.vars)}|${[...u.inventory].sort().join(",")}`;if(r.has(f))continue;r.add(f);const h=t.nodes[a];if(!h)continue;let g=MH(h.effects,u);h.choices&&h.choices.forEach(T=>{T.when&&Eg(T.when,g)});const _=((s=h.choices)==null?void 0:s.filter(T=>Eg(T.when,g)))||[];if(_.length===0&&!h.end){e.push({type:"UNSOLVABLE_PUZZLE",path:c,nodeId:a,description:`Игрок достигает узла '${a}', но не имеет доступных выборов для продолжения, и это не узел-концовка. Путь заблокирован.`});continue}_.forEach(T=>{const E=MH(T.effects,g);n.push({nodeId:T.to,playerState:E,path:[...c,T.to]})})}return i>=o&&(console.warn("Playtester reached max iterations. The quest might be too complex or contain an unhandled loop."),e.push({type:"UNSOLVABLE_PUZZLE",path:[],nodeId:"N/A",description:`Тестирование было остановлено из-за превышения лимита итераций (${o}). Квест может быть слишком сложным или содержать бесконечный цикл.`})),e};function PL(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var u1,DH;function vje(){if(DH)return u1;DH=1;function t(){this.__data__=[],this.size=0}return u1=t,u1}var c1,kH;function sp(){if(kH)return c1;kH=1;function t(e,n){return e===n||e!==e&&n!==n}return c1=t,c1}var f1,OH;function NE(){if(OH)return f1;OH=1;var t=sp();function e(n,r){for(var i=n.length;i--;)if(t(n[i][0],r))return i;return-1}return f1=e,f1}var d1,LH;function _je(){if(LH)return d1;LH=1;var t=NE(),e=Array.prototype,n=e.splice;function r(i){var o=this.__data__,s=t(o,i);if(s<0)return!1;var a=o.length-1;return s==a?o.pop():n.call(o,s,1),--this.size,!0}return d1=r,d1}var h1,VH;function bje(){if(VH)return h1;VH=1;var t=NE();function e(n){var r=this.__data__,i=t(r,n);return i<0?void 0:r[i][1]}return h1=e,h1}var p1,UH;function wje(){if(UH)return p1;UH=1;var t=NE();function e(n){return t(this.__data__,n)>-1}return p1=e,p1}var m1,qH;function Eje(){if(qH)return m1;qH=1;var t=NE();function e(n,r){var i=this.__data__,o=t(i,n);return o<0?(++this.size,i.push([n,r])):i[o][1]=r,this}return m1=e,m1}var g1,FH;function ME(){if(FH)return g1;FH=1;var t=vje(),e=_je(),n=bje(),r=wje(),i=Eje();function o(s){var a=-1,u=s==null?0:s.length;for(this.clear();++a<u;){var c=s[a];this.set(c[0],c[1])}}return o.prototype.clear=t,o.prototype.delete=e,o.prototype.get=n,o.prototype.has=r,o.prototype.set=i,g1=o,g1}var y1,BH;function Tje(){if(BH)return y1;BH=1;var t=ME();function e(){this.__data__=new t,this.size=0}return y1=e,y1}var v1,$H;function xje(){if($H)return v1;$H=1;function t(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r}return v1=t,v1}var _1,zH;function Sje(){if(zH)return _1;zH=1;function t(e){return this.__data__.get(e)}return _1=t,_1}var b1,HH;function Aje(){if(HH)return b1;HH=1;function t(e){return this.__data__.has(e)}return b1=t,b1}var w1,GH;function Pie(){if(GH)return w1;GH=1;var t=typeof v0=="object"&&v0&&v0.Object===Object&&v0;return w1=t,w1}var E1,jH;function ss(){if(jH)return E1;jH=1;var t=Pie(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return E1=n,E1}var T1,KH;function ap(){if(KH)return T1;KH=1;var t=ss(),e=t.Symbol;return T1=e,T1}var x1,WH;function Cje(){if(WH)return x1;WH=1;var t=ap(),e=Object.prototype,n=e.hasOwnProperty,r=e.toString,i=t?t.toStringTag:void 0;function o(s){var a=n.call(s,i),u=s[i];try{s[i]=void 0;var c=!0}catch{}var f=r.call(s);return c&&(a?s[i]=u:delete s[i]),f}return x1=o,x1}var S1,YH;function Ije(){if(YH)return S1;YH=1;var t=Object.prototype,e=t.toString;function n(r){return e.call(r)}return S1=n,S1}var A1,JH;function Ef(){if(JH)return A1;JH=1;var t=ap(),e=Cje(),n=Ije(),r="[object Null]",i="[object Undefined]",o=t?t.toStringTag:void 0;function s(a){return a==null?a===void 0?i:r:o&&o in Object(a)?e(a):n(a)}return A1=s,A1}var C1,XH;function Io(){if(XH)return C1;XH=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return C1=t,C1}var I1,QH;function Zy(){if(QH)return I1;QH=1;var t=Ef(),e=Io(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",o="[object Proxy]";function s(a){if(!e(a))return!1;var u=t(a);return u==r||u==i||u==n||u==o}return I1=s,I1}var R1,ZH;function Rje(){if(ZH)return R1;ZH=1;var t=ss(),e=t["__core-js_shared__"];return R1=e,R1}var P1,eG;function Pje(){if(eG)return P1;eG=1;var t=Rje(),e=(function(){var r=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function n(r){return!!e&&e in r}return P1=n,P1}var N1,tG;function Nie(){if(tG)return N1;tG=1;var t=Function.prototype,e=t.toString;function n(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return N1=n,N1}var M1,nG;function Nje(){if(nG)return M1;nG=1;var t=Zy(),e=Pje(),n=Io(),r=Nie(),i=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,s=Function.prototype,a=Object.prototype,u=s.toString,c=a.hasOwnProperty,f=RegExp("^"+u.call(c).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(g){if(!n(g)||e(g))return!1;var _=t(g)?f:o;return _.test(r(g))}return M1=h,M1}var D1,rG;function Mje(){if(rG)return D1;rG=1;function t(e,n){return e==null?void 0:e[n]}return D1=t,D1}var k1,iG;function Tf(){if(iG)return k1;iG=1;var t=Nje(),e=Mje();function n(r,i){var o=e(r,i);return t(o)?o:void 0}return k1=n,k1}var O1,oG;function NL(){if(oG)return O1;oG=1;var t=Tf(),e=ss(),n=t(e,"Map");return O1=n,O1}var L1,sG;function DE(){if(sG)return L1;sG=1;var t=Tf(),e=t(Object,"create");return L1=e,L1}var V1,aG;function Dje(){if(aG)return V1;aG=1;var t=DE();function e(){this.__data__=t?t(null):{},this.size=0}return V1=e,V1}var U1,lG;function kje(){if(lG)return U1;lG=1;function t(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return U1=t,U1}var q1,uG;function Oje(){if(uG)return q1;uG=1;var t=DE(),e="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(o){var s=this.__data__;if(t){var a=s[o];return a===e?void 0:a}return r.call(s,o)?s[o]:void 0}return q1=i,q1}var F1,cG;function Lje(){if(cG)return F1;cG=1;var t=DE(),e=Object.prototype,n=e.hasOwnProperty;function r(i){var o=this.__data__;return t?o[i]!==void 0:n.call(o,i)}return F1=r,F1}var B1,fG;function Vje(){if(fG)return B1;fG=1;var t=DE(),e="__lodash_hash_undefined__";function n(r,i){var o=this.__data__;return this.size+=this.has(r)?0:1,o[r]=t&&i===void 0?e:i,this}return B1=n,B1}var $1,dG;function Uje(){if(dG)return $1;dG=1;var t=Dje(),e=kje(),n=Oje(),r=Lje(),i=Vje();function o(s){var a=-1,u=s==null?0:s.length;for(this.clear();++a<u;){var c=s[a];this.set(c[0],c[1])}}return o.prototype.clear=t,o.prototype.delete=e,o.prototype.get=n,o.prototype.has=r,o.prototype.set=i,$1=o,$1}var z1,hG;function qje(){if(hG)return z1;hG=1;var t=Uje(),e=ME(),n=NL();function r(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}return z1=r,z1}var H1,pG;function Fje(){if(pG)return H1;pG=1;function t(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return H1=t,H1}var G1,mG;function kE(){if(mG)return G1;mG=1;var t=Fje();function e(n,r){var i=n.__data__;return t(r)?i[typeof r=="string"?"string":"hash"]:i.map}return G1=e,G1}var j1,gG;function Bje(){if(gG)return j1;gG=1;var t=kE();function e(n){var r=t(this,n).delete(n);return this.size-=r?1:0,r}return j1=e,j1}var K1,yG;function $je(){if(yG)return K1;yG=1;var t=kE();function e(n){return t(this,n).get(n)}return K1=e,K1}var W1,vG;function zje(){if(vG)return W1;vG=1;var t=kE();function e(n){return t(this,n).has(n)}return W1=e,W1}var Y1,_G;function Hje(){if(_G)return Y1;_G=1;var t=kE();function e(n,r){var i=t(this,n),o=i.size;return i.set(n,r),this.size+=i.size==o?0:1,this}return Y1=e,Y1}var J1,bG;function ML(){if(bG)return J1;bG=1;var t=qje(),e=Bje(),n=$je(),r=zje(),i=Hje();function o(s){var a=-1,u=s==null?0:s.length;for(this.clear();++a<u;){var c=s[a];this.set(c[0],c[1])}}return o.prototype.clear=t,o.prototype.delete=e,o.prototype.get=n,o.prototype.has=r,o.prototype.set=i,J1=o,J1}var X1,wG;function Gje(){if(wG)return X1;wG=1;var t=ME(),e=NL(),n=ML(),r=200;function i(o,s){var a=this.__data__;if(a instanceof t){var u=a.__data__;if(!e||u.length<r-1)return u.push([o,s]),this.size=++a.size,this;a=this.__data__=new n(u)}return a.set(o,s),this.size=a.size,this}return X1=i,X1}var Q1,EG;function OE(){if(EG)return Q1;EG=1;var t=ME(),e=Tje(),n=xje(),r=Sje(),i=Aje(),o=Gje();function s(a){var u=this.__data__=new t(a);this.size=u.size}return s.prototype.clear=e,s.prototype.delete=n,s.prototype.get=r,s.prototype.has=i,s.prototype.set=o,Q1=s,Q1}var Z1,TG;function DL(){if(TG)return Z1;TG=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i&&n(e[r],r,e)!==!1;);return e}return Z1=t,Z1}var eC,xG;function Mie(){if(xG)return eC;xG=1;var t=Tf(),e=(function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}})();return eC=e,eC}var tC,SG;function LE(){if(SG)return tC;SG=1;var t=Mie();function e(n,r,i){r=="__proto__"&&t?t(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return tC=e,tC}var nC,AG;function VE(){if(AG)return nC;AG=1;var t=LE(),e=sp(),n=Object.prototype,r=n.hasOwnProperty;function i(o,s,a){var u=o[s];(!(r.call(o,s)&&e(u,a))||a===void 0&&!(s in o))&&t(o,s,a)}return nC=i,nC}var rC,CG;function ev(){if(CG)return rC;CG=1;var t=VE(),e=LE();function n(r,i,o,s){var a=!o;o||(o={});for(var u=-1,c=i.length;++u<c;){var f=i[u],h=s?s(o[f],r[f],f,o,r):void 0;h===void 0&&(h=r[f]),a?e(o,f,h):t(o,f,h)}return o}return rC=n,rC}var iC,IG;function jje(){if(IG)return iC;IG=1;function t(e,n){for(var r=-1,i=Array(e);++r<e;)i[r]=n(r);return i}return iC=t,iC}var oC,RG;function Ks(){if(RG)return oC;RG=1;function t(e){return e!=null&&typeof e=="object"}return oC=t,oC}var sC,PG;function Kje(){if(PG)return sC;PG=1;var t=Ef(),e=Ks(),n="[object Arguments]";function r(i){return e(i)&&t(i)==n}return sC=r,sC}var aC,NG;function tv(){if(NG)return aC;NG=1;var t=Kje(),e=Ks(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,o=t((function(){return arguments})())?t:function(s){return e(s)&&r.call(s,"callee")&&!i.call(s,"callee")};return aC=o,aC}var lC,MG;function jn(){if(MG)return lC;MG=1;var t=Array.isArray;return lC=t,lC}var eg={exports:{}},uC,DG;function Wje(){if(DG)return uC;DG=1;function t(){return!1}return uC=t,uC}eg.exports;var kG;function lp(){return kG||(kG=1,(function(t,e){var n=ss(),r=Wje(),i=e&&!e.nodeType&&e,o=i&&!0&&t&&!t.nodeType&&t,s=o&&o.exports===i,a=s?n.Buffer:void 0,u=a?a.isBuffer:void 0,c=u||r;t.exports=c})(eg,eg.exports)),eg.exports}var cC,OG;function UE(){if(OG)return cC;OG=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(r,i){var o=typeof r;return i=i??t,!!i&&(o=="number"||o!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return cC=n,cC}var fC,LG;function kL(){if(LG)return fC;LG=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return fC=e,fC}var dC,VG;function Yje(){if(VG)return dC;VG=1;var t=Ef(),e=kL(),n=Ks(),r="[object Arguments]",i="[object Array]",o="[object Boolean]",s="[object Date]",a="[object Error]",u="[object Function]",c="[object Map]",f="[object Number]",h="[object Object]",g="[object RegExp]",_="[object Set]",T="[object String]",E="[object WeakMap]",b="[object ArrayBuffer]",S="[object DataView]",C="[object Float32Array]",R="[object Float64Array]",P="[object Int8Array]",O="[object Int16Array]",q="[object Int32Array]",D="[object Uint8Array]",L="[object Uint8ClampedArray]",N="[object Uint16Array]",U="[object Uint32Array]",V={};V[C]=V[R]=V[P]=V[O]=V[q]=V[D]=V[L]=V[N]=V[U]=!0,V[r]=V[i]=V[b]=V[o]=V[S]=V[s]=V[a]=V[u]=V[c]=V[f]=V[h]=V[g]=V[_]=V[T]=V[E]=!1;function $(F){return n(F)&&e(F.length)&&!!V[t(F)]}return dC=$,dC}var hC,UG;function qE(){if(UG)return hC;UG=1;function t(e){return function(n){return e(n)}}return hC=t,hC}var tg={exports:{}};tg.exports;var qG;function OL(){return qG||(qG=1,(function(t,e){var n=Pie(),r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===r,s=o&&n.process,a=(function(){try{var u=i&&i.require&&i.require("util").types;return u||s&&s.binding&&s.binding("util")}catch{}})();t.exports=a})(tg,tg.exports)),tg.exports}var pC,FG;function nv(){if(FG)return pC;FG=1;var t=Yje(),e=qE(),n=OL(),r=n&&n.isTypedArray,i=r?e(r):t;return pC=i,pC}var mC,BG;function Die(){if(BG)return mC;BG=1;var t=jje(),e=tv(),n=jn(),r=lp(),i=UE(),o=nv(),s=Object.prototype,a=s.hasOwnProperty;function u(c,f){var h=n(c),g=!h&&e(c),_=!h&&!g&&r(c),T=!h&&!g&&!_&&o(c),E=h||g||_||T,b=E?t(c.length,String):[],S=b.length;for(var C in c)(f||a.call(c,C))&&!(E&&(C=="length"||_&&(C=="offset"||C=="parent")||T&&(C=="buffer"||C=="byteLength"||C=="byteOffset")||i(C,S)))&&b.push(C);return b}return mC=u,mC}var gC,$G;function FE(){if($G)return gC;$G=1;var t=Object.prototype;function e(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||t;return n===i}return gC=e,gC}var yC,zG;function kie(){if(zG)return yC;zG=1;function t(e,n){return function(r){return e(n(r))}}return yC=t,yC}var vC,HG;function Jje(){if(HG)return vC;HG=1;var t=kie(),e=t(Object.keys,Object);return vC=e,vC}var _C,GG;function LL(){if(GG)return _C;GG=1;var t=FE(),e=Jje(),n=Object.prototype,r=n.hasOwnProperty;function i(o){if(!t(o))return e(o);var s=[];for(var a in Object(o))r.call(o,a)&&a!="constructor"&&s.push(a);return s}return _C=i,_C}var bC,jG;function al(){if(jG)return bC;jG=1;var t=Zy(),e=kL();function n(r){return r!=null&&e(r.length)&&!t(r)}return bC=n,bC}var wC,KG;function Du(){if(KG)return wC;KG=1;var t=Die(),e=LL(),n=al();function r(i){return n(i)?t(i):e(i)}return wC=r,wC}var EC,WG;function Xje(){if(WG)return EC;WG=1;var t=ev(),e=Du();function n(r,i){return r&&t(i,e(i),r)}return EC=n,EC}var TC,YG;function Qje(){if(YG)return TC;YG=1;function t(e){var n=[];if(e!=null)for(var r in Object(e))n.push(r);return n}return TC=t,TC}var xC,JG;function Zje(){if(JG)return xC;JG=1;var t=Io(),e=FE(),n=Qje(),r=Object.prototype,i=r.hasOwnProperty;function o(s){if(!t(s))return n(s);var a=e(s),u=[];for(var c in s)c=="constructor"&&(a||!i.call(s,c))||u.push(c);return u}return xC=o,xC}var SC,XG;function xf(){if(XG)return SC;XG=1;var t=Die(),e=Zje(),n=al();function r(i){return n(i)?t(i,!0):e(i)}return SC=r,SC}var AC,QG;function e8e(){if(QG)return AC;QG=1;var t=ev(),e=xf();function n(r,i){return r&&t(i,e(i),r)}return AC=n,AC}var ng={exports:{}};ng.exports;var ZG;function Oie(){return ZG||(ZG=1,(function(t,e){var n=ss(),r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===r,s=o?n.Buffer:void 0,a=s?s.allocUnsafe:void 0;function u(c,f){if(f)return c.slice();var h=c.length,g=a?a(h):new c.constructor(h);return c.copy(g),g}t.exports=u})(ng,ng.exports)),ng.exports}var CC,ej;function Lie(){if(ej)return CC;ej=1;function t(e,n){var r=-1,i=e.length;for(n||(n=Array(i));++r<i;)n[r]=e[r];return n}return CC=t,CC}var IC,tj;function Vie(){if(tj)return IC;tj=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,o=0,s=[];++r<i;){var a=e[r];n(a,r,e)&&(s[o++]=a)}return s}return IC=t,IC}var RC,nj;function Uie(){if(nj)return RC;nj=1;function t(){return[]}return RC=t,RC}var PC,rj;function VL(){if(rj)return PC;rj=1;var t=Vie(),e=Uie(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,o=i?function(s){return s==null?[]:(s=Object(s),t(i(s),function(a){return r.call(s,a)}))}:e;return PC=o,PC}var NC,ij;function t8e(){if(ij)return NC;ij=1;var t=ev(),e=VL();function n(r,i){return t(r,e(r),i)}return NC=n,NC}var MC,oj;function UL(){if(oj)return MC;oj=1;function t(e,n){for(var r=-1,i=n.length,o=e.length;++r<i;)e[o+r]=n[r];return e}return MC=t,MC}var DC,sj;function BE(){if(sj)return DC;sj=1;var t=kie(),e=t(Object.getPrototypeOf,Object);return DC=e,DC}var kC,aj;function qie(){if(aj)return kC;aj=1;var t=UL(),e=BE(),n=VL(),r=Uie(),i=Object.getOwnPropertySymbols,o=i?function(s){for(var a=[];s;)t(a,n(s)),s=e(s);return a}:r;return kC=o,kC}var OC,lj;function n8e(){if(lj)return OC;lj=1;var t=ev(),e=qie();function n(r,i){return t(r,e(r),i)}return OC=n,OC}var LC,uj;function Fie(){if(uj)return LC;uj=1;var t=UL(),e=jn();function n(r,i,o){var s=i(r);return e(r)?s:t(s,o(r))}return LC=n,LC}var VC,cj;function Bie(){if(cj)return VC;cj=1;var t=Fie(),e=VL(),n=Du();function r(i){return t(i,n,e)}return VC=r,VC}var UC,fj;function r8e(){if(fj)return UC;fj=1;var t=Fie(),e=qie(),n=xf();function r(i){return t(i,n,e)}return UC=r,UC}var qC,dj;function i8e(){if(dj)return qC;dj=1;var t=Tf(),e=ss(),n=t(e,"DataView");return qC=n,qC}var FC,hj;function o8e(){if(hj)return FC;hj=1;var t=Tf(),e=ss(),n=t(e,"Promise");return FC=n,FC}var BC,pj;function $ie(){if(pj)return BC;pj=1;var t=Tf(),e=ss(),n=t(e,"Set");return BC=n,BC}var $C,mj;function s8e(){if(mj)return $C;mj=1;var t=Tf(),e=ss(),n=t(e,"WeakMap");return $C=n,$C}var zC,gj;function up(){if(gj)return zC;gj=1;var t=i8e(),e=NL(),n=o8e(),r=$ie(),i=s8e(),o=Ef(),s=Nie(),a="[object Map]",u="[object Object]",c="[object Promise]",f="[object Set]",h="[object WeakMap]",g="[object DataView]",_=s(t),T=s(e),E=s(n),b=s(r),S=s(i),C=o;return(t&&C(new t(new ArrayBuffer(1)))!=g||e&&C(new e)!=a||n&&C(n.resolve())!=c||r&&C(new r)!=f||i&&C(new i)!=h)&&(C=function(R){var P=o(R),O=P==u?R.constructor:void 0,q=O?s(O):"";if(q)switch(q){case _:return g;case T:return a;case E:return c;case b:return f;case S:return h}return P}),zC=C,zC}var HC,yj;function a8e(){if(yj)return HC;yj=1;var t=Object.prototype,e=t.hasOwnProperty;function n(r){var i=r.length,o=new r.constructor(i);return i&&typeof r[0]=="string"&&e.call(r,"index")&&(o.index=r.index,o.input=r.input),o}return HC=n,HC}var GC,vj;function zie(){if(vj)return GC;vj=1;var t=ss(),e=t.Uint8Array;return GC=e,GC}var jC,_j;function qL(){if(_j)return jC;_j=1;var t=zie();function e(n){var r=new n.constructor(n.byteLength);return new t(r).set(new t(n)),r}return jC=e,jC}var KC,bj;function l8e(){if(bj)return KC;bj=1;var t=qL();function e(n,r){var i=r?t(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return KC=e,KC}var WC,wj;function u8e(){if(wj)return WC;wj=1;var t=/\w*$/;function e(n){var r=new n.constructor(n.source,t.exec(n));return r.lastIndex=n.lastIndex,r}return WC=e,WC}var YC,Ej;function c8e(){if(Ej)return YC;Ej=1;var t=ap(),e=t?t.prototype:void 0,n=e?e.valueOf:void 0;function r(i){return n?Object(n.call(i)):{}}return YC=r,YC}var JC,Tj;function Hie(){if(Tj)return JC;Tj=1;var t=qL();function e(n,r){var i=r?t(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)}return JC=e,JC}var XC,xj;function f8e(){if(xj)return XC;xj=1;var t=qL(),e=l8e(),n=u8e(),r=c8e(),i=Hie(),o="[object Boolean]",s="[object Date]",a="[object Map]",u="[object Number]",c="[object RegExp]",f="[object Set]",h="[object String]",g="[object Symbol]",_="[object ArrayBuffer]",T="[object DataView]",E="[object Float32Array]",b="[object Float64Array]",S="[object Int8Array]",C="[object Int16Array]",R="[object Int32Array]",P="[object Uint8Array]",O="[object Uint8ClampedArray]",q="[object Uint16Array]",D="[object Uint32Array]";function L(N,U,V){var $=N.constructor;switch(U){case _:return t(N);case o:case s:return new $(+N);case T:return e(N,V);case E:case b:case S:case C:case R:case P:case O:case q:case D:return i(N,V);case a:return new $;case u:case h:return new $(N);case c:return n(N);case f:return new $;case g:return r(N)}}return XC=L,XC}var QC,Sj;function Gie(){if(Sj)return QC;Sj=1;var t=Io(),e=Object.create,n=(function(){function r(){}return function(i){if(!t(i))return{};if(e)return e(i);r.prototype=i;var o=new r;return r.prototype=void 0,o}})();return QC=n,QC}var ZC,Aj;function jie(){if(Aj)return ZC;Aj=1;var t=Gie(),e=BE(),n=FE();function r(i){return typeof i.constructor=="function"&&!n(i)?t(e(i)):{}}return ZC=r,ZC}var eI,Cj;function d8e(){if(Cj)return eI;Cj=1;var t=up(),e=Ks(),n="[object Map]";function r(i){return e(i)&&t(i)==n}return eI=r,eI}var tI,Ij;function h8e(){if(Ij)return tI;Ij=1;var t=d8e(),e=qE(),n=OL(),r=n&&n.isMap,i=r?e(r):t;return tI=i,tI}var nI,Rj;function p8e(){if(Rj)return nI;Rj=1;var t=up(),e=Ks(),n="[object Set]";function r(i){return e(i)&&t(i)==n}return nI=r,nI}var rI,Pj;function m8e(){if(Pj)return rI;Pj=1;var t=p8e(),e=qE(),n=OL(),r=n&&n.isSet,i=r?e(r):t;return rI=i,rI}var iI,Nj;function Kie(){if(Nj)return iI;Nj=1;var t=OE(),e=DL(),n=VE(),r=Xje(),i=e8e(),o=Oie(),s=Lie(),a=t8e(),u=n8e(),c=Bie(),f=r8e(),h=up(),g=a8e(),_=f8e(),T=jie(),E=jn(),b=lp(),S=h8e(),C=Io(),R=m8e(),P=Du(),O=xf(),q=1,D=2,L=4,N="[object Arguments]",U="[object Array]",V="[object Boolean]",$="[object Date]",F="[object Error]",H="[object Function]",X="[object GeneratorFunction]",K="[object Map]",te="[object Number]",re="[object Object]",Y="[object RegExp]",G="[object Set]",Q="[object String]",Z="[object Symbol]",fe="[object WeakMap]",J="[object ArrayBuffer]",ne="[object DataView]",oe="[object Float32Array]",_e="[object Float64Array]",Ce="[object Int8Array]",ye="[object Int16Array]",Ie="[object Int32Array]",Le="[object Uint8Array]",be="[object Uint8ClampedArray]",Qe="[object Uint16Array]",Be="[object Uint32Array]",Ve={};Ve[N]=Ve[U]=Ve[J]=Ve[ne]=Ve[V]=Ve[$]=Ve[oe]=Ve[_e]=Ve[Ce]=Ve[ye]=Ve[Ie]=Ve[K]=Ve[te]=Ve[re]=Ve[Y]=Ve[G]=Ve[Q]=Ve[Z]=Ve[Le]=Ve[be]=Ve[Qe]=Ve[Be]=!0,Ve[F]=Ve[H]=Ve[fe]=!1;function at(Pe,qe,ot,Tt,En,Nn){var Rt,Mn=qe&q,Te=qe&D,ke=qe&L;if(ot&&(Rt=En?ot(Pe,Tt,En,Nn):ot(Pe)),Rt!==void 0)return Rt;if(!C(Pe))return Pe;var Ue=E(Pe);if(Ue){if(Rt=g(Pe),!Mn)return s(Pe,Rt)}else{var Oe=h(Pe),Ye=Oe==H||Oe==X;if(b(Pe))return o(Pe,Mn);if(Oe==re||Oe==N||Ye&&!En){if(Rt=Te||Ye?{}:T(Pe),!Mn)return Te?u(Pe,i(Rt,Pe)):a(Pe,r(Rt,Pe))}else{if(!Ve[Oe])return En?Pe:{};Rt=_(Pe,Oe,Mn)}}Nn||(Nn=new t);var Ct=Nn.get(Pe);if(Ct)return Ct;Nn.set(Pe,Rt),R(Pe)?Pe.forEach(function(lt){Rt.add(at(lt,qe,ot,lt,Pe,Nn))}):S(Pe)&&Pe.forEach(function(lt,wt){Rt.set(wt,at(lt,qe,ot,wt,Pe,Nn))});var Pt=ke?Te?f:c:Te?O:P,Ft=Ue?void 0:Pt(Pe);return e(Ft||Pe,function(lt,wt){Ft&&(wt=lt,lt=Pe[wt]),n(Rt,wt,at(lt,qe,ot,wt,Pe,Nn))}),Rt}return iI=at,iI}var oI,Mj;function g8e(){if(Mj)return oI;Mj=1;var t=Kie(),e=4;function n(r){return t(r,e)}return oI=n,oI}var sI,Dj;function FL(){if(Dj)return sI;Dj=1;function t(e){return function(){return e}}return sI=t,sI}var aI,kj;function y8e(){if(kj)return aI;kj=1;function t(e){return function(n,r,i){for(var o=-1,s=Object(n),a=i(n),u=a.length;u--;){var c=a[e?u:++o];if(r(s[c],c,s)===!1)break}return n}}return aI=t,aI}var lI,Oj;function BL(){if(Oj)return lI;Oj=1;var t=y8e(),e=t();return lI=e,lI}var uI,Lj;function $L(){if(Lj)return uI;Lj=1;var t=BL(),e=Du();function n(r,i){return r&&t(r,i,e)}return uI=n,uI}var cI,Vj;function v8e(){if(Vj)return cI;Vj=1;var t=al();function e(n,r){return function(i,o){if(i==null)return i;if(!t(i))return n(i,o);for(var s=i.length,a=r?s:-1,u=Object(i);(r?a--:++a<s)&&o(u[a],a,u)!==!1;);return i}}return cI=e,cI}var fI,Uj;function $E(){if(Uj)return fI;Uj=1;var t=$L(),e=v8e(),n=e(t);return fI=n,fI}var dI,qj;function Sf(){if(qj)return dI;qj=1;function t(e){return e}return dI=t,dI}var hI,Fj;function Wie(){if(Fj)return hI;Fj=1;var t=Sf();function e(n){return typeof n=="function"?n:t}return hI=e,hI}var pI,Bj;function Yie(){if(Bj)return pI;Bj=1;var t=DL(),e=$E(),n=Wie(),r=jn();function i(o,s){var a=r(o)?t:e;return a(o,n(s))}return pI=i,pI}var mI,$j;function Jie(){return $j||($j=1,mI=Yie()),mI}var gI,zj;function _8e(){if(zj)return gI;zj=1;var t=$E();function e(n,r){var i=[];return t(n,function(o,s,a){r(o,s,a)&&i.push(o)}),i}return gI=e,gI}var yI,Hj;function b8e(){if(Hj)return yI;Hj=1;var t="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,t),this}return yI=e,yI}var vI,Gj;function w8e(){if(Gj)return vI;Gj=1;function t(e){return this.__data__.has(e)}return vI=t,vI}var _I,jj;function Xie(){if(jj)return _I;jj=1;var t=ML(),e=b8e(),n=w8e();function r(i){var o=-1,s=i==null?0:i.length;for(this.__data__=new t;++o<s;)this.add(i[o])}return r.prototype.add=r.prototype.push=e,r.prototype.has=n,_I=r,_I}var bI,Kj;function E8e(){if(Kj)return bI;Kj=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(e[r],r,e))return!0;return!1}return bI=t,bI}var wI,Wj;function Qie(){if(Wj)return wI;Wj=1;function t(e,n){return e.has(n)}return wI=t,wI}var EI,Yj;function Zie(){if(Yj)return EI;Yj=1;var t=Xie(),e=E8e(),n=Qie(),r=1,i=2;function o(s,a,u,c,f,h){var g=u&r,_=s.length,T=a.length;if(_!=T&&!(g&&T>_))return!1;var E=h.get(s),b=h.get(a);if(E&&b)return E==a&&b==s;var S=-1,C=!0,R=u&i?new t:void 0;for(h.set(s,a),h.set(a,s);++S<_;){var P=s[S],O=a[S];if(c)var q=g?c(O,P,S,a,s,h):c(P,O,S,s,a,h);if(q!==void 0){if(q)continue;C=!1;break}if(R){if(!e(a,function(D,L){if(!n(R,L)&&(P===D||f(P,D,u,c,h)))return R.push(L)})){C=!1;break}}else if(!(P===O||f(P,O,u,c,h))){C=!1;break}}return h.delete(s),h.delete(a),C}return EI=o,EI}var TI,Jj;function T8e(){if(Jj)return TI;Jj=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i,o){r[++n]=[o,i]}),r}return TI=t,TI}var xI,Xj;function zL(){if(Xj)return xI;Xj=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i){r[++n]=i}),r}return xI=t,xI}var SI,Qj;function x8e(){if(Qj)return SI;Qj=1;var t=ap(),e=zie(),n=sp(),r=Zie(),i=T8e(),o=zL(),s=1,a=2,u="[object Boolean]",c="[object Date]",f="[object Error]",h="[object Map]",g="[object Number]",_="[object RegExp]",T="[object Set]",E="[object String]",b="[object Symbol]",S="[object ArrayBuffer]",C="[object DataView]",R=t?t.prototype:void 0,P=R?R.valueOf:void 0;function O(q,D,L,N,U,V,$){switch(L){case C:if(q.byteLength!=D.byteLength||q.byteOffset!=D.byteOffset)return!1;q=q.buffer,D=D.buffer;case S:return!(q.byteLength!=D.byteLength||!V(new e(q),new e(D)));case u:case c:case g:return n(+q,+D);case f:return q.name==D.name&&q.message==D.message;case _:case E:return q==D+"";case h:var F=i;case T:var H=N&s;if(F||(F=o),q.size!=D.size&&!H)return!1;var X=$.get(q);if(X)return X==D;N|=a,$.set(q,D);var K=r(F(q),F(D),N,U,V,$);return $.delete(q),K;case b:if(P)return P.call(q)==P.call(D)}return!1}return SI=O,SI}var AI,Zj;function S8e(){if(Zj)return AI;Zj=1;var t=Bie(),e=1,n=Object.prototype,r=n.hasOwnProperty;function i(o,s,a,u,c,f){var h=a&e,g=t(o),_=g.length,T=t(s),E=T.length;if(_!=E&&!h)return!1;for(var b=_;b--;){var S=g[b];if(!(h?S in s:r.call(s,S)))return!1}var C=f.get(o),R=f.get(s);if(C&&R)return C==s&&R==o;var P=!0;f.set(o,s),f.set(s,o);for(var O=h;++b<_;){S=g[b];var q=o[S],D=s[S];if(u)var L=h?u(D,q,S,s,o,f):u(q,D,S,o,s,f);if(!(L===void 0?q===D||c(q,D,a,u,f):L)){P=!1;break}O||(O=S=="constructor")}if(P&&!O){var N=o.constructor,U=s.constructor;N!=U&&"constructor"in o&&"constructor"in s&&!(typeof N=="function"&&N instanceof N&&typeof U=="function"&&U instanceof U)&&(P=!1)}return f.delete(o),f.delete(s),P}return AI=i,AI}var CI,e8;function A8e(){if(e8)return CI;e8=1;var t=OE(),e=Zie(),n=x8e(),r=S8e(),i=up(),o=jn(),s=lp(),a=nv(),u=1,c="[object Arguments]",f="[object Array]",h="[object Object]",g=Object.prototype,_=g.hasOwnProperty;function T(E,b,S,C,R,P){var O=o(E),q=o(b),D=O?f:i(E),L=q?f:i(b);D=D==c?h:D,L=L==c?h:L;var N=D==h,U=L==h,V=D==L;if(V&&s(E)){if(!s(b))return!1;O=!0,N=!1}if(V&&!N)return P||(P=new t),O||a(E)?e(E,b,S,C,R,P):n(E,b,D,S,C,R,P);if(!(S&u)){var $=N&&_.call(E,"__wrapped__"),F=U&&_.call(b,"__wrapped__");if($||F){var H=$?E.value():E,X=F?b.value():b;return P||(P=new t),R(H,X,S,C,P)}}return V?(P||(P=new t),r(E,b,S,C,R,P)):!1}return CI=T,CI}var II,t8;function eoe(){if(t8)return II;t8=1;var t=A8e(),e=Ks();function n(r,i,o,s,a){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:t(r,i,o,s,n,a)}return II=n,II}var RI,n8;function C8e(){if(n8)return RI;n8=1;var t=OE(),e=eoe(),n=1,r=2;function i(o,s,a,u){var c=a.length,f=c,h=!u;if(o==null)return!f;for(o=Object(o);c--;){var g=a[c];if(h&&g[2]?g[1]!==o[g[0]]:!(g[0]in o))return!1}for(;++c<f;){g=a[c];var _=g[0],T=o[_],E=g[1];if(h&&g[2]){if(T===void 0&&!(_ in o))return!1}else{var b=new t;if(u)var S=u(T,E,_,o,s,b);if(!(S===void 0?e(E,T,n|r,u,b):S))return!1}}return!0}return RI=i,RI}var PI,r8;function toe(){if(r8)return PI;r8=1;var t=Io();function e(n){return n===n&&!t(n)}return PI=e,PI}var NI,i8;function I8e(){if(i8)return NI;i8=1;var t=toe(),e=Du();function n(r){for(var i=e(r),o=i.length;o--;){var s=i[o],a=r[s];i[o]=[s,a,t(a)]}return i}return NI=n,NI}var MI,o8;function noe(){if(o8)return MI;o8=1;function t(e,n){return function(r){return r==null?!1:r[e]===n&&(n!==void 0||e in Object(r))}}return MI=t,MI}var DI,s8;function R8e(){if(s8)return DI;s8=1;var t=C8e(),e=I8e(),n=noe();function r(i){var o=e(i);return o.length==1&&o[0][2]?n(o[0][0],o[0][1]):function(s){return s===i||t(s,i,o)}}return DI=r,DI}var kI,a8;function cp(){if(a8)return kI;a8=1;var t=Ef(),e=Ks(),n="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&t(i)==n}return kI=r,kI}var OI,l8;function HL(){if(l8)return OI;l8=1;var t=jn(),e=cp(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(o,s){if(t(o))return!1;var a=typeof o;return a=="number"||a=="symbol"||a=="boolean"||o==null||e(o)?!0:r.test(o)||!n.test(o)||s!=null&&o in Object(s)}return OI=i,OI}var LI,u8;function P8e(){if(u8)return LI;u8=1;var t=ML(),e="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var o=function(){var s=arguments,a=i?i.apply(this,s):s[0],u=o.cache;if(u.has(a))return u.get(a);var c=r.apply(this,s);return o.cache=u.set(a,c)||u,c};return o.cache=new(n.Cache||t),o}return n.Cache=t,LI=n,LI}var VI,c8;function N8e(){if(c8)return VI;c8=1;var t=P8e(),e=500;function n(r){var i=t(r,function(s){return o.size===e&&o.clear(),s}),o=i.cache;return i}return VI=n,VI}var UI,f8;function M8e(){if(f8)return UI;f8=1;var t=N8e(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=t(function(i){var o=[];return i.charCodeAt(0)===46&&o.push(""),i.replace(e,function(s,a,u,c){o.push(u?c.replace(n,"$1"):a||s)}),o});return UI=r,UI}var qI,d8;function zE(){if(d8)return qI;d8=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,o=Array(i);++r<i;)o[r]=n(e[r],r,e);return o}return qI=t,qI}var FI,h8;function D8e(){if(h8)return FI;h8=1;var t=ap(),e=zE(),n=jn(),r=cp(),i=t?t.prototype:void 0,o=i?i.toString:void 0;function s(a){if(typeof a=="string")return a;if(n(a))return e(a,s)+"";if(r(a))return o?o.call(a):"";var u=a+"";return u=="0"&&1/a==-1/0?"-0":u}return FI=s,FI}var BI,p8;function roe(){if(p8)return BI;p8=1;var t=D8e();function e(n){return n==null?"":t(n)}return BI=e,BI}var $I,m8;function HE(){if(m8)return $I;m8=1;var t=jn(),e=HL(),n=M8e(),r=roe();function i(o,s){return t(o)?o:e(o,s)?[o]:n(r(o))}return $I=i,$I}var zI,g8;function rv(){if(g8)return zI;g8=1;var t=cp();function e(n){if(typeof n=="string"||t(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return zI=e,zI}var HI,y8;function GE(){if(y8)return HI;y8=1;var t=HE(),e=rv();function n(r,i){i=t(i,r);for(var o=0,s=i.length;r!=null&&o<s;)r=r[e(i[o++])];return o&&o==s?r:void 0}return HI=n,HI}var GI,v8;function k8e(){if(v8)return GI;v8=1;var t=GE();function e(n,r,i){var o=n==null?void 0:t(n,r);return o===void 0?i:o}return GI=e,GI}var jI,_8;function O8e(){if(_8)return jI;_8=1;function t(e,n){return e!=null&&n in Object(e)}return jI=t,jI}var KI,b8;function ioe(){if(b8)return KI;b8=1;var t=HE(),e=tv(),n=jn(),r=UE(),i=kL(),o=rv();function s(a,u,c){u=t(u,a);for(var f=-1,h=u.length,g=!1;++f<h;){var _=o(u[f]);if(!(g=a!=null&&c(a,_)))break;a=a[_]}return g||++f!=h?g:(h=a==null?0:a.length,!!h&&i(h)&&r(_,h)&&(n(a)||e(a)))}return KI=s,KI}var WI,w8;function ooe(){if(w8)return WI;w8=1;var t=O8e(),e=ioe();function n(r,i){return r!=null&&e(r,i,t)}return WI=n,WI}var YI,E8;function L8e(){if(E8)return YI;E8=1;var t=eoe(),e=k8e(),n=ooe(),r=HL(),i=toe(),o=noe(),s=rv(),a=1,u=2;function c(f,h){return r(f)&&i(h)?o(s(f),h):function(g){var _=e(g,f);return _===void 0&&_===h?n(g,f):t(h,_,a|u)}}return YI=c,YI}var JI,T8;function soe(){if(T8)return JI;T8=1;function t(e){return function(n){return n==null?void 0:n[e]}}return JI=t,JI}var XI,x8;function V8e(){if(x8)return XI;x8=1;var t=GE();function e(n){return function(r){return t(r,n)}}return XI=e,XI}var QI,S8;function U8e(){if(S8)return QI;S8=1;var t=soe(),e=V8e(),n=HL(),r=rv();function i(o){return n(o)?t(r(o)):e(o)}return QI=i,QI}var ZI,A8;function ll(){if(A8)return ZI;A8=1;var t=R8e(),e=L8e(),n=Sf(),r=jn(),i=U8e();function o(s){return typeof s=="function"?s:s==null?n:typeof s=="object"?r(s)?e(s[0],s[1]):t(s):i(s)}return ZI=o,ZI}var eR,C8;function aoe(){if(C8)return eR;C8=1;var t=Vie(),e=_8e(),n=ll(),r=jn();function i(o,s){var a=r(o)?t:e;return a(o,n(s,3))}return eR=i,eR}var tR,I8;function q8e(){if(I8)return tR;I8=1;var t=Object.prototype,e=t.hasOwnProperty;function n(r,i){return r!=null&&e.call(r,i)}return tR=n,tR}var nR,R8;function loe(){if(R8)return nR;R8=1;var t=q8e(),e=ioe();function n(r,i){return r!=null&&e(r,i,t)}return nR=n,nR}var rR,P8;function F8e(){if(P8)return rR;P8=1;var t=LL(),e=up(),n=tv(),r=jn(),i=al(),o=lp(),s=FE(),a=nv(),u="[object Map]",c="[object Set]",f=Object.prototype,h=f.hasOwnProperty;function g(_){if(_==null)return!0;if(i(_)&&(r(_)||typeof _=="string"||typeof _.splice=="function"||o(_)||a(_)||n(_)))return!_.length;var T=e(_);if(T==u||T==c)return!_.size;if(s(_))return!t(_).length;for(var E in _)if(h.call(_,E))return!1;return!0}return rR=g,rR}var iR,N8;function uoe(){if(N8)return iR;N8=1;function t(e){return e===void 0}return iR=t,iR}var oR,M8;function coe(){if(M8)return oR;M8=1;var t=$E(),e=al();function n(r,i){var o=-1,s=e(r)?Array(r.length):[];return t(r,function(a,u,c){s[++o]=i(a,u,c)}),s}return oR=n,oR}var sR,D8;function foe(){if(D8)return sR;D8=1;var t=zE(),e=ll(),n=coe(),r=jn();function i(o,s){var a=r(o)?t:n;return a(o,e(s,3))}return sR=i,sR}var aR,k8;function B8e(){if(k8)return aR;k8=1;function t(e,n,r,i){var o=-1,s=e==null?0:e.length;for(i&&s&&(r=e[++o]);++o<s;)r=n(r,e[o],o,e);return r}return aR=t,aR}var lR,O8;function $8e(){if(O8)return lR;O8=1;function t(e,n,r,i,o){return o(e,function(s,a,u){r=i?(i=!1,s):n(r,s,a,u)}),r}return lR=t,lR}var uR,L8;function doe(){if(L8)return uR;L8=1;var t=B8e(),e=$E(),n=ll(),r=$8e(),i=jn();function o(s,a,u){var c=i(s)?t:r,f=arguments.length<3;return c(s,n(a,4),u,f,e)}return uR=o,uR}var cR,V8;function z8e(){if(V8)return cR;V8=1;var t=Ef(),e=jn(),n=Ks(),r="[object String]";function i(o){return typeof o=="string"||!e(o)&&n(o)&&t(o)==r}return cR=i,cR}var fR,U8;function H8e(){if(U8)return fR;U8=1;var t=soe(),e=t("length");return fR=e,fR}var dR,q8;function G8e(){if(q8)return dR;q8=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,o="\\ufe0e\\ufe0f",s="\\u200d",a=RegExp("["+s+t+i+o+"]");function u(c){return a.test(c)}return dR=u,dR}var hR,F8;function j8e(){if(F8)return hR;F8=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,o="\\ufe0e\\ufe0f",s="["+t+"]",a="["+i+"]",u="\\ud83c[\\udffb-\\udfff]",c="(?:"+a+"|"+u+")",f="[^"+t+"]",h="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",_="\\u200d",T=c+"?",E="["+o+"]?",b="(?:"+_+"(?:"+[f,h,g].join("|")+")"+E+T+")*",S=E+T+b,C="(?:"+[f+a+"?",a,h,g,s].join("|")+")",R=RegExp(u+"(?="+u+")|"+C+S,"g");function P(O){for(var q=R.lastIndex=0;R.test(O);)++q;return q}return hR=P,hR}var pR,B8;function K8e(){if(B8)return pR;B8=1;var t=H8e(),e=G8e(),n=j8e();function r(i){return e(i)?n(i):t(i)}return pR=r,pR}var mR,$8;function W8e(){if($8)return mR;$8=1;var t=LL(),e=up(),n=al(),r=z8e(),i=K8e(),o="[object Map]",s="[object Set]";function a(u){if(u==null)return 0;if(n(u))return r(u)?i(u):u.length;var c=e(u);return c==o||c==s?u.size:t(u).length}return mR=a,mR}var gR,z8;function Y8e(){if(z8)return gR;z8=1;var t=DL(),e=Gie(),n=$L(),r=ll(),i=BE(),o=jn(),s=lp(),a=Zy(),u=Io(),c=nv();function f(h,g,_){var T=o(h),E=T||s(h)||c(h);if(g=r(g,4),_==null){var b=h&&h.constructor;E?_=T?new b:[]:u(h)?_=a(b)?e(i(h)):{}:_={}}return(E?t:n)(h,function(S,C,R){return g(_,S,C,R)}),_}return gR=f,gR}var yR,H8;function J8e(){if(H8)return yR;H8=1;var t=ap(),e=tv(),n=jn(),r=t?t.isConcatSpreadable:void 0;function i(o){return n(o)||e(o)||!!(r&&o&&o[r])}return yR=i,yR}var vR,G8;function GL(){if(G8)return vR;G8=1;var t=UL(),e=J8e();function n(r,i,o,s,a){var u=-1,c=r.length;for(o||(o=e),a||(a=[]);++u<c;){var f=r[u];i>0&&o(f)?i>1?n(f,i-1,o,s,a):t(a,f):s||(a[a.length]=f)}return a}return vR=n,vR}var _R,j8;function X8e(){if(j8)return _R;j8=1;function t(e,n,r){switch(r.length){case 0:return e.call(n);case 1:return e.call(n,r[0]);case 2:return e.call(n,r[0],r[1]);case 3:return e.call(n,r[0],r[1],r[2])}return e.apply(n,r)}return _R=t,_R}var bR,K8;function hoe(){if(K8)return bR;K8=1;var t=X8e(),e=Math.max;function n(r,i,o){return i=e(i===void 0?r.length-1:i,0),function(){for(var s=arguments,a=-1,u=e(s.length-i,0),c=Array(u);++a<u;)c[a]=s[i+a];a=-1;for(var f=Array(i+1);++a<i;)f[a]=s[a];return f[i]=o(c),t(r,this,f)}}return bR=n,bR}var wR,W8;function Q8e(){if(W8)return wR;W8=1;var t=FL(),e=Mie(),n=Sf(),r=e?function(i,o){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(o),writable:!0})}:n;return wR=r,wR}var ER,Y8;function Z8e(){if(Y8)return ER;Y8=1;var t=800,e=16,n=Date.now;function r(i){var o=0,s=0;return function(){var a=n(),u=e-(a-s);if(s=a,u>0){if(++o>=t)return arguments[0]}else o=0;return i.apply(void 0,arguments)}}return ER=r,ER}var TR,J8;function poe(){if(J8)return TR;J8=1;var t=Q8e(),e=Z8e(),n=e(t);return TR=n,TR}var xR,X8;function jE(){if(X8)return xR;X8=1;var t=Sf(),e=hoe(),n=poe();function r(i,o){return n(e(i,o,t),i+"")}return xR=r,xR}var SR,Q8;function moe(){if(Q8)return SR;Q8=1;function t(e,n,r,i){for(var o=e.length,s=r+(i?1:-1);i?s--:++s<o;)if(n(e[s],s,e))return s;return-1}return SR=t,SR}var AR,Z8;function e9e(){if(Z8)return AR;Z8=1;function t(e){return e!==e}return AR=t,AR}var CR,e9;function t9e(){if(e9)return CR;e9=1;function t(e,n,r){for(var i=r-1,o=e.length;++i<o;)if(e[i]===n)return i;return-1}return CR=t,CR}var IR,t9;function n9e(){if(t9)return IR;t9=1;var t=moe(),e=e9e(),n=t9e();function r(i,o,s){return o===o?n(i,o,s):t(i,e,s)}return IR=r,IR}var RR,n9;function r9e(){if(n9)return RR;n9=1;var t=n9e();function e(n,r){var i=n==null?0:n.length;return!!i&&t(n,r,0)>-1}return RR=e,RR}var PR,r9;function i9e(){if(r9)return PR;r9=1;function t(e,n,r){for(var i=-1,o=e==null?0:e.length;++i<o;)if(r(n,e[i]))return!0;return!1}return PR=t,PR}var NR,i9;function o9e(){if(i9)return NR;i9=1;function t(){}return NR=t,NR}var MR,o9;function s9e(){if(o9)return MR;o9=1;var t=$ie(),e=o9e(),n=zL(),r=1/0,i=t&&1/n(new t([,-0]))[1]==r?function(o){return new t(o)}:e;return MR=i,MR}var DR,s9;function a9e(){if(s9)return DR;s9=1;var t=Xie(),e=r9e(),n=i9e(),r=Qie(),i=s9e(),o=zL(),s=200;function a(u,c,f){var h=-1,g=e,_=u.length,T=!0,E=[],b=E;if(f)T=!1,g=n;else if(_>=s){var S=c?null:i(u);if(S)return o(S);T=!1,g=r,b=new t}else b=c?[]:E;e:for(;++h<_;){var C=u[h],R=c?c(C):C;if(C=f||C!==0?C:0,T&&R===R){for(var P=b.length;P--;)if(b[P]===R)continue e;c&&b.push(R),E.push(C)}else g(b,R,f)||(b!==E&&b.push(R),E.push(C))}return E}return DR=a,DR}var kR,a9;function goe(){if(a9)return kR;a9=1;var t=al(),e=Ks();function n(r){return e(r)&&t(r)}return kR=n,kR}var OR,l9;function l9e(){if(l9)return OR;l9=1;var t=GL(),e=jE(),n=a9e(),r=goe(),i=e(function(o){return n(t(o,1,r,!0))});return OR=i,OR}var LR,u9;function u9e(){if(u9)return LR;u9=1;var t=zE();function e(n,r){return t(r,function(i){return n[i]})}return LR=e,LR}var VR,c9;function yoe(){if(c9)return VR;c9=1;var t=u9e(),e=Du();function n(r){return r==null?[]:t(r,e(r))}return VR=n,VR}var UR,f9;function Ro(){if(f9)return UR;f9=1;var t;if(typeof PL=="function")try{t={clone:g8e(),constant:FL(),each:Jie(),filter:aoe(),has:loe(),isArray:jn(),isEmpty:F8e(),isFunction:Zy(),isUndefined:uoe(),keys:Du(),map:foe(),reduce:doe(),size:W8e(),transform:Y8e(),union:l9e(),values:yoe()}}catch{}return t||(t=window._),UR=t,UR}var qR,d9;function jL(){if(d9)return qR;d9=1;var t=Ro();qR=i;var e="\0",n="\0",r="";function i(f){this._isDirected=t.has(f,"directed")?f.directed:!0,this._isMultigraph=t.has(f,"multigraph")?f.multigraph:!1,this._isCompound=t.has(f,"compound")?f.compound:!1,this._label=void 0,this._defaultNodeLabelFn=t.constant(void 0),this._defaultEdgeLabelFn=t.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(f){return this._label=f,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(f){return t.isFunction(f)||(f=t.constant(f)),this._defaultNodeLabelFn=f,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return t.keys(this._nodes)},i.prototype.sources=function(){var f=this;return t.filter(this.nodes(),function(h){return t.isEmpty(f._in[h])})},i.prototype.sinks=function(){var f=this;return t.filter(this.nodes(),function(h){return t.isEmpty(f._out[h])})},i.prototype.setNodes=function(f,h){var g=arguments,_=this;return t.each(f,function(T){g.length>1?_.setNode(T,h):_.setNode(T)}),this},i.prototype.setNode=function(f,h){return t.has(this._nodes,f)?(arguments.length>1&&(this._nodes[f]=h),this):(this._nodes[f]=arguments.length>1?h:this._defaultNodeLabelFn(f),this._isCompound&&(this._parent[f]=n,this._children[f]={},this._children[n][f]=!0),this._in[f]={},this._preds[f]={},this._out[f]={},this._sucs[f]={},++this._nodeCount,this)},i.prototype.node=function(f){return this._nodes[f]},i.prototype.hasNode=function(f){return t.has(this._nodes,f)},i.prototype.removeNode=function(f){var h=this;if(t.has(this._nodes,f)){var g=function(_){h.removeEdge(h._edgeObjs[_])};delete this._nodes[f],this._isCompound&&(this._removeFromParentsChildList(f),delete this._parent[f],t.each(this.children(f),function(_){h.setParent(_)}),delete this._children[f]),t.each(t.keys(this._in[f]),g),delete this._in[f],delete this._preds[f],t.each(t.keys(this._out[f]),g),delete this._out[f],delete this._sucs[f],--this._nodeCount}return this},i.prototype.setParent=function(f,h){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(t.isUndefined(h))h=n;else{h+="";for(var g=h;!t.isUndefined(g);g=this.parent(g))if(g===f)throw new Error("Setting "+h+" as parent of "+f+" would create a cycle");this.setNode(h)}return this.setNode(f),this._removeFromParentsChildList(f),this._parent[f]=h,this._children[h][f]=!0,this},i.prototype._removeFromParentsChildList=function(f){delete this._children[this._parent[f]][f]},i.prototype.parent=function(f){if(this._isCompound){var h=this._parent[f];if(h!==n)return h}},i.prototype.children=function(f){if(t.isUndefined(f)&&(f=n),this._isCompound){var h=this._children[f];if(h)return t.keys(h)}else{if(f===n)return this.nodes();if(this.hasNode(f))return[]}},i.prototype.predecessors=function(f){var h=this._preds[f];if(h)return t.keys(h)},i.prototype.successors=function(f){var h=this._sucs[f];if(h)return t.keys(h)},i.prototype.neighbors=function(f){var h=this.predecessors(f);if(h)return t.union(h,this.successors(f))},i.prototype.isLeaf=function(f){var h;return this.isDirected()?h=this.successors(f):h=this.neighbors(f),h.length===0},i.prototype.filterNodes=function(f){var h=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});h.setGraph(this.graph());var g=this;t.each(this._nodes,function(E,b){f(b)&&h.setNode(b,E)}),t.each(this._edgeObjs,function(E){h.hasNode(E.v)&&h.hasNode(E.w)&&h.setEdge(E,g.edge(E))});var _={};function T(E){var b=g.parent(E);return b===void 0||h.hasNode(b)?(_[E]=b,b):b in _?_[b]:T(b)}return this._isCompound&&t.each(h.nodes(),function(E){h.setParent(E,T(E))}),h},i.prototype.setDefaultEdgeLabel=function(f){return t.isFunction(f)||(f=t.constant(f)),this._defaultEdgeLabelFn=f,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return t.values(this._edgeObjs)},i.prototype.setPath=function(f,h){var g=this,_=arguments;return t.reduce(f,function(T,E){return _.length>1?g.setEdge(T,E,h):g.setEdge(T,E),E}),this},i.prototype.setEdge=function(){var f,h,g,_,T=!1,E=arguments[0];typeof E=="object"&&E!==null&&"v"in E?(f=E.v,h=E.w,g=E.name,arguments.length===2&&(_=arguments[1],T=!0)):(f=E,h=arguments[1],g=arguments[3],arguments.length>2&&(_=arguments[2],T=!0)),f=""+f,h=""+h,t.isUndefined(g)||(g=""+g);var b=a(this._isDirected,f,h,g);if(t.has(this._edgeLabels,b))return T&&(this._edgeLabels[b]=_),this;if(!t.isUndefined(g)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(f),this.setNode(h),this._edgeLabels[b]=T?_:this._defaultEdgeLabelFn(f,h,g);var S=u(this._isDirected,f,h,g);return f=S.v,h=S.w,Object.freeze(S),this._edgeObjs[b]=S,o(this._preds[h],f),o(this._sucs[f],h),this._in[h][b]=S,this._out[f][b]=S,this._edgeCount++,this},i.prototype.edge=function(f,h,g){var _=arguments.length===1?c(this._isDirected,arguments[0]):a(this._isDirected,f,h,g);return this._edgeLabels[_]},i.prototype.hasEdge=function(f,h,g){var _=arguments.length===1?c(this._isDirected,arguments[0]):a(this._isDirected,f,h,g);return t.has(this._edgeLabels,_)},i.prototype.removeEdge=function(f,h,g){var _=arguments.length===1?c(this._isDirected,arguments[0]):a(this._isDirected,f,h,g),T=this._edgeObjs[_];return T&&(f=T.v,h=T.w,delete this._edgeLabels[_],delete this._edgeObjs[_],s(this._preds[h],f),s(this._sucs[f],h),delete this._in[h][_],delete this._out[f][_],this._edgeCount--),this},i.prototype.inEdges=function(f,h){var g=this._in[f];if(g){var _=t.values(g);return h?t.filter(_,function(T){return T.v===h}):_}},i.prototype.outEdges=function(f,h){var g=this._out[f];if(g){var _=t.values(g);return h?t.filter(_,function(T){return T.w===h}):_}},i.prototype.nodeEdges=function(f,h){var g=this.inEdges(f,h);if(g)return g.concat(this.outEdges(f,h))};function o(f,h){f[h]?f[h]++:f[h]=1}function s(f,h){--f[h]||delete f[h]}function a(f,h,g,_){var T=""+h,E=""+g;if(!f&&T>E){var b=T;T=E,E=b}return T+r+E+r+(t.isUndefined(_)?e:_)}function u(f,h,g,_){var T=""+h,E=""+g;if(!f&&T>E){var b=T;T=E,E=b}var S={v:T,w:E};return _&&(S.name=_),S}function c(f,h){return a(f,h.v,h.w,h.name)}return qR}var FR,h9;function c9e(){return h9||(h9=1,FR="2.1.8"),FR}var BR,p9;function f9e(){return p9||(p9=1,BR={Graph:jL(),version:c9e()}),BR}var $R,m9;function d9e(){if(m9)return $R;m9=1;var t=Ro(),e=jL();$R={write:n,read:o};function n(s){var a={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:r(s),edges:i(s)};return t.isUndefined(s.graph())||(a.value=t.clone(s.graph())),a}function r(s){return t.map(s.nodes(),function(a){var u=s.node(a),c=s.parent(a),f={v:a};return t.isUndefined(u)||(f.value=u),t.isUndefined(c)||(f.parent=c),f})}function i(s){return t.map(s.edges(),function(a){var u=s.edge(a),c={v:a.v,w:a.w};return t.isUndefined(a.name)||(c.name=a.name),t.isUndefined(u)||(c.value=u),c})}function o(s){var a=new e(s.options).setGraph(s.value);return t.each(s.nodes,function(u){a.setNode(u.v,u.value),u.parent&&a.setParent(u.v,u.parent)}),t.each(s.edges,function(u){a.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),a}return $R}var zR,g9;function h9e(){if(g9)return zR;g9=1;var t=Ro();zR=e;function e(n){var r={},i=[],o;function s(a){t.has(r,a)||(r[a]=!0,o.push(a),t.each(n.successors(a),s),t.each(n.predecessors(a),s))}return t.each(n.nodes(),function(a){o=[],s(a),o.length&&i.push(o)}),i}return zR}var HR,y9;function voe(){if(y9)return HR;y9=1;var t=Ro();HR=e;function e(){this._arr=[],this._keyIndices={}}return e.prototype.size=function(){return this._arr.length},e.prototype.keys=function(){return this._arr.map(function(n){return n.key})},e.prototype.has=function(n){return t.has(this._keyIndices,n)},e.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},e.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},e.prototype.add=function(n,r){var i=this._keyIndices;if(n=String(n),!t.has(i,n)){var o=this._arr,s=o.length;return i[n]=s,o.push({key:n,priority:r}),this._decrease(s),!0}return!1},e.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},e.prototype.decrease=function(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},e.prototype._heapify=function(n){var r=this._arr,i=2*n,o=i+1,s=n;i<r.length&&(s=r[i].priority<r[s].priority?i:s,o<r.length&&(s=r[o].priority<r[s].priority?o:s),s!==n&&(this._swap(n,s),this._heapify(s)))},e.prototype._decrease=function(n){for(var r=this._arr,i=r[n].priority,o;n!==0&&(o=n>>1,!(r[o].priority<i));)this._swap(n,o),n=o},e.prototype._swap=function(n,r){var i=this._arr,o=this._keyIndices,s=i[n],a=i[r];i[n]=a,i[r]=s,o[a.key]=n,o[s.key]=r},HR}var GR,v9;function _oe(){if(v9)return GR;v9=1;var t=Ro(),e=voe();GR=r;var n=t.constant(1);function r(o,s,a,u){return i(o,String(s),a||n,u||function(c){return o.outEdges(c)})}function i(o,s,a,u){var c={},f=new e,h,g,_=function(T){var E=T.v!==h?T.v:T.w,b=c[E],S=a(T),C=g.distance+S;if(S<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+T+" Weight: "+S);C<b.distance&&(b.distance=C,b.predecessor=h,f.decrease(E,C))};for(o.nodes().forEach(function(T){var E=T===s?0:Number.POSITIVE_INFINITY;c[T]={distance:E},f.add(T,E)});f.size()>0&&(h=f.removeMin(),g=c[h],g.distance!==Number.POSITIVE_INFINITY);)u(h).forEach(_);return c}return GR}var jR,_9;function p9e(){if(_9)return jR;_9=1;var t=_oe(),e=Ro();jR=n;function n(r,i,o){return e.transform(r.nodes(),function(s,a){s[a]=t(r,a,i,o)},{})}return jR}var KR,b9;function boe(){if(b9)return KR;b9=1;var t=Ro();KR=e;function e(n){var r=0,i=[],o={},s=[];function a(u){var c=o[u]={onStack:!0,lowlink:r,index:r++};if(i.push(u),n.successors(u).forEach(function(g){t.has(o,g)?o[g].onStack&&(c.lowlink=Math.min(c.lowlink,o[g].index)):(a(g),c.lowlink=Math.min(c.lowlink,o[g].lowlink))}),c.lowlink===c.index){var f=[],h;do h=i.pop(),o[h].onStack=!1,f.push(h);while(u!==h);s.push(f)}}return n.nodes().forEach(function(u){t.has(o,u)||a(u)}),s}return KR}var WR,w9;function m9e(){if(w9)return WR;w9=1;var t=Ro(),e=boe();WR=n;function n(r){return t.filter(e(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return WR}var YR,E9;function g9e(){if(E9)return YR;E9=1;var t=Ro();YR=n;var e=t.constant(1);function n(i,o,s){return r(i,o||e,s||function(a){return i.outEdges(a)})}function r(i,o,s){var a={},u=i.nodes();return u.forEach(function(c){a[c]={},a[c][c]={distance:0},u.forEach(function(f){c!==f&&(a[c][f]={distance:Number.POSITIVE_INFINITY})}),s(c).forEach(function(f){var h=f.v===c?f.w:f.v,g=o(f);a[c][h]={distance:g,predecessor:c}})}),u.forEach(function(c){var f=a[c];u.forEach(function(h){var g=a[h];u.forEach(function(_){var T=g[c],E=f[_],b=g[_],S=T.distance+E.distance;S<b.distance&&(b.distance=S,b.predecessor=E.predecessor)})})}),a}return YR}var JR,T9;function woe(){if(T9)return JR;T9=1;var t=Ro();JR=e,e.CycleException=n;function e(r){var i={},o={},s=[];function a(u){if(t.has(o,u))throw new n;t.has(i,u)||(o[u]=!0,i[u]=!0,t.each(r.predecessors(u),a),delete o[u],s.push(u))}if(t.each(r.sinks(),a),t.size(i)!==r.nodeCount())throw new n;return s}function n(){}return n.prototype=new Error,JR}var XR,x9;function y9e(){if(x9)return XR;x9=1;var t=woe();XR=e;function e(n){try{t(n)}catch(r){if(r instanceof t.CycleException)return!1;throw r}return!0}return XR}var QR,S9;function Eoe(){if(S9)return QR;S9=1;var t=Ro();QR=e;function e(r,i,o){t.isArray(i)||(i=[i]);var s=(r.isDirected()?r.successors:r.neighbors).bind(r),a=[],u={};return t.each(i,function(c){if(!r.hasNode(c))throw new Error("Graph does not have node: "+c);n(r,c,o==="post",u,s,a)}),a}function n(r,i,o,s,a,u){t.has(s,i)||(s[i]=!0,o||u.push(i),t.each(a(i),function(c){n(r,c,o,s,a,u)}),o&&u.push(i))}return QR}var ZR,A9;function v9e(){if(A9)return ZR;A9=1;var t=Eoe();ZR=e;function e(n,r){return t(n,r,"post")}return ZR}var eP,C9;function _9e(){if(C9)return eP;C9=1;var t=Eoe();eP=e;function e(n,r){return t(n,r,"pre")}return eP}var tP,I9;function b9e(){if(I9)return tP;I9=1;var t=Ro(),e=jL(),n=voe();tP=r;function r(i,o){var s=new e,a={},u=new n,c;function f(g){var _=g.v===c?g.w:g.v,T=u.priority(_);if(T!==void 0){var E=o(g);E<T&&(a[_]=c,u.decrease(_,E))}}if(i.nodeCount()===0)return s;t.each(i.nodes(),function(g){u.add(g,Number.POSITIVE_INFINITY),s.setNode(g)}),u.decrease(i.nodes()[0],0);for(var h=!1;u.size()>0;){if(c=u.removeMin(),t.has(a,c))s.setEdge(c,a[c]);else{if(h)throw new Error("Input graph is not connected: "+i);h=!0}i.nodeEdges(c).forEach(f)}return s}return tP}var nP,R9;function w9e(){return R9||(R9=1,nP={components:h9e(),dijkstra:_oe(),dijkstraAll:p9e(),findCycles:m9e(),floydWarshall:g9e(),isAcyclic:y9e(),postorder:v9e(),preorder:_9e(),prim:b9e(),tarjan:boe(),topsort:woe()}),nP}var rP,P9;function E9e(){if(P9)return rP;P9=1;var t=f9e();return rP={Graph:t.Graph,json:d9e(),alg:w9e(),version:t.version},rP}var iP,N9;function Qo(){if(N9)return iP;N9=1;var t;if(typeof PL=="function")try{t=E9e()}catch{}return t||(t=window.graphlib),iP=t,iP}var oP,M9;function T9e(){if(M9)return oP;M9=1;var t=Kie(),e=1,n=4;function r(i){return t(i,e|n)}return oP=r,oP}var sP,D9;function KE(){if(D9)return sP;D9=1;var t=sp(),e=al(),n=UE(),r=Io();function i(o,s,a){if(!r(a))return!1;var u=typeof s;return(u=="number"?e(a)&&n(s,a.length):u=="string"&&s in a)?t(a[s],o):!1}return sP=i,sP}var aP,k9;function x9e(){if(k9)return aP;k9=1;var t=jE(),e=sp(),n=KE(),r=xf(),i=Object.prototype,o=i.hasOwnProperty,s=t(function(a,u){a=Object(a);var c=-1,f=u.length,h=f>2?u[2]:void 0;for(h&&n(u[0],u[1],h)&&(f=1);++c<f;)for(var g=u[c],_=r(g),T=-1,E=_.length;++T<E;){var b=_[T],S=a[b];(S===void 0||e(S,i[b])&&!o.call(a,b))&&(a[b]=g[b])}return a});return aP=s,aP}var lP,O9;function S9e(){if(O9)return lP;O9=1;var t=ll(),e=al(),n=Du();function r(i){return function(o,s,a){var u=Object(o);if(!e(o)){var c=t(s,3);o=n(o),s=function(h){return c(u[h],h,u)}}var f=i(o,s,a);return f>-1?u[c?o[f]:f]:void 0}}return lP=r,lP}var uP,L9;function A9e(){if(L9)return uP;L9=1;var t=/\s/;function e(n){for(var r=n.length;r--&&t.test(n.charAt(r)););return r}return uP=e,uP}var cP,V9;function C9e(){if(V9)return cP;V9=1;var t=A9e(),e=/^\s+/;function n(r){return r&&r.slice(0,t(r)+1).replace(e,"")}return cP=n,cP}var fP,U9;function I9e(){if(U9)return fP;U9=1;var t=C9e(),e=Io(),n=cp(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt;function u(c){if(typeof c=="number")return c;if(n(c))return r;if(e(c)){var f=typeof c.valueOf=="function"?c.valueOf():c;c=e(f)?f+"":f}if(typeof c!="string")return c===0?c:+c;c=t(c);var h=o.test(c);return h||s.test(c)?a(c.slice(2),h?2:8):i.test(c)?r:+c}return fP=u,fP}var dP,q9;function Toe(){if(q9)return dP;q9=1;var t=I9e(),e=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-e){var o=i<0?-1:1;return o*n}return i===i?i:0}return dP=r,dP}var hP,F9;function R9e(){if(F9)return hP;F9=1;var t=Toe();function e(n){var r=t(n),i=r%1;return r===r?i?r-i:r:0}return hP=e,hP}var pP,B9;function P9e(){if(B9)return pP;B9=1;var t=moe(),e=ll(),n=R9e(),r=Math.max;function i(o,s,a){var u=o==null?0:o.length;if(!u)return-1;var c=a==null?0:n(a);return c<0&&(c=r(u+c,0)),t(o,e(s,3),c)}return pP=i,pP}var mP,$9;function N9e(){if($9)return mP;$9=1;var t=S9e(),e=P9e(),n=t(e);return mP=n,mP}var gP,z9;function xoe(){if(z9)return gP;z9=1;var t=GL();function e(n){var r=n==null?0:n.length;return r?t(n,1):[]}return gP=e,gP}var yP,H9;function M9e(){if(H9)return yP;H9=1;var t=BL(),e=Wie(),n=xf();function r(i,o){return i==null?i:t(i,e(o),n)}return yP=r,yP}var vP,G9;function D9e(){if(G9)return vP;G9=1;function t(e){var n=e==null?0:e.length;return n?e[n-1]:void 0}return vP=t,vP}var _P,j9;function k9e(){if(j9)return _P;j9=1;var t=LE(),e=$L(),n=ll();function r(i,o){var s={};return o=n(o,3),e(i,function(a,u,c){t(s,u,o(a,u,c))}),s}return _P=r,_P}var bP,K9;function KL(){if(K9)return bP;K9=1;var t=cp();function e(n,r,i){for(var o=-1,s=n.length;++o<s;){var a=n[o],u=r(a);if(u!=null&&(c===void 0?u===u&&!t(u):i(u,c)))var c=u,f=a}return f}return bP=e,bP}var wP,W9;function O9e(){if(W9)return wP;W9=1;function t(e,n){return e>n}return wP=t,wP}var EP,Y9;function L9e(){if(Y9)return EP;Y9=1;var t=KL(),e=O9e(),n=Sf();function r(i){return i&&i.length?t(i,n,e):void 0}return EP=r,EP}var TP,J9;function Soe(){if(J9)return TP;J9=1;var t=LE(),e=sp();function n(r,i,o){(o!==void 0&&!e(r[i],o)||o===void 0&&!(i in r))&&t(r,i,o)}return TP=n,TP}var xP,X9;function V9e(){if(X9)return xP;X9=1;var t=Ef(),e=BE(),n=Ks(),r="[object Object]",i=Function.prototype,o=Object.prototype,s=i.toString,a=o.hasOwnProperty,u=s.call(Object);function c(f){if(!n(f)||t(f)!=r)return!1;var h=e(f);if(h===null)return!0;var g=a.call(h,"constructor")&&h.constructor;return typeof g=="function"&&g instanceof g&&s.call(g)==u}return xP=c,xP}var SP,Q9;function Aoe(){if(Q9)return SP;Q9=1;function t(e,n){if(!(n==="constructor"&&typeof e[n]=="function")&&n!="__proto__")return e[n]}return SP=t,SP}var AP,Z9;function U9e(){if(Z9)return AP;Z9=1;var t=ev(),e=xf();function n(r){return t(r,e(r))}return AP=n,AP}var CP,e7;function q9e(){if(e7)return CP;e7=1;var t=Soe(),e=Oie(),n=Hie(),r=Lie(),i=jie(),o=tv(),s=jn(),a=goe(),u=lp(),c=Zy(),f=Io(),h=V9e(),g=nv(),_=Aoe(),T=U9e();function E(b,S,C,R,P,O,q){var D=_(b,C),L=_(S,C),N=q.get(L);if(N){t(b,C,N);return}var U=O?O(D,L,C+"",b,S,q):void 0,V=U===void 0;if(V){var $=s(L),F=!$&&u(L),H=!$&&!F&&g(L);U=L,$||F||H?s(D)?U=D:a(D)?U=r(D):F?(V=!1,U=e(L,!0)):H?(V=!1,U=n(L,!0)):U=[]:h(L)||o(L)?(U=D,o(D)?U=T(D):(!f(D)||c(D))&&(U=i(L))):V=!1}V&&(q.set(L,U),P(U,L,R,O,q),q.delete(L)),t(b,C,U)}return CP=E,CP}var IP,t7;function F9e(){if(t7)return IP;t7=1;var t=OE(),e=Soe(),n=BL(),r=q9e(),i=Io(),o=xf(),s=Aoe();function a(u,c,f,h,g){u!==c&&n(c,function(_,T){if(g||(g=new t),i(_))r(u,c,T,f,a,h,g);else{var E=h?h(s(u,T),_,T+"",u,c,g):void 0;E===void 0&&(E=_),e(u,T,E)}},o)}return IP=a,IP}var RP,n7;function B9e(){if(n7)return RP;n7=1;var t=jE(),e=KE();function n(r){return t(function(i,o){var s=-1,a=o.length,u=a>1?o[a-1]:void 0,c=a>2?o[2]:void 0;for(u=r.length>3&&typeof u=="function"?(a--,u):void 0,c&&e(o[0],o[1],c)&&(u=a<3?void 0:u,a=1),i=Object(i);++s<a;){var f=o[s];f&&r(i,f,s,u)}return i})}return RP=n,RP}var PP,r7;function $9e(){if(r7)return PP;r7=1;var t=F9e(),e=B9e(),n=e(function(r,i,o){t(r,i,o)});return PP=n,PP}var NP,i7;function Coe(){if(i7)return NP;i7=1;function t(e,n){return e<n}return NP=t,NP}var MP,o7;function z9e(){if(o7)return MP;o7=1;var t=KL(),e=Coe(),n=Sf();function r(i){return i&&i.length?t(i,n,e):void 0}return MP=r,MP}var DP,s7;function H9e(){if(s7)return DP;s7=1;var t=KL(),e=ll(),n=Coe();function r(i,o){return i&&i.length?t(i,e(o,2),n):void 0}return DP=r,DP}var kP,a7;function G9e(){if(a7)return kP;a7=1;var t=ss(),e=function(){return t.Date.now()};return kP=e,kP}var OP,l7;function j9e(){if(l7)return OP;l7=1;var t=VE(),e=HE(),n=UE(),r=Io(),i=rv();function o(s,a,u,c){if(!r(s))return s;a=e(a,s);for(var f=-1,h=a.length,g=h-1,_=s;_!=null&&++f<h;){var T=i(a[f]),E=u;if(T==="__proto__"||T==="constructor"||T==="prototype")return s;if(f!=g){var b=_[T];E=c?c(b,T,_):void 0,E===void 0&&(E=r(b)?b:n(a[f+1])?[]:{})}t(_,T,E),_=_[T]}return s}return OP=o,OP}var LP,u7;function K9e(){if(u7)return LP;u7=1;var t=GE(),e=j9e(),n=HE();function r(i,o,s){for(var a=-1,u=o.length,c={};++a<u;){var f=o[a],h=t(i,f);s(h,f)&&e(c,n(f,i),h)}return c}return LP=r,LP}var VP,c7;function W9e(){if(c7)return VP;c7=1;var t=K9e(),e=ooe();function n(r,i){return t(r,i,function(o,s){return e(r,s)})}return VP=n,VP}var UP,f7;function Y9e(){if(f7)return UP;f7=1;var t=xoe(),e=hoe(),n=poe();function r(i){return n(e(i,void 0,t),i+"")}return UP=r,UP}var qP,d7;function J9e(){if(d7)return qP;d7=1;var t=W9e(),e=Y9e(),n=e(function(r,i){return r==null?{}:t(r,i)});return qP=n,qP}var FP,h7;function X9e(){if(h7)return FP;h7=1;var t=Math.ceil,e=Math.max;function n(r,i,o,s){for(var a=-1,u=e(t((i-r)/(o||1)),0),c=Array(u);u--;)c[s?u:++a]=r,r+=o;return c}return FP=n,FP}var BP,p7;function Q9e(){if(p7)return BP;p7=1;var t=X9e(),e=KE(),n=Toe();function r(i){return function(o,s,a){return a&&typeof a!="number"&&e(o,s,a)&&(s=a=void 0),o=n(o),s===void 0?(s=o,o=0):s=n(s),a=a===void 0?o<s?1:-1:n(a),t(o,s,a,i)}}return BP=r,BP}var $P,m7;function Z9e(){if(m7)return $P;m7=1;var t=Q9e(),e=t();return $P=e,$P}var zP,g7;function e7e(){if(g7)return zP;g7=1;function t(e,n){var r=e.length;for(e.sort(n);r--;)e[r]=e[r].value;return e}return zP=t,zP}var HP,y7;function t7e(){if(y7)return HP;y7=1;var t=cp();function e(n,r){if(n!==r){var i=n!==void 0,o=n===null,s=n===n,a=t(n),u=r!==void 0,c=r===null,f=r===r,h=t(r);if(!c&&!h&&!a&&n>r||a&&u&&f&&!c&&!h||o&&u&&f||!i&&f||!s)return 1;if(!o&&!a&&!h&&n<r||h&&i&&s&&!o&&!a||c&&i&&s||!u&&s||!f)return-1}return 0}return HP=e,HP}var GP,v7;function n7e(){if(v7)return GP;v7=1;var t=t7e();function e(n,r,i){for(var o=-1,s=n.criteria,a=r.criteria,u=s.length,c=i.length;++o<u;){var f=t(s[o],a[o]);if(f){if(o>=c)return f;var h=i[o];return f*(h=="desc"?-1:1)}}return n.index-r.index}return GP=e,GP}var jP,_7;function r7e(){if(_7)return jP;_7=1;var t=zE(),e=GE(),n=ll(),r=coe(),i=e7e(),o=qE(),s=n7e(),a=Sf(),u=jn();function c(f,h,g){h.length?h=t(h,function(E){return u(E)?function(b){return e(b,E.length===1?E[0]:E)}:E}):h=[a];var _=-1;h=t(h,o(n));var T=r(f,function(E,b,S){var C=t(h,function(R){return R(E)});return{criteria:C,index:++_,value:E}});return i(T,function(E,b){return s(E,b,g)})}return jP=c,jP}var KP,b7;function i7e(){if(b7)return KP;b7=1;var t=GL(),e=r7e(),n=jE(),r=KE(),i=n(function(o,s){if(o==null)return[];var a=s.length;return a>1&&r(o,s[0],s[1])?s=[]:a>2&&r(s[0],s[1],s[2])&&(s=[s[0]]),e(o,t(s,1),[])});return KP=i,KP}var WP,w7;function o7e(){if(w7)return WP;w7=1;var t=roe(),e=0;function n(r){var i=++e;return t(r)+i}return WP=n,WP}var YP,E7;function s7e(){if(E7)return YP;E7=1;function t(e,n,r){for(var i=-1,o=e.length,s=n.length,a={};++i<o;){var u=i<s?n[i]:void 0;r(a,e[i],u)}return a}return YP=t,YP}var JP,T7;function a7e(){if(T7)return JP;T7=1;var t=VE(),e=s7e();function n(r,i){return e(r||[],i||[],t)}return JP=n,JP}var XP,x7;function pn(){if(x7)return XP;x7=1;var t;if(typeof PL=="function")try{t={cloneDeep:T9e(),constant:FL(),defaults:x9e(),each:Jie(),filter:aoe(),find:N9e(),flatten:xoe(),forEach:Yie(),forIn:M9e(),has:loe(),isUndefined:uoe(),last:D9e(),map:foe(),mapValues:k9e(),max:L9e(),merge:$9e(),min:z9e(),minBy:H9e(),now:G9e(),pick:J9e(),range:Z9e(),reduce:doe(),sortBy:i7e(),uniqueId:o7e(),values:yoe(),zipObject:a7e()}}catch{}return t||(t=window._),XP=t,XP}var QP,S7;function l7e(){if(S7)return QP;S7=1,QP=t;function t(){var r={};r._next=r._prev=r,this._sentinel=r}t.prototype.dequeue=function(){var r=this._sentinel,i=r._prev;if(i!==r)return e(i),i},t.prototype.enqueue=function(r){var i=this._sentinel;r._prev&&r._next&&e(r),r._next=i._next,i._next._prev=r,i._next=r,r._prev=i},t.prototype.toString=function(){for(var r=[],i=this._sentinel,o=i._prev;o!==i;)r.push(JSON.stringify(o,n)),o=o._prev;return"["+r.join(", ")+"]"};function e(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,i){if(r!=="_next"&&r!=="_prev")return i}return QP}var ZP,A7;function u7e(){if(A7)return ZP;A7=1;var t=pn(),e=Qo().Graph,n=l7e();ZP=i;var r=t.constant(1);function i(c,f){if(c.nodeCount()<=1)return[];var h=a(c,f||r),g=o(h.graph,h.buckets,h.zeroIdx);return t.flatten(t.map(g,function(_){return c.outEdges(_.v,_.w)}),!0)}function o(c,f,h){for(var g=[],_=f[f.length-1],T=f[0],E;c.nodeCount();){for(;E=T.dequeue();)s(c,f,h,E);for(;E=_.dequeue();)s(c,f,h,E);if(c.nodeCount()){for(var b=f.length-2;b>0;--b)if(E=f[b].dequeue(),E){g=g.concat(s(c,f,h,E,!0));break}}}return g}function s(c,f,h,g,_){var T=_?[]:void 0;return t.forEach(c.inEdges(g.v),function(E){var b=c.edge(E),S=c.node(E.v);_&&T.push({v:E.v,w:E.w}),S.out-=b,u(f,h,S)}),t.forEach(c.outEdges(g.v),function(E){var b=c.edge(E),S=E.w,C=c.node(S);C.in-=b,u(f,h,C)}),c.removeNode(g.v),T}function a(c,f){var h=new e,g=0,_=0;t.forEach(c.nodes(),function(b){h.setNode(b,{v:b,in:0,out:0})}),t.forEach(c.edges(),function(b){var S=h.edge(b.v,b.w)||0,C=f(b),R=S+C;h.setEdge(b.v,b.w,R),_=Math.max(_,h.node(b.v).out+=C),g=Math.max(g,h.node(b.w).in+=C)});var T=t.range(_+g+3).map(function(){return new n}),E=g+1;return t.forEach(h.nodes(),function(b){u(T,E,h.node(b))}),{graph:h,buckets:T,zeroIdx:E}}function u(c,f,h){h.out?h.in?c[h.out-h.in+f].enqueue(h):c[c.length-1].enqueue(h):c[0].enqueue(h)}return ZP}var eN,C7;function c7e(){if(C7)return eN;C7=1;var t=pn(),e=u7e();eN={run:n,undo:i};function n(o){var s=o.graph().acyclicer==="greedy"?e(o,a(o)):r(o);t.forEach(s,function(u){var c=o.edge(u);o.removeEdge(u),c.forwardName=u.name,c.reversed=!0,o.setEdge(u.w,u.v,c,t.uniqueId("rev"))});function a(u){return function(c){return u.edge(c).weight}}}function r(o){var s=[],a={},u={};function c(f){t.has(u,f)||(u[f]=!0,a[f]=!0,t.forEach(o.outEdges(f),function(h){t.has(a,h.w)?s.push(h):c(h.w)}),delete a[f])}return t.forEach(o.nodes(),c),s}function i(o){t.forEach(o.edges(),function(s){var a=o.edge(s);if(a.reversed){o.removeEdge(s);var u=a.forwardName;delete a.reversed,delete a.forwardName,o.setEdge(s.w,s.v,a,u)}})}return eN}var tN,I7;function gi(){if(I7)return tN;I7=1;var t=pn(),e=Qo().Graph;tN={addDummyNode:n,simplify:r,asNonCompoundGraph:i,successorWeights:o,predecessorWeights:s,intersectRect:a,buildLayerMatrix:u,normalizeRanks:c,removeEmptyRanks:f,addBorderNode:h,maxRank:g,partition:_,time:T,notime:E};function n(b,S,C,R){var P;do P=t.uniqueId(R);while(b.hasNode(P));return C.dummy=S,b.setNode(P,C),P}function r(b){var S=new e().setGraph(b.graph());return t.forEach(b.nodes(),function(C){S.setNode(C,b.node(C))}),t.forEach(b.edges(),function(C){var R=S.edge(C.v,C.w)||{weight:0,minlen:1},P=b.edge(C);S.setEdge(C.v,C.w,{weight:R.weight+P.weight,minlen:Math.max(R.minlen,P.minlen)})}),S}function i(b){var S=new e({multigraph:b.isMultigraph()}).setGraph(b.graph());return t.forEach(b.nodes(),function(C){b.children(C).length||S.setNode(C,b.node(C))}),t.forEach(b.edges(),function(C){S.setEdge(C,b.edge(C))}),S}function o(b){var S=t.map(b.nodes(),function(C){var R={};return t.forEach(b.outEdges(C),function(P){R[P.w]=(R[P.w]||0)+b.edge(P).weight}),R});return t.zipObject(b.nodes(),S)}function s(b){var S=t.map(b.nodes(),function(C){var R={};return t.forEach(b.inEdges(C),function(P){R[P.v]=(R[P.v]||0)+b.edge(P).weight}),R});return t.zipObject(b.nodes(),S)}function a(b,S){var C=b.x,R=b.y,P=S.x-C,O=S.y-R,q=b.width/2,D=b.height/2;if(!P&&!O)throw new Error("Not possible to find intersection inside of the rectangle");var L,N;return Math.abs(O)*q>Math.abs(P)*D?(O<0&&(D=-D),L=D*P/O,N=D):(P<0&&(q=-q),L=q,N=q*O/P),{x:C+L,y:R+N}}function u(b){var S=t.map(t.range(g(b)+1),function(){return[]});return t.forEach(b.nodes(),function(C){var R=b.node(C),P=R.rank;t.isUndefined(P)||(S[P][R.order]=C)}),S}function c(b){var S=t.min(t.map(b.nodes(),function(C){return b.node(C).rank}));t.forEach(b.nodes(),function(C){var R=b.node(C);t.has(R,"rank")&&(R.rank-=S)})}function f(b){var S=t.min(t.map(b.nodes(),function(O){return b.node(O).rank})),C=[];t.forEach(b.nodes(),function(O){var q=b.node(O).rank-S;C[q]||(C[q]=[]),C[q].push(O)});var R=0,P=b.graph().nodeRankFactor;t.forEach(C,function(O,q){t.isUndefined(O)&&q%P!==0?--R:R&&t.forEach(O,function(D){b.node(D).rank+=R})})}function h(b,S,C,R){var P={width:0,height:0};return arguments.length>=4&&(P.rank=C,P.order=R),n(b,"border",P,S)}function g(b){return t.max(t.map(b.nodes(),function(S){var C=b.node(S).rank;if(!t.isUndefined(C))return C}))}function _(b,S){var C={lhs:[],rhs:[]};return t.forEach(b,function(R){S(R)?C.lhs.push(R):C.rhs.push(R)}),C}function T(b,S){var C=t.now();try{return S()}finally{console.log(b+" time: "+(t.now()-C)+"ms")}}function E(b,S){return S()}return tN}var nN,R7;function f7e(){if(R7)return nN;R7=1;var t=pn(),e=gi();nN={run:n,undo:i};function n(o){o.graph().dummyChains=[],t.forEach(o.edges(),function(s){r(o,s)})}function r(o,s){var a=s.v,u=o.node(a).rank,c=s.w,f=o.node(c).rank,h=s.name,g=o.edge(s),_=g.labelRank;if(f!==u+1){o.removeEdge(s);var T,E,b;for(b=0,++u;u<f;++b,++u)g.points=[],E={width:0,height:0,edgeLabel:g,edgeObj:s,rank:u},T=e.addDummyNode(o,"edge",E,"_d"),u===_&&(E.width=g.width,E.height=g.height,E.dummy="edge-label",E.labelpos=g.labelpos),o.setEdge(a,T,{weight:g.weight},h),b===0&&o.graph().dummyChains.push(T),a=T;o.setEdge(a,c,{weight:g.weight},h)}}function i(o){t.forEach(o.graph().dummyChains,function(s){var a=o.node(s),u=a.edgeLabel,c;for(o.setEdge(a.edgeObj,u);a.dummy;)c=o.successors(s)[0],o.removeNode(s),u.points.push({x:a.x,y:a.y}),a.dummy==="edge-label"&&(u.x=a.x,u.y=a.y,u.width=a.width,u.height=a.height),s=c,a=o.node(s)})}return nN}var rN,P7;function Xb(){if(P7)return rN;P7=1;var t=pn();rN={longestPath:e,slack:n};function e(r){var i={};function o(s){var a=r.node(s);if(t.has(i,s))return a.rank;i[s]=!0;var u=t.min(t.map(r.outEdges(s),function(c){return o(c.w)-r.edge(c).minlen}));return(u===Number.POSITIVE_INFINITY||u===void 0||u===null)&&(u=0),a.rank=u}t.forEach(r.sources(),o)}function n(r,i){return r.node(i.w).rank-r.node(i.v).rank-r.edge(i).minlen}return rN}var iN,N7;function Ioe(){if(N7)return iN;N7=1;var t=pn(),e=Qo().Graph,n=Xb().slack;iN=r;function r(a){var u=new e({directed:!1}),c=a.nodes()[0],f=a.nodeCount();u.setNode(c,{});for(var h,g;i(u,a)<f;)h=o(u,a),g=u.hasNode(h.v)?n(a,h):-n(a,h),s(u,a,g);return u}function i(a,u){function c(f){t.forEach(u.nodeEdges(f),function(h){var g=h.v,_=f===g?h.w:g;!a.hasNode(_)&&!n(u,h)&&(a.setNode(_,{}),a.setEdge(f,_,{}),c(_))})}return t.forEach(a.nodes(),c),a.nodeCount()}function o(a,u){return t.minBy(u.edges(),function(c){if(a.hasNode(c.v)!==a.hasNode(c.w))return n(u,c)})}function s(a,u,c){t.forEach(a.nodes(),function(f){u.node(f).rank+=c})}return iN}var oN,M7;function d7e(){if(M7)return oN;M7=1;var t=pn(),e=Ioe(),n=Xb().slack,r=Xb().longestPath,i=Qo().alg.preorder,o=Qo().alg.postorder,s=gi().simplify;oN=a,a.initLowLimValues=h,a.initCutValues=u,a.calcCutValue=f,a.leaveEdge=_,a.enterEdge=T,a.exchangeEdges=E;function a(R){R=s(R),r(R);var P=e(R);h(P),u(P,R);for(var O,q;O=_(P);)q=T(P,R,O),E(P,R,O,q)}function u(R,P){var O=o(R,R.nodes());O=O.slice(0,O.length-1),t.forEach(O,function(q){c(R,P,q)})}function c(R,P,O){var q=R.node(O),D=q.parent;R.edge(O,D).cutvalue=f(R,P,O)}function f(R,P,O){var q=R.node(O),D=q.parent,L=!0,N=P.edge(O,D),U=0;return N||(L=!1,N=P.edge(D,O)),U=N.weight,t.forEach(P.nodeEdges(O),function(V){var $=V.v===O,F=$?V.w:V.v;if(F!==D){var H=$===L,X=P.edge(V).weight;if(U+=H?X:-X,S(R,O,F)){var K=R.edge(O,F).cutvalue;U+=H?-K:K}}}),U}function h(R,P){arguments.length<2&&(P=R.nodes()[0]),g(R,{},1,P)}function g(R,P,O,q,D){var L=O,N=R.node(q);return P[q]=!0,t.forEach(R.neighbors(q),function(U){t.has(P,U)||(O=g(R,P,O,U,q))}),N.low=L,N.lim=O++,D?N.parent=D:delete N.parent,O}function _(R){return t.find(R.edges(),function(P){return R.edge(P).cutvalue<0})}function T(R,P,O){var q=O.v,D=O.w;P.hasEdge(q,D)||(q=O.w,D=O.v);var L=R.node(q),N=R.node(D),U=L,V=!1;L.lim>N.lim&&(U=N,V=!0);var $=t.filter(P.edges(),function(F){return V===C(R,R.node(F.v),U)&&V!==C(R,R.node(F.w),U)});return t.minBy($,function(F){return n(P,F)})}function E(R,P,O,q){var D=O.v,L=O.w;R.removeEdge(D,L),R.setEdge(q.v,q.w,{}),h(R),u(R,P),b(R,P)}function b(R,P){var O=t.find(R.nodes(),function(D){return!P.node(D).parent}),q=i(R,O);q=q.slice(1),t.forEach(q,function(D){var L=R.node(D).parent,N=P.edge(D,L),U=!1;N||(N=P.edge(L,D),U=!0),P.node(D).rank=P.node(L).rank+(U?N.minlen:-N.minlen)})}function S(R,P,O){return R.hasEdge(P,O)}function C(R,P,O){return O.low<=P.lim&&P.lim<=O.lim}return oN}var sN,D7;function h7e(){if(D7)return sN;D7=1;var t=Xb(),e=t.longestPath,n=Ioe(),r=d7e();sN=i;function i(u){switch(u.graph().ranker){case"network-simplex":a(u);break;case"tight-tree":s(u);break;case"longest-path":o(u);break;default:a(u)}}var o=e;function s(u){e(u),n(u)}function a(u){r(u)}return sN}var aN,k7;function p7e(){if(k7)return aN;k7=1;var t=pn();aN=e;function e(i){var o=r(i);t.forEach(i.graph().dummyChains,function(s){for(var a=i.node(s),u=a.edgeObj,c=n(i,o,u.v,u.w),f=c.path,h=c.lca,g=0,_=f[g],T=!0;s!==u.w;){if(a=i.node(s),T){for(;(_=f[g])!==h&&i.node(_).maxRank<a.rank;)g++;_===h&&(T=!1)}if(!T){for(;g<f.length-1&&i.node(_=f[g+1]).minRank<=a.rank;)g++;_=f[g]}i.setParent(s,_),s=i.successors(s)[0]}})}function n(i,o,s,a){var u=[],c=[],f=Math.min(o[s].low,o[a].low),h=Math.max(o[s].lim,o[a].lim),g,_;g=s;do g=i.parent(g),u.push(g);while(g&&(o[g].low>f||h>o[g].lim));for(_=g,g=a;(g=i.parent(g))!==_;)c.push(g);return{path:u.concat(c.reverse()),lca:_}}function r(i){var o={},s=0;function a(u){var c=s;t.forEach(i.children(u),a),o[u]={low:c,lim:s++}}return t.forEach(i.children(),a),o}return aN}var lN,O7;function m7e(){if(O7)return lN;O7=1;var t=pn(),e=gi();lN={run:n,cleanup:s};function n(a){var u=e.addDummyNode(a,"root",{},"_root"),c=i(a),f=t.max(t.values(c))-1,h=2*f+1;a.graph().nestingRoot=u,t.forEach(a.edges(),function(_){a.edge(_).minlen*=h});var g=o(a)+1;t.forEach(a.children(),function(_){r(a,u,h,g,f,c,_)}),a.graph().nodeRankFactor=h}function r(a,u,c,f,h,g,_){var T=a.children(_);if(!T.length){_!==u&&a.setEdge(u,_,{weight:0,minlen:c});return}var E=e.addBorderNode(a,"_bt"),b=e.addBorderNode(a,"_bb"),S=a.node(_);a.setParent(E,_),S.borderTop=E,a.setParent(b,_),S.borderBottom=b,t.forEach(T,function(C){r(a,u,c,f,h,g,C);var R=a.node(C),P=R.borderTop?R.borderTop:C,O=R.borderBottom?R.borderBottom:C,q=R.borderTop?f:2*f,D=P!==O?1:h-g[_]+1;a.setEdge(E,P,{weight:q,minlen:D,nestingEdge:!0}),a.setEdge(O,b,{weight:q,minlen:D,nestingEdge:!0})}),a.parent(_)||a.setEdge(u,E,{weight:0,minlen:h+g[_]})}function i(a){var u={};function c(f,h){var g=a.children(f);g&&g.length&&t.forEach(g,function(_){c(_,h+1)}),u[f]=h}return t.forEach(a.children(),function(f){c(f,1)}),u}function o(a){return t.reduce(a.edges(),function(u,c){return u+a.edge(c).weight},0)}function s(a){var u=a.graph();a.removeNode(u.nestingRoot),delete u.nestingRoot,t.forEach(a.edges(),function(c){var f=a.edge(c);f.nestingEdge&&a.removeEdge(c)})}return lN}var uN,L7;function g7e(){if(L7)return uN;L7=1;var t=pn(),e=gi();uN=n;function n(i){function o(s){var a=i.children(s),u=i.node(s);if(a.length&&t.forEach(a,o),t.has(u,"minRank")){u.borderLeft=[],u.borderRight=[];for(var c=u.minRank,f=u.maxRank+1;c<f;++c)r(i,"borderLeft","_bl",s,u,c),r(i,"borderRight","_br",s,u,c)}}t.forEach(i.children(),o)}function r(i,o,s,a,u,c){var f={width:0,height:0,rank:c,borderType:o},h=u[o][c-1],g=e.addDummyNode(i,"border",f,s);u[o][c]=g,i.setParent(g,a),h&&i.setEdge(h,g,{weight:1})}return uN}var cN,V7;function y7e(){if(V7)return cN;V7=1;var t=pn();cN={adjust:e,undo:n};function e(c){var f=c.graph().rankdir.toLowerCase();(f==="lr"||f==="rl")&&r(c)}function n(c){var f=c.graph().rankdir.toLowerCase();(f==="bt"||f==="rl")&&o(c),(f==="lr"||f==="rl")&&(a(c),r(c))}function r(c){t.forEach(c.nodes(),function(f){i(c.node(f))}),t.forEach(c.edges(),function(f){i(c.edge(f))})}function i(c){var f=c.width;c.width=c.height,c.height=f}function o(c){t.forEach(c.nodes(),function(f){s(c.node(f))}),t.forEach(c.edges(),function(f){var h=c.edge(f);t.forEach(h.points,s),t.has(h,"y")&&s(h)})}function s(c){c.y=-c.y}function a(c){t.forEach(c.nodes(),function(f){u(c.node(f))}),t.forEach(c.edges(),function(f){var h=c.edge(f);t.forEach(h.points,u),t.has(h,"x")&&u(h)})}function u(c){var f=c.x;c.x=c.y,c.y=f}return cN}var fN,U7;function v7e(){if(U7)return fN;U7=1;var t=pn();fN=e;function e(n){var r={},i=t.filter(n.nodes(),function(c){return!n.children(c).length}),o=t.max(t.map(i,function(c){return n.node(c).rank})),s=t.map(t.range(o+1),function(){return[]});function a(c){if(!t.has(r,c)){r[c]=!0;var f=n.node(c);s[f.rank].push(c),t.forEach(n.successors(c),a)}}var u=t.sortBy(i,function(c){return n.node(c).rank});return t.forEach(u,a),s}return fN}var dN,q7;function _7e(){if(q7)return dN;q7=1;var t=pn();dN=e;function e(r,i){for(var o=0,s=1;s<i.length;++s)o+=n(r,i[s-1],i[s]);return o}function n(r,i,o){for(var s=t.zipObject(o,t.map(o,function(g,_){return _})),a=t.flatten(t.map(i,function(g){return t.sortBy(t.map(r.outEdges(g),function(_){return{pos:s[_.w],weight:r.edge(_).weight}}),"pos")}),!0),u=1;u<o.length;)u<<=1;var c=2*u-1;u-=1;var f=t.map(new Array(c),function(){return 0}),h=0;return t.forEach(a.forEach(function(g){var _=g.pos+u;f[_]+=g.weight;for(var T=0;_>0;)_%2&&(T+=f[_+1]),_=_-1>>1,f[_]+=g.weight;h+=g.weight*T})),h}return dN}var hN,F7;function b7e(){if(F7)return hN;F7=1;var t=pn();hN=e;function e(n,r){return t.map(r,function(i){var o=n.inEdges(i);if(o.length){var s=t.reduce(o,function(a,u){var c=n.edge(u),f=n.node(u.v);return{sum:a.sum+c.weight*f.order,weight:a.weight+c.weight}},{sum:0,weight:0});return{v:i,barycenter:s.sum/s.weight,weight:s.weight}}else return{v:i}})}return hN}var pN,B7;function w7e(){if(B7)return pN;B7=1;var t=pn();pN=e;function e(i,o){var s={};t.forEach(i,function(u,c){var f=s[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:c};t.isUndefined(u.barycenter)||(f.barycenter=u.barycenter,f.weight=u.weight)}),t.forEach(o.edges(),function(u){var c=s[u.v],f=s[u.w];!t.isUndefined(c)&&!t.isUndefined(f)&&(f.indegree++,c.out.push(s[u.w]))});var a=t.filter(s,function(u){return!u.indegree});return n(a)}function n(i){var o=[];function s(c){return function(f){f.merged||(t.isUndefined(f.barycenter)||t.isUndefined(c.barycenter)||f.barycenter>=c.barycenter)&&r(c,f)}}function a(c){return function(f){f.in.push(c),--f.indegree===0&&i.push(f)}}for(;i.length;){var u=i.pop();o.push(u),t.forEach(u.in.reverse(),s(u)),t.forEach(u.out,a(u))}return t.map(t.filter(o,function(c){return!c.merged}),function(c){return t.pick(c,["vs","i","barycenter","weight"])})}function r(i,o){var s=0,a=0;i.weight&&(s+=i.barycenter*i.weight,a+=i.weight),o.weight&&(s+=o.barycenter*o.weight,a+=o.weight),i.vs=o.vs.concat(i.vs),i.barycenter=s/a,i.weight=a,i.i=Math.min(o.i,i.i),o.merged=!0}return pN}var mN,$7;function E7e(){if($7)return mN;$7=1;var t=pn(),e=gi();mN=n;function n(o,s){var a=e.partition(o,function(E){return t.has(E,"barycenter")}),u=a.lhs,c=t.sortBy(a.rhs,function(E){return-E.i}),f=[],h=0,g=0,_=0;u.sort(i(!!s)),_=r(f,c,_),t.forEach(u,function(E){_+=E.vs.length,f.push(E.vs),h+=E.barycenter*E.weight,g+=E.weight,_=r(f,c,_)});var T={vs:t.flatten(f,!0)};return g&&(T.barycenter=h/g,T.weight=g),T}function r(o,s,a){for(var u;s.length&&(u=t.last(s)).i<=a;)s.pop(),o.push(u.vs),a++;return a}function i(o){return function(s,a){return s.barycenter<a.barycenter?-1:s.barycenter>a.barycenter?1:o?a.i-s.i:s.i-a.i}}return mN}var gN,z7;function T7e(){if(z7)return gN;z7=1;var t=pn(),e=b7e(),n=w7e(),r=E7e();gN=i;function i(a,u,c,f){var h=a.children(u),g=a.node(u),_=g?g.borderLeft:void 0,T=g?g.borderRight:void 0,E={};_&&(h=t.filter(h,function(O){return O!==_&&O!==T}));var b=e(a,h);t.forEach(b,function(O){if(a.children(O.v).length){var q=i(a,O.v,c,f);E[O.v]=q,t.has(q,"barycenter")&&s(O,q)}});var S=n(b,c);o(S,E);var C=r(S,f);if(_&&(C.vs=t.flatten([_,C.vs,T],!0),a.predecessors(_).length)){var R=a.node(a.predecessors(_)[0]),P=a.node(a.predecessors(T)[0]);t.has(C,"barycenter")||(C.barycenter=0,C.weight=0),C.barycenter=(C.barycenter*C.weight+R.order+P.order)/(C.weight+2),C.weight+=2}return C}function o(a,u){t.forEach(a,function(c){c.vs=t.flatten(c.vs.map(function(f){return u[f]?u[f].vs:f}),!0)})}function s(a,u){t.isUndefined(a.barycenter)?(a.barycenter=u.barycenter,a.weight=u.weight):(a.barycenter=(a.barycenter*a.weight+u.barycenter*u.weight)/(a.weight+u.weight),a.weight+=u.weight)}return gN}var yN,H7;function x7e(){if(H7)return yN;H7=1;var t=pn(),e=Qo().Graph;yN=n;function n(i,o,s){var a=r(i),u=new e({compound:!0}).setGraph({root:a}).setDefaultNodeLabel(function(c){return i.node(c)});return t.forEach(i.nodes(),function(c){var f=i.node(c),h=i.parent(c);(f.rank===o||f.minRank<=o&&o<=f.maxRank)&&(u.setNode(c),u.setParent(c,h||a),t.forEach(i[s](c),function(g){var _=g.v===c?g.w:g.v,T=u.edge(_,c),E=t.isUndefined(T)?0:T.weight;u.setEdge(_,c,{weight:i.edge(g).weight+E})}),t.has(f,"minRank")&&u.setNode(c,{borderLeft:f.borderLeft[o],borderRight:f.borderRight[o]}))}),u}function r(i){for(var o;i.hasNode(o=t.uniqueId("_root")););return o}return yN}var vN,G7;function S7e(){if(G7)return vN;G7=1;var t=pn();vN=e;function e(n,r,i){var o={},s;t.forEach(i,function(a){for(var u=n.parent(a),c,f;u;){if(c=n.parent(u),c?(f=o[c],o[c]=u):(f=s,s=u),f&&f!==u){r.setEdge(f,u);return}u=c}})}return vN}var _N,j7;function A7e(){if(j7)return _N;j7=1;var t=pn(),e=v7e(),n=_7e(),r=T7e(),i=x7e(),o=S7e(),s=Qo().Graph,a=gi();_N=u;function u(g){var _=a.maxRank(g),T=c(g,t.range(1,_+1),"inEdges"),E=c(g,t.range(_-1,-1,-1),"outEdges"),b=e(g);h(g,b);for(var S=Number.POSITIVE_INFINITY,C,R=0,P=0;P<4;++R,++P){f(R%2?T:E,R%4>=2),b=a.buildLayerMatrix(g);var O=n(g,b);O<S&&(P=0,C=t.cloneDeep(b),S=O)}h(g,C)}function c(g,_,T){return t.map(_,function(E){return i(g,E,T)})}function f(g,_){var T=new s;t.forEach(g,function(E){var b=E.graph().root,S=r(E,b,T,_);t.forEach(S.vs,function(C,R){E.node(C).order=R}),o(E,T,S.vs)})}function h(g,_){t.forEach(_,function(T){t.forEach(T,function(E,b){g.node(E).order=b})})}return _N}var bN,K7;function C7e(){if(K7)return bN;K7=1;var t=pn(),e=Qo().Graph,n=gi();bN={positionX:T,findType1Conflicts:r,findType2Conflicts:i,addConflict:s,hasConflict:a,verticalAlignment:u,horizontalCompaction:c,alignCoordinates:g,findSmallestWidthAlignment:h,balance:_};function r(S,C){var R={};function P(O,q){var D=0,L=0,N=O.length,U=t.last(q);return t.forEach(q,function(V,$){var F=o(S,V),H=F?S.node(F).order:N;(F||V===U)&&(t.forEach(q.slice(L,$+1),function(X){t.forEach(S.predecessors(X),function(K){var te=S.node(K),re=te.order;(re<D||H<re)&&!(te.dummy&&S.node(X).dummy)&&s(R,K,X)})}),L=$+1,D=H)}),q}return t.reduce(C,P),R}function i(S,C){var R={};function P(q,D,L,N,U){var V;t.forEach(t.range(D,L),function($){V=q[$],S.node(V).dummy&&t.forEach(S.predecessors(V),function(F){var H=S.node(F);H.dummy&&(H.order<N||H.order>U)&&s(R,F,V)})})}function O(q,D){var L=-1,N,U=0;return t.forEach(D,function(V,$){if(S.node(V).dummy==="border"){var F=S.predecessors(V);F.length&&(N=S.node(F[0]).order,P(D,U,$,L,N),U=$,L=N)}P(D,U,D.length,N,q.length)}),D}return t.reduce(C,O),R}function o(S,C){if(S.node(C).dummy)return t.find(S.predecessors(C),function(R){return S.node(R).dummy})}function s(S,C,R){if(C>R){var P=C;C=R,R=P}var O=S[C];O||(S[C]=O={}),O[R]=!0}function a(S,C,R){if(C>R){var P=C;C=R,R=P}return t.has(S[C],R)}function u(S,C,R,P){var O={},q={},D={};return t.forEach(C,function(L){t.forEach(L,function(N,U){O[N]=N,q[N]=N,D[N]=U})}),t.forEach(C,function(L){var N=-1;t.forEach(L,function(U){var V=P(U);if(V.length){V=t.sortBy(V,function(K){return D[K]});for(var $=(V.length-1)/2,F=Math.floor($),H=Math.ceil($);F<=H;++F){var X=V[F];q[U]===U&&N<D[X]&&!a(R,U,X)&&(q[X]=U,q[U]=O[U]=O[X],N=D[X])}}})}),{root:O,align:q}}function c(S,C,R,P,O){var q={},D=f(S,C,R,O),L=O?"borderLeft":"borderRight";function N($,F){for(var H=D.nodes(),X=H.pop(),K={};X;)K[X]?$(X):(K[X]=!0,H.push(X),H=H.concat(F(X))),X=H.pop()}function U($){q[$]=D.inEdges($).reduce(function(F,H){return Math.max(F,q[H.v]+D.edge(H))},0)}function V($){var F=D.outEdges($).reduce(function(X,K){return Math.min(X,q[K.w]-D.edge(K))},Number.POSITIVE_INFINITY),H=S.node($);F!==Number.POSITIVE_INFINITY&&H.borderType!==L&&(q[$]=Math.max(q[$],F))}return N(U,D.predecessors.bind(D)),N(V,D.successors.bind(D)),t.forEach(P,function($){q[$]=q[R[$]]}),q}function f(S,C,R,P){var O=new e,q=S.graph(),D=E(q.nodesep,q.edgesep,P);return t.forEach(C,function(L){var N;t.forEach(L,function(U){var V=R[U];if(O.setNode(V),N){var $=R[N],F=O.edge($,V);O.setEdge($,V,Math.max(D(S,U,N),F||0))}N=U})}),O}function h(S,C){return t.minBy(t.values(C),function(R){var P=Number.NEGATIVE_INFINITY,O=Number.POSITIVE_INFINITY;return t.forIn(R,function(q,D){var L=b(S,D)/2;P=Math.max(q+L,P),O=Math.min(q-L,O)}),P-O})}function g(S,C){var R=t.values(C),P=t.min(R),O=t.max(R);t.forEach(["u","d"],function(q){t.forEach(["l","r"],function(D){var L=q+D,N=S[L],U;if(N!==C){var V=t.values(N);U=D==="l"?P-t.min(V):O-t.max(V),U&&(S[L]=t.mapValues(N,function($){return $+U}))}})})}function _(S,C){return t.mapValues(S.ul,function(R,P){if(C)return S[C.toLowerCase()][P];var O=t.sortBy(t.map(S,P));return(O[1]+O[2])/2})}function T(S){var C=n.buildLayerMatrix(S),R=t.merge(r(S,C),i(S,C)),P={},O;t.forEach(["u","d"],function(D){O=D==="u"?C:t.values(C).reverse(),t.forEach(["l","r"],function(L){L==="r"&&(O=t.map(O,function($){return t.values($).reverse()}));var N=(D==="u"?S.predecessors:S.successors).bind(S),U=u(S,O,R,N),V=c(S,O,U.root,U.align,L==="r");L==="r"&&(V=t.mapValues(V,function($){return-$})),P[D+L]=V})});var q=h(S,P);return g(P,q),_(P,S.graph().align)}function E(S,C,R){return function(P,O,q){var D=P.node(O),L=P.node(q),N=0,U;if(N+=D.width/2,t.has(D,"labelpos"))switch(D.labelpos.toLowerCase()){case"l":U=-D.width/2;break;case"r":U=D.width/2;break}if(U&&(N+=R?U:-U),U=0,N+=(D.dummy?C:S)/2,N+=(L.dummy?C:S)/2,N+=L.width/2,t.has(L,"labelpos"))switch(L.labelpos.toLowerCase()){case"l":U=L.width/2;break;case"r":U=-L.width/2;break}return U&&(N+=R?U:-U),U=0,N}}function b(S,C){return S.node(C).width}return bN}var wN,W7;function I7e(){if(W7)return wN;W7=1;var t=pn(),e=gi(),n=C7e().positionX;wN=r;function r(o){o=e.asNonCompoundGraph(o),i(o),t.forEach(n(o),function(s,a){o.node(a).x=s})}function i(o){var s=e.buildLayerMatrix(o),a=o.graph().ranksep,u=0;t.forEach(s,function(c){var f=t.max(t.map(c,function(h){return o.node(h).height}));t.forEach(c,function(h){o.node(h).y=u+f/2}),u+=f+a})}return wN}var EN,Y7;function R7e(){if(Y7)return EN;Y7=1;var t=pn(),e=c7e(),n=f7e(),r=h7e(),i=gi().normalizeRanks,o=p7e(),s=gi().removeEmptyRanks,a=m7e(),u=g7e(),c=y7e(),f=A7e(),h=I7e(),g=gi(),_=Qo().Graph;EN=T;function T(J,ne){var oe=ne&&ne.debugTiming?g.time:g.notime;oe("layout",function(){var _e=oe("  buildLayoutGraph",function(){return N(J)});oe("  runLayout",function(){E(_e,oe)}),oe("  updateInputGraph",function(){b(J,_e)})})}function E(J,ne){ne("    makeSpaceForEdgeLabels",function(){U(J)}),ne("    removeSelfEdges",function(){Y(J)}),ne("    acyclic",function(){e.run(J)}),ne("    nestingGraph.run",function(){a.run(J)}),ne("    rank",function(){r(g.asNonCompoundGraph(J))}),ne("    injectEdgeLabelProxies",function(){V(J)}),ne("    removeEmptyRanks",function(){s(J)}),ne("    nestingGraph.cleanup",function(){a.cleanup(J)}),ne("    normalizeRanks",function(){i(J)}),ne("    assignRankMinMax",function(){$(J)}),ne("    removeEdgeLabelProxies",function(){F(J)}),ne("    normalize.run",function(){n.run(J)}),ne("    parentDummyChains",function(){o(J)}),ne("    addBorderSegments",function(){u(J)}),ne("    order",function(){f(J)}),ne("    insertSelfEdges",function(){G(J)}),ne("    adjustCoordinateSystem",function(){c.adjust(J)}),ne("    position",function(){h(J)}),ne("    positionSelfEdges",function(){Q(J)}),ne("    removeBorderNodes",function(){re(J)}),ne("    normalize.undo",function(){n.undo(J)}),ne("    fixupEdgeLabelCoords",function(){K(J)}),ne("    undoCoordinateSystem",function(){c.undo(J)}),ne("    translateGraph",function(){H(J)}),ne("    assignNodeIntersects",function(){X(J)}),ne("    reversePoints",function(){te(J)}),ne("    acyclic.undo",function(){e.undo(J)})}function b(J,ne){t.forEach(J.nodes(),function(oe){var _e=J.node(oe),Ce=ne.node(oe);_e&&(_e.x=Ce.x,_e.y=Ce.y,ne.children(oe).length&&(_e.width=Ce.width,_e.height=Ce.height))}),t.forEach(J.edges(),function(oe){var _e=J.edge(oe),Ce=ne.edge(oe);_e.points=Ce.points,t.has(Ce,"x")&&(_e.x=Ce.x,_e.y=Ce.y)}),J.graph().width=ne.graph().width,J.graph().height=ne.graph().height}var S=["nodesep","edgesep","ranksep","marginx","marginy"],C={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},R=["acyclicer","ranker","rankdir","align"],P=["width","height"],O={width:0,height:0},q=["minlen","weight","width","height","labeloffset"],D={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},L=["labelpos"];function N(J){var ne=new _({multigraph:!0,compound:!0}),oe=fe(J.graph());return ne.setGraph(t.merge({},C,Z(oe,S),t.pick(oe,R))),t.forEach(J.nodes(),function(_e){var Ce=fe(J.node(_e));ne.setNode(_e,t.defaults(Z(Ce,P),O)),ne.setParent(_e,J.parent(_e))}),t.forEach(J.edges(),function(_e){var Ce=fe(J.edge(_e));ne.setEdge(_e,t.merge({},D,Z(Ce,q),t.pick(Ce,L)))}),ne}function U(J){var ne=J.graph();ne.ranksep/=2,t.forEach(J.edges(),function(oe){var _e=J.edge(oe);_e.minlen*=2,_e.labelpos.toLowerCase()!=="c"&&(ne.rankdir==="TB"||ne.rankdir==="BT"?_e.width+=_e.labeloffset:_e.height+=_e.labeloffset)})}function V(J){t.forEach(J.edges(),function(ne){var oe=J.edge(ne);if(oe.width&&oe.height){var _e=J.node(ne.v),Ce=J.node(ne.w),ye={rank:(Ce.rank-_e.rank)/2+_e.rank,e:ne};g.addDummyNode(J,"edge-proxy",ye,"_ep")}})}function $(J){var ne=0;t.forEach(J.nodes(),function(oe){var _e=J.node(oe);_e.borderTop&&(_e.minRank=J.node(_e.borderTop).rank,_e.maxRank=J.node(_e.borderBottom).rank,ne=t.max(ne,_e.maxRank))}),J.graph().maxRank=ne}function F(J){t.forEach(J.nodes(),function(ne){var oe=J.node(ne);oe.dummy==="edge-proxy"&&(J.edge(oe.e).labelRank=oe.rank,J.removeNode(ne))})}function H(J){var ne=Number.POSITIVE_INFINITY,oe=0,_e=Number.POSITIVE_INFINITY,Ce=0,ye=J.graph(),Ie=ye.marginx||0,Le=ye.marginy||0;function be(Qe){var Be=Qe.x,Ve=Qe.y,at=Qe.width,Pe=Qe.height;ne=Math.min(ne,Be-at/2),oe=Math.max(oe,Be+at/2),_e=Math.min(_e,Ve-Pe/2),Ce=Math.max(Ce,Ve+Pe/2)}t.forEach(J.nodes(),function(Qe){be(J.node(Qe))}),t.forEach(J.edges(),function(Qe){var Be=J.edge(Qe);t.has(Be,"x")&&be(Be)}),ne-=Ie,_e-=Le,t.forEach(J.nodes(),function(Qe){var Be=J.node(Qe);Be.x-=ne,Be.y-=_e}),t.forEach(J.edges(),function(Qe){var Be=J.edge(Qe);t.forEach(Be.points,function(Ve){Ve.x-=ne,Ve.y-=_e}),t.has(Be,"x")&&(Be.x-=ne),t.has(Be,"y")&&(Be.y-=_e)}),ye.width=oe-ne+Ie,ye.height=Ce-_e+Le}function X(J){t.forEach(J.edges(),function(ne){var oe=J.edge(ne),_e=J.node(ne.v),Ce=J.node(ne.w),ye,Ie;oe.points?(ye=oe.points[0],Ie=oe.points[oe.points.length-1]):(oe.points=[],ye=Ce,Ie=_e),oe.points.unshift(g.intersectRect(_e,ye)),oe.points.push(g.intersectRect(Ce,Ie))})}function K(J){t.forEach(J.edges(),function(ne){var oe=J.edge(ne);if(t.has(oe,"x"))switch((oe.labelpos==="l"||oe.labelpos==="r")&&(oe.width-=oe.labeloffset),oe.labelpos){case"l":oe.x-=oe.width/2+oe.labeloffset;break;case"r":oe.x+=oe.width/2+oe.labeloffset;break}})}function te(J){t.forEach(J.edges(),function(ne){var oe=J.edge(ne);oe.reversed&&oe.points.reverse()})}function re(J){t.forEach(J.nodes(),function(ne){if(J.children(ne).length){var oe=J.node(ne),_e=J.node(oe.borderTop),Ce=J.node(oe.borderBottom),ye=J.node(t.last(oe.borderLeft)),Ie=J.node(t.last(oe.borderRight));oe.width=Math.abs(Ie.x-ye.x),oe.height=Math.abs(Ce.y-_e.y),oe.x=ye.x+oe.width/2,oe.y=_e.y+oe.height/2}}),t.forEach(J.nodes(),function(ne){J.node(ne).dummy==="border"&&J.removeNode(ne)})}function Y(J){t.forEach(J.edges(),function(ne){if(ne.v===ne.w){var oe=J.node(ne.v);oe.selfEdges||(oe.selfEdges=[]),oe.selfEdges.push({e:ne,label:J.edge(ne)}),J.removeEdge(ne)}})}function G(J){var ne=g.buildLayerMatrix(J);t.forEach(ne,function(oe){var _e=0;t.forEach(oe,function(Ce,ye){var Ie=J.node(Ce);Ie.order=ye+_e,t.forEach(Ie.selfEdges,function(Le){g.addDummyNode(J,"selfedge",{width:Le.label.width,height:Le.label.height,rank:Ie.rank,order:ye+ ++_e,e:Le.e,label:Le.label},"_se")}),delete Ie.selfEdges})})}function Q(J){t.forEach(J.nodes(),function(ne){var oe=J.node(ne);if(oe.dummy==="selfedge"){var _e=J.node(oe.e.v),Ce=_e.x+_e.width/2,ye=_e.y,Ie=oe.x-Ce,Le=_e.height/2;J.setEdge(oe.e,oe.label),J.removeNode(ne),oe.label.points=[{x:Ce+2*Ie/3,y:ye-Le},{x:Ce+5*Ie/6,y:ye-Le},{x:Ce+Ie,y:ye},{x:Ce+5*Ie/6,y:ye+Le},{x:Ce+2*Ie/3,y:ye+Le}],oe.label.x=oe.x,oe.label.y=oe.y}})}function Z(J,ne){return t.mapValues(t.pick(J,ne),Number)}function fe(J){var ne={};return t.forEach(J,function(oe,_e){ne[_e.toLowerCase()]=oe}),ne}return EN}var TN,J7;function P7e(){if(J7)return TN;J7=1;var t=pn(),e=gi(),n=Qo().Graph;TN={debugOrdering:r};function r(i){var o=e.buildLayerMatrix(i),s=new n({compound:!0,multigraph:!0}).setGraph({});return t.forEach(i.nodes(),function(a){s.setNode(a,{label:a}),s.setParent(a,"layer"+i.node(a).rank)}),t.forEach(i.edges(),function(a){s.setEdge(a.v,a.w,{},a.name)}),t.forEach(o,function(a,u){var c="layer"+u;s.setNode(c,{rank:"same"}),t.reduce(a,function(f,h){return s.setEdge(f,h,{style:"invis"}),h})}),s}return TN}var xN,X7;function N7e(){return X7||(X7=1,xN="0.8.5"),xN}var SN,Q7;function M7e(){return Q7||(Q7=1,SN={graphlib:Qo(),layout:R7e(),debug:P7e(),util:{time:gi().time,notime:gi().notime},version:N7e()}),SN}var D7e=M7e();const Z7=Ao(D7e),eK=200,tK=50,k7e=(t,e=[])=>{var a,u,c;const n=[],r=[],i=new Set,o=new Map;e.forEach(f=>{o.set(f.nodeId,f)});const s=f=>typeof f=="string"?f:f[t.meta.defaultLocale||"ru"]||Object.values(f)[0]||"";for(const f in t.nodes){const h=t.nodes[f];h.choices&&h.choices.forEach(g=>{g.to&&i.add(g.to)}),h.branch&&h.branch.forEach(g=>{g.to&&i.add(g.to)}),h.fallback&&i.add(h.fallback)}for(const f in t.nodes){const h=t.nodes[f],g=f!=="start"&&!i.has(f),_=(((a=h.choices)==null?void 0:a.length)||0)>0||(((u=h.branch)==null?void 0:u.length)||0)>0||!!h.fallback,T=!!h.end,E=(i.has(f)||f==="start")&&!_&&!T,b=o.get(f);n.push({id:f,type:"custom",position:h.position||{x:0,y:0},data:{label:f,isEnd:T,endType:(c=h.end)==null?void 0:c.type,isOrphan:g||(b==null?void 0:b.type)==="ORPHAN_NODE",isDeadEnd:E||(b==null?void 0:b.type)==="DEAD_END",isError:!!b,errorType:b==null?void 0:b.type,errorDetails:b==null?void 0:b.details}}),h.choices&&h.choices.forEach((S,C)=>{S.to&&t.nodes[S.to]&&r.push({id:`e-${f}-${S.to}-${C}`,source:f,target:S.to,label:s(S.label),type:"custom",markerEnd:{type:ay.ArrowClosed}})})}return{nodes:n,edges:r}},nK=t=>{const e=new Z7.graphlib.Graph;e.setGraph({rankdir:"TB",nodesep:150,ranksep:150}),e.setDefaultEdgeLabel(()=>({}));for(const r in t.nodes){e.setNode(r,{width:eK,height:tK});const i=t.nodes[r];i.choices&&i.choices.forEach(o=>{o.to&&t.nodes[o.to]&&e.setEdge(r,o.to)})}Z7.layout(e);const n=JSON.parse(JSON.stringify(t));return e.nodes().forEach(r=>{const i=e.node(r);n.nodes[r]&&(n.nodes[r].position={x:i.x-eK/2,y:i.y-tK/2})}),n},O7e=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{d:"M17 3H5a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2zm-3 12H8v-4h6v4zm2-6H5V5h12v4z"})}),L7e=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),V7e=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),U7e=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13V7m0 13a2 2 0 01-2 2H7a2 2 0 01-2-2V9a2 2 0 012-2h2a2 2 0 012 2v11zM15 20l5.447-2.724A1 1 0 0021 16.382V5.618a1 1 0 00-1.447-.894L15 7m0 13V7m0 13a2 2 0 002 2h2a2 2 0 002-2V9a2 2 0 00-2-2h-2a2 2 0 00-2 2v11z"})}),q7e=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),F7e=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-stone-400",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})}),B7e=()=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),$7e=()=>{const{questId:t}=O2(),e=cy(),[n,r]=M.useState(null),[i,o]=M.useState(null),[s,a]=M.useState("draft"),[u,c]=M.useState("start"),[f,h]=M.useState(!0),[g,_]=M.useState(!1),[T,E]=M.useState(""),[b,S]=M.useState(null),[C,R]=M.useState("map"),[P,O]=M.useState(!1),[q,D]=M.useState(null),[L,N]=M.useState(!1),[U,V]=M.useState(""),[$,F]=M.useState(null),[H,X]=M.useState(null),[K,te]=M.useState({loading:!1,error:"",results:[],isOpen:!1}),[re,Y]=M.useState({loading:!1,error:"",summary:"",isOpen:!1}),[G,Q,Z]=r4e([]),[fe,J,ne]=i4e([]),oe=M.useCallback(Te=>{Z(Te),Te.forEach(ke=>{ke.type==="position"&&!ke.dragging&&ke.position&&o(Ue=>{if(!Ue)return null;const Oe={...Ue.nodes},Ye=Oe[ke.id];return Ye?(Oe[ke.id]={...Ye,position:ke.position},{...Ue,nodes:Oe}):Ue})})},[Z,o]);M.useEffect(()=>{if(!t){E("Квест не найден."),h(!1);return}(async()=>{h(!0);const ke=Ui(Tr,"games",t);try{const Ue=await Dy(ke);if(Ue.exists()){const Oe={id:Ue.id,...Ue.data()};r(Oe);let Ye=JSON.parse(JSON.stringify(Oe.dsl));Object.values(Ye.nodes).some(Pt=>!Pt.position)&&(Ye=nK(Ye)),a(Oe.status||"draft"),o(Ye)}else E("Квест не найден.")}catch(Ue){console.error(Ue),E("Ошибка загрузки квеста.")}finally{h(!1)}})()},[t]);const _e=M.useMemo(()=>i?k7e(i):{nodes:[],edges:[]},[i]);M.useEffect(()=>{Q(_e.nodes),J(_e.edges)},[_e,Q,J]),M.useEffect(()=>{if(!i)return;const Te=new Set;q&&(Te.add(q),_e.edges.forEach(Ue=>{Ue.source===q&&Te.add(Ue.target),Ue.target===q&&Te.add(Ue.source)}));const ke=new Set;L&&u&&(ke.add(u),_e.edges.forEach(Ue=>{Ue.source===u&&ke.add(Ue.target),Ue.target===u&&ke.add(Ue.source)})),Q(Ue=>Ue.map(Oe=>({...Oe,hidden:L&&u?!ke.has(Oe.id):!1,data:{...Oe.data,isNeighbor:Te.has(Oe.id),isFaded:q?!Te.has(Oe.id):!1}}))),J(Ue=>Ue.map(Oe=>{const Ye=q?Oe.source===q||Oe.target===q:!1;return{...Oe,hidden:L&&u?!(ke.has(Oe.source)&&ke.has(Oe.target)):!1,data:{...Oe.data,isHighlighted:Ye,isFaded:q?!Ye:!1}}}))},[i,u,q,L,Q,J,_e.edges]);const Ce=M.useCallback(Te=>{o(Te)},[]),ye=Te=>{a(Te)},Ie=async()=>{if(!(!t||!i)){_(!0);try{await hh(Ui(Tr,"games",t),{title:i.meta.title,dsl:i,status:s,updatedAt:Ia()}),S(new Date)}catch(Te){console.error(Te),alert("Не удалось сохранить изменения.")}finally{_(!1)}}},Le=Te=>{o(ke=>{var Ye;if(!ke)return null;const Ue={...ke,nodes:{...ke.nodes}},Oe=((Ye=ke.nodes[u])==null?void 0:Ye.position)||{x:0,y:150};return Ue.nodes[Te]={text:"Новый узел...",position:{x:Oe.x,y:Oe.y+120}},Ue}),c(Te)},be=Te=>{const ke=`node_${Date.now()}`;o(Ue=>{var Ct;if(!Ue)return null;const Oe=JSON.parse(JSON.stringify(Ue)),Ye=((Ct=Oe.nodes[Te])==null?void 0:Ct.position)||{x:0,y:0};return Oe.nodes[ke]={text:"Новый связанный узел",position:{x:Ye.x,y:Ye.y+120}},Oe.nodes[Te].choices||(Oe.nodes[Te].choices=[]),Oe.nodes[Te].choices.push({label:"Перейти к новому узлу",to:ke}),Oe}),c(ke),F(ke)},Qe=(Te,ke)=>{o(Ue=>{if(!Ue)return null;const Oe=JSON.parse(JSON.stringify(Ue));return Oe.nodes[ke]=Oe.nodes[Te],delete Oe.nodes[Te],Object.values(Oe.nodes).forEach(Ye=>{Ye.choices&&Ye.choices.forEach(Ct=>{Ct.to===Te&&(Ct.to=ke)}),Ye.branch&&Ye.branch.forEach(Ct=>{Ct.to===Te&&(Ct.to=ke)}),Ye.fallback===Te&&(Ye.fallback=ke)}),Oe}),u===Te&&c(ke)},Be=Te=>{o(ke=>{if(!ke)return null;const Ue=JSON.parse(JSON.stringify(ke));return delete Ue.nodes[Te],Object.values(Ue.nodes).forEach(Oe=>{Oe.choices&&(Oe.choices=Oe.choices.map(Ye=>Ye.to===Te?{...Ye,to:""}:Ye)),Oe.branch&&(Oe.branch=Oe.branch.filter(Ye=>Ye.to!==Te)),Oe.fallback===Te&&(Oe.fallback=void 0)}),Ue}),u===Te&&c("start")},Ve=async()=>{if(i){te({loading:!0,error:"",results:[],isOpen:!0});try{const Te=await BGe(i);te({loading:!1,error:"",results:Te,isOpen:!0})}catch(Te){te({loading:!1,error:Te.message,results:[],isOpen:!0})}}},at=async()=>{if(i){Y({loading:!0,error:"",summary:"",isOpen:!0});try{const Te=yje(i);if(Te.length===0){Y({loading:!1,error:"",summary:"✅ Автоматический тест не выявил логических тупиков или нерешаемых загадок.",isOpen:!0});return}const ke=await $Ge(Te);Y({loading:!1,error:"",summary:ke,isOpen:!0})}catch(Te){Y({loading:!1,error:Te.message,summary:"",isOpen:!0})}}},Pe=(Te,ke)=>{o(Ue=>{var Oe,Ye;if(!Ue)return null;try{const Ct=JSON.parse(JSON.stringify(Ue));let Pt=!1;const Ft=Ct.nodes[Te.nodeId];if(!Ft)throw new Error(`Node with id '${Te.nodeId}' not found.`);switch(ke.action){case"CREATE_NODE":if(ke.details.newNodeId&&!Ct.nodes[ke.details.newNodeId]&&ke.details.generatedText&&(Ct.nodes[ke.details.newNodeId]={text:ke.details.generatedText},Ft.choices)){let lt=ke.details.choiceIndex;if(lt===void 0&&((Oe=Te.details)!=null&&Oe.choiceLabel)&&(lt=Ft.choices.findIndex(wt=>wt.label===Te.details.choiceLabel)),lt!==void 0&&lt>-1){const wt=Ft.choices[lt];wt&&(wt.to=ke.details.newNodeId,Pt=!0)}}break;case"DELETE_CHOICE":if(Ft.choices){let lt=ke.details.choiceIndex;lt===void 0&&((Ye=Te.details)!=null&&Ye.choiceLabel)&&(lt=Ft.choices.findIndex(wt=>wt.label===Te.details.choiceLabel)),lt!==void 0&&lt>-1&&Ft.choices[lt]&&(Ft.choices.splice(lt,1),Pt=!0)}break;case"DELETE_NODE":Ct.nodes[Te.nodeId]&&Te.nodeId!=="start"&&(delete Ct.nodes[Te.nodeId],Pt=!0);break}return Pt?(te(lt=>({...lt,results:lt.results.filter(wt=>wt!==Te)})),Ct):(alert("Не удалось применить исправление (возможно, данные устарели)."),Ue)}catch(Ct){return alert(`Ошибка при применении исправления: ${Ct.message}`),Ue}})},qe=Te=>{c(Te),O(!0)},ot=Te=>{Te==="list"&&u&&(i!=null&&i.nodes[u])&&O(!1),R(Te)},Tt=()=>{o(Te=>Te?nK(Te):null)},En=Te=>{c(Te),F(Te),V("")},Nn=M.useCallback((Te,ke)=>{Te.preventDefault(),X({x:Te.clientX,y:Te.clientY,nodeId:ke.id})},[]),Rt=M.useMemo(()=>!U||!i?[]:Object.keys(i.nodes).filter(Te=>Te.toLowerCase().includes(U.toLowerCase())).slice(0,5),[U,i]);if(f)return I.jsx("div",{className:"text-center p-8 font-display text-2xl text-stone-400 animate-pulse",children:"ЗАГРУЗКА РЕДАКТОРА..."});if(T)return I.jsx("div",{className:"text-center p-8 text-2xl text-red-500",children:T});if(!n||!i)return null;const Mn=({mode:Te,label:ke,children:Ue})=>I.jsxs("button",{onClick:()=>ot(Te),className:`flex items-center justify-center w-full px-4 py-2 font-display text-lg rounded-t-md transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-500
            ${C===Te?"bg-stone-800 text-amber-400":"bg-stone-900/50 text-stone-400 hover:bg-stone-800/80"}`,children:[Ue,ke]});return I.jsxs("div",{className:"container mx-auto py-8 px-4",children:[I.jsxs("header",{className:"flex flex-wrap justify-between items-center gap-4 mb-6",children:[I.jsxs("div",{className:"flex items-center gap-4 flex-grow min-w-0",children:[I.jsx("button",{onClick:()=>e("/admin"),className:"bg-stone-700 hover:bg-stone-600 text-stone-200 font-semibold py-2 px-4 rounded-md transition-colors flex-shrink-0",children:"← Назад"}),I.jsx("input",{type:"text",value:i.meta.title,onChange:Te=>Ce(ke=>ke?{...ke,meta:{...ke.meta,title:Te.target.value}}:null),className:"font-display text-4xl text-stone-200 bg-transparent border-0 focus:ring-2 focus:ring-amber-500 rounded-md p-1 truncate"}),I.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[I.jsx("label",{htmlFor:"quest-status",className:"text-sm font-bold text-stone-400 flex-shrink-0",children:"Статус:"}),I.jsxs("div",{className:"relative",children:[I.jsx("span",{className:`absolute left-2.5 top-1/2 -translate-y-1/2 h-2.5 w-2.5 rounded-full z-10 ${s==="published"?"bg-green-400":"bg-sky-400"}`}),I.jsxs("select",{id:"quest-status",value:s,onChange:Te=>ye(Te.target.value),className:`w-full bg-stone-700 border border-stone-600 rounded-md pl-7 pr-4 py-1.5 focus:ring-2 focus:ring-amber-500 focus:outline-none font-semibold ${s==="published"?"text-green-300":"text-sky-300"}`,children:[I.jsx("option",{value:"draft",children:"Черновик"}),I.jsx("option",{value:"published",children:"Опубликован"})]})]})]})]}),I.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[b&&I.jsxs("span",{className:"text-sm text-stone-400",children:["Сохранено: ",b.toLocaleTimeString()]}),I.jsxs("button",{onClick:at,disabled:re.loading,className:"flex items-center justify-center font-display text-lg bg-purple-600 text-white py-2 px-4 rounded-md hover:bg-purple-500 transition-colors disabled:bg-stone-600",children:[I.jsx(B7e,{})," ",re.loading?"ТЕСТИРОВАНИЕ...":"AI-Плейтестер"]}),I.jsxs("button",{onClick:Ve,disabled:K.loading,className:"flex items-center justify-center font-display text-lg bg-teal-600 text-white py-2 px-4 rounded-md hover:bg-teal-500 transition-colors disabled:bg-stone-600",children:[I.jsx(L7e,{})," ",K.loading?"АНАЛИЗ...":"Проверить синтаксис"]}),I.jsxs("button",{onClick:Ie,disabled:g,className:"flex items-center justify-center font-display text-lg bg-amber-500 text-stone-900 py-2 px-4 rounded-md hover:bg-amber-400 transition-colors disabled:bg-stone-600 disabled:cursor-not-allowed",children:[I.jsx(O7e,{})," ",g?"СОХРАНЕНИЕ...":"СОХРАНИТЬ"]})]})]}),I.jsxs("main",{className:"relative",children:[I.jsxs("div",{className:`${C==="map"?"block":"grid grid-cols-1 md:grid-cols-4 gap-6"}`,children:[I.jsxs("div",{className:`${C==="map"?"h-[75vh]":"md:col-span-1 h-full max-h-[75vh]"} bg-stone-800/50 border border-stone-700 p-4 rounded-md flex flex-col`,children:[I.jsxs("div",{className:"flex mb-4 flex-shrink-0 items-center gap-4",children:[I.jsxs("div",{className:"flex-grow flex",children:[I.jsx(Mn,{mode:"list",label:"Список",children:I.jsx(V7e,{})}),I.jsx(Mn,{mode:"map",label:"Карта",children:I.jsx(U7e,{})})]}),C==="map"&&I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"relative",children:[I.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:I.jsx(F7e,{})}),I.jsx("input",{type:"text",value:U,onChange:Te=>V(Te.target.value),placeholder:"Поиск узла...",className:"bg-stone-900 text-stone-200 border border-stone-600 rounded-md py-2 pl-10 pr-4 focus:ring-2 focus:ring-amber-500 focus:outline-none"}),Rt.length>0&&I.jsx("div",{className:"absolute z-10 mt-1 w-full bg-stone-700 border border-stone-600 rounded-md shadow-lg",children:Rt.map(Te=>I.jsx("button",{onClick:()=>En(Te),className:"block w-full text-left px-4 py-2 text-sm text-stone-200 hover:bg-stone-600",children:Te},Te))})]}),I.jsxs("label",{htmlFor:"focus-toggle",className:"flex items-center cursor-pointer",title:"Показать только выбранный узел и его соседей",children:[I.jsx("span",{className:"mr-2 text-sm font-semibold text-stone-300",children:"Фокус"}),I.jsxs("div",{className:"relative",children:[I.jsx("input",{type:"checkbox",id:"focus-toggle",className:"sr-only",checked:L,onChange:()=>N(!L)}),I.jsx("div",{className:`block ${L?"bg-amber-500":"bg-stone-600"} w-12 h-6 rounded-full transition-colors`}),I.jsx("div",{className:`dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform ${L?"transform translate-x-6":""}`})]})]}),I.jsx("button",{onClick:Tt,className:"p-2 bg-stone-700 text-stone-200 rounded-md hover:bg-stone-600 hover:text-amber-400 transition-colors",title:"Авто-сортировка",children:I.jsx(q7e,{})})]})]}),C==="list"&&I.jsx(N4e,{dsl:i,selectedNodeId:u,onSelectNode:c,onCreateNode:Le,onRenameNode:Qe,onDeleteNode:Be}),C==="map"&&I.jsx(wL,{children:I.jsx(dje,{nodes:G,edges:fe,onNodesChange:oe,onEdgesChange:ne,selectedNodeId:u,onSelectNode:qe,onNodeToFocus:$,onClearNodeToFocus:()=>F(null),onNodeMouseEnter:(Te,ke)=>D(ke.id),onNodeMouseLeave:()=>D(null),onNodeContextMenu:Nn})})]}),C==="list"&&I.jsx("div",{className:"md:col-span-3",children:I.jsx(NH,{questId:t,dsl:i,selectedNodeId:u,onDslChange:Ce},u)})]}),I.jsx("div",{className:`fixed top-0 right-0 h-full w-full md:w-1/2 lg:w-[450px] z-30 transition-transform duration-300 ease-in-out transform ${P?"translate-x-0":"translate-x-full"}`,children:u&&i.nodes[u]&&I.jsx(NH,{questId:t,dsl:i,selectedNodeId:u,onDslChange:Ce,onClose:()=>O(!1)},u)}),P&&I.jsx("div",{className:"fixed inset-0 bg-black/50 z-20 md:hidden",onClick:()=>O(!1)})]}),H&&I.jsx(gje,{x:H.x,y:H.y,nodeId:H.nodeId,onClose:()=>X(null),onRename:Te=>{c(Te),alert("Функция переименования из контекстного меню будет добавлена. Пока используйте список слева.")},onDelete:Be,onCreateConnected:be}),I.jsx(ije,{isOpen:K.isOpen,onClose:()=>te(Te=>({...Te,isOpen:!1})),analysisState:K,onApplySuggestion:Pe}),I.jsx(sje,{isOpen:re.isOpen,onClose:()=>Y(Te=>({...Te,isOpen:!1})),playtestState:re})]})},rK=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),z7e=()=>{const t=cy(),[e,n]=M.useState({prompt:"",keywords:"",nodesCount:"8-12"}),[r,i]=M.useState("Киберпанк-нуар"),[o,s]=M.useState(""),[a,u]=M.useState("prototype"),[c,f]=M.useState({loading:!1,error:""}),h=T=>{const{name:E,value:b}=T.target;n(S=>({...S,[E]:b}))},g=T=>{i(T.target.value)},_=async T=>{T.preventDefault();const E=r==="__CUSTOM__"?o:r;if(!E.trim()){f({loading:!1,error:"Пожалуйста, укажите жанр."});return}f({loading:!0,error:""});try{const b={...e,genre:E,mode:a},S=await FGe(b),C=`AI: ${e.prompt.substring(0,30)}...`,P={format:"bk-quest@1",meta:{id:`quest_ai_${Date.now()}`,title:C,version:1,defaultLocale:"ru"},assets:{images:{},audio:{}},state:{vars:{},inventory:[]},nodes:S},O=await Gg(Rs(Tr,"games"),{title:C,status:"draft",createdAt:Ia(),updatedAt:Ia(),dsl:P});t(`/admin/quest/${O.id}`)}catch(b){f({loading:!1,error:b.message})}};return I.jsxs("div",{className:"container mx-auto py-8 px-4",children:[I.jsx("div",{className:"flex items-center mb-6",children:I.jsx("button",{onClick:()=>t("/admin"),className:"bg-stone-700 hover:bg-stone-600 text-stone-200 font-semibold py-2 px-4 rounded-md transition-colors flex-shrink-0",children:"← Назад"})}),I.jsxs("div",{className:"max-w-4xl mx-auto bg-stone-800/50 border border-stone-700 p-8 rounded-md",children:[I.jsxs("h2",{className:"font-display text-4xl text-amber-400 mb-2 flex items-center",children:[I.jsx(rK,{}),"AI-Сценарист"]}),I.jsx("p",{className:"text-stone-400 mb-6",children:"Опишите вашу идею, выберите режим, и AI создаст целостный сценарий, который вы сможете доработать в редакторе."}),I.jsxs("form",{onSubmit:_,className:"space-y-6",children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:"prompt",className:"text-sm font-bold text-stone-300 block mb-2",children:"Основная завязка сюжета:"}),I.jsx("textarea",{id:"prompt",name:"prompt",value:e.prompt,onChange:h,className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all h-32 resize-y",placeholder:"Напр.: Детектив в киберпанк-городе расследует исчезновение ученого. Квест начинается в его мрачном офисе...",required:!0})]}),I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:"genre",className:"text-sm font-bold text-stone-300 block mb-2",children:"Жанр / Сеттинг:"}),I.jsxs("select",{id:"genre",name:"genre",value:r,onChange:g,className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",children:[I.jsx("option",{children:"Киберпанк-нуар"}),I.jsx("option",{children:"Темное фэнтези"}),I.jsx("option",{children:"Научная фантастика"}),I.jsx("option",{children:"Космический хоррор"}),I.jsx("option",{children:"Мистический триллер"}),I.jsx("option",{children:"Детектив"}),I.jsx("option",{children:"Постапокалипсис"}),I.jsx("option",{children:"Выживание"}),I.jsx("option",{children:"Приключение"}),I.jsx("option",{value:"__CUSTOM__",children:"Свой вариант..."})]})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"keywords",className:"text-sm font-bold text-stone-300 block mb-2",children:"Ключевые элементы (через запятую):"}),I.jsx("input",{id:"keywords",name:"keywords",type:"text",value:e.keywords,onChange:h,className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",placeholder:"Напр.: импланты, корпорация, дождь"})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"nodesCount",className:"text-sm font-bold text-stone-300 block mb-2",children:"Примерное кол-во узлов:"}),I.jsx("input",{id:"nodesCount",name:"nodesCount",type:"text",value:e.nodesCount,onChange:h,className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",placeholder:"Напр.: 8-12"})]})]}),r==="__CUSTOM__"&&I.jsxs("div",{children:[I.jsx("label",{htmlFor:"customGenre",className:"text-sm font-bold text-stone-300 block mb-2",children:"Ваш собственный жанр:"}),I.jsx("input",{id:"customGenre",name:"customGenre",type:"text",value:o,onChange:T=>s(T.target.value),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",placeholder:"Напр.: Подводное стимпанк-королевство грибов",required:!0})]}),I.jsxs("div",{className:"space-y-4 pt-4 border-t border-stone-600",children:[I.jsx("label",{className:"text-sm font-bold text-stone-300 block mb-2",children:"Режим генерации:"}),I.jsxs("div",{className:"flex bg-stone-900 p-1 rounded-md",children:[I.jsxs("button",{type:"button",onClick:()=>u("prototype"),className:`w-1/2 p-2 rounded-md font-semibold transition-colors text-sm ${a==="prototype"?"bg-sky-600 text-white":"text-stone-300 hover:bg-stone-700"}`,children:[I.jsx("h4",{className:"font-bold",children:"Быстрый Прототип"}),I.jsx("p",{className:"font-normal text-xs text-stone-400",children:"Для быстрых набросков и проверки идей."})]}),I.jsxs("button",{type:"button",onClick:()=>u("deep"),className:`w-1/2 p-2 rounded-md font-semibold transition-colors text-sm ${a==="deep"?"bg-amber-500 text-stone-900":"text-stone-300 hover:bg-stone-700"}`,children:[I.jsx("h4",{className:"font-bold",children:"Глубокая Проработка"}),I.jsx("p",{className:"font-normal text-xs text-stone-400",children:"Для качественного, нелинейного сюжета."})]})]})]}),I.jsx("div",{className:"pt-4 border-t border-stone-700",children:I.jsxs("button",{type:"submit",disabled:c.loading,className:"w-full flex items-center justify-center font-display text-2xl bg-sky-600 text-white py-3 px-6 rounded-md hover:bg-sky-500 transition-colors disabled:bg-stone-600 disabled:cursor-not-allowed",children:[I.jsx(rK,{}),c.loading?"СОЗДАНИЕ СЦЕНАРИЯ...":"СГЕНЕРИРОВАТЬ КВЕСТ"]})}),c.error&&I.jsx("p",{className:"text-red-500 text-center text-sm",children:c.error})]})]})]})},H7e=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{fillRule:"evenodd",d:"M10 2a4 4 0 00-4 4v4H4a2 2 0 00-2 2v6a2 2 0 002 2h12a2 2 0 002-2v-6a2 2 0 00-2-2h-2V6a4 4 0 00-4-4zm-2 6V6a2 2 0 114 0v4H8z",clipRule:"evenodd"})}),iK=()=>{const[t,e]=M.useState(""),[n,r]=M.useState(""),[i,o]=M.useState(""),s=async a=>{a.preventDefault(),o("");try{await _g.signInWithEmailAndPassword(t,n)}catch(u){o("Ошибка входа. Проверьте почту и пароль."),console.error(u)}};return I.jsx("div",{className:"flex flex-col items-center justify-center min-h-[60vh]",children:I.jsxs("div",{className:"w-full max-w-sm p-8 bg-stone-800/50 border border-stone-700 rounded-md shadow-lg",children:[I.jsx("h2",{className:"font-display text-3xl text-center text-stone-200 mb-6 tracking-wider",children:"ВХОД В ПАНЕЛЬ"}),I.jsxs("form",{onSubmit:s,className:"space-y-4",children:[I.jsx("input",{type:"email",value:t,onChange:a=>e(a.target.value),placeholder:"Email",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all","aria-label":"Email",required:!0}),I.jsx("input",{type:"password",value:n,onChange:a=>r(a.target.value),placeholder:"Пароль",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all","aria-label":"Password",required:!0}),I.jsxs("button",{type:"submit",className:"w-full flex items-center justify-center font-display text-xl bg-amber-500 text-stone-900 py-2 rounded-md hover:bg-amber-400 transition-colors",children:[I.jsx(H7e,{}),"ВОЙТИ"]}),i&&I.jsx("p",{className:"text-red-500 text-center text-sm mt-4",children:i})]})]})})},G7e=()=>I.jsx("header",{className:"bg-black/50 border-b-2 border-amber-500/50 p-4 sticky top-0 z-20 backdrop-blur-sm",children:I.jsxs("div",{className:"container mx-auto text-center",children:[I.jsx("a",{href:"/#",className:"font-display text-4xl md:text-5xl text-amber-400 tracking-widest no-underline",children:"B_KOMHATE"}),I.jsx("p",{className:"text-stone-400 text-sm tracking-wider",children:"QUEST & CODEWORD PLATFORM"})]})}),oK=()=>I.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] text-center p-4",children:[I.jsx("h2",{className:"font-display text-6xl text-red-500",children:"404"}),I.jsx("p",{className:"text-stone-300 text-xl mt-2",children:"Страница не найдена."}),I.jsx("a",{href:"/#/admin",className:"text-amber-400 hover:text-amber-300 mt-4",children:"Перейти в панель управления"})]}),j7e=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),K7e=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),W7e=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{d:"M17 3H5a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2zm-3 12H8v-4h6v4zm2-6H5V5h12v4z"})}),Y7e=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 110 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})}),J7e=({dsl:t,playerState:e,currentNodeId:n,onApplyFix:r,onSaveChanges:i,onRestart:o,isSaving:s})=>{const[a,u]=M.useState(""),[c,f]=M.useState(null),[h,g]=M.useState(!1),[_,T]=M.useState(""),E=async b=>{if(b.preventDefault(),!!a.trim()){g(!0),T(""),f(null);try{const S=await zGe(t,e,n,a);f(S)}catch(S){T(S.message)}finally{g(!1)}}};return I.jsxs("div",{className:"bg-stone-800 h-full flex flex-col",children:[I.jsxs("header",{className:"flex-shrink-0 p-4 border-b-2 border-amber-500",children:[I.jsxs("h3",{className:"font-display text-3xl text-stone-100 flex items-center",children:[I.jsx(j7e,{})," AI-Отладчик"]}),I.jsx("p",{className:"text-sm text-stone-400",children:"Опишите проблему, и AI предложит исправления."})]}),I.jsxs("div",{className:"p-6 flex-grow overflow-y-auto space-y-4",children:[I.jsxs("div",{children:[I.jsx("h4",{className:"font-bold text-stone-300",children:"Контекст для AI:"}),I.jsxs("div",{className:"text-sm bg-stone-900/50 p-3 rounded-md mt-2 space-y-1 text-stone-400",children:[I.jsxs("p",{children:[I.jsx("span",{className:"font-semibold text-amber-400",children:"Текущий узел:"})," ",n]}),I.jsxs("p",{children:[I.jsx("span",{className:"font-semibold text-amber-400",children:"Инвентарь:"})," ",e.inventory.join(", ")||"пусто"]}),I.jsxs("p",{children:[I.jsx("span",{className:"font-semibold text-amber-400",children:"Переменные:"})," ",JSON.stringify(e.vars)]})]})]}),I.jsxs("form",{onSubmit:E,children:[I.jsx("label",{htmlFor:"user-prompt",className:"font-bold text-stone-300 block mb-2",children:"Опишите проблему:"}),I.jsx("textarea",{id:"user-prompt",value:a,onChange:b=>u(b.target.value),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 h-24",placeholder:"Напр.: Я не могу открыть дверь, хотя у меня есть ключ."}),I.jsxs("button",{type:"submit",disabled:h,className:"w-full mt-2 flex items-center justify-center font-display text-xl bg-sky-600 text-white py-2 rounded-md hover:bg-sky-500 disabled:bg-stone-600",children:[I.jsx(K7e,{})," ",h?"АНАЛИЗ...":"Проанализировать"]})]}),_&&I.jsx("p",{className:"text-red-500 bg-red-900/50 p-3 rounded-md",children:_}),c&&I.jsxs("div",{className:"bg-stone-900/50 p-4 rounded-md space-y-3 border-l-4 border-amber-500",children:[I.jsx("h4",{className:"font-bold text-amber-400",children:"Анализ AI:"}),I.jsx("p",{className:"text-stone-300",children:c.explanation}),c.suggestions.length>0&&I.jsxs("div",{children:[I.jsx("h5",{className:"font-semibold text-stone-300 mb-2",children:"Предлагаемые исправления:"}),I.jsx("div",{className:"flex flex-col gap-2 items-start",children:c.suggestions.map((b,S)=>I.jsx("button",{onClick:()=>r(b),className:"text-sm text-left bg-teal-700 hover:bg-teal-600 text-white font-semibold py-2 px-3 rounded-md transition-colors",children:b.label},S))})]})]})]}),I.jsxs("footer",{className:"flex-shrink-0 p-4 border-t-2 border-stone-700 grid grid-cols-2 gap-4",children:[I.jsxs("button",{onClick:o,className:"flex items-center justify-center font-display text-xl bg-stone-700 text-stone-200 py-3 rounded-md hover:bg-stone-600 transition-colors",children:[I.jsx(Y7e,{})," Рестарт"]}),I.jsxs("button",{onClick:i,disabled:s,className:"flex items-center justify-center font-display text-xl bg-amber-500 text-stone-900 py-3 rounded-md hover:bg-amber-400 disabled:bg-stone-600",children:[I.jsx(W7e,{})," ",s?"СОХРАНЕНИЕ...":"Сохранить"]})]})]})},X7e=()=>{const{questId:t}=O2();cy();const[e,n]=M.useState(null),[r,i]=M.useState(null),[o,s]=M.useState(!0),[a,u]=M.useState(!1),[c,f]=M.useState(""),h=Cne(r,t??"");M.useEffect(()=>{if(!t){f("Квест не найден."),s(!1);return}s(!0),Dy(Ui(Tr,"games",t)).then(P=>{if(P.exists()){const O={id:P.id,...P.data()};n(O),i(O.dsl)}else f("Квест не найден.");s(!1)}).catch(P=>{console.error("Error fetching quest:",P),f("Ошибка при загрузке квеста."),s(!1)})},[t]);const g=async()=>{if(!(!t||!r)){u(!0);try{await hh(Ui(Tr,"games",t),{dsl:r,updatedAt:Ia()}),alert("Изменения сохранены!")}catch(P){console.error(P),alert("Не удалось сохранить изменения.")}finally{u(!1)}}},_=P=>{i(O=>{if(!O)return null;const q=JSON.parse(JSON.stringify(O)),{action:D,details:L}=P;try{switch(D){case"UPDATE_NODE":{const{nodeId:N,field:U,value:V}=L,$=q.nodes[N];if(!$)throw new Error(`Не найден узел с ID "${N}".`);let F=V;if(typeof F=="string")try{const X=F.trim();(X.startsWith("{")||X.startsWith("["))&&(F=JSON.parse(X))}catch{}F==null||Array.isArray(F)&&F.length===0?delete $[U]:$[U]=F;break}case"ADD_EFFECT_TO_CHOICE":{const{nodeId:N,choiceIndex:U,effect:V}=L,$=q.nodes[N];if(!$)throw new Error(`Не найден узел с ID "${N}".`);if(!$.choices||!Array.isArray($.choices))throw new Error(`У узла "${N}" нет массива выборов.`);const F=$.choices[U];if(!F)throw new Error(`Не найден выбор с индексом ${U} в узле "${N}".`);F.effects||(F.effects=[]),F.effects.push(V);break}case"UPDATE_CHOICE_CONDITION":{const{nodeId:N,choiceIndex:U,condition:V}=L,$=q.nodes[N];if(!$)throw new Error(`Не найден узел с ID "${N}".`);if(!$.choices)throw new Error(`У узла "${N}" нет массива выборов.`);const F=$.choices[U];if(!F)throw new Error(`Не найден выбор с индексом ${U} в узле "${N}".`);F.when=V;break}default:console.warn("Unknown fix action:",D)}return alert("Исправление применено. Не забудьте сохранить изменения."),q}catch(N){return console.error("Failed to apply fix:",N),alert(`Ошибка применения исправления: ${N.message}`),O}})};if(o)return I.jsx("div",{className:"text-center p-8 font-display text-4xl text-stone-400 animate-pulse",children:"ЗАГРУЗКА ОТЛАДЧИКА..."});if(c)return I.jsx("div",{className:"text-center p-8 text-2xl text-red-500",children:c});if(!e||!r||!h.isInitialized||!h.currentNode||!h.playerState)return I.jsx("div",{className:"text-center p-8 text-2xl text-stone-400",children:"Инициализация..."});const{currentNode:T,playerState:E,visibleChoices:b,handleChoice:S,resolveText:C}=h,R=T.bg&&r.assets.images[T.bg]?r.assets.images[T.bg]:void 0;return I.jsxs("div",{className:"flex h-[calc(100vh-80px)]",children:[I.jsx("div",{className:"w-1/2 flex-shrink-0 bg-stone-900 overflow-y-auto",children:I.jsx("div",{className:"p-8",children:I.jsx("div",{className:"w-full bg-cover bg-center rounded-lg shadow-lg overflow-hidden border-2 border-stone-800",style:{backgroundImage:`url(${R||""})`},children:I.jsxs("div",{className:"bg-stone-900/80 backdrop-blur-sm p-8 flex flex-col min-h-[60vh] text-stone-200",children:[I.jsx("h2",{className:"font-display text-4xl text-amber-400 mb-4",children:C(T.title)}),I.jsx("p",{className:"text-stone-300 whitespace-pre-wrap leading-relaxed mb-6",children:C(T.text)}),T.end&&I.jsx("div",{className:"text-center py-4 border-t border-stone-700 mt-6",children:I.jsx("h3",{className:`font-display text-4xl ${T.end.type==="win"?"text-lime-400":"text-red-500"}`,children:T.end.type==="win"?"Победа!":"Конец игры"})}),!T.end&&I.jsx("div",{className:"flex flex-col space-y-3",children:b.map((P,O)=>I.jsx("button",{onClick:()=>S(P),className:"text-left w-full p-4 bg-stone-800/70 border border-stone-600 rounded-md hover:bg-amber-500 hover:text-stone-900 transition-all",children:C(P.label)},O))})]})})})}),I.jsx("div",{className:"w-1/2 flex-shrink-0 border-l-2 border-stone-700 h-full",children:I.jsx(J7e,{dsl:r,playerState:E,currentNodeId:h.currentNodeId,onApplyFix:_,onSaveChanges:g,onRestart:()=>h.handleRestart(!0),isSaving:a})})]})},Q7e=()=>{const{currentUser:t,loading:e}=T_e(),n=Gs();if(e)return I.jsx("div",{className:"flex items-center justify-center min-h-[80vh]",children:I.jsx("p",{className:"font-display text-2xl text-stone-400 animate-pulse",children:"ИНИЦИАЛИЗАЦИЯ СИСТЕМЫ..."})});if(t)return I.jsxs(wq,{children:[I.jsx(Yr,{path:"/admin",element:I.jsx(QDe,{})}),I.jsx(Yr,{path:"/admin/quest/:questId",element:I.jsx($7e,{})}),I.jsx(Yr,{path:"/admin/quest/:questId/debug",element:I.jsx(X7e,{})})," ",I.jsx(Yr,{path:"/admin/architect",element:I.jsx(z7e,{})}),I.jsx(Yr,{path:"/",element:I.jsx(bq,{to:"/admin",replace:!0})}),I.jsx(Yr,{path:"/view",element:I.jsx(R$,{})}),I.jsx(Yr,{path:"/play/:questId",element:I.jsx(a2,{})}),I.jsx(Yr,{path:"*",element:I.jsx(oK,{})})]});const r=n.pathname.startsWith("/admin");return I.jsxs(wq,{children:[I.jsx(Yr,{path:"/view",element:I.jsx(R$,{})}),I.jsx(Yr,{path:"/play/:questId",element:I.jsx(a2,{})}),r&&I.jsx(Yr,{path:"/admin/*",element:I.jsx(iK,{})}),I.jsx(Yr,{path:"/admin",element:I.jsx(iK,{})}),I.jsx(Yr,{path:"/",element:I.jsx(bq,{to:"/admin",replace:!0})}),I.jsx(Yr,{path:"*",element:I.jsx(oK,{})})]})},Z7e=()=>I.jsx("div",{className:"min-h-screen",children:I.jsx(x_e,{children:I.jsxs(Ile,{children:[I.jsx(G7e,{}),I.jsx("main",{children:I.jsx(Q7e,{})})]})})}),Roe=document.getElementById("root");if(!Roe)throw new Error("Could not find root element to mount to");const eKe=gae.createRoot(Roe);eKe.render(I.jsx(ge.StrictMode,{children:I.jsx(Z7e,{})}));
